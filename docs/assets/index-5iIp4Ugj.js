const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-Di9w0c-k.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ur(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ke={},Ys=[],Wt=()=>{},ii=()=>!1,Ko=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),dr=e=>e.startsWith("onUpdate:"),Qe=Object.assign,fr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Ru=Object.prototype.hasOwnProperty,$e=(e,t)=>Ru.call(e,t),ve=Array.isArray,qs=e=>to(e)==="[object Map]",mn=e=>to(e)==="[object Set]",Yr=e=>to(e)==="[object Date]",ge=e=>typeof e=="function",He=e=>typeof e=="string",Pt=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",ci=e=>(xe(e)||ge(e))&&ge(e.then)&&ge(e.catch),ui=Object.prototype.toString,to=e=>ui.call(e),Iu=e=>to(e).slice(8,-1),di=e=>to(e)==="[object Object]",mr=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,On=ur(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Go=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Pu=/-\w/g,At=Go(e=>e.replace(Pu,t=>t.slice(1).toUpperCase())),Du=/\B([A-Z])/g,gs=Go(e=>e.replace(Du,"-$1").toLowerCase()),zo=Go(e=>e.charAt(0).toUpperCase()+e.slice(1)),ca=Go(e=>e?`on${zo(e)}`:""),fs=(e,t)=>!Object.is(e,t),bo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},fi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qr;const Yo=()=>qr||(qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function it(e){if(ve(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=He(n)?Mu(n):it(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(He(e)||xe(e))return e}const Lu=/;(?![^(]*\))/g,Bu=/:([^]+)/,Uu=/\/\*[^]*?\*\//g;function Mu(e){const t={};return e.replace(Uu,"").split(Lu).forEach(s=>{if(s){const n=s.split(Bu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function de(e){let t="";if(He(e))t=e;else if(ve(e))for(let s=0;s<e.length;s++){const n=de(e[s]);n&&(t+=n+" ")}else if(xe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Fu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ju=ur(Fu);function mi(e){return!!e||e===""}function Hu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Rs(e[n],t[n]);return s}function Rs(e,t){if(e===t)return!0;let s=Yr(e),n=Yr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Pt(e),n=Pt(t),s||n)return e===t;if(s=ve(e),n=ve(t),s||n)return s&&n?Hu(e,t):!1;if(s=xe(e),n=xe(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const i=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(i&&!l||!i&&l||!Rs(e[r],t[r]))return!1}}return String(e)===String(t)}function pr(e,t){return e.findIndex(s=>Rs(s,t))}const pi=e=>!!(e&&e.__v_isRef===!0),S=e=>He(e)?e:e==null?"":ve(e)||xe(e)&&(e.toString===ui||!ge(e.toString))?pi(e)?S(e.value):JSON.stringify(e,vi,2):String(e),vi=(e,t)=>pi(t)?vi(e,t.value):qs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[ua(n,a)+" =>"]=o,s),{})}:mn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>ua(s))}:Pt(t)?ua(t):xe(t)&&!ve(t)&&!di(t)?String(t):t,ua=(e,t="")=>{var s;return Pt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Wu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!t&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=dt;try{return dt=this,t()}finally{dt=s}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Vu(){return dt}let Ne;const da=new WeakSet;class hi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,da.has(this)&&(da.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||yi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xr(this),bi(this);const t=Ne,s=Rt;Ne=this,Rt=!0;try{return this.fn()}finally{_i(this),Ne=t,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)gr(t);this.deps=this.depsTail=void 0,Xr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?da.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ia(this)&&this.run()}get dirty(){return Ia(this)}}let gi=0,Rn,In;function yi(e,t=!1){if(e.flags|=8,t){e.next=In,In=e;return}e.next=Rn,Rn=e}function vr(){gi++}function hr(){if(--gi>0)return;if(In){let t=In;for(In=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Rn;){let t=Rn;for(Rn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function bi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _i(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),gr(n),Ku(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Ia(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wn)||(e.globalVersion=Wn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ia(e))))return;e.flags|=2;const t=e.dep,s=Ne,n=Rt;Ne=e,Rt=!0;try{bi(e);const o=e.fn(e._value);(t.version===0||fs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ne=s,Rt=n,_i(e),e.flags&=-3}}function gr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)gr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ku(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Rt=!0;const Ci=[];function ts(){Ci.push(Rt),Rt=!1}function ss(){const e=Ci.pop();Rt=e===void 0?!0:e}function Xr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Ne;Ne=void 0;try{t()}finally{Ne=s}}}let Wn=0;class Gu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ne||!Rt||Ne===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ne)s=this.activeLink=new Gu(Ne,this),Ne.deps?(s.prevDep=Ne.depsTail,Ne.depsTail.nextDep=s,Ne.depsTail=s):Ne.deps=Ne.depsTail=s,Si(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Ne.depsTail,s.nextDep=void 0,Ne.depsTail.nextDep=s,Ne.depsTail=s,Ne.deps===s&&(Ne.deps=n)}return s}trigger(t){this.version++,Wn++,this.notify(t)}notify(t){vr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{hr()}}}function Si(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Si(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Pa=new WeakMap,Ts=Symbol(""),Da=Symbol(""),Vn=Symbol("");function st(e,t,s){if(Rt&&Ne){let n=Pa.get(e);n||Pa.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new yr),o.map=n,o.key=s),o.track()}}function qt(e,t,s,n,o,a){const r=Pa.get(e);if(!r){Wn++;return}const i=l=>{l&&l.trigger()};if(vr(),t==="clear")r.forEach(i);else{const l=ve(e),u=l&&mr(s);if(l&&s==="length"){const d=Number(n);r.forEach((f,p)=>{(p==="length"||p===Vn||!Pt(p)&&p>=d)&&i(f)})}else switch((s!==void 0||r.has(void 0))&&i(r.get(s)),u&&i(r.get(Vn)),t){case"add":l?u&&i(r.get("length")):(i(r.get(Ts)),qs(e)&&i(r.get(Da)));break;case"delete":l||(i(r.get(Ts)),qs(e)&&i(r.get(Da)));break;case"set":qs(e)&&i(r.get(Ts));break}}hr()}function Ls(e){const t=Se(e);return t===e?t:(st(t,"iterate",Vn),kt(e)?t:t.map(Dt))}function qo(e){return st(e=Se(e),"iterate",Vn),e}function ls(e,t){return ns(e)?tn(Es(e)?Dt(t):t):Dt(t)}const zu={__proto__:null,[Symbol.iterator](){return fa(this,Symbol.iterator,e=>ls(this,e))},concat(...e){return Ls(this).concat(...e.map(t=>ve(t)?Ls(t):t))},entries(){return fa(this,"entries",e=>(e[1]=ls(this,e[1]),e))},every(e,t){return Gt(this,"every",e,t,void 0,arguments)},filter(e,t){return Gt(this,"filter",e,t,s=>s.map(n=>ls(this,n)),arguments)},find(e,t){return Gt(this,"find",e,t,s=>ls(this,s),arguments)},findIndex(e,t){return Gt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Gt(this,"findLast",e,t,s=>ls(this,s),arguments)},findLastIndex(e,t){return Gt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Gt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ma(this,"includes",e)},indexOf(...e){return ma(this,"indexOf",e)},join(e){return Ls(this).join(e)},lastIndexOf(...e){return ma(this,"lastIndexOf",e)},map(e,t){return Gt(this,"map",e,t,void 0,arguments)},pop(){return gn(this,"pop")},push(...e){return gn(this,"push",e)},reduce(e,...t){return Qr(this,"reduce",e,t)},reduceRight(e,...t){return Qr(this,"reduceRight",e,t)},shift(){return gn(this,"shift")},some(e,t){return Gt(this,"some",e,t,void 0,arguments)},splice(...e){return gn(this,"splice",e)},toReversed(){return Ls(this).toReversed()},toSorted(e){return Ls(this).toSorted(e)},toSpliced(...e){return Ls(this).toSpliced(...e)},unshift(...e){return gn(this,"unshift",e)},values(){return fa(this,"values",e=>ls(this,e))}};function fa(e,t,s){const n=qo(e),o=n[t]();return n!==e&&!kt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const Ju=Array.prototype;function Gt(e,t,s,n,o,a){const r=qo(e),i=r!==e&&!kt(e),l=r[t];if(l!==Ju[t]){const f=l.apply(e,a);return i?Dt(f):f}let u=s;r!==e&&(i?u=function(f,p){return s.call(this,ls(e,f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const d=l.call(r,u,n);return i&&o?o(d):d}function Qr(e,t,s,n){const o=qo(e);let a=s;return o!==e&&(kt(e)?s.length>3&&(a=function(r,i,l){return s.call(this,r,i,l,e)}):a=function(r,i,l){return s.call(this,r,ls(e,i),l,e)}),o[t](a,...n)}function ma(e,t,s){const n=Se(e);st(n,"iterate",Vn);const o=n[t](...s);return(o===-1||o===!1)&&wr(s[0])?(s[0]=Se(s[0]),n[t](...s)):o}function gn(e,t,s=[]){ts(),vr();const n=Se(e)[t].apply(e,s);return hr(),ss(),n}const Yu=ur("__proto__,__v_isRef,__isVue"),$i=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pt));function qu(e){Pt(e)||(e=String(e));const t=Se(this);return st(t,"has",e),t.hasOwnProperty(e)}class ki{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?rd:Ti:a?Ni:Ai).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=ve(t);if(!o){let l;if(r&&(l=zu[s]))return l;if(s==="hasOwnProperty")return qu}const i=Reflect.get(t,s,ot(t)?t:n);if((Pt(s)?$i.has(s):Yu(s))||(o||st(t,"get",s),a))return i;if(ot(i)){const l=r&&mr(s)?i:i.value;return o&&xe(l)?Ba(l):l}return xe(i)?o?Ba(i):Vt(i):i}}class xi extends ki{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=ve(t)&&mr(s);if(!this._isShallow){const u=ns(a);if(!kt(n)&&!ns(n)&&(a=Se(a),n=Se(n)),!r&&ot(a)&&!ot(n))return u||(a.value=n),!0}const i=r?Number(s)<t.length:$e(t,s),l=Reflect.set(t,s,n,ot(t)?t:o);return t===Se(o)&&(i?fs(n,a)&&qt(t,"set",s,n):qt(t,"add",s,n)),l}deleteProperty(t,s){const n=$e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&qt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Pt(s)||!$i.has(s))&&st(t,"has",s),n}ownKeys(t){return st(t,"iterate",ve(t)?"length":Ts),Reflect.ownKeys(t)}}class Xu extends ki{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Qu=new xi,Zu=new Xu,ed=new xi(!0);const La=e=>e,fo=e=>Reflect.getPrototypeOf(e);function td(e,t,s){return function(...n){const o=this.__v_raw,a=Se(o),r=qs(a),i=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,u=o[e](...n),d=s?La:t?tn:Dt;return!t&&st(a,"iterate",l?Da:Ts),Qe(Object.create(u),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:i?[d(f[0]),d(f[1])]:d(f),done:p}}})}}function mo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function sd(e,t){const s={get(o){const a=this.__v_raw,r=Se(a),i=Se(o);e||(fs(o,i)&&st(r,"get",o),st(r,"get",i));const{has:l}=fo(r),u=t?La:e?tn:Dt;if(l.call(r,o))return u(a.get(o));if(l.call(r,i))return u(a.get(i));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&st(Se(o),"iterate",Ts),o.size},has(o){const a=this.__v_raw,r=Se(a),i=Se(o);return e||(fs(o,i)&&st(r,"has",o),st(r,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const r=this,i=r.__v_raw,l=Se(i),u=t?La:e?tn:Dt;return!e&&st(l,"iterate",Ts),i.forEach((d,f)=>o.call(a,u(d),u(f),r))}};return Qe(s,e?{add:mo("add"),set:mo("set"),delete:mo("delete"),clear:mo("clear")}:{add(o){!t&&!kt(o)&&!ns(o)&&(o=Se(o));const a=Se(this);return fo(a).has.call(a,o)||(a.add(o),qt(a,"add",o,o)),this},set(o,a){!t&&!kt(a)&&!ns(a)&&(a=Se(a));const r=Se(this),{has:i,get:l}=fo(r);let u=i.call(r,o);u||(o=Se(o),u=i.call(r,o));const d=l.call(r,o);return r.set(o,a),u?fs(a,d)&&qt(r,"set",o,a):qt(r,"add",o,a),this},delete(o){const a=Se(this),{has:r,get:i}=fo(a);let l=r.call(a,o);l||(o=Se(o),l=r.call(a,o)),i&&i.call(a,o);const u=a.delete(o);return l&&qt(a,"delete",o,void 0),u},clear(){const o=Se(this),a=o.size!==0,r=o.clear();return a&&qt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=td(o,e,t)}),s}function br(e,t){const s=sd(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get($e(s,o)&&o in n?s:n,o,a)}const nd={get:br(!1,!1)},od={get:br(!1,!0)},ad={get:br(!0,!1)};const Ai=new WeakMap,Ni=new WeakMap,Ti=new WeakMap,rd=new WeakMap;function ld(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function id(e){return e.__v_skip||!Object.isExtensible(e)?0:ld(Iu(e))}function Vt(e){return ns(e)?e:_r(e,!1,Qu,nd,Ai)}function Ei(e){return _r(e,!1,ed,od,Ni)}function Ba(e){return _r(e,!0,Zu,ad,Ti)}function _r(e,t,s,n,o){if(!xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=id(e);if(a===0)return e;const r=o.get(e);if(r)return r;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Es(e){return ns(e)?Es(e.__v_raw):!!(e&&e.__v_isReactive)}function ns(e){return!!(e&&e.__v_isReadonly)}function kt(e){return!!(e&&e.__v_isShallow)}function wr(e){return e?!!e.__v_raw:!1}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function cd(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&fi(e,"__v_skip",!0),e}const Dt=e=>xe(e)?Vt(e):e,tn=e=>xe(e)?Ba(e):e;function ot(e){return e?e.__v_isRef===!0:!1}function E(e){return Oi(e,!1)}function ud(e){return Oi(e,!0)}function Oi(e,t){return ot(e)?e:new dd(e,t)}class dd{constructor(t,s){this.dep=new yr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Se(t),this._value=s?t:Dt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||kt(t)||ns(t);t=n?t:Se(t),fs(t,s)&&(this._rawValue=t,this._value=n?t:Dt(t),this.dep.trigger())}}function P(e){return ot(e)?e.value:e}const fd={get:(e,t,s)=>t==="__v_raw"?e:P(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ot(o)&&!ot(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Ri(e){return Es(e)?e:new Proxy(e,fd)}class md{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new yr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return yi(this,!0),!0}get value(){const t=this.dep.track();return wi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pd(e,t,s=!1){let n,o;return ge(e)?n=e:(n=e.get,o=e.set),new md(n,o,s)}const po={},ko=new WeakMap;let xs;function vd(e,t=!1,s=xs){if(s){let n=ko.get(s);n||ko.set(s,n=[]),n.push(e)}}function hd(e,t,s=ke){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:i,call:l}=s,u=R=>o?R:kt(R)||o===!1||o===0?Xt(R,1):Xt(R);let d,f,p,m,g=!1,y=!1;if(ot(e)?(f=()=>e.value,g=kt(e)):Es(e)?(f=()=>u(e),g=!0):ve(e)?(y=!0,g=e.some(R=>Es(R)||kt(R)),f=()=>e.map(R=>{if(ot(R))return R.value;if(Es(R))return u(R);if(ge(R))return l?l(R,2):R()})):ge(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){ts();try{p()}finally{ss()}}const R=xs;xs=d;try{return l?l(e,3,[m]):e(m)}finally{xs=R}}:f=Wt,t&&o){const R=f,q=o===!0?1/0:o;f=()=>Xt(R(),q)}const N=Vu(),$=()=>{d.stop(),N&&N.active&&fr(N.effects,d)};if(a&&t){const R=t;t=(...q)=>{R(...q),$()}}let w=y?new Array(e.length).fill(po):po;const _=R=>{if(!(!(d.flags&1)||!d.dirty&&!R))if(t){const q=d.run();if(o||g||(y?q.some((Q,L)=>fs(Q,w[L])):fs(q,w))){p&&p();const Q=xs;xs=d;try{const L=[q,w===po?void 0:y&&w[0]===po?[]:w,m];w=q,l?l(t,3,L):t(...L)}finally{xs=Q}}}else d.run()};return i&&i(_),d=new hi(f),d.scheduler=r?()=>r(_,!1):_,m=R=>vd(R,!1,d),p=d.onStop=()=>{const R=ko.get(d);if(R){if(l)l(R,4);else for(const q of R)q();ko.delete(d)}},t?n?_(!0):w=d.run():r?r(_.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function Xt(e,t=1/0,s){if(t<=0||!xe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ot(e))Xt(e.value,t,s);else if(ve(e))for(let n=0;n<e.length;n++)Xt(e[n],t,s);else if(mn(e)||qs(e))e.forEach(n=>{Xt(n,t,s)});else if(di(e)){for(const n in e)Xt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Xt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function so(e,t,s,n){try{return n?e(...n):e()}catch(o){Xo(o,t,s)}}function Kt(e,t,s,n){if(ge(e)){const o=so(e,t,s,n);return o&&ci(o)&&o.catch(a=>{Xo(a,t,s)}),o}if(ve(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Kt(e[a],t,s,n));return o}}function Xo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||ke;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,l,u)===!1)return}i=i.parent}if(a){ts(),so(a,null,10,[e,l,u]),ss();return}}gd(e,s,o,n,r)}function gd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const ct=[];let Ft=-1;const Xs=[];let is=null,js=0;const Ii=Promise.resolve();let xo=null;function Kn(e){const t=xo||Ii;return e?t.then(this?e.bind(this):e):t}function yd(e){let t=Ft+1,s=ct.length;for(;t<s;){const n=t+s>>>1,o=ct[n],a=Gn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Cr(e){if(!(e.flags&1)){const t=Gn(e),s=ct[ct.length-1];!s||!(e.flags&2)&&t>=Gn(s)?ct.push(e):ct.splice(yd(t),0,e),e.flags|=1,Pi()}}function Pi(){xo||(xo=Ii.then(Li))}function bd(e){ve(e)?Xs.push(...e):is&&e.id===-1?is.splice(js+1,0,e):e.flags&1||(Xs.push(e),e.flags|=1),Pi()}function Zr(e,t,s=Ft+1){for(;s<ct.length;s++){const n=ct[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ct.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Di(e){if(Xs.length){const t=[...new Set(Xs)].sort((s,n)=>Gn(s)-Gn(n));if(Xs.length=0,is){is.push(...t);return}for(is=t,js=0;js<is.length;js++){const s=is[js];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}is=null,js=0}}const Gn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Li(e){try{for(Ft=0;Ft<ct.length;Ft++){const t=ct[Ft];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),so(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ft<ct.length;Ft++){const t=ct[Ft];t&&(t.flags&=-2)}Ft=-1,ct.length=0,Di(),xo=null,(ct.length||Xs.length)&&Li()}}let qe=null,Bi=null;function Ao(e){const t=qe;return qe=e,Bi=e&&e.type.__scopeId||null,t}function _d(e,t=qe,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Eo(-1);const a=Ao(t);let r;try{r=e(...o)}finally{Ao(a),n._d&&Eo(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Re(e,t){if(qe===null)return e;const s=ta(qe),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,i,l=ke]=t[o];a&&(ge(a)&&(a={mounted:a,updated:a}),a.deep&&Xt(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:i,modifiers:l}))}return e}function bs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const i=o[r];a&&(i.oldValue=a[r].value);let l=i.dir[n];l&&(ts(),Kt(l,s,8,[e.el,i,e,t]),ss())}}function _o(e,t){if(nt){let s=nt.provides;const n=nt.parent&&nt.parent.provides;n===s&&(s=nt.provides=Object.create(n)),s[e]=t}}function It(e,t,s=!1){const n=Cf();if(n||Zs){let o=Zs?Zs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ge(t)?t.call(n&&n.proxy):t}}const wd=Symbol.for("v-scx"),Cd=()=>It(wd);function ft(e,t,s){return Ui(e,t,s)}function Ui(e,t,s=ke){const{immediate:n,deep:o,flush:a,once:r}=s,i=Qe({},s),l=t&&n||!t&&a!=="post";let u;if(Yn){if(a==="sync"){const m=Cd();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Wt,m.resume=Wt,m.pause=Wt,m}}const d=nt;i.call=(m,g,y)=>Kt(m,d,g,y);let f=!1;a==="post"?i.scheduler=m=>{ht(m,d&&d.suspense)}:a!=="sync"&&(f=!0,i.scheduler=(m,g)=>{g?m():Cr(m)}),i.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const p=hd(e,t,i);return Yn&&(u?u.push(p):l&&p()),p}function Sd(e,t,s){const n=this.proxy,o=He(e)?e.includes(".")?Mi(n,e):()=>n[e]:e.bind(n,n);let a;ge(t)?a=t:(a=t.handler,s=t);const r=no(this),i=Ui(o,a.bind(n),s);return r(),i}function Mi(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const $d=Symbol("_vte"),kd=e=>e.__isTeleport,xd=Symbol("_leaveCb");function Sr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Sr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Fi(e,t){return ge(e)?Qe({name:e.name},t,{setup:e}):e}function ji(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const No=new WeakMap;function Pn(e,t,s,n,o=!1){if(ve(e)){e.forEach((g,y)=>Pn(g,t&&(ve(t)?t[y]:t),s,n,o));return}if(Qs(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Pn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?ta(n.component):n.el,r=o?null:a,{i,r:l}=e,u=t&&t.r,d=i.refs===ke?i.refs={}:i.refs,f=i.setupState,p=Se(f),m=f===ke?ii:g=>$e(p,g);if(u!=null&&u!==l){if(el(t),He(u))d[u]=null,m(u)&&(f[u]=null);else if(ot(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(ge(l))so(l,i,12,[r,d]);else{const g=He(l),y=ot(l);if(g||y){const N=()=>{if(e.f){const $=g?m(l)?f[l]:d[l]:l.value;if(o)ve($)&&fr($,a);else if(ve($))$.includes(a)||$.push(a);else if(g)d[l]=[a],m(l)&&(f[l]=d[l]);else{const w=[a];l.value=w,e.k&&(d[e.k]=w)}}else g?(d[l]=r,m(l)&&(f[l]=r)):y&&(l.value=r,e.k&&(d[e.k]=r))};if(r){const $=()=>{N(),No.delete(e)};$.id=-1,No.set(e,$),ht($,s)}else el(e),N()}}}function el(e){const t=No.get(e);t&&(t.flags|=8,No.delete(e))}Yo().requestIdleCallback;Yo().cancelIdleCallback;const Qs=e=>!!e.type.__asyncLoader,Hi=e=>e.type.__isKeepAlive;function Ad(e,t){Wi(e,"a",t)}function Nd(e,t){Wi(e,"da",t)}function Wi(e,t,s=nt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Qo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Hi(o.parent.vnode)&&Td(n,t,s,o),o=o.parent}}function Td(e,t,s,n){const o=Qo(t,e,n,!0);$r(()=>{fr(n[t],o)},s)}function Qo(e,t,s=nt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{ts();const i=no(s),l=Kt(t,s,e,r);return i(),ss(),l});return n?o.unshift(a):o.push(a),a}}const as=e=>(t,s=nt)=>{(!Yn||e==="sp")&&Qo(e,(...n)=>t(...n),s)},Ed=as("bm"),_t=as("m"),Od=as("bu"),Rd=as("u"),Vi=as("bum"),$r=as("um"),Id=as("sp"),Pd=as("rtg"),Dd=as("rtc");function Ld(e,t=nt){Qo("ec",e,t)}const Bd="components";function Ud(e,t){return Fd(Bd,e,!0,t)||e}const Md=Symbol.for("v-ndc");function Fd(e,t,s=!0,n=!1){const o=qe||nt;if(o){const a=o.type;{const i=Af(a,!1);if(i&&(i===t||i===At(t)||i===zo(At(t))))return a}const r=tl(o[e]||a[e],t)||tl(o.appContext[e],t);return!r&&n?a:r}}function tl(e,t){return e&&(e[t]||e[At(t)]||e[zo(At(t))])}function ie(e,t,s,n){let o;const a=s,r=ve(e);if(r||He(e)){const i=r&&Es(e);let l=!1,u=!1;i&&(l=!kt(e),u=ns(e),e=qo(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(l?u?tn(Dt(e[d])):Dt(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(xe(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const d=i[l];o[l]=t(e[d],d,l,a)}}else o=[];return o}function jd(e,t,s={},n,o){if(qe.ce||qe.parent&&Qs(qe.parent)&&qe.parent.ce){const u=Object.keys(s).length>0;return s.name=t,v(),Ue(Z,null,[he("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),v();const r=a&&Ki(a(s)),i=s.key||r&&r.key,l=Ue(Z,{key:(i&&!Pt(i)?i:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),l}function Ki(e){return e.some(t=>Jn(t)?!(t.type===os||t.type===Z&&!Ki(t.children)):!0)?e:null}const Ua=e=>e?uc(e)?ta(e):Ua(e.parent):null,Dn=Qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ua(e.parent),$root:e=>Ua(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zi(e),$forceUpdate:e=>e.f||(e.f=()=>{Cr(e.update)}),$nextTick:e=>e.n||(e.n=Kn.bind(e.proxy)),$watch:e=>Sd.bind(e)}),pa=(e,t)=>e!==ke&&!e.__isScriptSetup&&$e(e,t),Hd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:i,appContext:l}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(pa(n,t))return r[t]=1,n[t];if(o!==ke&&$e(o,t))return r[t]=2,o[t];if($e(a,t))return r[t]=3,a[t];if(s!==ke&&$e(s,t))return r[t]=4,s[t];Ma&&(r[t]=0)}}const u=Dn[t];let d,f;if(u)return t==="$attrs"&&st(e.attrs,"get",""),u(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(s!==ke&&$e(s,t))return r[t]=4,s[t];if(f=l.config.globalProperties,$e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return pa(o,t)?(o[t]=s,!0):n!==ke&&$e(n,t)?(n[t]=s,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},i){let l;return!!(s[i]||e!==ke&&i[0]!=="$"&&$e(e,i)||pa(t,i)||$e(a,i)||$e(n,i)||$e(Dn,i)||$e(o.config.globalProperties,i)||(l=r.__cssModules)&&l[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:$e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function sl(e){return ve(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ma=!0;function Wd(e){const t=zi(e),s=e.proxy,n=e.ctx;Ma=!1,t.beforeCreate&&nl(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:i,provide:l,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:N,beforeDestroy:$,beforeUnmount:w,destroyed:_,unmounted:R,render:q,renderTracked:Q,renderTriggered:L,errorCaptured:Y,serverPrefetch:J,expose:fe,inheritAttrs:me,components:ce,directives:_e,filters:we}=t;if(u&&Vd(u,n,null),r)for(const X in r){const D=r[X];ge(D)&&(n[X]=D.bind(s))}if(o){const X=o.call(s,s);xe(X)&&(e.data=Vt(X))}if(Ma=!0,a)for(const X in a){const D=a[X],V=ge(D)?D.bind(s,s):ge(D.get)?D.get.bind(s,s):Wt,G=!ge(D)&&ge(D.set)?D.set.bind(s):Wt,K=T({get:V,set:G});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>K.value,set:oe=>K.value=oe})}if(i)for(const X in i)Gi(i[X],n,s,X);if(l){const X=ge(l)?l.call(s):l;Reflect.ownKeys(X).forEach(D=>{_o(D,X[D])})}d&&nl(d,e,"c");function re(X,D){ve(D)?D.forEach(V=>X(V.bind(s))):D&&X(D.bind(s))}if(re(Ed,f),re(_t,p),re(Od,m),re(Rd,g),re(Ad,y),re(Nd,N),re(Ld,Y),re(Dd,Q),re(Pd,L),re(Vi,w),re($r,R),re(Id,J),ve(fe))if(fe.length){const X=e.exposed||(e.exposed={});fe.forEach(D=>{Object.defineProperty(X,D,{get:()=>s[D],set:V=>s[D]=V,enumerable:!0})})}else e.exposed||(e.exposed={});q&&e.render===Wt&&(e.render=q),me!=null&&(e.inheritAttrs=me),ce&&(e.components=ce),_e&&(e.directives=_e),J&&ji(e)}function Vd(e,t,s=Wt){ve(e)&&(e=Fa(e));for(const n in e){const o=e[n];let a;xe(o)?"default"in o?a=It(o.from||n,o.default,!0):a=It(o.from||n):a=It(o),ot(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function nl(e,t,s){Kt(ve(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Gi(e,t,s,n){let o=n.includes(".")?Mi(s,n):()=>s[n];if(He(e)){const a=t[e];ge(a)&&ft(o,a)}else if(ge(e))ft(o,e.bind(s));else if(xe(e))if(ve(e))e.forEach(a=>Gi(a,t,s,n));else{const a=ge(e.handler)?e.handler.bind(s):t[e.handler];ge(a)&&ft(o,a,e)}}function zi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,i=a.get(t);let l;return i?l=i:!o.length&&!s&&!n?l=t:(l={},o.length&&o.forEach(u=>To(l,u,r,!0)),To(l,t,r)),xe(t)&&a.set(t,l),l}function To(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&To(e,a,s,!0),o&&o.forEach(r=>To(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const i=Kd[r]||s&&s[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Kd={data:ol,props:al,emits:al,methods:An,computed:An,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:An,directives:An,watch:zd,provide:ol,inject:Gd};function ol(e,t){return t?e?function(){return Qe(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function Gd(e,t){return An(Fa(e),Fa(t))}function Fa(e){if(ve(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function An(e,t){return e?Qe(Object.create(null),e,t):t}function al(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:Qe(Object.create(null),sl(e),sl(t??{})):t}function zd(e,t){if(!e)return t;if(!t)return e;const s=Qe(Object.create(null),e);for(const n in t)s[n]=rt(e[n],t[n]);return s}function Ji(){return{app:null,config:{isNativeTag:ii,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jd=0;function Yd(e,t){return function(n,o=null){ge(n)||(n=Qe({},n)),o!=null&&!xe(o)&&(o=null);const a=Ji(),r=new WeakSet,i=[];let l=!1;const u=a.app={_uid:Jd++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Tf,get config(){return a.config},set config(d){},use(d,...f){return r.has(d)||(d&&ge(d.install)?(r.add(d),d.install(u,...f)):ge(d)&&(r.add(d),d(u,...f))),u},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),u},component(d,f){return f?(a.components[d]=f,u):a.components[d]},directive(d,f){return f?(a.directives[d]=f,u):a.directives[d]},mount(d,f,p){if(!l){const m=u._ceVNode||he(n,o);return m.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(m,d,p),l=!0,u._container=d,d.__vue_app__=u,ta(m.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Kt(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return a.provides[d]=f,u},runWithContext(d){const f=Zs;Zs=u;try{return d()}finally{Zs=f}}};return u}}let Zs=null;const qd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${At(t)}Modifiers`]||e[`${gs(t)}Modifiers`];function Xd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ke;let o=s;const a=t.startsWith("update:"),r=a&&qd(n,t.slice(7));r&&(r.trim&&(o=s.map(d=>He(d)?d.trim():d)),r.number&&(o=s.map(Jo)));let i,l=n[i=ca(t)]||n[i=ca(At(t))];!l&&a&&(l=n[i=ca(gs(t))]),l&&Kt(l,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Kt(u,e,6,o)}}const Qd=new WeakMap;function Yi(e,t,s=!1){const n=s?Qd:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},i=!1;if(!ge(e)){const l=u=>{const d=Yi(u,t,!0);d&&(i=!0,Qe(r,d))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!i?(xe(e)&&n.set(e,null),null):(ve(a)?a.forEach(l=>r[l]=null):Qe(r,a),xe(e)&&n.set(e,r),r)}function Zo(e,t){return!e||!Ko(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,gs(t))||$e(e,t))}function rl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:i,emit:l,render:u,renderCache:d,props:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=e,N=Ao(e);let $,w;try{if(s.shapeFlag&4){const R=o||n,q=R;$=jt(u.call(q,R,d,f,m,p,g)),w=i}else{const R=t;$=jt(R.length>1?R(f,{attrs:i,slots:r,emit:l}):R(f,null)),w=t.props?i:Zd(i)}}catch(R){Ln.length=0,Xo(R,e,1),$=he(os)}let _=$;if(w&&y!==!1){const R=Object.keys(w),{shapeFlag:q}=_;R.length&&q&7&&(a&&R.some(dr)&&(w=ef(w,a)),_=sn(_,w,!1,!0))}return s.dirs&&(_=sn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(s.dirs):s.dirs),s.transition&&Sr(_,s.transition),$=_,Ao(N),$}const Zd=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ko(s))&&((t||(t={}))[s]=e[s]);return t},ef=(e,t)=>{const s={};for(const n in e)(!dr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function tf(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:i,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?ll(n,r,u):!!r;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(r[p]!==n[p]&&!Zo(u,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===r?!1:n?r?ll(n,r,u):!0:!!r;return!1}function ll(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!Zo(s,a))return!0}return!1}function sf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const qi={},Xi=()=>Object.create(qi),Qi=e=>Object.getPrototypeOf(e)===qi;function nf(e,t,s,n=!1){const o={},a=Xi();e.propsDefaults=Object.create(null),Zi(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:Ei(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function of(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,i=Se(o),[l]=e.propsOptions;let u=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Zo(e.emitsOptions,p))continue;const m=t[p];if(l)if($e(a,p))m!==a[p]&&(a[p]=m,u=!0);else{const g=At(p);o[g]=ja(l,i,g,m,e,!1)}else m!==a[p]&&(a[p]=m,u=!0)}}}else{Zi(e,t,o,a)&&(u=!0);let d;for(const f in i)(!t||!$e(t,f)&&((d=gs(f))===f||!$e(t,d)))&&(l?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=ja(l,i,f,void 0,e,!0)):delete o[f]);if(a!==i)for(const f in a)(!t||!$e(t,f))&&(delete a[f],u=!0)}u&&qt(e.attrs,"set","")}function Zi(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,i;if(t)for(let l in t){if(On(l))continue;const u=t[l];let d;o&&$e(o,d=At(l))?!a||!a.includes(d)?s[d]=u:(i||(i={}))[d]=u:Zo(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,r=!0)}if(a){const l=Se(s),u=i||ke;for(let d=0;d<a.length;d++){const f=a[d];s[f]=ja(o,l,f,u[f],e,!$e(u,f))}}return r}function ja(e,t,s,n,o,a){const r=e[s];if(r!=null){const i=$e(r,"default");if(i&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ge(l)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=no(o);n=u[s]=l.call(null,t),d()}}else n=l;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!i?n=!1:r[1]&&(n===""||n===gs(s))&&(n=!0))}return n}const af=new WeakMap;function ec(e,t,s=!1){const n=s?af:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},i=[];let l=!1;if(!ge(e)){const d=f=>{l=!0;const[p,m]=ec(f,t,!0);Qe(r,p),m&&i.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!l)return xe(e)&&n.set(e,Ys),Ys;if(ve(a))for(let d=0;d<a.length;d++){const f=At(a[d]);il(f)&&(r[f]=ke)}else if(a)for(const d in a){const f=At(d);if(il(f)){const p=a[d],m=r[f]=ve(p)||ge(p)?{type:p}:Qe({},p),g=m.type;let y=!1,N=!0;if(ve(g))for(let $=0;$<g.length;++$){const w=g[$],_=ge(w)&&w.name;if(_==="Boolean"){y=!0;break}else _==="String"&&(N=!1)}else y=ge(g)&&g.name==="Boolean";m[0]=y,m[1]=N,(y||$e(m,"default"))&&i.push(f)}}const u=[r,i];return xe(e)&&n.set(e,u),u}function il(e){return e[0]!=="$"&&!On(e)}const kr=e=>e==="_"||e==="_ctx"||e==="$stable",xr=e=>ve(e)?e.map(jt):[jt(e)],rf=(e,t,s)=>{if(t._n)return t;const n=_d((...o)=>xr(t(...o)),s);return n._c=!1,n},tc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(kr(o))continue;const a=e[o];if(ge(a))t[o]=rf(o,a,n);else if(a!=null){const r=xr(a);t[o]=()=>r}}},sc=(e,t)=>{const s=xr(t);e.slots.default=()=>s},nc=(e,t,s)=>{for(const n in t)(s||!kr(n))&&(e[n]=t[n])},lf=(e,t,s)=>{const n=e.slots=Xi();if(e.vnode.shapeFlag&32){const o=t._;o?(nc(n,t,s),s&&fi(n,"_",o,!0)):tc(t,n)}else t&&sc(e,t)},cf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=ke;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:nc(o,t,s):(a=!t.$stable,tc(t,o)),r=t}else t&&(sc(e,t),r={default:1});if(a)for(const i in o)!kr(i)&&r[i]==null&&delete o[i]},ht=pf;function uf(e){return df(e)}function df(e,t){const s=Yo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:i,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=Wt,insertStaticContent:g}=e,y=(C,k,I,M=null,H=null,F=null,te=void 0,z=null,A=!!k.dynamicChildren)=>{if(C===k)return;C&&!yn(C,k)&&(M=j(C),oe(C,H,F,!0),C=null),k.patchFlag===-2&&(A=!1,k.dynamicChildren=null);const{type:b,ref:x,shapeFlag:O}=k;switch(b){case ea:N(C,k,I,M);break;case os:$(C,k,I,M);break;case wo:C==null&&w(k,I,M,te);break;case Z:ce(C,k,I,M,H,F,te,z,A);break;default:O&1?q(C,k,I,M,H,F,te,z,A):O&6?_e(C,k,I,M,H,F,te,z,A):(O&64||O&128)&&b.process(C,k,I,M,H,F,te,z,A,le)}x!=null&&H?Pn(x,C&&C.ref,F,k||C,!k):x==null&&C&&C.ref!=null&&Pn(C.ref,null,F,C,!0)},N=(C,k,I,M)=>{if(C==null)n(k.el=i(k.children),I,M);else{const H=k.el=C.el;k.children!==C.children&&u(H,k.children)}},$=(C,k,I,M)=>{C==null?n(k.el=l(k.children||""),I,M):k.el=C.el},w=(C,k,I,M)=>{[C.el,C.anchor]=g(C.children,k,I,M,C.el,C.anchor)},_=({el:C,anchor:k},I,M)=>{let H;for(;C&&C!==k;)H=p(C),n(C,I,M),C=H;n(k,I,M)},R=({el:C,anchor:k})=>{let I;for(;C&&C!==k;)I=p(C),o(C),C=I;o(k)},q=(C,k,I,M,H,F,te,z,A)=>{if(k.type==="svg"?te="svg":k.type==="math"&&(te="mathml"),C==null)Q(k,I,M,H,F,te,z,A);else{const b=C.el&&C.el._isVueCE?C.el:null;try{b&&b._beginPatch(),J(C,k,H,F,te,z,A)}finally{b&&b._endPatch()}}},Q=(C,k,I,M,H,F,te,z)=>{let A,b;const{props:x,shapeFlag:O,transition:B,dirs:W}=C;if(A=C.el=r(C.type,F,x&&x.is,x),O&8?d(A,C.children):O&16&&Y(C.children,A,null,M,H,va(C,F),te,z),W&&bs(C,null,M,"created"),L(A,C,C.scopeId,te,M),x){for(const pe in x)pe!=="value"&&!On(pe)&&a(A,pe,null,x[pe],F,M);"value"in x&&a(A,"value",null,x.value,F),(b=x.onVnodeBeforeMount)&&Ut(b,M,C)}W&&bs(C,null,M,"beforeMount");const ee=ff(H,B);ee&&B.beforeEnter(A),n(A,k,I),((b=x&&x.onVnodeMounted)||ee||W)&&ht(()=>{b&&Ut(b,M,C),ee&&B.enter(A),W&&bs(C,null,M,"mounted")},H)},L=(C,k,I,M,H)=>{if(I&&m(C,I),M)for(let F=0;F<M.length;F++)m(C,M[F]);if(H){let F=H.subTree;if(k===F||lc(F.type)&&(F.ssContent===k||F.ssFallback===k)){const te=H.vnode;L(C,te,te.scopeId,te.slotScopeIds,H.parent)}}},Y=(C,k,I,M,H,F,te,z,A=0)=>{for(let b=A;b<C.length;b++){const x=C[b]=z?cs(C[b]):jt(C[b]);y(null,x,k,I,M,H,F,te,z)}},J=(C,k,I,M,H,F,te)=>{const z=k.el=C.el;let{patchFlag:A,dynamicChildren:b,dirs:x}=k;A|=C.patchFlag&16;const O=C.props||ke,B=k.props||ke;let W;if(I&&_s(I,!1),(W=B.onVnodeBeforeUpdate)&&Ut(W,I,k,C),x&&bs(k,C,I,"beforeUpdate"),I&&_s(I,!0),(O.innerHTML&&B.innerHTML==null||O.textContent&&B.textContent==null)&&d(z,""),b?fe(C.dynamicChildren,b,z,I,M,va(k,H),F):te||D(C,k,z,null,I,M,va(k,H),F,!1),A>0){if(A&16)me(z,O,B,I,H);else if(A&2&&O.class!==B.class&&a(z,"class",null,B.class,H),A&4&&a(z,"style",O.style,B.style,H),A&8){const ee=k.dynamicProps;for(let pe=0;pe<ee.length;pe++){const ue=ee[pe],Pe=O[ue],Ee=B[ue];(Ee!==Pe||ue==="value")&&a(z,ue,Pe,Ee,H,I)}}A&1&&C.children!==k.children&&d(z,k.children)}else!te&&b==null&&me(z,O,B,I,H);((W=B.onVnodeUpdated)||x)&&ht(()=>{W&&Ut(W,I,k,C),x&&bs(k,C,I,"updated")},M)},fe=(C,k,I,M,H,F,te)=>{for(let z=0;z<k.length;z++){const A=C[z],b=k[z],x=A.el&&(A.type===Z||!yn(A,b)||A.shapeFlag&198)?f(A.el):I;y(A,b,x,null,M,H,F,te,!0)}},me=(C,k,I,M,H)=>{if(k!==I){if(k!==ke)for(const F in k)!On(F)&&!(F in I)&&a(C,F,k[F],null,H,M);for(const F in I){if(On(F))continue;const te=I[F],z=k[F];te!==z&&F!=="value"&&a(C,F,z,te,H,M)}"value"in I&&a(C,"value",k.value,I.value,H)}},ce=(C,k,I,M,H,F,te,z,A)=>{const b=k.el=C?C.el:i(""),x=k.anchor=C?C.anchor:i("");let{patchFlag:O,dynamicChildren:B,slotScopeIds:W}=k;W&&(z=z?z.concat(W):W),C==null?(n(b,I,M),n(x,I,M),Y(k.children||[],I,x,H,F,te,z,A)):O>0&&O&64&&B&&C.dynamicChildren&&C.dynamicChildren.length===B.length?(fe(C.dynamicChildren,B,I,H,F,te,z),(k.key!=null||H&&k===H.subTree)&&oc(C,k,!0)):D(C,k,I,x,H,F,te,z,A)},_e=(C,k,I,M,H,F,te,z,A)=>{k.slotScopeIds=z,C==null?k.shapeFlag&512?H.ctx.activate(k,I,M,te,A):we(k,I,M,H,F,te,A):ne(C,k,A)},we=(C,k,I,M,H,F,te)=>{const z=C.component=wf(C,M,H);if(Hi(C)&&(z.ctx.renderer=le),Sf(z,!1,te),z.asyncDep){if(H&&H.registerDep(z,re,te),!C.el){const A=z.subTree=he(os);$(null,A,k,I),C.placeholder=A.el}}else re(z,C,k,I,H,F,te)},ne=(C,k,I)=>{const M=k.component=C.component;if(tf(C,k,I))if(M.asyncDep&&!M.asyncResolved){X(M,k,I);return}else M.next=k,M.update();else k.el=C.el,M.vnode=k},re=(C,k,I,M,H,F,te)=>{const z=()=>{if(C.isMounted){let{next:O,bu:B,u:W,parent:ee,vnode:pe}=C;{const at=ac(C);if(at){O&&(O.el=pe.el,X(C,O,te)),at.asyncDep.then(()=>{C.isUnmounted||z()});return}}let ue=O,Pe;_s(C,!1),O?(O.el=pe.el,X(C,O,te)):O=pe,B&&bo(B),(Pe=O.props&&O.props.onVnodeBeforeUpdate)&&Ut(Pe,ee,O,pe),_s(C,!0);const Ee=rl(C),Ye=C.subTree;C.subTree=Ee,y(Ye,Ee,f(Ye.el),j(Ye),C,H,F),O.el=Ee.el,ue===null&&sf(C,Ee.el),W&&ht(W,H),(Pe=O.props&&O.props.onVnodeUpdated)&&ht(()=>Ut(Pe,ee,O,pe),H)}else{let O;const{el:B,props:W}=k,{bm:ee,m:pe,parent:ue,root:Pe,type:Ee}=C,Ye=Qs(k);_s(C,!1),ee&&bo(ee),!Ye&&(O=W&&W.onVnodeBeforeMount)&&Ut(O,ue,k),_s(C,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle(Ee);const at=C.subTree=rl(C);y(null,at,I,M,C,H,F),k.el=at.el}if(pe&&ht(pe,H),!Ye&&(O=W&&W.onVnodeMounted)){const at=k;ht(()=>Ut(O,ue,at),H)}(k.shapeFlag&256||ue&&Qs(ue.vnode)&&ue.vnode.shapeFlag&256)&&C.a&&ht(C.a,H),C.isMounted=!0,k=I=M=null}};C.scope.on();const A=C.effect=new hi(z);C.scope.off();const b=C.update=A.run.bind(A),x=C.job=A.runIfDirty.bind(A);x.i=C,x.id=C.uid,A.scheduler=()=>Cr(x),_s(C,!0),b()},X=(C,k,I)=>{k.component=C;const M=C.vnode.props;C.vnode=k,C.next=null,of(C,k.props,M,I),cf(C,k.children,I),ts(),Zr(C),ss()},D=(C,k,I,M,H,F,te,z,A=!1)=>{const b=C&&C.children,x=C?C.shapeFlag:0,O=k.children,{patchFlag:B,shapeFlag:W}=k;if(B>0){if(B&128){G(b,O,I,M,H,F,te,z,A);return}else if(B&256){V(b,O,I,M,H,F,te,z,A);return}}W&8?(x&16&&et(b,H,F),O!==b&&d(I,O)):x&16?W&16?G(b,O,I,M,H,F,te,z,A):et(b,H,F,!0):(x&8&&d(I,""),W&16&&Y(O,I,M,H,F,te,z,A))},V=(C,k,I,M,H,F,te,z,A)=>{C=C||Ys,k=k||Ys;const b=C.length,x=k.length,O=Math.min(b,x);let B;for(B=0;B<O;B++){const W=k[B]=A?cs(k[B]):jt(k[B]);y(C[B],W,I,null,H,F,te,z,A)}b>x?et(C,H,F,!0,!1,O):Y(k,I,M,H,F,te,z,A,O)},G=(C,k,I,M,H,F,te,z,A)=>{let b=0;const x=k.length;let O=C.length-1,B=x-1;for(;b<=O&&b<=B;){const W=C[b],ee=k[b]=A?cs(k[b]):jt(k[b]);if(yn(W,ee))y(W,ee,I,null,H,F,te,z,A);else break;b++}for(;b<=O&&b<=B;){const W=C[O],ee=k[B]=A?cs(k[B]):jt(k[B]);if(yn(W,ee))y(W,ee,I,null,H,F,te,z,A);else break;O--,B--}if(b>O){if(b<=B){const W=B+1,ee=W<x?k[W].el:M;for(;b<=B;)y(null,k[b]=A?cs(k[b]):jt(k[b]),I,ee,H,F,te,z,A),b++}}else if(b>B)for(;b<=O;)oe(C[b],H,F,!0),b++;else{const W=b,ee=b,pe=new Map;for(b=ee;b<=B;b++){const De=k[b]=A?cs(k[b]):jt(k[b]);De.key!=null&&pe.set(De.key,b)}let ue,Pe=0;const Ee=B-ee+1;let Ye=!1,at=0;const Et=new Array(Ee);for(b=0;b<Ee;b++)Et[b]=0;for(b=W;b<=O;b++){const De=C[b];if(Pe>=Ee){oe(De,H,F,!0);continue}let Ge;if(De.key!=null)Ge=pe.get(De.key);else for(ue=ee;ue<=B;ue++)if(Et[ue-ee]===0&&yn(De,k[ue])){Ge=ue;break}Ge===void 0?oe(De,H,F,!0):(Et[Ge-ee]=b+1,Ge>=at?at=Ge:Ye=!0,y(De,k[Ge],I,null,H,F,te,z,A),Pe++)}const wt=Ye?mf(Et):Ys;for(ue=wt.length-1,b=Ee-1;b>=0;b--){const De=ee+b,Ge=k[De],Ot=k[De+1],vn=De+1<x?Ot.el||rc(Ot):M;Et[b]===0?y(null,Ge,I,vn,H,F,te,z,A):Ye&&(ue<0||b!==wt[ue]?K(Ge,I,vn,2):ue--)}}},K=(C,k,I,M,H=null)=>{const{el:F,type:te,transition:z,children:A,shapeFlag:b}=C;if(b&6){K(C.component.subTree,k,I,M);return}if(b&128){C.suspense.move(k,I,M);return}if(b&64){te.move(C,k,I,le);return}if(te===Z){n(F,k,I);for(let O=0;O<A.length;O++)K(A[O],k,I,M);n(C.anchor,k,I);return}if(te===wo){_(C,k,I);return}if(M!==2&&b&1&&z)if(M===0)z.beforeEnter(F),n(F,k,I),ht(()=>z.enter(F),H);else{const{leave:O,delayLeave:B,afterLeave:W}=z,ee=()=>{C.ctx.isUnmounted?o(F):n(F,k,I)},pe=()=>{F._isLeaving&&F[xd](!0),O(F,()=>{ee(),W&&W()})};B?B(F,ee,pe):pe()}else n(F,k,I)},oe=(C,k,I,M=!1,H=!1)=>{const{type:F,props:te,ref:z,children:A,dynamicChildren:b,shapeFlag:x,patchFlag:O,dirs:B,cacheIndex:W}=C;if(O===-2&&(H=!1),z!=null&&(ts(),Pn(z,null,I,C,!0),ss()),W!=null&&(k.renderCache[W]=void 0),x&256){k.ctx.deactivate(C);return}const ee=x&1&&B,pe=!Qs(C);let ue;if(pe&&(ue=te&&te.onVnodeBeforeUnmount)&&Ut(ue,k,C),x&6)pt(C.component,I,M);else{if(x&128){C.suspense.unmount(I,M);return}ee&&bs(C,null,k,"beforeUnmount"),x&64?C.type.remove(C,k,I,le,M):b&&!b.hasOnce&&(F!==Z||O>0&&O&64)?et(b,k,I,!1,!0):(F===Z&&O&384||!H&&x&16)&&et(A,k,I),M&&Ie(C)}(pe&&(ue=te&&te.onVnodeUnmounted)||ee)&&ht(()=>{ue&&Ut(ue,k,C),ee&&bs(C,null,k,"unmounted")},I)},Ie=C=>{const{type:k,el:I,anchor:M,transition:H}=C;if(k===Z){We(I,M);return}if(k===wo){R(C);return}const F=()=>{o(I),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(C.shapeFlag&1&&H&&!H.persisted){const{leave:te,delayLeave:z}=H,A=()=>te(I,F);z?z(C.el,F,A):A()}else F()},We=(C,k)=>{let I;for(;C!==k;)I=p(C),o(C),C=I;o(k)},pt=(C,k,I)=>{const{bum:M,scope:H,job:F,subTree:te,um:z,m:A,a:b}=C;cl(A),cl(b),M&&bo(M),H.stop(),F&&(F.flags|=8,oe(te,C,k,I)),z&&ht(z,k),ht(()=>{C.isUnmounted=!0},k)},et=(C,k,I,M=!1,H=!1,F=0)=>{for(let te=F;te<C.length;te++)oe(C[te],k,I,M,H)},j=C=>{if(C.shapeFlag&6)return j(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const k=p(C.anchor||C.el),I=k&&k[$d];return I?p(I):k};let ae=!1;const se=(C,k,I)=>{let M;C==null?k._vnode&&(oe(k._vnode,null,null,!0),M=k._vnode.component):y(k._vnode||null,C,k,null,null,null,I),k._vnode=C,ae||(ae=!0,Zr(M),Di(),ae=!1)},le={p:y,um:oe,m:K,r:Ie,mt:we,mc:Y,pc:D,pbc:fe,n:j,o:e};return{render:se,hydrate:void 0,createApp:Yd(se)}}function va({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function _s({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ff(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oc(e,t,s=!1){const n=e.children,o=t.children;if(ve(n)&&ve(o))for(let a=0;a<n.length;a++){const r=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=cs(o[a]),i.el=r.el),!s&&i.patchFlag!==-2&&oc(r,i)),i.type===ea&&(i.patchFlag!==-1?i.el=r.el:i.__elIndex=a+(e.type===Z?1:0)),i.type===os&&!i.el&&(i.el=r.el)}}function mf(e){const t=e.slice(),s=[0];let n,o,a,r,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)i=a+r>>1,e[s[i]]<u?a=i+1:r=i;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function ac(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ac(t)}function cl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function rc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?rc(t.subTree):null}const lc=e=>e.__isSuspense;function pf(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):bd(e)}const Z=Symbol.for("v-fgt"),ea=Symbol.for("v-txt"),os=Symbol.for("v-cmt"),wo=Symbol.for("v-stc"),Ln=[];let bt=null;function v(e=!1){Ln.push(bt=e?null:[])}function vf(){Ln.pop(),bt=Ln[Ln.length-1]||null}let zn=1;function Eo(e,t=!1){zn+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function ic(e){return e.dynamicChildren=zn>0?bt||Ys:null,vf(),zn>0&&bt&&bt.push(e),e}function h(e,t,s,n,o,a){return ic(c(e,t,s,n,o,a,!0))}function Ue(e,t,s,n,o){return ic(he(e,t,s,n,o,!0))}function Jn(e){return e?e.__v_isVNode===!0:!1}function yn(e,t){return e.type===t.type&&e.key===t.key}const cc=({key:e})=>e??null,Co=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||ot(e)||ge(e)?{i:qe,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,a=e===Z?0:1,r=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cc(t),ref:t&&Co(t),scopeId:Bi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:qe};return i?(Ar(l,s),a&128&&e.normalize(l)):s&&(l.shapeFlag|=He(s)?8:16),zn>0&&!r&&bt&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&bt.push(l),l}const he=hf;function hf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===Md)&&(e=os),Jn(e)){const i=sn(e,t,!0);return s&&Ar(i,s),zn>0&&!a&&bt&&(i.shapeFlag&6?bt[bt.indexOf(e)]=i:bt.push(i)),i.patchFlag=-2,i}if(Nf(e)&&(e=e.__vccOpts),t){t=gf(t);let{class:i,style:l}=t;i&&!He(i)&&(t.class=de(i)),xe(l)&&(wr(l)&&!ve(l)&&(l=Qe({},l)),t.style=it(l))}const r=He(e)?1:lc(e)?128:kd(e)?64:xe(e)?4:ge(e)?2:0;return c(e,t,s,n,o,r,a,!0)}function gf(e){return e?wr(e)||Qi(e)?Qe({},e):e:null}function sn(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:i,transition:l}=e,u=t?yf(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&cc(u),ref:t&&t.ref?s&&a?ve(a)?a.concat(Co(t)):[a,Co(t)]:Co(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sn(e.ssContent),ssFallback:e.ssFallback&&sn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Sr(d,l.clone(d)),d}function $t(e=" ",t=0){return he(ea,null,e,t)}function Oo(e,t){const s=he(wo,null,e);return s.staticCount=t,s}function U(e="",t=!1){return t?(v(),Ue(os,null,e)):he(os,null,e)}function jt(e){return e==null||typeof e=="boolean"?he(os):ve(e)?he(Z,null,e.slice()):Jn(e)?cs(e):he(ea,null,String(e))}function cs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:sn(e)}function Ar(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ve(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Ar(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Qi(t)?t._ctx=qe:o===3&&qe&&(qe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:qe},s=32):(t=String(t),n&64?(s=16,t=[$t(t)]):s=8);e.children=t,e.shapeFlag|=s}function yf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=de([t.class,n.class]));else if(o==="style")t.style=it([t.style,n.style]);else if(Ko(o)){const a=t[o],r=n[o];r&&a!==r&&!(ve(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function Ut(e,t,s,n=null){Kt(e,t,7,[s,n])}const bf=Ji();let _f=0;function wf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||bf,a={uid:_f++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Wu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ec(n,o),emitsOptions:Yi(n,o),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:n.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Xd.bind(null,a),e.ce&&e.ce(a),a}let nt=null;const Cf=()=>nt||qe;let Ro,Ha;{const e=Yo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};Ro=t("__VUE_INSTANCE_SETTERS__",s=>nt=s),Ha=t("__VUE_SSR_SETTERS__",s=>Yn=s)}const no=e=>{const t=nt;return Ro(e),e.scope.on(),()=>{e.scope.off(),Ro(t)}},ul=()=>{nt&&nt.scope.off(),Ro(null)};function uc(e){return e.vnode.shapeFlag&4}let Yn=!1;function Sf(e,t=!1,s=!1){t&&Ha(t);const{props:n,children:o}=e.vnode,a=uc(e);nf(e,n,a,t),lf(e,o,s||t);const r=a?$f(e,t):void 0;return t&&Ha(!1),r}function $f(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Hd);const{setup:n}=s;if(n){ts();const o=e.setupContext=n.length>1?xf(e):null,a=no(e),r=so(n,e,0,[e.props,o]),i=ci(r);if(ss(),a(),(i||e.sp)&&!Qs(e)&&ji(e),i){if(r.then(ul,ul),t)return r.then(l=>{dl(e,l)}).catch(l=>{Xo(l,e,0)});e.asyncDep=r}else dl(e,r)}else dc(e)}function dl(e,t,s){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xe(t)&&(e.setupState=Ri(t)),dc(e)}function dc(e,t,s){const n=e.type;e.render||(e.render=n.render||Wt);{const o=no(e);ts();try{Wd(e)}finally{ss(),o()}}}const kf={get(e,t){return st(e,"get",""),e[t]}};function xf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,kf),slots:e.slots,emit:e.emit,expose:t}}function ta(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ri(cd(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Dn)return Dn[s](e)},has(t,s){return s in t||s in Dn}})):e.proxy}function Af(e,t=!0){return ge(e)?e.displayName||e.name:e.name||t&&e.__name}function Nf(e){return ge(e)&&"__vccOpts"in e}const T=(e,t)=>pd(e,t,Yn);function fc(e,t,s){try{Eo(-1);const n=arguments.length;return n===2?xe(t)&&!ve(t)?Jn(t)?he(e,null,[t]):he(e,t):he(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Jn(s)&&(s=[s]),he(e,t,s))}finally{Eo(1)}}const Tf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wa;const fl=typeof window<"u"&&window.trustedTypes;if(fl)try{Wa=fl.createPolicy("vue",{createHTML:e=>e})}catch{}const mc=Wa?e=>Wa.createHTML(e):e=>e,Ef="http://www.w3.org/2000/svg",Of="http://www.w3.org/1998/Math/MathML",Yt=typeof document<"u"?document:null,ml=Yt&&Yt.createElement("template"),Rf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Yt.createElementNS(Ef,e):t==="mathml"?Yt.createElementNS(Of,e):s?Yt.createElement(e,{is:s}):Yt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Yt.createTextNode(e),createComment:e=>Yt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{ml.innerHTML=mc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=ml.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},If=Symbol("_vtc");function Pf(e,t,s){const n=e[If];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Io=Symbol("_vod"),pc=Symbol("_vsh"),Df={name:"show",beforeMount(e,{value:t},{transition:s}){e[Io]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):bn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),bn(e,!0),n.enter(e)):n.leave(e,()=>{bn(e,!1)}):bn(e,t))},beforeUnmount(e,{value:t}){bn(e,t)}};function bn(e,t){e.style.display=t?e[Io]:"none",e[pc]=!t}const Lf=Symbol(""),Bf=/(?:^|;)\s*display\s*:/;function Uf(e,t,s){const n=e.style,o=He(s);let a=!1;if(s&&!o){if(t)if(He(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();s[i]==null&&So(n,i,"")}else for(const r in t)s[r]==null&&So(n,r,"");for(const r in s)r==="display"&&(a=!0),So(n,r,s[r])}else if(o){if(t!==s){const r=n[Lf];r&&(s+=";"+r),n.cssText=s,a=Bf.test(s)}}else t&&e.removeAttribute("style");Io in e&&(e[Io]=a?n.display:"",e[pc]&&(n.display="none"))}const pl=/\s*!important$/;function So(e,t,s){if(ve(s))s.forEach(n=>So(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Mf(e,t);pl.test(s)?e.setProperty(gs(n),s.replace(pl,""),"important"):e[n]=s}}const vl=["Webkit","Moz","ms"],ha={};function Mf(e,t){const s=ha[t];if(s)return s;let n=At(t);if(n!=="filter"&&n in e)return ha[t]=n;n=zo(n);for(let o=0;o<vl.length;o++){const a=vl[o]+n;if(a in e)return ha[t]=a}return t}const hl="http://www.w3.org/1999/xlink";function gl(e,t,s,n,o,a=ju(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(hl,t.slice(6,t.length)):e.setAttributeNS(hl,t,s):s==null||a&&!mi(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Pt(s)?String(s):s)}function yl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?mc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(i!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=mi(s):s==null&&i==="string"?(s="",r=!0):i==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function Qt(e,t,s,n){e.addEventListener(t,s,n)}function Ff(e,t,s,n){e.removeEventListener(t,s,n)}const bl=Symbol("_vei");function jf(e,t,s,n,o=null){const a=e[bl]||(e[bl]={}),r=a[t];if(n&&r)r.value=n;else{const[i,l]=Hf(t);if(n){const u=a[t]=Kf(n,o);Qt(e,i,u,l)}else r&&(Ff(e,i,r,l),a[t]=void 0)}}const _l=/(?:Once|Passive|Capture)$/;function Hf(e){let t;if(_l.test(e)){t={};let n;for(;n=e.match(_l);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gs(e.slice(2)),t]}let ga=0;const Wf=Promise.resolve(),Vf=()=>ga||(Wf.then(()=>ga=0),ga=Date.now());function Kf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Kt(Gf(n,s.value),t,5,[n])};return s.value=e,s.attached=Vf(),s}function Gf(e,t){if(ve(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const wl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zf=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?Pf(e,n,r):t==="style"?Uf(e,s,n):Ko(t)?dr(t)||jf(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Jf(e,t,n,r))?(yl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&gl(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!He(n))?yl(e,At(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),gl(e,t,n,r))};function Jf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&wl(t)&&ge(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return wl(t)&&He(s)?!1:t in e}const vs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?s=>bo(t,s):t};function Yf(e){e.target.composing=!0}function Cl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xt=Symbol("_assign");function Sl(e,t,s){return t&&(e=e.trim()),s&&(e=Jo(e)),e}const mt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[xt]=vs(o);const a=n||o.props&&o.props.type==="number";Qt(e,t?"change":"input",r=>{r.target.composing||e[xt](Sl(e.value,s,a))}),(s||a)&&Qt(e,"change",()=>{e.value=Sl(e.value,s,a)}),t||(Qt(e,"compositionstart",Yf),Qt(e,"compositionend",Cl),Qt(e,"change",Cl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[xt]=vs(r),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?Jo(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===l)||(e.value=l))}},Nr={deep:!0,created(e,t,s){e[xt]=vs(s),Qt(e,"change",()=>{const n=e._modelValue,o=nn(e),a=e.checked,r=e[xt];if(ve(n)){const i=pr(n,o),l=i!==-1;if(a&&!l)r(n.concat(o));else if(!a&&l){const u=[...n];u.splice(i,1),r(u)}}else if(mn(n)){const i=new Set(n);a?i.add(o):i.delete(o),r(i)}else r(vc(e,a))})},mounted:$l,beforeUpdate(e,t,s){e[xt]=vs(s),$l(e,t,s)}};function $l(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ve(t))o=pr(t,n.props.value)>-1;else if(mn(t))o=t.has(n.props.value);else{if(t===s)return;o=Rs(t,vc(e,!0))}e.checked!==o&&(e.checked=o)}const kl={created(e,{value:t},s){e.checked=Rs(t,s.props.value),e[xt]=vs(s),Qt(e,"change",()=>{e[xt](nn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[xt]=vs(n),t!==s&&(e.checked=Rs(t,n.props.value))}},Bn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=mn(t);Qt(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Jo(nn(r)):nn(r));e[xt](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Kn(()=>{e._assigning=!1})}),e[xt]=vs(n)},mounted(e,{value:t}){xl(e,t)},beforeUpdate(e,t,s){e[xt]=vs(s)},updated(e,{value:t}){e._assigning||xl(e,t)}};function xl(e,t){const s=e.multiple,n=ve(t);if(!(s&&!n&&!mn(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],i=nn(r);if(s)if(n){const l=typeof i;l==="string"||l==="number"?r.selected=t.some(u=>String(u)===String(i)):r.selected=pr(t,i)>-1}else r.selected=t.has(i);else if(Rs(nn(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function nn(e){return"_value"in e?e._value:e.value}function vc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const qf=["ctrl","shift","alt","meta"],Xf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>qf.some(s=>e[`${s}Key`]&&!t.includes(s))},Lt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const i=Xf[t[r]];if(i&&i(o,t))return}return e(o,...a)})},Qf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Po=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=gs(o.key);if(t.some(r=>r===a||Qf[r]===a))return e(o)})},Zf=Qe({patchProp:zf},Rf);let Al;function em(){return Al||(Al=uf(Zf))}const tm=(...e)=>{const t=em().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=nm(n);if(!o)return;const a=t._component;!ge(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,sm(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function sm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nm(e){return He(e)?document.querySelector(e):e}const ye=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},om={};function am(e,t){const s=Ud("router-view");return v(),Ue(s)}const rm=ye(om,[["render",am]]),lm="modulepreload",im=function(e){return"/"+e},Nl={},cm=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(l=>{if(l=im(l),l in Nl)return;Nl[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":lm,u||(f.as="script"),f.crossOrigin="",f.href=l,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Hs=typeof document<"u";function hc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function um(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&hc(e.default)}const Ce=Object.assign;function ya(e,t){const s={};for(const n in t){const o=t[n];s[n]=Bt(o)?o.map(e):e(o)}return s}const Un=()=>{},Bt=Array.isArray;function Tl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const gc=/#/g,dm=/&/g,fm=/\//g,mm=/=/g,pm=/\?/g,yc=/\+/g,vm=/%5B/g,hm=/%5D/g,bc=/%5E/g,gm=/%60/g,_c=/%7B/g,ym=/%7C/g,wc=/%7D/g,bm=/%20/g;function Tr(e){return e==null?"":encodeURI(""+e).replace(ym,"|").replace(vm,"[").replace(hm,"]")}function _m(e){return Tr(e).replace(_c,"{").replace(wc,"}").replace(bc,"^")}function Va(e){return Tr(e).replace(yc,"%2B").replace(bm,"+").replace(gc,"%23").replace(dm,"%26").replace(gm,"`").replace(_c,"{").replace(wc,"}").replace(bc,"^")}function wm(e){return Va(e).replace(mm,"%3D")}function Cm(e){return Tr(e).replace(gc,"%23").replace(pm,"%3F")}function Sm(e){return Cm(e).replace(fm,"%2F")}function qn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const $m=/\/$/,km=e=>e.replace($m,"");function ba(e,t,s="/"){let n,o={},a="",r="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(n=t.slice(0,l),a=t.slice(l,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),r=t.slice(i,t.length)),n=Tm(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:qn(r)}}function xm(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function El(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Am(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&on(t.matched[n],s.matched[o])&&Cc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function on(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Cc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Nm(e[s],t[s]))return!1;return!0}function Nm(e,t){return Bt(e)?Ol(e,t):Bt(t)?Ol(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Ol(e,t){return Bt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Tm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,i;for(r=0;r<n.length;r++)if(i=n[r],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const rs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ka=function(e){return e.pop="pop",e.push="push",e}({}),_a=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Em(e){if(!e)if(Hs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),km(e)}const Om=/^[^#]+#/;function Rm(e,t){return e.replace(Om,"#")+t}function Im(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const sa=()=>({left:window.scrollX,top:window.scrollY});function Pm(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Im(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Rl(e,t){return(history.state?history.state.position-t:-1)+e}const Ga=new Map;function Dm(e,t){Ga.set(e,t)}function Lm(e){const t=Ga.get(e);return Ga.delete(e),t}function Bm(e){return typeof e=="string"||e&&typeof e=="object"}function Sc(e){return typeof e=="string"||typeof e=="symbol"}let Be=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const $c=Symbol("");Be.MATCHER_NOT_FOUND+"",Be.NAVIGATION_GUARD_REDIRECT+"",Be.NAVIGATION_ABORTED+"",Be.NAVIGATION_CANCELLED+"",Be.NAVIGATION_DUPLICATED+"";function an(e,t){return Ce(new Error,{type:e,[$c]:!0},t)}function zt(e,t){return e instanceof Error&&$c in e&&(t==null||!!(e.type&t))}const Um=["params","query","hash"];function Mm(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Um)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function Fm(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(yc," "),a=o.indexOf("="),r=qn(a<0?o:o.slice(0,a)),i=a<0?null:qn(o.slice(a+1));if(r in t){let l=t[r];Bt(l)||(l=t[r]=[l]),l.push(i)}else t[r]=i}return t}function Il(e){let t="";for(let s in e){const n=e[s];if(s=wm(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Bt(n)?n.map(o=>o&&Va(o)):[n&&Va(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function jm(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Bt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const Hm=Symbol(""),Pl=Symbol(""),na=Symbol(""),Er=Symbol(""),za=Symbol("");function _n(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function us(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,l)=>{const u=p=>{p===!1?l(an(Be.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?l(p):Bm(p)?l(an(Be.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),i())},d=a(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function wa(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const i in r.components){let l=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(hc(l)){const u=(l.__vccOpts||l)[t];u&&a.push(us(u,s,n,r,i,o))}else{let u=l();a.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${r.path}"`);const f=um(d)?d.default:d;r.mods[i]=d,r.components[i]=f;const p=(f.__vccOpts||f)[t];return p&&us(p,s,n,r,i,o)()}))}}return a}function Wm(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const i=t.matched[r];i&&(e.matched.find(u=>on(u,i))?n.push(i):s.push(i));const l=e.matched[r];l&&(t.matched.find(u=>on(u,l))||o.push(l))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Vm=()=>location.protocol+"//"+location.host;function kc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(r);return i[0]!=="/"&&(i="/"+i),El(i,"")}return El(s,e)+n+o}function Km(e,t,s,n){let o=[],a=[],r=null;const i=({state:p})=>{const m=kc(e,location),g=s.value,y=t.value;let N=0;if(p){if(s.value=m,t.value=p,r&&r===g){r=null;return}N=y?p.position-y.position:0}else n(m);o.forEach($=>{$(s.value,g,{delta:N,type:Ka.pop,direction:N?N>0?_a.forward:_a.back:_a.unknown})})};function l(){r=s.value}function u(p){o.push(p);const m=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(m),m}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ce({},p.state,{scroll:sa()}),"")}}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:f}}function Dl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?sa():null}}function Gm(e){const{history:t,location:s}=window,n={value:kc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,d){const f=e.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+l:Vm()+e+l;try{t[d?"replaceState":"pushState"](u,"",p),o.value=u}catch(m){console.error(m),s[d?"replace":"assign"](p)}}function r(l,u){a(l,Ce({},t.state,Dl(o.value.back,l,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=l}function i(l,u){const d=Ce({},o.value,t.state,{forward:l,scroll:sa()});a(d.current,d,!0),a(l,Ce({},Dl(n.value,l,null),{position:d.position+1},u),!1),n.value=l}return{location:n,state:o,push:i,replace:r}}function zm(e){e=Em(e);const t=Gm(e),s=Km(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=Ce({location:"",base:e,go:n,createHref:Rm.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Jm(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),zm(e)}let Ns=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ke=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ke||{});const Ym={type:Ns.Static,value:""},qm=/[a-zA-Z0-9_]/;function Xm(e){if(!e)return[[]];if(e==="/")return[[Ym]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${u}": ${m}`)}let s=Ke.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let i=0,l,u="",d="";function f(){u&&(s===Ke.Static?a.push({type:Ns.Static,value:u}):s===Ke.Param||s===Ke.ParamRegExp||s===Ke.ParamRegExpEnd?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ns.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&s!==Ke.ParamRegExp){n=s,s=Ke.EscapeNext;continue}switch(s){case Ke.Static:l==="/"?(u&&f(),r()):l===":"?(f(),s=Ke.Param):p();break;case Ke.EscapeNext:p(),s=n;break;case Ke.Param:l==="("?s=Ke.ParamRegExp:qm.test(l)?p():(f(),s=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case Ke.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=Ke.ParamRegExpEnd:d+=l;break;case Ke.ParamRegExpEnd:f(),s=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,d="";break;default:t("Unknown state");break}}return s===Ke.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),r(),o}const Ll="[^/]+?",Qm={sensitive:!1,strict:!1,start:!0,end:!0};var lt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(lt||{});const Zm=/[.+*?^${}()[\]/\\]/g;function ep(e,t){const s=Ce({},Qm,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const d=u.length?[]:[lt.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=lt.Segment+(s.sensitive?lt.BonusCaseSensitive:0);if(p.type===Ns.Static)f||(o+="/"),o+=p.value.replace(Zm,"\\$&"),m+=lt.Static;else if(p.type===Ns.Param){const{value:g,repeatable:y,optional:N,regexp:$}=p;a.push({name:g,repeatable:y,optional:N});const w=$||Ll;if(w!==Ll){m+=lt.BonusCustomRegExp;try{`${w}`}catch(R){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+R.message)}}let _=y?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;f||(_=N&&u.length<2?`(?:/${_})`:"/"+_),N&&(_+="?"),o+=_,m+=lt.Dynamic,N&&(m+=lt.BonusOptional),y&&(m+=lt.BonusRepeatable),w===".*"&&(m+=lt.BonusWildcard)}d.push(m)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=lt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function i(u){const d=u.match(r),f={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",g=a[p-1];f[g.name]=m&&g.repeatable?m.split("/"):m}return f}function l(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const m of p)if(m.type===Ns.Static)d+=m.value;else if(m.type===Ns.Param){const{value:g,repeatable:y,optional:N}=m,$=g in u?u[g]:"";if(Bt($)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=Bt($)?$.join("/"):$;if(!w)if(N)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);d+=w}}return d||"/"}return{re:r,score:n,keys:a,parse:i,stringify:l}}function tp(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===lt.Static+lt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===lt.Static+lt.Segment?1:-1:0}function xc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=tp(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(Bl(n))return 1;if(Bl(o))return-1}return o.length-n.length}function Bl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const sp={strict:!1,end:!0,sensitive:!1};function np(e,t,s){const n=ep(Xm(e.path),s),o=Ce(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function op(e,t){const s=[],n=new Map;t=Tl(sp,t);function o(f){return n.get(f)}function a(f,p,m){const g=!m,y=Ml(f);y.aliasOf=m&&m.record;const N=Tl(t,f),$=[y];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const q of R)$.push(Ml(Ce({},y,{components:m?m.record.components:y.components,path:q,aliasOf:m?m.record:y})))}let w,_;for(const R of $){const{path:q}=R;if(p&&q[0]!=="/"){const Q=p.record.path,L=Q[Q.length-1]==="/"?"":"/";R.path=p.record.path+(q&&L+q)}if(w=np(R,p,N),m?m.alias.push(w):(_=_||w,_!==w&&_.alias.push(w),g&&f.name&&!Fl(w)&&r(f.name)),Ac(w)&&l(w),y.children){const Q=y.children;for(let L=0;L<Q.length;L++)a(Q[L],w,m&&m.children[L])}m=m||w}return _?()=>{r(_)}:Un}function r(f){if(Sc(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function i(){return s}function l(f){const p=lp(f,s);s.splice(p,0,f),f.record.name&&!Fl(f)&&n.set(f.record.name,f)}function u(f,p){let m,g={},y,N;if("name"in f&&f.name){if(m=n.get(f.name),!m)throw an(Be.MATCHER_NOT_FOUND,{location:f});N=m.record.name,g=Ce(Ul(p.params,m.keys.filter(_=>!_.optional).concat(m.parent?m.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&Ul(f.params,m.keys.map(_=>_.name))),y=m.stringify(g)}else if(f.path!=null)y=f.path,m=s.find(_=>_.re.test(y)),m&&(g=m.parse(y),N=m.record.name);else{if(m=p.name?n.get(p.name):s.find(_=>_.re.test(p.path)),!m)throw an(Be.MATCHER_NOT_FOUND,{location:f,currentLocation:p});N=m.record.name,g=Ce({},p.params,f.params),y=m.stringify(g)}const $=[];let w=m;for(;w;)$.unshift(w.record),w=w.parent;return{name:N,path:y,params:g,matched:$,meta:rp($)}}e.forEach(f=>a(f));function d(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:r,clearRoutes:d,getRoutes:i,getRecordMatcher:o}}function Ul(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Ml(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ap(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ap(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Fl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function rp(e){return e.reduce((t,s)=>Ce(t,s.meta),{})}function lp(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;xc(e,t[a])<0?n=a:s=a+1}const o=ip(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function ip(e){let t=e;for(;t=t.parent;)if(Ac(t)&&xc(e,t)===0)return t}function Ac({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function jl(e){const t=It(na),s=It(Er),n=T(()=>{const l=P(e.to);return t.resolve(l)}),o=T(()=>{const{matched:l}=n.value,{length:u}=l,d=l[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(on.bind(null,d));if(p>-1)return p;const m=Hl(l[u-2]);return u>1&&Hl(d)===m&&f[f.length-1].path!==m?f.findIndex(on.bind(null,l[u-2])):p}),a=T(()=>o.value>-1&&mp(s.params,n.value.params)),r=T(()=>o.value>-1&&o.value===s.matched.length-1&&Cc(s.params,n.value.params));function i(l={}){if(fp(l)){const u=t[P(e.replace)?"replace":"push"](P(e.to)).catch(Un);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:T(()=>n.value.href),isActive:a,isExactActive:r,navigate:i}}function cp(e){return e.length===1?e[0]:e}const up=Fi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:jl,setup(e,{slots:t}){const s=Vt(jl(e)),{options:n}=It(na),o=T(()=>({[Wl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Wl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&cp(t.default(s));return e.custom?a:fc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),dp=up;function fp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function mp(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Bt(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function Hl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Wl=(e,t,s)=>e??t??s,pp=Fi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=It(za),o=T(()=>e.route||n.value),a=It(Pl,0),r=T(()=>{let u=P(a);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),i=T(()=>o.value.matched[r.value]);_o(Pl,T(()=>r.value+1)),_o(Hm,i),_o(za,o);const l=E();return ft(()=>[l.value,i.value,e.name],([u,d,f],[p,m,g])=>{d&&(d.instances[f]=u,m&&m!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!on(d,m)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=i.value,p=f&&f.components[d];if(!p)return Vl(s.default,{Component:p,route:u});const m=f.props[d],g=m?m===!0?u.params:typeof m=="function"?m(u):m:null,N=fc(p,Ce({},g,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return Vl(s.default,{Component:N,route:u})||N}}});function Vl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const vp=pp;function hp(e){const t=op(e.routes,e),s=e.parseQuery||Fm,n=e.stringifyQuery||Il,o=e.history,a=_n(),r=_n(),i=_n(),l=ud(rs);let u=rs;Hs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=ya.bind(null,j=>""+j),f=ya.bind(null,Sm),p=ya.bind(null,qn);function m(j,ae){let se,le;return Sc(j)?(se=t.getRecordMatcher(j),le=ae):le=j,t.addRoute(le,se)}function g(j){const ae=t.getRecordMatcher(j);ae&&t.removeRoute(ae)}function y(){return t.getRoutes().map(j=>j.record)}function N(j){return!!t.getRecordMatcher(j)}function $(j,ae){if(ae=Ce({},ae||l.value),typeof j=="string"){const I=ba(s,j,ae.path),M=t.resolve({path:I.path},ae),H=o.createHref(I.fullPath);return Ce(I,M,{params:p(M.params),hash:qn(I.hash),redirectedFrom:void 0,href:H})}let se;if(j.path!=null)se=Ce({},j,{path:ba(s,j.path,ae.path).path});else{const I=Ce({},j.params);for(const M in I)I[M]==null&&delete I[M];se=Ce({},j,{params:f(I)}),ae.params=f(ae.params)}const le=t.resolve(se,ae),be=j.hash||"";le.params=d(p(le.params));const C=xm(n,Ce({},j,{hash:_m(be),path:le.path})),k=o.createHref(C);return Ce({fullPath:C,hash:be,query:n===Il?jm(j.query):j.query||{}},le,{redirectedFrom:void 0,href:k})}function w(j){return typeof j=="string"?ba(s,j,l.value.path):Ce({},j)}function _(j,ae){if(u!==j)return an(Be.NAVIGATION_CANCELLED,{from:ae,to:j})}function R(j){return L(j)}function q(j){return R(Ce(w(j),{replace:!0}))}function Q(j,ae){const se=j.matched[j.matched.length-1];if(se&&se.redirect){const{redirect:le}=se;let be=typeof le=="function"?le(j,ae):le;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=w(be):{path:be},be.params={}),Ce({query:j.query,hash:j.hash,params:be.path!=null?{}:j.params},be)}}function L(j,ae){const se=u=$(j),le=l.value,be=j.state,C=j.force,k=j.replace===!0,I=Q(se,le);if(I)return L(Ce(w(I),{state:typeof I=="object"?Ce({},be,I.state):be,force:C,replace:k}),ae||se);const M=se;M.redirectedFrom=ae;let H;return!C&&Am(n,le,se)&&(H=an(Be.NAVIGATION_DUPLICATED,{to:M,from:le}),K(le,le,!0,!1)),(H?Promise.resolve(H):fe(M,le)).catch(F=>zt(F)?zt(F,Be.NAVIGATION_GUARD_REDIRECT)?F:G(F):D(F,M,le)).then(F=>{if(F){if(zt(F,Be.NAVIGATION_GUARD_REDIRECT))return L(Ce({replace:k},w(F.to),{state:typeof F.to=="object"?Ce({},be,F.to.state):be,force:C}),ae||M)}else F=ce(M,le,!0,k,be);return me(M,le,F),F})}function Y(j,ae){const se=_(j,ae);return se?Promise.reject(se):Promise.resolve()}function J(j){const ae=We.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(j):j()}function fe(j,ae){let se;const[le,be,C]=Wm(j,ae);se=wa(le.reverse(),"beforeRouteLeave",j,ae);for(const I of le)I.leaveGuards.forEach(M=>{se.push(us(M,j,ae))});const k=Y.bind(null,j,ae);return se.push(k),et(se).then(()=>{se=[];for(const I of a.list())se.push(us(I,j,ae));return se.push(k),et(se)}).then(()=>{se=wa(be,"beforeRouteUpdate",j,ae);for(const I of be)I.updateGuards.forEach(M=>{se.push(us(M,j,ae))});return se.push(k),et(se)}).then(()=>{se=[];for(const I of C)if(I.beforeEnter)if(Bt(I.beforeEnter))for(const M of I.beforeEnter)se.push(us(M,j,ae));else se.push(us(I.beforeEnter,j,ae));return se.push(k),et(se)}).then(()=>(j.matched.forEach(I=>I.enterCallbacks={}),se=wa(C,"beforeRouteEnter",j,ae,J),se.push(k),et(se))).then(()=>{se=[];for(const I of r.list())se.push(us(I,j,ae));return se.push(k),et(se)}).catch(I=>zt(I,Be.NAVIGATION_CANCELLED)?I:Promise.reject(I))}function me(j,ae,se){i.list().forEach(le=>J(()=>le(j,ae,se)))}function ce(j,ae,se,le,be){const C=_(j,ae);if(C)return C;const k=ae===rs,I=Hs?history.state:{};se&&(le||k?o.replace(j.fullPath,Ce({scroll:k&&I&&I.scroll},be)):o.push(j.fullPath,be)),l.value=j,K(j,ae,se,k),G()}let _e;function we(){_e||(_e=o.listen((j,ae,se)=>{if(!pt.listening)return;const le=$(j),be=Q(le,pt.currentRoute.value);if(be){L(Ce(be,{replace:!0,force:!0}),le).catch(Un);return}u=le;const C=l.value;Hs&&Dm(Rl(C.fullPath,se.delta),sa()),fe(le,C).catch(k=>zt(k,Be.NAVIGATION_ABORTED|Be.NAVIGATION_CANCELLED)?k:zt(k,Be.NAVIGATION_GUARD_REDIRECT)?(L(Ce(w(k.to),{force:!0}),le).then(I=>{zt(I,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&!se.delta&&se.type===Ka.pop&&o.go(-1,!1)}).catch(Un),Promise.reject()):(se.delta&&o.go(-se.delta,!1),D(k,le,C))).then(k=>{k=k||ce(le,C,!1),k&&(se.delta&&!zt(k,Be.NAVIGATION_CANCELLED)?o.go(-se.delta,!1):se.type===Ka.pop&&zt(k,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),me(le,C,k)}).catch(Un)}))}let ne=_n(),re=_n(),X;function D(j,ae,se){G(j);const le=re.list();return le.length?le.forEach(be=>be(j,ae,se)):console.error(j),Promise.reject(j)}function V(){return X&&l.value!==rs?Promise.resolve():new Promise((j,ae)=>{ne.add([j,ae])})}function G(j){return X||(X=!j,we(),ne.list().forEach(([ae,se])=>j?se(j):ae()),ne.reset()),j}function K(j,ae,se,le){const{scrollBehavior:be}=e;if(!Hs||!be)return Promise.resolve();const C=!se&&Lm(Rl(j.fullPath,0))||(le||!se)&&history.state&&history.state.scroll||null;return Kn().then(()=>be(j,ae,C)).then(k=>k&&Pm(k)).catch(k=>D(k,j,ae))}const oe=j=>o.go(j);let Ie;const We=new Set,pt={currentRoute:l,listening:!0,addRoute:m,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:y,resolve:$,options:e,push:R,replace:q,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:a.add,beforeResolve:r.add,afterEach:i.add,onError:re.add,isReady:V,install(j){j.component("RouterLink",dp),j.component("RouterView",vp),j.config.globalProperties.$router=pt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>P(l)}),Hs&&!Ie&&l.value===rs&&(Ie=!0,R(o.location).catch(le=>{}));const ae={};for(const le in rs)Object.defineProperty(ae,le,{get:()=>l.value[le],enumerable:!0});j.provide(na,pt),j.provide(Er,Ei(ae)),j.provide(za,l);const se=j.unmount;We.add(j),j.unmount=function(){We.delete(j),We.size<1&&(u=rs,_e&&_e(),_e=null,l.value=rs,Ie=!1,X=!1),se()}}};function et(j){return j.reduce((ae,se)=>ae.then(()=>J(se)),Promise.resolve())}return pt}function gp(){return It(na)}function Kx(e){return It(Er)}function Ca(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let i=0;i<s.length;i++){const l=s[i];if(l.startsWith("%"))continue;if(a){l.includes("}")?(r+=l.substring(0,l.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=l+`
`;continue}if(l.includes("{")){const f=l.indexOf("{");if(l.includes("}")){const p=l.indexOf("}");o.push(l.substring(f+1,p).trim())}else r=l.substring(f+1)+`
`,a=!0;continue}const u=l.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=l.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,p]=d;if(f==="Board")n&&(n.commentary=zl(o),n.steps=Kl(o),n.auction=Gl(n.auction),t.push(n)),n=yp(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=bp(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const f=l.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const p=wp(f);n.auction.push(...p)}}}return n&&(n.commentary=zl(o),n.steps=Kl(o),n.auction=Gl(n.auction),t.push(n)),t}function Kl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const i=n[r],l=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),d=/^\[ROTATE\]$/i.test(i),f=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(l){const p=Or(l[1]).replace(/!/g,"").trim(),m=a.trim();a="";let g="";if(r+1<n.length){const $=n[r+1];$.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=$.trim(),r++)}const y=wn(m,"bid"),N=wn(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:N.text,showSeatsAfter:N.showSeats})}else if(u||d){const p=u?"next":"rotate";a.trim()&&o.push(wn(a.trim(),p)),a=""}else if(f){const p=f[1].trim();let m;if(p.toLowerCase().startsWith("any:")?m={cards:p.substring(4).split(",").map(y=>Do(y.trim())),anyOf:!0}:m={card:Do(p)},a.trim()){const g=wn(a.trim(),"choose-card");g.chooseCard=m,o.push(g)}a=""}else a+=i}if(a.trim()){const r=wn(a.trim(),"end");o.push(r)}return o}function wn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const w=n[1].toUpperCase().trim();if(w==="ALL")s=["N","E","S","W"];else{const _=[];w.includes("N")&&_.push("N"),w.includes("E")&&_.push("E"),w.includes("S")&&_.push("S"),w.includes("W")&&_.push("W"),_.length>0&&(s=_)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const i=/\[RESET\]/i.test(e);let l=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const w=u[1].trim();w.toLowerCase().startsWith("any:")?l={cards:w.substring(4).split(",").map(R=>Do(R.trim())),anyOf:!0}:l={card:Do(w)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),p&&(d=!0);const m=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const N=e.match(/\[showcards\s+([^\]]+)\]/i);if(N){const w=N[1].trim();y={};const _=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let R;for(;(R=_.exec(w))!==null;){const q=R[1].toUpperCase(),Q=R[2].split(",").map(L=>L.trim().toUpperCase());y[q]=Q}Object.keys(y).length===0&&(y=null)}let $=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Or($),type:t,showSeats:s,plays:o,reset:i,showAuction:d,showLead:m,clearCommentary:g,showcards:y,chooseCard:l}}function yp(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Do(e){return e.toUpperCase().replace("10","T")}function bp(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(r+1)}for(let i=0;i<4;i++){const l=(o+i)%4,u=n[l];t[u]=_p(s[i])}return t}function _p(e){const t=e.split(".");return t.length!==4?null:{spades:vo(t[0]),hearts:vo(t[1]),diamonds:vo(t[2]),clubs:vo(t[3])}}function vo(e){return e?e.split(""):[]}function Gl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function wp(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>Cp(t))}function Cp(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function zl(e){return e.length?Or(e.join(`

`)):""}function Or(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Sp(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function ho(e,t){return Sp(t)[e%4]}const Rr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Jl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Nc=["spades","hearts","diamonds","clubs"];function Sa(e){return e==="T"?"10":e}function Ir(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Rr[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function $p(e){return(Jl[e.toLowerCase()]||Jl[e])==="red"?"suit-red":"suit-black"}function kp(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Ja(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function xp(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Nc)for(const o of e[n]||[])s+=t[o]||0;return s}function Ap(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Rr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Cn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Np(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ws(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Tp({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:a,studentBid:r,correct:i,attemptNumber:l,timeTakenMs:u,skillPath:d,assignment:f=null}){var y,N,$,w,_,R,q,Q,L,Y,J;const p=((y=s.steps)==null?void 0:y.filter(fe=>fe.type==="bid").length)||1,m=s.studentSeat||"S",g=((N=s.hands)==null?void 0:N[m.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:m,hands:{north:(($=s.hands)==null?void 0:$.N)||((w=s.hands)==null?void 0:w.north)||"",east:((_=s.hands)==null?void 0:_.E)||((R=s.hands)==null?void 0:R.east)||"",south:((q=s.hands)==null?void 0:q.S)||((Q=s.hands)==null?void 0:Q.south)||"",west:((L=s.hands)==null?void 0:L.W)||((Y=s.hands)==null?void 0:Y.west)||""},full_auction:((J=s.auction)==null?void 0:J.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:a,student_hand:g},result:{student_bid:r,correct:i,attempt_number:l,time_taken_ms:u},skill_path:d,assignment:f}}function Tc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Ep(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function Op(){return crypto.randomUUID()}function Rp(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Ec(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Ip(e){const[t]=e.split("/");return t||"uncategorized"}function Pp(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Oc={name:"AES-GCM",length:256},Rc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function Dp(){const e=await crypto.subtle.generateKey(Oc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return rn(t)}async function Ic(e){const t=Xn(e);return crypto.subtle.importKey("raw",t,Oc,!0,["encrypt","decrypt"])}async function Pr(e,t){const s=await Ic(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:rn(r),iv:rn(n)}}async function Pc(e,t,s){const n=await Ic(s),o=Xn(e),a=Xn(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(r))}async function Lp(e){const t=Xn(e);return crypto.subtle.importKey("spki",t,Rc,!0,["encrypt"])}async function Bp(){const e=await crypto.subtle.generateKey(Rc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:rn(t),privateKey:rn(s)}}async function Dc(e,t){const s=await Lp(t),n=Xn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return rn(o)}function Up(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function Mp(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function Fp(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Pr(t,e);return(await Pc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function rn(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Xn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Ya="bridgePractice",Te=E({}),je=E(null),hs=E(null),Qn=E(!1),oa=E(!1);function Lc(){try{const e=localStorage.getItem(Ya);if(e){const t=JSON.parse(e);Te.value=t.users||{},je.value=t.currentUserId||null,hs.value=t.adminViewerId||null}Qn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),Qn.value=!0}}function Nt(){try{const e=localStorage.getItem(Ya),t=e?JSON.parse(e):{};t.users=Te.value,t.currentUserId=je.value,hs.value&&(t.adminViewerId=hs.value),localStorage.setItem(Ya,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function jp({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),i=new Date().toISOString(),l=await Dp();let u=null;if(a)try{const f=await fetch(`${a}/keys/admin`);if(f.ok){const p=await f.json();hs.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await Dc(l,p.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:l,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return Te.value[r]=d,je.value=r,Nt(),oa.value=!0,d}function Hp(e,t){if(!Te.value[e])return console.error("User not found:",e),null;const s=Te.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Nt(),s}function Wp(e){if(!Te.value[e])return!1;if(delete Te.value[e],je.value===e){const t=Object.keys(Te.value);je.value=t.length>0?t[0]:null}return Nt(),!0}function Vp(e){return Te.value[e]?(je.value=e,Nt(),!0):(console.error("User not found:",e),!1)}function Kp(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Te.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Gp(e){const t=e.trim().toLowerCase();for(const s of Object.values(Te.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function zp(e){return Te.value[e]||null}function Jp(){Te.value={},je.value=null,hs.value=null,oa.value=!1,Nt(),Qn.value=!1}function Yp(){Qn.value||Lc()}async function qp(e){const t=Mp(e);if(!t.valid)return{success:!1,error:t.error};if(!await Fp(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Te.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),je.value=e.user_id,Nt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[i.id]=i,je.value=i.id,Nt(),{success:!0,user:i}}function Xp(){const e=Te.value[je.value];return!e||!e.secretKey?null:Up(e)}function Qp(){oa.value=!1}function Zp(){return hs.value}function ev(e){hs.value=e,Nt()}async function tv(e){const t=Te.value[je.value];return!t||!t.secretKey?null:Dc(t.secretKey,e)}async function sv(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function nv(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function ov(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function av(){if(!je.value)return;const e=Te.value[je.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Nt()}catch{}}function Fe(){const e=T(()=>je.value&&Te.value[je.value]||null),t=T(()=>Object.values(Te.value)),s=T(()=>Object.keys(Te.value).length>0),n=T(()=>Object.keys(Te.value).length),o=T(()=>je.value!==null&&!!Te.value[je.value]);return{users:Te,currentUserId:je,adminViewerId:hs,initialized:Qn,showKeyBackupModal:oa,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Yp,loadFromStorage:Lc,saveToStorage:Nt,createUser:jp,updateUser:Hp,deleteUser:Wp,switchUser:Vp,findUserByName:Kp,findUserByEmail:Gp,getUser:zp,clearUsers:Jp,restoreFromBackup:qp,getKeyBackup:Xp,dismissKeyBackupModal:Qp,getAdminViewerId:Zp,setAdminViewerId:ev,createGrantForViewer:tv,requestRecovery:sv,claimRecovery:nv,claimRecoveryByCode:ov,syncRole:av}}const qa="bridgePractice",Ze=E({}),Me=E(null),Tt=E(!1),ln=E(!1);function Bc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(l=>l.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:i}}function Uc(){try{const e=localStorage.getItem(qa);if(e){const t=JSON.parse(e);Ze.value=t.assignments||{},Me.value=t.currentAssignmentId||null,Me.value&&Ze.value[Me.value]&&(Tt.value=!0)}ln.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),ln.value=!0}}function Is(){try{const e=localStorage.getItem(qa),t=e?JSON.parse(e):{};t.assignments=Ze.value,t.currentAssignmentId=Me.value,localStorage.setItem(qa,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function Mc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(Ze.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const d of n)u.add(d);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Me.value=a.id,Tt.value=!0,Is(),a}const r=crypto.randomUUID(),i=new Date().toISOString(),l={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return Ze.value[r]=l,Me.value=r,Tt.value=!0,Is(),l}function rv(){if(ln.value)return;Uc();const e=Bc();e&&Mc(e),ln.value=!0}function lv(e){if(!Tt.value||!Me.value)return!1;const t=Ze.value[Me.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function iv(e){if(!Me.value)return;const t=Ze.value[Me.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Is())}function cv(e){if(!Me.value||!Tt.value)return!1;const t=Ze.value[Me.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Is(),!0}function uv(){if(!Tt.value||!Me.value)return null;const e=Ze.value[Me.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function dv(){Tt.value=!1}function fv(){Me.value&&Ze.value[Me.value]&&(Tt.value=!0)}function mv(e){return Ze.value[e]||null}function pv(){return Object.values(Ze.value)}function vv(e){return Ze.value[e]?(delete Ze.value[e],Me.value===e&&(Me.value=null,Tt.value=!1),Is(),!0):!1}function hv(){Ze.value={},Me.value=null,Tt.value=!1,ln.value=!1,Is()}function aa(){const e=T(()=>Me.value&&Ze.value[Me.value]||null),t=T(()=>Tt.value&&e.value!==null),s=T(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=T(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Ze,currentAssignmentId:Me,inAssignmentMode:Tt,initialized:ln,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:rv,loadFromStorage:Uc,saveToStorage:Is,createAssignment:Mc,isLessonInAssignment:lv,setTotalDeals:iv,recordDealCompletion:cv,getAssignmentTag:uv,exitAssignmentMode:dv,returnToAssignmentMode:fv,getAssignment:mv,getAllAssignments:pv,deleteAssignment:vv,clearAssignments:hv,parseAssignmentFromUrl:Bc}}const Xa="bridgePractice",Xe=E([]),cn=E(null),un=E(!1),Os=E({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Fc(){try{const e=localStorage.getItem(Xa);if(e){const t=JSON.parse(e);Xe.value=t.pendingObservations||[]}un.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),un.value=!0}}function Ds(){try{const e=localStorage.getItem(Xa),t=e?JSON.parse(e):{};t.pendingObservations=Xe.value,localStorage.setItem(Xa,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function jc(){un.value||Fc(),cn.value||Hc()}function Hc(){cn.value=Op(),Os.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function gv({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i}){var y,N;const l=Fe(),u=aa();un.value||jc();const d=l.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const $=e.subfolder||e.category||"Unknown";f=Rp($)}const p=u.getAssignmentTag(),m=Tp({userId:d.id,sessionId:cn.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i,skillPath:f,assignment:p}),g=Ep(m);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if(Os.value.totalObservations++,a?Os.value.correctCount++:Os.value.wrongCount++,d.dataConsent&&d.secretKey){const $=await yv(m,d);$.success||(console.warn("Failed to encrypt observation, storing unencrypted:",$.error),Yl(m,((y=d.classrooms)==null?void 0:y[0])||null))}else Yl(m,((N=d.classrooms)==null?void 0:N[0])||null);return{success:!0,observation:m}}async function yv(e,t){var s;try{const{encrypted_data:n,iv:o}=await Pr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=Tc(e,a);return Xe.value.push({encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()}),Ds(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Yl(e,t){const s=Tc(e,t);Xe.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ds()}async function bv(){const t=Fe().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Xe.value.length;n++){const o=Xe.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await Pr(o.observation,t.secretKey);Xe.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ds(),s}function _v(){return Xe.value.length}function wv(){return[...Xe.value]}function Cv(e){Xe.value=Xe.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ds()}function Sv(){Xe.value=[],Ds()}function $v(){return{...Os.value}}function kv(){Xe.value=[],cn.value=null,Os.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},un.value=!1,Ds()}function ys(){const e=T(()=>Xe.value.length),t=T(()=>Xe.value.length>0),s=T(()=>Xe.value.some(o=>!o.encrypted)),n=T(()=>cn.value);return{pendingObservations:Xe,sessionId:cn,sessionStats:Os,initialized:un,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:jc,startNewSession:Hc,recordObservation:gv,encryptPendingObservations:bv,getPendingCount:_v,getPendingObservations:wv,removeSyncedObservations:Cv,clearPendingObservations:Sv,getSessionStats:$v,reset:kv,loadFromStorage:Fc,saveToStorage:Ds}}function xv(){const e=ys(),t=E(null),s=E(0),n=E(!1),o=E(!1),a=Vt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Vt({answered:{},wrongCard:null,correctCard:null}),i=Vt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),l=E({N:[],E:[],S:[],W:[]}),u=E(null),d=E(1),f=T(()=>{var A;return((A=t.value)==null?void 0:A.steps)||[]}),p=T(()=>f.value.length>0),m=T(()=>f.value[s.value]||null),g=T(()=>f.value.some(A=>A.type==="bid")),y=T(()=>{var A;return((A=m.value)==null?void 0:A.type)==="bid"}),N=T(()=>{var A;for(let b=s.value;b>=0;b--)if((A=f.value[b])!=null&&A.clearCommentary)return b;return 0}),$=T(()=>{var A;return((A=t.value)==null?void 0:A.studentSeat)||"S"}),w=T(()=>t.value?ho(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),_=T(()=>w.value===$.value),R=T(()=>{var x,O;if(!y.value||!_.value||a.auctionComplete||o.value)return!1;const A=m.value;if(!(A!=null&&A.bid))return!1;const b=(O=(x=t.value)==null?void 0:x.auction)==null?void 0:O[a.currentBidIndex];return b?z(A.bid)===z(b):!1}),q=T(()=>{for(let A=a.displayedBids.length-1;A>=0;A--){const b=a.displayedBids[A];if(b&&b!=="Pass"&&b!=="X"&&b!=="XX")return b}return null}),Q=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;const A=a.displayedBids[a.displayedBids.length-1];if(A==="X"||A==="XX"||!q.value)return!1;let b=-1;for(let W=a.displayedBids.length-1;W>=0;W--){const ee=a.displayedBids[W];if(ee&&ee!=="Pass"&&ee!=="X"&&ee!=="XX"){b=W;break}}if(b===-1)return!1;const x=ho(b,t.value.auctionDealer||t.value.dealer),O=w.value;return(O==="N"||O==="S")&&(x==="E"||x==="W")||(O==="E"||O==="W")&&(x==="N"||x==="S")}),L=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let A=a.displayedBids.length-1;A>=0;A--){const b=a.displayedBids[A];if(b!=="Pass"){if(b==="XX")return!1;if(b==="X"){const x=ho(A,t.value.auctionDealer||t.value.dealer),O=w.value;return!(O==="N"&&x==="S"||O==="S"&&x==="N"||O==="E"&&x==="W"||O==="W"&&x==="E")}return!1}}return!1}),Y=T(()=>{const A=m.value;return A!=null&&A.chooseCard?!r.answered[s.value]:!1}),J=T(()=>{var A;return((A=m.value)==null?void 0:A.chooseCard)||null}),fe=T(()=>{if(!t.value)return[];const A=["N","E","S","W"];if(!p.value)return[];let b=null;const x=f.value;for(let O=0;O<=s.value&&O<x.length;O++){const B=x[O];B!=null&&B.showSeats&&(b=B.showSeats),B!=null&&B.showSeatsAfter&&(O<s.value||O===s.value&&o.value)&&(b=B.showSeatsAfter)}return b?A.filter(O=>!b.includes(O)):A}),me=T(()=>{if(!t.value||!p.value)return null;let A={};const b=f.value;for(let x=0;x<=s.value&&x<b.length;x++){const O=b[x];if(O!=null&&O.showcards)for(const[B,W]of Object.entries(O.showcards))A[B]=W;if(O!=null&&O.showSeats)for(const B of O.showSeats)delete A[B];if(O!=null&&O.showSeatsAfter&&(x<s.value||x===s.value&&o.value))for(const B of O.showSeatsAfter)delete A[B]}return Object.keys(A).length>0?A:null}),ce=T(()=>{if(!t.value||!p.value)return{};let A={},b=new Set;const x=f.value;for(let B=0;B<=s.value&&B<x.length;B++){const W=x[B];if(W!=null&&W.showcards)for(const[ee,pe]of Object.entries(W.showcards))A[ee]=pe;if(W!=null&&W.showSeats)for(const ee of W.showSeats)b.add(ee)}const O={};for(const[B,W]of Object.entries(A))b.has(B)&&(O[B]=W);return O}),_e=T(()=>{const A=me.value;return A?Object.keys(A):[]}),we=T(()=>{const A=fe.value,b=_e.value;return b.length?A.filter(x=>!b.includes(x)):A});function ne(A){const b={spades:[],hearts:[],diamonds:[],clubs:[]},x={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const O of A){const B=O[0].toUpperCase(),W=O.slice(1).toUpperCase(),ee=x[B];ee&&b[ee].push(W)}return b}const re=T(()=>{var x,O;if(!((x=t.value)!=null&&x.hands))return{};if((O=m.value)!=null&&O.reset)return t.value.hands;const A=me.value,b={};for(const B of["N","E","S","W"]){if(A&&A[B]){b[B]=ne(A[B]);continue}const W=t.value.hands[B];if(!W){b[B]=null;continue}b[B]={spades:[...W.spades||[]],hearts:[...W.hearts||[]],diamonds:[...W.diamonds||[]],clubs:[...W.clubs||[]]};for(const ee of l.value[B]){const pe={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[ee.suit];if(pe&&b[B][pe]){const ue=b[B][pe].indexOf(ee.card);ue!==-1&&b[B][pe].splice(ue,1)}}}return b}),X=T(()=>!(g.value&&!a.auctionComplete)),D=T(()=>{if(!p.value)return!0;let A=!0;const b=f.value;for(let x=0;x<=s.value&&x<b.length;x++){const O=b[x];(O==null?void 0:O.showAuction)!==null&&(O==null?void 0:O.showAuction)!==void 0&&(A=O.showAuction)}return A}),V=T(()=>{var b;if(!p.value)return!1;const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++)if((b=A[x])!=null&&b.showLead)return!0;return!1}),G=T(()=>{var A;return(A=t.value)!=null&&A.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),K=T(()=>{if(!p.value||n.value)return!0;const A=m.value;return(A==null?void 0:A.type)==="end"&&!Y.value}),oe=T(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function Ie(){var b;l.value={N:[],E:[],S:[],W:[]};const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++){const O=A[x];if((b=O==null?void 0:O.plays)!=null&&b.length)for(const B of O.plays){const W=B.split(/[,\s]+/);for(const ee of W){if(!ee)continue;const pe=ee.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(pe){const ue=pe[1].toUpperCase(),Pe=pe[2].toUpperCase();let Ee=pe[3].toUpperCase();Ee==="10"&&(Ee="T"),l.value[ue].push({suit:Pe,card:Ee})}}}}}function We(){if(!t.value)return;const A=t.value.auction||[],b=pt(s.value);if(b===-1){for(;a.currentBidIndex<A.length;)a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const x=f.value[b],O=z(x.bid);for(;a.currentBidIndex<A.length;){const B=ho(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),W=z(A[a.currentBidIndex]);if(B===$.value&&W===O){u.value=Date.now(),d.value=1;return}a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function pt(A){const b=f.value;for(let x=A;x<b.length;x++)if(b[x].type==="bid")return x;return-1}function et(A){if(!t.value||a.auctionComplete||!y.value)return!1;const b=t.value.auction[a.currentBidIndex],x=z(A)===z(b),O=s.value;x?O in i.wrongStepIndices&&(delete i.wrongStepIndices[O],H(!0)):(H(!1),i.wrongStepIndices[O]=!0,i.boardHadWrong=!0);const B=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,d.value=1,x?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=A,a.correctBid=b,a.wrongBidIndex=B);const W=s.value+1,ee=f.value[W];return(ee==null?void 0:ee.type)==="bid"?(s.value=W,o.value=!1,We()):(o.value=!0,j(),s.value>=f.value.length-1&&C()),x}function j(){var b;if(a.auctionComplete)return;if(pt(s.value+1)===-1){const x=((b=t.value)==null?void 0:b.auction)||[];for(;a.currentBidIndex<x.length;)a.displayedBids.push(x[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function ae(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function se(A,b){if(!t.value||!Y.value)return!1;const x=J.value;if(!x)return!1;const O=(A+b).toUpperCase(),B=s.value;let W=!1,ee="";return x.anyOf?(W=x.cards.includes(O),ee=x.cards[0]):(W=O===x.card,ee=x.card),W?B in i.wrongStepIndices&&(delete i.wrongStepIndices[B],H(!0)):(H(!1),i.wrongStepIndices[B]=!0,i.boardHadWrong=!0),r.answered[B]=!0,W?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=O,r.correctCard=ee),be(),W}function le(){r.wrongCard=null,r.correctCard=null}function be(){var A;if(R.value||Y.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,Ie(),((A=f.value[s.value])==null?void 0:A.type)==="bid"&&We(),s.value>=f.value.length-1){const b=f.value[s.value];(b==null?void 0:b.type)!=="bid"&&(b==null?void 0:b.type)!=="choose-card"&&C()}return!0}return C(),!1}function C(){n.value=!0,k()}function k(){if(f.value.some(b=>b.type==="bid"||b.type==="choose-card"))if(i.boardHadWrong){i.wrongCount++;const b=Object.keys(i.wrongStepIndices).length===0;H(b)}else i.correctCount++,H(!0)}function I(){if(ae(),le(),o.value)return o.value=!1,M(s.value),!0;if(s.value>0){const A=s.value-1,b=f.value[A];return r.answered[A]&&delete r.answered[A],(b==null?void 0:b.type)==="bid"&&M(A),s.value=A,n.value=!1,o.value=!1,Ie(),!0}return!1}function M(A){var W;const b=f.value[A];if(!b||b.type!=="bid")return;const x=z(b.bid),O=((W=t.value)==null?void 0:W.auction)||[];let B=0;for(let ee=0;ee<O.length;ee++)if(z(O[ee])===x){B=ee;break}a.currentBidIndex=B,a.displayedBids=O.slice(0,B),a.auctionComplete=!1,u.value=Date.now(),d.value=1}async function H(A){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:A?"PASS":"FAIL",correct:A,attemptNumber:1,timeTakenMs:0})}catch(b){console.error("Failed to record board observation:",b)}}function F(A){var b,x;t.value=A,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},l.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(b=A==null?void 0:A.steps)!=null&&b.length&&(Ie(),((x=A.steps[0])==null?void 0:x.type)==="bid"&&We())}function te(){i.correctCount=0,i.wrongCount=0}function z(A){if(!A)return"";const x=A.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return x==="PASS"||x==="P"?"PASS":x==="X"||x==="DBL"||x==="DOUBLE"?"X":x==="XX"||x==="RDBL"||x==="REDOUBLE"?"XX":x.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:i,steps:f,hasSteps:p,currentStep:m,hasBidSteps:g,isBidStep:y,commentaryStartIndex:N,studentSeat:$,currentTurnSeat:w,isStudentTurn:_,hasBidPrompt:R,lastContractBid:q,canDouble:Q,canRedouble:L,canGoBack:oe,hasCardChoice:Y,currentChooseCard:J,hiddenSeats:we,hands:re,showHcp:X,showcardsPlayedCards:ce,isComplete:K,showAuctionTable:D,showOpeningLead:V,openingLead:G,advance:be,makeBid:et,clearFeedback:ae,goBack:I,makeCardChoice:se,clearCardFeedback:le,loadDeal:F,resetStats:te,observationStore:e}}const Lo="bridgePractice",Wc="bridgePracticeUIPrefs",tt=E({teacherName:null,availableClassrooms:[],configuredAt:null}),dn=E({showLoadPbnOption:!1}),Bo=E(!1);function Vc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Kc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:Vc(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Av(){return new URLSearchParams(window.location.search).get("collection")}function Nv(){return new URLSearchParams(window.location.search).get("lesson")}function Tv(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Ev(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function Ov(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function Rv(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const Iv=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Gc(){try{const e=localStorage.getItem(Lo);if(e){const t=JSON.parse(e);t.appConfig&&(tt.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function Pv(){try{const e=localStorage.getItem(Wc);if(e){const t=JSON.parse(e);dn.value={...dn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function Dv(){try{localStorage.setItem(Wc,JSON.stringify(dn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function Lv(e,t){dn.value[e]=t,Dv()}function Dr(){try{const e=localStorage.getItem(Lo),t=e?JSON.parse(e):{};t.appConfig=tt.value,localStorage.setItem(Lo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function zc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function Bv(){if(Bo.value)return;Gc(),Pv();const{teacher:e,classrooms:t}=Kc();(e||t.length>0)&&(e&&!tt.value.teacherName&&(tt.value.teacherName=e),t.length>0&&(tt.value.availableClassrooms=zc(tt.value.availableClassrooms||[],t)),tt.value.configuredAt||(tt.value.configuredAt=new Date().toISOString()),Dr()),Bo.value=!0}function Uv(){try{const e=localStorage.getItem(Lo);return e?JSON.parse(e):null}catch{return null}}function Mv(){tt.value={teacherName:null,availableClassrooms:[],configuredAt:null},Dr(),Bo.value=!1}function oo(){const e=T(()=>tt.value.availableClassrooms.length===0),t=T(()=>tt.value.availableClassrooms.length>1),s=T(()=>tt.value.availableClassrooms.length===1),n=T(()=>s.value?tt.value.availableClassrooms[0]:null),o=T(()=>tt.value.teacherName),a=T(()=>tt.value.availableClassrooms),r=T(()=>dn.value.showLoadPbnOption);return{appConfig:tt,initialized:Bo,uiPrefs:dn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:Bv,loadFromStorage:Gc,saveToStorage:Dr,clearConfig:Mv,getStorageData:Uv,getCollectionFromUrl:Av,setCollectionInUrl:Tv,getLessonFromUrl:Nv,setLessonInUrl:Ev,getDealFromUrl:Ov,setDealInUrl:Rv,setUIPref:Lv,COLLECTIONS:Iv,parseUrlParams:Kc,classroomIdToName:Vc,mergeClassrooms:zc}}const Fv="https://api.bridge-classroom.com/api",jv="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Lr=E([]),Je=E([]),Uo=E(!1),Mo=E(null),Mn=E(null),Fo=E(!1),Hv=5*60*1e3;async function Wv(e){const t=await fetch(`${Fv}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":jv}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Vv(e,t){try{return{...await Pc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function Kv(){return ys().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Jc(e=!1){const s=Fe().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=Kv();if(!e&&Mn.value&&Date.now()-new Date(Mn.value).getTime()<Hv&&Je.value.length>0)return Gv(n),{success:!0,cached:!0};Uo.value=!0,Mo.value=null;let o=[];try{const i=await Wv(s.id);if(Lr.value=i,s.secretKey&&i.length>0){const l=i.map(d=>Vv(d,s.secretKey));o=(await Promise.all(l)).filter(d=>d!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Mo.value=i.message)}const a=new Set(o.map(i=>i.id)),r=n.filter(i=>!a.has(i.id));return Je.value=[...o,...r],Mn.value=new Date().toISOString(),Uo.value=!1,{success:!0,count:Je.value.length}}function Gv(e){const t=new Set(Je.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Je.value=[...Je.value,...s])}async function zv(){if(Fo.value)return;Fe().isAuthenticated.value&&await Jc(),Fo.value=!0}function Jv(){Lr.value=[],Je.value=[],Mn.value=null,Fo.value=!1}function Yc(){const e={};for(const t of Je.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function ql(){const e={};for(const t of Je.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Xl(){const e={};for(const t of Je.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Ql(e=10){return[...Je.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Zl(){const e=new Date().toISOString().split("T")[0];return Je.value.filter(t=>t.timestamp.startsWith(e))}function ei(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Je.value.filter(n=>n.timestamp>=s)}function Yv(){const e=Yc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const i=new Date(t[r]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Br(){const e=T(()=>Je.value.length),t=T(()=>Je.value.filter(m=>m.correct).length),s=T(()=>Je.value.filter(m=>!m.correct).length),n=T(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=T(()=>{const m=Zl(),g=m.filter(N=>N.correct).length,y=m.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=T(()=>{const m=ei(),g=m.filter(N=>N.correct).length,y=m.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),r=T(()=>Yv()),i=T(()=>ql()),l=T(()=>Xl()),u=T(()=>Ql(20)),d=T(()=>Je.value.length>0),f=T(()=>Uo.value),p=T(()=>Mo.value!==null);return{observations:Lr,decryptedObservations:Je,loading:Uo,error:Mo,lastFetchedAt:Mn,initialized:Fo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:i,sessions:l,recentObservations:u,hasData:d,isLoading:f,hasError:p,initialize:zv,fetchProgress:Jc,clearCache:Jv,getObservationsByDate:Yc,getStatsBySkill:ql,getSessions:Xl,getRecentObservations:Ql,getTodayObservations:Zl,getThisWeekObservations:ei}}const As={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},gt={NONE:"none",SILVER:"silver",GOLD:"gold"},qv=6;function Xv(e){return e.slice(0,10)}function qc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Xc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const ti=60*60*1e3;function Qc(e){if(e.length===0)return As.GREY;const t=e[e.length-1];if(!t.correct)return As.RED;const s=Date.now()-ti;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return As.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return As.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=ti?As.ORANGE:As.GREEN}function Zc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function eu(e){if(e.length===0)return gt.NONE;const t=new Set;for(const r of e)t.add(Xv(r.timestamp));const s=[...t].filter(r=>Zc(e,r)).sort();if(s.length<2)return gt.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)qc(a,s[r])>=qv&&(o++,a=s[r],o>n&&(n=o));return n>=3?gt.GOLD:n>=2?gt.SILVER:gt.NONE}function Qv(e){const t=e.observations.value||[];let s=[];try{s=ys().getPendingObservations().filter(i=>i.metadata).map(i=>{const l=i.metadata;return{id:l.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:l.timestamp||i.queuedAt,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number,session_id:l.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function Zv(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var l;return(i.deal_number??((l=i.deal)==null?void 0:l.deal_number))===o}).sort((i,l)=>i.timestamp.localeCompare(l.timestamp)),r=Xc(a);return{boardNumber:o,status:Qc(a),achievement:eu(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function eh(e){return!e||e.length===0?{achievement:gt.NONE}:e.every(n=>n.achievement===gt.GOLD)?{achievement:gt.GOLD}:e.every(n=>n.achievement===gt.SILVER||n.achievement===gt.GOLD)?{achievement:gt.SILVER}:{achievement:gt.NONE}}const tu="bridgeLessonBoards",Zn=E(th()),$a=new Set;function th(){try{const e=localStorage.getItem(tu);return e?JSON.parse(e):{}}catch{return{}}}function sh(){try{localStorage.setItem(tu,JSON.stringify(Zn.value))}catch{}}function su(e,t){Zn.value={...Zn.value,[e]:t},sh()}function nh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function oh(e){const t=oo(),s=e.filter(n=>!Zn.value[n]&&!$a.has(n));if(s.length!==0){for(const n of s)$a.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(r);if(!i.ok)continue;const l=await i.text(),u=nh(l);if(u.length>0){su(n,u);break}}catch{continue}}}finally{$a.delete(n)}}))}}function ah(e){var n,o;const t=Zn.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||i==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(i),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:r.lastActivity};const l=Math.max(...r.boards),u=[];for(let d=1;d<=l;d++)u.push(d);return{subfolder:a,boardNumbers:u,lastActivity:r.lastActivity}})}function Ps(){const e=ps();function t(){return Qv(e)}return{STATUS:As,ACHIEVEMENT:gt,getObservations:t,computeBoardMastery:Zv,computeLessonAchievement:eh,extractLessonsFromObservations:ah,saveLessonBoardNumbers:su,fetchMissingBoardCounts:oh,groupIntoBoardAttempts:Xc,calculateCurrentStatus:Qc,calculateAchievement:eu,hasGreenDay:Zc,daysBetween:qc}}const Nn="https://api.bridge-classroom.com/api",Tn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",jo=E(!1),Ur=E(null),ra=E([]),ms=E({}),Ho=E(!1),Wo=E(null),Mr=E(!1),Vo={},rh=2*60*1e3;async function lh(){var s;const e=Fe(),t=e.currentUser.value;if(!t||!t.email){jo.value=!1;return}try{const n=await fetch(`${Nn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Tn}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;Ur.value=a.id;const r=await fetch(`${Nn}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Tn}});if(!r.ok)return;const l=(await r.json()).grants||[],u=new Set(l.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const d=await fetch(`${Nn}/users`,{headers:{"x-api-key":Tn}});if(!d.ok)return;const p=(await d.json()).users||[],m=(s=t.email)==null?void 0:s.toLowerCase();if(ra.value=p.filter(g=>{var y;return u.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==m}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),jo.value=!0,Mr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Nn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Tn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function nu(e){const t=ms.value[e],s=Vo[e];if(t&&s&&Date.now()-s<rh)return t;try{const n=await fetch(`${Nn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Tn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=((await n.json()).observations||[]).map(r=>({id:r.id||r.observation_id,timestamp:r.timestamp,skill_path:r.skill_path,correct:r.correct,deal_subfolder:r.deal_subfolder,deal_number:r.deal_number}));return ms.value={...ms.value,[e]:a},Vo[e]=Date.now(),a}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function ih(){Ho.value=!0,Wo.value=null;try{await Promise.allSettled(ra.value.map(s=>nu(s.id)));const e=Ps(),t=new Set;for(const s of Object.values(ms.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Wo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Ho.value=!1}}function ch(e){const t=ms.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=Ps(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const i=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const l of i)o[l.status]=(o[l.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function uh(e,t=3){const s=ms.value[e]||[],n=ps(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function dh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function fh(){jo.value=!1,Ur.value=null,ra.value=[],ms.value={},Ho.value=!1,Wo.value=null,Mr.value=!1;for(const e of Object.keys(Vo))delete Vo[e]}function ao(){return{isTeacher:jo,viewerId:Ur,students:ra,studentObservations:ms,loading:Ho,error:Wo,initialized:Mr,checkTeacherStatus:lh,fetchStudentObservations:nu,loadAllStudentSummaries:ih,getStudentMasterySummary:ch,getStudentRecentLessons:uh,formatTimeSince:dh,reset:fh}}const Qa="https://api.bridge-classroom.com/api",Za="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",er=E(!1),Ks=E(null),Zt=E(null),eo=E([]),fn=E([]),Fr=E("lessons"),la=E(!0),pn=E(!1),ro=E([]);function mh(e){pn.value=!0,ro.value=e}function ph(){pn.value=!1,ro.value=[]}function lo(){return pn.value?ro.value:eo.value}async function ou(){const e=Fe(),t=ao(),s=e.currentUser.value;if(!s){fn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Qa}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":Za}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${Qa}/users`,{headers:{"x-api-key":Za}});if(r.ok){const{users:i}=await r.json(),l=new Set(a.map(u=>u.grantor_id));for(const u of i)l.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}fn.value=n}async function jr(e=!1){if(pn.value)return{success:!0};const t=Fe(),s=Br(),n=t.currentUser.value;if(!n)return Ks.value="No authenticated user",{success:!1,error:Ks.value};er.value=!0,Ks.value=null;try{if(!Zt.value||Zt.value===n.id)Zt.value=n.id,await s.fetchProgress(e),eo.value=s.decryptedObservations.value;else{const o=await fetch(`${Qa}/observations?user_id=${Zt.value}&limit=10000`,{headers:{"x-api-key":Za}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();eo.value=a.observations||[]}return{success:!0}}catch(o){return Ks.value=o.message,{success:!1,error:o.message}}finally{er.value=!1}}async function vh(e){Zt.value=e,await jr(!0)}const tr=T(()=>{var n;const e=lo(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:lu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),sr=T(()=>{const e=lo(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Ip(o),r=Ec(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Pp(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),au=T(()=>la.value?tr.value.filter(e=>e.total>0):tr.value),ru=T(()=>la.value?sr.value.filter(e=>e.total>0):sr.value);function lu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const hh=T(()=>Fr.value==="lessons"?au.value:ru.value),gh=T(()=>fn.value.length>1),yh=T(()=>fn.value.find(e=>e.id===Zt.value)||null),bh=T(()=>lo().length>0),_h=T(()=>lo().length),wh=T(()=>{const e=lo();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Ch(){const t=Fe().currentUser.value;t&&(Zt.value=t.id,await ou(),await jr())}function Sh(){eo.value=[],fn.value=[],Zt.value=null,Fr.value="lessons",la.value=!0,Ks.value=null,pn.value=!1,ro.value=[]}function ps(){return{loading:er,error:Ks,selectedUserId:Zt,observations:eo,accessibleUsers:fn,activeTab:Fr,onlyWithObservations:la,useTestData:pn,testObservations:ro,enableTestMode:mh,disableTestMode:ph,lessonStats:tr,taxonStats:sr,filteredLessonStats:au,filteredTaxonStats:ru,currentStats:hh,canViewOtherUsers:gh,selectedUser:yh,hasData:bh,totalObservations:_h,overallSuccessRate:wh,initialize:Ch,loadAccomplishments:jr,selectUser:vh,fetchAccessibleUsers:ou,reset:Sh,formatLessonName:lu}}const $h="https://api.bridge-classroom.com/api",kh=5e3,nr=20;let ds=[],Fn=null;function Ht(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),ds.push(n),ds.length>=nr?jn():Fn||(Fn=setTimeout(jn,kh))}async function jn(){if(Fn&&(clearTimeout(Fn),Fn=null),ds.length===0)return;const e=ds.splice(0);try{await fetch(`${$h}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{ds.unshift(...e),ds.length>nr*2&&(ds=ds.slice(-nr))}}const Hr="https://api.bridge-classroom.com/api",iu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",yt=E("idle"),cu=E(null),Vs=E(null),Gs=E(0),zs=E(navigator.onLine),En=E(!1),si=5,xh=1e3,Ah=6e4,Nh=5e3;let en=null;function Th(e){const t=Math.min(xh*Math.pow(2,e),Ah);return t+Math.random()*t*.25}async function uu(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${Hr}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return Ht("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return Ht("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function du(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${Hr}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":iu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function io(){var n,o;const e=Fe(),t=ys();if(!navigator.onLine)return yt.value="offline",{success:!1,offline:!0};yt.value="syncing",Vs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const l=await uu(a);if(l.success)e.updateUser(a.id,{serverRegistered:!0}),En.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(l.error==="email_exists")return Ht("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),yt.value="error",Vs.value="Account already exists. Please use recovery.",En.value=!0,s;Ht("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,l.error),En.value=!0,Vs.value=`Registration failed: ${l.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let i=!1;if(a!=null&&a.dataConsent){const l=t.getPendingObservations();if(l.length>0){const u=await du(l);if(u.success&&u.synced>0){const d=l.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var p;return(p=f.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await ps().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,Vs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return En.value||i?yt.value="error":(yt.value="idle",cu.value=new Date().toISOString(),Gs.value=0),s}catch(a){return console.error("Sync failed:",a),Vs.value=a.message,yt.value="error",s.success=!1,s}}function or(){en&&clearTimeout(en),en=setTimeout(async()=>{await io()},Nh)}async function fu(){return en&&(clearTimeout(en),en=null),await io()}async function mu(){if(Gs.value>=si){console.log("Max retries reached, giving up"),yt.value="error";return}const e=Th(Gs.value);Gs.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Gs.value}/${si})`),setTimeout(async()=>{const t=await io();!t.success&&t.offline!==!0&&mu()},e)}function Eh(){var i;const e=Fe(),t=ys(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(l=>l.encrypted);if(o.length===0)return;const a={observations:o.map(l=>({encrypted_data:l.encrypted_data,iv:l.iv,metadata:l.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${Hr}/observations?api_key=${iu}`,r),console.log("Sent beacon with",o.length,"observations")}function Oh(){window.addEventListener("online",()=>{zs.value=!0,console.log("Back online, triggering sync"),fu()}),window.addEventListener("offline",()=>{zs.value=!1,yt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&zs.value&&(console.log("Tab visible, triggering sync"),or())}),window.addEventListener("beforeunload",Eh),setInterval(()=>{document.visibilityState==="visible"&&zs.value&&or()},5*60*1e3)}async function Rh(){Oh(),navigator.onLine?await io():yt.value="offline"}function pu(){const e=T(()=>yt.value==="syncing"),t=T(()=>yt.value==="offline"||!zs.value),s=T(()=>yt.value==="error"),n=T(()=>ys().pendingCount.value>0);return{syncState:yt,lastSyncAt:cu,lastError:Vs,retryCount:Gs,isOnline:zs,registrationFailed:En,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:Rh,performSync:io,triggerSync:or,forceSync:fu,retrySync:mu,registerUserWithServer:uu,syncObservationsToServer:du}}const Wr="https://api.bridge-classroom.com/api",vu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",es=E(null),ar=E(!1),co=E(null);async function Ih(){ar.value=!0;try{const e=await fetch(`${Wr}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=es.value;es.value=t.announcement||null,es.value&&(!s||s.id!==es.value.id)&&(co.value=null)}catch{}finally{ar.value=!1}}async function Ph(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${Wr}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":vu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return es.value=a.announcement||null,co.value=null,a}async function Dh(){const e=await fetch(`${Wr}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":vu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);es.value=null,co.value=null}function Lh(){es.value&&(co.value=es.value.id)}function Vr(){return{announcement:es,loading:ar,dismissed:co,loadAnnouncement:Ih,setAnnouncement:Ph,clearAnnouncement:Dh,dismiss:Lh}}const Bh={key:0,class:"minimal-hand"},Uh={class:"seat-label-inline"},Mh={class:"seat-label"},Fh={key:0,class:"suits"},jh={key:0,class:"suit-row"},Hh={key:0,class:"cards clickable-cards"},Wh=["onClick"],Vh={key:1,class:"cards"},Kh={key:2,class:"cards"},Gh={key:1,class:"hidden-hand"},zh={key:2,class:"hcp"},Jh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Nc,n=T(()=>Ja(t.seat)),o=T(()=>xp(t.hand)),a=T(()=>t.hand?s.reduce((N,$)=>{var w;return N+(((w=t.hand[$])==null?void 0:w.length)||0)},0):0),r=T(()=>a.value>0&&a.value<5);function i(N){return t.hand&&t.hand[N]&&t.hand[N].length>0}function l(N){return Rr[N]}function u(N){return $p(N)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(N){return d[N]||N}function p(N){if(!t.hand||!t.hand[N])return"";const $=t.hand[N];return $.length===0?"":$.map(Sa).join(" ")}const m=T(()=>t.playedCards&&t.playedCards.length>0),g=T(()=>{if(!t.playedCards)return null;const N=new Set;for(const $ of t.playedCards){const w=$[0].toUpperCase(),_=$.slice(1).toUpperCase(),R={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[w];R&&N.add(`${R}:${_}`)}return N});function y(N,$){return g.value?g.value.has(`${N}:${$}`):!1}return(N,$)=>(v(),h("div",{class:de(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(v(),h("div",Bh,[c("span",Uh,S(e.seat),1),(v(!0),h(Z,null,ie(P(s),w=>(v(),h("span",{key:w,class:de(["suit-symbol-inline",u(w)])},S(l(w)),3))),128))])):(v(),h(Z,{key:1},[c("div",Mh,S(n.value),1),!e.hidden&&e.hand?(v(),h("div",Fh,[(v(!0),h(Z,null,ie(P(s),w=>(v(),h(Z,{key:w},[!r.value||i(w)?(v(),h("div",jh,[c("span",{class:de(["suit-symbol",u(w)])},S(l(w)),3),e.clickable?(v(),h("span",Hh,[(v(!0),h(Z,null,ie(e.hand[w],_=>(v(),h("span",{key:_,class:de(y(w,_)?"card-played":"card-clickable"),onClick:R=>!y(w,_)&&N.$emit("card-click",{suit:f(w),rank:_})},S(P(Sa)(_)),11,Wh))),128))])):m.value?(v(),h("span",Vh,[(v(!0),h(Z,null,ie(e.hand[w],_=>(v(),h("span",{key:_,class:de({"card-played":y(w,_)})},S(P(Sa)(_)),3))),128))])):(v(),h("span",Kh,S(p(w)),1))])):U("",!0)],64))),128))])):e.hidden?(v(),h("div",Gh,[...$[0]||($[0]=[c("div",{class:"card-back"},null,-1)])])):U("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(v(),h("div",zh,S(o.value)+" HCP ",1)):U("",!0)],64))],2))}},go=ye(Jh,[["__scopeId","data-v-128fc7ed"]]),Yh={class:"ns-column north-row"},qh={key:0,class:"position north"},Xh={key:0,class:"position west"},Qh={class:"center"},Zh={key:1,class:"position east"},eg={class:"ns-column south-row"},tg={key:0,class:"position south"},sg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return v(),h("div",{class:de(["bridge-table",{compact:e.compact}])},[c("div",Yh,[!e.hiddenSeats.includes("N")&&e.hands.N?(v(),h("div",qh,[he(go,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(v(),h("div",Xh,[he(go,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0),c("div",Qh,[jd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(v(),h("div",Zh,[he(go,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0),c("div",eg,[!e.hiddenSeats.includes("S")&&e.hands.S?(v(),h("div",tg,[he(go,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0)])],2)}}},ng=ye(sg,[["__scopeId","data-v-ec6230a9"]]),og={class:"bidding-box"},ag={class:"bid-section"},rg={class:"levels"},lg=["onClick"],ig={class:"strains"},cg=["disabled","onClick"],ug=["innerHTML"],dg={class:"special-bids"},fg=["disabled"],mg=["disabled"],pg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=E(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=T(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),i=T(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const m=p[1].toUpperCase();return f.indexOf(m==="N"?"NT":m)});function l(f){o.value=f}function u(f,p){if(!f)return!1;const g=["C","D","H","S","NT"].indexOf(p);return f>r.value||f===r.value&&g>i.value}function d(f,p){u(f,p)&&n("bid",`${f}${p}`)}return(f,p)=>(v(),h("div",og,[c("div",ag,[c("div",rg,[(v(),h(Z,null,ie(7,m=>c("button",{key:m,class:de(["level-btn",{active:o.value===m}]),onClick:g=>l(m)},S(m),11,lg)),64))]),c("div",ig,[(v(),h(Z,null,ie(a,m=>c("button",{key:m.value,class:de(["strain-btn",[m.colorClass,{disabled:!u(o.value,m.value)}]]),disabled:!u(o.value,m.value),onClick:g=>d(o.value,m.value)},[c("span",{innerHTML:m.display},null,8,ug)],10,cg)),64))])]),c("div",dg,[c("button",{class:"special-btn pass",onClick:p[0]||(p[0]=m=>f.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=m=>f.$emit("bid","X"))}," Double ",8,fg),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=m=>f.$emit("bid","XX"))}," Redouble ",8,mg)])]))}},vg=ye(pg,[["__scopeId","data-v-38ccb98f"]]),hg={class:"auction-table"},gg={class:"rounds"},yg=["innerHTML"],bg={key:1,class:"turn-indicator"},_g={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=T(()=>["W","N","E","S"].indexOf(t.dealer)),n=T(()=>{const u=[],d=t.bids;let f=0,p=0;for(;f<d.length||p===0&&d.length>0;){const m=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&f<d.length;y++)m[y]=d[f],f++;if(m.some(y=>y!==null)&&u.push(m),p++,p>20)break}if(t.currentBidIndex>=d.length){const m=u[u.length-1],g=m?m.filter(y=>y!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function a(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function r(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function i(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function l(u){return Ir(u).html}return(u,d)=>(v(),h("div",hg,[d[0]||(d[0]=Oo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",gg,[(v(!0),h(Z,null,ie(n.value,(f,p)=>(v(),h("div",{key:p,class:"round"},[(v(!0),h(Z,null,ie(f,(m,g)=>(v(),h("div",{key:g,class:de(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":i(p,g)}])},[m?(v(),h("span",{key:0,innerHTML:l(m)},null,8,yg)):e.showTurnIndicator&&a(p,g)?(v(),h("span",bg,"?")):U("",!0)],2))),128))]))),128))])]))}},wg=ye(_g,[["__scopeId","data-v-ac265db8"]]),Cg={class:"deal-info"},Sg={class:"board-number"},$g={key:0,class:"board-popup"},kg={class:"popup-list"},xg=["onClick"],Ag={class:"info-row"},Ng={class:"info-item"},Tg={class:"value"},Eg={class:"info-item"},Og={key:0,class:"contract-row"},Rg={class:"info-item"},Ig=["innerHTML"],Pg={key:0,class:"label"},Dg={key:0,class:"info-item"},Lg=["innerHTML"],Bg={key:1,class:"title"},Ug={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=E(!1);function a(p){n("goto",p),o.value=!1}const r=T(()=>Ja(s.dealer)),i=T(()=>Ja(s.declarer)),l=T(()=>kp(s.vulnerable)),u=T(()=>{var m;const p=(m=s.vulnerable)==null?void 0:m.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),d=T(()=>s.contract?Ir(s.contract).html:""),f=T(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],m=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},N=g[p]||p;return`<span class="${y[p]||"black"}">${N}</span>${m==="T"?"10":m}`});return(p,m)=>(v(),h("div",Cg,[c("div",{class:"board-selector",onMouseenter:m[0]||(m[0]=g=>o.value=!0),onMouseleave:m[1]||(m[1]=g=>o.value=!1)},[c("div",Sg,"Board "+S(e.boardNumber),1),o.value&&e.totalDeals>1?(v(),h("div",$g,[m[2]||(m[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",kg,[(v(!0),h(Z,null,ie(e.totalDeals,g=>(v(),h("button",{key:g,class:de(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+S(e.dealBoardNumbers[g-1]||g),11,xg))),128))])])):U("",!0)],32),c("div",Ag,[c("div",Ng,[m[3]||(m[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",Tg,S(r.value),1)]),c("div",Eg,[m[4]||(m[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:de(["value",u.value])},S(l.value),3)])]),e.showContract&&e.contract?(v(),h("div",Og,[c("div",Rg,[c("span",{class:"value contract",innerHTML:d.value},null,8,Ig),e.declarer?(v(),h("span",Pg,"by "+S(i.value),1)):U("",!0)]),e.openingLead?(v(),h("div",Dg,[m[5]||(m[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:f.value},null,8,Lg)])):U("",!0)])):U("",!0),e.title?(v(),h("div",Bg,S(e.title),1)):U("",!0)]))}},Mg=ye(Ug,[["__scopeId","data-v-5a844c49"]]),Fg={class:"feedback-header"},jg={key:0,class:"icon"},Hg={key:1,class:"icon"},Wg={class:"title"},Vg={key:0,class:"feedback-content"},Kg={class:"bid-comparison"},Gg={class:"bid-item your-bid"},zg=["innerHTML"],Jg={class:"bid-item correct-bid"},Yg=["innerHTML"],qg={key:1,class:"feedback-content"},Xg={class:"bid-comparison"},Qg={class:"bid-item your-bid"},Zg=["innerHTML"],ey={class:"bid-item correct-bid"},ty=["innerHTML"],sy=["innerHTML"],ny={class:"actions"},oy={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=T(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Ir(a).html}function o(a){return Ap(a).html}return(a,r)=>e.visible?(v(),h("div",{key:0,class:de(["feedback-panel",e.type])},[c("div",Fg,[e.type==="wrong"?(v(),h("span",jg,"")):e.type==="correct"?(v(),h("span",Hg,"")):U("",!0),c("span",Wg,S(s.value),1)]),e.wrongBid?(v(),h("div",Vg,[c("div",Kg,[c("div",Gg,[r[1]||(r[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,zg)]),c("div",Jg,[r[2]||(r[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Yg)])])])):U("",!0),e.wrongCardCode?(v(),h("div",qg,[c("div",Xg,[c("div",Qg,[r[3]||(r[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Zg)]),c("div",ey,[r[4]||(r[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,ty)])])])):U("",!0),e.commentary?(v(),h("div",{key:2,class:"commentary",innerHTML:P(Ws)(e.commentary)},null,8,sy)):U("",!0),c("div",ny,[e.showContinue?(v(),h("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=i=>a.$emit("continue"))}," Continue ")):U("",!0)])],2)):U("",!0)}},ni=ye(oy,[["__scopeId","data-v-04368462"]]),ay={class:"welcome-screen"},ry={class:"welcome-card"},ly={class:"welcome-header"},iy={key:0,class:"welcome-body"},cy={class:"form-group"},uy={key:0,class:"error-message"},dy={class:"form-group"},fy={key:0,class:"error-message"},my={class:"form-group"},py={key:0,class:"error-message"},vy={key:0,class:"form-group"},hy={class:"checkbox-group"},gy=["value","checked","onChange"],yy={key:1,class:"form-group"},by={class:"single-classroom"},_y={class:"form-group consent-group"},wy={class:"checkbox-label consent-label"},Cy={key:0,class:"consent-details"},Sy=["disabled"],$y={key:0},ky={key:1},xy={key:1,class:"welcome-body returning"},Ay={key:2,class:"welcome-body switcher"},Ny={class:"user-list"},Ty=["onClick"],Ey={class:"user-name"},Oy={key:0,class:"user-class"},Ry={key:3,class:"welcome-body recovery-sent"},Iy={class:"subtitle"},Py={class:"recovery-info"},Dy={class:"code-entry"},Ly=["disabled"],By={key:0},Uy={key:1},My={key:0,class:"error-message"},Fy={key:4,class:"welcome-body recovery-claiming"},jy={class:"subtitle"},Hy={key:0,class:"recovery-error-panel"},Wy={class:"error-message"},Vy={key:1,class:"loading-spinner"},Ky={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=oo(),o=Fe(),a="https://api.bridge-classroom.com/api",r=E("form"),i=E(""),l=E(""),u=E(""),d=E([]),f=E(!0),p=E({firstName:"",lastName:"",email:"",classrooms:""}),m=E(!1),g=E(!1),y=E(""),N=E(""),$=E(""),w=E(""),_=E("");_t(async()=>{o.initialize(),n.initializeFromUrl();const G=new URLSearchParams(window.location.search),K=G.get("recover"),oe=G.get("user_id");if(K&&oe){await me(oe,K),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,q=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Q=T(()=>i.value.trim().length>0&&l.value.trim().length>0&&u.value.trim().length>0&&R.test(u.value.trim())),L=T(()=>o.currentUser.value?o.currentUser.value.firstName:""),Y=T(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function J(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let G=!0;return i.value.trim()||(p.value.firstName="First name is required",G=!1),l.value.trim()||(p.value.lastName="Last name is required",G=!1),u.value.trim()?R.test(u.value.trim())||(p.value.email="Please enter a valid email address",G=!1):(p.value.email="Email is required",G=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",G=!1),G}async function fe(){const G=u.value.trim().toLowerCase();if(!navigator.onLine)return Ht("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const K=await o.requestRecovery(G,a);return K.success?(N.value=G,w.value=K.message,r.value="recovery-sent",!1):K.message&&K.message.includes("No account found")?!0:(Ht("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${G}`,K.message),await jn(),p.value.email=K.message||"Unable to verify email. Please try again.",!1)}catch(K){return Ht("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${G}`,K),await jn(),q?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function me(G,K){r.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",$.value="";try{const oe=await o.claimRecovery(G,K,a);oe.success&&oe.user?s("userReady",oe.user):($.value=oe.error||"Recovery failed. Please try again.",r.value="form")}catch(oe){Ht("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${G}`,oe),$.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,y.value=""}}async function ce(){if(_.value.trim().length===6){g.value=!0,y.value="Verifying code...",$.value="";try{const G=await o.claimRecoveryByCode(N.value.trim(),_.value.trim(),a);G.success&&G.user?s("userReady",G.user):$.value=G.error||"Invalid code. Please check and try again."}catch(G){Ht("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${N.value.trim()}`,G),$.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function _e(){if(!J())return;if(g.value=!0,y.value="Checking account...",!await fe()){g.value=!1,y.value="";return}let K=[];n.hasSingleClassroom.value?K=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(K=[...d.value]),y.value="Creating your secure encryption key...";try{const oe=await o.createUser({firstName:i.value,lastName:l.value,email:u.value,classrooms:K,dataConsent:f.value,apiUrl:a});s("userReady",oe)}catch(oe){const Ie=oe instanceof Error?oe.message:String(oe);Ht("registration_create_user_failed",`handleSubmit  createUser threw for ${u.value.trim()}`,oe),await jn(),p.value.email=`Failed to create account: ${Ie}. Please try again.`}finally{g.value=!1,y.value=""}}function we(){s("userReady",o.currentUser.value)}function ne(){r.value="switcher"}function re(G){o.switchUser(G),s("userReady",o.currentUser.value)}function X(){i.value="",l.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function D(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function V(G){const K=d.value.indexOf(G);K===-1?d.value.push(G):d.value.splice(K,1)}return(G,K)=>(v(),h("div",ay,[c("div",ry,[c("div",ly,[c("h1",null,S(Y.value),1)]),r.value==="form"?(v(),h("div",iy,[K[16]||(K[16]=c("h2",null,"Welcome!",-1)),K[17]||(K[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:Lt(_e,["prevent"]),class:"user-form"},[c("div",cy,[K[8]||(K[8]=c("label",{for:"firstName"},"First Name",-1)),Re(c("input",{id:"firstName","onUpdate:modelValue":K[0]||(K[0]=oe=>i.value=oe),type:"text",placeholder:"Enter your first name",class:de({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[mt,i.value]]),p.value.firstName?(v(),h("span",uy,S(p.value.firstName),1)):U("",!0)]),c("div",dy,[K[9]||(K[9]=c("label",{for:"lastName"},"Last Name",-1)),Re(c("input",{id:"lastName","onUpdate:modelValue":K[1]||(K[1]=oe=>l.value=oe),type:"text",placeholder:"Enter your last name",class:de({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[mt,l.value]]),p.value.lastName?(v(),h("span",fy,S(p.value.lastName),1)):U("",!0)]),c("div",my,[K[10]||(K[10]=c("label",{for:"email"},"Email Address",-1)),Re(c("input",{id:"email","onUpdate:modelValue":K[2]||(K[2]=oe=>u.value=oe),type:"email",placeholder:"Enter your email address",class:de({"has-error":p.value.email}),autocomplete:"email"},null,2),[[mt,u.value]]),p.value.email?(v(),h("span",py,S(p.value.email),1)):U("",!0),K[11]||(K[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),P(n).hasMultipleClassrooms.value?(v(),h("div",vy,[K[12]||(K[12]=c("label",null,"Select Your Class(es)",-1)),c("div",hy,[(v(!0),h(Z,null,ie(P(n).availableClassrooms.value,oe=>(v(),h("label",{key:oe.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:oe.id,checked:d.value.includes(oe.id),onChange:Ie=>V(oe.id)},null,40,gy),c("span",null,S(oe.name),1)]))),128))])])):P(n).hasSingleClassroom.value?(v(),h("div",yy,[K[13]||(K[13]=c("label",null,"Class",-1)),c("div",by,S(P(n).singleClassroom.value.name),1)])):U("",!0),c("div",_y,[c("label",wy,[Re(c("input",{type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=oe=>f.value=oe)},null,512),[[Nr,f.value]]),K[14]||(K[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:K[4]||(K[4]=oe=>m.value=!m.value)},S(m.value?"Hide details":"What data is preserved?"),1),m.value?(v(),h("div",Cy,[...K[15]||(K[15]=[Oo('<p data-v-903ed78e>Your practice history is saved online so you can track your progress over time.</p><p data-v-903ed78e><strong data-v-903ed78e>How it works:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Your data is encrypted with your personal key</li><li data-v-903ed78e>Only you and people you authorize can view it</li><li data-v-903ed78e>The site administrator can also access your data</li></ul><p data-v-903ed78e><strong data-v-903ed78e>What&#39;s preserved:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Which hands you practiced</li><li data-v-903ed78e>Your bidding choices (correct and incorrect)</li><li data-v-903ed78e>When you practiced</li></ul><p class="consent-note" data-v-903ed78e>You can change this setting anytime in Settings.</p>',6)])])):U("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!Q.value||g.value},[g.value?(v(),h("span",$y,S(y.value),1)):(v(),h("span",ky,"Start Practicing"))],8,Sy)],32),P(o).hasUsers.value?(v(),h("button",{key:0,class:"back-link",onClick:D}," Back to user selection ")):U("",!0)])):r.value==="returning"?(v(),h("div",xy,[c("h2",null,"Welcome back, "+S(L.value)+"!",1),K[18]||(K[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:we}," Continue "),c("button",{class:"switch-link",onClick:ne}," Not "+S(L.value)+"? Switch user ",1)])):r.value==="switcher"?(v(),h("div",Ay,[K[19]||(K[19]=c("h2",null,"Select User",-1)),K[20]||(K[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",Ny,[(v(!0),h(Z,null,ie(P(o).allUsers.value,oe=>{var Ie;return v(),h("button",{key:oe.id,class:de(["user-item",{"is-current":oe.id===P(o).currentUserId.value}]),onClick:We=>re(oe.id)},[c("span",Ey,S(oe.firstName)+" "+S(oe.lastName),1),(Ie=oe.classrooms)!=null&&Ie.length?(v(),h("span",Oy,S(oe.classrooms.join(", ")),1)):U("",!0)],10,Ty)}),128))]),c("button",{class:"add-user-btn",onClick:X}," + Add New User "),P(o).currentUser.value?(v(),h("button",{key:0,class:"back-link",onClick:D}," Cancel ")):U("",!0)])):r.value==="recovery-sent"?(v(),h("div",Ry,[K[25]||(K[25]=c("h2",null,"Check Your Email",-1)),c("p",Iy,[K[21]||(K[21]=$t(" We found an existing account for ",-1)),c("strong",null,S(N.value),1),K[22]||(K[22]=$t(". ",-1))]),c("div",Py,[c("p",null,S(w.value),1),K[23]||(K[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",Dy,[K[24]||(K[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),Re(c("input",{id:"recoveryCode","onUpdate:modelValue":K[5]||(K[5]=oe=>_.value=oe),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Po(ce,["enter"])},null,544),[[mt,_.value]]),c("button",{class:"submit-btn",disabled:_.value.trim().length!==6||g.value,onClick:ce},[g.value?(v(),h("span",By,S(y.value),1)):(v(),h("span",Uy,"Restore Account"))],8,Ly),$.value?(v(),h("span",My,S($.value),1)):U("",!0)]),c("button",{class:"back-link",onClick:K[6]||(K[6]=oe=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(v(),h("div",Fy,[K[27]||(K[27]=c("h2",null,"Restoring Your Account",-1)),c("p",jy,S(y.value),1),$.value?(v(),h("div",Hy,[c("p",Wy,S($.value),1),c("button",{class:"back-link",onClick:K[7]||(K[7]=oe=>r.value="form")}," Try again ")])):(v(),h("div",Vy,[...K[26]||(K[26]=[c("div",{class:"spinner"},null,-1)])]))])):U("",!0)])]))}},Gy=ye(Ky,[["__scopeId","data-v-903ed78e"]]),ws="https://api.bridge-classroom.com/api",Bs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Cs=E([]),Us=E(null),Ct=E(!1),Ve=E(null);function uo(){async function e(l){Ct.value=!0,Ve.value=null;try{const d=await(await fetch(`${ws}/classrooms?teacher_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Bs}})).json();return d.success?Cs.value=d.classrooms:Ve.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function t(l,u,d){Ct.value=!0,Ve.value=null;try{const f=await fetch(`${ws}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({teacher_id:l,name:u,description:d||null})});if(!f.ok){const m=await f.text();return Ve.value=m||`Server error (${f.status})`,{success:!1,error:Ve.value}}const p=await f.json();return p.success?Cs.value=[p.classroom,...Cs.value]:Ve.value=p.error||"Failed to create classroom",p}catch(f){return console.error("Failed to create classroom:",f),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function s(l){Ct.value=!0,Ve.value=null;try{const d=await(await fetch(`${ws}/classrooms/${encodeURIComponent(l)}`,{headers:{"x-api-key":Bs}})).json();return d.success?Us.value=d.classroom:Ve.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function n(l,u){try{const f=await(await fetch(`${ws}/classrooms/${encodeURIComponent(l)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Bs}})).json();if(f.success&&Us.value){Us.value.members=Us.value.members.filter(m=>m.student_id!==u);const p=Cs.value.findIndex(m=>m.id===l);p!==-1&&Cs.value[p].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(l){Ct.value=!0,Ve.value=null;try{const u=await fetch(`${ws}/join/${encodeURIComponent(l)}`);return u.status===404?(Ve.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function a(l,u,d){Ct.value=!0,Ve.value=null;try{const p=await(await fetch(`${ws}/join/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return p.success||(Ve.value=p.error||"Failed to join classroom"),p}catch(f){return console.error("Failed to join classroom:",f),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function r(l,u){try{return await(await fetch(`${ws}/classrooms/${encodeURIComponent(l)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function i(){Cs.value=[],Us.value=null,Ct.value=!1,Ve.value=null}return{teacherClassrooms:Cs,currentClassroom:Us,loading:Ct,error:Ve,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:i}}const zy={class:"settings-panel"},Jy={class:"settings-body"},Yy={class:"settings-section"},qy={class:"info-row"},Xy={class:"info-value"},Qy={class:"info-row"},Zy={class:"info-value"},eb={class:"info-row"},tb={class:"info-row"},sb={class:"info-value"},nb={key:1,class:"edit-form"},ob={class:"form-group"},ab={class:"form-group"},rb={class:"form-group"},lb={class:"checkbox-label"},ib={key:0,class:"settings-section"},cb={class:"assignment-list"},ub={class:"assignment-header"},db={class:"assignment-name"},fb={class:"assignment-progress"},mb={class:"progress-bar"},pb={class:"assignment-meta"},vb={key:0},hb={class:"assignment-list"},gb={class:"assignment-header"},yb={class:"assignment-name"},bb={class:"assignment-meta"},_b={key:1,class:"settings-section"},wb={class:"classroom-id"},Cb=["disabled","onClick"],Sb={class:"settings-section"},$b={class:"toggle-row"},kb={class:"toggle-label"},xb=["checked"],Ab={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Fe(),o=oo(),a=aa(),r=uo(),i=E(!1),l=E(""),u=E(""),d=E(!0),f=T(()=>n.currentUser.value),p=T(()=>{var Y;return!f.value||!((Y=f.value.classrooms)!=null&&Y.length)?"No classroom assigned":f.value.classrooms.map(J=>{const fe=o.availableClassrooms.value.find(me=>me.id===J);return fe?fe.name:J}).join(", ")}),m=T(()=>a.getAllAssignments().filter(Y=>Y.completionPercent<100)),g=T(()=>a.getAllAssignments().filter(Y=>Y.completionPercent>=100));function y(){f.value&&(l.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,i.value=!0)}function N(){i.value=!1}function $(){f.value&&(n.updateUser(f.value.id,{firstName:l.value,lastName:u.value,dataConsent:d.value}),i.value=!1)}function w(){s("switchUser")}function _(){i.value=!1,s("close")}const R=E(null);async function q(Y){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(R.value=Y,(await r.leaveClassroom(Y,f.value.id)).success){const fe=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:fe.filter(me=>me!==Y)})}R.value=null}function Q(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function L(Y){return Y?new Date(Y).toLocaleDateString():"N/A"}return(Y,J)=>{var fe,me,ce,_e,we,ne,re;return e.visible?(v(),h("div",{key:0,class:"settings-overlay",onClick:Lt(_,["self"])},[c("div",zy,[c("div",{class:"settings-header"},[J[5]||(J[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:_,"aria-label":"Close"},"  ")]),c("div",Jy,[c("section",Yy,[J[12]||(J[12]=c("h3",null,"Your Profile",-1)),i.value?(v(),h("div",nb,[c("div",ob,[J[10]||(J[10]=c("label",{for:"editFirstName"},"First Name",-1)),Re(c("input",{id:"editFirstName","onUpdate:modelValue":J[1]||(J[1]=X=>l.value=X),type:"text"},null,512),[[mt,l.value]])]),c("div",ab,[J[11]||(J[11]=c("label",{for:"editLastName"},"Last Name",-1)),Re(c("input",{id:"editLastName","onUpdate:modelValue":J[2]||(J[2]=X=>u.value=X),type:"text"},null,512),[[mt,u.value]])]),c("div",rb,[c("label",lb,[Re(c("input",{type:"checkbox","onUpdate:modelValue":J[3]||(J[3]=X=>d.value=X)},null,512),[[Nr,d.value]]),c("span",null,"Share practice results with "+S(P(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:$}," Save Changes "),c("button",{class:"secondary-btn",onClick:N}," Cancel ")])])):(v(),h(Z,{key:0},[c("div",qy,[J[6]||(J[6]=c("span",{class:"info-label"},"Name",-1)),c("span",Xy,S((fe=f.value)==null?void 0:fe.firstName)+" "+S((me=f.value)==null?void 0:me.lastName),1)]),c("div",Qy,[J[7]||(J[7]=c("span",{class:"info-label"},"Class",-1)),c("span",Zy,S(p.value),1)]),c("div",eb,[J[8]||(J[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:de(["info-value",(ce=f.value)!=null&&ce.dataConsent?"enabled":"disabled"])},S((_e=f.value)!=null&&_e.dataConsent?"Enabled":"Disabled"),3)]),c("div",tb,[J[9]||(J[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",sb,S(L((we=f.value)==null?void 0:we.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:y}," Edit Profile "),c("button",{class:"secondary-btn",onClick:w}," Switch User ")]),((ne=f.value)==null?void 0:ne.role)!=="teacher"&&((re=f.value)==null?void 0:re.role)!=="admin"?(v(),h("button",{key:0,class:"become-teacher-btn",onClick:J[0]||(J[0]=X=>{s("close"),s("become-teacher")})}," Become a Teacher ")):U("",!0)],64))]),m.value.length||g.value.length?(v(),h("section",ib,[J[16]||(J[16]=c("h3",null,"Assignments",-1)),m.value.length?(v(),h(Z,{key:0},[J[13]||(J[13]=c("h4",null,"Active",-1)),c("div",cb,[(v(!0),h(Z,null,ie(m.value,X=>(v(),h("div",{key:X.id,class:"assignment-item"},[c("div",ub,[c("span",db,S(X.name),1),c("span",fb,S(X.completionPercent)+"%",1)]),c("div",mb,[c("div",{class:"progress-fill",style:it({width:`${X.completionPercent}%`})},null,4)]),c("div",pb,[X.dueDate?(v(),h("span",vb," Due: "+S(L(X.dueDate)),1)):U("",!0),c("span",null,S(X.completedDeals)+"/"+S(X.totalDeals)+" deals ",1)])]))),128))])],64)):U("",!0),g.value.length?(v(),h(Z,{key:1},[J[15]||(J[15]=c("h4",null,"Completed",-1)),c("div",hb,[(v(!0),h(Z,null,ie(g.value,X=>(v(),h("div",{key:X.id,class:"assignment-item completed"},[c("div",gb,[c("span",yb,S(X.name),1),J[14]||(J[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",bb," Completed "+S(L(X.lastPracticedAt)),1)]))),128))])],64)):U("",!0)])):U("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(v(),h("section",_b,[J[17]||(J[17]=c("h3",null,"My Classrooms",-1)),(v(!0),h(Z,null,ie(f.value.classrooms,X=>(v(),h("div",{key:X,class:"classroom-row"},[c("span",wb,S(X),1),c("button",{class:"leave-btn",disabled:R.value===X,onClick:D=>q(X)},S(R.value===X?"Leaving...":"Leave"),9,Cb)]))),128))])):U("",!0),c("section",Sb,[J[19]||(J[19]=c("h3",null,"Display Options",-1)),c("div",$b,[c("label",kb,[c("input",{type:"checkbox",checked:P(o).showLoadPbnOption.value,onChange:J[4]||(J[4]=X=>P(o).setUIPref("showLoadPbnOption",X.target.checked))},null,40,xb),J[18]||(J[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[J[20]||(J[20]=c("h3",null,"Data & Privacy",-1)),J[21]||(J[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:Q}," Remove account from this device "),J[22]||(J[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):U("",!0)}}},Nb=ye(Ab,[["__scopeId","data-v-57179473"]]),Tb={class:"banner-content"},Eb={class:"assignment-info"},Ob={class:"assignment-title"},Rb={class:"assignment-name"},Ib={class:"assignment-meta"},Pb={class:"progress-text"},Db={class:"progress-bar"},Lb={key:0,class:"complete-badge"},Bb={class:"return-text"},Ub={__name:"AssignmentBanner",setup(e){const t=aa(),s=T(()=>t.currentAssignment.value),n=T(()=>t.hasActiveAssignment.value),o=T(()=>t.assignmentProgress.value),a=T(()=>t.isAssignmentComplete.value),r=T(()=>t.inAssignmentMode.value),i=T(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),l=T(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=T(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(p,m)=>{var g,y;return n.value&&r.value?(v(),h("div",{key:0,class:de(["assignment-banner",{complete:a.value}])},[c("div",Tb,[c("div",Eb,[c("div",Ob,[m[0]||(m[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",Rb,S((g=s.value)==null?void 0:g.name),1)]),c("div",Ib,[c("span",Pb,S(o.value.completed)+" of "+S(o.value.total)+" deals ("+S(o.value.percent)+"%) ",1),l.value?(v(),h("span",{key:0,class:de(["due-text",u.value])},S(l.value),3)):U("",!0)])]),c("div",Db,[c("div",{class:de(["progress-fill",{complete:a.value}]),style:it({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(v(),h("div",Lb," Complete! ")):U("",!0)],2)):s.value&&!r.value?(v(),h("div",{key:1,class:"return-banner",onClick:f},[m[1]||(m[1]=c("span",{class:"return-icon"},"",-1)),c("span",Bb," Return to assignment: "+S((y=s.value)==null?void 0:y.name)+" ("+S(o.value.percent)+"% complete) ",1)])):U("",!0)}}},Mb=ye(Ub,[["__scopeId","data-v-a4095a6a"]]),Fb=["innerHTML"],jb={__name:"AnnouncementBanner",setup(e){const t=Vr(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,i)=>{const l=s[i.toLowerCase()];return l?`<span class="ann-circle" style="background:${l.bg};color:${l.fg}"></span>`:r})}return(o,a)=>P(t).announcement.value&&P(t).dismissed.value!==P(t).announcement.value.id?(v(),h("div",{key:0,class:de(["announcement-banner",P(t).announcement.value.type])},[c("span",{class:"announcement-text",innerHTML:n(P(t).announcement.value.message)},null,8,Fb),c("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>P(t).dismiss()),title:"Dismiss"},"")],2)):U("",!0)}},Hb=ye(jb,[["__scopeId","data-v-4b12409b"]]),Wb={key:0,class:"status-content"},Vb={key:1,class:"status-content offline"},Kb={key:0,class:"badge"},Gb={key:2,class:"status-content error"},zb={class:"status-text"},Jb={key:0,class:"badge"},Yb={key:3,class:"status-content pending"},qb={class:"status-text"},Xb={key:4,class:"status-content synced"},Qb={__name:"SyncStatus",setup(e){const t=pu(),s=ys(),n=T(()=>s.pendingCount.value),o=T(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=T(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(l,u)=>(v(),h("div",{class:de(["sync-status",a.value]),onClick:r},[P(t).isSyncing.value?(v(),h("div",Wb,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):P(t).isOffline.value?(v(),h("div",Vb,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(v(),h("span",Kb,S(n.value),1)):U("",!0)])):P(t).hasError.value?(v(),h("div",Gb,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",zb,S(o.value),1),n.value>0?(v(),h("span",Jb,S(n.value),1)):U("",!0),c("button",{class:"retry-btn",onClick:Lt(i,["stop"])},"Retry")])):n.value>0?(v(),h("div",Yb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",qb,S(n.value)+" pending",1)])):(v(),h("div",Xb,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},Zb=ye(Qb,[["__scopeId","data-v-8457149a"]]),hu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function e_(e){return hu.find(t=>t.path===e)||null}hu.reduce((e,t)=>e+t.dealCount,0);const Hn=36e5;function oi(e){if(!e||e.length===0)return"untried";const t=[...e].sort((d,f)=>d.ts-f.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(d=>!d.correct&&n.ts-d.ts<Hn),r=t.slice(-5),i=r.filter(d=>d.correct).length,l=r.length-i;return a&&i/r.length>=.8&&l<=1?"mastered":r.filter(d=>d.correct?!t.filter(p=>p.ts<d.ts).reverse().find(p=>!p.correct&&d.ts-p.ts<Hn):!1).length>=1?"progressing":"struggling"}function t_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var R,q;const i=Object.keys(r).map(Number).sort((Q,L)=>Q-L);let l=0,u=0,d=0;i.forEach(Q=>{const L=oi(r[Q]);L==="mastered"?l++:L==="progressing"?u++:d++});const f=i.length,p=[];i.forEach(Q=>{r[Q].forEach(L=>p.push({...L,dealNum:Q}))}),p.sort((Q,L)=>Q.ts-L.ts);const m=2*Hn,g=i.map(Q=>{var we;const L=r[Q].slice().sort((ne,re)=>ne.ts-re.ts),Y=oi(L),J=((we=L[L.length-1])==null?void 0:we.correct)??!1,fe=L.map((ne,re)=>{if(ne.correct){const X=L.slice(0,re).reverse().find(D=>!D.correct&&ne.ts-D.ts<Hn);return{ts:ne.ts,y:X?.75:1,correct:!0}}else{const X=L.slice(re+1).find(D=>D.correct&&D.ts-ne.ts<Hn);return{ts:ne.ts,y:X?.5:0,correct:!1}}}),me=5*60*1e3,ce=fe.map(ne=>({...ne,vts:ne.ts.getTime(),rawTs:ne.ts.getTime()}));let _e=0;for(;_e<ce.length;){let ne=_e;for(;ne+1<ce.length&&ce[ne+1].vts-ce[ne].vts<me;)ne++;if(ne>_e){const re=ce[ne].vts-ce[_e].vts,X=Math.max(re,m),D=re>0?X/re:1,V=ce[_e].vts;for(let G=_e;G<=ne;G++)ce[G].vts=V+(ce[G].vts-V)*D}_e=ne+1}return{dealNum:Q,status:Y,lastCorrect:J,points:ce}}),y=g.flatMap(Q=>Q.points.map(L=>L.rawTs)),N=y.length?Math.min(...y):0,w=(y.length?Math.max(...y):1)-N||1;g.forEach(Q=>{Q.points=Q.points.map(L=>({...L,x:(L.rawTs-N)/w}))});const _=(()=>{const Q=Object.values(r);if(Q.length===0)return 0;const L=Q.reduce((J,fe)=>{const me=fe.slice(-5);return J+me.filter(ce=>ce.correct).length},0),Y=Q.reduce((J,fe)=>J+Math.min(fe.length,5),0);return Y>0?Math.round(L/Y*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:f,mastered:l,progressing:u,struggling:d,totalBoards:t[a]??f,totalAttempts:p.length,recentRate:_,boardLines:g,firstActivity:(R=p[0])==null?void 0:R.ts,lastActivity:(q=p[p.length-1])==null?void 0:q.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function s_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=e_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=Ec(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const Js={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function gu(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const n_={key:0,class:"sparkline-empty"},o_=["width","height"],a_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],r_=["d","stroke"],l_=["cx","cy","r","fill"],i_=5,c_=2.5,u_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=T(()=>t.width-n.l-n.r),a=T(()=>t.height-n.t-n.b),r=T(()=>{const f=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...f),m=Math.max(...f);return{min:p,max:m,span:m-p||1}});function i(f){return n.t+(1-f)*a.value}function l(f,p){const m=p>=.9?1:p>0?.5:0;return{px:n.l+(f-r.value.min)/r.value.span*o.value,py:n.t+(1-m)*a.value,yMapped:m}}const u=T(()=>t.boardLines.map(f=>{const p=Js[f.status]||"#6b7280",m=f.points.filter(y=>y.y!==.75).map(y=>l(y.x,y.y)),g=m.length>=2?m.map((y,N)=>`${N===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:m,pathD:g}})),d=T(()=>{const f=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...l(y.x,y.y),y:y.y}))),p=new Array(f.length).fill(!1),m=[];return f.forEach((g,y)=>{if(p[y])return;const N=[g];p[y]=!0,f.forEach((R,q)=>{if(p[q])return;const Q=R.px-g.px,L=R.py-g.py;Math.sqrt(Q*Q+L*L)<i_&&(N.push(R),p[q]=!0)});const $=N.reduce((R,q)=>R+q.px,0)/N.length,w=N.reduce((R,q)=>R+q.py,0)/N.length,_=N.sort((R,q)=>q.yMapped-R.yMapped)[0].yMapped;m.push({px:$,py:w,y:_,n:N.length})}),m});return(f,p)=>!e.boardLines||e.boardLines.length===0?(v(),h("div",n_," No data ")):(v(),h("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(v(),h(Z,null,ie(s,m=>c("line",{key:m,x1:n.l,y1:i(m),x2:n.l+o.value,y2:i(m),stroke:m===.5?"#d1d5db":"#e5e7eb","stroke-width":m===.5?1:.5,"stroke-dasharray":m===.5?"3,3":"none"},null,8,a_)),64)),(v(!0),h(Z,null,ie(u.value,(m,g)=>Re((v(),h("path",{key:"line-"+g,d:m.pathD,fill:"none",stroke:m.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,r_)),[[Df,m.pts.length>=2]])),128)),(v(!0),h(Z,null,ie(d.value,(m,g)=>(v(),h("circle",{key:"bubble-"+g,cx:m.px,cy:m.py,r:c_*Math.sqrt(m.n),fill:P(gu)(m.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,l_))),128))],8,o_))}},d_=ye(u_,[["__scopeId","data-v-a14e2bb7"]]),f_={class:"details-header"},m_={class:"details-title"},p_={class:"details-subtitle"},v_=["viewBox","height"],h_=["x","y","fill"],g_=["y","width","height","fill","fill-opacity"],y_=["x","y","fill"],b_=["x1","y1","x2","y2","stroke-dasharray"],__=["x","y"],w_=["cx","cy","fill"],C_={key:0,class:"details-activity"},S_={class:"stats-row"},$_={class:"stat-value"},k_={class:"stat-label"},x_=["viewBox"],A_=["x","y","width","height"],N_={class:"activity-dates"},T_={class:"details-legend"},ka=7,ai=.3,xa=110,Ss=560,Jt=28,Aa=40,ri=36e5,vt=864e5,E_={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close"],setup(e){const t=e,s={t:16,r:20,b:40,l:xa},n=T(()=>{const $=new Set(t.lesson.boardLines.map(_=>_.dealNum)),w=t.lesson.totalBoards??Math.max(...$);return Array.from({length:w},(_,R)=>R+1)}),o=T(()=>n.value.length*Jt),a=T(()=>Ss+s.l+s.r),r=T(()=>o.value+s.t+s.b),i=T(()=>new Set(t.lesson.boardLines.map($=>$.dealNum)));function l($){return i.value.has($)}function u($){const w=t.lesson.boardLines.find(_=>_.dealNum===$);return w?Js[w.status]||"#6b7280":"#d1d5db"}const d=T(()=>{const $=t.rawData.filter(ne=>ne.skill_path===t.lesson.path),w=n.value,_=$.map(ne=>{const re=new Date(ne.timestamp).getTime(),X=ne.deal_number,D=w.indexOf(X);return{rawTs:re,dealNum:X,boardIdx:D,correct:ne.correct,y:ne.correct?1:0}});if(_.forEach(ne=>{const re=_.filter(D=>D.dealNum===ne.dealNum).sort((D,V)=>D.rawTs-V.rawTs),X=re.findIndex(D=>D.rawTs===ne.rawTs&&D.correct===ne.correct);if(ne.correct){const D=re.slice(0,X).reverse().find(V=>!V.correct&&ne.rawTs-V.rawTs<ri);ne.y=D?.75:1}else{const D=re.slice(X+1).find(V=>V.correct&&V.rawTs-ne.rawTs<ri);ne.y=D?.5:0}}),_.length===0)return[];const R=_.map(ne=>ne.rawTs),q=Math.min(...R),Q=Math.max(...R),L=Math.floor(q/vt)*vt,J=(Math.floor(Q/vt)+1)*vt-1-L||1,fe=ne=>s.l+(ne.rawTs-L)/J*Ss,me=ne=>s.t+ne*Jt+Jt/2,ce=ka*2*(1-ai),_e=ka*2*(1-ai),we=_.map(ne=>({...ne,px:fe(ne),py:me(ne.boardIdx)}));return w.forEach(ne=>{const re=we.filter(D=>D.dealNum===ne),X={};re.forEach(D=>{const V=D.rawTs;X[V]||(X[V]=[]),X[V].push(D)}),Object.values(X).forEach(D=>{if(D.length<2)return;const V=D[0].py;D.forEach((G,K)=>{G.py=V+(K-(D.length-1)/2)*_e})})}),w.forEach(ne=>{const re=we.filter(V=>V.dealNum===ne).sort((V,G)=>V.px-G.px),X=[];let D=0;for(;D<re.length;){let V=D;for(;V+1<re.length&&re[V+1].px-re[D].px<ce;)V++;X.push({start:D,end:V}),D=V+1}X.forEach((V,G)=>{const K=V.end-V.start+1;if(K===1)return;const oe=(K-1)*ce;let Ie;G===0?Ie=re[V.start].px:G===X.length-1?Ie=re[V.end].px-oe:Ie=(re[V.start].px+re[V.end].px)/2-oe/2;for(let We=0;We<K;We++)re[V.start+We].px=Ie+We*ce})}),we}),f=T(()=>[...d.value].sort(($,w)=>$.y-w.y)),p=T(()=>{const $=d.value;if($.length===0)return[];const w=$.map(J=>J.rawTs),_=Math.min(...w),R=Math.max(...w),q=Math.floor(_/vt)*vt,L=(Math.floor(R/vt)+1)*vt-1-q||1,Y=5;return Array.from({length:Y},(J,fe)=>{const me=fe/(Y-1),ce=new Date(q+me*L);return{x:s.l+me*Ss,label:ce.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),m=T(()=>{const $=d.value;if($.length===0)return null;const w={};$.forEach(fe=>{const me=Math.floor(fe.rawTs/vt);w[me]=(w[me]||0)+1});const _=Object.keys(w).map(Number).sort();if(_.length===0)return null;const R=_[0],q=_[_.length-1],Q=q-R+1,L=Math.max(...Object.values(w)),Y=Math.max(2,Ss/Q-1);return{bars:_.map(fe=>({dayKey:fe,x:(fe-R)/Q*Ss,h:w[fe]/L*Aa,w:Y,count:w[fe],dateLabel:new Date(fe*vt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Ss,firstLabel:new Date(R*vt).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(q*vt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),g=T(()=>{const $=d.value,w={};return $.forEach(_=>{const R=Math.floor(_.rawTs/vt);w[R]=!0}),[{label:"Days active",value:Object.keys(w).length},{label:"Boards tried",value:t.lesson.tried},{label:"Observations",value:$.length}]}),y=[{color:"#10b981",label:"Clean success"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hour)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function N($){return new Date($).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return($,w)=>(v(),h("div",{class:"details-overlay",onClick:w[2]||(w[2]=Lt(_=>$.$emit("close"),["self"]))},[c("div",{class:"details-panel",onClick:w[1]||(w[1]=Lt(()=>{},["stop"]))},[c("div",f_,[c("div",null,[c("h2",m_,S(e.lesson.name),1),c("p",p_,S(e.lesson.tried)+" boards  "+S(e.lesson.totalAttempts)+" attempts ",1)]),c("button",{class:"details-close-btn",onClick:w[0]||(w[0]=_=>$.$emit("close"))}," close")]),(v(),h("svg",{viewBox:`0 0 ${a.value} ${r.value}`,width:"100%",height:r.value,class:"details-chart"},[(v(!0),h(Z,null,ie(n.value,(_,R)=>(v(),h("rect",{key:"bg-"+_,x:s.l,y:s.t+R*Jt,width:Ss,height:Jt,fill:R%2===0?"#ffffff":"#f9fafb"},null,8,h_))),128)),(v(!0),h(Z,null,ie(n.value,(_,R)=>(v(),h("g",{key:"label-"+_},[c("rect",{x:2,y:s.t+R*Jt+3,width:xa-14,height:Jt-6,rx:"3",fill:u(_),"fill-opacity":l(_)?.12:.05},null,8,g_),c("text",{x:xa-16,y:s.t+R*Jt+Jt/2+4,"text-anchor":"end","font-size":"13",fill:u(_),"font-family":"monospace"}," Board "+S(_)+S(l(_)?"":" "),9,y_)]))),128)),(v(!0),h(Z,null,ie(p.value,(_,R)=>(v(),h("line",{key:"grid-"+R,x1:_.x,y1:s.t,x2:_.x,y2:s.t+o.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":R===0||R===p.value.length-1?"none":"3,4"},null,8,b_))),128)),(v(!0),h(Z,null,ie(p.value,(_,R)=>(v(),h("text",{key:"tick-"+R,x:_.x,y:s.t+o.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},S(_.label),9,__))),128)),(v(!0),h(Z,null,ie(f.value,(_,R)=>(v(),h("circle",{key:"dot-"+R,cx:_.px,cy:_.py,r:ka,fill:P(gu)(_.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92"},[c("title",null,"Board "+S(_.dealNum)+"  "+S(_.correct?"Correct":"Incorrect")+"  "+S(N(_.rawTs)),1)],8,w_))),128))],8,v_)),m.value?(v(),h("div",C_,[c("div",S_,[(v(!0),h(Z,null,ie(g.value,_=>(v(),h("div",{class:"stat-item",key:_.label},[c("div",$_,S(_.value),1),c("div",k_,S(_.label),1)]))),128))]),(v(),h("svg",{width:"100%",viewBox:`0 0 ${m.value.barW} ${Aa}`,class:"activity-chart"},[(v(!0),h(Z,null,ie(m.value.bars,_=>(v(),h("rect",{key:_.dayKey,x:_.x,y:Aa-_.h,width:_.w,height:_.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[c("title",null,S(_.dateLabel)+": "+S(_.count)+" observations",1)],8,A_))),128))],8,x_)),c("div",N_,[c("span",null,S(m.value.firstLabel),1),c("span",null,S(m.value.lastLabel),1)])])):U("",!0),c("div",T_,[(v(),h(Z,null,ie(y,_=>c("span",{key:_.label,class:"legend-item"},[c("span",{class:"legend-dot",style:it({backgroundColor:_.color})},null,4),$t(" "+S(_.label),1)])),64))])])]))}},O_=ye(E_,[["__scopeId","data-v-95dd7375"]]),R_={class:"student-progress-panel"},I_={key:0,class:"sp-empty"},P_={class:"sp-header"},D_={class:"sp-header-row"},L_={key:0,class:"sp-name-badge"},B_={class:"sp-meta"},U_={key:0,class:"sp-activity-chart"},M_={class:"sp-activity-header"},F_={class:"sp-activity-meta"},j_={class:"sp-activity-body"},H_={class:"sp-activity-svg-wrap"},W_=["viewBox"],V_=["x"],K_=["x","y"],G_=["x1","x2","y2"],z_=["x","y","width","height","fill"],J_=["x","y"],Y_=["x","y"],q_={class:"sp-activity-legend"},X_={class:"sp-legend"},Q_={class:"sp-grid"},Z_=["onClick"],e1={class:"sp-card-header"},t1={class:"sp-card-info"},s1={class:"sp-card-name"},n1={class:"sp-card-meta"},o1={class:"sp-card-rate"},a1={class:"sp-card-sparkline"},r1={class:"sp-mastery"},l1={class:"sp-mastery-track"},i1=["title"],c1={class:"sp-mastery-legend"},u1={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""}},setup(e){const t=e,s=E(null),n=T(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:m,lessonNames:g}=s_(t.observations);return t_(t.observations,m,g)}),o=T(()=>n.value.reduce((m,g)=>m+g.tried,0)),a=T(()=>n.value.reduce((m,g)=>m+g.totalAttempts,0)),r=[{color:"#10b981",label:"Success (clean)"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hr)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function i(m){return`hsl(${Math.round(m*360/n.value.length)}, 65%, 55%)`}function l(m){return m>=75?"#10b981":m>=50?"#f59e0b":"#f43f5e"}function u(m){return m?m.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function d(m){if(!m.firstActivity||!m.lastActivity)return null;const g=m.lastActivity-m.firstActivity,y=g/6e4,N=g/36e5,$=g/864e5;return y<90?`${Math.round(y)} min`:N<48?`${Math.round(N)} hr`:$<14?`${Math.round($)} days`:`${Math.round($/7)} wks`}function f(m){const g=Math.max(0,(m.totalBoards||0)-m.tried),y=[{count:m.mastered,color:Js.mastered,label:"Mastered"},{count:m.progressing,color:Js.progressing,label:"Progressing"},{count:m.struggling,color:Js.struggling,label:"Struggling"},{count:g,color:Js.untried,label:"Untried"}].filter($=>$.count>0),N=y.reduce(($,w)=>$+w.count,0);return y.forEach($=>{$.pct=`${($.count/N*100).toFixed(1)}%`}),y}const p=T(()=>{if(n.value.length===0)return null;const m=864e5,g=28,y=700,N=120,$=new Set,w=n.value.map(me=>{const ce={};return me.boardLines.forEach(_e=>{_e.points.forEach(we=>{const ne=Math.floor((we.rawTs??0)/m);ne>0&&(ce[ne]=(ce[ne]||0)+1,$.add(ne))})}),ce});if($.size===0)return null;const _=[...$].sort(),R=_[0],q=_[_.length-1],Q=q-R+1,L=_.map(me=>w.reduce((ce,_e)=>ce+(_e[me]||0),0)),Y=Math.max(...L),J=Math.max(1,y/Q*.75);return{days:_.map(me=>{const ce=g+(me-R)/Q*y;let _e=N;const we=[];return n.value.forEach((ne,re)=>{const X=w[re][me]||0;if(!X)return;const D=X/Y*N;_e-=D,we.push({y:_e,h:D,count:X,color:i(re),name:ne.name})}),{dayKey:me,x:ce,segments:we,dateLabel:new Date(me*m).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:Y,barW:J,barH:N,chartW:y,svgW:g+y,yAxisW:g,firstLabel:new Date(R*m).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(q*m).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(m,g)=>(v(),h("div",R_,[n.value.length===0?(v(),h("div",I_,[...g[1]||(g[1]=[c("p",null,"No practice data to display yet.",-1)])])):(v(),h(Z,{key:1},[c("div",P_,[c("div",D_,[e.studentName?(v(),h("span",L_,S(e.studentName),1)):U("",!0),c("span",B_,S(n.value.length)+" lesson"+S(n.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),p.value?(v(),h("div",U_,[c("div",M_,[g[2]||(g[2]=$t(" Daily practice activity ",-1)),c("span",F_,S(o.value)+" boards  "+S(a.value)+" observations ",1)]),c("div",j_,[c("div",H_,[(v(),h("svg",{width:"100%",viewBox:`0 0 ${p.value.svgW} ${p.value.barH+26}`,style:it({display:"block",height:p.value.barH+26+"px"})},[c("text",{x:p.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.maxCount),9,V_),c("text",{x:p.value.yAxisW-3,y:p.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,K_),c("line",{x1:p.value.yAxisW,y1:"0",x2:p.value.yAxisW,y2:p.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,G_),(v(!0),h(Z,null,ie(p.value.days,y=>(v(),h("g",{key:y.dayKey},[(v(!0),h(Z,null,ie(y.segments,(N,$)=>(v(),h("rect",{key:$,x:y.x,y:N.y,width:p.value.barW,height:N.h,fill:N.color,opacity:"0.85",rx:"1"},[c("title",null,S(N.name)+": "+S(N.count)+" on "+S(y.dateLabel),1)],8,z_))),128))]))),128)),c("text",{x:p.value.yAxisW,y:p.value.barH+18,"font-size":"10",fill:"#6b7280"},S(p.value.firstLabel),9,J_),c("text",{x:p.value.yAxisW+p.value.chartW,y:p.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.lastLabel),9,Y_)],12,W_))]),c("div",q_,[(v(!0),h(Z,null,ie(n.value,(y,N)=>(v(),h("span",{key:y.path,class:"sp-activity-legend-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:i(N)})},null,4),$t(" "+S(y.name),1)]))),128))])])])):U("",!0),c("div",X_,[(v(),h(Z,null,ie(r,y=>c("span",{key:y.label,class:"sp-legend-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:y.color})},null,4),$t(" "+S(y.label),1)])),64)),g[3]||(g[3]=c("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),c("div",Q_,[(v(!0),h(Z,null,ie(n.value,y=>(v(),h("div",{key:y.path,class:"sp-lesson-card",onClick:N=>s.value=y},[c("div",e1,[c("div",t1,[c("div",s1,S(y.name),1),c("div",n1,S(y.tried)+" boards  "+S(y.totalAttempts)+" attempts  last "+S(u(y.lastActivity))+S(d(y)?`  span ${d(y)}`:""),1)]),c("div",o1,[c("div",{class:"sp-rate-value",style:it({color:l(y.recentRate)})},S(y.recentRate)+"% ",5),g[4]||(g[4]=c("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),c("div",a1,[he(d_,{boardLines:y.boardLines,width:280,height:70},null,8,["boardLines"])]),c("div",r1,[c("div",l1,[(v(!0),h(Z,null,ie(f(y),N=>(v(),h("div",{key:N.label,class:"sp-mastery-segment",style:it({width:N.pct,backgroundColor:N.color}),title:`${N.label}: ${N.count}`},null,12,i1))),128))]),c("div",c1,[(v(!0),h(Z,null,ie(f(y),N=>(v(),h("span",{key:N.label,class:"sp-mastery-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:N.color})},null,4),$t(" "+S(N.count)+" "+S(N.label),1)]))),128))])]),g[5]||(g[5]=c("div",{class:"sp-card-hint"},"details ",-1))],8,Z_))),128))])],64)),s.value?(v(),Ue(O_,{key:2,lesson:s.value,rawData:e.observations,onClose:g[0]||(g[0]=y=>s.value=null)},null,8,["lesson","rawData"])):U("",!0)]))}},yu=ye(u1,[["__scopeId","data-v-722715b0"]]),d1={class:"progress-dashboard"},f1={class:"dashboard-header"},m1={key:0,class:"loading"},p1={key:1,class:"error-state"},v1={key:2,class:"empty-state"},h1={key:3,class:"dashboard-content"},g1={class:"dashboard-actions"},y1={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Br(),s=Fe(),n=T(()=>t.decryptedObservations.value),o=T(()=>n.value.length>0),a=T(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});_t(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(i,l)=>(v(),h("div",d1,[c("header",f1,[l[3]||(l[3]=c("h2",null,"Student Progress",-1)),c("button",{class:"close-btn",onClick:l[0]||(l[0]=u=>i.$emit("close"))},"")]),P(t).isLoading.value?(v(),h("div",m1,[...l[4]||(l[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):P(t).hasError.value?(v(),h("div",p1,[c("p",null,"Failed to load progress: "+S(P(t).error.value),1),c("button",{onClick:r},"Try Again")])):o.value?(v(),h("div",h1,[he(yu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),c("div",g1,[c("button",{class:"secondary-btn",onClick:r},"Refresh Data"),c("button",{class:"primary-btn",onClick:l[2]||(l[2]=u=>i.$emit("close"))},"Continue Practicing")])])):(v(),h("div",v1,[l[5]||(l[5]=c("h3",null,"No Practice Data Yet",-1)),l[6]||(l[6]=c("p",null,"Complete some practice deals to see your progress here!",-1)),c("button",{class:"primary-btn",onClick:l[1]||(l[1]=u=>i.$emit("close"))},"Start Practicing")]))]))}},b1=ye(y1,[["__scopeId","data-v-286a38c8"]]),_1="test-user-mastery",w1="test-classroom",C1="Negative_Double",S1="competitive_bidding/negative_double";let rr=0;function ze({boardNumber:e,correct:t,timestamp:s}){return rr++,{id:`mastery-test-${rr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:_1,skill_path:S1,correct:t,deal_subfolder:C1,deal_number:e,classroom:w1}}function ut(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function yo(e){return new Date(Date.now()-e*60*1e3).toISOString()}function $1(){rr=0;const e=[];e.push(ze({boardNumber:2,correct:!0,timestamp:ut(5)}),ze({boardNumber:2,correct:!1,timestamp:ut(1)})),e.push(ze({boardNumber:3,correct:!1,timestamp:yo(30)}),ze({boardNumber:3,correct:!0,timestamp:yo(20)})),e.push(ze({boardNumber:4,correct:!1,timestamp:yo(90)}),ze({boardNumber:4,correct:!0,timestamp:yo(60)})),e.push(ze({boardNumber:5,correct:!1,timestamp:ut(10)}),ze({boardNumber:5,correct:!0,timestamp:ut(2)})),e.push(ze({boardNumber:6,correct:!0,timestamp:ut(14)}),ze({boardNumber:6,correct:!0,timestamp:ut(7)})),e.push(ze({boardNumber:7,correct:!0,timestamp:ut(21)}),ze({boardNumber:7,correct:!0,timestamp:ut(14)}),ze({boardNumber:7,correct:!0,timestamp:ut(7)})),e.push(ze({boardNumber:8,correct:!0,timestamp:ut(28)}),ze({boardNumber:8,correct:!0,timestamp:ut(21)}),ze({boardNumber:8,correct:!0,timestamp:ut(14)}),ze({boardNumber:8,correct:!1,timestamp:ut(1)}));const t=[1,2,3,4,5].map(s=>({...ze({boardNumber:s,correct:!0,timestamp:ut(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const k1=["onClick","title"],x1={key:0,class:"medal gold-medal"},A1={key:1,class:"medal silver-medal"},N1={class:"board-num"},T1={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=Ps(),a=T(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const l=i.find(u=>u.boardNumber===s.forceRedBoard);l&&(l.status="red")}return i});function r(i){const l={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${l[i.status]}${u[i.achievement]}`}return(i,l)=>e.boardNumbers.length>0?(v(),h("div",{key:0,class:de(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(v(),h("button",{key:0,class:"intro-btn",onClick:l[0]||(l[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):U("",!0),(v(!0),h(Z,null,ie(a.value,(u,d)=>(v(),h("div",{key:u.boardNumber,class:de(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:r(u)},[u.achievement==="gold"?(v(),h("span",x1,"")):u.achievement==="silver"?(v(),h("span",A1,"")):U("",!0),c("span",N1,S(u.boardNumber),1)],10,k1))),128))],2)):U("",!0)}},bu=ye(T1,[["__scopeId","data-v-820a0f0c"]]),E1={class:"accomplishments-view"},O1={class:"view-header"},R1={key:0,class:"user-selector"},I1=["value"],P1=["value"],D1={key:1,class:"loading-state"},L1={key:2,class:"error-state"},B1={key:3,class:"empty-state"},U1={key:4,class:"view-content"},M1={class:"controls-row"},F1={class:"tabs"},j1={key:0,class:"tab-content"},H1={key:0,class:"no-data"},W1={key:1,class:"lesson-list"},V1={class:"lesson-header"},K1={class:"lesson-name"},G1={key:1,class:"tab-content"},z1={key:0,class:"no-data"},J1={key:1,class:"taxon-list"},Y1={class:"taxon-header"},q1={class:"taxon-category"},X1={class:"taxon-name"},Q1={class:"taxon-counts"},Z1={class:"taxon-stat correct"},e0={class:"taxon-stat incorrect"},t0={class:"taxon-stat total"},s0={class:"view-actions"},n0={key:5,class:"test-mode-banner"},o0={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=ps(),o=Ps(),r=new URLSearchParams(window.location.search).get("test");_t(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode($1()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function l(p){await n.selectUser(p)}function u(p,m){s("navigate-to-deal",{subfolder:p,dealNumber:m})}const d=T(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),N=o.computeLessonAchievement(y);return{...g,achievement:N.achievement}}).sort((g,y)=>f(g.subfolder).localeCompare(f(y.subfolder)))});ft(d,p=>{o.fetchMissingBoardCounts(p.map(m=>m.subfolder))},{immediate:!0});function f(p){return n.formatLessonName(p)}return(p,m)=>(v(),h("div",E1,[c("header",O1,[m[6]||(m[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:m[0]||(m[0]=g=>p.$emit("close"))},"")]),P(n).canViewOtherUsers.value?(v(),h("div",R1,[m[7]||(m[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:P(n).selectedUserId.value,onChange:m[1]||(m[1]=g=>l(g.target.value))},[(v(!0),h(Z,null,ie(P(n).accessibleUsers.value,g=>(v(),h("option",{key:g.id,value:g.id},S(g.name)+S(g.isSelf?" (You)":""),9,P1))),128))],40,I1)])):U("",!0),P(n).loading.value?(v(),h("div",D1,[...m[8]||(m[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):P(n).error.value?(v(),h("div",L1,[c("p",null,"Failed to load: "+S(P(n).error.value),1),c("button",{onClick:i},"Try Again")])):P(n).hasData.value?(v(),h("div",U1,[c("div",M1,[c("div",F1,[c("button",{class:de(["tab-btn",{active:P(n).activeTab.value==="lessons"}]),onClick:m[3]||(m[3]=g=>P(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:de(["tab-btn",{active:P(n).activeTab.value==="taxons"}]),onClick:m[4]||(m[4]=g=>P(n).activeTab.value="taxons")}," Taxons ",2)])]),P(n).activeTab.value==="lessons"?(v(),h("div",j1,[d.value.length===0?(v(),h("div",H1," No lesson data available yet. ")):(v(),h("div",W1,[(v(!0),h(Z,null,ie(d.value,g=>(v(),h("div",{key:g.subfolder,class:"lesson-row"},[c("div",V1,[c("span",K1,S(f(g.subfolder)),1),g.achievement!=="none"?(v(),h("span",{key:0,class:de(["achievement-badge",g.achievement])},"  "+S(g.achievement==="gold"?"Gold":"Silver"),3)):U("",!0)]),he(bu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):U("",!0),P(n).activeTab.value==="taxons"?(v(),h("div",G1,[P(n).filteredTaxonStats.value.length===0?(v(),h("div",z1," No skill data available yet. ")):(v(),h("div",J1,[(v(!0),h(Z,null,ie(P(n).filteredTaxonStats.value,g=>(v(),h("div",{key:g.skillPath,class:"taxon-card"},[c("div",Y1,[c("span",q1,S(g.categoryName),1),c("span",X1,S(g.skillName),1)]),c("div",Q1,[c("span",Z1,S(g.correct),1),c("span",e0,S(g.incorrect),1),c("span",t0,S(g.total)+" total",1)])]))),128))]))])):U("",!0),c("div",s0,[c("button",{class:"secondary-btn",onClick:i}," Refresh "),c("button",{class:"primary-btn",onClick:m[5]||(m[5]=g=>p.$emit("close"))}," Done ")])])):(v(),h("div",B1,[m[9]||(m[9]=c("h3",null,"No Practice Data Yet",-1)),m[10]||(m[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:m[2]||(m[2]=g=>p.$emit("close"))},"Start Practicing")])),P(n).useTestData.value?(v(),h("div",n0," Test Mode - Using Generated Data ")):U("",!0)]))}},a0=ye(o0,[["__scopeId","data-v-38e59c14"]]),_u="bridge-classroom-anon-mode",r0="BridgeClassroom-Anon",Na=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],li=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function l0(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function i0(e,t){const s=`${r0}:${e} ${t}`,n=l0(s),o=Number(n%BigInt(Na.length)),a=Number(n/BigInt(Na.length)%BigInt(li.length));return{firstName:Na[o],lastName:li[a]}}const Sn=E(localStorage.getItem(_u)==="true");function c0(){function e(){Sn.value=!Sn.value,localStorage.setItem(_u,Sn.value.toString())}function t(o){return Sn.value?i0(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),i=(a==null?void 0:a.charAt(0))||"",l=(r==null?void 0:r.charAt(0))||"";return(i+l).toUpperCase()||"?"}return{isAnonymized:Sn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const u0={class:"teacher-student-list"},d0={class:"teacher-header"},f0={class:"header-actions"},m0=["value"],p0={key:0,class:"loading-state"},v0={key:1,class:"error-state"},h0={key:2,class:"empty-state"},g0={key:3,class:"empty-state"},y0={key:4,class:"student-table-wrap"},b0={class:"student-table"},_0=["onClick"],w0={class:"col-name"},C0={class:"student-name-cell"},S0={class:"avatar"},$0={class:"col-mastery"},k0={class:"mastery-pills"},x0={key:0,class:"pill pill-green"},A0={key:1,class:"pill pill-orange"},N0={key:2,class:"pill pill-yellow"},T0={key:3,class:"pill pill-red"},E0={key:4,class:"no-data-label"},O0={class:"col-active"},R0={class:"col-lessons"},I0={class:"recent-lessons"},P0={key:0,class:"no-data-label"},D0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=ao(),n=uo(),o=Fe(),a=c0(),r=E("all"),i=E({});_t(async()=>{await s.loadAllStudentSummaries(),await l()});async function l(){const $=o.currentUser.value;if(!$)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms($.id);const w={};await Promise.all(n.teacherClassrooms.value.map(async _=>{const R=await n.fetchClassroomDetail(_.id);R!=null&&R.success&&(w[_.id]=new Set(R.classroom.members.map(q=>q.student_id)))})),i.value=w}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await l()}const d=T(()=>{const $=new Set;for(const w of Object.values(i.value))for(const _ of w)$.add(_);return $}),f=T(()=>{const $=s.students.value;if(r.value==="all")return $;if(r.value==="none")return $.filter(_=>!d.value.has(_.id));const w=i.value[r.value];return w?$.filter(_=>w.has(_.id)):$}),p=T(()=>[...f.value].sort(($,w)=>{var q,Q;const _=((q=m.value[$.id])==null?void 0:q.lastObservationTime)||"",R=((Q=m.value[w.id])==null?void 0:Q.lastObservationTime)||"";return R!==_?R.localeCompare(_):y($).localeCompare(y(w))})),m=T(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentMasterySummary(w.id);return $}),g=T(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentRecentLessons(w.id);return $});function y($){return a.displayFullName($)}function N($){return a.displayInitials($)}return($,w)=>(v(),h("div",u0,[c("header",d0,[w[5]||(w[5]=c("h2",null,"My Students",-1)),c("div",f0,[P(n).teacherClassrooms.value.length?Re((v(),h("select",{key:0,"onUpdate:modelValue":w[0]||(w[0]=_=>r.value=_),class:"filter-select"},[w[3]||(w[3]=c("option",{value:"all"},"All Students",-1)),(v(!0),h(Z,null,ie(P(n).teacherClassrooms.value,_=>(v(),h("option",{key:_.id,value:_.id},S(_.name),9,m0))),128)),w[4]||(w[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[Bn,r.value]]):U("",!0),c("button",{class:de(["anon-btn",{active:P(a).isAnonymized.value}]),onClick:w[1]||(w[1]=_=>P(a).toggleAnonymize())},S(P(a).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:w[2]||(w[2]=_=>$.$emit("close"))},"Back")])]),P(s).loading.value?(v(),h("div",p0,[...w[6]||(w[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):P(s).error.value?(v(),h("div",v0,[c("p",null,"Failed to load: "+S(P(s).error.value),1),c("button",{onClick:u},"Try Again")])):P(s).students.value.length===0?(v(),h("div",h0,[...w[7]||(w[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(v(),h("div",g0,[...w[8]||(w[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(v(),h("div",y0,[c("table",b0,[w[9]||(w[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(v(!0),h(Z,null,ie(p.value,_=>{var R,q,Q,L,Y,J,fe;return v(),h("tr",{key:_.id,class:"student-row",onClick:me=>$.$emit("select-student",_.id,y(_))},[c("td",w0,[c("div",C0,[c("div",S0,S(N(_)),1),c("span",null,S(y(_)),1)])]),c("td",$0,[c("div",k0,[(R=m.value[_.id])!=null&&R.green?(v(),h("span",x0,S(m.value[_.id].green),1)):U("",!0),(q=m.value[_.id])!=null&&q.orange?(v(),h("span",A0,S(m.value[_.id].orange),1)):U("",!0),(Q=m.value[_.id])!=null&&Q.yellow?(v(),h("span",N0,S(m.value[_.id].yellow),1)):U("",!0),(L=m.value[_.id])!=null&&L.red?(v(),h("span",T0,S(m.value[_.id].red),1)):U("",!0),(Y=m.value[_.id])!=null&&Y.total?U("",!0):(v(),h("span",E0,"No data"))])]),c("td",O0,S(P(s).formatTimeSince((J=m.value[_.id])==null?void 0:J.lastObservationTime)),1),c("td",R0,[c("div",I0,[(v(!0),h(Z,null,ie(g.value[_.id],(me,ce)=>(v(),h("span",{key:ce,class:"lesson-tag"},S(me),1))),128)),(fe=g.value[_.id])!=null&&fe.length?U("",!0):(v(),h("span",P0,"-"))])])],8,_0)}),128))])])]))]))}},L0=ye(D0,[["__scopeId","data-v-dd6d8e66"]]),B0={class:"teacher-student-detail"},U0={class:"detail-header"},M0={class:"student-info"},F0={class:"avatar"},j0={class:"last-active"},H0={key:0,class:"loading-state"},W0={key:1,class:"detail-content"},V0={class:"tab-bar"},K0=["onClick"],G0={key:0,class:"tab-content"},z0={key:1,class:"tab-content"},J0={key:0,class:"stats-row"},Y0={class:"stat stat-green"},q0={key:0,class:"stat stat-orange"},X0={key:1,class:"stat stat-yellow"},Q0={key:2,class:"stat stat-red"},Z0={key:3,class:"stat stat-grey"},ew={key:1,class:"no-data"},tw={key:2,class:"lesson-list"},sw={class:"lesson-header"},nw=["onClick"],ow={class:"mastery-strip"},aw=["title","onClick"],rw={key:0,class:"medal gold-medal"},lw={key:1,class:"medal silver-medal"},iw={class:"board-num"},cw={class:"observation-total"},uw={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=ao(),a=Ps(),r=ps(),i=E(!1),l=E("progress"),u=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],d=T(()=>s.studentName.split(" ").map(w=>w[0]||"").join("").toUpperCase());_t(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const f=T(()=>o.studentObservations.value[s.studentId]||[]),p=T(()=>o.getStudentMasterySummary(s.studentId)),m=T(()=>o.formatTimeSince(p.value.lastObservationTime)),g=T(()=>{const $=f.value;return $.length===0?[]:a.extractLessonsFromObservations($).map(_=>{const R=a.computeBoardMastery($,_.subfolder,_.boardNumbers),q=a.computeLessonAchievement(R);return{..._,boardMastery:R,achievement:q.achievement}}).sort((_,R)=>y(_.subfolder).localeCompare(y(R.subfolder)))});ft(g,$=>{a.fetchMissingBoardCounts($.map(w=>w.subfolder))},{immediate:!0});function y($){return r.formatLessonName($)}function N($){const w={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${$.boardNumber}: ${w[$.status]}`}return($,w)=>(v(),h("div",B0,[c("header",U0,[c("button",{class:"back-btn",onClick:w[0]||(w[0]=_=>$.$emit("back"))}," Students"),c("div",M0,[c("div",F0,S(d.value),1),c("div",null,[c("h2",null,S(e.studentName),1),c("span",j0,"Last active: "+S(m.value),1)])])]),i.value?(v(),h("div",H0,[...w[1]||(w[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(v(),h("div",W0,[c("div",V0,[(v(),h(Z,null,ie(u,_=>c("button",{key:_.id,class:de(["tab-btn",{active:l.value===_.id}]),onClick:R=>l.value=_.id},S(_.label),11,K0)),64))]),l.value==="progress"?(v(),h("div",G0,[he(yu,{observations:f.value,studentName:s.studentName},null,8,["observations","studentName"])])):l.value==="mastery"?(v(),h("div",z0,[p.value.total>0?(v(),h("div",J0,[c("div",Y0,S(p.value.green)+" Green",1),p.value.orange?(v(),h("div",q0,S(p.value.orange)+" Orange",1)):U("",!0),p.value.yellow?(v(),h("div",X0,S(p.value.yellow)+" Yellow",1)):U("",!0),p.value.red?(v(),h("div",Q0,S(p.value.red)+" Red",1)):U("",!0),p.value.grey?(v(),h("div",Z0,S(p.value.grey)+" Grey",1)):U("",!0)])):U("",!0),g.value.length===0?(v(),h("div",ew," No lesson data available yet. ")):(v(),h("div",tw,[(v(!0),h(Z,null,ie(g.value,_=>(v(),h("div",{key:_.subfolder,class:"lesson-row"},[c("div",sw,[c("button",{class:"lesson-name lesson-link",onClick:R=>n("navigate-to-lesson",_.subfolder)},S(y(_.subfolder)),9,nw),_.achievement!=="none"?(v(),h("span",{key:0,class:de(["achievement-badge",_.achievement])},"  "+S(_.achievement==="gold"?"Gold":"Silver"),3)):U("",!0)]),c("div",ow,[(v(!0),h(Z,null,ie(_.boardMastery,R=>(v(),h("div",{key:R.boardNumber,class:de(["board-circle board-clickable","status-"+R.status]),title:N(R),onClick:q=>n("navigate-to-lesson",_.subfolder,R.boardNumber)},[R.achievement==="gold"?(v(),h("span",rw,"")):R.achievement==="silver"?(v(),h("span",lw,"")):U("",!0),c("span",iw,S(R.boardNumber),1)],10,aw))),128))])]))),128))]))])):U("",!0),c("div",cw,S(f.value.length)+" observations",1)]))]))}},dw=ye(uw,[["__scopeId","data-v-0df670c0"]]),fw={key:0,class:"lesson-browser-loading"},mw={key:1,class:"lesson-browser-error"},pw={class:"lesson-browser"},vw={class:"browser-header"},hw={class:"browser-content"},gw=["onClick"],yw={class:"expand-icon"},bw={class:"category-name"},_w={class:"category-count"},ww={key:0,class:"lesson-list"},Cw=["onClick"],Sw={class:"lesson-name"},$w={class:"lesson-description"},kw={key:0,class:"error-message"},xw={key:3,class:"lesson-browser-inline"},Aw={class:"browser-content-inline"},Nw=["onClick"],Tw={class:"expand-icon"},Ew={class:"category-name"},Ow={class:"category-count"},Rw={key:0,class:"lesson-list"},Iw=["onClick"],Pw={class:"lesson-name"},Dw={class:"lesson-description"},Lw={key:0,class:"error-message-inline"},Bw={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=E(null),a=E(null),r=E(!1),i=E([]),l=E(null),u=E(null);ft(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&d()},{immediate:!0});async function d(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{r.value=!1}}function f(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function m(g,y){var N;u.value=null,l.value=g.id;try{const $=((N=s.collection)==null?void 0:N.baseUrl)||"",w=p(g.id),_=`${$}/${w}.pbn`,R=await fetch(_);if(!R.ok)throw new Error(`Failed to load lesson: ${R.statusText}`);const q=await R.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:q}),s.inline||n("close")}catch($){console.error("Error loading lesson:",$),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{l.value=null}}return(g,y)=>e.visible&&r.value?(v(),h("div",fw,[...y[2]||(y[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(v(),h("div",mw,[c("p",null,S(a.value),1),c("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(v(),h("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Lt(N=>g.$emit("close"),["self"]))},[c("div",pw,[c("div",vw,[c("h2",null,S(o.value.name),1),c("button",{class:"close-btn",onClick:y[0]||(y[0]=N=>g.$emit("close"))},"")]),c("div",hw,[(v(!0),h(Z,null,ie(o.value.categories,N=>(v(),h("div",{key:N.id,class:"category-section"},[c("button",{class:de(["category-header",{expanded:i.value.includes(N.id)}]),onClick:$=>f(N.id)},[c("span",yw,S(i.value.includes(N.id)?"":""),1),c("span",bw,S(N.name),1),c("span",_w,S(N.lessons.length)+" lessons",1)],10,gw),i.value.includes(N.id)?(v(),h("div",ww,[(v(!0),h(Z,null,ie(N.lessons,$=>(v(),h("button",{key:$.id,class:de(["lesson-item",{loading:l.value===$.id}]),onClick:w=>m($,N)},[c("span",Sw,S($.name),1),c("span",$w,S($.description),1)],10,Cw))),128))])):U("",!0)]))),128))]),u.value?(v(),h("div",kw,S(u.value),1)):U("",!0)])])):e.visible&&e.inline&&o.value?(v(),h("div",xw,[c("div",Aw,[(v(!0),h(Z,null,ie(o.value.categories,N=>(v(),h("div",{key:N.id,class:"category-section"},[c("button",{class:de(["category-header",{expanded:i.value.includes(N.id)}]),onClick:$=>f(N.id)},[c("span",Tw,S(i.value.includes(N.id)?"":""),1),c("span",Ew,S(N.name),1),c("span",Ow,S(N.lessons.length)+" lessons",1)],10,Nw),i.value.includes(N.id)?(v(),h("div",Rw,[(v(!0),h(Z,null,ie(N.lessons,$=>(v(),h("button",{key:$.id,class:de(["lesson-item",{loading:l.value===$.id}]),onClick:w=>m($,N)},[c("span",Pw,S($.name),1),c("span",Dw,S($.description),1)],10,Iw))),128))])):U("",!0)]))),128))]),u.value?(v(),h("div",Lw,S(u.value),1)):U("",!0)])):U("",!0)}},Uw=ye(Bw,[["__scopeId","data-v-384a9c63"]]),Mw={class:"viewer-controls"},Fw={class:"viewer-body"},jw={key:0,class:"interaction-overlay"},Hw={key:1,class:"viewer-loading"},Ww={key:2,class:"viewer-error"},Vw=["src"],Kw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Vt({x:80,y:80}),n=Vt({w:550,h:700}),o=E(!1),a=Vt({x:0,y:0}),r=E(null),i=E(!1),l=E(null),u=T(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function d(w){if(f(),!!w){i.value=!0,l.value=null;try{const _=await fetch(w);if(!_.ok)throw new Error("Failed to load PDF");const R=await _.blob(),q=new Blob([R],{type:"application/pdf"});r.value=URL.createObjectURL(q)}catch(_){l.value="Could not load PDF",console.error("Failed to fetch intro PDF:",_)}finally{i.value=!1}}}function f(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}ft(()=>[t.visible,t.url],([w,_])=>{w&&_?d(_):w||f()},{immediate:!0}),Vi(f);function m(w){w.target.closest("button")||(o.value=!0,a.x=w.clientX-s.x,a.y=w.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",$))}function g(w){s.x=Math.max(0,w.clientX-a.x),s.y=Math.max(0,w.clientY-a.y)}function y(w){o.value=!0,a.x=w.clientX,a.y=w.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",N),document.addEventListener("pointerup",$)}function N(w){n.w=Math.max(320,a.startW+(w.clientX-a.x)),n.h=Math.max(300,a.startH+(w.clientY-a.y))}function $(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",$)}return(w,_)=>e.visible?(v(),h("div",{key:0,class:"intro-pdf-viewer",style:it({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:m},[_[1]||(_[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",Mw,[c("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:_[0]||(_[0]=R=>w.$emit("close")),title:"Close"},"")])],32),c("div",Fw,[o.value?(v(),h("div",jw)):U("",!0),i.value?(v(),h("div",Hw,"Loading PDF...")):l.value?(v(),h("div",Ww,S(l.value),1)):u.value?(v(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,Vw)):U("",!0)]),c("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):U("",!0)}},Gw=ye(Kw,[["__scopeId","data-v-a97df645"]]),Ms="https://api.bridge-classroom.com/api",Fs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",$n=E([]),$s=E([]),Ta=E(null),St=E(!1),Oe=E(null);function ia(){async function e(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ms}/assignments?student_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Fs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?$n.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch student assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function t(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ms}/assignments?assigned_by=${encodeURIComponent(i)}`,{headers:{"x-api-key":Fs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?$s.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch teacher assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function s(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ms}/assignments?classroom_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Fs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?u.assignments:(Oe.value=u.error||"Failed to fetch assignments",[])}catch(l){return console.error("Failed to fetch classroom assignments:",l),Oe.value="Unable to connect to server",[]}finally{St.value=!1}}async function n(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ms}/assignments/${encodeURIComponent(i)}`,{headers:{"x-api-key":Fs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?Ta.value=u.assignment:Oe.value=u.error||"Failed to fetch assignment",u}catch(l){return console.error("Failed to fetch assignment detail:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function o({exercise_id:i,classroom_id:l,student_id:u,assigned_by:d,due_at:f,sort_order:p}){St.value=!0,Oe.value=null;try{const m=await fetch(`${Ms}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Fs},body:JSON.stringify({exercise_id:i,classroom_id:l||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:p??null})});if(!m.ok){const y=await m.text();return Oe.value=y||`Server error (${m.status})`,{success:!1,error:Oe.value}}const g=await m.json();return g.success?$s.value=[g.assignment,...$s.value]:Oe.value=g.error||"Failed to create assignment",g}catch(m){return console.error("Failed to create assignment:",m),Oe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{St.value=!1}}async function a(i){try{const l=await fetch(`${Ms}/assignments/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":Fs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,{success:!1,error:Oe.value}}const u=await l.json();return u.success&&($s.value=$s.value.filter(d=>d.id!==i),$n.value=$n.value.filter(d=>d.id!==i)),u}catch(l){return console.error("Failed to delete assignment:",l),{success:!1,error:"Unable to connect to server"}}}function r(){$n.value=[],$s.value=[],Ta.value=null,St.value=!1,Oe.value=null}return{studentAssignments:$n,teacherAssignments:$s,currentAssignment:Ta,loading:St,error:Oe,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,reset:r}}const zw={class:"collection-icon"},Jw={class:"collection-name"},Yw={class:"collection-desc"},qw={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(v(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",zw,S(e.collection.icon),1),c("span",Jw,S(e.collection.name),1),c("span",Yw,S(e.collection.description),1)]))}},Xw=ye(qw,[["__scopeId","data-v-747be5b1"]]),Qw={class:"collection-grid"},Zw={class:"collection-cards"},eC={key:0,class:"load-file-section"},tC={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=oo(),s=t.COLLECTIONS;return(n,o)=>(v(),h("div",Qw,[o[2]||(o[2]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",Zw,[(v(!0),h(Z,null,ie(P(s),a=>(v(),Ue(Xw,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),P(t).showLoadPbnOption.value?(v(),h("div",eC,[o[1]||(o[1]=c("p",null,"Or load your own PBN file:",-1)),c("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):U("",!0)]))}},Kr=ye(tC,[["__scopeId","data-v-35b62d22"]]),sC={class:"casual-lobby"},nC={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(v(),h("div",sC,[he(Kr,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},oC=ye(nC,[["__scopeId","data-v-1ce1f7d7"]]),aC={class:"assignment-panel"},rC={key:0,class:"loading-state"},lC={key:1,class:"empty-state"},iC={key:2,class:"assignment-cards"},cC=["onClick"],uC={class:"card-header"},dC={class:"exercise-name"},fC={class:"card-meta"},mC={key:0,class:"meta-item"},pC={class:"progress-section"},vC={class:"progress-bar"},hC={class:"progress-label"},gC={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const i=s(r);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(r){if(!r.due_at)return"";const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(r,i)=>(v(),h("div",aC,[i[2]||(i[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(v(),h("div",rC,[...i[0]||(i[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(v(),h("div",lC,[...i[1]||(i[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(v(),h("div",iC,[(v(!0),h(Z,null,ie(e.assignments,l=>(v(),h("div",{key:l.id,class:de(["assignment-card",s(l)]),onClick:u=>r.$emit("select-assignment",l)},[c("div",uC,[c("span",dC,S(l.exercise_name),1),c("span",{class:de(["status-badge",s(l)])},S(n(l)),3)]),c("div",fC,[l.classroom_name?(v(),h("span",mC,S(l.classroom_name),1)):U("",!0),l.due_at?(v(),h("span",{key:1,class:de(["meta-item",a(l)])},S(o(l)),3)):U("",!0)]),c("div",pC,[c("div",vC,[c("div",{class:de(["progress-fill",s(l)]),style:it({width:t(l)+"%"})},null,6)]),c("span",hC,S(l.attempted_boards)+" / "+S(l.total_boards)+" boards ",1)])],10,cC))),128))]))]))}},yC=ye(gC,[["__scopeId","data-v-dc0b8e86"]]),bC={class:"student-lobby"},_C={__name:"StudentLobby",emits:["select-collection","load-file"],setup(e,{emit:t}){const s=Fe(),n=ia(),o=T(()=>n.studentAssignments.value.length>0),a=T(()=>n.loading.value);function r(i){console.log("Selected assignment:",i)}return _t(()=>{const i=s.currentUser.value;i&&n.fetchStudentAssignments(i.id)}),(i,l)=>(v(),h("div",bC,[o.value||a.value?(v(),Ue(yC,{key:0,assignments:P(n).studentAssignments.value,loading:a.value,onSelectAssignment:r},null,8,["assignments","loading"])):U("",!0),he(Kr,{onSelectCollection:l[0]||(l[0]=u=>i.$emit("select-collection",u)),onLoadFile:l[1]||(l[1]=u=>i.$emit("load-file",u))})]))}},wC=ye(_C,[["__scopeId","data-v-74a1ec15"]]),wu="https://api.bridge-classroom.com/api",Cu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",$o=E([]),Gr=E([]),zr=E([]),lr=E(!1),Ea=E(null),CC=2*60*1e3;async function SC(e,t=!1){if(!t&&Ea.value&&Date.now()-new Date(Ea.value).getTime()<CC)return{success:!0,cached:!0};lr.value=!0;try{const s=await fetch(`${wu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Cu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return $o.value=n.classrooms||[],Gr.value=n.needs_attention||[],zr.value=n.recent_activity||[],Ea.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{lr.value=!1}}async function $C(e,t){try{const s=await fetch(`${wu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Cu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?Gr.value=[]:t==="activity"&&(zr.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function kC(){const e=T(()=>({classroomCount:$o.value.length,openAssignmentCount:$o.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:$o,needsAttention:Gr,recentActivity:zr,lobbyLoading:lr,summaryStats:e,loadTeacherLobbyData:SC,clearPanel:$C}}const xC={class:"roster"},AC={class:"roster-header"},NC={class:"member-count"},TC={key:0,class:"roster-empty"},EC={key:1,class:"roster-table"},OC={class:"member-name"},RC={class:"member-email"},IC={class:"member-date"},PC={class:"member-action"},DC=["onClick","disabled"],LC={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=E(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const i=`${r.first_name} ${r.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,i)=>(v(),h("div",xC,[c("div",AC,[i[0]||(i[0]=c("h4",null,"Class Roster",-1)),c("span",NC,S(e.members.length)+" "+S(e.members.length===1?"student":"students"),1)]),e.members.length===0?(v(),h("div",TC,[...i[1]||(i[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(v(),h("table",EC,[i[2]||(i[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(v(!0),h(Z,null,ie(e.members,l=>(v(),h("tr",{key:l.student_id},[c("td",OC,S(l.first_name)+" "+S(l.last_name),1),c("td",RC,S(l.email),1),c("td",IC,S(o(l.joined_at)),1),c("td",PC,[c("button",{class:"remove-btn",onClick:u=>a(l),disabled:n.value===l.student_id},S(n.value===l.student_id?"Removing...":"Remove"),9,DC)])]))),128))])]))]))}},BC=ye(LC,[["__scopeId","data-v-ee901be3"]]),UC={class:"header-left"},MC={class:"classroom-name"},FC={class:"header-meta"},jC={class:"join-badge"},HC={class:"member-count"},WC={key:0,class:"stat-badge"},VC={key:1,class:"stat-badge completion"},KC={key:0,class:"mini-bars"},GC={class:"bar-label"},zC={class:"bar-track"},JC={class:"bar-count"},YC=["aria-label"],qC={key:0,class:"card-body"},XC={key:0,class:"classroom-desc"},QC={class:"invite-section"},ZC={class:"invite-field"},eS=["value"],tS={class:"email-section"},sS={class:"email-header"},nS={class:"email-template"},oS={class:"email-body"},aS={key:1,class:"assignments-section"},rS={class:"assignment-list"},lS={class:"assignment-name"},iS={key:0,class:"assignment-due"},cS={class:"assignment-boards"},uS={key:3,class:"loading-roster"},dS={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=uo(),a=ia(),r=E(null),i=E(!1),l=E(!1),u=E(!1),d=E([]),f=T(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ft(()=>s.expanded,async $=>{if($&&!r.value){i.value=!0;const[w,_]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);w!=null&&w.success&&(r.value=w.classroom),d.value=_||[],i.value=!1}});function p($){return $?new Date($).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function m($){return $.students_total?Math.round($.students_completed/$.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(f.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function y(){const $=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText($),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function N($){const w=await o.removeMember(s.classroom.id,$);w!=null&&w.success&&(r.value&&(r.value.members=r.value.members.filter(_=>_.student_id!==$)),n("member-removed"))}return($,w)=>(v(),h("div",{class:de(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:w[0]||(w[0]=_=>$.$emit("toggle"))},[c("div",UC,[c("h3",MC,S(e.classroom.name),1),c("div",FC,[c("span",jC,"JOIN: "+S(e.classroom.join_code),1),c("span",HC,S(e.classroom.member_count)+" "+S(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(v(),h("span",WC,S(e.classroom.open_assignment_count)+" "+S(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):U("",!0),e.classroom.avg_completion_pct>0?(v(),h("span",VC,S(e.classroom.avg_completion_pct)+"% avg",1)):U("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(v(),h("div",KC,[(v(!0),h(Z,null,ie(e.classroom.assignments,_=>(v(),h("div",{key:_.id,class:"mini-bar"},[c("span",GC,S(_.exercise_name),1),c("div",zC,[c("div",{class:"bar-fill",style:it({width:m(_)})},null,4)]),c("span",JC,S(_.students_completed)+"/"+S(_.students_total),1)]))),128))])):U("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:de(["chevron",{rotated:e.expanded}])},"",2)],8,YC)]),e.expanded?(v(),h("div",qC,[e.classroom.description?(v(),h("p",XC,S(e.classroom.description),1)):U("",!0),c("div",QC,[w[2]||(w[2]=c("h4",null,"Invite Link",-1)),w[3]||(w[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",ZC,[c("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:w[1]||(w[1]=_=>_.target.select())},null,8,eS),c("button",{class:"copy-btn",onClick:g},S(l.value?"Copied!":"Copy"),1)])]),c("div",tS,[c("div",sS,[w[4]||(w[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:y},S(u.value?"Copied!":"Copy"),1)]),c("div",nS,[w[5]||(w[5]=c("p",null,[c("strong",null,"Subject:"),$t(" Join our Bridge Classroom for practice exercises")],-1)),c("div",oS," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+S(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(v(),h("div",aS,[w[6]||(w[6]=c("h4",null,"Assignments",-1)),c("div",rS,[(v(!0),h(Z,null,ie(d.value,_=>(v(),h("div",{key:_.id,class:"assignment-row"},[c("span",lS,S(_.exercise_name),1),_.due_at?(v(),h("span",iS,"Due "+S(p(_.due_at)),1)):U("",!0),c("span",cS,S(_.total_boards)+" boards",1)]))),128))])])):U("",!0),r.value?(v(),Ue(BC,{key:2,members:r.value.members,onRemoveMember:N},null,8,["members"])):i.value?(v(),h("div",uS," Loading roster... ")):U("",!0)])):U("",!0)],2))}},fS=ye(dS,[["__scopeId","data-v-59d6a074"]]),mS={class:"modal-content"},pS={class:"step"},vS={class:"form-group"},hS={class:"form-group"},gS={class:"step-actions"},yS=["disabled"],bS={key:0,class:"error-text"},_S={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Fe(),o=uo(),a=E(""),r=E(""),i=E(!1),l=E(null);async function u(){if(!a.value.trim()||i.value)return;const d=n.currentUser.value;if(!d)return;i.value=!0,l.value=null;const f=await o.createClassroom(d.id,a.value.trim(),r.value.trim()||null);f.success?s("classroom-created",f.classroom):l.value=f.error||"Failed to create classroom",i.value=!1}return(d,f)=>(v(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Lt(p=>d.$emit("close"),["self"]))},[c("div",mS,[c("div",pS,[f[7]||(f[7]=c("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",vS,[f[4]||(f[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),Re(c("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Po(u,["enter"])},null,544),[[mt,a.value]]),f[5]||(f[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",hS,[f[6]||(f[6]=c("label",{for:"classroom-desc"},[$t("Description "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[mt,r.value]])]),c("div",gS,[c("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=p=>d.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:u},S(i.value?"Creating...":"Create Classroom"),9,yS)]),l.value?(v(),h("p",bS,S(l.value),1)):U("",!0)])])]))}},wS=ye(_S,[["__scopeId","data-v-c26a1ae6"]]),kn="https://api.bridge-classroom.com/api",xn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ks=E([]),Oa=E(null),Mt=E(!1),Le=E(null);function CS(){async function e(r={}){Mt.value=!0,Le.value=null;try{const i=new URLSearchParams;r.created_by&&i.set("created_by",r.created_by),r.curriculum_path&&i.set("curriculum_path",r.curriculum_path),r.visibility&&i.set("visibility",r.visibility);const l=i.toString(),u=`${kn}/exercises${l?"?"+l:""}`,d=await fetch(u,{headers:{"x-api-key":xn}});if(!d.ok){const p=await d.text();return Le.value=p||`Server error (${d.status})`,null}const f=await d.json();return f.success?ks.value=f.exercises:Le.value=f.error||"Failed to fetch exercises",f}catch(i){return console.error("Failed to fetch exercises:",i),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function t(r){Mt.value=!0,Le.value=null;try{const i=await fetch(`${kn}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":xn}});if(!i.ok){const u=await i.text();return Le.value=u||`Server error (${i.status})`,null}const l=await i.json();return l.success?Oa.value=l.exercise:Le.value=l.error||"Failed to fetch exercise",l}catch(i){return console.error("Failed to fetch exercise detail:",i),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function s({name:r,description:i,created_by:l,curriculum_path:u,visibility:d,boards:f}){Mt.value=!0,Le.value=null;try{const p=await fetch(`${kn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":xn},body:JSON.stringify({name:r,description:i||null,created_by:l||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!p.ok){const g=await p.text();return Le.value=g||`Server error (${p.status})`,{success:!1,error:Le.value}}const m=await p.json();return m.success?ks.value=[m.exercise,...ks.value]:Le.value=m.error||"Failed to create exercise",m}catch(p){return console.error("Failed to create exercise:",p),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function n(r,i){Mt.value=!0,Le.value=null;try{const l=await fetch(`${kn}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":xn},body:JSON.stringify(i)});if(!l.ok){const d=await l.text();return Le.value=d||`Server error (${l.status})`,{success:!1,error:Le.value}}const u=await l.json();return u.success||(Le.value=u.error||"Failed to update exercise"),u}catch(l){return console.error("Failed to update exercise:",l),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function o(r){try{const i=await fetch(`${kn}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":xn}});if(!i.ok){const u=await i.text();return Le.value=u||`Server error (${i.status})`,{success:!1,error:Le.value}}const l=await i.json();return l.success&&(ks.value=ks.value.filter(u=>u.id!==r)),l}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){ks.value=[],Oa.value=null,Mt.value=!1,Le.value=null}return{exercises:ks,currentExercise:Oa,loading:Mt,error:Le,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const SS={class:"modal-content"},$S={class:"step"},kS={class:"form-group"},xS=["value"],AS={key:0,class:"form-hint"},NS={class:"form-group"},TS={class:"target-options"},ES={class:"radio-option"},OS={class:"radio-option"},RS={key:0,class:"form-group"},IS=["value"],PS={key:1,class:"form-group"},DS=["value"],LS={class:"form-group"},BS={class:"step-actions"},US=["disabled"],MS={key:2,class:"error-text"},FS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Fe(),a=CS(),r=ia(),i=uo(),l=ao(),u=E(""),d=E("classroom"),f=E(s.preselectedClassroomId||""),p=E(""),m=E(""),g=E(!1),y=E(null),N=T(()=>a.exercises.value),$=T(()=>a.loading.value),w=T(()=>i.teacherClassrooms.value),_=T(()=>l.students.value),R=T(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!p.value));async function q(){if(!R.value||g.value)return;const Q=o.currentUser.value;if(!Q)return;g.value=!0,y.value=null;const L=await r.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?p.value:null,assigned_by:Q.id,due_at:m.value||null});L.success?n("assignment-created",L.assignment):y.value=L.error||"Failed to create assignment",g.value=!1}return _t(async()=>{a.exercises.value.length||await a.fetchExercises();const Q=o.currentUser.value;Q&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(Q.id)}),(Q,L)=>(v(),h("div",{class:"modal-overlay",onClick:L[7]||(L[7]=Lt(Y=>Q.$emit("close"),["self"]))},[c("div",SS,[c("div",$S,[L[18]||(L[18]=c("h2",null,"Create Assignment",-1)),L[19]||(L[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",kS,[L[9]||(L[9]=c("label",{for:"exercise-select"},"Exercise",-1)),Re(c("select",{id:"exercise-select","onUpdate:modelValue":L[0]||(L[0]=Y=>u.value=Y),class:"form-select"},[L[8]||(L[8]=c("option",{value:""},"Select an exercise...",-1)),(v(!0),h(Z,null,ie(N.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.board_count)+" boards)",9,xS))),128))],512),[[Bn,u.value]]),$.value?(v(),h("p",AS,"Loading exercises...")):U("",!0)]),c("div",NS,[L[12]||(L[12]=c("label",null,"Assign to",-1)),c("div",TS,[c("label",ES,[Re(c("input",{type:"radio","onUpdate:modelValue":L[1]||(L[1]=Y=>d.value=Y),value:"classroom"},null,512),[[kl,d.value]]),L[10]||(L[10]=c("span",null,"Classroom",-1))]),c("label",OS,[Re(c("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=Y=>d.value=Y),value:"student"},null,512),[[kl,d.value]]),L[11]||(L[11]=c("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(v(),h("div",RS,[L[14]||(L[14]=c("label",{for:"classroom-select"},"Classroom",-1)),Re(c("select",{id:"classroom-select","onUpdate:modelValue":L[3]||(L[3]=Y=>f.value=Y),class:"form-select"},[L[13]||(L[13]=c("option",{value:""},"Select a classroom...",-1)),(v(!0),h(Z,null,ie(w.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.member_count)+" students)",9,IS))),128))],512),[[Bn,f.value]])])):U("",!0),d.value==="student"?(v(),h("div",PS,[L[16]||(L[16]=c("label",{for:"student-select"},"Student",-1)),Re(c("select",{id:"student-select","onUpdate:modelValue":L[4]||(L[4]=Y=>p.value=Y),class:"form-select"},[L[15]||(L[15]=c("option",{value:""},"Select a student...",-1)),(v(!0),h(Z,null,ie(_.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.first_name)+" "+S(Y.last_name),9,DS))),128))],512),[[Bn,p.value]])])):U("",!0),c("div",LS,[L[17]||(L[17]=c("label",{for:"due-date"},[$t("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("input",{id:"due-date","onUpdate:modelValue":L[5]||(L[5]=Y=>m.value=Y),type:"date",class:"form-input"},null,512),[[mt,m.value]])]),c("div",BS,[c("button",{class:"btn btn-secondary",onClick:L[6]||(L[6]=Y=>Q.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!R.value||g.value,onClick:q},S(g.value?"Creating...":"Create Assignment"),9,US)]),y.value?(v(),h("p",MS,S(y.value),1)):U("",!0)])])]))}},jS=ye(FS,[["__scopeId","data-v-5e97b847"]]),HS={class:"needs-attention"},WS={class:"panel-header"},VS={key:0,class:"empty-state"},KS={key:1,class:"attention-list"},GS={class:"item-icon"},zS={class:"item-text"},JS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(v(),h("div",HS,[c("div",WS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(v(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):U("",!0)]),e.items.length?(v(),h("div",KS,[(v(!0),h(Z,null,ie(e.items,(r,i)=>(v(),h("div",{key:i,class:de(["attention-item",r.type])},[c("span",GS,S(t(r.type)),1),c("span",zS,S(s(r)),1)],2))),128))])):(v(),h("div",VS," All caught up! No items need attention. "))]))}},YS=ye(JS,[["__scopeId","data-v-65e8ba1f"]]),qS={class:"recent-activity"},XS={class:"panel-header"},QS={key:0,class:"empty-state"},ZS={key:1,class:"activity-list"},e$={class:"event-content"},t$={class:"event-text"},s$={class:"event-time"},n$={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(v(),h("div",qS,[c("div",XS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(v(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):U("",!0)]),e.events.length?(v(),h("div",ZS,[(v(!0),h(Z,null,ie(e.events,(r,i)=>(v(),h("div",{key:i,class:"activity-item"},[c("span",{class:de(["event-icon",r.type])},S(t(r.type)),3),c("div",e$,[c("span",t$,S(s(r)),1),c("span",s$,S(n(r.timestamp)),1)])]))),128))])):(v(),h("div",QS," No recent activity. "))]))}},o$=ye(n$,[["__scopeId","data-v-39e672f5"]]),a$={class:"teacher-lobby"},r$={class:"welcome-section"},l$={class:"welcome-title"},i$={class:"welcome-subtitle"},c$={class:"quick-actions"},u$={key:0,class:"loading-state"},d$={key:1,class:"dashboard-grid"},f$={class:"left-column"},m$={key:0,class:"classrooms-section"},p$={class:"classroom-cards"},v$={key:1,class:"empty-state"},h$={class:"right-column"},g$={class:"collections-section"},y$={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=Fe(),s=kC(),n=E(!1),o=E(!1),a=E(null),r=T(()=>{const m=t.currentUser.value;return m?m.firstName:""}),i=T(()=>{const m=s.summaryStats.value;if(!m||m.classroomCount===0)return"Get started by creating your first classroom.";const g=[];return g.push(`${m.classroomCount} active ${m.classroomCount===1?"classroom":"classrooms"}`),m.openAssignmentCount>0&&g.push(`${m.openAssignmentCount} open ${m.openAssignmentCount===1?"assignment":"assignments"}`),g.join(", ")+"."});function l(m){a.value=a.value===m?null:m}function u(m){n.value=!1,a.value=m.id,p()}function d(){o.value=!1,p()}function f(m){const g=t.currentUser.value;g&&s.clearPanel(g.id,m)}function p(){const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id,!0)}return _t(()=>{const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id)}),(m,g)=>(v(),h("div",a$,[c("div",r$,[c("h2",l$,"Welcome back, "+S(r.value),1),c("p",i$,S(i.value),1)]),c("div",c$,[c("button",{class:"action-btn create",onClick:g[0]||(g[0]=y=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:g[1]||(g[1]=y=>o.value=!0)}," + New Assignment "),e.isAdmin?(v(),h("button",{key:0,class:"action-btn admin",onClick:g[2]||(g[2]=y=>m.$emit("show-admin"))}," Admin Panel ")):U("",!0)]),P(s).lobbyLoading.value&&!P(s).lobbyClassrooms.value.length?(v(),h("div",u$,[...g[9]||(g[9]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(v(),h("div",d$,[c("div",f$,[P(s).lobbyClassrooms.value.length?(v(),h("div",m$,[g[10]||(g[10]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",p$,[(v(!0),h(Z,null,ie(P(s).lobbyClassrooms.value,y=>(v(),Ue(fS,{key:y.id,classroom:y,expanded:a.value===y.id,onToggle:N=>l(y.id),onMemberRemoved:p},null,8,["classroom","expanded","onToggle"]))),128))])])):(v(),h("div",v$,[...g[11]||(g[11]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",h$,[he(YS,{items:P(s).needsAttention.value,onClear:g[3]||(g[3]=y=>f("attention"))},null,8,["items"]),he(o$,{events:P(s).recentActivity.value,onClear:g[4]||(g[4]=y=>f("activity"))},null,8,["events"])])])),c("div",g$,[g[12]||(g[12]=c("h3",{class:"section-title"},"Lesson Collections",-1)),he(Kr,{onSelectCollection:g[5]||(g[5]=y=>m.$emit("select-collection",y)),onLoadFile:g[6]||(g[6]=y=>m.$emit("load-file",y))})]),n.value?(v(),Ue(wS,{key:2,onClose:g[7]||(g[7]=y=>n.value=!1),onClassroomCreated:u})):U("",!0),o.value?(v(),Ue(jS,{key:3,onClose:g[8]||(g[8]=y=>o.value=!1),onAssignmentCreated:d})):U("",!0)]))}},b$=ye(y$,[["__scopeId","data-v-340b5670"]]),Su="https://api.bridge-classroom.com/api",$u="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ku=E(null),xu=E([]),Au=E(null),Nu=E(null),ir=E(!1),cr=E(null),Ra=E(null),_$=60*1e3;async function Tu(e=!1){if(!e&&Ra.value&&Date.now()-new Date(Ra.value).getTime()<_$)return{success:!0,cached:!0};ir.value=!0,cr.value=null;try{const t=await fetch(`${Su}/admin/stats`,{headers:{"x-api-key":$u}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return ku.value=s.stats,xu.value=s.popular_lessons||[],Au.value=s.database,Ra.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),cr.value=t.message,{success:!1,error:t.message}}finally{ir.value=!1}}async function Eu(){try{const e=await fetch(`${Su}/admin/health`,{headers:{"x-api-key":$u}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Nu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function w$(){await Promise.all([Tu(!0),Eu()])}function C$(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function S$(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Jr(){return{stats:ku,popularLessons:xu,database:Au,health:Nu,loading:ir,error:cr,loadStats:Tu,loadHealth:Eu,refreshAll:w$,formatBytes:C$,formatUptime:S$}}const $$={class:"stats-row"},k$={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},x$={class:"stat-number"},A$={class:"stat-card",style:{"border-top-color":"#1565c0"}},N$={class:"stat-number"},T$={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},E$={class:"stat-number"},O$={class:"stat-card",style:{"border-top-color":"#e65100"}},R$={class:"stat-number"},I$={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,i;return v(),h("div",$$,[c("div",k$,[c("div",x$,S(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",A$,[c("div",N$,S(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",T$,[c("div",E$,S(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",O$,[c("div",R$,S(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},P$=ye(I$,[["__scopeId","data-v-a14a2199"]]),D$={class:"popular-lessons"},L$={key:0,class:"empty-state"},B$={key:1,class:"table-wrap"},U$={class:"lessons-table"},M$={class:"lesson-name"},F$={class:"num-col"},j$={class:"num-col"},H$={class:"num-col"},W$={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(v(),h("div",D$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(v(),h("div",B$,[c("table",U$,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(v(!0),h(Z,null,ie(e.lessons.slice(0,15),a=>(v(),h("tr",{key:a.deal_subfolder},[c("td",M$,S(t(a.deal_subfolder)),1),c("td",F$,S(a.play_count.toLocaleString()),1),c("td",j$,S(a.unique_users),1),c("td",H$,[c("span",{class:de(["accuracy-badge",s(a.accuracy_pct)])},S(a.accuracy_pct)+"% ",3)])]))),128))])])])):(v(),h("div",L$,"No lesson data yet."))]))}},V$=ye(W$,[["__scopeId","data-v-079bd4f8"]]),K$={class:"database-panel"},G$={key:0,class:"empty-state"},z$={class:"db-size"},J$={class:"tables-table"},Y$={class:"table-name"},q$={class:"num-col"},X$={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Jr();return(s,n)=>(v(),h("div",K$,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(v(),h(Z,{key:1},[c("div",z$,[n[0]||(n[0]=$t(" SQLite file: ",-1)),c("strong",null,S(P(t)(e.database.file_size_bytes)),1)]),c("table",J$,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(v(!0),h(Z,null,ie(e.database.tables,o=>(v(),h("tr",{key:o.name},[c("td",Y$,S(o.name),1),c("td",q$,S(o.row_count.toLocaleString()),1)]))),128))])])],64)):(v(),h("div",G$,"Loading..."))]))}},Q$=ye(X$,[["__scopeId","data-v-d5945aff"]]),Z$={class:"system-health"},ek={class:"health-header"},tk=["disabled"],sk={key:0,class:"empty-state"},nk={key:1,class:"health-rows"},ok={class:"health-row"},ak={class:"health-value"},rk={class:"health-row"},lk={class:"health-value"},ik={class:"health-row"},ck={class:"health-value"},uk={class:"health-row"},dk={class:"health-value"},fk={class:"health-row"},mk={class:"health-value"},pk={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Jr();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(v(),h("div",Z$,[c("div",ek,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},S(e.refreshing?"Refreshing...":"Refresh"),9,tk)]),e.health?(v(),h("div",nk,[c("div",ok,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",ak,"Up "+S(P(t)(e.health.uptime_seconds)),1)]),c("div",rk,[c("span",{class:de(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",lk,S(e.health.database_writable?"Writable":"Error"),1)]),c("div",ik,[c("span",{class:de(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",ck,S(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",uk,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",dk,S(e.health.disk_available_gb)+" GB / "+S(e.health.disk_total_gb)+" GB available",1)]),c("div",fk,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",mk,"v"+S(e.health.api_version),1)])])):(v(),h("div",sk,"Loading..."))]))}},vk=ye(pk,[["__scopeId","data-v-0d4e96d5"]]),hk={class:"admin-lobby"},gk={class:"admin-header"},yk={key:0,class:"admin-subtitle"},bk={key:0,class:"loading-state"},_k={key:1,class:"error-state"},wk={class:"announcement-section"},Ck={class:"announcement-info"},Sk=["innerHTML"],$k={key:0,class:"announcement-expires"},kk={key:1,class:"announcement-expires"},xk={class:"announcement-actions"},Ak=["disabled"],Nk={key:1,class:"announcement-form"},Tk={class:"form-row"},Ek=["disabled"],Ok={class:"content-grid"},Rk={class:"name-correction-section"},Ik={class:"search-row"},Pk=["disabled"],Dk={key:0,class:"search-results"},Lk=["onClick"],Bk={class:"result-name"},Uk={class:"result-email"},Mk={key:0,class:"corrected-badge"},Fk={key:1,class:"no-results"},jk={key:2,class:"edit-form"},Hk={class:"edit-row"},Wk={class:"edit-field"},Vk={class:"edit-field"},Kk=["disabled"],Gk={key:0,class:"save-feedback success"},zk={key:1,class:"save-feedback error"},Jk={__name:"AdminLobby",emits:["back"],setup(e){const t=Jr(),s=Vr(),n=E(!1),o=E(""),a=E("info"),r=E(""),i=E(!1),l=E(!1),u=E(!1);function d(){const D=s.announcement.value;if(D){if(o.value=D.message,a.value=D.type,D.expires_at){const V=new Date(D.expires_at);r.value=new Date(V.getTime()-V.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";u.value=!0}}function f(){u.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const D=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,D),o.value="",a.value="info",r.value="",u.value=!1}catch(D){console.error("Failed to publish announcement:",D)}finally{i.value=!1}}}async function m(){l.value=!0;try{await s.clearAnnouncement()}catch(D){console.error("Failed to clear announcement:",D)}finally{l.value=!1}}function g(D){return D?new Date(D).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function N(D){return D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(G,K)=>{const oe=y[K.toLowerCase()];return oe?`<span class="ann-circle" style="background:${oe.bg};color:${oe.fg}"></span>`:G})}const $="https://api.bridge-classroom.com/api",w="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_=E(""),R=E([]),q=E(!1),Q=E(!1),L=E(null),Y=E(""),J=E(""),fe=E(!1),me=E(!1),ce=E("");async function _e(){if(_.value.trim()){Q.value=!0,q.value=!1,R.value=[],L.value=null,me.value=!1,ce.value="";try{const D=await fetch(`${$}/admin/users/search?q=${encodeURIComponent(_.value.trim())}`,{headers:{"x-api-key":w}});if(!D.ok)throw new Error(`Search failed: ${D.status}`);const V=await D.json();R.value=V.users||[]}catch(D){console.error("User search failed:",D)}finally{Q.value=!1,q.value=!0}}}function we(D){L.value=D,Y.value=D.first_name,J.value=D.last_name,me.value=!1,ce.value=""}async function ne(){if(!(!L.value||!Y.value.trim()||!J.value.trim())){fe.value=!0,me.value=!1,ce.value="";try{const D=await fetch(`${$}/admin/users/${encodeURIComponent(L.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":w},body:JSON.stringify({first_name:Y.value.trim(),last_name:J.value.trim()})});if(!D.ok)throw new Error(`Save failed: ${D.status}`);const V=await D.json();V.success&&(me.value=!0,L.value.first_name=V.user.first_name,L.value.last_name=V.user.last_name,L.value.name_corrected_at=V.user.name_corrected_at)}catch(D){ce.value=D.message}finally{fe.value=!1}}}async function re(){await Promise.all([t.loadStats(),t.loadHealth()])}async function X(){n.value=!0,await t.refreshAll(),n.value=!1}return _t(re),(D,V)=>(v(),h("div",hk,[c("div",gk,[c("button",{class:"back-btn",onClick:V[0]||(V[0]=G=>D.$emit("back"))}," Back to Dashboard"),V[7]||(V[7]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),P(t).stats.value?(v(),h("p",yk,S(P(t).stats.value.total_observations.toLocaleString())+" total observations across "+S(P(t).stats.value.total_users)+" users ",1)):U("",!0)]),P(t).loading.value&&!P(t).stats.value?(v(),h("div",bk,[...V[8]||(V[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):P(t).error.value?(v(),h("div",_k,[c("p",null,S(P(t).error.value),1),c("button",{class:"retry-btn",onClick:re},"Retry")])):P(t).stats.value?(v(),h(Z,{key:2},[c("div",wk,[V[10]||(V[10]=c("h3",{class:"section-title"},"Site Announcement",-1)),P(s).announcement.value&&!u.value?(v(),h("div",{key:0,class:de(["current-announcement",P(s).announcement.value.type])},[c("div",Ck,[c("span",{class:de(["announcement-type-badge",P(s).announcement.value.type])},S(P(s).announcement.value.type),3),c("span",{class:"announcement-message",innerHTML:N(P(s).announcement.value.message)},null,8,Sk),P(s).announcement.value.expires_at?(v(),h("span",$k," Expires: "+S(g(P(s).announcement.value.expires_at)),1)):(v(),h("span",kk,"No expiration"))]),c("div",xk,[c("button",{class:"edit-btn",onClick:d},"Edit"),c("button",{class:"clear-btn",onClick:m,disabled:l.value},S(l.value?"Clearing...":"Clear"),9,Ak)])],2)):u.value||!P(s).announcement.value?(v(),h("div",Nk,[Re(c("input",{"onUpdate:modelValue":V[1]||(V[1]=G=>o.value=G),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Po(p,["enter"])},null,544),[[mt,o.value]]),c("div",Tk,[Re(c("select",{"onUpdate:modelValue":V[2]||(V[2]=G=>a.value=G),class:"type-select"},[...V[9]||(V[9]=[c("option",{value:"info"},"Info",-1),c("option",{value:"warning"},"Warning",-1),c("option",{value:"urgent"},"Urgent",-1)])],512),[[Bn,a.value]]),Re(c("input",{"onUpdate:modelValue":V[3]||(V[3]=G=>r.value=G),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[mt,r.value]]),u.value?(v(),h("button",{key:0,class:"cancel-btn",onClick:f},"Cancel")):U("",!0),c("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},S(i.value?"Publishing...":u.value?"Update":"Publish"),9,Ek)])])):U("",!0)]),he(P$,{stats:P(t).stats.value},null,8,["stats"]),c("div",Ok,[he(V$,{lessons:P(t).popularLessons.value},null,8,["lessons"]),he(Q$,{database:P(t).database.value},null,8,["database"])]),he(vk,{health:P(t).health.value,refreshing:n.value,onRefresh:X},null,8,["health","refreshing"]),c("div",Rk,[V[13]||(V[13]=c("h3",{class:"section-title"},"Correct User Name",-1)),c("div",Ik,[Re(c("input",{"onUpdate:modelValue":V[4]||(V[4]=G=>_.value=G),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Po(_e,["enter"])},null,544),[[mt,_.value]]),c("button",{class:"search-btn",onClick:_e,disabled:Q.value||!_.value.trim()},S(Q.value?"Searching...":"Search"),9,Pk)]),R.value.length?(v(),h("div",Dk,[(v(!0),h(Z,null,ie(R.value,G=>(v(),h("div",{key:G.id,class:de(["search-result-item",{selected:L.value&&L.value.id===G.id}]),onClick:K=>we(G)},[c("span",Bk,S(G.first_name)+" "+S(G.last_name),1),c("span",Uk,S(G.email),1),G.name_corrected_at?(v(),h("span",Mk,"corrected")):U("",!0)],10,Lk))),128))])):U("",!0),q.value&&!R.value.length?(v(),h("div",Fk,' No users found for "'+S(_.value)+'" ',1)):U("",!0),L.value?(v(),h("div",jk,[c("div",Hk,[c("div",Wk,[V[11]||(V[11]=c("label",null,"First Name",-1)),Re(c("input",{"onUpdate:modelValue":V[5]||(V[5]=G=>Y.value=G),type:"text",class:"edit-input"},null,512),[[mt,Y.value]])]),c("div",Vk,[V[12]||(V[12]=c("label",null,"Last Name",-1)),Re(c("input",{"onUpdate:modelValue":V[6]||(V[6]=G=>J.value=G),type:"text",class:"edit-input"},null,512),[[mt,J.value]])]),c("button",{class:"save-btn",onClick:ne,disabled:fe.value||!Y.value.trim()||!J.value.trim()},S(fe.value?"Saving...":"Save"),9,Kk)]),me.value?(v(),h("p",Gk,"Name corrected successfully.")):U("",!0),ce.value?(v(),h("p",zk,S(ce.value),1)):U("",!0)])):U("",!0)])],64)):U("",!0)]))}},Yk=ye(Jk,[["__scopeId","data-v-5a6964cf"]]),qk={class:"lobby-view"},Xk={__name:"LobbyView",emits:["select-collection","show-become-teacher","load-file"],setup(e){const t=Fe(),s=ia(),n=E(!1),o=T(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=T(()=>s.studentAssignments.value.length>0),r=T(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return _t(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,l)=>(v(),h("div",qk,[n.value?(v(),Ue(Yk,{key:0,onBack:l[0]||(l[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(v(),Ue(b$,{key:1,"is-admin":o.value==="admin",onSelectCollection:l[1]||(l[1]=u=>i.$emit("select-collection",u)),onShowAdmin:l[2]||(l[2]=u=>n.value=!0),onLoadFile:l[3]||(l[3]=u=>i.$emit("load-file",u))},null,8,["is-admin"])):a.value||r.value?(v(),Ue(wC,{key:2,onSelectCollection:l[4]||(l[4]=u=>i.$emit("select-collection",u)),onLoadFile:l[5]||(l[5]=u=>i.$emit("load-file",u))})):(v(),Ue(oC,{key:3,onSelectCollection:l[6]||(l[6]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:l[7]||(l[7]=u=>i.$emit("show-become-teacher")),onLoadFile:l[8]||(l[8]=u=>i.$emit("load-file",u))}))]))}},Qk=ye(Xk,[["__scopeId","data-v-61fd42da"]]),Zk={class:"modal-content"},ex={key:0,class:"step step-overview"},tx={class:"step-actions"},sx={key:1,class:"step step-agreement"},nx={class:"agreement-checkbox"},ox={class:"step-actions"},ax=["disabled"],rx={key:0,class:"error-text"},lx={key:2,class:"step step-confirmation"},ix={class:"step-actions"},cx={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Fe(),o=E(1),a=E(!1),r=E(!1),i=E(null);async function l(){const u=n.currentUser.value;if(u){r.value=!0,i.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){i.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:m}=await Bp();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:m,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(d){console.error("Teacher activation failed:",d),i.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(u,d)=>(v(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Lt(f=>u.$emit("close"),["self"]))},[c("div",Zk,[o.value===1?(v(),h("div",ex,[d[6]||(d[6]=Oo('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",tx,[c("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(v(),h("div",sx,[d[8]||(d[8]=Oo('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",nx,[Re(c("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>a.value=f)},null,512),[[Nr,a.value]]),d[7]||(d[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",ox,[c("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:l},S(r.value?"Activating...":"Activate Teacher Account"),9,ax)]),i.value?(v(),h("p",rx,S(i.value),1)):U("",!0)])):o.value===3?(v(),h("div",lx,[d[9]||(d[9]=c("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=c("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",ix,[c("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):U("",!0)])]))}},ux=ye(cx,[["__scopeId","data-v-56e5717d"]]),dx={},fx={class:"page-footer"};function mx(e,t){return v(),h("footer",fx,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const px=ye(dx,[["render",mx],["__scopeId","data-v-1b649814"]]),vx={key:1,class:"app"},hx={class:"app-header"},gx={class:"header-right"},yx=["title"],bx={key:3,class:"stats"},_x={class:"correct"},wx={class:"wrong"},Cx={class:"user-avatar-group"},Sx=["title"],$x=["title"],kx={class:"app-main"},xx={key:3,class:"collection-view"},Ax={key:4,class:"practice-layout"},Nx={class:"practice-left"},Tx={class:"practice-right"},Ex={key:1,class:"commentary-panel"},Ox=["innerHTML"],Rx=["innerHTML"],Ix=["innerHTML"],Px=["innerHTML"],Dx={class:"commentary-controls"},Lx={key:0,class:"bidding-box-wrapper"},Bx={key:1,class:"card-choice-prompt"},Ux=["innerHTML"],Mx={key:3,class:"completion-controls"},Fx={key:0,class:"registration-toast"},jx={__name:"MainLayout",setup(e){const t=gp(),s=oo(),n=Fe(),o=aa(),a=pu(),r=ao(),i=Vr(),l=xv(),u=E(!1),d=E(!1),f=E(!1),p=E(!1),m=E(null),g=E(""),y=E(null),N=E(null),$=E(null),w=E(!1),_=E(null),R=E(null),q=E(!1),Q=E(!1),L=E(null);function Y(b,x=".current"){if(!b)return;const O=b.querySelector(x);O&&(b.scrollTop=O.offsetTop-b.offsetTop)}ft(()=>l.currentStepIndex.value,()=>{Kn(()=>{Y(y.value,".narrative-text.current")})}),ft(()=>l.isComplete.value,b=>{b&&Kn(()=>{Y(y.value,".narrative-text.current")})});const J=T(()=>n.isAuthenticated.value),fe=T(()=>{const b=n.currentUser.value;return b?`${b.firstName} ${b.lastName}`:""}),me=T(()=>{const b=n.currentUser.value;return b?`${b.firstName.charAt(0)}${b.lastName.charAt(0)}`.toUpperCase():"?"}),ce=T(()=>{const b=n.currentUser.value;return(b==null?void 0:b.role)||"student"}),_e=T(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let we=null;_t(()=>{i.loadAnnouncement(),we=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),$r(()=>{we&&clearInterval(we)}),_t(async()=>{s.initializeFromUrl(),n.initialize();const b=new URLSearchParams(window.location.search);b.get("recover")&&b.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const x=s.getCollectionFromUrl(),O=s.getLessonFromUrl();x&&(N.value=x,O&&await A(x,O)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),ps().initialize(),await r.checkTeacherStatus())});async function ne(b){console.log("User ready:",b.firstName,b.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),Q.value=!0,setTimeout(()=>{Q.value=!1},4e3)),await a.initialize(),ps().initialize(),await r.checkTeacherStatus();const O=sessionStorage.getItem("pendingJoinCode");if(O){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:O}});return}}function re(){ps().reset(),Br().clearCache(),ys().reset(),r.reset(),n.currentUserId.value=null,u.value=!1,p.value=!1,m.value=null}async function X(){w.value=!1,await r.checkTeacherStatus()}const D=E([]),V=E(0),G=T(()=>D.value[V.value]||null),K=T(()=>{var B;const b=z(N.value),x=b!=null&&b.name?`${b.name} - `:"";if((B=$.value)!=null&&B.name)return x+$.value.name;if(!G.value)return"";const O=G.value.subfolder||G.value.category||"";return O?x+O:""});ft(V,()=>{G.value&&(l.loadDeal(G.value),s.setDealInUrl(G.value.boardNumber))},{flush:"sync"}),ft(()=>l.observationStore.pendingCount.value,(b,x)=>{b>x&&a.triggerSync()}),ft(()=>l.isComplete.value,b=>{b&&(_.value=null)});async function oe(b){const x=b.target.files[0];if(x)try{const O=await x.text(),B=Ca(O);if(B.length>0){const W=x.name.replace(/\.pbn$/i,""),ee=B.map(ue=>({...ue,subfolder:ue.subfolder||W,category:ue.category||W}));D.value=ee,V.value=0,l.loadDeal(ee[0]),l.resetStats(),Ps().saveLessonBoardNumbers(W,ee.map(ue=>ue.boardNumber)),$.value={id:W,name:W,category:W}}else alert("No deals found in the PBN file")}catch(O){console.error("Error loading PBN file:",O),alert("Error loading PBN file: "+O.message)}}function Ie({subfolder:b,name:x,category:O,content:B}){const W=Ca(B);if(W.length>0){const ee=W.map(ue=>({...ue,subfolder:ue.subfolder||b,category:ue.category||O}));D.value=ee,V.value=0,l.loadDeal(ee[0]),l.resetStats(),Ps().saveLessonBoardNumbers(b,ee.map(ue=>ue.boardNumber)),$.value={id:b,name:x,category:O},s.setLessonInUrl(b),q.value=!1,H()}else alert("No deals found in the lesson file")}const We=T(()=>l.boardState.correctCount),pt=T(()=>l.boardState.wrongCount);function et(b){!l.makeBid(b)&&G.value&&(_.value=G.value.boardNumber)}function j({seat:b,suit:x,rank:O}){!l.makeCardChoice(x,O)&&G.value&&(_.value=G.value.boardNumber)}function ae(){l.clearCardFeedback(),l.goBack()}function se(){V.value<D.value.length-1&&(_.value=null,V.value++,l.loadDeal(D.value[V.value]))}function le(b){b>=0&&b<D.value.length&&(_.value=null,V.value=b,l.loadDeal(D.value[b]))}async function be({subfolder:b,dealNumber:x}){var O;if(((O=$.value)==null?void 0:O.id)===b&&D.value.length>0){const B=D.value.findIndex(W=>W.boardNumber===x);if(B>=0){le(B);return}}for(const B of s.COLLECTIONS)try{const W=b.includes("/")?b.split("/").pop():b,ee=`${B.baseUrl}/${W}.pbn`,pe=await fetch(ee);if(!pe.ok)continue;const ue=await pe.text();N.value=B.id,s.setCollectionInUrl(B.id),Ie({subfolder:b,name:b,category:"",content:ue});const Pe=D.value.findIndex(Ee=>Ee.boardNumber===x);Pe>=0&&le(Pe);return}catch{}}function C(b){f.value=!1,p.value=!1,m.value=null,be(b)}function k(b,x){p.value=!1,m.value=null,be({subfolder:b,dealNumber:x||1})}function I(){$.value=null,s.setLessonInUrl(null),D.value=[],V.value=0,l.resetStats(),q.value=!1,R.value=null,p.value=!1,m.value=null}function M(){N.value=null,$.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),D.value=[],V.value=0,l.resetStats(),q.value=!1,R.value=null,p.value=!1,m.value=null}async function H(){if(R.value=null,!N.value||!$.value)return;const b=z(N.value);if(!b)return;const x=$.value.id,O=x.includes("/")?x.split("/").pop():x,B=`${b.baseUrl}/${O}_Intro.pdf`;try{(await fetch(B,{method:"HEAD"})).ok&&(R.value=B)}catch{}}function F(b){window.innerWidth<600?window.open(b,"_blank"):(L.value=b,q.value=!0)}function te(b){N.value=b,s.setCollectionInUrl(b)}function z(b){return s.COLLECTIONS.find(x=>x.id===b)}async function A(b,x){var B;const O=z(b);if(!O)return console.error("Collection not found:",b),!1;try{const W=await fetch(O.tocUrl);if(!W.ok)throw new Error(`Failed to load TOC: ${W.statusText}`);const ee=await W.json();let pe=null,ue=null;for(const wt of ee.categories||[]){const De=(B=wt.lessons)==null?void 0:B.find(Ge=>Ge.id===x);if(De){pe=De,ue=wt;break}}if(!pe)return console.error("Lesson not found in TOC:",x),!1;const Pe=x.includes("/")?x.split("/").pop():x,Ee=`${O.baseUrl}/${Pe}.pbn`,Ye=await fetch(Ee);if(!Ye.ok)throw new Error(`Failed to load lesson: ${Ye.statusText}`);const at=await Ye.text(),Et=Ca(at);if(Et.length>0){const wt=Et.map(Ot=>({...Ot,subfolder:Ot.subfolder||x,category:Ot.category||ue.name}));D.value=wt;const De=s.getDealFromUrl(),Ge=De?wt.findIndex(Ot=>Ot.boardNumber===De):-1;return V.value=Ge>=0?Ge:0,l.loadDeal(wt[V.value]),l.resetStats(),$.value={id:x,name:pe.name,category:ue.name},H(),!0}return!1}catch(W){return console.error("Error loading lesson from URL:",W),!1}}return(b,x)=>{var O,B,W,ee,pe,ue,Pe,Ee,Ye,at,Et,wt,De,Ge,Ot,vn;return J.value?(v(),h("div",vx,[c("header",hx,[c("h1",null,S(D.value.length?K.value:_e.value),1),c("div",gx,[he(Zb),c("button",{class:"progress-btn",onClick:x[0]||(x[0]=Ae=>d.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:x[1]||(x[1]=Ae=>f.value=!0),title:"View Accomplishments"}," Accomplishments "),P(r).isTeacher.value?(v(),h("button",{key:0,class:"teacher-btn",onClick:x[2]||(x[2]=Ae=>{p.value=!0,m.value=null,g.value=""}),title:"View Students"}," Students ")):U("",!0),D.value.length&&N.value?(v(),h("button",{key:1,class:"lessons-btn",onClick:I,title:"Back to "+((O=z(N.value))==null?void 0:O.name)},S((B=z(N.value))==null?void 0:B.name),9,yx)):U("",!0),N.value?(v(),h("button",{key:2,class:"lobby-btn",onClick:M,title:"Return to lobby"}," Lobby ")):U("",!0),We.value+pt.value>0?(v(),h("div",bx,[c("span",_x,S(We.value),1),c("span",wx,S(pt.value),1)])):U("",!0),c("div",Cx,[ce.value!=="student"?(v(),h("button",{key:0,class:de(["role-badge","role-"+ce.value]),onClick:M,title:"Return to "+ce.value+" lobby"},S(ce.value),11,Sx)):U("",!0),c("button",{class:"user-btn",onClick:x[3]||(x[3]=Ae=>u.value=!0),title:fe.value},S(me.value),9,$x)])])]),c("main",kx,[he(Hb),he(Mb),p.value&&!m.value?(v(),Ue(L0,{key:0,onClose:x[4]||(x[4]=Ae=>p.value=!1),onSelectStudent:x[5]||(x[5]=(Ae,hn)=>{m.value=Ae,g.value=hn})})):p.value&&m.value?(v(),Ue(dw,{key:1,studentId:m.value,studentName:g.value,onBack:x[6]||(x[6]=Ae=>m.value=null),onNavigateToLesson:k},null,8,["studentId","studentName"])):!D.value.length&&!N.value?(v(),Ue(Qk,{key:2,onSelectCollection:te,onShowBecomeTeacher:x[7]||(x[7]=Ae=>w.value=!0),onLoadFile:oe})):!D.value.length&&N.value?(v(),h("div",xx,[c("h2",null,S(((W=z(N.value))==null?void 0:W.name)||N.value),1),x[17]||(x[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),he(Uw,{visible:!0,inline:!0,collection:z(N.value),onLoad:Ie},null,8,["collection"])])):(v(),h("div",Ax,[c("div",Nx,[D.value.length>1?(v(),Ue(bu,{key:0,boardNumbers:D.value.map(Ae=>Ae.boardNumber),lessonSubfolder:((ee=G.value)==null?void 0:ee.subfolder)||((pe=G.value)==null?void 0:pe.category)||"",currentIndex:V.value,forceRedBoard:_.value,introUrl:R.value,onGoto:le,onOpenIntro:F},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):U("",!0),he(Mg,{boardNumber:(ue=G.value)==null?void 0:ue.boardNumber,dealer:(Pe=G.value)==null?void 0:Pe.dealer,vulnerable:(Ee=G.value)==null?void 0:Ee.vulnerable,contract:(Ye=G.value)==null?void 0:Ye.contract,declarer:(at=G.value)==null?void 0:at.declarer,showContract:P(l).auctionState.auctionComplete||P(l).showOpeningLead.value||P(l).hasSteps.value&&!P(l).hasBidSteps.value,openingLead:P(l).showOpeningLead.value?(Et=G.value)==null?void 0:Et.openingLead:"",totalDeals:D.value.length,currentIndex:V.value,dealBoardNumbers:D.value.map(Ae=>Ae.boardNumber),onGoto:le},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),he(ng,{hands:P(l).hands.value,hiddenSeats:P(l).hiddenSeats.value,showHcp:P(l).showHcp.value,compact:!0,clickableSeat:P(l).hasCardChoice.value?P(l).studentSeat.value:null,playedCards:P(l).showcardsPlayedCards.value,onCardClick:j},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",Tx,[P(l).showAuctionTable.value?(v(),Ue(wg,{key:0,bids:P(l).hasBidSteps.value?P(l).auctionState.displayedBids:((wt=G.value)==null?void 0:wt.auction)||[],dealer:((De=G.value)==null?void 0:De.dealer)||"N",currentBidIndex:P(l).hasBidSteps.value?P(l).auctionState.currentBidIndex:-1,wrongBidIndex:P(l).auctionState.wrongBidIndex,correctBidIndex:P(l).auctionState.correctBidIndex,showTurnIndicator:P(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):U("",!0),he(ni,{visible:!!P(l).auctionState.wrongBid,type:"wrong",wrongBid:P(l).auctionState.wrongBid,correctBid:P(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),he(ni,{visible:!!P(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:P(l).cardChoiceState.wrongCard,correctCardCode:P(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),P(l).hasSteps.value?(v(),h("div",Ex,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:y},[(v(!0),h(Z,null,ie(P(l).steps.value.slice(0,P(l).currentStepIndex.value),(Ae,hn)=>(v(),h(Z,{key:"prev-"+hn},[hn>=P(l).commentaryStartIndex.value?(v(),h(Z,{key:0},[c("span",{class:"narrative-text previous",innerHTML:P(Ws)(P(Cn)(Ae.text))},null,8,Ox),Ae.type==="bid"&&Ae.explanationText?(v(),h("span",{key:0,class:de(["narrative-text",hn===P(l).currentStepIndex.value-1&&P(l).isBidStep.value&&!P(l).bidAnswered.value?"current":"previous"]),innerHTML:P(Ws)(P(Cn)(Ae.explanationText))},null,10,Rx)):U("",!0)],64)):U("",!0)],64))),128)),P(l).currentStep.value?(v(),h("span",{key:0,class:"narrative-text current",innerHTML:P(Ws)(P(Cn)(P(l).currentStep.value.text))},null,8,Ix)):U("",!0),P(l).bidAnswered.value&&((Ge=P(l).currentStep.value)!=null&&Ge.explanationText)?(v(),h("span",{key:1,class:"narrative-text current",innerHTML:P(Ws)(P(Cn)(P(l).currentStep.value.explanationText))},null,8,Px)):U("",!0)],512),c("div",Dx,[P(l).hasBidPrompt.value?(v(),h("div",Lx,[he(vg,{lastBid:P(l).lastContractBid.value,canDouble:P(l).canDouble.value,canRedouble:P(l).canRedouble.value,onBid:et},null,8,["lastBid","canDouble","canRedouble"])])):P(l).hasCardChoice.value?(v(),h("div",Bx," Click on the card you would choose ")):U("",!0),P(l).canGoBack.value?(v(),h("button",{key:2,class:"instruction-btn secondary",onClick:ae},"  Back ")):U("",!0),!P(l).isComplete.value&&(P(l).bidAnswered.value||!P(l).hasBidPrompt.value&&!P(l).hasCardChoice.value&&P(l).currentStep.value&&P(l).currentStep.value.type!=="end")?(v(),h("button",{key:3,class:"instruction-btn primary",onClick:x[8]||(x[8]=Ae=>P(l).advance())},S(((Ot=P(l).currentStep.value)==null?void 0:Ot.type)==="rotate"?"Rotate":"Next")+"  ",1)):U("",!0),P(l).isComplete.value&&V.value<D.value.length-1?(v(),h("button",{key:4,class:"next-deal-btn",onClick:se}," Next Deal  ")):U("",!0)])])):(vn=G.value)!=null&&vn.commentary?(v(),h("div",{key:2,class:"display-commentary",innerHTML:P(Ws)(P(Cn)(P(Np)(G.value.commentary)))},null,8,Ux)):U("",!0),!P(l).hasSteps.value&&P(l).isComplete.value&&V.value<D.value.length-1?(v(),h("div",Mx,[c("button",{class:"next-deal-btn",onClick:se}," Next Deal  ")])):U("",!0)])]))]),he(Nb,{visible:u.value,onClose:x[9]||(x[9]=Ae=>u.value=!1),onSwitchUser:re,onLogout:re,onBecomeTeacher:x[10]||(x[10]=Ae=>w.value=!0)},null,8,["visible"]),Q.value?(v(),h("div",Fx," Account created  your data is encrypted and linked to your email for recovery. ")):U("",!0),d.value?(v(),h("div",{key:1,class:"modal-overlay",onClick:x[12]||(x[12]=Lt(Ae=>d.value=!1,["self"]))},[he(b1,{onClose:x[11]||(x[11]=Ae=>d.value=!1)})])):U("",!0),f.value?(v(),h("div",{key:2,class:"modal-overlay",onClick:x[14]||(x[14]=Lt(Ae=>f.value=!1,["self"]))},[he(a0,{onClose:x[13]||(x[13]=Ae=>f.value=!1),onNavigateToDeal:C})])):U("",!0),he(Gw,{visible:q.value,url:L.value||"",onClose:x[15]||(x[15]=Ae=>q.value=!1)},null,8,["visible","url"]),w.value?(v(),Ue(ux,{key:3,onClose:x[16]||(x[16]=Ae=>w.value=!1),onActivated:X})):U("",!0),he(px)])):(v(),Ue(Gy,{key:0,onUserReady:ne}))}}},Hx=()=>cm(()=>import("./JoinClassroomView-Di9w0c-k.js"),__vite__mapDeps([0,1])),Wx=[{path:"/join/:joinCode",name:"join",component:Hx},{path:"/:pathMatch(.*)*",name:"app",component:jx}],Vx=hp({history:Jm(),routes:Wx});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const Ou=tm(rm);Ou.use(Vx);Ou.mount("#app");export{ye as _,c as a,he as b,h as c,U as d,$t as e,Oo as f,Fe as g,uo as h,Ud as i,Dc as j,gp as k,v as l,_t as o,E as r,S as t,Kx as u,_d as w};
