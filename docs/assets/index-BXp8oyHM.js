const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-nDUtClqb.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _r(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ie={},sn=[],Kt=()=>{},ki=()=>!1,sa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),wr=e=>e.startsWith("onUpdate:"),at=Object.assign,Sr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},qu=Object.prototype.hasOwnProperty,Ne=(e,t)=>qu.call(e,t),ve=Array.isArray,nn=e=>uo(e)==="[object Map]",bn=e=>uo(e)==="[object Set]",cl=e=>uo(e)==="[object Date]",we=e=>typeof e=="function",ze=e=>typeof e=="string",Bt=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",xi=e=>(Re(e)||we(e))&&we(e.then)&&we(e.catch),Ai=Object.prototype.toString,uo=e=>Ai.call(e),Xu=e=>uo(e).slice(8,-1),Ti=e=>uo(e)==="[object Object]",Cr=e=>ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ln=_r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),na=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Qu=/-\w/g,It=na(e=>e.replace(Qu,t=>t.slice(1).toUpperCase())),Zu=/\B([A-Z])/g,ws=na(e=>e.replace(Zu,"-$1").toLowerCase()),oa=na(e=>e.charAt(0).toUpperCase()+e.slice(1)),ba=na(e=>e?`on${oa(e)}`:""),vs=(e,t)=>!Object.is(e,t),No=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ni=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},aa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ul;const ra=()=>ul||(ul=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function st(e){if(ve(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=ze(n)?nd(n):st(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(ze(e)||Re(e))return e}const ed=/;(?![^(]*\))/g,td=/:([^]+)/,sd=/\/\*[^]*?\*\//g;function nd(e){const t={};return e.replace(sd,"").split(ed).forEach(s=>{if(s){const n=s.split(td);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(ze(e))t=e;else if(ve(e))for(let s=0;s<e.length;s++){const n=ie(e[s]);n&&(t+=n+" ")}else if(Re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const od="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ad=_r(od);function Ei(e){return!!e||e===""}function rd(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Ms(e[n],t[n]);return s}function Ms(e,t){if(e===t)return!0;let s=cl(e),n=cl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Bt(e),n=Bt(t),s||n)return e===t;if(s=ve(e),n=ve(t),s||n)return s&&n?rd(e,t):!1;if(s=Re(e),n=Re(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const i=e.hasOwnProperty(r),u=t.hasOwnProperty(r);if(i&&!u||!i&&u||!Ms(e[r],t[r]))return!1}}return String(e)===String(t)}function $r(e,t){return e.findIndex(s=>Ms(s,t))}const Oi=e=>!!(e&&e.__v_isRef===!0),b=e=>ze(e)?e:e==null?"":ve(e)||Re(e)&&(e.toString===Ai||!we(e.toString))?Oi(e)?b(e.value):JSON.stringify(e,Ii,2):String(e),Ii=(e,t)=>Oi(t)?Ii(e,t.value):nn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[_a(n,a)+" =>"]=o,s),{})}:bn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>_a(s))}:Bt(t)?_a(t):Re(t)&&!ve(t)&&!Ti(t)?String(t):t,_a=(e,t="")=>{var s;return Bt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bt;class ld{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bt,!t&&bt&&(this.index=(bt.scopes||(bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=bt;try{return bt=this,t()}finally{bt=s}}}on(){++this._on===1&&(this.prevScope=bt,bt=this)}off(){this._on>0&&--this._on===0&&(bt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function id(){return bt}let Pe;const wa=new WeakSet;class Ri{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bt&&bt.active&&bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wa.has(this)&&(wa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Pi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dl(this),Li(this);const t=Pe,s=Pt;Pe=this,Pt=!0;try{return this.fn()}finally{Bi(this),Pe=t,Pt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ar(t);this.deps=this.depsTail=void 0,dl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ha(this)&&this.run()}get dirty(){return Ha(this)}}let Di=0,Bn,Mn;function Pi(e,t=!1){if(e.flags|=8,t){e.next=Mn,Mn=e;return}e.next=Bn,Bn=e}function kr(){Di++}function xr(){if(--Di>0)return;if(Mn){let t=Mn;for(Mn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Bn;){let t=Bn;for(Bn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Li(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Ar(n),cd(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Ha(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Mi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Mi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===qn)||(e.globalVersion=qn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ha(e))))return;e.flags|=2;const t=e.dep,s=Pe,n=Pt;Pe=e,Pt=!0;try{Li(e);const o=e.fn(e._value);(t.version===0||vs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Pe=s,Pt=n,Bi(e),e.flags&=-3}}function Ar(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)Ar(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function cd(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Pt=!0;const Ui=[];function ns(){Ui.push(Pt),Pt=!1}function os(){const e=Ui.pop();Pt=e===void 0?!0:e}function dl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Pe;Pe=void 0;try{t()}finally{Pe=s}}}let qn=0;class ud{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pe||!Pt||Pe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Pe)s=this.activeLink=new ud(Pe,this),Pe.deps?(s.prevDep=Pe.depsTail,Pe.depsTail.nextDep=s,Pe.depsTail=s):Pe.deps=Pe.depsTail=s,Fi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Pe.depsTail,s.nextDep=void 0,Pe.depsTail.nextDep=s,Pe.depsTail=s,Pe.deps===s&&(Pe.deps=n)}return s}trigger(t){this.version++,qn++,this.notify(t)}notify(t){kr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{xr()}}}function Fi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Fi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Wa=new WeakMap,Ps=Symbol(""),Va=Symbol(""),Xn=Symbol("");function it(e,t,s){if(Pt&&Pe){let n=Wa.get(e);n||Wa.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Tr),o.map=n,o.key=s),o.track()}}function Qt(e,t,s,n,o,a){const r=Wa.get(e);if(!r){qn++;return}const i=u=>{u&&u.trigger()};if(kr(),t==="clear")r.forEach(i);else{const u=ve(e),c=u&&Cr(s);if(u&&s==="length"){const f=Number(n);r.forEach((d,p)=>{(p==="length"||p===Xn||!Bt(p)&&p>=f)&&i(d)})}else switch((s!==void 0||r.has(void 0))&&i(r.get(s)),c&&i(r.get(Xn)),t){case"add":u?c&&i(r.get("length")):(i(r.get(Ps)),nn(e)&&i(r.get(Va)));break;case"delete":u||(i(r.get(Ps)),nn(e)&&i(r.get(Va)));break;case"set":nn(e)&&i(r.get(Ps));break}}xr()}function Ws(e){const t=Te(e);return t===e?t:(it(t,"iterate",Xn),Et(e)?t:t.map(Mt))}function la(e){return it(e=Te(e),"iterate",Xn),e}function us(e,t){return as(e)?cn(Ls(e)?Mt(t):t):Mt(t)}const dd={__proto__:null,[Symbol.iterator](){return Sa(this,Symbol.iterator,e=>us(this,e))},concat(...e){return Ws(this).concat(...e.map(t=>ve(t)?Ws(t):t))},entries(){return Sa(this,"entries",e=>(e[1]=us(this,e[1]),e))},every(e,t){return Jt(this,"every",e,t,void 0,arguments)},filter(e,t){return Jt(this,"filter",e,t,s=>s.map(n=>us(this,n)),arguments)},find(e,t){return Jt(this,"find",e,t,s=>us(this,s),arguments)},findIndex(e,t){return Jt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Jt(this,"findLast",e,t,s=>us(this,s),arguments)},findLastIndex(e,t){return Jt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Jt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ca(this,"includes",e)},indexOf(...e){return Ca(this,"indexOf",e)},join(e){return Ws(this).join(e)},lastIndexOf(...e){return Ca(this,"lastIndexOf",e)},map(e,t){return Jt(this,"map",e,t,void 0,arguments)},pop(){return $n(this,"pop")},push(...e){return $n(this,"push",e)},reduce(e,...t){return fl(this,"reduce",e,t)},reduceRight(e,...t){return fl(this,"reduceRight",e,t)},shift(){return $n(this,"shift")},some(e,t){return Jt(this,"some",e,t,void 0,arguments)},splice(...e){return $n(this,"splice",e)},toReversed(){return Ws(this).toReversed()},toSorted(e){return Ws(this).toSorted(e)},toSpliced(...e){return Ws(this).toSpliced(...e)},unshift(...e){return $n(this,"unshift",e)},values(){return Sa(this,"values",e=>us(this,e))}};function Sa(e,t,s){const n=la(e),o=n[t]();return n!==e&&!Et(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const fd=Array.prototype;function Jt(e,t,s,n,o,a){const r=la(e),i=r!==e&&!Et(e),u=r[t];if(u!==fd[t]){const d=u.apply(e,a);return i?Mt(d):d}let c=s;r!==e&&(i?c=function(d,p){return s.call(this,us(e,d),p,e)}:s.length>2&&(c=function(d,p){return s.call(this,d,p,e)}));const f=u.call(r,c,n);return i&&o?o(f):f}function fl(e,t,s,n){const o=la(e);let a=s;return o!==e&&(Et(e)?s.length>3&&(a=function(r,i,u){return s.call(this,r,i,u,e)}):a=function(r,i,u){return s.call(this,r,us(e,i),u,e)}),o[t](a,...n)}function Ca(e,t,s){const n=Te(e);it(n,"iterate",Xn);const o=n[t](...s);return(o===-1||o===!1)&&Or(s[0])?(s[0]=Te(s[0]),n[t](...s)):o}function $n(e,t,s=[]){ns(),kr();const n=Te(e)[t].apply(e,s);return xr(),os(),n}const pd=_r("__proto__,__v_isRef,__isVue"),ji=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Bt));function md(e){Bt(e)||(e=String(e));const t=Te(this);return it(t,"has",e),t.hasOwnProperty(e)}class Hi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?$d:Gi:a?Ki:Vi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=ve(t);if(!o){let u;if(r&&(u=dd[s]))return u;if(s==="hasOwnProperty")return md}const i=Reflect.get(t,s,ut(t)?t:n);if((Bt(s)?ji.has(s):pd(s))||(o||it(t,"get",s),a))return i;if(ut(i)){const u=r&&Cr(s)?i:i.value;return o&&Re(u)?Ga(u):u}return Re(i)?o?Ga(i):Gt(i):i}}class Wi extends Hi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=ve(t)&&Cr(s);if(!this._isShallow){const c=as(a);if(!Et(n)&&!as(n)&&(a=Te(a),n=Te(n)),!r&&ut(a)&&!ut(n))return c||(a.value=n),!0}const i=r?Number(s)<t.length:Ne(t,s),u=Reflect.set(t,s,n,ut(t)?t:o);return t===Te(o)&&(i?vs(n,a)&&Qt(t,"set",s,n):Qt(t,"add",s,n)),u}deleteProperty(t,s){const n=Ne(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Qt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Bt(s)||!ji.has(s))&&it(t,"has",s),n}ownKeys(t){return it(t,"iterate",ve(t)?"length":Ps),Reflect.ownKeys(t)}}class vd extends Hi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const hd=new Wi,gd=new vd,yd=new Wi(!0);const Ka=e=>e,_o=e=>Reflect.getPrototypeOf(e);function bd(e,t,s){return function(...n){const o=this.__v_raw,a=Te(o),r=nn(a),i=e==="entries"||e===Symbol.iterator&&r,u=e==="keys"&&r,c=o[e](...n),f=s?Ka:t?cn:Mt;return!t&&it(a,"iterate",u?Va:Ps),at(Object.create(c),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:i?[f(d[0]),f(d[1])]:f(d),done:p}}})}}function wo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function _d(e,t){const s={get(o){const a=this.__v_raw,r=Te(a),i=Te(o);e||(vs(o,i)&&it(r,"get",o),it(r,"get",i));const{has:u}=_o(r),c=t?Ka:e?cn:Mt;if(u.call(r,o))return c(a.get(o));if(u.call(r,i))return c(a.get(i));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&it(Te(o),"iterate",Ps),o.size},has(o){const a=this.__v_raw,r=Te(a),i=Te(o);return e||(vs(o,i)&&it(r,"has",o),it(r,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const r=this,i=r.__v_raw,u=Te(i),c=t?Ka:e?cn:Mt;return!e&&it(u,"iterate",Ps),i.forEach((f,d)=>o.call(a,c(f),c(d),r))}};return at(s,e?{add:wo("add"),set:wo("set"),delete:wo("delete"),clear:wo("clear")}:{add(o){!t&&!Et(o)&&!as(o)&&(o=Te(o));const a=Te(this);return _o(a).has.call(a,o)||(a.add(o),Qt(a,"add",o,o)),this},set(o,a){!t&&!Et(a)&&!as(a)&&(a=Te(a));const r=Te(this),{has:i,get:u}=_o(r);let c=i.call(r,o);c||(o=Te(o),c=i.call(r,o));const f=u.call(r,o);return r.set(o,a),c?vs(a,f)&&Qt(r,"set",o,a):Qt(r,"add",o,a),this},delete(o){const a=Te(this),{has:r,get:i}=_o(a);let u=r.call(a,o);u||(o=Te(o),u=r.call(a,o)),i&&i.call(a,o);const c=a.delete(o);return u&&Qt(a,"delete",o,void 0),c},clear(){const o=Te(this),a=o.size!==0,r=o.clear();return a&&Qt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=bd(o,e,t)}),s}function Nr(e,t){const s=_d(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Ne(s,o)&&o in n?s:n,o,a)}const wd={get:Nr(!1,!1)},Sd={get:Nr(!1,!0)},Cd={get:Nr(!0,!1)};const Vi=new WeakMap,Ki=new WeakMap,Gi=new WeakMap,$d=new WeakMap;function kd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xd(e){return e.__v_skip||!Object.isExtensible(e)?0:kd(Xu(e))}function Gt(e){return as(e)?e:Er(e,!1,hd,wd,Vi)}function zi(e){return Er(e,!1,yd,Sd,Ki)}function Ga(e){return Er(e,!0,gd,Cd,Gi)}function Er(e,t,s,n,o){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=xd(e);if(a===0)return e;const r=o.get(e);if(r)return r;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Ls(e){return as(e)?Ls(e.__v_raw):!!(e&&e.__v_isReactive)}function as(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Or(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function Ad(e){return!Ne(e,"__v_skip")&&Object.isExtensible(e)&&Ni(e,"__v_skip",!0),e}const Mt=e=>Re(e)?Gt(e):e,cn=e=>Re(e)?Ga(e):e;function ut(e){return e?e.__v_isRef===!0:!1}function I(e){return Ji(e,!1)}function Td(e){return Ji(e,!0)}function Ji(e,t){return ut(e)?e:new Nd(e,t)}class Nd{constructor(t,s){this.dep=new Tr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Te(t),this._value=s?t:Mt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Et(t)||as(t);t=n?t:Te(t),vs(t,s)&&(this._rawValue=t,this._value=n?t:Mt(t),this.dep.trigger())}}function M(e){return ut(e)?e.value:e}const Ed={get:(e,t,s)=>t==="__v_raw"?e:M(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ut(o)&&!ut(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Yi(e){return Ls(e)?e:new Proxy(e,Ed)}class Od{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Tr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return Pi(this,!0),!0}get value(){const t=this.dep.track();return Mi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Id(e,t,s=!1){let n,o;return we(e)?n=e:(n=e.get,o=e.set),new Od(n,o,s)}const So={},Bo=new WeakMap;let Is;function Rd(e,t=!1,s=Is){if(s){let n=Bo.get(s);n||Bo.set(s,n=[]),n.push(e)}}function Dd(e,t,s=Ie){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:i,call:u}=s,c=x=>o?x:Et(x)||o===!1||o===0?Zt(x,1):Zt(x);let f,d,p,h,g=!1,y=!1;if(ut(e)?(d=()=>e.value,g=Et(e)):Ls(e)?(d=()=>c(e),g=!0):ve(e)?(y=!0,g=e.some(x=>Ls(x)||Et(x)),d=()=>e.map(x=>{if(ut(x))return x.value;if(Ls(x))return c(x);if(we(x))return u?u(x,2):x()})):we(e)?t?d=u?()=>u(e,2):e:d=()=>{if(p){ns();try{p()}finally{os()}}const x=Is;Is=f;try{return u?u(e,3,[h]):e(h)}finally{Is=x}}:d=Kt,t&&o){const x=d,B=o===!0?1/0:o;d=()=>Zt(x(),B)}const $=id(),S=()=>{f.stop(),$&&$.active&&Sr($.effects,f)};if(a&&t){const x=t;t=(...B)=>{x(...B),S()}}let _=y?new Array(e.length).fill(So):So;const w=x=>{if(!(!(f.flags&1)||!f.dirty&&!x))if(t){const B=f.run();if(o||g||(y?B.some((V,j)=>vs(V,_[j])):vs(B,_))){p&&p();const V=Is;Is=f;try{const j=[B,_===So?void 0:y&&_[0]===So?[]:_,h];_=B,u?u(t,3,j):t(...j)}finally{Is=V}}}else f.run()};return i&&i(w),f=new Ri(d),f.scheduler=r?()=>r(w,!1):w,h=x=>Rd(x,!1,f),p=f.onStop=()=>{const x=Bo.get(f);if(x){if(u)u(x,4);else for(const B of x)B();Bo.delete(f)}},t?n?w(!0):_=f.run():r?r(w.bind(null,!0),!0):f.run(),S.pause=f.pause.bind(f),S.resume=f.resume.bind(f),S.stop=S,S}function Zt(e,t=1/0,s){if(t<=0||!Re(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ut(e))Zt(e.value,t,s);else if(ve(e))for(let n=0;n<e.length;n++)Zt(e[n],t,s);else if(bn(e)||nn(e))e.forEach(n=>{Zt(n,t,s)});else if(Ti(e)){for(const n in e)Zt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Zt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fo(e,t,s,n){try{return n?e(...n):e()}catch(o){ia(o,t,s)}}function zt(e,t,s,n){if(we(e)){const o=fo(e,t,s,n);return o&&xi(o)&&o.catch(a=>{ia(a,t,s)}),o}if(ve(e)){const o=[];for(let a=0;a<e.length;a++)o.push(zt(e[a],t,s,n));return o}}function ia(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ie;if(t){let i=t.parent;const u=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,u,c)===!1)return}i=i.parent}if(a){ns(),fo(a,null,10,[e,u,c]),os();return}}Pd(e,s,o,n,r)}function Pd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const gt=[];let Ht=-1;const on=[];let ds=null,Gs=0;const qi=Promise.resolve();let Mo=null;function Qn(e){const t=Mo||qi;return e?t.then(this?e.bind(this):e):t}function Ld(e){let t=Ht+1,s=gt.length;for(;t<s;){const n=t+s>>>1,o=gt[n],a=Zn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Ir(e){if(!(e.flags&1)){const t=Zn(e),s=gt[gt.length-1];!s||!(e.flags&2)&&t>=Zn(s)?gt.push(e):gt.splice(Ld(t),0,e),e.flags|=1,Xi()}}function Xi(){Mo||(Mo=qi.then(Zi))}function Bd(e){ve(e)?on.push(...e):ds&&e.id===-1?ds.splice(Gs+1,0,e):e.flags&1||(on.push(e),e.flags|=1),Xi()}function pl(e,t,s=Ht+1){for(;s<gt.length;s++){const n=gt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;gt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Qi(e){if(on.length){const t=[...new Set(on)].sort((s,n)=>Zn(s)-Zn(n));if(on.length=0,ds){ds.push(...t);return}for(ds=t,Gs=0;Gs<ds.length;Gs++){const s=ds[Gs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ds=null,Gs=0}}const Zn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Zi(e){try{for(Ht=0;Ht<gt.length;Ht++){const t=gt[Ht];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),fo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ht<gt.length;Ht++){const t=gt[Ht];t&&(t.flags&=-2)}Ht=-1,gt.length=0,Qi(),Mo=null,(gt.length||on.length)&&Zi()}}let ot=null,ec=null;function Uo(e){const t=ot;return ot=e,ec=e&&e.type.__scopeId||null,t}function Md(e,t=ot,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Ho(-1);const a=Uo(t);let r;try{r=e(...o)}finally{Uo(a),n._d&&Ho(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Fe(e,t){if(ot===null)return e;const s=fa(ot),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,i,u=Ie]=t[o];a&&(we(a)&&(a={mounted:a,updated:a}),a.deep&&Zt(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:i,modifiers:u}))}return e}function Cs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const i=o[r];a&&(i.oldValue=a[r].value);let u=i.dir[n];u&&(ns(),zt(u,s,8,[e.el,i,e,t]),os())}}function Eo(e,t){if(ct){let s=ct.provides;const n=ct.parent&&ct.parent.provides;n===s&&(s=ct.provides=Object.create(n)),s[e]=t}}function Lt(e,t,s=!1){const n=jf();if(n||rn){let o=rn?rn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&we(t)?t.call(n&&n.proxy):t}}const Ud=Symbol.for("v-scx"),Fd=()=>Lt(Ud);function _t(e,t,s){return tc(e,t,s)}function tc(e,t,s=Ie){const{immediate:n,deep:o,flush:a,once:r}=s,i=at({},s),u=t&&n||!t&&a!=="post";let c;if(no){if(a==="sync"){const h=Fd();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=Kt,h.resume=Kt,h.pause=Kt,h}}const f=ct;i.call=(h,g,y)=>zt(h,f,g,y);let d=!1;a==="post"?i.scheduler=h=>{vt(h,f&&f.suspense)}:a!=="sync"&&(d=!0,i.scheduler=(h,g)=>{g?h():Ir(h)}),i.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const p=Dd(e,t,i);return no&&(c?c.push(p):u&&p()),p}function jd(e,t,s){const n=this.proxy,o=ze(e)?e.includes(".")?sc(n,e):()=>n[e]:e.bind(n,n);let a;we(t)?a=t:(a=t.handler,s=t);const r=po(this),i=tc(o,a.bind(n),s);return r(),i}function sc(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const nc=Symbol("_vte"),Hd=e=>e.__isTeleport,Un=e=>e&&(e.disabled||e.disabled===""),ml=e=>e&&(e.defer||e.defer===""),vl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,hl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,za=(e,t)=>{const s=e&&e.to;return ze(s)?t?t(s):null:s},oc={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,r,i,u,c){const{mc:f,pc:d,pbc:p,o:{insert:h,querySelector:g,createText:y,createComment:$}}=c,S=Un(t.props);let{shapeFlag:_,children:w,dynamicChildren:x}=t;if(e==null){const B=t.el=y(""),V=t.anchor=y("");h(B,s,n),h(V,s,n);const j=(q,de)=>{_&16&&f(w,q,de,o,a,r,i,u)},Q=()=>{const q=t.target=za(t.props,g),de=ac(q,t,y,h);q&&(r!=="svg"&&vl(q)?r="svg":r!=="mathml"&&hl(q)&&(r="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(q),S||(j(q,de),Oo(t,!1)))};S&&(j(s,V),Oo(t,!0)),ml(t.props)?(t.el.__isMounted=!1,vt(()=>{Q(),delete t.el.__isMounted},a)):Q()}else{if(ml(t.props)&&e.el.__isMounted===!1){vt(()=>{oc.process(e,t,s,n,o,a,r,i,u,c)},a);return}t.el=e.el,t.targetStart=e.targetStart;const B=t.anchor=e.anchor,V=t.target=e.target,j=t.targetAnchor=e.targetAnchor,Q=Un(e.props),q=Q?s:V,de=Q?B:j;if(r==="svg"||vl(V)?r="svg":(r==="mathml"||hl(V))&&(r="mathml"),x?(p(e.dynamicChildren,x,q,o,a,r,i),Mr(e,t,!0)):u||d(e,t,q,de,o,a,r,i,!1),S)Q?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Co(t,s,B,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const pe=t.target=za(t.props,g);pe&&Co(t,pe,null,c,0)}else Q&&Co(t,V,j,c,1);Oo(t,S)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:r,children:i,anchor:u,targetStart:c,targetAnchor:f,target:d,props:p}=e;if(d&&(o(c),o(f)),a&&o(u),r&16){const h=a||!Un(p);for(let g=0;g<i.length;g++){const y=i[g];n(y,t,s,h,!!y.dynamicChildren)}}},move:Co,hydrate:Wd};function Co(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:r,anchor:i,shapeFlag:u,children:c,props:f}=e,d=a===2;if(d&&n(r,t,s),(!d||Un(f))&&u&16)for(let p=0;p<c.length;p++)o(c[p],t,s,2);d&&n(i,t,s)}function Wd(e,t,s,n,o,a,{o:{nextSibling:r,parentNode:i,querySelector:u,insert:c,createText:f}},d){function p(y,$,S,_){$.anchor=d(r(y),$,i(y),s,n,o,a),$.targetStart=S,$.targetAnchor=_}const h=t.target=za(t.props,u),g=Un(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)p(e,t,y,y&&r(y));else{t.anchor=r(e);let $=y;for(;$;){if($&&$.nodeType===8){if($.data==="teleport start anchor")t.targetStart=$;else if($.data==="teleport anchor"){t.targetAnchor=$,h._lpa=t.targetAnchor&&r(t.targetAnchor);break}}$=r($)}t.targetAnchor||ac(h,t,f,c),d(y&&r(y),t,h,s,n,o,a)}Oo(t,g)}else g&&t.shapeFlag&16&&p(e,t,e,r(e));return t.anchor&&r(t.anchor)}const Vd=oc;function Oo(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function ac(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[nc]=a,e&&(n(o,e),n(a,e)),a}const Kd=Symbol("_leaveCb");function Rr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rc(e,t){return we(e)?at({name:e.name},t,{setup:e}):e}function lc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Fo=new WeakMap;function Fn(e,t,s,n,o=!1){if(ve(e)){e.forEach((g,y)=>Fn(g,t&&(ve(t)?t[y]:t),s,n,o));return}if(an(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Fn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?fa(n.component):n.el,r=o?null:a,{i,r:u}=e,c=t&&t.r,f=i.refs===Ie?i.refs={}:i.refs,d=i.setupState,p=Te(d),h=d===Ie?ki:g=>Ne(p,g);if(c!=null&&c!==u){if(gl(t),ze(c))f[c]=null,h(c)&&(d[c]=null);else if(ut(c)){c.value=null;const g=t;g.k&&(f[g.k]=null)}}if(we(u))fo(u,i,12,[r,f]);else{const g=ze(u),y=ut(u);if(g||y){const $=()=>{if(e.f){const S=g?h(u)?d[u]:f[u]:u.value;if(o)ve(S)&&Sr(S,a);else if(ve(S))S.includes(a)||S.push(a);else if(g)f[u]=[a],h(u)&&(d[u]=f[u]);else{const _=[a];u.value=_,e.k&&(f[e.k]=_)}}else g?(f[u]=r,h(u)&&(d[u]=r)):y&&(u.value=r,e.k&&(f[e.k]=r))};if(r){const S=()=>{$(),Fo.delete(e)};S.id=-1,Fo.set(e,S),vt(S,s)}else gl(e),$()}}}function gl(e){const t=Fo.get(e);t&&(t.flags|=8,Fo.delete(e))}ra().requestIdleCallback;ra().cancelIdleCallback;const an=e=>!!e.type.__asyncLoader,ic=e=>e.type.__isKeepAlive;function Gd(e,t){cc(e,"a",t)}function zd(e,t){cc(e,"da",t)}function cc(e,t,s=ct){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ca(t,n,s),s){let o=s.parent;for(;o&&o.parent;)ic(o.parent.vnode)&&Jd(n,t,s,o),o=o.parent}}function Jd(e,t,s,n){const o=ca(t,e,n,!0);Pr(()=>{Sr(n[t],o)},s)}function ca(e,t,s=ct,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{ns();const i=po(s),u=zt(t,s,e,r);return i(),os(),u});return n?o.unshift(a):o.push(a),a}}const ls=e=>(t,s=ct)=>{(!no||e==="sp")&&ca(e,(...n)=>t(...n),s)},Yd=ls("bm"),Ct=ls("m"),qd=ls("bu"),Xd=ls("u"),Dr=ls("bum"),Pr=ls("um"),Qd=ls("sp"),Zd=ls("rtg"),ef=ls("rtc");function tf(e,t=ct){ca("ec",e,t)}const sf="components";function nf(e,t){return af(sf,e,!0,t)||e}const of=Symbol.for("v-ndc");function af(e,t,s=!0,n=!1){const o=ot||ct;if(o){const a=o.type;{const i=Gf(a,!1);if(i&&(i===t||i===It(t)||i===oa(It(t))))return a}const r=yl(o[e]||a[e],t)||yl(o.appContext[e],t);return!r&&n?a:r}}function yl(e,t){return e&&(e[t]||e[It(t)]||e[oa(It(t))])}function ae(e,t,s,n){let o;const a=s,r=ve(e);if(r||ze(e)){const i=r&&Ls(e);let u=!1,c=!1;i&&(u=!Et(e),c=as(e),e=la(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(u?c?cn(Mt(e[f])):Mt(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(Re(e))if(e[Symbol.iterator])o=Array.from(e,(i,u)=>t(i,u,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let u=0,c=i.length;u<c;u++){const f=i[u];o[u]=t(e[f],f,u,a)}}else o=[];return o}function rf(e,t,s={},n,o){if(ot.ce||ot.parent&&an(ot.parent)&&ot.parent.ce){const c=Object.keys(s).length>0;return s.name=t,m(),Ue(Z,null,[he("slot",s,n)],c?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),m();const r=a&&uc(a(s)),i=s.key||r&&r.key,u=Ue(Z,{key:(i&&!Bt(i)?i:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),u}function uc(e){return e.some(t=>to(t)?!(t.type===rs||t.type===Z&&!uc(t.children)):!0)?e:null}const Ja=e=>e?Tc(e)?fa(e):Ja(e.parent):null,jn=at(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ja(e.parent),$root:e=>Ja(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>fc(e),$forceUpdate:e=>e.f||(e.f=()=>{Ir(e.update)}),$nextTick:e=>e.n||(e.n=Qn.bind(e.proxy)),$watch:e=>jd.bind(e)}),$a=(e,t)=>e!==Ie&&!e.__isScriptSetup&&Ne(e,t),lf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:i,appContext:u}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if($a(n,t))return r[t]=1,n[t];if(o!==Ie&&Ne(o,t))return r[t]=2,o[t];if(Ne(a,t))return r[t]=3,a[t];if(s!==Ie&&Ne(s,t))return r[t]=4,s[t];Ya&&(r[t]=0)}}const c=jn[t];let f,d;if(c)return t==="$attrs"&&it(e.attrs,"get",""),c(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==Ie&&Ne(s,t))return r[t]=4,s[t];if(d=u.config.globalProperties,Ne(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return $a(o,t)?(o[t]=s,!0):n!==Ie&&Ne(n,t)?(n[t]=s,!0):Ne(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},i){let u;return!!(s[i]||e!==Ie&&i[0]!=="$"&&Ne(e,i)||$a(t,i)||Ne(a,i)||Ne(n,i)||Ne(jn,i)||Ne(o.config.globalProperties,i)||(u=r.__cssModules)&&u[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Ne(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function bl(e){return ve(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ya=!0;function cf(e){const t=fc(e),s=e.proxy,n=e.ctx;Ya=!1,t.beforeCreate&&_l(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:i,provide:u,inject:c,created:f,beforeMount:d,mounted:p,beforeUpdate:h,updated:g,activated:y,deactivated:$,beforeDestroy:S,beforeUnmount:_,destroyed:w,unmounted:x,render:B,renderTracked:V,renderTriggered:j,errorCaptured:Q,serverPrefetch:q,expose:de,inheritAttrs:pe,components:ce,directives:ge,filters:$e}=t;if(c&&uf(c,n,null),r)for(const J in r){const W=r[J];we(W)&&(n[J]=W.bind(s))}if(o){const J=o.call(s,s);Re(J)&&(e.data=Gt(J))}if(Ya=!0,a)for(const J in a){const W=a[J],N=we(W)?W.bind(s,s):we(W.get)?W.get.bind(s,s):Kt,P=!we(W)&&we(W.set)?W.set.bind(s):Kt,R=T({get:N,set:P});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>R.value,set:te=>R.value=te})}if(i)for(const J in i)dc(i[J],n,s,J);if(u){const J=we(u)?u.call(s):u;Reflect.ownKeys(J).forEach(W=>{Eo(W,J[W])})}f&&_l(f,e,"c");function fe(J,W){ve(W)?W.forEach(N=>J(N.bind(s))):W&&J(W.bind(s))}if(fe(Yd,d),fe(Ct,p),fe(qd,h),fe(Xd,g),fe(Gd,y),fe(zd,$),fe(tf,Q),fe(ef,V),fe(Zd,j),fe(Dr,_),fe(Pr,x),fe(Qd,q),ve(de))if(de.length){const J=e.exposed||(e.exposed={});de.forEach(W=>{Object.defineProperty(J,W,{get:()=>s[W],set:N=>s[W]=N,enumerable:!0})})}else e.exposed||(e.exposed={});B&&e.render===Kt&&(e.render=B),pe!=null&&(e.inheritAttrs=pe),ce&&(e.components=ce),ge&&(e.directives=ge),q&&lc(e)}function uf(e,t,s=Kt){ve(e)&&(e=qa(e));for(const n in e){const o=e[n];let a;Re(o)?"default"in o?a=Lt(o.from||n,o.default,!0):a=Lt(o.from||n):a=Lt(o),ut(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function _l(e,t,s){zt(ve(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function dc(e,t,s,n){let o=n.includes(".")?sc(s,n):()=>s[n];if(ze(e)){const a=t[e];we(a)&&_t(o,a)}else if(we(e))_t(o,e.bind(s));else if(Re(e))if(ve(e))e.forEach(a=>dc(a,t,s,n));else{const a=we(e.handler)?e.handler.bind(s):t[e.handler];we(a)&&_t(o,a,e)}}function fc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,i=a.get(t);let u;return i?u=i:!o.length&&!s&&!n?u=t:(u={},o.length&&o.forEach(c=>jo(u,c,r,!0)),jo(u,t,r)),Re(t)&&a.set(t,u),u}function jo(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&jo(e,a,s,!0),o&&o.forEach(r=>jo(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const i=df[r]||s&&s[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const df={data:wl,props:Sl,emits:Sl,methods:Dn,computed:Dn,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:Dn,directives:Dn,watch:pf,provide:wl,inject:ff};function wl(e,t){return t?e?function(){return at(we(e)?e.call(this,this):e,we(t)?t.call(this,this):t)}:t:e}function ff(e,t){return Dn(qa(e),qa(t))}function qa(e){if(ve(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function mt(e,t){return e?[...new Set([].concat(e,t))]:t}function Dn(e,t){return e?at(Object.create(null),e,t):t}function Sl(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:at(Object.create(null),bl(e),bl(t??{})):t}function pf(e,t){if(!e)return t;if(!t)return e;const s=at(Object.create(null),e);for(const n in t)s[n]=mt(e[n],t[n]);return s}function pc(){return{app:null,config:{isNativeTag:ki,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mf=0;function vf(e,t){return function(n,o=null){we(n)||(n=at({},n)),o!=null&&!Re(o)&&(o=null);const a=pc(),r=new WeakSet,i=[];let u=!1;const c=a.app={_uid:mf++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Jf,get config(){return a.config},set config(f){},use(f,...d){return r.has(f)||(f&&we(f.install)?(r.add(f),f.install(c,...d)):we(f)&&(r.add(f),f(c,...d))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,d){return d?(a.components[f]=d,c):a.components[f]},directive(f,d){return d?(a.directives[f]=d,c):a.directives[f]},mount(f,d,p){if(!u){const h=c._ceVNode||he(n,o);return h.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(h,f,p),u=!0,c._container=f,f.__vue_app__=c,fa(h.component)}},onUnmount(f){i.push(f)},unmount(){u&&(zt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,d){return a.provides[f]=d,c},runWithContext(f){const d=rn;rn=c;try{return f()}finally{rn=d}}};return c}}let rn=null;const hf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${It(t)}Modifiers`]||e[`${ws(t)}Modifiers`];function gf(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let o=s;const a=t.startsWith("update:"),r=a&&hf(n,t.slice(7));r&&(r.trim&&(o=s.map(f=>ze(f)?f.trim():f)),r.number&&(o=s.map(aa)));let i,u=n[i=ba(t)]||n[i=ba(It(t))];!u&&a&&(u=n[i=ba(ws(t))]),u&&zt(u,e,6,o);const c=n[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,zt(c,e,6,o)}}const yf=new WeakMap;function mc(e,t,s=!1){const n=s?yf:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},i=!1;if(!we(e)){const u=c=>{const f=mc(c,t,!0);f&&(i=!0,at(r,f))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!i?(Re(e)&&n.set(e,null),null):(ve(a)?a.forEach(u=>r[u]=null):at(r,a),Re(e)&&n.set(e,r),r)}function ua(e,t){return!e||!sa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ne(e,t[0].toLowerCase()+t.slice(1))||Ne(e,ws(t))||Ne(e,t))}function Cl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:i,emit:u,render:c,renderCache:f,props:d,data:p,setupState:h,ctx:g,inheritAttrs:y}=e,$=Uo(e);let S,_;try{if(s.shapeFlag&4){const x=o||n,B=x;S=Wt(c.call(B,x,f,d,h,p,g)),_=i}else{const x=t;S=Wt(x.length>1?x(d,{attrs:i,slots:r,emit:u}):x(d,null)),_=t.props?i:bf(i)}}catch(x){Hn.length=0,ia(x,e,1),S=he(rs)}let w=S;if(_&&y!==!1){const x=Object.keys(_),{shapeFlag:B}=w;x.length&&B&7&&(a&&x.some(wr)&&(_=_f(_,a)),w=un(w,_,!1,!0))}return s.dirs&&(w=un(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&Rr(w,s.transition),S=w,Uo($),S}const bf=e=>{let t;for(const s in e)(s==="class"||s==="style"||sa(s))&&((t||(t={}))[s]=e[s]);return t},_f=(e,t)=>{const s={};for(const n in e)(!wr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function wf(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:i,patchFlag:u}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?$l(n,r,c):!!r;if(u&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const p=f[d];if(r[p]!==n[p]&&!ua(c,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===r?!1:n?r?$l(n,r,c):!0:!!r;return!1}function $l(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!ua(s,a))return!0}return!1}function Sf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const vc={},hc=()=>Object.create(vc),gc=e=>Object.getPrototypeOf(e)===vc;function Cf(e,t,s,n=!1){const o={},a=hc();e.propsDefaults=Object.create(null),yc(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:zi(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function $f(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,i=Te(o),[u]=e.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let p=f[d];if(ua(e.emitsOptions,p))continue;const h=t[p];if(u)if(Ne(a,p))h!==a[p]&&(a[p]=h,c=!0);else{const g=It(p);o[g]=Xa(u,i,g,h,e,!1)}else h!==a[p]&&(a[p]=h,c=!0)}}}else{yc(e,t,o,a)&&(c=!0);let f;for(const d in i)(!t||!Ne(t,d)&&((f=ws(d))===d||!Ne(t,f)))&&(u?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=Xa(u,i,d,void 0,e,!0)):delete o[d]);if(a!==i)for(const d in a)(!t||!Ne(t,d))&&(delete a[d],c=!0)}c&&Qt(e.attrs,"set","")}function yc(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,i;if(t)for(let u in t){if(Ln(u))continue;const c=t[u];let f;o&&Ne(o,f=It(u))?!a||!a.includes(f)?s[f]=c:(i||(i={}))[f]=c:ua(e.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,r=!0)}if(a){const u=Te(s),c=i||Ie;for(let f=0;f<a.length;f++){const d=a[f];s[d]=Xa(o,u,d,c[d],e,!Ne(c,d))}}return r}function Xa(e,t,s,n,o,a){const r=e[s];if(r!=null){const i=Ne(r,"default");if(i&&n===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&we(u)){const{propsDefaults:c}=o;if(s in c)n=c[s];else{const f=po(o);n=c[s]=u.call(null,t),f()}}else n=u;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!i?n=!1:r[1]&&(n===""||n===ws(s))&&(n=!0))}return n}const kf=new WeakMap;function bc(e,t,s=!1){const n=s?kf:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},i=[];let u=!1;if(!we(e)){const f=d=>{u=!0;const[p,h]=bc(d,t,!0);at(r,p),h&&i.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!u)return Re(e)&&n.set(e,sn),sn;if(ve(a))for(let f=0;f<a.length;f++){const d=It(a[f]);kl(d)&&(r[d]=Ie)}else if(a)for(const f in a){const d=It(f);if(kl(d)){const p=a[f],h=r[d]=ve(p)||we(p)?{type:p}:at({},p),g=h.type;let y=!1,$=!0;if(ve(g))for(let S=0;S<g.length;++S){const _=g[S],w=we(_)&&_.name;if(w==="Boolean"){y=!0;break}else w==="String"&&($=!1)}else y=we(g)&&g.name==="Boolean";h[0]=y,h[1]=$,(y||Ne(h,"default"))&&i.push(d)}}const c=[r,i];return Re(e)&&n.set(e,c),c}function kl(e){return e[0]!=="$"&&!Ln(e)}const Lr=e=>e==="_"||e==="_ctx"||e==="$stable",Br=e=>ve(e)?e.map(Wt):[Wt(e)],xf=(e,t,s)=>{if(t._n)return t;const n=Md((...o)=>Br(t(...o)),s);return n._c=!1,n},_c=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Lr(o))continue;const a=e[o];if(we(a))t[o]=xf(o,a,n);else if(a!=null){const r=Br(a);t[o]=()=>r}}},wc=(e,t)=>{const s=Br(t);e.slots.default=()=>s},Sc=(e,t,s)=>{for(const n in t)(s||!Lr(n))&&(e[n]=t[n])},Af=(e,t,s)=>{const n=e.slots=hc();if(e.vnode.shapeFlag&32){const o=t._;o?(Sc(n,t,s),s&&Ni(n,"_",o,!0)):_c(t,n)}else t&&wc(e,t)},Tf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=Ie;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:Sc(o,t,s):(a=!t.$stable,_c(t,o)),r=t}else t&&(wc(e,t),r={default:1});if(a)for(const i in o)!Lr(i)&&r[i]==null&&delete o[i]},vt=Rf;function Nf(e){return Ef(e)}function Ef(e,t){const s=ra();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:i,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:p,setScopeId:h=Kt,insertStaticContent:g}=e,y=(C,k,L,K=null,Y=null,z=null,se=void 0,ee=null,A=!!k.dynamicChildren)=>{if(C===k)return;C&&!kn(C,k)&&(K=G(C),te(C,Y,z,!0),C=null),k.patchFlag===-2&&(A=!1,k.dynamicChildren=null);const{type:E,ref:U,shapeFlag:H}=k;switch(E){case da:$(C,k,L,K);break;case rs:S(C,k,L,K);break;case Io:C==null&&_(k,L,K,se);break;case Z:ce(C,k,L,K,Y,z,se,ee,A);break;default:H&1?B(C,k,L,K,Y,z,se,ee,A):H&6?ge(C,k,L,K,Y,z,se,ee,A):(H&64||H&128)&&E.process(C,k,L,K,Y,z,se,ee,A,ue)}U!=null&&Y?Fn(U,C&&C.ref,z,k||C,!k):U==null&&C&&C.ref!=null&&Fn(C.ref,null,z,C,!0)},$=(C,k,L,K)=>{if(C==null)n(k.el=i(k.children),L,K);else{const Y=k.el=C.el;k.children!==C.children&&c(Y,k.children)}},S=(C,k,L,K)=>{C==null?n(k.el=u(k.children||""),L,K):k.el=C.el},_=(C,k,L,K)=>{[C.el,C.anchor]=g(C.children,k,L,K,C.el,C.anchor)},w=({el:C,anchor:k},L,K)=>{let Y;for(;C&&C!==k;)Y=p(C),n(C,L,K),C=Y;n(k,L,K)},x=({el:C,anchor:k})=>{let L;for(;C&&C!==k;)L=p(C),o(C),C=L;o(k)},B=(C,k,L,K,Y,z,se,ee,A)=>{if(k.type==="svg"?se="svg":k.type==="math"&&(se="mathml"),C==null)V(k,L,K,Y,z,se,ee,A);else{const E=C.el&&C.el._isVueCE?C.el:null;try{E&&E._beginPatch(),q(C,k,Y,z,se,ee,A)}finally{E&&E._endPatch()}}},V=(C,k,L,K,Y,z,se,ee)=>{let A,E;const{props:U,shapeFlag:H,transition:O,dirs:D}=C;if(A=C.el=r(C.type,z,U&&U.is,U),H&8?f(A,C.children):H&16&&Q(C.children,A,null,K,Y,ka(C,z),se,ee),D&&Cs(C,null,K,"created"),j(A,C,C.scopeId,se,K),U){for(const oe in U)oe!=="value"&&!Ln(oe)&&a(A,oe,null,U[oe],z,K);"value"in U&&a(A,"value",null,U.value,z),(E=U.onVnodeBeforeMount)&&Ft(E,K,C)}D&&Cs(C,null,K,"beforeMount");const X=Of(Y,O);X&&O.beforeEnter(A),n(A,k,L),((E=U&&U.onVnodeMounted)||X||D)&&vt(()=>{E&&Ft(E,K,C),X&&O.enter(A),D&&Cs(C,null,K,"mounted")},Y)},j=(C,k,L,K,Y)=>{if(L&&h(C,L),K)for(let z=0;z<K.length;z++)h(C,K[z]);if(Y){let z=Y.subTree;if(k===z||kc(z.type)&&(z.ssContent===k||z.ssFallback===k)){const se=Y.vnode;j(C,se,se.scopeId,se.slotScopeIds,Y.parent)}}},Q=(C,k,L,K,Y,z,se,ee,A=0)=>{for(let E=A;E<C.length;E++){const U=C[E]=ee?fs(C[E]):Wt(C[E]);y(null,U,k,L,K,Y,z,se,ee)}},q=(C,k,L,K,Y,z,se)=>{const ee=k.el=C.el;let{patchFlag:A,dynamicChildren:E,dirs:U}=k;A|=C.patchFlag&16;const H=C.props||Ie,O=k.props||Ie;let D;if(L&&$s(L,!1),(D=O.onVnodeBeforeUpdate)&&Ft(D,L,k,C),U&&Cs(k,C,L,"beforeUpdate"),L&&$s(L,!0),(H.innerHTML&&O.innerHTML==null||H.textContent&&O.textContent==null)&&f(ee,""),E?de(C.dynamicChildren,E,ee,L,K,ka(k,Y),z):se||W(C,k,ee,null,L,K,ka(k,Y),z,!1),A>0){if(A&16)pe(ee,H,O,L,Y);else if(A&2&&H.class!==O.class&&a(ee,"class",null,O.class,Y),A&4&&a(ee,"style",H.style,O.style,Y),A&8){const X=k.dynamicProps;for(let oe=0;oe<X.length;oe++){const le=X[oe],ke=H[le],ye=O[le];(ye!==ke||le==="value")&&a(ee,le,ke,ye,Y,L)}}A&1&&C.children!==k.children&&f(ee,k.children)}else!se&&E==null&&pe(ee,H,O,L,Y);((D=O.onVnodeUpdated)||U)&&vt(()=>{D&&Ft(D,L,k,C),U&&Cs(k,C,L,"updated")},K)},de=(C,k,L,K,Y,z,se)=>{for(let ee=0;ee<k.length;ee++){const A=C[ee],E=k[ee],U=A.el&&(A.type===Z||!kn(A,E)||A.shapeFlag&198)?d(A.el):L;y(A,E,U,null,K,Y,z,se,!0)}},pe=(C,k,L,K,Y)=>{if(k!==L){if(k!==Ie)for(const z in k)!Ln(z)&&!(z in L)&&a(C,z,k[z],null,Y,K);for(const z in L){if(Ln(z))continue;const se=L[z],ee=k[z];se!==ee&&z!=="value"&&a(C,z,ee,se,Y,K)}"value"in L&&a(C,"value",k.value,L.value,Y)}},ce=(C,k,L,K,Y,z,se,ee,A)=>{const E=k.el=C?C.el:i(""),U=k.anchor=C?C.anchor:i("");let{patchFlag:H,dynamicChildren:O,slotScopeIds:D}=k;D&&(ee=ee?ee.concat(D):D),C==null?(n(E,L,K),n(U,L,K),Q(k.children||[],L,U,Y,z,se,ee,A)):H>0&&H&64&&O&&C.dynamicChildren&&C.dynamicChildren.length===O.length?(de(C.dynamicChildren,O,L,Y,z,se,ee),(k.key!=null||Y&&k===Y.subTree)&&Mr(C,k,!0)):W(C,k,L,U,Y,z,se,ee,A)},ge=(C,k,L,K,Y,z,se,ee,A)=>{k.slotScopeIds=ee,C==null?k.shapeFlag&512?Y.ctx.activate(k,L,K,se,A):$e(k,L,K,Y,z,se,A):me(C,k,A)},$e=(C,k,L,K,Y,z,se)=>{const ee=C.component=Ff(C,K,Y);if(ic(C)&&(ee.ctx.renderer=ue),Hf(ee,!1,se),ee.asyncDep){if(Y&&Y.registerDep(ee,fe,se),!C.el){const A=ee.subTree=he(rs);S(null,A,k,L),C.placeholder=A.el}}else fe(ee,C,k,L,Y,z,se)},me=(C,k,L)=>{const K=k.component=C.component;if(wf(C,k,L))if(K.asyncDep&&!K.asyncResolved){J(K,k,L);return}else K.next=k,K.update();else k.el=C.el,K.vnode=k},fe=(C,k,L,K,Y,z,se)=>{const ee=()=>{if(C.isMounted){let{next:H,bu:O,u:D,parent:X,vnode:oe}=C;{const Ge=Cc(C);if(Ge){H&&(H.el=oe.el,J(C,H,se)),Ge.asyncDep.then(()=>{C.isUnmounted||ee()});return}}let le=H,ke;$s(C,!1),H?(H.el=oe.el,J(C,H,se)):H=oe,O&&No(O),(ke=H.props&&H.props.onVnodeBeforeUpdate)&&Ft(ke,X,H,oe),$s(C,!0);const ye=Cl(C),be=C.subTree;C.subTree=ye,y(be,ye,d(be.el),G(be),C,Y,z),H.el=ye.el,le===null&&Sf(C,ye.el),D&&vt(D,Y),(ke=H.props&&H.props.onVnodeUpdated)&&vt(()=>Ft(ke,X,H,oe),Y)}else{let H;const{el:O,props:D}=k,{bm:X,m:oe,parent:le,root:ke,type:ye}=C,be=an(k);$s(C,!1),X&&No(X),!be&&(H=D&&D.onVnodeBeforeMount)&&Ft(H,le,k),$s(C,!0);{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle(ye);const Ge=C.subTree=Cl(C);y(null,Ge,L,K,C,Y,z),k.el=Ge.el}if(oe&&vt(oe,Y),!be&&(H=D&&D.onVnodeMounted)){const Ge=k;vt(()=>Ft(H,le,Ge),Y)}(k.shapeFlag&256||le&&an(le.vnode)&&le.vnode.shapeFlag&256)&&C.a&&vt(C.a,Y),C.isMounted=!0,k=L=K=null}};C.scope.on();const A=C.effect=new Ri(ee);C.scope.off();const E=C.update=A.run.bind(A),U=C.job=A.runIfDirty.bind(A);U.i=C,U.id=C.uid,A.scheduler=()=>Ir(U),$s(C,!0),E()},J=(C,k,L)=>{k.component=C;const K=C.vnode.props;C.vnode=k,C.next=null,$f(C,k.props,K,L),Tf(C,k.children,L),ns(),pl(C),os()},W=(C,k,L,K,Y,z,se,ee,A=!1)=>{const E=C&&C.children,U=C?C.shapeFlag:0,H=k.children,{patchFlag:O,shapeFlag:D}=k;if(O>0){if(O&128){P(E,H,L,K,Y,z,se,ee,A);return}else if(O&256){N(E,H,L,K,Y,z,se,ee,A);return}}D&8?(U&16&&je(E,Y,z),H!==E&&f(L,H)):U&16?D&16?P(E,H,L,K,Y,z,se,ee,A):je(E,Y,z,!0):(U&8&&f(L,""),D&16&&Q(H,L,K,Y,z,se,ee,A))},N=(C,k,L,K,Y,z,se,ee,A)=>{C=C||sn,k=k||sn;const E=C.length,U=k.length,H=Math.min(E,U);let O;for(O=0;O<H;O++){const D=k[O]=A?fs(k[O]):Wt(k[O]);y(C[O],D,L,null,Y,z,se,ee,A)}E>U?je(C,Y,z,!0,!1,H):Q(k,L,K,Y,z,se,ee,A,H)},P=(C,k,L,K,Y,z,se,ee,A)=>{let E=0;const U=k.length;let H=C.length-1,O=U-1;for(;E<=H&&E<=O;){const D=C[E],X=k[E]=A?fs(k[E]):Wt(k[E]);if(kn(D,X))y(D,X,L,null,Y,z,se,ee,A);else break;E++}for(;E<=H&&E<=O;){const D=C[H],X=k[O]=A?fs(k[O]):Wt(k[O]);if(kn(D,X))y(D,X,L,null,Y,z,se,ee,A);else break;H--,O--}if(E>H){if(E<=O){const D=O+1,X=D<U?k[D].el:K;for(;E<=O;)y(null,k[E]=A?fs(k[E]):Wt(k[E]),L,X,Y,z,se,ee,A),E++}}else if(E>O)for(;E<=H;)te(C[E],Y,z,!0),E++;else{const D=E,X=E,oe=new Map;for(E=X;E<=O;E++){const Ye=k[E]=A?fs(k[E]):Wt(k[E]);Ye.key!=null&&oe.set(Ye.key,E)}let le,ke=0;const ye=O-X+1;let be=!1,Ge=0;const dt=new Array(ye);for(E=0;E<ye;E++)dt[E]=0;for(E=D;E<=H;E++){const Ye=C[E];if(ke>=ye){te(Ye,Y,z,!0);continue}let et;if(Ye.key!=null)et=oe.get(Ye.key);else for(le=X;le<=O;le++)if(dt[le-X]===0&&kn(Ye,k[le])){et=le;break}et===void 0?te(Ye,Y,z,!0):(dt[et-X]=E+1,et>=Ge?Ge=et:be=!0,y(Ye,k[et],L,null,Y,z,se,ee,A),ke++)}const ft=be?If(dt):sn;for(le=ft.length-1,E=ye-1;E>=0;E--){const Ye=X+E,et=k[Ye],Be=k[Ye+1],Xe=Ye+1<U?Be.el||$c(Be):K;dt[E]===0?y(null,et,L,Xe,Y,z,se,ee,A):be&&(le<0||E!==ft[le]?R(et,L,Xe,2):le--)}}},R=(C,k,L,K,Y=null)=>{const{el:z,type:se,transition:ee,children:A,shapeFlag:E}=C;if(E&6){R(C.component.subTree,k,L,K);return}if(E&128){C.suspense.move(k,L,K);return}if(E&64){se.move(C,k,L,ue);return}if(se===Z){n(z,k,L);for(let H=0;H<A.length;H++)R(A[H],k,L,K);n(C.anchor,k,L);return}if(se===Io){w(C,k,L);return}if(K!==2&&E&1&&ee)if(K===0)ee.beforeEnter(z),n(z,k,L),vt(()=>ee.enter(z),Y);else{const{leave:H,delayLeave:O,afterLeave:D}=ee,X=()=>{C.ctx.isUnmounted?o(z):n(z,k,L)},oe=()=>{z._isLeaving&&z[Kd](!0),H(z,()=>{X(),D&&D()})};O?O(z,X,oe):oe()}else n(z,k,L)},te=(C,k,L,K=!1,Y=!1)=>{const{type:z,props:se,ref:ee,children:A,dynamicChildren:E,shapeFlag:U,patchFlag:H,dirs:O,cacheIndex:D}=C;if(H===-2&&(Y=!1),ee!=null&&(ns(),Fn(ee,null,L,C,!0),os()),D!=null&&(k.renderCache[D]=void 0),U&256){k.ctx.deactivate(C);return}const X=U&1&&O,oe=!an(C);let le;if(oe&&(le=se&&se.onVnodeBeforeUnmount)&&Ft(le,k,C),U&6)xe(C.component,L,K);else{if(U&128){C.suspense.unmount(L,K);return}X&&Cs(C,null,k,"beforeUnmount"),U&64?C.type.remove(C,k,L,ue,K):E&&!E.hasOnce&&(z!==Z||H>0&&H&64)?je(E,k,L,!1,!0):(z===Z&&H&384||!Y&&U&16)&&je(A,k,L),K&&Ce(C)}(oe&&(le=se&&se.onVnodeUnmounted)||X)&&vt(()=>{le&&Ft(le,k,C),X&&Cs(C,null,k,"unmounted")},L)},Ce=C=>{const{type:k,el:L,anchor:K,transition:Y}=C;if(k===Z){Ee(L,K);return}if(k===Io){x(C);return}const z=()=>{o(L),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(C.shapeFlag&1&&Y&&!Y.persisted){const{leave:se,delayLeave:ee}=Y,A=()=>se(L,z);ee?ee(C.el,z,A):A()}else z()},Ee=(C,k)=>{let L;for(;C!==k;)L=p(C),o(C),C=L;o(k)},xe=(C,k,L)=>{const{bum:K,scope:Y,job:z,subTree:se,um:ee,m:A,a:E}=C;xl(A),xl(E),K&&No(K),Y.stop(),z&&(z.flags|=8,te(se,C,k,L)),ee&&vt(ee,k),vt(()=>{C.isUnmounted=!0},k)},je=(C,k,L,K=!1,Y=!1,z=0)=>{for(let se=z;se<C.length;se++)te(C[se],k,L,K,Y)},G=C=>{if(C.shapeFlag&6)return G(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const k=p(C.anchor||C.el),L=k&&k[nc];return L?p(L):k};let re=!1;const ne=(C,k,L)=>{let K;C==null?k._vnode&&(te(k._vnode,null,null,!0),K=k._vnode.component):y(k._vnode||null,C,k,null,null,null,L),k._vnode=C,re||(re=!0,pl(K),Qi(),re=!1)},ue={p:y,um:te,m:R,r:Ce,mt:$e,mc:Q,pc:W,pbc:de,n:G,o:e};return{render:ne,hydrate:void 0,createApp:vf(ne)}}function ka({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function $s({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Of(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Mr(e,t,s=!1){const n=e.children,o=t.children;if(ve(n)&&ve(o))for(let a=0;a<n.length;a++){const r=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=fs(o[a]),i.el=r.el),!s&&i.patchFlag!==-2&&Mr(r,i)),i.type===da&&(i.patchFlag!==-1?i.el=r.el:i.__elIndex=a+(e.type===Z?1:0)),i.type===rs&&!i.el&&(i.el=r.el)}}function If(e){const t=e.slice(),s=[0];let n,o,a,r,i;const u=e.length;for(n=0;n<u;n++){const c=e[n];if(c!==0){if(o=s[s.length-1],e[o]<c){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)i=a+r>>1,e[s[i]]<c?a=i+1:r=i;c<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function Cc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Cc(t)}function xl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function $c(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?$c(t.subTree):null}const kc=e=>e.__isSuspense;function Rf(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):Bd(e)}const Z=Symbol.for("v-fgt"),da=Symbol.for("v-txt"),rs=Symbol.for("v-cmt"),Io=Symbol.for("v-stc"),Hn=[];let At=null;function m(e=!1){Hn.push(At=e?null:[])}function Df(){Hn.pop(),At=Hn[Hn.length-1]||null}let eo=1;function Ho(e,t=!1){eo+=e,e<0&&At&&t&&(At.hasOnce=!0)}function xc(e){return e.dynamicChildren=eo>0?At||sn:null,Df(),eo>0&&At&&At.push(e),e}function v(e,t,s,n,o,a){return xc(l(e,t,s,n,o,a,!0))}function Ue(e,t,s,n,o){return xc(he(e,t,s,n,o,!0))}function to(e){return e?e.__v_isVNode===!0:!1}function kn(e,t){return e.type===t.type&&e.key===t.key}const Ac=({key:e})=>e??null,Ro=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ze(e)||ut(e)||we(e)?{i:ot,r:e,k:t,f:!!s}:e:null);function l(e,t=null,s=null,n=0,o=null,a=e===Z?0:1,r=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ac(t),ref:t&&Ro(t),scopeId:ec,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ot};return i?(Ur(u,s),a&128&&e.normalize(u)):s&&(u.shapeFlag|=ze(s)?8:16),eo>0&&!r&&At&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&At.push(u),u}const he=Pf;function Pf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===of)&&(e=rs),to(e)){const i=un(e,t,!0);return s&&Ur(i,s),eo>0&&!a&&At&&(i.shapeFlag&6?At[At.indexOf(e)]=i:At.push(i)),i.patchFlag=-2,i}if(zf(e)&&(e=e.__vccOpts),t){t=Lf(t);let{class:i,style:u}=t;i&&!ze(i)&&(t.class=ie(i)),Re(u)&&(Or(u)&&!ve(u)&&(u=at({},u)),t.style=st(u))}const r=ze(e)?1:kc(e)?128:Hd(e)?64:Re(e)?4:we(e)?2:0;return l(e,t,s,n,o,r,a,!0)}function Lf(e){return e?Or(e)||gc(e)?at({},e):e:null}function un(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:i,transition:u}=e,c=t?Bf(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ac(c),ref:t&&t.ref?s&&a?ve(a)?a.concat(Ro(t)):[a,Ro(t)]:Ro(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&un(e.ssContent),ssFallback:e.ssFallback&&un(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Rr(f,u.clone(f)),f}function Oe(e=" ",t=0){return he(da,null,e,t)}function so(e,t){const s=he(Io,null,e);return s.staticCount=t,s}function F(e="",t=!1){return t?(m(),Ue(rs,null,e)):he(rs,null,e)}function Wt(e){return e==null||typeof e=="boolean"?he(rs):ve(e)?he(Z,null,e.slice()):to(e)?fs(e):he(da,null,String(e))}function fs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:un(e)}function Ur(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ve(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Ur(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!gc(t)?t._ctx=ot:o===3&&ot&&(ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else we(t)?(t={default:t,_ctx:ot},s=32):(t=String(t),n&64?(s=16,t=[Oe(t)]):s=8);e.children=t,e.shapeFlag|=s}function Bf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(o==="style")t.style=st([t.style,n.style]);else if(sa(o)){const a=t[o],r=n[o];r&&a!==r&&!(ve(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function Ft(e,t,s,n=null){zt(e,t,7,[s,n])}const Mf=pc();let Uf=0;function Ff(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Mf,a={uid:Uf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ld(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bc(n,o),emitsOptions:mc(n,o),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=gf.bind(null,a),e.ce&&e.ce(a),a}let ct=null;const jf=()=>ct||ot;let Wo,Qa;{const e=ra(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};Wo=t("__VUE_INSTANCE_SETTERS__",s=>ct=s),Qa=t("__VUE_SSR_SETTERS__",s=>no=s)}const po=e=>{const t=ct;return Wo(e),e.scope.on(),()=>{e.scope.off(),Wo(t)}},Al=()=>{ct&&ct.scope.off(),Wo(null)};function Tc(e){return e.vnode.shapeFlag&4}let no=!1;function Hf(e,t=!1,s=!1){t&&Qa(t);const{props:n,children:o}=e.vnode,a=Tc(e);Cf(e,n,a,t),Af(e,o,s||t);const r=a?Wf(e,t):void 0;return t&&Qa(!1),r}function Wf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,lf);const{setup:n}=s;if(n){ns();const o=e.setupContext=n.length>1?Kf(e):null,a=po(e),r=fo(n,e,0,[e.props,o]),i=xi(r);if(os(),a(),(i||e.sp)&&!an(e)&&lc(e),i){if(r.then(Al,Al),t)return r.then(u=>{Tl(e,u)}).catch(u=>{ia(u,e,0)});e.asyncDep=r}else Tl(e,r)}else Nc(e)}function Tl(e,t,s){we(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=Yi(t)),Nc(e)}function Nc(e,t,s){const n=e.type;e.render||(e.render=n.render||Kt);{const o=po(e);ns();try{cf(e)}finally{os(),o()}}}const Vf={get(e,t){return it(e,"get",""),e[t]}};function Kf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Vf),slots:e.slots,emit:e.emit,expose:t}}function fa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yi(Ad(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in jn)return jn[s](e)},has(t,s){return s in t||s in jn}})):e.proxy}function Gf(e,t=!0){return we(e)?e.displayName||e.name:e.name||t&&e.__name}function zf(e){return we(e)&&"__vccOpts"in e}const T=(e,t)=>Id(e,t,no);function Ec(e,t,s){try{Ho(-1);const n=arguments.length;return n===2?Re(t)&&!ve(t)?to(t)?he(e,null,[t]):he(e,t):he(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&to(s)&&(s=[s]),he(e,t,s))}finally{Ho(1)}}const Jf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Za;const Nl=typeof window<"u"&&window.trustedTypes;if(Nl)try{Za=Nl.createPolicy("vue",{createHTML:e=>e})}catch{}const Oc=Za?e=>Za.createHTML(e):e=>e,Yf="http://www.w3.org/2000/svg",qf="http://www.w3.org/1998/Math/MathML",Xt=typeof document<"u"?document:null,El=Xt&&Xt.createElement("template"),Xf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Xt.createElementNS(Yf,e):t==="mathml"?Xt.createElementNS(qf,e):s?Xt.createElement(e,{is:s}):Xt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Xt.createTextNode(e),createComment:e=>Xt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Xt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{El.innerHTML=Oc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=El.content;if(n==="svg"||n==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Qf=Symbol("_vtc");function Zf(e,t,s){const n=e[Qf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Vo=Symbol("_vod"),Ic=Symbol("_vsh"),ep={name:"show",beforeMount(e,{value:t},{transition:s}){e[Vo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):xn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),xn(e,!0),n.enter(e)):n.leave(e,()=>{xn(e,!1)}):xn(e,t))},beforeUnmount(e,{value:t}){xn(e,t)}};function xn(e,t){e.style.display=t?e[Vo]:"none",e[Ic]=!t}const tp=Symbol(""),sp=/(?:^|;)\s*display\s*:/;function np(e,t,s){const n=e.style,o=ze(s);let a=!1;if(s&&!o){if(t)if(ze(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();s[i]==null&&Do(n,i,"")}else for(const r in t)s[r]==null&&Do(n,r,"");for(const r in s)r==="display"&&(a=!0),Do(n,r,s[r])}else if(o){if(t!==s){const r=n[tp];r&&(s+=";"+r),n.cssText=s,a=sp.test(s)}}else t&&e.removeAttribute("style");Vo in e&&(e[Vo]=a?n.display:"",e[Ic]&&(n.display="none"))}const Ol=/\s*!important$/;function Do(e,t,s){if(ve(s))s.forEach(n=>Do(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=op(e,t);Ol.test(s)?e.setProperty(ws(n),s.replace(Ol,""),"important"):e[n]=s}}const Il=["Webkit","Moz","ms"],xa={};function op(e,t){const s=xa[t];if(s)return s;let n=It(t);if(n!=="filter"&&n in e)return xa[t]=n;n=oa(n);for(let o=0;o<Il.length;o++){const a=Il[o]+n;if(a in e)return xa[t]=a}return t}const Rl="http://www.w3.org/1999/xlink";function Dl(e,t,s,n,o,a=ad(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Rl,t.slice(6,t.length)):e.setAttributeNS(Rl,t,s):s==null||a&&!Ei(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Bt(s)?String(s):s)}function Pl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Oc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(i!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Ei(s):s==null&&i==="string"?(s="",r=!0):i==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function es(e,t,s,n){e.addEventListener(t,s,n)}function ap(e,t,s,n){e.removeEventListener(t,s,n)}const Ll=Symbol("_vei");function rp(e,t,s,n,o=null){const a=e[Ll]||(e[Ll]={}),r=a[t];if(n&&r)r.value=n;else{const[i,u]=lp(t);if(n){const c=a[t]=up(n,o);es(e,i,c,u)}else r&&(ap(e,i,r,u),a[t]=void 0)}}const Bl=/(?:Once|Passive|Capture)$/;function lp(e){let t;if(Bl.test(e)){t={};let n;for(;n=e.match(Bl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ws(e.slice(2)),t]}let Aa=0;const ip=Promise.resolve(),cp=()=>Aa||(ip.then(()=>Aa=0),Aa=Date.now());function up(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;zt(dp(n,s.value),t,5,[n])};return s.value=e,s.attached=cp(),s}function dp(e,t){if(ve(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Ml=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,fp=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?Zf(e,n,r):t==="style"?np(e,s,n):sa(t)?wr(t)||rp(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):pp(e,t,n,r))?(Pl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Dl(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ze(n))?Pl(e,It(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Dl(e,t,n,r))};function pp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ml(t)&&we(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ml(t)&&ze(s)?!1:t in e}const bs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?s=>No(t,s):t};function mp(e){e.target.composing=!0}function Ul(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function Fl(e,t,s){return t&&(e=e.trim()),s&&(e=aa(e)),e}const wt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ot]=bs(o);const a=n||o.props&&o.props.type==="number";es(e,t?"change":"input",r=>{r.target.composing||e[Ot](Fl(e.value,s,a))}),(s||a)&&es(e,"change",()=>{e.value=Fl(e.value,s,a)}),t||(es(e,"compositionstart",mp),es(e,"compositionend",Ul),es(e,"change",Ul))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[Ot]=bs(r),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?aa(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===u)||(e.value=u))}},Fr={deep:!0,created(e,t,s){e[Ot]=bs(s),es(e,"change",()=>{const n=e._modelValue,o=dn(e),a=e.checked,r=e[Ot];if(ve(n)){const i=$r(n,o),u=i!==-1;if(a&&!u)r(n.concat(o));else if(!a&&u){const c=[...n];c.splice(i,1),r(c)}}else if(bn(n)){const i=new Set(n);a?i.add(o):i.delete(o),r(i)}else r(Rc(e,a))})},mounted:jl,beforeUpdate(e,t,s){e[Ot]=bs(s),jl(e,t,s)}};function jl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ve(t))o=$r(t,n.props.value)>-1;else if(bn(t))o=t.has(n.props.value);else{if(t===s)return;o=Ms(t,Rc(e,!0))}e.checked!==o&&(e.checked=o)}const Hl={created(e,{value:t},s){e.checked=Ms(t,s.props.value),e[Ot]=bs(s),es(e,"change",()=>{e[Ot](dn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ot]=bs(n),t!==s&&(e.checked=Ms(t,n.props.value))}},Wn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=bn(t);es(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?aa(dn(r)):dn(r));e[Ot](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Qn(()=>{e._assigning=!1})}),e[Ot]=bs(n)},mounted(e,{value:t}){Wl(e,t)},beforeUpdate(e,t,s){e[Ot]=bs(s)},updated(e,{value:t}){e._assigning||Wl(e,t)}};function Wl(e,t){const s=e.multiple,n=ve(t);if(!(s&&!n&&!bn(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],i=dn(r);if(s)if(n){const u=typeof i;u==="string"||u==="number"?r.selected=t.some(c=>String(c)===String(i)):r.selected=$r(t,i)>-1}else r.selected=t.has(i);else if(Ms(dn(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function dn(e){return"_value"in e?e._value:e.value}function Rc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const vp=["ctrl","shift","alt","meta"],hp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>vp.some(s=>e[`${s}Key`]&&!t.includes(s))},St=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const i=hp[t[r]];if(i&&i(o,t))return}return e(o,...a)})},gp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ko=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=ws(o.key);if(t.some(r=>r===a||gp[r]===a))return e(o)})},yp=at({patchProp:fp},Xf);let Vl;function bp(){return Vl||(Vl=Nf(yp))}const _p=(...e)=>{const t=bp().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Sp(n);if(!o)return;const a=t._component;!we(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,wp(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function wp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sp(e){return ze(e)?document.querySelector(e):e}const _e=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Cp={};function $p(e,t){const s=nf("router-view");return m(),Ue(s)}const kp=_e(Cp,[["render",$p]]),xp="modulepreload",Ap=function(e){return"/"+e},Kl={},Tp=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(u=>{if(u=Ap(u),u in Kl)return;Kl[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":xp,c||(d.as="script"),d.crossOrigin="",d.href=u,i&&d.setAttribute("nonce",i),document.head.appendChild(d),c)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const zs=typeof document<"u";function Dc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Np(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Dc(e.default)}const Ae=Object.assign;function Ta(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ut(o)?o.map(e):e(o)}return s}const Vn=()=>{},Ut=Array.isArray;function Gl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Pc=/#/g,Ep=/&/g,Op=/\//g,Ip=/=/g,Rp=/\?/g,Lc=/\+/g,Dp=/%5B/g,Pp=/%5D/g,Bc=/%5E/g,Lp=/%60/g,Mc=/%7B/g,Bp=/%7C/g,Uc=/%7D/g,Mp=/%20/g;function jr(e){return e==null?"":encodeURI(""+e).replace(Bp,"|").replace(Dp,"[").replace(Pp,"]")}function Up(e){return jr(e).replace(Mc,"{").replace(Uc,"}").replace(Bc,"^")}function er(e){return jr(e).replace(Lc,"%2B").replace(Mp,"+").replace(Pc,"%23").replace(Ep,"%26").replace(Lp,"`").replace(Mc,"{").replace(Uc,"}").replace(Bc,"^")}function Fp(e){return er(e).replace(Ip,"%3D")}function jp(e){return jr(e).replace(Pc,"%23").replace(Rp,"%3F")}function Hp(e){return jp(e).replace(Op,"%2F")}function oo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Wp=/\/$/,Vp=e=>e.replace(Wp,"");function Na(e,t,s="/"){let n,o={},a="",r="";const i=t.indexOf("#");let u=t.indexOf("?");return u=i>=0&&u>i?-1:u,u>=0&&(n=t.slice(0,u),a=t.slice(u,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),r=t.slice(i,t.length)),n=Jp(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:oo(r)}}function Kp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function zl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Gp(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&fn(t.matched[n],s.matched[o])&&Fc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function fn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Fc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!zp(e[s],t[s]))return!1;return!0}function zp(e,t){return Ut(e)?Jl(e,t):Ut(t)?Jl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Jl(e,t){return Ut(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Jp(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,i;for(r=0;r<n.length;r++)if(i=n[r],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const cs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let tr=function(e){return e.pop="pop",e.push="push",e}({}),Ea=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Yp(e){if(!e)if(zs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Vp(e)}const qp=/^[^#]+#/;function Xp(e,t){return e.replace(qp,"#")+t}function Qp(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const pa=()=>({left:window.scrollX,top:window.scrollY});function Zp(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Qp(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Yl(e,t){return(history.state?history.state.position-t:-1)+e}const sr=new Map;function em(e,t){sr.set(e,t)}function tm(e){const t=sr.get(e);return sr.delete(e),t}function sm(e){return typeof e=="string"||e&&typeof e=="object"}function jc(e){return typeof e=="string"||typeof e=="symbol"}let We=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Hc=Symbol("");We.MATCHER_NOT_FOUND+"",We.NAVIGATION_GUARD_REDIRECT+"",We.NAVIGATION_ABORTED+"",We.NAVIGATION_CANCELLED+"",We.NAVIGATION_DUPLICATED+"";function pn(e,t){return Ae(new Error,{type:e,[Hc]:!0},t)}function Yt(e,t){return e instanceof Error&&Hc in e&&(t==null||!!(e.type&t))}const nm=["params","query","hash"];function om(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of nm)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function am(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Lc," "),a=o.indexOf("="),r=oo(a<0?o:o.slice(0,a)),i=a<0?null:oo(o.slice(a+1));if(r in t){let u=t[r];Ut(u)||(u=t[r]=[u]),u.push(i)}else t[r]=i}return t}function ql(e){let t="";for(let s in e){const n=e[s];if(s=Fp(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ut(n)?n.map(o=>o&&er(o)):[n&&er(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function rm(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ut(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const lm=Symbol(""),Xl=Symbol(""),ma=Symbol(""),Hr=Symbol(""),nr=Symbol("");function An(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function ps(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,u)=>{const c=p=>{p===!1?u(pn(We.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?u(p):sm(p)?u(pn(We.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),i())},f=a(()=>e.call(n&&n.instances[o],t,s,c));let d=Promise.resolve(f);e.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function Oa(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const i in r.components){let u=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(Dc(u)){const c=(u.__vccOpts||u)[t];c&&a.push(ps(c,s,n,r,i,o))}else{let c=u();a.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${r.path}"`);const d=Np(f)?f.default:f;r.mods[i]=f,r.components[i]=d;const p=(d.__vccOpts||d)[t];return p&&ps(p,s,n,r,i,o)()}))}}return a}function im(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const i=t.matched[r];i&&(e.matched.find(c=>fn(c,i))?n.push(i):s.push(i));const u=e.matched[r];u&&(t.matched.find(c=>fn(c,u))||o.push(u))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let cm=()=>location.protocol+"//"+location.host;function Wc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(r);return i[0]!=="/"&&(i="/"+i),zl(i,"")}return zl(s,e)+n+o}function um(e,t,s,n){let o=[],a=[],r=null;const i=({state:p})=>{const h=Wc(e,location),g=s.value,y=t.value;let $=0;if(p){if(s.value=h,t.value=p,r&&r===g){r=null;return}$=y?p.position-y.position:0}else n(h);o.forEach(S=>{S(s.value,g,{delta:$,type:tr.pop,direction:$?$>0?Ea.forward:Ea.back:Ea.unknown})})};function u(){r=s.value}function c(p){o.push(p);const h=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(h),h}function f(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ae({},p.state,{scroll:pa()}),"")}}function d(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:u,listen:c,destroy:d}}function Ql(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?pa():null}}function dm(e){const{history:t,location:s}=window,n={value:Wc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(u,c,f){const d=e.indexOf("#"),p=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+u:cm()+e+u;try{t[f?"replaceState":"pushState"](c,"",p),o.value=c}catch(h){console.error(h),s[f?"replace":"assign"](p)}}function r(u,c){a(u,Ae({},t.state,Ql(o.value.back,u,o.value.forward,!0),c,{position:o.value.position}),!0),n.value=u}function i(u,c){const f=Ae({},o.value,t.state,{forward:u,scroll:pa()});a(f.current,f,!0),a(u,Ae({},Ql(n.value,u,null),{position:f.position+1},c),!1),n.value=u}return{location:n,state:o,push:i,replace:r}}function fm(e){e=Yp(e);const t=dm(e),s=um(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=Ae({location:"",base:e,go:n,createHref:Xp.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function pm(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),fm(e)}let Ds=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ze=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ze||{});const mm={type:Ds.Static,value:""},vm=/[a-zA-Z0-9_]/;function hm(e){if(!e)return[[]];if(e==="/")return[[mm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${c}": ${h}`)}let s=Ze.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let i=0,u,c="",f="";function d(){c&&(s===Ze.Static?a.push({type:Ds.Static,value:c}):s===Ze.Param||s===Ze.ParamRegExp||s===Ze.ParamRegExpEnd?(a.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ds.Param,value:c,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&s!==Ze.ParamRegExp){n=s,s=Ze.EscapeNext;continue}switch(s){case Ze.Static:u==="/"?(c&&d(),r()):u===":"?(d(),s=Ze.Param):p();break;case Ze.EscapeNext:p(),s=n;break;case Ze.Param:u==="("?s=Ze.ParamRegExp:vm.test(u)?p():(d(),s=Ze.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case Ze.ParamRegExp:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:s=Ze.ParamRegExpEnd:f+=u;break;case Ze.ParamRegExpEnd:d(),s=Ze.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===Ze.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),r(),o}const Zl="[^/]+?",gm={sensitive:!1,strict:!1,start:!0,end:!0};var ht=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ht||{});const ym=/[.+*?^${}()[\]/\\]/g;function bm(e,t){const s=Ae({},gm,t),n=[];let o=s.start?"^":"";const a=[];for(const c of e){const f=c.length?[]:[ht.Root];s.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const p=c[d];let h=ht.Segment+(s.sensitive?ht.BonusCaseSensitive:0);if(p.type===Ds.Static)d||(o+="/"),o+=p.value.replace(ym,"\\$&"),h+=ht.Static;else if(p.type===Ds.Param){const{value:g,repeatable:y,optional:$,regexp:S}=p;a.push({name:g,repeatable:y,optional:$});const _=S||Zl;if(_!==Zl){h+=ht.BonusCustomRegExp;try{`${_}`}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+x.message)}}let w=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=$&&c.length<2?`(?:/${w})`:"/"+w),$&&(w+="?"),o+=w,h+=ht.Dynamic,$&&(h+=ht.BonusOptional),y&&(h+=ht.BonusRepeatable),_===".*"&&(h+=ht.BonusWildcard)}f.push(h)}n.push(f)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=ht.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function i(c){const f=c.match(r),d={};if(!f)return null;for(let p=1;p<f.length;p++){const h=f[p]||"",g=a[p-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function u(c){let f="",d=!1;for(const p of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const h of p)if(h.type===Ds.Static)f+=h.value;else if(h.type===Ds.Param){const{value:g,repeatable:y,optional:$}=h,S=g in c?c[g]:"";if(Ut(S)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Ut(S)?S.join("/"):S;if(!_)if($)p.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=_}}return f||"/"}return{re:r,score:n,keys:a,parse:i,stringify:u}}function _m(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===ht.Static+ht.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ht.Static+ht.Segment?1:-1:0}function Vc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=_m(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(ei(n))return 1;if(ei(o))return-1}return o.length-n.length}function ei(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const wm={strict:!1,end:!0,sensitive:!1};function Sm(e,t,s){const n=bm(hm(e.path),s),o=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Cm(e,t){const s=[],n=new Map;t=Gl(wm,t);function o(d){return n.get(d)}function a(d,p,h){const g=!h,y=si(d);y.aliasOf=h&&h.record;const $=Gl(t,d),S=[y];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const B of x)S.push(si(Ae({},y,{components:h?h.record.components:y.components,path:B,aliasOf:h?h.record:y})))}let _,w;for(const x of S){const{path:B}=x;if(p&&B[0]!=="/"){const V=p.record.path,j=V[V.length-1]==="/"?"":"/";x.path=p.record.path+(B&&j+B)}if(_=Sm(x,p,$),h?h.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),g&&d.name&&!ni(_)&&r(d.name)),Kc(_)&&u(_),y.children){const V=y.children;for(let j=0;j<V.length;j++)a(V[j],_,h&&h.children[j])}h=h||_}return w?()=>{r(w)}:Vn}function r(d){if(jc(d)){const p=n.get(d);p&&(n.delete(d),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(d);p>-1&&(s.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function i(){return s}function u(d){const p=xm(d,s);s.splice(p,0,d),d.record.name&&!ni(d)&&n.set(d.record.name,d)}function c(d,p){let h,g={},y,$;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw pn(We.MATCHER_NOT_FOUND,{location:d});$=h.record.name,g=Ae(ti(p.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&ti(d.params,h.keys.map(w=>w.name))),y=h.stringify(g)}else if(d.path!=null)y=d.path,h=s.find(w=>w.re.test(y)),h&&(g=h.parse(y),$=h.record.name);else{if(h=p.name?n.get(p.name):s.find(w=>w.re.test(p.path)),!h)throw pn(We.MATCHER_NOT_FOUND,{location:d,currentLocation:p});$=h.record.name,g=Ae({},p.params,d.params),y=h.stringify(g)}const S=[];let _=h;for(;_;)S.unshift(_.record),_=_.parent;return{name:$,path:y,params:g,matched:S,meta:km(S)}}e.forEach(d=>a(d));function f(){s.length=0,n.clear()}return{addRoute:a,resolve:c,removeRoute:r,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function ti(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function si(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:$m(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function $m(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function ni(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function km(e){return e.reduce((t,s)=>Ae(t,s.meta),{})}function xm(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Vc(e,t[a])<0?n=a:s=a+1}const o=Am(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Am(e){let t=e;for(;t=t.parent;)if(Kc(t)&&Vc(e,t)===0)return t}function Kc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function oi(e){const t=Lt(ma),s=Lt(Hr),n=T(()=>{const u=M(e.to);return t.resolve(u)}),o=T(()=>{const{matched:u}=n.value,{length:c}=u,f=u[c-1],d=s.matched;if(!f||!d.length)return-1;const p=d.findIndex(fn.bind(null,f));if(p>-1)return p;const h=ai(u[c-2]);return c>1&&ai(f)===h&&d[d.length-1].path!==h?d.findIndex(fn.bind(null,u[c-2])):p}),a=T(()=>o.value>-1&&Im(s.params,n.value.params)),r=T(()=>o.value>-1&&o.value===s.matched.length-1&&Fc(s.params,n.value.params));function i(u={}){if(Om(u)){const c=t[M(e.replace)?"replace":"push"](M(e.to)).catch(Vn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:T(()=>n.value.href),isActive:a,isExactActive:r,navigate:i}}function Tm(e){return e.length===1?e[0]:e}const Nm=rc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:oi,setup(e,{slots:t}){const s=Gt(oi(e)),{options:n}=Lt(ma),o=T(()=>({[ri(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[ri(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&Tm(t.default(s));return e.custom?a:Ec("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),Em=Nm;function Om(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Im(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ut(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function ai(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ri=(e,t,s)=>e??t??s,Rm=rc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Lt(nr),o=T(()=>e.route||n.value),a=Lt(Xl,0),r=T(()=>{let c=M(a);const{matched:f}=o.value;let d;for(;(d=f[c])&&!d.components;)c++;return c}),i=T(()=>o.value.matched[r.value]);Eo(Xl,T(()=>r.value+1)),Eo(lm,i),Eo(nr,o);const u=I();return _t(()=>[u.value,i.value,e.name],([c,f,d],[p,h,g])=>{f&&(f.instances[d]=c,h&&h!==f&&c&&c===p&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),c&&f&&(!h||!fn(f,h)||!p)&&(f.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=o.value,f=e.name,d=i.value,p=d&&d.components[f];if(!p)return li(s.default,{Component:p,route:c});const h=d.props[f],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,$=Ec(p,Ae({},g,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[f]=null)},ref:u}));return li(s.default,{Component:$,route:c})||$}}});function li(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Dm=Rm;function Pm(e){const t=Cm(e.routes,e),s=e.parseQuery||am,n=e.stringifyQuery||ql,o=e.history,a=An(),r=An(),i=An(),u=Td(cs);let c=cs;zs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ta.bind(null,G=>""+G),d=Ta.bind(null,Hp),p=Ta.bind(null,oo);function h(G,re){let ne,ue;return jc(G)?(ne=t.getRecordMatcher(G),ue=re):ue=G,t.addRoute(ue,ne)}function g(G){const re=t.getRecordMatcher(G);re&&t.removeRoute(re)}function y(){return t.getRoutes().map(G=>G.record)}function $(G){return!!t.getRecordMatcher(G)}function S(G,re){if(re=Ae({},re||u.value),typeof G=="string"){const L=Na(s,G,re.path),K=t.resolve({path:L.path},re),Y=o.createHref(L.fullPath);return Ae(L,K,{params:p(K.params),hash:oo(L.hash),redirectedFrom:void 0,href:Y})}let ne;if(G.path!=null)ne=Ae({},G,{path:Na(s,G.path,re.path).path});else{const L=Ae({},G.params);for(const K in L)L[K]==null&&delete L[K];ne=Ae({},G,{params:d(L)}),re.params=d(re.params)}const ue=t.resolve(ne,re),Se=G.hash||"";ue.params=f(p(ue.params));const C=Kp(n,Ae({},G,{hash:Up(Se),path:ue.path})),k=o.createHref(C);return Ae({fullPath:C,hash:Se,query:n===ql?rm(G.query):G.query||{}},ue,{redirectedFrom:void 0,href:k})}function _(G){return typeof G=="string"?Na(s,G,u.value.path):Ae({},G)}function w(G,re){if(c!==G)return pn(We.NAVIGATION_CANCELLED,{from:re,to:G})}function x(G){return j(G)}function B(G){return x(Ae(_(G),{replace:!0}))}function V(G,re){const ne=G.matched[G.matched.length-1];if(ne&&ne.redirect){const{redirect:ue}=ne;let Se=typeof ue=="function"?ue(G,re):ue;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=_(Se):{path:Se},Se.params={}),Ae({query:G.query,hash:G.hash,params:Se.path!=null?{}:G.params},Se)}}function j(G,re){const ne=c=S(G),ue=u.value,Se=G.state,C=G.force,k=G.replace===!0,L=V(ne,ue);if(L)return j(Ae(_(L),{state:typeof L=="object"?Ae({},Se,L.state):Se,force:C,replace:k}),re||ne);const K=ne;K.redirectedFrom=re;let Y;return!C&&Gp(n,ue,ne)&&(Y=pn(We.NAVIGATION_DUPLICATED,{to:K,from:ue}),R(ue,ue,!0,!1)),(Y?Promise.resolve(Y):de(K,ue)).catch(z=>Yt(z)?Yt(z,We.NAVIGATION_GUARD_REDIRECT)?z:P(z):W(z,K,ue)).then(z=>{if(z){if(Yt(z,We.NAVIGATION_GUARD_REDIRECT))return j(Ae({replace:k},_(z.to),{state:typeof z.to=="object"?Ae({},Se,z.to.state):Se,force:C}),re||K)}else z=ce(K,ue,!0,k,Se);return pe(K,ue,z),z})}function Q(G,re){const ne=w(G,re);return ne?Promise.reject(ne):Promise.resolve()}function q(G){const re=Ee.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(G):G()}function de(G,re){let ne;const[ue,Se,C]=im(G,re);ne=Oa(ue.reverse(),"beforeRouteLeave",G,re);for(const L of ue)L.leaveGuards.forEach(K=>{ne.push(ps(K,G,re))});const k=Q.bind(null,G,re);return ne.push(k),je(ne).then(()=>{ne=[];for(const L of a.list())ne.push(ps(L,G,re));return ne.push(k),je(ne)}).then(()=>{ne=Oa(Se,"beforeRouteUpdate",G,re);for(const L of Se)L.updateGuards.forEach(K=>{ne.push(ps(K,G,re))});return ne.push(k),je(ne)}).then(()=>{ne=[];for(const L of C)if(L.beforeEnter)if(Ut(L.beforeEnter))for(const K of L.beforeEnter)ne.push(ps(K,G,re));else ne.push(ps(L.beforeEnter,G,re));return ne.push(k),je(ne)}).then(()=>(G.matched.forEach(L=>L.enterCallbacks={}),ne=Oa(C,"beforeRouteEnter",G,re,q),ne.push(k),je(ne))).then(()=>{ne=[];for(const L of r.list())ne.push(ps(L,G,re));return ne.push(k),je(ne)}).catch(L=>Yt(L,We.NAVIGATION_CANCELLED)?L:Promise.reject(L))}function pe(G,re,ne){i.list().forEach(ue=>q(()=>ue(G,re,ne)))}function ce(G,re,ne,ue,Se){const C=w(G,re);if(C)return C;const k=re===cs,L=zs?history.state:{};ne&&(ue||k?o.replace(G.fullPath,Ae({scroll:k&&L&&L.scroll},Se)):o.push(G.fullPath,Se)),u.value=G,R(G,re,ne,k),P()}let ge;function $e(){ge||(ge=o.listen((G,re,ne)=>{if(!xe.listening)return;const ue=S(G),Se=V(ue,xe.currentRoute.value);if(Se){j(Ae(Se,{replace:!0,force:!0}),ue).catch(Vn);return}c=ue;const C=u.value;zs&&em(Yl(C.fullPath,ne.delta),pa()),de(ue,C).catch(k=>Yt(k,We.NAVIGATION_ABORTED|We.NAVIGATION_CANCELLED)?k:Yt(k,We.NAVIGATION_GUARD_REDIRECT)?(j(Ae(_(k.to),{force:!0}),ue).then(L=>{Yt(L,We.NAVIGATION_ABORTED|We.NAVIGATION_DUPLICATED)&&!ne.delta&&ne.type===tr.pop&&o.go(-1,!1)}).catch(Vn),Promise.reject()):(ne.delta&&o.go(-ne.delta,!1),W(k,ue,C))).then(k=>{k=k||ce(ue,C,!1),k&&(ne.delta&&!Yt(k,We.NAVIGATION_CANCELLED)?o.go(-ne.delta,!1):ne.type===tr.pop&&Yt(k,We.NAVIGATION_ABORTED|We.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),pe(ue,C,k)}).catch(Vn)}))}let me=An(),fe=An(),J;function W(G,re,ne){P(G);const ue=fe.list();return ue.length?ue.forEach(Se=>Se(G,re,ne)):console.error(G),Promise.reject(G)}function N(){return J&&u.value!==cs?Promise.resolve():new Promise((G,re)=>{me.add([G,re])})}function P(G){return J||(J=!G,$e(),me.list().forEach(([re,ne])=>G?ne(G):re()),me.reset()),G}function R(G,re,ne,ue){const{scrollBehavior:Se}=e;if(!zs||!Se)return Promise.resolve();const C=!ne&&tm(Yl(G.fullPath,0))||(ue||!ne)&&history.state&&history.state.scroll||null;return Qn().then(()=>Se(G,re,C)).then(k=>k&&Zp(k)).catch(k=>W(k,G,re))}const te=G=>o.go(G);let Ce;const Ee=new Set,xe={currentRoute:u,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:y,resolve:S,options:e,push:x,replace:B,go:te,back:()=>te(-1),forward:()=>te(1),beforeEach:a.add,beforeResolve:r.add,afterEach:i.add,onError:fe.add,isReady:N,install(G){G.component("RouterLink",Em),G.component("RouterView",Dm),G.config.globalProperties.$router=xe,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>M(u)}),zs&&!Ce&&u.value===cs&&(Ce=!0,x(o.location).catch(ue=>{}));const re={};for(const ue in cs)Object.defineProperty(re,ue,{get:()=>u.value[ue],enumerable:!0});G.provide(ma,xe),G.provide(Hr,zi(re)),G.provide(nr,u);const ne=G.unmount;Ee.add(G),G.unmount=function(){Ee.delete(G),Ee.size<1&&(c=cs,ge&&ge(),ge=null,u.value=cs,Ce=!1,J=!1),ne()}}};function je(G){return G.reduce((re,ne)=>re.then(()=>q(ne)),Promise.resolve())}return xe}function Lm(){return Lt(ma)}function dT(e){return Lt(Hr)}function $o(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let i=0;i<s.length;i++){const u=s[i];if(u.startsWith("%"))continue;if(a){u.includes("}")?(r+=u.substring(0,u.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=u+`
`;continue}if(u.includes("{")){const d=u.indexOf("{");if(u.includes("}")){const p=u.indexOf("}");o.push(u.substring(d+1,p).trim())}else r=u.substring(d+1)+`
`,a=!0;continue}const c=u.match(/\[Play\s+"([NESW])"\](\w+)/);if(c&&n){n.openingLeader=c[1],n.openingLead=c[2];continue}const f=u.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,p]=f;if(d==="Board")n&&(n.commentary=ui(o),n.steps=ii(o),n.auction=ci(n.auction),t.push(n)),n=Bm(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=Mm(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const d=u.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const p=Fm(d);n.auction.push(...p)}}}return n&&(n.commentary=ui(o),n.steps=ii(o),n.auction=ci(n.auction),t.push(n)),t}function ii(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const i=n[r],u=i.match(/^\[BID\s+([^\]]+)\]$/i),c=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(u){const p=Wr(u[1]).replace(/!/g,"").trim(),h=a.trim();a="";let g="";if(r+1<n.length){const S=n[r+1];S.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=S.trim(),r++)}const y=Tn(h,"bid"),$=Tn(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:$.text,showSeatsAfter:$.showSeats})}else if(c||f){const p=c?"next":"rotate";a.trim()&&o.push(Tn(a.trim(),p)),a=""}else if(d){const p=d[1].trim();let h;if(p.toLowerCase().startsWith("any:")?h={cards:p.substring(4).split(",").map(y=>Go(y.trim())),anyOf:!0}:h={card:Go(p)},a.trim()){const g=Tn(a.trim(),"choose-card");g.chooseCard=h,o.push(g)}a=""}else a+=i}if(a.trim()){const r=Tn(a.trim(),"end");o.push(r)}return o}function Tn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const w=[];_.includes("N")&&w.push("N"),_.includes("E")&&w.push("E"),_.includes("S")&&w.push("S"),_.includes("W")&&w.push("W"),w.length>0&&(s=w)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const i=/\[RESET\]/i.test(e);let u=null;const c=e.match(/\[choose-card\s+([^\]]+)\]/i);if(c){const _=c[1].trim();_.toLowerCase().startsWith("any:")?u={cards:_.substring(4).split(",").map(x=>Go(x.trim())),anyOf:!0}:u={card:Go(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),p&&(f=!0);const h=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const $=e.match(/\[showcards\s+([^\]]+)\]/i);if($){const _=$[1].trim();y={};const w=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let x;for(;(x=w.exec(_))!==null;){const B=x[1].toUpperCase(),V=x[2].split(",").map(j=>j.trim().toUpperCase());y[B]=V}Object.keys(y).length===0&&(y=null)}let S=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Wr(S),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:h,clearCommentary:g,showcards:y,chooseCard:u}}function Bm(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Go(e){return e.toUpperCase().replace("10","T")}function Mm(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(r+1)}for(let i=0;i<4;i++){const u=(o+i)%4,c=n[u];t[c]=Um(s[i])}return t}function Um(e){const t=e.split(".");return t.length!==4?null:{spades:ko(t[0]),hearts:ko(t[1]),diamonds:ko(t[2]),clubs:ko(t[3])}}function ko(e){return e?e.split(""):[]}function ci(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Fm(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>jm(t))}function jm(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function ui(e){return e.length?Wr(e.join(`

`)):""}function Wr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Hm(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function xo(e,t){return Hm(t)[e%4]}const Vr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},di={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Gc=["spades","hearts","diamonds","clubs"];function Ia(e){return e==="T"?"10":e}function Kr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Vr[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function Wm(e){return(di[e.toLowerCase()]||di[e])==="red"?"suit-red":"suit-black"}function Vm(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function or(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Km(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Gc)for(const o of e[n]||[])s+=t[o]||0;return s}function Gm(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Vr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Nn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function zm(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Js(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Jm({observationId:e=null,userId:t,sessionId:s,deal:n,promptIndex:o,auctionSoFar:a,expectedBid:r,studentBid:i,correct:u,attemptNumber:c,timeTakenMs:f,skillPath:d,assignment:p=null,prompts:h=null}){var S,_,w,x,B,V,j,Q,q,de,pe;const g=((S=n.steps)==null?void 0:S.filter(ce=>ce.type==="bid").length)||1,y=n.studentSeat||"S",$=((_=n.hands)==null?void 0:_[y.toLowerCase()])||"";return{observation_id:e||crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:t,session_id:s,deal:{subfolder:n.subfolder||n.category||"Unknown",filename:n.filename||null,deal_number:n.boardNumber||n.dealNumber||null,kind:n.kind||null,dealer:n.dealer||"N",vulnerability:n.vulnerable||"None",student_seat:y,hands:{north:((w=n.hands)==null?void 0:w.N)||((x=n.hands)==null?void 0:x.north)||"",east:((B=n.hands)==null?void 0:B.E)||((V=n.hands)==null?void 0:V.east)||"",south:((j=n.hands)==null?void 0:j.S)||((Q=n.hands)==null?void 0:Q.south)||"",west:((q=n.hands)==null?void 0:q.W)||((de=n.hands)==null?void 0:de.west)||""},full_auction:((pe=n.auction)==null?void 0:pe.join(" "))||"",contract:n.contract||null,declarer:n.declarer||null,lead:n.lead||null},bid_prompt:{prompt_index:o,total_prompts:g,auction_so_far:[...a],expected_bid:r,student_hand:$},result:{student_bid:i,correct:u,attempt_number:c,time_taken_ms:f},skill_path:d,assignment:p,prompts:h||[]}}function zc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Ym(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function qm(){return crypto.randomUUID()}function Xm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Jc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Qm(e){const[t]=e.split("/");return t||"uncategorized"}function Zm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Yc={name:"AES-GCM",length:256},Gr={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function ev(){const e=await crypto.subtle.generateKey(Yc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Us(t)}async function qc(e){const t=Fs(e);return crypto.subtle.importKey("raw",t,Yc,!0,["encrypt","decrypt"])}async function zr(e,t){const s=await qc(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:Us(r),iv:Us(n)}}async function Jr(e,t,s){const n=await qc(s),o=Fs(e),a=Fs(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(r))}async function tv(e){const t=Fs(e);return crypto.subtle.importKey("spki",t,Gr,!0,["encrypt"])}async function sv(e){const t=Fs(e);return crypto.subtle.importKey("pkcs8",t,Gr,!0,["decrypt"])}async function nv(){const e=await crypto.subtle.generateKey(Gr,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Us(t),privateKey:Us(s)}}async function Xc(e,t){const s=await tv(t),n=Fs(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Us(o)}async function ov(e,t){const s=await sv(t),n=Fs(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Us(o)}function av(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function rv(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function lv(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await zr(t,e);return(await Jr(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Us(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Fs(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const ar="bridgePractice",Le=I({}),qe=I(null),_s=I(null),ao=I(!1),va=I(!1);function Qc(){try{const e=localStorage.getItem(ar);if(e){const t=JSON.parse(e);Le.value=t.users||{},qe.value=t.currentUserId||null,_s.value=t.adminViewerId||null}ao.value=!0}catch(e){console.error("Failed to load user store from storage:",e),ao.value=!0}}function Rt(){try{const e=localStorage.getItem(ar),t=e?JSON.parse(e):{};t.users=Le.value,t.currentUserId=qe.value,_s.value&&(t.adminViewerId=_s.value),localStorage.setItem(ar,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function iv({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),i=new Date().toISOString(),u=await ev();let c=null;if(a)try{const d=await fetch(`${a}/keys/admin`);if(d.ok){const p=await d.json();_s.value=p.viewer_id,c={grantee_id:p.viewer_id,encrypted_payload:await Xc(u,p.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:u,role:"student",serverRegistered:!1,adminGrantPayload:c,createdAt:i,updatedAt:i};return Le.value[r]=f,qe.value=r,Rt(),va.value=!0,f}function cv(e,t){if(!Le.value[e])return console.error("User not found:",e),null;const s=Le.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Rt(),s}function uv(e){if(!Le.value[e])return!1;if(delete Le.value[e],qe.value===e){const t=Object.keys(Le.value);qe.value=t.length>0?t[0]:null}return Rt(),!0}function dv(e){return Le.value[e]?(qe.value=e,Rt(),!0):(console.error("User not found:",e),!1)}function fv(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Le.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function pv(e){const t=e.trim().toLowerCase();for(const s of Object.values(Le.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function mv(e){return Le.value[e]||null}function vv(){Le.value={},qe.value=null,_s.value=null,va.value=!1,Rt(),ao.value=!1}function hv(){ao.value||Qc()}async function gv(e){const t=rv(e);if(!t.valid)return{success:!1,error:t.error};if(!await lv(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Le.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),qe.value=e.user_id,Rt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[i.id]=i,qe.value=i.id,Rt(),{success:!0,user:i}}function yv(){const e=Le.value[qe.value];return!e||!e.secretKey?null:av(e)}function bv(){va.value=!1}function _v(){return _s.value}function wv(e){_s.value=e,Rt()}async function Sv(e){const t=Le.value[qe.value];return!t||!t.secretKey?null:Xc(t.secretKey,e)}async function Cv(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function $v(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[a.id]=a,qe.value=a.id,Rt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function kv(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[a.id]=a,qe.value=a.id,Rt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function xv(){if(!qe.value)return;const e=Le.value[qe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Rt()}catch{}}function Je(){const e=T(()=>qe.value&&Le.value[qe.value]||null),t=T(()=>Object.values(Le.value)),s=T(()=>Object.keys(Le.value).length>0),n=T(()=>Object.keys(Le.value).length),o=T(()=>qe.value!==null&&!!Le.value[qe.value]);return{users:Le,currentUserId:qe,adminViewerId:_s,initialized:ao,showKeyBackupModal:va,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:hv,loadFromStorage:Qc,saveToStorage:Rt,createUser:iv,updateUser:cv,deleteUser:uv,switchUser:dv,findUserByName:fv,findUserByEmail:pv,getUser:mv,clearUsers:vv,restoreFromBackup:gv,getKeyBackup:yv,dismissKeyBackupModal:bv,getAdminViewerId:_v,setAdminViewerId:wv,createGrantForViewer:Sv,requestRecovery:Cv,claimRecovery:$v,claimRecoveryByCode:kv,syncRole:xv}}const rr="bridgePractice",rt=I({}),Ke=I(null),Dt=I(!1),mn=I(!1);function Zc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(u=>u.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:i}}function eu(){try{const e=localStorage.getItem(rr);if(e){const t=JSON.parse(e);rt.value=t.assignments||{},Ke.value=t.currentAssignmentId||null,Ke.value&&rt.value[Ke.value]&&(Dt.value=!0)}mn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),mn.value=!0}}function js(){try{const e=localStorage.getItem(rr),t=e?JSON.parse(e):{};t.assignments=rt.value,t.currentAssignmentId=Ke.value,localStorage.setItem(rr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function tu({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(rt.value).find(c=>c.name===e);if(a){const c=new Set(a.lessons);for(const f of n)c.add(f);return a.lessons=Array.from(c),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Ke.value=a.id,Dt.value=!0,js(),a}const r=crypto.randomUUID(),i=new Date().toISOString(),u={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return rt.value[r]=u,Ke.value=r,Dt.value=!0,js(),u}function Av(){if(mn.value)return;eu();const e=Zc();e&&tu(e),mn.value=!0}function Tv(e){if(!Dt.value||!Ke.value)return!1;const t=rt.value[Ke.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Nv(e){if(!Ke.value)return;const t=rt.value[Ke.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),js())}function Ev(e){if(!Ke.value||!Dt.value)return!1;const t=rt.value[Ke.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,js(),!0}function Ov(){if(!Dt.value||!Ke.value)return null;const e=rt.value[Ke.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Iv(){Dt.value=!1}function Rv(){Ke.value&&rt.value[Ke.value]&&(Dt.value=!0)}function Dv(e){return rt.value[e]||null}function Pv(){return Object.values(rt.value)}function Lv(e){return rt.value[e]?(delete rt.value[e],Ke.value===e&&(Ke.value=null,Dt.value=!1),js(),!0):!1}function Bv(){rt.value={},Ke.value=null,Dt.value=!1,mn.value=!1,js()}function ha(){const e=T(()=>Ke.value&&rt.value[Ke.value]||null),t=T(()=>Dt.value&&e.value!==null),s=T(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=T(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:rt,currentAssignmentId:Ke,inAssignmentMode:Dt,initialized:mn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Av,loadFromStorage:eu,saveToStorage:js,createAssignment:tu,isLessonInAssignment:Tv,setTotalDeals:Nv,recordDealCompletion:Ev,getAssignmentTag:Ov,exitAssignmentMode:Iv,returnToAssignmentMode:Rv,getAssignment:Dv,getAllAssignments:Pv,deleteAssignment:Lv,clearAssignments:Bv,parseAssignmentFromUrl:Zc}}const lr="bridgePractice",Ve=I([]),vn=I(null),hn=I(!1),Bs=I({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function su(){try{const e=localStorage.getItem(lr);if(e){const t=JSON.parse(e);Ve.value=t.pendingObservations||[]}hn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),hn.value=!0}}function Hs(){try{const e=localStorage.getItem(lr),t=e?JSON.parse(e):{};t.pendingObservations=Ve.value,localStorage.setItem(lr,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function nu(){hn.value||su(),vn.value||ou()}function ou(){vn.value=qm(),Bs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Mv({observationId:e=null,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:r,attemptNumber:i,timeTakenMs:u,prompts:c}){var _,w;const f=Je(),d=ha();hn.value||nu();const p=f.currentUser.value;if(!p)return{success:!1,error:"No authenticated user"};let h=t.skillPath;if(!h){const x=t.subfolder||t.category||"Unknown";h=Xm(x)}const g=d.getAssignmentTag(),y=e&&Ve.value.some(x=>{var B;return((B=x.metadata)==null?void 0:B.observation_id)===e}),$=Jm({observationId:e,userId:p.id,sessionId:vn.value,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:r,attemptNumber:i,timeTakenMs:u,skillPath:h,assignment:g,prompts:c}),S=Ym($);if(!S.valid)return console.error("Invalid observation:",S.errors),{success:!1,error:S.errors.join(", ")};if(y||(Bs.value.totalObservations++,r?Bs.value.correctCount++:Bs.value.wrongCount++),p.dataConsent&&p.secretKey){const x=await Uv($,p);x.success||(console.warn("Failed to encrypt observation, storing unencrypted:",x.error),fi($,((_=p.classrooms)==null?void 0:_[0])||null))}else fi($,((w=p.classrooms)==null?void 0:w[0])||null);return{success:!0,observation:$}}async function Uv(e,t){var s;try{const{encrypted_data:n,iv:o}=await zr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=zc(e,a),i={encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()},u=Ve.value.findIndex(c=>{var f;return((f=c.metadata)==null?void 0:f.observation_id)===r.observation_id});return u!==-1?Ve.value[u]=i:Ve.value.push(i),Hs(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function fi(e,t){const s=zc(e,t),n={observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()},o=Ve.value.findIndex(a=>{var r;return((r=a.metadata)==null?void 0:r.observation_id)===s.observation_id});o!==-1?Ve.value[o]=n:Ve.value.push(n),Hs()}async function Fv(){const t=Je().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Ve.value.length;n++){const o=Ve.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await zr(o.observation,t.secretKey);Ve.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Hs(),s}function jv(){return Ve.value.length}function Hv(){return[...Ve.value]}function Wv(e){Ve.value=Ve.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Hs()}function Vv(){Ve.value=[],Hs()}function Kv(){return{...Bs.value}}function Gv(){Ve.value=[],vn.value=null,Bs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},hn.value=!1,Hs()}function Ss(){const e=T(()=>Ve.value.length),t=T(()=>Ve.value.length>0),s=T(()=>Ve.value.some(o=>!o.encrypted)),n=T(()=>vn.value);return{pendingObservations:Ve,sessionId:vn,sessionStats:Bs,initialized:hn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:nu,startNewSession:ou,recordObservation:Mv,encryptPendingObservations:Fv,getPendingCount:jv,getPendingObservations:Hv,removeSyncedObservations:Wv,clearPendingObservations:Vv,getSessionStats:Kv,reset:Gv,loadFromStorage:su,saveToStorage:Hs}}function zv(){const e=Ss(),t=I(null),s=I(0),n=I(!1),o=I(!1),a=Gt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Gt({answered:{},wrongCard:null,correctCard:null}),i=Gt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{},promptHistory:[],observationId:null}),u=I({N:[],E:[],S:[],W:[]}),c=I(null),f=I(1),d=T(()=>{var A;return((A=t.value)==null?void 0:A.steps)||[]}),p=T(()=>d.value.length>0),h=T(()=>d.value[s.value]||null),g=T(()=>d.value.some(A=>A.type==="bid")),y=T(()=>{var A;return((A=h.value)==null?void 0:A.type)==="bid"}),$=T(()=>{var A;for(let E=s.value;E>=0;E--)if((A=d.value[E])!=null&&A.clearCommentary)return E;return 0}),S=T(()=>{var A;return((A=t.value)==null?void 0:A.studentSeat)||"S"}),_=T(()=>t.value?xo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),w=T(()=>_.value===S.value),x=T(()=>{var U,H;if(!y.value||!w.value||a.auctionComplete||o.value)return!1;const A=h.value;if(!(A!=null&&A.bid))return!1;const E=(H=(U=t.value)==null?void 0:U.auction)==null?void 0:H[a.currentBidIndex];return E?ee(A.bid)===ee(E):!1}),B=T(()=>{for(let A=a.displayedBids.length-1;A>=0;A--){const E=a.displayedBids[A];if(E&&E!=="Pass"&&E!=="X"&&E!=="XX")return E}return null}),V=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;const A=a.displayedBids[a.displayedBids.length-1];if(A==="X"||A==="XX"||!B.value)return!1;let E=-1;for(let D=a.displayedBids.length-1;D>=0;D--){const X=a.displayedBids[D];if(X&&X!=="Pass"&&X!=="X"&&X!=="XX"){E=D;break}}if(E===-1)return!1;const U=xo(E,t.value.auctionDealer||t.value.dealer),H=_.value;return(H==="N"||H==="S")&&(U==="E"||U==="W")||(H==="E"||H==="W")&&(U==="N"||U==="S")}),j=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let A=a.displayedBids.length-1;A>=0;A--){const E=a.displayedBids[A];if(E!=="Pass"){if(E==="XX")return!1;if(E==="X"){const U=xo(A,t.value.auctionDealer||t.value.dealer),H=_.value;return!(H==="N"&&U==="S"||H==="S"&&U==="N"||H==="E"&&U==="W"||H==="W"&&U==="E")}return!1}}return!1}),Q=T(()=>{const A=h.value;return A!=null&&A.chooseCard?!r.answered[s.value]:!1}),q=T(()=>{var A;return((A=h.value)==null?void 0:A.chooseCard)||null}),de=T(()=>{if(!t.value)return[];const A=["N","E","S","W"];if(!p.value)return[];let E=null;const U=d.value;for(let H=0;H<=s.value&&H<U.length;H++){const O=U[H];O!=null&&O.showSeats&&(E=O.showSeats),O!=null&&O.showSeatsAfter&&(H<s.value||H===s.value&&o.value)&&(E=O.showSeatsAfter)}return E?A.filter(H=>!E.includes(H)):A}),pe=T(()=>{if(!t.value||!p.value)return null;let A={};const E=d.value;for(let U=0;U<=s.value&&U<E.length;U++){const H=E[U];if(H!=null&&H.showcards)for(const[O,D]of Object.entries(H.showcards))A[O]=D;if(H!=null&&H.showSeats)for(const O of H.showSeats)delete A[O];if(H!=null&&H.showSeatsAfter&&(U<s.value||U===s.value&&o.value))for(const O of H.showSeatsAfter)delete A[O]}return Object.keys(A).length>0?A:null}),ce=T(()=>{if(!t.value||!p.value)return{};let A={},E=new Set;const U=d.value;for(let O=0;O<=s.value&&O<U.length;O++){const D=U[O];if(D!=null&&D.showcards)for(const[X,oe]of Object.entries(D.showcards))A[X]=oe;if(D!=null&&D.showSeats)for(const X of D.showSeats)E.add(X)}const H={};for(const[O,D]of Object.entries(A))E.has(O)&&(H[O]=D);return H}),ge=T(()=>{const A=pe.value;return A?Object.keys(A):[]}),$e=T(()=>{const A=de.value,E=ge.value;return E.length?A.filter(U=>!E.includes(U)):A});function me(A){const E={spades:[],hearts:[],diamonds:[],clubs:[]},U={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const H of A){const O=H[0].toUpperCase(),D=H.slice(1).toUpperCase(),X=U[O];X&&E[X].push(D)}return E}const fe=T(()=>{var U,H;if(!((U=t.value)!=null&&U.hands))return{};if((H=h.value)!=null&&H.reset)return t.value.hands;const A=pe.value,E={};for(const O of["N","E","S","W"]){if(A&&A[O]){E[O]=me(A[O]);continue}const D=t.value.hands[O];if(!D){E[O]=null;continue}E[O]={spades:[...D.spades||[]],hearts:[...D.hearts||[]],diamonds:[...D.diamonds||[]],clubs:[...D.clubs||[]]};for(const X of u.value[O]){const oe={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[X.suit];if(oe&&E[O][oe]){const le=E[O][oe].indexOf(X.card);le!==-1&&E[O][oe].splice(le,1)}}}return E}),J=T(()=>!(g.value&&!a.auctionComplete)),W=T(()=>{if(!p.value)return!0;let A=!0;const E=d.value;for(let U=0;U<=s.value&&U<E.length;U++){const H=E[U];(H==null?void 0:H.showAuction)!==null&&(H==null?void 0:H.showAuction)!==void 0&&(A=H.showAuction)}return A}),N=T(()=>{var E;if(!p.value)return!1;const A=d.value;for(let U=0;U<=s.value&&U<A.length;U++)if((E=A[U])!=null&&E.showLead)return!0;return!1}),P=T(()=>{var A;return(A=t.value)!=null&&A.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),R=T(()=>{if(!p.value||n.value)return!0;const A=h.value;return(A==null?void 0:A.type)==="end"&&!Q.value}),te=T(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function Ce(){var E;u.value={N:[],E:[],S:[],W:[]};const A=d.value;for(let U=0;U<=s.value&&U<A.length;U++){const H=A[U];if((E=H==null?void 0:H.plays)!=null&&E.length)for(const O of H.plays){const D=O.split(/[,\s]+/);for(const X of D){if(!X)continue;const oe=X.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(oe){const le=oe[1].toUpperCase(),ke=oe[2].toUpperCase();let ye=oe[3].toUpperCase();ye==="10"&&(ye="T"),u.value[le].push({suit:ke,card:ye})}}}}}function Ee(){if(!t.value)return;const A=t.value.auction||[],E=xe(s.value);if(E===-1){for(;a.currentBidIndex<A.length;)a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,c.value=null;return}const U=d.value[E],H=ee(U.bid);for(;a.currentBidIndex<A.length;){const O=xo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),D=ee(A[a.currentBidIndex]);if(O===S.value&&D===H){c.value=Date.now(),f.value=1;return}a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,c.value=null}function xe(A){const E=d.value;for(let U=A;U<E.length;U++)if(E[U].type==="bid")return U;return-1}function je(A){if(!t.value||a.auctionComplete||!y.value)return!1;const E=t.value.auction[a.currentBidIndex],U=ee(A)===ee(E),H=s.value;U?H in i.wrongStepIndices&&delete i.wrongStepIndices[H]:(i.wrongStepIndices[H]=!0,i.boardHadWrong=!0);const O=d.value.slice(0,H+1).filter(ke=>ke.type==="bid").length-1,D=c.value?Date.now()-c.value:0;i.promptHistory.push({type:"bid",prompt_index:O,auction_so_far:[...a.displayedBids],expected_bid:E,student_bid:A,correct:U,time_ms:D}),U||Y(!1);const X=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,c.value=null,f.value=1,U?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=A,a.correctBid=E,a.wrongBidIndex=X);const oe=s.value+1,le=d.value[oe];return(le==null?void 0:le.type)==="bid"?(s.value=oe,o.value=!1,Ee()):(o.value=!0,G(),s.value>=d.value.length-1&&C()),U}function G(){var E;if(a.auctionComplete)return;if(xe(s.value+1)===-1){const U=((E=t.value)==null?void 0:E.auction)||[];for(;a.currentBidIndex<U.length;)a.displayedBids.push(U[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function re(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function ne(A,E){if(!t.value||!Q.value)return!1;const U=q.value;if(!U)return!1;const H=(A+E).toUpperCase(),O=s.value;let D=!1,X="";U.anyOf?(D=U.cards.includes(H),X=U.cards[0]):(D=H===U.card,X=U.card),D?O in i.wrongStepIndices&&delete i.wrongStepIndices[O]:(i.wrongStepIndices[O]=!0,i.boardHadWrong=!0);const oe=c.value?Date.now()-c.value:0;return i.promptHistory.push({type:"card",expected_card:X,student_card:H,correct:D,time_ms:oe}),c.value=null,D||Y(!1),r.answered[O]=!0,D?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=H,r.correctCard=X),Se(),D}function ue(){r.wrongCard=null,r.correctCard=null}function Se(){var A,E;if(x.value||Q.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,Ce(),((A=d.value[s.value])==null?void 0:A.type)==="bid"&&Ee(),((E=d.value[s.value])==null?void 0:E.type)==="choose-card"&&(c.value=Date.now()),s.value>=d.value.length-1){const U=d.value[s.value];(U==null?void 0:U.type)!=="bid"&&(U==null?void 0:U.type)!=="choose-card"&&C()}return!0}return C(),!1}function C(){n.value=!0,k()}function k(){if(!d.value.some(H=>H.type==="bid"||H.type==="choose-card"))return;i.boardHadWrong?i.wrongCount++:i.correctCount++;const E=Object.keys(i.wrongStepIndices).length===0,U=!i.boardHadWrong||E;Y(U)}function L(){if(re(),ue(),o.value)return o.value=!1,K(s.value),!0;if(s.value>0){const A=s.value-1,E=d.value[A];return r.answered[A]&&delete r.answered[A],(E==null?void 0:E.type)==="bid"&&K(A),s.value=A,n.value=!1,o.value=!1,Ce(),!0}return!1}function K(A){var D;const E=d.value[A];if(!E||E.type!=="bid")return;const U=ee(E.bid),H=((D=t.value)==null?void 0:D.auction)||[];let O=0;for(let X=0;X<H.length;X++)if(ee(H[X])===U){O=X;break}a.currentBidIndex=O,a.displayedBids=H.slice(0,O),a.auctionComplete=!1,c.value=Date.now(),f.value=1}async function Y(A){if(t.value)try{await e.recordObservation({observationId:i.observationId,deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:A?"PASS":"FAIL",correct:A,attemptNumber:1,timeTakenMs:0,prompts:[...i.promptHistory]})}catch(E){console.error("Failed to record board observation:",E)}}function z(A){var E,U;t.value=A,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},i.promptHistory=[],i.observationId=crypto.randomUUID(),u.value={N:[],E:[],S:[],W:[]},c.value=null,f.value=1,(E=A==null?void 0:A.steps)!=null&&E.length&&(Ce(),((U=A.steps[0])==null?void 0:U.type)==="bid"&&Ee())}function se(){i.correctCount=0,i.wrongCount=0}function ee(A){if(!A)return"";const U=A.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return U==="PASS"||U==="P"?"PASS":U==="X"||U==="DBL"||U==="DOUBLE"?"X":U==="XX"||U==="RDBL"||U==="REDOUBLE"?"XX":U.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:i,steps:d,hasSteps:p,currentStep:h,hasBidSteps:g,isBidStep:y,commentaryStartIndex:$,studentSeat:S,currentTurnSeat:_,isStudentTurn:w,hasBidPrompt:x,lastContractBid:B,canDouble:V,canRedouble:j,canGoBack:te,hasCardChoice:Q,currentChooseCard:q,hiddenSeats:$e,hands:fe,showHcp:J,showcardsPlayedCards:ce,isComplete:R,showAuctionTable:W,showOpeningLead:N,openingLead:P,advance:Se,makeBid:je,clearFeedback:re,goBack:L,makeCardChoice:ne,clearCardFeedback:ue,loadDeal:z,resetStats:se,observationStore:e}}const zo="bridgePractice",au="bridgePracticeUIPrefs",lt=I({teacherName:null,availableClassrooms:[],configuredAt:null}),gn=I({showLoadPbnOption:!1}),Jo=I(!1);function ru(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function lu(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:ru(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Jv(){return new URLSearchParams(window.location.search).get("collection")}function Yv(){return new URLSearchParams(window.location.search).get("lesson")}function qv(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Xv(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function Qv(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function Zv(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const eh=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function iu(){try{const e=localStorage.getItem(zo);if(e){const t=JSON.parse(e);t.appConfig&&(lt.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function th(){try{const e=localStorage.getItem(au);if(e){const t=JSON.parse(e);gn.value={...gn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function sh(){try{localStorage.setItem(au,JSON.stringify(gn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function nh(e,t){gn.value[e]=t,sh()}function Yr(){try{const e=localStorage.getItem(zo),t=e?JSON.parse(e):{};t.appConfig=lt.value,localStorage.setItem(zo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function cu(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function oh(){if(Jo.value)return;iu(),th();const{teacher:e,classrooms:t}=lu();(e||t.length>0)&&(e&&!lt.value.teacherName&&(lt.value.teacherName=e),t.length>0&&(lt.value.availableClassrooms=cu(lt.value.availableClassrooms||[],t)),lt.value.configuredAt||(lt.value.configuredAt=new Date().toISOString()),Yr()),Jo.value=!0}function ah(){try{const e=localStorage.getItem(zo);return e?JSON.parse(e):null}catch{return null}}function rh(){lt.value={teacherName:null,availableClassrooms:[],configuredAt:null},Yr(),Jo.value=!1}function mo(){const e=T(()=>lt.value.availableClassrooms.length===0),t=T(()=>lt.value.availableClassrooms.length>1),s=T(()=>lt.value.availableClassrooms.length===1),n=T(()=>s.value?lt.value.availableClassrooms[0]:null),o=T(()=>lt.value.teacherName),a=T(()=>lt.value.availableClassrooms),r=T(()=>gn.value.showLoadPbnOption);return{appConfig:lt,initialized:Jo,uiPrefs:gn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:oh,loadFromStorage:iu,saveToStorage:Yr,clearConfig:rh,getStorageData:ah,getCollectionFromUrl:Jv,setCollectionInUrl:qv,getLessonFromUrl:Yv,setLessonInUrl:Xv,getDealFromUrl:Qv,setDealInUrl:Zv,setUIPref:nh,COLLECTIONS:eh,parseUrlParams:lu,classroomIdToName:ru,mergeClassrooms:cu}}const lh="https://api.bridge-classroom.com/api",ih="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",qr=I([]),nt=I([]),Yo=I(!1),qo=I(null),Kn=I(null),Xo=I(!1),ch=5*60*1e3;async function uh(e){const t=await fetch(`${lh}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":ih}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function dh(e,t){try{return{...await Jr(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function fh(){return Ss().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function uu(e=!1){const s=Je().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=fh();if(!e&&Kn.value&&Date.now()-new Date(Kn.value).getTime()<ch&&nt.value.length>0)return ph(n),{success:!0,cached:!0};Yo.value=!0,qo.value=null;let o=[];try{const i=await uh(s.id);if(qr.value=i,s.secretKey&&i.length>0){const u=i.map(f=>dh(f,s.secretKey));o=(await Promise.all(u)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(qo.value=i.message)}const a=new Set(o.map(i=>i.id)),r=n.filter(i=>!a.has(i.id));return nt.value=[...o,...r],Kn.value=new Date().toISOString(),Yo.value=!1,{success:!0,count:nt.value.length}}function ph(e){const t=new Set(nt.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(nt.value=[...nt.value,...s])}async function mh(){if(Xo.value)return;Je().isAuthenticated.value&&await uu(),Xo.value=!0}function vh(){qr.value=[],nt.value=[],Kn.value=null,Xo.value=!1}function du(){const e={};for(const t of nt.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function pi(){const e={};for(const t of nt.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function mi(){const e={};for(const t of nt.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function vi(e=10){return[...nt.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function hi(){const e=new Date().toISOString().split("T")[0];return nt.value.filter(t=>t.timestamp.startsWith(e))}function gi(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return nt.value.filter(n=>n.timestamp>=s)}function hh(){const e=du(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const i=new Date(t[r]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Xr(){const e=T(()=>nt.value.length),t=T(()=>nt.value.filter(h=>h.correct).length),s=T(()=>nt.value.filter(h=>!h.correct).length),n=T(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=T(()=>{const h=hi(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=T(()=>{const h=gi(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),r=T(()=>hh()),i=T(()=>pi()),u=T(()=>mi()),c=T(()=>vi(20)),f=T(()=>nt.value.length>0),d=T(()=>Yo.value),p=T(()=>qo.value!==null);return{observations:qr,decryptedObservations:nt,loading:Yo,error:qo,lastFetchedAt:Kn,initialized:Xo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:i,sessions:u,recentObservations:c,hasData:f,isLoading:d,hasError:p,initialize:mh,fetchProgress:uu,clearCache:vh,getObservationsByDate:du,getStatsBySkill:pi,getSessions:mi,getRecentObservations:vi,getTodayObservations:hi,getThisWeekObservations:gi}}const Rs={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},kt={NONE:"none",SILVER:"silver",GOLD:"gold"},gh=6;function yh(e){return e.slice(0,10)}function fu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function pu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const yi=60*60*1e3;function mu(e){if(e.length===0)return Rs.GREY;const t=e[e.length-1];if(!t.correct)return Rs.RED;const s=Date.now()-yi;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return Rs.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return Rs.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=yi?Rs.ORANGE:Rs.GREEN}function vu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function hu(e){if(e.length===0)return kt.NONE;const t=new Set;for(const r of e)t.add(yh(r.timestamp));const s=[...t].filter(r=>vu(e,r)).sort();if(s.length<2)return kt.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)fu(a,s[r])>=gh&&(o++,a=s[r],o>n&&(n=o));return n>=3?kt.GOLD:n>=2?kt.SILVER:kt.NONE}function bh(e){const t=e.observations.value||[];let s=[];try{s=Ss().getPendingObservations().filter(i=>i.metadata).map(i=>{const u=i.metadata;return{id:u.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:u.timestamp||i.queuedAt,skill_path:u.skill_path,correct:u.correct,deal_subfolder:u.deal_subfolder,deal_number:u.deal_number,session_id:u.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function _h(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var u;return(i.deal_number??((u=i.deal)==null?void 0:u.deal_number))===o}).sort((i,u)=>i.timestamp.localeCompare(u.timestamp)),r=pu(a);return{boardNumber:o,status:mu(a),achievement:hu(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function wh(e){return!e||e.length===0?{achievement:kt.NONE}:e.every(n=>n.achievement===kt.GOLD)?{achievement:kt.GOLD}:e.every(n=>n.achievement===kt.SILVER||n.achievement===kt.GOLD)?{achievement:kt.SILVER}:{achievement:kt.NONE}}const gu="bridgeLessonBoards",ro=I(Sh()),Ra=new Set;function Sh(){try{const e=localStorage.getItem(gu);return e?JSON.parse(e):{}}catch{return{}}}function Ch(){try{localStorage.setItem(gu,JSON.stringify(ro.value))}catch{}}function yu(e,t){ro.value={...ro.value,[e]:t},Ch()}function $h(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function kh(e){const t=mo(),s=e.filter(n=>!ro.value[n]&&!Ra.has(n));if(s.length!==0){for(const n of s)Ra.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(r);if(!i.ok)continue;const u=await i.text(),c=$h(u);if(c.length>0){yu(n,c);break}}catch{continue}}}finally{Ra.delete(n)}}))}}function xh(e){var n,o;const t=ro.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||i==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(i),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:r.lastActivity};const u=Math.max(...r.boards),c=[];for(let f=1;f<=u;f++)c.push(f);return{subfolder:a,boardNumbers:c,lastActivity:r.lastActivity}})}function hs(){const e=ys();function t(){return bh(e)}return{STATUS:Rs,ACHIEVEMENT:kt,getObservations:t,computeBoardMastery:_h,computeLessonAchievement:wh,extractLessonsFromObservations:xh,saveLessonBoardNumbers:yu,fetchMissingBoardCounts:kh,groupIntoBoardAttempts:pu,calculateCurrentStatus:mu,calculateAchievement:hu,hasGreenDay:vu,daysBetween:fu}}const qs="https://api.bridge-classroom.com/api",Xs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Qo=I(!1),lo=I(null),ga=I([]),gs=I({}),io=I({}),Zo=I(!1),ea=I(null),Qr=I(!1),ta={},Ah=2*60*1e3,Gn={};let Po=null;async function Th(){var s;const e=Je(),t=e.currentUser.value;if(!t||!t.email){Qo.value=!1;return}try{const n=await fetch(`${qs}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Xs}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;lo.value=a.id;const r=await fetch(`${qs}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Xs}});if(!r.ok)return;const u=(await r.json()).grants||[],c=new Set(u.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(c.size===0)return;const f=await fetch(`${qs}/users`,{headers:{"x-api-key":Xs}});if(!f.ok)return;const p=(await f.json()).users||[],h=(s=t.email)==null?void 0:s.toLowerCase();if(ga.value=p.filter(g=>{var y;return c.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==h}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Qo.value=!0,Qr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${qs}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Xs},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function bu(e){const t=gs.value[e],s=ta[e];if(t&&s&&Date.now()-s<Ah)return t;try{const n=await fetch(`${qs}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Xs}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=(await n.json()).observations||[],r=a.map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number}));return io.value={...io.value,[e]:a},gs.value={...gs.value,[e]:r},ta[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Nh(){Zo.value=!0,ea.value=null;try{await Promise.allSettled(ga.value.map(s=>bu(s.id)));const e=hs(),t=new Set;for(const s of Object.values(gs.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){ea.value=e.message,console.error("Failed to load student summaries:",e)}finally{Zo.value=!1}}function Eh(e){const t=gs.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=hs(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const i=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const u of i)o[u.status]=(o[u.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Oh(e,t=3){const s=gs.value[e]||[],n=ys(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function Ih(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function Rh(){try{const e=JSON.parse(sessionStorage.getItem("bridgeTeacherSession")||"null");return!e||!e.privateKeyBase64||e.expiry&&new Date(e.expiry)<new Date?null:e.privateKeyBase64}catch{return null}}async function _u(e){if(Gn[e])return Gn[e];const t=Rh();if(!t)return null;if(!Po&&lo.value)try{const n=await fetch(`${qs}/grants?grantee_id=${lo.value}`,{headers:{"x-api-key":Xs}});n.ok&&(Po=(await n.json()).grants||[])}catch{return null}const s=(Po||[]).find(n=>n.grantor_id===e);if(!s)return null;try{const n=await ov(s.encrypted_payload,t);return Gn[e]=n,n}catch(n){return console.error(`Failed to decrypt grant for student ${e}:`,n),null}}async function wu(e,t){if(!t.encrypted_data||!t.iv)return null;const s=await _u(e);if(!s)return null;try{return{...await Jr(t.encrypted_data,t.iv,s),id:t.id,timestamp:t.timestamp,skill_path:t.skill_path,correct:t.correct,deal_subfolder:t.deal_subfolder,deal_number:t.deal_number}}catch(n){return console.error("Failed to decrypt observation:",t.id,n),null}}async function Dh(e,t,s,n){const a=(io.value[e]||[]).find(r=>{const i=new Date(r.timestamp).getTime();return Math.abs(i-t)<1e3&&r.deal_number===s&&r.correct===n});return a?wu(e,a):null}function Ph(){Qo.value=!1,lo.value=null,ga.value=[],gs.value={},io.value={},Zo.value=!1,ea.value=null,Qr.value=!1,Po=null;for(const e of Object.keys(Gn))delete Gn[e];for(const e of Object.keys(ta))delete ta[e]}function _n(){return{isTeacher:Qo,viewerId:lo,students:ga,studentObservations:gs,loading:Zo,error:ea,initialized:Qr,checkTeacherStatus:Th,fetchStudentObservations:bu,loadAllStudentSummaries:Nh,getStudentMasterySummary:Eh,getStudentRecentLessons:Oh,formatTimeSince:Ih,findAndDecryptObservation:Dh,decryptStudentObservation:wu,getStudentKey:_u,studentRawObservations:io,reset:Ph}}const ir="https://api.bridge-classroom.com/api",cr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ur=I(!1),Qs=I(null),ts=I(null),co=I([]),yn=I([]),Zr=I("lessons"),ya=I(!0),wn=I(!1),vo=I([]);function Lh(e){wn.value=!0,vo.value=e}function Bh(){wn.value=!1,vo.value=[]}function ho(){return wn.value?vo.value:co.value}async function Su(){const e=Je(),t=_n(),s=e.currentUser.value;if(!s){yn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${ir}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":cr}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${ir}/users`,{headers:{"x-api-key":cr}});if(r.ok){const{users:i}=await r.json(),u=new Set(a.map(c=>c.grantor_id));for(const c of i)u.has(c.id)&&c.id!==s.id&&n.push({id:c.id,name:`${c.first_name} ${c.last_name}`,email:c.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}yn.value=n}async function el(e=!1){if(wn.value)return{success:!0};const t=Je(),s=Xr(),n=t.currentUser.value;if(!n)return Qs.value="No authenticated user",{success:!1,error:Qs.value};ur.value=!0,Qs.value=null;try{if(!ts.value||ts.value===n.id)ts.value=n.id,await s.fetchProgress(e),co.value=s.decryptedObservations.value;else{const o=await fetch(`${ir}/observations?user_id=${ts.value}&limit=10000`,{headers:{"x-api-key":cr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();co.value=a.observations||[]}return{success:!0}}catch(o){return Qs.value=o.message,{success:!1,error:o.message}}finally{ur.value=!1}}async function Mh(e){ts.value=e,await el(!0)}const dr=T(()=>{var n;const e=ho(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:ku(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),fr=T(()=>{const e=ho(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Qm(o),r=Jc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Zm(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Cu=T(()=>ya.value?dr.value.filter(e=>e.total>0):dr.value),$u=T(()=>ya.value?fr.value.filter(e=>e.total>0):fr.value);function ku(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Uh=T(()=>Zr.value==="lessons"?Cu.value:$u.value),Fh=T(()=>yn.value.length>1),jh=T(()=>yn.value.find(e=>e.id===ts.value)||null),Hh=T(()=>ho().length>0),Wh=T(()=>ho().length),Vh=T(()=>{const e=ho();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Kh(){const t=Je().currentUser.value;t&&(ts.value=t.id,await Su(),await el())}function Gh(){co.value=[],yn.value=[],ts.value=null,Zr.value="lessons",ya.value=!0,Qs.value=null,wn.value=!1,vo.value=[]}function ys(){return{loading:ur,error:Qs,selectedUserId:ts,observations:co,accessibleUsers:yn,activeTab:Zr,onlyWithObservations:ya,useTestData:wn,testObservations:vo,enableTestMode:Lh,disableTestMode:Bh,lessonStats:dr,taxonStats:fr,filteredLessonStats:Cu,filteredTaxonStats:$u,currentStats:Uh,canViewOtherUsers:Fh,selectedUser:jh,hasData:Hh,totalObservations:Wh,overallSuccessRate:Vh,initialize:Kh,loadAccomplishments:el,selectUser:Mh,fetchAccessibleUsers:Su,reset:Gh,formatLessonName:ku}}const zh="https://api.bridge-classroom.com/api",Jh=5e3,pr=20;let ms=[],zn=null;function Vt(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),ms.push(n),ms.length>=pr?Jn():zn||(zn=setTimeout(Jn,Jh))}async function Jn(){if(zn&&(clearTimeout(zn),zn=null),ms.length===0)return;const e=ms.splice(0);try{await fetch(`${zh}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{ms.unshift(...e),ms.length>pr*2&&(ms=ms.slice(-pr))}}const tl="https://api.bridge-classroom.com/api",xu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",xt=I("idle"),Au=I(null),Ys=I(null),Zs=I(0),en=I(navigator.onLine),Pn=I(!1),bi=5,Yh=1e3,qh=6e4,Xh=5e3;let ln=null;function Qh(e){const t=Math.min(Yh*Math.pow(2,e),qh);return t+Math.random()*t*.25}async function Tu(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${tl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return Vt("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return Vt("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function Nu(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${tl}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":xu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function go(){var n,o;const e=Je(),t=Ss();if(!navigator.onLine)return xt.value="offline",{success:!1,offline:!0};xt.value="syncing",Ys.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const u=await Tu(a);if(u.success)e.updateUser(a.id,{serverRegistered:!0}),Pn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(u.error==="email_exists")return Vt("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),xt.value="error",Ys.value="Account already exists. Please use recovery.",Pn.value=!0,s;Vt("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,u.error),Pn.value=!0,Ys.value=`Registration failed: ${u.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let i=!1;if(a!=null&&a.dataConsent){const u=t.getPendingObservations();if(u.length>0){const c=await Nu(u);if(c.success&&c.synced>0){const f=u.filter(d=>d.encrypted).slice(0,c.synced).map(d=>{var p;return(p=d.metadata)==null?void 0:p.observation_id});s.observationsSynced=c.synced,console.log(`Synced ${c.synced} observations`);try{await ys().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(f)}c.success?((o=c.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",c.errors):(i=!0,Ys.value=((n=c.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",c.errors))}}return Pn.value||i?xt.value="error":(xt.value="idle",Au.value=new Date().toISOString(),Zs.value=0),s}catch(a){return console.error("Sync failed:",a),Ys.value=a.message,xt.value="error",s.success=!1,s}}function mr(){ln&&clearTimeout(ln),ln=setTimeout(async()=>{await go()},Xh)}async function Eu(){return ln&&(clearTimeout(ln),ln=null),await go()}async function Ou(){if(Zs.value>=bi){console.log("Max retries reached, giving up"),xt.value="error";return}const e=Qh(Zs.value);Zs.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Zs.value}/${bi})`),setTimeout(async()=>{const t=await go();!t.success&&t.offline!==!0&&Ou()},e)}function Zh(){var i;const e=Je(),t=Ss(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(u=>u.encrypted);if(o.length===0)return;const a={observations:o.map(u=>({encrypted_data:u.encrypted_data,iv:u.iv,metadata:u.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${tl}/observations?api_key=${xu}`,r),console.log("Sent beacon with",o.length,"observations")}function eg(){window.addEventListener("online",()=>{en.value=!0,console.log("Back online, triggering sync"),Eu()}),window.addEventListener("offline",()=>{en.value=!1,xt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&en.value&&(console.log("Tab visible, triggering sync"),mr())}),window.addEventListener("beforeunload",Zh),setInterval(()=>{document.visibilityState==="visible"&&en.value&&mr()},5*60*1e3)}async function tg(){eg(),navigator.onLine?await go():xt.value="offline"}function Iu(){const e=T(()=>xt.value==="syncing"),t=T(()=>xt.value==="offline"||!en.value),s=T(()=>xt.value==="error"),n=T(()=>Ss().pendingCount.value>0);return{syncState:xt,lastSyncAt:Au,lastError:Ys,retryCount:Zs,isOnline:en,registrationFailed:Pn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:tg,performSync:go,triggerSync:mr,forceSync:Eu,retrySync:Ou,registerUserWithServer:Tu,syncObservationsToServer:Nu}}const sl="https://api.bridge-classroom.com/api",Ru="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ss=I(null),vr=I(!1),yo=I(null);async function sg(){vr.value=!0;try{const e=await fetch(`${sl}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=ss.value;ss.value=t.announcement||null,ss.value&&(!s||s.id!==ss.value.id)&&(yo.value=null)}catch{}finally{vr.value=!1}}async function ng(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${sl}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ru},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return ss.value=a.announcement||null,yo.value=null,a}async function og(){const e=await fetch(`${sl}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Ru}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);ss.value=null,yo.value=null}function ag(){ss.value&&(yo.value=ss.value.id)}function nl(){return{announcement:ss,loading:vr,dismissed:yo,loadAnnouncement:sg,setAnnouncement:ng,clearAnnouncement:og,dismiss:ag}}const ks="https://api.bridge-classroom.com/api",xs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",En=I([]),As=I([]),Da=I(null),Tt=I(!1),Me=I(null);function Sn(){async function e(u){Tt.value=!0,Me.value=null;try{const c=await fetch(`${ks}/assignments?student_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Me.value=d||`Server error (${c.status})`,null}const f=await c.json();if(f.success){const d=new Map;for(const p of f.assignments){const h=d.get(p.exercise_id);(!h||p.attempted_boards>h.attempted_boards)&&d.set(p.exercise_id,p)}En.value=Array.from(d.values())}else Me.value=f.error||"Failed to fetch assignments";return f}catch(c){return console.error("Failed to fetch student assignments:",c),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function t(u){Tt.value=!0,Me.value=null;try{const c=await fetch(`${ks}/assignments?assigned_by=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Me.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?As.value=f.assignments:Me.value=f.error||"Failed to fetch assignments",f}catch(c){return console.error("Failed to fetch teacher assignments:",c),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function s(u){Tt.value=!0,Me.value=null;try{const c=await fetch(`${ks}/assignments?classroom_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Me.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?f.assignments:(Me.value=f.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),Me.value="Unable to connect to server",[]}finally{Tt.value=!1}}async function n(u){Tt.value=!0,Me.value=null;try{const c=await fetch(`${ks}/assignments/${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Me.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Da.value=f.assignment:Me.value=f.error||"Failed to fetch assignment",f}catch(c){return console.error("Failed to fetch assignment detail:",c),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function o({exercise_id:u,classroom_id:c,student_id:f,assigned_by:d,due_at:p,sort_order:h}){Tt.value=!0,Me.value=null;try{const g=await fetch(`${ks}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":xs},body:JSON.stringify({exercise_id:u,classroom_id:c||null,student_id:f||null,assigned_by:d,due_at:p||null,sort_order:h??null})});if(!g.ok){const $=await g.text();return Me.value=$||`Server error (${g.status})`,{success:!1,error:Me.value}}const y=await g.json();return y.success?As.value=[y.assignment,...As.value]:Me.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Tt.value=!1}}async function a(u){try{const c=await fetch(`${ks}/assignments/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Me.value=d||`Server error (${c.status})`,{success:!1,error:Me.value}}const f=await c.json();return f.success&&(As.value=As.value.filter(d=>d.id!==u),En.value=En.value.filter(d=>d.id!==u)),f}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}async function r(u){try{const c=await fetch(`${ks}/exercises/${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok)return null;const f=await c.json();return f.success?f.exercise.boards:null}catch(c){return console.error("Failed to fetch exercise boards:",c),null}}function i(){En.value=[],As.value=[],Da.value=null,Tt.value=!1,Me.value=null}return{studentAssignments:En,teacherAssignments:As,currentAssignment:Da,loading:Tt,error:Me,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:r,reset:i}}const rg={key:0,class:"minimal-hand"},lg={class:"seat-label-inline"},ig={class:"seat-label"},cg={key:0,class:"suits"},ug={key:0,class:"suit-row"},dg={key:0,class:"cards clickable-cards"},fg=["onClick"],pg={key:1,class:"cards"},mg={key:2,class:"cards"},vg={key:1,class:"hidden-hand"},hg={key:2,class:"hcp"},gg={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Gc,n=T(()=>or(t.seat)),o=T(()=>Km(t.hand)),a=T(()=>t.hand?s.reduce(($,S)=>{var _;return $+(((_=t.hand[S])==null?void 0:_.length)||0)},0):0),r=T(()=>a.value>0&&a.value<5);function i($){return t.hand&&t.hand[$]&&t.hand[$].length>0}function u($){return Vr[$]}function c($){return Wm($)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d($){return f[$]||$}function p($){if(!t.hand||!t.hand[$])return"";const S=t.hand[$];return S.length===0?"":S.map(Ia).join(" ")}const h=T(()=>t.playedCards&&t.playedCards.length>0),g=T(()=>{if(!t.playedCards)return null;const $=new Set;for(const S of t.playedCards){const _=S[0].toUpperCase(),w=S.slice(1).toUpperCase(),x={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];x&&$.add(`${x}:${w}`)}return $});function y($,S){return g.value?g.value.has(`${$}:${S}`):!1}return($,S)=>(m(),v("div",{class:ie(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(m(),v("div",rg,[l("span",lg,b(e.seat),1),(m(!0),v(Z,null,ae(M(s),_=>(m(),v("span",{key:_,class:ie(["suit-symbol-inline",c(_)])},b(u(_)),3))),128))])):(m(),v(Z,{key:1},[l("div",ig,b(n.value),1),!e.hidden&&e.hand?(m(),v("div",cg,[(m(!0),v(Z,null,ae(M(s),_=>(m(),v(Z,{key:_},[!r.value||i(_)?(m(),v("div",ug,[l("span",{class:ie(["suit-symbol",c(_)])},b(u(_)),3),e.clickable?(m(),v("span",dg,[(m(!0),v(Z,null,ae(e.hand[_],w=>(m(),v("span",{key:w,class:ie(y(_,w)?"card-played":"card-clickable"),onClick:x=>!y(_,w)&&$.$emit("card-click",{suit:d(_),rank:w})},b(M(Ia)(w)),11,fg))),128))])):h.value?(m(),v("span",pg,[(m(!0),v(Z,null,ae(e.hand[_],w=>(m(),v("span",{key:w,class:ie({"card-played":y(_,w)})},b(M(Ia)(w)),3))),128))])):(m(),v("span",mg,b(p(_)),1))])):F("",!0)],64))),128))])):e.hidden?(m(),v("div",vg,[...S[0]||(S[0]=[l("div",{class:"card-back"},null,-1)])])):F("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(m(),v("div",hg,b(o.value)+" HCP ",1)):F("",!0)],64))],2))}},Ao=_e(gg,[["__scopeId","data-v-128fc7ed"]]),yg={class:"ns-column north-row"},bg={key:0,class:"position north"},_g={key:0,class:"position west"},wg={class:"center"},Sg={key:1,class:"position east"},Cg={class:"ns-column south-row"},$g={key:0,class:"position south"},kg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return m(),v("div",{class:ie(["bridge-table",{compact:e.compact}])},[l("div",yg,[!e.hiddenSeats.includes("N")&&e.hands.N?(m(),v("div",bg,[he(Ao,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(m(),v("div",_g,[he(Ao,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),l("div",wg,[rf(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(m(),v("div",Sg,[he(Ao,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),l("div",Cg,[!e.hiddenSeats.includes("S")&&e.hands.S?(m(),v("div",$g,[he(Ao,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)])],2)}}},xg=_e(kg,[["__scopeId","data-v-ec6230a9"]]),Ag={class:"bidding-box"},Tg={class:"bid-section"},Ng={class:"levels"},Eg=["onClick"],Og={class:"strains"},Ig=["disabled","onClick"],Rg=["innerHTML"],Dg={class:"special-bids"},Pg=["disabled"],Lg=["disabled"],Bg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=I(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=T(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=T(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const h=p[1].toUpperCase();return d.indexOf(h==="N"?"NT":h)});function u(d){o.value=d}function c(d,p){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(p);return d>r.value||d===r.value&&g>i.value}function f(d,p){c(d,p)&&n("bid",`${d}${p}`)}return(d,p)=>(m(),v("div",Ag,[l("div",Tg,[l("div",Ng,[(m(),v(Z,null,ae(7,h=>l("button",{key:h,class:ie(["level-btn",{active:o.value===h}]),onClick:g=>u(h)},b(h),11,Eg)),64))]),l("div",Og,[(m(),v(Z,null,ae(a,h=>l("button",{key:h.value,class:ie(["strain-btn",[h.colorClass,{disabled:!c(o.value,h.value)}]]),disabled:!c(o.value,h.value),onClick:g=>f(o.value,h.value)},[l("span",{innerHTML:h.display},null,8,Rg)],10,Ig)),64))])]),l("div",Dg,[l("button",{class:"special-btn pass",onClick:p[0]||(p[0]=h=>d.$emit("bid","Pass"))}," Pass "),l("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=h=>d.$emit("bid","X"))}," Double ",8,Pg),l("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=h=>d.$emit("bid","XX"))}," Redouble ",8,Lg)])]))}},Mg=_e(Bg,[["__scopeId","data-v-38ccb98f"]]),Ug={class:"auction-table"},Fg={class:"rounds"},jg=["innerHTML"],Hg={key:1,class:"turn-indicator"},Wg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=T(()=>["W","N","E","S"].indexOf(t.dealer)),n=T(()=>{const c=[],f=t.bids;let d=0,p=0;for(;d<f.length||p===0&&f.length>0;){const h=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&d<f.length;y++)h[y]=f[d],d++;if(h.some(y=>y!==null)&&c.push(h),p++,p>20)break}if(t.currentBidIndex>=f.length){const h=c[c.length-1],g=h?h.filter(y=>y!==null).length:0;if(c.length===1&&s.value,g===4||c.length>1&&g===4){const y=[null,null,null,null];c.push(y)}}return c});function o(c,f){return c===0?f-s.value:4-s.value+(c-1)*4+f}function a(c,f){const d=o(c,f);return d===t.currentBidIndex&&d>=t.bids.length}function r(c,f){return t.wrongBidIndex<0?!1:o(c,f)===t.wrongBidIndex}function i(c,f){return t.correctBidIndex<0?!1:o(c,f)===t.correctBidIndex}function u(c){return Kr(c).html}return(c,f)=>(m(),v("div",Ug,[f[0]||(f[0]=so('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),l("div",Fg,[(m(!0),v(Z,null,ae(n.value,(d,p)=>(m(),v("div",{key:p,class:"round"},[(m(!0),v(Z,null,ae(d,(h,g)=>(m(),v("div",{key:g,class:ie(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":i(p,g)}])},[h?(m(),v("span",{key:0,innerHTML:u(h)},null,8,jg)):e.showTurnIndicator&&a(p,g)?(m(),v("span",Hg,"?")):F("",!0)],2))),128))]))),128))])]))}},Vg=_e(Wg,[["__scopeId","data-v-ac265db8"]]),Kg={class:"deal-info"},Gg={class:"board-number"},zg={key:0,class:"board-popup"},Jg={class:"popup-list"},Yg=["onClick"],qg={class:"info-row"},Xg={class:"info-item"},Qg={class:"value"},Zg={class:"info-item"},ey={key:0,class:"contract-row"},ty={class:"info-item"},sy=["innerHTML"],ny={key:0,class:"label"},oy={key:0,class:"info-item"},ay=["innerHTML"],ry={key:1,class:"title"},ly={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=I(!1);function a(p){n("goto",p),o.value=!1}const r=T(()=>or(s.dealer)),i=T(()=>or(s.declarer)),u=T(()=>Vm(s.vulnerable)),c=T(()=>{var h;const p=(h=s.vulnerable)==null?void 0:h.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),f=T(()=>s.contract?Kr(s.contract).html:""),d=T(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],h=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},$=g[p]||p;return`<span class="${y[p]||"black"}">${$}</span>${h==="T"?"10":h}`});return(p,h)=>(m(),v("div",Kg,[l("div",{class:"board-selector",onMouseenter:h[0]||(h[0]=g=>o.value=!0),onMouseleave:h[1]||(h[1]=g=>o.value=!1)},[l("div",Gg,"Board "+b(e.boardNumber),1),o.value&&e.totalDeals>1?(m(),v("div",zg,[h[2]||(h[2]=l("div",{class:"popup-header"},"Select Board",-1)),l("div",Jg,[(m(!0),v(Z,null,ae(e.totalDeals,g=>(m(),v("button",{key:g,class:ie(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+b(e.dealBoardNumbers[g-1]||g),11,Yg))),128))])])):F("",!0)],32),l("div",qg,[l("div",Xg,[h[3]||(h[3]=l("span",{class:"label"},"Dealer:",-1)),l("span",Qg,b(r.value),1)]),l("div",Zg,[h[4]||(h[4]=l("span",{class:"label"},"Vul:",-1)),l("span",{class:ie(["value",c.value])},b(u.value),3)])]),e.showContract&&e.contract?(m(),v("div",ey,[l("div",ty,[l("span",{class:"value contract",innerHTML:f.value},null,8,sy),e.declarer?(m(),v("span",ny,"by "+b(i.value),1)):F("",!0)]),e.openingLead?(m(),v("div",oy,[h[5]||(h[5]=l("span",{class:"label"},"OL:",-1)),l("span",{class:"value lead-card",innerHTML:d.value},null,8,ay)])):F("",!0)])):F("",!0),e.title?(m(),v("div",ry,b(e.title),1)):F("",!0)]))}},iy=_e(ly,[["__scopeId","data-v-5a844c49"]]),cy={class:"feedback-header"},uy={key:0,class:"icon"},dy={key:1,class:"icon"},fy={class:"title"},py={key:0,class:"feedback-content"},my={class:"bid-comparison"},vy={class:"bid-item your-bid"},hy=["innerHTML"],gy={class:"bid-item correct-bid"},yy=["innerHTML"],by={key:1,class:"feedback-content"},_y={class:"bid-comparison"},wy={class:"bid-item your-bid"},Sy=["innerHTML"],Cy={class:"bid-item correct-bid"},$y=["innerHTML"],ky=["innerHTML"],xy={class:"actions"},Ay={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=T(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Kr(a).html}function o(a){return Gm(a).html}return(a,r)=>e.visible?(m(),v("div",{key:0,class:ie(["feedback-panel",e.type])},[l("div",cy,[e.type==="wrong"?(m(),v("span",uy,"")):e.type==="correct"?(m(),v("span",dy,"")):F("",!0),l("span",fy,b(s.value),1)]),e.wrongBid?(m(),v("div",py,[l("div",my,[l("div",vy,[r[1]||(r[1]=l("span",{class:"label"},"Your bid:",-1)),l("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,hy)]),l("div",gy,[r[2]||(r[2]=l("span",{class:"label"},"Correct bid:",-1)),l("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,yy)])])])):F("",!0),e.wrongCardCode?(m(),v("div",by,[l("div",_y,[l("div",wy,[r[3]||(r[3]=l("span",{class:"label"},"Your card:",-1)),l("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Sy)]),l("div",Cy,[r[4]||(r[4]=l("span",{class:"label"},"Correct card:",-1)),l("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,$y)])])])):F("",!0),e.commentary?(m(),v("div",{key:2,class:"commentary",innerHTML:M(Js)(e.commentary)},null,8,ky)):F("",!0),l("div",xy,[e.showContinue?(m(),v("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=i=>a.$emit("continue"))}," Continue ")):F("",!0)])],2)):F("",!0)}},_i=_e(Ay,[["__scopeId","data-v-04368462"]]),Ty={class:"welcome-screen"},Ny={class:"welcome-card"},Ey={class:"welcome-header"},Oy={key:0,class:"welcome-body"},Iy={class:"form-group"},Ry={key:0,class:"error-message"},Dy={class:"form-group"},Py={key:0,class:"error-message"},Ly={class:"form-group"},By={key:0,class:"error-message"},My={key:0,class:"form-group"},Uy={class:"checkbox-group"},Fy=["value","checked","onChange"],jy={key:1,class:"form-group"},Hy={class:"single-classroom"},Wy={class:"form-group consent-group"},Vy={class:"checkbox-label consent-label"},Ky={key:0,class:"consent-details"},Gy=["disabled"],zy={key:0},Jy={key:1},Yy={key:1,class:"welcome-body returning"},qy={key:2,class:"welcome-body switcher"},Xy={class:"user-list"},Qy=["onClick"],Zy={class:"user-name"},eb={key:0,class:"user-class"},tb={key:3,class:"welcome-body recovery-sent"},sb={class:"subtitle"},nb={class:"recovery-info"},ob={class:"code-entry"},ab=["disabled"],rb={key:0},lb={key:1},ib={key:0,class:"error-message"},cb={key:4,class:"welcome-body recovery-claiming"},ub={class:"subtitle"},db={key:0,class:"recovery-error-panel"},fb={class:"error-message"},pb={key:1,class:"loading-spinner"},mb={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=mo(),o=Je(),a="https://api.bridge-classroom.com/api",r=I("form"),i=I(""),u=I(""),c=I(""),f=I([]),d=I(!0),p=I({firstName:"",lastName:"",email:"",classrooms:""}),h=I(!1),g=I(!1),y=I(""),$=I(""),S=I(""),_=I(""),w=I("");Ct(async()=>{o.initialize(),n.initializeFromUrl();const P=new URLSearchParams(window.location.search),R=P.get("recover"),te=P.get("user_id");if(R&&te){await pe(te,R),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const x=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,B=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),V=T(()=>i.value.trim().length>0&&u.value.trim().length>0&&c.value.trim().length>0&&x.test(c.value.trim())),j=T(()=>o.currentUser.value?o.currentUser.value.firstName:""),Q=T(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function q(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let P=!0;return i.value.trim()||(p.value.firstName="First name is required",P=!1),u.value.trim()||(p.value.lastName="Last name is required",P=!1),c.value.trim()?x.test(c.value.trim())||(p.value.email="Please enter a valid email address",P=!1):(p.value.email="Email is required",P=!1),o.findUserByEmail(c.value)&&(p.value.email="This email is already registered on this device.",P=!1),P}async function de(){const P=c.value.trim().toLowerCase();if(!navigator.onLine)return Vt("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const R=await o.requestRecovery(P,a);return R.success?($.value=P,_.value=R.message,r.value="recovery-sent",!1):R.message&&R.message.includes("No account found")?!0:(Vt("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${P}`,R.message),await Jn(),p.value.email=R.message||"Unable to verify email. Please try again.",!1)}catch(R){return Vt("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${P}`,R),await Jn(),B?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function pe(P,R){r.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",S.value="";try{const te=await o.claimRecovery(P,R,a);te.success&&te.user?s("userReady",te.user):(S.value=te.error||"Recovery failed. Please try again.",r.value="form")}catch(te){Vt("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${P}`,te),S.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,y.value=""}}async function ce(){if(w.value.trim().length===6){g.value=!0,y.value="Verifying code...",S.value="";try{const P=await o.claimRecoveryByCode($.value.trim(),w.value.trim(),a);P.success&&P.user?s("userReady",P.user):S.value=P.error||"Invalid code. Please check and try again."}catch(P){Vt("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${$.value.trim()}`,P),S.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function ge(){if(!q())return;if(g.value=!0,y.value="Checking account...",!await de()){g.value=!1,y.value="";return}let R=[];n.hasSingleClassroom.value?R=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(R=[...f.value]),y.value="Creating your secure encryption key...";try{const te=await o.createUser({firstName:i.value,lastName:u.value,email:c.value,classrooms:R,dataConsent:d.value,apiUrl:a});s("userReady",te)}catch(te){const Ce=te instanceof Error?te.message:String(te);Vt("registration_create_user_failed",`handleSubmit  createUser threw for ${c.value.trim()}`,te),await Jn(),p.value.email=`Failed to create account: ${Ce}. Please try again.`}finally{g.value=!1,y.value=""}}function $e(){s("userReady",o.currentUser.value)}function me(){r.value="switcher"}function fe(P){o.switchUser(P),s("userReady",o.currentUser.value)}function J(){i.value="",u.value="",c.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function W(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function N(P){const R=f.value.indexOf(P);R===-1?f.value.push(P):f.value.splice(R,1)}return(P,R)=>(m(),v("div",Ty,[l("div",Ny,[l("div",Ey,[l("h1",null,b(Q.value),1)]),r.value==="form"?(m(),v("div",Oy,[R[16]||(R[16]=l("h2",null,"Welcome!",-1)),R[17]||(R[17]=l("p",{class:"subtitle"},"Please enter your name to get started.",-1)),l("form",{onSubmit:St(ge,["prevent"]),class:"user-form"},[l("div",Iy,[R[8]||(R[8]=l("label",{for:"firstName"},"First Name",-1)),Fe(l("input",{id:"firstName","onUpdate:modelValue":R[0]||(R[0]=te=>i.value=te),type:"text",placeholder:"Enter your first name",class:ie({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[wt,i.value]]),p.value.firstName?(m(),v("span",Ry,b(p.value.firstName),1)):F("",!0)]),l("div",Dy,[R[9]||(R[9]=l("label",{for:"lastName"},"Last Name",-1)),Fe(l("input",{id:"lastName","onUpdate:modelValue":R[1]||(R[1]=te=>u.value=te),type:"text",placeholder:"Enter your last name",class:ie({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[wt,u.value]]),p.value.lastName?(m(),v("span",Py,b(p.value.lastName),1)):F("",!0)]),l("div",Ly,[R[10]||(R[10]=l("label",{for:"email"},"Email Address",-1)),Fe(l("input",{id:"email","onUpdate:modelValue":R[2]||(R[2]=te=>c.value=te),type:"email",placeholder:"Enter your email address",class:ie({"has-error":p.value.email}),autocomplete:"email"},null,2),[[wt,c.value]]),p.value.email?(m(),v("span",By,b(p.value.email),1)):F("",!0),R[11]||(R[11]=l("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),M(n).hasMultipleClassrooms.value?(m(),v("div",My,[R[12]||(R[12]=l("label",null,"Select Your Class(es)",-1)),l("div",Uy,[(m(!0),v(Z,null,ae(M(n).availableClassrooms.value,te=>(m(),v("label",{key:te.id,class:"checkbox-label"},[l("input",{type:"checkbox",value:te.id,checked:f.value.includes(te.id),onChange:Ce=>N(te.id)},null,40,Fy),l("span",null,b(te.name),1)]))),128))])])):M(n).hasSingleClassroom.value?(m(),v("div",jy,[R[13]||(R[13]=l("label",null,"Class",-1)),l("div",Hy,b(M(n).singleClassroom.value.name),1)])):F("",!0),l("div",Wy,[l("label",Vy,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":R[3]||(R[3]=te=>d.value=te)},null,512),[[Fr,d.value]]),R[14]||(R[14]=l("span",null," Preserve my practice history ",-1))]),l("button",{type:"button",class:"details-toggle",onClick:R[4]||(R[4]=te=>h.value=!h.value)},b(h.value?"Hide details":"What data is preserved?"),1),h.value?(m(),v("div",Ky,[...R[15]||(R[15]=[so('<p data-v-903ed78e>Your practice history is saved online so you can track your progress over time.</p><p data-v-903ed78e><strong data-v-903ed78e>How it works:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Your data is encrypted with your personal key</li><li data-v-903ed78e>Only you and people you authorize can view it</li><li data-v-903ed78e>The site administrator can also access your data</li></ul><p data-v-903ed78e><strong data-v-903ed78e>What&#39;s preserved:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Which hands you practiced</li><li data-v-903ed78e>Your bidding choices (correct and incorrect)</li><li data-v-903ed78e>When you practiced</li></ul><p class="consent-note" data-v-903ed78e>You can change this setting anytime in Settings.</p>',6)])])):F("",!0)]),l("button",{type:"submit",class:"submit-btn",disabled:!V.value||g.value},[g.value?(m(),v("span",zy,b(y.value),1)):(m(),v("span",Jy,"Start Practicing"))],8,Gy)],32),M(o).hasUsers.value?(m(),v("button",{key:0,class:"back-link",onClick:W}," Back to user selection ")):F("",!0)])):r.value==="returning"?(m(),v("div",Yy,[l("h2",null,"Welcome back, "+b(j.value)+"!",1),R[18]||(R[18]=l("p",{class:"subtitle"},"Ready to continue practicing?",-1)),l("button",{class:"submit-btn",onClick:$e}," Continue "),l("button",{class:"switch-link",onClick:me}," Not "+b(j.value)+"? Switch user ",1)])):r.value==="switcher"?(m(),v("div",qy,[R[19]||(R[19]=l("h2",null,"Select User",-1)),R[20]||(R[20]=l("p",{class:"subtitle"},"Choose who's practicing today:",-1)),l("div",Xy,[(m(!0),v(Z,null,ae(M(o).allUsers.value,te=>{var Ce;return m(),v("button",{key:te.id,class:ie(["user-item",{"is-current":te.id===M(o).currentUserId.value}]),onClick:Ee=>fe(te.id)},[l("span",Zy,b(te.firstName)+" "+b(te.lastName),1),(Ce=te.classrooms)!=null&&Ce.length?(m(),v("span",eb,b(te.classrooms.join(", ")),1)):F("",!0)],10,Qy)}),128))]),l("button",{class:"add-user-btn",onClick:J}," + Add New User "),M(o).currentUser.value?(m(),v("button",{key:0,class:"back-link",onClick:W}," Cancel ")):F("",!0)])):r.value==="recovery-sent"?(m(),v("div",tb,[R[25]||(R[25]=l("h2",null,"Check Your Email",-1)),l("p",sb,[R[21]||(R[21]=Oe(" We found an existing account for ",-1)),l("strong",null,b($.value),1),R[22]||(R[22]=Oe(". ",-1))]),l("div",nb,[l("p",null,b(_.value),1),R[23]||(R[23]=l("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),l("div",ob,[R[24]||(R[24]=l("label",{for:"recoveryCode"},"Recovery Code",-1)),Fe(l("input",{id:"recoveryCode","onUpdate:modelValue":R[5]||(R[5]=te=>w.value=te),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Ko(ce,["enter"])},null,544),[[wt,w.value]]),l("button",{class:"submit-btn",disabled:w.value.trim().length!==6||g.value,onClick:ce},[g.value?(m(),v("span",rb,b(y.value),1)):(m(),v("span",lb,"Restore Account"))],8,ab),S.value?(m(),v("span",ib,b(S.value),1)):F("",!0)]),l("button",{class:"back-link",onClick:R[6]||(R[6]=te=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(m(),v("div",cb,[R[27]||(R[27]=l("h2",null,"Restoring Your Account",-1)),l("p",ub,b(y.value),1),S.value?(m(),v("div",db,[l("p",fb,b(S.value),1),l("button",{class:"back-link",onClick:R[7]||(R[7]=te=>r.value="form")}," Try again ")])):(m(),v("div",pb,[...R[26]||(R[26]=[l("div",{class:"spinner"},null,-1)])]))])):F("",!0)])]))}},vb=_e(mb,[["__scopeId","data-v-903ed78e"]]),Ts="https://api.bridge-classroom.com/api",Vs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ns=I([]),Ks=I(null),Nt=I(!1),Qe=I(null);function bo(){async function e(u){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ts}/classrooms?teacher_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Ns.value=f.classrooms:Qe.value=f.error||"Failed to fetch classrooms",f}catch(c){return console.error("Failed to fetch classrooms:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function t(u,c,f){Nt.value=!0,Qe.value=null;try{const d=await fetch(`${Ts}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({teacher_id:u,name:c,description:f||null})});if(!d.ok){const h=await d.text();return Qe.value=h||`Server error (${d.status})`,{success:!1,error:Qe.value}}const p=await d.json();return p.success?Ns.value=[p.classroom,...Ns.value]:Qe.value=p.error||"Failed to create classroom",p}catch(d){return console.error("Failed to create classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function s(u){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Ks.value=f.classroom:Qe.value=f.error||"Failed to fetch classroom",f}catch(c){return console.error("Failed to fetch classroom detail:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function n(u,c){try{const d=await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}/members/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":Vs}})).json();if(d.success&&Ks.value){Ks.value.members=Ks.value.members.filter(h=>h.student_id!==c);const p=Ns.value.findIndex(h=>h.id===u);p!==-1&&Ns.value[p].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(u){Nt.value=!0,Qe.value=null;try{const c=await fetch(`${Ts}/join/${encodeURIComponent(u)}`);return c.status===404?(Qe.value="Classroom not found",null):await c.json()}catch(c){return console.error("Failed to fetch join info:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function a(u,c,f){Nt.value=!0,Qe.value=null;try{const p=await(await fetch(`${Ts}/join/${encodeURIComponent(u)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:c,encrypted_grant_payload:f})})).json();return p.success||(Qe.value=p.error||"Failed to join classroom"),p}catch(d){return console.error("Failed to join classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function r(u,c){try{return await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:c})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){Ns.value=[],Ks.value=null,Nt.value=!1,Qe.value=null}return{teacherClassrooms:Ns,currentClassroom:Ks,loading:Nt,error:Qe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:i}}const hb={class:"settings-panel"},gb={class:"settings-body"},yb={class:"settings-section"},bb={class:"info-row"},_b={class:"info-value"},wb={class:"info-row"},Sb={class:"info-value"},Cb={class:"info-row"},$b={class:"info-row"},kb={class:"info-value"},xb={key:1,class:"edit-form"},Ab={class:"form-group"},Tb={class:"form-group"},Nb={class:"form-group"},Eb={class:"checkbox-label"},Ob={key:0,class:"settings-section"},Ib={class:"assignment-list"},Rb={class:"assignment-header"},Db={class:"assignment-name"},Pb={class:"assignment-progress"},Lb={class:"progress-bar"},Bb={class:"assignment-meta"},Mb={key:0},Ub={class:"assignment-list"},Fb={class:"assignment-header"},jb={class:"assignment-name"},Hb={class:"assignment-meta"},Wb={key:1,class:"settings-section"},Vb={class:"classroom-id"},Kb=["disabled","onClick"],Gb={class:"settings-section"},zb={class:"toggle-row"},Jb={class:"toggle-label"},Yb=["checked"],qb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Je(),o=mo(),a=ha(),r=bo(),i=I(!1),u=I(""),c=I(""),f=I(!0),d=T(()=>n.currentUser.value),p=T(()=>{var Q;return!d.value||!((Q=d.value.classrooms)!=null&&Q.length)?"No classroom assigned":d.value.classrooms.map(q=>{const de=o.availableClassrooms.value.find(pe=>pe.id===q);return de?de.name:q}).join(", ")}),h=T(()=>a.getAllAssignments().filter(Q=>Q.completionPercent<100)),g=T(()=>a.getAllAssignments().filter(Q=>Q.completionPercent>=100));function y(){d.value&&(u.value=d.value.firstName,c.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function $(){i.value=!1}function S(){d.value&&(n.updateUser(d.value.id,{firstName:u.value,lastName:c.value,dataConsent:f.value}),i.value=!1)}function _(){s("switchUser")}function w(){i.value=!1,s("close")}const x=I(null);async function B(Q){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(x.value=Q,(await r.leaveClassroom(Q,d.value.id)).success){const de=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:de.filter(pe=>pe!==Q)})}x.value=null}function V(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function j(Q){return Q?new Date(Q).toLocaleDateString():"N/A"}return(Q,q)=>{var de,pe,ce,ge,$e,me,fe;return e.visible?(m(),v("div",{key:0,class:"settings-overlay",onClick:St(w,["self"])},[l("div",hb,[l("div",{class:"settings-header"},[q[5]||(q[5]=l("h2",null,"Settings",-1)),l("button",{class:"close-btn",onClick:w,"aria-label":"Close"},"  ")]),l("div",gb,[l("section",yb,[q[12]||(q[12]=l("h3",null,"Your Profile",-1)),i.value?(m(),v("div",xb,[l("div",Ab,[q[10]||(q[10]=l("label",{for:"editFirstName"},"First Name",-1)),Fe(l("input",{id:"editFirstName","onUpdate:modelValue":q[1]||(q[1]=J=>u.value=J),type:"text"},null,512),[[wt,u.value]])]),l("div",Tb,[q[11]||(q[11]=l("label",{for:"editLastName"},"Last Name",-1)),Fe(l("input",{id:"editLastName","onUpdate:modelValue":q[2]||(q[2]=J=>c.value=J),type:"text"},null,512),[[wt,c.value]])]),l("div",Nb,[l("label",Eb,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":q[3]||(q[3]=J=>f.value=J)},null,512),[[Fr,f.value]]),l("span",null,"Share practice results with "+b(M(o).teacherName.value||"teacher"),1)])]),l("div",{class:"button-row"},[l("button",{class:"primary-btn",onClick:S}," Save Changes "),l("button",{class:"secondary-btn",onClick:$}," Cancel ")])])):(m(),v(Z,{key:0},[l("div",bb,[q[6]||(q[6]=l("span",{class:"info-label"},"Name",-1)),l("span",_b,b((de=d.value)==null?void 0:de.firstName)+" "+b((pe=d.value)==null?void 0:pe.lastName),1)]),l("div",wb,[q[7]||(q[7]=l("span",{class:"info-label"},"Class",-1)),l("span",Sb,b(p.value),1)]),l("div",Cb,[q[8]||(q[8]=l("span",{class:"info-label"},"Data Sharing",-1)),l("span",{class:ie(["info-value",(ce=d.value)!=null&&ce.dataConsent?"enabled":"disabled"])},b((ge=d.value)!=null&&ge.dataConsent?"Enabled":"Disabled"),3)]),l("div",$b,[q[9]||(q[9]=l("span",{class:"info-label"},"Member Since",-1)),l("span",kb,b(j(($e=d.value)==null?void 0:$e.createdAt)),1)]),l("div",{class:"button-row"},[l("button",{class:"secondary-btn",onClick:y}," Edit Profile "),l("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((me=d.value)==null?void 0:me.role)!=="teacher"&&((fe=d.value)==null?void 0:fe.role)!=="admin"?(m(),v("button",{key:0,class:"become-teacher-btn",onClick:q[0]||(q[0]=J=>{s("close"),s("become-teacher")})}," Become a Teacher ")):F("",!0)],64))]),h.value.length||g.value.length?(m(),v("section",Ob,[q[16]||(q[16]=l("h3",null,"Assignments",-1)),h.value.length?(m(),v(Z,{key:0},[q[13]||(q[13]=l("h4",null,"Active",-1)),l("div",Ib,[(m(!0),v(Z,null,ae(h.value,J=>(m(),v("div",{key:J.id,class:"assignment-item"},[l("div",Rb,[l("span",Db,b(J.name),1),l("span",Pb,b(J.completionPercent)+"%",1)]),l("div",Lb,[l("div",{class:"progress-fill",style:st({width:`${J.completionPercent}%`})},null,4)]),l("div",Bb,[J.dueDate?(m(),v("span",Mb," Due: "+b(j(J.dueDate)),1)):F("",!0),l("span",null,b(J.completedDeals)+"/"+b(J.totalDeals)+" deals ",1)])]))),128))])],64)):F("",!0),g.value.length?(m(),v(Z,{key:1},[q[15]||(q[15]=l("h4",null,"Completed",-1)),l("div",Ub,[(m(!0),v(Z,null,ae(g.value,J=>(m(),v("div",{key:J.id,class:"assignment-item completed"},[l("div",Fb,[l("span",jb,b(J.name),1),q[14]||(q[14]=l("span",{class:"assignment-check"},"",-1))]),l("div",Hb," Completed "+b(j(J.lastPracticedAt)),1)]))),128))])],64)):F("",!0)])):F("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(m(),v("section",Wb,[q[17]||(q[17]=l("h3",null,"My Classrooms",-1)),(m(!0),v(Z,null,ae(d.value.classrooms,J=>(m(),v("div",{key:J,class:"classroom-row"},[l("span",Vb,b(J),1),l("button",{class:"leave-btn",disabled:x.value===J,onClick:W=>B(J)},b(x.value===J?"Leaving...":"Leave"),9,Kb)]))),128))])):F("",!0),l("section",Gb,[q[19]||(q[19]=l("h3",null,"Display Options",-1)),l("div",zb,[l("label",Jb,[l("input",{type:"checkbox",checked:M(o).showLoadPbnOption.value,onChange:q[4]||(q[4]=J=>M(o).setUIPref("showLoadPbnOption",J.target.checked))},null,40,Yb),q[18]||(q[18]=l("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),l("section",{class:"settings-section"},[q[20]||(q[20]=l("h3",null,"Data & Privacy",-1)),q[21]||(q[21]=l("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),l("button",{class:"remove-device-btn",onClick:V}," Remove account from this device "),q[22]||(q[22]=l("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):F("",!0)}}},Xb=_e(qb,[["__scopeId","data-v-57179473"]]),Qb={class:"banner-content"},Zb={class:"assignment-info"},e_={class:"assignment-title"},t_={class:"assignment-name"},s_={class:"assignment-meta"},n_={class:"progress-text"},o_={class:"progress-bar"},a_={key:0,class:"complete-badge"},r_={class:"return-text"},l_={__name:"AssignmentBanner",setup(e){const t=ha(),s=T(()=>t.currentAssignment.value),n=T(()=>t.hasActiveAssignment.value),o=T(()=>t.assignmentProgress.value),a=T(()=>t.isAssignmentComplete.value),r=T(()=>t.inAssignmentMode.value),i=T(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),u=T(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),c=T(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(p,h)=>{var g,y;return n.value&&r.value?(m(),v("div",{key:0,class:ie(["assignment-banner",{complete:a.value}])},[l("div",Qb,[l("div",Zb,[l("div",e_,[h[0]||(h[0]=l("span",{class:"assignment-label"},"Assignment:",-1)),l("span",t_,b((g=s.value)==null?void 0:g.name),1)]),l("div",s_,[l("span",n_,b(o.value.completed)+" of "+b(o.value.total)+" deals ("+b(o.value.percent)+"%) ",1),u.value?(m(),v("span",{key:0,class:ie(["due-text",c.value])},b(u.value),3)):F("",!0)])]),l("div",o_,[l("div",{class:ie(["progress-fill",{complete:a.value}]),style:st({width:`${o.value.percent}%`})},null,6)]),l("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(m(),v("div",a_," Complete! ")):F("",!0)],2)):s.value&&!r.value?(m(),v("div",{key:1,class:"return-banner",onClick:d},[h[1]||(h[1]=l("span",{class:"return-icon"},"",-1)),l("span",r_," Return to assignment: "+b((y=s.value)==null?void 0:y.name)+" ("+b(o.value.percent)+"% complete) ",1)])):F("",!0)}}},i_=_e(l_,[["__scopeId","data-v-a4095a6a"]]),c_=["innerHTML"],u_={__name:"AnnouncementBanner",setup(e){const t=nl(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,i)=>{const u=s[i.toLowerCase()];return u?`<span class="ann-circle" style="background:${u.bg};color:${u.fg}"></span>`:r})}return(o,a)=>M(t).announcement.value&&M(t).dismissed.value!==M(t).announcement.value.id?(m(),v("div",{key:0,class:ie(["announcement-banner",M(t).announcement.value.type])},[l("span",{class:"announcement-text",innerHTML:n(M(t).announcement.value.message)},null,8,c_),l("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>M(t).dismiss()),title:"Dismiss"},"")],2)):F("",!0)}},d_=_e(u_,[["__scopeId","data-v-4b12409b"]]),f_={key:0,class:"status-content"},p_={key:1,class:"status-content offline"},m_={key:0,class:"badge"},v_={key:2,class:"status-content error"},h_={class:"status-text"},g_={key:0,class:"badge"},y_={key:3,class:"status-content pending"},b_={class:"status-text"},__={key:4,class:"status-content synced"},w_={__name:"SyncStatus",setup(e){const t=Iu(),s=Ss(),n=T(()=>s.pendingCount.value),o=T(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=T(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(u,c)=>(m(),v("div",{class:ie(["sync-status",a.value]),onClick:r},[M(t).isSyncing.value?(m(),v("div",f_,[...c[0]||(c[0]=[l("span",{class:"spinner"},null,-1),l("span",{class:"status-text"},"Syncing...",-1)])])):M(t).isOffline.value?(m(),v("div",p_,[c[1]||(c[1]=l("span",{class:"icon"},"",-1)),c[2]||(c[2]=l("span",{class:"status-text"},"Offline",-1)),n.value>0?(m(),v("span",m_,b(n.value),1)):F("",!0)])):M(t).hasError.value?(m(),v("div",v_,[c[3]||(c[3]=l("span",{class:"icon"},"",-1)),l("span",h_,b(o.value),1),n.value>0?(m(),v("span",g_,b(n.value),1)):F("",!0),l("button",{class:"retry-btn",onClick:St(i,["stop"])},"Retry")])):n.value>0?(m(),v("div",y_,[c[4]||(c[4]=l("span",{class:"icon"},"",-1)),l("span",b_,b(n.value)+" pending",1)])):(m(),v("div",__,[...c[5]||(c[5]=[l("span",{class:"icon"},"",-1),l("span",{class:"status-text"},"Synced",-1)])]))],2))}},S_=_e(w_,[["__scopeId","data-v-8457149a"]]),Du=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function C_(e){return Du.find(t=>t.path===e)||null}Du.reduce((e,t)=>e+t.dealCount,0);const Yn=36e5;function wi(e){if(!e||e.length===0)return"untried";const t=[...e].sort((f,d)=>f.ts-d.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(f=>!f.correct&&n.ts-f.ts<Yn),r=t.slice(-5),i=r.filter(f=>f.correct).length,u=r.length-i;return a&&i/r.length>=.8&&u<=1?"mastered":r.filter(f=>f.correct?!t.filter(p=>p.ts<f.ts).reverse().find(p=>!p.correct&&f.ts-p.ts<Yn):!1).length>=1?"progressing":"struggling"}function $_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var x,B;const i=Object.keys(r).map(Number).sort((V,j)=>V-j);let u=0,c=0,f=0;i.forEach(V=>{const j=wi(r[V]);j==="mastered"?u++:j==="progressing"?c++:f++});const d=i.length,p=[];i.forEach(V=>{r[V].forEach(j=>p.push({...j,dealNum:V}))}),p.sort((V,j)=>V.ts-j.ts);const h=2*Yn,g=i.map(V=>{var $e;const j=r[V].slice().sort((me,fe)=>me.ts-fe.ts),Q=wi(j),q=(($e=j[j.length-1])==null?void 0:$e.correct)??!1,de=j.map((me,fe)=>{if(me.correct){const J=j.slice(0,fe).reverse().find(W=>!W.correct&&me.ts-W.ts<Yn);return{ts:me.ts,y:J?.75:1,correct:!0}}else{const J=j.slice(fe+1).find(W=>W.correct&&W.ts-me.ts<Yn);return{ts:me.ts,y:J?.5:0,correct:!1}}}),pe=5*60*1e3,ce=de.map(me=>({...me,vts:me.ts.getTime(),rawTs:me.ts.getTime()}));let ge=0;for(;ge<ce.length;){let me=ge;for(;me+1<ce.length&&ce[me+1].vts-ce[me].vts<pe;)me++;if(me>ge){const fe=ce[me].vts-ce[ge].vts,J=Math.max(fe,h),W=fe>0?J/fe:1,N=ce[ge].vts;for(let P=ge;P<=me;P++)ce[P].vts=N+(ce[P].vts-N)*W}ge=me+1}return{dealNum:V,status:Q,lastCorrect:q,points:ce}}),y=g.flatMap(V=>V.points.map(j=>j.rawTs)),$=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-$||1;g.forEach(V=>{V.points=V.points.map(j=>({...j,x:(j.rawTs-$)/_}))});const w=(()=>{const V=Object.values(r);if(V.length===0)return 0;const j=V.reduce((q,de)=>{const pe=de.slice(-5);return q+pe.filter(ce=>ce.correct).length},0),Q=V.reduce((q,de)=>q+Math.min(de.length,5),0);return Q>0?Math.round(j/Q*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:d,mastered:u,progressing:c,struggling:f,totalBoards:t[a]??d,totalAttempts:p.length,recentRate:w,boardLines:g,firstActivity:(x=p[0])==null?void 0:x.ts,lastActivity:(B=p[p.length-1])==null?void 0:B.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function k_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=C_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=Jc(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const tn={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function Pu(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const x_={key:0,class:"sparkline-empty"},A_=["width","height"],T_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],N_=["d","stroke"],E_=["cx","cy","r","fill"],O_=5,I_=2.5,R_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=T(()=>t.width-n.l-n.r),a=T(()=>t.height-n.t-n.b),r=T(()=>{const d=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...d),h=Math.max(...d);return{min:p,max:h,span:h-p||1}});function i(d){return n.t+(1-d)*a.value}function u(d,p){const h=p>=.9?1:p>0?.5:0;return{px:n.l+(d-r.value.min)/r.value.span*o.value,py:n.t+(1-h)*a.value,yMapped:h}}const c=T(()=>t.boardLines.map(d=>{const p=tn[d.status]||"#6b7280",h=d.points.filter(y=>y.y!==.75).map(y=>u(y.x,y.y)),g=h.length>=2?h.map((y,$)=>`${$===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:h,pathD:g}})),f=T(()=>{const d=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...u(y.x,y.y),y:y.y}))),p=new Array(d.length).fill(!1),h=[];return d.forEach((g,y)=>{if(p[y])return;const $=[g];p[y]=!0,d.forEach((x,B)=>{if(p[B])return;const V=x.px-g.px,j=x.py-g.py;Math.sqrt(V*V+j*j)<O_&&($.push(x),p[B]=!0)});const S=$.reduce((x,B)=>x+B.px,0)/$.length,_=$.reduce((x,B)=>x+B.py,0)/$.length,w=$.sort((x,B)=>B.yMapped-x.yMapped)[0].yMapped;h.push({px:S,py:_,y:w,n:$.length})}),h});return(d,p)=>!e.boardLines||e.boardLines.length===0?(m(),v("div",x_," No data ")):(m(),v("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(m(),v(Z,null,ae(s,h=>l("line",{key:h,x1:n.l,y1:i(h),x2:n.l+o.value,y2:i(h),stroke:h===.5?"#d1d5db":"#e5e7eb","stroke-width":h===.5?1:.5,"stroke-dasharray":h===.5?"3,3":"none"},null,8,T_)),64)),(m(!0),v(Z,null,ae(c.value,(h,g)=>Fe((m(),v("path",{key:"line-"+g,d:h.pathD,fill:"none",stroke:h.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,N_)),[[ep,h.pts.length>=2]])),128)),(m(!0),v(Z,null,ae(f.value,(h,g)=>(m(),v("circle",{key:"bubble-"+g,cx:h.px,cy:h.py,r:I_*Math.sqrt(h.n),fill:M(Pu)(h.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,E_))),128))],8,A_))}},D_=_e(R_,[["__scopeId","data-v-a14e2bb7"]]),P_={class:"details-header"},L_={class:"details-title"},B_={class:"details-subtitle"},M_=["viewBox","height"],U_=["x","y","fill"],F_=["y","width","height","fill","fill-opacity"],j_=["x","y","fill"],H_=["x1","y1","x2","y2","stroke-dasharray"],W_=["x","y"],V_=["cx","cy","fill","onClick"],K_={key:0,class:"details-activity"},G_={class:"stats-row"},z_={class:"stat-value"},J_={class:"stat-label"},Y_=["viewBox"],q_=["x","y","width","height"],X_={class:"activity-dates"},Q_={class:"details-legend"},Pa=7,Si=.3,La=110,Es=560,qt=28,Ba=40,Ci=36e5,$t=864e5,Z_={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close","dot-click"],setup(e,{emit:t}){const s=e,n=t,o={t:16,r:20,b:40,l:La},a=T(()=>{const w=new Set(s.lesson.boardLines.map(B=>B.dealNum)),x=s.lesson.totalBoards??Math.max(...w);return Array.from({length:x},(B,V)=>V+1)}),r=T(()=>a.value.length*qt),i=T(()=>Es+o.l+o.r),u=T(()=>r.value+o.t+o.b),c=T(()=>new Set(s.lesson.boardLines.map(w=>w.dealNum)));function f(w){return c.value.has(w)}function d(w){const x=s.lesson.boardLines.find(B=>B.dealNum===w);return x?tn[x.status]||"#6b7280":"#d1d5db"}const p=T(()=>{const w=s.rawData.filter(J=>J.skill_path===s.lesson.path),x=a.value,B=w.map(J=>{const W=new Date(J.timestamp).getTime(),N=J.deal_number,P=x.indexOf(N);return{rawTs:W,dealNum:N,boardIdx:P,correct:J.correct,y:J.correct?1:0}});if(B.forEach(J=>{const W=B.filter(P=>P.dealNum===J.dealNum).sort((P,R)=>P.rawTs-R.rawTs),N=W.findIndex(P=>P.rawTs===J.rawTs&&P.correct===J.correct);if(J.correct){const P=W.slice(0,N).reverse().find(R=>!R.correct&&J.rawTs-R.rawTs<Ci);J.y=P?.75:1}else{const P=W.slice(N+1).find(R=>R.correct&&R.rawTs-J.rawTs<Ci);J.y=P?.5:0}}),B.length===0)return[];const V=B.map(J=>J.rawTs),j=Math.min(...V),Q=Math.max(...V),q=Math.floor(j/$t)*$t,pe=(Math.floor(Q/$t)+1)*$t-1-q||1,ce=J=>o.l+(J.rawTs-q)/pe*Es,ge=J=>o.t+J*qt+qt/2,$e=Pa*2*(1-Si),me=Pa*2*(1-Si),fe=B.map(J=>({...J,px:ce(J),py:ge(J.boardIdx)}));return x.forEach(J=>{const W=fe.filter(P=>P.dealNum===J),N={};W.forEach(P=>{const R=P.rawTs;N[R]||(N[R]=[]),N[R].push(P)}),Object.values(N).forEach(P=>{if(P.length<2)return;const R=P[0].py;P.forEach((te,Ce)=>{te.py=R+(Ce-(P.length-1)/2)*me})})}),x.forEach(J=>{const W=fe.filter(R=>R.dealNum===J).sort((R,te)=>R.px-te.px),N=[];let P=0;for(;P<W.length;){let R=P;for(;R+1<W.length&&W[R+1].px-W[P].px<$e;)R++;N.push({start:P,end:R}),P=R+1}N.forEach((R,te)=>{const Ce=R.end-R.start+1;if(Ce===1)return;const Ee=(Ce-1)*$e;let xe;te===0?xe=W[R.start].px:te===N.length-1?xe=W[R.end].px-Ee:xe=(W[R.start].px+W[R.end].px)/2-Ee/2;for(let je=0;je<Ce;je++)W[R.start+je].px=xe+je*$e})}),fe}),h=T(()=>[...p.value].sort((w,x)=>w.y-x.y)),g=T(()=>{const w=p.value;if(w.length===0)return[];const x=w.map(pe=>pe.rawTs),B=Math.min(...x),V=Math.max(...x),j=Math.floor(B/$t)*$t,q=(Math.floor(V/$t)+1)*$t-1-j||1,de=5;return Array.from({length:de},(pe,ce)=>{const ge=ce/(de-1),$e=new Date(j+ge*q);return{x:o.l+ge*Es,label:$e.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+$e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),y=T(()=>{const w=p.value;if(w.length===0)return null;const x={};w.forEach(ce=>{const ge=Math.floor(ce.rawTs/$t);x[ge]=(x[ge]||0)+1});const B=Object.keys(x).map(Number).sort();if(B.length===0)return null;const V=B[0],j=B[B.length-1],Q=j-V+1,q=Math.max(...Object.values(x)),de=Math.max(2,Es/Q-1);return{bars:B.map(ce=>({dayKey:ce,x:(ce-V)/Q*Es,h:x[ce]/q*Ba,w:de,count:x[ce],dateLabel:new Date(ce*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Es,firstLabel:new Date(V*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(j*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),$=T(()=>{const w=p.value,x={};return w.forEach(B=>{const V=Math.floor(B.rawTs/$t);x[V]=!0}),[{label:"Days active",value:Object.keys(x).length},{label:"Boards tried",value:s.lesson.tried},{label:"Observations",value:w.length}]}),S=[{color:"#10b981",label:"Clean success"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hour)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function _(w){return new Date(w).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(w,x)=>(m(),v("div",{class:"details-overlay",onClick:x[2]||(x[2]=St(B=>w.$emit("close"),["self"]))},[l("div",{class:"details-panel",onClick:x[1]||(x[1]=St(()=>{},["stop"]))},[l("div",P_,[l("div",null,[l("h2",L_,b(e.lesson.name),1),l("p",B_,b(e.lesson.tried)+" boards  "+b(e.lesson.totalAttempts)+" attempts ",1)]),l("button",{class:"details-close-btn",onClick:x[0]||(x[0]=B=>w.$emit("close"))}," close")]),(m(),v("svg",{viewBox:`0 0 ${i.value} ${u.value}`,width:"100%",height:u.value,class:"details-chart"},[(m(!0),v(Z,null,ae(a.value,(B,V)=>(m(),v("rect",{key:"bg-"+B,x:o.l,y:o.t+V*qt,width:Es,height:qt,fill:V%2===0?"#ffffff":"#f9fafb"},null,8,U_))),128)),(m(!0),v(Z,null,ae(a.value,(B,V)=>(m(),v("g",{key:"label-"+B},[l("rect",{x:2,y:o.t+V*qt+3,width:La-14,height:qt-6,rx:"3",fill:d(B),"fill-opacity":f(B)?.12:.05},null,8,F_),l("text",{x:La-16,y:o.t+V*qt+qt/2+4,"text-anchor":"end","font-size":"13",fill:d(B),"font-family":"monospace"}," Board "+b(B)+b(f(B)?"":" "),9,j_)]))),128)),(m(!0),v(Z,null,ae(g.value,(B,V)=>(m(),v("line",{key:"grid-"+V,x1:B.x,y1:o.t,x2:B.x,y2:o.t+r.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":V===0||V===g.value.length-1?"none":"3,4"},null,8,H_))),128)),(m(!0),v(Z,null,ae(g.value,(B,V)=>(m(),v("text",{key:"tick-"+V,x:B.x,y:o.t+r.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},b(B.label),9,W_))),128)),(m(!0),v(Z,null,ae(h.value,(B,V)=>(m(),v("circle",{key:"dot-"+V,cx:B.px,cy:B.py,r:Pa,fill:M(Pu)(B.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92",class:"obs-dot",onClick:St(j=>n("dot-click",{rawTs:B.rawTs,dealNum:B.dealNum,correct:B.correct,event:j}),["stop"])},[l("title",null,"Board "+b(B.dealNum)+"  "+b(B.correct?"Correct":"Incorrect")+"  "+b(_(B.rawTs)),1)],8,V_))),128))],8,M_)),y.value?(m(),v("div",K_,[l("div",G_,[(m(!0),v(Z,null,ae($.value,B=>(m(),v("div",{class:"stat-item",key:B.label},[l("div",z_,b(B.value),1),l("div",J_,b(B.label),1)]))),128))]),(m(),v("svg",{width:"100%",viewBox:`0 0 ${y.value.barW} ${Ba}`,class:"activity-chart"},[(m(!0),v(Z,null,ae(y.value.bars,B=>(m(),v("rect",{key:B.dayKey,x:B.x,y:Ba-B.h,width:B.w,height:B.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[l("title",null,b(B.dateLabel)+": "+b(B.count)+" observations",1)],8,q_))),128))],8,Y_)),l("div",X_,[l("span",null,b(y.value.firstLabel),1),l("span",null,b(y.value.lastLabel),1)])])):F("",!0),l("div",Q_,[(m(),v(Z,null,ae(S,B=>l("span",{key:B.label,class:"legend-item"},[l("span",{class:"legend-dot",style:st({backgroundColor:B.color})},null,4),Oe(" "+b(B.label),1)])),64))])])]))}},e1=_e(Z_,[["__scopeId","data-v-9a99b752"]]),t1={class:"obs-header-left"},s1={class:"obs-id"},n1={class:"obs-header-right"},o1={class:"timestamp"},a1={class:"obs-body"},r1={class:"obs-col"},l1={class:"card"},i1={class:"hands-grid"},c1={class:"deal-meta-top"},u1={class:"meta-row"},d1={class:"meta-value"},f1={class:"meta-row"},p1={class:"meta-value"},m1={class:"meta-row"},v1={class:"meta-value"},h1={class:"meta-row"},g1={class:"meta-value"},y1={class:"compass-north"},b1={class:"seat-label"},_1={key:0,class:"you-tag"},w1={class:"cards"},S1={key:1,class:"hidden-hand"},C1={class:"seat-label"},$1={key:0,class:"you-tag"},k1={class:"cards"},x1={key:1,class:"hidden-hand"},A1={class:"seat-label"},T1={key:0,class:"you-tag"},N1={class:"cards"},E1={key:1,class:"hidden-hand"},O1={class:"deal-meta-bottom"},I1={class:"meta-row"},R1={class:"meta-contract"},D1={class:"compass-south"},P1={class:"seat-label"},L1={key:0,class:"you-tag"},B1={class:"cards"},M1={key:1,class:"hidden-hand"},U1={class:"obs-col"},F1={class:"card"},j1={class:"auction-header"},H1={key:0,class:"split-cell"},W1={class:"pill-expected"},V1={key:1,class:"split-cell"},K1={class:"pill-expected"},G1={key:0,class:"pill-student"},z1={key:2,class:"auction-bid"},J1={key:0,class:"prompts-list"},Y1={class:"prompt-num"},q1={key:0,class:"prompt-detail"},X1={class:"pill-expected-sm"},Q1={class:"pill-student-sm"},Z1={key:1,class:"prompt-ok"},e0={key:1,class:"prompt-detail"},t0={class:"pill-expected-sm"},s0={class:"pill-student-sm"},n0={key:1,class:"prompt-ok"},o0={key:2,class:"prompt-time"},a0={key:1,class:"prompt-meta"},r0={class:"prompt-meta-auction"},l0={key:2,class:"auction-legend"},i0={key:0,class:"legend-item"},c0={key:3,class:"auction-legend"},u0={key:0,class:"legend-item"},d0={class:"card"},f0={class:"info-grid"},p0={class:"info-item"},m0={class:"info-value"},v0={class:"info-item"},h0={class:"info-value"},g0={class:"info-item full-width"},y0={class:"info-item"},b0={class:"info-value"},_0={class:"info-item"},w0={class:"info-value"},S0={class:"info-item full-width"},C0={class:"info-value mono"},$0={__name:"ObservationViewer",props:{obs:{type:Object,required:!0},initialX:{type:Number,default:100},initialY:{type:Number,default:100},zIndex:{type:Number,default:3e3}},emits:["close","focus"],setup(e,{emit:t}){const s=e,n=t,o=I(s.initialX),a=I(s.initialY);let r=!1,i=0,u=0;function c(W){r=!0,i=W.clientX-o.value,u=W.clientY-a.value,document.addEventListener("mousemove",f),document.addEventListener("mouseup",d),n("focus")}function f(W){r&&(o.value=W.clientX-i,a.value=W.clientY-u)}function d(){r=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)}Dr(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)});const p=T(()=>s.obs.deal||{}),h=T(()=>s.obs.bid_prompt||{}),g=T(()=>s.obs.result||{}),y=T(()=>g.value.correct),$=T(()=>p.value.hands||{}),S=T(()=>p.value.student_seat),_=T(()=>h.value.prompt_index===-1||h.value.expected_bid==="BOARD"),w=T(()=>s.obs.prompts||[]),x=T(()=>w.value.length>0),B=T(()=>{if(!x.value)return{};const W=ce.indexOf(p.value.dealer),N={};for(const R of w.value){if(R.type!=="bid"||!R.auction_so_far)continue;const te=W+R.auction_so_far.length;N[te]||(N[te]=[]),N[te].push(R)}const P={};for(const[R,te]of Object.entries(N)){const Ce=te.find(xe=>!xe.correct);if(!Ce)continue;const Ee=te.some(xe=>xe.correct);P[R]={expected:Ce.expected_bid,student:Ce.student_bid,correct:!1,corrected:Ee}}return P}),V=T(()=>{const W=w.value,N=new Map;for(const Ee of W){const xe=Ee.type==="bid"?`bid-${Ee.prompt_index}`:`card-${W.indexOf(Ee)}`;N.has(xe)||N.set(xe,[]),N.get(xe).push(Ee)}let P=N.size,R=0,te=0;for(const Ee of N.values()){const xe=Ee.some(G=>!G.correct),je=Ee.some(G=>G.correct);xe&&(R++,je&&te++)}const Ce=W.reduce((Ee,xe)=>Ee+(xe.time_ms||0),0);return{total:P,wrong:R,corrected:te,totalTime:Ce}}),j=T(()=>h.value.expected_bid),Q=T(()=>g.value.student_bid),q=T(()=>h.value.auction_so_far||[]),de=T(()=>((s.obs.observation_id||s.obs.id||"")+"").slice(0,8)+""),pe=T(()=>s.obs.timestamp?new Date(s.obs.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),ce=["W","N","E","S"],ge=T(()=>{const W=p.value.full_auction,N=(typeof W=="string"?W:Array.isArray(W)?W.join(" "):"").split(" ").filter(Boolean),P=ce.indexOf(p.value.dealer);return[...Array(Math.max(0,P)).fill(null),...N]}),$e=T(()=>ce.indexOf(p.value.dealer)+q.value.length),me=T(()=>{const W=[];for(let N=0;N<ge.value.length;N+=4)W.push(ge.value.slice(N,N+4));return W});function fe(W){return!W||W<=0?"":W<1e3?W+"ms":(W/1e3).toFixed(1)+"s"}function J(W){if(!W)return null;if(typeof W=="object"&&W.spades!==void 0)return[{suit:"",cards:(W.spades||[]).join(""),color:"black"},{suit:"",cards:(W.hearts||[]).join(""),color:"red"},{suit:"",cards:(W.diamonds||[]).join(""),color:"red"},{suit:"",cards:(W.clubs||[]).join(""),color:"black"}];if(typeof W!="string")return null;const N=W.split(".");if(N.length<4)return null;const[P,R,te,Ce]=N;return[{suit:"",cards:P,color:"black"},{suit:"",cards:R,color:"red"},{suit:"",cards:te,color:"red"},{suit:"",cards:Ce,color:"black"}]}return(W,N)=>(m(),v("div",{class:"obs-viewer",style:st({left:o.value+"px",top:a.value+"px",zIndex:e.zIndex}),onMousedown:N[1]||(N[1]=P=>W.$emit("focus"))},[l("div",{class:"obs-header",onMousedown:St(c,["prevent"])},[l("div",t1,[N[2]||(N[2]=l("span",{class:"suit-icon"},"",-1)),N[3]||(N[3]=l("span",{class:"obs-title"},"Observation Detail",-1)),l("span",s1,b(de.value),1)]),l("div",n1,[l("span",o1,b(pe.value),1),l("span",{class:ie(["result-badge",y.value?"correct":"incorrect"])},b(y.value?" Correct":" Incorrect"),3),l("button",{class:"close-btn",onClick:N[0]||(N[0]=P=>W.$emit("close")),title:"Close"},"")])],32),l("div",a1,[l("div",r1,[l("div",l1,[N[16]||(N[16]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),Oe(" Hands")],-1)),l("div",i1,[l("div",c1,[l("div",u1,[N[4]||(N[4]=l("span",{class:"meta-label"},"Lesson",-1)),l("span",d1,b(p.value.subfolder),1)]),l("div",f1,[N[5]||(N[5]=l("span",{class:"meta-label"},"Deal",-1)),l("span",p1,"#"+b(p.value.deal_number),1)]),l("div",m1,[N[6]||(N[6]=l("span",{class:"meta-label"},"Dealer",-1)),l("span",v1,b(p.value.dealer),1)]),l("div",h1,[N[7]||(N[7]=l("span",{class:"meta-label"},"Vul",-1)),l("span",g1,b(p.value.vulnerability),1)])]),l("div",y1,[l("div",{class:ie(["hand-cell",{student:S.value==="N"}])},[l("div",b1,[N[8]||(N[8]=Oe("N ",-1)),S.value==="N"?(m(),v("span",_1,"YOU")):F("",!0)]),J($.value.north)?(m(!0),v(Z,{key:0},ae(J($.value.north),P=>(m(),v("div",{key:P.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",P.color])},b(P.suit),3),l("span",w1,b(P.cards||""),1)]))),128)):(m(),v("span",S1,"Hidden"))],2)]),N[13]||(N[13]=l("div",null,null,-1)),l("div",{class:ie(["hand-cell",{student:S.value==="W"}])},[l("div",C1,[N[9]||(N[9]=Oe("W ",-1)),S.value==="W"?(m(),v("span",$1,"YOU")):F("",!0)]),J($.value.west)?(m(!0),v(Z,{key:0},ae(J($.value.west),P=>(m(),v("div",{key:P.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",P.color])},b(P.suit),3),l("span",k1,b(P.cards||""),1)]))),128)):(m(),v("span",x1,"Hidden"))],2),N[14]||(N[14]=so('<div class="compass-center" data-v-930ba1ed><div class="compass-rose" data-v-930ba1ed><span class="cr-n" data-v-930ba1ed>N</span><span class="cr-w" data-v-930ba1ed>W</span><span class="cr-e" data-v-930ba1ed>E</span><span class="cr-s" data-v-930ba1ed>S</span></div></div>',1)),l("div",{class:ie(["hand-cell",{student:S.value==="E"}])},[l("div",A1,[N[10]||(N[10]=Oe("E ",-1)),S.value==="E"?(m(),v("span",T1,"YOU")):F("",!0)]),J($.value.east)?(m(!0),v(Z,{key:0},ae(J($.value.east),P=>(m(),v("div",{key:P.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",P.color])},b(P.suit),3),l("span",N1,b(P.cards||""),1)]))),128)):(m(),v("span",E1,"Hidden"))],2),l("div",O1,[l("div",I1,[N[11]||(N[11]=l("span",{class:"meta-label"},"Contract",-1)),l("span",R1,b(p.value.contract)+" by "+b(p.value.declarer),1)])]),l("div",D1,[l("div",{class:ie(["hand-cell",{student:S.value==="S"}])},[l("div",P1,[N[12]||(N[12]=Oe("S ",-1)),S.value==="S"?(m(),v("span",L1,"YOU")):F("",!0)]),J($.value.south)?(m(!0),v(Z,{key:0},ae(J($.value.south),P=>(m(),v("div",{key:P.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",P.color])},b(P.suit),3),l("span",B1,b(P.cards||""),1)]))),128)):(m(),v("span",M1,"Hidden"))],2)]),N[15]||(N[15]=l("div",null,null,-1))])])]),l("div",U1,[l("div",F1,[N[28]||(N[28]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),Oe(" Auction")],-1)),l("div",j1,[(m(),v(Z,null,ae(["W","N","E","S"],P=>l("span",{key:P,class:"auction-dir"},b(P),1)),64))]),(m(!0),v(Z,null,ae(me.value,(P,R)=>(m(),v("div",{key:R,class:"auction-row"},[(m(!0),v(Z,null,ae(P,(te,Ce)=>(m(),v(Z,{key:Ce},[x.value&&B.value[R*4+Ce]?(m(),v("div",H1,[l("span",W1,b(B.value[R*4+Ce].expected),1),l("span",{class:ie(B.value[R*4+Ce].corrected?"pill-corrected":"pill-student")},b(B.value[R*4+Ce].student),3)])):!_.value&&!x.value&&R*4+Ce===$e.value?(m(),v("div",V1,[l("span",K1,b(j.value),1),y.value?F("",!0):(m(),v("span",G1,b(Q.value),1))])):(m(),v("span",z1,b(te||""),1))],64))),128))]))),128)),x.value?(m(),v("div",J1,[(m(!0),v(Z,null,ae(w.value,(P,R)=>(m(),v("div",{key:R,class:ie(["prompt-row",P.correct?"prompt-correct":"prompt-wrong"])},[l("span",Y1,"#"+b(R+1),1),P.type==="bid"?(m(),v("span",q1,[N[18]||(N[18]=Oe(" Expected ",-1)),l("span",X1,b(P.expected_bid),1),P.correct?(m(),v("span",Z1,"")):(m(),v(Z,{key:0},[N[17]||(N[17]=Oe(" got ",-1)),l("span",Q1,b(P.student_bid),1)],64))])):P.type==="card"?(m(),v("span",e0,[N[20]||(N[20]=Oe(" Expected ",-1)),l("span",t0,b(P.expected_card),1),P.correct?(m(),v("span",n0,"")):(m(),v(Z,{key:0},[N[19]||(N[19]=Oe(" got ",-1)),l("span",s0,b(P.student_card),1)],64))])):F("",!0),P.time_ms>0?(m(),v("span",o0,b(fe(P.time_ms)),1)):F("",!0)],2))),128))])):_.value?(m(),v("div",a0,[N[21]||(N[21]=l("span",{class:"prompt-meta-label"},"Board summary",-1)),N[22]||(N[22]=l("span",{class:"prompt-meta-sep"},"",-1)),l("span",r0,b(y.value?"All prompts answered correctly":"Student made errors on this board"),1)])):F("",!0),!_.value&&!x.value?(m(),v("div",l0,[N[24]||(N[24]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot green"}),Oe(" Expected")],-1)),y.value?F("",!0):(m(),v("span",i0,[...N[23]||(N[23]=[l("span",{class:"legend-dot red"},null,-1),Oe(" Student bid",-1)])])),N[25]||(N[25]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot gray"}),Oe(" After this point")],-1))])):x.value?(m(),v("div",c0,[N[27]||(N[27]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot green"}),Oe(" Expected")],-1)),w.value.some(P=>!P.correct)?(m(),v("span",u0,[...N[26]||(N[26]=[l("span",{class:"legend-dot red"},null,-1),Oe(" Student response",-1)])])):F("",!0)])):F("",!0)]),l("div",d0,[N[35]||(N[35]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),Oe(" Result & Meta")],-1)),l("div",f0,[x.value?(m(),v(Z,{key:0},[l("div",p0,[N[29]||(N[29]=l("span",{class:"info-label"},"Prompts",-1)),l("span",m0,b(V.value.total),1)]),l("div",v0,[N[30]||(N[30]=l("span",{class:"info-label"},"Total Time",-1)),l("span",h0,b(V.value.totalTime>0?fe(V.value.totalTime):"n/a"),1)]),l("div",g0,[N[31]||(N[31]=l("span",{class:"info-label"},"Result",-1)),l("span",{class:"info-value",style:st({color:V.value.wrong===0?"var(--green)":"var(--red)"})},b(V.value.wrong===0?"All correct":`${V.value.wrong} error${V.value.wrong>1?"s":""}`)+b(V.value.corrected>0?`, ${V.value.corrected} fixed`:""),5)])],64)):(m(),v(Z,{key:1},[l("div",y0,[N[32]||(N[32]=l("span",{class:"info-label"},"Attempt #",-1)),l("span",b0,b(g.value.attempt_number),1)]),l("div",_0,[N[33]||(N[33]=l("span",{class:"info-label"},"Time Taken",-1)),l("span",w0,b(g.value.time_taken_ms===0?"n/a":g.value.time_taken_ms+" ms"),1)])],64)),l("div",S0,[N[34]||(N[34]=l("span",{class:"info-label"},"Skill Path",-1)),l("span",C0,b(e.obs.skill_path),1)])])])])])],36))}},k0=_e($0,[["__scopeId","data-v-930ba1ed"]]),x0=30,A0={__name:"ObservationPopupManager",setup(e,{expose:t}){const s=I([]);let n=0,o=3e3;function a(c,f){const d=s.value.length*x0,p=f?Math.min(f.clientX+20+d,window.innerWidth-700):60+d,h=f?Math.min(f.clientY-40+d,window.innerHeight-400):60+d;o++,s.value.push({id:n++,obs:c,x:Math.max(10,p),y:Math.max(10,h),zIndex:o})}function r(c){s.value=s.value.filter(f=>f.id!==c)}function i(c){o++;const f=s.value.find(d=>d.id===c);f&&(f.zIndex=o)}function u(){s.value=[]}return t({openObservation:a,closeAll:u}),(c,f)=>(m(),Ue(Vd,{to:"body"},[(m(!0),v(Z,null,ae(s.value,d=>(m(),Ue(k0,{key:d.id,obs:d.obs,"initial-x":d.x,"initial-y":d.y,"z-index":d.zIndex,onClose:p=>r(d.id),onFocus:p=>i(d.id)},null,8,["obs","initial-x","initial-y","z-index","onClose","onFocus"]))),128))]))}},T0={class:"student-progress-panel"},N0={key:0,class:"sp-empty"},E0={class:"sp-header"},O0={class:"sp-header-row"},I0={key:0,class:"sp-name-badge"},R0={class:"sp-meta"},D0={key:0,class:"sp-activity-chart"},P0={class:"sp-activity-header"},L0={class:"sp-activity-meta"},B0={class:"sp-activity-body"},M0={class:"sp-activity-svg-wrap"},U0=["viewBox"],F0=["x"],j0=["x","y"],H0=["x1","x2","y2"],W0=["x","y","width","height","fill"],V0=["x","y"],K0=["x","y"],G0={class:"sp-activity-legend"},z0={class:"sp-legend"},J0={class:"sp-grid"},Y0=["onClick"],q0={class:"sp-card-header"},X0={class:"sp-card-info"},Q0={class:"sp-card-name"},Z0={class:"sp-card-meta"},ew={class:"sp-card-rate"},tw={class:"sp-card-sparkline"},sw={class:"sp-mastery"},nw={class:"sp-mastery-track"},ow=["title"],aw={class:"sp-mastery-legend"},rw={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""},studentId:{type:String,default:""}},setup(e){const t=e,s=I(null),n=I(null),o=_n(),a=T(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:$,lessonNames:S}=k_(t.observations);return $_(t.observations,$,S)}),r=T(()=>a.value.reduce(($,S)=>$+S.tried,0)),i=T(()=>a.value.reduce(($,S)=>$+S.totalAttempts,0)),u=[{color:"#10b981",label:"Success (clean)"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hr)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function c($){return`hsl(${Math.round($*360/a.value.length)}, 65%, 55%)`}function f($){return $>=75?"#10b981":$>=50?"#f59e0b":"#f43f5e"}function d($){return $?$.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function p($){if(!$.firstActivity||!$.lastActivity)return null;const S=$.lastActivity-$.firstActivity,_=S/6e4,w=S/36e5,x=S/864e5;return _<90?`${Math.round(_)} min`:w<48?`${Math.round(w)} hr`:x<14?`${Math.round(x)} days`:`${Math.round(x/7)} wks`}async function h({rawTs:$,dealNum:S,correct:_,event:w}){if(n.value)if(t.studentId){const x=await o.findAndDecryptObservation(t.studentId,$,S,_);x&&n.value.openObservation(x,w)}else{const x=t.observations.find(B=>{const V=new Date(B.timestamp).getTime();return Math.abs(V-$)<1e3&&B.deal_number===S&&B.correct===_});x&&n.value.openObservation(x,w)}}function g($){const S=Math.max(0,($.totalBoards||0)-$.tried),_=[{count:$.mastered,color:tn.mastered,label:"Mastered"},{count:$.progressing,color:tn.progressing,label:"Progressing"},{count:$.struggling,color:tn.struggling,label:"Struggling"},{count:S,color:tn.untried,label:"Untried"}].filter(x=>x.count>0),w=_.reduce((x,B)=>x+B.count,0);return _.forEach(x=>{x.pct=`${(x.count/w*100).toFixed(1)}%`}),_}const y=T(()=>{if(a.value.length===0)return null;const $=864e5,S=28,_=700,w=120,x=new Set,B=a.value.map($e=>{const me={};return $e.boardLines.forEach(fe=>{fe.points.forEach(J=>{const W=Math.floor((J.rawTs??0)/$);W>0&&(me[W]=(me[W]||0)+1,x.add(W))})}),me});if(x.size===0)return null;const V=[...x].sort(),j=V[0],Q=V[V.length-1],q=Q-j+1,de=V.map($e=>B.reduce((me,fe)=>me+(fe[$e]||0),0)),pe=Math.max(...de),ce=Math.max(1,_/q*.75);return{days:V.map($e=>{const me=S+($e-j)/q*_;let fe=w;const J=[];return a.value.forEach((W,N)=>{const P=B[N][$e]||0;if(!P)return;const R=P/pe*w;fe-=R,J.push({y:fe,h:R,count:P,color:c(N),name:W.name})}),{dayKey:$e,x:me,segments:J,dateLabel:new Date($e*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:pe,barW:ce,barH:w,chartW:_,svgW:S+_,yAxisW:S,firstLabel:new Date(j*$).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(Q*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return($,S)=>(m(),v("div",T0,[a.value.length===0?(m(),v("div",N0,[...S[1]||(S[1]=[l("p",null,"No practice data to display yet.",-1)])])):(m(),v(Z,{key:1},[l("div",E0,[l("div",O0,[e.studentName?(m(),v("span",I0,b(e.studentName),1)):F("",!0),l("span",R0,b(a.value.length)+" lesson"+b(a.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),y.value?(m(),v("div",D0,[l("div",P0,[S[2]||(S[2]=Oe(" Daily practice activity ",-1)),l("span",L0,b(r.value)+" boards  "+b(i.value)+" observations ",1)]),l("div",B0,[l("div",M0,[(m(),v("svg",{width:"100%",viewBox:`0 0 ${y.value.svgW} ${y.value.barH+26}`,style:st({display:"block",height:y.value.barH+26+"px"})},[l("text",{x:y.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.maxCount),9,F0),l("text",{x:y.value.yAxisW-3,y:y.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,j0),l("line",{x1:y.value.yAxisW,y1:"0",x2:y.value.yAxisW,y2:y.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,H0),(m(!0),v(Z,null,ae(y.value.days,_=>(m(),v("g",{key:_.dayKey},[(m(!0),v(Z,null,ae(_.segments,(w,x)=>(m(),v("rect",{key:x,x:_.x,y:w.y,width:y.value.barW,height:w.h,fill:w.color,opacity:"0.85",rx:"1"},[l("title",null,b(w.name)+": "+b(w.count)+" on "+b(_.dateLabel),1)],8,W0))),128))]))),128)),l("text",{x:y.value.yAxisW,y:y.value.barH+18,"font-size":"10",fill:"#6b7280"},b(y.value.firstLabel),9,V0),l("text",{x:y.value.yAxisW+y.value.chartW,y:y.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.lastLabel),9,K0)],12,U0))]),l("div",G0,[(m(!0),v(Z,null,ae(a.value,(_,w)=>(m(),v("span",{key:_.path,class:"sp-activity-legend-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:c(w)})},null,4),Oe(" "+b(_.name),1)]))),128))])])])):F("",!0),l("div",z0,[(m(),v(Z,null,ae(u,_=>l("span",{key:_.label,class:"sp-legend-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:_.color})},null,4),Oe(" "+b(_.label),1)])),64)),S[3]||(S[3]=l("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),l("div",J0,[(m(!0),v(Z,null,ae(a.value,_=>(m(),v("div",{key:_.path,class:"sp-lesson-card",onClick:w=>s.value=_},[l("div",q0,[l("div",X0,[l("div",Q0,b(_.name),1),l("div",Z0,b(_.tried)+" boards  "+b(_.totalAttempts)+" attempts  last "+b(d(_.lastActivity))+b(p(_)?`  span ${p(_)}`:""),1)]),l("div",ew,[l("div",{class:"sp-rate-value",style:st({color:f(_.recentRate)})},b(_.recentRate)+"% ",5),S[4]||(S[4]=l("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),l("div",tw,[he(D_,{boardLines:_.boardLines,width:280,height:70},null,8,["boardLines"])]),l("div",sw,[l("div",nw,[(m(!0),v(Z,null,ae(g(_),w=>(m(),v("div",{key:w.label,class:"sp-mastery-segment",style:st({width:w.pct,backgroundColor:w.color}),title:`${w.label}: ${w.count}`},null,12,ow))),128))]),l("div",aw,[(m(!0),v(Z,null,ae(g(_),w=>(m(),v("span",{key:w.label,class:"sp-mastery-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:w.color})},null,4),Oe(" "+b(w.count)+" "+b(w.label),1)]))),128))])]),S[5]||(S[5]=l("div",{class:"sp-card-hint"},"details ",-1))],8,Y0))),128))])],64)),s.value?(m(),Ue(e1,{key:2,lesson:s.value,rawData:e.observations,onClose:S[0]||(S[0]=_=>s.value=null),onDotClick:h},null,8,["lesson","rawData"])):F("",!0),he(A0,{ref_key:"popupManager",ref:n},null,512)]))}},Lu=_e(rw,[["__scopeId","data-v-c464baa7"]]),lw={class:"progress-dashboard"},iw={class:"dashboard-header"},cw={key:0,class:"loading"},uw={key:1,class:"error-state"},dw={key:2,class:"empty-state"},fw={key:3,class:"dashboard-content"},pw={class:"dashboard-actions"},mw={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Xr(),s=Je(),n=T(()=>t.decryptedObservations.value),o=T(()=>n.value.length>0),a=T(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});Ct(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(i,u)=>(m(),v("div",lw,[l("header",iw,[u[3]||(u[3]=l("h2",null,"Student Progress",-1)),l("button",{class:"close-btn",onClick:u[0]||(u[0]=c=>i.$emit("close"))},"")]),M(t).isLoading.value?(m(),v("div",cw,[...u[4]||(u[4]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading your progress...",-1)])])):M(t).hasError.value?(m(),v("div",uw,[l("p",null,"Failed to load progress: "+b(M(t).error.value),1),l("button",{onClick:r},"Try Again")])):o.value?(m(),v("div",fw,[he(Lu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),l("div",pw,[l("button",{class:"secondary-btn",onClick:r},"Refresh Data"),l("button",{class:"primary-btn",onClick:u[2]||(u[2]=c=>i.$emit("close"))},"Continue Practicing")])])):(m(),v("div",dw,[u[5]||(u[5]=l("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=l("p",null,"Complete some practice deals to see your progress here!",-1)),l("button",{class:"primary-btn",onClick:u[1]||(u[1]=c=>i.$emit("close"))},"Start Practicing")]))]))}},vw=_e(mw,[["__scopeId","data-v-286a38c8"]]),hw="test-user-mastery",gw="test-classroom",yw="Negative_Double",bw="competitive_bidding/negative_double";let hr=0;function tt({boardNumber:e,correct:t,timestamp:s}){return hr++,{id:`mastery-test-${hr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:hw,skill_path:bw,correct:t,deal_subfolder:yw,deal_number:e,classroom:gw}}function yt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function To(e){return new Date(Date.now()-e*60*1e3).toISOString()}function _w(){hr=0;const e=[];e.push(tt({boardNumber:2,correct:!0,timestamp:yt(5)}),tt({boardNumber:2,correct:!1,timestamp:yt(1)})),e.push(tt({boardNumber:3,correct:!1,timestamp:To(30)}),tt({boardNumber:3,correct:!0,timestamp:To(20)})),e.push(tt({boardNumber:4,correct:!1,timestamp:To(90)}),tt({boardNumber:4,correct:!0,timestamp:To(60)})),e.push(tt({boardNumber:5,correct:!1,timestamp:yt(10)}),tt({boardNumber:5,correct:!0,timestamp:yt(2)})),e.push(tt({boardNumber:6,correct:!0,timestamp:yt(14)}),tt({boardNumber:6,correct:!0,timestamp:yt(7)})),e.push(tt({boardNumber:7,correct:!0,timestamp:yt(21)}),tt({boardNumber:7,correct:!0,timestamp:yt(14)}),tt({boardNumber:7,correct:!0,timestamp:yt(7)})),e.push(tt({boardNumber:8,correct:!0,timestamp:yt(28)}),tt({boardNumber:8,correct:!0,timestamp:yt(21)}),tt({boardNumber:8,correct:!0,timestamp:yt(14)}),tt({boardNumber:8,correct:!1,timestamp:yt(1)}));const t=[1,2,3,4,5].map(s=>({...tt({boardNumber:s,correct:!0,timestamp:yt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const ww=["onClick","title"],Sw={key:0,class:"medal gold-medal"},Cw={key:1,class:"medal silver-medal"},$w={class:"board-num"},kw={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceBoardStatus:{type:Object,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=hs(),a=T(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceBoardStatus){const u=i.find(c=>c.boardNumber===s.forceBoardStatus.board);u&&(u.status=s.forceBoardStatus.status)}return i});function r(i){const u={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},c={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${u[i.status]}${c[i.achievement]}`}return(i,u)=>e.boardNumbers.length>0?(m(),v("div",{key:0,class:ie(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(m(),v("button",{key:0,class:"intro-btn",onClick:u[0]||(u[0]=c=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):F("",!0),(m(!0),v(Z,null,ae(a.value,(c,f)=>(m(),v("div",{key:c.boardNumber,class:ie(["board-indicator",[`status-${c.status}`,{active:f===e.currentIndex},{"has-medal":c.achievement!=="none"},{"medal-gold":c.achievement==="gold"},{"medal-silver":c.achievement==="silver"}]]),onClick:d=>n("goto",f),title:r(c)},[c.achievement==="gold"?(m(),v("span",Sw,"")):c.achievement==="silver"?(m(),v("span",Cw,"")):F("",!0),l("span",$w,b(c.boardNumber),1)],10,ww))),128))],2)):F("",!0)}},Bu=_e(kw,[["__scopeId","data-v-b1a810ad"]]),xw={class:"accomplishments-view"},Aw={class:"view-header"},Tw={key:0,class:"user-selector"},Nw=["value"],Ew=["value"],Ow={key:1,class:"loading-state"},Iw={key:2,class:"error-state"},Rw={key:3,class:"empty-state"},Dw={key:4,class:"view-content"},Pw={class:"controls-row"},Lw={class:"tabs"},Bw={key:0,class:"tab-content"},Mw={key:0,class:"no-data"},Uw={key:1,class:"lesson-list"},Fw={class:"lesson-header"},jw={class:"lesson-name"},Hw={key:1,class:"tab-content"},Ww={key:0,class:"no-data"},Vw={key:1,class:"taxon-list"},Kw={class:"taxon-header"},Gw={class:"taxon-category"},zw={class:"taxon-name"},Jw={class:"taxon-counts"},Yw={class:"taxon-stat correct"},qw={class:"taxon-stat incorrect"},Xw={class:"taxon-stat total"},Qw={class:"view-actions"},Zw={key:5,class:"test-mode-banner"},eS={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=ys(),o=hs(),r=new URLSearchParams(window.location.search).get("test");Ct(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode(_w()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function u(p){await n.selectUser(p)}function c(p,h){s("navigate-to-deal",{subfolder:p,dealNumber:h})}const f=T(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),$=o.computeLessonAchievement(y);return{...g,achievement:$.achievement}}).sort((g,y)=>d(g.subfolder).localeCompare(d(y.subfolder)))});_t(f,p=>{o.fetchMissingBoardCounts(p.map(h=>h.subfolder))},{immediate:!0});function d(p){return n.formatLessonName(p)}return(p,h)=>(m(),v("div",xw,[l("header",Aw,[h[6]||(h[6]=l("h2",null,"Accomplishments",-1)),l("button",{class:"close-btn",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"")]),M(n).canViewOtherUsers.value?(m(),v("div",Tw,[h[7]||(h[7]=l("label",{for:"user-select"},"Viewing:",-1)),l("select",{id:"user-select",value:M(n).selectedUserId.value,onChange:h[1]||(h[1]=g=>u(g.target.value))},[(m(!0),v(Z,null,ae(M(n).accessibleUsers.value,g=>(m(),v("option",{key:g.id,value:g.id},b(g.name)+b(g.isSelf?" (You)":""),9,Ew))),128))],40,Nw)])):F("",!0),M(n).loading.value?(m(),v("div",Ow,[...h[8]||(h[8]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading accomplishments...",-1)])])):M(n).error.value?(m(),v("div",Iw,[l("p",null,"Failed to load: "+b(M(n).error.value),1),l("button",{onClick:i},"Try Again")])):M(n).hasData.value?(m(),v("div",Dw,[l("div",Pw,[l("div",Lw,[l("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="lessons"}]),onClick:h[3]||(h[3]=g=>M(n).activeTab.value="lessons")}," Lessons ",2),l("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="taxons"}]),onClick:h[4]||(h[4]=g=>M(n).activeTab.value="taxons")}," Taxons ",2)])]),M(n).activeTab.value==="lessons"?(m(),v("div",Bw,[f.value.length===0?(m(),v("div",Mw," No lesson data available yet. ")):(m(),v("div",Uw,[(m(!0),v(Z,null,ae(f.value,g=>(m(),v("div",{key:g.subfolder,class:"lesson-row"},[l("div",Fw,[l("span",jw,b(d(g.subfolder)),1),g.achievement!=="none"?(m(),v("span",{key:0,class:ie(["achievement-badge",g.achievement])},"  "+b(g.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),he(Bu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>c(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):F("",!0),M(n).activeTab.value==="taxons"?(m(),v("div",Hw,[M(n).filteredTaxonStats.value.length===0?(m(),v("div",Ww," No skill data available yet. ")):(m(),v("div",Vw,[(m(!0),v(Z,null,ae(M(n).filteredTaxonStats.value,g=>(m(),v("div",{key:g.skillPath,class:"taxon-card"},[l("div",Kw,[l("span",Gw,b(g.categoryName),1),l("span",zw,b(g.skillName),1)]),l("div",Jw,[l("span",Yw,b(g.correct),1),l("span",qw,b(g.incorrect),1),l("span",Xw,b(g.total)+" total",1)])]))),128))]))])):F("",!0),l("div",Qw,[l("button",{class:"secondary-btn",onClick:i}," Refresh "),l("button",{class:"primary-btn",onClick:h[5]||(h[5]=g=>p.$emit("close"))}," Done ")])])):(m(),v("div",Rw,[h[9]||(h[9]=l("h3",null,"No Practice Data Yet",-1)),h[10]||(h[10]=l("p",null,"Complete some practice deals to see your accomplishments here!",-1)),l("button",{class:"primary-btn",onClick:h[2]||(h[2]=g=>p.$emit("close"))},"Start Practicing")])),M(n).useTestData.value?(m(),v("div",Zw," Test Mode - Using Generated Data ")):F("",!0)]))}},tS=_e(eS,[["__scopeId","data-v-38e59c14"]]),Mu="bridge-classroom-anon-mode",sS="BridgeClassroom-Anon",Ma=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],$i=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function nS(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function oS(e,t){const s=`${sS}:${e} ${t}`,n=nS(s),o=Number(n%BigInt(Ma.length)),a=Number(n/BigInt(Ma.length)%BigInt($i.length));return{firstName:Ma[o],lastName:$i[a]}}const On=I(localStorage.getItem(Mu)==="true");function aS(){function e(){On.value=!On.value,localStorage.setItem(Mu,On.value.toString())}function t(o){return On.value?oS(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),i=(a==null?void 0:a.charAt(0))||"",u=(r==null?void 0:r.charAt(0))||"";return(i+u).toUpperCase()||"?"}return{isAnonymized:On,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const rS={class:"teacher-student-list"},lS={class:"teacher-header"},iS={class:"header-actions"},cS=["value"],uS={key:0,class:"loading-state"},dS={key:1,class:"error-state"},fS={key:2,class:"empty-state"},pS={key:3,class:"empty-state"},mS={key:4,class:"student-table-wrap"},vS={class:"student-table"},hS=["onClick"],gS={class:"col-name"},yS={class:"student-name-cell"},bS={class:"avatar"},_S={class:"col-mastery"},wS={class:"mastery-pills"},SS={key:0,class:"pill pill-green"},CS={key:1,class:"pill pill-orange"},$S={key:2,class:"pill pill-yellow"},kS={key:3,class:"pill pill-red"},xS={key:4,class:"no-data-label"},AS={class:"col-active"},TS={class:"col-lessons"},NS={class:"recent-lessons"},ES={key:0,class:"no-data-label"},OS={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=_n(),n=bo(),o=Je(),a=aS(),r=I("all"),i=I({});Ct(async()=>{await s.loadAllStudentSummaries(),await u()});async function u(){const S=o.currentUser.value;if(!S)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(S.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async w=>{const x=await n.fetchClassroomDetail(w.id);x!=null&&x.success&&(_[w.id]=new Set(x.classroom.members.map(B=>B.student_id)))})),i.value=_}async function c(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await u()}const f=T(()=>{const S=new Set;for(const _ of Object.values(i.value))for(const w of _)S.add(w);return S}),d=T(()=>{const S=s.students.value;if(r.value==="all")return S;if(r.value==="none")return S.filter(w=>!f.value.has(w.id));const _=i.value[r.value];return _?S.filter(w=>_.has(w.id)):S}),p=T(()=>[...d.value].sort((S,_)=>{var B,V;const w=((B=h.value[S.id])==null?void 0:B.lastObservationTime)||"",x=((V=h.value[_.id])==null?void 0:V.lastObservationTime)||"";return x!==w?x.localeCompare(w):y(S).localeCompare(y(_))})),h=T(()=>{const S={};for(const _ of s.students.value)S[_.id]=s.getStudentMasterySummary(_.id);return S}),g=T(()=>{const S={};for(const _ of s.students.value)S[_.id]=s.getStudentRecentLessons(_.id);return S});function y(S){return a.displayFullName(S)}function $(S){return a.displayInitials(S)}return(S,_)=>(m(),v("div",rS,[l("header",lS,[_[5]||(_[5]=l("h2",null,"My Students",-1)),l("div",iS,[M(n).teacherClassrooms.value.length?Fe((m(),v("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=w=>r.value=w),class:"filter-select"},[_[3]||(_[3]=l("option",{value:"all"},"All Students",-1)),(m(!0),v(Z,null,ae(M(n).teacherClassrooms.value,w=>(m(),v("option",{key:w.id,value:w.id},b(w.name),9,cS))),128)),_[4]||(_[4]=l("option",{value:"none"},"No Classroom",-1))],512)),[[Wn,r.value]]):F("",!0),l("button",{class:ie(["anon-btn",{active:M(a).isAnonymized.value}]),onClick:_[1]||(_[1]=w=>M(a).toggleAnonymize())},b(M(a).isAnonymized.value?"Clear":"Anon"),3),l("button",{class:"secondary-btn",onClick:c},"Refresh"),l("button",{class:"secondary-btn",onClick:_[2]||(_[2]=w=>S.$emit("close"))},"Back")])]),M(s).loading.value?(m(),v("div",uS,[..._[6]||(_[6]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading student data...",-1)])])):M(s).error.value?(m(),v("div",dS,[l("p",null,"Failed to load: "+b(M(s).error.value),1),l("button",{onClick:c},"Try Again")])):M(s).students.value.length===0?(m(),v("div",fS,[..._[7]||(_[7]=[l("h3",null,"No Students Yet",-1),l("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(m(),v("div",pS,[..._[8]||(_[8]=[l("h3",null,"No Matching Students",-1),l("p",null,"No students match the selected filter.",-1)])])):(m(),v("div",mS,[l("table",vS,[_[9]||(_[9]=l("thead",null,[l("tr",null,[l("th",{class:"col-name"},"Student"),l("th",{class:"col-mastery"},"Mastery"),l("th",{class:"col-active"},"Last Active"),l("th",{class:"col-lessons"},"Recent Lessons")])],-1)),l("tbody",null,[(m(!0),v(Z,null,ae(p.value,w=>{var x,B,V,j,Q,q,de;return m(),v("tr",{key:w.id,class:"student-row",onClick:pe=>S.$emit("select-student",w.id,y(w))},[l("td",gS,[l("div",yS,[l("div",bS,b($(w)),1),l("span",null,b(y(w)),1)])]),l("td",_S,[l("div",wS,[(x=h.value[w.id])!=null&&x.green?(m(),v("span",SS,b(h.value[w.id].green),1)):F("",!0),(B=h.value[w.id])!=null&&B.orange?(m(),v("span",CS,b(h.value[w.id].orange),1)):F("",!0),(V=h.value[w.id])!=null&&V.yellow?(m(),v("span",$S,b(h.value[w.id].yellow),1)):F("",!0),(j=h.value[w.id])!=null&&j.red?(m(),v("span",kS,b(h.value[w.id].red),1)):F("",!0),(Q=h.value[w.id])!=null&&Q.total?F("",!0):(m(),v("span",xS,"No data"))])]),l("td",AS,b(M(s).formatTimeSince((q=h.value[w.id])==null?void 0:q.lastObservationTime)),1),l("td",TS,[l("div",NS,[(m(!0),v(Z,null,ae(g.value[w.id],(pe,ce)=>(m(),v("span",{key:ce,class:"lesson-tag"},b(pe),1))),128)),(de=g.value[w.id])!=null&&de.length?F("",!0):(m(),v("span",ES,"-"))])])],8,hS)}),128))])])]))]))}},IS=_e(OS,[["__scopeId","data-v-dd6d8e66"]]),RS={class:"teacher-student-detail"},DS={class:"detail-header"},PS={class:"student-info"},LS={class:"avatar"},BS={class:"last-active"},MS={key:0,class:"loading-state"},US={key:1,class:"detail-content"},FS={class:"tab-bar"},jS=["onClick"],HS={key:0,class:"tab-content"},WS={key:1,class:"tab-content"},VS={key:0,class:"stats-row"},KS={class:"stat stat-green"},GS={key:0,class:"stat stat-orange"},zS={key:1,class:"stat stat-yellow"},JS={key:2,class:"stat stat-red"},YS={key:3,class:"stat stat-grey"},qS={key:1,class:"no-data"},XS={key:2,class:"lesson-list"},QS={class:"lesson-header"},ZS=["onClick"],eC={class:"mastery-strip"},tC=["title","onClick"],sC={key:0,class:"medal gold-medal"},nC={key:1,class:"medal silver-medal"},oC={class:"board-num"},aC={class:"observation-total"},rC={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=_n(),a=hs(),r=ys(),i=I(!1),u=I("progress"),c=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],f=T(()=>s.studentName.split(" ").map(_=>_[0]||"").join("").toUpperCase());Ct(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const d=T(()=>o.studentObservations.value[s.studentId]||[]),p=T(()=>o.getStudentMasterySummary(s.studentId)),h=T(()=>o.formatTimeSince(p.value.lastObservationTime)),g=T(()=>{const S=d.value;return S.length===0?[]:a.extractLessonsFromObservations(S).map(w=>{const x=a.computeBoardMastery(S,w.subfolder,w.boardNumbers),B=a.computeLessonAchievement(x);return{...w,boardMastery:x,achievement:B.achievement}}).sort((w,x)=>y(w.subfolder).localeCompare(y(x.subfolder)))});_t(g,S=>{a.fetchMissingBoardCounts(S.map(_=>_.subfolder))},{immediate:!0});function y(S){return r.formatLessonName(S)}function $(S){const _={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${S.boardNumber}: ${_[S.status]}`}return(S,_)=>(m(),v("div",RS,[l("header",DS,[l("button",{class:"back-btn",onClick:_[0]||(_[0]=w=>S.$emit("back"))}," Students"),l("div",PS,[l("div",LS,b(f.value),1),l("div",null,[l("h2",null,b(e.studentName),1),l("span",BS,"Last active: "+b(h.value),1)])])]),i.value?(m(),v("div",MS,[..._[1]||(_[1]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading student data...",-1)])])):(m(),v("div",US,[l("div",FS,[(m(),v(Z,null,ae(c,w=>l("button",{key:w.id,class:ie(["tab-btn",{active:u.value===w.id}]),onClick:x=>u.value=w.id},b(w.label),11,jS)),64))]),u.value==="progress"?(m(),v("div",HS,[he(Lu,{observations:d.value,studentName:s.studentName,studentId:s.studentId},null,8,["observations","studentName","studentId"])])):u.value==="mastery"?(m(),v("div",WS,[p.value.total>0?(m(),v("div",VS,[l("div",KS,b(p.value.green)+" Green",1),p.value.orange?(m(),v("div",GS,b(p.value.orange)+" Orange",1)):F("",!0),p.value.yellow?(m(),v("div",zS,b(p.value.yellow)+" Yellow",1)):F("",!0),p.value.red?(m(),v("div",JS,b(p.value.red)+" Red",1)):F("",!0),p.value.grey?(m(),v("div",YS,b(p.value.grey)+" Grey",1)):F("",!0)])):F("",!0),g.value.length===0?(m(),v("div",qS," No lesson data available yet. ")):(m(),v("div",XS,[(m(!0),v(Z,null,ae(g.value,w=>(m(),v("div",{key:w.subfolder,class:"lesson-row"},[l("div",QS,[l("button",{class:"lesson-name lesson-link",onClick:x=>n("navigate-to-lesson",w.subfolder)},b(y(w.subfolder)),9,ZS),w.achievement!=="none"?(m(),v("span",{key:0,class:ie(["achievement-badge",w.achievement])},"  "+b(w.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),l("div",eC,[(m(!0),v(Z,null,ae(w.boardMastery,x=>(m(),v("div",{key:x.boardNumber,class:ie(["board-circle board-clickable","status-"+x.status]),title:$(x),onClick:B=>n("navigate-to-lesson",w.subfolder,x.boardNumber)},[x.achievement==="gold"?(m(),v("span",sC,"")):x.achievement==="silver"?(m(),v("span",nC,"")):F("",!0),l("span",oC,b(x.boardNumber),1)],10,tC))),128))])]))),128))]))])):F("",!0),l("div",aC,b(d.value.length)+" observations",1)]))]))}},lC=_e(rC,[["__scopeId","data-v-93b93ebc"]]),iC={key:0,class:"lesson-browser-loading"},cC={key:1,class:"lesson-browser-error"},uC={class:"lesson-browser"},dC={class:"browser-header"},fC={class:"browser-content"},pC=["onClick"],mC={class:"expand-icon"},vC={class:"category-name"},hC={class:"category-count"},gC={key:0,class:"lesson-list"},yC=["onClick"],bC={class:"lesson-name"},_C={class:"lesson-description"},wC={key:0,class:"error-message"},SC={key:3,class:"lesson-browser-inline"},CC={class:"browser-content-inline"},$C=["onClick"],kC={class:"expand-icon"},xC={class:"category-name"},AC={class:"category-count"},TC={key:0,class:"lesson-list"},NC=["onClick"],EC={class:"lesson-name"},OC={class:"lesson-description"},IC={key:0,class:"error-message-inline"},RC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=I(null),a=I(null),r=I(!1),i=I([]),u=I(null),c=I(null);_t(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{r.value=!1}}function d(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function h(g,y){var $;c.value=null,u.value=g.id;try{const S=(($=s.collection)==null?void 0:$.baseUrl)||"",_=p(g.id),w=`${S}/${_}.pbn`,x=await fetch(w);if(!x.ok)throw new Error(`Failed to load lesson: ${x.statusText}`);const B=await x.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:B}),s.inline||n("close")}catch(S){console.error("Error loading lesson:",S),c.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{u.value=null}}return(g,y)=>e.visible&&r.value?(m(),v("div",iC,[...y[2]||(y[2]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(m(),v("div",cC,[l("p",null,b(a.value),1),l("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(m(),v("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=St($=>g.$emit("close"),["self"]))},[l("div",uC,[l("div",dC,[l("h2",null,b(o.value.name),1),l("button",{class:"close-btn",onClick:y[0]||(y[0]=$=>g.$emit("close"))},"")]),l("div",fC,[(m(!0),v(Z,null,ae(o.value.categories,$=>(m(),v("div",{key:$.id,class:"category-section"},[l("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:S=>d($.id)},[l("span",mC,b(i.value.includes($.id)?"":""),1),l("span",vC,b($.name),1),l("span",hC,b($.lessons.length)+" lessons",1)],10,pC),i.value.includes($.id)?(m(),v("div",gC,[(m(!0),v(Z,null,ae($.lessons,S=>(m(),v("button",{key:S.id,class:ie(["lesson-item",{loading:u.value===S.id}]),onClick:_=>h(S,$)},[l("span",bC,b(S.name),1),l("span",_C,b(S.description),1)],10,yC))),128))])):F("",!0)]))),128))]),c.value?(m(),v("div",wC,b(c.value),1)):F("",!0)])])):e.visible&&e.inline&&o.value?(m(),v("div",SC,[l("div",CC,[(m(!0),v(Z,null,ae(o.value.categories,$=>(m(),v("div",{key:$.id,class:"category-section"},[l("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:S=>d($.id)},[l("span",kC,b(i.value.includes($.id)?"":""),1),l("span",xC,b($.name),1),l("span",AC,b($.lessons.length)+" lessons",1)],10,$C),i.value.includes($.id)?(m(),v("div",TC,[(m(!0),v(Z,null,ae($.lessons,S=>(m(),v("button",{key:S.id,class:ie(["lesson-item",{loading:u.value===S.id}]),onClick:_=>h(S,$)},[l("span",EC,b(S.name),1),l("span",OC,b(S.description),1)],10,NC))),128))])):F("",!0)]))),128))]),c.value?(m(),v("div",IC,b(c.value),1)):F("",!0)])):F("",!0)}},DC=_e(RC,[["__scopeId","data-v-384a9c63"]]),PC={class:"viewer-controls"},LC={class:"viewer-body"},BC={key:0,class:"interaction-overlay"},MC={key:1,class:"viewer-loading"},UC={key:2,class:"viewer-error"},FC=["src"],jC={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Gt({x:80,y:80}),n=Gt({w:550,h:700}),o=I(!1),a=Gt({x:0,y:0}),r=I(null),i=I(!1),u=I(null),c=T(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){i.value=!0,u.value=null;try{const w=await fetch(_);if(!w.ok)throw new Error("Failed to load PDF");const x=await w.blob(),B=new Blob([x],{type:"application/pdf"});r.value=URL.createObjectURL(B)}catch(w){u.value="Could not load PDF",console.error("Failed to fetch intro PDF:",w)}finally{i.value=!1}}}function d(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}_t(()=>[t.visible,t.url],([_,w])=>{_&&w?f(w):_||d()},{immediate:!0}),Dr(d);function h(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",S))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",$),document.addEventListener("pointerup",S)}function $(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function S(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",S)}return(_,w)=>e.visible?(m(),v("div",{key:0,class:"intro-pdf-viewer",style:st({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[l("div",{class:"viewer-titlebar",onPointerdown:h},[w[1]||(w[1]=l("span",{class:"viewer-title"},"Lesson Introduction",-1)),l("div",PC,[l("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),l("button",{class:"viewer-btn close",onClick:w[0]||(w[0]=x=>_.$emit("close")),title:"Close"},"")])],32),l("div",LC,[o.value?(m(),v("div",BC)):F("",!0),i.value?(m(),v("div",MC,"Loading PDF...")):u.value?(m(),v("div",UC,b(u.value),1)):c.value?(m(),v("iframe",{key:3,src:c.value,class:"viewer-iframe"},null,8,FC)):F("",!0)]),l("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):F("",!0)}},HC=_e(jC,[["__scopeId","data-v-a97df645"]]),WC={class:"collection-icon"},VC={class:"collection-name"},KC={class:"collection-desc"},GC={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(m(),v("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[l("span",WC,b(e.collection.icon),1),l("span",VC,b(e.collection.name),1),l("span",KC,b(e.collection.description),1)]))}},zC=_e(GC,[["__scopeId","data-v-747be5b1"]]),JC={class:"collection-grid"},YC={class:"collection-cards"},qC={key:0,class:"load-file-section"},XC={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=mo(),s=t.COLLECTIONS;return(n,o)=>(m(),v("div",JC,[o[2]||(o[2]=l("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=l("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),l("div",YC,[(m(!0),v(Z,null,ae(M(s),a=>(m(),Ue(zC,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),M(t).showLoadPbnOption.value?(m(),v("div",qC,[o[1]||(o[1]=l("p",null,"Or load your own PBN file:",-1)),l("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):F("",!0)]))}},ol=_e(XC,[["__scopeId","data-v-35b62d22"]]),QC={class:"casual-lobby"},ZC={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(m(),v("div",QC,[he(ol,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},e$=_e(ZC,[["__scopeId","data-v-1ce1f7d7"]]),t$={class:"assignment-panel"},s$={key:0,class:"loading-state"},n$={key:1,class:"empty-state"},o$={key:2,class:"assignment-cards"},a$=["onClick"],r$={class:"card-header"},l$={class:"exercise-name"},i$={class:"card-meta"},c$={key:0,class:"meta-item"},u$={class:"progress-section"},d$={class:"progress-bar"},f$={class:"progress-label"},p$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const i=s(r);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const i=new Date(r.due_at),c=Math.ceil((i-new Date)/(1e3*60*60*24));return c<0?"Overdue":c===0?"Due today":c===1?"Due tomorrow":`Due in ${c} days`}function a(r){if(!r.due_at)return"";const i=new Date(r.due_at),c=Math.ceil((i-new Date)/(1e3*60*60*24));return c<0?"overdue":c<=1?"urgent":c<=3?"soon":""}return(r,i)=>(m(),v("div",t$,[i[2]||(i[2]=l("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(m(),v("div",s$,[...i[0]||(i[0]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(m(),v("div",n$,[...i[1]||(i[1]=[l("p",{class:"empty-title"},"No assignments yet",-1),l("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(m(),v("div",o$,[(m(!0),v(Z,null,ae(e.assignments,u=>(m(),v("div",{key:u.id,class:ie(["assignment-card",s(u)]),onClick:c=>r.$emit("select-assignment",u)},[l("div",r$,[l("span",l$,b(u.exercise_name),1),l("span",{class:ie(["status-badge",s(u)])},b(n(u)),3)]),l("div",i$,[u.classroom_name?(m(),v("span",c$,b(u.classroom_name),1)):F("",!0),u.due_at?(m(),v("span",{key:1,class:ie(["meta-item",a(u)])},b(o(u)),3)):F("",!0)]),l("div",u$,[l("div",d$,[l("div",{class:ie(["progress-fill",s(u)]),style:st({width:t(u)+"%"})},null,6)]),l("span",f$,b(u.attempted_boards)+" / "+b(u.total_boards)+" boards ",1)])],10,a$))),128))]))]))}},m$=_e(p$,[["__scopeId","data-v-dc0b8e86"]]),v$={class:"student-lobby"},h$={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=Je(),o=Sn(),a=T(()=>o.studentAssignments.value.length>0),r=T(()=>o.loading.value);function i(u){s("select-assignment",u)}return Ct(()=>{const u=n.currentUser.value;u&&o.fetchStudentAssignments(u.id)}),(u,c)=>(m(),v("div",v$,[a.value||r.value?(m(),Ue(m$,{key:0,assignments:M(o).studentAssignments.value,loading:r.value,onSelectAssignment:i},null,8,["assignments","loading"])):F("",!0),he(ol,{onSelectCollection:c[0]||(c[0]=f=>u.$emit("select-collection",f)),onLoadFile:c[1]||(c[1]=f=>u.$emit("load-file",f))})]))}},g$=_e(h$,[["__scopeId","data-v-3310fc38"]]),Uu="https://api.bridge-classroom.com/api",Fu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Lo=I([]),al=I([]),rl=I([]),gr=I(!1),Ua=I(null),y$=2*60*1e3;async function b$(e,t=!1){if(!t&&Ua.value&&Date.now()-new Date(Ua.value).getTime()<y$)return{success:!0,cached:!0};gr.value=!0;try{const s=await fetch(`${Uu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Fu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Lo.value=n.classrooms||[],al.value=n.needs_attention||[],rl.value=n.recent_activity||[],Ua.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{gr.value=!1}}async function _$(e,t){try{const s=await fetch(`${Uu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Fu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?al.value=[]:t==="activity"&&(rl.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function w$(){const e=T(()=>({classroomCount:Lo.value.length,openAssignmentCount:Lo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Lo,needsAttention:al,recentActivity:rl,lobbyLoading:gr,summaryStats:e,loadTeacherLobbyData:b$,clearPanel:_$}}const S$={class:"roster"},C$={class:"roster-header"},$$={class:"member-count"},k$={key:0,class:"roster-empty"},x$={key:1,class:"roster-table"},A$={class:"member-name"},T$={class:"member-email"},N$={class:"member-date"},E$={class:"member-action"},O$=["onClick","disabled"],I$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=I(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const i=`${r.first_name} ${r.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,i)=>(m(),v("div",S$,[l("div",C$,[i[0]||(i[0]=l("h4",null,"Class Roster",-1)),l("span",$$,b(e.members.length)+" "+b(e.members.length===1?"student":"students"),1)]),e.members.length===0?(m(),v("div",k$,[...i[1]||(i[1]=[l("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(m(),v("table",x$,[i[2]||(i[2]=l("thead",null,[l("tr",null,[l("th",null,"Name"),l("th",null,"Email"),l("th",null,"Joined"),l("th")])],-1)),l("tbody",null,[(m(!0),v(Z,null,ae(e.members,u=>(m(),v("tr",{key:u.student_id},[l("td",A$,b(u.first_name)+" "+b(u.last_name),1),l("td",T$,b(u.email),1),l("td",N$,b(o(u.joined_at)),1),l("td",E$,[l("button",{class:"remove-btn",onClick:c=>a(u),disabled:n.value===u.student_id},b(n.value===u.student_id?"Removing...":"Remove"),9,O$)])]))),128))])]))]))}},R$=_e(I$,[["__scopeId","data-v-ee901be3"]]),D$={class:"header-left"},P$={class:"classroom-name"},L$={class:"header-meta"},B$={class:"join-badge"},M$={class:"member-count"},U$={key:0,class:"stat-badge"},F$={key:1,class:"stat-badge completion"},j$={key:0,class:"mini-bars"},H$={class:"bar-label"},W$={class:"bar-track"},V$={class:"bar-count"},K$=["aria-label"],G$={key:0,class:"card-body"},z$={key:0,class:"classroom-desc"},J$={class:"invite-section"},Y$={class:"invite-field"},q$=["value"],X$={class:"email-section"},Q$={class:"email-header"},Z$={class:"email-template"},ek={class:"email-body"},tk={key:1,class:"assignments-section"},sk={class:"assignment-list"},nk=["onClick"],ok={class:"assignment-name"},ak={key:0,class:"assignment-due"},rk={class:"assignment-boards"},lk={key:3,class:"loading-roster"},ik={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed","view-assignment"],setup(e,{emit:t}){const s=e,n=t,o=bo(),a=Sn(),r=I(null),i=I(!1),u=I(!1),c=I(!1),f=I([]),d=T(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);_t(()=>s.expanded,async S=>{if(S&&!r.value){i.value=!0;const[_,w]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(r.value=_.classroom),f.value=w||[],i.value=!1}});function p(S){return S?new Date(S).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function h(S){return S.students_total?Math.round(S.students_completed/S.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function y(){const S=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(S),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function $(S){const _=await o.removeMember(s.classroom.id,S);_!=null&&_.success&&(r.value&&(r.value.members=r.value.members.filter(w=>w.student_id!==S)),n("member-removed"))}return(S,_)=>(m(),v("div",{class:ie(["classroom-card",{expanded:e.expanded}])},[l("div",{class:"card-header",onClick:_[0]||(_[0]=w=>S.$emit("toggle"))},[l("div",D$,[l("h3",P$,b(e.classroom.name),1),l("div",L$,[l("span",B$,"JOIN: "+b(e.classroom.join_code),1),l("span",M$,b(e.classroom.member_count)+" "+b(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(m(),v("span",U$,b(e.classroom.open_assignment_count)+" "+b(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):F("",!0),e.classroom.avg_completion_pct>0?(m(),v("span",F$,b(e.classroom.avg_completion_pct)+"% avg",1)):F("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(m(),v("div",j$,[(m(!0),v(Z,null,ae(e.classroom.assignments,w=>(m(),v("div",{key:w.id,class:"mini-bar"},[l("span",H$,b(w.exercise_name),1),l("div",W$,[l("div",{class:"bar-fill",style:st({width:h(w)})},null,4)]),l("span",V$,b(w.students_completed)+"/"+b(w.students_total),1)]))),128))])):F("",!0)]),l("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[l("span",{class:ie(["chevron",{rotated:e.expanded}])},"",2)],8,K$)]),e.expanded?(m(),v("div",G$,[e.classroom.description?(m(),v("p",z$,b(e.classroom.description),1)):F("",!0),l("div",J$,[_[2]||(_[2]=l("h4",null,"Invite Link",-1)),_[3]||(_[3]=l("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),l("div",Y$,[l("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=w=>w.target.select())},null,8,q$),l("button",{class:"copy-btn",onClick:g},b(u.value?"Copied!":"Copy"),1)])]),l("div",X$,[l("div",Q$,[_[4]||(_[4]=l("h4",null,"Email Template",-1)),l("button",{class:"copy-btn copy-btn-small",onClick:y},b(c.value?"Copied!":"Copy"),1)]),l("div",Z$,[_[5]||(_[5]=l("p",null,[l("strong",null,"Subject:"),Oe(" Join our Bridge Classroom for practice exercises")],-1)),l("div",ek," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+b(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(m(),v("div",tk,[_[7]||(_[7]=l("h4",null,"Assignments",-1)),l("div",sk,[(m(!0),v(Z,null,ae(f.value,w=>(m(),v("div",{key:w.id,class:"assignment-row clickable",onClick:x=>n("view-assignment",w.id)},[l("span",ok,b(w.exercise_name),1),w.due_at?(m(),v("span",ak,"Due "+b(p(w.due_at)),1)):F("",!0),l("span",rk,b(w.total_boards)+" boards",1),_[6]||(_[6]=l("span",{class:"view-arrow"},"",-1))],8,nk))),128))])])):F("",!0),r.value?(m(),Ue(R$,{key:2,members:r.value.members,onRemoveMember:$},null,8,["members"])):i.value?(m(),v("div",lk," Loading roster... ")):F("",!0)])):F("",!0)],2))}},ck=_e(ik,[["__scopeId","data-v-3dc8e5a5"]]),uk={class:"modal-content"},dk={class:"step"},fk={class:"form-group"},pk={class:"form-group"},mk={class:"step-actions"},vk=["disabled"],hk={key:0,class:"error-text"},gk={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Je(),o=bo(),a=I(""),r=I(""),i=I(!1),u=I(null);async function c(){if(!a.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,u.value=null;const d=await o.createClassroom(f.id,a.value.trim(),r.value.trim()||null);d.success?s("classroom-created",d.classroom):u.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(m(),v("div",{class:"modal-overlay",onClick:d[3]||(d[3]=St(p=>f.$emit("close"),["self"]))},[l("div",uk,[l("div",dk,[d[7]||(d[7]=l("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=l("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),l("div",fk,[d[4]||(d[4]=l("label",{for:"classroom-name"},"Classroom Name",-1)),Fe(l("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Ko(c,["enter"])},null,544),[[wt,a.value]]),d[5]||(d[5]=l("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),l("div",pk,[d[6]||(d[6]=l("label",{for:"classroom-desc"},[Oe("Description "),l("span",{class:"optional"},"(optional)")],-1)),Fe(l("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[wt,r.value]])]),l("div",mk,[l("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=p=>f.$emit("close"))},"Cancel"),l("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:c},b(i.value?"Creating...":"Create Classroom"),9,vk)]),u.value?(m(),v("p",hk,b(u.value),1)):F("",!0)])])]))}},yk=_e(gk,[["__scopeId","data-v-c26a1ae6"]]),In="https://api.bridge-classroom.com/api",Rn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Os=I([]),Fa=I(null),jt=I(!1),He=I(null);function bk(){async function e(r={}){jt.value=!0,He.value=null;try{const i=new URLSearchParams;r.created_by&&i.set("created_by",r.created_by),r.curriculum_path&&i.set("curriculum_path",r.curriculum_path),r.visibility&&i.set("visibility",r.visibility);const u=i.toString(),c=`${In}/exercises${u?"?"+u:""}`,f=await fetch(c,{headers:{"x-api-key":Rn}});if(!f.ok){const p=await f.text();return He.value=p||`Server error (${f.status})`,null}const d=await f.json();return d.success?Os.value=d.exercises:He.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),He.value="Unable to connect to server",null}finally{jt.value=!1}}async function t(r){jt.value=!0,He.value=null;try{const i=await fetch(`${In}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":Rn}});if(!i.ok){const c=await i.text();return He.value=c||`Server error (${i.status})`,null}const u=await i.json();return u.success?Fa.value=u.exercise:He.value=u.error||"Failed to fetch exercise",u}catch(i){return console.error("Failed to fetch exercise detail:",i),He.value="Unable to connect to server",null}finally{jt.value=!1}}async function s({name:r,description:i,created_by:u,curriculum_path:c,visibility:f,boards:d}){jt.value=!0,He.value=null;try{const p=await fetch(`${In}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Rn},body:JSON.stringify({name:r,description:i||null,created_by:u||null,curriculum_path:c||null,visibility:f||"public",boards:d})});if(!p.ok){const g=await p.text();return He.value=g||`Server error (${p.status})`,{success:!1,error:He.value}}const h=await p.json();return h.success?Os.value=[h.exercise,...Os.value]:He.value=h.error||"Failed to create exercise",h}catch(p){return console.error("Failed to create exercise:",p),He.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{jt.value=!1}}async function n(r,i){jt.value=!0,He.value=null;try{const u=await fetch(`${In}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Rn},body:JSON.stringify(i)});if(!u.ok){const f=await u.text();return He.value=f||`Server error (${u.status})`,{success:!1,error:He.value}}const c=await u.json();return c.success||(He.value=c.error||"Failed to update exercise"),c}catch(u){return console.error("Failed to update exercise:",u),He.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{jt.value=!1}}async function o(r){try{const i=await fetch(`${In}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":Rn}});if(!i.ok){const c=await i.text();return He.value=c||`Server error (${i.status})`,{success:!1,error:He.value}}const u=await i.json();return u.success&&(Os.value=Os.value.filter(c=>c.id!==r)),u}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Os.value=[],Fa.value=null,jt.value=!1,He.value=null}return{exercises:Os,currentExercise:Fa,loading:jt,error:He,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const _k={class:"modal-content"},wk={class:"step"},Sk={class:"form-group"},Ck=["value"],$k={key:0,class:"form-hint"},kk={class:"form-group"},xk={class:"target-options"},Ak={class:"radio-option"},Tk={class:"radio-option"},Nk={key:0,class:"form-group"},Ek=["value"],Ok={key:1,class:"form-group"},Ik=["value"],Rk={class:"form-group"},Dk={class:"step-actions"},Pk=["disabled"],Lk={key:2,class:"error-text"},Bk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Je(),a=bk(),r=Sn(),i=bo(),u=_n(),c=I(""),f=I("classroom"),d=I(s.preselectedClassroomId||""),p=I(""),h=I(""),g=I(!1),y=I(null),$=T(()=>a.exercises.value),S=T(()=>a.loading.value),_=T(()=>i.teacherClassrooms.value),w=T(()=>u.students.value),x=T(()=>!(!c.value||f.value==="classroom"&&!d.value||f.value==="student"&&!p.value));async function B(){if(!x.value||g.value)return;const V=o.currentUser.value;if(!V)return;g.value=!0,y.value=null;const j=await r.createAssignment({exercise_id:c.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?p.value:null,assigned_by:V.id,due_at:h.value||null});j.success?n("assignment-created",j.assignment):y.value=j.error||"Failed to create assignment",g.value=!1}return Ct(async()=>{a.exercises.value.length||await a.fetchExercises();const V=o.currentUser.value;V&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(V.id)}),(V,j)=>(m(),v("div",{class:"modal-overlay",onClick:j[7]||(j[7]=St(Q=>V.$emit("close"),["self"]))},[l("div",_k,[l("div",wk,[j[18]||(j[18]=l("h2",null,"Create Assignment",-1)),j[19]||(j[19]=l("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),l("div",Sk,[j[9]||(j[9]=l("label",{for:"exercise-select"},"Exercise",-1)),Fe(l("select",{id:"exercise-select","onUpdate:modelValue":j[0]||(j[0]=Q=>c.value=Q),class:"form-select"},[j[8]||(j[8]=l("option",{value:""},"Select an exercise...",-1)),(m(!0),v(Z,null,ae($.value,Q=>(m(),v("option",{key:Q.id,value:Q.id},b(Q.name)+" ("+b(Q.board_count)+" boards)",9,Ck))),128))],512),[[Wn,c.value]]),S.value?(m(),v("p",$k,"Loading exercises...")):F("",!0)]),l("div",kk,[j[12]||(j[12]=l("label",null,"Assign to",-1)),l("div",xk,[l("label",Ak,[Fe(l("input",{type:"radio","onUpdate:modelValue":j[1]||(j[1]=Q=>f.value=Q),value:"classroom"},null,512),[[Hl,f.value]]),j[10]||(j[10]=l("span",null,"Classroom",-1))]),l("label",Tk,[Fe(l("input",{type:"radio","onUpdate:modelValue":j[2]||(j[2]=Q=>f.value=Q),value:"student"},null,512),[[Hl,f.value]]),j[11]||(j[11]=l("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(m(),v("div",Nk,[j[14]||(j[14]=l("label",{for:"classroom-select"},"Classroom",-1)),Fe(l("select",{id:"classroom-select","onUpdate:modelValue":j[3]||(j[3]=Q=>d.value=Q),class:"form-select"},[j[13]||(j[13]=l("option",{value:""},"Select a classroom...",-1)),(m(!0),v(Z,null,ae(_.value,Q=>(m(),v("option",{key:Q.id,value:Q.id},b(Q.name)+" ("+b(Q.member_count)+" students)",9,Ek))),128))],512),[[Wn,d.value]])])):F("",!0),f.value==="student"?(m(),v("div",Ok,[j[16]||(j[16]=l("label",{for:"student-select"},"Student",-1)),Fe(l("select",{id:"student-select","onUpdate:modelValue":j[4]||(j[4]=Q=>p.value=Q),class:"form-select"},[j[15]||(j[15]=l("option",{value:""},"Select a student...",-1)),(m(!0),v(Z,null,ae(w.value,Q=>(m(),v("option",{key:Q.id,value:Q.id},b(Q.first_name)+" "+b(Q.last_name),9,Ik))),128))],512),[[Wn,p.value]])])):F("",!0),l("div",Rk,[j[17]||(j[17]=l("label",{for:"due-date"},[Oe("Due Date "),l("span",{class:"optional"},"(optional)")],-1)),Fe(l("input",{id:"due-date","onUpdate:modelValue":j[5]||(j[5]=Q=>h.value=Q),type:"date",class:"form-input"},null,512),[[wt,h.value]])]),l("div",Dk,[l("button",{class:"btn btn-secondary",onClick:j[6]||(j[6]=Q=>V.$emit("close"))},"Cancel"),l("button",{class:"btn btn-primary",disabled:!x.value||g.value,onClick:B},b(g.value?"Creating...":"Create Assignment"),9,Pk)]),y.value?(m(),v("p",Lk,b(y.value),1)):F("",!0)])])]))}},Mk=_e(Bk,[["__scopeId","data-v-5e97b847"]]),Uk={class:"modal-content"},Fk={class:"modal-body"},jk={key:0,class:"loading-state"},Hk={key:1,class:"error-state"},Wk={class:"error-text"},Vk={class:"modal-header"},Kk={class:"assignment-meta"},Gk={class:"meta-item"},zk={key:0,class:"meta-item"},Jk={key:1,class:"meta-item"},Yk={key:0,class:"progress-table-wrapper"},qk={class:"progress-table"},Xk={class:"col-name"},Qk={class:"col-progress"},Zk={class:"progress-cell"},ex={class:"progress-bar-track"},tx={class:"progress-label"},sx={class:"col-correct"},nx={key:1,class:"empty-state"},ox={key:2,class:"summary-row"},ax={key:0},rx={__name:"AssignmentDetailModal",props:{assignmentId:{type:String,required:!0}},emits:["close"],setup(e){const t=e,s=Sn(),n=I(!0),o=I(null),a=T(()=>s.currentAssignment.value),r=T(()=>{var S;const p=(S=a.value)==null?void 0:S.student_progress;if(!p||p.length===0)return null;const h=p.length,g=p.filter(_=>_.attempted_boards>=_.total_boards).length,y=p.filter(_=>_.attempted_boards>0);let $=null;if(y.length>0){const _=y.reduce((w,x)=>w+x.correct_boards/x.attempted_boards*100,0);$=Math.round(_/y.length)}return{total:h,completed:g,avgAccuracy:$}});function i(p){return p?new Date(p).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function u(p){return p.total_boards?Math.round(p.attempted_boards/p.total_boards*100)+"%":"0%"}function c(p){return p.attempted_boards>=p.total_boards?"complete":p.attempted_boards>0?"partial":""}function f(p){return p.attempted_boards===0?"":Math.round(p.correct_boards/p.attempted_boards*100)+"%"}function d(p){if(p.attempted_boards===0)return"";const h=p.correct_boards/p.attempted_boards*100;return h>=80?"accuracy-high":h>=50?"accuracy-mid":"accuracy-low"}return Ct(async()=>{const p=await s.fetchAssignmentDetail(t.assignmentId);p!=null&&p.success||(o.value=s.error.value||"Failed to load assignment details"),n.value=!1}),(p,h)=>(m(),v("div",{class:"modal-overlay",onClick:h[2]||(h[2]=St(g=>p.$emit("close"),["self"]))},[l("div",Uk,[l("div",Fk,[n.value?(m(),v("div",jk,[...h[3]||(h[3]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading assignment details...",-1)])])):o.value?(m(),v("div",Hk,[l("p",Wk,b(o.value),1),l("button",{class:"btn btn-secondary",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"Close")])):a.value?(m(),v(Z,{key:2},[l("div",Vk,[l("h2",null,b(a.value.exercise_name),1),l("button",{class:"close-btn",onClick:h[1]||(h[1]=g=>p.$emit("close")),"aria-label":"Close"},"")]),l("div",Kk,[l("span",Gk,b(a.value.total_boards)+" "+b(a.value.total_boards===1?"board":"boards"),1),a.value.due_at?(m(),v("span",zk,"Due "+b(i(a.value.due_at)),1)):F("",!0),a.value.classroom_name?(m(),v("span",Jk,b(a.value.classroom_name),1)):F("",!0)]),a.value.student_progress&&a.value.student_progress.length?(m(),v("div",Yk,[l("table",qk,[h[4]||(h[4]=l("thead",null,[l("tr",null,[l("th",{class:"col-name"},"Student"),l("th",{class:"col-progress"},"Progress"),l("th",{class:"col-correct"},"Correct"),l("th",{class:"col-accuracy"},"Accuracy")])],-1)),l("tbody",null,[(m(!0),v(Z,null,ae(a.value.student_progress,g=>(m(),v("tr",{key:g.student_id},[l("td",Xk,b(g.first_name)+" "+b(g.last_name),1),l("td",Qk,[l("div",Zk,[l("div",ex,[l("div",{class:ie(["progress-bar-fill",c(g)]),style:st({width:u(g)})},null,6)]),l("span",tx,b(g.attempted_boards)+"/"+b(g.total_boards),1)])]),l("td",sx,b(g.correct_boards)+"/"+b(g.total_boards),1),l("td",{class:ie(["col-accuracy",d(g)])},b(f(g)),3)]))),128))])])])):(m(),v("div",nx,[...h[5]||(h[5]=[l("p",null,"No students assigned yet.",-1)])])),r.value?(m(),v("div",ox,[l("span",null,b(r.value.completed)+"/"+b(r.value.total)+" students completed",1),r.value.avgAccuracy!==null?(m(),v("span",ax,b(r.value.avgAccuracy)+"% avg accuracy",1)):F("",!0)])):F("",!0)],64)):F("",!0)])])]))}},lx=_e(rx,[["__scopeId","data-v-d654f00a"]]),ix={class:"needs-attention"},cx={class:"panel-header"},ux={key:0,class:"empty-state"},dx={key:1,class:"attention-list"},fx={class:"item-icon"},px={class:"item-text"},mx={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(m(),v("div",ix,[l("div",cx,[a[1]||(a[1]=l("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(m(),v("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):F("",!0)]),e.items.length?(m(),v("div",dx,[(m(!0),v(Z,null,ae(e.items,(r,i)=>(m(),v("div",{key:i,class:ie(["attention-item",r.type])},[l("span",fx,b(t(r.type)),1),l("span",px,b(s(r)),1)],2))),128))])):(m(),v("div",ux," All caught up! No items need attention. "))]))}},vx=_e(mx,[["__scopeId","data-v-65e8ba1f"]]),hx={class:"recent-activity"},gx={class:"panel-header"},yx={key:0,class:"empty-state"},bx={key:1,class:"activity-list"},_x={class:"event-content"},wx={class:"event-text"},Sx={class:"event-time"},Cx={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(m(),v("div",hx,[l("div",gx,[a[1]||(a[1]=l("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(m(),v("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):F("",!0)]),e.events.length?(m(),v("div",bx,[(m(!0),v(Z,null,ae(e.events,(r,i)=>(m(),v("div",{key:i,class:"activity-item"},[l("span",{class:ie(["event-icon",r.type])},b(t(r.type)),3),l("div",_x,[l("span",wx,b(s(r)),1),l("span",Sx,b(n(r.timestamp)),1)])]))),128))])):(m(),v("div",yx," No recent activity. "))]))}},$x=_e(Cx,[["__scopeId","data-v-39e672f5"]]),kx={class:"teacher-lobby"},xx={class:"welcome-section"},Ax={class:"welcome-title"},Tx={class:"welcome-subtitle"},Nx={class:"quick-actions"},Ex={key:0,class:"loading-state"},Ox={key:1,class:"dashboard-grid"},Ix={class:"left-column"},Rx={key:0,class:"classrooms-section"},Dx={class:"classroom-cards"},Px={key:1,class:"empty-state"},Lx={class:"right-column"},Bx={class:"collections-section"},Mx={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=Je(),s=w$(),n=I(!1),o=I(!1),a=I(null),r=I(null),i=T(()=>{const g=t.currentUser.value;return g?g.firstName:""}),u=T(()=>{const g=s.summaryStats.value;if(!g||g.classroomCount===0)return"Get started by creating your first classroom.";const y=[];return y.push(`${g.classroomCount} active ${g.classroomCount===1?"classroom":"classrooms"}`),g.openAssignmentCount>0&&y.push(`${g.openAssignmentCount} open ${g.openAssignmentCount===1?"assignment":"assignments"}`),y.join(", ")+"."});function c(g){r.value=r.value===g?null:g}function f(g){n.value=!1,r.value=g.id,h()}function d(){o.value=!1,h()}function p(g){const y=t.currentUser.value;y&&s.clearPanel(y.id,g)}function h(){const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id,!0)}return Ct(()=>{const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id)}),(g,y)=>(m(),v("div",kx,[l("div",xx,[l("h2",Ax,"Welcome back, "+b(i.value),1),l("p",Tx,b(u.value),1)]),l("div",Nx,[l("button",{class:"action-btn create",onClick:y[0]||(y[0]=$=>n.value=!0)}," + New Classroom "),l("button",{class:"action-btn assign",onClick:y[1]||(y[1]=$=>o.value=!0)}," + New Assignment "),e.isAdmin?(m(),v("button",{key:0,class:"action-btn admin",onClick:y[2]||(y[2]=$=>g.$emit("show-admin"))}," Admin Panel ")):F("",!0)]),M(s).lobbyLoading.value&&!M(s).lobbyClassrooms.value.length?(m(),v("div",Ex,[...y[11]||(y[11]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading dashboard...",-1)])])):(m(),v("div",Ox,[l("div",Ix,[M(s).lobbyClassrooms.value.length?(m(),v("div",Rx,[y[12]||(y[12]=l("h3",{class:"section-title"},"My Classrooms",-1)),l("div",Dx,[(m(!0),v(Z,null,ae(M(s).lobbyClassrooms.value,$=>(m(),Ue(ck,{key:$.id,classroom:$,expanded:r.value===$.id,onToggle:S=>c($.id),onMemberRemoved:h,onViewAssignment:y[3]||(y[3]=S=>a.value=S)},null,8,["classroom","expanded","onToggle"]))),128))])])):(m(),v("div",Px,[...y[13]||(y[13]=[l("p",{class:"empty-title"},"No classrooms yet",-1),l("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),l("div",Lx,[he(vx,{items:M(s).needsAttention.value,onClear:y[4]||(y[4]=$=>p("attention"))},null,8,["items"]),he($x,{events:M(s).recentActivity.value,onClear:y[5]||(y[5]=$=>p("activity"))},null,8,["events"])])])),l("div",Bx,[y[14]||(y[14]=l("h3",{class:"section-title"},"Lesson Collections",-1)),he(ol,{onSelectCollection:y[6]||(y[6]=$=>g.$emit("select-collection",$)),onLoadFile:y[7]||(y[7]=$=>g.$emit("load-file",$))})]),n.value?(m(),Ue(yk,{key:2,onClose:y[8]||(y[8]=$=>n.value=!1),onClassroomCreated:f})):F("",!0),o.value?(m(),Ue(Mk,{key:3,onClose:y[9]||(y[9]=$=>o.value=!1),onAssignmentCreated:d})):F("",!0),a.value?(m(),Ue(lx,{key:4,"assignment-id":a.value,onClose:y[10]||(y[10]=$=>a.value=null)},null,8,["assignment-id"])):F("",!0)]))}},Ux=_e(Mx,[["__scopeId","data-v-364209cc"]]),ju="https://api.bridge-classroom.com/api",Hu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Wu=I(null),Vu=I([]),Ku=I(null),Gu=I(null),yr=I(!1),br=I(null),ja=I(null),Fx=60*1e3;async function zu(e=!1){if(!e&&ja.value&&Date.now()-new Date(ja.value).getTime()<Fx)return{success:!0,cached:!0};yr.value=!0,br.value=null;try{const t=await fetch(`${ju}/admin/stats`,{headers:{"x-api-key":Hu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Wu.value=s.stats,Vu.value=s.popular_lessons||[],Ku.value=s.database,ja.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),br.value=t.message,{success:!1,error:t.message}}finally{yr.value=!1}}async function Ju(){try{const e=await fetch(`${ju}/admin/health`,{headers:{"x-api-key":Hu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Gu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function jx(){await Promise.all([zu(!0),Ju()])}function Hx(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function Wx(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function ll(){return{stats:Wu,popularLessons:Vu,database:Ku,health:Gu,loading:yr,error:br,loadStats:zu,loadHealth:Ju,refreshAll:jx,formatBytes:Hx,formatUptime:Wx}}const Vx={class:"stats-row"},Kx={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},Gx={class:"stat-number"},zx={class:"stat-card",style:{"border-top-color":"#1565c0"}},Jx={class:"stat-number"},Yx={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},qx={class:"stat-number"},Xx={class:"stat-card",style:{"border-top-color":"#e65100"}},Qx={class:"stat-number"},Zx={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,i;return m(),v("div",Vx,[l("div",Kx,[l("div",Gx,b(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=l("div",{class:"stat-label"},"Total Users",-1))]),l("div",zx,[l("div",Jx,b(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=l("div",{class:"stat-label"},"Active (7d)",-1))]),l("div",Yx,[l("div",qx,b(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=l("div",{class:"stat-label"},"Observations (7d)",-1))]),l("div",Xx,[l("div",Qx,b(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=l("div",{class:"stat-label"},"Active Today",-1))])])}}},eA=_e(Zx,[["__scopeId","data-v-a14a2199"]]),tA={class:"popular-lessons"},sA={key:0,class:"empty-state"},nA={key:1,class:"table-wrap"},oA={class:"lessons-table"},aA={class:"lesson-name"},rA={class:"num-col"},lA={class:"num-col"},iA={class:"num-col"},cA={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(m(),v("div",tA,[o[1]||(o[1]=l("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(m(),v("div",nA,[l("table",oA,[o[0]||(o[0]=l("thead",null,[l("tr",null,[l("th",null,"Lesson"),l("th",{class:"num-col"},"Plays"),l("th",{class:"num-col"},"Users"),l("th",{class:"num-col"},"Accuracy")])],-1)),l("tbody",null,[(m(!0),v(Z,null,ae(e.lessons.slice(0,15),a=>(m(),v("tr",{key:a.deal_subfolder},[l("td",aA,b(t(a.deal_subfolder)),1),l("td",rA,b(a.play_count.toLocaleString()),1),l("td",lA,b(a.unique_users),1),l("td",iA,[l("span",{class:ie(["accuracy-badge",s(a.accuracy_pct)])},b(a.accuracy_pct)+"% ",3)])]))),128))])])])):(m(),v("div",sA,"No lesson data yet."))]))}},uA=_e(cA,[["__scopeId","data-v-079bd4f8"]]),dA={class:"database-panel"},fA={key:0,class:"empty-state"},pA={class:"db-size"},mA={class:"tables-table"},vA={class:"table-name"},hA={class:"num-col"},gA={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=ll();return(s,n)=>(m(),v("div",dA,[n[2]||(n[2]=l("h3",{class:"panel-title"},"Database",-1)),e.database?(m(),v(Z,{key:1},[l("div",pA,[n[0]||(n[0]=Oe(" SQLite file: ",-1)),l("strong",null,b(M(t)(e.database.file_size_bytes)),1)]),l("table",mA,[n[1]||(n[1]=l("thead",null,[l("tr",null,[l("th",null,"Table"),l("th",{class:"num-col"},"Rows")])],-1)),l("tbody",null,[(m(!0),v(Z,null,ae(e.database.tables,o=>(m(),v("tr",{key:o.name},[l("td",vA,b(o.name),1),l("td",hA,b(o.row_count.toLocaleString()),1)]))),128))])])],64)):(m(),v("div",fA,"Loading..."))]))}},yA=_e(gA,[["__scopeId","data-v-d5945aff"]]),bA={class:"system-health"},_A={class:"health-header"},wA=["disabled"],SA={key:0,class:"empty-state"},CA={key:1,class:"health-rows"},$A={class:"health-row"},kA={class:"health-value"},xA={class:"health-row"},AA={class:"health-value"},TA={class:"health-row"},NA={class:"health-value"},EA={class:"health-row"},OA={class:"health-value"},IA={class:"health-row"},RA={class:"health-value"},DA={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=ll();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(m(),v("div",bA,[l("div",_A,[o[1]||(o[1]=l("h3",{class:"panel-title"},"System Health",-1)),l("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},b(e.refreshing?"Refreshing...":"Refresh"),9,wA)]),e.health?(m(),v("div",CA,[l("div",$A,[o[2]||(o[2]=l("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=l("span",{class:"health-label"},"API Server",-1)),l("span",kA,"Up "+b(M(t)(e.health.uptime_seconds)),1)]),l("div",xA,[l("span",{class:ie(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=l("span",{class:"health-label"},"Database",-1)),l("span",AA,b(e.health.database_writable?"Writable":"Error"),1)]),l("div",TA,[l("span",{class:ie(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=l("span",{class:"health-label"},"Last Observation",-1)),l("span",NA,b(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),l("div",EA,[o[6]||(o[6]=l("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=l("span",{class:"health-label"},"Disk",-1)),l("span",OA,b(e.health.disk_available_gb)+" GB / "+b(e.health.disk_total_gb)+" GB available",1)]),l("div",IA,[o[8]||(o[8]=l("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=l("span",{class:"health-label"},"API Version",-1)),l("span",RA,"v"+b(e.health.api_version),1)])])):(m(),v("div",SA,"Loading..."))]))}},PA=_e(DA,[["__scopeId","data-v-0d4e96d5"]]),LA={class:"admin-lobby"},BA={class:"admin-header"},MA={key:0,class:"admin-subtitle"},UA={key:0,class:"loading-state"},FA={key:1,class:"error-state"},jA={class:"announcement-section"},HA={class:"announcement-info"},WA=["innerHTML"],VA={key:0,class:"announcement-expires"},KA={key:1,class:"announcement-expires"},GA={class:"announcement-actions"},zA=["disabled"],JA={key:1,class:"announcement-form"},YA={class:"form-row"},qA=["disabled"],XA={class:"content-grid"},QA={class:"name-correction-section"},ZA={class:"search-row"},e2=["disabled"],t2={key:0,class:"search-results"},s2=["onClick"],n2={class:"result-name"},o2={class:"result-email"},a2={key:0,class:"corrected-badge"},r2={key:1,class:"no-results"},l2={key:2,class:"edit-form"},i2={class:"edit-row"},c2={class:"edit-field"},u2={class:"edit-field"},d2=["disabled"],f2={key:0,class:"save-feedback success"},p2={key:1,class:"save-feedback error"},m2={__name:"AdminLobby",emits:["back"],setup(e){const t=ll(),s=nl(),n=I(!1),o=I(""),a=I("info"),r=I(""),i=I(!1),u=I(!1),c=I(!1);function f(){const W=s.announcement.value;if(W){if(o.value=W.message,a.value=W.type,W.expires_at){const N=new Date(W.expires_at);r.value=new Date(N.getTime()-N.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";c.value=!0}}function d(){c.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const W=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,W),o.value="",a.value="info",r.value="",c.value=!1}catch(W){console.error("Failed to publish announcement:",W)}finally{i.value=!1}}}async function h(){u.value=!0;try{await s.clearAnnouncement()}catch(W){console.error("Failed to clear announcement:",W)}finally{u.value=!1}}function g(W){return W?new Date(W).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function $(W){return W.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(P,R)=>{const te=y[R.toLowerCase()];return te?`<span class="ann-circle" style="background:${te.bg};color:${te.fg}"></span>`:P})}const S="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",w=I(""),x=I([]),B=I(!1),V=I(!1),j=I(null),Q=I(""),q=I(""),de=I(!1),pe=I(!1),ce=I("");async function ge(){if(w.value.trim()){V.value=!0,B.value=!1,x.value=[],j.value=null,pe.value=!1,ce.value="";try{const W=await fetch(`${S}/admin/users/search?q=${encodeURIComponent(w.value.trim())}`,{headers:{"x-api-key":_}});if(!W.ok)throw new Error(`Search failed: ${W.status}`);const N=await W.json();x.value=N.users||[]}catch(W){console.error("User search failed:",W)}finally{V.value=!1,B.value=!0}}}function $e(W){j.value=W,Q.value=W.first_name,q.value=W.last_name,pe.value=!1,ce.value=""}async function me(){if(!(!j.value||!Q.value.trim()||!q.value.trim())){de.value=!0,pe.value=!1,ce.value="";try{const W=await fetch(`${S}/admin/users/${encodeURIComponent(j.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:Q.value.trim(),last_name:q.value.trim()})});if(!W.ok)throw new Error(`Save failed: ${W.status}`);const N=await W.json();N.success&&(pe.value=!0,j.value.first_name=N.user.first_name,j.value.last_name=N.user.last_name,j.value.name_corrected_at=N.user.name_corrected_at)}catch(W){ce.value=W.message}finally{de.value=!1}}}async function fe(){await Promise.all([t.loadStats(),t.loadHealth()])}async function J(){n.value=!0,await t.refreshAll(),n.value=!1}return Ct(fe),(W,N)=>(m(),v("div",LA,[l("div",BA,[l("button",{class:"back-btn",onClick:N[0]||(N[0]=P=>W.$emit("back"))}," Back to Dashboard"),N[7]||(N[7]=l("h2",{class:"admin-title"},"Admin Dashboard",-1)),M(t).stats.value?(m(),v("p",MA,b(M(t).stats.value.total_observations.toLocaleString())+" total observations across "+b(M(t).stats.value.total_users)+" users ",1)):F("",!0)]),M(t).loading.value&&!M(t).stats.value?(m(),v("div",UA,[...N[8]||(N[8]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading dashboard...",-1)])])):M(t).error.value?(m(),v("div",FA,[l("p",null,b(M(t).error.value),1),l("button",{class:"retry-btn",onClick:fe},"Retry")])):M(t).stats.value?(m(),v(Z,{key:2},[l("div",jA,[N[10]||(N[10]=l("h3",{class:"section-title"},"Site Announcement",-1)),M(s).announcement.value&&!c.value?(m(),v("div",{key:0,class:ie(["current-announcement",M(s).announcement.value.type])},[l("div",HA,[l("span",{class:ie(["announcement-type-badge",M(s).announcement.value.type])},b(M(s).announcement.value.type),3),l("span",{class:"announcement-message",innerHTML:$(M(s).announcement.value.message)},null,8,WA),M(s).announcement.value.expires_at?(m(),v("span",VA," Expires: "+b(g(M(s).announcement.value.expires_at)),1)):(m(),v("span",KA,"No expiration"))]),l("div",GA,[l("button",{class:"edit-btn",onClick:f},"Edit"),l("button",{class:"clear-btn",onClick:h,disabled:u.value},b(u.value?"Clearing...":"Clear"),9,zA)])],2)):c.value||!M(s).announcement.value?(m(),v("div",JA,[Fe(l("input",{"onUpdate:modelValue":N[1]||(N[1]=P=>o.value=P),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Ko(p,["enter"])},null,544),[[wt,o.value]]),l("div",YA,[Fe(l("select",{"onUpdate:modelValue":N[2]||(N[2]=P=>a.value=P),class:"type-select"},[...N[9]||(N[9]=[l("option",{value:"info"},"Info",-1),l("option",{value:"warning"},"Warning",-1),l("option",{value:"urgent"},"Urgent",-1)])],512),[[Wn,a.value]]),Fe(l("input",{"onUpdate:modelValue":N[3]||(N[3]=P=>r.value=P),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[wt,r.value]]),c.value?(m(),v("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):F("",!0),l("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},b(i.value?"Publishing...":c.value?"Update":"Publish"),9,qA)])])):F("",!0)]),he(eA,{stats:M(t).stats.value},null,8,["stats"]),l("div",XA,[he(uA,{lessons:M(t).popularLessons.value},null,8,["lessons"]),he(yA,{database:M(t).database.value},null,8,["database"])]),he(PA,{health:M(t).health.value,refreshing:n.value,onRefresh:J},null,8,["health","refreshing"]),l("div",QA,[N[13]||(N[13]=l("h3",{class:"section-title"},"Correct User Name",-1)),l("div",ZA,[Fe(l("input",{"onUpdate:modelValue":N[4]||(N[4]=P=>w.value=P),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Ko(ge,["enter"])},null,544),[[wt,w.value]]),l("button",{class:"search-btn",onClick:ge,disabled:V.value||!w.value.trim()},b(V.value?"Searching...":"Search"),9,e2)]),x.value.length?(m(),v("div",t2,[(m(!0),v(Z,null,ae(x.value,P=>(m(),v("div",{key:P.id,class:ie(["search-result-item",{selected:j.value&&j.value.id===P.id}]),onClick:R=>$e(P)},[l("span",n2,b(P.first_name)+" "+b(P.last_name),1),l("span",o2,b(P.email),1),P.name_corrected_at?(m(),v("span",a2,"corrected")):F("",!0)],10,s2))),128))])):F("",!0),B.value&&!x.value.length?(m(),v("div",r2,' No users found for "'+b(w.value)+'" ',1)):F("",!0),j.value?(m(),v("div",l2,[l("div",i2,[l("div",c2,[N[11]||(N[11]=l("label",null,"First Name",-1)),Fe(l("input",{"onUpdate:modelValue":N[5]||(N[5]=P=>Q.value=P),type:"text",class:"edit-input"},null,512),[[wt,Q.value]])]),l("div",u2,[N[12]||(N[12]=l("label",null,"Last Name",-1)),Fe(l("input",{"onUpdate:modelValue":N[6]||(N[6]=P=>q.value=P),type:"text",class:"edit-input"},null,512),[[wt,q.value]])]),l("button",{class:"save-btn",onClick:me,disabled:de.value||!Q.value.trim()||!q.value.trim()},b(de.value?"Saving...":"Save"),9,d2)]),pe.value?(m(),v("p",f2,"Name corrected successfully.")):F("",!0),ce.value?(m(),v("p",p2,b(ce.value),1)):F("",!0)])):F("",!0)])],64)):F("",!0)]))}},v2=_e(m2,[["__scopeId","data-v-5a6964cf"]]),h2={class:"lobby-view"},g2={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=Je(),s=Sn(),n=I(!1),o=T(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=T(()=>s.studentAssignments.value.length>0),r=T(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return Ct(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,u)=>(m(),v("div",h2,[n.value?(m(),Ue(v2,{key:0,onBack:u[0]||(u[0]=c=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(m(),Ue(Ux,{key:1,"is-admin":o.value==="admin",onSelectCollection:u[1]||(u[1]=c=>i.$emit("select-collection",c)),onShowAdmin:u[2]||(u[2]=c=>n.value=!0),onLoadFile:u[3]||(u[3]=c=>i.$emit("load-file",c))},null,8,["is-admin"])):a.value||r.value?(m(),Ue(g$,{key:2,onSelectCollection:u[4]||(u[4]=c=>i.$emit("select-collection",c)),onSelectAssignment:u[5]||(u[5]=c=>i.$emit("select-assignment",c)),onLoadFile:u[6]||(u[6]=c=>i.$emit("load-file",c))})):(m(),Ue(e$,{key:3,onSelectCollection:u[7]||(u[7]=c=>i.$emit("select-collection",c)),onShowBecomeTeacher:u[8]||(u[8]=c=>i.$emit("show-become-teacher")),onLoadFile:u[9]||(u[9]=c=>i.$emit("load-file",c))}))]))}},y2=_e(g2,[["__scopeId","data-v-d84f343d"]]),b2={class:"modal-content"},_2={key:0,class:"step step-overview"},w2={class:"step-actions"},S2={key:1,class:"step step-agreement"},C2={class:"agreement-checkbox"},$2={class:"step-actions"},k2=["disabled"],x2={key:0,class:"error-text"},A2={key:2,class:"step step-confirmation"},T2={class:"step-actions"},N2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Je(),o=I(1),a=I(!1),r=I(!1),i=I(null);async function u(){const c=n.currentUser.value;if(c){r.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:c.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(c.id,{role:"teacher"});try{const{publicKey:p,privateKey:h}=await nv();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${c.firstName} ${c.lastName}`,email:c.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:h,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(c,f)=>(m(),v("div",{class:"modal-overlay",onClick:f[5]||(f[5]=St(d=>c.$emit("close"),["self"]))},[l("div",b2,[o.value===1?(m(),v("div",_2,[f[6]||(f[6]=so('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),l("div",w2,[l("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>c.$emit("close"))},"Not Now"),l("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(m(),v("div",S2,[f[8]||(f[8]=so('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),l("label",C2,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d)},null,512),[[Fr,a.value]]),f[7]||(f[7]=l("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),l("div",$2,[l("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),l("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:u},b(r.value?"Activating...":"Activate Teacher Account"),9,k2)]),i.value?(m(),v("p",x2,b(i.value),1)):F("",!0)])):o.value===3?(m(),v("div",A2,[f[9]||(f[9]=l("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=l("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=l("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=l("ol",{class:"next-steps"},[l("li",null,"Create your first classroom from the teacher dashboard"),l("li",null,"Share the invite link with your students"),l("li",null,"Browse exercises and assign them to your class")],-1)),l("div",T2,[l("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>c.$emit("activated"))},"Go to Dashboard ")])])):F("",!0)])]))}},E2=_e(N2,[["__scopeId","data-v-56e5717d"]]),O2={},I2={class:"page-footer"};function R2(e,t){return m(),v("footer",I2,[...t[0]||(t[0]=[l("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),l("nav",{class:"footer-links"},[l("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),l("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const D2=_e(O2,[["render",R2],["__scopeId","data-v-1b649814"]]),P2={key:1,class:"app"},L2={class:"app-header"},B2={class:"header-right"},M2=["title"],U2={key:3,class:"stats"},F2={class:"correct"},j2={class:"wrong"},H2={class:"user-avatar-group"},W2=["title"],V2=["title"],K2={class:"app-main"},G2={key:3,class:"collection-view"},z2={key:4,class:"practice-layout"},J2={class:"practice-left"},Y2={class:"practice-right"},q2={key:1,class:"commentary-panel"},X2=["innerHTML"],Q2=["innerHTML"],Z2=["innerHTML"],eT=["innerHTML"],tT={class:"commentary-controls"},sT={key:0,class:"bidding-box-wrapper"},nT={key:1,class:"card-choice-prompt"},oT=["innerHTML"],aT={key:3,class:"completion-controls"},rT={key:0,class:"registration-toast"},lT={__name:"MainLayout",setup(e){const t=Lm(),s=mo(),n=Je(),o=ha(),a=Iu(),r=_n(),i=nl(),u=Sn(),c=zv(),f=I(!1),d=I(!1),p=I(!1),h=I(!1),g=I(null),y=I(""),$=I(null),S=I(null),_=I(null),w=I(!1),x=I(null),B=I(null),V=I(!1),j=I(!1),Q=I(null);function q(O,D=".current"){if(!O)return;const X=O.querySelector(D);X&&(O.scrollTop=X.offsetTop-O.offsetTop)}_t(()=>c.currentStepIndex.value,()=>{Qn(()=>{q($.value,".narrative-text.current")})}),_t(()=>c.isComplete.value,O=>{O&&Qn(()=>{q($.value,".narrative-text.current")})});const de=T(()=>n.isAuthenticated.value),pe=T(()=>{const O=n.currentUser.value;return O?`${O.firstName} ${O.lastName}`:""}),ce=T(()=>{const O=n.currentUser.value;return O?`${O.firstName.charAt(0)}${O.lastName.charAt(0)}`.toUpperCase():"?"}),ge=T(()=>{const O=n.currentUser.value;return(O==null?void 0:O.role)||"student"}),$e=T(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let me=null;Ct(()=>{i.loadAnnouncement(),me=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),Pr(()=>{me&&clearInterval(me)}),Ct(async()=>{s.initializeFromUrl(),n.initialize();const O=new URLSearchParams(window.location.search);O.get("recover")&&O.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),c.observationStore.initialize();const D=s.getCollectionFromUrl(),X=s.getLessonFromUrl();D&&(S.value=D,X&&await H(D,X)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),ys().initialize(),await r.checkTeacherStatus())});async function fe(O){console.log("User ready:",O.firstName,O.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),j.value=!0,setTimeout(()=>{j.value=!1},4e3)),await a.initialize(),ys().initialize(),await r.checkTeacherStatus();const X=sessionStorage.getItem("pendingJoinCode");if(X){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:X}});return}}function J(){ys().reset(),Xr().clearCache(),Ss().reset(),r.reset(),N.value=[],P.value=0,S.value=null,_.value=null,c.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,f.value=!1,h.value=!1,g.value=null}async function W(){w.value=!1,await r.checkTeacherStatus()}const N=I([]),P=I(0),R=T(()=>N.value[P.value]||null),te=T(()=>{var oe;const O=U(S.value),D=O!=null&&O.name?`${O.name} - `:"";if((oe=_.value)!=null&&oe.name)return D+_.value.name;if(!R.value)return"";const X=R.value.subfolder||R.value.category||"";return X?D+X:""});_t(P,()=>{R.value&&(c.loadDeal(R.value),s.setDealInUrl(R.value.boardNumber))},{flush:"sync"}),_t(()=>c.observationStore.pendingCount.value,(O,D)=>{O>D&&a.triggerSync()}),_t(()=>c.isComplete.value,O=>{O&&(x.value=null)});async function Ce(O){const D=O.target.files[0];if(D)try{const X=await D.text(),oe=$o(X);if(oe.length>0){const le=D.name.replace(/\.pbn$/i,""),ke=oe.map(be=>({...be,subfolder:be.subfolder||le,category:be.category||le}));N.value=ke,P.value=0,c.loadDeal(ke[0]),c.resetStats(),hs().saveLessonBoardNumbers(le,ke.map(be=>be.boardNumber)),_.value={id:le,name:le,category:le}}else alert("No deals found in the PBN file")}catch(X){console.error("Error loading PBN file:",X),alert("Error loading PBN file: "+X.message)}}function Ee({subfolder:O,name:D,category:X,content:oe}){const le=$o(oe);if(le.length>0){const ke=le.map(be=>({...be,subfolder:be.subfolder||O,category:be.category||X}));N.value=ke,P.value=0,c.loadDeal(ke[0]),c.resetStats(),hs().saveLessonBoardNumbers(O,ke.map(be=>be.boardNumber)),_.value={id:O,name:D,category:X},s.setLessonInUrl(O),V.value=!1,se()}else alert("No deals found in the lesson file")}const xe=T(()=>c.boardState.correctCount),je=T(()=>c.boardState.wrongCount);function G(O){const D=c.makeBid(O);R.value&&ne(D)}function re({seat:O,suit:D,rank:X}){const oe=c.makeCardChoice(D,X);R.value&&ne(oe)}function ne(O){const D=R.value.boardNumber;if(!O)x.value={board:D,status:"red"};else if(c.boardState.boardHadWrong){const X=Object.keys(c.boardState.wrongStepIndices).length===0;x.value={board:D,status:X?"yellow":"red"}}}function ue(){c.clearCardFeedback(),c.goBack()}function Se(){P.value<N.value.length-1&&(x.value=null,P.value++,c.loadDeal(N.value[P.value]))}function C(O){O>=0&&O<N.value.length&&(x.value=null,P.value=O,c.loadDeal(N.value[O]))}async function k({subfolder:O,dealNumber:D}){var X;if(((X=_.value)==null?void 0:X.id)===O&&N.value.length>0){const oe=N.value.findIndex(le=>le.boardNumber===D);if(oe>=0){C(oe);return}}for(const oe of s.COLLECTIONS)try{const le=O.includes("/")?O.split("/").pop():O,ke=`${oe.baseUrl}/${le}.pbn`,ye=await fetch(ke);if(!ye.ok)continue;const be=await ye.text();S.value=oe.id,s.setCollectionInUrl(oe.id),Ee({subfolder:O,name:O,category:"",content:be});const Ge=N.value.findIndex(dt=>dt.boardNumber===D);Ge>=0&&C(Ge);return}catch{}}function L(O){p.value=!1,h.value=!1,g.value=null,k(O)}function K(O,D){h.value=!1,g.value=null,k({subfolder:O,dealNumber:D||1})}function Y(){_.value=null,s.setLessonInUrl(null),N.value=[],P.value=0,c.resetStats(),V.value=!1,B.value=null,h.value=!1,g.value=null}function z(){S.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),N.value=[],P.value=0,c.resetStats(),V.value=!1,B.value=null,h.value=!1,g.value=null}async function se(){if(B.value=null,!S.value||!_.value)return;const O=U(S.value);if(!O)return;const D=_.value.id,X=D.includes("/")?D.split("/").pop():D,oe=`${O.baseUrl}/${X}_Intro.pdf`;try{(await fetch(oe,{method:"HEAD"})).ok&&(B.value=oe)}catch{}}function ee(O){window.innerWidth<600?window.open(O,"_blank"):(Q.value=O,V.value=!0)}function A(O){S.value=O,s.setCollectionInUrl(O)}async function E(O){const D=await u.fetchExerciseBoards(O.exercise_id);if(!D||D.length===0){alert("Could not load exercise boards.");return}const X=ye=>`${ye.collection_id||""}|${ye.deal_subfolder}`,oe=new Map;for(const ye of D){const be=X(ye);oe.has(be)||oe.set(be,[]),oe.get(be).push(ye)}const le=[];for(const[,ye]of oe){const be=ye[0].deal_subfolder,Ge=ye[0].collection_id,dt=be.includes("/")?be.split("/").pop():be;let ft=null;if(Ge){const Be=U(Ge);if(Be)try{const Xe=`${Be.baseUrl}/${dt}.pbn`,pt=await fetch(Xe);pt.ok&&(ft=await pt.text())}catch{}}if(!ft)for(const Be of s.COLLECTIONS)try{const Xe=`${Be.baseUrl}/${dt}.pbn`,pt=await fetch(Xe);if(pt.ok){ft=await pt.text();break}}catch{}if(!ft){console.warn(`Could not load PBN for subfolder: ${be}`);continue}const Ye=$o(ft),et=new Set(ye.map(Be=>Be.deal_number));for(const Be of Ye)if(et.has(Be.boardNumber)){const Xe=ye.find(pt=>pt.deal_number===Be.boardNumber);le.push({...Be,subfolder:Be.subfolder||be,category:Be.category||be,_sortOrder:(Xe==null?void 0:Xe.sort_order)??999})}}if(le.length===0){alert("Could not find any of the assigned boards.");return}le.sort((ye,be)=>ye._sortOrder-be._sortOrder),N.value=le,P.value=0,c.loadDeal(le[0]),c.resetStats(),hs().saveLessonBoardNumbers(O.exercise_name,le.map(ye=>ye.boardNumber)),_.value={id:O.exercise_name,name:O.exercise_name,category:"Assignment"}}function U(O){return s.COLLECTIONS.find(D=>D.id===O)}async function H(O,D){var oe;const X=U(O);if(!X)return console.error("Collection not found:",O),!1;try{const le=await fetch(X.tocUrl);if(!le.ok)throw new Error(`Failed to load TOC: ${le.statusText}`);const ke=await le.json();let ye=null,be=null;for(const Be of ke.categories||[]){const Xe=(oe=Be.lessons)==null?void 0:oe.find(pt=>pt.id===D);if(Xe){ye=Xe,be=Be;break}}if(!ye)return console.error("Lesson not found in TOC:",D),!1;const Ge=D.includes("/")?D.split("/").pop():D,dt=`${X.baseUrl}/${Ge}.pbn`,ft=await fetch(dt);if(!ft.ok)throw new Error(`Failed to load lesson: ${ft.statusText}`);const Ye=await ft.text(),et=$o(Ye);if(et.length>0){const Be=et.map(is=>({...is,subfolder:is.subfolder||D,category:is.category||be.name}));N.value=Be;const Xe=s.getDealFromUrl(),pt=Xe?Be.findIndex(is=>is.boardNumber===Xe):-1;return P.value=pt>=0?pt:0,c.loadDeal(Be[P.value]),c.resetStats(),_.value={id:D,name:ye.name,category:be.name},se(),!0}return!1}catch(le){return console.error("Error loading lesson from URL:",le),!1}}return(O,D)=>{var X,oe,le,ke,ye,be,Ge,dt,ft,Ye,et,Be,Xe,pt,is,il;return de.value?(m(),v("div",P2,[l("header",L2,[l("h1",null,b(N.value.length?te.value:$e.value),1),l("div",B2,[he(S_),l("button",{class:"progress-btn",onClick:D[0]||(D[0]=De=>d.value=!0),title:"View Progress"}," Progress "),l("button",{class:"accomplishments-btn",onClick:D[1]||(D[1]=De=>p.value=!0),title:"View Accomplishments"}," Accomplishments "),M(r).isTeacher.value?(m(),v("button",{key:0,class:"teacher-btn",onClick:D[2]||(D[2]=De=>{h.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):F("",!0),N.value.length&&S.value?(m(),v("button",{key:1,class:"lessons-btn",onClick:Y,title:"Back to "+((X=U(S.value))==null?void 0:X.name)},b((oe=U(S.value))==null?void 0:oe.name),9,M2)):F("",!0),S.value||N.value.length?(m(),v("button",{key:2,class:"lobby-btn",onClick:z,title:"Return to lobby"}," Lobby ")):F("",!0),xe.value+je.value>0?(m(),v("div",U2,[l("span",F2,b(xe.value),1),l("span",j2,b(je.value),1)])):F("",!0),l("div",H2,[ge.value!=="student"?(m(),v("button",{key:0,class:ie(["role-badge","role-"+ge.value]),onClick:z,title:"Return to "+ge.value+" lobby"},b(ge.value),11,W2)):F("",!0),l("button",{class:"user-btn",onClick:D[3]||(D[3]=De=>f.value=!0),title:pe.value},b(ce.value),9,V2)])])]),l("main",K2,[he(d_),he(i_),h.value&&!g.value?(m(),Ue(IS,{key:0,onClose:D[4]||(D[4]=De=>h.value=!1),onSelectStudent:D[5]||(D[5]=(De,Cn)=>{g.value=De,y.value=Cn})})):h.value&&g.value?(m(),Ue(lC,{key:1,studentId:g.value,studentName:y.value,onBack:D[6]||(D[6]=De=>g.value=null),onNavigateToLesson:K},null,8,["studentId","studentName"])):!N.value.length&&!S.value?(m(),Ue(y2,{key:2,onSelectCollection:A,onSelectAssignment:E,onShowBecomeTeacher:D[7]||(D[7]=De=>w.value=!0),onLoadFile:Ce})):!N.value.length&&S.value?(m(),v("div",G2,[l("h2",null,b(((le=U(S.value))==null?void 0:le.name)||S.value),1),D[17]||(D[17]=l("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),he(DC,{visible:!0,inline:!0,collection:U(S.value),onLoad:Ee},null,8,["collection"])])):(m(),v("div",z2,[l("div",J2,[N.value.length>1?(m(),Ue(Bu,{key:0,boardNumbers:N.value.map(De=>De.boardNumber),lessonSubfolder:((ke=R.value)==null?void 0:ke.subfolder)||((ye=R.value)==null?void 0:ye.category)||"",currentIndex:P.value,forceBoardStatus:x.value,introUrl:B.value,onGoto:C,onOpenIntro:ee},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceBoardStatus","introUrl"])):F("",!0),he(iy,{boardNumber:(be=R.value)==null?void 0:be.boardNumber,dealer:(Ge=R.value)==null?void 0:Ge.dealer,vulnerable:(dt=R.value)==null?void 0:dt.vulnerable,contract:(ft=R.value)==null?void 0:ft.contract,declarer:(Ye=R.value)==null?void 0:Ye.declarer,showContract:M(c).auctionState.auctionComplete||M(c).showOpeningLead.value||M(c).hasSteps.value&&!M(c).hasBidSteps.value,openingLead:M(c).showOpeningLead.value?(et=R.value)==null?void 0:et.openingLead:"",totalDeals:N.value.length,currentIndex:P.value,dealBoardNumbers:N.value.map(De=>De.boardNumber),onGoto:C},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),he(xg,{hands:M(c).hands.value,hiddenSeats:M(c).hiddenSeats.value,showHcp:M(c).showHcp.value,compact:!0,clickableSeat:M(c).hasCardChoice.value?M(c).studentSeat.value:null,playedCards:M(c).showcardsPlayedCards.value,onCardClick:re},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),l("div",Y2,[M(c).showAuctionTable.value?(m(),Ue(Vg,{key:0,bids:M(c).hasBidSteps.value?M(c).auctionState.displayedBids:((Be=R.value)==null?void 0:Be.auction)||[],dealer:((Xe=R.value)==null?void 0:Xe.dealer)||"N",currentBidIndex:M(c).hasBidSteps.value?M(c).auctionState.currentBidIndex:-1,wrongBidIndex:M(c).auctionState.wrongBidIndex,correctBidIndex:M(c).auctionState.correctBidIndex,showTurnIndicator:M(c).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):F("",!0),he(_i,{visible:!!M(c).auctionState.wrongBid,type:"wrong",wrongBid:M(c).auctionState.wrongBid,correctBid:M(c).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),he(_i,{visible:!!M(c).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:M(c).cardChoiceState.wrongCard,correctCardCode:M(c).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),M(c).hasSteps.value?(m(),v("div",q2,[l("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:$},[(m(!0),v(Z,null,ae(M(c).steps.value.slice(0,M(c).currentStepIndex.value),(De,Cn)=>(m(),v(Z,{key:"prev-"+Cn},[Cn>=M(c).commentaryStartIndex.value?(m(),v(Z,{key:0},[l("span",{class:"narrative-text previous",innerHTML:M(Js)(M(Nn)(De.text))},null,8,X2),De.type==="bid"&&De.explanationText?(m(),v("span",{key:0,class:ie(["narrative-text",Cn===M(c).currentStepIndex.value-1&&M(c).isBidStep.value&&!M(c).bidAnswered.value?"current":"previous"]),innerHTML:M(Js)(M(Nn)(De.explanationText))},null,10,Q2)):F("",!0)],64)):F("",!0)],64))),128)),M(c).currentStep.value?(m(),v("span",{key:0,class:"narrative-text current",innerHTML:M(Js)(M(Nn)(M(c).currentStep.value.text))},null,8,Z2)):F("",!0),M(c).bidAnswered.value&&((pt=M(c).currentStep.value)!=null&&pt.explanationText)?(m(),v("span",{key:1,class:"narrative-text current",innerHTML:M(Js)(M(Nn)(M(c).currentStep.value.explanationText))},null,8,eT)):F("",!0)],512),l("div",tT,[M(c).hasBidPrompt.value?(m(),v("div",sT,[he(Mg,{lastBid:M(c).lastContractBid.value,canDouble:M(c).canDouble.value,canRedouble:M(c).canRedouble.value,onBid:G},null,8,["lastBid","canDouble","canRedouble"])])):M(c).hasCardChoice.value?(m(),v("div",nT," Click on the card you would choose ")):F("",!0),M(c).canGoBack.value?(m(),v("button",{key:2,class:"instruction-btn secondary",onClick:ue},"  Back ")):F("",!0),!M(c).isComplete.value&&(M(c).bidAnswered.value||!M(c).hasBidPrompt.value&&!M(c).hasCardChoice.value&&M(c).currentStep.value&&M(c).currentStep.value.type!=="end")?(m(),v("button",{key:3,class:"instruction-btn primary",onClick:D[8]||(D[8]=De=>M(c).advance())},b(((is=M(c).currentStep.value)==null?void 0:is.type)==="rotate"?"Rotate":"Next")+"  ",1)):F("",!0),M(c).isComplete.value&&P.value<N.value.length-1?(m(),v("button",{key:4,class:"next-deal-btn",onClick:Se}," Next Deal  ")):F("",!0)])])):(il=R.value)!=null&&il.commentary?(m(),v("div",{key:2,class:"display-commentary",innerHTML:M(Js)(M(Nn)(M(zm)(R.value.commentary)))},null,8,oT)):F("",!0),!M(c).hasSteps.value&&M(c).isComplete.value&&P.value<N.value.length-1?(m(),v("div",aT,[l("button",{class:"next-deal-btn",onClick:Se}," Next Deal  ")])):F("",!0)])]))]),he(Xb,{visible:f.value,onClose:D[9]||(D[9]=De=>f.value=!1),onSwitchUser:J,onLogout:J,onBecomeTeacher:D[10]||(D[10]=De=>w.value=!0)},null,8,["visible"]),j.value?(m(),v("div",rT," Account created  your data is encrypted and linked to your email for recovery. ")):F("",!0),d.value?(m(),v("div",{key:1,class:"modal-overlay",onClick:D[12]||(D[12]=St(De=>d.value=!1,["self"]))},[he(vw,{onClose:D[11]||(D[11]=De=>d.value=!1)})])):F("",!0),p.value?(m(),v("div",{key:2,class:"modal-overlay",onClick:D[14]||(D[14]=St(De=>p.value=!1,["self"]))},[he(tS,{onClose:D[13]||(D[13]=De=>p.value=!1),onNavigateToDeal:L})])):F("",!0),he(HC,{visible:V.value,url:Q.value||"",onClose:D[15]||(D[15]=De=>V.value=!1)},null,8,["visible","url"]),w.value?(m(),Ue(E2,{key:3,onClose:D[16]||(D[16]=De=>w.value=!1),onActivated:W})):F("",!0),he(D2)])):(m(),Ue(vb,{key:0,onUserReady:fe}))}}},iT=()=>Tp(()=>import("./JoinClassroomView-nDUtClqb.js"),__vite__mapDeps([0,1])),cT=[{path:"/join/:joinCode",name:"join",component:iT},{path:"/:pathMatch(.*)*",name:"app",component:lT}],uT=Pm({history:pm(),routes:cT});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const Yu=_p(kp);Yu.use(uT);Yu.mount("#app");export{_e as _,l as a,he as b,v as c,F as d,Oe as e,so as f,Je as g,bo as h,nf as i,Xc as j,Lm as k,m as l,Ct as o,I as r,b as t,dT as u,Md as w};
