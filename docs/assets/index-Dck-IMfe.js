const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-GH6p2sXF.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const xe={},Ks=[],jt=()=>{},si=()=>!1,Fo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),or=e=>e.startsWith("onUpdate:"),Xe=Object.assign,ar=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},xu=Object.prototype.hasOwnProperty,$e=(e,t)=>xu.call(e,t),pe=Array.isArray,Gs=e=>qn(e)==="[object Map]",cn=e=>qn(e)==="[object Set]",Hr=e=>qn(e)==="[object Date]",he=e=>typeof e=="function",He=e=>typeof e=="string",It=e=>typeof e=="symbol",Ae=e=>e!==null&&typeof e=="object",ni=e=>(Ae(e)||he(e))&&he(e.then)&&he(e.catch),oi=Object.prototype.toString,qn=e=>oi.call(e),Au=e=>qn(e).slice(8,-1),ai=e=>qn(e)==="[object Object]",rr=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Nn=nr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jo=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Nu=/-\w/g,At=jo(e=>e.replace(Nu,t=>t.slice(1).toUpperCase())),Tu=/\B([A-Z])/g,ps=jo(e=>e.replace(Tu,"-$1").toLowerCase()),Ho=jo(e=>e.charAt(0).toUpperCase()+e.slice(1)),oa=jo(e=>e?`on${Ho(e)}`:""),cs=(e,t)=>!Object.is(e,t),po=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},ri=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Wo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Wr;const Vo=()=>Wr||(Wr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ct(e){if(pe(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=He(n)?Iu(n):ct(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(He(e)||Ae(e))return e}const Eu=/;(?![^(]*\))/g,Ou=/:([^]+)/,Ru=/\/\*[^]*?\*\//g;function Iu(e){const t={};return e.replace(Ru,"").split(Eu).forEach(s=>{if(s){const n=s.split(Ou);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ue(e){let t="";if(He(e))t=e;else if(pe(e))for(let s=0;s<e.length;s++){const n=ue(e[s]);n&&(t+=n+" ")}else if(Ae(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Pu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Du=nr(Pu);function li(e){return!!e||e===""}function Lu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Ts(e[n],t[n]);return s}function Ts(e,t){if(e===t)return!0;let s=Hr(e),n=Hr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=It(e),n=It(t),s||n)return e===t;if(s=pe(e),n=pe(t),s||n)return s&&n?Lu(e,t):!1;if(s=Ae(e),n=Ae(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const i=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(i&&!l||!i&&l||!Ts(e[r],t[r]))return!1}}return String(e)===String(t)}function lr(e,t){return e.findIndex(s=>Ts(s,t))}const ii=e=>!!(e&&e.__v_isRef===!0),$=e=>He(e)?e:e==null?"":pe(e)||Ae(e)&&(e.toString===oi||!he(e.toString))?ii(e)?$(e.value):JSON.stringify(e,ci,2):String(e),ci=(e,t)=>ii(t)?ci(e,t.value):Gs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[aa(n,a)+" =>"]=o,s),{})}:cn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>aa(s))}:It(t)?aa(t):Ae(t)&&!pe(t)&&!ai(t)?String(t):t,aa=(e,t="")=>{var s;return It(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ft;class Bu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ft,!t&&ft&&(this.index=(ft.scopes||(ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ft;try{return ft=this,t()}finally{ft=s}}}on(){++this._on===1&&(this.prevScope=ft,ft=this)}off(){this._on>0&&--this._on===0&&(ft=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Uu(){return ft}let Ne;const ra=new WeakSet;class ui{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ft&&ft.active&&ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ra.has(this)&&(ra.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vr(this),vi(this);const t=Ne,s=Ot;Ne=this,Ot=!0;try{return this.fn()}finally{pi(this),Ne=t,Ot=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ur(t);this.deps=this.depsTail=void 0,Vr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ra.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Aa(this)&&this.run()}get dirty(){return Aa(this)}}let di=0,Tn,En;function fi(e,t=!1){if(e.flags|=8,t){e.next=En,En=e;return}e.next=Tn,Tn=e}function ir(){di++}function cr(){if(--di>0)return;if(En){let t=En;for(En=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Tn;){let t=Tn;for(Tn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function vi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function pi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),ur(n),Mu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Aa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(mi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function mi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Un)||(e.globalVersion=Un,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Aa(e))))return;e.flags|=2;const t=e.dep,s=Ne,n=Ot;Ne=e,Ot=!0;try{vi(e);const o=e.fn(e._value);(t.version===0||cs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ne=s,Ot=n,pi(e),e.flags&=-3}}function ur(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)ur(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Mu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ot=!0;const hi=[];function Zt(){hi.push(Ot),Ot=!1}function es(){const e=hi.pop();Ot=e===void 0?!0:e}function Vr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Ne;Ne=void 0;try{t()}finally{Ne=s}}}let Un=0;class Fu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ne||!Ot||Ne===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ne)s=this.activeLink=new Fu(Ne,this),Ne.deps?(s.prevDep=Ne.depsTail,Ne.depsTail.nextDep=s,Ne.depsTail=s):Ne.deps=Ne.depsTail=s,gi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Ne.depsTail,s.nextDep=void 0,Ne.depsTail.nextDep=s,Ne.depsTail=s,Ne.deps===s&&(Ne.deps=n)}return s}trigger(t){this.version++,Un++,this.notify(t)}notify(t){ir();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{cr()}}}function gi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)gi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Na=new WeakMap,xs=Symbol(""),Ta=Symbol(""),Mn=Symbol("");function st(e,t,s){if(Ot&&Ne){let n=Na.get(e);n||Na.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new dr),o.map=n,o.key=s),o.track()}}function Jt(e,t,s,n,o,a){const r=Na.get(e);if(!r){Un++;return}const i=l=>{l&&l.trigger()};if(ir(),t==="clear")r.forEach(i);else{const l=pe(e),u=l&&rr(s);if(l&&s==="length"){const d=Number(n);r.forEach((f,p)=>{(p==="length"||p===Mn||!It(p)&&p>=d)&&i(f)})}else switch((s!==void 0||r.has(void 0))&&i(r.get(s)),u&&i(r.get(Mn)),t){case"add":l?u&&i(r.get("length")):(i(r.get(xs)),Gs(e)&&i(r.get(Ta)));break;case"delete":l||(i(r.get(xs)),Gs(e)&&i(r.get(Ta)));break;case"set":Gs(e)&&i(r.get(xs));break}}cr()}function Rs(e){const t=Se(e);return t===e?t:(st(t,"iterate",Mn),kt(e)?t:t.map(Pt))}function Ko(e){return st(e=Se(e),"iterate",Mn),e}function as(e,t){return ts(e)?Xs(As(e)?Pt(t):t):Pt(t)}const ju={__proto__:null,[Symbol.iterator](){return la(this,Symbol.iterator,e=>as(this,e))},concat(...e){return Rs(this).concat(...e.map(t=>pe(t)?Rs(t):t))},entries(){return la(this,"entries",e=>(e[1]=as(this,e[1]),e))},every(e,t){return Vt(this,"every",e,t,void 0,arguments)},filter(e,t){return Vt(this,"filter",e,t,s=>s.map(n=>as(this,n)),arguments)},find(e,t){return Vt(this,"find",e,t,s=>as(this,s),arguments)},findIndex(e,t){return Vt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Vt(this,"findLast",e,t,s=>as(this,s),arguments)},findLastIndex(e,t){return Vt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Vt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ia(this,"includes",e)},indexOf(...e){return ia(this,"indexOf",e)},join(e){return Rs(this).join(e)},lastIndexOf(...e){return ia(this,"lastIndexOf",e)},map(e,t){return Vt(this,"map",e,t,void 0,arguments)},pop(){return pn(this,"pop")},push(...e){return pn(this,"push",e)},reduce(e,...t){return Kr(this,"reduce",e,t)},reduceRight(e,...t){return Kr(this,"reduceRight",e,t)},shift(){return pn(this,"shift")},some(e,t){return Vt(this,"some",e,t,void 0,arguments)},splice(...e){return pn(this,"splice",e)},toReversed(){return Rs(this).toReversed()},toSorted(e){return Rs(this).toSorted(e)},toSpliced(...e){return Rs(this).toSpliced(...e)},unshift(...e){return pn(this,"unshift",e)},values(){return la(this,"values",e=>as(this,e))}};function la(e,t,s){const n=Ko(e),o=n[t]();return n!==e&&!kt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const Hu=Array.prototype;function Vt(e,t,s,n,o,a){const r=Ko(e),i=r!==e&&!kt(e),l=r[t];if(l!==Hu[t]){const f=l.apply(e,a);return i?Pt(f):f}let u=s;r!==e&&(i?u=function(f,p){return s.call(this,as(e,f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const d=l.call(r,u,n);return i&&o?o(d):d}function Kr(e,t,s,n){const o=Ko(e);let a=s;return o!==e&&(kt(e)?s.length>3&&(a=function(r,i,l){return s.call(this,r,i,l,e)}):a=function(r,i,l){return s.call(this,r,as(e,i),l,e)}),o[t](a,...n)}function ia(e,t,s){const n=Se(e);st(n,"iterate",Mn);const o=n[t](...s);return(o===-1||o===!1)&&pr(s[0])?(s[0]=Se(s[0]),n[t](...s)):o}function pn(e,t,s=[]){Zt(),ir();const n=Se(e)[t].apply(e,s);return cr(),es(),n}const Wu=nr("__proto__,__v_isRef,__isVue"),yi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(It));function Vu(e){It(e)||(e=String(e));const t=Se(this);return st(t,"has",e),t.hasOwnProperty(e)}class bi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?ed:Si:a?Ci:wi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=pe(t);if(!o){let l;if(r&&(l=ju[s]))return l;if(s==="hasOwnProperty")return Vu}const i=Reflect.get(t,s,ot(t)?t:n);if((It(s)?yi.has(s):Wu(s))||(o||st(t,"get",s),a))return i;if(ot(i)){const l=r&&rr(s)?i:i.value;return o&&Ae(l)?Oa(l):l}return Ae(i)?o?Oa(i):Ht(i):i}}class _i extends bi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=pe(t)&&rr(s);if(!this._isShallow){const u=ts(a);if(!kt(n)&&!ts(n)&&(a=Se(a),n=Se(n)),!r&&ot(a)&&!ot(n))return u||(a.value=n),!0}const i=r?Number(s)<t.length:$e(t,s),l=Reflect.set(t,s,n,ot(t)?t:o);return t===Se(o)&&(i?cs(n,a)&&Jt(t,"set",s,n):Jt(t,"add",s,n)),l}deleteProperty(t,s){const n=$e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Jt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!It(s)||!yi.has(s))&&st(t,"has",s),n}ownKeys(t){return st(t,"iterate",pe(t)?"length":xs),Reflect.ownKeys(t)}}class Ku extends bi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Gu=new _i,zu=new Ku,Ju=new _i(!0);const Ea=e=>e,ro=e=>Reflect.getPrototypeOf(e);function Yu(e,t,s){return function(...n){const o=this.__v_raw,a=Se(o),r=Gs(a),i=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,u=o[e](...n),d=s?Ea:t?Xs:Pt;return!t&&st(a,"iterate",l?Ta:xs),Xe(Object.create(u),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:i?[d(f[0]),d(f[1])]:d(f),done:p}}})}}function lo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qu(e,t){const s={get(o){const a=this.__v_raw,r=Se(a),i=Se(o);e||(cs(o,i)&&st(r,"get",o),st(r,"get",i));const{has:l}=ro(r),u=t?Ea:e?Xs:Pt;if(l.call(r,o))return u(a.get(o));if(l.call(r,i))return u(a.get(i));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&st(Se(o),"iterate",xs),o.size},has(o){const a=this.__v_raw,r=Se(a),i=Se(o);return e||(cs(o,i)&&st(r,"has",o),st(r,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const r=this,i=r.__v_raw,l=Se(i),u=t?Ea:e?Xs:Pt;return!e&&st(l,"iterate",xs),i.forEach((d,f)=>o.call(a,u(d),u(f),r))}};return Xe(s,e?{add:lo("add"),set:lo("set"),delete:lo("delete"),clear:lo("clear")}:{add(o){!t&&!kt(o)&&!ts(o)&&(o=Se(o));const a=Se(this);return ro(a).has.call(a,o)||(a.add(o),Jt(a,"add",o,o)),this},set(o,a){!t&&!kt(a)&&!ts(a)&&(a=Se(a));const r=Se(this),{has:i,get:l}=ro(r);let u=i.call(r,o);u||(o=Se(o),u=i.call(r,o));const d=l.call(r,o);return r.set(o,a),u?cs(a,d)&&Jt(r,"set",o,a):Jt(r,"add",o,a),this},delete(o){const a=Se(this),{has:r,get:i}=ro(a);let l=r.call(a,o);l||(o=Se(o),l=r.call(a,o)),i&&i.call(a,o);const u=a.delete(o);return l&&Jt(a,"delete",o,void 0),u},clear(){const o=Se(this),a=o.size!==0,r=o.clear();return a&&Jt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Yu(o,e,t)}),s}function fr(e,t){const s=qu(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get($e(s,o)&&o in n?s:n,o,a)}const Xu={get:fr(!1,!1)},Qu={get:fr(!1,!0)},Zu={get:fr(!0,!1)};const wi=new WeakMap,Ci=new WeakMap,Si=new WeakMap,ed=new WeakMap;function td(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sd(e){return e.__v_skip||!Object.isExtensible(e)?0:td(Au(e))}function Ht(e){return ts(e)?e:vr(e,!1,Gu,Xu,wi)}function $i(e){return vr(e,!1,Ju,Qu,Ci)}function Oa(e){return vr(e,!0,zu,Zu,Si)}function vr(e,t,s,n,o){if(!Ae(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=sd(e);if(a===0)return e;const r=o.get(e);if(r)return r;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function As(e){return ts(e)?As(e.__v_raw):!!(e&&e.__v_isReactive)}function ts(e){return!!(e&&e.__v_isReadonly)}function kt(e){return!!(e&&e.__v_isShallow)}function pr(e){return e?!!e.__v_raw:!1}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function nd(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&ri(e,"__v_skip",!0),e}const Pt=e=>Ae(e)?Ht(e):e,Xs=e=>Ae(e)?Oa(e):e;function ot(e){return e?e.__v_isRef===!0:!1}function T(e){return ki(e,!1)}function od(e){return ki(e,!0)}function ki(e,t){return ot(e)?e:new ad(e,t)}class ad{constructor(t,s){this.dep=new dr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Se(t),this._value=s?t:Pt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||kt(t)||ts(t);t=n?t:Se(t),cs(t,s)&&(this._rawValue=t,this._value=n?t:Pt(t),this.dep.trigger())}}function P(e){return ot(e)?e.value:e}const rd={get:(e,t,s)=>t==="__v_raw"?e:P(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ot(o)&&!ot(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function xi(e){return As(e)?e:new Proxy(e,rd)}class ld{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new dr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Un-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return fi(this,!0),!0}get value(){const t=this.dep.track();return mi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function id(e,t,s=!1){let n,o;return he(e)?n=e:(n=e.get,o=e.set),new ld(n,o,s)}const io={},_o=new WeakMap;let Ss;function cd(e,t=!1,s=Ss){if(s){let n=_o.get(s);n||_o.set(s,n=[]),n.push(e)}}function ud(e,t,s=xe){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:i,call:l}=s,u=E=>o?E:kt(E)||o===!1||o===0?Yt(E,1):Yt(E);let d,f,p,v,g=!1,b=!1;if(ot(e)?(f=()=>e.value,g=kt(e)):As(e)?(f=()=>u(e),g=!0):pe(e)?(b=!0,g=e.some(E=>As(E)||kt(E)),f=()=>e.map(E=>{if(ot(E))return E.value;if(As(E))return u(E);if(he(E))return l?l(E,2):E()})):he(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){Zt();try{p()}finally{es()}}const E=Ss;Ss=d;try{return l?l(e,3,[v]):e(v)}finally{Ss=E}}:f=jt,t&&o){const E=f,Y=o===!0?1/0:o;f=()=>Yt(E(),Y)}const A=Uu(),k=()=>{d.stop(),A&&A.active&&ar(A.effects,d)};if(a&&t){const E=t;t=(...Y)=>{E(...Y),k()}}let C=b?new Array(e.length).fill(io):io;const _=E=>{if(!(!(d.flags&1)||!d.dirty&&!E))if(t){const Y=d.run();if(o||g||(b?Y.some((Q,D)=>cs(Q,C[D])):cs(Y,C))){p&&p();const Q=Ss;Ss=d;try{const D=[Y,C===io?void 0:b&&C[0]===io?[]:C,v];C=Y,l?l(t,3,D):t(...D)}finally{Ss=Q}}}else d.run()};return i&&i(_),d=new ui(f),d.scheduler=r?()=>r(_,!1):_,v=E=>cd(E,!1,d),p=d.onStop=()=>{const E=_o.get(d);if(E){if(l)l(E,4);else for(const Y of E)Y();_o.delete(d)}},t?n?_(!0):C=d.run():r?r(_.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function Yt(e,t=1/0,s){if(t<=0||!Ae(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ot(e))Yt(e.value,t,s);else if(pe(e))for(let n=0;n<e.length;n++)Yt(e[n],t,s);else if(cn(e)||Gs(e))e.forEach(n=>{Yt(n,t,s)});else if(ai(e)){for(const n in e)Yt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Yt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Xn(e,t,s,n){try{return n?e(...n):e()}catch(o){Go(o,t,s)}}function Wt(e,t,s,n){if(he(e)){const o=Xn(e,t,s,n);return o&&ni(o)&&o.catch(a=>{Go(a,t,s)}),o}if(pe(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Wt(e[a],t,s,n));return o}}function Go(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||xe;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,l,u)===!1)return}i=i.parent}if(a){Zt(),Xn(a,null,10,[e,l,u]),es();return}}dd(e,s,o,n,r)}function dd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const ut=[];let Mt=-1;const zs=[];let rs=null,Bs=0;const Ai=Promise.resolve();let wo=null;function Fn(e){const t=wo||Ai;return e?t.then(this?e.bind(this):e):t}function fd(e){let t=Mt+1,s=ut.length;for(;t<s;){const n=t+s>>>1,o=ut[n],a=jn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function mr(e){if(!(e.flags&1)){const t=jn(e),s=ut[ut.length-1];!s||!(e.flags&2)&&t>=jn(s)?ut.push(e):ut.splice(fd(t),0,e),e.flags|=1,Ni()}}function Ni(){wo||(wo=Ai.then(Ei))}function vd(e){pe(e)?zs.push(...e):rs&&e.id===-1?rs.splice(Bs+1,0,e):e.flags&1||(zs.push(e),e.flags|=1),Ni()}function Gr(e,t,s=Mt+1){for(;s<ut.length;s++){const n=ut[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ut.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ti(e){if(zs.length){const t=[...new Set(zs)].sort((s,n)=>jn(s)-jn(n));if(zs.length=0,rs){rs.push(...t);return}for(rs=t,Bs=0;Bs<rs.length;Bs++){const s=rs[Bs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}rs=null,Bs=0}}const jn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ei(e){try{for(Mt=0;Mt<ut.length;Mt++){const t=ut[Mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Xn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mt<ut.length;Mt++){const t=ut[Mt];t&&(t.flags&=-2)}Mt=-1,ut.length=0,Ti(),wo=null,(ut.length||zs.length)&&Ei()}}let Ye=null,Oi=null;function Co(e){const t=Ye;return Ye=e,Oi=e&&e.type.__scopeId||null,t}function pd(e,t=Ye,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&ko(-1);const a=Co(t);let r;try{r=e(...o)}finally{Co(a),n._d&&ko(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Re(e,t){if(Ye===null)return e;const s=qo(Ye),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,i,l=xe]=t[o];a&&(he(a)&&(a={mounted:a,updated:a}),a.deep&&Yt(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:i,modifiers:l}))}return e}function hs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const i=o[r];a&&(i.oldValue=a[r].value);let l=i.dir[n];l&&(Zt(),Wt(l,s,8,[e.el,i,e,t]),es())}}function mo(e,t){if(nt){let s=nt.provides;const n=nt.parent&&nt.parent.provides;n===s&&(s=nt.provides=Object.create(n)),s[e]=t}}function Rt(e,t,s=!1){const n=hf();if(n||Ys){let o=Ys?Ys._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&he(t)?t.call(n&&n.proxy):t}}const md=Symbol.for("v-scx"),hd=()=>Rt(md);function vt(e,t,s){return Ri(e,t,s)}function Ri(e,t,s=xe){const{immediate:n,deep:o,flush:a,once:r}=s,i=Xe({},s),l=t&&n||!t&&a!=="post";let u;if(Vn){if(a==="sync"){const v=hd();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=jt,v.resume=jt,v.pause=jt,v}}const d=nt;i.call=(v,g,b)=>Wt(v,d,g,b);let f=!1;a==="post"?i.scheduler=v=>{ht(v,d&&d.suspense)}:a!=="sync"&&(f=!0,i.scheduler=(v,g)=>{g?v():mr(v)}),i.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const p=ud(e,t,i);return Vn&&(u?u.push(p):l&&p()),p}function gd(e,t,s){const n=this.proxy,o=He(e)?e.includes(".")?Ii(n,e):()=>n[e]:e.bind(n,n);let a;he(t)?a=t:(a=t.handler,s=t);const r=Qn(this),i=Ri(o,a.bind(n),s);return r(),i}function Ii(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const yd=Symbol("_vte"),bd=e=>e.__isTeleport,_d=Symbol("_leaveCb");function hr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Pi(e,t){return he(e)?Xe({name:e.name},t,{setup:e}):e}function Di(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const So=new WeakMap;function On(e,t,s,n,o=!1){if(pe(e)){e.forEach((g,b)=>On(g,t&&(pe(t)?t[b]:t),s,n,o));return}if(Js(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&On(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?qo(n.component):n.el,r=o?null:a,{i,r:l}=e,u=t&&t.r,d=i.refs===xe?i.refs={}:i.refs,f=i.setupState,p=Se(f),v=f===xe?si:g=>$e(p,g);if(u!=null&&u!==l){if(zr(t),He(u))d[u]=null,v(u)&&(f[u]=null);else if(ot(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(he(l))Xn(l,i,12,[r,d]);else{const g=He(l),b=ot(l);if(g||b){const A=()=>{if(e.f){const k=g?v(l)?f[l]:d[l]:l.value;if(o)pe(k)&&ar(k,a);else if(pe(k))k.includes(a)||k.push(a);else if(g)d[l]=[a],v(l)&&(f[l]=d[l]);else{const C=[a];l.value=C,e.k&&(d[e.k]=C)}}else g?(d[l]=r,v(l)&&(f[l]=r)):b&&(l.value=r,e.k&&(d[e.k]=r))};if(r){const k=()=>{A(),So.delete(e)};k.id=-1,So.set(e,k),ht(k,s)}else zr(e),A()}}}function zr(e){const t=So.get(e);t&&(t.flags|=8,So.delete(e))}Vo().requestIdleCallback;Vo().cancelIdleCallback;const Js=e=>!!e.type.__asyncLoader,Li=e=>e.type.__isKeepAlive;function wd(e,t){Bi(e,"a",t)}function Cd(e,t){Bi(e,"da",t)}function Bi(e,t,s=nt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(zo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Li(o.parent.vnode)&&Sd(n,t,s,o),o=o.parent}}function Sd(e,t,s,n){const o=zo(t,e,n,!0);gr(()=>{ar(n[t],o)},s)}function zo(e,t,s=nt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{Zt();const i=Qn(s),l=Wt(t,s,e,r);return i(),es(),l});return n?o.unshift(a):o.push(a),a}}const ns=e=>(t,s=nt)=>{(!Vn||e==="sp")&&zo(e,(...n)=>t(...n),s)},$d=ns("bm"),_t=ns("m"),kd=ns("bu"),xd=ns("u"),Ui=ns("bum"),gr=ns("um"),Ad=ns("sp"),Nd=ns("rtg"),Td=ns("rtc");function Ed(e,t=nt){zo("ec",e,t)}const Od="components";function Rd(e,t){return Pd(Od,e,!0,t)||e}const Id=Symbol.for("v-ndc");function Pd(e,t,s=!0,n=!1){const o=Ye||nt;if(o){const a=o.type;{const i=wf(a,!1);if(i&&(i===t||i===At(t)||i===Ho(At(t))))return a}const r=Jr(o[e]||a[e],t)||Jr(o.appContext[e],t);return!r&&n?a:r}}function Jr(e,t){return e&&(e[t]||e[At(t)]||e[Ho(At(t))])}function le(e,t,s,n){let o;const a=s,r=pe(e);if(r||He(e)){const i=r&&As(e);let l=!1,u=!1;i&&(l=!kt(e),u=ts(e),e=Ko(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(l?u?Xs(Pt(e[d])):Pt(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(Ae(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const d=i[l];o[l]=t(e[d],d,l,a)}}else o=[];return o}function Dd(e,t,s={},n,o){if(Ye.ce||Ye.parent&&Js(Ye.parent)&&Ye.parent.ce){const u=Object.keys(s).length>0;return s.name=t,m(),Be(Z,null,[me("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),m();const r=a&&Mi(a(s)),i=s.key||r&&r.key,l=Be(Z,{key:(i&&!It(i)?i:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),l}function Mi(e){return e.some(t=>Wn(t)?!(t.type===ss||t.type===Z&&!Mi(t.children)):!0)?e:null}const Ra=e=>e?oc(e)?qo(e):Ra(e.parent):null,Rn=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ra(e.parent),$root:e=>Ra(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ji(e),$forceUpdate:e=>e.f||(e.f=()=>{mr(e.update)}),$nextTick:e=>e.n||(e.n=Fn.bind(e.proxy)),$watch:e=>gd.bind(e)}),ca=(e,t)=>e!==xe&&!e.__isScriptSetup&&$e(e,t),Ld={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:i,appContext:l}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ca(n,t))return r[t]=1,n[t];if(o!==xe&&$e(o,t))return r[t]=2,o[t];if($e(a,t))return r[t]=3,a[t];if(s!==xe&&$e(s,t))return r[t]=4,s[t];Ia&&(r[t]=0)}}const u=Rn[t];let d,f;if(u)return t==="$attrs"&&st(e.attrs,"get",""),u(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(s!==xe&&$e(s,t))return r[t]=4,s[t];if(f=l.config.globalProperties,$e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ca(o,t)?(o[t]=s,!0):n!==xe&&$e(n,t)?(n[t]=s,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},i){let l;return!!(s[i]||e!==xe&&i[0]!=="$"&&$e(e,i)||ca(t,i)||$e(a,i)||$e(n,i)||$e(Rn,i)||$e(o.config.globalProperties,i)||(l=r.__cssModules)&&l[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:$e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Yr(e){return pe(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ia=!0;function Bd(e){const t=ji(e),s=e.proxy,n=e.ctx;Ia=!1,t.beforeCreate&&qr(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:i,provide:l,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:v,updated:g,activated:b,deactivated:A,beforeDestroy:k,beforeUnmount:C,destroyed:_,unmounted:E,render:Y,renderTracked:Q,renderTriggered:D,errorCaptured:J,serverPrefetch:z,expose:de,inheritAttrs:ve,components:ce,directives:be,filters:we}=t;if(u&&Ud(u,n,null),r)for(const q in r){const L=r[q];he(L)&&(n[q]=L.bind(s))}if(o){const q=o.call(s,s);Ae(q)&&(e.data=Ht(q))}if(Ia=!0,a)for(const q in a){const L=a[q],W=he(L)?L.bind(s,s):he(L.get)?L.get.bind(s,s):jt,G=!he(L)&&he(L.set)?L.set.bind(s):jt,V=N({get:W,set:G});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>V.value,set:ae=>V.value=ae})}if(i)for(const q in i)Fi(i[q],n,s,q);if(l){const q=he(l)?l.call(s):l;Reflect.ownKeys(q).forEach(L=>{mo(L,q[L])})}d&&qr(d,e,"c");function re(q,L){pe(L)?L.forEach(W=>q(W.bind(s))):L&&q(L.bind(s))}if(re($d,f),re(_t,p),re(kd,v),re(xd,g),re(wd,b),re(Cd,A),re(Ed,J),re(Td,Q),re(Nd,D),re(Ui,C),re(gr,E),re(Ad,z),pe(de))if(de.length){const q=e.exposed||(e.exposed={});de.forEach(L=>{Object.defineProperty(q,L,{get:()=>s[L],set:W=>s[L]=W,enumerable:!0})})}else e.exposed||(e.exposed={});Y&&e.render===jt&&(e.render=Y),ve!=null&&(e.inheritAttrs=ve),ce&&(e.components=ce),be&&(e.directives=be),z&&Di(e)}function Ud(e,t,s=jt){pe(e)&&(e=Pa(e));for(const n in e){const o=e[n];let a;Ae(o)?"default"in o?a=Rt(o.from||n,o.default,!0):a=Rt(o.from||n):a=Rt(o),ot(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function qr(e,t,s){Wt(pe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Fi(e,t,s,n){let o=n.includes(".")?Ii(s,n):()=>s[n];if(He(e)){const a=t[e];he(a)&&vt(o,a)}else if(he(e))vt(o,e.bind(s));else if(Ae(e))if(pe(e))e.forEach(a=>Fi(a,t,s,n));else{const a=he(e.handler)?e.handler.bind(s):t[e.handler];he(a)&&vt(o,a,e)}}function ji(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,i=a.get(t);let l;return i?l=i:!o.length&&!s&&!n?l=t:(l={},o.length&&o.forEach(u=>$o(l,u,r,!0)),$o(l,t,r)),Ae(t)&&a.set(t,l),l}function $o(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&$o(e,a,s,!0),o&&o.forEach(r=>$o(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const i=Md[r]||s&&s[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Md={data:Xr,props:Qr,emits:Qr,methods:$n,computed:$n,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:$n,directives:$n,watch:jd,provide:Xr,inject:Fd};function Xr(e,t){return t?e?function(){return Xe(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function Fd(e,t){return $n(Pa(e),Pa(t))}function Pa(e){if(pe(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function lt(e,t){return e?[...new Set([].concat(e,t))]:t}function $n(e,t){return e?Xe(Object.create(null),e,t):t}function Qr(e,t){return e?pe(e)&&pe(t)?[...new Set([...e,...t])]:Xe(Object.create(null),Yr(e),Yr(t??{})):t}function jd(e,t){if(!e)return t;if(!t)return e;const s=Xe(Object.create(null),e);for(const n in t)s[n]=lt(e[n],t[n]);return s}function Hi(){return{app:null,config:{isNativeTag:si,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hd=0;function Wd(e,t){return function(n,o=null){he(n)||(n=Xe({},n)),o!=null&&!Ae(o)&&(o=null);const a=Hi(),r=new WeakSet,i=[];let l=!1;const u=a.app={_uid:Hd++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Sf,get config(){return a.config},set config(d){},use(d,...f){return r.has(d)||(d&&he(d.install)?(r.add(d),d.install(u,...f)):he(d)&&(r.add(d),d(u,...f))),u},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),u},component(d,f){return f?(a.components[d]=f,u):a.components[d]},directive(d,f){return f?(a.directives[d]=f,u):a.directives[d]},mount(d,f,p){if(!l){const v=u._ceVNode||me(n,o);return v.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(v,d,p),l=!0,u._container=d,d.__vue_app__=u,qo(v.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Wt(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return a.provides[d]=f,u},runWithContext(d){const f=Ys;Ys=u;try{return d()}finally{Ys=f}}};return u}}let Ys=null;const Vd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${At(t)}Modifiers`]||e[`${ps(t)}Modifiers`];function Kd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||xe;let o=s;const a=t.startsWith("update:"),r=a&&Vd(n,t.slice(7));r&&(r.trim&&(o=s.map(d=>He(d)?d.trim():d)),r.number&&(o=s.map(Wo)));let i,l=n[i=oa(t)]||n[i=oa(At(t))];!l&&a&&(l=n[i=oa(ps(t))]),l&&Wt(l,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Wt(u,e,6,o)}}const Gd=new WeakMap;function Wi(e,t,s=!1){const n=s?Gd:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},i=!1;if(!he(e)){const l=u=>{const d=Wi(u,t,!0);d&&(i=!0,Xe(r,d))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!i?(Ae(e)&&n.set(e,null),null):(pe(a)?a.forEach(l=>r[l]=null):Xe(r,a),Ae(e)&&n.set(e,r),r)}function Jo(e,t){return!e||!Fo(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,ps(t))||$e(e,t))}function Zr(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:i,emit:l,render:u,renderCache:d,props:f,data:p,setupState:v,ctx:g,inheritAttrs:b}=e,A=Co(e);let k,C;try{if(s.shapeFlag&4){const E=o||n,Y=E;k=Ft(u.call(Y,E,d,f,v,p,g)),C=i}else{const E=t;k=Ft(E.length>1?E(f,{attrs:i,slots:r,emit:l}):E(f,null)),C=t.props?i:zd(i)}}catch(E){In.length=0,Go(E,e,1),k=me(ss)}let _=k;if(C&&b!==!1){const E=Object.keys(C),{shapeFlag:Y}=_;E.length&&Y&7&&(a&&E.some(or)&&(C=Jd(C,a)),_=Qs(_,C,!1,!0))}return s.dirs&&(_=Qs(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(s.dirs):s.dirs),s.transition&&hr(_,s.transition),k=_,Co(A),k}const zd=e=>{let t;for(const s in e)(s==="class"||s==="style"||Fo(s))&&((t||(t={}))[s]=e[s]);return t},Jd=(e,t)=>{const s={};for(const n in e)(!or(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Yd(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:i,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?el(n,r,u):!!r;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(r[p]!==n[p]&&!Jo(u,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===r?!1:n?r?el(n,r,u):!0:!!r;return!1}function el(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!Jo(s,a))return!0}return!1}function qd({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Vi={},Ki=()=>Object.create(Vi),Gi=e=>Object.getPrototypeOf(e)===Vi;function Xd(e,t,s,n=!1){const o={},a=Ki();e.propsDefaults=Object.create(null),zi(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:$i(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Qd(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,i=Se(o),[l]=e.propsOptions;let u=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Jo(e.emitsOptions,p))continue;const v=t[p];if(l)if($e(a,p))v!==a[p]&&(a[p]=v,u=!0);else{const g=At(p);o[g]=Da(l,i,g,v,e,!1)}else v!==a[p]&&(a[p]=v,u=!0)}}}else{zi(e,t,o,a)&&(u=!0);let d;for(const f in i)(!t||!$e(t,f)&&((d=ps(f))===f||!$e(t,d)))&&(l?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Da(l,i,f,void 0,e,!0)):delete o[f]);if(a!==i)for(const f in a)(!t||!$e(t,f))&&(delete a[f],u=!0)}u&&Jt(e.attrs,"set","")}function zi(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,i;if(t)for(let l in t){if(Nn(l))continue;const u=t[l];let d;o&&$e(o,d=At(l))?!a||!a.includes(d)?s[d]=u:(i||(i={}))[d]=u:Jo(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,r=!0)}if(a){const l=Se(s),u=i||xe;for(let d=0;d<a.length;d++){const f=a[d];s[f]=Da(o,l,f,u[f],e,!$e(u,f))}}return r}function Da(e,t,s,n,o,a){const r=e[s];if(r!=null){const i=$e(r,"default");if(i&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&he(l)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=Qn(o);n=u[s]=l.call(null,t),d()}}else n=l;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!i?n=!1:r[1]&&(n===""||n===ps(s))&&(n=!0))}return n}const Zd=new WeakMap;function Ji(e,t,s=!1){const n=s?Zd:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},i=[];let l=!1;if(!he(e)){const d=f=>{l=!0;const[p,v]=Ji(f,t,!0);Xe(r,p),v&&i.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!l)return Ae(e)&&n.set(e,Ks),Ks;if(pe(a))for(let d=0;d<a.length;d++){const f=At(a[d]);tl(f)&&(r[f]=xe)}else if(a)for(const d in a){const f=At(d);if(tl(f)){const p=a[d],v=r[f]=pe(p)||he(p)?{type:p}:Xe({},p),g=v.type;let b=!1,A=!0;if(pe(g))for(let k=0;k<g.length;++k){const C=g[k],_=he(C)&&C.name;if(_==="Boolean"){b=!0;break}else _==="String"&&(A=!1)}else b=he(g)&&g.name==="Boolean";v[0]=b,v[1]=A,(b||$e(v,"default"))&&i.push(f)}}const u=[r,i];return Ae(e)&&n.set(e,u),u}function tl(e){return e[0]!=="$"&&!Nn(e)}const yr=e=>e==="_"||e==="_ctx"||e==="$stable",br=e=>pe(e)?e.map(Ft):[Ft(e)],ef=(e,t,s)=>{if(t._n)return t;const n=pd((...o)=>br(t(...o)),s);return n._c=!1,n},Yi=(e,t,s)=>{const n=e._ctx;for(const o in e){if(yr(o))continue;const a=e[o];if(he(a))t[o]=ef(o,a,n);else if(a!=null){const r=br(a);t[o]=()=>r}}},qi=(e,t)=>{const s=br(t);e.slots.default=()=>s},Xi=(e,t,s)=>{for(const n in t)(s||!yr(n))&&(e[n]=t[n])},tf=(e,t,s)=>{const n=e.slots=Ki();if(e.vnode.shapeFlag&32){const o=t._;o?(Xi(n,t,s),s&&ri(n,"_",o,!0)):Yi(t,n)}else t&&qi(e,t)},sf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=xe;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:Xi(o,t,s):(a=!t.$stable,Yi(t,o)),r=t}else t&&(qi(e,t),r={default:1});if(a)for(const i in o)!yr(i)&&r[i]==null&&delete o[i]},ht=lf;function nf(e){return of(e)}function of(e,t){const s=Vo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:i,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:v=jt,insertStaticContent:g}=e,b=(S,x,O,M=null,H=null,F=null,ee=void 0,X=null,y=!!x.dynamicChildren)=>{if(S===x)return;S&&!mn(S,x)&&(M=j(S),ae(S,H,F,!0),S=null),x.patchFlag===-2&&(y=!1,x.dynamicChildren=null);const{type:w,ref:R,shapeFlag:I}=x;switch(w){case Yo:A(S,x,O,M);break;case ss:k(S,x,O,M);break;case ho:S==null&&C(x,O,M,ee);break;case Z:ce(S,x,O,M,H,F,ee,X,y);break;default:I&1?Y(S,x,O,M,H,F,ee,X,y):I&6?be(S,x,O,M,H,F,ee,X,y):(I&64||I&128)&&w.process(S,x,O,M,H,F,ee,X,y,ie)}R!=null&&H?On(R,S&&S.ref,F,x||S,!x):R==null&&S&&S.ref!=null&&On(S.ref,null,F,S,!0)},A=(S,x,O,M)=>{if(S==null)n(x.el=i(x.children),O,M);else{const H=x.el=S.el;x.children!==S.children&&u(H,x.children)}},k=(S,x,O,M)=>{S==null?n(x.el=l(x.children||""),O,M):x.el=S.el},C=(S,x,O,M)=>{[S.el,S.anchor]=g(S.children,x,O,M,S.el,S.anchor)},_=({el:S,anchor:x},O,M)=>{let H;for(;S&&S!==x;)H=p(S),n(S,O,M),S=H;n(x,O,M)},E=({el:S,anchor:x})=>{let O;for(;S&&S!==x;)O=p(S),o(S),S=O;o(x)},Y=(S,x,O,M,H,F,ee,X,y)=>{if(x.type==="svg"?ee="svg":x.type==="math"&&(ee="mathml"),S==null)Q(x,O,M,H,F,ee,X,y);else{const w=S.el&&S.el._isVueCE?S.el:null;try{w&&w._beginPatch(),z(S,x,H,F,ee,X,y)}finally{w&&w._endPatch()}}},Q=(S,x,O,M,H,F,ee,X)=>{let y,w;const{props:R,shapeFlag:I,transition:U,dirs:K}=S;if(y=S.el=r(S.type,F,R&&R.is,R),I&8?d(y,S.children):I&16&&J(S.children,y,null,M,H,ua(S,F),ee,X),K&&hs(S,null,M,"created"),D(y,S,S.scopeId,ee,M),R){for(const fe in R)fe!=="value"&&!Nn(fe)&&a(y,fe,null,R[fe],F,M);"value"in R&&a(y,"value",null,R.value,F),(w=R.onVnodeBeforeMount)&&Bt(w,M,S)}K&&hs(S,null,M,"beforeMount");const se=af(H,U);se&&U.beforeEnter(y),n(y,x,O),((w=R&&R.onVnodeMounted)||se||K)&&ht(()=>{w&&Bt(w,M,S),se&&U.enter(y),K&&hs(S,null,M,"mounted")},H)},D=(S,x,O,M,H)=>{if(O&&v(S,O),M)for(let F=0;F<M.length;F++)v(S,M[F]);if(H){let F=H.subTree;if(x===F||tc(F.type)&&(F.ssContent===x||F.ssFallback===x)){const ee=H.vnode;D(S,ee,ee.scopeId,ee.slotScopeIds,H.parent)}}},J=(S,x,O,M,H,F,ee,X,y=0)=>{for(let w=y;w<S.length;w++){const R=S[w]=X?ls(S[w]):Ft(S[w]);b(null,R,x,O,M,H,F,ee,X)}},z=(S,x,O,M,H,F,ee)=>{const X=x.el=S.el;let{patchFlag:y,dynamicChildren:w,dirs:R}=x;y|=S.patchFlag&16;const I=S.props||xe,U=x.props||xe;let K;if(O&&gs(O,!1),(K=U.onVnodeBeforeUpdate)&&Bt(K,O,x,S),R&&hs(x,S,O,"beforeUpdate"),O&&gs(O,!0),(I.innerHTML&&U.innerHTML==null||I.textContent&&U.textContent==null)&&d(X,""),w?de(S.dynamicChildren,w,X,O,M,ua(x,H),F):ee||L(S,x,X,null,O,M,ua(x,H),F,!1),y>0){if(y&16)ve(X,I,U,O,H);else if(y&2&&I.class!==U.class&&a(X,"class",null,U.class,H),y&4&&a(X,"style",I.style,U.style,H),y&8){const se=x.dynamicProps;for(let fe=0;fe<se.length;fe++){const ge=se[fe],Ie=I[ge],Ee=U[ge];(Ee!==Ie||ge==="value")&&a(X,ge,Ie,Ee,H,O)}}y&1&&S.children!==x.children&&d(X,x.children)}else!ee&&w==null&&ve(X,I,U,O,H);((K=U.onVnodeUpdated)||R)&&ht(()=>{K&&Bt(K,O,x,S),R&&hs(x,S,O,"updated")},M)},de=(S,x,O,M,H,F,ee)=>{for(let X=0;X<x.length;X++){const y=S[X],w=x[X],R=y.el&&(y.type===Z||!mn(y,w)||y.shapeFlag&198)?f(y.el):O;b(y,w,R,null,M,H,F,ee,!0)}},ve=(S,x,O,M,H)=>{if(x!==O){if(x!==xe)for(const F in x)!Nn(F)&&!(F in O)&&a(S,F,x[F],null,H,M);for(const F in O){if(Nn(F))continue;const ee=O[F],X=x[F];ee!==X&&F!=="value"&&a(S,F,X,ee,H,M)}"value"in O&&a(S,"value",x.value,O.value,H)}},ce=(S,x,O,M,H,F,ee,X,y)=>{const w=x.el=S?S.el:i(""),R=x.anchor=S?S.anchor:i("");let{patchFlag:I,dynamicChildren:U,slotScopeIds:K}=x;K&&(X=X?X.concat(K):K),S==null?(n(w,O,M),n(R,O,M),J(x.children||[],O,R,H,F,ee,X,y)):I>0&&I&64&&U&&S.dynamicChildren&&S.dynamicChildren.length===U.length?(de(S.dynamicChildren,U,O,H,F,ee,X),(x.key!=null||H&&x===H.subTree)&&Qi(S,x,!0)):L(S,x,O,R,H,F,ee,X,y)},be=(S,x,O,M,H,F,ee,X,y)=>{x.slotScopeIds=X,S==null?x.shapeFlag&512?H.ctx.activate(x,O,M,ee,y):we(x,O,M,H,F,ee,y):ne(S,x,y)},we=(S,x,O,M,H,F,ee)=>{const X=S.component=mf(S,M,H);if(Li(S)&&(X.ctx.renderer=ie),gf(X,!1,ee),X.asyncDep){if(H&&H.registerDep(X,re,ee),!S.el){const y=X.subTree=me(ss);k(null,y,x,O),S.placeholder=y.el}}else re(X,S,x,O,H,F,ee)},ne=(S,x,O)=>{const M=x.component=S.component;if(Yd(S,x,O))if(M.asyncDep&&!M.asyncResolved){q(M,x,O);return}else M.next=x,M.update();else x.el=S.el,M.vnode=x},re=(S,x,O,M,H,F,ee)=>{const X=()=>{if(S.isMounted){let{next:I,bu:U,u:K,parent:se,vnode:fe}=S;{const et=Zi(S);if(et){I&&(I.el=fe.el,q(S,I,ee)),et.asyncDep.then(()=>{S.isUnmounted||X()});return}}let ge=I,Ie;gs(S,!1),I?(I.el=fe.el,q(S,I,ee)):I=fe,U&&po(U),(Ie=I.props&&I.props.onVnodeBeforeUpdate)&&Bt(Ie,se,I,fe),gs(S,!0);const Ee=Zr(S),at=S.subTree;S.subTree=Ee,b(at,Ee,f(at.el),j(at),S,H,F),I.el=Ee.el,ge===null&&qd(S,Ee.el),K&&ht(K,H),(Ie=I.props&&I.props.onVnodeUpdated)&&ht(()=>Bt(Ie,se,I,fe),H)}else{let I;const{el:U,props:K}=x,{bm:se,m:fe,parent:ge,root:Ie,type:Ee}=S,at=Js(x);gs(S,!1),se&&po(se),!at&&(I=K&&K.onVnodeBeforeMount)&&Bt(I,ge,x),gs(S,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Ee);const et=S.subTree=Zr(S);b(null,et,O,M,S,H,F),x.el=et.el}if(fe&&ht(fe,H),!at&&(I=K&&K.onVnodeMounted)){const et=x;ht(()=>Bt(I,ge,et),H)}(x.shapeFlag&256||ge&&Js(ge.vnode)&&ge.vnode.shapeFlag&256)&&S.a&&ht(S.a,H),S.isMounted=!0,x=O=M=null}};S.scope.on();const y=S.effect=new ui(X);S.scope.off();const w=S.update=y.run.bind(y),R=S.job=y.runIfDirty.bind(y);R.i=S,R.id=S.uid,y.scheduler=()=>mr(R),gs(S,!0),w()},q=(S,x,O)=>{x.component=S;const M=S.vnode.props;S.vnode=x,S.next=null,Qd(S,x.props,M,O),sf(S,x.children,O),Zt(),Gr(S),es()},L=(S,x,O,M,H,F,ee,X,y=!1)=>{const w=S&&S.children,R=S?S.shapeFlag:0,I=x.children,{patchFlag:U,shapeFlag:K}=x;if(U>0){if(U&128){G(w,I,O,M,H,F,ee,X,y);return}else if(U&256){W(w,I,O,M,H,F,ee,X,y);return}}K&8?(R&16&&Ze(w,H,F),I!==w&&d(O,I)):R&16?K&16?G(w,I,O,M,H,F,ee,X,y):Ze(w,H,F,!0):(R&8&&d(O,""),K&16&&J(I,O,M,H,F,ee,X,y))},W=(S,x,O,M,H,F,ee,X,y)=>{S=S||Ks,x=x||Ks;const w=S.length,R=x.length,I=Math.min(w,R);let U;for(U=0;U<I;U++){const K=x[U]=y?ls(x[U]):Ft(x[U]);b(S[U],K,O,null,H,F,ee,X,y)}w>R?Ze(S,H,F,!0,!1,I):J(x,O,M,H,F,ee,X,y,I)},G=(S,x,O,M,H,F,ee,X,y)=>{let w=0;const R=x.length;let I=S.length-1,U=R-1;for(;w<=I&&w<=U;){const K=S[w],se=x[w]=y?ls(x[w]):Ft(x[w]);if(mn(K,se))b(K,se,O,null,H,F,ee,X,y);else break;w++}for(;w<=I&&w<=U;){const K=S[I],se=x[U]=y?ls(x[U]):Ft(x[U]);if(mn(K,se))b(K,se,O,null,H,F,ee,X,y);else break;I--,U--}if(w>I){if(w<=U){const K=U+1,se=K<R?x[K].el:M;for(;w<=U;)b(null,x[w]=y?ls(x[w]):Ft(x[w]),O,se,H,F,ee,X,y),w++}}else if(w>U)for(;w<=I;)ae(S[w],H,F,!0),w++;else{const K=w,se=w,fe=new Map;for(w=se;w<=U;w++){const Me=x[w]=y?ls(x[w]):Ft(x[w]);Me.key!=null&&fe.set(Me.key,w)}let ge,Ie=0;const Ee=U-se+1;let at=!1,et=0;const rt=new Array(Ee);for(w=0;w<Ee;w++)rt[w]=0;for(w=K;w<=I;w++){const Me=S[w];if(Ie>=Ee){ae(Me,H,F,!0);continue}let Ve;if(Me.key!=null)Ve=fe.get(Me.key);else for(ge=se;ge<=U;ge++)if(rt[ge-se]===0&&mn(Me,x[ge])){Ve=ge;break}Ve===void 0?ae(Me,H,F,!0):(rt[Ve-se]=w+1,Ve>=et?et=Ve:at=!0,b(Me,x[Ve],O,null,H,F,ee,X,y),Ie++)}const Et=at?rf(rt):Ks;for(ge=Et.length-1,w=Ee-1;w>=0;w--){const Me=se+w,Ve=x[Me],fn=x[Me+1],ke=Me+1<R?fn.el||ec(fn):M;rt[w]===0?b(null,Ve,O,ke,H,F,ee,X,y):at&&(ge<0||w!==Et[ge]?V(Ve,O,ke,2):ge--)}}},V=(S,x,O,M,H=null)=>{const{el:F,type:ee,transition:X,children:y,shapeFlag:w}=S;if(w&6){V(S.component.subTree,x,O,M);return}if(w&128){S.suspense.move(x,O,M);return}if(w&64){ee.move(S,x,O,ie);return}if(ee===Z){n(F,x,O);for(let I=0;I<y.length;I++)V(y[I],x,O,M);n(S.anchor,x,O);return}if(ee===ho){_(S,x,O);return}if(M!==2&&w&1&&X)if(M===0)X.beforeEnter(F),n(F,x,O),ht(()=>X.enter(F),H);else{const{leave:I,delayLeave:U,afterLeave:K}=X,se=()=>{S.ctx.isUnmounted?o(F):n(F,x,O)},fe=()=>{F._isLeaving&&F[_d](!0),I(F,()=>{se(),K&&K()})};U?U(F,se,fe):fe()}else n(F,x,O)},ae=(S,x,O,M=!1,H=!1)=>{const{type:F,props:ee,ref:X,children:y,dynamicChildren:w,shapeFlag:R,patchFlag:I,dirs:U,cacheIndex:K}=S;if(I===-2&&(H=!1),X!=null&&(Zt(),On(X,null,O,S,!0),es()),K!=null&&(x.renderCache[K]=void 0),R&256){x.ctx.deactivate(S);return}const se=R&1&&U,fe=!Js(S);let ge;if(fe&&(ge=ee&&ee.onVnodeBeforeUnmount)&&Bt(ge,x,S),R&6)wt(S.component,O,M);else{if(R&128){S.suspense.unmount(O,M);return}se&&hs(S,null,x,"beforeUnmount"),R&64?S.type.remove(S,x,O,ie,M):w&&!w.hasOnce&&(F!==Z||I>0&&I&64)?Ze(w,x,O,!1,!0):(F===Z&&I&384||!H&&R&16)&&Ze(y,x,O),M&&Pe(S)}(fe&&(ge=ee&&ee.onVnodeUnmounted)||se)&&ht(()=>{ge&&Bt(ge,x,S),se&&hs(S,null,x,"unmounted")},O)},Pe=S=>{const{type:x,el:O,anchor:M,transition:H}=S;if(x===Z){We(O,M);return}if(x===ho){E(S);return}const F=()=>{o(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(S.shapeFlag&1&&H&&!H.persisted){const{leave:ee,delayLeave:X}=H,y=()=>ee(O,F);X?X(S.el,F,y):y()}else F()},We=(S,x)=>{let O;for(;S!==x;)O=p(S),o(S),S=O;o(x)},wt=(S,x,O)=>{const{bum:M,scope:H,job:F,subTree:ee,um:X,m:y,a:w}=S;sl(y),sl(w),M&&po(M),H.stop(),F&&(F.flags|=8,ae(ee,S,x,O)),X&&ht(X,x),ht(()=>{S.isUnmounted=!0},x)},Ze=(S,x,O,M=!1,H=!1,F=0)=>{for(let ee=F;ee<S.length;ee++)ae(S[ee],x,O,M,H)},j=S=>{if(S.shapeFlag&6)return j(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const x=p(S.anchor||S.el),O=x&&x[yd];return O?p(O):x};let oe=!1;const te=(S,x,O)=>{let M;S==null?x._vnode&&(ae(x._vnode,null,null,!0),M=x._vnode.component):b(x._vnode||null,S,x,null,null,null,O),x._vnode=S,oe||(oe=!0,Gr(M),Ti(),oe=!1)},ie={p:b,um:ae,m:V,r:Pe,mt:we,mc:J,pc:L,pbc:de,n:j,o:e};return{render:te,hydrate:void 0,createApp:Wd(te)}}function ua({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function gs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function af(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qi(e,t,s=!1){const n=e.children,o=t.children;if(pe(n)&&pe(o))for(let a=0;a<n.length;a++){const r=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=ls(o[a]),i.el=r.el),!s&&i.patchFlag!==-2&&Qi(r,i)),i.type===Yo&&(i.patchFlag!==-1?i.el=r.el:i.__elIndex=a+(e.type===Z?1:0)),i.type===ss&&!i.el&&(i.el=r.el)}}function rf(e){const t=e.slice(),s=[0];let n,o,a,r,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)i=a+r>>1,e[s[i]]<u?a=i+1:r=i;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function Zi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Zi(t)}function sl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ec(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ec(t.subTree):null}const tc=e=>e.__isSuspense;function lf(e,t){t&&t.pendingBranch?pe(e)?t.effects.push(...e):t.effects.push(e):vd(e)}const Z=Symbol.for("v-fgt"),Yo=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),ho=Symbol.for("v-stc"),In=[];let bt=null;function m(e=!1){In.push(bt=e?null:[])}function cf(){In.pop(),bt=In[In.length-1]||null}let Hn=1;function ko(e,t=!1){Hn+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function sc(e){return e.dynamicChildren=Hn>0?bt||Ks:null,cf(),Hn>0&&bt&&bt.push(e),e}function h(e,t,s,n,o,a){return sc(c(e,t,s,n,o,a,!0))}function Be(e,t,s,n,o){return sc(me(e,t,s,n,o,!0))}function Wn(e){return e?e.__v_isVNode===!0:!1}function mn(e,t){return e.type===t.type&&e.key===t.key}const nc=({key:e})=>e??null,go=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||ot(e)||he(e)?{i:Ye,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,a=e===Z?0:1,r=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&nc(t),ref:t&&go(t),scopeId:Oi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ye};return i?(_r(l,s),a&128&&e.normalize(l)):s&&(l.shapeFlag|=He(s)?8:16),Hn>0&&!r&&bt&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&bt.push(l),l}const me=uf;function uf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===Id)&&(e=ss),Wn(e)){const i=Qs(e,t,!0);return s&&_r(i,s),Hn>0&&!a&&bt&&(i.shapeFlag&6?bt[bt.indexOf(e)]=i:bt.push(i)),i.patchFlag=-2,i}if(Cf(e)&&(e=e.__vccOpts),t){t=df(t);let{class:i,style:l}=t;i&&!He(i)&&(t.class=ue(i)),Ae(l)&&(pr(l)&&!pe(l)&&(l=Xe({},l)),t.style=ct(l))}const r=He(e)?1:tc(e)?128:bd(e)?64:Ae(e)?4:he(e)?2:0;return c(e,t,s,n,o,r,a,!0)}function df(e){return e?pr(e)||Gi(e)?Xe({},e):e:null}function Qs(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:i,transition:l}=e,u=t?ff(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&nc(u),ref:t&&t.ref?s&&a?pe(a)?a.concat(go(t)):[a,go(t)]:go(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qs(e.ssContent),ssFallback:e.ssFallback&&Qs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&hr(d,l.clone(d)),d}function $t(e=" ",t=0){return me(Yo,null,e,t)}function xo(e,t){const s=me(ho,null,e);return s.staticCount=t,s}function B(e="",t=!1){return t?(m(),Be(ss,null,e)):me(ss,null,e)}function Ft(e){return e==null||typeof e=="boolean"?me(ss):pe(e)?me(Z,null,e.slice()):Wn(e)?ls(e):me(Yo,null,String(e))}function ls(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qs(e)}function _r(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(pe(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),_r(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Gi(t)?t._ctx=Ye:o===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:Ye},s=32):(t=String(t),n&64?(s=16,t=[$t(t)]):s=8);e.children=t,e.shapeFlag|=s}function ff(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ue([t.class,n.class]));else if(o==="style")t.style=ct([t.style,n.style]);else if(Fo(o)){const a=t[o],r=n[o];r&&a!==r&&!(pe(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function Bt(e,t,s,n=null){Wt(e,t,7,[s,n])}const vf=Hi();let pf=0;function mf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||vf,a={uid:pf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Bu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ji(n,o),emitsOptions:Wi(n,o),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:n.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Kd.bind(null,a),e.ce&&e.ce(a),a}let nt=null;const hf=()=>nt||Ye;let Ao,La;{const e=Vo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};Ao=t("__VUE_INSTANCE_SETTERS__",s=>nt=s),La=t("__VUE_SSR_SETTERS__",s=>Vn=s)}const Qn=e=>{const t=nt;return Ao(e),e.scope.on(),()=>{e.scope.off(),Ao(t)}},nl=()=>{nt&&nt.scope.off(),Ao(null)};function oc(e){return e.vnode.shapeFlag&4}let Vn=!1;function gf(e,t=!1,s=!1){t&&La(t);const{props:n,children:o}=e.vnode,a=oc(e);Xd(e,n,a,t),tf(e,o,s||t);const r=a?yf(e,t):void 0;return t&&La(!1),r}function yf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ld);const{setup:n}=s;if(n){Zt();const o=e.setupContext=n.length>1?_f(e):null,a=Qn(e),r=Xn(n,e,0,[e.props,o]),i=ni(r);if(es(),a(),(i||e.sp)&&!Js(e)&&Di(e),i){if(r.then(nl,nl),t)return r.then(l=>{ol(e,l)}).catch(l=>{Go(l,e,0)});e.asyncDep=r}else ol(e,r)}else ac(e)}function ol(e,t,s){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ae(t)&&(e.setupState=xi(t)),ac(e)}function ac(e,t,s){const n=e.type;e.render||(e.render=n.render||jt);{const o=Qn(e);Zt();try{Bd(e)}finally{es(),o()}}}const bf={get(e,t){return st(e,"get",""),e[t]}};function _f(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,bf),slots:e.slots,emit:e.emit,expose:t}}function qo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xi(nd(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Rn)return Rn[s](e)},has(t,s){return s in t||s in Rn}})):e.proxy}function wf(e,t=!0){return he(e)?e.displayName||e.name:e.name||t&&e.__name}function Cf(e){return he(e)&&"__vccOpts"in e}const N=(e,t)=>id(e,t,Vn);function rc(e,t,s){try{ko(-1);const n=arguments.length;return n===2?Ae(t)&&!pe(t)?Wn(t)?me(e,null,[t]):me(e,t):me(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Wn(s)&&(s=[s]),me(e,t,s))}finally{ko(1)}}const Sf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ba;const al=typeof window<"u"&&window.trustedTypes;if(al)try{Ba=al.createPolicy("vue",{createHTML:e=>e})}catch{}const lc=Ba?e=>Ba.createHTML(e):e=>e,$f="http://www.w3.org/2000/svg",kf="http://www.w3.org/1998/Math/MathML",zt=typeof document<"u"?document:null,rl=zt&&zt.createElement("template"),xf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?zt.createElementNS($f,e):t==="mathml"?zt.createElementNS(kf,e):s?zt.createElement(e,{is:s}):zt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>zt.createTextNode(e),createComment:e=>zt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{rl.innerHTML=lc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=rl.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Af=Symbol("_vtc");function Nf(e,t,s){const n=e[Af];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const No=Symbol("_vod"),ic=Symbol("_vsh"),Tf={name:"show",beforeMount(e,{value:t},{transition:s}){e[No]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):hn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),hn(e,!0),n.enter(e)):n.leave(e,()=>{hn(e,!1)}):hn(e,t))},beforeUnmount(e,{value:t}){hn(e,t)}};function hn(e,t){e.style.display=t?e[No]:"none",e[ic]=!t}const Ef=Symbol(""),Of=/(?:^|;)\s*display\s*:/;function Rf(e,t,s){const n=e.style,o=He(s);let a=!1;if(s&&!o){if(t)if(He(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();s[i]==null&&yo(n,i,"")}else for(const r in t)s[r]==null&&yo(n,r,"");for(const r in s)r==="display"&&(a=!0),yo(n,r,s[r])}else if(o){if(t!==s){const r=n[Ef];r&&(s+=";"+r),n.cssText=s,a=Of.test(s)}}else t&&e.removeAttribute("style");No in e&&(e[No]=a?n.display:"",e[ic]&&(n.display="none"))}const ll=/\s*!important$/;function yo(e,t,s){if(pe(s))s.forEach(n=>yo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=If(e,t);ll.test(s)?e.setProperty(ps(n),s.replace(ll,""),"important"):e[n]=s}}const il=["Webkit","Moz","ms"],da={};function If(e,t){const s=da[t];if(s)return s;let n=At(t);if(n!=="filter"&&n in e)return da[t]=n;n=Ho(n);for(let o=0;o<il.length;o++){const a=il[o]+n;if(a in e)return da[t]=a}return t}const cl="http://www.w3.org/1999/xlink";function ul(e,t,s,n,o,a=Du(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(cl,t.slice(6,t.length)):e.setAttributeNS(cl,t,s):s==null||a&&!li(s)?e.removeAttribute(t):e.setAttribute(t,a?"":It(s)?String(s):s)}function dl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?lc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(i!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=li(s):s==null&&i==="string"?(s="",r=!0):i==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function qt(e,t,s,n){e.addEventListener(t,s,n)}function Pf(e,t,s,n){e.removeEventListener(t,s,n)}const fl=Symbol("_vei");function Df(e,t,s,n,o=null){const a=e[fl]||(e[fl]={}),r=a[t];if(n&&r)r.value=n;else{const[i,l]=Lf(t);if(n){const u=a[t]=Mf(n,o);qt(e,i,u,l)}else r&&(Pf(e,i,r,l),a[t]=void 0)}}const vl=/(?:Once|Passive|Capture)$/;function Lf(e){let t;if(vl.test(e)){t={};let n;for(;n=e.match(vl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ps(e.slice(2)),t]}let fa=0;const Bf=Promise.resolve(),Uf=()=>fa||(Bf.then(()=>fa=0),fa=Date.now());function Mf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Wt(Ff(n,s.value),t,5,[n])};return s.value=e,s.attached=Uf(),s}function Ff(e,t){if(pe(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const pl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,jf=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?Nf(e,n,r):t==="style"?Rf(e,s,n):Fo(t)?or(t)||Df(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hf(e,t,n,r))?(dl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ul(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!He(n))?dl(e,At(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ul(e,t,n,r))};function Hf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&pl(t)&&he(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return pl(t)&&He(s)?!1:t in e}const fs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pe(t)?s=>po(t,s):t};function Wf(e){e.target.composing=!0}function ml(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xt=Symbol("_assign");function hl(e,t,s){return t&&(e=e.trim()),s&&(e=Wo(e)),e}const pt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[xt]=fs(o);const a=n||o.props&&o.props.type==="number";qt(e,t?"change":"input",r=>{r.target.composing||e[xt](hl(e.value,s,a))}),(s||a)&&qt(e,"change",()=>{e.value=hl(e.value,s,a)}),t||(qt(e,"compositionstart",Wf),qt(e,"compositionend",ml),qt(e,"change",ml))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[xt]=fs(r),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?Wo(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===l)||(e.value=l))}},wr={deep:!0,created(e,t,s){e[xt]=fs(s),qt(e,"change",()=>{const n=e._modelValue,o=Zs(e),a=e.checked,r=e[xt];if(pe(n)){const i=lr(n,o),l=i!==-1;if(a&&!l)r(n.concat(o));else if(!a&&l){const u=[...n];u.splice(i,1),r(u)}}else if(cn(n)){const i=new Set(n);a?i.add(o):i.delete(o),r(i)}else r(cc(e,a))})},mounted:gl,beforeUpdate(e,t,s){e[xt]=fs(s),gl(e,t,s)}};function gl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(pe(t))o=lr(t,n.props.value)>-1;else if(cn(t))o=t.has(n.props.value);else{if(t===s)return;o=Ts(t,cc(e,!0))}e.checked!==o&&(e.checked=o)}const yl={created(e,{value:t},s){e.checked=Ts(t,s.props.value),e[xt]=fs(s),qt(e,"change",()=>{e[xt](Zs(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[xt]=fs(n),t!==s&&(e.checked=Ts(t,n.props.value))}},Pn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=cn(t);qt(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Wo(Zs(r)):Zs(r));e[xt](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Fn(()=>{e._assigning=!1})}),e[xt]=fs(n)},mounted(e,{value:t}){bl(e,t)},beforeUpdate(e,t,s){e[xt]=fs(s)},updated(e,{value:t}){e._assigning||bl(e,t)}};function bl(e,t){const s=e.multiple,n=pe(t);if(!(s&&!n&&!cn(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],i=Zs(r);if(s)if(n){const l=typeof i;l==="string"||l==="number"?r.selected=t.some(u=>String(u)===String(i)):r.selected=lr(t,i)>-1}else r.selected=t.has(i);else if(Ts(Zs(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Zs(e){return"_value"in e?e._value:e.value}function cc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Vf=["ctrl","shift","alt","meta"],Kf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Vf.some(s=>e[`${s}Key`]&&!t.includes(s))},Dt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const i=Kf[t[r]];if(i&&i(o,t))return}return e(o,...a)})},Gf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},To=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=ps(o.key);if(t.some(r=>r===a||Gf[r]===a))return e(o)})},zf=Xe({patchProp:jf},xf);let _l;function Jf(){return _l||(_l=nf(zf))}const Yf=(...e)=>{const t=Jf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Xf(n);if(!o)return;const a=t._component;!he(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,qf(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function qf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Xf(e){return He(e)?document.querySelector(e):e}const ye=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Qf={};function Zf(e,t){const s=Rd("router-view");return m(),Be(s)}const ev=ye(Qf,[["render",Zf]]),tv="modulepreload",sv=function(e){return"/"+e},wl={},nv=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(l=>{if(l=sv(l),l in wl)return;wl[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":tv,u||(f.as="script"),f.crossOrigin="",f.href=l,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Us=typeof document<"u";function uc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ov(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&uc(e.default)}const Ce=Object.assign;function va(e,t){const s={};for(const n in t){const o=t[n];s[n]=Lt(o)?o.map(e):e(o)}return s}const Dn=()=>{},Lt=Array.isArray;function Cl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const dc=/#/g,av=/&/g,rv=/\//g,lv=/=/g,iv=/\?/g,fc=/\+/g,cv=/%5B/g,uv=/%5D/g,vc=/%5E/g,dv=/%60/g,pc=/%7B/g,fv=/%7C/g,mc=/%7D/g,vv=/%20/g;function Cr(e){return e==null?"":encodeURI(""+e).replace(fv,"|").replace(cv,"[").replace(uv,"]")}function pv(e){return Cr(e).replace(pc,"{").replace(mc,"}").replace(vc,"^")}function Ua(e){return Cr(e).replace(fc,"%2B").replace(vv,"+").replace(dc,"%23").replace(av,"%26").replace(dv,"`").replace(pc,"{").replace(mc,"}").replace(vc,"^")}function mv(e){return Ua(e).replace(lv,"%3D")}function hv(e){return Cr(e).replace(dc,"%23").replace(iv,"%3F")}function gv(e){return hv(e).replace(rv,"%2F")}function Kn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const yv=/\/$/,bv=e=>e.replace(yv,"");function pa(e,t,s="/"){let n,o={},a="",r="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(n=t.slice(0,l),a=t.slice(l,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),r=t.slice(i,t.length)),n=Sv(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:Kn(r)}}function _v(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Sl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function wv(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&en(t.matched[n],s.matched[o])&&hc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function en(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function hc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Cv(e[s],t[s]))return!1;return!0}function Cv(e,t){return Lt(e)?$l(e,t):Lt(t)?$l(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function $l(e,t){return Lt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Sv(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,i;for(r=0;r<n.length;r++)if(i=n[r],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const os={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ma=function(e){return e.pop="pop",e.push="push",e}({}),ma=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function $v(e){if(!e)if(Us){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),bv(e)}const kv=/^[^#]+#/;function xv(e,t){return e.replace(kv,"#")+t}function Av(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Xo=()=>({left:window.scrollX,top:window.scrollY});function Nv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Av(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function kl(e,t){return(history.state?history.state.position-t:-1)+e}const Fa=new Map;function Tv(e,t){Fa.set(e,t)}function Ev(e){const t=Fa.get(e);return Fa.delete(e),t}function Ov(e){return typeof e=="string"||e&&typeof e=="object"}function gc(e){return typeof e=="string"||typeof e=="symbol"}let Le=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const yc=Symbol("");Le.MATCHER_NOT_FOUND+"",Le.NAVIGATION_GUARD_REDIRECT+"",Le.NAVIGATION_ABORTED+"",Le.NAVIGATION_CANCELLED+"",Le.NAVIGATION_DUPLICATED+"";function tn(e,t){return Ce(new Error,{type:e,[yc]:!0},t)}function Kt(e,t){return e instanceof Error&&yc in e&&(t==null||!!(e.type&t))}const Rv=["params","query","hash"];function Iv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Rv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function Pv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(fc," "),a=o.indexOf("="),r=Kn(a<0?o:o.slice(0,a)),i=a<0?null:Kn(o.slice(a+1));if(r in t){let l=t[r];Lt(l)||(l=t[r]=[l]),l.push(i)}else t[r]=i}return t}function xl(e){let t="";for(let s in e){const n=e[s];if(s=mv(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Lt(n)?n.map(o=>o&&Ua(o)):[n&&Ua(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Dv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Lt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const Lv=Symbol(""),Al=Symbol(""),Qo=Symbol(""),Sr=Symbol(""),ja=Symbol("");function gn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function is(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,l)=>{const u=p=>{p===!1?l(tn(Le.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?l(p):Ov(p)?l(tn(Le.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),i())},d=a(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function ha(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const i in r.components){let l=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(uc(l)){const u=(l.__vccOpts||l)[t];u&&a.push(is(u,s,n,r,i,o))}else{let u=l();a.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${r.path}"`);const f=ov(d)?d.default:d;r.mods[i]=d,r.components[i]=f;const p=(f.__vccOpts||f)[t];return p&&is(p,s,n,r,i,o)()}))}}return a}function Bv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const i=t.matched[r];i&&(e.matched.find(u=>en(u,i))?n.push(i):s.push(i));const l=e.matched[r];l&&(t.matched.find(u=>en(u,l))||o.push(l))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Uv=()=>location.protocol+"//"+location.host;function bc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(r);return i[0]!=="/"&&(i="/"+i),Sl(i,"")}return Sl(s,e)+n+o}function Mv(e,t,s,n){let o=[],a=[],r=null;const i=({state:p})=>{const v=bc(e,location),g=s.value,b=t.value;let A=0;if(p){if(s.value=v,t.value=p,r&&r===g){r=null;return}A=b?p.position-b.position:0}else n(v);o.forEach(k=>{k(s.value,g,{delta:A,type:Ma.pop,direction:A?A>0?ma.forward:ma.back:ma.unknown})})};function l(){r=s.value}function u(p){o.push(p);const v=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ce({},p.state,{scroll:Xo()}),"")}}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:f}}function Nl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Xo():null}}function Fv(e){const{history:t,location:s}=window,n={value:bc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,d){const f=e.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+l:Uv()+e+l;try{t[d?"replaceState":"pushState"](u,"",p),o.value=u}catch(v){console.error(v),s[d?"replace":"assign"](p)}}function r(l,u){a(l,Ce({},t.state,Nl(o.value.back,l,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=l}function i(l,u){const d=Ce({},o.value,t.state,{forward:l,scroll:Xo()});a(d.current,d,!0),a(l,Ce({},Nl(n.value,l,null),{position:d.position+1},u),!1),n.value=l}return{location:n,state:o,push:i,replace:r}}function jv(e){e=$v(e);const t=Fv(e),s=Mv(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=Ce({location:"",base:e,go:n,createHref:xv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Hv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),jv(e)}let ks=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ge=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ge||{});const Wv={type:ks.Static,value:""},Vv=/[a-zA-Z0-9_]/;function Kv(e){if(!e)return[[]];if(e==="/")return[[Wv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=Ge.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let i=0,l,u="",d="";function f(){u&&(s===Ge.Static?a.push({type:ks.Static,value:u}):s===Ge.Param||s===Ge.ParamRegExp||s===Ge.ParamRegExpEnd?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:ks.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&s!==Ge.ParamRegExp){n=s,s=Ge.EscapeNext;continue}switch(s){case Ge.Static:l==="/"?(u&&f(),r()):l===":"?(f(),s=Ge.Param):p();break;case Ge.EscapeNext:p(),s=n;break;case Ge.Param:l==="("?s=Ge.ParamRegExp:Vv.test(l)?p():(f(),s=Ge.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case Ge.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=Ge.ParamRegExpEnd:d+=l;break;case Ge.ParamRegExpEnd:f(),s=Ge.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,d="";break;default:t("Unknown state");break}}return s===Ge.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),r(),o}const Tl="[^/]+?",Gv={sensitive:!1,strict:!1,start:!0,end:!0};var it=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(it||{});const zv=/[.+*?^${}()[\]/\\]/g;function Jv(e,t){const s=Ce({},Gv,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const d=u.length?[]:[it.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let v=it.Segment+(s.sensitive?it.BonusCaseSensitive:0);if(p.type===ks.Static)f||(o+="/"),o+=p.value.replace(zv,"\\$&"),v+=it.Static;else if(p.type===ks.Param){const{value:g,repeatable:b,optional:A,regexp:k}=p;a.push({name:g,repeatable:b,optional:A});const C=k||Tl;if(C!==Tl){v+=it.BonusCustomRegExp;try{`${C}`}catch(E){throw new Error(`Invalid custom RegExp for param "${g}" (${C}): `+E.message)}}let _=b?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(_=A&&u.length<2?`(?:/${_})`:"/"+_),A&&(_+="?"),o+=_,v+=it.Dynamic,A&&(v+=it.BonusOptional),b&&(v+=it.BonusRepeatable),C===".*"&&(v+=it.BonusWildcard)}d.push(v)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=it.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function i(u){const d=u.match(r),f={};if(!d)return null;for(let p=1;p<d.length;p++){const v=d[p]||"",g=a[p-1];f[g.name]=v&&g.repeatable?v.split("/"):v}return f}function l(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of p)if(v.type===ks.Static)d+=v.value;else if(v.type===ks.Param){const{value:g,repeatable:b,optional:A}=v,k=g in u?u[g]:"";if(Lt(k)&&!b)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const C=Lt(k)?k.join("/"):k;if(!C)if(A)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);d+=C}}return d||"/"}return{re:r,score:n,keys:a,parse:i,stringify:l}}function Yv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===it.Static+it.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===it.Static+it.Segment?1:-1:0}function _c(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=Yv(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(El(n))return 1;if(El(o))return-1}return o.length-n.length}function El(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const qv={strict:!1,end:!0,sensitive:!1};function Xv(e,t,s){const n=Jv(Kv(e.path),s),o=Ce(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Qv(e,t){const s=[],n=new Map;t=Cl(qv,t);function o(f){return n.get(f)}function a(f,p,v){const g=!v,b=Rl(f);b.aliasOf=v&&v.record;const A=Cl(t,f),k=[b];if("alias"in f){const E=typeof f.alias=="string"?[f.alias]:f.alias;for(const Y of E)k.push(Rl(Ce({},b,{components:v?v.record.components:b.components,path:Y,aliasOf:v?v.record:b})))}let C,_;for(const E of k){const{path:Y}=E;if(p&&Y[0]!=="/"){const Q=p.record.path,D=Q[Q.length-1]==="/"?"":"/";E.path=p.record.path+(Y&&D+Y)}if(C=Xv(E,p,A),v?v.alias.push(C):(_=_||C,_!==C&&_.alias.push(C),g&&f.name&&!Il(C)&&r(f.name)),wc(C)&&l(C),b.children){const Q=b.children;for(let D=0;D<Q.length;D++)a(Q[D],C,v&&v.children[D])}v=v||C}return _?()=>{r(_)}:Dn}function r(f){if(gc(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function i(){return s}function l(f){const p=tp(f,s);s.splice(p,0,f),f.record.name&&!Il(f)&&n.set(f.record.name,f)}function u(f,p){let v,g={},b,A;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw tn(Le.MATCHER_NOT_FOUND,{location:f});A=v.record.name,g=Ce(Ol(p.params,v.keys.filter(_=>!_.optional).concat(v.parent?v.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&Ol(f.params,v.keys.map(_=>_.name))),b=v.stringify(g)}else if(f.path!=null)b=f.path,v=s.find(_=>_.re.test(b)),v&&(g=v.parse(b),A=v.record.name);else{if(v=p.name?n.get(p.name):s.find(_=>_.re.test(p.path)),!v)throw tn(Le.MATCHER_NOT_FOUND,{location:f,currentLocation:p});A=v.record.name,g=Ce({},p.params,f.params),b=v.stringify(g)}const k=[];let C=v;for(;C;)k.unshift(C.record),C=C.parent;return{name:A,path:b,params:g,matched:k,meta:ep(k)}}e.forEach(f=>a(f));function d(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:r,clearRoutes:d,getRoutes:i,getRecordMatcher:o}}function Ol(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Rl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Zv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Zv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Il(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ep(e){return e.reduce((t,s)=>Ce(t,s.meta),{})}function tp(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;_c(e,t[a])<0?n=a:s=a+1}const o=sp(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function sp(e){let t=e;for(;t=t.parent;)if(wc(t)&&_c(e,t)===0)return t}function wc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Pl(e){const t=Rt(Qo),s=Rt(Sr),n=N(()=>{const l=P(e.to);return t.resolve(l)}),o=N(()=>{const{matched:l}=n.value,{length:u}=l,d=l[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(en.bind(null,d));if(p>-1)return p;const v=Dl(l[u-2]);return u>1&&Dl(d)===v&&f[f.length-1].path!==v?f.findIndex(en.bind(null,l[u-2])):p}),a=N(()=>o.value>-1&&lp(s.params,n.value.params)),r=N(()=>o.value>-1&&o.value===s.matched.length-1&&hc(s.params,n.value.params));function i(l={}){if(rp(l)){const u=t[P(e.replace)?"replace":"push"](P(e.to)).catch(Dn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:N(()=>n.value.href),isActive:a,isExactActive:r,navigate:i}}function np(e){return e.length===1?e[0]:e}const op=Pi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Pl,setup(e,{slots:t}){const s=Ht(Pl(e)),{options:n}=Rt(Qo),o=N(()=>({[Ll(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Ll(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&np(t.default(s));return e.custom?a:rc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),ap=op;function rp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lp(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Lt(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function Dl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ll=(e,t,s)=>e??t??s,ip=Pi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Rt(ja),o=N(()=>e.route||n.value),a=Rt(Al,0),r=N(()=>{let u=P(a);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),i=N(()=>o.value.matched[r.value]);mo(Al,N(()=>r.value+1)),mo(Lv,i),mo(ja,o);const l=T();return vt(()=>[l.value,i.value,e.name],([u,d,f],[p,v,g])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!en(d,v)||!p)&&(d.enterCallbacks[f]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=i.value,p=f&&f.components[d];if(!p)return Bl(s.default,{Component:p,route:u});const v=f.props[d],g=v?v===!0?u.params:typeof v=="function"?v(u):v:null,A=rc(p,Ce({},g,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return Bl(s.default,{Component:A,route:u})||A}}});function Bl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const cp=ip;function up(e){const t=Qv(e.routes,e),s=e.parseQuery||Pv,n=e.stringifyQuery||xl,o=e.history,a=gn(),r=gn(),i=gn(),l=od(os);let u=os;Us&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=va.bind(null,j=>""+j),f=va.bind(null,gv),p=va.bind(null,Kn);function v(j,oe){let te,ie;return gc(j)?(te=t.getRecordMatcher(j),ie=oe):ie=j,t.addRoute(ie,te)}function g(j){const oe=t.getRecordMatcher(j);oe&&t.removeRoute(oe)}function b(){return t.getRoutes().map(j=>j.record)}function A(j){return!!t.getRecordMatcher(j)}function k(j,oe){if(oe=Ce({},oe||l.value),typeof j=="string"){const O=pa(s,j,oe.path),M=t.resolve({path:O.path},oe),H=o.createHref(O.fullPath);return Ce(O,M,{params:p(M.params),hash:Kn(O.hash),redirectedFrom:void 0,href:H})}let te;if(j.path!=null)te=Ce({},j,{path:pa(s,j.path,oe.path).path});else{const O=Ce({},j.params);for(const M in O)O[M]==null&&delete O[M];te=Ce({},j,{params:f(O)}),oe.params=f(oe.params)}const ie=t.resolve(te,oe),_e=j.hash||"";ie.params=d(p(ie.params));const S=_v(n,Ce({},j,{hash:pv(_e),path:ie.path})),x=o.createHref(S);return Ce({fullPath:S,hash:_e,query:n===xl?Dv(j.query):j.query||{}},ie,{redirectedFrom:void 0,href:x})}function C(j){return typeof j=="string"?pa(s,j,l.value.path):Ce({},j)}function _(j,oe){if(u!==j)return tn(Le.NAVIGATION_CANCELLED,{from:oe,to:j})}function E(j){return D(j)}function Y(j){return E(Ce(C(j),{replace:!0}))}function Q(j,oe){const te=j.matched[j.matched.length-1];if(te&&te.redirect){const{redirect:ie}=te;let _e=typeof ie=="function"?ie(j,oe):ie;return typeof _e=="string"&&(_e=_e.includes("?")||_e.includes("#")?_e=C(_e):{path:_e},_e.params={}),Ce({query:j.query,hash:j.hash,params:_e.path!=null?{}:j.params},_e)}}function D(j,oe){const te=u=k(j),ie=l.value,_e=j.state,S=j.force,x=j.replace===!0,O=Q(te,ie);if(O)return D(Ce(C(O),{state:typeof O=="object"?Ce({},_e,O.state):_e,force:S,replace:x}),oe||te);const M=te;M.redirectedFrom=oe;let H;return!S&&wv(n,ie,te)&&(H=tn(Le.NAVIGATION_DUPLICATED,{to:M,from:ie}),V(ie,ie,!0,!1)),(H?Promise.resolve(H):de(M,ie)).catch(F=>Kt(F)?Kt(F,Le.NAVIGATION_GUARD_REDIRECT)?F:G(F):L(F,M,ie)).then(F=>{if(F){if(Kt(F,Le.NAVIGATION_GUARD_REDIRECT))return D(Ce({replace:x},C(F.to),{state:typeof F.to=="object"?Ce({},_e,F.to.state):_e,force:S}),oe||M)}else F=ce(M,ie,!0,x,_e);return ve(M,ie,F),F})}function J(j,oe){const te=_(j,oe);return te?Promise.reject(te):Promise.resolve()}function z(j){const oe=We.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(j):j()}function de(j,oe){let te;const[ie,_e,S]=Bv(j,oe);te=ha(ie.reverse(),"beforeRouteLeave",j,oe);for(const O of ie)O.leaveGuards.forEach(M=>{te.push(is(M,j,oe))});const x=J.bind(null,j,oe);return te.push(x),Ze(te).then(()=>{te=[];for(const O of a.list())te.push(is(O,j,oe));return te.push(x),Ze(te)}).then(()=>{te=ha(_e,"beforeRouteUpdate",j,oe);for(const O of _e)O.updateGuards.forEach(M=>{te.push(is(M,j,oe))});return te.push(x),Ze(te)}).then(()=>{te=[];for(const O of S)if(O.beforeEnter)if(Lt(O.beforeEnter))for(const M of O.beforeEnter)te.push(is(M,j,oe));else te.push(is(O.beforeEnter,j,oe));return te.push(x),Ze(te)}).then(()=>(j.matched.forEach(O=>O.enterCallbacks={}),te=ha(S,"beforeRouteEnter",j,oe,z),te.push(x),Ze(te))).then(()=>{te=[];for(const O of r.list())te.push(is(O,j,oe));return te.push(x),Ze(te)}).catch(O=>Kt(O,Le.NAVIGATION_CANCELLED)?O:Promise.reject(O))}function ve(j,oe,te){i.list().forEach(ie=>z(()=>ie(j,oe,te)))}function ce(j,oe,te,ie,_e){const S=_(j,oe);if(S)return S;const x=oe===os,O=Us?history.state:{};te&&(ie||x?o.replace(j.fullPath,Ce({scroll:x&&O&&O.scroll},_e)):o.push(j.fullPath,_e)),l.value=j,V(j,oe,te,x),G()}let be;function we(){be||(be=o.listen((j,oe,te)=>{if(!wt.listening)return;const ie=k(j),_e=Q(ie,wt.currentRoute.value);if(_e){D(Ce(_e,{replace:!0,force:!0}),ie).catch(Dn);return}u=ie;const S=l.value;Us&&Tv(kl(S.fullPath,te.delta),Xo()),de(ie,S).catch(x=>Kt(x,Le.NAVIGATION_ABORTED|Le.NAVIGATION_CANCELLED)?x:Kt(x,Le.NAVIGATION_GUARD_REDIRECT)?(D(Ce(C(x.to),{force:!0}),ie).then(O=>{Kt(O,Le.NAVIGATION_ABORTED|Le.NAVIGATION_DUPLICATED)&&!te.delta&&te.type===Ma.pop&&o.go(-1,!1)}).catch(Dn),Promise.reject()):(te.delta&&o.go(-te.delta,!1),L(x,ie,S))).then(x=>{x=x||ce(ie,S,!1),x&&(te.delta&&!Kt(x,Le.NAVIGATION_CANCELLED)?o.go(-te.delta,!1):te.type===Ma.pop&&Kt(x,Le.NAVIGATION_ABORTED|Le.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ve(ie,S,x)}).catch(Dn)}))}let ne=gn(),re=gn(),q;function L(j,oe,te){G(j);const ie=re.list();return ie.length?ie.forEach(_e=>_e(j,oe,te)):console.error(j),Promise.reject(j)}function W(){return q&&l.value!==os?Promise.resolve():new Promise((j,oe)=>{ne.add([j,oe])})}function G(j){return q||(q=!j,we(),ne.list().forEach(([oe,te])=>j?te(j):oe()),ne.reset()),j}function V(j,oe,te,ie){const{scrollBehavior:_e}=e;if(!Us||!_e)return Promise.resolve();const S=!te&&Ev(kl(j.fullPath,0))||(ie||!te)&&history.state&&history.state.scroll||null;return Fn().then(()=>_e(j,oe,S)).then(x=>x&&Nv(x)).catch(x=>L(x,j,oe))}const ae=j=>o.go(j);let Pe;const We=new Set,wt={currentRoute:l,listening:!0,addRoute:v,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:A,getRoutes:b,resolve:k,options:e,push:E,replace:Y,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:a.add,beforeResolve:r.add,afterEach:i.add,onError:re.add,isReady:W,install(j){j.component("RouterLink",ap),j.component("RouterView",cp),j.config.globalProperties.$router=wt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>P(l)}),Us&&!Pe&&l.value===os&&(Pe=!0,E(o.location).catch(ie=>{}));const oe={};for(const ie in os)Object.defineProperty(oe,ie,{get:()=>l.value[ie],enumerable:!0});j.provide(Qo,wt),j.provide(Sr,$i(oe)),j.provide(ja,l);const te=j.unmount;We.add(j),j.unmount=function(){We.delete(j),We.size<1&&(u=os,be&&be(),be=null,l.value=os,Pe=!1,q=!1),te()}}};function Ze(j){return j.reduce((oe,te)=>oe.then(()=>z(te)),Promise.resolve())}return wt}function dp(){return Rt(Qo)}function Lx(e){return Rt(Sr)}function Ul(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let i=0;i<s.length;i++){const l=s[i];if(l.startsWith("%"))continue;if(a){l.includes("}")?(r+=l.substring(0,l.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=l+`
`;continue}if(l.includes("{")){const f=l.indexOf("{");if(l.includes("}")){const p=l.indexOf("}");o.push(l.substring(f+1,p).trim())}else r=l.substring(f+1)+`
`,a=!0;continue}const u=l.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=l.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,p]=d;if(f==="Board")n&&(n.commentary=jl(o),n.steps=Ml(o),n.auction=Fl(n.auction),t.push(n)),n=fp(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=vp(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const f=l.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const p=mp(f);n.auction.push(...p)}}}return n&&(n.commentary=jl(o),n.steps=Ml(o),n.auction=Fl(n.auction),t.push(n)),t}function Ml(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const i=n[r],l=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),d=/^\[ROTATE\]$/i.test(i),f=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(l){const p=$r(l[1]).replace(/!/g,"").trim(),v=a.trim();a="";let g="";if(r+1<n.length){const k=n[r+1];k.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=k.trim(),r++)}const b=yn(v,"bid"),A=yn(g,"bid");o.push({...b,type:"bid",bid:p,explanationText:A.text,showSeatsAfter:A.showSeats})}else if(u||d){const p=u?"next":"rotate";a.trim()&&o.push(yn(a.trim(),p)),a=""}else if(f){const p=f[1].trim();let v;if(p.toLowerCase().startsWith("any:")?v={cards:p.substring(4).split(",").map(b=>Eo(b.trim())),anyOf:!0}:v={card:Eo(p)},a.trim()){const g=yn(a.trim(),"choose-card");g.chooseCard=v,o.push(g)}a=""}else a+=i}if(a.trim()){const r=yn(a.trim(),"end");o.push(r)}return o}function yn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const C=n[1].toUpperCase().trim();if(C==="ALL")s=["N","E","S","W"];else{const _=[];C.includes("N")&&_.push("N"),C.includes("E")&&_.push("E"),C.includes("S")&&_.push("S"),C.includes("W")&&_.push("W"),_.length>0&&(s=_)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const i=/\[RESET\]/i.test(e);let l=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const C=u[1].trim();C.toLowerCase().startsWith("any:")?l={cards:C.substring(4).split(",").map(E=>Eo(E.trim())),anyOf:!0}:l={card:Eo(C)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),p&&(d=!0);const v=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let b=null;const A=e.match(/\[showcards\s+([^\]]+)\]/i);if(A){const C=A[1].trim();b={};const _=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let E;for(;(E=_.exec(C))!==null;){const Y=E[1].toUpperCase(),Q=E[2].split(",").map(D=>D.trim().toUpperCase());b[Y]=Q}Object.keys(b).length===0&&(b=null)}let k=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:$r(k),type:t,showSeats:s,plays:o,reset:i,showAuction:d,showLead:v,clearCommentary:g,showcards:b,chooseCard:l}}function fp(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Eo(e){return e.toUpperCase().replace("10","T")}function vp(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(r+1)}for(let i=0;i<4;i++){const l=(o+i)%4,u=n[l];t[u]=pp(s[i])}return t}function pp(e){const t=e.split(".");return t.length!==4?null:{spades:co(t[0]),hearts:co(t[1]),diamonds:co(t[2]),clubs:co(t[3])}}function co(e){return e?e.split(""):[]}function Fl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function mp(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>hp(t))}function hp(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function jl(e){return e.length?$r(e.join(`

`)):""}function $r(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function gp(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function uo(e,t){return gp(t)[e%4]}const kr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Hl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Cc=["spades","hearts","diamonds","clubs"];function ga(e){return e==="T"?"10":e}function xr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=kr[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function yp(e){return(Hl[e.toLowerCase()]||Hl[e])==="red"?"suit-red":"suit-black"}function bp(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Ha(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function _p(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Cc)for(const o of e[n]||[])s+=t[o]||0;return s}function wp(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=kr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function bn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Cp(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ms(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Sp({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:a,studentBid:r,correct:i,attemptNumber:l,timeTakenMs:u,skillPath:d,assignment:f=null}){var b,A,k,C,_,E,Y,Q,D,J,z;const p=((b=s.steps)==null?void 0:b.filter(de=>de.type==="bid").length)||1,v=s.studentSeat||"S",g=((A=s.hands)==null?void 0:A[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:((k=s.hands)==null?void 0:k.N)||((C=s.hands)==null?void 0:C.north)||"",east:((_=s.hands)==null?void 0:_.E)||((E=s.hands)==null?void 0:E.east)||"",south:((Y=s.hands)==null?void 0:Y.S)||((Q=s.hands)==null?void 0:Q.south)||"",west:((D=s.hands)==null?void 0:D.W)||((J=s.hands)==null?void 0:J.west)||""},full_auction:((z=s.auction)==null?void 0:z.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:a,student_hand:g},result:{student_bid:r,correct:i,attempt_number:l,time_taken_ms:u},skill_path:d,assignment:f}}function Sc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function $p(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function kp(){return crypto.randomUUID()}function xp(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function $c(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Ap(e){const[t]=e.split("/");return t||"uncategorized"}function Np(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const kc={name:"AES-GCM",length:256},xc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function Tp(){const e=await crypto.subtle.generateKey(kc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return sn(t)}async function Ac(e){const t=Gn(e);return crypto.subtle.importKey("raw",t,kc,!0,["encrypt","decrypt"])}async function Ar(e,t){const s=await Ac(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:sn(r),iv:sn(n)}}async function Nc(e,t,s){const n=await Ac(s),o=Gn(e),a=Gn(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(r))}async function Ep(e){const t=Gn(e);return crypto.subtle.importKey("spki",t,xc,!0,["encrypt"])}async function Op(){const e=await crypto.subtle.generateKey(xc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:sn(t),privateKey:sn(s)}}async function Tc(e,t){const s=await Ep(t),n=Gn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return sn(o)}function Rp(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function Ip(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function Pp(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Ar(t,e);return(await Nc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function sn(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Gn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Wa="bridgePractice",Te=T({}),je=T(null),vs=T(null),zn=T(!1),Zo=T(!1);function Ec(){try{const e=localStorage.getItem(Wa);if(e){const t=JSON.parse(e);Te.value=t.users||{},je.value=t.currentUserId||null,vs.value=t.adminViewerId||null}zn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),zn.value=!0}}function Nt(){try{const e=localStorage.getItem(Wa),t=e?JSON.parse(e):{};t.users=Te.value,t.currentUserId=je.value,vs.value&&(t.adminViewerId=vs.value),localStorage.setItem(Wa,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function Dp({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),i=new Date().toISOString(),l=await Tp();let u=null;if(a)try{const f=await fetch(`${a}/keys/admin`);if(f.ok){const p=await f.json();vs.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await Tc(l,p.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:l,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return Te.value[r]=d,je.value=r,Nt(),Zo.value=!0,d}function Lp(e,t){if(!Te.value[e])return console.error("User not found:",e),null;const s=Te.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Nt(),s}function Bp(e){if(!Te.value[e])return!1;if(delete Te.value[e],je.value===e){const t=Object.keys(Te.value);je.value=t.length>0?t[0]:null}return Nt(),!0}function Up(e){return Te.value[e]?(je.value=e,Nt(),!0):(console.error("User not found:",e),!1)}function Mp(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Te.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Fp(e){const t=e.trim().toLowerCase();for(const s of Object.values(Te.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function jp(e){return Te.value[e]||null}function Hp(){Te.value={},je.value=null,vs.value=null,Zo.value=!1,Nt(),zn.value=!1}function Wp(){zn.value||Ec()}async function Vp(e){const t=Ip(e);if(!t.valid)return{success:!1,error:t.error};if(!await Pp(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Te.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),je.value=e.user_id,Nt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[i.id]=i,je.value=i.id,Nt(),{success:!0,user:i}}function Kp(){const e=Te.value[je.value];return!e||!e.secretKey?null:Rp(e)}function Gp(){Zo.value=!1}function zp(){return vs.value}function Jp(e){vs.value=e,Nt()}async function Yp(e){const t=Te.value[je.value];return!t||!t.secretKey?null:Tc(t.secretKey,e)}async function qp(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Xp(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Qp(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Zp(){if(!je.value)return;const e=Te.value[je.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Nt()}catch{}}function Fe(){const e=N(()=>je.value&&Te.value[je.value]||null),t=N(()=>Object.values(Te.value)),s=N(()=>Object.keys(Te.value).length>0),n=N(()=>Object.keys(Te.value).length),o=N(()=>je.value!==null&&!!Te.value[je.value]);return{users:Te,currentUserId:je,adminViewerId:vs,initialized:zn,showKeyBackupModal:Zo,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Wp,loadFromStorage:Ec,saveToStorage:Nt,createUser:Dp,updateUser:Lp,deleteUser:Bp,switchUser:Up,findUserByName:Mp,findUserByEmail:Fp,getUser:jp,clearUsers:Hp,restoreFromBackup:Vp,getKeyBackup:Kp,dismissKeyBackupModal:Gp,getAdminViewerId:zp,setAdminViewerId:Jp,createGrantForViewer:Yp,requestRecovery:qp,claimRecovery:Xp,claimRecoveryByCode:Qp,syncRole:Zp}}const Va="bridgePractice",Qe=T({}),Ue=T(null),Tt=T(!1),nn=T(!1);function Oc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(l=>l.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:i}}function Rc(){try{const e=localStorage.getItem(Va);if(e){const t=JSON.parse(e);Qe.value=t.assignments||{},Ue.value=t.currentAssignmentId||null,Ue.value&&Qe.value[Ue.value]&&(Tt.value=!0)}nn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),nn.value=!0}}function Es(){try{const e=localStorage.getItem(Va),t=e?JSON.parse(e):{};t.assignments=Qe.value,t.currentAssignmentId=Ue.value,localStorage.setItem(Va,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function Ic({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(Qe.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const d of n)u.add(d);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Ue.value=a.id,Tt.value=!0,Es(),a}const r=crypto.randomUUID(),i=new Date().toISOString(),l={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return Qe.value[r]=l,Ue.value=r,Tt.value=!0,Es(),l}function em(){if(nn.value)return;Rc();const e=Oc();e&&Ic(e),nn.value=!0}function tm(e){if(!Tt.value||!Ue.value)return!1;const t=Qe.value[Ue.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function sm(e){if(!Ue.value)return;const t=Qe.value[Ue.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Es())}function nm(e){if(!Ue.value||!Tt.value)return!1;const t=Qe.value[Ue.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Es(),!0}function om(){if(!Tt.value||!Ue.value)return null;const e=Qe.value[Ue.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function am(){Tt.value=!1}function rm(){Ue.value&&Qe.value[Ue.value]&&(Tt.value=!0)}function lm(e){return Qe.value[e]||null}function im(){return Object.values(Qe.value)}function cm(e){return Qe.value[e]?(delete Qe.value[e],Ue.value===e&&(Ue.value=null,Tt.value=!1),Es(),!0):!1}function um(){Qe.value={},Ue.value=null,Tt.value=!1,nn.value=!1,Es()}function ea(){const e=N(()=>Ue.value&&Qe.value[Ue.value]||null),t=N(()=>Tt.value&&e.value!==null),s=N(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=N(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Qe,currentAssignmentId:Ue,inAssignmentMode:Tt,initialized:nn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:em,loadFromStorage:Rc,saveToStorage:Es,createAssignment:Ic,isLessonInAssignment:tm,setTotalDeals:sm,recordDealCompletion:nm,getAssignmentTag:om,exitAssignmentMode:am,returnToAssignmentMode:rm,getAssignment:lm,getAllAssignments:im,deleteAssignment:cm,clearAssignments:um,parseAssignmentFromUrl:Oc}}const Ka="bridgePractice",qe=T([]),on=T(null),an=T(!1),Ns=T({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Pc(){try{const e=localStorage.getItem(Ka);if(e){const t=JSON.parse(e);qe.value=t.pendingObservations||[]}an.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),an.value=!0}}function Os(){try{const e=localStorage.getItem(Ka),t=e?JSON.parse(e):{};t.pendingObservations=qe.value,localStorage.setItem(Ka,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Dc(){an.value||Pc(),on.value||Lc()}function Lc(){on.value=kp(),Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function dm({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i}){var b,A;const l=Fe(),u=ea();an.value||Dc();const d=l.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const k=e.subfolder||e.category||"Unknown";f=xp(k)}const p=u.getAssignmentTag(),v=Sp({userId:d.id,sessionId:on.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i,skillPath:f,assignment:p}),g=$p(v);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if(Ns.value.totalObservations++,a?Ns.value.correctCount++:Ns.value.wrongCount++,d.dataConsent&&d.secretKey){const k=await fm(v,d);k.success||(console.warn("Failed to encrypt observation, storing unencrypted:",k.error),Wl(v,((b=d.classrooms)==null?void 0:b[0])||null))}else Wl(v,((A=d.classrooms)==null?void 0:A[0])||null);return{success:!0,observation:v}}async function fm(e,t){var s;try{const{encrypted_data:n,iv:o}=await Ar(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=Sc(e,a);return qe.value.push({encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()}),Os(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Wl(e,t){const s=Sc(e,t);qe.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Os()}async function vm(){const t=Fe().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<qe.value.length;n++){const o=qe.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await Ar(o.observation,t.secretKey);qe.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Os(),s}function pm(){return qe.value.length}function mm(){return[...qe.value]}function hm(e){qe.value=qe.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Os()}function gm(){qe.value=[],Os()}function ym(){return{...Ns.value}}function bm(){qe.value=[],on.value=null,Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},an.value=!1,Os()}function ms(){const e=N(()=>qe.value.length),t=N(()=>qe.value.length>0),s=N(()=>qe.value.some(o=>!o.encrypted)),n=N(()=>on.value);return{pendingObservations:qe,sessionId:on,sessionStats:Ns,initialized:an,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Dc,startNewSession:Lc,recordObservation:dm,encryptPendingObservations:vm,getPendingCount:pm,getPendingObservations:mm,removeSyncedObservations:hm,clearPendingObservations:gm,getSessionStats:ym,reset:bm,loadFromStorage:Pc,saveToStorage:Os}}function _m(){const e=ms(),t=T(null),s=T(0),n=T(!1),o=T(!1),a=Ht({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Ht({answered:{},wrongCard:null,correctCard:null}),i=Ht({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),l=T({N:[],E:[],S:[],W:[]}),u=T(null),d=T(1),f=N(()=>{var y;return((y=t.value)==null?void 0:y.steps)||[]}),p=N(()=>f.value.length>0),v=N(()=>f.value[s.value]||null),g=N(()=>f.value.some(y=>y.type==="bid")),b=N(()=>{var y;return((y=v.value)==null?void 0:y.type)==="bid"}),A=N(()=>{var y;for(let w=s.value;w>=0;w--)if((y=f.value[w])!=null&&y.clearCommentary)return w;return 0}),k=N(()=>{var y;return((y=t.value)==null?void 0:y.studentSeat)||"S"}),C=N(()=>t.value?uo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),_=N(()=>C.value===k.value),E=N(()=>{var R,I;if(!b.value||!_.value||a.auctionComplete||o.value)return!1;const y=v.value;if(!(y!=null&&y.bid))return!1;const w=(I=(R=t.value)==null?void 0:R.auction)==null?void 0:I[a.currentBidIndex];return w?X(y.bid)===X(w):!1}),Y=N(()=>{for(let y=a.displayedBids.length-1;y>=0;y--){const w=a.displayedBids[y];if(w&&w!=="Pass"&&w!=="X"&&w!=="XX")return w}return null}),Q=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;const y=a.displayedBids[a.displayedBids.length-1];if(y==="X"||y==="XX"||!Y.value)return!1;let w=-1;for(let K=a.displayedBids.length-1;K>=0;K--){const se=a.displayedBids[K];if(se&&se!=="Pass"&&se!=="X"&&se!=="XX"){w=K;break}}if(w===-1)return!1;const R=uo(w,t.value.auctionDealer||t.value.dealer),I=C.value;return(I==="N"||I==="S")&&(R==="E"||R==="W")||(I==="E"||I==="W")&&(R==="N"||R==="S")}),D=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let y=a.displayedBids.length-1;y>=0;y--){const w=a.displayedBids[y];if(w!=="Pass"){if(w==="XX")return!1;if(w==="X"){const R=uo(y,t.value.auctionDealer||t.value.dealer),I=C.value;return!(I==="N"&&R==="S"||I==="S"&&R==="N"||I==="E"&&R==="W"||I==="W"&&R==="E")}return!1}}return!1}),J=N(()=>{const y=v.value;return y!=null&&y.chooseCard?!r.answered[s.value]:!1}),z=N(()=>{var y;return((y=v.value)==null?void 0:y.chooseCard)||null}),de=N(()=>{if(!t.value)return[];const y=["N","E","S","W"];if(!p.value)return[];let w=null;const R=f.value;for(let I=0;I<=s.value&&I<R.length;I++){const U=R[I];U!=null&&U.showSeats&&(w=U.showSeats),U!=null&&U.showSeatsAfter&&(I<s.value||I===s.value&&o.value)&&(w=U.showSeatsAfter)}return w?y.filter(I=>!w.includes(I)):y}),ve=N(()=>{if(!t.value||!p.value)return null;let y={};const w=f.value;for(let R=0;R<=s.value&&R<w.length;R++){const I=w[R];if(I!=null&&I.showcards)for(const[U,K]of Object.entries(I.showcards))y[U]=K;if(I!=null&&I.showSeats)for(const U of I.showSeats)delete y[U];if(I!=null&&I.showSeatsAfter&&(R<s.value||R===s.value&&o.value))for(const U of I.showSeatsAfter)delete y[U]}return Object.keys(y).length>0?y:null}),ce=N(()=>{if(!t.value||!p.value)return{};let y={},w=new Set;const R=f.value;for(let U=0;U<=s.value&&U<R.length;U++){const K=R[U];if(K!=null&&K.showcards)for(const[se,fe]of Object.entries(K.showcards))y[se]=fe;if(K!=null&&K.showSeats)for(const se of K.showSeats)w.add(se)}const I={};for(const[U,K]of Object.entries(y))w.has(U)&&(I[U]=K);return I}),be=N(()=>{const y=ve.value;return y?Object.keys(y):[]}),we=N(()=>{const y=de.value,w=be.value;return w.length?y.filter(R=>!w.includes(R)):y});function ne(y){const w={spades:[],hearts:[],diamonds:[],clubs:[]},R={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const I of y){const U=I[0].toUpperCase(),K=I.slice(1).toUpperCase(),se=R[U];se&&w[se].push(K)}return w}const re=N(()=>{var R,I;if(!((R=t.value)!=null&&R.hands))return{};if((I=v.value)!=null&&I.reset)return t.value.hands;const y=ve.value,w={};for(const U of["N","E","S","W"]){if(y&&y[U]){w[U]=ne(y[U]);continue}const K=t.value.hands[U];if(!K){w[U]=null;continue}w[U]={spades:[...K.spades||[]],hearts:[...K.hearts||[]],diamonds:[...K.diamonds||[]],clubs:[...K.clubs||[]]};for(const se of l.value[U]){const fe={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[se.suit];if(fe&&w[U][fe]){const ge=w[U][fe].indexOf(se.card);ge!==-1&&w[U][fe].splice(ge,1)}}}return w}),q=N(()=>!(g.value&&!a.auctionComplete)),L=N(()=>{if(!p.value)return!0;let y=!0;const w=f.value;for(let R=0;R<=s.value&&R<w.length;R++){const I=w[R];(I==null?void 0:I.showAuction)!==null&&(I==null?void 0:I.showAuction)!==void 0&&(y=I.showAuction)}return y}),W=N(()=>{var w;if(!p.value)return!1;const y=f.value;for(let R=0;R<=s.value&&R<y.length;R++)if((w=y[R])!=null&&w.showLead)return!0;return!1}),G=N(()=>{var y;return(y=t.value)!=null&&y.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),V=N(()=>{if(!p.value||n.value)return!0;const y=v.value;return(y==null?void 0:y.type)==="end"&&!J.value}),ae=N(()=>p.value?!!(o.value||s.value>0||b.value&&a.currentBidIndex>0):!1);function Pe(){var w;l.value={N:[],E:[],S:[],W:[]};const y=f.value;for(let R=0;R<=s.value&&R<y.length;R++){const I=y[R];if((w=I==null?void 0:I.plays)!=null&&w.length)for(const U of I.plays){const K=U.split(/[,\s]+/);for(const se of K){if(!se)continue;const fe=se.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(fe){const ge=fe[1].toUpperCase(),Ie=fe[2].toUpperCase();let Ee=fe[3].toUpperCase();Ee==="10"&&(Ee="T"),l.value[ge].push({suit:Ie,card:Ee})}}}}}function We(){if(!t.value)return;const y=t.value.auction||[],w=wt(s.value);if(w===-1){for(;a.currentBidIndex<y.length;)a.displayedBids.push(y[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const R=f.value[w],I=X(R.bid);for(;a.currentBidIndex<y.length;){const U=uo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),K=X(y[a.currentBidIndex]);if(U===k.value&&K===I){u.value=Date.now(),d.value=1;return}a.displayedBids.push(y[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function wt(y){const w=f.value;for(let R=y;R<w.length;R++)if(w[R].type==="bid")return R;return-1}function Ze(y){if(!t.value||a.auctionComplete||!b.value)return!1;const w=t.value.auction[a.currentBidIndex],R=X(y)===X(w),I=s.value;R?I in i.wrongStepIndices&&(delete i.wrongStepIndices[I],H(!0)):(H(!1),i.wrongStepIndices[I]=!0,i.boardHadWrong=!0);const U=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,d.value=1,R?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=y,a.correctBid=w,a.wrongBidIndex=U);const K=s.value+1,se=f.value[K];return(se==null?void 0:se.type)==="bid"?(s.value=K,o.value=!1,We()):(o.value=!0,j(),s.value>=f.value.length-1&&S()),R}function j(){var w;if(a.auctionComplete)return;if(wt(s.value+1)===-1){const R=((w=t.value)==null?void 0:w.auction)||[];for(;a.currentBidIndex<R.length;)a.displayedBids.push(R[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function oe(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function te(y,w){if(!t.value||!J.value)return!1;const R=z.value;if(!R)return!1;const I=(y+w).toUpperCase(),U=s.value;let K=!1,se="";return R.anyOf?(K=R.cards.includes(I),se=R.cards[0]):(K=I===R.card,se=R.card),K?U in i.wrongStepIndices&&(delete i.wrongStepIndices[U],H(!0)):(H(!1),i.wrongStepIndices[U]=!0,i.boardHadWrong=!0),r.answered[U]=!0,K?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=I,r.correctCard=se),_e(),K}function ie(){r.wrongCard=null,r.correctCard=null}function _e(){var y;if(E.value||J.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,Pe(),((y=f.value[s.value])==null?void 0:y.type)==="bid"&&We(),s.value>=f.value.length-1){const w=f.value[s.value];(w==null?void 0:w.type)!=="bid"&&(w==null?void 0:w.type)!=="choose-card"&&S()}return!0}return S(),!1}function S(){n.value=!0,x()}function x(){if(f.value.some(w=>w.type==="bid"||w.type==="choose-card"))if(i.boardHadWrong){i.wrongCount++;const w=Object.keys(i.wrongStepIndices).length===0;H(w)}else i.correctCount++,H(!0)}function O(){if(oe(),ie(),o.value)return o.value=!1,M(s.value),!0;if(s.value>0){const y=s.value-1,w=f.value[y];return r.answered[y]&&delete r.answered[y],(w==null?void 0:w.type)==="bid"&&M(y),s.value=y,n.value=!1,o.value=!1,Pe(),!0}return!1}function M(y){var K;const w=f.value[y];if(!w||w.type!=="bid")return;const R=X(w.bid),I=((K=t.value)==null?void 0:K.auction)||[];let U=0;for(let se=0;se<I.length;se++)if(X(I[se])===R){U=se;break}a.currentBidIndex=U,a.displayedBids=I.slice(0,U),a.auctionComplete=!1,u.value=Date.now(),d.value=1}async function H(y){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:y?"PASS":"FAIL",correct:y,attemptNumber:1,timeTakenMs:0})}catch(w){console.error("Failed to record board observation:",w)}}function F(y){var w,R;t.value=y,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},l.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(w=y==null?void 0:y.steps)!=null&&w.length&&(Pe(),((R=y.steps[0])==null?void 0:R.type)==="bid"&&We())}function ee(){i.correctCount=0,i.wrongCount=0}function X(y){if(!y)return"";const R=y.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return R==="PASS"||R==="P"?"PASS":R==="X"||R==="DBL"||R==="DOUBLE"?"X":R==="XX"||R==="RDBL"||R==="REDOUBLE"?"XX":R.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:i,steps:f,hasSteps:p,currentStep:v,hasBidSteps:g,isBidStep:b,commentaryStartIndex:A,studentSeat:k,currentTurnSeat:C,isStudentTurn:_,hasBidPrompt:E,lastContractBid:Y,canDouble:Q,canRedouble:D,canGoBack:ae,hasCardChoice:J,currentChooseCard:z,hiddenSeats:we,hands:re,showHcp:q,showcardsPlayedCards:ce,isComplete:V,showAuctionTable:L,showOpeningLead:W,openingLead:G,advance:_e,makeBid:Ze,clearFeedback:oe,goBack:O,makeCardChoice:te,clearCardFeedback:ie,loadDeal:F,resetStats:ee,observationStore:e}}const Oo="bridgePractice",Bc="bridgePracticeUIPrefs",tt=T({teacherName:null,availableClassrooms:[],configuredAt:null}),rn=T({showLoadPbnOption:!1}),Ro=T(!1);function Uc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Mc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:Uc(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function wm(){return new URLSearchParams(window.location.search).get("collection")}function Cm(){return new URLSearchParams(window.location.search).get("lesson")}function Sm(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function $m(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function km(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function xm(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const Am=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Fc(){try{const e=localStorage.getItem(Oo);if(e){const t=JSON.parse(e);t.appConfig&&(tt.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function Nm(){try{const e=localStorage.getItem(Bc);if(e){const t=JSON.parse(e);rn.value={...rn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function Tm(){try{localStorage.setItem(Bc,JSON.stringify(rn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function Em(e,t){rn.value[e]=t,Tm()}function Nr(){try{const e=localStorage.getItem(Oo),t=e?JSON.parse(e):{};t.appConfig=tt.value,localStorage.setItem(Oo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function jc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function Om(){if(Ro.value)return;Fc(),Nm();const{teacher:e,classrooms:t}=Mc();(e||t.length>0)&&(e&&!tt.value.teacherName&&(tt.value.teacherName=e),t.length>0&&(tt.value.availableClassrooms=jc(tt.value.availableClassrooms||[],t)),tt.value.configuredAt||(tt.value.configuredAt=new Date().toISOString()),Nr()),Ro.value=!0}function Rm(){try{const e=localStorage.getItem(Oo);return e?JSON.parse(e):null}catch{return null}}function Im(){tt.value={teacherName:null,availableClassrooms:[],configuredAt:null},Nr(),Ro.value=!1}function Zn(){const e=N(()=>tt.value.availableClassrooms.length===0),t=N(()=>tt.value.availableClassrooms.length>1),s=N(()=>tt.value.availableClassrooms.length===1),n=N(()=>s.value?tt.value.availableClassrooms[0]:null),o=N(()=>tt.value.teacherName),a=N(()=>tt.value.availableClassrooms),r=N(()=>rn.value.showLoadPbnOption);return{appConfig:tt,initialized:Ro,uiPrefs:rn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:Om,loadFromStorage:Fc,saveToStorage:Nr,clearConfig:Im,getStorageData:Rm,getCollectionFromUrl:wm,setCollectionInUrl:Sm,getLessonFromUrl:Cm,setLessonInUrl:$m,getDealFromUrl:km,setDealInUrl:xm,setUIPref:Em,COLLECTIONS:Am,parseUrlParams:Mc,classroomIdToName:Uc,mergeClassrooms:jc}}const Pm="https://api.bridge-classroom.com/api",Dm="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Tr=T([]),Je=T([]),Io=T(!1),Po=T(null),Ln=T(null),Do=T(!1),Lm=5*60*1e3;async function Bm(e){const t=await fetch(`${Pm}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":Dm}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Um(e,t){try{return{...await Nc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function Mm(){return ms().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Hc(e=!1){const s=Fe().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=Mm();if(!e&&Ln.value&&Date.now()-new Date(Ln.value).getTime()<Lm&&Je.value.length>0)return Fm(n),{success:!0,cached:!0};Io.value=!0,Po.value=null;let o=[];try{const i=await Bm(s.id);if(Tr.value=i,s.secretKey&&i.length>0){const l=i.map(d=>Um(d,s.secretKey));o=(await Promise.all(l)).filter(d=>d!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Po.value=i.message)}const a=new Set(o.map(i=>i.id)),r=n.filter(i=>!a.has(i.id));return Je.value=[...o,...r],Ln.value=new Date().toISOString(),Io.value=!1,{success:!0,count:Je.value.length}}function Fm(e){const t=new Set(Je.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Je.value=[...Je.value,...s])}async function jm(){if(Do.value)return;Fe().isAuthenticated.value&&await Hc(),Do.value=!0}function Hm(){Tr.value=[],Je.value=[],Ln.value=null,Do.value=!1}function Wc(){const e={};for(const t of Je.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Vl(){const e={};for(const t of Je.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Kl(){const e={};for(const t of Je.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Gl(e=10){return[...Je.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function zl(){const e=new Date().toISOString().split("T")[0];return Je.value.filter(t=>t.timestamp.startsWith(e))}function Jl(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Je.value.filter(n=>n.timestamp>=s)}function Wm(){const e=Wc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const i=new Date(t[r]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Er(){const e=N(()=>Je.value.length),t=N(()=>Je.value.filter(v=>v.correct).length),s=N(()=>Je.value.filter(v=>!v.correct).length),n=N(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=N(()=>{const v=zl(),g=v.filter(A=>A.correct).length,b=v.length;return{total:b,correct:g,incorrect:b-g,accuracy:b>0?Math.round(g/b*100):0}}),a=N(()=>{const v=Jl(),g=v.filter(A=>A.correct).length,b=v.length;return{total:b,correct:g,incorrect:b-g,accuracy:b>0?Math.round(g/b*100):0}}),r=N(()=>Wm()),i=N(()=>Vl()),l=N(()=>Kl()),u=N(()=>Gl(20)),d=N(()=>Je.value.length>0),f=N(()=>Io.value),p=N(()=>Po.value!==null);return{observations:Tr,decryptedObservations:Je,loading:Io,error:Po,lastFetchedAt:Ln,initialized:Do,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:i,sessions:l,recentObservations:u,hasData:d,isLoading:f,hasError:p,initialize:jm,fetchProgress:Hc,clearCache:Hm,getObservationsByDate:Wc,getStatsBySkill:Vl,getSessions:Kl,getRecentObservations:Gl,getTodayObservations:zl,getThisWeekObservations:Jl}}const $s={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},gt={NONE:"none",SILVER:"silver",GOLD:"gold"},Vm=6;function Km(e){return e.slice(0,10)}function Vc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Kc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Yl=60*60*1e3;function Gc(e){if(e.length===0)return $s.GREY;const t=e[e.length-1];if(!t.correct)return $s.RED;const s=Date.now()-Yl;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return $s.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return $s.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=Yl?$s.ORANGE:$s.GREEN}function zc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function Jc(e){if(e.length===0)return gt.NONE;const t=new Set;for(const r of e)t.add(Km(r.timestamp));const s=[...t].filter(r=>zc(e,r)).sort();if(s.length<2)return gt.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)Vc(a,s[r])>=Vm&&(o++,a=s[r],o>n&&(n=o));return n>=3?gt.GOLD:n>=2?gt.SILVER:gt.NONE}function Gm(e){const t=e.observations.value||[];let s=[];try{s=ms().getPendingObservations().filter(i=>i.metadata).map(i=>{const l=i.metadata;return{id:l.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:l.timestamp||i.queuedAt,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number,session_id:l.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function zm(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var l;return(i.deal_number??((l=i.deal)==null?void 0:l.deal_number))===o}).sort((i,l)=>i.timestamp.localeCompare(l.timestamp)),r=Kc(a);return{boardNumber:o,status:Gc(a),achievement:Jc(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function Jm(e){return!e||e.length===0?{achievement:gt.NONE}:e.every(n=>n.achievement===gt.GOLD)?{achievement:gt.GOLD}:e.every(n=>n.achievement===gt.SILVER||n.achievement===gt.GOLD)?{achievement:gt.SILVER}:{achievement:gt.NONE}}const Yc="bridgeLessonBoards",Jn=T(Ym()),ya=new Set;function Ym(){try{const e=localStorage.getItem(Yc);return e?JSON.parse(e):{}}catch{return{}}}function qm(){try{localStorage.setItem(Yc,JSON.stringify(Jn.value))}catch{}}function qc(e,t){Jn.value={...Jn.value,[e]:t},qm()}function Xm(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Qm(e){const t=Zn(),s=e.filter(n=>!Jn.value[n]&&!ya.has(n));if(s.length!==0){for(const n of s)ya.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(r);if(!i.ok)continue;const l=await i.text(),u=Xm(l);if(u.length>0){qc(n,u);break}}catch{continue}}}finally{ya.delete(n)}}))}}function Zm(e){var n,o;const t=Jn.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||i==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(i),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:r.lastActivity};const l=Math.max(...r.boards),u=[];for(let d=1;d<=l;d++)u.push(d);return{subfolder:a,boardNumbers:u,lastActivity:r.lastActivity}})}function un(){const e=ds();function t(){return Gm(e)}return{STATUS:$s,ACHIEVEMENT:gt,getObservations:t,computeBoardMastery:zm,computeLessonAchievement:Jm,extractLessonsFromObservations:Zm,saveLessonBoardNumbers:qc,fetchMissingBoardCounts:Qm,groupIntoBoardAttempts:Kc,calculateCurrentStatus:Gc,calculateAchievement:Jc,hasGreenDay:zc,daysBetween:Vc}}const kn="https://api.bridge-classroom.com/api",xn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Lo=T(!1),Or=T(null),ta=T([]),us=T({}),Bo=T(!1),Uo=T(null),Rr=T(!1),Mo={},eh=2*60*1e3;async function th(){var s;const e=Fe(),t=e.currentUser.value;if(!t||!t.email){Lo.value=!1;return}try{const n=await fetch(`${kn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":xn}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;Or.value=a.id;const r=await fetch(`${kn}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":xn}});if(!r.ok)return;const l=(await r.json()).grants||[],u=new Set(l.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const d=await fetch(`${kn}/users`,{headers:{"x-api-key":xn}});if(!d.ok)return;const p=(await d.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(ta.value=p.filter(g=>{var b;return u.has(g.id)&&g.id!==t.id&&((b=g.email)==null?void 0:b.toLowerCase())!==v}).sort((g,b)=>`${g.first_name} ${g.last_name}`.localeCompare(`${b.first_name} ${b.last_name}`)),Lo.value=!0,Rr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${kn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":xn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Xc(e){const t=us.value[e],s=Mo[e];if(t&&s&&Date.now()-s<eh)return t;try{const n=await fetch(`${kn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":xn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=((await n.json()).observations||[]).map(r=>({id:r.id||r.observation_id,timestamp:r.timestamp,skill_path:r.skill_path,correct:r.correct,deal_subfolder:r.deal_subfolder,deal_number:r.deal_number}));return us.value={...us.value,[e]:a},Mo[e]=Date.now(),a}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function sh(){Bo.value=!0,Uo.value=null;try{await Promise.allSettled(ta.value.map(s=>Xc(s.id)));const e=un(),t=new Set;for(const s of Object.values(us.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Uo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Bo.value=!1}}function nh(e){const t=us.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=un(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const i=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const l of i)o[l.status]=(o[l.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function oh(e,t=3){const s=us.value[e]||[],n=ds(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function ah(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function rh(){Lo.value=!1,Or.value=null,ta.value=[],us.value={},Bo.value=!1,Uo.value=null,Rr.value=!1;for(const e of Object.keys(Mo))delete Mo[e]}function eo(){return{isTeacher:Lo,viewerId:Or,students:ta,studentObservations:us,loading:Bo,error:Uo,initialized:Rr,checkTeacherStatus:th,fetchStudentObservations:Xc,loadAllStudentSummaries:sh,getStudentMasterySummary:nh,getStudentRecentLessons:oh,formatTimeSince:ah,reset:rh}}const Ga="https://api.bridge-classroom.com/api",za="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ja=T(!1),js=T(null),Xt=T(null),Yn=T([]),ln=T([]),Ir=T("lessons"),sa=T(!0),dn=T(!1),to=T([]);function lh(e){dn.value=!0,to.value=e}function ih(){dn.value=!1,to.value=[]}function so(){return dn.value?to.value:Yn.value}async function Qc(){const e=Fe(),t=eo(),s=e.currentUser.value;if(!s){ln.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Ga}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":za}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${Ga}/users`,{headers:{"x-api-key":za}});if(r.ok){const{users:i}=await r.json(),l=new Set(a.map(u=>u.grantor_id));for(const u of i)l.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}ln.value=n}async function Pr(e=!1){if(dn.value)return{success:!0};const t=Fe(),s=Er(),n=t.currentUser.value;if(!n)return js.value="No authenticated user",{success:!1,error:js.value};Ja.value=!0,js.value=null;try{if(!Xt.value||Xt.value===n.id)Xt.value=n.id,await s.fetchProgress(e),Yn.value=s.decryptedObservations.value;else{const o=await fetch(`${Ga}/observations?user_id=${Xt.value}&limit=10000`,{headers:{"x-api-key":za}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();Yn.value=a.observations||[]}return{success:!0}}catch(o){return js.value=o.message,{success:!1,error:o.message}}finally{Ja.value=!1}}async function ch(e){Xt.value=e,await Pr(!0)}const Ya=N(()=>{var n;const e=so(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:tu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),qa=N(()=>{const e=so(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Ap(o),r=$c(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Np(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Zc=N(()=>sa.value?Ya.value.filter(e=>e.total>0):Ya.value),eu=N(()=>sa.value?qa.value.filter(e=>e.total>0):qa.value);function tu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const uh=N(()=>Ir.value==="lessons"?Zc.value:eu.value),dh=N(()=>ln.value.length>1),fh=N(()=>ln.value.find(e=>e.id===Xt.value)||null),vh=N(()=>so().length>0),ph=N(()=>so().length),mh=N(()=>{const e=so();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function hh(){const t=Fe().currentUser.value;t&&(Xt.value=t.id,await Qc(),await Pr())}function gh(){Yn.value=[],ln.value=[],Xt.value=null,Ir.value="lessons",sa.value=!0,js.value=null,dn.value=!1,to.value=[]}function ds(){return{loading:Ja,error:js,selectedUserId:Xt,observations:Yn,accessibleUsers:ln,activeTab:Ir,onlyWithObservations:sa,useTestData:dn,testObservations:to,enableTestMode:lh,disableTestMode:ih,lessonStats:Ya,taxonStats:qa,filteredLessonStats:Zc,filteredTaxonStats:eu,currentStats:uh,canViewOtherUsers:dh,selectedUser:fh,hasData:vh,totalObservations:ph,overallSuccessRate:mh,initialize:hh,loadAccomplishments:Pr,selectUser:ch,fetchAccessibleUsers:Qc,reset:gh,formatLessonName:tu}}const Dr="https://api.bridge-classroom.com/api",su="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",yt=T("idle"),nu=T(null),Fs=T(null),Hs=T(0),Ws=T(navigator.onLine),An=T(!1),ql=5,yh=1e3,bh=6e4,_h=5e3;let qs=null;function wh(e){const t=Math.min(yh*Math.pow(2,e),bh);return t+Math.random()*t*.25}async function ou(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${Dr}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function au(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${Dr}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":su},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function no(){var n,o;const e=Fe(),t=ms();if(!navigator.onLine)return yt.value="offline",{success:!1,offline:!0};yt.value="syncing",Fs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const l=await ou(a);if(l.success)e.updateUser(a.id,{serverRegistered:!0}),An.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(l.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),yt.value="error",Fs.value="Account already exists. Please use recovery.",An.value=!0,s;console.warn("User registration failed:",l.error),An.value=!0,Fs.value=`Registration failed: ${l.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let i=!1;if(a!=null&&a.dataConsent){const l=t.getPendingObservations();if(l.length>0){const u=await au(l);if(u.success&&u.synced>0){const d=l.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var p;return(p=f.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await ds().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,Fs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return An.value||i?yt.value="error":(yt.value="idle",nu.value=new Date().toISOString(),Hs.value=0),s}catch(a){return console.error("Sync failed:",a),Fs.value=a.message,yt.value="error",s.success=!1,s}}function Xa(){qs&&clearTimeout(qs),qs=setTimeout(async()=>{await no()},_h)}async function ru(){return qs&&(clearTimeout(qs),qs=null),await no()}async function lu(){if(Hs.value>=ql){console.log("Max retries reached, giving up"),yt.value="error";return}const e=wh(Hs.value);Hs.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Hs.value}/${ql})`),setTimeout(async()=>{const t=await no();!t.success&&t.offline!==!0&&lu()},e)}function Ch(){var i;const e=Fe(),t=ms(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(l=>l.encrypted);if(o.length===0)return;const a={observations:o.map(l=>({encrypted_data:l.encrypted_data,iv:l.iv,metadata:l.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${Dr}/observations?api_key=${su}`,r),console.log("Sent beacon with",o.length,"observations")}function Sh(){window.addEventListener("online",()=>{Ws.value=!0,console.log("Back online, triggering sync"),ru()}),window.addEventListener("offline",()=>{Ws.value=!1,yt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Ws.value&&(console.log("Tab visible, triggering sync"),Xa())}),window.addEventListener("beforeunload",Ch),setInterval(()=>{document.visibilityState==="visible"&&Ws.value&&Xa()},5*60*1e3)}async function $h(){Sh(),navigator.onLine?await no():yt.value="offline"}function iu(){const e=N(()=>yt.value==="syncing"),t=N(()=>yt.value==="offline"||!Ws.value),s=N(()=>yt.value==="error"),n=N(()=>ms().pendingCount.value>0);return{syncState:yt,lastSyncAt:nu,lastError:Fs,retryCount:Hs,isOnline:Ws,registrationFailed:An,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:$h,performSync:no,triggerSync:Xa,forceSync:ru,retrySync:lu,registerUserWithServer:ou,syncObservationsToServer:au}}const Lr="https://api.bridge-classroom.com/api",cu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Qt=T(null),Qa=T(!1),oo=T(null);async function kh(){Qa.value=!0;try{const e=await fetch(`${Lr}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=Qt.value;Qt.value=t.announcement||null,Qt.value&&(!s||s.id!==Qt.value.id)&&(oo.value=null)}catch{}finally{Qa.value=!1}}async function xh(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${Lr}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":cu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return Qt.value=a.announcement||null,oo.value=null,a}async function Ah(){const e=await fetch(`${Lr}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":cu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);Qt.value=null,oo.value=null}function Nh(){Qt.value&&(oo.value=Qt.value.id)}function Br(){return{announcement:Qt,loading:Qa,dismissed:oo,loadAnnouncement:kh,setAnnouncement:xh,clearAnnouncement:Ah,dismiss:Nh}}const Th={key:0,class:"minimal-hand"},Eh={class:"seat-label-inline"},Oh={class:"seat-label"},Rh={key:0,class:"suits"},Ih={key:0,class:"suit-row"},Ph={key:0,class:"cards clickable-cards"},Dh=["onClick"],Lh={key:1,class:"cards"},Bh={key:2,class:"cards"},Uh={key:1,class:"hidden-hand"},Mh={key:2,class:"hcp"},Fh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Cc,n=N(()=>Ha(t.seat)),o=N(()=>_p(t.hand)),a=N(()=>t.hand?s.reduce((A,k)=>{var C;return A+(((C=t.hand[k])==null?void 0:C.length)||0)},0):0),r=N(()=>a.value>0&&a.value<5);function i(A){return t.hand&&t.hand[A]&&t.hand[A].length>0}function l(A){return kr[A]}function u(A){return yp(A)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(A){return d[A]||A}function p(A){if(!t.hand||!t.hand[A])return"";const k=t.hand[A];return k.length===0?"":k.map(ga).join(" ")}const v=N(()=>t.playedCards&&t.playedCards.length>0),g=N(()=>{if(!t.playedCards)return null;const A=new Set;for(const k of t.playedCards){const C=k[0].toUpperCase(),_=k.slice(1).toUpperCase(),E={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[C];E&&A.add(`${E}:${_}`)}return A});function b(A,k){return g.value?g.value.has(`${A}:${k}`):!1}return(A,k)=>(m(),h("div",{class:ue(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(m(),h("div",Th,[c("span",Eh,$(e.seat),1),(m(!0),h(Z,null,le(P(s),C=>(m(),h("span",{key:C,class:ue(["suit-symbol-inline",u(C)])},$(l(C)),3))),128))])):(m(),h(Z,{key:1},[c("div",Oh,$(n.value),1),!e.hidden&&e.hand?(m(),h("div",Rh,[(m(!0),h(Z,null,le(P(s),C=>(m(),h(Z,{key:C},[!r.value||i(C)?(m(),h("div",Ih,[c("span",{class:ue(["suit-symbol",u(C)])},$(l(C)),3),e.clickable?(m(),h("span",Ph,[(m(!0),h(Z,null,le(e.hand[C],_=>(m(),h("span",{key:_,class:ue(b(C,_)?"card-played":"card-clickable"),onClick:E=>!b(C,_)&&A.$emit("card-click",{suit:f(C),rank:_})},$(P(ga)(_)),11,Dh))),128))])):v.value?(m(),h("span",Lh,[(m(!0),h(Z,null,le(e.hand[C],_=>(m(),h("span",{key:_,class:ue({"card-played":b(C,_)})},$(P(ga)(_)),3))),128))])):(m(),h("span",Bh,$(p(C)),1))])):B("",!0)],64))),128))])):e.hidden?(m(),h("div",Uh,[...k[0]||(k[0]=[c("div",{class:"card-back"},null,-1)])])):B("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(m(),h("div",Mh,$(o.value)+" HCP ",1)):B("",!0)],64))],2))}},fo=ye(Fh,[["__scopeId","data-v-128fc7ed"]]),jh={class:"ns-column north-row"},Hh={key:0,class:"position north"},Wh={key:0,class:"position west"},Vh={class:"center"},Kh={key:1,class:"position east"},Gh={class:"ns-column south-row"},zh={key:0,class:"position south"},Jh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return m(),h("div",{class:ue(["bridge-table",{compact:e.compact}])},[c("div",jh,[!e.hiddenSeats.includes("N")&&e.hands.N?(m(),h("div",Hh,[me(fo,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(m(),h("div",Wh,[me(fo,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),c("div",Vh,[Dd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(m(),h("div",Kh,[me(fo,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),c("div",Gh,[!e.hiddenSeats.includes("S")&&e.hands.S?(m(),h("div",zh,[me(fo,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)])],2)}}},Yh=ye(Jh,[["__scopeId","data-v-ec6230a9"]]),qh={class:"bidding-box"},Xh={class:"bid-section"},Qh={class:"levels"},Zh=["onClick"],eg={class:"strains"},tg=["disabled","onClick"],sg=["innerHTML"],ng={class:"special-bids"},og=["disabled"],ag=["disabled"],rg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=T(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=N(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),i=N(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const v=p[1].toUpperCase();return f.indexOf(v==="N"?"NT":v)});function l(f){o.value=f}function u(f,p){if(!f)return!1;const g=["C","D","H","S","NT"].indexOf(p);return f>r.value||f===r.value&&g>i.value}function d(f,p){u(f,p)&&n("bid",`${f}${p}`)}return(f,p)=>(m(),h("div",qh,[c("div",Xh,[c("div",Qh,[(m(),h(Z,null,le(7,v=>c("button",{key:v,class:ue(["level-btn",{active:o.value===v}]),onClick:g=>l(v)},$(v),11,Zh)),64))]),c("div",eg,[(m(),h(Z,null,le(a,v=>c("button",{key:v.value,class:ue(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:g=>d(o.value,v.value)},[c("span",{innerHTML:v.display},null,8,sg)],10,tg)),64))])]),c("div",ng,[c("button",{class:"special-btn pass",onClick:p[0]||(p[0]=v=>f.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=v=>f.$emit("bid","X"))}," Double ",8,og),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=v=>f.$emit("bid","XX"))}," Redouble ",8,ag)])]))}},lg=ye(rg,[["__scopeId","data-v-38ccb98f"]]),ig={class:"auction-table"},cg={class:"rounds"},ug=["innerHTML"],dg={key:1,class:"turn-indicator"},fg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=N(()=>["W","N","E","S"].indexOf(t.dealer)),n=N(()=>{const u=[],d=t.bids;let f=0,p=0;for(;f<d.length||p===0&&d.length>0;){const v=[null,null,null,null],g=p===0?s.value:0;for(let b=g;b<4&&f<d.length;b++)v[b]=d[f],f++;if(v.some(b=>b!==null)&&u.push(v),p++,p>20)break}if(t.currentBidIndex>=d.length){const v=u[u.length-1],g=v?v.filter(b=>b!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const b=[null,null,null,null];u.push(b)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function a(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function r(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function i(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function l(u){return xr(u).html}return(u,d)=>(m(),h("div",ig,[d[0]||(d[0]=xo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",cg,[(m(!0),h(Z,null,le(n.value,(f,p)=>(m(),h("div",{key:p,class:"round"},[(m(!0),h(Z,null,le(f,(v,g)=>(m(),h("div",{key:g,class:ue(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":i(p,g)}])},[v?(m(),h("span",{key:0,innerHTML:l(v)},null,8,ug)):e.showTurnIndicator&&a(p,g)?(m(),h("span",dg,"?")):B("",!0)],2))),128))]))),128))])]))}},vg=ye(fg,[["__scopeId","data-v-ac265db8"]]),pg={class:"deal-info"},mg={class:"board-number"},hg={key:0,class:"board-popup"},gg={class:"popup-list"},yg=["onClick"],bg={class:"info-row"},_g={class:"info-item"},wg={class:"value"},Cg={class:"info-item"},Sg={key:0,class:"contract-row"},$g={class:"info-item"},kg=["innerHTML"],xg={key:0,class:"label"},Ag={key:0,class:"info-item"},Ng=["innerHTML"],Tg={key:1,class:"title"},Eg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=T(!1);function a(p){n("goto",p),o.value=!1}const r=N(()=>Ha(s.dealer)),i=N(()=>Ha(s.declarer)),l=N(()=>bp(s.vulnerable)),u=N(()=>{var v;const p=(v=s.vulnerable)==null?void 0:v.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),d=N(()=>s.contract?xr(s.contract).html:""),f=N(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],v=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},b={S:"black",H:"red",D:"red",C:"black"},A=g[p]||p;return`<span class="${b[p]||"black"}">${A}</span>${v==="T"?"10":v}`});return(p,v)=>(m(),h("div",pg,[c("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=g=>o.value=!0),onMouseleave:v[1]||(v[1]=g=>o.value=!1)},[c("div",mg,"Board "+$(e.boardNumber),1),o.value&&e.totalDeals>1?(m(),h("div",hg,[v[2]||(v[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",gg,[(m(!0),h(Z,null,le(e.totalDeals,g=>(m(),h("button",{key:g,class:ue(["popup-item",{active:g-1===e.currentIndex}]),onClick:b=>a(g-1)}," Board "+$(e.dealBoardNumbers[g-1]||g),11,yg))),128))])])):B("",!0)],32),c("div",bg,[c("div",_g,[v[3]||(v[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",wg,$(r.value),1)]),c("div",Cg,[v[4]||(v[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:ue(["value",u.value])},$(l.value),3)])]),e.showContract&&e.contract?(m(),h("div",Sg,[c("div",$g,[c("span",{class:"value contract",innerHTML:d.value},null,8,kg),e.declarer?(m(),h("span",xg,"by "+$(i.value),1)):B("",!0)]),e.openingLead?(m(),h("div",Ag,[v[5]||(v[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:f.value},null,8,Ng)])):B("",!0)])):B("",!0),e.title?(m(),h("div",Tg,$(e.title),1)):B("",!0)]))}},Og=ye(Eg,[["__scopeId","data-v-5a844c49"]]),Rg={class:"feedback-header"},Ig={key:0,class:"icon"},Pg={key:1,class:"icon"},Dg={class:"title"},Lg={key:0,class:"feedback-content"},Bg={class:"bid-comparison"},Ug={class:"bid-item your-bid"},Mg=["innerHTML"],Fg={class:"bid-item correct-bid"},jg=["innerHTML"],Hg={key:1,class:"feedback-content"},Wg={class:"bid-comparison"},Vg={class:"bid-item your-bid"},Kg=["innerHTML"],Gg={class:"bid-item correct-bid"},zg=["innerHTML"],Jg=["innerHTML"],Yg={class:"actions"},qg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=N(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return xr(a).html}function o(a){return wp(a).html}return(a,r)=>e.visible?(m(),h("div",{key:0,class:ue(["feedback-panel",e.type])},[c("div",Rg,[e.type==="wrong"?(m(),h("span",Ig,"")):e.type==="correct"?(m(),h("span",Pg,"")):B("",!0),c("span",Dg,$(s.value),1)]),e.wrongBid?(m(),h("div",Lg,[c("div",Bg,[c("div",Ug,[r[1]||(r[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Mg)]),c("div",Fg,[r[2]||(r[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,jg)])])])):B("",!0),e.wrongCardCode?(m(),h("div",Hg,[c("div",Wg,[c("div",Vg,[r[3]||(r[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Kg)]),c("div",Gg,[r[4]||(r[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,zg)])])])):B("",!0),e.commentary?(m(),h("div",{key:2,class:"commentary",innerHTML:P(Ms)(e.commentary)},null,8,Jg)):B("",!0),c("div",Yg,[e.showContinue?(m(),h("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=i=>a.$emit("continue"))}," Continue ")):B("",!0)])],2)):B("",!0)}},Xl=ye(qg,[["__scopeId","data-v-04368462"]]),Xg={class:"welcome-screen"},Qg={class:"welcome-card"},Zg={class:"welcome-header"},ey={key:0,class:"welcome-body"},ty={class:"form-group"},sy={key:0,class:"error-message"},ny={class:"form-group"},oy={key:0,class:"error-message"},ay={class:"form-group"},ry={key:0,class:"error-message"},ly={key:0,class:"form-group"},iy={class:"checkbox-group"},cy=["value","checked","onChange"],uy={key:1,class:"form-group"},dy={class:"single-classroom"},fy={class:"form-group consent-group"},vy={class:"checkbox-label consent-label"},py={key:0,class:"consent-details"},my=["disabled"],hy={key:0},gy={key:1},yy={key:1,class:"welcome-body returning"},by={key:2,class:"welcome-body switcher"},_y={class:"user-list"},wy=["onClick"],Cy={class:"user-name"},Sy={key:0,class:"user-class"},$y={key:3,class:"welcome-body recovery-sent"},ky={class:"subtitle"},xy={class:"recovery-info"},Ay={class:"code-entry"},Ny=["disabled"],Ty={key:0},Ey={key:1},Oy={key:0,class:"error-message"},Ry={key:4,class:"welcome-body recovery-claiming"},Iy={class:"subtitle"},Py={key:0,class:"recovery-error-panel"},Dy={class:"error-message"},Ly={key:1,class:"loading-spinner"},By={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=Zn(),o=Fe(),a="https://api.bridge-classroom.com/api",r=T("form"),i=T(""),l=T(""),u=T(""),d=T([]),f=T(!0),p=T({firstName:"",lastName:"",email:"",classrooms:""}),v=T(!1),g=T(!1),b=T(""),A=T(""),k=T(""),C=T(""),_=T("");_t(async()=>{o.initialize(),n.initializeFromUrl();const G=new URLSearchParams(window.location.search),V=G.get("recover"),ae=G.get("user_id");if(V&&ae){await ve(ae,V),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const E=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Q=N(()=>i.value.trim().length>0&&l.value.trim().length>0&&u.value.trim().length>0&&E.test(u.value.trim())),D=N(()=>o.currentUser.value?o.currentUser.value.firstName:""),J=N(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function z(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let G=!0;return i.value.trim()||(p.value.firstName="First name is required",G=!1),l.value.trim()||(p.value.lastName="Last name is required",G=!1),u.value.trim()?E.test(u.value.trim())||(p.value.email="Please enter a valid email address",G=!1):(p.value.email="Email is required",G=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",G=!1),G}async function de(){const G=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const V=await o.requestRecovery(G,a);return V.success?(A.value=G,C.value=V.message,r.value="recovery-sent",!1):V.message&&V.message.includes("No account found")?!0:(p.value.email=V.message||"Unable to verify email. Please try again.",!1)}catch(V){return console.error("Failed to check email on server:",V),Y?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ve(G,V){r.value="recovery-claiming",g.value=!0,b.value="Recovering your account...",k.value="";try{const ae=await o.claimRecovery(G,V,a);ae.success&&ae.user?s("userReady",ae.user):(k.value=ae.error||"Recovery failed. Please try again.",r.value="form")}catch(ae){console.error("[Recovery] Exception:",ae),k.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,b.value=""}}async function ce(){if(_.value.trim().length===6){g.value=!0,b.value="Verifying code...",k.value="";try{const G=await o.claimRecoveryByCode(A.value.trim(),_.value.trim(),a);G.success&&G.user?s("userReady",G.user):k.value=G.error||"Invalid code. Please check and try again."}catch(G){console.error("Recovery code claim failed:",G),k.value="Unable to connect to server. Please try again."}finally{g.value=!1,b.value=""}}}async function be(){if(!z())return;if(g.value=!0,b.value="Checking account...",!await de()){g.value=!1,b.value="";return}let V=[];n.hasSingleClassroom.value?V=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(V=[...d.value]),b.value="Creating your secure encryption key...";try{const ae=await o.createUser({firstName:i.value,lastName:l.value,email:u.value,classrooms:V,dataConsent:f.value,apiUrl:a});s("userReady",ae)}catch(ae){console.error("Failed to create user:",ae),p.value.email="Failed to create account. Please try again."}finally{g.value=!1,b.value=""}}function we(){s("userReady",o.currentUser.value)}function ne(){r.value="switcher"}function re(G){o.switchUser(G),s("userReady",o.currentUser.value)}function q(){i.value="",l.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function L(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function W(G){const V=d.value.indexOf(G);V===-1?d.value.push(G):d.value.splice(V,1)}return(G,V)=>(m(),h("div",Xg,[c("div",Qg,[c("div",Zg,[c("h1",null,$(J.value),1)]),r.value==="form"?(m(),h("div",ey,[V[16]||(V[16]=c("h2",null,"Welcome!",-1)),V[17]||(V[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:Dt(be,["prevent"]),class:"user-form"},[c("div",ty,[V[8]||(V[8]=c("label",{for:"firstName"},"First Name",-1)),Re(c("input",{id:"firstName","onUpdate:modelValue":V[0]||(V[0]=ae=>i.value=ae),type:"text",placeholder:"Enter your first name",class:ue({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[pt,i.value]]),p.value.firstName?(m(),h("span",sy,$(p.value.firstName),1)):B("",!0)]),c("div",ny,[V[9]||(V[9]=c("label",{for:"lastName"},"Last Name",-1)),Re(c("input",{id:"lastName","onUpdate:modelValue":V[1]||(V[1]=ae=>l.value=ae),type:"text",placeholder:"Enter your last name",class:ue({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[pt,l.value]]),p.value.lastName?(m(),h("span",oy,$(p.value.lastName),1)):B("",!0)]),c("div",ay,[V[10]||(V[10]=c("label",{for:"email"},"Email Address",-1)),Re(c("input",{id:"email","onUpdate:modelValue":V[2]||(V[2]=ae=>u.value=ae),type:"email",placeholder:"Enter your email address",class:ue({"has-error":p.value.email}),autocomplete:"email"},null,2),[[pt,u.value]]),p.value.email?(m(),h("span",ry,$(p.value.email),1)):B("",!0),V[11]||(V[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),P(n).hasMultipleClassrooms.value?(m(),h("div",ly,[V[12]||(V[12]=c("label",null,"Select Your Class(es)",-1)),c("div",iy,[(m(!0),h(Z,null,le(P(n).availableClassrooms.value,ae=>(m(),h("label",{key:ae.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:ae.id,checked:d.value.includes(ae.id),onChange:Pe=>W(ae.id)},null,40,cy),c("span",null,$(ae.name),1)]))),128))])])):P(n).hasSingleClassroom.value?(m(),h("div",uy,[V[13]||(V[13]=c("label",null,"Class",-1)),c("div",dy,$(P(n).singleClassroom.value.name),1)])):B("",!0),c("div",fy,[c("label",vy,[Re(c("input",{type:"checkbox","onUpdate:modelValue":V[3]||(V[3]=ae=>f.value=ae)},null,512),[[wr,f.value]]),V[14]||(V[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:V[4]||(V[4]=ae=>v.value=!v.value)},$(v.value?"Hide details":"What data is preserved?"),1),v.value?(m(),h("div",py,[...V[15]||(V[15]=[xo('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):B("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!Q.value||g.value},[g.value?(m(),h("span",hy,$(b.value),1)):(m(),h("span",gy,"Start Practicing"))],8,my)],32),P(o).hasUsers.value?(m(),h("button",{key:0,class:"back-link",onClick:L}," Back to user selection ")):B("",!0)])):r.value==="returning"?(m(),h("div",yy,[c("h2",null,"Welcome back, "+$(D.value)+"!",1),V[18]||(V[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:we}," Continue "),c("button",{class:"switch-link",onClick:ne}," Not "+$(D.value)+"? Switch user ",1)])):r.value==="switcher"?(m(),h("div",by,[V[19]||(V[19]=c("h2",null,"Select User",-1)),V[20]||(V[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",_y,[(m(!0),h(Z,null,le(P(o).allUsers.value,ae=>{var Pe;return m(),h("button",{key:ae.id,class:ue(["user-item",{"is-current":ae.id===P(o).currentUserId.value}]),onClick:We=>re(ae.id)},[c("span",Cy,$(ae.firstName)+" "+$(ae.lastName),1),(Pe=ae.classrooms)!=null&&Pe.length?(m(),h("span",Sy,$(ae.classrooms.join(", ")),1)):B("",!0)],10,wy)}),128))]),c("button",{class:"add-user-btn",onClick:q}," + Add New User "),P(o).currentUser.value?(m(),h("button",{key:0,class:"back-link",onClick:L}," Cancel ")):B("",!0)])):r.value==="recovery-sent"?(m(),h("div",$y,[V[25]||(V[25]=c("h2",null,"Check Your Email",-1)),c("p",ky,[V[21]||(V[21]=$t(" We found an existing account for ",-1)),c("strong",null,$(A.value),1),V[22]||(V[22]=$t(". ",-1))]),c("div",xy,[c("p",null,$(C.value),1),V[23]||(V[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",Ay,[V[24]||(V[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),Re(c("input",{id:"recoveryCode","onUpdate:modelValue":V[5]||(V[5]=ae=>_.value=ae),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:To(ce,["enter"])},null,544),[[pt,_.value]]),c("button",{class:"submit-btn",disabled:_.value.trim().length!==6||g.value,onClick:ce},[g.value?(m(),h("span",Ty,$(b.value),1)):(m(),h("span",Ey,"Restore Account"))],8,Ny),k.value?(m(),h("span",Oy,$(k.value),1)):B("",!0)]),c("button",{class:"back-link",onClick:V[6]||(V[6]=ae=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(m(),h("div",Ry,[V[27]||(V[27]=c("h2",null,"Restoring Your Account",-1)),c("p",Iy,$(b.value),1),k.value?(m(),h("div",Py,[c("p",Dy,$(k.value),1),c("button",{class:"back-link",onClick:V[7]||(V[7]=ae=>r.value="form")}," Try again ")])):(m(),h("div",Ly,[...V[26]||(V[26]=[c("div",{class:"spinner"},null,-1)])]))])):B("",!0)])]))}},Uy=ye(By,[["__scopeId","data-v-4e48322f"]]),ys="https://api.bridge-classroom.com/api",Is="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",bs=T([]),Ps=T(null),Ct=T(!1),Ke=T(null);function ao(){async function e(l){Ct.value=!0,Ke.value=null;try{const d=await(await fetch(`${ys}/classrooms?teacher_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Is}})).json();return d.success?bs.value=d.classrooms:Ke.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Ke.value="Unable to connect to server",null}finally{Ct.value=!1}}async function t(l,u,d){Ct.value=!0,Ke.value=null;try{const f=await fetch(`${ys}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Is},body:JSON.stringify({teacher_id:l,name:u,description:d||null})});if(!f.ok){const v=await f.text();return Ke.value=v||`Server error (${f.status})`,{success:!1,error:Ke.value}}const p=await f.json();return p.success?bs.value=[p.classroom,...bs.value]:Ke.value=p.error||"Failed to create classroom",p}catch(f){return console.error("Failed to create classroom:",f),Ke.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function s(l){Ct.value=!0,Ke.value=null;try{const d=await(await fetch(`${ys}/classrooms/${encodeURIComponent(l)}`,{headers:{"x-api-key":Is}})).json();return d.success?Ps.value=d.classroom:Ke.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Ke.value="Unable to connect to server",null}finally{Ct.value=!1}}async function n(l,u){try{const f=await(await fetch(`${ys}/classrooms/${encodeURIComponent(l)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Is}})).json();if(f.success&&Ps.value){Ps.value.members=Ps.value.members.filter(v=>v.student_id!==u);const p=bs.value.findIndex(v=>v.id===l);p!==-1&&bs.value[p].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(l){Ct.value=!0,Ke.value=null;try{const u=await fetch(`${ys}/join/${encodeURIComponent(l)}`);return u.status===404?(Ke.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Ke.value="Unable to connect to server",null}finally{Ct.value=!1}}async function a(l,u,d){Ct.value=!0,Ke.value=null;try{const p=await(await fetch(`${ys}/join/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Is},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return p.success||(Ke.value=p.error||"Failed to join classroom"),p}catch(f){return console.error("Failed to join classroom:",f),Ke.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function r(l,u){try{return await(await fetch(`${ys}/classrooms/${encodeURIComponent(l)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Is},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function i(){bs.value=[],Ps.value=null,Ct.value=!1,Ke.value=null}return{teacherClassrooms:bs,currentClassroom:Ps,loading:Ct,error:Ke,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:i}}const My={class:"settings-panel"},Fy={class:"settings-body"},jy={class:"settings-section"},Hy={class:"info-row"},Wy={class:"info-value"},Vy={class:"info-row"},Ky={class:"info-value"},Gy={class:"info-row"},zy={class:"info-row"},Jy={class:"info-value"},Yy={key:1,class:"edit-form"},qy={class:"form-group"},Xy={class:"form-group"},Qy={class:"form-group"},Zy={class:"checkbox-label"},eb={key:0,class:"settings-section"},tb={class:"assignment-list"},sb={class:"assignment-header"},nb={class:"assignment-name"},ob={class:"assignment-progress"},ab={class:"progress-bar"},rb={class:"assignment-meta"},lb={key:0},ib={class:"assignment-list"},cb={class:"assignment-header"},ub={class:"assignment-name"},db={class:"assignment-meta"},fb={key:1,class:"settings-section"},vb={class:"classroom-id"},pb=["disabled","onClick"],mb={class:"settings-section"},hb={class:"toggle-row"},gb={class:"toggle-label"},yb=["checked"],bb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Fe(),o=Zn(),a=ea(),r=ao(),i=T(!1),l=T(""),u=T(""),d=T(!0),f=N(()=>n.currentUser.value),p=N(()=>{var J;return!f.value||!((J=f.value.classrooms)!=null&&J.length)?"No classroom assigned":f.value.classrooms.map(z=>{const de=o.availableClassrooms.value.find(ve=>ve.id===z);return de?de.name:z}).join(", ")}),v=N(()=>a.getAllAssignments().filter(J=>J.completionPercent<100)),g=N(()=>a.getAllAssignments().filter(J=>J.completionPercent>=100));function b(){f.value&&(l.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,i.value=!0)}function A(){i.value=!1}function k(){f.value&&(n.updateUser(f.value.id,{firstName:l.value,lastName:u.value,dataConsent:d.value}),i.value=!1)}function C(){s("switchUser")}function _(){i.value=!1,s("close")}const E=T(null);async function Y(J){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(E.value=J,(await r.leaveClassroom(J,f.value.id)).success){const de=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:de.filter(ve=>ve!==J)})}E.value=null}function Q(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function D(J){return J?new Date(J).toLocaleDateString():"N/A"}return(J,z)=>{var de,ve,ce,be,we,ne,re;return e.visible?(m(),h("div",{key:0,class:"settings-overlay",onClick:Dt(_,["self"])},[c("div",My,[c("div",{class:"settings-header"},[z[5]||(z[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:_,"aria-label":"Close"},"  ")]),c("div",Fy,[c("section",jy,[z[12]||(z[12]=c("h3",null,"Your Profile",-1)),i.value?(m(),h("div",Yy,[c("div",qy,[z[10]||(z[10]=c("label",{for:"editFirstName"},"First Name",-1)),Re(c("input",{id:"editFirstName","onUpdate:modelValue":z[1]||(z[1]=q=>l.value=q),type:"text"},null,512),[[pt,l.value]])]),c("div",Xy,[z[11]||(z[11]=c("label",{for:"editLastName"},"Last Name",-1)),Re(c("input",{id:"editLastName","onUpdate:modelValue":z[2]||(z[2]=q=>u.value=q),type:"text"},null,512),[[pt,u.value]])]),c("div",Qy,[c("label",Zy,[Re(c("input",{type:"checkbox","onUpdate:modelValue":z[3]||(z[3]=q=>d.value=q)},null,512),[[wr,d.value]]),c("span",null,"Share practice results with "+$(P(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:k}," Save Changes "),c("button",{class:"secondary-btn",onClick:A}," Cancel ")])])):(m(),h(Z,{key:0},[c("div",Hy,[z[6]||(z[6]=c("span",{class:"info-label"},"Name",-1)),c("span",Wy,$((de=f.value)==null?void 0:de.firstName)+" "+$((ve=f.value)==null?void 0:ve.lastName),1)]),c("div",Vy,[z[7]||(z[7]=c("span",{class:"info-label"},"Class",-1)),c("span",Ky,$(p.value),1)]),c("div",Gy,[z[8]||(z[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:ue(["info-value",(ce=f.value)!=null&&ce.dataConsent?"enabled":"disabled"])},$((be=f.value)!=null&&be.dataConsent?"Enabled":"Disabled"),3)]),c("div",zy,[z[9]||(z[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",Jy,$(D((we=f.value)==null?void 0:we.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:b}," Edit Profile "),c("button",{class:"secondary-btn",onClick:C}," Switch User ")]),((ne=f.value)==null?void 0:ne.role)!=="teacher"&&((re=f.value)==null?void 0:re.role)!=="admin"?(m(),h("button",{key:0,class:"become-teacher-btn",onClick:z[0]||(z[0]=q=>{s("close"),s("become-teacher")})}," Become a Teacher ")):B("",!0)],64))]),v.value.length||g.value.length?(m(),h("section",eb,[z[16]||(z[16]=c("h3",null,"Assignments",-1)),v.value.length?(m(),h(Z,{key:0},[z[13]||(z[13]=c("h4",null,"Active",-1)),c("div",tb,[(m(!0),h(Z,null,le(v.value,q=>(m(),h("div",{key:q.id,class:"assignment-item"},[c("div",sb,[c("span",nb,$(q.name),1),c("span",ob,$(q.completionPercent)+"%",1)]),c("div",ab,[c("div",{class:"progress-fill",style:ct({width:`${q.completionPercent}%`})},null,4)]),c("div",rb,[q.dueDate?(m(),h("span",lb," Due: "+$(D(q.dueDate)),1)):B("",!0),c("span",null,$(q.completedDeals)+"/"+$(q.totalDeals)+" deals ",1)])]))),128))])],64)):B("",!0),g.value.length?(m(),h(Z,{key:1},[z[15]||(z[15]=c("h4",null,"Completed",-1)),c("div",ib,[(m(!0),h(Z,null,le(g.value,q=>(m(),h("div",{key:q.id,class:"assignment-item completed"},[c("div",cb,[c("span",ub,$(q.name),1),z[14]||(z[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",db," Completed "+$(D(q.lastPracticedAt)),1)]))),128))])],64)):B("",!0)])):B("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(m(),h("section",fb,[z[17]||(z[17]=c("h3",null,"My Classrooms",-1)),(m(!0),h(Z,null,le(f.value.classrooms,q=>(m(),h("div",{key:q,class:"classroom-row"},[c("span",vb,$(q),1),c("button",{class:"leave-btn",disabled:E.value===q,onClick:L=>Y(q)},$(E.value===q?"Leaving...":"Leave"),9,pb)]))),128))])):B("",!0),c("section",mb,[z[19]||(z[19]=c("h3",null,"Display Options",-1)),c("div",hb,[c("label",gb,[c("input",{type:"checkbox",checked:P(o).showLoadPbnOption.value,onChange:z[4]||(z[4]=q=>P(o).setUIPref("showLoadPbnOption",q.target.checked))},null,40,yb),z[18]||(z[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[z[20]||(z[20]=c("h3",null,"Data & Privacy",-1)),z[21]||(z[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:Q}," Remove account from this device "),z[22]||(z[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):B("",!0)}}},_b=ye(bb,[["__scopeId","data-v-57179473"]]),wb={class:"banner-content"},Cb={class:"assignment-info"},Sb={class:"assignment-title"},$b={class:"assignment-name"},kb={class:"assignment-meta"},xb={class:"progress-text"},Ab={class:"progress-bar"},Nb={key:0,class:"complete-badge"},Tb={class:"return-text"},Eb={__name:"AssignmentBanner",setup(e){const t=ea(),s=N(()=>t.currentAssignment.value),n=N(()=>t.hasActiveAssignment.value),o=N(()=>t.assignmentProgress.value),a=N(()=>t.isAssignmentComplete.value),r=N(()=>t.inAssignmentMode.value),i=N(()=>{var b;if(!((b=s.value)!=null&&b.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),l=N(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=N(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(p,v)=>{var g,b;return n.value&&r.value?(m(),h("div",{key:0,class:ue(["assignment-banner",{complete:a.value}])},[c("div",wb,[c("div",Cb,[c("div",Sb,[v[0]||(v[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",$b,$((g=s.value)==null?void 0:g.name),1)]),c("div",kb,[c("span",xb,$(o.value.completed)+" of "+$(o.value.total)+" deals ("+$(o.value.percent)+"%) ",1),l.value?(m(),h("span",{key:0,class:ue(["due-text",u.value])},$(l.value),3)):B("",!0)])]),c("div",Ab,[c("div",{class:ue(["progress-fill",{complete:a.value}]),style:ct({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(m(),h("div",Nb," Complete! ")):B("",!0)],2)):s.value&&!r.value?(m(),h("div",{key:1,class:"return-banner",onClick:f},[v[1]||(v[1]=c("span",{class:"return-icon"},"",-1)),c("span",Tb," Return to assignment: "+$((b=s.value)==null?void 0:b.name)+" ("+$(o.value.percent)+"% complete) ",1)])):B("",!0)}}},Ob=ye(Eb,[["__scopeId","data-v-a4095a6a"]]),Rb=["innerHTML"],Ib={__name:"AnnouncementBanner",setup(e){const t=Br(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,i)=>{const l=s[i.toLowerCase()];return l?`<span class="ann-circle" style="background:${l.bg};color:${l.fg}"></span>`:r})}return(o,a)=>P(t).announcement.value&&P(t).dismissed.value!==P(t).announcement.value.id?(m(),h("div",{key:0,class:ue(["announcement-banner",P(t).announcement.value.type])},[c("span",{class:"announcement-text",innerHTML:n(P(t).announcement.value.message)},null,8,Rb),c("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>P(t).dismiss()),title:"Dismiss"},"")],2)):B("",!0)}},Pb=ye(Ib,[["__scopeId","data-v-4b12409b"]]),Db={key:0,class:"status-content"},Lb={key:1,class:"status-content offline"},Bb={key:0,class:"badge"},Ub={key:2,class:"status-content error"},Mb={class:"status-text"},Fb={key:0,class:"badge"},jb={key:3,class:"status-content pending"},Hb={class:"status-text"},Wb={key:4,class:"status-content synced"},Vb={__name:"SyncStatus",setup(e){const t=iu(),s=ms(),n=N(()=>s.pendingCount.value),o=N(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=N(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(l,u)=>(m(),h("div",{class:ue(["sync-status",a.value]),onClick:r},[P(t).isSyncing.value?(m(),h("div",Db,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):P(t).isOffline.value?(m(),h("div",Lb,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(m(),h("span",Bb,$(n.value),1)):B("",!0)])):P(t).hasError.value?(m(),h("div",Ub,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",Mb,$(o.value),1),n.value>0?(m(),h("span",Fb,$(n.value),1)):B("",!0),c("button",{class:"retry-btn",onClick:Dt(i,["stop"])},"Retry")])):n.value>0?(m(),h("div",jb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",Hb,$(n.value)+" pending",1)])):(m(),h("div",Wb,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},Kb=ye(Vb,[["__scopeId","data-v-8457149a"]]),uu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function Gb(e){return uu.find(t=>t.path===e)||null}uu.reduce((e,t)=>e+t.dealCount,0);const Bn=36e5;function Ql(e){if(!e||e.length===0)return"untried";const t=[...e].sort((d,f)=>d.ts-f.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(d=>!d.correct&&n.ts-d.ts<Bn),r=t.slice(-5),i=r.filter(d=>d.correct).length,l=r.length-i;return a&&i/r.length>=.8&&l<=1?"mastered":r.filter(d=>d.correct?!t.filter(p=>p.ts<d.ts).reverse().find(p=>!p.correct&&d.ts-p.ts<Bn):!1).length>=1?"progressing":"struggling"}function zb(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var E,Y;const i=Object.keys(r).map(Number).sort((Q,D)=>Q-D);let l=0,u=0,d=0;i.forEach(Q=>{const D=Ql(r[Q]);D==="mastered"?l++:D==="progressing"?u++:d++});const f=i.length,p=[];i.forEach(Q=>{r[Q].forEach(D=>p.push({...D,dealNum:Q}))}),p.sort((Q,D)=>Q.ts-D.ts);const v=2*Bn,g=i.map(Q=>{var we;const D=r[Q].slice().sort((ne,re)=>ne.ts-re.ts),J=Ql(D),z=((we=D[D.length-1])==null?void 0:we.correct)??!1,de=D.map((ne,re)=>{if(ne.correct){const q=D.slice(0,re).reverse().find(L=>!L.correct&&ne.ts-L.ts<Bn);return{ts:ne.ts,y:q?.75:1,correct:!0}}else{const q=D.slice(re+1).find(L=>L.correct&&L.ts-ne.ts<Bn);return{ts:ne.ts,y:q?.5:0,correct:!1}}}),ve=5*60*1e3,ce=de.map(ne=>({...ne,vts:ne.ts.getTime(),rawTs:ne.ts.getTime()}));let be=0;for(;be<ce.length;){let ne=be;for(;ne+1<ce.length&&ce[ne+1].vts-ce[ne].vts<ve;)ne++;if(ne>be){const re=ce[ne].vts-ce[be].vts,q=Math.max(re,v),L=re>0?q/re:1,W=ce[be].vts;for(let G=be;G<=ne;G++)ce[G].vts=W+(ce[G].vts-W)*L}be=ne+1}return{dealNum:Q,status:J,lastCorrect:z,points:ce}}),b=g.flatMap(Q=>Q.points.map(D=>D.rawTs)),A=b.length?Math.min(...b):0,C=(b.length?Math.max(...b):1)-A||1;g.forEach(Q=>{Q.points=Q.points.map(D=>({...D,x:(D.rawTs-A)/C}))});const _=(()=>{const Q=Object.values(r);if(Q.length===0)return 0;const D=Q.reduce((z,de)=>{const ve=de.slice(-5);return z+ve.filter(ce=>ce.correct).length},0),J=Q.reduce((z,de)=>z+Math.min(de.length,5),0);return J>0?Math.round(D/J*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:f,mastered:l,progressing:u,struggling:d,totalBoards:t[a]??f,totalAttempts:p.length,recentRate:_,boardLines:g,firstActivity:(E=p[0])==null?void 0:E.ts,lastActivity:(Y=p[p.length-1])==null?void 0:Y.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function Jb(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=Gb(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=$c(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const Vs={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function du(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const Yb={key:0,class:"sparkline-empty"},qb=["width","height"],Xb=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],Qb=["d","stroke"],Zb=["cx","cy","r","fill"],e_=5,t_=2.5,s_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=N(()=>t.width-n.l-n.r),a=N(()=>t.height-n.t-n.b),r=N(()=>{const f=t.boardLines.flatMap(g=>g.points.map(b=>b.x)),p=Math.min(...f),v=Math.max(...f);return{min:p,max:v,span:v-p||1}});function i(f){return n.t+(1-f)*a.value}function l(f,p){const v=p>=.9?1:p>0?.5:0;return{px:n.l+(f-r.value.min)/r.value.span*o.value,py:n.t+(1-v)*a.value,yMapped:v}}const u=N(()=>t.boardLines.map(f=>{const p=Vs[f.status]||"#6b7280",v=f.points.filter(b=>b.y!==.75).map(b=>l(b.x,b.y)),g=v.length>=2?v.map((b,A)=>`${A===0?"M":"L"}${b.px.toFixed(1)},${b.py.toFixed(1)}`).join(" "):"";return{color:p,pts:v,pathD:g}})),d=N(()=>{const f=t.boardLines.flatMap(g=>g.points.filter(b=>b.y!==.75).map(b=>({...l(b.x,b.y),y:b.y}))),p=new Array(f.length).fill(!1),v=[];return f.forEach((g,b)=>{if(p[b])return;const A=[g];p[b]=!0,f.forEach((E,Y)=>{if(p[Y])return;const Q=E.px-g.px,D=E.py-g.py;Math.sqrt(Q*Q+D*D)<e_&&(A.push(E),p[Y]=!0)});const k=A.reduce((E,Y)=>E+Y.px,0)/A.length,C=A.reduce((E,Y)=>E+Y.py,0)/A.length,_=A.sort((E,Y)=>Y.yMapped-E.yMapped)[0].yMapped;v.push({px:k,py:C,y:_,n:A.length})}),v});return(f,p)=>!e.boardLines||e.boardLines.length===0?(m(),h("div",Yb," No data ")):(m(),h("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(m(),h(Z,null,le(s,v=>c("line",{key:v,x1:n.l,y1:i(v),x2:n.l+o.value,y2:i(v),stroke:v===.5?"#d1d5db":"#e5e7eb","stroke-width":v===.5?1:.5,"stroke-dasharray":v===.5?"3,3":"none"},null,8,Xb)),64)),(m(!0),h(Z,null,le(u.value,(v,g)=>Re((m(),h("path",{key:"line-"+g,d:v.pathD,fill:"none",stroke:v.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,Qb)),[[Tf,v.pts.length>=2]])),128)),(m(!0),h(Z,null,le(d.value,(v,g)=>(m(),h("circle",{key:"bubble-"+g,cx:v.px,cy:v.py,r:t_*Math.sqrt(v.n),fill:P(du)(v.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,Zb))),128))],8,qb))}},n_=ye(s_,[["__scopeId","data-v-a14e2bb7"]]),o_={class:"details-header"},a_={class:"details-title"},r_={class:"details-subtitle"},l_=["viewBox","height"],i_=["x","y","fill"],c_=["y","width","height","fill","fill-opacity"],u_=["x","y","fill"],d_=["x1","y1","x2","y2","stroke-dasharray"],f_=["x","y"],v_=["cx","cy","fill"],p_={key:0,class:"details-activity"},m_={class:"stats-row"},h_={class:"stat-value"},g_={class:"stat-label"},y_=["viewBox"],b_=["x","y","width","height"],__={class:"activity-dates"},w_={class:"details-legend"},ba=7,Zl=.3,_a=110,_s=560,Gt=28,wa=40,ei=36e5,mt=864e5,C_={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close"],setup(e){const t=e,s={t:16,r:20,b:40,l:_a},n=N(()=>{const k=new Set(t.lesson.boardLines.map(_=>_.dealNum)),C=t.lesson.totalBoards??Math.max(...k);return Array.from({length:C},(_,E)=>E+1)}),o=N(()=>n.value.length*Gt),a=N(()=>_s+s.l+s.r),r=N(()=>o.value+s.t+s.b),i=N(()=>new Set(t.lesson.boardLines.map(k=>k.dealNum)));function l(k){return i.value.has(k)}function u(k){const C=t.lesson.boardLines.find(_=>_.dealNum===k);return C?Vs[C.status]||"#6b7280":"#d1d5db"}const d=N(()=>{const k=t.rawData.filter(ne=>ne.skill_path===t.lesson.path),C=n.value,_=k.map(ne=>{const re=new Date(ne.timestamp).getTime(),q=ne.deal_number,L=C.indexOf(q);return{rawTs:re,dealNum:q,boardIdx:L,correct:ne.correct,y:ne.correct?1:0}});if(_.forEach(ne=>{const re=_.filter(L=>L.dealNum===ne.dealNum).sort((L,W)=>L.rawTs-W.rawTs),q=re.findIndex(L=>L.rawTs===ne.rawTs&&L.correct===ne.correct);if(ne.correct){const L=re.slice(0,q).reverse().find(W=>!W.correct&&ne.rawTs-W.rawTs<ei);ne.y=L?.75:1}else{const L=re.slice(q+1).find(W=>W.correct&&W.rawTs-ne.rawTs<ei);ne.y=L?.5:0}}),_.length===0)return[];const E=_.map(ne=>ne.rawTs),Y=Math.min(...E),Q=Math.max(...E),D=Math.floor(Y/mt)*mt,z=(Math.floor(Q/mt)+1)*mt-1-D||1,de=ne=>s.l+(ne.rawTs-D)/z*_s,ve=ne=>s.t+ne*Gt+Gt/2,ce=ba*2*(1-Zl),be=ba*2*(1-Zl),we=_.map(ne=>({...ne,px:de(ne),py:ve(ne.boardIdx)}));return C.forEach(ne=>{const re=we.filter(L=>L.dealNum===ne),q={};re.forEach(L=>{const W=L.rawTs;q[W]||(q[W]=[]),q[W].push(L)}),Object.values(q).forEach(L=>{if(L.length<2)return;const W=L[0].py;L.forEach((G,V)=>{G.py=W+(V-(L.length-1)/2)*be})})}),C.forEach(ne=>{const re=we.filter(W=>W.dealNum===ne).sort((W,G)=>W.px-G.px),q=[];let L=0;for(;L<re.length;){let W=L;for(;W+1<re.length&&re[W+1].px-re[L].px<ce;)W++;q.push({start:L,end:W}),L=W+1}q.forEach((W,G)=>{const V=W.end-W.start+1;if(V===1)return;const ae=(V-1)*ce;let Pe;G===0?Pe=re[W.start].px:G===q.length-1?Pe=re[W.end].px-ae:Pe=(re[W.start].px+re[W.end].px)/2-ae/2;for(let We=0;We<V;We++)re[W.start+We].px=Pe+We*ce})}),we}),f=N(()=>[...d.value].sort((k,C)=>k.y-C.y)),p=N(()=>{const k=d.value;if(k.length===0)return[];const C=k.map(z=>z.rawTs),_=Math.min(...C),E=Math.max(...C),Y=Math.floor(_/mt)*mt,D=(Math.floor(E/mt)+1)*mt-1-Y||1,J=5;return Array.from({length:J},(z,de)=>{const ve=de/(J-1),ce=new Date(Y+ve*D);return{x:s.l+ve*_s,label:ce.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),v=N(()=>{const k=d.value;if(k.length===0)return null;const C={};k.forEach(de=>{const ve=Math.floor(de.rawTs/mt);C[ve]=(C[ve]||0)+1});const _=Object.keys(C).map(Number).sort();if(_.length===0)return null;const E=_[0],Y=_[_.length-1],Q=Y-E+1,D=Math.max(...Object.values(C)),J=Math.max(2,_s/Q-1);return{bars:_.map(de=>({dayKey:de,x:(de-E)/Q*_s,h:C[de]/D*wa,w:J,count:C[de],dateLabel:new Date(de*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:_s,firstLabel:new Date(E*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(Y*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),g=N(()=>{const k=d.value,C={};return k.forEach(_=>{const E=Math.floor(_.rawTs/mt);C[E]=!0}),[{label:"Days active",value:Object.keys(C).length},{label:"Boards tried",value:t.lesson.tried},{label:"Observations",value:k.length}]}),b=[{color:"#10b981",label:"Clean success"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hour)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function A(k){return new Date(k).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(k,C)=>(m(),h("div",{class:"details-overlay",onClick:C[2]||(C[2]=Dt(_=>k.$emit("close"),["self"]))},[c("div",{class:"details-panel",onClick:C[1]||(C[1]=Dt(()=>{},["stop"]))},[c("div",o_,[c("div",null,[c("h2",a_,$(e.lesson.name),1),c("p",r_,$(e.lesson.tried)+" boards  "+$(e.lesson.totalAttempts)+" attempts ",1)]),c("button",{class:"details-close-btn",onClick:C[0]||(C[0]=_=>k.$emit("close"))}," close")]),(m(),h("svg",{viewBox:`0 0 ${a.value} ${r.value}`,width:"100%",height:r.value,class:"details-chart"},[(m(!0),h(Z,null,le(n.value,(_,E)=>(m(),h("rect",{key:"bg-"+_,x:s.l,y:s.t+E*Gt,width:_s,height:Gt,fill:E%2===0?"#ffffff":"#f9fafb"},null,8,i_))),128)),(m(!0),h(Z,null,le(n.value,(_,E)=>(m(),h("g",{key:"label-"+_},[c("rect",{x:2,y:s.t+E*Gt+3,width:_a-14,height:Gt-6,rx:"3",fill:u(_),"fill-opacity":l(_)?.12:.05},null,8,c_),c("text",{x:_a-16,y:s.t+E*Gt+Gt/2+4,"text-anchor":"end","font-size":"13",fill:u(_),"font-family":"monospace"}," Board "+$(_)+$(l(_)?"":" "),9,u_)]))),128)),(m(!0),h(Z,null,le(p.value,(_,E)=>(m(),h("line",{key:"grid-"+E,x1:_.x,y1:s.t,x2:_.x,y2:s.t+o.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":E===0||E===p.value.length-1?"none":"3,4"},null,8,d_))),128)),(m(!0),h(Z,null,le(p.value,(_,E)=>(m(),h("text",{key:"tick-"+E,x:_.x,y:s.t+o.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},$(_.label),9,f_))),128)),(m(!0),h(Z,null,le(f.value,(_,E)=>(m(),h("circle",{key:"dot-"+E,cx:_.px,cy:_.py,r:ba,fill:P(du)(_.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92"},[c("title",null,"Board "+$(_.dealNum)+"  "+$(_.correct?"Correct":"Incorrect")+"  "+$(A(_.rawTs)),1)],8,v_))),128))],8,l_)),v.value?(m(),h("div",p_,[c("div",m_,[(m(!0),h(Z,null,le(g.value,_=>(m(),h("div",{class:"stat-item",key:_.label},[c("div",h_,$(_.value),1),c("div",g_,$(_.label),1)]))),128))]),(m(),h("svg",{width:"100%",viewBox:`0 0 ${v.value.barW} ${wa}`,class:"activity-chart"},[(m(!0),h(Z,null,le(v.value.bars,_=>(m(),h("rect",{key:_.dayKey,x:_.x,y:wa-_.h,width:_.w,height:_.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[c("title",null,$(_.dateLabel)+": "+$(_.count)+" observations",1)],8,b_))),128))],8,y_)),c("div",__,[c("span",null,$(v.value.firstLabel),1),c("span",null,$(v.value.lastLabel),1)])])):B("",!0),c("div",w_,[(m(),h(Z,null,le(b,_=>c("span",{key:_.label,class:"legend-item"},[c("span",{class:"legend-dot",style:ct({backgroundColor:_.color})},null,4),$t(" "+$(_.label),1)])),64))])])]))}},S_=ye(C_,[["__scopeId","data-v-95dd7375"]]),$_={class:"student-progress-panel"},k_={key:0,class:"sp-empty"},x_={class:"sp-header"},A_={class:"sp-header-row"},N_={key:0,class:"sp-name-badge"},T_={class:"sp-meta"},E_={key:0,class:"sp-activity-chart"},O_={class:"sp-activity-header"},R_={class:"sp-activity-meta"},I_={class:"sp-activity-body"},P_={class:"sp-activity-svg-wrap"},D_=["viewBox"],L_=["x"],B_=["x","y"],U_=["x1","x2","y2"],M_=["x","y","width","height","fill"],F_=["x","y"],j_=["x","y"],H_={class:"sp-activity-legend"},W_={class:"sp-legend"},V_={class:"sp-grid"},K_=["onClick"],G_={class:"sp-card-header"},z_={class:"sp-card-info"},J_={class:"sp-card-name"},Y_={class:"sp-card-meta"},q_={class:"sp-card-rate"},X_={class:"sp-card-sparkline"},Q_={class:"sp-mastery"},Z_={class:"sp-mastery-track"},e1=["title"],t1={class:"sp-mastery-legend"},s1={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""}},setup(e){const t=e,s=T(null),n=N(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:v,lessonNames:g}=Jb(t.observations);return zb(t.observations,v,g)}),o=N(()=>n.value.reduce((v,g)=>v+g.tried,0)),a=N(()=>n.value.reduce((v,g)=>v+g.totalAttempts,0)),r=[{color:"#10b981",label:"Success (clean)"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hr)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function i(v){return`hsl(${Math.round(v*360/n.value.length)}, 65%, 55%)`}function l(v){return v>=75?"#10b981":v>=50?"#f59e0b":"#f43f5e"}function u(v){return v?v.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function d(v){if(!v.firstActivity||!v.lastActivity)return null;const g=v.lastActivity-v.firstActivity,b=g/6e4,A=g/36e5,k=g/864e5;return b<90?`${Math.round(b)} min`:A<48?`${Math.round(A)} hr`:k<14?`${Math.round(k)} days`:`${Math.round(k/7)} wks`}function f(v){const g=Math.max(0,(v.totalBoards||0)-v.tried),b=[{count:v.mastered,color:Vs.mastered,label:"Mastered"},{count:v.progressing,color:Vs.progressing,label:"Progressing"},{count:v.struggling,color:Vs.struggling,label:"Struggling"},{count:g,color:Vs.untried,label:"Untried"}].filter(k=>k.count>0),A=b.reduce((k,C)=>k+C.count,0);return b.forEach(k=>{k.pct=`${(k.count/A*100).toFixed(1)}%`}),b}const p=N(()=>{if(n.value.length===0)return null;const v=864e5,g=28,b=700,A=120,k=new Set,C=n.value.map(ve=>{const ce={};return ve.boardLines.forEach(be=>{be.points.forEach(we=>{const ne=Math.floor((we.rawTs??0)/v);ne>0&&(ce[ne]=(ce[ne]||0)+1,k.add(ne))})}),ce});if(k.size===0)return null;const _=[...k].sort(),E=_[0],Y=_[_.length-1],Q=Y-E+1,D=_.map(ve=>C.reduce((ce,be)=>ce+(be[ve]||0),0)),J=Math.max(...D),z=Math.max(1,b/Q*.75);return{days:_.map(ve=>{const ce=g+(ve-E)/Q*b;let be=A;const we=[];return n.value.forEach((ne,re)=>{const q=C[re][ve]||0;if(!q)return;const L=q/J*A;be-=L,we.push({y:be,h:L,count:q,color:i(re),name:ne.name})}),{dayKey:ve,x:ce,segments:we,dateLabel:new Date(ve*v).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:J,barW:z,barH:A,chartW:b,svgW:g+b,yAxisW:g,firstLabel:new Date(E*v).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(Y*v).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(v,g)=>(m(),h("div",$_,[n.value.length===0?(m(),h("div",k_,[...g[1]||(g[1]=[c("p",null,"No practice data to display yet.",-1)])])):(m(),h(Z,{key:1},[c("div",x_,[c("div",A_,[e.studentName?(m(),h("span",N_,$(e.studentName),1)):B("",!0),c("span",T_,$(n.value.length)+" lesson"+$(n.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),p.value?(m(),h("div",E_,[c("div",O_,[g[2]||(g[2]=$t(" Daily practice activity ",-1)),c("span",R_,$(o.value)+" boards  "+$(a.value)+" observations ",1)]),c("div",I_,[c("div",P_,[(m(),h("svg",{width:"100%",viewBox:`0 0 ${p.value.svgW} ${p.value.barH+26}`,style:ct({display:"block",height:p.value.barH+26+"px"})},[c("text",{x:p.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},$(p.value.maxCount),9,L_),c("text",{x:p.value.yAxisW-3,y:p.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,B_),c("line",{x1:p.value.yAxisW,y1:"0",x2:p.value.yAxisW,y2:p.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,U_),(m(!0),h(Z,null,le(p.value.days,b=>(m(),h("g",{key:b.dayKey},[(m(!0),h(Z,null,le(b.segments,(A,k)=>(m(),h("rect",{key:k,x:b.x,y:A.y,width:p.value.barW,height:A.h,fill:A.color,opacity:"0.85",rx:"1"},[c("title",null,$(A.name)+": "+$(A.count)+" on "+$(b.dateLabel),1)],8,M_))),128))]))),128)),c("text",{x:p.value.yAxisW,y:p.value.barH+18,"font-size":"10",fill:"#6b7280"},$(p.value.firstLabel),9,F_),c("text",{x:p.value.yAxisW+p.value.chartW,y:p.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},$(p.value.lastLabel),9,j_)],12,D_))]),c("div",H_,[(m(!0),h(Z,null,le(n.value,(b,A)=>(m(),h("span",{key:b.path,class:"sp-activity-legend-item"},[c("span",{class:"sp-legend-dot",style:ct({backgroundColor:i(A)})},null,4),$t(" "+$(b.name),1)]))),128))])])])):B("",!0),c("div",W_,[(m(),h(Z,null,le(r,b=>c("span",{key:b.label,class:"sp-legend-item"},[c("span",{class:"sp-legend-dot",style:ct({backgroundColor:b.color})},null,4),$t(" "+$(b.label),1)])),64)),g[3]||(g[3]=c("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),c("div",V_,[(m(!0),h(Z,null,le(n.value,b=>(m(),h("div",{key:b.path,class:"sp-lesson-card",onClick:A=>s.value=b},[c("div",G_,[c("div",z_,[c("div",J_,$(b.name),1),c("div",Y_,$(b.tried)+" boards  "+$(b.totalAttempts)+" attempts  last "+$(u(b.lastActivity))+$(d(b)?`  span ${d(b)}`:""),1)]),c("div",q_,[c("div",{class:"sp-rate-value",style:ct({color:l(b.recentRate)})},$(b.recentRate)+"% ",5),g[4]||(g[4]=c("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),c("div",X_,[me(n_,{boardLines:b.boardLines,width:280,height:70},null,8,["boardLines"])]),c("div",Q_,[c("div",Z_,[(m(!0),h(Z,null,le(f(b),A=>(m(),h("div",{key:A.label,class:"sp-mastery-segment",style:ct({width:A.pct,backgroundColor:A.color}),title:`${A.label}: ${A.count}`},null,12,e1))),128))]),c("div",t1,[(m(!0),h(Z,null,le(f(b),A=>(m(),h("span",{key:A.label,class:"sp-mastery-item"},[c("span",{class:"sp-legend-dot",style:ct({backgroundColor:A.color})},null,4),$t(" "+$(A.count)+" "+$(A.label),1)]))),128))])]),g[5]||(g[5]=c("div",{class:"sp-card-hint"},"details ",-1))],8,K_))),128))])],64)),s.value?(m(),Be(S_,{key:2,lesson:s.value,rawData:e.observations,onClose:g[0]||(g[0]=b=>s.value=null)},null,8,["lesson","rawData"])):B("",!0)]))}},fu=ye(s1,[["__scopeId","data-v-722715b0"]]),n1={class:"progress-dashboard"},o1={class:"dashboard-header"},a1={key:0,class:"loading"},r1={key:1,class:"error-state"},l1={key:2,class:"empty-state"},i1={key:3,class:"dashboard-content"},c1={class:"dashboard-actions"},u1={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Er(),s=Fe(),n=N(()=>t.decryptedObservations.value),o=N(()=>n.value.length>0),a=N(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});_t(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(i,l)=>(m(),h("div",n1,[c("header",o1,[l[3]||(l[3]=c("h2",null,"Student Progress",-1)),c("button",{class:"close-btn",onClick:l[0]||(l[0]=u=>i.$emit("close"))},"")]),P(t).isLoading.value?(m(),h("div",a1,[...l[4]||(l[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):P(t).hasError.value?(m(),h("div",r1,[c("p",null,"Failed to load progress: "+$(P(t).error.value),1),c("button",{onClick:r},"Try Again")])):o.value?(m(),h("div",i1,[me(fu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),c("div",c1,[c("button",{class:"secondary-btn",onClick:r},"Refresh Data"),c("button",{class:"primary-btn",onClick:l[2]||(l[2]=u=>i.$emit("close"))},"Continue Practicing")])])):(m(),h("div",l1,[l[5]||(l[5]=c("h3",null,"No Practice Data Yet",-1)),l[6]||(l[6]=c("p",null,"Complete some practice deals to see your progress here!",-1)),c("button",{class:"primary-btn",onClick:l[1]||(l[1]=u=>i.$emit("close"))},"Start Practicing")]))]))}},d1=ye(u1,[["__scopeId","data-v-286a38c8"]]),f1="test-user-mastery",v1="test-classroom",p1="Negative_Double",m1="competitive_bidding/negative_double";let Za=0;function ze({boardNumber:e,correct:t,timestamp:s}){return Za++,{id:`mastery-test-${Za}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:f1,skill_path:m1,correct:t,deal_subfolder:p1,deal_number:e,classroom:v1}}function dt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function vo(e){return new Date(Date.now()-e*60*1e3).toISOString()}function h1(){Za=0;const e=[];e.push(ze({boardNumber:2,correct:!0,timestamp:dt(5)}),ze({boardNumber:2,correct:!1,timestamp:dt(1)})),e.push(ze({boardNumber:3,correct:!1,timestamp:vo(30)}),ze({boardNumber:3,correct:!0,timestamp:vo(20)})),e.push(ze({boardNumber:4,correct:!1,timestamp:vo(90)}),ze({boardNumber:4,correct:!0,timestamp:vo(60)})),e.push(ze({boardNumber:5,correct:!1,timestamp:dt(10)}),ze({boardNumber:5,correct:!0,timestamp:dt(2)})),e.push(ze({boardNumber:6,correct:!0,timestamp:dt(14)}),ze({boardNumber:6,correct:!0,timestamp:dt(7)})),e.push(ze({boardNumber:7,correct:!0,timestamp:dt(21)}),ze({boardNumber:7,correct:!0,timestamp:dt(14)}),ze({boardNumber:7,correct:!0,timestamp:dt(7)})),e.push(ze({boardNumber:8,correct:!0,timestamp:dt(28)}),ze({boardNumber:8,correct:!0,timestamp:dt(21)}),ze({boardNumber:8,correct:!0,timestamp:dt(14)}),ze({boardNumber:8,correct:!1,timestamp:dt(1)}));const t=[1,2,3,4,5].map(s=>({...ze({boardNumber:s,correct:!0,timestamp:dt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const g1=["onClick","title"],y1={key:0,class:"medal gold-medal"},b1={key:1,class:"medal silver-medal"},_1={class:"board-num"},w1={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=un(),a=N(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const l=i.find(u=>u.boardNumber===s.forceRedBoard);l&&(l.status="red")}return i});function r(i){const l={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${l[i.status]}${u[i.achievement]}`}return(i,l)=>e.boardNumbers.length>0?(m(),h("div",{key:0,class:ue(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(m(),h("button",{key:0,class:"intro-btn",onClick:l[0]||(l[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):B("",!0),(m(!0),h(Z,null,le(a.value,(u,d)=>(m(),h("div",{key:u.boardNumber,class:ue(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:r(u)},[u.achievement==="gold"?(m(),h("span",y1,"")):u.achievement==="silver"?(m(),h("span",b1,"")):B("",!0),c("span",_1,$(u.boardNumber),1)],10,g1))),128))],2)):B("",!0)}},vu=ye(w1,[["__scopeId","data-v-820a0f0c"]]),C1={class:"accomplishments-view"},S1={class:"view-header"},$1={key:0,class:"user-selector"},k1=["value"],x1=["value"],A1={key:1,class:"loading-state"},N1={key:2,class:"error-state"},T1={key:3,class:"empty-state"},E1={key:4,class:"view-content"},O1={class:"controls-row"},R1={class:"tabs"},I1={key:0,class:"tab-content"},P1={key:0,class:"no-data"},D1={key:1,class:"lesson-list"},L1={class:"lesson-header"},B1={class:"lesson-name"},U1={key:1,class:"tab-content"},M1={key:0,class:"no-data"},F1={key:1,class:"taxon-list"},j1={class:"taxon-header"},H1={class:"taxon-category"},W1={class:"taxon-name"},V1={class:"taxon-counts"},K1={class:"taxon-stat correct"},G1={class:"taxon-stat incorrect"},z1={class:"taxon-stat total"},J1={class:"view-actions"},Y1={key:5,class:"test-mode-banner"},q1={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=ds(),o=un(),r=new URLSearchParams(window.location.search).get("test");_t(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode(h1()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function l(p){await n.selectUser(p)}function u(p,v){s("navigate-to-deal",{subfolder:p,dealNumber:v})}const d=N(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const b=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),A=o.computeLessonAchievement(b);return{...g,achievement:A.achievement}}).sort((g,b)=>f(g.subfolder).localeCompare(f(b.subfolder)))});vt(d,p=>{o.fetchMissingBoardCounts(p.map(v=>v.subfolder))},{immediate:!0});function f(p){return n.formatLessonName(p)}return(p,v)=>(m(),h("div",C1,[c("header",S1,[v[6]||(v[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:v[0]||(v[0]=g=>p.$emit("close"))},"")]),P(n).canViewOtherUsers.value?(m(),h("div",$1,[v[7]||(v[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:P(n).selectedUserId.value,onChange:v[1]||(v[1]=g=>l(g.target.value))},[(m(!0),h(Z,null,le(P(n).accessibleUsers.value,g=>(m(),h("option",{key:g.id,value:g.id},$(g.name)+$(g.isSelf?" (You)":""),9,x1))),128))],40,k1)])):B("",!0),P(n).loading.value?(m(),h("div",A1,[...v[8]||(v[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):P(n).error.value?(m(),h("div",N1,[c("p",null,"Failed to load: "+$(P(n).error.value),1),c("button",{onClick:i},"Try Again")])):P(n).hasData.value?(m(),h("div",E1,[c("div",O1,[c("div",R1,[c("button",{class:ue(["tab-btn",{active:P(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=g=>P(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:ue(["tab-btn",{active:P(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=g=>P(n).activeTab.value="taxons")}," Taxons ",2)])]),P(n).activeTab.value==="lessons"?(m(),h("div",I1,[d.value.length===0?(m(),h("div",P1," No lesson data available yet. ")):(m(),h("div",D1,[(m(!0),h(Z,null,le(d.value,g=>(m(),h("div",{key:g.subfolder,class:"lesson-row"},[c("div",L1,[c("span",B1,$(f(g.subfolder)),1),g.achievement!=="none"?(m(),h("span",{key:0,class:ue(["achievement-badge",g.achievement])},"  "+$(g.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),me(vu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:b=>u(g.subfolder,g.boardNumbers[b])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):B("",!0),P(n).activeTab.value==="taxons"?(m(),h("div",U1,[P(n).filteredTaxonStats.value.length===0?(m(),h("div",M1," No skill data available yet. ")):(m(),h("div",F1,[(m(!0),h(Z,null,le(P(n).filteredTaxonStats.value,g=>(m(),h("div",{key:g.skillPath,class:"taxon-card"},[c("div",j1,[c("span",H1,$(g.categoryName),1),c("span",W1,$(g.skillName),1)]),c("div",V1,[c("span",K1,$(g.correct),1),c("span",G1,$(g.incorrect),1),c("span",z1,$(g.total)+" total",1)])]))),128))]))])):B("",!0),c("div",J1,[c("button",{class:"secondary-btn",onClick:i}," Refresh "),c("button",{class:"primary-btn",onClick:v[5]||(v[5]=g=>p.$emit("close"))}," Done ")])])):(m(),h("div",T1,[v[9]||(v[9]=c("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:v[2]||(v[2]=g=>p.$emit("close"))},"Start Practicing")])),P(n).useTestData.value?(m(),h("div",Y1," Test Mode - Using Generated Data ")):B("",!0)]))}},X1=ye(q1,[["__scopeId","data-v-38e59c14"]]),pu="bridge-classroom-anon-mode",Q1="BridgeClassroom-Anon",Ca=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],ti=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function Z1(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function e0(e,t){const s=`${Q1}:${e} ${t}`,n=Z1(s),o=Number(n%BigInt(Ca.length)),a=Number(n/BigInt(Ca.length)%BigInt(ti.length));return{firstName:Ca[o],lastName:ti[a]}}const _n=T(localStorage.getItem(pu)==="true");function t0(){function e(){_n.value=!_n.value,localStorage.setItem(pu,_n.value.toString())}function t(o){return _n.value?e0(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),i=(a==null?void 0:a.charAt(0))||"",l=(r==null?void 0:r.charAt(0))||"";return(i+l).toUpperCase()||"?"}return{isAnonymized:_n,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const s0={class:"teacher-student-list"},n0={class:"teacher-header"},o0={class:"header-actions"},a0=["value"],r0={key:0,class:"loading-state"},l0={key:1,class:"error-state"},i0={key:2,class:"empty-state"},c0={key:3,class:"empty-state"},u0={key:4,class:"student-table-wrap"},d0={class:"student-table"},f0=["onClick"],v0={class:"col-name"},p0={class:"student-name-cell"},m0={class:"avatar"},h0={class:"col-mastery"},g0={class:"mastery-pills"},y0={key:0,class:"pill pill-green"},b0={key:1,class:"pill pill-orange"},_0={key:2,class:"pill pill-yellow"},w0={key:3,class:"pill pill-red"},C0={key:4,class:"no-data-label"},S0={class:"col-active"},$0={class:"col-lessons"},k0={class:"recent-lessons"},x0={key:0,class:"no-data-label"},A0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=eo(),n=ao(),o=Fe(),a=t0(),r=T("all"),i=T({});_t(async()=>{await s.loadAllStudentSummaries(),await l()});async function l(){const k=o.currentUser.value;if(!k)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(k.id);const C={};await Promise.all(n.teacherClassrooms.value.map(async _=>{const E=await n.fetchClassroomDetail(_.id);E!=null&&E.success&&(C[_.id]=new Set(E.classroom.members.map(Y=>Y.student_id)))})),i.value=C}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await l()}const d=N(()=>{const k=new Set;for(const C of Object.values(i.value))for(const _ of C)k.add(_);return k}),f=N(()=>{const k=s.students.value;if(r.value==="all")return k;if(r.value==="none")return k.filter(_=>!d.value.has(_.id));const C=i.value[r.value];return C?k.filter(_=>C.has(_.id)):k}),p=N(()=>[...f.value].sort((k,C)=>{var Y,Q;const _=((Y=v.value[k.id])==null?void 0:Y.lastObservationTime)||"",E=((Q=v.value[C.id])==null?void 0:Q.lastObservationTime)||"";return E!==_?E.localeCompare(_):b(k).localeCompare(b(C))})),v=N(()=>{const k={};for(const C of s.students.value)k[C.id]=s.getStudentMasterySummary(C.id);return k}),g=N(()=>{const k={};for(const C of s.students.value)k[C.id]=s.getStudentRecentLessons(C.id);return k});function b(k){return a.displayFullName(k)}function A(k){return a.displayInitials(k)}return(k,C)=>(m(),h("div",s0,[c("header",n0,[C[5]||(C[5]=c("h2",null,"My Students",-1)),c("div",o0,[P(n).teacherClassrooms.value.length?Re((m(),h("select",{key:0,"onUpdate:modelValue":C[0]||(C[0]=_=>r.value=_),class:"filter-select"},[C[3]||(C[3]=c("option",{value:"all"},"All Students",-1)),(m(!0),h(Z,null,le(P(n).teacherClassrooms.value,_=>(m(),h("option",{key:_.id,value:_.id},$(_.name),9,a0))),128)),C[4]||(C[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[Pn,r.value]]):B("",!0),c("button",{class:ue(["anon-btn",{active:P(a).isAnonymized.value}]),onClick:C[1]||(C[1]=_=>P(a).toggleAnonymize())},$(P(a).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:C[2]||(C[2]=_=>k.$emit("close"))},"Back")])]),P(s).loading.value?(m(),h("div",r0,[...C[6]||(C[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):P(s).error.value?(m(),h("div",l0,[c("p",null,"Failed to load: "+$(P(s).error.value),1),c("button",{onClick:u},"Try Again")])):P(s).students.value.length===0?(m(),h("div",i0,[...C[7]||(C[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(m(),h("div",c0,[...C[8]||(C[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(m(),h("div",u0,[c("table",d0,[C[9]||(C[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(m(!0),h(Z,null,le(p.value,_=>{var E,Y,Q,D,J,z,de;return m(),h("tr",{key:_.id,class:"student-row",onClick:ve=>k.$emit("select-student",_.id,b(_))},[c("td",v0,[c("div",p0,[c("div",m0,$(A(_)),1),c("span",null,$(b(_)),1)])]),c("td",h0,[c("div",g0,[(E=v.value[_.id])!=null&&E.green?(m(),h("span",y0,$(v.value[_.id].green),1)):B("",!0),(Y=v.value[_.id])!=null&&Y.orange?(m(),h("span",b0,$(v.value[_.id].orange),1)):B("",!0),(Q=v.value[_.id])!=null&&Q.yellow?(m(),h("span",_0,$(v.value[_.id].yellow),1)):B("",!0),(D=v.value[_.id])!=null&&D.red?(m(),h("span",w0,$(v.value[_.id].red),1)):B("",!0),(J=v.value[_.id])!=null&&J.total?B("",!0):(m(),h("span",C0,"No data"))])]),c("td",S0,$(P(s).formatTimeSince((z=v.value[_.id])==null?void 0:z.lastObservationTime)),1),c("td",$0,[c("div",k0,[(m(!0),h(Z,null,le(g.value[_.id],(ve,ce)=>(m(),h("span",{key:ce,class:"lesson-tag"},$(ve),1))),128)),(de=g.value[_.id])!=null&&de.length?B("",!0):(m(),h("span",x0,"-"))])])],8,f0)}),128))])])]))]))}},N0=ye(A0,[["__scopeId","data-v-dd6d8e66"]]),T0={class:"teacher-student-detail"},E0={class:"detail-header"},O0={class:"student-info"},R0={class:"avatar"},I0={class:"last-active"},P0={key:0,class:"loading-state"},D0={key:1,class:"detail-content"},L0={class:"tab-bar"},B0=["onClick"],U0={key:0,class:"tab-content"},M0={key:1,class:"tab-content"},F0={key:0,class:"stats-row"},j0={class:"stat stat-green"},H0={key:0,class:"stat stat-orange"},W0={key:1,class:"stat stat-yellow"},V0={key:2,class:"stat stat-red"},K0={key:3,class:"stat stat-grey"},G0={key:1,class:"no-data"},z0={key:2,class:"lesson-list"},J0={class:"lesson-header"},Y0=["onClick"],q0={class:"mastery-strip"},X0=["title","onClick"],Q0={key:0,class:"medal gold-medal"},Z0={key:1,class:"medal silver-medal"},ew={class:"board-num"},tw={class:"observation-total"},sw={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=eo(),a=un(),r=ds(),i=T(!1),l=T("progress"),u=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],d=N(()=>s.studentName.split(" ").map(C=>C[0]||"").join("").toUpperCase());_t(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const f=N(()=>o.studentObservations.value[s.studentId]||[]),p=N(()=>o.getStudentMasterySummary(s.studentId)),v=N(()=>o.formatTimeSince(p.value.lastObservationTime)),g=N(()=>{const k=f.value;return k.length===0?[]:a.extractLessonsFromObservations(k).map(_=>{const E=a.computeBoardMastery(k,_.subfolder,_.boardNumbers),Y=a.computeLessonAchievement(E);return{..._,boardMastery:E,achievement:Y.achievement}}).sort((_,E)=>b(_.subfolder).localeCompare(b(E.subfolder)))});vt(g,k=>{a.fetchMissingBoardCounts(k.map(C=>C.subfolder))},{immediate:!0});function b(k){return r.formatLessonName(k)}function A(k){const C={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${k.boardNumber}: ${C[k.status]}`}return(k,C)=>(m(),h("div",T0,[c("header",E0,[c("button",{class:"back-btn",onClick:C[0]||(C[0]=_=>k.$emit("back"))}," Students"),c("div",O0,[c("div",R0,$(d.value),1),c("div",null,[c("h2",null,$(e.studentName),1),c("span",I0,"Last active: "+$(v.value),1)])])]),i.value?(m(),h("div",P0,[...C[1]||(C[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(m(),h("div",D0,[c("div",L0,[(m(),h(Z,null,le(u,_=>c("button",{key:_.id,class:ue(["tab-btn",{active:l.value===_.id}]),onClick:E=>l.value=_.id},$(_.label),11,B0)),64))]),l.value==="progress"?(m(),h("div",U0,[me(fu,{observations:f.value,studentName:s.studentName},null,8,["observations","studentName"])])):l.value==="mastery"?(m(),h("div",M0,[p.value.total>0?(m(),h("div",F0,[c("div",j0,$(p.value.green)+" Green",1),p.value.orange?(m(),h("div",H0,$(p.value.orange)+" Orange",1)):B("",!0),p.value.yellow?(m(),h("div",W0,$(p.value.yellow)+" Yellow",1)):B("",!0),p.value.red?(m(),h("div",V0,$(p.value.red)+" Red",1)):B("",!0),p.value.grey?(m(),h("div",K0,$(p.value.grey)+" Grey",1)):B("",!0)])):B("",!0),g.value.length===0?(m(),h("div",G0," No lesson data available yet. ")):(m(),h("div",z0,[(m(!0),h(Z,null,le(g.value,_=>(m(),h("div",{key:_.subfolder,class:"lesson-row"},[c("div",J0,[c("button",{class:"lesson-name lesson-link",onClick:E=>n("navigate-to-lesson",_.subfolder)},$(b(_.subfolder)),9,Y0),_.achievement!=="none"?(m(),h("span",{key:0,class:ue(["achievement-badge",_.achievement])},"  "+$(_.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),c("div",q0,[(m(!0),h(Z,null,le(_.boardMastery,E=>(m(),h("div",{key:E.boardNumber,class:ue(["board-circle board-clickable","status-"+E.status]),title:A(E),onClick:Y=>n("navigate-to-lesson",_.subfolder,E.boardNumber)},[E.achievement==="gold"?(m(),h("span",Q0,"")):E.achievement==="silver"?(m(),h("span",Z0,"")):B("",!0),c("span",ew,$(E.boardNumber),1)],10,X0))),128))])]))),128))]))])):B("",!0),c("div",tw,$(f.value.length)+" observations",1)]))]))}},nw=ye(sw,[["__scopeId","data-v-0df670c0"]]),ow={key:0,class:"lesson-browser-loading"},aw={key:1,class:"lesson-browser-error"},rw={class:"lesson-browser"},lw={class:"browser-header"},iw={class:"browser-content"},cw=["onClick"],uw={class:"expand-icon"},dw={class:"category-name"},fw={class:"category-count"},vw={key:0,class:"lesson-list"},pw=["onClick"],mw={class:"lesson-name"},hw={class:"lesson-description"},gw={key:0,class:"error-message"},yw={key:3,class:"lesson-browser-inline"},bw={class:"browser-content-inline"},_w=["onClick"],ww={class:"expand-icon"},Cw={class:"category-name"},Sw={class:"category-count"},$w={key:0,class:"lesson-list"},kw=["onClick"],xw={class:"lesson-name"},Aw={class:"lesson-description"},Nw={key:0,class:"error-message-inline"},Tw={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=T(null),a=T(null),r=T(!1),i=T([]),l=T(null),u=T(null);vt(()=>[s.visible,s.collection],([g,b])=>{g&&b&&!o.value&&d()},{immediate:!0});async function d(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const b=await fetch(s.collection.tocUrl);if(!b.ok)throw new Error(`Failed to load: ${b.statusText}`);o.value=await b.json()}catch(b){console.error("Error fetching TOC:",b),a.value=`Could not load lesson catalog. ${b.message}`}finally{r.value=!1}}function f(g){const b=i.value.indexOf(g);b>=0?i.value.splice(b,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function v(g,b){var A;u.value=null,l.value=g.id;try{const k=((A=s.collection)==null?void 0:A.baseUrl)||"",C=p(g.id),_=`${k}/${C}.pbn`,E=await fetch(_);if(!E.ok)throw new Error(`Failed to load lesson: ${E.statusText}`);const Y=await E.text();n("load",{subfolder:g.id,name:g.name,category:b.name,content:Y}),s.inline||n("close")}catch(k){console.error("Error loading lesson:",k),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{l.value=null}}return(g,b)=>e.visible&&r.value?(m(),h("div",ow,[...b[2]||(b[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(m(),h("div",aw,[c("p",null,$(a.value),1),c("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(m(),h("div",{key:2,class:"modal-overlay",onClick:b[1]||(b[1]=Dt(A=>g.$emit("close"),["self"]))},[c("div",rw,[c("div",lw,[c("h2",null,$(o.value.name),1),c("button",{class:"close-btn",onClick:b[0]||(b[0]=A=>g.$emit("close"))},"")]),c("div",iw,[(m(!0),h(Z,null,le(o.value.categories,A=>(m(),h("div",{key:A.id,class:"category-section"},[c("button",{class:ue(["category-header",{expanded:i.value.includes(A.id)}]),onClick:k=>f(A.id)},[c("span",uw,$(i.value.includes(A.id)?"":""),1),c("span",dw,$(A.name),1),c("span",fw,$(A.lessons.length)+" lessons",1)],10,cw),i.value.includes(A.id)?(m(),h("div",vw,[(m(!0),h(Z,null,le(A.lessons,k=>(m(),h("button",{key:k.id,class:ue(["lesson-item",{loading:l.value===k.id}]),onClick:C=>v(k,A)},[c("span",mw,$(k.name),1),c("span",hw,$(k.description),1)],10,pw))),128))])):B("",!0)]))),128))]),u.value?(m(),h("div",gw,$(u.value),1)):B("",!0)])])):e.visible&&e.inline&&o.value?(m(),h("div",yw,[c("div",bw,[(m(!0),h(Z,null,le(o.value.categories,A=>(m(),h("div",{key:A.id,class:"category-section"},[c("button",{class:ue(["category-header",{expanded:i.value.includes(A.id)}]),onClick:k=>f(A.id)},[c("span",ww,$(i.value.includes(A.id)?"":""),1),c("span",Cw,$(A.name),1),c("span",Sw,$(A.lessons.length)+" lessons",1)],10,_w),i.value.includes(A.id)?(m(),h("div",$w,[(m(!0),h(Z,null,le(A.lessons,k=>(m(),h("button",{key:k.id,class:ue(["lesson-item",{loading:l.value===k.id}]),onClick:C=>v(k,A)},[c("span",xw,$(k.name),1),c("span",Aw,$(k.description),1)],10,kw))),128))])):B("",!0)]))),128))]),u.value?(m(),h("div",Nw,$(u.value),1)):B("",!0)])):B("",!0)}},Ew=ye(Tw,[["__scopeId","data-v-384a9c63"]]),Ow={class:"viewer-controls"},Rw={class:"viewer-body"},Iw={key:0,class:"interaction-overlay"},Pw={key:1,class:"viewer-loading"},Dw={key:2,class:"viewer-error"},Lw=["src"],Bw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Ht({x:80,y:80}),n=Ht({w:550,h:700}),o=T(!1),a=Ht({x:0,y:0}),r=T(null),i=T(!1),l=T(null),u=N(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function d(C){if(f(),!!C){i.value=!0,l.value=null;try{const _=await fetch(C);if(!_.ok)throw new Error("Failed to load PDF");const E=await _.blob(),Y=new Blob([E],{type:"application/pdf"});r.value=URL.createObjectURL(Y)}catch(_){l.value="Could not load PDF",console.error("Failed to fetch intro PDF:",_)}finally{i.value=!1}}}function f(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}vt(()=>[t.visible,t.url],([C,_])=>{C&&_?d(_):C||f()},{immediate:!0}),Ui(f);function v(C){C.target.closest("button")||(o.value=!0,a.x=C.clientX-s.x,a.y=C.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",k))}function g(C){s.x=Math.max(0,C.clientX-a.x),s.y=Math.max(0,C.clientY-a.y)}function b(C){o.value=!0,a.x=C.clientX,a.y=C.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",A),document.addEventListener("pointerup",k)}function A(C){n.w=Math.max(320,a.startW+(C.clientX-a.x)),n.h=Math.max(300,a.startH+(C.clientY-a.y))}function k(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",k)}return(C,_)=>e.visible?(m(),h("div",{key:0,class:"intro-pdf-viewer",style:ct({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:v},[_[1]||(_[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",Ow,[c("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:_[0]||(_[0]=E=>C.$emit("close")),title:"Close"},"")])],32),c("div",Rw,[o.value?(m(),h("div",Iw)):B("",!0),i.value?(m(),h("div",Pw,"Loading PDF...")):l.value?(m(),h("div",Dw,$(l.value),1)):u.value?(m(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,Lw)):B("",!0)]),c("div",{class:"resize-handle",onPointerdown:b},"",32)],4)):B("",!0)}},Uw=ye(Bw,[["__scopeId","data-v-a97df645"]]),Ds="https://api.bridge-classroom.com/api",Ls="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",wn=T([]),ws=T([]),Sa=T(null),St=T(!1),Oe=T(null);function na(){async function e(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ds}/assignments?student_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Ls}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?wn.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch student assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function t(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ds}/assignments?assigned_by=${encodeURIComponent(i)}`,{headers:{"x-api-key":Ls}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?ws.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch teacher assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function s(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ds}/assignments?classroom_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Ls}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?u.assignments:(Oe.value=u.error||"Failed to fetch assignments",[])}catch(l){return console.error("Failed to fetch classroom assignments:",l),Oe.value="Unable to connect to server",[]}finally{St.value=!1}}async function n(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ds}/assignments/${encodeURIComponent(i)}`,{headers:{"x-api-key":Ls}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?Sa.value=u.assignment:Oe.value=u.error||"Failed to fetch assignment",u}catch(l){return console.error("Failed to fetch assignment detail:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function o({exercise_id:i,classroom_id:l,student_id:u,assigned_by:d,due_at:f,sort_order:p}){St.value=!0,Oe.value=null;try{const v=await fetch(`${Ds}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ls},body:JSON.stringify({exercise_id:i,classroom_id:l||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:p??null})});if(!v.ok){const b=await v.text();return Oe.value=b||`Server error (${v.status})`,{success:!1,error:Oe.value}}const g=await v.json();return g.success?ws.value=[g.assignment,...ws.value]:Oe.value=g.error||"Failed to create assignment",g}catch(v){return console.error("Failed to create assignment:",v),Oe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{St.value=!1}}async function a(i){try{const l=await fetch(`${Ds}/assignments/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":Ls}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,{success:!1,error:Oe.value}}const u=await l.json();return u.success&&(ws.value=ws.value.filter(d=>d.id!==i),wn.value=wn.value.filter(d=>d.id!==i)),u}catch(l){return console.error("Failed to delete assignment:",l),{success:!1,error:"Unable to connect to server"}}}function r(){wn.value=[],ws.value=[],Sa.value=null,St.value=!1,Oe.value=null}return{studentAssignments:wn,teacherAssignments:ws,currentAssignment:Sa,loading:St,error:Oe,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,reset:r}}const Mw={class:"collection-icon"},Fw={class:"collection-name"},jw={class:"collection-desc"},Hw={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(m(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",Mw,$(e.collection.icon),1),c("span",Fw,$(e.collection.name),1),c("span",jw,$(e.collection.description),1)]))}},Ww=ye(Hw,[["__scopeId","data-v-747be5b1"]]),Vw={class:"collection-grid"},Kw={class:"collection-cards"},Gw={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=Zn().COLLECTIONS;return(n,o)=>(m(),h("div",Vw,[o[0]||(o[0]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",Kw,[(m(!0),h(Z,null,le(P(s),a=>(m(),Be(Ww,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))])]))}},Ur=ye(Gw,[["__scopeId","data-v-66fee6e8"]]),zw={class:"casual-lobby"},Jw={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(m(),h("div",zw,[me(Ur,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},Yw=ye(Jw,[["__scopeId","data-v-a78f70b6"]]),qw={class:"assignment-panel"},Xw={key:0,class:"loading-state"},Qw={key:1,class:"empty-state"},Zw={key:2,class:"assignment-cards"},eC=["onClick"],tC={class:"card-header"},sC={class:"exercise-name"},nC={class:"card-meta"},oC={key:0,class:"meta-item"},aC={class:"progress-section"},rC={class:"progress-bar"},lC={class:"progress-label"},iC={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const i=s(r);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(r){if(!r.due_at)return"";const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(r,i)=>(m(),h("div",qw,[i[2]||(i[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(m(),h("div",Xw,[...i[0]||(i[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(m(),h("div",Qw,[...i[1]||(i[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(m(),h("div",Zw,[(m(!0),h(Z,null,le(e.assignments,l=>(m(),h("div",{key:l.id,class:ue(["assignment-card",s(l)]),onClick:u=>r.$emit("select-assignment",l)},[c("div",tC,[c("span",sC,$(l.exercise_name),1),c("span",{class:ue(["status-badge",s(l)])},$(n(l)),3)]),c("div",nC,[l.classroom_name?(m(),h("span",oC,$(l.classroom_name),1)):B("",!0),l.due_at?(m(),h("span",{key:1,class:ue(["meta-item",a(l)])},$(o(l)),3)):B("",!0)]),c("div",aC,[c("div",rC,[c("div",{class:ue(["progress-fill",s(l)]),style:ct({width:t(l)+"%"})},null,6)]),c("span",lC,$(l.attempted_boards)+" / "+$(l.total_boards)+" boards ",1)])],10,eC))),128))]))]))}},cC=ye(iC,[["__scopeId","data-v-dc0b8e86"]]),uC={class:"student-lobby"},dC={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Fe(),n=na(),o=N(()=>n.studentAssignments.value.length>0),a=N(()=>n.loading.value);function r(i){console.log("Selected assignment:",i)}return _t(()=>{const i=s.currentUser.value;i&&n.fetchStudentAssignments(i.id)}),(i,l)=>(m(),h("div",uC,[o.value||a.value?(m(),Be(cC,{key:0,assignments:P(n).studentAssignments.value,loading:a.value,onSelectAssignment:r},null,8,["assignments","loading"])):B("",!0),me(Ur,{onSelectCollection:l[0]||(l[0]=u=>i.$emit("select-collection",u))})]))}},fC=ye(dC,[["__scopeId","data-v-de436049"]]),mu="https://api.bridge-classroom.com/api",hu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",bo=T([]),Mr=T([]),Fr=T([]),er=T(!1),$a=T(null),vC=2*60*1e3;async function pC(e,t=!1){if(!t&&$a.value&&Date.now()-new Date($a.value).getTime()<vC)return{success:!0,cached:!0};er.value=!0;try{const s=await fetch(`${mu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":hu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return bo.value=n.classrooms||[],Mr.value=n.needs_attention||[],Fr.value=n.recent_activity||[],$a.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{er.value=!1}}async function mC(e,t){try{const s=await fetch(`${mu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":hu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?Mr.value=[]:t==="activity"&&(Fr.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function hC(){const e=N(()=>({classroomCount:bo.value.length,openAssignmentCount:bo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:bo,needsAttention:Mr,recentActivity:Fr,lobbyLoading:er,summaryStats:e,loadTeacherLobbyData:pC,clearPanel:mC}}const gC={class:"roster"},yC={class:"roster-header"},bC={class:"member-count"},_C={key:0,class:"roster-empty"},wC={key:1,class:"roster-table"},CC={class:"member-name"},SC={class:"member-email"},$C={class:"member-date"},kC={class:"member-action"},xC=["onClick","disabled"],AC={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=T(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const i=`${r.first_name} ${r.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,i)=>(m(),h("div",gC,[c("div",yC,[i[0]||(i[0]=c("h4",null,"Class Roster",-1)),c("span",bC,$(e.members.length)+" "+$(e.members.length===1?"student":"students"),1)]),e.members.length===0?(m(),h("div",_C,[...i[1]||(i[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(m(),h("table",wC,[i[2]||(i[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(m(!0),h(Z,null,le(e.members,l=>(m(),h("tr",{key:l.student_id},[c("td",CC,$(l.first_name)+" "+$(l.last_name),1),c("td",SC,$(l.email),1),c("td",$C,$(o(l.joined_at)),1),c("td",kC,[c("button",{class:"remove-btn",onClick:u=>a(l),disabled:n.value===l.student_id},$(n.value===l.student_id?"Removing...":"Remove"),9,xC)])]))),128))])]))]))}},NC=ye(AC,[["__scopeId","data-v-ee901be3"]]),TC={class:"header-left"},EC={class:"classroom-name"},OC={class:"header-meta"},RC={class:"join-badge"},IC={class:"member-count"},PC={key:0,class:"stat-badge"},DC={key:1,class:"stat-badge completion"},LC={key:0,class:"mini-bars"},BC={class:"bar-label"},UC={class:"bar-track"},MC={class:"bar-count"},FC=["aria-label"],jC={key:0,class:"card-body"},HC={key:0,class:"classroom-desc"},WC={class:"invite-section"},VC={class:"invite-field"},KC=["value"],GC={class:"email-section"},zC={class:"email-header"},JC={class:"email-template"},YC={class:"email-body"},qC={key:1,class:"assignments-section"},XC={class:"assignment-list"},QC={class:"assignment-name"},ZC={key:0,class:"assignment-due"},eS={class:"assignment-boards"},tS={key:3,class:"loading-roster"},sS={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=ao(),a=na(),r=T(null),i=T(!1),l=T(!1),u=T(!1),d=T([]),f=N(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);vt(()=>s.expanded,async k=>{if(k&&!r.value){i.value=!0;const[C,_]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);C!=null&&C.success&&(r.value=C.classroom),d.value=_||[],i.value=!1}});function p(k){return k?new Date(k).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function v(k){return k.students_total?Math.round(k.students_completed/k.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(f.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function b(){const k=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(k),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function A(k){const C=await o.removeMember(s.classroom.id,k);C!=null&&C.success&&(r.value&&(r.value.members=r.value.members.filter(_=>_.student_id!==k)),n("member-removed"))}return(k,C)=>(m(),h("div",{class:ue(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:C[0]||(C[0]=_=>k.$emit("toggle"))},[c("div",TC,[c("h3",EC,$(e.classroom.name),1),c("div",OC,[c("span",RC,"JOIN: "+$(e.classroom.join_code),1),c("span",IC,$(e.classroom.member_count)+" "+$(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(m(),h("span",PC,$(e.classroom.open_assignment_count)+" "+$(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):B("",!0),e.classroom.avg_completion_pct>0?(m(),h("span",DC,$(e.classroom.avg_completion_pct)+"% avg",1)):B("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(m(),h("div",LC,[(m(!0),h(Z,null,le(e.classroom.assignments,_=>(m(),h("div",{key:_.id,class:"mini-bar"},[c("span",BC,$(_.exercise_name),1),c("div",UC,[c("div",{class:"bar-fill",style:ct({width:v(_)})},null,4)]),c("span",MC,$(_.students_completed)+"/"+$(_.students_total),1)]))),128))])):B("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:ue(["chevron",{rotated:e.expanded}])},"",2)],8,FC)]),e.expanded?(m(),h("div",jC,[e.classroom.description?(m(),h("p",HC,$(e.classroom.description),1)):B("",!0),c("div",WC,[C[2]||(C[2]=c("h4",null,"Invite Link",-1)),C[3]||(C[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",VC,[c("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:C[1]||(C[1]=_=>_.target.select())},null,8,KC),c("button",{class:"copy-btn",onClick:g},$(l.value?"Copied!":"Copy"),1)])]),c("div",GC,[c("div",zC,[C[4]||(C[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:b},$(u.value?"Copied!":"Copy"),1)]),c("div",JC,[C[5]||(C[5]=c("p",null,[c("strong",null,"Subject:"),$t(" Join our Bridge Classroom for practice exercises")],-1)),c("div",YC," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+$(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(m(),h("div",qC,[C[6]||(C[6]=c("h4",null,"Assignments",-1)),c("div",XC,[(m(!0),h(Z,null,le(d.value,_=>(m(),h("div",{key:_.id,class:"assignment-row"},[c("span",QC,$(_.exercise_name),1),_.due_at?(m(),h("span",ZC,"Due "+$(p(_.due_at)),1)):B("",!0),c("span",eS,$(_.total_boards)+" boards",1)]))),128))])])):B("",!0),r.value?(m(),Be(NC,{key:2,members:r.value.members,onRemoveMember:A},null,8,["members"])):i.value?(m(),h("div",tS," Loading roster... ")):B("",!0)])):B("",!0)],2))}},nS=ye(sS,[["__scopeId","data-v-59d6a074"]]),oS={class:"modal-content"},aS={class:"step"},rS={class:"form-group"},lS={class:"form-group"},iS={class:"step-actions"},cS=["disabled"],uS={key:0,class:"error-text"},dS={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Fe(),o=ao(),a=T(""),r=T(""),i=T(!1),l=T(null);async function u(){if(!a.value.trim()||i.value)return;const d=n.currentUser.value;if(!d)return;i.value=!0,l.value=null;const f=await o.createClassroom(d.id,a.value.trim(),r.value.trim()||null);f.success?s("classroom-created",f.classroom):l.value=f.error||"Failed to create classroom",i.value=!1}return(d,f)=>(m(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Dt(p=>d.$emit("close"),["self"]))},[c("div",oS,[c("div",aS,[f[7]||(f[7]=c("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",rS,[f[4]||(f[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),Re(c("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:To(u,["enter"])},null,544),[[pt,a.value]]),f[5]||(f[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",lS,[f[6]||(f[6]=c("label",{for:"classroom-desc"},[$t("Description "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[pt,r.value]])]),c("div",iS,[c("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=p=>d.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:u},$(i.value?"Creating...":"Create Classroom"),9,cS)]),l.value?(m(),h("p",uS,$(l.value),1)):B("",!0)])])]))}},fS=ye(dS,[["__scopeId","data-v-c26a1ae6"]]),Cn="https://api.bridge-classroom.com/api",Sn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Cs=T([]),ka=T(null),Ut=T(!1),De=T(null);function vS(){async function e(r={}){Ut.value=!0,De.value=null;try{const i=new URLSearchParams;r.created_by&&i.set("created_by",r.created_by),r.curriculum_path&&i.set("curriculum_path",r.curriculum_path),r.visibility&&i.set("visibility",r.visibility);const l=i.toString(),u=`${Cn}/exercises${l?"?"+l:""}`,d=await fetch(u,{headers:{"x-api-key":Sn}});if(!d.ok){const p=await d.text();return De.value=p||`Server error (${d.status})`,null}const f=await d.json();return f.success?Cs.value=f.exercises:De.value=f.error||"Failed to fetch exercises",f}catch(i){return console.error("Failed to fetch exercises:",i),De.value="Unable to connect to server",null}finally{Ut.value=!1}}async function t(r){Ut.value=!0,De.value=null;try{const i=await fetch(`${Cn}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":Sn}});if(!i.ok){const u=await i.text();return De.value=u||`Server error (${i.status})`,null}const l=await i.json();return l.success?ka.value=l.exercise:De.value=l.error||"Failed to fetch exercise",l}catch(i){return console.error("Failed to fetch exercise detail:",i),De.value="Unable to connect to server",null}finally{Ut.value=!1}}async function s({name:r,description:i,created_by:l,curriculum_path:u,visibility:d,boards:f}){Ut.value=!0,De.value=null;try{const p=await fetch(`${Cn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Sn},body:JSON.stringify({name:r,description:i||null,created_by:l||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!p.ok){const g=await p.text();return De.value=g||`Server error (${p.status})`,{success:!1,error:De.value}}const v=await p.json();return v.success?Cs.value=[v.exercise,...Cs.value]:De.value=v.error||"Failed to create exercise",v}catch(p){return console.error("Failed to create exercise:",p),De.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ut.value=!1}}async function n(r,i){Ut.value=!0,De.value=null;try{const l=await fetch(`${Cn}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Sn},body:JSON.stringify(i)});if(!l.ok){const d=await l.text();return De.value=d||`Server error (${l.status})`,{success:!1,error:De.value}}const u=await l.json();return u.success||(De.value=u.error||"Failed to update exercise"),u}catch(l){return console.error("Failed to update exercise:",l),De.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ut.value=!1}}async function o(r){try{const i=await fetch(`${Cn}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":Sn}});if(!i.ok){const u=await i.text();return De.value=u||`Server error (${i.status})`,{success:!1,error:De.value}}const l=await i.json();return l.success&&(Cs.value=Cs.value.filter(u=>u.id!==r)),l}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Cs.value=[],ka.value=null,Ut.value=!1,De.value=null}return{exercises:Cs,currentExercise:ka,loading:Ut,error:De,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const pS={class:"modal-content"},mS={class:"step"},hS={class:"form-group"},gS=["value"],yS={key:0,class:"form-hint"},bS={class:"form-group"},_S={class:"target-options"},wS={class:"radio-option"},CS={class:"radio-option"},SS={key:0,class:"form-group"},$S=["value"],kS={key:1,class:"form-group"},xS=["value"],AS={class:"form-group"},NS={class:"step-actions"},TS=["disabled"],ES={key:2,class:"error-text"},OS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Fe(),a=vS(),r=na(),i=ao(),l=eo(),u=T(""),d=T("classroom"),f=T(s.preselectedClassroomId||""),p=T(""),v=T(""),g=T(!1),b=T(null),A=N(()=>a.exercises.value),k=N(()=>a.loading.value),C=N(()=>i.teacherClassrooms.value),_=N(()=>l.students.value),E=N(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!p.value));async function Y(){if(!E.value||g.value)return;const Q=o.currentUser.value;if(!Q)return;g.value=!0,b.value=null;const D=await r.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?p.value:null,assigned_by:Q.id,due_at:v.value||null});D.success?n("assignment-created",D.assignment):b.value=D.error||"Failed to create assignment",g.value=!1}return _t(async()=>{a.exercises.value.length||await a.fetchExercises();const Q=o.currentUser.value;Q&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(Q.id)}),(Q,D)=>(m(),h("div",{class:"modal-overlay",onClick:D[7]||(D[7]=Dt(J=>Q.$emit("close"),["self"]))},[c("div",pS,[c("div",mS,[D[18]||(D[18]=c("h2",null,"Create Assignment",-1)),D[19]||(D[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",hS,[D[9]||(D[9]=c("label",{for:"exercise-select"},"Exercise",-1)),Re(c("select",{id:"exercise-select","onUpdate:modelValue":D[0]||(D[0]=J=>u.value=J),class:"form-select"},[D[8]||(D[8]=c("option",{value:""},"Select an exercise...",-1)),(m(!0),h(Z,null,le(A.value,J=>(m(),h("option",{key:J.id,value:J.id},$(J.name)+" ("+$(J.board_count)+" boards)",9,gS))),128))],512),[[Pn,u.value]]),k.value?(m(),h("p",yS,"Loading exercises...")):B("",!0)]),c("div",bS,[D[12]||(D[12]=c("label",null,"Assign to",-1)),c("div",_S,[c("label",wS,[Re(c("input",{type:"radio","onUpdate:modelValue":D[1]||(D[1]=J=>d.value=J),value:"classroom"},null,512),[[yl,d.value]]),D[10]||(D[10]=c("span",null,"Classroom",-1))]),c("label",CS,[Re(c("input",{type:"radio","onUpdate:modelValue":D[2]||(D[2]=J=>d.value=J),value:"student"},null,512),[[yl,d.value]]),D[11]||(D[11]=c("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(m(),h("div",SS,[D[14]||(D[14]=c("label",{for:"classroom-select"},"Classroom",-1)),Re(c("select",{id:"classroom-select","onUpdate:modelValue":D[3]||(D[3]=J=>f.value=J),class:"form-select"},[D[13]||(D[13]=c("option",{value:""},"Select a classroom...",-1)),(m(!0),h(Z,null,le(C.value,J=>(m(),h("option",{key:J.id,value:J.id},$(J.name)+" ("+$(J.member_count)+" students)",9,$S))),128))],512),[[Pn,f.value]])])):B("",!0),d.value==="student"?(m(),h("div",kS,[D[16]||(D[16]=c("label",{for:"student-select"},"Student",-1)),Re(c("select",{id:"student-select","onUpdate:modelValue":D[4]||(D[4]=J=>p.value=J),class:"form-select"},[D[15]||(D[15]=c("option",{value:""},"Select a student...",-1)),(m(!0),h(Z,null,le(_.value,J=>(m(),h("option",{key:J.id,value:J.id},$(J.first_name)+" "+$(J.last_name),9,xS))),128))],512),[[Pn,p.value]])])):B("",!0),c("div",AS,[D[17]||(D[17]=c("label",{for:"due-date"},[$t("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("input",{id:"due-date","onUpdate:modelValue":D[5]||(D[5]=J=>v.value=J),type:"date",class:"form-input"},null,512),[[pt,v.value]])]),c("div",NS,[c("button",{class:"btn btn-secondary",onClick:D[6]||(D[6]=J=>Q.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!E.value||g.value,onClick:Y},$(g.value?"Creating...":"Create Assignment"),9,TS)]),b.value?(m(),h("p",ES,$(b.value),1)):B("",!0)])])]))}},RS=ye(OS,[["__scopeId","data-v-5e97b847"]]),IS={class:"needs-attention"},PS={class:"panel-header"},DS={key:0,class:"empty-state"},LS={key:1,class:"attention-list"},BS={class:"item-icon"},US={class:"item-text"},MS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(m(),h("div",IS,[c("div",PS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(m(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):B("",!0)]),e.items.length?(m(),h("div",LS,[(m(!0),h(Z,null,le(e.items,(r,i)=>(m(),h("div",{key:i,class:ue(["attention-item",r.type])},[c("span",BS,$(t(r.type)),1),c("span",US,$(s(r)),1)],2))),128))])):(m(),h("div",DS," All caught up! No items need attention. "))]))}},FS=ye(MS,[["__scopeId","data-v-65e8ba1f"]]),jS={class:"recent-activity"},HS={class:"panel-header"},WS={key:0,class:"empty-state"},VS={key:1,class:"activity-list"},KS={class:"event-content"},GS={class:"event-text"},zS={class:"event-time"},JS={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(m(),h("div",jS,[c("div",HS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(m(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):B("",!0)]),e.events.length?(m(),h("div",VS,[(m(!0),h(Z,null,le(e.events,(r,i)=>(m(),h("div",{key:i,class:"activity-item"},[c("span",{class:ue(["event-icon",r.type])},$(t(r.type)),3),c("div",KS,[c("span",GS,$(s(r)),1),c("span",zS,$(n(r.timestamp)),1)])]))),128))])):(m(),h("div",WS," No recent activity. "))]))}},YS=ye(JS,[["__scopeId","data-v-39e672f5"]]),qS={class:"teacher-lobby"},XS={class:"welcome-section"},QS={class:"welcome-title"},ZS={class:"welcome-subtitle"},e$={class:"quick-actions"},t$={key:0,class:"loading-state"},s$={key:1,class:"dashboard-grid"},n$={class:"left-column"},o$={key:0,class:"classrooms-section"},a$={class:"classroom-cards"},r$={key:1,class:"empty-state"},l$={class:"right-column"},i$={class:"collections-section"},c$={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin"],setup(e){const t=Fe(),s=hC(),n=T(!1),o=T(!1),a=T(null),r=N(()=>{const v=t.currentUser.value;return v?v.firstName:""}),i=N(()=>{const v=s.summaryStats.value;if(!v||v.classroomCount===0)return"Get started by creating your first classroom.";const g=[];return g.push(`${v.classroomCount} active ${v.classroomCount===1?"classroom":"classrooms"}`),v.openAssignmentCount>0&&g.push(`${v.openAssignmentCount} open ${v.openAssignmentCount===1?"assignment":"assignments"}`),g.join(", ")+"."});function l(v){a.value=a.value===v?null:v}function u(v){n.value=!1,a.value=v.id,p()}function d(){o.value=!1,p()}function f(v){const g=t.currentUser.value;g&&s.clearPanel(g.id,v)}function p(){const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id,!0)}return _t(()=>{const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id)}),(v,g)=>(m(),h("div",qS,[c("div",XS,[c("h2",QS,"Welcome back, "+$(r.value),1),c("p",ZS,$(i.value),1)]),c("div",e$,[c("button",{class:"action-btn create",onClick:g[0]||(g[0]=b=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:g[1]||(g[1]=b=>o.value=!0)}," + New Assignment "),e.isAdmin?(m(),h("button",{key:0,class:"action-btn admin",onClick:g[2]||(g[2]=b=>v.$emit("show-admin"))}," Admin Panel ")):B("",!0)]),P(s).lobbyLoading.value&&!P(s).lobbyClassrooms.value.length?(m(),h("div",t$,[...g[8]||(g[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(m(),h("div",s$,[c("div",n$,[P(s).lobbyClassrooms.value.length?(m(),h("div",o$,[g[9]||(g[9]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",a$,[(m(!0),h(Z,null,le(P(s).lobbyClassrooms.value,b=>(m(),Be(nS,{key:b.id,classroom:b,expanded:a.value===b.id,onToggle:A=>l(b.id),onMemberRemoved:p},null,8,["classroom","expanded","onToggle"]))),128))])])):(m(),h("div",r$,[...g[10]||(g[10]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",l$,[me(FS,{items:P(s).needsAttention.value,onClear:g[3]||(g[3]=b=>f("attention"))},null,8,["items"]),me(YS,{events:P(s).recentActivity.value,onClear:g[4]||(g[4]=b=>f("activity"))},null,8,["events"])])])),c("div",i$,[g[11]||(g[11]=c("h3",{class:"section-title"},"Lesson Collections",-1)),me(Ur,{onSelectCollection:g[5]||(g[5]=b=>v.$emit("select-collection",b))})]),n.value?(m(),Be(fS,{key:2,onClose:g[6]||(g[6]=b=>n.value=!1),onClassroomCreated:u})):B("",!0),o.value?(m(),Be(RS,{key:3,onClose:g[7]||(g[7]=b=>o.value=!1),onAssignmentCreated:d})):B("",!0)]))}},u$=ye(c$,[["__scopeId","data-v-82f0156b"]]),gu="https://api.bridge-classroom.com/api",yu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",bu=T(null),_u=T([]),wu=T(null),Cu=T(null),tr=T(!1),sr=T(null),xa=T(null),d$=60*1e3;async function Su(e=!1){if(!e&&xa.value&&Date.now()-new Date(xa.value).getTime()<d$)return{success:!0,cached:!0};tr.value=!0,sr.value=null;try{const t=await fetch(`${gu}/admin/stats`,{headers:{"x-api-key":yu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return bu.value=s.stats,_u.value=s.popular_lessons||[],wu.value=s.database,xa.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),sr.value=t.message,{success:!1,error:t.message}}finally{tr.value=!1}}async function $u(){try{const e=await fetch(`${gu}/admin/health`,{headers:{"x-api-key":yu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Cu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function f$(){await Promise.all([Su(!0),$u()])}function v$(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function p$(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function jr(){return{stats:bu,popularLessons:_u,database:wu,health:Cu,loading:tr,error:sr,loadStats:Su,loadHealth:$u,refreshAll:f$,formatBytes:v$,formatUptime:p$}}const m$={class:"stats-row"},h$={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},g$={class:"stat-number"},y$={class:"stat-card",style:{"border-top-color":"#1565c0"}},b$={class:"stat-number"},_$={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},w$={class:"stat-number"},C$={class:"stat-card",style:{"border-top-color":"#e65100"}},S$={class:"stat-number"},$$={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,i;return m(),h("div",m$,[c("div",h$,[c("div",g$,$(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",y$,[c("div",b$,$(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",_$,[c("div",w$,$(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",C$,[c("div",S$,$(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},k$=ye($$,[["__scopeId","data-v-a14a2199"]]),x$={class:"popular-lessons"},A$={key:0,class:"empty-state"},N$={key:1,class:"table-wrap"},T$={class:"lessons-table"},E$={class:"lesson-name"},O$={class:"num-col"},R$={class:"num-col"},I$={class:"num-col"},P$={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(m(),h("div",x$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(m(),h("div",N$,[c("table",T$,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(m(!0),h(Z,null,le(e.lessons.slice(0,15),a=>(m(),h("tr",{key:a.deal_subfolder},[c("td",E$,$(t(a.deal_subfolder)),1),c("td",O$,$(a.play_count.toLocaleString()),1),c("td",R$,$(a.unique_users),1),c("td",I$,[c("span",{class:ue(["accuracy-badge",s(a.accuracy_pct)])},$(a.accuracy_pct)+"% ",3)])]))),128))])])])):(m(),h("div",A$,"No lesson data yet."))]))}},D$=ye(P$,[["__scopeId","data-v-079bd4f8"]]),L$={class:"database-panel"},B$={key:0,class:"empty-state"},U$={class:"db-size"},M$={class:"tables-table"},F$={class:"table-name"},j$={class:"num-col"},H$={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=jr();return(s,n)=>(m(),h("div",L$,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(m(),h(Z,{key:1},[c("div",U$,[n[0]||(n[0]=$t(" SQLite file: ",-1)),c("strong",null,$(P(t)(e.database.file_size_bytes)),1)]),c("table",M$,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(m(!0),h(Z,null,le(e.database.tables,o=>(m(),h("tr",{key:o.name},[c("td",F$,$(o.name),1),c("td",j$,$(o.row_count.toLocaleString()),1)]))),128))])])],64)):(m(),h("div",B$,"Loading..."))]))}},W$=ye(H$,[["__scopeId","data-v-d5945aff"]]),V$={class:"system-health"},K$={class:"health-header"},G$=["disabled"],z$={key:0,class:"empty-state"},J$={key:1,class:"health-rows"},Y$={class:"health-row"},q$={class:"health-value"},X$={class:"health-row"},Q$={class:"health-value"},Z$={class:"health-row"},ek={class:"health-value"},tk={class:"health-row"},sk={class:"health-value"},nk={class:"health-row"},ok={class:"health-value"},ak={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=jr();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(m(),h("div",V$,[c("div",K$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},$(e.refreshing?"Refreshing...":"Refresh"),9,G$)]),e.health?(m(),h("div",J$,[c("div",Y$,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",q$,"Up "+$(P(t)(e.health.uptime_seconds)),1)]),c("div",X$,[c("span",{class:ue(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",Q$,$(e.health.database_writable?"Writable":"Error"),1)]),c("div",Z$,[c("span",{class:ue(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",ek,$(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",tk,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",sk,$(e.health.disk_available_gb)+" GB / "+$(e.health.disk_total_gb)+" GB available",1)]),c("div",nk,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",ok,"v"+$(e.health.api_version),1)])])):(m(),h("div",z$,"Loading..."))]))}},rk=ye(ak,[["__scopeId","data-v-0d4e96d5"]]),lk={class:"admin-lobby"},ik={class:"admin-header"},ck={key:0,class:"admin-subtitle"},uk={key:0,class:"loading-state"},dk={key:1,class:"error-state"},fk={class:"announcement-section"},vk={class:"announcement-info"},pk=["innerHTML"],mk={key:0,class:"announcement-expires"},hk={key:1,class:"announcement-expires"},gk={class:"announcement-actions"},yk=["disabled"],bk={key:1,class:"announcement-form"},_k={class:"form-row"},wk=["disabled"],Ck={class:"content-grid"},Sk={class:"name-correction-section"},$k={class:"search-row"},kk=["disabled"],xk={key:0,class:"search-results"},Ak=["onClick"],Nk={class:"result-name"},Tk={class:"result-email"},Ek={key:0,class:"corrected-badge"},Ok={key:1,class:"no-results"},Rk={key:2,class:"edit-form"},Ik={class:"edit-row"},Pk={class:"edit-field"},Dk={class:"edit-field"},Lk=["disabled"],Bk={key:0,class:"save-feedback success"},Uk={key:1,class:"save-feedback error"},Mk={__name:"AdminLobby",emits:["back"],setup(e){const t=jr(),s=Br(),n=T(!1),o=T(""),a=T("info"),r=T(""),i=T(!1),l=T(!1),u=T(!1);function d(){const L=s.announcement.value;if(L){if(o.value=L.message,a.value=L.type,L.expires_at){const W=new Date(L.expires_at);r.value=new Date(W.getTime()-W.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";u.value=!0}}function f(){u.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const L=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,L),o.value="",a.value="info",r.value="",u.value=!1}catch(L){console.error("Failed to publish announcement:",L)}finally{i.value=!1}}}async function v(){l.value=!0;try{await s.clearAnnouncement()}catch(L){console.error("Failed to clear announcement:",L)}finally{l.value=!1}}function g(L){return L?new Date(L).toLocaleString():""}const b={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function A(L){return L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(G,V)=>{const ae=b[V.toLowerCase()];return ae?`<span class="ann-circle" style="background:${ae.bg};color:${ae.fg}"></span>`:G})}const k="https://api.bridge-classroom.com/api",C="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_=T(""),E=T([]),Y=T(!1),Q=T(!1),D=T(null),J=T(""),z=T(""),de=T(!1),ve=T(!1),ce=T("");async function be(){if(_.value.trim()){Q.value=!0,Y.value=!1,E.value=[],D.value=null,ve.value=!1,ce.value="";try{const L=await fetch(`${k}/admin/users/search?q=${encodeURIComponent(_.value.trim())}`,{headers:{"x-api-key":C}});if(!L.ok)throw new Error(`Search failed: ${L.status}`);const W=await L.json();E.value=W.users||[]}catch(L){console.error("User search failed:",L)}finally{Q.value=!1,Y.value=!0}}}function we(L){D.value=L,J.value=L.first_name,z.value=L.last_name,ve.value=!1,ce.value=""}async function ne(){if(!(!D.value||!J.value.trim()||!z.value.trim())){de.value=!0,ve.value=!1,ce.value="";try{const L=await fetch(`${k}/admin/users/${encodeURIComponent(D.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":C},body:JSON.stringify({first_name:J.value.trim(),last_name:z.value.trim()})});if(!L.ok)throw new Error(`Save failed: ${L.status}`);const W=await L.json();W.success&&(ve.value=!0,D.value.first_name=W.user.first_name,D.value.last_name=W.user.last_name,D.value.name_corrected_at=W.user.name_corrected_at)}catch(L){ce.value=L.message}finally{de.value=!1}}}async function re(){await Promise.all([t.loadStats(),t.loadHealth()])}async function q(){n.value=!0,await t.refreshAll(),n.value=!1}return _t(re),(L,W)=>(m(),h("div",lk,[c("div",ik,[c("button",{class:"back-btn",onClick:W[0]||(W[0]=G=>L.$emit("back"))}," Back to Dashboard"),W[7]||(W[7]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),P(t).stats.value?(m(),h("p",ck,$(P(t).stats.value.total_observations.toLocaleString())+" total observations across "+$(P(t).stats.value.total_users)+" users ",1)):B("",!0)]),P(t).loading.value&&!P(t).stats.value?(m(),h("div",uk,[...W[8]||(W[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):P(t).error.value?(m(),h("div",dk,[c("p",null,$(P(t).error.value),1),c("button",{class:"retry-btn",onClick:re},"Retry")])):P(t).stats.value?(m(),h(Z,{key:2},[c("div",fk,[W[10]||(W[10]=c("h3",{class:"section-title"},"Site Announcement",-1)),P(s).announcement.value&&!u.value?(m(),h("div",{key:0,class:ue(["current-announcement",P(s).announcement.value.type])},[c("div",vk,[c("span",{class:ue(["announcement-type-badge",P(s).announcement.value.type])},$(P(s).announcement.value.type),3),c("span",{class:"announcement-message",innerHTML:A(P(s).announcement.value.message)},null,8,pk),P(s).announcement.value.expires_at?(m(),h("span",mk," Expires: "+$(g(P(s).announcement.value.expires_at)),1)):(m(),h("span",hk,"No expiration"))]),c("div",gk,[c("button",{class:"edit-btn",onClick:d},"Edit"),c("button",{class:"clear-btn",onClick:v,disabled:l.value},$(l.value?"Clearing...":"Clear"),9,yk)])],2)):u.value||!P(s).announcement.value?(m(),h("div",bk,[Re(c("input",{"onUpdate:modelValue":W[1]||(W[1]=G=>o.value=G),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:To(p,["enter"])},null,544),[[pt,o.value]]),c("div",_k,[Re(c("select",{"onUpdate:modelValue":W[2]||(W[2]=G=>a.value=G),class:"type-select"},[...W[9]||(W[9]=[c("option",{value:"info"},"Info",-1),c("option",{value:"warning"},"Warning",-1),c("option",{value:"urgent"},"Urgent",-1)])],512),[[Pn,a.value]]),Re(c("input",{"onUpdate:modelValue":W[3]||(W[3]=G=>r.value=G),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[pt,r.value]]),u.value?(m(),h("button",{key:0,class:"cancel-btn",onClick:f},"Cancel")):B("",!0),c("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},$(i.value?"Publishing...":u.value?"Update":"Publish"),9,wk)])])):B("",!0)]),me(k$,{stats:P(t).stats.value},null,8,["stats"]),c("div",Ck,[me(D$,{lessons:P(t).popularLessons.value},null,8,["lessons"]),me(W$,{database:P(t).database.value},null,8,["database"])]),me(rk,{health:P(t).health.value,refreshing:n.value,onRefresh:q},null,8,["health","refreshing"]),c("div",Sk,[W[13]||(W[13]=c("h3",{class:"section-title"},"Correct User Name",-1)),c("div",$k,[Re(c("input",{"onUpdate:modelValue":W[4]||(W[4]=G=>_.value=G),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:To(be,["enter"])},null,544),[[pt,_.value]]),c("button",{class:"search-btn",onClick:be,disabled:Q.value||!_.value.trim()},$(Q.value?"Searching...":"Search"),9,kk)]),E.value.length?(m(),h("div",xk,[(m(!0),h(Z,null,le(E.value,G=>(m(),h("div",{key:G.id,class:ue(["search-result-item",{selected:D.value&&D.value.id===G.id}]),onClick:V=>we(G)},[c("span",Nk,$(G.first_name)+" "+$(G.last_name),1),c("span",Tk,$(G.email),1),G.name_corrected_at?(m(),h("span",Ek,"corrected")):B("",!0)],10,Ak))),128))])):B("",!0),Y.value&&!E.value.length?(m(),h("div",Ok,' No users found for "'+$(_.value)+'" ',1)):B("",!0),D.value?(m(),h("div",Rk,[c("div",Ik,[c("div",Pk,[W[11]||(W[11]=c("label",null,"First Name",-1)),Re(c("input",{"onUpdate:modelValue":W[5]||(W[5]=G=>J.value=G),type:"text",class:"edit-input"},null,512),[[pt,J.value]])]),c("div",Dk,[W[12]||(W[12]=c("label",null,"Last Name",-1)),Re(c("input",{"onUpdate:modelValue":W[6]||(W[6]=G=>z.value=G),type:"text",class:"edit-input"},null,512),[[pt,z.value]])]),c("button",{class:"save-btn",onClick:ne,disabled:de.value||!J.value.trim()||!z.value.trim()},$(de.value?"Saving...":"Save"),9,Lk)]),ve.value?(m(),h("p",Bk,"Name corrected successfully.")):B("",!0),ce.value?(m(),h("p",Uk,$(ce.value),1)):B("",!0)])):B("",!0)])],64)):B("",!0)]))}},Fk=ye(Mk,[["__scopeId","data-v-5a6964cf"]]),jk={class:"lobby-view"},Hk={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Fe(),s=na(),n=T(!1),o=N(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=N(()=>s.studentAssignments.value.length>0),r=N(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return _t(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,l)=>(m(),h("div",jk,[n.value?(m(),Be(Fk,{key:0,onBack:l[0]||(l[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(m(),Be(u$,{key:1,"is-admin":o.value==="admin",onSelectCollection:l[1]||(l[1]=u=>i.$emit("select-collection",u)),onShowAdmin:l[2]||(l[2]=u=>n.value=!0)},null,8,["is-admin"])):a.value||r.value?(m(),Be(fC,{key:2,onSelectCollection:l[3]||(l[3]=u=>i.$emit("select-collection",u))})):(m(),Be(Yw,{key:3,onSelectCollection:l[4]||(l[4]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:l[5]||(l[5]=u=>i.$emit("show-become-teacher"))}))]))}},Wk=ye(Hk,[["__scopeId","data-v-0f28018d"]]),Vk={class:"modal-content"},Kk={key:0,class:"step step-overview"},Gk={class:"step-actions"},zk={key:1,class:"step step-agreement"},Jk={class:"agreement-checkbox"},Yk={class:"step-actions"},qk=["disabled"],Xk={key:0,class:"error-text"},Qk={key:2,class:"step step-confirmation"},Zk={class:"step-actions"},ex={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Fe(),o=T(1),a=T(!1),r=T(!1),i=T(null);async function l(){const u=n.currentUser.value;if(u){r.value=!0,i.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){i.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:v}=await Op();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(d){console.error("Teacher activation failed:",d),i.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(u,d)=>(m(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Dt(f=>u.$emit("close"),["self"]))},[c("div",Vk,[o.value===1?(m(),h("div",Kk,[d[6]||(d[6]=xo('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",Gk,[c("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(m(),h("div",zk,[d[8]||(d[8]=xo('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",Jk,[Re(c("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>a.value=f)},null,512),[[wr,a.value]]),d[7]||(d[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",Yk,[c("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:l},$(r.value?"Activating...":"Activate Teacher Account"),9,qk)]),i.value?(m(),h("p",Xk,$(i.value),1)):B("",!0)])):o.value===3?(m(),h("div",Qk,[d[9]||(d[9]=c("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=c("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",Zk,[c("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):B("",!0)])]))}},tx=ye(ex,[["__scopeId","data-v-56e5717d"]]),sx={},nx={class:"page-footer"};function ox(e,t){return m(),h("footer",nx,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const ax=ye(sx,[["render",ox],["__scopeId","data-v-1b649814"]]),rx={key:1,class:"app"},lx={class:"app-header"},ix={class:"header-right"},cx=["title"],ux={key:3,class:"stats"},dx={class:"correct"},fx={class:"wrong"},vx={class:"user-avatar-group"},px=["title"],mx=["title"],hx={class:"app-main"},gx={key:3,class:"collection-view"},yx={key:4,class:"practice-layout"},bx={class:"practice-left"},_x={class:"practice-right"},wx={key:1,class:"commentary-panel"},Cx=["innerHTML"],Sx=["innerHTML"],$x=["innerHTML"],kx=["innerHTML"],xx={class:"commentary-controls"},Ax={key:0,class:"bidding-box-wrapper"},Nx={key:1,class:"card-choice-prompt"},Tx=["innerHTML"],Ex={key:3,class:"completion-controls"},Ox={key:0,class:"registration-toast"},Rx={__name:"MainLayout",setup(e){const t=dp(),s=Zn(),n=Fe(),o=ea(),a=iu(),r=eo(),i=Br(),l=_m(),u=T(!1),d=T(!1),f=T(!1),p=T(!1),v=T(null),g=T(""),b=T(null),A=T(null),k=T(null),C=T(!1),_=T(null),E=T(null),Y=T(!1),Q=T(!1),D=T(null);function J(y,w=".current"){if(!y)return;const R=y.querySelector(w);R&&(y.scrollTop=R.offsetTop-y.offsetTop)}vt(()=>l.currentStepIndex.value,()=>{Fn(()=>{J(b.value,".narrative-text.current")})}),vt(()=>l.isComplete.value,y=>{y&&Fn(()=>{J(b.value,".narrative-text.current")})});const z=N(()=>n.isAuthenticated.value),de=N(()=>{const y=n.currentUser.value;return y?`${y.firstName} ${y.lastName}`:""}),ve=N(()=>{const y=n.currentUser.value;return y?`${y.firstName.charAt(0)}${y.lastName.charAt(0)}`.toUpperCase():"?"}),ce=N(()=>{const y=n.currentUser.value;return(y==null?void 0:y.role)||"student"}),be=N(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let we=null;_t(()=>{i.loadAnnouncement(),we=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),gr(()=>{we&&clearInterval(we)}),_t(async()=>{s.initializeFromUrl(),n.initialize();const y=new URLSearchParams(window.location.search);y.get("recover")&&y.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const w=s.getCollectionFromUrl(),R=s.getLessonFromUrl();w&&(A.value=w,R&&await X(w,R)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),ds().initialize(),await r.checkTeacherStatus())});async function ne(y){console.log("User ready:",y.firstName,y.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),Q.value=!0,setTimeout(()=>{Q.value=!1},4e3)),await a.initialize(),ds().initialize(),await r.checkTeacherStatus();const R=sessionStorage.getItem("pendingJoinCode");if(R){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:R}});return}}function re(){ds().reset(),Er().clearCache(),ms().reset(),r.reset(),n.currentUserId.value=null,u.value=!1,p.value=!1,v.value=null}async function q(){C.value=!1,await r.checkTeacherStatus()}const L=T([]),W=T(0),G=N(()=>L.value[W.value]||null),V=N(()=>{var I;const y=ee(A.value),w=y!=null&&y.name?`${y.name} - `:"";if((I=k.value)!=null&&I.name)return w+k.value.name;if(!G.value)return"";const R=G.value.subfolder||G.value.category||"";return R?w+R:""});vt(W,()=>{G.value&&(l.loadDeal(G.value),s.setDealInUrl(G.value.boardNumber))},{flush:"sync"}),vt(()=>l.observationStore.pendingCount.value,(y,w)=>{y>w&&a.triggerSync()}),vt(()=>l.isComplete.value,y=>{y&&(_.value=null)});function ae({subfolder:y,name:w,category:R,content:I}){const U=Ul(I);if(U.length>0){const K=U.map(fe=>({...fe,subfolder:fe.subfolder||y,category:fe.category||R}));L.value=K,W.value=0,l.loadDeal(K[0]),l.resetStats(),un().saveLessonBoardNumbers(y,K.map(fe=>fe.boardNumber)),k.value={id:y,name:w,category:R},s.setLessonInUrl(y),Y.value=!1,M()}else alert("No deals found in the lesson file")}const Pe=N(()=>l.boardState.correctCount),We=N(()=>l.boardState.wrongCount);function wt(y){!l.makeBid(y)&&G.value&&(_.value=G.value.boardNumber)}function Ze({seat:y,suit:w,rank:R}){!l.makeCardChoice(w,R)&&G.value&&(_.value=G.value.boardNumber)}function j(){l.clearCardFeedback(),l.goBack()}function oe(){W.value<L.value.length-1&&(_.value=null,W.value++,l.loadDeal(L.value[W.value]))}function te(y){y>=0&&y<L.value.length&&(_.value=null,W.value=y,l.loadDeal(L.value[y]))}async function ie({subfolder:y,dealNumber:w}){var R;if(((R=k.value)==null?void 0:R.id)===y&&L.value.length>0){const I=L.value.findIndex(U=>U.boardNumber===w);if(I>=0){te(I);return}}for(const I of s.COLLECTIONS)try{const U=y.includes("/")?y.split("/").pop():y,K=`${I.baseUrl}/${U}.pbn`,se=await fetch(K);if(!se.ok)continue;const fe=await se.text();A.value=I.id,s.setCollectionInUrl(I.id),ae({subfolder:y,name:y,category:"",content:fe});const ge=L.value.findIndex(Ie=>Ie.boardNumber===w);ge>=0&&te(ge);return}catch{}}function _e(y){f.value=!1,p.value=!1,v.value=null,ie(y)}function S(y,w){p.value=!1,v.value=null,ie({subfolder:y,dealNumber:w||1})}function x(){k.value=null,s.setLessonInUrl(null),L.value=[],W.value=0,l.resetStats(),Y.value=!1,E.value=null,p.value=!1,v.value=null}function O(){A.value=null,k.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),L.value=[],W.value=0,l.resetStats(),Y.value=!1,E.value=null,p.value=!1,v.value=null}async function M(){if(E.value=null,!A.value||!k.value)return;const y=ee(A.value);if(!y)return;const w=k.value.id,R=w.includes("/")?w.split("/").pop():w,I=`${y.baseUrl}/${R}_Intro.pdf`;try{(await fetch(I,{method:"HEAD"})).ok&&(E.value=I)}catch{}}function H(y){window.innerWidth<600?window.open(y,"_blank"):(D.value=y,Y.value=!0)}function F(y){A.value=y,s.setCollectionInUrl(y)}function ee(y){return s.COLLECTIONS.find(w=>w.id===y)}async function X(y,w){var I;const R=ee(y);if(!R)return console.error("Collection not found:",y),!1;try{const U=await fetch(R.tocUrl);if(!U.ok)throw new Error(`Failed to load TOC: ${U.statusText}`);const K=await U.json();let se=null,fe=null;for(const rt of K.categories||[]){const Et=(I=rt.lessons)==null?void 0:I.find(Me=>Me.id===w);if(Et){se=Et,fe=rt;break}}if(!se)return console.error("Lesson not found in TOC:",w),!1;const ge=w.includes("/")?w.split("/").pop():w,Ie=`${R.baseUrl}/${ge}.pbn`,Ee=await fetch(Ie);if(!Ee.ok)throw new Error(`Failed to load lesson: ${Ee.statusText}`);const at=await Ee.text(),et=Ul(at);if(et.length>0){const rt=et.map(Ve=>({...Ve,subfolder:Ve.subfolder||w,category:Ve.category||fe.name}));L.value=rt;const Et=s.getDealFromUrl(),Me=Et?rt.findIndex(Ve=>Ve.boardNumber===Et):-1;return W.value=Me>=0?Me:0,l.loadDeal(rt[W.value]),l.resetStats(),k.value={id:w,name:se.name,category:fe.name},M(),!0}return!1}catch(U){return console.error("Error loading lesson from URL:",U),!1}}return(y,w)=>{var R,I,U,K,se,fe,ge,Ie,Ee,at,et,rt,Et,Me,Ve,fn;return z.value?(m(),h("div",rx,[c("header",lx,[c("h1",null,$(L.value.length?V.value:be.value),1),c("div",ix,[me(Kb),c("button",{class:"progress-btn",onClick:w[0]||(w[0]=ke=>d.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:w[1]||(w[1]=ke=>f.value=!0),title:"View Accomplishments"}," Accomplishments "),P(r).isTeacher.value?(m(),h("button",{key:0,class:"teacher-btn",onClick:w[2]||(w[2]=ke=>{p.value=!0,v.value=null,g.value=""}),title:"View Students"}," Students ")):B("",!0),L.value.length&&A.value?(m(),h("button",{key:1,class:"lessons-btn",onClick:x,title:"Back to "+((R=ee(A.value))==null?void 0:R.name)},$((I=ee(A.value))==null?void 0:I.name),9,cx)):B("",!0),A.value?(m(),h("button",{key:2,class:"lobby-btn",onClick:O,title:"Return to lobby"}," Lobby ")):B("",!0),Pe.value+We.value>0?(m(),h("div",ux,[c("span",dx,$(Pe.value),1),c("span",fx,$(We.value),1)])):B("",!0),c("div",vx,[ce.value!=="student"?(m(),h("button",{key:0,class:ue(["role-badge","role-"+ce.value]),onClick:O,title:"Return to "+ce.value+" lobby"},$(ce.value),11,px)):B("",!0),c("button",{class:"user-btn",onClick:w[3]||(w[3]=ke=>u.value=!0),title:de.value},$(ve.value),9,mx)])])]),c("main",hx,[me(Pb),me(Ob),p.value&&!v.value?(m(),Be(N0,{key:0,onClose:w[4]||(w[4]=ke=>p.value=!1),onSelectStudent:w[5]||(w[5]=(ke,vn)=>{v.value=ke,g.value=vn})})):p.value&&v.value?(m(),Be(nw,{key:1,studentId:v.value,studentName:g.value,onBack:w[6]||(w[6]=ke=>v.value=null),onNavigateToLesson:S},null,8,["studentId","studentName"])):!L.value.length&&!A.value?(m(),Be(Wk,{key:2,onSelectCollection:F,onShowBecomeTeacher:w[7]||(w[7]=ke=>C.value=!0)})):!L.value.length&&A.value?(m(),h("div",gx,[c("h2",null,$(((U=ee(A.value))==null?void 0:U.name)||A.value),1),w[17]||(w[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),me(Ew,{visible:!0,inline:!0,collection:ee(A.value),onLoad:ae},null,8,["collection"])])):(m(),h("div",yx,[c("div",bx,[L.value.length>1?(m(),Be(vu,{key:0,boardNumbers:L.value.map(ke=>ke.boardNumber),lessonSubfolder:((K=G.value)==null?void 0:K.subfolder)||((se=G.value)==null?void 0:se.category)||"",currentIndex:W.value,forceRedBoard:_.value,introUrl:E.value,onGoto:te,onOpenIntro:H},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):B("",!0),me(Og,{boardNumber:(fe=G.value)==null?void 0:fe.boardNumber,dealer:(ge=G.value)==null?void 0:ge.dealer,vulnerable:(Ie=G.value)==null?void 0:Ie.vulnerable,contract:(Ee=G.value)==null?void 0:Ee.contract,declarer:(at=G.value)==null?void 0:at.declarer,showContract:P(l).auctionState.auctionComplete||P(l).showOpeningLead.value||P(l).hasSteps.value&&!P(l).hasBidSteps.value,openingLead:P(l).showOpeningLead.value?(et=G.value)==null?void 0:et.openingLead:"",totalDeals:L.value.length,currentIndex:W.value,dealBoardNumbers:L.value.map(ke=>ke.boardNumber),onGoto:te},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),me(Yh,{hands:P(l).hands.value,hiddenSeats:P(l).hiddenSeats.value,showHcp:P(l).showHcp.value,compact:!0,clickableSeat:P(l).hasCardChoice.value?P(l).studentSeat.value:null,playedCards:P(l).showcardsPlayedCards.value,onCardClick:Ze},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",_x,[P(l).showAuctionTable.value?(m(),Be(vg,{key:0,bids:P(l).hasBidSteps.value?P(l).auctionState.displayedBids:((rt=G.value)==null?void 0:rt.auction)||[],dealer:((Et=G.value)==null?void 0:Et.dealer)||"N",currentBidIndex:P(l).hasBidSteps.value?P(l).auctionState.currentBidIndex:-1,wrongBidIndex:P(l).auctionState.wrongBidIndex,correctBidIndex:P(l).auctionState.correctBidIndex,showTurnIndicator:P(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):B("",!0),me(Xl,{visible:!!P(l).auctionState.wrongBid,type:"wrong",wrongBid:P(l).auctionState.wrongBid,correctBid:P(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),me(Xl,{visible:!!P(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:P(l).cardChoiceState.wrongCard,correctCardCode:P(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),P(l).hasSteps.value?(m(),h("div",wx,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:b},[(m(!0),h(Z,null,le(P(l).steps.value.slice(0,P(l).currentStepIndex.value),(ke,vn)=>(m(),h(Z,{key:"prev-"+vn},[vn>=P(l).commentaryStartIndex.value?(m(),h(Z,{key:0},[c("span",{class:"narrative-text previous",innerHTML:P(Ms)(P(bn)(ke.text))},null,8,Cx),ke.type==="bid"&&ke.explanationText?(m(),h("span",{key:0,class:ue(["narrative-text",vn===P(l).currentStepIndex.value-1&&P(l).isBidStep.value&&!P(l).bidAnswered.value?"current":"previous"]),innerHTML:P(Ms)(P(bn)(ke.explanationText))},null,10,Sx)):B("",!0)],64)):B("",!0)],64))),128)),P(l).currentStep.value?(m(),h("span",{key:0,class:"narrative-text current",innerHTML:P(Ms)(P(bn)(P(l).currentStep.value.text))},null,8,$x)):B("",!0),P(l).bidAnswered.value&&((Me=P(l).currentStep.value)!=null&&Me.explanationText)?(m(),h("span",{key:1,class:"narrative-text current",innerHTML:P(Ms)(P(bn)(P(l).currentStep.value.explanationText))},null,8,kx)):B("",!0)],512),c("div",xx,[P(l).hasBidPrompt.value?(m(),h("div",Ax,[me(lg,{lastBid:P(l).lastContractBid.value,canDouble:P(l).canDouble.value,canRedouble:P(l).canRedouble.value,onBid:wt},null,8,["lastBid","canDouble","canRedouble"])])):P(l).hasCardChoice.value?(m(),h("div",Nx," Click on the card you would choose ")):B("",!0),P(l).canGoBack.value?(m(),h("button",{key:2,class:"instruction-btn secondary",onClick:j},"  Back ")):B("",!0),!P(l).isComplete.value&&(P(l).bidAnswered.value||!P(l).hasBidPrompt.value&&!P(l).hasCardChoice.value&&P(l).currentStep.value&&P(l).currentStep.value.type!=="end")?(m(),h("button",{key:3,class:"instruction-btn primary",onClick:w[8]||(w[8]=ke=>P(l).advance())},$(((Ve=P(l).currentStep.value)==null?void 0:Ve.type)==="rotate"?"Rotate":"Next")+"  ",1)):B("",!0),P(l).isComplete.value&&W.value<L.value.length-1?(m(),h("button",{key:4,class:"next-deal-btn",onClick:oe}," Next Deal  ")):B("",!0)])])):(fn=G.value)!=null&&fn.commentary?(m(),h("div",{key:2,class:"display-commentary",innerHTML:P(Ms)(P(bn)(P(Cp)(G.value.commentary)))},null,8,Tx)):B("",!0),!P(l).hasSteps.value&&P(l).isComplete.value&&W.value<L.value.length-1?(m(),h("div",Ex,[c("button",{class:"next-deal-btn",onClick:oe}," Next Deal  ")])):B("",!0)])]))]),me(_b,{visible:u.value,onClose:w[9]||(w[9]=ke=>u.value=!1),onSwitchUser:re,onLogout:re,onBecomeTeacher:w[10]||(w[10]=ke=>C.value=!0)},null,8,["visible"]),Q.value?(m(),h("div",Ox," Account created  your data is encrypted and linked to your email for recovery. ")):B("",!0),d.value?(m(),h("div",{key:1,class:"modal-overlay",onClick:w[12]||(w[12]=Dt(ke=>d.value=!1,["self"]))},[me(d1,{onClose:w[11]||(w[11]=ke=>d.value=!1)})])):B("",!0),f.value?(m(),h("div",{key:2,class:"modal-overlay",onClick:w[14]||(w[14]=Dt(ke=>f.value=!1,["self"]))},[me(X1,{onClose:w[13]||(w[13]=ke=>f.value=!1),onNavigateToDeal:_e})])):B("",!0),me(Uw,{visible:Y.value,url:D.value||"",onClose:w[15]||(w[15]=ke=>Y.value=!1)},null,8,["visible","url"]),C.value?(m(),Be(tx,{key:3,onClose:w[16]||(w[16]=ke=>C.value=!1),onActivated:q})):B("",!0),me(ax)])):(m(),Be(Uy,{key:0,onUserReady:ne}))}}},Ix=()=>nv(()=>import("./JoinClassroomView-GH6p2sXF.js"),__vite__mapDeps([0,1])),Px=[{path:"/join/:joinCode",name:"join",component:Ix},{path:"/:pathMatch(.*)*",name:"app",component:Rx}],Dx=up({history:Hv(),routes:Px}),ku=Yf(ev);ku.use(Dx);ku.mount("#app");export{ye as _,c as a,me as b,h as c,B as d,$t as e,xo as f,Fe as g,ao as h,Rd as i,Tc as j,dp as k,m as l,_t as o,T as r,$ as t,Lx as u,pd as w};
