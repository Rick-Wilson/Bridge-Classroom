const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-C_ZQQoKD.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Se={},Fs=[],Pt=()=>{},Dl=()=>!1,No=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Hr=e=>e.startsWith("onUpdate:"),Je=Object.assign,Vr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},eu=Object.prototype.hasOwnProperty,_e=(e,t)=>eu.call(e,t),ae=Array.isArray,js=e=>Fn(e)==="[object Map]",nn=e=>Fn(e)==="[object Set]",Sa=e=>Fn(e)==="[object Date]",ue=e=>typeof e=="function",Le=e=>typeof e=="string",Nt=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",Pl=e=>(Ce(e)||ue(e))&&ue(e.then)&&ue(e.catch),Ll=Object.prototype.toString,Fn=e=>Ll.call(e),tu=e=>Fn(e).slice(8,-1),Bl=e=>Fn(e)==="[object Object]",Kr=e=>Le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_n=jr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),To=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},su=/-\w/g,wt=To(e=>e.replace(su,t=>t.slice(1).toUpperCase())),nu=/\B([A-Z])/g,cs=To(e=>e.replace(nu,"-$1").toLowerCase()),Oo=To(e=>e.charAt(0).toUpperCase()+e.slice(1)),Go=To(e=>e?`on${Oo(e)}`:""),rs=(e,t)=>!Object.is(e,t),so=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ul=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Eo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ca;const Io=()=>Ca||(Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function us(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Le(n)?lu(n):us(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(Le(e)||Ce(e))return e}const ou=/;(?![^(]*\))/g,ru=/:([^]+)/,au=/\/\*[^]*?\*\//g;function lu(e){const t={};return e.replace(au,"").split(ou).forEach(s=>{if(s){const n=s.split(ru);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function re(e){let t="";if(Le(e))t=e;else if(ae(e))for(let s=0;s<e.length;s++){const n=re(e[s]);n&&(t+=n+" ")}else if(Ce(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const iu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cu=jr(iu);function Ml(e){return!!e||e===""}function uu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=$s(e[n],t[n]);return s}function $s(e,t){if(e===t)return!0;let s=Sa(e),n=Sa(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Nt(e),n=Nt(t),s||n)return e===t;if(s=ae(e),n=ae(t),s||n)return s&&n?uu(e,t):!1;if(s=Ce(e),n=Ce(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const l in e){const a=e.hasOwnProperty(l),i=t.hasOwnProperty(l);if(a&&!i||!a&&i||!$s(e[l],t[l]))return!1}}return String(e)===String(t)}function Wr(e,t){return e.findIndex(s=>$s(s,t))}const Fl=e=>!!(e&&e.__v_isRef===!0),C=e=>Le(e)?e:e==null?"":ae(e)||Ce(e)&&(e.toString===Ll||!ue(e.toString))?Fl(e)?C(e.value):JSON.stringify(e,jl,2):String(e),jl=(e,t)=>Fl(t)?jl(e,t.value):js(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[zo(n,r)+" =>"]=o,s),{})}:nn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>zo(s))}:Nt(t)?zo(t):Ce(t)&&!ae(t)&&!Bl(t)?String(t):t,zo=(e,t="")=>{var s;return Nt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let it;class du{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=it,!t&&it&&(this.index=(it.scopes||(it.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=it;try{return it=this,t()}finally{it=s}}}on(){++this._on===1&&(this.prevScope=it,it=this)}off(){this._on>0&&--this._on===0&&(it=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function fu(){return it}let $e;const Jo=new WeakSet;class Hl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,it&&it.active&&it.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Jo.has(this)&&(Jo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$a(this),Wl(this);const t=$e,s=xt;$e=this,xt=!0;try{return this.fn()}finally{Gl(this),$e=t,xt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Jr(t);this.deps=this.depsTail=void 0,$a(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Jo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fr(this)&&this.run()}get dirty(){return fr(this)}}let Vl=0,wn,Sn;function Kl(e,t=!1){if(e.flags|=8,t){e.next=Sn,Sn=e;return}e.next=wn,wn=e}function Gr(){Vl++}function zr(){if(--Vl>0)return;if(Sn){let t=Sn;for(Sn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;wn;){let t=wn;for(wn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Wl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gl(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Jr(n),vu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function fr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(zl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function zl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Nn)||(e.globalVersion=Nn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!fr(e))))return;e.flags|=2;const t=e.dep,s=$e,n=xt;$e=e,xt=!0;try{Wl(e);const o=e.fn(e._value);(t.version===0||rs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{$e=s,xt=n,Gl(e),e.flags&=-3}}function Jr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Jr(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function vu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let xt=!0;const Jl=[];function zt(){Jl.push(xt),xt=!1}function Jt(){const e=Jl.pop();xt=e===void 0?!0:e}function $a(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=$e;$e=void 0;try{t()}finally{$e=s}}}let Nn=0;class mu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!$e||!xt||$e===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==$e)s=this.activeLink=new mu($e,this),$e.deps?(s.prevDep=$e.depsTail,$e.depsTail.nextDep=s,$e.depsTail=s):$e.deps=$e.depsTail=s,Yl(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=$e.depsTail,s.nextDep=void 0,$e.depsTail.nextDep=s,$e.depsTail=s,$e.deps===s&&($e.deps=n)}return s}trigger(t){this.version++,Nn++,this.notify(t)}notify(t){Gr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{zr()}}}function Yl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Yl(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const vr=new WeakMap,ws=Symbol(""),mr=Symbol(""),Tn=Symbol("");function et(e,t,s){if(xt&&$e){let n=vr.get(e);n||vr.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Yr),o.map=n,o.key=s),o.track()}}function jt(e,t,s,n,o,r){const l=vr.get(e);if(!l){Nn++;return}const a=i=>{i&&i.trigger()};if(Gr(),t==="clear")l.forEach(a);else{const i=ae(e),u=i&&Kr(s);if(i&&s==="length"){const d=Number(n);l.forEach((f,v)=>{(v==="length"||v===Tn||!Nt(v)&&v>=d)&&a(f)})}else switch((s!==void 0||l.has(void 0))&&a(l.get(s)),u&&a(l.get(Tn)),t){case"add":i?u&&a(l.get("length")):(a(l.get(ws)),js(e)&&a(l.get(mr)));break;case"delete":i||(a(l.get(ws)),js(e)&&a(l.get(mr)));break;case"set":js(e)&&a(l.get(ws));break}}zr()}function Ns(e){const t=be(e);return t===e?t:(et(t,"iterate",Tn),bt(e)?t:t.map(Tt))}function Ro(e){return et(e=be(e),"iterate",Tn),e}function ts(e,t){return Yt(e)?Gs(Ss(e)?Tt(t):t):Tt(t)}const pu={__proto__:null,[Symbol.iterator](){return Yo(this,Symbol.iterator,e=>ts(this,e))},concat(...e){return Ns(this).concat(...e.map(t=>ae(t)?Ns(t):t))},entries(){return Yo(this,"entries",e=>(e[1]=ts(this,e[1]),e))},every(e,t){return Ut(this,"every",e,t,void 0,arguments)},filter(e,t){return Ut(this,"filter",e,t,s=>s.map(n=>ts(this,n)),arguments)},find(e,t){return Ut(this,"find",e,t,s=>ts(this,s),arguments)},findIndex(e,t){return Ut(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ut(this,"findLast",e,t,s=>ts(this,s),arguments)},findLastIndex(e,t){return Ut(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ut(this,"forEach",e,t,void 0,arguments)},includes(...e){return qo(this,"includes",e)},indexOf(...e){return qo(this,"indexOf",e)},join(e){return Ns(this).join(e)},lastIndexOf(...e){return qo(this,"lastIndexOf",e)},map(e,t){return Ut(this,"map",e,t,void 0,arguments)},pop(){return an(this,"pop")},push(...e){return an(this,"push",e)},reduce(e,...t){return ka(this,"reduce",e,t)},reduceRight(e,...t){return ka(this,"reduceRight",e,t)},shift(){return an(this,"shift")},some(e,t){return Ut(this,"some",e,t,void 0,arguments)},splice(...e){return an(this,"splice",e)},toReversed(){return Ns(this).toReversed()},toSorted(e){return Ns(this).toSorted(e)},toSpliced(...e){return Ns(this).toSpliced(...e)},unshift(...e){return an(this,"unshift",e)},values(){return Yo(this,"values",e=>ts(this,e))}};function Yo(e,t,s){const n=Ro(e),o=n[t]();return n!==e&&!bt(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const hu=Array.prototype;function Ut(e,t,s,n,o,r){const l=Ro(e),a=l!==e&&!bt(e),i=l[t];if(i!==hu[t]){const f=i.apply(e,r);return a?Tt(f):f}let u=s;l!==e&&(a?u=function(f,v){return s.call(this,ts(e,f),v,e)}:s.length>2&&(u=function(f,v){return s.call(this,f,v,e)}));const d=i.call(l,u,n);return a&&o?o(d):d}function ka(e,t,s,n){const o=Ro(e);let r=s;return o!==e&&(bt(e)?s.length>3&&(r=function(l,a,i){return s.call(this,l,a,i,e)}):r=function(l,a,i){return s.call(this,l,ts(e,a),i,e)}),o[t](r,...n)}function qo(e,t,s){const n=be(e);et(n,"iterate",Tn);const o=n[t](...s);return(o===-1||o===!1)&&Qr(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function an(e,t,s=[]){zt(),Gr();const n=be(e)[t].apply(e,s);return zr(),Jt(),n}const gu=jr("__proto__,__v_isRef,__isVue"),ql=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Nt));function yu(e){Nt(e)||(e=String(e));const t=be(this);return et(t,"has",e),t.hasOwnProperty(e)}class Xl{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Nu:ti:r?ei:Zl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=ae(t);if(!o){let i;if(l&&(i=pu[s]))return i;if(s==="hasOwnProperty")return yu}const a=Reflect.get(t,s,st(t)?t:n);if((Nt(s)?ql.has(s):gu(s))||(o||et(t,"get",s),r))return a;if(st(a)){const i=l&&Kr(s)?a:a.value;return o&&Ce(i)?hr(i):i}return Ce(a)?o?hr(a):Lt(a):a}}class Ql extends Xl{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const l=ae(t)&&Kr(s);if(!this._isShallow){const u=Yt(r);if(!bt(n)&&!Yt(n)&&(r=be(r),n=be(n)),!l&&st(r)&&!st(n))return u||(r.value=n),!0}const a=l?Number(s)<t.length:_e(t,s),i=Reflect.set(t,s,n,st(t)?t:o);return t===be(o)&&(a?rs(n,r)&&jt(t,"set",s,n):jt(t,"add",s,n)),i}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&jt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Nt(s)||!ql.has(s))&&et(t,"has",s),n}ownKeys(t){return et(t,"iterate",ae(t)?"length":ws),Reflect.ownKeys(t)}}class bu extends Xl{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const _u=new Ql,wu=new bu,Su=new Ql(!0);const pr=e=>e,Yn=e=>Reflect.getPrototypeOf(e);function Cu(e,t,s){return function(...n){const o=this.__v_raw,r=be(o),l=js(r),a=e==="entries"||e===Symbol.iterator&&l,i=e==="keys"&&l,u=o[e](...n),d=s?pr:t?Gs:Tt;return!t&&et(r,"iterate",i?mr:ws),Je(Object.create(u),{next(){const{value:f,done:v}=u.next();return v?{value:f,done:v}:{value:a?[d(f[0]),d(f[1])]:d(f),done:v}}})}}function qn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $u(e,t){const s={get(o){const r=this.__v_raw,l=be(r),a=be(o);e||(rs(o,a)&&et(l,"get",o),et(l,"get",a));const{has:i}=Yn(l),u=t?pr:e?Gs:Tt;if(i.call(l,o))return u(r.get(o));if(i.call(l,a))return u(r.get(a));r!==l&&r.get(o)},get size(){const o=this.__v_raw;return!e&&et(be(o),"iterate",ws),o.size},has(o){const r=this.__v_raw,l=be(r),a=be(o);return e||(rs(o,a)&&et(l,"has",o),et(l,"has",a)),o===a?r.has(o):r.has(o)||r.has(a)},forEach(o,r){const l=this,a=l.__v_raw,i=be(a),u=t?pr:e?Gs:Tt;return!e&&et(i,"iterate",ws),a.forEach((d,f)=>o.call(r,u(d),u(f),l))}};return Je(s,e?{add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear")}:{add(o){!t&&!bt(o)&&!Yt(o)&&(o=be(o));const r=be(this);return Yn(r).has.call(r,o)||(r.add(o),jt(r,"add",o,o)),this},set(o,r){!t&&!bt(r)&&!Yt(r)&&(r=be(r));const l=be(this),{has:a,get:i}=Yn(l);let u=a.call(l,o);u||(o=be(o),u=a.call(l,o));const d=i.call(l,o);return l.set(o,r),u?rs(r,d)&&jt(l,"set",o,r):jt(l,"add",o,r),this},delete(o){const r=be(this),{has:l,get:a}=Yn(r);let i=l.call(r,o);i||(o=be(o),i=l.call(r,o)),a&&a.call(r,o);const u=r.delete(o);return i&&jt(r,"delete",o,void 0),u},clear(){const o=be(this),r=o.size!==0,l=o.clear();return r&&jt(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Cu(o,e,t)}),s}function qr(e,t){const s=$u(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,r)}const ku={get:qr(!1,!1)},xu={get:qr(!1,!0)},Au={get:qr(!0,!1)};const Zl=new WeakMap,ei=new WeakMap,ti=new WeakMap,Nu=new WeakMap;function Tu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ou(e){return e.__v_skip||!Object.isExtensible(e)?0:Tu(tu(e))}function Lt(e){return Yt(e)?e:Xr(e,!1,_u,ku,Zl)}function si(e){return Xr(e,!1,Su,xu,ei)}function hr(e){return Xr(e,!0,wu,Au,ti)}function Xr(e,t,s,n,o){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ou(e);if(r===0)return e;const l=o.get(e);if(l)return l;const a=new Proxy(e,r===2?n:s);return o.set(e,a),a}function Ss(e){return Yt(e)?Ss(e.__v_raw):!!(e&&e.__v_isReactive)}function Yt(e){return!!(e&&e.__v_isReadonly)}function bt(e){return!!(e&&e.__v_isShallow)}function Qr(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function Eu(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&Ul(e,"__v_skip",!0),e}const Tt=e=>Ce(e)?Lt(e):e,Gs=e=>Ce(e)?hr(e):e;function st(e){return e?e.__v_isRef===!0:!1}function O(e){return ni(e,!1)}function Iu(e){return ni(e,!0)}function ni(e,t){return st(e)?e:new Ru(e,t)}class Ru{constructor(t,s){this.dep=new Yr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:Tt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||bt(t)||Yt(t);t=n?t:be(t),rs(t,s)&&(this._rawValue=t,this._value=n?t:Tt(t),this.dep.trigger())}}function D(e){return st(e)?e.value:e}const Du={get:(e,t,s)=>t==="__v_raw"?e:D(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return st(o)&&!st(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function oi(e){return Ss(e)?e:new Proxy(e,Du)}class Pu{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Yr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Kl(this,!0),!0}get value(){const t=this.dep.track();return zl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lu(e,t,s=!1){let n,o;return ue(e)?n=e:(n=e.get,o=e.set),new Pu(n,o,s)}const Xn={},co=new WeakMap;let ys;function Bu(e,t=!1,s=ys){if(s){let n=co.get(s);n||co.set(s,n=[]),n.push(e)}}function Uu(e,t,s=Se){const{immediate:n,deep:o,once:r,scheduler:l,augmentJob:a,call:i}=s,u=P=>o?P:bt(P)||o===!1||o===0?Ht(P,1):Ht(P);let d,f,v,m,g=!1,$=!1;if(st(e)?(f=()=>e.value,g=bt(e)):Ss(e)?(f=()=>u(e),g=!0):ae(e)?($=!0,g=e.some(P=>Ss(P)||bt(P)),f=()=>e.map(P=>{if(st(P))return P.value;if(Ss(P))return u(P);if(ue(P))return i?i(P,2):P()})):ue(e)?t?f=i?()=>i(e,2):e:f=()=>{if(v){zt();try{v()}finally{Jt()}}const P=ys;ys=d;try{return i?i(e,3,[m]):e(m)}finally{ys=P}}:f=Pt,t&&o){const P=f,W=o===!0?1/0:o;f=()=>Ht(P(),W)}const L=fu(),x=()=>{d.stop(),L&&L.active&&Vr(L.effects,d)};if(r&&t){const P=t;t=(...W)=>{P(...W),x()}}let b=$?new Array(e.length).fill(Xn):Xn;const k=P=>{if(!(!(d.flags&1)||!d.dirty&&!P))if(t){const W=d.run();if(o||g||($?W.some((ee,K)=>rs(ee,b[K])):rs(W,b))){v&&v();const ee=ys;ys=d;try{const K=[W,b===Xn?void 0:$&&b[0]===Xn?[]:b,m];b=W,i?i(t,3,K):t(...K)}finally{ys=ee}}}else d.run()};return a&&a(k),d=new Hl(f),d.scheduler=l?()=>l(k,!1):k,m=P=>Bu(P,!1,d),v=d.onStop=()=>{const P=co.get(d);if(P){if(i)i(P,4);else for(const W of P)W();co.delete(d)}},t?n?k(!0):b=d.run():l?l(k.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function Ht(e,t=1/0,s){if(t<=0||!Ce(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,st(e))Ht(e.value,t,s);else if(ae(e))for(let n=0;n<e.length;n++)Ht(e[n],t,s);else if(nn(e)||js(e))e.forEach(n=>{Ht(n,t,s)});else if(Bl(e)){for(const n in e)Ht(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ht(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jn(e,t,s,n){try{return n?e(...n):e()}catch(o){Do(o,t,s)}}function Bt(e,t,s,n){if(ue(e)){const o=jn(e,t,s,n);return o&&Pl(o)&&o.catch(r=>{Do(r,t,s)}),o}if(ae(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Bt(e[r],t,s,n));return o}}function Do(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Se;if(t){let a=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,i,u)===!1)return}a=a.parent}if(r){zt(),jn(r,null,10,[e,i,u]),Jt();return}}Mu(e,s,o,n,l)}function Mu(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const at=[];let Rt=-1;const Hs=[];let ss=null,Rs=0;const ri=Promise.resolve();let uo=null;function On(e){const t=uo||ri;return e?t.then(this?e.bind(this):e):t}function Fu(e){let t=Rt+1,s=at.length;for(;t<s;){const n=t+s>>>1,o=at[n],r=En(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function Zr(e){if(!(e.flags&1)){const t=En(e),s=at[at.length-1];!s||!(e.flags&2)&&t>=En(s)?at.push(e):at.splice(Fu(t),0,e),e.flags|=1,ai()}}function ai(){uo||(uo=ri.then(ii))}function ju(e){ae(e)?Hs.push(...e):ss&&e.id===-1?ss.splice(Rs+1,0,e):e.flags&1||(Hs.push(e),e.flags|=1),ai()}function xa(e,t,s=Rt+1){for(;s<at.length;s++){const n=at[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;at.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function li(e){if(Hs.length){const t=[...new Set(Hs)].sort((s,n)=>En(s)-En(n));if(Hs.length=0,ss){ss.push(...t);return}for(ss=t,Rs=0;Rs<ss.length;Rs++){const s=ss[Rs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ss=null,Rs=0}}const En=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ii(e){try{for(Rt=0;Rt<at.length;Rt++){const t=at[Rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),jn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Rt<at.length;Rt++){const t=at[Rt];t&&(t.flags&=-2)}Rt=-1,at.length=0,li(),uo=null,(at.length||Hs.length)&&ii()}}let Ge=null,ci=null;function fo(e){const t=Ge;return Ge=e,ci=e&&e.type.__scopeId||null,t}function Hu(e,t=Ge,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&po(-1);const r=fo(t);let l;try{l=e(...o)}finally{fo(r),n._d&&po(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function He(e,t){if(Ge===null)return e;const s=Uo(Ge),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,l,a,i=Se]=t[o];r&&(ue(r)&&(r={mounted:r,updated:r}),r.deep&&Ht(l),n.push({dir:r,instance:s,value:l,oldValue:void 0,arg:a,modifiers:i}))}return e}function fs(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let l=0;l<o.length;l++){const a=o[l];r&&(a.oldValue=r[l].value);let i=a.dir[n];i&&(zt(),Bt(i,s,8,[e.el,a,e,t]),Jt())}}function no(e,t){if(tt){let s=tt.provides;const n=tt.parent&&tt.parent.provides;n===s&&(s=tt.provides=Object.create(n)),s[e]=t}}function At(e,t,s=!1){const n=Vd();if(n||Ks){let o=Ks?Ks._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ue(t)?t.call(n&&n.proxy):t}}const Vu=Symbol.for("v-scx"),Ku=()=>At(Vu);function ct(e,t,s){return ui(e,t,s)}function ui(e,t,s=Se){const{immediate:n,deep:o,flush:r,once:l}=s,a=Je({},s),i=t&&n||!t&&r!=="post";let u;if(Dn){if(r==="sync"){const m=Ku();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!i){const m=()=>{};return m.stop=Pt,m.resume=Pt,m.pause=Pt,m}}const d=tt;a.call=(m,g,$)=>Bt(m,d,g,$);let f=!1;r==="post"?a.scheduler=m=>{ft(m,d&&d.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(m,g)=>{g?m():Zr(m)}),a.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=Uu(e,t,a);return Dn&&(u?u.push(v):i&&v()),v}function Wu(e,t,s){const n=this.proxy,o=Le(e)?e.includes(".")?di(n,e):()=>n[e]:e.bind(n,n);let r;ue(t)?r=t:(r=t.handler,s=t);const l=Hn(this),a=ui(o,r.bind(n),s);return l(),a}function di(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const Gu=Symbol("_vte"),zu=e=>e.__isTeleport,Ju=Symbol("_leaveCb");function ea(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ea(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fi(e,t){return ue(e)?Je({name:e.name},t,{setup:e}):e}function vi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const vo=new WeakMap;function Cn(e,t,s,n,o=!1){if(ae(e)){e.forEach((g,$)=>Cn(g,t&&(ae(t)?t[$]:t),s,n,o));return}if(Vs(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Cn(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Uo(n.component):n.el,l=o?null:r,{i:a,r:i}=e,u=t&&t.r,d=a.refs===Se?a.refs={}:a.refs,f=a.setupState,v=be(f),m=f===Se?Dl:g=>_e(v,g);if(u!=null&&u!==i){if(Aa(t),Le(u))d[u]=null,m(u)&&(f[u]=null);else if(st(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(ue(i))jn(i,a,12,[l,d]);else{const g=Le(i),$=st(i);if(g||$){const L=()=>{if(e.f){const x=g?m(i)?f[i]:d[i]:i.value;if(o)ae(x)&&Vr(x,r);else if(ae(x))x.includes(r)||x.push(r);else if(g)d[i]=[r],m(i)&&(f[i]=d[i]);else{const b=[r];i.value=b,e.k&&(d[e.k]=b)}}else g?(d[i]=l,m(i)&&(f[i]=l)):$&&(i.value=l,e.k&&(d[e.k]=l))};if(l){const x=()=>{L(),vo.delete(e)};x.id=-1,vo.set(e,x),ft(x,s)}else Aa(e),L()}}}function Aa(e){const t=vo.get(e);t&&(t.flags|=8,vo.delete(e))}Io().requestIdleCallback;Io().cancelIdleCallback;const Vs=e=>!!e.type.__asyncLoader,mi=e=>e.type.__isKeepAlive;function Yu(e,t){pi(e,"a",t)}function qu(e,t){pi(e,"da",t)}function pi(e,t,s=tt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Po(t,n,s),s){let o=s.parent;for(;o&&o.parent;)mi(o.parent.vnode)&&Xu(n,t,s,o),o=o.parent}}function Xu(e,t,s,n){const o=Po(t,e,n,!0);gi(()=>{Vr(n[t],o)},s)}function Po(e,t,s=tt,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...l)=>{zt();const a=Hn(s),i=Bt(t,s,e,l);return a(),Jt(),i});return n?o.unshift(r):o.push(r),r}}const Qt=e=>(t,s=tt)=>{(!Dn||e==="sp")&&Po(e,(...n)=>t(...n),s)},Qu=Qt("bm"),$t=Qt("m"),Zu=Qt("bu"),ed=Qt("u"),hi=Qt("bum"),gi=Qt("um"),td=Qt("sp"),sd=Qt("rtg"),nd=Qt("rtc");function od(e,t=tt){Po("ec",e,t)}const rd="components";function ad(e,t){return id(rd,e,!0,t)||e}const ld=Symbol.for("v-ndc");function id(e,t,s=!0,n=!1){const o=Ge||tt;if(o){const r=o.type;{const a=Jd(r,!1);if(a&&(a===t||a===wt(t)||a===Oo(wt(t))))return r}const l=Na(o[e]||r[e],t)||Na(o.appContext[e],t);return!l&&n?r:l}}function Na(e,t){return e&&(e[t]||e[wt(t)]||e[Oo(wt(t))])}function ie(e,t,s,n){let o;const r=s,l=ae(e);if(l||Le(e)){const a=l&&Ss(e);let i=!1,u=!1;a&&(i=!bt(e),u=Yt(e),e=Ro(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(i?u?Gs(Tt(e[d])):Tt(e[d]):e[d],d,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,r)}else if(Ce(e))if(e[Symbol.iterator])o=Array.from(e,(a,i)=>t(a,i,void 0,r));else{const a=Object.keys(e);o=new Array(a.length);for(let i=0,u=a.length;i<u;i++){const d=a[i];o[i]=t(e[d],d,i,r)}}else o=[];return o}function cd(e,t,s={},n,o){if(Ge.ce||Ge.parent&&Vs(Ge.parent)&&Ge.parent.ce){const u=Object.keys(s).length>0;return s.name=t,p(),Re(Z,null,[fe("slot",s,n)],u?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),p();const l=r&&yi(r(s)),a=s.key||l&&l.key,i=Re(Z,{key:(a&&!Nt(a)?a:`_${t}`)+(!l&&n?"_fb":"")},l||[],l&&e._===1?64:-2);return r&&r._c&&(r._d=!0),i}function yi(e){return e.some(t=>Rn(t)?!(t.type===qt||t.type===Z&&!yi(t.children)):!0)?e:null}const gr=e=>e?Bi(e)?Uo(e):gr(e.parent):null,$n=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>gr(e.parent),$root:e=>gr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_i(e),$forceUpdate:e=>e.f||(e.f=()=>{Zr(e.update)}),$nextTick:e=>e.n||(e.n=On.bind(e.proxy)),$watch:e=>Wu.bind(e)}),Xo=(e,t)=>e!==Se&&!e.__isScriptSetup&&_e(e,t),ud={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:l,type:a,appContext:i}=e;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(Xo(n,t))return l[t]=1,n[t];if(o!==Se&&_e(o,t))return l[t]=2,o[t];if(_e(r,t))return l[t]=3,r[t];if(s!==Se&&_e(s,t))return l[t]=4,s[t];yr&&(l[t]=0)}}const u=$n[t];let d,f;if(u)return t==="$attrs"&&et(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Se&&_e(s,t))return l[t]=4,s[t];if(f=i.config.globalProperties,_e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return Xo(o,t)?(o[t]=s,!0):n!==Se&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:l}},a){let i;return!!(s[a]||e!==Se&&a[0]!=="$"&&_e(e,a)||Xo(t,a)||_e(r,a)||_e(n,a)||_e($n,a)||_e(o.config.globalProperties,a)||(i=l.__cssModules)&&i[a])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ta(e){return ae(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let yr=!0;function dd(e){const t=_i(e),s=e.proxy,n=e.ctx;yr=!1,t.beforeCreate&&Oa(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:l,watch:a,provide:i,inject:u,created:d,beforeMount:f,mounted:v,beforeUpdate:m,updated:g,activated:$,deactivated:L,beforeDestroy:x,beforeUnmount:b,destroyed:k,unmounted:P,render:W,renderTracked:ee,renderTriggered:K,errorCaptured:X,serverPrefetch:Y,expose:me,inheritAttrs:ce,components:we,directives:Ee,filters:qe}=t;if(u&&fd(u,n,null),l)for(const z in l){const te=l[z];ue(te)&&(n[z]=te.bind(s))}if(o){const z=o.call(s,s);Ce(z)&&(e.data=Lt(z))}if(yr=!0,r)for(const z in r){const te=r[z],nt=ue(te)?te.bind(s,s):ue(te.get)?te.get.bind(s,s):Pt,de=!ue(te)&&ue(te.set)?te.set.bind(s):Pt,G=T({get:nt,set:de});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>G.value,set:se=>G.value=se})}if(a)for(const z in a)bi(a[z],n,s,z);if(i){const z=ue(i)?i.call(s):i;Reflect.ownKeys(z).forEach(te=>{no(te,z[te])})}d&&Oa(d,e,"c");function oe(z,te){ae(te)?te.forEach(nt=>z(nt.bind(s))):te&&z(te.bind(s))}if(oe(Qu,f),oe($t,v),oe(Zu,m),oe(ed,g),oe(Yu,$),oe(qu,L),oe(od,X),oe(nd,ee),oe(sd,K),oe(hi,b),oe(gi,P),oe(td,Y),ae(me))if(me.length){const z=e.exposed||(e.exposed={});me.forEach(te=>{Object.defineProperty(z,te,{get:()=>s[te],set:nt=>s[te]=nt,enumerable:!0})})}else e.exposed||(e.exposed={});W&&e.render===Pt&&(e.render=W),ce!=null&&(e.inheritAttrs=ce),we&&(e.components=we),Ee&&(e.directives=Ee),Y&&vi(e)}function fd(e,t,s=Pt){ae(e)&&(e=br(e));for(const n in e){const o=e[n];let r;Ce(o)?"default"in o?r=At(o.from||n,o.default,!0):r=At(o.from||n):r=At(o),st(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[n]=r}}function Oa(e,t,s){Bt(ae(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function bi(e,t,s,n){let o=n.includes(".")?di(s,n):()=>s[n];if(Le(e)){const r=t[e];ue(r)&&ct(o,r)}else if(ue(e))ct(o,e.bind(s));else if(Ce(e))if(ae(e))e.forEach(r=>bi(r,t,s,n));else{const r=ue(e.handler)?e.handler.bind(s):t[e.handler];ue(r)&&ct(o,r,e)}}function _i(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,a=r.get(t);let i;return a?i=a:!o.length&&!s&&!n?i=t:(i={},o.length&&o.forEach(u=>mo(i,u,l,!0)),mo(i,t,l)),Ce(t)&&r.set(t,i),i}function mo(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&mo(e,r,s,!0),o&&o.forEach(l=>mo(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const a=vd[l]||s&&s[l];e[l]=a?a(e[l],t[l]):t[l]}return e}const vd={data:Ea,props:Ia,emits:Ia,methods:hn,computed:hn,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:hn,directives:hn,watch:pd,provide:Ea,inject:md};function Ea(e,t){return t?e?function(){return Je(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function md(e,t){return hn(br(e),br(t))}function br(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function hn(e,t){return e?Je(Object.create(null),e,t):t}function Ia(e,t){return e?ae(e)&&ae(t)?[...new Set([...e,...t])]:Je(Object.create(null),Ta(e),Ta(t??{})):t}function pd(e,t){if(!e)return t;if(!t)return e;const s=Je(Object.create(null),e);for(const n in t)s[n]=ot(e[n],t[n]);return s}function wi(){return{app:null,config:{isNativeTag:Dl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hd=0;function gd(e,t){return function(n,o=null){ue(n)||(n=Je({},n)),o!=null&&!Ce(o)&&(o=null);const r=wi(),l=new WeakSet,a=[];let i=!1;const u=r.app={_uid:hd++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:qd,get config(){return r.config},set config(d){},use(d,...f){return l.has(d)||(d&&ue(d.install)?(l.add(d),d.install(u,...f)):ue(d)&&(l.add(d),d(u,...f))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,f){return f?(r.components[d]=f,u):r.components[d]},directive(d,f){return f?(r.directives[d]=f,u):r.directives[d]},mount(d,f,v){if(!i){const m=u._ceVNode||fe(n,o);return m.appContext=r,v===!0?v="svg":v===!1&&(v=void 0),e(m,d,v),i=!0,u._container=d,d.__vue_app__=u,Uo(m.component)}},onUnmount(d){a.push(d)},unmount(){i&&(Bt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return r.provides[d]=f,u},runWithContext(d){const f=Ks;Ks=u;try{return d()}finally{Ks=f}}};return u}}let Ks=null;const yd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${wt(t)}Modifiers`]||e[`${cs(t)}Modifiers`];function bd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Se;let o=s;const r=t.startsWith("update:"),l=r&&yd(n,t.slice(7));l&&(l.trim&&(o=s.map(d=>Le(d)?d.trim():d)),l.number&&(o=s.map(Eo)));let a,i=n[a=Go(t)]||n[a=Go(wt(t))];!i&&r&&(i=n[a=Go(cs(t))]),i&&Bt(i,e,6,o);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Bt(u,e,6,o)}}const _d=new WeakMap;function Si(e,t,s=!1){const n=s?_d:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let l={},a=!1;if(!ue(e)){const i=u=>{const d=Si(u,t,!0);d&&(a=!0,Je(l,d))};!s&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!r&&!a?(Ce(e)&&n.set(e,null),null):(ae(r)?r.forEach(i=>l[i]=null):Je(l,r),Ce(e)&&n.set(e,l),l)}function Lo(e,t){return!e||!No(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,cs(t))||_e(e,t))}function Ra(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:l,attrs:a,emit:i,render:u,renderCache:d,props:f,data:v,setupState:m,ctx:g,inheritAttrs:$}=e,L=fo(e);let x,b;try{if(s.shapeFlag&4){const P=o||n,W=P;x=Dt(u.call(W,P,d,f,m,v,g)),b=a}else{const P=t;x=Dt(P.length>1?P(f,{attrs:a,slots:l,emit:i}):P(f,null)),b=t.props?a:wd(a)}}catch(P){kn.length=0,Do(P,e,1),x=fe(qt)}let k=x;if(b&&$!==!1){const P=Object.keys(b),{shapeFlag:W}=k;P.length&&W&7&&(r&&P.some(Hr)&&(b=Sd(b,r)),k=zs(k,b,!1,!0))}return s.dirs&&(k=zs(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(s.dirs):s.dirs),s.transition&&ea(k,s.transition),x=k,fo(L),x}const wd=e=>{let t;for(const s in e)(s==="class"||s==="style"||No(s))&&((t||(t={}))[s]=e[s]);return t},Sd=(e,t)=>{const s={};for(const n in e)(!Hr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Cd(e,t,s){const{props:n,children:o,component:r}=e,{props:l,children:a,patchFlag:i}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&i>=0){if(i&1024)return!0;if(i&16)return n?Da(n,l,u):!!l;if(i&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const v=d[f];if(l[v]!==n[v]&&!Lo(u,v))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:n===l?!1:n?l?Da(n,l,u):!0:!!l;return!1}function Da(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Lo(s,r))return!0}return!1}function $d({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Ci={},$i=()=>Object.create(Ci),ki=e=>Object.getPrototypeOf(e)===Ci;function kd(e,t,s,n=!1){const o={},r=$i();e.propsDefaults=Object.create(null),xi(e,t,o,r);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:si(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function xd(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:l}}=e,a=be(o),[i]=e.propsOptions;let u=!1;if((n||l>0)&&!(l&16)){if(l&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let v=d[f];if(Lo(e.emitsOptions,v))continue;const m=t[v];if(i)if(_e(r,v))m!==r[v]&&(r[v]=m,u=!0);else{const g=wt(v);o[g]=_r(i,a,g,m,e,!1)}else m!==r[v]&&(r[v]=m,u=!0)}}}else{xi(e,t,o,r)&&(u=!0);let d;for(const f in a)(!t||!_e(t,f)&&((d=cs(f))===f||!_e(t,d)))&&(i?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=_r(i,a,f,void 0,e,!0)):delete o[f]);if(r!==a)for(const f in r)(!t||!_e(t,f))&&(delete r[f],u=!0)}u&&jt(e.attrs,"set","")}function xi(e,t,s,n){const[o,r]=e.propsOptions;let l=!1,a;if(t)for(let i in t){if(_n(i))continue;const u=t[i];let d;o&&_e(o,d=wt(i))?!r||!r.includes(d)?s[d]=u:(a||(a={}))[d]=u:Lo(e.emitsOptions,i)||(!(i in n)||u!==n[i])&&(n[i]=u,l=!0)}if(r){const i=be(s),u=a||Se;for(let d=0;d<r.length;d++){const f=r[d];s[f]=_r(o,i,f,u[f],e,!_e(u,f))}}return l}function _r(e,t,s,n,o,r){const l=e[s];if(l!=null){const a=_e(l,"default");if(a&&n===void 0){const i=l.default;if(l.type!==Function&&!l.skipFactory&&ue(i)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=Hn(o);n=u[s]=i.call(null,t),d()}}else n=i;o.ce&&o.ce._setProp(s,n)}l[0]&&(r&&!a?n=!1:l[1]&&(n===""||n===cs(s))&&(n=!0))}return n}const Ad=new WeakMap;function Ai(e,t,s=!1){const n=s?Ad:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,l={},a=[];let i=!1;if(!ue(e)){const d=f=>{i=!0;const[v,m]=Ai(f,t,!0);Je(l,v),m&&a.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!i)return Ce(e)&&n.set(e,Fs),Fs;if(ae(r))for(let d=0;d<r.length;d++){const f=wt(r[d]);Pa(f)&&(l[f]=Se)}else if(r)for(const d in r){const f=wt(d);if(Pa(f)){const v=r[d],m=l[f]=ae(v)||ue(v)?{type:v}:Je({},v),g=m.type;let $=!1,L=!0;if(ae(g))for(let x=0;x<g.length;++x){const b=g[x],k=ue(b)&&b.name;if(k==="Boolean"){$=!0;break}else k==="String"&&(L=!1)}else $=ue(g)&&g.name==="Boolean";m[0]=$,m[1]=L,($||_e(m,"default"))&&a.push(f)}}const u=[l,a];return Ce(e)&&n.set(e,u),u}function Pa(e){return e[0]!=="$"&&!_n(e)}const ta=e=>e==="_"||e==="_ctx"||e==="$stable",sa=e=>ae(e)?e.map(Dt):[Dt(e)],Nd=(e,t,s)=>{if(t._n)return t;const n=Hu((...o)=>sa(t(...o)),s);return n._c=!1,n},Ni=(e,t,s)=>{const n=e._ctx;for(const o in e){if(ta(o))continue;const r=e[o];if(ue(r))t[o]=Nd(o,r,n);else if(r!=null){const l=sa(r);t[o]=()=>l}}},Ti=(e,t)=>{const s=sa(t);e.slots.default=()=>s},Oi=(e,t,s)=>{for(const n in t)(s||!ta(n))&&(e[n]=t[n])},Td=(e,t,s)=>{const n=e.slots=$i();if(e.vnode.shapeFlag&32){const o=t._;o?(Oi(n,t,s),s&&Ul(n,"_",o,!0)):Ni(t,n)}else t&&Ti(e,t)},Od=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,l=Se;if(n.shapeFlag&32){const a=t._;a?s&&a===1?r=!1:Oi(o,t,s):(r=!t.$stable,Ni(t,o)),l=t}else t&&(Ti(e,t),l={default:1});if(r)for(const a in o)!ta(a)&&l[a]==null&&delete o[a]},ft=Pd;function Ed(e){return Id(e)}function Id(e,t){const s=Io();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:l,createText:a,createComment:i,setText:u,setElementText:d,parentNode:f,nextSibling:v,setScopeId:m=Pt,insertStaticContent:g}=e,$=(y,w,A,U=null,M=null,j=null,R=void 0,N=null,_=!!w.dynamicChildren)=>{if(y===w)return;y&&!ln(y,w)&&(U=F(y),se(y,M,j,!0),y=null),w.patchFlag===-2&&(_=!1,w.dynamicChildren=null);const{type:S,ref:E,shapeFlag:I}=w;switch(S){case Bo:L(y,w,A,U);break;case qt:x(y,w,A,U);break;case oo:y==null&&b(w,A,U,R);break;case Z:we(y,w,A,U,M,j,R,N,_);break;default:I&1?W(y,w,A,U,M,j,R,N,_):I&6?Ee(y,w,A,U,M,j,R,N,_):(I&64||I&128)&&S.process(y,w,A,U,M,j,R,N,_,ne)}E!=null&&M?Cn(E,y&&y.ref,j,w||y,!w):E==null&&y&&y.ref!=null&&Cn(y.ref,null,j,y,!0)},L=(y,w,A,U)=>{if(y==null)n(w.el=a(w.children),A,U);else{const M=w.el=y.el;w.children!==y.children&&u(M,w.children)}},x=(y,w,A,U)=>{y==null?n(w.el=i(w.children||""),A,U):w.el=y.el},b=(y,w,A,U)=>{[y.el,y.anchor]=g(y.children,w,A,U,y.el,y.anchor)},k=({el:y,anchor:w},A,U)=>{let M;for(;y&&y!==w;)M=v(y),n(y,A,U),y=M;n(w,A,U)},P=({el:y,anchor:w})=>{let A;for(;y&&y!==w;)A=v(y),o(y),y=A;o(w)},W=(y,w,A,U,M,j,R,N,_)=>{if(w.type==="svg"?R="svg":w.type==="math"&&(R="mathml"),y==null)ee(w,A,U,M,j,R,N,_);else{const S=y.el&&y.el._isVueCE?y.el:null;try{S&&S._beginPatch(),Y(y,w,M,j,R,N,_)}finally{S&&S._endPatch()}}},ee=(y,w,A,U,M,j,R,N)=>{let _,S;const{props:E,shapeFlag:I,transition:H,dirs:V}=y;if(_=y.el=l(y.type,j,E&&E.is,E),I&8?d(_,y.children):I&16&&X(y.children,_,null,U,M,Qo(y,j),R,N),V&&fs(y,null,U,"created"),K(_,y,y.scopeId,R,U),E){for(const le in E)le!=="value"&&!_n(le)&&r(_,le,null,E[le],j,U);"value"in E&&r(_,"value",null,E.value,j),(S=E.onVnodeBeforeMount)&&Et(S,U,y)}V&&fs(y,null,U,"beforeMount");const q=Rd(M,H);q&&H.beforeEnter(_),n(_,w,A),((S=E&&E.onVnodeMounted)||q||V)&&ft(()=>{S&&Et(S,U,y),q&&H.enter(_),V&&fs(y,null,U,"mounted")},M)},K=(y,w,A,U,M)=>{if(A&&m(y,A),U)for(let j=0;j<U.length;j++)m(y,U[j]);if(M){let j=M.subTree;if(w===j||Di(j.type)&&(j.ssContent===w||j.ssFallback===w)){const R=M.vnode;K(y,R,R.scopeId,R.slotScopeIds,M.parent)}}},X=(y,w,A,U,M,j,R,N,_=0)=>{for(let S=_;S<y.length;S++){const E=y[S]=N?ns(y[S]):Dt(y[S]);$(null,E,w,A,U,M,j,R,N)}},Y=(y,w,A,U,M,j,R)=>{const N=w.el=y.el;let{patchFlag:_,dynamicChildren:S,dirs:E}=w;_|=y.patchFlag&16;const I=y.props||Se,H=w.props||Se;let V;if(A&&vs(A,!1),(V=H.onVnodeBeforeUpdate)&&Et(V,A,w,y),E&&fs(w,y,A,"beforeUpdate"),A&&vs(A,!0),(I.innerHTML&&H.innerHTML==null||I.textContent&&H.textContent==null)&&d(N,""),S?me(y.dynamicChildren,S,N,A,U,Qo(w,M),j):R||te(y,w,N,null,A,U,Qo(w,M),j,!1),_>0){if(_&16)ce(N,I,H,A,M);else if(_&2&&I.class!==H.class&&r(N,"class",null,H.class,M),_&4&&r(N,"style",I.style,H.style,M),_&8){const q=w.dynamicProps;for(let le=0;le<q.length;le++){const ve=q[le],Ie=I[ve],Ae=H[ve];(Ae!==Ie||ve==="value")&&r(N,ve,Ie,Ae,M,A)}}_&1&&y.children!==w.children&&d(N,w.children)}else!R&&S==null&&ce(N,I,H,A,M);((V=H.onVnodeUpdated)||E)&&ft(()=>{V&&Et(V,A,w,y),E&&fs(w,y,A,"updated")},U)},me=(y,w,A,U,M,j,R)=>{for(let N=0;N<w.length;N++){const _=y[N],S=w[N],E=_.el&&(_.type===Z||!ln(_,S)||_.shapeFlag&198)?f(_.el):A;$(_,S,E,null,U,M,j,R,!0)}},ce=(y,w,A,U,M)=>{if(w!==A){if(w!==Se)for(const j in w)!_n(j)&&!(j in A)&&r(y,j,w[j],null,M,U);for(const j in A){if(_n(j))continue;const R=A[j],N=w[j];R!==N&&j!=="value"&&r(y,j,N,R,M,U)}"value"in A&&r(y,"value",w.value,A.value,M)}},we=(y,w,A,U,M,j,R,N,_)=>{const S=w.el=y?y.el:a(""),E=w.anchor=y?y.anchor:a("");let{patchFlag:I,dynamicChildren:H,slotScopeIds:V}=w;V&&(N=N?N.concat(V):V),y==null?(n(S,A,U),n(E,A,U),X(w.children||[],A,E,M,j,R,N,_)):I>0&&I&64&&H&&y.dynamicChildren&&y.dynamicChildren.length===H.length?(me(y.dynamicChildren,H,A,M,j,R,N),(w.key!=null||M&&w===M.subTree)&&Ei(y,w,!0)):te(y,w,A,E,M,j,R,N,_)},Ee=(y,w,A,U,M,j,R,N,_)=>{w.slotScopeIds=N,y==null?w.shapeFlag&512?M.ctx.activate(w,A,U,R,_):qe(w,A,U,M,j,R,_):Ke(y,w,_)},qe=(y,w,A,U,M,j,R)=>{const N=y.component=Hd(y,U,M);if(mi(y)&&(N.ctx.renderer=ne),Kd(N,!1,R),N.asyncDep){if(M&&M.registerDep(N,oe,R),!y.el){const _=N.subTree=fe(qt);x(null,_,w,A),y.placeholder=_.el}}else oe(N,y,w,A,M,j,R)},Ke=(y,w,A)=>{const U=w.component=y.component;if(Cd(y,w,A))if(U.asyncDep&&!U.asyncResolved){z(U,w,A);return}else U.next=w,U.update();else w.el=y.el,U.vnode=w},oe=(y,w,A,U,M,j,R)=>{const N=()=>{if(y.isMounted){let{next:I,bu:H,u:V,parent:q,vnode:le}=y;{const Ue=Ii(y);if(Ue){I&&(I.el=le.el,z(y,I,R)),Ue.asyncDep.then(()=>{y.isUnmounted||N()});return}}let ve=I,Ie;vs(y,!1),I?(I.el=le.el,z(y,I,R)):I=le,H&&so(H),(Ie=I.props&&I.props.onVnodeBeforeUpdate)&&Et(Ie,q,I,le),vs(y,!0);const Ae=Ra(y),De=y.subTree;y.subTree=Ae,$(De,Ae,f(De.el),F(De),y,M,j),I.el=Ae.el,ve===null&&$d(y,Ae.el),V&&ft(V,M),(Ie=I.props&&I.props.onVnodeUpdated)&&ft(()=>Et(Ie,q,I,le),M)}else{let I;const{el:H,props:V}=w,{bm:q,m:le,parent:ve,root:Ie,type:Ae}=y,De=Vs(w);vs(y,!1),q&&so(q),!De&&(I=V&&V.onVnodeBeforeMount)&&Et(I,ve,w),vs(y,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Ae);const Ue=y.subTree=Ra(y);$(null,Ue,A,U,y,M,j),w.el=Ue.el}if(le&&ft(le,M),!De&&(I=V&&V.onVnodeMounted)){const Ue=w;ft(()=>Et(I,ve,Ue),M)}(w.shapeFlag&256||ve&&Vs(ve.vnode)&&ve.vnode.shapeFlag&256)&&y.a&&ft(y.a,M),y.isMounted=!0,w=A=U=null}};y.scope.on();const _=y.effect=new Hl(N);y.scope.off();const S=y.update=_.run.bind(_),E=y.job=_.runIfDirty.bind(_);E.i=y,E.id=y.uid,_.scheduler=()=>Zr(E),vs(y,!0),S()},z=(y,w,A)=>{w.component=y;const U=y.vnode.props;y.vnode=w,y.next=null,xd(y,w.props,U,A),Od(y,w.children,A),zt(),xa(y),Jt()},te=(y,w,A,U,M,j,R,N,_=!1)=>{const S=y&&y.children,E=y?y.shapeFlag:0,I=w.children,{patchFlag:H,shapeFlag:V}=w;if(H>0){if(H&128){de(S,I,A,U,M,j,R,N,_);return}else if(H&256){nt(S,I,A,U,M,j,R,N,_);return}}V&8?(E&16&&We(S,M,j),I!==S&&d(A,I)):E&16?V&16?de(S,I,A,U,M,j,R,N,_):We(S,M,j,!0):(E&8&&d(A,""),V&16&&X(I,A,U,M,j,R,N,_))},nt=(y,w,A,U,M,j,R,N,_)=>{y=y||Fs,w=w||Fs;const S=y.length,E=w.length,I=Math.min(S,E);let H;for(H=0;H<I;H++){const V=w[H]=_?ns(w[H]):Dt(w[H]);$(y[H],V,A,null,M,j,R,N,_)}S>E?We(y,M,j,!0,!1,I):X(w,A,U,M,j,R,N,_,I)},de=(y,w,A,U,M,j,R,N,_)=>{let S=0;const E=w.length;let I=y.length-1,H=E-1;for(;S<=I&&S<=H;){const V=y[S],q=w[S]=_?ns(w[S]):Dt(w[S]);if(ln(V,q))$(V,q,A,null,M,j,R,N,_);else break;S++}for(;S<=I&&S<=H;){const V=y[I],q=w[H]=_?ns(w[H]):Dt(w[H]);if(ln(V,q))$(V,q,A,null,M,j,R,N,_);else break;I--,H--}if(S>I){if(S<=H){const V=H+1,q=V<E?w[V].el:U;for(;S<=H;)$(null,w[S]=_?ns(w[S]):Dt(w[S]),A,q,M,j,R,N,_),S++}}else if(S>H)for(;S<=I;)se(y[S],M,j,!0),S++;else{const V=S,q=S,le=new Map;for(S=q;S<=H;S++){const Qe=w[S]=_?ns(w[S]):Dt(w[S]);Qe.key!=null&&le.set(Qe.key,S)}let ve,Ie=0;const Ae=H-q+1;let De=!1,Ue=0;const dt=new Array(Ae);for(S=0;S<Ae;S++)dt[S]=0;for(S=V;S<=I;S++){const Qe=y[S];if(Ie>=Ae){se(Qe,M,j,!0);continue}let ge;if(Qe.key!=null)ge=le.get(Qe.key);else for(ve=q;ve<=H;ve++)if(dt[ve-q]===0&&ln(Qe,w[ve])){ge=ve;break}ge===void 0?se(Qe,M,j,!0):(dt[ge-q]=S+1,ge>=Ue?Ue=ge:De=!0,$(Qe,w[ge],A,null,M,j,R,N,_),Ie++)}const kt=De?Dd(dt):Fs;for(ve=kt.length-1,S=Ae-1;S>=0;S--){const Qe=q+S,ge=w[Qe],Zt=w[Qe+1],wa=Qe+1<E?Zt.el||Ri(Zt):U;dt[S]===0?$(null,ge,A,wa,M,j,R,N,_):De&&(ve<0||S!==kt[ve]?G(ge,A,wa,2):ve--)}}},G=(y,w,A,U,M=null)=>{const{el:j,type:R,transition:N,children:_,shapeFlag:S}=y;if(S&6){G(y.component.subTree,w,A,U);return}if(S&128){y.suspense.move(w,A,U);return}if(S&64){R.move(y,w,A,ne);return}if(R===Z){n(j,w,A);for(let I=0;I<_.length;I++)G(_[I],w,A,U);n(y.anchor,w,A);return}if(R===oo){k(y,w,A);return}if(U!==2&&S&1&&N)if(U===0)N.beforeEnter(j),n(j,w,A),ft(()=>N.enter(j),M);else{const{leave:I,delayLeave:H,afterLeave:V}=N,q=()=>{y.ctx.isUnmounted?o(j):n(j,w,A)},le=()=>{j._isLeaving&&j[Ju](!0),I(j,()=>{q(),V&&V()})};H?H(j,q,le):le()}else n(j,w,A)},se=(y,w,A,U=!1,M=!1)=>{const{type:j,props:R,ref:N,children:_,dynamicChildren:S,shapeFlag:E,patchFlag:I,dirs:H,cacheIndex:V}=y;if(I===-2&&(M=!1),N!=null&&(zt(),Cn(N,null,A,y,!0),Jt()),V!=null&&(w.renderCache[V]=void 0),E&256){w.ctx.deactivate(y);return}const q=E&1&&H,le=!Vs(y);let ve;if(le&&(ve=R&&R.onVnodeBeforeUnmount)&&Et(ve,w,y),E&6)ht(y.component,A,U);else{if(E&128){y.suspense.unmount(A,U);return}q&&fs(y,null,w,"beforeUnmount"),E&64?y.type.remove(y,w,A,ne,U):S&&!S.hasOnce&&(j!==Z||I>0&&I&64)?We(S,w,A,!1,!0):(j===Z&&I&384||!M&&E&16)&&We(_,w,A),U&&Xe(y)}(le&&(ve=R&&R.onVnodeUnmounted)||q)&&ft(()=>{ve&&Et(ve,w,y),q&&fs(y,null,w,"unmounted")},A)},Xe=y=>{const{type:w,el:A,anchor:U,transition:M}=y;if(w===Z){ut(A,U);return}if(w===oo){P(y);return}const j=()=>{o(A),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(y.shapeFlag&1&&M&&!M.persisted){const{leave:R,delayLeave:N}=M,_=()=>R(A,j);N?N(y.el,j,_):_()}else j()},ut=(y,w)=>{let A;for(;y!==w;)A=v(y),o(y),y=A;o(w)},ht=(y,w,A)=>{const{bum:U,scope:M,job:j,subTree:R,um:N,m:_,a:S}=y;La(_),La(S),U&&so(U),M.stop(),j&&(j.flags|=8,se(R,y,w,A)),N&&ft(N,w),ft(()=>{y.isUnmounted=!0},w)},We=(y,w,A,U=!1,M=!1,j=0)=>{for(let R=j;R<y.length;R++)se(y[R],w,A,U,M)},F=y=>{if(y.shapeFlag&6)return F(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const w=v(y.anchor||y.el),A=w&&w[Gu];return A?v(A):w};let Q=!1;const J=(y,w,A)=>{let U;y==null?w._vnode&&(se(w._vnode,null,null,!0),U=w._vnode.component):$(w._vnode||null,y,w,null,null,null,A),w._vnode=y,Q||(Q=!0,xa(U),li(),Q=!1)},ne={p:$,um:se,m:G,r:Xe,mt:qe,mc:X,pc:te,pbc:me,n:F,o:e};return{render:J,hydrate:void 0,createApp:gd(J)}}function Qo({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function vs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Rd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ei(e,t,s=!1){const n=e.children,o=t.children;if(ae(n)&&ae(o))for(let r=0;r<n.length;r++){const l=n[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=ns(o[r]),a.el=l.el),!s&&a.patchFlag!==-2&&Ei(l,a)),a.type===Bo&&(a.patchFlag!==-1?a.el=l.el:a.__elIndex=r+(e.type===Z?1:0)),a.type===qt&&!a.el&&(a.el=l.el)}}function Dd(e){const t=e.slice(),s=[0];let n,o,r,l,a;const i=e.length;for(n=0;n<i;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(r=0,l=s.length-1;r<l;)a=r+l>>1,e[s[a]]<u?r=a+1:l=a;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,l=s[r-1];r-- >0;)s[r]=l,l=t[l];return s}function Ii(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ii(t)}function La(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Ri(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Ri(t.subTree):null}const Di=e=>e.__isSuspense;function Pd(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):ju(e)}const Z=Symbol.for("v-fgt"),Bo=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),oo=Symbol.for("v-stc"),kn=[];let pt=null;function p(e=!1){kn.push(pt=e?null:[])}function Ld(){kn.pop(),pt=kn[kn.length-1]||null}let In=1;function po(e,t=!1){In+=e,e<0&&pt&&t&&(pt.hasOnce=!0)}function Pi(e){return e.dynamicChildren=In>0?pt||Fs:null,Ld(),In>0&&pt&&pt.push(e),e}function h(e,t,s,n,o,r){return Pi(c(e,t,s,n,o,r,!0))}function Re(e,t,s,n,o){return Pi(fe(e,t,s,n,o,!0))}function Rn(e){return e?e.__v_isVNode===!0:!1}function ln(e,t){return e.type===t.type&&e.key===t.key}const Li=({key:e})=>e??null,ro=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Le(e)||st(e)||ue(e)?{i:Ge,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,r=e===Z?0:1,l=!1,a=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Li(t),ref:t&&ro(t),scopeId:ci,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ge};return a?(na(i,s),r&128&&e.normalize(i)):s&&(i.shapeFlag|=Le(s)?8:16),In>0&&!l&&pt&&(i.patchFlag>0||r&6)&&i.patchFlag!==32&&pt.push(i),i}const fe=Bd;function Bd(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===ld)&&(e=qt),Rn(e)){const a=zs(e,t,!0);return s&&na(a,s),In>0&&!r&&pt&&(a.shapeFlag&6?pt[pt.indexOf(e)]=a:pt.push(a)),a.patchFlag=-2,a}if(Yd(e)&&(e=e.__vccOpts),t){t=Ud(t);let{class:a,style:i}=t;a&&!Le(a)&&(t.class=re(a)),Ce(i)&&(Qr(i)&&!ae(i)&&(i=Je({},i)),t.style=us(i))}const l=Le(e)?1:Di(e)?128:zu(e)?64:Ce(e)?4:ue(e)?2:0;return c(e,t,s,n,o,l,r,!0)}function Ud(e){return e?Qr(e)||ki(e)?Je({},e):e:null}function zs(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:l,children:a,transition:i}=e,u=t?Md(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Li(u),ref:t&&t.ref?s&&r?ae(r)?r.concat(ro(t)):[r,ro(t)]:ro(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zs(e.ssContent),ssFallback:e.ssFallback&&zs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&n&&ea(d,i.clone(d)),d}function ks(e=" ",t=0){return fe(Bo,null,e,t)}function ho(e,t){const s=fe(oo,null,e);return s.staticCount=t,s}function B(e="",t=!1){return t?(p(),Re(qt,null,e)):fe(qt,null,e)}function Dt(e){return e==null||typeof e=="boolean"?fe(qt):ae(e)?fe(Z,null,e.slice()):Rn(e)?ns(e):fe(Bo,null,String(e))}function ns(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zs(e)}function na(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ae(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),na(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!ki(t)?t._ctx=Ge:o===3&&Ge&&(Ge.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:Ge},s=32):(t=String(t),n&64?(s=16,t=[ks(t)]):s=8);e.children=t,e.shapeFlag|=s}function Md(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=re([t.class,n.class]));else if(o==="style")t.style=us([t.style,n.style]);else if(No(o)){const r=t[o],l=n[o];l&&r!==l&&!(ae(r)&&r.includes(l))&&(t[o]=r?[].concat(r,l):l)}else o!==""&&(t[o]=n[o])}return t}function Et(e,t,s,n=null){Bt(e,t,7,[s,n])}const Fd=wi();let jd=0;function Hd(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Fd,r={uid:jd++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new du(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ai(n,o),emitsOptions:Si(n,o),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=bd.bind(null,r),e.ce&&e.ce(r),r}let tt=null;const Vd=()=>tt||Ge;let go,wr;{const e=Io(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(l=>l(r)):o[0](r)}};go=t("__VUE_INSTANCE_SETTERS__",s=>tt=s),wr=t("__VUE_SSR_SETTERS__",s=>Dn=s)}const Hn=e=>{const t=tt;return go(e),e.scope.on(),()=>{e.scope.off(),go(t)}},Ba=()=>{tt&&tt.scope.off(),go(null)};function Bi(e){return e.vnode.shapeFlag&4}let Dn=!1;function Kd(e,t=!1,s=!1){t&&wr(t);const{props:n,children:o}=e.vnode,r=Bi(e);kd(e,n,r,t),Td(e,o,s||t);const l=r?Wd(e,t):void 0;return t&&wr(!1),l}function Wd(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ud);const{setup:n}=s;if(n){zt();const o=e.setupContext=n.length>1?zd(e):null,r=Hn(e),l=jn(n,e,0,[e.props,o]),a=Pl(l);if(Jt(),r(),(a||e.sp)&&!Vs(e)&&vi(e),a){if(l.then(Ba,Ba),t)return l.then(i=>{Ua(e,i)}).catch(i=>{Do(i,e,0)});e.asyncDep=l}else Ua(e,l)}else Ui(e)}function Ua(e,t,s){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=oi(t)),Ui(e)}function Ui(e,t,s){const n=e.type;e.render||(e.render=n.render||Pt);{const o=Hn(e);zt();try{dd(e)}finally{Jt(),o()}}}const Gd={get(e,t){return et(e,"get",""),e[t]}};function zd(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Gd),slots:e.slots,emit:e.emit,expose:t}}function Uo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(oi(Eu(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in $n)return $n[s](e)},has(t,s){return s in t||s in $n}})):e.proxy}function Jd(e,t=!0){return ue(e)?e.displayName||e.name:e.name||t&&e.__name}function Yd(e){return ue(e)&&"__vccOpts"in e}const T=(e,t)=>Lu(e,t,Dn);function Mi(e,t,s){try{po(-1);const n=arguments.length;return n===2?Ce(t)&&!ae(t)?Rn(t)?fe(e,null,[t]):fe(e,t):fe(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Rn(s)&&(s=[s]),fe(e,t,s))}finally{po(1)}}const qd="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sr;const Ma=typeof window<"u"&&window.trustedTypes;if(Ma)try{Sr=Ma.createPolicy("vue",{createHTML:e=>e})}catch{}const Fi=Sr?e=>Sr.createHTML(e):e=>e,Xd="http://www.w3.org/2000/svg",Qd="http://www.w3.org/1998/Math/MathML",Ft=typeof document<"u"?document:null,Fa=Ft&&Ft.createElement("template"),Zd={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Ft.createElementNS(Xd,e):t==="mathml"?Ft.createElementNS(Qd,e):s?Ft.createElement(e,{is:s}):Ft.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Ft.createTextNode(e),createComment:e=>Ft.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ft.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const l=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Fa.innerHTML=Fi(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Fa.content;if(n==="svg"||n==="mathml"){const i=a.firstChild;for(;i.firstChild;)a.appendChild(i.firstChild);a.removeChild(i)}t.insertBefore(a,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ef=Symbol("_vtc");function tf(e,t,s){const n=e[ef];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const ja=Symbol("_vod"),sf=Symbol("_vsh"),nf=Symbol(""),of=/(?:^|;)\s*display\s*:/;function rf(e,t,s){const n=e.style,o=Le(s);let r=!1;if(s&&!o){if(t)if(Le(t))for(const l of t.split(";")){const a=l.slice(0,l.indexOf(":")).trim();s[a]==null&&ao(n,a,"")}else for(const l in t)s[l]==null&&ao(n,l,"");for(const l in s)l==="display"&&(r=!0),ao(n,l,s[l])}else if(o){if(t!==s){const l=n[nf];l&&(s+=";"+l),n.cssText=s,r=of.test(s)}}else t&&e.removeAttribute("style");ja in e&&(e[ja]=r?n.display:"",e[sf]&&(n.display="none"))}const Ha=/\s*!important$/;function ao(e,t,s){if(ae(s))s.forEach(n=>ao(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=af(e,t);Ha.test(s)?e.setProperty(cs(n),s.replace(Ha,""),"important"):e[n]=s}}const Va=["Webkit","Moz","ms"],Zo={};function af(e,t){const s=Zo[t];if(s)return s;let n=wt(t);if(n!=="filter"&&n in e)return Zo[t]=n;n=Oo(n);for(let o=0;o<Va.length;o++){const r=Va[o]+n;if(r in e)return Zo[t]=r}return t}const Ka="http://www.w3.org/1999/xlink";function Wa(e,t,s,n,o,r=cu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Ka,t.slice(6,t.length)):e.setAttributeNS(Ka,t,s):s==null||r&&!Ml(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Nt(s)?String(s):s)}function Ga(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Fi(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,i=s==null?e.type==="checkbox"?"on":"":String(s);(a!==i||!("_value"in e))&&(e.value=i),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=Ml(s):s==null&&a==="string"?(s="",l=!0):a==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function Vt(e,t,s,n){e.addEventListener(t,s,n)}function lf(e,t,s,n){e.removeEventListener(t,s,n)}const za=Symbol("_vei");function cf(e,t,s,n,o=null){const r=e[za]||(e[za]={}),l=r[t];if(n&&l)l.value=n;else{const[a,i]=uf(t);if(n){const u=r[t]=vf(n,o);Vt(e,a,u,i)}else l&&(lf(e,a,l,i),r[t]=void 0)}}const Ja=/(?:Once|Passive|Capture)$/;function uf(e){let t;if(Ja.test(e)){t={};let n;for(;n=e.match(Ja);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):cs(e.slice(2)),t]}let er=0;const df=Promise.resolve(),ff=()=>er||(df.then(()=>er=0),er=Date.now());function vf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Bt(mf(n,s.value),t,5,[n])};return s.value=e,s.attached=ff(),s}function mf(e,t){if(ae(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Ya=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,pf=(e,t,s,n,o,r)=>{const l=o==="svg";t==="class"?tf(e,n,l):t==="style"?rf(e,s,n):No(t)?Hr(t)||cf(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):hf(e,t,n,l))?(Ga(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wa(e,t,n,l,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Le(n))?Ga(e,wt(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Wa(e,t,n,l))};function hf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ya(t)&&ue(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ya(t)&&Le(s)?!1:t in e}const ls=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?s=>so(t,s):t};function gf(e){e.target.composing=!0}function qa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const _t=Symbol("_assign");function Xa(e,t,s){return t&&(e=e.trim()),s&&(e=Eo(e)),e}const Kt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[_t]=ls(o);const r=n||o.props&&o.props.type==="number";Vt(e,t?"change":"input",l=>{l.target.composing||e[_t](Xa(e.value,s,r))}),(s||r)&&Vt(e,"change",()=>{e.value=Xa(e.value,s,r)}),t||(Vt(e,"compositionstart",gf),Vt(e,"compositionend",qa),Vt(e,"change",qa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},l){if(e[_t]=ls(l),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Eo(e.value):e.value,i=t??"";a!==i&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===i)||(e.value=i))}},oa={deep:!0,created(e,t,s){e[_t]=ls(s),Vt(e,"change",()=>{const n=e._modelValue,o=Js(e),r=e.checked,l=e[_t];if(ae(n)){const a=Wr(n,o),i=a!==-1;if(r&&!i)l(n.concat(o));else if(!r&&i){const u=[...n];u.splice(a,1),l(u)}}else if(nn(n)){const a=new Set(n);r?a.add(o):a.delete(o),l(a)}else l(ji(e,r))})},mounted:Qa,beforeUpdate(e,t,s){e[_t]=ls(s),Qa(e,t,s)}};function Qa(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ae(t))o=Wr(t,n.props.value)>-1;else if(nn(t))o=t.has(n.props.value);else{if(t===s)return;o=$s(t,ji(e,!0))}e.checked!==o&&(e.checked=o)}const Za={created(e,{value:t},s){e.checked=$s(t,s.props.value),e[_t]=ls(s),Vt(e,"change",()=>{e[_t](Js(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[_t]=ls(n),t!==s&&(e.checked=$s(t,n.props.value))}},lo={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=nn(t);Vt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?Eo(Js(l)):Js(l));e[_t](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,On(()=>{e._assigning=!1})}),e[_t]=ls(n)},mounted(e,{value:t}){el(e,t)},beforeUpdate(e,t,s){e[_t]=ls(s)},updated(e,{value:t}){e._assigning||el(e,t)}};function el(e,t){const s=e.multiple,n=ae(t);if(!(s&&!n&&!nn(t))){for(let o=0,r=e.options.length;o<r;o++){const l=e.options[o],a=Js(l);if(s)if(n){const i=typeof a;i==="string"||i==="number"?l.selected=t.some(u=>String(u)===String(a)):l.selected=Wr(t,a)>-1}else l.selected=t.has(a);else if($s(Js(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Js(e){return"_value"in e?e._value:e.value}function ji(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const yf=["ctrl","shift","alt","meta"],bf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>yf.some(s=>e[`${s}Key`]&&!t.includes(s))},Xt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let l=0;l<t.length;l++){const a=bf[t[l]];if(a&&a(o,t))return}return e(o,...r)})},_f={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Hi=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const r=cs(o.key);if(t.some(l=>l===r||_f[l]===r))return e(o)})},wf=Je({patchProp:pf},Zd);let tl;function Sf(){return tl||(tl=Ed(wf))}const Cf=(...e)=>{const t=Sf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=kf(n);if(!o)return;const r=t._component;!ue(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,$f(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function $f(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function kf(e){return Le(e)?document.querySelector(e):e}const he=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},xf={};function Af(e,t){const s=ad("router-view");return p(),Re(s)}const Nf=he(xf,[["render",Af]]),Tf="modulepreload",Of=function(e){return"/"+e},sl={},Ef=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(s.map(i=>{if(i=Of(i),i in sl)return;sl[i]=!0;const u=i.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Tf,u||(f.as="script"),f.crossOrigin="",f.href=i,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((v,m)=>{f.addEventListener("load",v),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return o.then(l=>{for(const a of l||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ds=typeof document<"u";function Vi(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function If(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Vi(e.default)}const ye=Object.assign;function tr(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ot(o)?o.map(e):e(o)}return s}const xn=()=>{},Ot=Array.isArray;function nl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Ki=/#/g,Rf=/&/g,Df=/\//g,Pf=/=/g,Lf=/\?/g,Wi=/\+/g,Bf=/%5B/g,Uf=/%5D/g,Gi=/%5E/g,Mf=/%60/g,zi=/%7B/g,Ff=/%7C/g,Ji=/%7D/g,jf=/%20/g;function ra(e){return e==null?"":encodeURI(""+e).replace(Ff,"|").replace(Bf,"[").replace(Uf,"]")}function Hf(e){return ra(e).replace(zi,"{").replace(Ji,"}").replace(Gi,"^")}function Cr(e){return ra(e).replace(Wi,"%2B").replace(jf,"+").replace(Ki,"%23").replace(Rf,"%26").replace(Mf,"`").replace(zi,"{").replace(Ji,"}").replace(Gi,"^")}function Vf(e){return Cr(e).replace(Pf,"%3D")}function Kf(e){return ra(e).replace(Ki,"%23").replace(Lf,"%3F")}function Wf(e){return Kf(e).replace(Df,"%2F")}function Pn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Gf=/\/$/,zf=e=>e.replace(Gf,"");function sr(e,t,s="/"){let n,o={},r="",l="";const a=t.indexOf("#");let i=t.indexOf("?");return i=a>=0&&i>a?-1:i,i>=0&&(n=t.slice(0,i),r=t.slice(i,a>0?a:t.length),o=e(r.slice(1))),a>=0&&(n=n||t.slice(0,a),l=t.slice(a,t.length)),n=Xf(n??t,s),{fullPath:n+r+l,path:n,query:o,hash:Pn(l)}}function Jf(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ol(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Yf(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&Ys(t.matched[n],s.matched[o])&&Yi(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ys(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Yi(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!qf(e[s],t[s]))return!1;return!0}function qf(e,t){return Ot(e)?rl(e,t):Ot(t)?rl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function rl(e,t){return Ot(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Xf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let r=s.length-1,l,a;for(l=0;l<n.length;l++)if(a=n[l],a!==".")if(a==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+n.slice(l).join("/")}const es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let $r=function(e){return e.pop="pop",e.push="push",e}({}),nr=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Qf(e){if(!e)if(Ds){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),zf(e)}const Zf=/^[^#]+#/;function ev(e,t){return e.replace(Zf,"#")+t}function tv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Mo=()=>({left:window.scrollX,top:window.scrollY});function sv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=tv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function al(e,t){return(history.state?history.state.position-t:-1)+e}const kr=new Map;function nv(e,t){kr.set(e,t)}function ov(e){const t=kr.get(e);return kr.delete(e),t}function rv(e){return typeof e=="string"||e&&typeof e=="object"}function qi(e){return typeof e=="string"||typeof e=="symbol"}let Te=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Xi=Symbol("");Te.MATCHER_NOT_FOUND+"",Te.NAVIGATION_GUARD_REDIRECT+"",Te.NAVIGATION_ABORTED+"",Te.NAVIGATION_CANCELLED+"",Te.NAVIGATION_DUPLICATED+"";function qs(e,t){return ye(new Error,{type:e,[Xi]:!0},t)}function Mt(e,t){return e instanceof Error&&Xi in e&&(t==null||!!(e.type&t))}const av=["params","query","hash"];function lv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of av)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function iv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Wi," "),r=o.indexOf("="),l=Pn(r<0?o:o.slice(0,r)),a=r<0?null:Pn(o.slice(r+1));if(l in t){let i=t[l];Ot(i)||(i=t[l]=[i]),i.push(a)}else t[l]=a}return t}function ll(e){let t="";for(let s in e){const n=e[s];if(s=Vf(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ot(n)?n.map(o=>o&&Cr(o)):[n&&Cr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function cv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ot(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const uv=Symbol(""),il=Symbol(""),Fo=Symbol(""),aa=Symbol(""),xr=Symbol("");function cn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function os(e,t,s,n,o,r=l=>l()){const l=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((a,i)=>{const u=v=>{v===!1?i(qs(Te.NAVIGATION_ABORTED,{from:s,to:t})):v instanceof Error?i(v):rv(v)?i(qs(Te.NAVIGATION_GUARD_REDIRECT,{from:t,to:v})):(l&&n.enterCallbacks[o]===l&&typeof v=="function"&&l.push(v),a())},d=r(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(v=>i(v))})}function or(e,t,s,n,o=r=>r()){const r=[];for(const l of e)for(const a in l.components){let i=l.components[a];if(!(t!=="beforeRouteEnter"&&!l.instances[a]))if(Vi(i)){const u=(i.__vccOpts||i)[t];u&&r.push(os(u,s,n,l,a,o))}else{let u=i();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${l.path}"`);const f=If(d)?d.default:d;l.mods[a]=d,l.components[a]=f;const v=(f.__vccOpts||f)[t];return v&&os(v,s,n,l,a,o)()}))}}return r}function dv(e,t){const s=[],n=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let l=0;l<r;l++){const a=t.matched[l];a&&(e.matched.find(u=>Ys(u,a))?n.push(a):s.push(a));const i=e.matched[l];i&&(t.matched.find(u=>Ys(u,i))||o.push(i))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let fv=()=>location.protocol+"//"+location.host;function Qi(e,t){const{pathname:s,search:n,hash:o}=t,r=e.indexOf("#");if(r>-1){let l=o.includes(e.slice(r))?e.slice(r).length:1,a=o.slice(l);return a[0]!=="/"&&(a="/"+a),ol(a,"")}return ol(s,e)+n+o}function vv(e,t,s,n){let o=[],r=[],l=null;const a=({state:v})=>{const m=Qi(e,location),g=s.value,$=t.value;let L=0;if(v){if(s.value=m,t.value=v,l&&l===g){l=null;return}L=$?v.position-$.position:0}else n(m);o.forEach(x=>{x(s.value,g,{delta:L,type:$r.pop,direction:L?L>0?nr.forward:nr.back:nr.unknown})})};function i(){l=s.value}function u(v){o.push(v);const m=()=>{const g=o.indexOf(v);g>-1&&o.splice(g,1)};return r.push(m),m}function d(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(ye({},v.state,{scroll:Mo()}),"")}}function f(){for(const v of r)v();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:i,listen:u,destroy:f}}function cl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Mo():null}}function mv(e){const{history:t,location:s}=window,n={value:Qi(e,s)},o={value:t.state};o.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(i,u,d){const f=e.indexOf("#"),v=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+i:fv()+e+i;try{t[d?"replaceState":"pushState"](u,"",v),o.value=u}catch(m){console.error(m),s[d?"replace":"assign"](v)}}function l(i,u){r(i,ye({},t.state,cl(o.value.back,i,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=i}function a(i,u){const d=ye({},o.value,t.state,{forward:i,scroll:Mo()});r(d.current,d,!0),r(i,ye({},cl(n.value,i,null),{position:d.position+1},u),!1),n.value=i}return{location:n,state:o,push:a,replace:l}}function pv(e){e=Qf(e);const t=mv(e),s=vv(e,t.state,t.location,t.replace);function n(r,l=!0){l||s.pauseListeners(),history.go(r)}const o=ye({location:"",base:e,go:n,createHref:ev.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function hv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),pv(e)}let _s=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Fe=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Fe||{});const gv={type:_s.Static,value:""},yv=/[a-zA-Z0-9_]/;function bv(e){if(!e)return[[]];if(e==="/")return[[gv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${u}": ${m}`)}let s=Fe.Static,n=s;const o=[];let r;function l(){r&&o.push(r),r=[]}let a=0,i,u="",d="";function f(){u&&(s===Fe.Static?r.push({type:_s.Static,value:u}):s===Fe.Param||s===Fe.ParamRegExp||s===Fe.ParamRegExpEnd?(r.length>1&&(i==="*"||i==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:_s.Param,value:u,regexp:d,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):t("Invalid state to consume buffer"),u="")}function v(){u+=i}for(;a<e.length;){if(i=e[a++],i==="\\"&&s!==Fe.ParamRegExp){n=s,s=Fe.EscapeNext;continue}switch(s){case Fe.Static:i==="/"?(u&&f(),l()):i===":"?(f(),s=Fe.Param):v();break;case Fe.EscapeNext:v(),s=n;break;case Fe.Param:i==="("?s=Fe.ParamRegExp:yv.test(i)?v():(f(),s=Fe.Static,i!=="*"&&i!=="?"&&i!=="+"&&a--);break;case Fe.ParamRegExp:i===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+i:s=Fe.ParamRegExpEnd:d+=i;break;case Fe.ParamRegExpEnd:f(),s=Fe.Static,i!=="*"&&i!=="?"&&i!=="+"&&a--,d="";break;default:t("Unknown state");break}}return s===Fe.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),l(),o}const ul="[^/]+?",_v={sensitive:!1,strict:!1,start:!0,end:!0};var rt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(rt||{});const wv=/[.+*?^${}()[\]/\\]/g;function Sv(e,t){const s=ye({},_v,t),n=[];let o=s.start?"^":"";const r=[];for(const u of e){const d=u.length?[]:[rt.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const v=u[f];let m=rt.Segment+(s.sensitive?rt.BonusCaseSensitive:0);if(v.type===_s.Static)f||(o+="/"),o+=v.value.replace(wv,"\\$&"),m+=rt.Static;else if(v.type===_s.Param){const{value:g,repeatable:$,optional:L,regexp:x}=v;r.push({name:g,repeatable:$,optional:L});const b=x||ul;if(b!==ul){m+=rt.BonusCustomRegExp;try{`${b}`}catch(P){throw new Error(`Invalid custom RegExp for param "${g}" (${b}): `+P.message)}}let k=$?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(k=L&&u.length<2?`(?:/${k})`:"/"+k),L&&(k+="?"),o+=k,m+=rt.Dynamic,L&&(m+=rt.BonusOptional),$&&(m+=rt.BonusRepeatable),b===".*"&&(m+=rt.BonusWildcard)}d.push(m)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=rt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,s.sensitive?"":"i");function a(u){const d=u.match(l),f={};if(!d)return null;for(let v=1;v<d.length;v++){const m=d[v]||"",g=r[v-1];f[g.name]=m&&g.repeatable?m.split("/"):m}return f}function i(u){let d="",f=!1;for(const v of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const m of v)if(m.type===_s.Static)d+=m.value;else if(m.type===_s.Param){const{value:g,repeatable:$,optional:L}=m,x=g in u?u[g]:"";if(Ot(x)&&!$)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const b=Ot(x)?x.join("/"):x;if(!b)if(L)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);d+=b}}return d||"/"}return{re:l,score:n,keys:r,parse:a,stringify:i}}function Cv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===rt.Static+rt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===rt.Static+rt.Segment?1:-1:0}function Zi(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const r=Cv(n[s],o[s]);if(r)return r;s++}if(Math.abs(o.length-n.length)===1){if(dl(n))return 1;if(dl(o))return-1}return o.length-n.length}function dl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const $v={strict:!1,end:!0,sensitive:!1};function kv(e,t,s){const n=Sv(bv(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function xv(e,t){const s=[],n=new Map;t=nl($v,t);function o(f){return n.get(f)}function r(f,v,m){const g=!m,$=vl(f);$.aliasOf=m&&m.record;const L=nl(t,f),x=[$];if("alias"in f){const P=typeof f.alias=="string"?[f.alias]:f.alias;for(const W of P)x.push(vl(ye({},$,{components:m?m.record.components:$.components,path:W,aliasOf:m?m.record:$})))}let b,k;for(const P of x){const{path:W}=P;if(v&&W[0]!=="/"){const ee=v.record.path,K=ee[ee.length-1]==="/"?"":"/";P.path=v.record.path+(W&&K+W)}if(b=kv(P,v,L),m?m.alias.push(b):(k=k||b,k!==b&&k.alias.push(b),g&&f.name&&!ml(b)&&l(f.name)),ec(b)&&i(b),$.children){const ee=$.children;for(let K=0;K<ee.length;K++)r(ee[K],b,m&&m.children[K])}m=m||b}return k?()=>{l(k)}:xn}function l(f){if(qi(f)){const v=n.get(f);v&&(n.delete(f),s.splice(s.indexOf(v),1),v.children.forEach(l),v.alias.forEach(l))}else{const v=s.indexOf(f);v>-1&&(s.splice(v,1),f.record.name&&n.delete(f.record.name),f.children.forEach(l),f.alias.forEach(l))}}function a(){return s}function i(f){const v=Tv(f,s);s.splice(v,0,f),f.record.name&&!ml(f)&&n.set(f.record.name,f)}function u(f,v){let m,g={},$,L;if("name"in f&&f.name){if(m=n.get(f.name),!m)throw qs(Te.MATCHER_NOT_FOUND,{location:f});L=m.record.name,g=ye(fl(v.params,m.keys.filter(k=>!k.optional).concat(m.parent?m.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),f.params&&fl(f.params,m.keys.map(k=>k.name))),$=m.stringify(g)}else if(f.path!=null)$=f.path,m=s.find(k=>k.re.test($)),m&&(g=m.parse($),L=m.record.name);else{if(m=v.name?n.get(v.name):s.find(k=>k.re.test(v.path)),!m)throw qs(Te.MATCHER_NOT_FOUND,{location:f,currentLocation:v});L=m.record.name,g=ye({},v.params,f.params),$=m.stringify(g)}const x=[];let b=m;for(;b;)x.unshift(b.record),b=b.parent;return{name:L,path:$,params:g,matched:x,meta:Nv(x)}}e.forEach(f=>r(f));function d(){s.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:l,clearRoutes:d,getRoutes:a,getRecordMatcher:o}}function fl(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function vl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Av(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Av(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function ml(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nv(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function Tv(e,t){let s=0,n=t.length;for(;s!==n;){const r=s+n>>1;Zi(e,t[r])<0?n=r:s=r+1}const o=Ov(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Ov(e){let t=e;for(;t=t.parent;)if(ec(t)&&Zi(e,t)===0)return t}function ec({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function pl(e){const t=At(Fo),s=At(aa),n=T(()=>{const i=D(e.to);return t.resolve(i)}),o=T(()=>{const{matched:i}=n.value,{length:u}=i,d=i[u-1],f=s.matched;if(!d||!f.length)return-1;const v=f.findIndex(Ys.bind(null,d));if(v>-1)return v;const m=hl(i[u-2]);return u>1&&hl(d)===m&&f[f.length-1].path!==m?f.findIndex(Ys.bind(null,i[u-2])):v}),r=T(()=>o.value>-1&&Pv(s.params,n.value.params)),l=T(()=>o.value>-1&&o.value===s.matched.length-1&&Yi(s.params,n.value.params));function a(i={}){if(Dv(i)){const u=t[D(e.replace)?"replace":"push"](D(e.to)).catch(xn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:T(()=>n.value.href),isActive:r,isExactActive:l,navigate:a}}function Ev(e){return e.length===1?e[0]:e}const Iv=fi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pl,setup(e,{slots:t}){const s=Lt(pl(e)),{options:n}=At(Fo),o=T(()=>({[gl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[gl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=t.default&&Ev(t.default(s));return e.custom?r:Mi("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},r)}}}),Rv=Iv;function Dv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Pv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ot(o)||o.length!==n.length||n.some((r,l)=>r.valueOf()!==o[l].valueOf()))return!1}return!0}function hl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const gl=(e,t,s)=>e??t??s,Lv=fi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=At(xr),o=T(()=>e.route||n.value),r=At(il,0),l=T(()=>{let u=D(r);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),a=T(()=>o.value.matched[l.value]);no(il,T(()=>l.value+1)),no(uv,a),no(xr,o);const i=O();return ct(()=>[i.value,a.value,e.name],([u,d,f],[v,m,g])=>{d&&(d.instances[f]=u,m&&m!==d&&u&&u===v&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!Ys(d,m)||!v)&&(d.enterCallbacks[f]||[]).forEach($=>$(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=a.value,v=f&&f.components[d];if(!v)return yl(s.default,{Component:v,route:u});const m=f.props[d],g=m?m===!0?u.params:typeof m=="function"?m(u):m:null,L=Mi(v,ye({},g,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(f.instances[d]=null)},ref:i}));return yl(s.default,{Component:L,route:u})||L}}});function yl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Bv=Lv;function Uv(e){const t=xv(e.routes,e),s=e.parseQuery||iv,n=e.stringifyQuery||ll,o=e.history,r=cn(),l=cn(),a=cn(),i=Iu(es);let u=es;Ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=tr.bind(null,F=>""+F),f=tr.bind(null,Wf),v=tr.bind(null,Pn);function m(F,Q){let J,ne;return qi(F)?(J=t.getRecordMatcher(F),ne=Q):ne=F,t.addRoute(ne,J)}function g(F){const Q=t.getRecordMatcher(F);Q&&t.removeRoute(Q)}function $(){return t.getRoutes().map(F=>F.record)}function L(F){return!!t.getRecordMatcher(F)}function x(F,Q){if(Q=ye({},Q||i.value),typeof F=="string"){const A=sr(s,F,Q.path),U=t.resolve({path:A.path},Q),M=o.createHref(A.fullPath);return ye(A,U,{params:v(U.params),hash:Pn(A.hash),redirectedFrom:void 0,href:M})}let J;if(F.path!=null)J=ye({},F,{path:sr(s,F.path,Q.path).path});else{const A=ye({},F.params);for(const U in A)A[U]==null&&delete A[U];J=ye({},F,{params:f(A)}),Q.params=f(Q.params)}const ne=t.resolve(J,Q),pe=F.hash||"";ne.params=d(v(ne.params));const y=Jf(n,ye({},F,{hash:Hf(pe),path:ne.path})),w=o.createHref(y);return ye({fullPath:y,hash:pe,query:n===ll?cv(F.query):F.query||{}},ne,{redirectedFrom:void 0,href:w})}function b(F){return typeof F=="string"?sr(s,F,i.value.path):ye({},F)}function k(F,Q){if(u!==F)return qs(Te.NAVIGATION_CANCELLED,{from:Q,to:F})}function P(F){return K(F)}function W(F){return P(ye(b(F),{replace:!0}))}function ee(F,Q){const J=F.matched[F.matched.length-1];if(J&&J.redirect){const{redirect:ne}=J;let pe=typeof ne=="function"?ne(F,Q):ne;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),ye({query:F.query,hash:F.hash,params:pe.path!=null?{}:F.params},pe)}}function K(F,Q){const J=u=x(F),ne=i.value,pe=F.state,y=F.force,w=F.replace===!0,A=ee(J,ne);if(A)return K(ye(b(A),{state:typeof A=="object"?ye({},pe,A.state):pe,force:y,replace:w}),Q||J);const U=J;U.redirectedFrom=Q;let M;return!y&&Yf(n,ne,J)&&(M=qs(Te.NAVIGATION_DUPLICATED,{to:U,from:ne}),G(ne,ne,!0,!1)),(M?Promise.resolve(M):me(U,ne)).catch(j=>Mt(j)?Mt(j,Te.NAVIGATION_GUARD_REDIRECT)?j:de(j):te(j,U,ne)).then(j=>{if(j){if(Mt(j,Te.NAVIGATION_GUARD_REDIRECT))return K(ye({replace:w},b(j.to),{state:typeof j.to=="object"?ye({},pe,j.to.state):pe,force:y}),Q||U)}else j=we(U,ne,!0,w,pe);return ce(U,ne,j),j})}function X(F,Q){const J=k(F,Q);return J?Promise.reject(J):Promise.resolve()}function Y(F){const Q=ut.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function me(F,Q){let J;const[ne,pe,y]=dv(F,Q);J=or(ne.reverse(),"beforeRouteLeave",F,Q);for(const A of ne)A.leaveGuards.forEach(U=>{J.push(os(U,F,Q))});const w=X.bind(null,F,Q);return J.push(w),We(J).then(()=>{J=[];for(const A of r.list())J.push(os(A,F,Q));return J.push(w),We(J)}).then(()=>{J=or(pe,"beforeRouteUpdate",F,Q);for(const A of pe)A.updateGuards.forEach(U=>{J.push(os(U,F,Q))});return J.push(w),We(J)}).then(()=>{J=[];for(const A of y)if(A.beforeEnter)if(Ot(A.beforeEnter))for(const U of A.beforeEnter)J.push(os(U,F,Q));else J.push(os(A.beforeEnter,F,Q));return J.push(w),We(J)}).then(()=>(F.matched.forEach(A=>A.enterCallbacks={}),J=or(y,"beforeRouteEnter",F,Q,Y),J.push(w),We(J))).then(()=>{J=[];for(const A of l.list())J.push(os(A,F,Q));return J.push(w),We(J)}).catch(A=>Mt(A,Te.NAVIGATION_CANCELLED)?A:Promise.reject(A))}function ce(F,Q,J){a.list().forEach(ne=>Y(()=>ne(F,Q,J)))}function we(F,Q,J,ne,pe){const y=k(F,Q);if(y)return y;const w=Q===es,A=Ds?history.state:{};J&&(ne||w?o.replace(F.fullPath,ye({scroll:w&&A&&A.scroll},pe)):o.push(F.fullPath,pe)),i.value=F,G(F,Q,J,w),de()}let Ee;function qe(){Ee||(Ee=o.listen((F,Q,J)=>{if(!ht.listening)return;const ne=x(F),pe=ee(ne,ht.currentRoute.value);if(pe){K(ye(pe,{replace:!0,force:!0}),ne).catch(xn);return}u=ne;const y=i.value;Ds&&nv(al(y.fullPath,J.delta),Mo()),me(ne,y).catch(w=>Mt(w,Te.NAVIGATION_ABORTED|Te.NAVIGATION_CANCELLED)?w:Mt(w,Te.NAVIGATION_GUARD_REDIRECT)?(K(ye(b(w.to),{force:!0}),ne).then(A=>{Mt(A,Te.NAVIGATION_ABORTED|Te.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===$r.pop&&o.go(-1,!1)}).catch(xn),Promise.reject()):(J.delta&&o.go(-J.delta,!1),te(w,ne,y))).then(w=>{w=w||we(ne,y,!1),w&&(J.delta&&!Mt(w,Te.NAVIGATION_CANCELLED)?o.go(-J.delta,!1):J.type===$r.pop&&Mt(w,Te.NAVIGATION_ABORTED|Te.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ce(ne,y,w)}).catch(xn)}))}let Ke=cn(),oe=cn(),z;function te(F,Q,J){de(F);const ne=oe.list();return ne.length?ne.forEach(pe=>pe(F,Q,J)):console.error(F),Promise.reject(F)}function nt(){return z&&i.value!==es?Promise.resolve():new Promise((F,Q)=>{Ke.add([F,Q])})}function de(F){return z||(z=!F,qe(),Ke.list().forEach(([Q,J])=>F?J(F):Q()),Ke.reset()),F}function G(F,Q,J,ne){const{scrollBehavior:pe}=e;if(!Ds||!pe)return Promise.resolve();const y=!J&&ov(al(F.fullPath,0))||(ne||!J)&&history.state&&history.state.scroll||null;return On().then(()=>pe(F,Q,y)).then(w=>w&&sv(w)).catch(w=>te(w,F,Q))}const se=F=>o.go(F);let Xe;const ut=new Set,ht={currentRoute:i,listening:!0,addRoute:m,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:L,getRoutes:$,resolve:x,options:e,push:P,replace:W,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:r.add,beforeResolve:l.add,afterEach:a.add,onError:oe.add,isReady:nt,install(F){F.component("RouterLink",Rv),F.component("RouterView",Bv),F.config.globalProperties.$router=ht,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>D(i)}),Ds&&!Xe&&i.value===es&&(Xe=!0,P(o.location).catch(ne=>{}));const Q={};for(const ne in es)Object.defineProperty(Q,ne,{get:()=>i.value[ne],enumerable:!0});F.provide(Fo,ht),F.provide(aa,si(Q)),F.provide(xr,i);const J=F.unmount;ut.add(F),F.unmount=function(){ut.delete(F),ut.size<1&&(u=es,Ee&&Ee(),Ee=null,i.value=es,Xe=!1,z=!1),J()}}};function We(F){return F.reduce((Q,J)=>Q.then(()=>Y(J)),Promise.resolve())}return ht}function Mv(){return At(Fo)}function M$(e){return At(aa)}function bl(e){const t=[],s=e.split(`
`);let n=null,o=[],r=!1,l="";for(let a=0;a<s.length;a++){const i=s[a];if(i.startsWith("%"))continue;if(r){i.includes("}")?(l+=i.substring(0,i.indexOf("}")),o.push(l.trim()),l="",r=!1):l+=i+`
`;continue}if(i.includes("{")){const f=i.indexOf("{");if(i.includes("}")){const v=i.indexOf("}");o.push(i.substring(f+1,v).trim())}else l=i.substring(f+1)+`
`,r=!0;continue}const u=i.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=i.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,v]=d;if(f==="Board")n&&(n.commentary=Sl(o),n.steps=_l(o),n.auction=wl(n.auction),t.push(n)),n=Fv(),n.boardNumber=parseInt(v,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=v;break;case"Vulnerable":n.vulnerable=v;break;case"Contract":n.contract=v;break;case"Declarer":n.declarer=v;break;case"Student":n.studentSeat=v;break;case"Deal":n.hands=jv(v);break;case"Auction":n.auctionDealer=v;break;case"Result":n.result=v;break;case"Event":n.event=v;break;case"SkillPath":n.skillPath=v;break;case"Category":n.category=v;break;case"Difficulty":n.difficulty=v;break}continue}if(n&&n.auctionDealer){const f=i.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const v=Vv(f);n.auction.push(...v)}}}return n&&(n.commentary=Sl(o),n.steps=_l(o),n.auction=wl(n.auction),t.push(n)),t}function _l(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let r="";for(let l=0;l<n.length;l++){const a=n[l],i=a.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(a),d=/^\[ROTATE\]$/i.test(a),f=a.match(/^\[choose-card\s+([^\]]+)\]$/i);if(i){const v=la(i[1]).replace(/!/g,"").trim(),m=r.trim();r="";let g="";if(l+1<n.length){const x=n[l+1];x.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=x.trim(),l++)}const $=un(m,"bid"),L=un(g,"bid");o.push({...$,type:"bid",bid:v,explanationText:L.text,showSeatsAfter:L.showSeats})}else if(u||d){const v=u?"next":"rotate";r.trim()&&o.push(un(r.trim(),v)),r=""}else if(f){const v=f[1].trim();let m;if(v.toLowerCase().startsWith("any:")?m={cards:v.substring(4).split(",").map($=>yo($.trim())),anyOf:!0}:m={card:yo(v)},r.trim()){const g=un(r.trim(),"choose-card");g.chooseCard=m,o.push(g)}r=""}else r+=a}if(r.trim()){const l=un(r.trim(),"end");o.push(l)}return o}function un(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const b=n[1].toUpperCase().trim();if(b==="ALL")s=["N","E","S","W"];else{const k=[];b.includes("N")&&k.push("N"),b.includes("E")&&k.push("E"),b.includes("S")&&k.push("S"),b.includes("W")&&k.push("W"),k.length>0&&(s=k)}}const o=[],r=/\[PLAY\s+([^\]]+)\]/gi;let l;for(;(l=r.exec(e))!==null;)o.push(l[1]);const a=/\[RESET\]/i.test(e);let i=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const b=u[1].trim();b.toLowerCase().startsWith("any:")?i={cards:b.substring(4).split(",").map(P=>yo(P.trim())),anyOf:!0}:i={card:yo(b)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),v=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),v&&(d=!0);const m=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let $=null;const L=e.match(/\[showcards\s+([^\]]+)\]/i);if(L){const b=L[1].trim();$={};const k=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let P;for(;(P=k.exec(b))!==null;){const W=P[1].toUpperCase(),ee=P[2].split(",").map(K=>K.trim().toUpperCase());$[W]=ee}Object.keys($).length===0&&($=null)}let x=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:la(x),type:t,showSeats:s,plays:o,reset:a,showAuction:d,showLead:m,clearCommentary:g,showcards:$,chooseCard:i}}function Fv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function yo(e){return e.toUpperCase().replace("10","T")}function jv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const r=s[0],l=r.indexOf(":");if(l!==-1){const a=r.charAt(0).toUpperCase();o=n.indexOf(a),s[0]=r.substring(l+1)}for(let a=0;a<4;a++){const i=(o+a)%4,u=n[i];t[u]=Hv(s[a])}return t}function Hv(e){const t=e.split(".");return t.length!==4?null:{spades:Qn(t[0]),hearts:Qn(t[1]),diamonds:Qn(t[2]),clubs:Qn(t[3])}}function Qn(e){return e?e.split(""):[]}function wl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Vv(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>Kv(t))}function Kv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Sl(e){return e.length?la(e.join(`

`)):""}function la(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Wv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function Zn(e,t){return Wv(t)[e%4]}const ia={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Cl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},tc=["spades","hearts","diamonds","clubs"];function rr(e){return e==="T"?"10":e}function ca(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const r=ia[o],l=o==="H"||o==="D"?"red":"black";return{text:`${n}${r}`,html:`${n}<span class="${l}">${r}</span>`}}return{text:e,html:e}}function Gv(e){return(Cl[e.toLowerCase()]||Cl[e])==="red"?"suit-red":"suit-black"}function zv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Ar(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Jv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of tc)for(const o of e[n]||[])s+=t[o]||0;return s}function Yv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=ia[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function dn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function qv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ps(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Xv({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:r,studentBid:l,correct:a,attemptNumber:i,timeTakenMs:u,skillPath:d,assignment:f=null}){var $,L,x,b,k,P,W,ee,K,X,Y;const v=(($=s.steps)==null?void 0:$.filter(me=>me.type==="bid").length)||1,m=s.studentSeat||"S",g=((L=s.hands)==null?void 0:L[m.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:m,hands:{north:((x=s.hands)==null?void 0:x.N)||((b=s.hands)==null?void 0:b.north)||"",east:((k=s.hands)==null?void 0:k.E)||((P=s.hands)==null?void 0:P.east)||"",south:((W=s.hands)==null?void 0:W.S)||((ee=s.hands)==null?void 0:ee.south)||"",west:((K=s.hands)==null?void 0:K.W)||((X=s.hands)==null?void 0:X.west)||""},full_auction:((Y=s.auction)==null?void 0:Y.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:v,auction_so_far:[...o],expected_bid:r,student_hand:g},result:{student_bid:l,correct:a,attempt_number:i,time_taken_ms:u},skill_path:d,assignment:f}}function sc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Qv(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function Zv(){return crypto.randomUUID()}function em(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function tm(e){const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=r=>r.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function sm(e){const[t]=e.split("/");return t||"uncategorized"}function nm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const nc={name:"AES-GCM",length:256},oc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function om(){const e=await crypto.subtle.generateKey(nc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Xs(t)}async function rc(e){const t=Ln(e);return crypto.subtle.importKey("raw",t,nc,!0,["encrypt","decrypt"])}async function ua(e,t){const s=await rc(t),n=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{encrypted_data:Xs(l),iv:Xs(n)}}async function ac(e,t,s){const n=await rc(s),o=Ln(e),r=Ln(t),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,o),a=new TextDecoder;return JSON.parse(a.decode(l))}async function rm(e){const t=Ln(e);return crypto.subtle.importKey("spki",t,oc,!0,["encrypt"])}async function am(){const e=await crypto.subtle.generateKey(oc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Xs(t),privateKey:Xs(s)}}async function lc(e,t){const s=await rm(t),n=Ln(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Xs(o)}function lm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function im(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function cm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await ua(t,e);return(await ac(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Xs(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Ln(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Nr="bridgePractice",ke=O({}),Pe=O(null),is=O(null),Bn=O(!1),jo=O(!1);function ic(){try{const e=localStorage.getItem(Nr);if(e){const t=JSON.parse(e);ke.value=t.users||{},Pe.value=t.currentUserId||null,is.value=t.adminViewerId||null}Bn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),Bn.value=!0}}function St(){try{const e=localStorage.getItem(Nr),t=e?JSON.parse(e):{};t.users=ke.value,t.currentUserId=Pe.value,is.value&&(t.adminViewerId=is.value),localStorage.setItem(Nr,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function um({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:r}){const l=crypto.randomUUID(),a=new Date().toISOString(),i=await om();let u=null;if(r)try{const f=await fetch(`${r}/keys/admin`);if(f.ok){const v=await f.json();is.value=v.viewer_id,u={grantee_id:v.viewer_id,encrypted_payload:await lc(i,v.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:l,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:i,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:a,updatedAt:a};return ke.value[l]=d,Pe.value=l,St(),jo.value=!0,d}function dm(e,t){if(!ke.value[e])return console.error("User not found:",e),null;const s=ke.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),St(),s}function fm(e){if(!ke.value[e])return!1;if(delete ke.value[e],Pe.value===e){const t=Object.keys(ke.value);Pe.value=t.length>0?t[0]:null}return St(),!0}function vm(e){return ke.value[e]?(Pe.value=e,St(),!0):(console.error("User not found:",e),!1)}function mm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(ke.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function pm(e){const t=e.trim().toLowerCase();for(const s of Object.values(ke.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function hm(e){return ke.value[e]||null}function gm(){ke.value={},Pe.value=null,is.value=null,jo.value=!1,St(),Bn.value=!1}function ym(){Bn.value||ic()}async function bm(e){const t=im(e);if(!t.valid)return{success:!1,error:t.error};if(!await cm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=ke.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Pe.value=e.user_id,St(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),r=o[0]||"Restored",l=o.slice(1).join(" ")||"User",a={id:e.user_id,firstName:r,lastName:l,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return ke.value[a.id]=a,Pe.value=a.id,St(),{success:!0,user:a}}function _m(){const e=ke.value[Pe.value];return!e||!e.secretKey?null:lm(e)}function wm(){jo.value=!1}function Sm(){return is.value}function Cm(e){is.value=e,St()}async function $m(e){const t=ke.value[Pe.value];return!t||!t.secretKey?null:lc(t.secretKey,e)}async function km(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function xm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return ke.value[r.id]=r,Pe.value=r.id,St(),{success:!0,user:r}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Am(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return ke.value[r.id]=r,Pe.value=r.id,St(),{success:!0,user:r}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Nm(){if(!Pe.value)return;const e=ke.value[Pe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();o.success&&o.user&&o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,St())}catch{}}function Be(){const e=T(()=>Pe.value&&ke.value[Pe.value]||null),t=T(()=>Object.values(ke.value)),s=T(()=>Object.keys(ke.value).length>0),n=T(()=>Object.keys(ke.value).length),o=T(()=>Pe.value!==null&&!!ke.value[Pe.value]);return{users:ke,currentUserId:Pe,adminViewerId:is,initialized:Bn,showKeyBackupModal:jo,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:ym,loadFromStorage:ic,saveToStorage:St,createUser:um,updateUser:dm,deleteUser:fm,switchUser:vm,findUserByName:mm,findUserByEmail:pm,getUser:hm,clearUsers:gm,restoreFromBackup:bm,getKeyBackup:_m,dismissKeyBackupModal:wm,getAdminViewerId:Sm,setAdminViewerId:Cm,createGrantForViewer:$m,requestRecovery:km,claimRecovery:xm,claimRecoveryByCode:Am,syncRole:Nm}}const Tr="bridgePractice",Ye=O({}),Oe=O(null),Ct=O(!1),Qs=O(!1);function cc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),r=e.get("classrooms");if(!t||!s)return null;const l=s.split(",").map(i=>i.trim()).filter(Boolean),a=r?r.split(",")[0].trim():null;return{name:t,lessons:l,dueDate:n||null,teacherName:o||null,classroom:a}}function uc(){try{const e=localStorage.getItem(Tr);if(e){const t=JSON.parse(e);Ye.value=t.assignments||{},Oe.value=t.currentAssignmentId||null,Oe.value&&Ye.value[Oe.value]&&(Ct.value=!0)}Qs.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),Qs.value=!0}}function xs(){try{const e=localStorage.getItem(Tr),t=e?JSON.parse(e):{};t.assignments=Ye.value,t.currentAssignmentId=Oe.value,localStorage.setItem(Tr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function dc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const r=Object.values(Ye.value).find(u=>u.name===e);if(r){const u=new Set(r.lessons);for(const d of n)u.add(d);return r.lessons=Array.from(u),o&&(r.dueDate=o),r.updatedAt=new Date().toISOString(),Oe.value=r.id,Ct.value=!0,xs(),r}const l=crypto.randomUUID(),a=new Date().toISOString(),i={id:l,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:a,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:a,updatedAt:a};return Ye.value[l]=i,Oe.value=l,Ct.value=!0,xs(),i}function Tm(){if(Qs.value)return;uc();const e=cc();e&&dc(e),Qs.value=!0}function Om(e){if(!Ct.value||!Oe.value)return!1;const t=Ye.value[Oe.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Em(e){if(!Oe.value)return;const t=Ye.value[Oe.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),xs())}function Im(e){if(!Oe.value||!Ct.value)return!1;const t=Ye.value[Oe.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,xs(),!0}function Rm(){if(!Ct.value||!Oe.value)return null;const e=Ye.value[Oe.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Dm(){Ct.value=!1}function Pm(){Oe.value&&Ye.value[Oe.value]&&(Ct.value=!0)}function Lm(e){return Ye.value[e]||null}function Bm(){return Object.values(Ye.value)}function Um(e){return Ye.value[e]?(delete Ye.value[e],Oe.value===e&&(Oe.value=null,Ct.value=!1),xs(),!0):!1}function Mm(){Ye.value={},Oe.value=null,Ct.value=!1,Qs.value=!1,xs()}function Ho(){const e=T(()=>Oe.value&&Ye.value[Oe.value]||null),t=T(()=>Ct.value&&e.value!==null),s=T(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=T(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Ye,currentAssignmentId:Oe,inAssignmentMode:Ct,initialized:Qs,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Tm,loadFromStorage:uc,saveToStorage:xs,createAssignment:dc,isLessonInAssignment:Om,setTotalDeals:Em,recordDealCompletion:Im,getAssignmentTag:Rm,exitAssignmentMode:Dm,returnToAssignmentMode:Pm,getAssignment:Lm,getAllAssignments:Bm,deleteAssignment:Um,clearAssignments:Mm,parseAssignmentFromUrl:cc}}const Or="bridgePractice",ze=O([]),Zs=O(null),en=O(!1),Cs=O({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function fc(){try{const e=localStorage.getItem(Or);if(e){const t=JSON.parse(e);ze.value=t.pendingObservations||[]}en.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),en.value=!0}}function As(){try{const e=localStorage.getItem(Or),t=e?JSON.parse(e):{};t.pendingObservations=ze.value,localStorage.setItem(Or,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function vc(){en.value||fc(),Zs.value||mc()}function mc(){Zs.value=Zv(),Cs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Fm({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:l,timeTakenMs:a}){var $,L;const i=Be(),u=Ho();en.value||vc();const d=i.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const x=e.subfolder||e.category||"Unknown";f=em(x)}const v=u.getAssignmentTag(),m=Xv({userId:d.id,sessionId:Zs.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:l,timeTakenMs:a,skillPath:f,assignment:v}),g=Qv(m);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if(Cs.value.totalObservations++,r?Cs.value.correctCount++:Cs.value.wrongCount++,d.dataConsent&&d.secretKey){const x=await jm(m,d);x.success||(console.warn("Failed to encrypt observation, storing unencrypted:",x.error),$l(m,(($=d.classrooms)==null?void 0:$[0])||null))}else $l(m,((L=d.classrooms)==null?void 0:L[0])||null);return{success:!0,observation:m}}async function jm(e,t){var s;try{const{encrypted_data:n,iv:o}=await ua(e,t.secretKey),r=((s=t.classrooms)==null?void 0:s[0])||null,l=sc(e,r);return ze.value.push({encrypted_data:n,iv:o,metadata:l,encrypted:!0,queuedAt:new Date().toISOString()}),As(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function $l(e,t){const s=sc(e,t);ze.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),As()}async function Hm(){const t=Be().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<ze.value.length;n++){const o=ze.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:r,iv:l}=await ua(o.observation,t.secretKey);ze.value[n]={encrypted_data:r,iv:l,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(r){console.error("Failed to encrypt observation:",r)}}return s>0&&As(),s}function Vm(){return ze.value.length}function Km(){return[...ze.value]}function Wm(e){ze.value=ze.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),As()}function Gm(){ze.value=[],As()}function zm(){return{...Cs.value}}function Jm(){ze.value=[],Zs.value=null,Cs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},en.value=!1,As()}function ds(){const e=T(()=>ze.value.length),t=T(()=>ze.value.length>0),s=T(()=>ze.value.some(o=>!o.encrypted)),n=T(()=>Zs.value);return{pendingObservations:ze,sessionId:Zs,sessionStats:Cs,initialized:en,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:vc,startNewSession:mc,recordObservation:Fm,encryptPendingObservations:Hm,getPendingCount:Vm,getPendingObservations:Km,removeSyncedObservations:Wm,clearPendingObservations:Gm,getSessionStats:zm,reset:Jm,loadFromStorage:fc,saveToStorage:As}}function Ym(){const e=ds(),t=O(null),s=O(0),n=O(!1),o=O(!1),r=Lt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),l=Lt({answered:{},wrongCard:null,correctCard:null}),a=Lt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),i=O({N:[],E:[],S:[],W:[]}),u=O(null),d=O(1),f=T(()=>{var _;return((_=t.value)==null?void 0:_.steps)||[]}),v=T(()=>f.value.length>0),m=T(()=>f.value[s.value]||null),g=T(()=>f.value.some(_=>_.type==="bid")),$=T(()=>{var _;return((_=m.value)==null?void 0:_.type)==="bid"}),L=T(()=>{var _;for(let S=s.value;S>=0;S--)if((_=f.value[S])!=null&&_.clearCommentary)return S;return 0}),x=T(()=>{var _;return((_=t.value)==null?void 0:_.studentSeat)||"S"}),b=T(()=>t.value?Zn(r.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),k=T(()=>b.value===x.value),P=T(()=>{var E,I;if(!$.value||!k.value||r.auctionComplete||o.value)return!1;const _=m.value;if(!(_!=null&&_.bid))return!1;const S=(I=(E=t.value)==null?void 0:E.auction)==null?void 0:I[r.currentBidIndex];return S?N(_.bid)===N(S):!1}),W=T(()=>{for(let _=r.displayedBids.length-1;_>=0;_--){const S=r.displayedBids[_];if(S&&S!=="Pass"&&S!=="X"&&S!=="XX")return S}return null}),ee=T(()=>{if(!t.value||r.displayedBids.length===0)return!1;const _=r.displayedBids[r.displayedBids.length-1];if(_==="X"||_==="XX"||!W.value)return!1;let S=-1;for(let V=r.displayedBids.length-1;V>=0;V--){const q=r.displayedBids[V];if(q&&q!=="Pass"&&q!=="X"&&q!=="XX"){S=V;break}}if(S===-1)return!1;const E=Zn(S,t.value.auctionDealer||t.value.dealer),I=b.value;return(I==="N"||I==="S")&&(E==="E"||E==="W")||(I==="E"||I==="W")&&(E==="N"||E==="S")}),K=T(()=>{if(!t.value||r.displayedBids.length===0)return!1;for(let _=r.displayedBids.length-1;_>=0;_--){const S=r.displayedBids[_];if(S!=="Pass"){if(S==="XX")return!1;if(S==="X"){const E=Zn(_,t.value.auctionDealer||t.value.dealer),I=b.value;return!(I==="N"&&E==="S"||I==="S"&&E==="N"||I==="E"&&E==="W"||I==="W"&&E==="E")}return!1}}return!1}),X=T(()=>{const _=m.value;return _!=null&&_.chooseCard?!l.answered[s.value]:!1}),Y=T(()=>{var _;return((_=m.value)==null?void 0:_.chooseCard)||null}),me=T(()=>{if(!t.value)return[];const _=["N","E","S","W"];if(!v.value)return[];let S=null;const E=f.value;for(let I=0;I<=s.value&&I<E.length;I++){const H=E[I];H!=null&&H.showSeats&&(S=H.showSeats),H!=null&&H.showSeatsAfter&&(I<s.value||I===s.value&&o.value)&&(S=H.showSeatsAfter)}return S?_.filter(I=>!S.includes(I)):_}),ce=T(()=>{if(!t.value||!v.value)return null;let _={};const S=f.value;for(let E=0;E<=s.value&&E<S.length;E++){const I=S[E];if(I!=null&&I.showcards)for(const[H,V]of Object.entries(I.showcards))_[H]=V;if(I!=null&&I.showSeats)for(const H of I.showSeats)delete _[H];if(I!=null&&I.showSeatsAfter&&(E<s.value||E===s.value&&o.value))for(const H of I.showSeatsAfter)delete _[H]}return Object.keys(_).length>0?_:null}),we=T(()=>{if(!t.value||!v.value)return{};let _={},S=new Set;const E=f.value;for(let H=0;H<=s.value&&H<E.length;H++){const V=E[H];if(V!=null&&V.showcards)for(const[q,le]of Object.entries(V.showcards))_[q]=le;if(V!=null&&V.showSeats)for(const q of V.showSeats)S.add(q)}const I={};for(const[H,V]of Object.entries(_))S.has(H)&&(I[H]=V);return I}),Ee=T(()=>{const _=ce.value;return _?Object.keys(_):[]}),qe=T(()=>{const _=me.value,S=Ee.value;return S.length?_.filter(E=>!S.includes(E)):_});function Ke(_){const S={spades:[],hearts:[],diamonds:[],clubs:[]},E={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const I of _){const H=I[0].toUpperCase(),V=I.slice(1).toUpperCase(),q=E[H];q&&S[q].push(V)}return S}const oe=T(()=>{var E,I;if(!((E=t.value)!=null&&E.hands))return{};if((I=m.value)!=null&&I.reset)return t.value.hands;const _=ce.value,S={};for(const H of["N","E","S","W"]){if(_&&_[H]){S[H]=Ke(_[H]);continue}const V=t.value.hands[H];if(!V){S[H]=null;continue}S[H]={spades:[...V.spades||[]],hearts:[...V.hearts||[]],diamonds:[...V.diamonds||[]],clubs:[...V.clubs||[]]};for(const q of i.value[H]){const le={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[q.suit];if(le&&S[H][le]){const ve=S[H][le].indexOf(q.card);ve!==-1&&S[H][le].splice(ve,1)}}}return S}),z=T(()=>!(g.value&&!r.auctionComplete)),te=T(()=>{if(!v.value)return!0;let _=!0;const S=f.value;for(let E=0;E<=s.value&&E<S.length;E++){const I=S[E];(I==null?void 0:I.showAuction)!==null&&(I==null?void 0:I.showAuction)!==void 0&&(_=I.showAuction)}return _}),nt=T(()=>{var S;if(!v.value)return!1;const _=f.value;for(let E=0;E<=s.value&&E<_.length;E++)if((S=_[E])!=null&&S.showLead)return!0;return!1}),de=T(()=>{var _;return(_=t.value)!=null&&_.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),G=T(()=>{if(!v.value||n.value)return!0;const _=m.value;return(_==null?void 0:_.type)==="end"&&!X.value}),se=T(()=>v.value?!!(o.value||s.value>0||$.value&&r.currentBidIndex>0):!1);function Xe(){var S;i.value={N:[],E:[],S:[],W:[]};const _=f.value;for(let E=0;E<=s.value&&E<_.length;E++){const I=_[E];if((S=I==null?void 0:I.plays)!=null&&S.length)for(const H of I.plays){const V=H.split(/[,\s]+/);for(const q of V){if(!q)continue;const le=q.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(le){const ve=le[1].toUpperCase(),Ie=le[2].toUpperCase();let Ae=le[3].toUpperCase();Ae==="10"&&(Ae="T"),i.value[ve].push({suit:Ie,card:Ae})}}}}}function ut(){if(!t.value)return;const _=t.value.auction||[],S=ht(s.value);if(S===-1){for(;r.currentBidIndex<_.length;)r.displayedBids.push(_[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0,u.value=null;return}const E=f.value[S],I=N(E.bid);for(;r.currentBidIndex<_.length;){const H=Zn(r.currentBidIndex,t.value.auctionDealer||t.value.dealer),V=N(_[r.currentBidIndex]);if(H===x.value&&V===I){u.value=Date.now(),d.value=1;return}r.displayedBids.push(_[r.currentBidIndex]),r.currentBidIndex++}r.auctionComplete=!0,u.value=null}function ht(_){const S=f.value;for(let E=_;E<S.length;E++)if(S[E].type==="bid")return E;return-1}function We(_){if(!t.value||r.auctionComplete||!$.value)return!1;const S=t.value.auction[r.currentBidIndex],E=N(_)===N(S),I=s.value;E?I in a.wrongStepIndices&&(delete a.wrongStepIndices[I],M(!0)):(M(!1),a.wrongStepIndices[I]=!0,a.boardHadWrong=!0);const H=r.currentBidIndex;r.displayedBids.push(t.value.auction[r.currentBidIndex]),r.currentBidIndex++,u.value=null,d.value=1,E?(r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1):(r.wrongBid=_,r.correctBid=S,r.wrongBidIndex=H);const V=s.value+1,q=f.value[V];return(q==null?void 0:q.type)==="bid"?(s.value=V,o.value=!1,ut()):(o.value=!0,F(),s.value>=f.value.length-1&&y()),E}function F(){var S;if(r.auctionComplete)return;if(ht(s.value+1)===-1){const E=((S=t.value)==null?void 0:S.auction)||[];for(;r.currentBidIndex<E.length;)r.displayedBids.push(E[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0}}function Q(){r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1}function J(_,S){if(!t.value||!X.value)return!1;const E=Y.value;if(!E)return!1;const I=(_+S).toUpperCase(),H=s.value;let V=!1,q="";return E.anyOf?(V=E.cards.includes(I),q=E.cards[0]):(V=I===E.card,q=E.card),V?H in a.wrongStepIndices&&(delete a.wrongStepIndices[H],M(!0)):(M(!1),a.wrongStepIndices[H]=!0,a.boardHadWrong=!0),l.answered[H]=!0,V?(l.wrongCard=null,l.correctCard=null):(l.wrongCard=I,l.correctCard=q),pe(),V}function ne(){l.wrongCard=null,l.correctCard=null}function pe(){var _;if(P.value||X.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,Xe(),((_=f.value[s.value])==null?void 0:_.type)==="bid"&&ut(),s.value>=f.value.length-1){const S=f.value[s.value];(S==null?void 0:S.type)!=="bid"&&(S==null?void 0:S.type)!=="choose-card"&&y()}return!0}return y(),!1}function y(){n.value=!0,w()}function w(){if(f.value.some(S=>S.type==="bid"||S.type==="choose-card"))if(a.boardHadWrong){a.wrongCount++;const S=Object.keys(a.wrongStepIndices).length===0;M(S)}else a.correctCount++,M(!0)}function A(){if(Q(),ne(),o.value)return o.value=!1,U(s.value),!0;if(s.value>0){const _=s.value-1,S=f.value[_];return l.answered[_]&&delete l.answered[_],(S==null?void 0:S.type)==="bid"&&U(_),s.value=_,n.value=!1,o.value=!1,Xe(),!0}return!1}function U(_){var V;const S=f.value[_];if(!S||S.type!=="bid")return;const E=N(S.bid),I=((V=t.value)==null?void 0:V.auction)||[];let H=0;for(let q=0;q<I.length;q++)if(N(I[q])===E){H=q;break}r.currentBidIndex=H,r.displayedBids=I.slice(0,H),r.auctionComplete=!1,u.value=Date.now(),d.value=1}async function M(_){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...r.displayedBids],expectedBid:"BOARD",studentBid:_?"PASS":"FAIL",correct:_,attemptNumber:1,timeTakenMs:0})}catch(S){console.error("Failed to record board observation:",S)}}function j(_){var S,E;t.value=_,s.value=0,n.value=!1,o.value=!1,r.displayedBids=[],r.currentBidIndex=0,r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1,r.auctionComplete=!1,l.answered={},l.wrongCard=null,l.correctCard=null,a.boardHadWrong=!1,a.wrongStepIndices={},i.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(S=_==null?void 0:_.steps)!=null&&S.length&&(Xe(),((E=_.steps[0])==null?void 0:E.type)==="bid"&&ut())}function R(){a.correctCount=0,a.wrongCount=0}function N(_){if(!_)return"";const E=_.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return E==="PASS"||E==="P"?"PASS":E==="X"||E==="DBL"||E==="DOUBLE"?"X":E==="XX"||E==="RDBL"||E==="REDOUBLE"?"XX":E.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:r,cardChoiceState:l,boardState:a,steps:f,hasSteps:v,currentStep:m,hasBidSteps:g,isBidStep:$,commentaryStartIndex:L,studentSeat:x,currentTurnSeat:b,isStudentTurn:k,hasBidPrompt:P,lastContractBid:W,canDouble:ee,canRedouble:K,canGoBack:se,hasCardChoice:X,currentChooseCard:Y,hiddenSeats:qe,hands:oe,showHcp:z,showcardsPlayedCards:we,isComplete:G,showAuctionTable:te,showOpeningLead:nt,openingLead:de,advance:pe,makeBid:We,clearFeedback:Q,goBack:A,makeCardChoice:J,clearCardFeedback:ne,loadDeal:j,resetStats:R,observationStore:e}}const bo="bridgePractice",pc="bridgePracticeUIPrefs",Ze=O({teacherName:null,availableClassrooms:[],configuredAt:null}),tn=O({showLoadPbnOption:!1}),_o=O(!1);function hc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function gc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(r=>({id:r.trim(),name:hc(r.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function qm(){return new URLSearchParams(window.location.search).get("collection")}function Xm(){return new URLSearchParams(window.location.search).get("lesson")}function Qm(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Zm(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function ep(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function tp(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const sp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function yc(){try{const e=localStorage.getItem(bo);if(e){const t=JSON.parse(e);t.appConfig&&(Ze.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function np(){try{const e=localStorage.getItem(pc);if(e){const t=JSON.parse(e);tn.value={...tn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function op(){try{localStorage.setItem(pc,JSON.stringify(tn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function rp(e,t){tn.value[e]=t,op()}function da(){try{const e=localStorage.getItem(bo),t=e?JSON.parse(e):{};t.appConfig=Ze.value,localStorage.setItem(bo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function bc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function ap(){if(_o.value)return;yc(),np();const{teacher:e,classrooms:t}=gc();(e||t.length>0)&&(e&&!Ze.value.teacherName&&(Ze.value.teacherName=e),t.length>0&&(Ze.value.availableClassrooms=bc(Ze.value.availableClassrooms||[],t)),Ze.value.configuredAt||(Ze.value.configuredAt=new Date().toISOString()),da()),_o.value=!0}function lp(){try{const e=localStorage.getItem(bo);return e?JSON.parse(e):null}catch{return null}}function ip(){Ze.value={teacherName:null,availableClassrooms:[],configuredAt:null},da(),_o.value=!1}function Vn(){const e=T(()=>Ze.value.availableClassrooms.length===0),t=T(()=>Ze.value.availableClassrooms.length>1),s=T(()=>Ze.value.availableClassrooms.length===1),n=T(()=>s.value?Ze.value.availableClassrooms[0]:null),o=T(()=>Ze.value.teacherName),r=T(()=>Ze.value.availableClassrooms),l=T(()=>tn.value.showLoadPbnOption);return{appConfig:Ze,initialized:_o,uiPrefs:tn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:r,showLoadPbnOption:l,initializeFromUrl:ap,loadFromStorage:yc,saveToStorage:da,clearConfig:ip,getStorageData:lp,getCollectionFromUrl:qm,setCollectionInUrl:Qm,getLessonFromUrl:Xm,setLessonInUrl:Zm,getDealFromUrl:ep,setDealInUrl:tp,setUIPref:rp,COLLECTIONS:sp,parseUrlParams:gc,classroomIdToName:hc,mergeClassrooms:bc}}const cp="https://api.bridge-classroom.com/api",up="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",fa=O([]),Ve=O([]),wo=O(!1),So=O(null),An=O(null),Co=O(!1),dp=5*60*1e3;async function fp(e){const t=await fetch(`${cp}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":up}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function vp(e,t){try{return{...await ac(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function mp(){return ds().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function _c(e=!1){const s=Be().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=mp();if(!e&&An.value&&Date.now()-new Date(An.value).getTime()<dp&&Ve.value.length>0)return pp(n),{success:!0,cached:!0};wo.value=!0,So.value=null;let o=[];try{const a=await fp(s.id);if(fa.value=a,s.secretKey&&a.length>0){const i=a.map(d=>vp(d,s.secretKey));o=(await Promise.all(i)).filter(d=>d!==null)}}catch(a){console.error("Failed to fetch from server (will use local data):",a),n.length===0&&(So.value=a.message)}const r=new Set(o.map(a=>a.id)),l=n.filter(a=>!r.has(a.id));return Ve.value=[...o,...l],An.value=new Date().toISOString(),wo.value=!1,{success:!0,count:Ve.value.length}}function pp(e){const t=new Set(Ve.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Ve.value=[...Ve.value,...s])}async function hp(){if(Co.value)return;Be().isAuthenticated.value&&await _c(),Co.value=!0}function gp(){fa.value=[],Ve.value=[],An.value=null,Co.value=!1}function wc(){const e={};for(const t of Ve.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function kl(){const e={};for(const t of Ve.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function xl(){const e={};for(const t of Ve.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Al(e=10){return[...Ve.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Nl(){const e=new Date().toISOString().split("T")[0];return Ve.value.filter(t=>t.timestamp.startsWith(e))}function Tl(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Ve.value.filter(n=>n.timestamp>=s)}function yp(){const e=wc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,r=new Date(t[0]);for(let l=1;l<t.length;l++){const a=new Date(t[l]);if(Math.round((r-a)/(24*60*60*1e3))===1)o++,r=a;else break}return o}function va(){const e=T(()=>Ve.value.length),t=T(()=>Ve.value.filter(m=>m.correct).length),s=T(()=>Ve.value.filter(m=>!m.correct).length),n=T(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=T(()=>{const m=Nl(),g=m.filter(L=>L.correct).length,$=m.length;return{total:$,correct:g,incorrect:$-g,accuracy:$>0?Math.round(g/$*100):0}}),r=T(()=>{const m=Tl(),g=m.filter(L=>L.correct).length,$=m.length;return{total:$,correct:g,incorrect:$-g,accuracy:$>0?Math.round(g/$*100):0}}),l=T(()=>yp()),a=T(()=>kl()),i=T(()=>xl()),u=T(()=>Al(20)),d=T(()=>Ve.value.length>0),f=T(()=>wo.value),v=T(()=>So.value!==null);return{observations:fa,decryptedObservations:Ve,loading:wo,error:So,lastFetchedAt:An,initialized:Co,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:r,streak:l,skillStats:a,sessions:i,recentObservations:u,hasData:d,isLoading:f,hasError:v,initialize:hp,fetchProgress:_c,clearCache:gp,getObservationsByDate:wc,getStatsBySkill:kl,getSessions:xl,getRecentObservations:Al,getTodayObservations:Nl,getThisWeekObservations:Tl}}const bs={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},vt={NONE:"none",SILVER:"silver",GOLD:"gold"},bp=6;function _p(e){return e.slice(0,10)}function Sc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Cc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Ol=60*60*1e3;function $c(e){if(e.length===0)return bs.GREY;const t=e[e.length-1];if(!t.correct)return bs.RED;const s=Date.now()-Ol;if(e.some(a=>!a.correct&&new Date(a.timestamp).getTime()>s))return bs.YELLOW;const o=e.filter(a=>!a.correct).pop();if(!o)return bs.GREEN;const r=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-r<=Ol?bs.ORANGE:bs.GREEN}function kc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function xc(e){if(e.length===0)return vt.NONE;const t=new Set;for(const l of e)t.add(_p(l.timestamp));const s=[...t].filter(l=>kc(e,l)).sort();if(s.length<2)return vt.NONE;let n=1,o=1,r=s[0];for(let l=1;l<s.length;l++)Sc(r,s[l])>=bp&&(o++,r=s[l],o>n&&(n=o));return n>=3?vt.GOLD:n>=2?vt.SILVER:vt.NONE}function wp(e){const t=e.observations.value||[];let s=[];try{s=ds().getPendingObservations().filter(a=>a.metadata).map(a=>{const i=a.metadata;return{id:i.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:i.timestamp||a.queuedAt,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number,session_id:i.session_id,_local:!0}})}catch{}const n=new Set(t.map(r=>r.id)),o=s.filter(r=>!n.has(r.id));return[...t,...o]}function Sp(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var r;return(o.deal_subfolder||((r=o.deal)==null?void 0:r.subfolder))===t});return s.map(o=>{const r=n.filter(a=>{var i;return(a.deal_number??((i=a.deal)==null?void 0:i.deal_number))===o}).sort((a,i)=>a.timestamp.localeCompare(i.timestamp)),l=Cc(r);return{boardNumber:o,status:$c(r),achievement:xc(r),attemptCount:l.length,lastAttemptTime:r.length>0?r[r.length-1].timestamp:null}})}function Cp(e){return!e||e.length===0?{achievement:vt.NONE}:e.every(n=>n.achievement===vt.GOLD)?{achievement:vt.GOLD}:e.every(n=>n.achievement===vt.SILVER||n.achievement===vt.GOLD)?{achievement:vt.SILVER}:{achievement:vt.NONE}}const Ac="bridgeLessonBoards",Un=O($p()),ar=new Set;function $p(){try{const e=localStorage.getItem(Ac);return e?JSON.parse(e):{}}catch{return{}}}function kp(){try{localStorage.setItem(Ac,JSON.stringify(Un.value))}catch{}}function Nc(e,t){Un.value={...Un.value,[e]:t},kp()}function xp(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,r)=>o-r)}async function Ap(e){const t=Vn(),s=e.filter(n=>!Un.value[n]&&!ar.has(n));if(s.length!==0){for(const n of s)ar.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const r=n.includes("/")?n.split("/").pop():n,l=`${o.baseUrl}/${r}.pbn`;try{const a=await fetch(l);if(!a.ok)continue;const i=await a.text(),u=xp(i);if(u.length>0){Nc(n,u);break}}catch{continue}}}finally{ar.delete(n)}}))}}function Np(e){var n,o;const t=Un.value,s={};for(const r of e){const l=r.deal_subfolder||((n=r.deal)==null?void 0:n.subfolder),a=r.deal_number??((o=r.deal)==null?void 0:o.deal_number);!l||a==null||(s[l]||(s[l]={boards:new Set,lastActivity:r.timestamp}),s[l].boards.add(a),r.timestamp>s[l].lastActivity&&(s[l].lastActivity=r.timestamp))}return Object.entries(s).map(([r,l])=>{const a=t[r];if(a)return{subfolder:r,boardNumbers:a,lastActivity:l.lastActivity};const i=Math.max(...l.boards),u=[];for(let d=1;d<=i;d++)u.push(d);return{subfolder:r,boardNumbers:u,lastActivity:l.lastActivity}})}function on(){const e=Gt();function t(){return wp(e)}return{STATUS:bs,ACHIEVEMENT:vt,getObservations:t,computeBoardMastery:Sp,computeLessonAchievement:Cp,extractLessonsFromObservations:Np,saveLessonBoardNumbers:Nc,fetchMissingBoardCounts:Ap,groupIntoBoardAttempts:Cc,calculateCurrentStatus:$c,calculateAchievement:xc,hasGreenDay:kc,daysBetween:Sc}}const gn="https://api.bridge-classroom.com/api",yn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",$o=O(!1),ma=O(null),Vo=O([]),as=O({}),ko=O(!1),xo=O(null),pa=O(!1),Ao={},Tp=2*60*1e3;async function Op(){var s;const e=Be(),t=e.currentUser.value;if(!t||!t.email){$o.value=!1;return}try{const n=await fetch(`${gn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":yn}});if(!n.ok)return;const o=await n.json(),r=Array.isArray(o)?o[0]:null;if(!r)return;ma.value=r.id;const l=await fetch(`${gn}/grants?grantee_id=${r.id}`,{headers:{"x-api-key":yn}});if(!l.ok)return;const i=(await l.json()).grants||[],u=new Set(i.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const d=await fetch(`${gn}/users`,{headers:{"x-api-key":yn}});if(!d.ok)return;const v=(await d.json()).users||[],m=(s=t.email)==null?void 0:s.toLowerCase();if(Vo.value=v.filter(g=>{var $;return u.has(g.id)&&g.id!==t.id&&(($=g.email)==null?void 0:$.toLowerCase())!==m}).sort((g,$)=>`${g.first_name} ${g.last_name}`.localeCompare(`${$.first_name} ${$.last_name}`)),$o.value=!0,pa.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${gn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":yn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Tc(e){const t=as.value[e],s=Ao[e];if(t&&s&&Date.now()-s<Tp)return t;try{const n=await fetch(`${gn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":yn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=((await n.json()).observations||[]).map(l=>({id:l.id||l.observation_id,timestamp:l.timestamp,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number}));return as.value={...as.value,[e]:r},Ao[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Ep(){ko.value=!0,xo.value=null;try{await Promise.allSettled(Vo.value.map(s=>Tc(s.id)));const e=on(),t=new Set;for(const s of Object.values(as.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){xo.value=e.message,console.error("Failed to load student summaries:",e)}finally{ko.value=!1}}function Ip(e){const t=as.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=on(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const l of n){const a=s.computeBoardMastery(t,l.subfolder,l.boardNumbers);for(const i of a)o[i.status]=(o[i.status]||0)+1}let r=null;for(const l of t)(!r||l.timestamp>r)&&(r=l.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:r}}function Rp(e,t=3){const s=as.value[e]||[],n=Gt(),o={};for(const r of s){const l=r.deal_subfolder;l&&(!o[l]||r.timestamp>o[l])&&(o[l]=r.timestamp)}return Object.entries(o).sort(([,r],[,l])=>l.localeCompare(r)).slice(0,t).map(([r])=>n.formatLessonName(r))}function Dp(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),r=Math.floor(n/36e5),l=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:l<7?`${l}d ago`:s.toLocaleDateString()}function Pp(){$o.value=!1,ma.value=null,Vo.value=[],as.value={},ko.value=!1,xo.value=null,pa.value=!1;for(const e of Object.keys(Ao))delete Ao[e]}function Kn(){return{isTeacher:$o,viewerId:ma,students:Vo,studentObservations:as,loading:ko,error:xo,initialized:pa,checkTeacherStatus:Op,fetchStudentObservations:Tc,loadAllStudentSummaries:Ep,getStudentMasterySummary:Ip,getStudentRecentLessons:Rp,formatTimeSince:Dp,reset:Pp}}const Er="https://api.bridge-classroom.com/api",Ir="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Rr=O(!1),Bs=O(null),Wt=O(null),Mn=O([]),sn=O([]),ha=O("lessons"),Ko=O(!0),rn=O(!1),Wn=O([]);function Lp(e){rn.value=!0,Wn.value=e}function Bp(){rn.value=!1,Wn.value=[]}function Gn(){return rn.value?Wn.value:Mn.value}async function Oc(){const e=Be(),t=Kn(),s=e.currentUser.value;if(!s){sn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Er}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":Ir}});if(o.ok){const{grants:r}=await o.json(),l=await fetch(`${Er}/users`,{headers:{"x-api-key":Ir}});if(l.ok){const{users:a}=await l.json(),i=new Set(r.map(u=>u.grantor_id));for(const u of a)i.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}sn.value=n}async function ga(e=!1){if(rn.value)return{success:!0};const t=Be(),s=va(),n=t.currentUser.value;if(!n)return Bs.value="No authenticated user",{success:!1,error:Bs.value};Rr.value=!0,Bs.value=null;try{if(!Wt.value||Wt.value===n.id)Wt.value=n.id,await s.fetchProgress(e),Mn.value=s.decryptedObservations.value;else{const o=await fetch(`${Er}/observations?user_id=${Wt.value}&limit=10000`,{headers:{"x-api-key":Ir}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const r=await o.json();Mn.value=r.observations||[]}return{success:!0}}catch(o){return Bs.value=o.message,{success:!1,error:o.message}}finally{Rr.value=!1}}async function Up(e){Wt.value=e,await ga(!0)}const Dr=T(()=>{var n;const e=Gn(),t={};for(const o of e){const r=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[r]||(t[r]={lesson:r,displayName:Rc(r),total:0,correct:0,incorrect:0,observations:[]}),t[r].total++,o.correct?t[r].correct++:t[r].incorrect++,t[r].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,r)=>o.displayName.localeCompare(r.displayName)),s}),Pr=T(()=>{const e=Gn(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",r=sm(o),l=tm(o);t[o]||(t[o]={skillPath:o,category:r,categoryName:nm(r).name,skillName:l.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const r=n.categoryName.localeCompare(o.categoryName);return r!==0?r:n.skillName.localeCompare(o.skillName)}),s}),Ec=T(()=>Ko.value?Dr.value.filter(e=>e.total>0):Dr.value),Ic=T(()=>Ko.value?Pr.value.filter(e=>e.total>0):Pr.value);function Rc(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Mp=T(()=>ha.value==="lessons"?Ec.value:Ic.value),Fp=T(()=>sn.value.length>1),jp=T(()=>sn.value.find(e=>e.id===Wt.value)||null),Hp=T(()=>Gn().length>0),Vp=T(()=>Gn().length),Kp=T(()=>{const e=Gn();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Wp(){const t=Be().currentUser.value;t&&(Wt.value=t.id,await Oc(),await ga())}function Gp(){Mn.value=[],sn.value=[],Wt.value=null,ha.value="lessons",Ko.value=!0,Bs.value=null,rn.value=!1,Wn.value=[]}function Gt(){return{loading:Rr,error:Bs,selectedUserId:Wt,observations:Mn,accessibleUsers:sn,activeTab:ha,onlyWithObservations:Ko,useTestData:rn,testObservations:Wn,enableTestMode:Lp,disableTestMode:Bp,lessonStats:Dr,taxonStats:Pr,filteredLessonStats:Ec,filteredTaxonStats:Ic,currentStats:Mp,canViewOtherUsers:Fp,selectedUser:jp,hasData:Hp,totalObservations:Vp,overallSuccessRate:Kp,initialize:Wp,loadAccomplishments:ga,selectUser:Up,fetchAccessibleUsers:Oc,reset:Gp,formatLessonName:Rc}}const ya="https://api.bridge-classroom.com/api",Dc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",mt=O("idle"),Pc=O(null),Ls=O(null),Us=O(0),Ms=O(navigator.onLine),bn=O(!1),El=5,zp=1e3,Jp=6e4,Yp=5e3;let Ws=null;function qp(e){const t=Math.min(zp*Math.pow(2,e),Jp);return t+Math.random()*t*.25}async function Lc(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${ya}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,error:`Server error: ${n.status} - ${r}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function Bc(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(r=>({encrypted_data:r.encrypted_data,iv:r.iv,metadata:r.metadata}))},n=await fetch(`${ya}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Dc},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${r}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function zn(){var n,o;const e=Be(),t=ds();if(!navigator.onLine)return mt.value="offline",{success:!1,offline:!0};mt.value="syncing",Ls.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const r=e.currentUser.value;if(r&&!r.serverRegistered){const i=await Lc(r);if(i.success)e.updateUser(r.id,{serverRegistered:!0}),bn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(i.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),mt.value="error",Ls.value="Account already exists. Please use recovery.",bn.value=!0,s;console.warn("User registration failed:",i.error),bn.value=!0,Ls.value=`Registration failed: ${i.error}`}}const l=await t.encryptPendingObservations();l>0&&console.log(`Encrypted ${l} observations`);let a=!1;if(r!=null&&r.dataConsent){const i=t.getPendingObservations();if(i.length>0){const u=await Bc(i);if(u.success&&u.synced>0){const d=i.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var v;return(v=f.metadata)==null?void 0:v.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await Gt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(a=!0,Ls.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return bn.value||a?mt.value="error":(mt.value="idle",Pc.value=new Date().toISOString(),Us.value=0),s}catch(r){return console.error("Sync failed:",r),Ls.value=r.message,mt.value="error",s.success=!1,s}}function Lr(){Ws&&clearTimeout(Ws),Ws=setTimeout(async()=>{await zn()},Yp)}async function Uc(){return Ws&&(clearTimeout(Ws),Ws=null),await zn()}async function Mc(){if(Us.value>=El){console.log("Max retries reached, giving up"),mt.value="error";return}const e=qp(Us.value);Us.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Us.value}/${El})`),setTimeout(async()=>{const t=await zn();!t.success&&t.offline!==!0&&Mc()},e)}function Xp(){var a;const e=Be(),t=ds(),s=(a=e.currentUser)==null?void 0:a.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(i=>i.encrypted);if(o.length===0)return;const r={observations:o.map(i=>({encrypted_data:i.encrypted_data,iv:i.iv,metadata:i.metadata}))},l=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(`${ya}/observations?api_key=${Dc}`,l),console.log("Sent beacon with",o.length,"observations")}function Qp(){window.addEventListener("online",()=>{Ms.value=!0,console.log("Back online, triggering sync"),Uc()}),window.addEventListener("offline",()=>{Ms.value=!1,mt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Ms.value&&(console.log("Tab visible, triggering sync"),Lr())}),window.addEventListener("beforeunload",Xp),setInterval(()=>{document.visibilityState==="visible"&&Ms.value&&Lr()},5*60*1e3)}async function Zp(){Qp(),navigator.onLine?await zn():mt.value="offline"}function Fc(){const e=T(()=>mt.value==="syncing"),t=T(()=>mt.value==="offline"||!Ms.value),s=T(()=>mt.value==="error"),n=T(()=>ds().pendingCount.value>0);return{syncState:mt,lastSyncAt:Pc,lastError:Ls,retryCount:Us,isOnline:Ms,registrationFailed:bn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:Zp,performSync:zn,triggerSync:Lr,forceSync:Uc,retrySync:Mc,registerUserWithServer:Lc,syncObservationsToServer:Bc}}const eh={key:0,class:"minimal-hand"},th={class:"seat-label-inline"},sh={class:"seat-label"},nh={key:0,class:"suits"},oh={key:0,class:"suit-row"},rh={key:0,class:"cards clickable-cards"},ah=["onClick"],lh={key:1,class:"cards"},ih={key:2,class:"cards"},ch={key:1,class:"hidden-hand"},uh={key:2,class:"hcp"},dh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=tc,n=T(()=>Ar(t.seat)),o=T(()=>Jv(t.hand)),r=T(()=>t.hand?s.reduce((L,x)=>{var b;return L+(((b=t.hand[x])==null?void 0:b.length)||0)},0):0),l=T(()=>r.value>0&&r.value<5);function a(L){return t.hand&&t.hand[L]&&t.hand[L].length>0}function i(L){return ia[L]}function u(L){return Gv(L)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(L){return d[L]||L}function v(L){if(!t.hand||!t.hand[L])return"";const x=t.hand[L];return x.length===0?"":x.map(rr).join(" ")}const m=T(()=>t.playedCards&&t.playedCards.length>0),g=T(()=>{if(!t.playedCards)return null;const L=new Set;for(const x of t.playedCards){const b=x[0].toUpperCase(),k=x.slice(1).toUpperCase(),P={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[b];P&&L.add(`${P}:${k}`)}return L});function $(L,x){return g.value?g.value.has(`${L}:${x}`):!1}return(L,x)=>(p(),h("div",{class:re(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),h("div",eh,[c("span",th,C(e.seat),1),(p(!0),h(Z,null,ie(D(s),b=>(p(),h("span",{key:b,class:re(["suit-symbol-inline",u(b)])},C(i(b)),3))),128))])):(p(),h(Z,{key:1},[c("div",sh,C(n.value),1),!e.hidden&&e.hand?(p(),h("div",nh,[(p(!0),h(Z,null,ie(D(s),b=>(p(),h(Z,{key:b},[!l.value||a(b)?(p(),h("div",oh,[c("span",{class:re(["suit-symbol",u(b)])},C(i(b)),3),e.clickable?(p(),h("span",rh,[(p(!0),h(Z,null,ie(e.hand[b],k=>(p(),h("span",{key:k,class:re($(b,k)?"card-played":"card-clickable"),onClick:P=>!$(b,k)&&L.$emit("card-click",{suit:f(b),rank:k})},C(D(rr)(k)),11,ah))),128))])):m.value?(p(),h("span",lh,[(p(!0),h(Z,null,ie(e.hand[b],k=>(p(),h("span",{key:k,class:re({"card-played":$(b,k)})},C(D(rr)(k)),3))),128))])):(p(),h("span",ih,C(v(b)),1))])):B("",!0)],64))),128))])):e.hidden?(p(),h("div",ch,[...x[0]||(x[0]=[c("div",{class:"card-back"},null,-1)])])):B("",!0),e.showHcp&&e.hand&&!e.hidden&&!l.value?(p(),h("div",uh,C(o.value)+" HCP ",1)):B("",!0)],64))],2))}},eo=he(dh,[["__scopeId","data-v-128fc7ed"]]),fh={class:"ns-column north-row"},vh={key:0,class:"position north"},mh={key:0,class:"position west"},ph={class:"center"},hh={key:1,class:"position east"},gh={class:"ns-column south-row"},yh={key:0,class:"position south"},bh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,r,l;return p(),h("div",{class:re(["bridge-table",{compact:e.compact}])},[c("div",fh,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),h("div",vh,[fe(eo,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=a=>t.$emit("card-click",{seat:"N",...a}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),h("div",mh,[fe(eo,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=a=>t.$emit("card-click",{seat:"W",...a}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),c("div",ph,[cd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),h("div",hh,[fe(eo,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(r=e.playedCards)==null?void 0:r.E,onCardClick:s[2]||(s[2]=a=>t.$emit("card-click",{seat:"E",...a}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),c("div",gh,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),h("div",yh,[fe(eo,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(l=e.playedCards)==null?void 0:l.S,onCardClick:s[3]||(s[3]=a=>t.$emit("card-click",{seat:"S",...a}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)])],2)}}},_h=he(bh,[["__scopeId","data-v-ec6230a9"]]),wh={class:"bidding-box"},Sh={class:"bid-section"},Ch={class:"levels"},$h=["onClick"],kh={class:"strains"},xh=["disabled","onClick"],Ah=["innerHTML"],Nh={class:"special-bids"},Th=["disabled"],Oh=["disabled"],Eh={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=O(1),r=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],l=T(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),a=T(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],v=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!v)return-1;const m=v[1].toUpperCase();return f.indexOf(m==="N"?"NT":m)});function i(f){o.value=f}function u(f,v){if(!f)return!1;const g=["C","D","H","S","NT"].indexOf(v);return f>l.value||f===l.value&&g>a.value}function d(f,v){u(f,v)&&n("bid",`${f}${v}`)}return(f,v)=>(p(),h("div",wh,[c("div",Sh,[c("div",Ch,[(p(),h(Z,null,ie(7,m=>c("button",{key:m,class:re(["level-btn",{active:o.value===m}]),onClick:g=>i(m)},C(m),11,$h)),64))]),c("div",kh,[(p(),h(Z,null,ie(r,m=>c("button",{key:m.value,class:re(["strain-btn",[m.colorClass,{disabled:!u(o.value,m.value)}]]),disabled:!u(o.value,m.value),onClick:g=>d(o.value,m.value)},[c("span",{innerHTML:m.display},null,8,Ah)],10,xh)),64))])]),c("div",Nh,[c("button",{class:"special-btn pass",onClick:v[0]||(v[0]=m=>f.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:v[1]||(v[1]=m=>f.$emit("bid","X"))}," Double ",8,Th),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:v[2]||(v[2]=m=>f.$emit("bid","XX"))}," Redouble ",8,Oh)])]))}},Ih=he(Eh,[["__scopeId","data-v-38ccb98f"]]),Rh={class:"auction-table"},Dh={class:"rounds"},Ph=["innerHTML"],Lh={key:1,class:"turn-indicator"},Bh={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=T(()=>["W","N","E","S"].indexOf(t.dealer)),n=T(()=>{const u=[],d=t.bids;let f=0,v=0;for(;f<d.length||v===0&&d.length>0;){const m=[null,null,null,null],g=v===0?s.value:0;for(let $=g;$<4&&f<d.length;$++)m[$]=d[f],f++;if(m.some($=>$!==null)&&u.push(m),v++,v>20)break}if(t.currentBidIndex>=d.length){const m=u[u.length-1],g=m?m.filter($=>$!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const $=[null,null,null,null];u.push($)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function r(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function l(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function a(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function i(u){return ca(u).html}return(u,d)=>(p(),h("div",Rh,[d[0]||(d[0]=ho('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",Dh,[(p(!0),h(Z,null,ie(n.value,(f,v)=>(p(),h("div",{key:v,class:"round"},[(p(!0),h(Z,null,ie(f,(m,g)=>(p(),h("div",{key:g,class:re(["bid-cell",{"current-turn":r(v,g),"wrong-bid":l(v,g),"correct-bid":a(v,g)}])},[m?(p(),h("span",{key:0,innerHTML:i(m)},null,8,Ph)):e.showTurnIndicator&&r(v,g)?(p(),h("span",Lh,"?")):B("",!0)],2))),128))]))),128))])]))}},Uh=he(Bh,[["__scopeId","data-v-ac265db8"]]),Mh={class:"deal-info"},Fh={class:"board-number"},jh={key:0,class:"board-popup"},Hh={class:"popup-list"},Vh=["onClick"],Kh={class:"info-row"},Wh={class:"info-item"},Gh={class:"value"},zh={class:"info-item"},Jh={key:0,class:"contract-row"},Yh={class:"info-item"},qh=["innerHTML"],Xh={key:0,class:"label"},Qh={key:0,class:"info-item"},Zh=["innerHTML"],eg={key:1,class:"title"},tg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=O(!1);function r(v){n("goto",v),o.value=!1}const l=T(()=>Ar(s.dealer)),a=T(()=>Ar(s.declarer)),i=T(()=>zv(s.vulnerable)),u=T(()=>{var m;const v=(m=s.vulnerable)==null?void 0:m.toUpperCase();return v==="BOTH"||v==="ALL"?"vul-both":v==="NS"||v==="EW"?"vul-partial":"vul-none"}),d=T(()=>s.contract?ca(s.contract).html:""),f=T(()=>{if(!s.openingLead)return"";const v=s.openingLead[0],m=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},$={S:"black",H:"red",D:"red",C:"black"},L=g[v]||v;return`<span class="${$[v]||"black"}">${L}</span>${m==="T"?"10":m}`});return(v,m)=>(p(),h("div",Mh,[c("div",{class:"board-selector",onMouseenter:m[0]||(m[0]=g=>o.value=!0),onMouseleave:m[1]||(m[1]=g=>o.value=!1)},[c("div",Fh,"Board "+C(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),h("div",jh,[m[2]||(m[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",Hh,[(p(!0),h(Z,null,ie(e.totalDeals,g=>(p(),h("button",{key:g,class:re(["popup-item",{active:g-1===e.currentIndex}]),onClick:$=>r(g-1)}," Board "+C(e.dealBoardNumbers[g-1]||g),11,Vh))),128))])])):B("",!0)],32),c("div",Kh,[c("div",Wh,[m[3]||(m[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",Gh,C(l.value),1)]),c("div",zh,[m[4]||(m[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:re(["value",u.value])},C(i.value),3)])]),e.showContract&&e.contract?(p(),h("div",Jh,[c("div",Yh,[c("span",{class:"value contract",innerHTML:d.value},null,8,qh),e.declarer?(p(),h("span",Xh,"by "+C(a.value),1)):B("",!0)]),e.openingLead?(p(),h("div",Qh,[m[5]||(m[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:f.value},null,8,Zh)])):B("",!0)])):B("",!0),e.title?(p(),h("div",eg,C(e.title),1)):B("",!0)]))}},sg=he(tg,[["__scopeId","data-v-5a844c49"]]),ng={class:"feedback-header"},og={key:0,class:"icon"},rg={key:1,class:"icon"},ag={class:"title"},lg={key:0,class:"feedback-content"},ig={class:"bid-comparison"},cg={class:"bid-item your-bid"},ug=["innerHTML"],dg={class:"bid-item correct-bid"},fg=["innerHTML"],vg={key:1,class:"feedback-content"},mg={class:"bid-comparison"},pg={class:"bid-item your-bid"},hg=["innerHTML"],gg={class:"bid-item correct-bid"},yg=["innerHTML"],bg=["innerHTML"],_g={class:"actions"},wg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=T(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(r){return ca(r).html}function o(r){return Yv(r).html}return(r,l)=>e.visible?(p(),h("div",{key:0,class:re(["feedback-panel",e.type])},[c("div",ng,[e.type==="wrong"?(p(),h("span",og,"")):e.type==="correct"?(p(),h("span",rg,"")):B("",!0),c("span",ag,C(s.value),1)]),e.wrongBid?(p(),h("div",lg,[c("div",ig,[c("div",cg,[l[1]||(l[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,ug)]),c("div",dg,[l[2]||(l[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,fg)])])])):B("",!0),e.wrongCardCode?(p(),h("div",vg,[c("div",mg,[c("div",pg,[l[3]||(l[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,hg)]),c("div",gg,[l[4]||(l[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,yg)])])])):B("",!0),e.commentary?(p(),h("div",{key:2,class:"commentary",innerHTML:D(Ps)(e.commentary)},null,8,bg)):B("",!0),c("div",_g,[e.showContinue?(p(),h("button",{key:0,class:"btn continue",onClick:l[0]||(l[0]=a=>r.$emit("continue"))}," Continue ")):B("",!0)])],2)):B("",!0)}},Il=he(wg,[["__scopeId","data-v-04368462"]]),Sg={class:"welcome-screen"},Cg={class:"welcome-card"},$g={class:"welcome-header"},kg={key:0,class:"welcome-body"},xg={class:"form-group"},Ag={key:0,class:"error-message"},Ng={class:"form-group"},Tg={key:0,class:"error-message"},Og={class:"form-group"},Eg={key:0,class:"error-message"},Ig={key:0,class:"form-group"},Rg={class:"checkbox-group"},Dg=["value","checked","onChange"],Pg={key:1,class:"form-group"},Lg={class:"single-classroom"},Bg={class:"form-group consent-group"},Ug={class:"checkbox-label consent-label"},Mg={key:0,class:"consent-details"},Fg=["disabled"],jg={key:0},Hg={key:1},Vg={key:1,class:"welcome-body returning"},Kg={key:2,class:"welcome-body switcher"},Wg={class:"user-list"},Gg=["onClick"],zg={class:"user-name"},Jg={key:0,class:"user-class"},Yg={key:3,class:"welcome-body recovery-sent"},qg={class:"subtitle"},Xg={class:"recovery-info"},Qg={class:"code-entry"},Zg=["disabled"],ey={key:0},ty={key:1},sy={key:0,class:"error-message"},ny={key:4,class:"welcome-body recovery-claiming"},oy={class:"subtitle"},ry={key:0,class:"recovery-error-panel"},ay={class:"error-message"},ly={key:1,class:"loading-spinner"},iy={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=Vn(),o=Be(),r="https://api.bridge-classroom.com/api",l=O("form"),a=O(""),i=O(""),u=O(""),d=O([]),f=O(!0),v=O({firstName:"",lastName:"",email:"",classrooms:""}),m=O(!1),g=O(!1),$=O(""),L=O(""),x=O(""),b=O(""),k=O("");$t(async()=>{o.initialize(),n.initializeFromUrl();const de=new URLSearchParams(window.location.search),G=de.get("recover"),se=de.get("user_id");if(G&&se){await ce(se,G),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?l.value="returning":o.hasUsers.value?l.value="switcher":l.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,W=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ee=T(()=>a.value.trim().length>0&&i.value.trim().length>0&&u.value.trim().length>0&&P.test(u.value.trim())),K=T(()=>o.currentUser.value?o.currentUser.value.firstName:""),X=T(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function Y(){v.value={firstName:"",lastName:"",email:"",classrooms:""};let de=!0;return a.value.trim()||(v.value.firstName="First name is required",de=!1),i.value.trim()||(v.value.lastName="Last name is required",de=!1),u.value.trim()?P.test(u.value.trim())||(v.value.email="Please enter a valid email address",de=!1):(v.value.email="Email is required",de=!1),o.findUserByEmail(u.value)&&(v.value.email="This email is already registered on this device.",de=!1),de}async function me(){const de=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const G=await o.requestRecovery(de,r);return G.success?(L.value=de,b.value=G.message,l.value="recovery-sent",!1):G.message&&G.message.includes("No account found")?!0:(v.value.email=G.message||"Unable to verify email. Please try again.",!1)}catch(G){return console.error("Failed to check email on server:",G),W?v.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":v.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ce(de,G){l.value="recovery-claiming",g.value=!0,$.value="Recovering your account...",x.value="";try{const se=await o.claimRecovery(de,G,r);se.success&&se.user?s("userReady",se.user):(x.value=se.error||"Recovery failed. Please try again.",l.value="form")}catch(se){console.error("[Recovery] Exception:",se),x.value="Unable to complete recovery. Please try again.",l.value="form"}finally{g.value=!1,$.value=""}}async function we(){if(k.value.trim().length===6){g.value=!0,$.value="Verifying code...",x.value="";try{const de=await o.claimRecoveryByCode(L.value.trim(),k.value.trim(),r);de.success&&de.user?s("userReady",de.user):x.value=de.error||"Invalid code. Please check and try again."}catch(de){console.error("Recovery code claim failed:",de),x.value="Unable to connect to server. Please try again."}finally{g.value=!1,$.value=""}}}async function Ee(){if(!Y())return;if(g.value=!0,$.value="Checking account...",!await me()){g.value=!1,$.value="";return}let G=[];n.hasSingleClassroom.value?G=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(G=[...d.value]),$.value="Creating your secure encryption key...";try{const se=await o.createUser({firstName:a.value,lastName:i.value,email:u.value,classrooms:G,dataConsent:f.value,apiUrl:r});s("userReady",se)}catch(se){console.error("Failed to create user:",se),v.value.email="Failed to create account. Please try again."}finally{g.value=!1,$.value=""}}function qe(){s("userReady",o.currentUser.value)}function Ke(){l.value="switcher"}function oe(de){o.switchUser(de),s("userReady",o.currentUser.value)}function z(){a.value="",i.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,v.value={firstName:"",lastName:"",email:"",classrooms:""},l.value="form"}function te(){o.currentUser.value?l.value="returning":o.hasUsers.value&&(l.value="switcher")}function nt(de){const G=d.value.indexOf(de);G===-1?d.value.push(de):d.value.splice(G,1)}return(de,G)=>(p(),h("div",Sg,[c("div",Cg,[c("div",$g,[c("h1",null,C(X.value),1)]),l.value==="form"?(p(),h("div",kg,[G[16]||(G[16]=c("h2",null,"Welcome!",-1)),G[17]||(G[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:Xt(Ee,["prevent"]),class:"user-form"},[c("div",xg,[G[8]||(G[8]=c("label",{for:"firstName"},"First Name",-1)),He(c("input",{id:"firstName","onUpdate:modelValue":G[0]||(G[0]=se=>a.value=se),type:"text",placeholder:"Enter your first name",class:re({"has-error":v.value.firstName}),autocomplete:"given-name"},null,2),[[Kt,a.value]]),v.value.firstName?(p(),h("span",Ag,C(v.value.firstName),1)):B("",!0)]),c("div",Ng,[G[9]||(G[9]=c("label",{for:"lastName"},"Last Name",-1)),He(c("input",{id:"lastName","onUpdate:modelValue":G[1]||(G[1]=se=>i.value=se),type:"text",placeholder:"Enter your last name",class:re({"has-error":v.value.lastName}),autocomplete:"family-name"},null,2),[[Kt,i.value]]),v.value.lastName?(p(),h("span",Tg,C(v.value.lastName),1)):B("",!0)]),c("div",Og,[G[10]||(G[10]=c("label",{for:"email"},"Email Address",-1)),He(c("input",{id:"email","onUpdate:modelValue":G[2]||(G[2]=se=>u.value=se),type:"email",placeholder:"Enter your email address",class:re({"has-error":v.value.email}),autocomplete:"email"},null,2),[[Kt,u.value]]),v.value.email?(p(),h("span",Eg,C(v.value.email),1)):B("",!0),G[11]||(G[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),D(n).hasMultipleClassrooms.value?(p(),h("div",Ig,[G[12]||(G[12]=c("label",null,"Select Your Class(es)",-1)),c("div",Rg,[(p(!0),h(Z,null,ie(D(n).availableClassrooms.value,se=>(p(),h("label",{key:se.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:se.id,checked:d.value.includes(se.id),onChange:Xe=>nt(se.id)},null,40,Dg),c("span",null,C(se.name),1)]))),128))])])):D(n).hasSingleClassroom.value?(p(),h("div",Pg,[G[13]||(G[13]=c("label",null,"Class",-1)),c("div",Lg,C(D(n).singleClassroom.value.name),1)])):B("",!0),c("div",Bg,[c("label",Ug,[He(c("input",{type:"checkbox","onUpdate:modelValue":G[3]||(G[3]=se=>f.value=se)},null,512),[[oa,f.value]]),G[14]||(G[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:G[4]||(G[4]=se=>m.value=!m.value)},C(m.value?"Hide details":"What data is preserved?"),1),m.value?(p(),h("div",Mg,[...G[15]||(G[15]=[ho('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):B("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!ee.value||g.value},[g.value?(p(),h("span",jg,C($.value),1)):(p(),h("span",Hg,"Start Practicing"))],8,Fg)],32),D(o).hasUsers.value?(p(),h("button",{key:0,class:"back-link",onClick:te}," Back to user selection ")):B("",!0)])):l.value==="returning"?(p(),h("div",Vg,[c("h2",null,"Welcome back, "+C(K.value)+"!",1),G[18]||(G[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:qe}," Continue "),c("button",{class:"switch-link",onClick:Ke}," Not "+C(K.value)+"? Switch user ",1)])):l.value==="switcher"?(p(),h("div",Kg,[G[19]||(G[19]=c("h2",null,"Select User",-1)),G[20]||(G[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",Wg,[(p(!0),h(Z,null,ie(D(o).allUsers.value,se=>{var Xe;return p(),h("button",{key:se.id,class:re(["user-item",{"is-current":se.id===D(o).currentUserId.value}]),onClick:ut=>oe(se.id)},[c("span",zg,C(se.firstName)+" "+C(se.lastName),1),(Xe=se.classrooms)!=null&&Xe.length?(p(),h("span",Jg,C(se.classrooms.join(", ")),1)):B("",!0)],10,Gg)}),128))]),c("button",{class:"add-user-btn",onClick:z}," + Add New User "),D(o).currentUser.value?(p(),h("button",{key:0,class:"back-link",onClick:te}," Cancel ")):B("",!0)])):l.value==="recovery-sent"?(p(),h("div",Yg,[G[25]||(G[25]=c("h2",null,"Check Your Email",-1)),c("p",qg,[G[21]||(G[21]=ks(" We found an existing account for ",-1)),c("strong",null,C(L.value),1),G[22]||(G[22]=ks(". ",-1))]),c("div",Xg,[c("p",null,C(b.value),1),G[23]||(G[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",Qg,[G[24]||(G[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),He(c("input",{id:"recoveryCode","onUpdate:modelValue":G[5]||(G[5]=se=>k.value=se),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Hi(we,["enter"])},null,544),[[Kt,k.value]]),c("button",{class:"submit-btn",disabled:k.value.trim().length!==6||g.value,onClick:we},[g.value?(p(),h("span",ey,C($.value),1)):(p(),h("span",ty,"Restore Account"))],8,Zg),x.value?(p(),h("span",sy,C(x.value),1)):B("",!0)]),c("button",{class:"back-link",onClick:G[6]||(G[6]=se=>l.value="form")}," Use a different email ")])):l.value==="recovery-claiming"?(p(),h("div",ny,[G[27]||(G[27]=c("h2",null,"Restoring Your Account",-1)),c("p",oy,C($.value),1),x.value?(p(),h("div",ry,[c("p",ay,C(x.value),1),c("button",{class:"back-link",onClick:G[7]||(G[7]=se=>l.value="form")}," Try again ")])):(p(),h("div",ly,[...G[26]||(G[26]=[c("div",{class:"spinner"},null,-1)])]))])):B("",!0)])]))}},cy=he(iy,[["__scopeId","data-v-4e48322f"]]),ms="https://api.bridge-classroom.com/api",Ts="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ps=O([]),Os=O(null),gt=O(!1),Me=O(null);function Jn(){async function e(i){gt.value=!0,Me.value=null;try{const d=await(await fetch(`${ms}/classrooms?teacher_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Ts}})).json();return d.success?ps.value=d.classrooms:Me.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Me.value="Unable to connect to server",null}finally{gt.value=!1}}async function t(i,u,d){gt.value=!0,Me.value=null;try{const f=await fetch(`${ms}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ts},body:JSON.stringify({teacher_id:i,name:u,description:d||null})});if(!f.ok){const m=await f.text();return Me.value=m||`Server error (${f.status})`,{success:!1,error:Me.value}}const v=await f.json();return v.success?ps.value=[v.classroom,...ps.value]:Me.value=v.error||"Failed to create classroom",v}catch(f){return console.error("Failed to create classroom:",f),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{gt.value=!1}}async function s(i){gt.value=!0,Me.value=null;try{const d=await(await fetch(`${ms}/classrooms/${encodeURIComponent(i)}`,{headers:{"x-api-key":Ts}})).json();return d.success?Os.value=d.classroom:Me.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Me.value="Unable to connect to server",null}finally{gt.value=!1}}async function n(i,u){try{const f=await(await fetch(`${ms}/classrooms/${encodeURIComponent(i)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Ts}})).json();if(f.success&&Os.value){Os.value.members=Os.value.members.filter(m=>m.student_id!==u);const v=ps.value.findIndex(m=>m.id===i);v!==-1&&ps.value[v].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(i){gt.value=!0,Me.value=null;try{const u=await fetch(`${ms}/join/${encodeURIComponent(i)}`);return u.status===404?(Me.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Me.value="Unable to connect to server",null}finally{gt.value=!1}}async function r(i,u,d){gt.value=!0,Me.value=null;try{const v=await(await fetch(`${ms}/join/${encodeURIComponent(i)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ts},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return v.success||(Me.value=v.error||"Failed to join classroom"),v}catch(f){return console.error("Failed to join classroom:",f),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{gt.value=!1}}async function l(i,u){try{return await(await fetch(`${ms}/classrooms/${encodeURIComponent(i)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ts},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function a(){ps.value=[],Os.value=null,gt.value=!1,Me.value=null}return{teacherClassrooms:ps,currentClassroom:Os,loading:gt,error:Me,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:r,leaveClassroom:l,reset:a}}const uy={class:"settings-panel"},dy={class:"settings-body"},fy={class:"settings-section"},vy={class:"info-row"},my={class:"info-value"},py={class:"info-row"},hy={class:"info-value"},gy={class:"info-row"},yy={class:"info-row"},by={class:"info-value"},_y={key:1,class:"edit-form"},wy={class:"form-group"},Sy={class:"form-group"},Cy={class:"form-group"},$y={class:"checkbox-label"},ky={key:0,class:"settings-section"},xy={class:"assignment-list"},Ay={class:"assignment-header"},Ny={class:"assignment-name"},Ty={class:"assignment-progress"},Oy={class:"progress-bar"},Ey={class:"assignment-meta"},Iy={key:0},Ry={class:"assignment-list"},Dy={class:"assignment-header"},Py={class:"assignment-name"},Ly={class:"assignment-meta"},By={key:1,class:"settings-section"},Uy={class:"classroom-id"},My=["disabled","onClick"],Fy={class:"settings-section"},jy={class:"toggle-row"},Hy={class:"toggle-label"},Vy=["checked"],Ky={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Be(),o=Vn(),r=Ho(),l=Jn(),a=O(!1),i=O(""),u=O(""),d=O(!0),f=T(()=>n.currentUser.value),v=T(()=>{var X;return!f.value||!((X=f.value.classrooms)!=null&&X.length)?"No classroom assigned":f.value.classrooms.map(Y=>{const me=o.availableClassrooms.value.find(ce=>ce.id===Y);return me?me.name:Y}).join(", ")}),m=T(()=>r.getAllAssignments().filter(X=>X.completionPercent<100)),g=T(()=>r.getAllAssignments().filter(X=>X.completionPercent>=100));function $(){f.value&&(i.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,a.value=!0)}function L(){a.value=!1}function x(){f.value&&(n.updateUser(f.value.id,{firstName:i.value,lastName:u.value,dataConsent:d.value}),a.value=!1)}function b(){s("switchUser")}function k(){a.value=!1,s("close")}const P=O(null);async function W(X){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(P.value=X,(await l.leaveClassroom(X,f.value.id)).success){const me=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:me.filter(ce=>ce!==X)})}P.value=null}function ee(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function K(X){return X?new Date(X).toLocaleDateString():"N/A"}return(X,Y)=>{var me,ce,we,Ee,qe,Ke,oe;return e.visible?(p(),h("div",{key:0,class:"settings-overlay",onClick:Xt(k,["self"])},[c("div",uy,[c("div",{class:"settings-header"},[Y[5]||(Y[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:k,"aria-label":"Close"},"  ")]),c("div",dy,[c("section",fy,[Y[12]||(Y[12]=c("h3",null,"Your Profile",-1)),a.value?(p(),h("div",_y,[c("div",wy,[Y[10]||(Y[10]=c("label",{for:"editFirstName"},"First Name",-1)),He(c("input",{id:"editFirstName","onUpdate:modelValue":Y[1]||(Y[1]=z=>i.value=z),type:"text"},null,512),[[Kt,i.value]])]),c("div",Sy,[Y[11]||(Y[11]=c("label",{for:"editLastName"},"Last Name",-1)),He(c("input",{id:"editLastName","onUpdate:modelValue":Y[2]||(Y[2]=z=>u.value=z),type:"text"},null,512),[[Kt,u.value]])]),c("div",Cy,[c("label",$y,[He(c("input",{type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=z=>d.value=z)},null,512),[[oa,d.value]]),c("span",null,"Share practice results with "+C(D(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:x}," Save Changes "),c("button",{class:"secondary-btn",onClick:L}," Cancel ")])])):(p(),h(Z,{key:0},[c("div",vy,[Y[6]||(Y[6]=c("span",{class:"info-label"},"Name",-1)),c("span",my,C((me=f.value)==null?void 0:me.firstName)+" "+C((ce=f.value)==null?void 0:ce.lastName),1)]),c("div",py,[Y[7]||(Y[7]=c("span",{class:"info-label"},"Class",-1)),c("span",hy,C(v.value),1)]),c("div",gy,[Y[8]||(Y[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:re(["info-value",(we=f.value)!=null&&we.dataConsent?"enabled":"disabled"])},C((Ee=f.value)!=null&&Ee.dataConsent?"Enabled":"Disabled"),3)]),c("div",yy,[Y[9]||(Y[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",by,C(K((qe=f.value)==null?void 0:qe.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:$}," Edit Profile "),c("button",{class:"secondary-btn",onClick:b}," Switch User ")]),((Ke=f.value)==null?void 0:Ke.role)!=="teacher"&&((oe=f.value)==null?void 0:oe.role)!=="admin"?(p(),h("button",{key:0,class:"become-teacher-btn",onClick:Y[0]||(Y[0]=z=>{s("close"),s("become-teacher")})}," Become a Teacher ")):B("",!0)],64))]),m.value.length||g.value.length?(p(),h("section",ky,[Y[16]||(Y[16]=c("h3",null,"Assignments",-1)),m.value.length?(p(),h(Z,{key:0},[Y[13]||(Y[13]=c("h4",null,"Active",-1)),c("div",xy,[(p(!0),h(Z,null,ie(m.value,z=>(p(),h("div",{key:z.id,class:"assignment-item"},[c("div",Ay,[c("span",Ny,C(z.name),1),c("span",Ty,C(z.completionPercent)+"%",1)]),c("div",Oy,[c("div",{class:"progress-fill",style:us({width:`${z.completionPercent}%`})},null,4)]),c("div",Ey,[z.dueDate?(p(),h("span",Iy," Due: "+C(K(z.dueDate)),1)):B("",!0),c("span",null,C(z.completedDeals)+"/"+C(z.totalDeals)+" deals ",1)])]))),128))])],64)):B("",!0),g.value.length?(p(),h(Z,{key:1},[Y[15]||(Y[15]=c("h4",null,"Completed",-1)),c("div",Ry,[(p(!0),h(Z,null,ie(g.value,z=>(p(),h("div",{key:z.id,class:"assignment-item completed"},[c("div",Dy,[c("span",Py,C(z.name),1),Y[14]||(Y[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",Ly," Completed "+C(K(z.lastPracticedAt)),1)]))),128))])],64)):B("",!0)])):B("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(p(),h("section",By,[Y[17]||(Y[17]=c("h3",null,"My Classrooms",-1)),(p(!0),h(Z,null,ie(f.value.classrooms,z=>(p(),h("div",{key:z,class:"classroom-row"},[c("span",Uy,C(z),1),c("button",{class:"leave-btn",disabled:P.value===z,onClick:te=>W(z)},C(P.value===z?"Leaving...":"Leave"),9,My)]))),128))])):B("",!0),c("section",Fy,[Y[19]||(Y[19]=c("h3",null,"Display Options",-1)),c("div",jy,[c("label",Hy,[c("input",{type:"checkbox",checked:D(o).showLoadPbnOption.value,onChange:Y[4]||(Y[4]=z=>D(o).setUIPref("showLoadPbnOption",z.target.checked))},null,40,Vy),Y[18]||(Y[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[Y[20]||(Y[20]=c("h3",null,"Data & Privacy",-1)),Y[21]||(Y[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:ee}," Remove account from this device "),Y[22]||(Y[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):B("",!0)}}},Wy=he(Ky,[["__scopeId","data-v-57179473"]]),Gy={class:"banner-content"},zy={class:"assignment-info"},Jy={class:"assignment-title"},Yy={class:"assignment-name"},qy={class:"assignment-meta"},Xy={class:"progress-text"},Qy={class:"progress-bar"},Zy={key:0,class:"complete-badge"},eb={class:"return-text"},tb={__name:"AssignmentBanner",setup(e){const t=Ho(),s=T(()=>t.currentAssignment.value),n=T(()=>t.hasActiveAssignment.value),o=T(()=>t.assignmentProgress.value),r=T(()=>t.isAssignmentComplete.value),l=T(()=>t.inAssignmentMode.value),a=T(()=>{var $;if(!(($=s.value)!=null&&$.dueDate))return null;const v=new Date(s.value.dueDate);return Math.ceil((v-new Date)/(1e3*60*60*24))}),i=T(()=>a.value===null?null:a.value<0?"Overdue":a.value===0?"Due today":a.value===1?"Due tomorrow":`Due in ${a.value} days`),u=T(()=>a.value===null?"":a.value<0?"overdue":a.value<=1?"urgent":a.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(v,m)=>{var g,$;return n.value&&l.value?(p(),h("div",{key:0,class:re(["assignment-banner",{complete:r.value}])},[c("div",Gy,[c("div",zy,[c("div",Jy,[m[0]||(m[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",Yy,C((g=s.value)==null?void 0:g.name),1)]),c("div",qy,[c("span",Xy,C(o.value.completed)+" of "+C(o.value.total)+" deals ("+C(o.value.percent)+"%) ",1),i.value?(p(),h("span",{key:0,class:re(["due-text",u.value])},C(i.value),3)):B("",!0)])]),c("div",Qy,[c("div",{class:re(["progress-fill",{complete:r.value}]),style:us({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),r.value?(p(),h("div",Zy," Complete! ")):B("",!0)],2)):s.value&&!l.value?(p(),h("div",{key:1,class:"return-banner",onClick:f},[m[1]||(m[1]=c("span",{class:"return-icon"},"",-1)),c("span",eb," Return to assignment: "+C(($=s.value)==null?void 0:$.name)+" ("+C(o.value.percent)+"% complete) ",1)])):B("",!0)}}},sb=he(tb,[["__scopeId","data-v-a4095a6a"]]),nb={key:0,class:"status-content"},ob={key:1,class:"status-content offline"},rb={key:0,class:"badge"},ab={key:2,class:"status-content error"},lb={class:"status-text"},ib={key:0,class:"badge"},cb={key:3,class:"status-content pending"},ub={class:"status-text"},db={key:4,class:"status-content synced"},fb={__name:"SyncStatus",setup(e){const t=Fc(),s=ds(),n=T(()=>s.pendingCount.value),o=T(()=>t.registrationFailed.value?"Not registered":"Sync failed"),r=T(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function l(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function a(){t.retrySync()}return(i,u)=>(p(),h("div",{class:re(["sync-status",r.value]),onClick:l},[D(t).isSyncing.value?(p(),h("div",nb,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):D(t).isOffline.value?(p(),h("div",ob,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),h("span",rb,C(n.value),1)):B("",!0)])):D(t).hasError.value?(p(),h("div",ab,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",lb,C(o.value),1),n.value>0?(p(),h("span",ib,C(n.value),1)):B("",!0),c("button",{class:"retry-btn",onClick:Xt(a,["stop"])},"Retry")])):n.value>0?(p(),h("div",cb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",ub,C(n.value)+" pending",1)])):(p(),h("div",db,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},vb=he(fb,[["__scopeId","data-v-8457149a"]]),mb={class:"progress-dashboard"},pb={class:"dashboard-header"},hb={key:0,class:"loading"},gb={key:1,class:"error-state"},yb={key:2,class:"empty-state"},bb={key:3,class:"dashboard-content"},_b={class:"day-header"},wb={class:"day-date"},Sb={class:"day-summary"},Cb={class:"day-lessons"},$b={class:"day-lesson-name"},kb={class:"day-lesson-counts"},xb={key:0,class:"count count-correct"},Ab={key:1,class:"count count-incorrect"},Nb={class:"observation-total"},Tb={class:"dashboard-actions"},Ob={__name:"ProgressDashboard",emits:["close"],setup(e,{emit:t}){const s=va(),n=Gt();$t(async()=>{await s.fetchProgress()});async function o(){await s.fetchProgress(!0)}const r=T(()=>{const i=s.getObservationsByDate();return Object.keys(i).sort().reverse().slice(0,10).map(d=>{var $,L;const f=i[d],v={};for(const x of f){const b=x.deal_subfolder||(($=x.deal)==null?void 0:$.subfolder),k=x.deal_number??((L=x.deal)==null?void 0:L.deal_number);!b||k==null||(v[b]||(v[b]={}),v[b][k]||(v[b][k]=[]),v[b][k].push(x))}const m=Object.entries(v).map(([x,b])=>{let k=0,P=0;for(const W of Object.values(b))W.every(K=>K.correct)?k++:P++;return{subfolder:x,correctCount:k,incorrectCount:P}}).sort((x,b)=>l(x.subfolder).localeCompare(l(b.subfolder))),g=m.reduce((x,b)=>x+b.correctCount+b.incorrectCount,0);return{date:d,lessons:m,totalBoards:g}})});function l(i){return n.formatLessonName(i)}function a(i){const u=new Date(i+"T00:00:00"),d=new Date,f=new Date(d);f.setDate(f.getDate()-1);const v=d.toISOString().split("T")[0],m=f.toISOString().split("T")[0];return i===v?"Today":i===m?"Yesterday":u.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}return(i,u)=>(p(),h("div",mb,[c("header",pb,[u[3]||(u[3]=c("h2",null,"Your Progress",-1)),c("button",{class:"close-btn",onClick:u[0]||(u[0]=d=>i.$emit("close"))},"")]),D(s).isLoading.value?(p(),h("div",hb,[...u[4]||(u[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):D(s).hasError.value?(p(),h("div",gb,[c("p",null,"Failed to load progress: "+C(D(s).error.value),1),c("button",{onClick:o},"Try Again")])):D(s).hasData.value?(p(),h("div",bb,[(p(!0),h(Z,null,ie(r.value,d=>(p(),h("div",{key:d.date,class:"day-card"},[c("div",_b,[c("span",wb,C(a(d.date)),1),c("span",Sb,C(d.totalBoards)+" board"+C(d.totalBoards!==1?"s":"")+" practiced",1)]),c("div",Cb,[(p(!0),h(Z,null,ie(d.lessons,f=>(p(),h("div",{key:f.subfolder,class:"day-lesson-row"},[c("span",$b,C(l(f.subfolder)),1),c("div",kb,[f.correctCount?(p(),h("span",xb,C(f.correctCount),1)):B("",!0),f.incorrectCount?(p(),h("span",Ab,C(f.incorrectCount),1)):B("",!0)])]))),128))])]))),128)),c("div",Nb,C(D(s).totalObservations.value)+" observations",1),c("div",Tb,[c("button",{class:"secondary-btn",onClick:o}," Refresh Data "),c("button",{class:"primary-btn",onClick:u[2]||(u[2]=d=>i.$emit("close"))}," Continue Practicing ")])])):(p(),h("div",yb,[u[5]||(u[5]=c("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=c("p",null,"Complete some practice deals to see your progress here!",-1)),c("button",{class:"primary-btn",onClick:u[1]||(u[1]=d=>i.$emit("close"))},"Start Practicing")]))]))}},Eb=he(Ob,[["__scopeId","data-v-c70ddcce"]]),Ib="test-user-mastery",Rb="test-classroom",Db="Negative_Double",Pb="competitive_bidding/negative_double";let Br=0;function je({boardNumber:e,correct:t,timestamp:s}){return Br++,{id:`mastery-test-${Br}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Ib,skill_path:Pb,correct:t,deal_subfolder:Db,deal_number:e,classroom:Rb}}function lt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function to(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Lb(){Br=0;const e=[];e.push(je({boardNumber:2,correct:!0,timestamp:lt(5)}),je({boardNumber:2,correct:!1,timestamp:lt(1)})),e.push(je({boardNumber:3,correct:!1,timestamp:to(30)}),je({boardNumber:3,correct:!0,timestamp:to(20)})),e.push(je({boardNumber:4,correct:!1,timestamp:to(90)}),je({boardNumber:4,correct:!0,timestamp:to(60)})),e.push(je({boardNumber:5,correct:!1,timestamp:lt(10)}),je({boardNumber:5,correct:!0,timestamp:lt(2)})),e.push(je({boardNumber:6,correct:!0,timestamp:lt(14)}),je({boardNumber:6,correct:!0,timestamp:lt(7)})),e.push(je({boardNumber:7,correct:!0,timestamp:lt(21)}),je({boardNumber:7,correct:!0,timestamp:lt(14)}),je({boardNumber:7,correct:!0,timestamp:lt(7)})),e.push(je({boardNumber:8,correct:!0,timestamp:lt(28)}),je({boardNumber:8,correct:!0,timestamp:lt(21)}),je({boardNumber:8,correct:!0,timestamp:lt(14)}),je({boardNumber:8,correct:!1,timestamp:lt(1)}));const t=[1,2,3,4,5].map(s=>({...je({boardNumber:s,correct:!0,timestamp:lt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Bb=["onClick","title"],Ub={key:0,class:"medal gold-medal"},Mb={key:1,class:"medal silver-medal"},Fb={class:"board-num"},jb={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=on(),r=T(()=>{const a=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const i=a.find(u=>u.boardNumber===s.forceRedBoard);i&&(i.status="red")}return a});function l(a){const i={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${a.boardNumber}: ${i[a.status]}${u[a.achievement]}`}return(a,i)=>e.boardNumbers.length>0?(p(),h("div",{key:0,class:re(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),h("button",{key:0,class:"intro-btn",onClick:i[0]||(i[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):B("",!0),(p(!0),h(Z,null,ie(r.value,(u,d)=>(p(),h("div",{key:u.boardNumber,class:re(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:l(u)},[u.achievement==="gold"?(p(),h("span",Ub,"")):u.achievement==="silver"?(p(),h("span",Mb,"")):B("",!0),c("span",Fb,C(u.boardNumber),1)],10,Bb))),128))],2)):B("",!0)}},jc=he(jb,[["__scopeId","data-v-820a0f0c"]]),Hb={class:"accomplishments-view"},Vb={class:"view-header"},Kb={key:0,class:"user-selector"},Wb=["value"],Gb=["value"],zb={key:1,class:"loading-state"},Jb={key:2,class:"error-state"},Yb={key:3,class:"empty-state"},qb={key:4,class:"view-content"},Xb={class:"controls-row"},Qb={class:"tabs"},Zb={key:0,class:"tab-content"},e_={key:0,class:"no-data"},t_={key:1,class:"lesson-list"},s_={class:"lesson-header"},n_={class:"lesson-name"},o_={key:1,class:"tab-content"},r_={key:0,class:"no-data"},a_={key:1,class:"taxon-list"},l_={class:"taxon-header"},i_={class:"taxon-category"},c_={class:"taxon-name"},u_={class:"taxon-counts"},d_={class:"taxon-stat correct"},f_={class:"taxon-stat incorrect"},v_={class:"taxon-stat total"},m_={class:"view-actions"},p_={key:5,class:"test-mode-banner"},h_={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=Gt(),o=on(),l=new URLSearchParams(window.location.search).get("test");$t(async()=>{l==="mastery"||l==="accomplishments"?n.enableTestMode(Lb()):await n.initialize()});async function a(){await n.loadAccomplishments(!0)}async function i(v){await n.selectUser(v)}function u(v,m){s("navigate-to-deal",{subfolder:v,dealNumber:m})}const d=T(()=>{const v=o.getObservations();return o.extractLessonsFromObservations(v).map(g=>{const $=o.computeBoardMastery(v,g.subfolder,g.boardNumbers),L=o.computeLessonAchievement($);return{...g,achievement:L.achievement}}).sort((g,$)=>f(g.subfolder).localeCompare(f($.subfolder)))});ct(d,v=>{o.fetchMissingBoardCounts(v.map(m=>m.subfolder))},{immediate:!0});function f(v){return n.formatLessonName(v)}return(v,m)=>(p(),h("div",Hb,[c("header",Vb,[m[6]||(m[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:m[0]||(m[0]=g=>v.$emit("close"))},"")]),D(n).canViewOtherUsers.value?(p(),h("div",Kb,[m[7]||(m[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:D(n).selectedUserId.value,onChange:m[1]||(m[1]=g=>i(g.target.value))},[(p(!0),h(Z,null,ie(D(n).accessibleUsers.value,g=>(p(),h("option",{key:g.id,value:g.id},C(g.name)+C(g.isSelf?" (You)":""),9,Gb))),128))],40,Wb)])):B("",!0),D(n).loading.value?(p(),h("div",zb,[...m[8]||(m[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):D(n).error.value?(p(),h("div",Jb,[c("p",null,"Failed to load: "+C(D(n).error.value),1),c("button",{onClick:a},"Try Again")])):D(n).hasData.value?(p(),h("div",qb,[c("div",Xb,[c("div",Qb,[c("button",{class:re(["tab-btn",{active:D(n).activeTab.value==="lessons"}]),onClick:m[3]||(m[3]=g=>D(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:re(["tab-btn",{active:D(n).activeTab.value==="taxons"}]),onClick:m[4]||(m[4]=g=>D(n).activeTab.value="taxons")}," Taxons ",2)])]),D(n).activeTab.value==="lessons"?(p(),h("div",Zb,[d.value.length===0?(p(),h("div",e_," No lesson data available yet. ")):(p(),h("div",t_,[(p(!0),h(Z,null,ie(d.value,g=>(p(),h("div",{key:g.subfolder,class:"lesson-row"},[c("div",s_,[c("span",n_,C(f(g.subfolder)),1),g.achievement!=="none"?(p(),h("span",{key:0,class:re(["achievement-badge",g.achievement])},"  "+C(g.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),fe(jc,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:$=>u(g.subfolder,g.boardNumbers[$])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):B("",!0),D(n).activeTab.value==="taxons"?(p(),h("div",o_,[D(n).filteredTaxonStats.value.length===0?(p(),h("div",r_," No skill data available yet. ")):(p(),h("div",a_,[(p(!0),h(Z,null,ie(D(n).filteredTaxonStats.value,g=>(p(),h("div",{key:g.skillPath,class:"taxon-card"},[c("div",l_,[c("span",i_,C(g.categoryName),1),c("span",c_,C(g.skillName),1)]),c("div",u_,[c("span",d_,C(g.correct),1),c("span",f_,C(g.incorrect),1),c("span",v_,C(g.total)+" total",1)])]))),128))]))])):B("",!0),c("div",m_,[c("button",{class:"secondary-btn",onClick:a}," Refresh "),c("button",{class:"primary-btn",onClick:m[5]||(m[5]=g=>v.$emit("close"))}," Done ")])])):(p(),h("div",Yb,[m[9]||(m[9]=c("h3",null,"No Practice Data Yet",-1)),m[10]||(m[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:m[2]||(m[2]=g=>v.$emit("close"))},"Start Practicing")])),D(n).useTestData.value?(p(),h("div",p_," Test Mode - Using Generated Data ")):B("",!0)]))}},g_=he(h_,[["__scopeId","data-v-38e59c14"]]),Hc="bridge-classroom-anon-mode",y_="BridgeClassroom-Anon",lr=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Rl=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function b_(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function __(e,t){const s=`${y_}:${e} ${t}`,n=b_(s),o=Number(n%BigInt(lr.length)),r=Number(n/BigInt(lr.length)%BigInt(Rl.length));return{firstName:lr[o],lastName:Rl[r]}}const fn=O(localStorage.getItem(Hc)==="true");function w_(){function e(){fn.value=!fn.value,localStorage.setItem(Hc,fn.value.toString())}function t(o){return fn.value?__(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:r,lastName:l}=t(o);return`${r} ${l}`}function n(o){const{firstName:r,lastName:l}=t(o),a=(r==null?void 0:r.charAt(0))||"",i=(l==null?void 0:l.charAt(0))||"";return(a+i).toUpperCase()||"?"}return{isAnonymized:fn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const S_={class:"teacher-student-list"},C_={class:"teacher-header"},$_={class:"header-actions"},k_=["value"],x_={key:0,class:"loading-state"},A_={key:1,class:"error-state"},N_={key:2,class:"empty-state"},T_={key:3,class:"empty-state"},O_={key:4,class:"student-table-wrap"},E_={class:"student-table"},I_=["onClick"],R_={class:"col-name"},D_={class:"student-name-cell"},P_={class:"avatar"},L_={class:"col-mastery"},B_={class:"mastery-pills"},U_={key:0,class:"pill pill-green"},M_={key:1,class:"pill pill-orange"},F_={key:2,class:"pill pill-yellow"},j_={key:3,class:"pill pill-red"},H_={key:4,class:"no-data-label"},V_={class:"col-active"},K_={class:"col-lessons"},W_={class:"recent-lessons"},G_={key:0,class:"no-data-label"},z_={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=Kn(),n=Jn(),o=Be(),r=w_(),l=O("all"),a=O({});$t(async()=>{await s.loadAllStudentSummaries(),await i()});async function i(){const x=o.currentUser.value;if(!x)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(x.id);const b={};await Promise.all(n.teacherClassrooms.value.map(async k=>{const P=await n.fetchClassroomDetail(k.id);P!=null&&P.success&&(b[k.id]=new Set(P.classroom.members.map(W=>W.student_id)))})),a.value=b}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await i()}const d=T(()=>{const x=new Set;for(const b of Object.values(a.value))for(const k of b)x.add(k);return x}),f=T(()=>{const x=s.students.value;if(l.value==="all")return x;if(l.value==="none")return x.filter(k=>!d.value.has(k.id));const b=a.value[l.value];return b?x.filter(k=>b.has(k.id)):x}),v=T(()=>[...f.value].sort((x,b)=>{var W,ee;const k=((W=m.value[x.id])==null?void 0:W.lastObservationTime)||"",P=((ee=m.value[b.id])==null?void 0:ee.lastObservationTime)||"";return P!==k?P.localeCompare(k):$(x).localeCompare($(b))})),m=T(()=>{const x={};for(const b of s.students.value)x[b.id]=s.getStudentMasterySummary(b.id);return x}),g=T(()=>{const x={};for(const b of s.students.value)x[b.id]=s.getStudentRecentLessons(b.id);return x});function $(x){return r.displayFullName(x)}function L(x){return r.displayInitials(x)}return(x,b)=>(p(),h("div",S_,[c("header",C_,[b[5]||(b[5]=c("h2",null,"My Students",-1)),c("div",$_,[D(n).teacherClassrooms.value.length?He((p(),h("select",{key:0,"onUpdate:modelValue":b[0]||(b[0]=k=>l.value=k),class:"filter-select"},[b[3]||(b[3]=c("option",{value:"all"},"All Students",-1)),(p(!0),h(Z,null,ie(D(n).teacherClassrooms.value,k=>(p(),h("option",{key:k.id,value:k.id},C(k.name),9,k_))),128)),b[4]||(b[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[lo,l.value]]):B("",!0),c("button",{class:re(["anon-btn",{active:D(r).isAnonymized.value}]),onClick:b[1]||(b[1]=k=>D(r).toggleAnonymize())},C(D(r).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:b[2]||(b[2]=k=>x.$emit("close"))},"Back")])]),D(s).loading.value?(p(),h("div",x_,[...b[6]||(b[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):D(s).error.value?(p(),h("div",A_,[c("p",null,"Failed to load: "+C(D(s).error.value),1),c("button",{onClick:u},"Try Again")])):D(s).students.value.length===0?(p(),h("div",N_,[...b[7]||(b[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):v.value.length===0?(p(),h("div",T_,[...b[8]||(b[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(p(),h("div",O_,[c("table",E_,[b[9]||(b[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(v.value,k=>{var P,W,ee,K,X,Y,me;return p(),h("tr",{key:k.id,class:"student-row",onClick:ce=>x.$emit("select-student",k.id,$(k))},[c("td",R_,[c("div",D_,[c("div",P_,C(L(k)),1),c("span",null,C($(k)),1)])]),c("td",L_,[c("div",B_,[(P=m.value[k.id])!=null&&P.green?(p(),h("span",U_,C(m.value[k.id].green),1)):B("",!0),(W=m.value[k.id])!=null&&W.orange?(p(),h("span",M_,C(m.value[k.id].orange),1)):B("",!0),(ee=m.value[k.id])!=null&&ee.yellow?(p(),h("span",F_,C(m.value[k.id].yellow),1)):B("",!0),(K=m.value[k.id])!=null&&K.red?(p(),h("span",j_,C(m.value[k.id].red),1)):B("",!0),(X=m.value[k.id])!=null&&X.total?B("",!0):(p(),h("span",H_,"No data"))])]),c("td",V_,C(D(s).formatTimeSince((Y=m.value[k.id])==null?void 0:Y.lastObservationTime)),1),c("td",K_,[c("div",W_,[(p(!0),h(Z,null,ie(g.value[k.id],(ce,we)=>(p(),h("span",{key:we,class:"lesson-tag"},C(ce),1))),128)),(me=g.value[k.id])!=null&&me.length?B("",!0):(p(),h("span",G_,"-"))])])],8,I_)}),128))])])]))]))}},J_=he(z_,[["__scopeId","data-v-dd6d8e66"]]),Y_={class:"teacher-student-detail"},q_={class:"detail-header"},X_={class:"student-info"},Q_={class:"avatar"},Z_={class:"last-active"},e1={key:0,class:"loading-state"},t1={key:1,class:"detail-content"},s1={key:0,class:"stats-row"},n1={class:"stat stat-green"},o1={key:0,class:"stat stat-orange"},r1={key:1,class:"stat stat-yellow"},a1={key:2,class:"stat stat-red"},l1={key:3,class:"stat stat-grey"},i1={class:"mastery-section"},c1={key:0,class:"no-data"},u1={key:1,class:"lesson-list"},d1={class:"lesson-header"},f1=["onClick"],v1={class:"mastery-strip"},m1=["title","onClick"],p1={key:0,class:"medal gold-medal"},h1={key:1,class:"medal silver-medal"},g1={class:"board-num"},y1={class:"progress-section"},b1={key:0,class:"no-data"},_1={key:1},w1={class:"day-header"},S1={class:"day-date"},C1={class:"day-summary"},$1={class:"day-lessons"},k1=["onClick"],x1={class:"day-lesson-counts"},A1={key:0,class:"count count-green"},N1={key:1,class:"count count-yellow"},T1={key:2,class:"count count-orange"},O1={key:3,class:"count count-red"},E1={class:"observation-total"},I1={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=Kn(),r=on(),l=Gt(),a=O(!1),i=T(()=>s.studentName.split(" ").map(k=>k[0]||"").join("").toUpperCase());$t(async()=>{o.studentObservations.value[s.studentId]||(a.value=!0,await o.fetchStudentObservations(s.studentId),a.value=!1)});const u=T(()=>o.studentObservations.value[s.studentId]||[]),d=T(()=>o.getStudentMasterySummary(s.studentId)),f=T(()=>o.formatTimeSince(d.value.lastObservationTime)),v=T(()=>{const b=u.value;return b.length===0?[]:r.extractLessonsFromObservations(b).map(P=>{const W=r.computeBoardMastery(b,P.subfolder,P.boardNumbers),ee=r.computeLessonAchievement(W);return{...P,boardMastery:W,achievement:ee.achievement}}).sort((P,W)=>g(P.subfolder).localeCompare(g(W.subfolder)))});ct(v,b=>{r.fetchMissingBoardCounts(b.map(k=>k.subfolder))},{immediate:!0});const m=T(()=>{const b=u.value;if(b.length===0)return[];const k={};for(const W of b){const ee=$(W.timestamp);k[ee]||(k[ee]=[]),k[ee].push(W)}return Object.keys(k).sort().reverse().slice(0,10).map(W=>{const ee=k[W],K={};for(const me of ee){const ce=me.deal_subfolder,we=me.deal_number;!ce||we==null||(K[ce]||(K[ce]={}),K[ce][we]||(K[ce][we]=[]),K[ce][we].push(me))}const X=Object.entries(K).map(([me,ce])=>{const we={green:0,yellow:0,orange:0,red:0};for(const[Ee,qe]of Object.entries(ce)){const Ke=b.filter(z=>z.deal_subfolder===me&&z.deal_number===Number(Ee)).sort((z,te)=>z.timestamp.localeCompare(te.timestamp)),oe=r.calculateCurrentStatus(Ke);we[oe]!==void 0?we[oe]++:we.green++}return{subfolder:me,...we}}).sort((me,ce)=>g(me.subfolder).localeCompare(g(ce.subfolder))),Y=X.reduce((me,ce)=>me+ce.green+ce.yellow+ce.orange+ce.red,0);return{date:W,lessons:X,totalBoards:Y}})});function g(b){return l.formatLessonName(b)}function $(b){const k=new Date(b),P=k.getFullYear(),W=String(k.getMonth()+1).padStart(2,"0"),ee=String(k.getDate()).padStart(2,"0");return`${P}-${W}-${ee}`}function L(b){const k=new Date(b+"T00:00:00"),P=new Date,W=$(P),ee=new Date(P);ee.setDate(ee.getDate()-1);const K=$(ee);return b===W?"Today":b===K?"Yesterday":k.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function x(b){const k={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${b.boardNumber}: ${k[b.status]}`}return(b,k)=>(p(),h("div",Y_,[c("header",q_,[c("button",{class:"back-btn",onClick:k[0]||(k[0]=P=>b.$emit("back"))}," Students"),c("div",X_,[c("div",Q_,C(i.value),1),c("div",null,[c("h2",null,C(e.studentName),1),c("span",Z_,"Last active: "+C(f.value),1)])])]),a.value?(p(),h("div",e1,[...k[1]||(k[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(p(),h("div",t1,[d.value.total>0?(p(),h("div",s1,[c("div",n1,C(d.value.green)+" Green",1),d.value.orange?(p(),h("div",o1,C(d.value.orange)+" Orange",1)):B("",!0),d.value.yellow?(p(),h("div",r1,C(d.value.yellow)+" Yellow",1)):B("",!0),d.value.red?(p(),h("div",a1,C(d.value.red)+" Red",1)):B("",!0),d.value.grey?(p(),h("div",l1,C(d.value.grey)+" Grey",1)):B("",!0)])):B("",!0),c("section",i1,[k[2]||(k[2]=c("h3",null,"Lesson Mastery",-1)),v.value.length===0?(p(),h("div",c1," No lesson data available yet. ")):(p(),h("div",u1,[(p(!0),h(Z,null,ie(v.value,P=>(p(),h("div",{key:P.subfolder,class:"lesson-row"},[c("div",d1,[c("button",{class:"lesson-name lesson-link",onClick:W=>n("navigate-to-lesson",P.subfolder)},C(g(P.subfolder)),9,f1),P.achievement!=="none"?(p(),h("span",{key:0,class:re(["achievement-badge",P.achievement])},"  "+C(P.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),c("div",v1,[(p(!0),h(Z,null,ie(P.boardMastery,W=>(p(),h("div",{key:W.boardNumber,class:re(["board-circle board-clickable","status-"+W.status]),title:x(W),onClick:ee=>n("navigate-to-lesson",P.subfolder,W.boardNumber)},[W.achievement==="gold"?(p(),h("span",p1,"")):W.achievement==="silver"?(p(),h("span",h1,"")):B("",!0),c("span",g1,C(W.boardNumber),1)],10,m1))),128))])]))),128))]))]),c("section",y1,[k[3]||(k[3]=c("h3",null,"Recent Activity",-1)),m.value.length===0?(p(),h("div",b1," No activity recorded yet. ")):(p(),h("div",_1,[(p(!0),h(Z,null,ie(m.value,P=>(p(),h("div",{key:P.date,class:"day-card"},[c("div",w1,[c("span",S1,C(L(P.date)),1),c("span",C1,C(P.totalBoards)+" board"+C(P.totalBoards!==1?"s":""),1)]),c("div",$1,[(p(!0),h(Z,null,ie(P.lessons,W=>(p(),h("div",{key:W.subfolder,class:"day-lesson-row"},[c("button",{class:"day-lesson-name lesson-link",onClick:ee=>n("navigate-to-lesson",W.subfolder)},C(g(W.subfolder)),9,k1),c("div",x1,[W.green?(p(),h("span",A1,C(W.green),1)):B("",!0),W.yellow?(p(),h("span",N1,C(W.yellow),1)):B("",!0),W.orange?(p(),h("span",T1,C(W.orange),1)):B("",!0),W.red?(p(),h("span",O1,C(W.red),1)):B("",!0)])]))),128))])]))),128))]))]),c("div",E1,C(u.value.length)+" observations",1)]))]))}},R1=he(I1,[["__scopeId","data-v-356ee2ef"]]),D1={key:0,class:"lesson-browser-loading"},P1={key:1,class:"lesson-browser-error"},L1={class:"lesson-browser"},B1={class:"browser-header"},U1={class:"browser-content"},M1=["onClick"],F1={class:"expand-icon"},j1={class:"category-name"},H1={class:"category-count"},V1={key:0,class:"lesson-list"},K1=["onClick"],W1={class:"lesson-name"},G1={class:"lesson-description"},z1={key:0,class:"error-message"},J1={key:3,class:"lesson-browser-inline"},Y1={class:"browser-content-inline"},q1=["onClick"],X1={class:"expand-icon"},Q1={class:"category-name"},Z1={class:"category-count"},e0={key:0,class:"lesson-list"},t0=["onClick"],s0={class:"lesson-name"},n0={class:"lesson-description"},o0={key:0,class:"error-message-inline"},r0={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=O(null),r=O(null),l=O(!1),a=O([]),i=O(null),u=O(null);ct(()=>[s.visible,s.collection],([g,$])=>{g&&$&&!o.value&&d()},{immediate:!0});async function d(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){r.value="No collection specified";return}l.value=!0,r.value=null;try{const $=await fetch(s.collection.tocUrl);if(!$.ok)throw new Error(`Failed to load: ${$.statusText}`);o.value=await $.json()}catch($){console.error("Error fetching TOC:",$),r.value=`Could not load lesson catalog. ${$.message}`}finally{l.value=!1}}function f(g){const $=a.value.indexOf(g);$>=0?a.value.splice($,1):a.value.push(g)}function v(g){return g.includes("/")?g.split("/").pop():g}async function m(g,$){var L;u.value=null,i.value=g.id;try{const x=((L=s.collection)==null?void 0:L.baseUrl)||"",b=v(g.id),k=`${x}/${b}.pbn`,P=await fetch(k);if(!P.ok)throw new Error(`Failed to load lesson: ${P.statusText}`);const W=await P.text();n("load",{subfolder:g.id,name:g.name,category:$.name,content:W}),s.inline||n("close")}catch(x){console.error("Error loading lesson:",x),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{i.value=null}}return(g,$)=>e.visible&&l.value?(p(),h("div",D1,[...$[2]||($[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&r.value?(p(),h("div",P1,[c("p",null,C(r.value),1),c("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:$[1]||($[1]=Xt(L=>g.$emit("close"),["self"]))},[c("div",L1,[c("div",B1,[c("h2",null,C(o.value.name),1),c("button",{class:"close-btn",onClick:$[0]||($[0]=L=>g.$emit("close"))},"")]),c("div",U1,[(p(!0),h(Z,null,ie(o.value.categories,L=>(p(),h("div",{key:L.id,class:"category-section"},[c("button",{class:re(["category-header",{expanded:a.value.includes(L.id)}]),onClick:x=>f(L.id)},[c("span",F1,C(a.value.includes(L.id)?"":""),1),c("span",j1,C(L.name),1),c("span",H1,C(L.lessons.length)+" lessons",1)],10,M1),a.value.includes(L.id)?(p(),h("div",V1,[(p(!0),h(Z,null,ie(L.lessons,x=>(p(),h("button",{key:x.id,class:re(["lesson-item",{loading:i.value===x.id}]),onClick:b=>m(x,L)},[c("span",W1,C(x.name),1),c("span",G1,C(x.description),1)],10,K1))),128))])):B("",!0)]))),128))]),u.value?(p(),h("div",z1,C(u.value),1)):B("",!0)])])):e.visible&&e.inline&&o.value?(p(),h("div",J1,[c("div",Y1,[(p(!0),h(Z,null,ie(o.value.categories,L=>(p(),h("div",{key:L.id,class:"category-section"},[c("button",{class:re(["category-header",{expanded:a.value.includes(L.id)}]),onClick:x=>f(L.id)},[c("span",X1,C(a.value.includes(L.id)?"":""),1),c("span",Q1,C(L.name),1),c("span",Z1,C(L.lessons.length)+" lessons",1)],10,q1),a.value.includes(L.id)?(p(),h("div",e0,[(p(!0),h(Z,null,ie(L.lessons,x=>(p(),h("button",{key:x.id,class:re(["lesson-item",{loading:i.value===x.id}]),onClick:b=>m(x,L)},[c("span",s0,C(x.name),1),c("span",n0,C(x.description),1)],10,t0))),128))])):B("",!0)]))),128))]),u.value?(p(),h("div",o0,C(u.value),1)):B("",!0)])):B("",!0)}},a0=he(r0,[["__scopeId","data-v-384a9c63"]]),l0={class:"viewer-controls"},i0={class:"viewer-body"},c0={key:0,class:"interaction-overlay"},u0={key:1,class:"viewer-loading"},d0={key:2,class:"viewer-error"},f0=["src"],v0={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Lt({x:80,y:80}),n=Lt({w:550,h:700}),o=O(!1),r=Lt({x:0,y:0}),l=O(null),a=O(!1),i=O(null),u=T(()=>l.value?l.value+"#navpanes=0&toolbar=0":null);async function d(b){if(f(),!!b){a.value=!0,i.value=null;try{const k=await fetch(b);if(!k.ok)throw new Error("Failed to load PDF");const P=await k.blob(),W=new Blob([P],{type:"application/pdf"});l.value=URL.createObjectURL(W)}catch(k){i.value="Could not load PDF",console.error("Failed to fetch intro PDF:",k)}finally{a.value=!1}}}function f(){l.value&&(URL.revokeObjectURL(l.value),l.value=null)}function v(){l.value&&window.open(l.value,"_blank")}ct(()=>[t.visible,t.url],([b,k])=>{b&&k?d(k):b||f()},{immediate:!0}),hi(f);function m(b){b.target.closest("button")||(o.value=!0,r.x=b.clientX-s.x,r.y=b.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",x))}function g(b){s.x=Math.max(0,b.clientX-r.x),s.y=Math.max(0,b.clientY-r.y)}function $(b){o.value=!0,r.x=b.clientX,r.y=b.clientY,r.startW=n.w,r.startH=n.h,document.addEventListener("pointermove",L),document.addEventListener("pointerup",x)}function L(b){n.w=Math.max(320,r.startW+(b.clientX-r.x)),n.h=Math.max(300,r.startH+(b.clientY-r.y))}function x(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",x)}return(b,k)=>e.visible?(p(),h("div",{key:0,class:"intro-pdf-viewer",style:us({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:m},[k[1]||(k[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",l0,[c("button",{class:"viewer-btn",onClick:v,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:k[0]||(k[0]=P=>b.$emit("close")),title:"Close"},"")])],32),c("div",i0,[o.value?(p(),h("div",c0)):B("",!0),a.value?(p(),h("div",u0,"Loading PDF...")):i.value?(p(),h("div",d0,C(i.value),1)):u.value?(p(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,f0)):B("",!0)]),c("div",{class:"resize-handle",onPointerdown:$},"",32)],4)):B("",!0)}},m0=he(v0,[["__scopeId","data-v-a97df645"]]),Es="https://api.bridge-classroom.com/api",Is="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",vn=O([]),hs=O([]),ir=O(null),yt=O(!1),xe=O(null);function Wo(){async function e(a){yt.value=!0,xe.value=null;try{const i=await fetch(`${Es}/assignments?student_id=${encodeURIComponent(a)}`,{headers:{"x-api-key":Is}});if(!i.ok){const d=await i.text();return xe.value=d||`Server error (${i.status})`,null}const u=await i.json();return u.success?vn.value=u.assignments:xe.value=u.error||"Failed to fetch assignments",u}catch(i){return console.error("Failed to fetch student assignments:",i),xe.value="Unable to connect to server",null}finally{yt.value=!1}}async function t(a){yt.value=!0,xe.value=null;try{const i=await fetch(`${Es}/assignments?assigned_by=${encodeURIComponent(a)}`,{headers:{"x-api-key":Is}});if(!i.ok){const d=await i.text();return xe.value=d||`Server error (${i.status})`,null}const u=await i.json();return u.success?hs.value=u.assignments:xe.value=u.error||"Failed to fetch assignments",u}catch(i){return console.error("Failed to fetch teacher assignments:",i),xe.value="Unable to connect to server",null}finally{yt.value=!1}}async function s(a){yt.value=!0,xe.value=null;try{const i=await fetch(`${Es}/assignments?classroom_id=${encodeURIComponent(a)}`,{headers:{"x-api-key":Is}});if(!i.ok){const d=await i.text();return xe.value=d||`Server error (${i.status})`,null}const u=await i.json();return u.success?u.assignments:(xe.value=u.error||"Failed to fetch assignments",[])}catch(i){return console.error("Failed to fetch classroom assignments:",i),xe.value="Unable to connect to server",[]}finally{yt.value=!1}}async function n(a){yt.value=!0,xe.value=null;try{const i=await fetch(`${Es}/assignments/${encodeURIComponent(a)}`,{headers:{"x-api-key":Is}});if(!i.ok){const d=await i.text();return xe.value=d||`Server error (${i.status})`,null}const u=await i.json();return u.success?ir.value=u.assignment:xe.value=u.error||"Failed to fetch assignment",u}catch(i){return console.error("Failed to fetch assignment detail:",i),xe.value="Unable to connect to server",null}finally{yt.value=!1}}async function o({exercise_id:a,classroom_id:i,student_id:u,assigned_by:d,due_at:f,sort_order:v}){yt.value=!0,xe.value=null;try{const m=await fetch(`${Es}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Is},body:JSON.stringify({exercise_id:a,classroom_id:i||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:v??null})});if(!m.ok){const $=await m.text();return xe.value=$||`Server error (${m.status})`,{success:!1,error:xe.value}}const g=await m.json();return g.success?hs.value=[g.assignment,...hs.value]:xe.value=g.error||"Failed to create assignment",g}catch(m){return console.error("Failed to create assignment:",m),xe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{yt.value=!1}}async function r(a){try{const i=await fetch(`${Es}/assignments/${encodeURIComponent(a)}`,{method:"DELETE",headers:{"x-api-key":Is}});if(!i.ok){const d=await i.text();return xe.value=d||`Server error (${i.status})`,{success:!1,error:xe.value}}const u=await i.json();return u.success&&(hs.value=hs.value.filter(d=>d.id!==a),vn.value=vn.value.filter(d=>d.id!==a)),u}catch(i){return console.error("Failed to delete assignment:",i),{success:!1,error:"Unable to connect to server"}}}function l(){vn.value=[],hs.value=[],ir.value=null,yt.value=!1,xe.value=null}return{studentAssignments:vn,teacherAssignments:hs,currentAssignment:ir,loading:yt,error:xe,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:r,reset:l}}const p0={class:"collection-icon"},h0={class:"collection-name"},g0={class:"collection-desc"},y0={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",p0,C(e.collection.icon),1),c("span",h0,C(e.collection.name),1),c("span",g0,C(e.collection.description),1)]))}},b0=he(y0,[["__scopeId","data-v-747be5b1"]]),_0={class:"collection-grid"},w0={class:"collection-cards"},S0={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=Vn().COLLECTIONS;return(n,o)=>(p(),h("div",_0,[o[0]||(o[0]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",w0,[(p(!0),h(Z,null,ie(D(s),r=>(p(),Re(b0,{key:r.id,collection:r,onClick:l=>n.$emit("select-collection",r.id)},null,8,["collection","onClick"]))),128))])]))}},ba=he(S0,[["__scopeId","data-v-66fee6e8"]]),C0={class:"casual-lobby"},$0={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(p(),h("div",C0,[fe(ba,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},k0=he($0,[["__scopeId","data-v-a78f70b6"]]),x0={class:"assignment-panel"},A0={key:0,class:"loading-state"},N0={key:1,class:"empty-state"},T0={key:2,class:"assignment-cards"},O0=["onClick"],E0={class:"card-header"},I0={class:"exercise-name"},R0={class:"card-meta"},D0={key:0,class:"meta-item"},P0={class:"progress-section"},L0={class:"progress-bar"},B0={class:"progress-label"},U0={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(l){return l.total_boards?Math.round(l.attempted_boards/l.total_boards*100):0}function s(l){return l.attempted_boards>=l.total_boards&&l.total_boards>0?"complete":l.due_at&&new Date(l.due_at)<new Date&&l.attempted_boards<l.total_boards?"overdue":l.attempted_boards>0?"in-progress":"new"}function n(l){const a=s(l);return a==="complete"?"Complete":a==="overdue"?"Overdue":a==="in-progress"?"In Progress":"New"}function o(l){if(!l.due_at)return null;const a=new Date(l.due_at),u=Math.ceil((a-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function r(l){if(!l.due_at)return"";const a=new Date(l.due_at),u=Math.ceil((a-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(l,a)=>(p(),h("div",x0,[a[2]||(a[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),h("div",A0,[...a[0]||(a[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),h("div",N0,[...a[1]||(a[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),h("div",T0,[(p(!0),h(Z,null,ie(e.assignments,i=>(p(),h("div",{key:i.id,class:re(["assignment-card",s(i)]),onClick:u=>l.$emit("select-assignment",i)},[c("div",E0,[c("span",I0,C(i.exercise_name),1),c("span",{class:re(["status-badge",s(i)])},C(n(i)),3)]),c("div",R0,[i.classroom_name?(p(),h("span",D0,C(i.classroom_name),1)):B("",!0),i.due_at?(p(),h("span",{key:1,class:re(["meta-item",r(i)])},C(o(i)),3)):B("",!0)]),c("div",P0,[c("div",L0,[c("div",{class:re(["progress-fill",s(i)]),style:us({width:t(i)+"%"})},null,6)]),c("span",B0,C(i.attempted_boards)+" / "+C(i.total_boards)+" boards ",1)])],10,O0))),128))]))]))}},M0=he(U0,[["__scopeId","data-v-dc0b8e86"]]),F0={class:"student-lobby"},j0={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Be(),n=Wo(),o=T(()=>n.studentAssignments.value.length>0),r=T(()=>n.loading.value);function l(a){console.log("Selected assignment:",a)}return $t(()=>{const a=s.currentUser.value;a&&n.fetchStudentAssignments(a.id)}),(a,i)=>(p(),h("div",F0,[o.value||r.value?(p(),Re(M0,{key:0,assignments:D(n).studentAssignments.value,loading:r.value,onSelectAssignment:l},null,8,["assignments","loading"])):B("",!0),fe(ba,{onSelectCollection:i[0]||(i[0]=u=>a.$emit("select-collection",u))})]))}},H0=he(j0,[["__scopeId","data-v-de436049"]]),V0="https://api.bridge-classroom.com/api",K0="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",io=O([]),Vc=O([]),Kc=O([]),Ur=O(!1),cr=O(null),W0=2*60*1e3;async function G0(e,t=!1){if(!t&&cr.value&&Date.now()-new Date(cr.value).getTime()<W0)return{success:!0,cached:!0};Ur.value=!0;try{const s=await fetch(`${V0}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":K0}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return io.value=n.classrooms||[],Vc.value=n.needs_attention||[],Kc.value=n.recent_activity||[],cr.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{Ur.value=!1}}function z0(){const e=T(()=>({classroomCount:io.value.length,openAssignmentCount:io.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:io,needsAttention:Vc,recentActivity:Kc,lobbyLoading:Ur,summaryStats:e,loadTeacherLobbyData:G0}}const J0={class:"roster"},Y0={class:"roster-header"},q0={class:"member-count"},X0={key:0,class:"roster-empty"},Q0={key:1,class:"roster-table"},Z0={class:"member-name"},ew={class:"member-email"},tw={class:"member-date"},sw={class:"member-action"},nw=["onClick","disabled"],ow={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=O(null);function o(l){try{return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return l}}function r(l){const a=`${l.first_name} ${l.last_name}`;confirm(`Remove ${a} from this classroom?`)&&(n.value=l.student_id,s("remove-member",l.student_id),setTimeout(()=>{n.value=null},2e3))}return(l,a)=>(p(),h("div",J0,[c("div",Y0,[a[0]||(a[0]=c("h4",null,"Class Roster",-1)),c("span",q0,C(e.members.length)+" "+C(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),h("div",X0,[...a[1]||(a[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),h("table",Q0,[a[2]||(a[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.members,i=>(p(),h("tr",{key:i.student_id},[c("td",Z0,C(i.first_name)+" "+C(i.last_name),1),c("td",ew,C(i.email),1),c("td",tw,C(o(i.joined_at)),1),c("td",sw,[c("button",{class:"remove-btn",onClick:u=>r(i),disabled:n.value===i.student_id},C(n.value===i.student_id?"Removing...":"Remove"),9,nw)])]))),128))])]))]))}},rw=he(ow,[["__scopeId","data-v-ee901be3"]]),aw={class:"header-left"},lw={class:"classroom-name"},iw={class:"header-meta"},cw={class:"join-badge"},uw={class:"member-count"},dw={key:0,class:"stat-badge"},fw={key:1,class:"stat-badge completion"},vw={key:0,class:"mini-bars"},mw={class:"bar-label"},pw={class:"bar-track"},hw={class:"bar-count"},gw=["aria-label"],yw={key:0,class:"card-body"},bw={key:0,class:"classroom-desc"},_w={class:"invite-section"},ww={class:"invite-field"},Sw=["value"],Cw={class:"email-section"},$w={class:"email-header"},kw={class:"email-template"},xw={class:"email-body"},Aw={key:1,class:"assignments-section"},Nw={class:"assignment-list"},Tw={class:"assignment-name"},Ow={key:0,class:"assignment-due"},Ew={class:"assignment-boards"},Iw={key:3,class:"loading-roster"},Rw={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=Jn(),r=Wo(),l=O(null),a=O(!1),i=O(!1),u=O(!1),d=O([]),f=T(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ct(()=>s.expanded,async x=>{if(x&&!l.value){a.value=!0;const[b,k]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),r.fetchClassroomAssignments(s.classroom.id)]);b!=null&&b.success&&(l.value=b.classroom),d.value=k||[],a.value=!1}});function v(x){return x?new Date(x).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function m(x){return x.students_total?Math.round(x.students_completed/x.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(f.value),i.value=!0,setTimeout(()=>{i.value=!1},2e3)}catch{}}async function $(){const x=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(x),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function L(x){const b=await o.removeMember(s.classroom.id,x);b!=null&&b.success&&(l.value&&(l.value.members=l.value.members.filter(k=>k.student_id!==x)),n("member-removed"))}return(x,b)=>(p(),h("div",{class:re(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:b[0]||(b[0]=k=>x.$emit("toggle"))},[c("div",aw,[c("h3",lw,C(e.classroom.name),1),c("div",iw,[c("span",cw,"JOIN: "+C(e.classroom.join_code),1),c("span",uw,C(e.classroom.member_count)+" "+C(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),h("span",dw,C(e.classroom.open_assignment_count)+" "+C(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):B("",!0),e.classroom.avg_completion_pct>0?(p(),h("span",fw,C(e.classroom.avg_completion_pct)+"% avg",1)):B("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),h("div",vw,[(p(!0),h(Z,null,ie(e.classroom.assignments,k=>(p(),h("div",{key:k.id,class:"mini-bar"},[c("span",mw,C(k.exercise_name),1),c("div",pw,[c("div",{class:"bar-fill",style:us({width:m(k)})},null,4)]),c("span",hw,C(k.students_completed)+"/"+C(k.students_total),1)]))),128))])):B("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:re(["chevron",{rotated:e.expanded}])},"",2)],8,gw)]),e.expanded?(p(),h("div",yw,[e.classroom.description?(p(),h("p",bw,C(e.classroom.description),1)):B("",!0),c("div",_w,[b[2]||(b[2]=c("h4",null,"Invite Link",-1)),b[3]||(b[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",ww,[c("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:b[1]||(b[1]=k=>k.target.select())},null,8,Sw),c("button",{class:"copy-btn",onClick:g},C(i.value?"Copied!":"Copy"),1)])]),c("div",Cw,[c("div",$w,[b[4]||(b[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:$},C(u.value?"Copied!":"Copy"),1)]),c("div",kw,[b[5]||(b[5]=c("p",null,[c("strong",null,"Subject:"),ks(" Join our Bridge Classroom for practice exercises")],-1)),c("div",xw," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+C(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(p(),h("div",Aw,[b[6]||(b[6]=c("h4",null,"Assignments",-1)),c("div",Nw,[(p(!0),h(Z,null,ie(d.value,k=>(p(),h("div",{key:k.id,class:"assignment-row"},[c("span",Tw,C(k.exercise_name),1),k.due_at?(p(),h("span",Ow,"Due "+C(v(k.due_at)),1)):B("",!0),c("span",Ew,C(k.total_boards)+" boards",1)]))),128))])])):B("",!0),l.value?(p(),Re(rw,{key:2,members:l.value.members,onRemoveMember:L},null,8,["members"])):a.value?(p(),h("div",Iw," Loading roster... ")):B("",!0)])):B("",!0)],2))}},Dw=he(Rw,[["__scopeId","data-v-59d6a074"]]),Pw={class:"modal-content"},Lw={class:"step"},Bw={class:"form-group"},Uw={class:"form-group"},Mw={class:"step-actions"},Fw=["disabled"],jw={key:0,class:"error-text"},Hw={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Be(),o=Jn(),r=O(""),l=O(""),a=O(!1),i=O(null);async function u(){if(!r.value.trim()||a.value)return;const d=n.currentUser.value;if(!d)return;a.value=!0,i.value=null;const f=await o.createClassroom(d.id,r.value.trim(),l.value.trim()||null);f.success?s("classroom-created",f.classroom):i.value=f.error||"Failed to create classroom",a.value=!1}return(d,f)=>(p(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Xt(v=>d.$emit("close"),["self"]))},[c("div",Pw,[c("div",Lw,[f[7]||(f[7]=c("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",Bw,[f[4]||(f[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),He(c("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=v=>r.value=v),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Hi(u,["enter"])},null,544),[[Kt,r.value]]),f[5]||(f[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",Uw,[f[6]||(f[6]=c("label",{for:"classroom-desc"},[ks("Description "),c("span",{class:"optional"},"(optional)")],-1)),He(c("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=v=>l.value=v),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[Kt,l.value]])]),c("div",Mw,[c("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=v=>d.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!r.value.trim()||a.value,onClick:u},C(a.value?"Creating...":"Create Classroom"),9,Fw)]),i.value?(p(),h("p",jw,C(i.value),1)):B("",!0)])])]))}},Vw=he(Hw,[["__scopeId","data-v-c26a1ae6"]]),mn="https://api.bridge-classroom.com/api",pn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",gs=O([]),ur=O(null),It=O(!1),Ne=O(null);function Kw(){async function e(l={}){It.value=!0,Ne.value=null;try{const a=new URLSearchParams;l.created_by&&a.set("created_by",l.created_by),l.curriculum_path&&a.set("curriculum_path",l.curriculum_path),l.visibility&&a.set("visibility",l.visibility);const i=a.toString(),u=`${mn}/exercises${i?"?"+i:""}`,d=await fetch(u,{headers:{"x-api-key":pn}});if(!d.ok){const v=await d.text();return Ne.value=v||`Server error (${d.status})`,null}const f=await d.json();return f.success?gs.value=f.exercises:Ne.value=f.error||"Failed to fetch exercises",f}catch(a){return console.error("Failed to fetch exercises:",a),Ne.value="Unable to connect to server",null}finally{It.value=!1}}async function t(l){It.value=!0,Ne.value=null;try{const a=await fetch(`${mn}/exercises/${encodeURIComponent(l)}`,{headers:{"x-api-key":pn}});if(!a.ok){const u=await a.text();return Ne.value=u||`Server error (${a.status})`,null}const i=await a.json();return i.success?ur.value=i.exercise:Ne.value=i.error||"Failed to fetch exercise",i}catch(a){return console.error("Failed to fetch exercise detail:",a),Ne.value="Unable to connect to server",null}finally{It.value=!1}}async function s({name:l,description:a,created_by:i,curriculum_path:u,visibility:d,boards:f}){It.value=!0,Ne.value=null;try{const v=await fetch(`${mn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":pn},body:JSON.stringify({name:l,description:a||null,created_by:i||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!v.ok){const g=await v.text();return Ne.value=g||`Server error (${v.status})`,{success:!1,error:Ne.value}}const m=await v.json();return m.success?gs.value=[m.exercise,...gs.value]:Ne.value=m.error||"Failed to create exercise",m}catch(v){return console.error("Failed to create exercise:",v),Ne.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{It.value=!1}}async function n(l,a){It.value=!0,Ne.value=null;try{const i=await fetch(`${mn}/exercises/${encodeURIComponent(l)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":pn},body:JSON.stringify(a)});if(!i.ok){const d=await i.text();return Ne.value=d||`Server error (${i.status})`,{success:!1,error:Ne.value}}const u=await i.json();return u.success||(Ne.value=u.error||"Failed to update exercise"),u}catch(i){return console.error("Failed to update exercise:",i),Ne.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{It.value=!1}}async function o(l){try{const a=await fetch(`${mn}/exercises/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":pn}});if(!a.ok){const u=await a.text();return Ne.value=u||`Server error (${a.status})`,{success:!1,error:Ne.value}}const i=await a.json();return i.success&&(gs.value=gs.value.filter(u=>u.id!==l)),i}catch(a){return console.error("Failed to delete exercise:",a),{success:!1,error:"Unable to connect to server"}}}function r(){gs.value=[],ur.value=null,It.value=!1,Ne.value=null}return{exercises:gs,currentExercise:ur,loading:It,error:Ne,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:r}}const Ww={class:"modal-content"},Gw={class:"step"},zw={class:"form-group"},Jw=["value"],Yw={key:0,class:"form-hint"},qw={class:"form-group"},Xw={class:"target-options"},Qw={class:"radio-option"},Zw={class:"radio-option"},eS={key:0,class:"form-group"},tS=["value"],sS={key:1,class:"form-group"},nS=["value"],oS={class:"form-group"},rS={class:"step-actions"},aS=["disabled"],lS={key:2,class:"error-text"},iS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Be(),r=Kw(),l=Wo(),a=Jn(),i=Kn(),u=O(""),d=O("classroom"),f=O(s.preselectedClassroomId||""),v=O(""),m=O(""),g=O(!1),$=O(null),L=T(()=>r.exercises.value),x=T(()=>r.loading.value),b=T(()=>a.teacherClassrooms.value),k=T(()=>i.students.value),P=T(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!v.value));async function W(){if(!P.value||g.value)return;const ee=o.currentUser.value;if(!ee)return;g.value=!0,$.value=null;const K=await l.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?v.value:null,assigned_by:ee.id,due_at:m.value||null});K.success?n("assignment-created",K.assignment):$.value=K.error||"Failed to create assignment",g.value=!1}return $t(async()=>{r.exercises.value.length||await r.fetchExercises();const ee=o.currentUser.value;ee&&!a.teacherClassrooms.value.length&&await a.fetchTeacherClassrooms(ee.id)}),(ee,K)=>(p(),h("div",{class:"modal-overlay",onClick:K[7]||(K[7]=Xt(X=>ee.$emit("close"),["self"]))},[c("div",Ww,[c("div",Gw,[K[18]||(K[18]=c("h2",null,"Create Assignment",-1)),K[19]||(K[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",zw,[K[9]||(K[9]=c("label",{for:"exercise-select"},"Exercise",-1)),He(c("select",{id:"exercise-select","onUpdate:modelValue":K[0]||(K[0]=X=>u.value=X),class:"form-select"},[K[8]||(K[8]=c("option",{value:""},"Select an exercise...",-1)),(p(!0),h(Z,null,ie(L.value,X=>(p(),h("option",{key:X.id,value:X.id},C(X.name)+" ("+C(X.board_count)+" boards)",9,Jw))),128))],512),[[lo,u.value]]),x.value?(p(),h("p",Yw,"Loading exercises...")):B("",!0)]),c("div",qw,[K[12]||(K[12]=c("label",null,"Assign to",-1)),c("div",Xw,[c("label",Qw,[He(c("input",{type:"radio","onUpdate:modelValue":K[1]||(K[1]=X=>d.value=X),value:"classroom"},null,512),[[Za,d.value]]),K[10]||(K[10]=c("span",null,"Classroom",-1))]),c("label",Zw,[He(c("input",{type:"radio","onUpdate:modelValue":K[2]||(K[2]=X=>d.value=X),value:"student"},null,512),[[Za,d.value]]),K[11]||(K[11]=c("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(p(),h("div",eS,[K[14]||(K[14]=c("label",{for:"classroom-select"},"Classroom",-1)),He(c("select",{id:"classroom-select","onUpdate:modelValue":K[3]||(K[3]=X=>f.value=X),class:"form-select"},[K[13]||(K[13]=c("option",{value:""},"Select a classroom...",-1)),(p(!0),h(Z,null,ie(b.value,X=>(p(),h("option",{key:X.id,value:X.id},C(X.name)+" ("+C(X.member_count)+" students)",9,tS))),128))],512),[[lo,f.value]])])):B("",!0),d.value==="student"?(p(),h("div",sS,[K[16]||(K[16]=c("label",{for:"student-select"},"Student",-1)),He(c("select",{id:"student-select","onUpdate:modelValue":K[4]||(K[4]=X=>v.value=X),class:"form-select"},[K[15]||(K[15]=c("option",{value:""},"Select a student...",-1)),(p(!0),h(Z,null,ie(k.value,X=>(p(),h("option",{key:X.id,value:X.id},C(X.first_name)+" "+C(X.last_name),9,nS))),128))],512),[[lo,v.value]])])):B("",!0),c("div",oS,[K[17]||(K[17]=c("label",{for:"due-date"},[ks("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),He(c("input",{id:"due-date","onUpdate:modelValue":K[5]||(K[5]=X=>m.value=X),type:"date",class:"form-input"},null,512),[[Kt,m.value]])]),c("div",rS,[c("button",{class:"btn btn-secondary",onClick:K[6]||(K[6]=X=>ee.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!P.value||g.value,onClick:W},C(g.value?"Creating...":"Create Assignment"),9,aS)]),$.value?(p(),h("p",lS,C($.value),1)):B("",!0)])])]))}},cS=he(iS,[["__scopeId","data-v-5e97b847"]]),uS={class:"needs-attention"},dS={key:0,class:"empty-state"},fS={key:1,class:"attention-list"},vS={class:"item-icon"},mS={class:"item-text"},pS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const r=n(o.due_at),l=r<=1?"tomorrow":`in ${r} days`;return`${o.exercise_name} due ${l}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const r=new Date(o)-Date.now();return Math.max(0,Math.ceil(r/(1e3*60*60*24)))}return(o,r)=>(p(),h("div",uS,[r[0]||(r[0]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),h("div",fS,[(p(!0),h(Z,null,ie(e.items,(l,a)=>(p(),h("div",{key:a,class:re(["attention-item",l.type])},[c("span",vS,C(t(l.type)),1),c("span",mS,C(s(l)),1)],2))),128))])):(p(),h("div",dS," All caught up! No items need attention. "))]))}},hS=he(pS,[["__scopeId","data-v-c39449f9"]]),gS={class:"recent-activity"},yS={key:0,class:"empty-state"},bS={key:1,class:"activity-list"},_S={class:"event-content"},wS={class:"event-text"},SS={class:"event-time"},CS={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const r=Date.now()-new Date(o).getTime(),l=Math.floor(r/6e4);if(l<1)return"just now";if(l<60)return`${l}m ago`;const a=Math.floor(l/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}return(o,r)=>(p(),h("div",gS,[r[0]||(r[0]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),h("div",bS,[(p(!0),h(Z,null,ie(e.events,(l,a)=>(p(),h("div",{key:a,class:"activity-item"},[c("span",{class:re(["event-icon",l.type])},C(t(l.type)),3),c("div",_S,[c("span",wS,C(s(l)),1),c("span",SS,C(n(l.timestamp)),1)])]))),128))])):(p(),h("div",yS," No recent activity. "))]))}},$S=he(CS,[["__scopeId","data-v-5d7405f1"]]),kS={class:"teacher-lobby"},xS={class:"welcome-section"},AS={class:"welcome-title"},NS={class:"welcome-subtitle"},TS={class:"quick-actions"},OS={key:0,class:"loading-state"},ES={key:1,class:"dashboard-grid"},IS={class:"left-column"},RS={key:0,class:"classrooms-section"},DS={class:"classroom-cards"},PS={key:1,class:"empty-state"},LS={class:"right-column"},BS={class:"collections-section"},US={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin"],setup(e){const t=Be(),s=z0(),n=O(!1),o=O(!1),r=O(null),l=T(()=>{const v=t.currentUser.value;return v?v.firstName:""}),a=T(()=>{const v=s.summaryStats.value;if(!v||v.classroomCount===0)return"Get started by creating your first classroom.";const m=[];return m.push(`${v.classroomCount} active ${v.classroomCount===1?"classroom":"classrooms"}`),v.openAssignmentCount>0&&m.push(`${v.openAssignmentCount} open ${v.openAssignmentCount===1?"assignment":"assignments"}`),m.join(", ")+"."});function i(v){r.value=r.value===v?null:v}function u(v){n.value=!1,r.value=v.id,f()}function d(){o.value=!1,f()}function f(){const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id,!0)}return $t(()=>{const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id)}),(v,m)=>(p(),h("div",kS,[c("div",xS,[c("h2",AS,"Welcome back, "+C(l.value),1),c("p",NS,C(a.value),1)]),c("div",TS,[c("button",{class:"action-btn create",onClick:m[0]||(m[0]=g=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:m[1]||(m[1]=g=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),h("button",{key:0,class:"action-btn admin",onClick:m[2]||(m[2]=g=>v.$emit("show-admin"))}," Admin Panel ")):B("",!0)]),D(s).lobbyLoading.value&&!D(s).lobbyClassrooms.value.length?(p(),h("div",OS,[...m[6]||(m[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(p(),h("div",ES,[c("div",IS,[D(s).lobbyClassrooms.value.length?(p(),h("div",RS,[m[7]||(m[7]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",DS,[(p(!0),h(Z,null,ie(D(s).lobbyClassrooms.value,g=>(p(),Re(Dw,{key:g.id,classroom:g,expanded:r.value===g.id,onToggle:$=>i(g.id),onMemberRemoved:f},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),h("div",PS,[...m[8]||(m[8]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",LS,[fe(hS,{items:D(s).needsAttention.value},null,8,["items"]),fe($S,{events:D(s).recentActivity.value},null,8,["events"])])])),c("div",BS,[m[9]||(m[9]=c("h3",{class:"section-title"},"Lesson Collections",-1)),fe(ba,{onSelectCollection:m[3]||(m[3]=g=>v.$emit("select-collection",g))})]),n.value?(p(),Re(Vw,{key:2,onClose:m[4]||(m[4]=g=>n.value=!1),onClassroomCreated:u})):B("",!0),o.value?(p(),Re(cS,{key:3,onClose:m[5]||(m[5]=g=>o.value=!1),onAssignmentCreated:d})):B("",!0)]))}},MS=he(US,[["__scopeId","data-v-f3760795"]]),Wc="https://api.bridge-classroom.com/api",Gc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",zc=O(null),Jc=O([]),Yc=O(null),qc=O(null),Mr=O(!1),Fr=O(null),dr=O(null),FS=60*1e3;async function Xc(e=!1){if(!e&&dr.value&&Date.now()-new Date(dr.value).getTime()<FS)return{success:!0,cached:!0};Mr.value=!0,Fr.value=null;try{const t=await fetch(`${Wc}/admin/stats`,{headers:{"x-api-key":Gc}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return zc.value=s.stats,Jc.value=s.popular_lessons||[],Yc.value=s.database,dr.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),Fr.value=t.message,{success:!1,error:t.message}}finally{Mr.value=!1}}async function Qc(){try{const e=await fetch(`${Wc}/admin/health`,{headers:{"x-api-key":Gc}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return qc.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function jS(){await Promise.all([Xc(!0),Qc()])}function HS(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function VS(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function _a(){return{stats:zc,popularLessons:Jc,database:Yc,health:qc,loading:Mr,error:Fr,loadStats:Xc,loadHealth:Qc,refreshAll:jS,formatBytes:HS,formatUptime:VS}}const KS={class:"stats-row"},WS={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},GS={class:"stat-number"},zS={class:"stat-card",style:{"border-top-color":"#1565c0"}},JS={class:"stat-number"},YS={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},qS={class:"stat-number"},XS={class:"stat-card",style:{"border-top-color":"#e65100"}},QS={class:"stat-number"},ZS={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,r,l,a;return p(),h("div",KS,[c("div",WS,[c("div",GS,C(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",zS,[c("div",JS,C(((r=e.stats)==null?void 0:r.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",YS,[c("div",qS,C(t((l=e.stats)==null?void 0:l.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",XS,[c("div",QS,C(((a=e.stats)==null?void 0:a.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},eC=he(ZS,[["__scopeId","data-v-a14a2199"]]),tC={class:"popular-lessons"},sC={key:0,class:"empty-state"},nC={key:1,class:"table-wrap"},oC={class:"lessons-table"},rC={class:"lesson-name"},aC={class:"num-col"},lC={class:"num-col"},iC={class:"num-col"},cC={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),h("div",tC,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),h("div",nC,[c("table",oC,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.lessons.slice(0,15),r=>(p(),h("tr",{key:r.deal_subfolder},[c("td",rC,C(t(r.deal_subfolder)),1),c("td",aC,C(r.play_count.toLocaleString()),1),c("td",lC,C(r.unique_users),1),c("td",iC,[c("span",{class:re(["accuracy-badge",s(r.accuracy_pct)])},C(r.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),h("div",sC,"No lesson data yet."))]))}},uC=he(cC,[["__scopeId","data-v-079bd4f8"]]),dC={class:"database-panel"},fC={key:0,class:"empty-state"},vC={class:"db-size"},mC={class:"tables-table"},pC={class:"table-name"},hC={class:"num-col"},gC={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=_a();return(s,n)=>(p(),h("div",dC,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),h(Z,{key:1},[c("div",vC,[n[0]||(n[0]=ks(" SQLite file: ",-1)),c("strong",null,C(D(t)(e.database.file_size_bytes)),1)]),c("table",mC,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.database.tables,o=>(p(),h("tr",{key:o.name},[c("td",pC,C(o.name),1),c("td",hC,C(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),h("div",fC,"Loading..."))]))}},yC=he(gC,[["__scopeId","data-v-d5945aff"]]),bC={class:"system-health"},_C={class:"health-header"},wC=["disabled"],SC={key:0,class:"empty-state"},CC={key:1,class:"health-rows"},$C={class:"health-row"},kC={class:"health-value"},xC={class:"health-row"},AC={class:"health-value"},NC={class:"health-row"},TC={class:"health-value"},OC={class:"health-row"},EC={class:"health-value"},IC={class:"health-row"},RC={class:"health-value"},DC={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=_a();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),r=Math.floor(o/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const l=Math.floor(r/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(n,o)=>(p(),h("div",bC,[c("div",_C,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=r=>n.$emit("refresh")),disabled:e.refreshing},C(e.refreshing?"Refreshing...":"Refresh"),9,wC)]),e.health?(p(),h("div",CC,[c("div",$C,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",kC,"Up "+C(D(t)(e.health.uptime_seconds)),1)]),c("div",xC,[c("span",{class:re(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",AC,C(e.health.database_writable?"Writable":"Error"),1)]),c("div",NC,[c("span",{class:re(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",TC,C(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",OC,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",EC,C(e.health.disk_available_gb)+" GB / "+C(e.health.disk_total_gb)+" GB available",1)]),c("div",IC,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",RC,"v"+C(e.health.api_version),1)])])):(p(),h("div",SC,"Loading..."))]))}},PC=he(DC,[["__scopeId","data-v-0d4e96d5"]]),LC={class:"admin-lobby"},BC={class:"admin-header"},UC={key:0,class:"admin-subtitle"},MC={key:0,class:"loading-state"},FC={key:1,class:"error-state"},jC={class:"content-grid"},HC={__name:"AdminLobby",emits:["back"],setup(e){const t=_a(),s=O(!1);async function n(){await Promise.all([t.loadStats(),t.loadHealth()])}async function o(){s.value=!0,await t.refreshAll(),s.value=!1}return $t(n),(r,l)=>(p(),h("div",LC,[c("div",BC,[c("button",{class:"back-btn",onClick:l[0]||(l[0]=a=>r.$emit("back"))}," Back to Dashboard"),l[1]||(l[1]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),D(t).stats.value?(p(),h("p",UC,C(D(t).stats.value.total_observations.toLocaleString())+" total observations across "+C(D(t).stats.value.total_users)+" users ",1)):B("",!0)]),D(t).loading.value&&!D(t).stats.value?(p(),h("div",MC,[...l[2]||(l[2]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):D(t).error.value?(p(),h("div",FC,[c("p",null,C(D(t).error.value),1),c("button",{class:"retry-btn",onClick:n},"Retry")])):D(t).stats.value?(p(),h(Z,{key:2},[fe(eC,{stats:D(t).stats.value},null,8,["stats"]),c("div",jC,[fe(uC,{lessons:D(t).popularLessons.value},null,8,["lessons"]),fe(yC,{database:D(t).database.value},null,8,["database"])]),fe(PC,{health:D(t).health.value,refreshing:s.value,onRefresh:o},null,8,["health","refreshing"])],64)):B("",!0)]))}},VC=he(HC,[["__scopeId","data-v-5aab4310"]]),KC={class:"lobby-view"},WC={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Be(),s=Wo(),n=O(!1),o=T(()=>{const a=t.currentUser.value;return(a==null?void 0:a.role)||"student"}),r=T(()=>s.studentAssignments.value.length>0),l=T(()=>{const a=t.currentUser.value;return Array.isArray(a==null?void 0:a.classrooms)&&a.classrooms.length>0});return $t(()=>{const a=t.currentUser.value;a&&o.value==="student"&&s.fetchStudentAssignments(a.id)}),(a,i)=>(p(),h("div",KC,[n.value?(p(),Re(VC,{key:0,onBack:i[0]||(i[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),Re(MS,{key:1,"is-admin":o.value==="admin",onSelectCollection:i[1]||(i[1]=u=>a.$emit("select-collection",u)),onShowAdmin:i[2]||(i[2]=u=>n.value=!0)},null,8,["is-admin"])):r.value||l.value?(p(),Re(H0,{key:2,onSelectCollection:i[3]||(i[3]=u=>a.$emit("select-collection",u))})):(p(),Re(k0,{key:3,onSelectCollection:i[4]||(i[4]=u=>a.$emit("select-collection",u)),onShowBecomeTeacher:i[5]||(i[5]=u=>a.$emit("show-become-teacher"))}))]))}},GC=he(WC,[["__scopeId","data-v-0f28018d"]]),zC={class:"modal-content"},JC={key:0,class:"step step-overview"},YC={class:"step-actions"},qC={key:1,class:"step step-agreement"},XC={class:"agreement-checkbox"},QC={class:"step-actions"},ZC=["disabled"],e$={key:0,class:"error-text"},t$={key:2,class:"step step-confirmation"},s$={class:"step-actions"},n$={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Be(),o=O(1),r=O(!1),l=O(!1),a=O(null);async function i(){const u=n.currentUser.value;if(u){l.value=!0,a.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){a.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:v,privateKey:m}=await am();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:v,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:m,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(v){console.warn("Failed to create viewer record:",v)}o.value=3}catch(d){console.error("Teacher activation failed:",d),a.value="Unable to connect to server. Please try again."}finally{l.value=!1}}}return(u,d)=>(p(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Xt(f=>u.$emit("close"),["self"]))},[c("div",zC,[o.value===1?(p(),h("div",JC,[d[6]||(d[6]=ho('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",YC,[c("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(p(),h("div",qC,[d[8]||(d[8]=ho('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",XC,[He(c("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>r.value=f)},null,512),[[oa,r.value]]),d[7]||(d[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",QC,[c("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!r.value||l.value,onClick:i},C(l.value?"Activating...":"Activate Teacher Account"),9,ZC)]),a.value?(p(),h("p",e$,C(a.value),1)):B("",!0)])):o.value===3?(p(),h("div",t$,[d[9]||(d[9]=c("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=c("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",s$,[c("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):B("",!0)])]))}},o$=he(n$,[["__scopeId","data-v-56e5717d"]]),r$={},a$={class:"page-footer"};function l$(e,t){return p(),h("footer",a$,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const i$=he(r$,[["render",l$],["__scopeId","data-v-1b649814"]]),c$={key:1,class:"app"},u$={class:"app-header"},d$={class:"header-right"},f$=["title"],v$={key:3,class:"stats"},m$={class:"correct"},p$={class:"wrong"},h$={class:"user-avatar-group"},g$=["title"],y$=["title"],b$={class:"app-main"},_$={key:3,class:"collection-view"},w$={key:4,class:"practice-layout"},S$={class:"practice-left"},C$={class:"practice-right"},$$={key:1,class:"commentary-panel"},k$=["innerHTML"],x$=["innerHTML"],A$=["innerHTML"],N$=["innerHTML"],T$={class:"commentary-controls"},O$={key:0,class:"bidding-box-wrapper"},E$={key:1,class:"card-choice-prompt"},I$=["innerHTML"],R$={key:3,class:"completion-controls"},D$={key:0,class:"registration-toast"},P$={__name:"MainLayout",setup(e){const t=Mv(),s=Vn(),n=Be(),o=Ho(),r=Fc(),l=Kn(),a=Ym(),i=O(!1),u=O(!1),d=O(!1),f=O(!1),v=O(null),m=O(""),g=O(null),$=O(null),L=O(null),x=O(!1),b=O(null),k=O(null),P=O(!1),W=O(!1),ee=O(null);function K(R,N=".current"){if(!R)return;const _=R.querySelector(N);_&&(R.scrollTop=_.offsetTop-R.offsetTop)}ct(()=>a.currentStepIndex.value,()=>{On(()=>{K(g.value,".narrative-text.current")})}),ct(()=>a.isComplete.value,R=>{R&&On(()=>{K(g.value,".narrative-text.current")})});const X=T(()=>n.isAuthenticated.value),Y=T(()=>{const R=n.currentUser.value;return R?`${R.firstName} ${R.lastName}`:""}),me=T(()=>{const R=n.currentUser.value;return R?`${R.firstName.charAt(0)}${R.lastName.charAt(0)}`.toUpperCase():"?"}),ce=T(()=>{const R=n.currentUser.value;return(R==null?void 0:R.role)||"student"}),we=T(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");$t(async()=>{s.initializeFromUrl(),n.initialize();const R=new URLSearchParams(window.location.search);R.get("recover")&&R.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),a.observationStore.initialize();const N=s.getCollectionFromUrl(),_=s.getLessonFromUrl();N&&($.value=N,_&&await j(N,_)),n.isAuthenticated.value&&(await r.initialize(),await n.syncRole(),Gt().initialize(),await l.checkTeacherStatus())});async function Ee(R){console.log("User ready:",R.firstName,R.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),W.value=!0,setTimeout(()=>{W.value=!1},4e3)),await r.initialize(),Gt().initialize(),await l.checkTeacherStatus();const _=sessionStorage.getItem("pendingJoinCode");if(_){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:_}});return}}function qe(){Gt().reset(),va().clearCache(),ds().reset(),l.reset(),n.currentUserId.value=null,i.value=!1,f.value=!1,v.value=null}async function Ke(){x.value=!1,await l.checkTeacherStatus()}const oe=O([]),z=O(0),te=T(()=>oe.value[z.value]||null),nt=T(()=>{var S;const R=M($.value),N=R!=null&&R.name?`${R.name} - `:"";if((S=L.value)!=null&&S.name)return N+L.value.name;if(!te.value)return"";const _=te.value.subfolder||te.value.category||"";return _?N+_:""});ct(z,()=>{te.value&&(a.loadDeal(te.value),s.setDealInUrl(te.value.boardNumber))},{flush:"sync"}),ct(()=>a.observationStore.pendingCount.value,(R,N)=>{R>N&&r.triggerSync()}),ct(()=>a.isComplete.value,R=>{R&&(b.value=null)});function de({subfolder:R,name:N,category:_,content:S}){const E=bl(S);if(E.length>0){const I=E.map(V=>({...V,subfolder:V.subfolder||R,category:V.category||_}));oe.value=I,z.value=0,a.loadDeal(I[0]),a.resetStats(),on().saveLessonBoardNumbers(R,I.map(V=>V.boardNumber)),L.value={id:R,name:N,category:_},s.setLessonInUrl(R),P.value=!1,w()}else alert("No deals found in the lesson file")}const G=T(()=>a.boardState.correctCount),se=T(()=>a.boardState.wrongCount);function Xe(R){!a.makeBid(R)&&te.value&&(b.value=te.value.boardNumber)}function ut({seat:R,suit:N,rank:_}){!a.makeCardChoice(N,_)&&te.value&&(b.value=te.value.boardNumber)}function ht(){a.clearCardFeedback(),a.goBack()}function We(){z.value<oe.value.length-1&&(b.value=null,z.value++,a.loadDeal(oe.value[z.value]))}function F(R){R>=0&&R<oe.value.length&&(b.value=null,z.value=R,a.loadDeal(oe.value[R]))}async function Q({subfolder:R,dealNumber:N}){var _;if(((_=L.value)==null?void 0:_.id)===R&&oe.value.length>0){const S=oe.value.findIndex(E=>E.boardNumber===N);if(S>=0){F(S);return}}for(const S of s.COLLECTIONS)try{const E=R.includes("/")?R.split("/").pop():R,I=`${S.baseUrl}/${E}.pbn`,H=await fetch(I);if(!H.ok)continue;const V=await H.text();$.value=S.id,s.setCollectionInUrl(S.id),de({subfolder:R,name:R,category:"",content:V});const q=oe.value.findIndex(le=>le.boardNumber===N);q>=0&&F(q);return}catch{}}function J(R){d.value=!1,f.value=!1,v.value=null,Q(R)}function ne(R,N){f.value=!1,v.value=null,Q({subfolder:R,dealNumber:N||1})}function pe(){L.value=null,s.setLessonInUrl(null),oe.value=[],z.value=0,a.resetStats(),P.value=!1,k.value=null,f.value=!1,v.value=null}function y(){$.value=null,L.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),oe.value=[],z.value=0,a.resetStats(),P.value=!1,k.value=null,f.value=!1,v.value=null}async function w(){if(k.value=null,!$.value||!L.value)return;const R=M($.value);if(!R)return;const N=L.value.id,_=N.includes("/")?N.split("/").pop():N,S=`${R.baseUrl}/${_}_Intro.pdf`;try{(await fetch(S,{method:"HEAD"})).ok&&(k.value=S)}catch{}}function A(R){window.innerWidth<600?window.open(R,"_blank"):(ee.value=R,P.value=!0)}function U(R){$.value=R,s.setCollectionInUrl(R)}function M(R){return s.COLLECTIONS.find(N=>N.id===R)}async function j(R,N){var S;const _=M(R);if(!_)return console.error("Collection not found:",R),!1;try{const E=await fetch(_.tocUrl);if(!E.ok)throw new Error(`Failed to load TOC: ${E.statusText}`);const I=await E.json();let H=null,V=null;for(const De of I.categories||[]){const Ue=(S=De.lessons)==null?void 0:S.find(dt=>dt.id===N);if(Ue){H=Ue,V=De;break}}if(!H)return console.error("Lesson not found in TOC:",N),!1;const q=N.includes("/")?N.split("/").pop():N,le=`${_.baseUrl}/${q}.pbn`,ve=await fetch(le);if(!ve.ok)throw new Error(`Failed to load lesson: ${ve.statusText}`);const Ie=await ve.text(),Ae=bl(Ie);if(Ae.length>0){const De=Ae.map(kt=>({...kt,subfolder:kt.subfolder||N,category:kt.category||V.name}));oe.value=De;const Ue=s.getDealFromUrl(),dt=Ue?De.findIndex(kt=>kt.boardNumber===Ue):-1;return z.value=dt>=0?dt:0,a.loadDeal(De[z.value]),a.resetStats(),L.value={id:N,name:H.name,category:V.name},w(),!0}return!1}catch(E){return console.error("Error loading lesson from URL:",E),!1}}return(R,N)=>{var _,S,E,I,H,V,q,le,ve,Ie,Ae,De,Ue,dt,kt,Qe;return X.value?(p(),h("div",c$,[c("header",u$,[c("h1",null,C(oe.value.length?nt.value:we.value),1),c("div",d$,[fe(vb),c("button",{class:"progress-btn",onClick:N[0]||(N[0]=ge=>u.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:N[1]||(N[1]=ge=>d.value=!0),title:"View Accomplishments"}," Accomplishments "),D(l).isTeacher.value?(p(),h("button",{key:0,class:"teacher-btn",onClick:N[2]||(N[2]=ge=>{f.value=!0,v.value=null,m.value=""}),title:"View Students"}," Students ")):B("",!0),oe.value.length&&$.value?(p(),h("button",{key:1,class:"lessons-btn",onClick:pe,title:"Back to "+((_=M($.value))==null?void 0:_.name)},C((S=M($.value))==null?void 0:S.name),9,f$)):B("",!0),$.value?(p(),h("button",{key:2,class:"lobby-btn",onClick:y,title:"Return to lobby"}," Lobby ")):B("",!0),G.value+se.value>0?(p(),h("div",v$,[c("span",m$,C(G.value),1),c("span",p$,C(se.value),1)])):B("",!0),c("div",h$,[ce.value!=="student"?(p(),h("button",{key:0,class:re(["role-badge","role-"+ce.value]),onClick:y,title:"Return to "+ce.value+" lobby"},C(ce.value),11,g$)):B("",!0),c("button",{class:"user-btn",onClick:N[3]||(N[3]=ge=>i.value=!0),title:Y.value},C(me.value),9,y$)])])]),c("main",b$,[fe(sb),f.value&&!v.value?(p(),Re(J_,{key:0,onClose:N[4]||(N[4]=ge=>f.value=!1),onSelectStudent:N[5]||(N[5]=(ge,Zt)=>{v.value=ge,m.value=Zt})})):f.value&&v.value?(p(),Re(R1,{key:1,studentId:v.value,studentName:m.value,onBack:N[6]||(N[6]=ge=>v.value=null),onNavigateToLesson:ne},null,8,["studentId","studentName"])):!oe.value.length&&!$.value?(p(),Re(GC,{key:2,onSelectCollection:U,onShowBecomeTeacher:N[7]||(N[7]=ge=>x.value=!0)})):!oe.value.length&&$.value?(p(),h("div",_$,[c("h2",null,C(((E=M($.value))==null?void 0:E.name)||$.value),1),N[17]||(N[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),fe(a0,{visible:!0,inline:!0,collection:M($.value),onLoad:de},null,8,["collection"])])):(p(),h("div",w$,[c("div",S$,[oe.value.length>1?(p(),Re(jc,{key:0,boardNumbers:oe.value.map(ge=>ge.boardNumber),lessonSubfolder:((I=te.value)==null?void 0:I.subfolder)||((H=te.value)==null?void 0:H.category)||"",currentIndex:z.value,forceRedBoard:b.value,introUrl:k.value,onGoto:F,onOpenIntro:A},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):B("",!0),fe(sg,{boardNumber:(V=te.value)==null?void 0:V.boardNumber,dealer:(q=te.value)==null?void 0:q.dealer,vulnerable:(le=te.value)==null?void 0:le.vulnerable,contract:(ve=te.value)==null?void 0:ve.contract,declarer:(Ie=te.value)==null?void 0:Ie.declarer,showContract:D(a).auctionState.auctionComplete||D(a).showOpeningLead.value||D(a).hasSteps.value&&!D(a).hasBidSteps.value,openingLead:D(a).showOpeningLead.value?(Ae=te.value)==null?void 0:Ae.openingLead:"",totalDeals:oe.value.length,currentIndex:z.value,dealBoardNumbers:oe.value.map(ge=>ge.boardNumber),onGoto:F},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),fe(_h,{hands:D(a).hands.value,hiddenSeats:D(a).hiddenSeats.value,showHcp:D(a).showHcp.value,compact:!0,clickableSeat:D(a).hasCardChoice.value?D(a).studentSeat.value:null,playedCards:D(a).showcardsPlayedCards.value,onCardClick:ut},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",C$,[D(a).showAuctionTable.value?(p(),Re(Uh,{key:0,bids:D(a).hasBidSteps.value?D(a).auctionState.displayedBids:((De=te.value)==null?void 0:De.auction)||[],dealer:((Ue=te.value)==null?void 0:Ue.dealer)||"N",currentBidIndex:D(a).hasBidSteps.value?D(a).auctionState.currentBidIndex:-1,wrongBidIndex:D(a).auctionState.wrongBidIndex,correctBidIndex:D(a).auctionState.correctBidIndex,showTurnIndicator:D(a).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):B("",!0),fe(Il,{visible:!!D(a).auctionState.wrongBid,type:"wrong",wrongBid:D(a).auctionState.wrongBid,correctBid:D(a).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),fe(Il,{visible:!!D(a).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:D(a).cardChoiceState.wrongCard,correctCardCode:D(a).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),D(a).hasSteps.value?(p(),h("div",$$,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:g},[(p(!0),h(Z,null,ie(D(a).steps.value.slice(0,D(a).currentStepIndex.value),(ge,Zt)=>(p(),h(Z,{key:"prev-"+Zt},[Zt>=D(a).commentaryStartIndex.value?(p(),h(Z,{key:0},[c("span",{class:"narrative-text previous",innerHTML:D(Ps)(D(dn)(ge.text))},null,8,k$),ge.type==="bid"&&ge.explanationText?(p(),h("span",{key:0,class:re(["narrative-text",Zt===D(a).currentStepIndex.value-1&&D(a).isBidStep.value&&!D(a).bidAnswered.value?"current":"previous"]),innerHTML:D(Ps)(D(dn)(ge.explanationText))},null,10,x$)):B("",!0)],64)):B("",!0)],64))),128)),D(a).currentStep.value?(p(),h("span",{key:0,class:"narrative-text current",innerHTML:D(Ps)(D(dn)(D(a).currentStep.value.text))},null,8,A$)):B("",!0),D(a).bidAnswered.value&&((dt=D(a).currentStep.value)!=null&&dt.explanationText)?(p(),h("span",{key:1,class:"narrative-text current",innerHTML:D(Ps)(D(dn)(D(a).currentStep.value.explanationText))},null,8,N$)):B("",!0)],512),c("div",T$,[D(a).hasBidPrompt.value?(p(),h("div",O$,[fe(Ih,{lastBid:D(a).lastContractBid.value,canDouble:D(a).canDouble.value,canRedouble:D(a).canRedouble.value,onBid:Xe},null,8,["lastBid","canDouble","canRedouble"])])):D(a).hasCardChoice.value?(p(),h("div",E$," Click on the card you would choose ")):B("",!0),D(a).canGoBack.value?(p(),h("button",{key:2,class:"instruction-btn secondary",onClick:ht},"  Back ")):B("",!0),!D(a).isComplete.value&&(D(a).bidAnswered.value||!D(a).hasBidPrompt.value&&!D(a).hasCardChoice.value&&D(a).currentStep.value&&D(a).currentStep.value.type!=="end")?(p(),h("button",{key:3,class:"instruction-btn primary",onClick:N[8]||(N[8]=ge=>D(a).advance())},C(((kt=D(a).currentStep.value)==null?void 0:kt.type)==="rotate"?"Rotate":"Next")+"  ",1)):B("",!0),D(a).isComplete.value&&z.value<oe.value.length-1?(p(),h("button",{key:4,class:"next-deal-btn",onClick:We}," Next Deal  ")):B("",!0)])])):(Qe=te.value)!=null&&Qe.commentary?(p(),h("div",{key:2,class:"display-commentary",innerHTML:D(Ps)(D(dn)(D(qv)(te.value.commentary)))},null,8,I$)):B("",!0),!D(a).hasSteps.value&&D(a).isComplete.value&&z.value<oe.value.length-1?(p(),h("div",R$,[c("button",{class:"next-deal-btn",onClick:We}," Next Deal  ")])):B("",!0)])]))]),fe(Wy,{visible:i.value,onClose:N[9]||(N[9]=ge=>i.value=!1),onSwitchUser:qe,onLogout:qe,onBecomeTeacher:N[10]||(N[10]=ge=>x.value=!0)},null,8,["visible"]),W.value?(p(),h("div",D$," Account created  your data is encrypted and linked to your email for recovery. ")):B("",!0),u.value?(p(),h("div",{key:1,class:"modal-overlay",onClick:N[12]||(N[12]=Xt(ge=>u.value=!1,["self"]))},[fe(Eb,{onClose:N[11]||(N[11]=ge=>u.value=!1)})])):B("",!0),d.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:N[14]||(N[14]=Xt(ge=>d.value=!1,["self"]))},[fe(g_,{onClose:N[13]||(N[13]=ge=>d.value=!1),onNavigateToDeal:J})])):B("",!0),fe(m0,{visible:P.value,url:ee.value||"",onClose:N[15]||(N[15]=ge=>P.value=!1)},null,8,["visible","url"]),x.value?(p(),Re(o$,{key:3,onClose:N[16]||(N[16]=ge=>x.value=!1),onActivated:Ke})):B("",!0),fe(i$)])):(p(),Re(cy,{key:0,onUserReady:Ee}))}}},L$=()=>Ef(()=>import("./JoinClassroomView-C_ZQQoKD.js"),__vite__mapDeps([0,1])),B$=[{path:"/join/:joinCode",name:"join",component:L$},{path:"/:pathMatch(.*)*",name:"app",component:P$}],U$=Uv({history:hv(),routes:B$}),Zc=Cf(Nf);Zc.use(U$);Zc.mount("#app");export{he as _,c as a,fe as b,h as c,B as d,ks as e,ho as f,Be as g,Jn as h,ad as i,lc as j,Mv as k,p as l,$t as o,O as r,C as t,M$ as u,Hu as w};
