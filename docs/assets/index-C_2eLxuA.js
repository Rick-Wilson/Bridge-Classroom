const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-LRmxZN1o.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ne={},Xs=[],Wt=()=>{},ui=()=>!1,Jo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),fr=e=>e.startsWith("onUpdate:"),nt=Object.assign,mr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Pu=Object.prototype.hasOwnProperty,xe=(e,t)=>Pu.call(e,t),he=Array.isArray,Qs=e=>so(e)==="[object Map]",vn=e=>so(e)==="[object Set]",Xr=e=>so(e)==="[object Date]",be=e=>typeof e=="function",Ke=e=>typeof e=="string",Pt=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",di=e=>(Te(e)||be(e))&&be(e.then)&&be(e.catch),fi=Object.prototype.toString,so=e=>fi.call(e),Du=e=>so(e).slice(8,-1),mi=e=>so(e)==="[object Object]",pr=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,In=dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yo=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Lu=/-\w/g,Tt=Yo(e=>e.replace(Lu,t=>t.slice(1).toUpperCase())),Bu=/\B([A-Z])/g,_s=Yo(e=>e.replace(Bu,"-$1").toLowerCase()),qo=Yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),da=Yo(e=>e?`on${qo(e)}`:""),ps=(e,t)=>!Object.is(e,t),Co=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Xo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Qr;const Qo=()=>Qr||(Qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dt(e){if(he(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ke(n)?ju(n):dt(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Ke(e)||Te(e))return e}const Uu=/;(?![^(]*\))/g,Mu=/:([^]+)/,Fu=/\/\*[^]*?\*\//g;function ju(e){const t={};return e.replace(Fu,"").split(Uu).forEach(s=>{if(s){const n=s.split(Mu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function de(e){let t="";if(Ke(e))t=e;else if(he(e))for(let s=0;s<e.length;s++){const n=de(e[s]);n&&(t+=n+" ")}else if(Te(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Hu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Wu=dr(Hu);function vi(e){return!!e||e===""}function Vu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Bs(e[n],t[n]);return s}function Bs(e,t){if(e===t)return!0;let s=Xr(e),n=Xr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Pt(e),n=Pt(t),s||n)return e===t;if(s=he(e),n=he(t),s||n)return s&&n?Vu(e,t):!1;if(s=Te(e),n=Te(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const l=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(l&&!c||!l&&c||!Bs(e[r],t[r]))return!1}}return String(e)===String(t)}function vr(e,t){return e.findIndex(s=>Bs(s,t))}const hi=e=>!!(e&&e.__v_isRef===!0),S=e=>Ke(e)?e:e==null?"":he(e)||Te(e)&&(e.toString===fi||!be(e.toString))?hi(e)?S(e.value):JSON.stringify(e,gi,2):String(e),gi=(e,t)=>hi(t)?gi(e,t.value):Qs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[fa(n,a)+" =>"]=o,s),{})}:vn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>fa(s))}:Pt(t)?fa(t):Te(t)&&!he(t)&&!mi(t)?String(t):t,fa=(e,t="")=>{var s;return Pt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pt;class Ku{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=pt,!t&&pt&&(this.index=(pt.scopes||(pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=pt;try{return pt=this,t()}finally{pt=s}}}on(){++this._on===1&&(this.prevScope=pt,pt=this)}off(){this._on>0&&--this._on===0&&(pt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Gu(){return pt}let Oe;const ma=new WeakSet;class yi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,pt&&pt.active&&pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ma.has(this)&&(ma.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_i(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zr(this),wi(this);const t=Oe,s=It;Oe=this,It=!0;try{return this.fn()}finally{Ci(this),Oe=t,It=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)yr(t);this.deps=this.depsTail=void 0,Zr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ma.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pa(this)&&this.run()}get dirty(){return Pa(this)}}let bi=0,Rn,Pn;function _i(e,t=!1){if(e.flags|=8,t){e.next=Pn,Pn=e;return}e.next=Rn,Rn=e}function hr(){bi++}function gr(){if(--bi>0)return;if(Pn){let t=Pn;for(Pn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Rn;){let t=Rn;for(Rn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function wi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ci(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),yr(n),zu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Pa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Si(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Si(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Vn)||(e.globalVersion=Vn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Pa(e))))return;e.flags|=2;const t=e.dep,s=Oe,n=It;Oe=e,It=!0;try{wi(e);const o=e.fn(e._value);(t.version===0||ps(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Oe=s,It=n,Ci(e),e.flags&=-3}}function yr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)yr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function zu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let It=!0;const $i=[];function ss(){$i.push(It),It=!1}function ns(){const e=$i.pop();It=e===void 0?!0:e}function Zr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Oe;Oe=void 0;try{t()}finally{Oe=s}}}let Vn=0;class Ju{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class br{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Oe||!It||Oe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Oe)s=this.activeLink=new Ju(Oe,this),Oe.deps?(s.prevDep=Oe.depsTail,Oe.depsTail.nextDep=s,Oe.depsTail=s):Oe.deps=Oe.depsTail=s,ki(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Oe.depsTail,s.nextDep=void 0,Oe.depsTail.nextDep=s,Oe.depsTail=s,Oe.deps===s&&(Oe.deps=n)}return s}trigger(t){this.version++,Vn++,this.notify(t)}notify(t){hr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{gr()}}}function ki(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)ki(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Da=new WeakMap,Ps=Symbol(""),La=Symbol(""),Kn=Symbol("");function rt(e,t,s){if(It&&Oe){let n=Da.get(e);n||Da.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new br),o.map=n,o.key=s),o.track()}}function Xt(e,t,s,n,o,a){const r=Da.get(e);if(!r){Vn++;return}const l=c=>{c&&c.trigger()};if(hr(),t==="clear")r.forEach(l);else{const c=he(e),u=c&&pr(s);if(c&&s==="length"){const d=Number(n);r.forEach((f,p)=>{(p==="length"||p===Kn||!Pt(p)&&p>=d)&&l(f)})}else switch((s!==void 0||r.has(void 0))&&l(r.get(s)),u&&l(r.get(Kn)),t){case"add":c?u&&l(r.get("length")):(l(r.get(Ps)),Qs(e)&&l(r.get(La)));break;case"delete":c||(l(r.get(Ps)),Qs(e)&&l(r.get(La)));break;case"set":Qs(e)&&l(r.get(Ps));break}}gr()}function Fs(e){const t=ke(e);return t===e?t:(rt(t,"iterate",Kn),At(e)?t:t.map(Dt))}function Zo(e){return rt(e=ke(e),"iterate",Kn),e}function cs(e,t){return os(e)?nn(Ds(e)?Dt(t):t):Dt(t)}const Yu={__proto__:null,[Symbol.iterator](){return pa(this,Symbol.iterator,e=>cs(this,e))},concat(...e){return Fs(this).concat(...e.map(t=>he(t)?Fs(t):t))},entries(){return pa(this,"entries",e=>(e[1]=cs(this,e[1]),e))},every(e,t){return zt(this,"every",e,t,void 0,arguments)},filter(e,t){return zt(this,"filter",e,t,s=>s.map(n=>cs(this,n)),arguments)},find(e,t){return zt(this,"find",e,t,s=>cs(this,s),arguments)},findIndex(e,t){return zt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return zt(this,"findLast",e,t,s=>cs(this,s),arguments)},findLastIndex(e,t){return zt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return zt(this,"forEach",e,t,void 0,arguments)},includes(...e){return va(this,"includes",e)},indexOf(...e){return va(this,"indexOf",e)},join(e){return Fs(this).join(e)},lastIndexOf(...e){return va(this,"lastIndexOf",e)},map(e,t){return zt(this,"map",e,t,void 0,arguments)},pop(){return yn(this,"pop")},push(...e){return yn(this,"push",e)},reduce(e,...t){return el(this,"reduce",e,t)},reduceRight(e,...t){return el(this,"reduceRight",e,t)},shift(){return yn(this,"shift")},some(e,t){return zt(this,"some",e,t,void 0,arguments)},splice(...e){return yn(this,"splice",e)},toReversed(){return Fs(this).toReversed()},toSorted(e){return Fs(this).toSorted(e)},toSpliced(...e){return Fs(this).toSpliced(...e)},unshift(...e){return yn(this,"unshift",e)},values(){return pa(this,"values",e=>cs(this,e))}};function pa(e,t,s){const n=Zo(e),o=n[t]();return n!==e&&!At(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const qu=Array.prototype;function zt(e,t,s,n,o,a){const r=Zo(e),l=r!==e&&!At(e),c=r[t];if(c!==qu[t]){const f=c.apply(e,a);return l?Dt(f):f}let u=s;r!==e&&(l?u=function(f,p){return s.call(this,cs(e,f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const d=c.call(r,u,n);return l&&o?o(d):d}function el(e,t,s,n){const o=Zo(e);let a=s;return o!==e&&(At(e)?s.length>3&&(a=function(r,l,c){return s.call(this,r,l,c,e)}):a=function(r,l,c){return s.call(this,r,cs(e,l),c,e)}),o[t](a,...n)}function va(e,t,s){const n=ke(e);rt(n,"iterate",Kn);const o=n[t](...s);return(o===-1||o===!1)&&Cr(s[0])?(s[0]=ke(s[0]),n[t](...s)):o}function yn(e,t,s=[]){ss(),hr();const n=ke(e)[t].apply(e,s);return gr(),ns(),n}const Xu=dr("__proto__,__v_isRef,__isVue"),xi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pt));function Qu(e){Pt(e)||(e=String(e));const t=ke(this);return rt(t,"has",e),t.hasOwnProperty(e)}class Ai{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?id:Oi:a?Ei:Ti).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=he(t);if(!o){let c;if(r&&(c=Yu[s]))return c;if(s==="hasOwnProperty")return Qu}const l=Reflect.get(t,s,it(t)?t:n);if((Pt(s)?xi.has(s):Xu(s))||(o||rt(t,"get",s),a))return l;if(it(l)){const c=r&&pr(s)?l:l.value;return o&&Te(c)?Ua(c):c}return Te(l)?o?Ua(l):Vt(l):l}}class Ni extends Ai{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=he(t)&&pr(s);if(!this._isShallow){const u=os(a);if(!At(n)&&!os(n)&&(a=ke(a),n=ke(n)),!r&&it(a)&&!it(n))return u||(a.value=n),!0}const l=r?Number(s)<t.length:xe(t,s),c=Reflect.set(t,s,n,it(t)?t:o);return t===ke(o)&&(l?ps(n,a)&&Xt(t,"set",s,n):Xt(t,"add",s,n)),c}deleteProperty(t,s){const n=xe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Xt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Pt(s)||!xi.has(s))&&rt(t,"has",s),n}ownKeys(t){return rt(t,"iterate",he(t)?"length":Ps),Reflect.ownKeys(t)}}class Zu extends Ai{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const ed=new Ni,td=new Zu,sd=new Ni(!0);const Ba=e=>e,po=e=>Reflect.getPrototypeOf(e);function nd(e,t,s){return function(...n){const o=this.__v_raw,a=ke(o),r=Qs(a),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,u=o[e](...n),d=s?Ba:t?nn:Dt;return!t&&rt(a,"iterate",c?La:Ps),nt(Object.create(u),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:l?[d(f[0]),d(f[1])]:d(f),done:p}}})}}function vo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function od(e,t){const s={get(o){const a=this.__v_raw,r=ke(a),l=ke(o);e||(ps(o,l)&&rt(r,"get",o),rt(r,"get",l));const{has:c}=po(r),u=t?Ba:e?nn:Dt;if(c.call(r,o))return u(a.get(o));if(c.call(r,l))return u(a.get(l));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&rt(ke(o),"iterate",Ps),o.size},has(o){const a=this.__v_raw,r=ke(a),l=ke(o);return e||(ps(o,l)&&rt(r,"has",o),rt(r,"has",l)),o===l?a.has(o):a.has(o)||a.has(l)},forEach(o,a){const r=this,l=r.__v_raw,c=ke(l),u=t?Ba:e?nn:Dt;return!e&&rt(c,"iterate",Ps),l.forEach((d,f)=>o.call(a,u(d),u(f),r))}};return nt(s,e?{add:vo("add"),set:vo("set"),delete:vo("delete"),clear:vo("clear")}:{add(o){!t&&!At(o)&&!os(o)&&(o=ke(o));const a=ke(this);return po(a).has.call(a,o)||(a.add(o),Xt(a,"add",o,o)),this},set(o,a){!t&&!At(a)&&!os(a)&&(a=ke(a));const r=ke(this),{has:l,get:c}=po(r);let u=l.call(r,o);u||(o=ke(o),u=l.call(r,o));const d=c.call(r,o);return r.set(o,a),u?ps(a,d)&&Xt(r,"set",o,a):Xt(r,"add",o,a),this},delete(o){const a=ke(this),{has:r,get:l}=po(a);let c=r.call(a,o);c||(o=ke(o),c=r.call(a,o)),l&&l.call(a,o);const u=a.delete(o);return c&&Xt(a,"delete",o,void 0),u},clear(){const o=ke(this),a=o.size!==0,r=o.clear();return a&&Xt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=nd(o,e,t)}),s}function _r(e,t){const s=od(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(xe(s,o)&&o in n?s:n,o,a)}const ad={get:_r(!1,!1)},rd={get:_r(!1,!0)},ld={get:_r(!0,!1)};const Ti=new WeakMap,Ei=new WeakMap,Oi=new WeakMap,id=new WeakMap;function cd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ud(e){return e.__v_skip||!Object.isExtensible(e)?0:cd(Du(e))}function Vt(e){return os(e)?e:wr(e,!1,ed,ad,Ti)}function Ii(e){return wr(e,!1,sd,rd,Ei)}function Ua(e){return wr(e,!0,td,ld,Oi)}function wr(e,t,s,n,o){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=ud(e);if(a===0)return e;const r=o.get(e);if(r)return r;const l=new Proxy(e,a===2?n:s);return o.set(e,l),l}function Ds(e){return os(e)?Ds(e.__v_raw):!!(e&&e.__v_isReactive)}function os(e){return!!(e&&e.__v_isReadonly)}function At(e){return!!(e&&e.__v_isShallow)}function Cr(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function dd(e){return!xe(e,"__v_skip")&&Object.isExtensible(e)&&pi(e,"__v_skip",!0),e}const Dt=e=>Te(e)?Vt(e):e,nn=e=>Te(e)?Ua(e):e;function it(e){return e?e.__v_isRef===!0:!1}function O(e){return Ri(e,!1)}function fd(e){return Ri(e,!0)}function Ri(e,t){return it(e)?e:new md(e,t)}class md{constructor(t,s){this.dep=new br,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ke(t),this._value=s?t:Dt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||At(t)||os(t);t=n?t:ke(t),ps(t,s)&&(this._rawValue=t,this._value=n?t:Dt(t),this.dep.trigger())}}function P(e){return it(e)?e.value:e}const pd={get:(e,t,s)=>t==="__v_raw"?e:P(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return it(o)&&!it(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Pi(e){return Ds(e)?e:new Proxy(e,pd)}class vd{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new br(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Vn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Oe!==this)return _i(this,!0),!0}get value(){const t=this.dep.track();return Si(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function hd(e,t,s=!1){let n,o;return be(e)?n=e:(n=e.get,o=e.set),new vd(n,o,s)}const ho={},No=new WeakMap;let Os;function gd(e,t=!1,s=Os){if(s){let n=No.get(s);n||No.set(s,n=[]),n.push(e)}}function yd(e,t,s=Ne){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:l,call:c}=s,u=I=>o?I:At(I)||o===!1||o===0?Qt(I,1):Qt(I);let d,f,p,m,g=!1,y=!1;if(it(e)?(f=()=>e.value,g=At(e)):Ds(e)?(f=()=>u(e),g=!0):he(e)?(y=!0,g=e.some(I=>Ds(I)||At(I)),f=()=>e.map(I=>{if(it(I))return I.value;if(Ds(I))return u(I);if(be(I))return c?c(I,2):I()})):be(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){ss();try{p()}finally{ns()}}const I=Os;Os=d;try{return c?c(e,3,[m]):e(m)}finally{Os=I}}:f=Wt,t&&o){const I=f,X=o===!0?1/0:o;f=()=>Qt(I(),X)}const T=Gu(),C=()=>{d.stop(),T&&T.active&&mr(T.effects,d)};if(a&&t){const I=t;t=(...X)=>{I(...X),C()}}let _=y?new Array(e.length).fill(ho):ho;const b=I=>{if(!(!(d.flags&1)||!d.dirty&&!I))if(t){const X=d.run();if(o||g||(y?X.some((Z,L)=>ps(Z,_[L])):ps(X,_))){p&&p();const Z=Os;Os=d;try{const L=[X,_===ho?void 0:y&&_[0]===ho?[]:_,m];_=X,c?c(t,3,L):t(...L)}finally{Os=Z}}}else d.run()};return l&&l(b),d=new yi(f),d.scheduler=r?()=>r(b,!1):b,m=I=>gd(I,!1,d),p=d.onStop=()=>{const I=No.get(d);if(I){if(c)c(I,4);else for(const X of I)X();No.delete(d)}},t?n?b(!0):_=d.run():r?r(b.bind(null,!0),!0):d.run(),C.pause=d.pause.bind(d),C.resume=d.resume.bind(d),C.stop=C,C}function Qt(e,t=1/0,s){if(t<=0||!Te(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,it(e))Qt(e.value,t,s);else if(he(e))for(let n=0;n<e.length;n++)Qt(e[n],t,s);else if(vn(e)||Qs(e))e.forEach(n=>{Qt(n,t,s)});else if(mi(e)){for(const n in e)Qt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Qt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function no(e,t,s,n){try{return n?e(...n):e()}catch(o){ea(o,t,s)}}function Kt(e,t,s,n){if(be(e)){const o=no(e,t,s,n);return o&&di(o)&&o.catch(a=>{ea(a,t,s)}),o}if(he(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Kt(e[a],t,s,n));return o}}function ea(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ne;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,u)===!1)return}l=l.parent}if(a){ss(),no(a,null,10,[e,c,u]),ns();return}}bd(e,s,o,n,r)}function bd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const ft=[];let Ft=-1;const Zs=[];let us=null,Ws=0;const Di=Promise.resolve();let To=null;function Gn(e){const t=To||Di;return e?t.then(this?e.bind(this):e):t}function _d(e){let t=Ft+1,s=ft.length;for(;t<s;){const n=t+s>>>1,o=ft[n],a=zn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Sr(e){if(!(e.flags&1)){const t=zn(e),s=ft[ft.length-1];!s||!(e.flags&2)&&t>=zn(s)?ft.push(e):ft.splice(_d(t),0,e),e.flags|=1,Li()}}function Li(){To||(To=Di.then(Ui))}function wd(e){he(e)?Zs.push(...e):us&&e.id===-1?us.splice(Ws+1,0,e):e.flags&1||(Zs.push(e),e.flags|=1),Li()}function tl(e,t,s=Ft+1){for(;s<ft.length;s++){const n=ft[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ft.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Bi(e){if(Zs.length){const t=[...new Set(Zs)].sort((s,n)=>zn(s)-zn(n));if(Zs.length=0,us){us.push(...t);return}for(us=t,Ws=0;Ws<us.length;Ws++){const s=us[Ws];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}us=null,Ws=0}}const zn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ui(e){try{for(Ft=0;Ft<ft.length;Ft++){const t=ft[Ft];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),no(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ft<ft.length;Ft++){const t=ft[Ft];t&&(t.flags&=-2)}Ft=-1,ft.length=0,Bi(),To=null,(ft.length||Zs.length)&&Ui()}}let tt=null,Mi=null;function Eo(e){const t=tt;return tt=e,Mi=e&&e.type.__scopeId||null,t}function Cd(e,t=tt,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Ro(-1);const a=Eo(t);let r;try{r=e(...o)}finally{Eo(a),n._d&&Ro(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Pe(e,t){if(tt===null)return e;const s=oa(tt),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,l,c=Ne]=t[o];a&&(be(a)&&(a={mounted:a,updated:a}),a.deep&&Qt(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function Cs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const l=o[r];a&&(l.oldValue=a[r].value);let c=l.dir[n];c&&(ss(),Kt(c,s,8,[e.el,l,e,t]),ns())}}function So(e,t){if(lt){let s=lt.provides;const n=lt.parent&&lt.parent.provides;n===s&&(s=lt.provides=Object.create(n)),s[e]=t}}function Rt(e,t,s=!1){const n=$f();if(n||tn){let o=tn?tn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&be(t)?t.call(n&&n.proxy):t}}const Sd=Symbol.for("v-scx"),$d=()=>Rt(Sd);function vt(e,t,s){return Fi(e,t,s)}function Fi(e,t,s=Ne){const{immediate:n,deep:o,flush:a,once:r}=s,l=nt({},s),c=t&&n||!t&&a!=="post";let u;if(qn){if(a==="sync"){const m=$d();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=Wt,m.resume=Wt,m.pause=Wt,m}}const d=lt;l.call=(m,g,y)=>Kt(m,d,g,y);let f=!1;a==="post"?l.scheduler=m=>{bt(m,d&&d.suspense)}:a!=="sync"&&(f=!0,l.scheduler=(m,g)=>{g?m():Sr(m)}),l.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const p=yd(e,t,l);return qn&&(u?u.push(p):c&&p()),p}function kd(e,t,s){const n=this.proxy,o=Ke(e)?e.includes(".")?ji(n,e):()=>n[e]:e.bind(n,n);let a;be(t)?a=t:(a=t.handler,s=t);const r=oo(this),l=Fi(o,a.bind(n),s);return r(),l}function ji(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const xd=Symbol("_vte"),Ad=e=>e.__isTeleport,Nd=Symbol("_leaveCb");function $r(e,t){e.shapeFlag&6&&e.component?(e.transition=t,$r(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Hi(e,t){return be(e)?nt({name:e.name},t,{setup:e}):e}function Wi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Oo=new WeakMap;function Dn(e,t,s,n,o=!1){if(he(e)){e.forEach((g,y)=>Dn(g,t&&(he(t)?t[y]:t),s,n,o));return}if(en(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Dn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?oa(n.component):n.el,r=o?null:a,{i:l,r:c}=e,u=t&&t.r,d=l.refs===Ne?l.refs={}:l.refs,f=l.setupState,p=ke(f),m=f===Ne?ui:g=>xe(p,g);if(u!=null&&u!==c){if(sl(t),Ke(u))d[u]=null,m(u)&&(f[u]=null);else if(it(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(be(c))no(c,l,12,[r,d]);else{const g=Ke(c),y=it(c);if(g||y){const T=()=>{if(e.f){const C=g?m(c)?f[c]:d[c]:c.value;if(o)he(C)&&mr(C,a);else if(he(C))C.includes(a)||C.push(a);else if(g)d[c]=[a],m(c)&&(f[c]=d[c]);else{const _=[a];c.value=_,e.k&&(d[e.k]=_)}}else g?(d[c]=r,m(c)&&(f[c]=r)):y&&(c.value=r,e.k&&(d[e.k]=r))};if(r){const C=()=>{T(),Oo.delete(e)};C.id=-1,Oo.set(e,C),bt(C,s)}else sl(e),T()}}}function sl(e){const t=Oo.get(e);t&&(t.flags|=8,Oo.delete(e))}Qo().requestIdleCallback;Qo().cancelIdleCallback;const en=e=>!!e.type.__asyncLoader,Vi=e=>e.type.__isKeepAlive;function Td(e,t){Ki(e,"a",t)}function Ed(e,t){Ki(e,"da",t)}function Ki(e,t,s=lt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ta(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Vi(o.parent.vnode)&&Od(n,t,s,o),o=o.parent}}function Od(e,t,s,n){const o=ta(t,e,n,!0);kr(()=>{mr(n[t],o)},s)}function ta(e,t,s=lt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{ss();const l=oo(s),c=Kt(t,s,e,r);return l(),ns(),c});return n?o.unshift(a):o.push(a),a}}const rs=e=>(t,s=lt)=>{(!qn||e==="sp")&&ta(e,(...n)=>t(...n),s)},Id=rs("bm"),St=rs("m"),Rd=rs("bu"),Pd=rs("u"),Gi=rs("bum"),kr=rs("um"),Dd=rs("sp"),Ld=rs("rtg"),Bd=rs("rtc");function Ud(e,t=lt){ta("ec",e,t)}const Md="components";function Fd(e,t){return Hd(Md,e,!0,t)||e}const jd=Symbol.for("v-ndc");function Hd(e,t,s=!0,n=!1){const o=tt||lt;if(o){const a=o.type;{const l=Tf(a,!1);if(l&&(l===t||l===Tt(t)||l===qo(Tt(t))))return a}const r=nl(o[e]||a[e],t)||nl(o.appContext[e],t);return!r&&n?a:r}}function nl(e,t){return e&&(e[t]||e[Tt(t)]||e[qo(Tt(t))])}function le(e,t,s,n){let o;const a=s,r=he(e);if(r||Ke(e)){const l=r&&Ds(e);let c=!1,u=!1;l&&(c=!At(e),u=os(e),e=Zo(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(c?u?nn(Dt(e[d])):Dt(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,a)}else if(Te(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,a));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];o[c]=t(e[d],d,c,a)}}else o=[];return o}function Wd(e,t,s={},n,o){if(tt.ce||tt.parent&&en(tt.parent)&&tt.parent.ce){const u=Object.keys(s).length>0;return s.name=t,v(),Ue(ee,null,[ge("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),v();const r=a&&zi(a(s)),l=s.key||r&&r.key,c=Ue(ee,{key:(l&&!Pt(l)?l:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),c}function zi(e){return e.some(t=>Yn(t)?!(t.type===as||t.type===ee&&!zi(t.children)):!0)?e:null}const Ma=e=>e?fc(e)?oa(e):Ma(e.parent):null,Ln=nt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ma(e.parent),$root:e=>Ma(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Yi(e),$forceUpdate:e=>e.f||(e.f=()=>{Sr(e.update)}),$nextTick:e=>e.n||(e.n=Gn.bind(e.proxy)),$watch:e=>kd.bind(e)}),ha=(e,t)=>e!==Ne&&!e.__isScriptSetup&&xe(e,t),Vd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:l,appContext:c}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ha(n,t))return r[t]=1,n[t];if(o!==Ne&&xe(o,t))return r[t]=2,o[t];if(xe(a,t))return r[t]=3,a[t];if(s!==Ne&&xe(s,t))return r[t]=4,s[t];Fa&&(r[t]=0)}}const u=Ln[t];let d,f;if(u)return t==="$attrs"&&rt(e.attrs,"get",""),u(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(s!==Ne&&xe(s,t))return r[t]=4,s[t];if(f=c.config.globalProperties,xe(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ha(o,t)?(o[t]=s,!0):n!==Ne&&xe(n,t)?(n[t]=s,!0):xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},l){let c;return!!(s[l]||e!==Ne&&l[0]!=="$"&&xe(e,l)||ha(t,l)||xe(a,l)||xe(n,l)||xe(Ln,l)||xe(o.config.globalProperties,l)||(c=r.__cssModules)&&c[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:xe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function ol(e){return he(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Fa=!0;function Kd(e){const t=Yi(e),s=e.proxy,n=e.ctx;Fa=!1,t.beforeCreate&&al(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:T,beforeDestroy:C,beforeUnmount:_,destroyed:b,unmounted:I,render:X,renderTracked:Z,renderTriggered:L,errorCaptured:Y,serverPrefetch:J,expose:fe,inheritAttrs:me,components:ue,directives:_e,filters:Ae}=t;if(u&&Gd(u,n,null),r)for(const q in r){const K=r[q];be(K)&&(n[q]=K.bind(s))}if(o){const q=o.call(s,s);Te(q)&&(e.data=Vt(q))}if(Fa=!0,a)for(const q in a){const K=a[q],H=be(K)?K.bind(s,s):be(K.get)?K.get.bind(s,s):Wt,G=!be(K)&&be(K.set)?K.set.bind(s):Wt,U=E({get:H,set:G});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>U.value,set:oe=>U.value=oe})}if(l)for(const q in l)Ji(l[q],n,s,q);if(c){const q=be(c)?c.call(s):c;Reflect.ownKeys(q).forEach(K=>{So(K,q[K])})}d&&al(d,e,"c");function ie(q,K){he(K)?K.forEach(H=>q(H.bind(s))):K&&q(K.bind(s))}if(ie(Id,f),ie(St,p),ie(Rd,m),ie(Pd,g),ie(Td,y),ie(Ed,T),ie(Ud,Y),ie(Bd,Z),ie(Ld,L),ie(Gi,_),ie(kr,I),ie(Dd,J),he(fe))if(fe.length){const q=e.exposed||(e.exposed={});fe.forEach(K=>{Object.defineProperty(q,K,{get:()=>s[K],set:H=>s[K]=H,enumerable:!0})})}else e.exposed||(e.exposed={});X&&e.render===Wt&&(e.render=X),me!=null&&(e.inheritAttrs=me),ue&&(e.components=ue),_e&&(e.directives=_e),J&&Wi(e)}function Gd(e,t,s=Wt){he(e)&&(e=ja(e));for(const n in e){const o=e[n];let a;Te(o)?"default"in o?a=Rt(o.from||n,o.default,!0):a=Rt(o.from||n):a=Rt(o),it(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function al(e,t,s){Kt(he(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ji(e,t,s,n){let o=n.includes(".")?ji(s,n):()=>s[n];if(Ke(e)){const a=t[e];be(a)&&vt(o,a)}else if(be(e))vt(o,e.bind(s));else if(Te(e))if(he(e))e.forEach(a=>Ji(a,t,s,n));else{const a=be(e.handler)?e.handler.bind(s):t[e.handler];be(a)&&vt(o,a,e)}}function Yi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,l=a.get(t);let c;return l?c=l:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(u=>Io(c,u,r,!0)),Io(c,t,r)),Te(t)&&a.set(t,c),c}function Io(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&Io(e,a,s,!0),o&&o.forEach(r=>Io(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const l=zd[r]||s&&s[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const zd={data:rl,props:ll,emits:ll,methods:Nn,computed:Nn,beforeCreate:ct,created:ct,beforeMount:ct,mounted:ct,beforeUpdate:ct,updated:ct,beforeDestroy:ct,beforeUnmount:ct,destroyed:ct,unmounted:ct,activated:ct,deactivated:ct,errorCaptured:ct,serverPrefetch:ct,components:Nn,directives:Nn,watch:Yd,provide:rl,inject:Jd};function rl(e,t){return t?e?function(){return nt(be(e)?e.call(this,this):e,be(t)?t.call(this,this):t)}:t:e}function Jd(e,t){return Nn(ja(e),ja(t))}function ja(e){if(he(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ct(e,t){return e?[...new Set([].concat(e,t))]:t}function Nn(e,t){return e?nt(Object.create(null),e,t):t}function ll(e,t){return e?he(e)&&he(t)?[...new Set([...e,...t])]:nt(Object.create(null),ol(e),ol(t??{})):t}function Yd(e,t){if(!e)return t;if(!t)return e;const s=nt(Object.create(null),e);for(const n in t)s[n]=ct(e[n],t[n]);return s}function qi(){return{app:null,config:{isNativeTag:ui,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qd=0;function Xd(e,t){return function(n,o=null){be(n)||(n=nt({},n)),o!=null&&!Te(o)&&(o=null);const a=qi(),r=new WeakSet,l=[];let c=!1;const u=a.app={_uid:qd++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Of,get config(){return a.config},set config(d){},use(d,...f){return r.has(d)||(d&&be(d.install)?(r.add(d),d.install(u,...f)):be(d)&&(r.add(d),d(u,...f))),u},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),u},component(d,f){return f?(a.components[d]=f,u):a.components[d]},directive(d,f){return f?(a.directives[d]=f,u):a.directives[d]},mount(d,f,p){if(!c){const m=u._ceVNode||ge(n,o);return m.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(m,d,p),c=!0,u._container=d,d.__vue_app__=u,oa(m.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Kt(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return a.provides[d]=f,u},runWithContext(d){const f=tn;tn=u;try{return d()}finally{tn=f}}};return u}}let tn=null;const Qd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tt(t)}Modifiers`]||e[`${_s(t)}Modifiers`];function Zd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ne;let o=s;const a=t.startsWith("update:"),r=a&&Qd(n,t.slice(7));r&&(r.trim&&(o=s.map(d=>Ke(d)?d.trim():d)),r.number&&(o=s.map(Xo)));let l,c=n[l=da(t)]||n[l=da(Tt(t))];!c&&a&&(c=n[l=da(_s(t))]),c&&Kt(c,e,6,o);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Kt(u,e,6,o)}}const ef=new WeakMap;function Xi(e,t,s=!1){const n=s?ef:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},l=!1;if(!be(e)){const c=u=>{const d=Xi(u,t,!0);d&&(l=!0,nt(r,d))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!l?(Te(e)&&n.set(e,null),null):(he(a)?a.forEach(c=>r[c]=null):nt(r,a),Te(e)&&n.set(e,r),r)}function sa(e,t){return!e||!Jo(t)?!1:(t=t.slice(2).replace(/Once$/,""),xe(e,t[0].toLowerCase()+t.slice(1))||xe(e,_s(t))||xe(e,t))}function il(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:l,emit:c,render:u,renderCache:d,props:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=e,T=Eo(e);let C,_;try{if(s.shapeFlag&4){const I=o||n,X=I;C=jt(u.call(X,I,d,f,m,p,g)),_=l}else{const I=t;C=jt(I.length>1?I(f,{attrs:l,slots:r,emit:c}):I(f,null)),_=t.props?l:tf(l)}}catch(I){Bn.length=0,ea(I,e,1),C=ge(as)}let b=C;if(_&&y!==!1){const I=Object.keys(_),{shapeFlag:X}=b;I.length&&X&7&&(a&&I.some(fr)&&(_=sf(_,a)),b=on(b,_,!1,!0))}return s.dirs&&(b=on(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&$r(b,s.transition),C=b,Eo(T),C}const tf=e=>{let t;for(const s in e)(s==="class"||s==="style"||Jo(s))&&((t||(t={}))[s]=e[s]);return t},sf=(e,t)=>{const s={};for(const n in e)(!fr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function nf(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:l,patchFlag:c}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?cl(n,r,u):!!r;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(r[p]!==n[p]&&!sa(u,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===r?!1:n?r?cl(n,r,u):!0:!!r;return!1}function cl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!sa(s,a))return!0}return!1}function of({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Qi={},Zi=()=>Object.create(Qi),ec=e=>Object.getPrototypeOf(e)===Qi;function af(e,t,s,n=!1){const o={},a=Zi();e.propsDefaults=Object.create(null),tc(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:Ii(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function rf(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,l=ke(o),[c]=e.propsOptions;let u=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(sa(e.emitsOptions,p))continue;const m=t[p];if(c)if(xe(a,p))m!==a[p]&&(a[p]=m,u=!0);else{const g=Tt(p);o[g]=Ha(c,l,g,m,e,!1)}else m!==a[p]&&(a[p]=m,u=!0)}}}else{tc(e,t,o,a)&&(u=!0);let d;for(const f in l)(!t||!xe(t,f)&&((d=_s(f))===f||!xe(t,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Ha(c,l,f,void 0,e,!0)):delete o[f]);if(a!==l)for(const f in a)(!t||!xe(t,f))&&(delete a[f],u=!0)}u&&Xt(e.attrs,"set","")}function tc(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(In(c))continue;const u=t[c];let d;o&&xe(o,d=Tt(c))?!a||!a.includes(d)?s[d]=u:(l||(l={}))[d]=u:sa(e.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,r=!0)}if(a){const c=ke(s),u=l||Ne;for(let d=0;d<a.length;d++){const f=a[d];s[f]=Ha(o,c,f,u[f],e,!xe(u,f))}}return r}function Ha(e,t,s,n,o,a){const r=e[s];if(r!=null){const l=xe(r,"default");if(l&&n===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&be(c)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=oo(o);n=u[s]=c.call(null,t),d()}}else n=c;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!l?n=!1:r[1]&&(n===""||n===_s(s))&&(n=!0))}return n}const lf=new WeakMap;function sc(e,t,s=!1){const n=s?lf:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},l=[];let c=!1;if(!be(e)){const d=f=>{c=!0;const[p,m]=sc(f,t,!0);nt(r,p),m&&l.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!c)return Te(e)&&n.set(e,Xs),Xs;if(he(a))for(let d=0;d<a.length;d++){const f=Tt(a[d]);ul(f)&&(r[f]=Ne)}else if(a)for(const d in a){const f=Tt(d);if(ul(f)){const p=a[d],m=r[f]=he(p)||be(p)?{type:p}:nt({},p),g=m.type;let y=!1,T=!0;if(he(g))for(let C=0;C<g.length;++C){const _=g[C],b=be(_)&&_.name;if(b==="Boolean"){y=!0;break}else b==="String"&&(T=!1)}else y=be(g)&&g.name==="Boolean";m[0]=y,m[1]=T,(y||xe(m,"default"))&&l.push(f)}}const u=[r,l];return Te(e)&&n.set(e,u),u}function ul(e){return e[0]!=="$"&&!In(e)}const xr=e=>e==="_"||e==="_ctx"||e==="$stable",Ar=e=>he(e)?e.map(jt):[jt(e)],cf=(e,t,s)=>{if(t._n)return t;const n=Cd((...o)=>Ar(t(...o)),s);return n._c=!1,n},nc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(xr(o))continue;const a=e[o];if(be(a))t[o]=cf(o,a,n);else if(a!=null){const r=Ar(a);t[o]=()=>r}}},oc=(e,t)=>{const s=Ar(t);e.slots.default=()=>s},ac=(e,t,s)=>{for(const n in t)(s||!xr(n))&&(e[n]=t[n])},uf=(e,t,s)=>{const n=e.slots=Zi();if(e.vnode.shapeFlag&32){const o=t._;o?(ac(n,t,s),s&&pi(n,"_",o,!0)):nc(t,n)}else t&&oc(e,t)},df=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=Ne;if(n.shapeFlag&32){const l=t._;l?s&&l===1?a=!1:ac(o,t,s):(a=!t.$stable,nc(t,o)),r=t}else t&&(oc(e,t),r={default:1});if(a)for(const l in o)!xr(l)&&r[l]==null&&delete o[l]},bt=hf;function ff(e){return mf(e)}function mf(e,t){const s=Qo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=Wt,insertStaticContent:g}=e,y=(w,$,R,F=null,V=null,j=null,se=void 0,Q=null,A=!!$.dynamicChildren)=>{if(w===$)return;w&&!bn(w,$)&&(F=W(w),oe(w,V,j,!0),w=null),$.patchFlag===-2&&(A=!1,$.dynamicChildren=null);const{type:x,ref:D,shapeFlag:k}=$;switch(x){case na:T(w,$,R,F);break;case as:C(w,$,R,F);break;case $o:w==null&&_($,R,F,se);break;case ee:ue(w,$,R,F,V,j,se,Q,A);break;default:k&1?X(w,$,R,F,V,j,se,Q,A):k&6?_e(w,$,R,F,V,j,se,Q,A):(k&64||k&128)&&x.process(w,$,R,F,V,j,se,Q,A,ce)}D!=null&&V?Dn(D,w&&w.ref,j,$||w,!$):D==null&&w&&w.ref!=null&&Dn(w.ref,null,j,w,!0)},T=(w,$,R,F)=>{if(w==null)n($.el=l($.children),R,F);else{const V=$.el=w.el;$.children!==w.children&&u(V,$.children)}},C=(w,$,R,F)=>{w==null?n($.el=c($.children||""),R,F):$.el=w.el},_=(w,$,R,F)=>{[w.el,w.anchor]=g(w.children,$,R,F,w.el,w.anchor)},b=({el:w,anchor:$},R,F)=>{let V;for(;w&&w!==$;)V=p(w),n(w,R,F),w=V;n($,R,F)},I=({el:w,anchor:$})=>{let R;for(;w&&w!==$;)R=p(w),o(w),w=R;o($)},X=(w,$,R,F,V,j,se,Q,A)=>{if($.type==="svg"?se="svg":$.type==="math"&&(se="mathml"),w==null)Z($,R,F,V,j,se,Q,A);else{const x=w.el&&w.el._isVueCE?w.el:null;try{x&&x._beginPatch(),J(w,$,V,j,se,Q,A)}finally{x&&x._endPatch()}}},Z=(w,$,R,F,V,j,se,Q)=>{let A,x;const{props:D,shapeFlag:k,transition:N,dirs:M}=w;if(A=w.el=r(w.type,j,D&&D.is,D),k&8?d(A,w.children):k&16&&Y(w.children,A,null,F,V,ga(w,j),se,Q),M&&Cs(w,null,F,"created"),L(A,w,w.scopeId,se,F),D){for(const re in D)re!=="value"&&!In(re)&&a(A,re,null,D[re],j,F);"value"in D&&a(A,"value",null,D.value,j),(x=D.onVnodeBeforeMount)&&Ut(x,F,w)}M&&Cs(w,null,F,"beforeMount");const z=pf(V,N);z&&N.beforeEnter(A),n(A,$,R),((x=D&&D.onVnodeMounted)||z||M)&&bt(()=>{x&&Ut(x,F,w),z&&N.enter(A),M&&Cs(w,null,F,"mounted")},V)},L=(w,$,R,F,V)=>{if(R&&m(w,R),F)for(let j=0;j<F.length;j++)m(w,F[j]);if(V){let j=V.subTree;if($===j||cc(j.type)&&(j.ssContent===$||j.ssFallback===$)){const se=V.vnode;L(w,se,se.scopeId,se.slotScopeIds,V.parent)}}},Y=(w,$,R,F,V,j,se,Q,A=0)=>{for(let x=A;x<w.length;x++){const D=w[x]=Q?ds(w[x]):jt(w[x]);y(null,D,$,R,F,V,j,se,Q)}},J=(w,$,R,F,V,j,se)=>{const Q=$.el=w.el;let{patchFlag:A,dynamicChildren:x,dirs:D}=$;A|=w.patchFlag&16;const k=w.props||Ne,N=$.props||Ne;let M;if(R&&Ss(R,!1),(M=N.onVnodeBeforeUpdate)&&Ut(M,R,$,w),D&&Cs($,w,R,"beforeUpdate"),R&&Ss(R,!0),(k.innerHTML&&N.innerHTML==null||k.textContent&&N.textContent==null)&&d(Q,""),x?fe(w.dynamicChildren,x,Q,R,F,ga($,V),j):se||K(w,$,Q,null,R,F,ga($,V),j,!1),A>0){if(A&16)me(Q,k,N,R,V);else if(A&2&&k.class!==N.class&&a(Q,"class",null,N.class,V),A&4&&a(Q,"style",k.style,N.style,V),A&8){const z=$.dynamicProps;for(let re=0;re<z.length;re++){const ve=z[re],ye=k[ve],pe=N[ve];(pe!==ye||ve==="value")&&a(Q,ve,ye,pe,V,R)}}A&1&&w.children!==$.children&&d(Q,$.children)}else!se&&x==null&&me(Q,k,N,R,V);((M=N.onVnodeUpdated)||D)&&bt(()=>{M&&Ut(M,R,$,w),D&&Cs($,w,R,"updated")},F)},fe=(w,$,R,F,V,j,se)=>{for(let Q=0;Q<$.length;Q++){const A=w[Q],x=$[Q],D=A.el&&(A.type===ee||!bn(A,x)||A.shapeFlag&198)?f(A.el):R;y(A,x,D,null,F,V,j,se,!0)}},me=(w,$,R,F,V)=>{if($!==R){if($!==Ne)for(const j in $)!In(j)&&!(j in R)&&a(w,j,$[j],null,V,F);for(const j in R){if(In(j))continue;const se=R[j],Q=$[j];se!==Q&&j!=="value"&&a(w,j,Q,se,V,F)}"value"in R&&a(w,"value",$.value,R.value,V)}},ue=(w,$,R,F,V,j,se,Q,A)=>{const x=$.el=w?w.el:l(""),D=$.anchor=w?w.anchor:l("");let{patchFlag:k,dynamicChildren:N,slotScopeIds:M}=$;M&&(Q=Q?Q.concat(M):M),w==null?(n(x,R,F),n(D,R,F),Y($.children||[],R,D,V,j,se,Q,A)):k>0&&k&64&&N&&w.dynamicChildren&&w.dynamicChildren.length===N.length?(fe(w.dynamicChildren,N,R,V,j,se,Q),($.key!=null||V&&$===V.subTree)&&rc(w,$,!0)):K(w,$,R,D,V,j,se,Q,A)},_e=(w,$,R,F,V,j,se,Q,A)=>{$.slotScopeIds=Q,w==null?$.shapeFlag&512?V.ctx.activate($,R,F,se,A):Ae($,R,F,V,j,se,A):te(w,$,A)},Ae=(w,$,R,F,V,j,se)=>{const Q=w.component=Sf(w,F,V);if(Vi(w)&&(Q.ctx.renderer=ce),kf(Q,!1,se),Q.asyncDep){if(V&&V.registerDep(Q,ie,se),!w.el){const A=Q.subTree=ge(as);C(null,A,$,R),w.placeholder=A.el}}else ie(Q,w,$,R,V,j,se)},te=(w,$,R)=>{const F=$.component=w.component;if(nf(w,$,R))if(F.asyncDep&&!F.asyncResolved){q(F,$,R);return}else F.next=$,F.update();else $.el=w.el,F.vnode=$},ie=(w,$,R,F,V,j,se)=>{const Q=()=>{if(w.isMounted){let{next:k,bu:N,u:M,parent:z,vnode:re}=w;{const We=lc(w);if(We){k&&(k.el=re.el,q(w,k,se)),We.asyncDep.then(()=>{w.isUnmounted||Q()});return}}let ve=k,ye;Ss(w,!1),k?(k.el=re.el,q(w,k,se)):k=re,N&&Co(N),(ye=k.props&&k.props.onVnodeBeforeUpdate)&&Ut(ye,z,k,re),Ss(w,!0);const pe=il(w),Fe=w.subTree;w.subTree=pe,y(Fe,pe,f(Fe.el),W(Fe),w,V,j),k.el=pe.el,ve===null&&of(w,pe.el),M&&bt(M,V),(ye=k.props&&k.props.onVnodeUpdated)&&bt(()=>Ut(ye,z,k,re),V)}else{let k;const{el:N,props:M}=$,{bm:z,m:re,parent:ve,root:ye,type:pe}=w,Fe=en($);Ss(w,!1),z&&Co(z),!Fe&&(k=M&&M.onVnodeBeforeMount)&&Ut(k,ve,$),Ss(w,!0);{ye.ce&&ye.ce._def.shadowRoot!==!1&&ye.ce._injectChildStyle(pe);const We=w.subTree=il(w);y(null,We,R,F,w,V,j),$.el=We.el}if(re&&bt(re,V),!Fe&&(k=M&&M.onVnodeMounted)){const We=$;bt(()=>Ut(k,ve,We),V)}($.shapeFlag&256||ve&&en(ve.vnode)&&ve.vnode.shapeFlag&256)&&w.a&&bt(w.a,V),w.isMounted=!0,$=R=F=null}};w.scope.on();const A=w.effect=new yi(Q);w.scope.off();const x=w.update=A.run.bind(A),D=w.job=A.runIfDirty.bind(A);D.i=w,D.id=w.uid,A.scheduler=()=>Sr(D),Ss(w,!0),x()},q=(w,$,R)=>{$.component=w;const F=w.vnode.props;w.vnode=$,w.next=null,rf(w,$.props,F,R),df(w,$.children,R),ss(),tl(w),ns()},K=(w,$,R,F,V,j,se,Q,A=!1)=>{const x=w&&w.children,D=w?w.shapeFlag:0,k=$.children,{patchFlag:N,shapeFlag:M}=$;if(N>0){if(N&128){G(x,k,R,F,V,j,se,Q,A);return}else if(N&256){H(x,k,R,F,V,j,se,Q,A);return}}M&8?(D&16&&et(x,V,j),k!==x&&d(R,k)):D&16?M&16?G(x,k,R,F,V,j,se,Q,A):et(x,V,j,!0):(D&8&&d(R,""),M&16&&Y(k,R,F,V,j,se,Q,A))},H=(w,$,R,F,V,j,se,Q,A)=>{w=w||Xs,$=$||Xs;const x=w.length,D=$.length,k=Math.min(x,D);let N;for(N=0;N<k;N++){const M=$[N]=A?ds($[N]):jt($[N]);y(w[N],M,R,null,V,j,se,Q,A)}x>D?et(w,V,j,!0,!1,k):Y($,R,F,V,j,se,Q,A,k)},G=(w,$,R,F,V,j,se,Q,A)=>{let x=0;const D=$.length;let k=w.length-1,N=D-1;for(;x<=k&&x<=N;){const M=w[x],z=$[x]=A?ds($[x]):jt($[x]);if(bn(M,z))y(M,z,R,null,V,j,se,Q,A);else break;x++}for(;x<=k&&x<=N;){const M=w[k],z=$[N]=A?ds($[N]):jt($[N]);if(bn(M,z))y(M,z,R,null,V,j,se,Q,A);else break;k--,N--}if(x>k){if(x<=N){const M=N+1,z=M<D?$[M].el:F;for(;x<=N;)y(null,$[x]=A?ds($[x]):jt($[x]),R,z,V,j,se,Q,A),x++}}else if(x>N)for(;x<=k;)oe(w[x],V,j,!0),x++;else{const M=x,z=x,re=new Map;for(x=z;x<=N;x++){const je=$[x]=A?ds($[x]):jt($[x]);je.key!=null&&re.set(je.key,x)}let ve,ye=0;const pe=N-z+1;let Fe=!1,We=0;const qe=new Array(pe);for(x=0;x<pe;x++)qe[x]=0;for(x=M;x<=k;x++){const je=w[x];if(ye>=pe){oe(je,V,j,!0);continue}let Se;if(je.key!=null)Se=re.get(je.key);else for(ve=z;ve<=N;ve++)if(qe[ve-z]===0&&bn(je,$[ve])){Se=ve;break}Se===void 0?oe(je,V,j,!0):(qe[Se-z]=x+1,Se>=We?We=Se:Fe=!0,y(je,$[Se],R,null,V,j,se,Q,A),ye++)}const Gt=Fe?vf(qe):Xs;for(ve=Gt.length-1,x=pe-1;x>=0;x--){const je=z+x,Se=$[je],ze=$[je+1],Xe=je+1<D?ze.el||ic(ze):F;qe[x]===0?y(null,Se,R,Xe,V,j,se,Q,A):Fe&&(ve<0||x!==Gt[ve]?U(Se,R,Xe,2):ve--)}}},U=(w,$,R,F,V=null)=>{const{el:j,type:se,transition:Q,children:A,shapeFlag:x}=w;if(x&6){U(w.component.subTree,$,R,F);return}if(x&128){w.suspense.move($,R,F);return}if(x&64){se.move(w,$,R,ce);return}if(se===ee){n(j,$,R);for(let k=0;k<A.length;k++)U(A[k],$,R,F);n(w.anchor,$,R);return}if(se===$o){b(w,$,R);return}if(F!==2&&x&1&&Q)if(F===0)Q.beforeEnter(j),n(j,$,R),bt(()=>Q.enter(j),V);else{const{leave:k,delayLeave:N,afterLeave:M}=Q,z=()=>{w.ctx.isUnmounted?o(j):n(j,$,R)},re=()=>{j._isLeaving&&j[Nd](!0),k(j,()=>{z(),M&&M()})};N?N(j,z,re):re()}else n(j,$,R)},oe=(w,$,R,F=!1,V=!1)=>{const{type:j,props:se,ref:Q,children:A,dynamicChildren:x,shapeFlag:D,patchFlag:k,dirs:N,cacheIndex:M}=w;if(k===-2&&(V=!1),Q!=null&&(ss(),Dn(Q,null,R,w,!0),ns()),M!=null&&($.renderCache[M]=void 0),D&256){$.ctx.deactivate(w);return}const z=D&1&&N,re=!en(w);let ve;if(re&&(ve=se&&se.onVnodeBeforeUnmount)&&Ut(ve,$,w),D&6)gt(w.component,R,F);else{if(D&128){w.suspense.unmount(R,F);return}z&&Cs(w,null,$,"beforeUnmount"),D&64?w.type.remove(w,$,R,ce,F):x&&!x.hasOnce&&(j!==ee||k>0&&k&64)?et(x,$,R,!1,!0):(j===ee&&k&384||!V&&D&16)&&et(A,$,R),F&&De(w)}(re&&(ve=se&&se.onVnodeUnmounted)||z)&&bt(()=>{ve&&Ut(ve,$,w),z&&Cs(w,null,$,"unmounted")},R)},De=w=>{const{type:$,el:R,anchor:F,transition:V}=w;if($===ee){Ge(R,F);return}if($===$o){I(w);return}const j=()=>{o(R),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(w.shapeFlag&1&&V&&!V.persisted){const{leave:se,delayLeave:Q}=V,A=()=>se(R,j);Q?Q(w.el,j,A):A()}else j()},Ge=(w,$)=>{let R;for(;w!==$;)R=p(w),o(w),w=R;o($)},gt=(w,$,R)=>{const{bum:F,scope:V,job:j,subTree:se,um:Q,m:A,a:x}=w;dl(A),dl(x),F&&Co(F),V.stop(),j&&(j.flags|=8,oe(se,w,$,R)),Q&&bt(Q,$),bt(()=>{w.isUnmounted=!0},$)},et=(w,$,R,F=!1,V=!1,j=0)=>{for(let se=j;se<w.length;se++)oe(w[se],$,R,F,V)},W=w=>{if(w.shapeFlag&6)return W(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const $=p(w.anchor||w.el),R=$&&$[xd];return R?p(R):$};let ae=!1;const ne=(w,$,R)=>{let F;w==null?$._vnode&&(oe($._vnode,null,null,!0),F=$._vnode.component):y($._vnode||null,w,$,null,null,null,R),$._vnode=w,ae||(ae=!0,tl(F),Bi(),ae=!1)},ce={p:y,um:oe,m:U,r:De,mt:Ae,mc:Y,pc:K,pbc:fe,n:W,o:e};return{render:ne,hydrate:void 0,createApp:Xd(ne)}}function ga({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ss({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function rc(e,t,s=!1){const n=e.children,o=t.children;if(he(n)&&he(o))for(let a=0;a<n.length;a++){const r=n[a];let l=o[a];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[a]=ds(o[a]),l.el=r.el),!s&&l.patchFlag!==-2&&rc(r,l)),l.type===na&&(l.patchFlag!==-1?l.el=r.el:l.__elIndex=a+(e.type===ee?1:0)),l.type===as&&!l.el&&(l.el=r.el)}}function vf(e){const t=e.slice(),s=[0];let n,o,a,r,l;const c=e.length;for(n=0;n<c;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)l=a+r>>1,e[s[l]]<u?a=l+1:r=l;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function lc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:lc(t)}function dl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ic(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ic(t.subTree):null}const cc=e=>e.__isSuspense;function hf(e,t){t&&t.pendingBranch?he(e)?t.effects.push(...e):t.effects.push(e):wd(e)}const ee=Symbol.for("v-fgt"),na=Symbol.for("v-txt"),as=Symbol.for("v-cmt"),$o=Symbol.for("v-stc"),Bn=[];let Ct=null;function v(e=!1){Bn.push(Ct=e?null:[])}function gf(){Bn.pop(),Ct=Bn[Bn.length-1]||null}let Jn=1;function Ro(e,t=!1){Jn+=e,e<0&&Ct&&t&&(Ct.hasOnce=!0)}function uc(e){return e.dynamicChildren=Jn>0?Ct||Xs:null,gf(),Jn>0&&Ct&&Ct.push(e),e}function h(e,t,s,n,o,a){return uc(i(e,t,s,n,o,a,!0))}function Ue(e,t,s,n,o){return uc(ge(e,t,s,n,o,!0))}function Yn(e){return e?e.__v_isVNode===!0:!1}function bn(e,t){return e.type===t.type&&e.key===t.key}const dc=({key:e})=>e??null,ko=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ke(e)||it(e)||be(e)?{i:tt,r:e,k:t,f:!!s}:e:null);function i(e,t=null,s=null,n=0,o=null,a=e===ee?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dc(t),ref:t&&ko(t),scopeId:Mi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:tt};return l?(Nr(c,s),a&128&&e.normalize(c)):s&&(c.shapeFlag|=Ke(s)?8:16),Jn>0&&!r&&Ct&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Ct.push(c),c}const ge=yf;function yf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===jd)&&(e=as),Yn(e)){const l=on(e,t,!0);return s&&Nr(l,s),Jn>0&&!a&&Ct&&(l.shapeFlag&6?Ct[Ct.indexOf(e)]=l:Ct.push(l)),l.patchFlag=-2,l}if(Ef(e)&&(e=e.__vccOpts),t){t=bf(t);let{class:l,style:c}=t;l&&!Ke(l)&&(t.class=de(l)),Te(c)&&(Cr(c)&&!he(c)&&(c=nt({},c)),t.style=dt(c))}const r=Ke(e)?1:cc(e)?128:Ad(e)?64:Te(e)?4:be(e)?2:0;return i(e,t,s,n,o,r,a,!0)}function bf(e){return e?Cr(e)||ec(e)?nt({},e):e:null}function on(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:l,transition:c}=e,u=t?_f(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&dc(u),ref:t&&t.ref?s&&a?he(a)?a.concat(ko(t)):[a,ko(t)]:ko(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ee?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&on(e.ssContent),ssFallback:e.ssFallback&&on(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&$r(d,c.clone(d)),d}function xt(e=" ",t=0){return ge(na,null,e,t)}function Po(e,t){const s=ge($o,null,e);return s.staticCount=t,s}function B(e="",t=!1){return t?(v(),Ue(as,null,e)):ge(as,null,e)}function jt(e){return e==null||typeof e=="boolean"?ge(as):he(e)?ge(ee,null,e.slice()):Yn(e)?ds(e):ge(na,null,String(e))}function ds(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:on(e)}function Nr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(he(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Nr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!ec(t)?t._ctx=tt:o===3&&tt&&(tt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else be(t)?(t={default:t,_ctx:tt},s=32):(t=String(t),n&64?(s=16,t=[xt(t)]):s=8);e.children=t,e.shapeFlag|=s}function _f(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=de([t.class,n.class]));else if(o==="style")t.style=dt([t.style,n.style]);else if(Jo(o)){const a=t[o],r=n[o];r&&a!==r&&!(he(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function Ut(e,t,s,n=null){Kt(e,t,7,[s,n])}const wf=qi();let Cf=0;function Sf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||wf,a={uid:Cf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ku(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sc(n,o),emitsOptions:Xi(n,o),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:n.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Zd.bind(null,a),e.ce&&e.ce(a),a}let lt=null;const $f=()=>lt||tt;let Do,Wa;{const e=Qo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};Do=t("__VUE_INSTANCE_SETTERS__",s=>lt=s),Wa=t("__VUE_SSR_SETTERS__",s=>qn=s)}const oo=e=>{const t=lt;return Do(e),e.scope.on(),()=>{e.scope.off(),Do(t)}},fl=()=>{lt&&lt.scope.off(),Do(null)};function fc(e){return e.vnode.shapeFlag&4}let qn=!1;function kf(e,t=!1,s=!1){t&&Wa(t);const{props:n,children:o}=e.vnode,a=fc(e);af(e,n,a,t),uf(e,o,s||t);const r=a?xf(e,t):void 0;return t&&Wa(!1),r}function xf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Vd);const{setup:n}=s;if(n){ss();const o=e.setupContext=n.length>1?Nf(e):null,a=oo(e),r=no(n,e,0,[e.props,o]),l=di(r);if(ns(),a(),(l||e.sp)&&!en(e)&&Wi(e),l){if(r.then(fl,fl),t)return r.then(c=>{ml(e,c)}).catch(c=>{ea(c,e,0)});e.asyncDep=r}else ml(e,r)}else mc(e)}function ml(e,t,s){be(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=Pi(t)),mc(e)}function mc(e,t,s){const n=e.type;e.render||(e.render=n.render||Wt);{const o=oo(e);ss();try{Kd(e)}finally{ns(),o()}}}const Af={get(e,t){return rt(e,"get",""),e[t]}};function Nf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Af),slots:e.slots,emit:e.emit,expose:t}}function oa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Pi(dd(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ln)return Ln[s](e)},has(t,s){return s in t||s in Ln}})):e.proxy}function Tf(e,t=!0){return be(e)?e.displayName||e.name:e.name||t&&e.__name}function Ef(e){return be(e)&&"__vccOpts"in e}const E=(e,t)=>hd(e,t,qn);function pc(e,t,s){try{Ro(-1);const n=arguments.length;return n===2?Te(t)&&!he(t)?Yn(t)?ge(e,null,[t]):ge(e,t):ge(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Yn(s)&&(s=[s]),ge(e,t,s))}finally{Ro(1)}}const Of="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Va;const pl=typeof window<"u"&&window.trustedTypes;if(pl)try{Va=pl.createPolicy("vue",{createHTML:e=>e})}catch{}const vc=Va?e=>Va.createHTML(e):e=>e,If="http://www.w3.org/2000/svg",Rf="http://www.w3.org/1998/Math/MathML",qt=typeof document<"u"?document:null,vl=qt&&qt.createElement("template"),Pf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?qt.createElementNS(If,e):t==="mathml"?qt.createElementNS(Rf,e):s?qt.createElement(e,{is:s}):qt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>qt.createTextNode(e),createComment:e=>qt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{vl.innerHTML=vc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=vl.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Df=Symbol("_vtc");function Lf(e,t,s){const n=e[Df];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Lo=Symbol("_vod"),hc=Symbol("_vsh"),Bf={name:"show",beforeMount(e,{value:t},{transition:s}){e[Lo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):_n(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),_n(e,!0),n.enter(e)):n.leave(e,()=>{_n(e,!1)}):_n(e,t))},beforeUnmount(e,{value:t}){_n(e,t)}};function _n(e,t){e.style.display=t?e[Lo]:"none",e[hc]=!t}const Uf=Symbol(""),Mf=/(?:^|;)\s*display\s*:/;function Ff(e,t,s){const n=e.style,o=Ke(s);let a=!1;if(s&&!o){if(t)if(Ke(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();s[l]==null&&xo(n,l,"")}else for(const r in t)s[r]==null&&xo(n,r,"");for(const r in s)r==="display"&&(a=!0),xo(n,r,s[r])}else if(o){if(t!==s){const r=n[Uf];r&&(s+=";"+r),n.cssText=s,a=Mf.test(s)}}else t&&e.removeAttribute("style");Lo in e&&(e[Lo]=a?n.display:"",e[hc]&&(n.display="none"))}const hl=/\s*!important$/;function xo(e,t,s){if(he(s))s.forEach(n=>xo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=jf(e,t);hl.test(s)?e.setProperty(_s(n),s.replace(hl,""),"important"):e[n]=s}}const gl=["Webkit","Moz","ms"],ya={};function jf(e,t){const s=ya[t];if(s)return s;let n=Tt(t);if(n!=="filter"&&n in e)return ya[t]=n;n=qo(n);for(let o=0;o<gl.length;o++){const a=gl[o]+n;if(a in e)return ya[t]=a}return t}const yl="http://www.w3.org/1999/xlink";function bl(e,t,s,n,o,a=Wu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(yl,t.slice(6,t.length)):e.setAttributeNS(yl,t,s):s==null||a&&!vi(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Pt(s)?String(s):s)}function _l(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?vc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=vi(s):s==null&&l==="string"?(s="",r=!0):l==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function Zt(e,t,s,n){e.addEventListener(t,s,n)}function Hf(e,t,s,n){e.removeEventListener(t,s,n)}const wl=Symbol("_vei");function Wf(e,t,s,n,o=null){const a=e[wl]||(e[wl]={}),r=a[t];if(n&&r)r.value=n;else{const[l,c]=Vf(t);if(n){const u=a[t]=zf(n,o);Zt(e,l,u,c)}else r&&(Hf(e,l,r,c),a[t]=void 0)}}const Cl=/(?:Once|Passive|Capture)$/;function Vf(e){let t;if(Cl.test(e)){t={};let n;for(;n=e.match(Cl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):_s(e.slice(2)),t]}let ba=0;const Kf=Promise.resolve(),Gf=()=>ba||(Kf.then(()=>ba=0),ba=Date.now());function zf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Kt(Jf(n,s.value),t,5,[n])};return s.value=e,s.attached=Gf(),s}function Jf(e,t){if(he(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Sl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Yf=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?Lf(e,n,r):t==="style"?Ff(e,s,n):Jo(t)?fr(t)||Wf(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qf(e,t,n,r))?(_l(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&bl(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ke(n))?_l(e,Tt(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),bl(e,t,n,r))};function qf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Sl(t)&&be(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Sl(t)&&Ke(s)?!1:t in e}const ys=e=>{const t=e.props["onUpdate:modelValue"]||!1;return he(t)?s=>Co(t,s):t};function Xf(e){e.target.composing=!0}function $l(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Nt=Symbol("_assign");function kl(e,t,s){return t&&(e=e.trim()),s&&(e=Xo(e)),e}const ht={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Nt]=ys(o);const a=n||o.props&&o.props.type==="number";Zt(e,t?"change":"input",r=>{r.target.composing||e[Nt](kl(e.value,s,a))}),(s||a)&&Zt(e,"change",()=>{e.value=kl(e.value,s,a)}),t||(Zt(e,"compositionstart",Xf),Zt(e,"compositionend",$l),Zt(e,"change",$l))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[Nt]=ys(r),e.composing)return;const l=(a||e.type==="number")&&!/^0\d/.test(e.value)?Xo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===c)||(e.value=c))}},Tr={deep:!0,created(e,t,s){e[Nt]=ys(s),Zt(e,"change",()=>{const n=e._modelValue,o=an(e),a=e.checked,r=e[Nt];if(he(n)){const l=vr(n,o),c=l!==-1;if(a&&!c)r(n.concat(o));else if(!a&&c){const u=[...n];u.splice(l,1),r(u)}}else if(vn(n)){const l=new Set(n);a?l.add(o):l.delete(o),r(l)}else r(gc(e,a))})},mounted:xl,beforeUpdate(e,t,s){e[Nt]=ys(s),xl(e,t,s)}};function xl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(he(t))o=vr(t,n.props.value)>-1;else if(vn(t))o=t.has(n.props.value);else{if(t===s)return;o=Bs(t,gc(e,!0))}e.checked!==o&&(e.checked=o)}const Al={created(e,{value:t},s){e.checked=Bs(t,s.props.value),e[Nt]=ys(s),Zt(e,"change",()=>{e[Nt](an(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Nt]=ys(n),t!==s&&(e.checked=Bs(t,n.props.value))}},Un={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=vn(t);Zt(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Xo(an(r)):an(r));e[Nt](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Gn(()=>{e._assigning=!1})}),e[Nt]=ys(n)},mounted(e,{value:t}){Nl(e,t)},beforeUpdate(e,t,s){e[Nt]=ys(s)},updated(e,{value:t}){e._assigning||Nl(e,t)}};function Nl(e,t){const s=e.multiple,n=he(t);if(!(s&&!n&&!vn(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],l=an(r);if(s)if(n){const c=typeof l;c==="string"||c==="number"?r.selected=t.some(u=>String(u)===String(l)):r.selected=vr(t,l)>-1}else r.selected=t.has(l);else if(Bs(an(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function an(e){return"_value"in e?e._value:e.value}function gc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Qf=["ctrl","shift","alt","meta"],Zf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Qf.some(s=>e[`${s}Key`]&&!t.includes(s))},Lt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const l=Zf[t[r]];if(l&&l(o,t))return}return e(o,...a)})},em={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Bo=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=_s(o.key);if(t.some(r=>r===a||em[r]===a))return e(o)})},tm=nt({patchProp:Yf},Pf);let Tl;function sm(){return Tl||(Tl=ff(tm))}const nm=(...e)=>{const t=sm().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=am(n);if(!o)return;const a=t._component;!be(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,om(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function om(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function am(e){return Ke(e)?document.querySelector(e):e}const Ce=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},rm={};function lm(e,t){const s=Fd("router-view");return v(),Ue(s)}const im=Ce(rm,[["render",lm]]),cm="modulepreload",um=function(e){return"/"+e},El={},dm=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(c=>{if(c=um(c),c in El)return;El[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":cm,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return o.then(r=>{for(const l of r||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Vs=typeof document<"u";function yc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function fm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&yc(e.default)}const $e=Object.assign;function _a(e,t){const s={};for(const n in t){const o=t[n];s[n]=Bt(o)?o.map(e):e(o)}return s}const Mn=()=>{},Bt=Array.isArray;function Ol(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const bc=/#/g,mm=/&/g,pm=/\//g,vm=/=/g,hm=/\?/g,_c=/\+/g,gm=/%5B/g,ym=/%5D/g,wc=/%5E/g,bm=/%60/g,Cc=/%7B/g,_m=/%7C/g,Sc=/%7D/g,wm=/%20/g;function Er(e){return e==null?"":encodeURI(""+e).replace(_m,"|").replace(gm,"[").replace(ym,"]")}function Cm(e){return Er(e).replace(Cc,"{").replace(Sc,"}").replace(wc,"^")}function Ka(e){return Er(e).replace(_c,"%2B").replace(wm,"+").replace(bc,"%23").replace(mm,"%26").replace(bm,"`").replace(Cc,"{").replace(Sc,"}").replace(wc,"^")}function Sm(e){return Ka(e).replace(vm,"%3D")}function $m(e){return Er(e).replace(bc,"%23").replace(hm,"%3F")}function km(e){return $m(e).replace(pm,"%2F")}function Xn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const xm=/\/$/,Am=e=>e.replace(xm,"");function wa(e,t,s="/"){let n,o={},a="",r="";const l=t.indexOf("#");let c=t.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(n=t.slice(0,c),a=t.slice(c,l>0?l:t.length),o=e(a.slice(1))),l>=0&&(n=n||t.slice(0,l),r=t.slice(l,t.length)),n=Om(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:Xn(r)}}function Nm(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Il(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Tm(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&rn(t.matched[n],s.matched[o])&&$c(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function rn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function $c(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Em(e[s],t[s]))return!1;return!0}function Em(e,t){return Bt(e)?Rl(e,t):Bt(t)?Rl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Rl(e,t){return Bt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Om(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,l;for(r=0;r<n.length;r++)if(l=n[r],l!==".")if(l==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const is={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ga=function(e){return e.pop="pop",e.push="push",e}({}),Ca=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Im(e){if(!e)if(Vs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Am(e)}const Rm=/^[^#]+#/;function Pm(e,t){return e.replace(Rm,"#")+t}function Dm(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const aa=()=>({left:window.scrollX,top:window.scrollY});function Lm(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Dm(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Pl(e,t){return(history.state?history.state.position-t:-1)+e}const za=new Map;function Bm(e,t){za.set(e,t)}function Um(e){const t=za.get(e);return za.delete(e),t}function Mm(e){return typeof e=="string"||e&&typeof e=="object"}function kc(e){return typeof e=="string"||typeof e=="symbol"}let Be=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const xc=Symbol("");Be.MATCHER_NOT_FOUND+"",Be.NAVIGATION_GUARD_REDIRECT+"",Be.NAVIGATION_ABORTED+"",Be.NAVIGATION_CANCELLED+"",Be.NAVIGATION_DUPLICATED+"";function ln(e,t){return $e(new Error,{type:e,[xc]:!0},t)}function Jt(e,t){return e instanceof Error&&xc in e&&(t==null||!!(e.type&t))}const Fm=["params","query","hash"];function jm(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Fm)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function Hm(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(_c," "),a=o.indexOf("="),r=Xn(a<0?o:o.slice(0,a)),l=a<0?null:Xn(o.slice(a+1));if(r in t){let c=t[r];Bt(c)||(c=t[r]=[c]),c.push(l)}else t[r]=l}return t}function Dl(e){let t="";for(let s in e){const n=e[s];if(s=Sm(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Bt(n)?n.map(o=>o&&Ka(o)):[n&&Ka(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Wm(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Bt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const Vm=Symbol(""),Ll=Symbol(""),ra=Symbol(""),Or=Symbol(""),Ja=Symbol("");function wn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function fs(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const u=p=>{p===!1?c(ln(Be.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?c(p):Mm(p)?c(ln(Be.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),l())},d=a(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Sa(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const l in r.components){let c=r.components[l];if(!(t!=="beforeRouteEnter"&&!r.instances[l]))if(yc(c)){const u=(c.__vccOpts||c)[t];u&&a.push(fs(u,s,n,r,l,o))}else{let u=c();a.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${r.path}"`);const f=fm(d)?d.default:d;r.mods[l]=d,r.components[l]=f;const p=(f.__vccOpts||f)[t];return p&&fs(p,s,n,r,l,o)()}))}}return a}function Km(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const l=t.matched[r];l&&(e.matched.find(u=>rn(u,l))?n.push(l):s.push(l));const c=e.matched[r];c&&(t.matched.find(u=>rn(u,c))||o.push(c))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Gm=()=>location.protocol+"//"+location.host;function Ac(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,l=o.slice(r);return l[0]!=="/"&&(l="/"+l),Il(l,"")}return Il(s,e)+n+o}function zm(e,t,s,n){let o=[],a=[],r=null;const l=({state:p})=>{const m=Ac(e,location),g=s.value,y=t.value;let T=0;if(p){if(s.value=m,t.value=p,r&&r===g){r=null;return}T=y?p.position-y.position:0}else n(m);o.forEach(C=>{C(s.value,g,{delta:T,type:Ga.pop,direction:T?T>0?Ca.forward:Ca.back:Ca.unknown})})};function c(){r=s.value}function u(p){o.push(p);const m=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(m),m}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState($e({},p.state,{scroll:aa()}),"")}}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:f}}function Bl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?aa():null}}function Jm(e){const{history:t,location:s}=window,n={value:Ac(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(c,u,d){const f=e.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+c:Gm()+e+c;try{t[d?"replaceState":"pushState"](u,"",p),o.value=u}catch(m){console.error(m),s[d?"replace":"assign"](p)}}function r(c,u){a(c,$e({},t.state,Bl(o.value.back,c,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=c}function l(c,u){const d=$e({},o.value,t.state,{forward:c,scroll:aa()});a(d.current,d,!0),a(c,$e({},Bl(n.value,c,null),{position:d.position+1},u),!1),n.value=c}return{location:n,state:o,push:l,replace:r}}function Ym(e){e=Im(e);const t=Jm(e),s=zm(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=$e({location:"",base:e,go:n,createHref:Pm.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function qm(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Ym(e)}let Rs=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ye=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ye||{});const Xm={type:Rs.Static,value:""},Qm=/[a-zA-Z0-9_]/;function Zm(e){if(!e)return[[]];if(e==="/")return[[Xm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${u}": ${m}`)}let s=Ye.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let l=0,c,u="",d="";function f(){u&&(s===Ye.Static?a.push({type:Rs.Static,value:u}):s===Ye.Param||s===Ye.ParamRegExp||s===Ye.ParamRegExpEnd?(a.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Rs.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==Ye.ParamRegExp){n=s,s=Ye.EscapeNext;continue}switch(s){case Ye.Static:c==="/"?(u&&f(),r()):c===":"?(f(),s=Ye.Param):p();break;case Ye.EscapeNext:p(),s=n;break;case Ye.Param:c==="("?s=Ye.ParamRegExp:Qm.test(c)?p():(f(),s=Ye.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Ye.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=Ye.ParamRegExpEnd:d+=c;break;case Ye.ParamRegExpEnd:f(),s=Ye.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return s===Ye.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),r(),o}const Ul="[^/]+?",ep={sensitive:!1,strict:!1,start:!0,end:!0};var ut=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ut||{});const tp=/[.+*?^${}()[\]/\\]/g;function sp(e,t){const s=$e({},ep,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const d=u.length?[]:[ut.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=ut.Segment+(s.sensitive?ut.BonusCaseSensitive:0);if(p.type===Rs.Static)f||(o+="/"),o+=p.value.replace(tp,"\\$&"),m+=ut.Static;else if(p.type===Rs.Param){const{value:g,repeatable:y,optional:T,regexp:C}=p;a.push({name:g,repeatable:y,optional:T});const _=C||Ul;if(_!==Ul){m+=ut.BonusCustomRegExp;try{`${_}`}catch(I){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+I.message)}}let b=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(b=T&&u.length<2?`(?:/${b})`:"/"+b),T&&(b+="?"),o+=b,m+=ut.Dynamic,T&&(m+=ut.BonusOptional),y&&(m+=ut.BonusRepeatable),_===".*"&&(m+=ut.BonusWildcard)}d.push(m)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=ut.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function l(u){const d=u.match(r),f={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",g=a[p-1];f[g.name]=m&&g.repeatable?m.split("/"):m}return f}function c(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const m of p)if(m.type===Rs.Static)d+=m.value;else if(m.type===Rs.Param){const{value:g,repeatable:y,optional:T}=m,C=g in u?u[g]:"";if(Bt(C)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Bt(C)?C.join("/"):C;if(!_)if(T)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);d+=_}}return d||"/"}return{re:r,score:n,keys:a,parse:l,stringify:c}}function np(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===ut.Static+ut.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ut.Static+ut.Segment?1:-1:0}function Nc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=np(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(Ml(n))return 1;if(Ml(o))return-1}return o.length-n.length}function Ml(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const op={strict:!1,end:!0,sensitive:!1};function ap(e,t,s){const n=sp(Zm(e.path),s),o=$e(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function rp(e,t){const s=[],n=new Map;t=Ol(op,t);function o(f){return n.get(f)}function a(f,p,m){const g=!m,y=jl(f);y.aliasOf=m&&m.record;const T=Ol(t,f),C=[y];if("alias"in f){const I=typeof f.alias=="string"?[f.alias]:f.alias;for(const X of I)C.push(jl($e({},y,{components:m?m.record.components:y.components,path:X,aliasOf:m?m.record:y})))}let _,b;for(const I of C){const{path:X}=I;if(p&&X[0]!=="/"){const Z=p.record.path,L=Z[Z.length-1]==="/"?"":"/";I.path=p.record.path+(X&&L+X)}if(_=ap(I,p,T),m?m.alias.push(_):(b=b||_,b!==_&&b.alias.push(_),g&&f.name&&!Hl(_)&&r(f.name)),Tc(_)&&c(_),y.children){const Z=y.children;for(let L=0;L<Z.length;L++)a(Z[L],_,m&&m.children[L])}m=m||_}return b?()=>{r(b)}:Mn}function r(f){if(kc(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function l(){return s}function c(f){const p=cp(f,s);s.splice(p,0,f),f.record.name&&!Hl(f)&&n.set(f.record.name,f)}function u(f,p){let m,g={},y,T;if("name"in f&&f.name){if(m=n.get(f.name),!m)throw ln(Be.MATCHER_NOT_FOUND,{location:f});T=m.record.name,g=$e(Fl(p.params,m.keys.filter(b=>!b.optional).concat(m.parent?m.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),f.params&&Fl(f.params,m.keys.map(b=>b.name))),y=m.stringify(g)}else if(f.path!=null)y=f.path,m=s.find(b=>b.re.test(y)),m&&(g=m.parse(y),T=m.record.name);else{if(m=p.name?n.get(p.name):s.find(b=>b.re.test(p.path)),!m)throw ln(Be.MATCHER_NOT_FOUND,{location:f,currentLocation:p});T=m.record.name,g=$e({},p.params,f.params),y=m.stringify(g)}const C=[];let _=m;for(;_;)C.unshift(_.record),_=_.parent;return{name:T,path:y,params:g,matched:C,meta:ip(C)}}e.forEach(f=>a(f));function d(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:r,clearRoutes:d,getRoutes:l,getRecordMatcher:o}}function Fl(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function jl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:lp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function lp(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Hl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ip(e){return e.reduce((t,s)=>$e(t,s.meta),{})}function cp(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Nc(e,t[a])<0?n=a:s=a+1}const o=up(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function up(e){let t=e;for(;t=t.parent;)if(Tc(t)&&Nc(e,t)===0)return t}function Tc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Wl(e){const t=Rt(ra),s=Rt(Or),n=E(()=>{const c=P(e.to);return t.resolve(c)}),o=E(()=>{const{matched:c}=n.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(rn.bind(null,d));if(p>-1)return p;const m=Vl(c[u-2]);return u>1&&Vl(d)===m&&f[f.length-1].path!==m?f.findIndex(rn.bind(null,c[u-2])):p}),a=E(()=>o.value>-1&&vp(s.params,n.value.params)),r=E(()=>o.value>-1&&o.value===s.matched.length-1&&$c(s.params,n.value.params));function l(c={}){if(pp(c)){const u=t[P(e.replace)?"replace":"push"](P(e.to)).catch(Mn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:E(()=>n.value.href),isActive:a,isExactActive:r,navigate:l}}function dp(e){return e.length===1?e[0]:e}const fp=Hi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Wl,setup(e,{slots:t}){const s=Vt(Wl(e)),{options:n}=Rt(ra),o=E(()=>({[Kl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Kl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&dp(t.default(s));return e.custom?a:pc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),mp=fp;function pp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function vp(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Bt(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function Vl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Kl=(e,t,s)=>e??t??s,hp=Hi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Rt(Ja),o=E(()=>e.route||n.value),a=Rt(Ll,0),r=E(()=>{let u=P(a);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=E(()=>o.value.matched[r.value]);So(Ll,E(()=>r.value+1)),So(Vm,l),So(Ja,o);const c=O();return vt(()=>[c.value,l.value,e.name],([u,d,f],[p,m,g])=>{d&&(d.instances[f]=u,m&&m!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!rn(d,m)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=l.value,p=f&&f.components[d];if(!p)return Gl(s.default,{Component:p,route:u});const m=f.props[d],g=m?m===!0?u.params:typeof m=="function"?m(u):m:null,T=pc(p,$e({},g,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return Gl(s.default,{Component:T,route:u})||T}}});function Gl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const gp=hp;function yp(e){const t=rp(e.routes,e),s=e.parseQuery||Hm,n=e.stringifyQuery||Dl,o=e.history,a=wn(),r=wn(),l=wn(),c=fd(is);let u=is;Vs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=_a.bind(null,W=>""+W),f=_a.bind(null,km),p=_a.bind(null,Xn);function m(W,ae){let ne,ce;return kc(W)?(ne=t.getRecordMatcher(W),ce=ae):ce=W,t.addRoute(ce,ne)}function g(W){const ae=t.getRecordMatcher(W);ae&&t.removeRoute(ae)}function y(){return t.getRoutes().map(W=>W.record)}function T(W){return!!t.getRecordMatcher(W)}function C(W,ae){if(ae=$e({},ae||c.value),typeof W=="string"){const R=wa(s,W,ae.path),F=t.resolve({path:R.path},ae),V=o.createHref(R.fullPath);return $e(R,F,{params:p(F.params),hash:Xn(R.hash),redirectedFrom:void 0,href:V})}let ne;if(W.path!=null)ne=$e({},W,{path:wa(s,W.path,ae.path).path});else{const R=$e({},W.params);for(const F in R)R[F]==null&&delete R[F];ne=$e({},W,{params:f(R)}),ae.params=f(ae.params)}const ce=t.resolve(ne,ae),we=W.hash||"";ce.params=d(p(ce.params));const w=Nm(n,$e({},W,{hash:Cm(we),path:ce.path})),$=o.createHref(w);return $e({fullPath:w,hash:we,query:n===Dl?Wm(W.query):W.query||{}},ce,{redirectedFrom:void 0,href:$})}function _(W){return typeof W=="string"?wa(s,W,c.value.path):$e({},W)}function b(W,ae){if(u!==W)return ln(Be.NAVIGATION_CANCELLED,{from:ae,to:W})}function I(W){return L(W)}function X(W){return I($e(_(W),{replace:!0}))}function Z(W,ae){const ne=W.matched[W.matched.length-1];if(ne&&ne.redirect){const{redirect:ce}=ne;let we=typeof ce=="function"?ce(W,ae):ce;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=_(we):{path:we},we.params={}),$e({query:W.query,hash:W.hash,params:we.path!=null?{}:W.params},we)}}function L(W,ae){const ne=u=C(W),ce=c.value,we=W.state,w=W.force,$=W.replace===!0,R=Z(ne,ce);if(R)return L($e(_(R),{state:typeof R=="object"?$e({},we,R.state):we,force:w,replace:$}),ae||ne);const F=ne;F.redirectedFrom=ae;let V;return!w&&Tm(n,ce,ne)&&(V=ln(Be.NAVIGATION_DUPLICATED,{to:F,from:ce}),U(ce,ce,!0,!1)),(V?Promise.resolve(V):fe(F,ce)).catch(j=>Jt(j)?Jt(j,Be.NAVIGATION_GUARD_REDIRECT)?j:G(j):K(j,F,ce)).then(j=>{if(j){if(Jt(j,Be.NAVIGATION_GUARD_REDIRECT))return L($e({replace:$},_(j.to),{state:typeof j.to=="object"?$e({},we,j.to.state):we,force:w}),ae||F)}else j=ue(F,ce,!0,$,we);return me(F,ce,j),j})}function Y(W,ae){const ne=b(W,ae);return ne?Promise.reject(ne):Promise.resolve()}function J(W){const ae=Ge.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(W):W()}function fe(W,ae){let ne;const[ce,we,w]=Km(W,ae);ne=Sa(ce.reverse(),"beforeRouteLeave",W,ae);for(const R of ce)R.leaveGuards.forEach(F=>{ne.push(fs(F,W,ae))});const $=Y.bind(null,W,ae);return ne.push($),et(ne).then(()=>{ne=[];for(const R of a.list())ne.push(fs(R,W,ae));return ne.push($),et(ne)}).then(()=>{ne=Sa(we,"beforeRouteUpdate",W,ae);for(const R of we)R.updateGuards.forEach(F=>{ne.push(fs(F,W,ae))});return ne.push($),et(ne)}).then(()=>{ne=[];for(const R of w)if(R.beforeEnter)if(Bt(R.beforeEnter))for(const F of R.beforeEnter)ne.push(fs(F,W,ae));else ne.push(fs(R.beforeEnter,W,ae));return ne.push($),et(ne)}).then(()=>(W.matched.forEach(R=>R.enterCallbacks={}),ne=Sa(w,"beforeRouteEnter",W,ae,J),ne.push($),et(ne))).then(()=>{ne=[];for(const R of r.list())ne.push(fs(R,W,ae));return ne.push($),et(ne)}).catch(R=>Jt(R,Be.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function me(W,ae,ne){l.list().forEach(ce=>J(()=>ce(W,ae,ne)))}function ue(W,ae,ne,ce,we){const w=b(W,ae);if(w)return w;const $=ae===is,R=Vs?history.state:{};ne&&(ce||$?o.replace(W.fullPath,$e({scroll:$&&R&&R.scroll},we)):o.push(W.fullPath,we)),c.value=W,U(W,ae,ne,$),G()}let _e;function Ae(){_e||(_e=o.listen((W,ae,ne)=>{if(!gt.listening)return;const ce=C(W),we=Z(ce,gt.currentRoute.value);if(we){L($e(we,{replace:!0,force:!0}),ce).catch(Mn);return}u=ce;const w=c.value;Vs&&Bm(Pl(w.fullPath,ne.delta),aa()),fe(ce,w).catch($=>Jt($,Be.NAVIGATION_ABORTED|Be.NAVIGATION_CANCELLED)?$:Jt($,Be.NAVIGATION_GUARD_REDIRECT)?(L($e(_($.to),{force:!0}),ce).then(R=>{Jt(R,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&!ne.delta&&ne.type===Ga.pop&&o.go(-1,!1)}).catch(Mn),Promise.reject()):(ne.delta&&o.go(-ne.delta,!1),K($,ce,w))).then($=>{$=$||ue(ce,w,!1),$&&(ne.delta&&!Jt($,Be.NAVIGATION_CANCELLED)?o.go(-ne.delta,!1):ne.type===Ga.pop&&Jt($,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),me(ce,w,$)}).catch(Mn)}))}let te=wn(),ie=wn(),q;function K(W,ae,ne){G(W);const ce=ie.list();return ce.length?ce.forEach(we=>we(W,ae,ne)):console.error(W),Promise.reject(W)}function H(){return q&&c.value!==is?Promise.resolve():new Promise((W,ae)=>{te.add([W,ae])})}function G(W){return q||(q=!W,Ae(),te.list().forEach(([ae,ne])=>W?ne(W):ae()),te.reset()),W}function U(W,ae,ne,ce){const{scrollBehavior:we}=e;if(!Vs||!we)return Promise.resolve();const w=!ne&&Um(Pl(W.fullPath,0))||(ce||!ne)&&history.state&&history.state.scroll||null;return Gn().then(()=>we(W,ae,w)).then($=>$&&Lm($)).catch($=>K($,W,ae))}const oe=W=>o.go(W);let De;const Ge=new Set,gt={currentRoute:c,listening:!0,addRoute:m,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:T,getRoutes:y,resolve:C,options:e,push:I,replace:X,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:a.add,beforeResolve:r.add,afterEach:l.add,onError:ie.add,isReady:H,install(W){W.component("RouterLink",mp),W.component("RouterView",gp),W.config.globalProperties.$router=gt,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>P(c)}),Vs&&!De&&c.value===is&&(De=!0,I(o.location).catch(ce=>{}));const ae={};for(const ce in is)Object.defineProperty(ae,ce,{get:()=>c.value[ce],enumerable:!0});W.provide(ra,gt),W.provide(Or,Ii(ae)),W.provide(Ja,c);const ne=W.unmount;Ge.add(W),W.unmount=function(){Ge.delete(W),Ge.size<1&&(u=is,_e&&_e(),_e=null,c.value=is,De=!1,q=!1),ne()}}};function et(W){return W.reduce((ae,ne)=>ae.then(()=>J(ne)),Promise.resolve())}return gt}function bp(){return Rt(ra)}function zx(e){return Rt(Or)}function go(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let l=0;l<s.length;l++){const c=s[l];if(c.startsWith("%"))continue;if(a){c.includes("}")?(r+=c.substring(0,c.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=c+`
`;continue}if(c.includes("{")){const f=c.indexOf("{");if(c.includes("}")){const p=c.indexOf("}");o.push(c.substring(f+1,p).trim())}else r=c.substring(f+1)+`
`,a=!0;continue}const u=c.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=c.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,p]=d;if(f==="Board")n&&(n.commentary=Yl(o),n.steps=zl(o),n.auction=Jl(n.auction),t.push(n)),n=_p(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=wp(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const f=c.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const p=Sp(f);n.auction.push(...p)}}}return n&&(n.commentary=Yl(o),n.steps=zl(o),n.auction=Jl(n.auction),t.push(n)),t}function zl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const l=n[r],c=l.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(l),d=/^\[ROTATE\]$/i.test(l),f=l.match(/^\[choose-card\s+([^\]]+)\]$/i);if(c){const p=Ir(c[1]).replace(/!/g,"").trim(),m=a.trim();a="";let g="";if(r+1<n.length){const C=n[r+1];C.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=C.trim(),r++)}const y=Cn(m,"bid"),T=Cn(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:T.text,showSeatsAfter:T.showSeats})}else if(u||d){const p=u?"next":"rotate";a.trim()&&o.push(Cn(a.trim(),p)),a=""}else if(f){const p=f[1].trim();let m;if(p.toLowerCase().startsWith("any:")?m={cards:p.substring(4).split(",").map(y=>Uo(y.trim())),anyOf:!0}:m={card:Uo(p)},a.trim()){const g=Cn(a.trim(),"choose-card");g.chooseCard=m,o.push(g)}a=""}else a+=l}if(a.trim()){const r=Cn(a.trim(),"end");o.push(r)}return o}function Cn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const b=[];_.includes("N")&&b.push("N"),_.includes("E")&&b.push("E"),_.includes("S")&&b.push("S"),_.includes("W")&&b.push("W"),b.length>0&&(s=b)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const l=/\[RESET\]/i.test(e);let c=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const _=u[1].trim();_.toLowerCase().startsWith("any:")?c={cards:_.substring(4).split(",").map(I=>Uo(I.trim())),anyOf:!0}:c={card:Uo(_)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),p&&(d=!0);const m=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const T=e.match(/\[showcards\s+([^\]]+)\]/i);if(T){const _=T[1].trim();y={};const b=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let I;for(;(I=b.exec(_))!==null;){const X=I[1].toUpperCase(),Z=I[2].split(",").map(L=>L.trim().toUpperCase());y[X]=Z}Object.keys(y).length===0&&(y=null)}let C=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Ir(C),type:t,showSeats:s,plays:o,reset:l,showAuction:d,showLead:m,clearCommentary:g,showcards:y,chooseCard:c}}function _p(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Uo(e){return e.toUpperCase().replace("10","T")}function wp(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const l=a.charAt(0).toUpperCase();o=n.indexOf(l),s[0]=a.substring(r+1)}for(let l=0;l<4;l++){const c=(o+l)%4,u=n[c];t[u]=Cp(s[l])}return t}function Cp(e){const t=e.split(".");return t.length!==4?null:{spades:yo(t[0]),hearts:yo(t[1]),diamonds:yo(t[2]),clubs:yo(t[3])}}function yo(e){return e?e.split(""):[]}function Jl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Sp(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>$p(t))}function $p(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Yl(e){return e.length?Ir(e.join(`

`)):""}function Ir(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function kp(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function bo(e,t){return kp(t)[e%4]}const Rr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},ql={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Ec=["spades","hearts","diamonds","clubs"];function $a(e){return e==="T"?"10":e}function Pr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Rr[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function xp(e){return(ql[e.toLowerCase()]||ql[e])==="red"?"suit-red":"suit-black"}function Ap(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Ya(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Np(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Ec)for(const o of e[n]||[])s+=t[o]||0;return s}function Tp(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Rr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Sn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Ep(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ks(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Op({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:a,studentBid:r,correct:l,attemptNumber:c,timeTakenMs:u,skillPath:d,assignment:f=null}){var y,T,C,_,b,I,X,Z,L,Y,J;const p=((y=s.steps)==null?void 0:y.filter(fe=>fe.type==="bid").length)||1,m=s.studentSeat||"S",g=((T=s.hands)==null?void 0:T[m.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:m,hands:{north:((C=s.hands)==null?void 0:C.N)||((_=s.hands)==null?void 0:_.north)||"",east:((b=s.hands)==null?void 0:b.E)||((I=s.hands)==null?void 0:I.east)||"",south:((X=s.hands)==null?void 0:X.S)||((Z=s.hands)==null?void 0:Z.south)||"",west:((L=s.hands)==null?void 0:L.W)||((Y=s.hands)==null?void 0:Y.west)||""},full_auction:((J=s.auction)==null?void 0:J.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:a,student_hand:g},result:{student_bid:r,correct:l,attempt_number:c,time_taken_ms:u},skill_path:d,assignment:f}}function Oc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Ip(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function Rp(){return crypto.randomUUID()}function Pp(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Ic(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Dp(e){const[t]=e.split("/");return t||"uncategorized"}function Lp(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Rc={name:"AES-GCM",length:256},Pc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function Bp(){const e=await crypto.subtle.generateKey(Rc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return cn(t)}async function Dc(e){const t=Qn(e);return crypto.subtle.importKey("raw",t,Rc,!0,["encrypt","decrypt"])}async function Dr(e,t){const s=await Dc(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:cn(r),iv:cn(n)}}async function Lc(e,t,s){const n=await Dc(s),o=Qn(e),a=Qn(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),l=new TextDecoder;return JSON.parse(l.decode(r))}async function Up(e){const t=Qn(e);return crypto.subtle.importKey("spki",t,Pc,!0,["encrypt"])}async function Mp(){const e=await crypto.subtle.generateKey(Pc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:cn(t),privateKey:cn(s)}}async function Bc(e,t){const s=await Up(t),n=Qn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return cn(o)}function Fp(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function jp(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function Hp(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Dr(t,e);return(await Lc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function cn(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Qn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const qa="bridgePractice",Ie=O({}),Ve=O(null),bs=O(null),Zn=O(!1),la=O(!1);function Uc(){try{const e=localStorage.getItem(qa);if(e){const t=JSON.parse(e);Ie.value=t.users||{},Ve.value=t.currentUserId||null,bs.value=t.adminViewerId||null}Zn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),Zn.value=!0}}function Et(){try{const e=localStorage.getItem(qa),t=e?JSON.parse(e):{};t.users=Ie.value,t.currentUserId=Ve.value,bs.value&&(t.adminViewerId=bs.value),localStorage.setItem(qa,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function Wp({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),l=new Date().toISOString(),c=await Bp();let u=null;if(a)try{const f=await fetch(`${a}/keys/admin`);if(f.ok){const p=await f.json();bs.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await Bc(c,p.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:c,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:l,updatedAt:l};return Ie.value[r]=d,Ve.value=r,Et(),la.value=!0,d}function Vp(e,t){if(!Ie.value[e])return console.error("User not found:",e),null;const s=Ie.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Et(),s}function Kp(e){if(!Ie.value[e])return!1;if(delete Ie.value[e],Ve.value===e){const t=Object.keys(Ie.value);Ve.value=t.length>0?t[0]:null}return Et(),!0}function Gp(e){return Ie.value[e]?(Ve.value=e,Et(),!0):(console.error("User not found:",e),!1)}function zp(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Ie.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Jp(e){const t=e.trim().toLowerCase();for(const s of Object.values(Ie.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function Yp(e){return Ie.value[e]||null}function qp(){Ie.value={},Ve.value=null,bs.value=null,la.value=!1,Et(),Zn.value=!1}function Xp(){Zn.value||Uc()}async function Qp(e){const t=jp(e);if(!t.valid)return{success:!1,error:t.error};if(!await Hp(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Ie.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Ve.value=e.user_id,Et(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",l={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Ie.value[l.id]=l,Ve.value=l.id,Et(),{success:!0,user:l}}function Zp(){const e=Ie.value[Ve.value];return!e||!e.secretKey?null:Fp(e)}function ev(){la.value=!1}function tv(){return bs.value}function sv(e){bs.value=e,Et()}async function nv(e){const t=Ie.value[Ve.value];return!t||!t.secretKey?null:Bc(t.secretKey,e)}async function ov(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function av(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ie.value[a.id]=a,Ve.value=a.id,Et(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function rv(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ie.value[a.id]=a,Ve.value=a.id,Et(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function lv(){if(!Ve.value)return;const e=Ie.value[Ve.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Et()}catch{}}function He(){const e=E(()=>Ve.value&&Ie.value[Ve.value]||null),t=E(()=>Object.values(Ie.value)),s=E(()=>Object.keys(Ie.value).length>0),n=E(()=>Object.keys(Ie.value).length),o=E(()=>Ve.value!==null&&!!Ie.value[Ve.value]);return{users:Ie,currentUserId:Ve,adminViewerId:bs,initialized:Zn,showKeyBackupModal:la,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Xp,loadFromStorage:Uc,saveToStorage:Et,createUser:Wp,updateUser:Vp,deleteUser:Kp,switchUser:Gp,findUserByName:zp,findUserByEmail:Jp,getUser:Yp,clearUsers:qp,restoreFromBackup:Qp,getKeyBackup:Zp,dismissKeyBackupModal:ev,getAdminViewerId:tv,setAdminViewerId:sv,createGrantForViewer:nv,requestRecovery:ov,claimRecovery:av,claimRecoveryByCode:rv,syncRole:lv}}const Xa="bridgePractice",ot=O({}),Me=O(null),Ot=O(!1),un=O(!1);function Mc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(c=>c.trim()).filter(Boolean),l=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:l}}function Fc(){try{const e=localStorage.getItem(Xa);if(e){const t=JSON.parse(e);ot.value=t.assignments||{},Me.value=t.currentAssignmentId||null,Me.value&&ot.value[Me.value]&&(Ot.value=!0)}un.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),un.value=!0}}function Us(){try{const e=localStorage.getItem(Xa),t=e?JSON.parse(e):{};t.assignments=ot.value,t.currentAssignmentId=Me.value,localStorage.setItem(Xa,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function jc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(ot.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const d of n)u.add(d);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Me.value=a.id,Ot.value=!0,Us(),a}const r=crypto.randomUUID(),l=new Date().toISOString(),c={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:l,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:l,updatedAt:l};return ot.value[r]=c,Me.value=r,Ot.value=!0,Us(),c}function iv(){if(un.value)return;Fc();const e=Mc();e&&jc(e),un.value=!0}function cv(e){if(!Ot.value||!Me.value)return!1;const t=ot.value[Me.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function uv(e){if(!Me.value)return;const t=ot.value[Me.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Us())}function dv(e){if(!Me.value||!Ot.value)return!1;const t=ot.value[Me.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Us(),!0}function fv(){if(!Ot.value||!Me.value)return null;const e=ot.value[Me.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function mv(){Ot.value=!1}function pv(){Me.value&&ot.value[Me.value]&&(Ot.value=!0)}function vv(e){return ot.value[e]||null}function hv(){return Object.values(ot.value)}function gv(e){return ot.value[e]?(delete ot.value[e],Me.value===e&&(Me.value=null,Ot.value=!1),Us(),!0):!1}function yv(){ot.value={},Me.value=null,Ot.value=!1,un.value=!1,Us()}function ia(){const e=E(()=>Me.value&&ot.value[Me.value]||null),t=E(()=>Ot.value&&e.value!==null),s=E(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=E(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:ot,currentAssignmentId:Me,inAssignmentMode:Ot,initialized:un,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:iv,loadFromStorage:Fc,saveToStorage:Us,createAssignment:jc,isLessonInAssignment:cv,setTotalDeals:uv,recordDealCompletion:dv,getAssignmentTag:fv,exitAssignmentMode:mv,returnToAssignmentMode:pv,getAssignment:vv,getAllAssignments:hv,deleteAssignment:gv,clearAssignments:yv,parseAssignmentFromUrl:Mc}}const Qa="bridgePractice",st=O([]),dn=O(null),fn=O(!1),Ls=O({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Hc(){try{const e=localStorage.getItem(Qa);if(e){const t=JSON.parse(e);st.value=t.pendingObservations||[]}fn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),fn.value=!0}}function Ms(){try{const e=localStorage.getItem(Qa),t=e?JSON.parse(e):{};t.pendingObservations=st.value,localStorage.setItem(Qa,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Wc(){fn.value||Hc(),dn.value||Vc()}function Vc(){dn.value=Rp(),Ls.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function bv({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:l}){var y,T;const c=He(),u=ia();fn.value||Wc();const d=c.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const C=e.subfolder||e.category||"Unknown";f=Pp(C)}const p=u.getAssignmentTag(),m=Op({userId:d.id,sessionId:dn.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:l,skillPath:f,assignment:p}),g=Ip(m);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if(Ls.value.totalObservations++,a?Ls.value.correctCount++:Ls.value.wrongCount++,d.dataConsent&&d.secretKey){const C=await _v(m,d);C.success||(console.warn("Failed to encrypt observation, storing unencrypted:",C.error),Xl(m,((y=d.classrooms)==null?void 0:y[0])||null))}else Xl(m,((T=d.classrooms)==null?void 0:T[0])||null);return{success:!0,observation:m}}async function _v(e,t){var s;try{const{encrypted_data:n,iv:o}=await Dr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=Oc(e,a);return st.value.push({encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()}),Ms(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Xl(e,t){const s=Oc(e,t);st.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ms()}async function wv(){const t=He().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<st.value.length;n++){const o=st.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await Dr(o.observation,t.secretKey);st.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ms(),s}function Cv(){return st.value.length}function Sv(){return[...st.value]}function $v(e){st.value=st.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ms()}function kv(){st.value=[],Ms()}function xv(){return{...Ls.value}}function Av(){st.value=[],dn.value=null,Ls.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},fn.value=!1,Ms()}function ws(){const e=E(()=>st.value.length),t=E(()=>st.value.length>0),s=E(()=>st.value.some(o=>!o.encrypted)),n=E(()=>dn.value);return{pendingObservations:st,sessionId:dn,sessionStats:Ls,initialized:fn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Wc,startNewSession:Vc,recordObservation:bv,encryptPendingObservations:wv,getPendingCount:Cv,getPendingObservations:Sv,removeSyncedObservations:$v,clearPendingObservations:kv,getSessionStats:xv,reset:Av,loadFromStorage:Hc,saveToStorage:Ms}}function Nv(){const e=ws(),t=O(null),s=O(0),n=O(!1),o=O(!1),a=Vt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Vt({answered:{},wrongCard:null,correctCard:null}),l=Vt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),c=O({N:[],E:[],S:[],W:[]}),u=O(null),d=O(1),f=E(()=>{var A;return((A=t.value)==null?void 0:A.steps)||[]}),p=E(()=>f.value.length>0),m=E(()=>f.value[s.value]||null),g=E(()=>f.value.some(A=>A.type==="bid")),y=E(()=>{var A;return((A=m.value)==null?void 0:A.type)==="bid"}),T=E(()=>{var A;for(let x=s.value;x>=0;x--)if((A=f.value[x])!=null&&A.clearCommentary)return x;return 0}),C=E(()=>{var A;return((A=t.value)==null?void 0:A.studentSeat)||"S"}),_=E(()=>t.value?bo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),b=E(()=>_.value===C.value),I=E(()=>{var D,k;if(!y.value||!b.value||a.auctionComplete||o.value)return!1;const A=m.value;if(!(A!=null&&A.bid))return!1;const x=(k=(D=t.value)==null?void 0:D.auction)==null?void 0:k[a.currentBidIndex];return x?Q(A.bid)===Q(x):!1}),X=E(()=>{for(let A=a.displayedBids.length-1;A>=0;A--){const x=a.displayedBids[A];if(x&&x!=="Pass"&&x!=="X"&&x!=="XX")return x}return null}),Z=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;const A=a.displayedBids[a.displayedBids.length-1];if(A==="X"||A==="XX"||!X.value)return!1;let x=-1;for(let M=a.displayedBids.length-1;M>=0;M--){const z=a.displayedBids[M];if(z&&z!=="Pass"&&z!=="X"&&z!=="XX"){x=M;break}}if(x===-1)return!1;const D=bo(x,t.value.auctionDealer||t.value.dealer),k=_.value;return(k==="N"||k==="S")&&(D==="E"||D==="W")||(k==="E"||k==="W")&&(D==="N"||D==="S")}),L=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let A=a.displayedBids.length-1;A>=0;A--){const x=a.displayedBids[A];if(x!=="Pass"){if(x==="XX")return!1;if(x==="X"){const D=bo(A,t.value.auctionDealer||t.value.dealer),k=_.value;return!(k==="N"&&D==="S"||k==="S"&&D==="N"||k==="E"&&D==="W"||k==="W"&&D==="E")}return!1}}return!1}),Y=E(()=>{const A=m.value;return A!=null&&A.chooseCard?!r.answered[s.value]:!1}),J=E(()=>{var A;return((A=m.value)==null?void 0:A.chooseCard)||null}),fe=E(()=>{if(!t.value)return[];const A=["N","E","S","W"];if(!p.value)return[];let x=null;const D=f.value;for(let k=0;k<=s.value&&k<D.length;k++){const N=D[k];N!=null&&N.showSeats&&(x=N.showSeats),N!=null&&N.showSeatsAfter&&(k<s.value||k===s.value&&o.value)&&(x=N.showSeatsAfter)}return x?A.filter(k=>!x.includes(k)):A}),me=E(()=>{if(!t.value||!p.value)return null;let A={};const x=f.value;for(let D=0;D<=s.value&&D<x.length;D++){const k=x[D];if(k!=null&&k.showcards)for(const[N,M]of Object.entries(k.showcards))A[N]=M;if(k!=null&&k.showSeats)for(const N of k.showSeats)delete A[N];if(k!=null&&k.showSeatsAfter&&(D<s.value||D===s.value&&o.value))for(const N of k.showSeatsAfter)delete A[N]}return Object.keys(A).length>0?A:null}),ue=E(()=>{if(!t.value||!p.value)return{};let A={},x=new Set;const D=f.value;for(let N=0;N<=s.value&&N<D.length;N++){const M=D[N];if(M!=null&&M.showcards)for(const[z,re]of Object.entries(M.showcards))A[z]=re;if(M!=null&&M.showSeats)for(const z of M.showSeats)x.add(z)}const k={};for(const[N,M]of Object.entries(A))x.has(N)&&(k[N]=M);return k}),_e=E(()=>{const A=me.value;return A?Object.keys(A):[]}),Ae=E(()=>{const A=fe.value,x=_e.value;return x.length?A.filter(D=>!x.includes(D)):A});function te(A){const x={spades:[],hearts:[],diamonds:[],clubs:[]},D={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const k of A){const N=k[0].toUpperCase(),M=k.slice(1).toUpperCase(),z=D[N];z&&x[z].push(M)}return x}const ie=E(()=>{var D,k;if(!((D=t.value)!=null&&D.hands))return{};if((k=m.value)!=null&&k.reset)return t.value.hands;const A=me.value,x={};for(const N of["N","E","S","W"]){if(A&&A[N]){x[N]=te(A[N]);continue}const M=t.value.hands[N];if(!M){x[N]=null;continue}x[N]={spades:[...M.spades||[]],hearts:[...M.hearts||[]],diamonds:[...M.diamonds||[]],clubs:[...M.clubs||[]]};for(const z of c.value[N]){const re={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[z.suit];if(re&&x[N][re]){const ve=x[N][re].indexOf(z.card);ve!==-1&&x[N][re].splice(ve,1)}}}return x}),q=E(()=>!(g.value&&!a.auctionComplete)),K=E(()=>{if(!p.value)return!0;let A=!0;const x=f.value;for(let D=0;D<=s.value&&D<x.length;D++){const k=x[D];(k==null?void 0:k.showAuction)!==null&&(k==null?void 0:k.showAuction)!==void 0&&(A=k.showAuction)}return A}),H=E(()=>{var x;if(!p.value)return!1;const A=f.value;for(let D=0;D<=s.value&&D<A.length;D++)if((x=A[D])!=null&&x.showLead)return!0;return!1}),G=E(()=>{var A;return(A=t.value)!=null&&A.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),U=E(()=>{if(!p.value||n.value)return!0;const A=m.value;return(A==null?void 0:A.type)==="end"&&!Y.value}),oe=E(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function De(){var x;c.value={N:[],E:[],S:[],W:[]};const A=f.value;for(let D=0;D<=s.value&&D<A.length;D++){const k=A[D];if((x=k==null?void 0:k.plays)!=null&&x.length)for(const N of k.plays){const M=N.split(/[,\s]+/);for(const z of M){if(!z)continue;const re=z.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(re){const ve=re[1].toUpperCase(),ye=re[2].toUpperCase();let pe=re[3].toUpperCase();pe==="10"&&(pe="T"),c.value[ve].push({suit:ye,card:pe})}}}}}function Ge(){if(!t.value)return;const A=t.value.auction||[],x=gt(s.value);if(x===-1){for(;a.currentBidIndex<A.length;)a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const D=f.value[x],k=Q(D.bid);for(;a.currentBidIndex<A.length;){const N=bo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),M=Q(A[a.currentBidIndex]);if(N===C.value&&M===k){u.value=Date.now(),d.value=1;return}a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function gt(A){const x=f.value;for(let D=A;D<x.length;D++)if(x[D].type==="bid")return D;return-1}function et(A){if(!t.value||a.auctionComplete||!y.value)return!1;const x=t.value.auction[a.currentBidIndex],D=Q(A)===Q(x),k=s.value;D?k in l.wrongStepIndices&&(delete l.wrongStepIndices[k],V(!0)):(V(!1),l.wrongStepIndices[k]=!0,l.boardHadWrong=!0);const N=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,d.value=1,D?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=A,a.correctBid=x,a.wrongBidIndex=N);const M=s.value+1,z=f.value[M];return(z==null?void 0:z.type)==="bid"?(s.value=M,o.value=!1,Ge()):(o.value=!0,W(),s.value>=f.value.length-1&&w()),D}function W(){var x;if(a.auctionComplete)return;if(gt(s.value+1)===-1){const D=((x=t.value)==null?void 0:x.auction)||[];for(;a.currentBidIndex<D.length;)a.displayedBids.push(D[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function ae(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function ne(A,x){if(!t.value||!Y.value)return!1;const D=J.value;if(!D)return!1;const k=(A+x).toUpperCase(),N=s.value;let M=!1,z="";return D.anyOf?(M=D.cards.includes(k),z=D.cards[0]):(M=k===D.card,z=D.card),M?N in l.wrongStepIndices&&(delete l.wrongStepIndices[N],V(!0)):(V(!1),l.wrongStepIndices[N]=!0,l.boardHadWrong=!0),r.answered[N]=!0,M?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=k,r.correctCard=z),we(),M}function ce(){r.wrongCard=null,r.correctCard=null}function we(){var A;if(I.value||Y.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,De(),((A=f.value[s.value])==null?void 0:A.type)==="bid"&&Ge(),s.value>=f.value.length-1){const x=f.value[s.value];(x==null?void 0:x.type)!=="bid"&&(x==null?void 0:x.type)!=="choose-card"&&w()}return!0}return w(),!1}function w(){n.value=!0,$()}function $(){if(f.value.some(x=>x.type==="bid"||x.type==="choose-card"))if(l.boardHadWrong){l.wrongCount++;const x=Object.keys(l.wrongStepIndices).length===0;V(x)}else l.correctCount++,V(!0)}function R(){if(ae(),ce(),o.value)return o.value=!1,F(s.value),!0;if(s.value>0){const A=s.value-1,x=f.value[A];return r.answered[A]&&delete r.answered[A],(x==null?void 0:x.type)==="bid"&&F(A),s.value=A,n.value=!1,o.value=!1,De(),!0}return!1}function F(A){var M;const x=f.value[A];if(!x||x.type!=="bid")return;const D=Q(x.bid),k=((M=t.value)==null?void 0:M.auction)||[];let N=0;for(let z=0;z<k.length;z++)if(Q(k[z])===D){N=z;break}a.currentBidIndex=N,a.displayedBids=k.slice(0,N),a.auctionComplete=!1,u.value=Date.now(),d.value=1}async function V(A){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:A?"PASS":"FAIL",correct:A,attemptNumber:1,timeTakenMs:0})}catch(x){console.error("Failed to record board observation:",x)}}function j(A){var x,D;t.value=A,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,l.boardHadWrong=!1,l.wrongStepIndices={},c.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(x=A==null?void 0:A.steps)!=null&&x.length&&(De(),((D=A.steps[0])==null?void 0:D.type)==="bid"&&Ge())}function se(){l.correctCount=0,l.wrongCount=0}function Q(A){if(!A)return"";const D=A.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return D==="PASS"||D==="P"?"PASS":D==="X"||D==="DBL"||D==="DOUBLE"?"X":D==="XX"||D==="RDBL"||D==="REDOUBLE"?"XX":D.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:l,steps:f,hasSteps:p,currentStep:m,hasBidSteps:g,isBidStep:y,commentaryStartIndex:T,studentSeat:C,currentTurnSeat:_,isStudentTurn:b,hasBidPrompt:I,lastContractBid:X,canDouble:Z,canRedouble:L,canGoBack:oe,hasCardChoice:Y,currentChooseCard:J,hiddenSeats:Ae,hands:ie,showHcp:q,showcardsPlayedCards:ue,isComplete:U,showAuctionTable:K,showOpeningLead:H,openingLead:G,advance:we,makeBid:et,clearFeedback:ae,goBack:R,makeCardChoice:ne,clearCardFeedback:ce,loadDeal:j,resetStats:se,observationStore:e}}const Mo="bridgePractice",Kc="bridgePracticeUIPrefs",at=O({teacherName:null,availableClassrooms:[],configuredAt:null}),mn=O({showLoadPbnOption:!1}),Fo=O(!1);function Gc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function zc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:Gc(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Tv(){return new URLSearchParams(window.location.search).get("collection")}function Ev(){return new URLSearchParams(window.location.search).get("lesson")}function Ov(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Iv(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function Rv(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function Pv(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const Dv=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Jc(){try{const e=localStorage.getItem(Mo);if(e){const t=JSON.parse(e);t.appConfig&&(at.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function Lv(){try{const e=localStorage.getItem(Kc);if(e){const t=JSON.parse(e);mn.value={...mn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function Bv(){try{localStorage.setItem(Kc,JSON.stringify(mn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function Uv(e,t){mn.value[e]=t,Bv()}function Lr(){try{const e=localStorage.getItem(Mo),t=e?JSON.parse(e):{};t.appConfig=at.value,localStorage.setItem(Mo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Yc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function Mv(){if(Fo.value)return;Jc(),Lv();const{teacher:e,classrooms:t}=zc();(e||t.length>0)&&(e&&!at.value.teacherName&&(at.value.teacherName=e),t.length>0&&(at.value.availableClassrooms=Yc(at.value.availableClassrooms||[],t)),at.value.configuredAt||(at.value.configuredAt=new Date().toISOString()),Lr()),Fo.value=!0}function Fv(){try{const e=localStorage.getItem(Mo);return e?JSON.parse(e):null}catch{return null}}function jv(){at.value={teacherName:null,availableClassrooms:[],configuredAt:null},Lr(),Fo.value=!1}function ao(){const e=E(()=>at.value.availableClassrooms.length===0),t=E(()=>at.value.availableClassrooms.length>1),s=E(()=>at.value.availableClassrooms.length===1),n=E(()=>s.value?at.value.availableClassrooms[0]:null),o=E(()=>at.value.teacherName),a=E(()=>at.value.availableClassrooms),r=E(()=>mn.value.showLoadPbnOption);return{appConfig:at,initialized:Fo,uiPrefs:mn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:Mv,loadFromStorage:Jc,saveToStorage:Lr,clearConfig:jv,getStorageData:Fv,getCollectionFromUrl:Tv,setCollectionInUrl:Ov,getLessonFromUrl:Ev,setLessonInUrl:Iv,getDealFromUrl:Rv,setDealInUrl:Pv,setUIPref:Uv,COLLECTIONS:Dv,parseUrlParams:zc,classroomIdToName:Gc,mergeClassrooms:Yc}}const Hv="https://api.bridge-classroom.com/api",Wv="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Br=O([]),Ze=O([]),jo=O(!1),Ho=O(null),Fn=O(null),Wo=O(!1),Vv=5*60*1e3;async function Kv(e){const t=await fetch(`${Hv}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":Wv}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Gv(e,t){try{return{...await Lc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function zv(){return ws().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function qc(e=!1){const s=He().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=zv();if(!e&&Fn.value&&Date.now()-new Date(Fn.value).getTime()<Vv&&Ze.value.length>0)return Jv(n),{success:!0,cached:!0};jo.value=!0,Ho.value=null;let o=[];try{const l=await Kv(s.id);if(Br.value=l,s.secretKey&&l.length>0){const c=l.map(d=>Gv(d,s.secretKey));o=(await Promise.all(c)).filter(d=>d!==null)}}catch(l){console.error("Failed to fetch from server (will use local data):",l),n.length===0&&(Ho.value=l.message)}const a=new Set(o.map(l=>l.id)),r=n.filter(l=>!a.has(l.id));return Ze.value=[...o,...r],Fn.value=new Date().toISOString(),jo.value=!1,{success:!0,count:Ze.value.length}}function Jv(e){const t=new Set(Ze.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Ze.value=[...Ze.value,...s])}async function Yv(){if(Wo.value)return;He().isAuthenticated.value&&await qc(),Wo.value=!0}function qv(){Br.value=[],Ze.value=[],Fn.value=null,Wo.value=!1}function Xc(){const e={};for(const t of Ze.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Ql(){const e={};for(const t of Ze.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Zl(){const e={};for(const t of Ze.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function ei(e=10){return[...Ze.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function ti(){const e=new Date().toISOString().split("T")[0];return Ze.value.filter(t=>t.timestamp.startsWith(e))}function si(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Ze.value.filter(n=>n.timestamp>=s)}function Xv(){const e=Xc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const l=new Date(t[r]);if(Math.round((a-l)/(24*60*60*1e3))===1)o++,a=l;else break}return o}function Ur(){const e=E(()=>Ze.value.length),t=E(()=>Ze.value.filter(m=>m.correct).length),s=E(()=>Ze.value.filter(m=>!m.correct).length),n=E(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=E(()=>{const m=ti(),g=m.filter(T=>T.correct).length,y=m.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=E(()=>{const m=si(),g=m.filter(T=>T.correct).length,y=m.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),r=E(()=>Xv()),l=E(()=>Ql()),c=E(()=>Zl()),u=E(()=>ei(20)),d=E(()=>Ze.value.length>0),f=E(()=>jo.value),p=E(()=>Ho.value!==null);return{observations:Br,decryptedObservations:Ze,loading:jo,error:Ho,lastFetchedAt:Fn,initialized:Wo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:l,sessions:c,recentObservations:u,hasData:d,isLoading:f,hasError:p,initialize:Yv,fetchProgress:qc,clearCache:qv,getObservationsByDate:Xc,getStatsBySkill:Ql,getSessions:Zl,getRecentObservations:ei,getTodayObservations:ti,getThisWeekObservations:si}}const Is={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},_t={NONE:"none",SILVER:"silver",GOLD:"gold"},Qv=6;function Zv(e){return e.slice(0,10)}function Qc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Zc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const ni=60*60*1e3;function eu(e){if(e.length===0)return Is.GREY;const t=e[e.length-1];if(!t.correct)return Is.RED;const s=Date.now()-ni;if(e.some(l=>!l.correct&&new Date(l.timestamp).getTime()>s))return Is.YELLOW;const o=e.filter(l=>!l.correct).pop();if(!o)return Is.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=ni?Is.ORANGE:Is.GREEN}function tu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function su(e){if(e.length===0)return _t.NONE;const t=new Set;for(const r of e)t.add(Zv(r.timestamp));const s=[...t].filter(r=>tu(e,r)).sort();if(s.length<2)return _t.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)Qc(a,s[r])>=Qv&&(o++,a=s[r],o>n&&(n=o));return n>=3?_t.GOLD:n>=2?_t.SILVER:_t.NONE}function eh(e){const t=e.observations.value||[];let s=[];try{s=ws().getPendingObservations().filter(l=>l.metadata).map(l=>{const c=l.metadata;return{id:c.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:c.timestamp||l.queuedAt,skill_path:c.skill_path,correct:c.correct,deal_subfolder:c.deal_subfolder,deal_number:c.deal_number,session_id:c.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function th(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(l=>{var c;return(l.deal_number??((c=l.deal)==null?void 0:c.deal_number))===o}).sort((l,c)=>l.timestamp.localeCompare(c.timestamp)),r=Zc(a);return{boardNumber:o,status:eu(a),achievement:su(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function sh(e){return!e||e.length===0?{achievement:_t.NONE}:e.every(n=>n.achievement===_t.GOLD)?{achievement:_t.GOLD}:e.every(n=>n.achievement===_t.SILVER||n.achievement===_t.GOLD)?{achievement:_t.SILVER}:{achievement:_t.NONE}}const nu="bridgeLessonBoards",eo=O(nh()),ka=new Set;function nh(){try{const e=localStorage.getItem(nu);return e?JSON.parse(e):{}}catch{return{}}}function oh(){try{localStorage.setItem(nu,JSON.stringify(eo.value))}catch{}}function ou(e,t){eo.value={...eo.value,[e]:t},oh()}function ah(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function rh(e){const t=ao(),s=e.filter(n=>!eo.value[n]&&!ka.has(n));if(s.length!==0){for(const n of s)ka.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const l=await fetch(r);if(!l.ok)continue;const c=await l.text(),u=ah(c);if(u.length>0){ou(n,u);break}}catch{continue}}}finally{ka.delete(n)}}))}}function lh(e){var n,o;const t=eo.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),l=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||l==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(l),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const l=t[a];if(l)return{subfolder:a,boardNumbers:l,lastActivity:r.lastActivity};const c=Math.max(...r.boards),u=[];for(let d=1;d<=c;d++)u.push(d);return{subfolder:a,boardNumbers:u,lastActivity:r.lastActivity}})}function vs(){const e=gs();function t(){return eh(e)}return{STATUS:Is,ACHIEVEMENT:_t,getObservations:t,computeBoardMastery:th,computeLessonAchievement:sh,extractLessonsFromObservations:lh,saveLessonBoardNumbers:ou,fetchMissingBoardCounts:rh,groupIntoBoardAttempts:Zc,calculateCurrentStatus:eu,calculateAchievement:su,hasGreenDay:tu,daysBetween:Qc}}const Tn="https://api.bridge-classroom.com/api",En="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Vo=O(!1),Mr=O(null),ca=O([]),hs=O({}),Ko=O(!1),Go=O(null),Fr=O(!1),zo={},ih=2*60*1e3;async function ch(){var s;const e=He(),t=e.currentUser.value;if(!t||!t.email){Vo.value=!1;return}try{const n=await fetch(`${Tn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":En}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;Mr.value=a.id;const r=await fetch(`${Tn}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":En}});if(!r.ok)return;const c=(await r.json()).grants||[],u=new Set(c.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const d=await fetch(`${Tn}/users`,{headers:{"x-api-key":En}});if(!d.ok)return;const p=(await d.json()).users||[],m=(s=t.email)==null?void 0:s.toLowerCase();if(ca.value=p.filter(g=>{var y;return u.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==m}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Vo.value=!0,Fr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Tn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":En},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function au(e){const t=hs.value[e],s=zo[e];if(t&&s&&Date.now()-s<ih)return t;try{const n=await fetch(`${Tn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":En}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=((await n.json()).observations||[]).map(r=>({id:r.id||r.observation_id,timestamp:r.timestamp,skill_path:r.skill_path,correct:r.correct,deal_subfolder:r.deal_subfolder,deal_number:r.deal_number}));return hs.value={...hs.value,[e]:a},zo[e]=Date.now(),a}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function uh(){Ko.value=!0,Go.value=null;try{await Promise.allSettled(ca.value.map(s=>au(s.id)));const e=vs(),t=new Set;for(const s of Object.values(hs.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Go.value=e.message,console.error("Failed to load student summaries:",e)}finally{Ko.value=!1}}function dh(e){const t=hs.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=vs(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const l=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const c of l)o[c.status]=(o[c.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function fh(e,t=3){const s=hs.value[e]||[],n=gs(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function mh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function ph(){Vo.value=!1,Mr.value=null,ca.value=[],hs.value={},Ko.value=!1,Go.value=null,Fr.value=!1;for(const e of Object.keys(zo))delete zo[e]}function ro(){return{isTeacher:Vo,viewerId:Mr,students:ca,studentObservations:hs,loading:Ko,error:Go,initialized:Fr,checkTeacherStatus:ch,fetchStudentObservations:au,loadAllStudentSummaries:uh,getStudentMasterySummary:dh,getStudentRecentLessons:fh,formatTimeSince:mh,reset:ph}}const Za="https://api.bridge-classroom.com/api",er="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",tr=O(!1),zs=O(null),es=O(null),to=O([]),pn=O([]),jr=O("lessons"),ua=O(!0),hn=O(!1),lo=O([]);function vh(e){hn.value=!0,lo.value=e}function hh(){hn.value=!1,lo.value=[]}function io(){return hn.value?lo.value:to.value}async function ru(){const e=He(),t=ro(),s=e.currentUser.value;if(!s){pn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Za}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":er}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${Za}/users`,{headers:{"x-api-key":er}});if(r.ok){const{users:l}=await r.json(),c=new Set(a.map(u=>u.grantor_id));for(const u of l)c.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}pn.value=n}async function Hr(e=!1){if(hn.value)return{success:!0};const t=He(),s=Ur(),n=t.currentUser.value;if(!n)return zs.value="No authenticated user",{success:!1,error:zs.value};tr.value=!0,zs.value=null;try{if(!es.value||es.value===n.id)es.value=n.id,await s.fetchProgress(e),to.value=s.decryptedObservations.value;else{const o=await fetch(`${Za}/observations?user_id=${es.value}&limit=10000`,{headers:{"x-api-key":er}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();to.value=a.observations||[]}return{success:!0}}catch(o){return zs.value=o.message,{success:!1,error:o.message}}finally{tr.value=!1}}async function gh(e){es.value=e,await Hr(!0)}const sr=E(()=>{var n;const e=io(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:cu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),nr=E(()=>{const e=io(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Dp(o),r=Ic(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Lp(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),lu=E(()=>ua.value?sr.value.filter(e=>e.total>0):sr.value),iu=E(()=>ua.value?nr.value.filter(e=>e.total>0):nr.value);function cu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const yh=E(()=>jr.value==="lessons"?lu.value:iu.value),bh=E(()=>pn.value.length>1),_h=E(()=>pn.value.find(e=>e.id===es.value)||null),wh=E(()=>io().length>0),Ch=E(()=>io().length),Sh=E(()=>{const e=io();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function $h(){const t=He().currentUser.value;t&&(es.value=t.id,await ru(),await Hr())}function kh(){to.value=[],pn.value=[],es.value=null,jr.value="lessons",ua.value=!0,zs.value=null,hn.value=!1,lo.value=[]}function gs(){return{loading:tr,error:zs,selectedUserId:es,observations:to,accessibleUsers:pn,activeTab:jr,onlyWithObservations:ua,useTestData:hn,testObservations:lo,enableTestMode:vh,disableTestMode:hh,lessonStats:sr,taxonStats:nr,filteredLessonStats:lu,filteredTaxonStats:iu,currentStats:yh,canViewOtherUsers:bh,selectedUser:_h,hasData:wh,totalObservations:Ch,overallSuccessRate:Sh,initialize:$h,loadAccomplishments:Hr,selectUser:gh,fetchAccessibleUsers:ru,reset:kh,formatLessonName:cu}}const xh="https://api.bridge-classroom.com/api",Ah=5e3,or=20;let ms=[],jn=null;function Ht(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),ms.push(n),ms.length>=or?Hn():jn||(jn=setTimeout(Hn,Ah))}async function Hn(){if(jn&&(clearTimeout(jn),jn=null),ms.length===0)return;const e=ms.splice(0);try{await fetch(`${xh}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{ms.unshift(...e),ms.length>or*2&&(ms=ms.slice(-or))}}const Wr="https://api.bridge-classroom.com/api",uu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",wt=O("idle"),du=O(null),Gs=O(null),Js=O(0),Ys=O(navigator.onLine),On=O(!1),oi=5,Nh=1e3,Th=6e4,Eh=5e3;let sn=null;function Oh(e){const t=Math.min(Nh*Math.pow(2,e),Th);return t+Math.random()*t*.25}async function fu(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${Wr}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return Ht("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return Ht("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function mu(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${Wr}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":uu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function co(){var n,o;const e=He(),t=ws();if(!navigator.onLine)return wt.value="offline",{success:!1,offline:!0};wt.value="syncing",Gs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const c=await fu(a);if(c.success)e.updateUser(a.id,{serverRegistered:!0}),On.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(c.error==="email_exists")return Ht("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),wt.value="error",Gs.value="Account already exists. Please use recovery.",On.value=!0,s;Ht("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,c.error),On.value=!0,Gs.value=`Registration failed: ${c.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let l=!1;if(a!=null&&a.dataConsent){const c=t.getPendingObservations();if(c.length>0){const u=await mu(c);if(u.success&&u.synced>0){const d=c.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var p;return(p=f.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await gs().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(l=!0,Gs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return On.value||l?wt.value="error":(wt.value="idle",du.value=new Date().toISOString(),Js.value=0),s}catch(a){return console.error("Sync failed:",a),Gs.value=a.message,wt.value="error",s.success=!1,s}}function ar(){sn&&clearTimeout(sn),sn=setTimeout(async()=>{await co()},Eh)}async function pu(){return sn&&(clearTimeout(sn),sn=null),await co()}async function vu(){if(Js.value>=oi){console.log("Max retries reached, giving up"),wt.value="error";return}const e=Oh(Js.value);Js.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Js.value}/${oi})`),setTimeout(async()=>{const t=await co();!t.success&&t.offline!==!0&&vu()},e)}function Ih(){var l;const e=He(),t=ws(),s=(l=e.currentUser)==null?void 0:l.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(c=>c.encrypted);if(o.length===0)return;const a={observations:o.map(c=>({encrypted_data:c.encrypted_data,iv:c.iv,metadata:c.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${Wr}/observations?api_key=${uu}`,r),console.log("Sent beacon with",o.length,"observations")}function Rh(){window.addEventListener("online",()=>{Ys.value=!0,console.log("Back online, triggering sync"),pu()}),window.addEventListener("offline",()=>{Ys.value=!1,wt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Ys.value&&(console.log("Tab visible, triggering sync"),ar())}),window.addEventListener("beforeunload",Ih),setInterval(()=>{document.visibilityState==="visible"&&Ys.value&&ar()},5*60*1e3)}async function Ph(){Rh(),navigator.onLine?await co():wt.value="offline"}function hu(){const e=E(()=>wt.value==="syncing"),t=E(()=>wt.value==="offline"||!Ys.value),s=E(()=>wt.value==="error"),n=E(()=>ws().pendingCount.value>0);return{syncState:wt,lastSyncAt:du,lastError:Gs,retryCount:Js,isOnline:Ys,registrationFailed:On,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:Ph,performSync:co,triggerSync:ar,forceSync:pu,retrySync:vu,registerUserWithServer:fu,syncObservationsToServer:mu}}const Vr="https://api.bridge-classroom.com/api",gu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ts=O(null),rr=O(!1),uo=O(null);async function Dh(){rr.value=!0;try{const e=await fetch(`${Vr}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=ts.value;ts.value=t.announcement||null,ts.value&&(!s||s.id!==ts.value.id)&&(uo.value=null)}catch{}finally{rr.value=!1}}async function Lh(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${Vr}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":gu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return ts.value=a.announcement||null,uo.value=null,a}async function Bh(){const e=await fetch(`${Vr}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":gu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);ts.value=null,uo.value=null}function Uh(){ts.value&&(uo.value=ts.value.id)}function Kr(){return{announcement:ts,loading:rr,dismissed:uo,loadAnnouncement:Dh,setAnnouncement:Lh,clearAnnouncement:Bh,dismiss:Uh}}const $s="https://api.bridge-classroom.com/api",ks="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",$n=O([]),xs=O([]),xa=O(null),$t=O(!1),Re=O(null);function fo(){async function e(c){$t.value=!0,Re.value=null;try{const u=await fetch(`${$s}/assignments?student_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":ks}});if(!u.ok){const f=await u.text();return Re.value=f||`Server error (${u.status})`,null}const d=await u.json();if(d.success){const f=new Map;for(const p of d.assignments){const m=f.get(p.exercise_id);(!m||p.attempted_boards>m.attempted_boards)&&f.set(p.exercise_id,p)}$n.value=Array.from(f.values())}else Re.value=d.error||"Failed to fetch assignments";return d}catch(u){return console.error("Failed to fetch student assignments:",u),Re.value="Unable to connect to server",null}finally{$t.value=!1}}async function t(c){$t.value=!0,Re.value=null;try{const u=await fetch(`${$s}/assignments?assigned_by=${encodeURIComponent(c)}`,{headers:{"x-api-key":ks}});if(!u.ok){const f=await u.text();return Re.value=f||`Server error (${u.status})`,null}const d=await u.json();return d.success?xs.value=d.assignments:Re.value=d.error||"Failed to fetch assignments",d}catch(u){return console.error("Failed to fetch teacher assignments:",u),Re.value="Unable to connect to server",null}finally{$t.value=!1}}async function s(c){$t.value=!0,Re.value=null;try{const u=await fetch(`${$s}/assignments?classroom_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":ks}});if(!u.ok){const f=await u.text();return Re.value=f||`Server error (${u.status})`,null}const d=await u.json();return d.success?d.assignments:(Re.value=d.error||"Failed to fetch assignments",[])}catch(u){return console.error("Failed to fetch classroom assignments:",u),Re.value="Unable to connect to server",[]}finally{$t.value=!1}}async function n(c){$t.value=!0,Re.value=null;try{const u=await fetch(`${$s}/assignments/${encodeURIComponent(c)}`,{headers:{"x-api-key":ks}});if(!u.ok){const f=await u.text();return Re.value=f||`Server error (${u.status})`,null}const d=await u.json();return d.success?xa.value=d.assignment:Re.value=d.error||"Failed to fetch assignment",d}catch(u){return console.error("Failed to fetch assignment detail:",u),Re.value="Unable to connect to server",null}finally{$t.value=!1}}async function o({exercise_id:c,classroom_id:u,student_id:d,assigned_by:f,due_at:p,sort_order:m}){$t.value=!0,Re.value=null;try{const g=await fetch(`${$s}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":ks},body:JSON.stringify({exercise_id:c,classroom_id:u||null,student_id:d||null,assigned_by:f,due_at:p||null,sort_order:m??null})});if(!g.ok){const T=await g.text();return Re.value=T||`Server error (${g.status})`,{success:!1,error:Re.value}}const y=await g.json();return y.success?xs.value=[y.assignment,...xs.value]:Re.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),Re.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{$t.value=!1}}async function a(c){try{const u=await fetch(`${$s}/assignments/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":ks}});if(!u.ok){const f=await u.text();return Re.value=f||`Server error (${u.status})`,{success:!1,error:Re.value}}const d=await u.json();return d.success&&(xs.value=xs.value.filter(f=>f.id!==c),$n.value=$n.value.filter(f=>f.id!==c)),d}catch(u){return console.error("Failed to delete assignment:",u),{success:!1,error:"Unable to connect to server"}}}async function r(c){try{const u=await fetch(`${$s}/exercises/${encodeURIComponent(c)}`,{headers:{"x-api-key":ks}});if(!u.ok)return null;const d=await u.json();return d.success?d.exercise.boards:null}catch(u){return console.error("Failed to fetch exercise boards:",u),null}}function l(){$n.value=[],xs.value=[],xa.value=null,$t.value=!1,Re.value=null}return{studentAssignments:$n,teacherAssignments:xs,currentAssignment:xa,loading:$t,error:Re,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:r,reset:l}}const Mh={key:0,class:"minimal-hand"},Fh={class:"seat-label-inline"},jh={class:"seat-label"},Hh={key:0,class:"suits"},Wh={key:0,class:"suit-row"},Vh={key:0,class:"cards clickable-cards"},Kh=["onClick"],Gh={key:1,class:"cards"},zh={key:2,class:"cards"},Jh={key:1,class:"hidden-hand"},Yh={key:2,class:"hcp"},qh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Ec,n=E(()=>Ya(t.seat)),o=E(()=>Np(t.hand)),a=E(()=>t.hand?s.reduce((T,C)=>{var _;return T+(((_=t.hand[C])==null?void 0:_.length)||0)},0):0),r=E(()=>a.value>0&&a.value<5);function l(T){return t.hand&&t.hand[T]&&t.hand[T].length>0}function c(T){return Rr[T]}function u(T){return xp(T)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(T){return d[T]||T}function p(T){if(!t.hand||!t.hand[T])return"";const C=t.hand[T];return C.length===0?"":C.map($a).join(" ")}const m=E(()=>t.playedCards&&t.playedCards.length>0),g=E(()=>{if(!t.playedCards)return null;const T=new Set;for(const C of t.playedCards){const _=C[0].toUpperCase(),b=C.slice(1).toUpperCase(),I={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];I&&T.add(`${I}:${b}`)}return T});function y(T,C){return g.value?g.value.has(`${T}:${C}`):!1}return(T,C)=>(v(),h("div",{class:de(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(v(),h("div",Mh,[i("span",Fh,S(e.seat),1),(v(!0),h(ee,null,le(P(s),_=>(v(),h("span",{key:_,class:de(["suit-symbol-inline",u(_)])},S(c(_)),3))),128))])):(v(),h(ee,{key:1},[i("div",jh,S(n.value),1),!e.hidden&&e.hand?(v(),h("div",Hh,[(v(!0),h(ee,null,le(P(s),_=>(v(),h(ee,{key:_},[!r.value||l(_)?(v(),h("div",Wh,[i("span",{class:de(["suit-symbol",u(_)])},S(c(_)),3),e.clickable?(v(),h("span",Vh,[(v(!0),h(ee,null,le(e.hand[_],b=>(v(),h("span",{key:b,class:de(y(_,b)?"card-played":"card-clickable"),onClick:I=>!y(_,b)&&T.$emit("card-click",{suit:f(_),rank:b})},S(P($a)(b)),11,Kh))),128))])):m.value?(v(),h("span",Gh,[(v(!0),h(ee,null,le(e.hand[_],b=>(v(),h("span",{key:b,class:de({"card-played":y(_,b)})},S(P($a)(b)),3))),128))])):(v(),h("span",zh,S(p(_)),1))])):B("",!0)],64))),128))])):e.hidden?(v(),h("div",Jh,[...C[0]||(C[0]=[i("div",{class:"card-back"},null,-1)])])):B("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(v(),h("div",Yh,S(o.value)+" HCP ",1)):B("",!0)],64))],2))}},_o=Ce(qh,[["__scopeId","data-v-128fc7ed"]]),Xh={class:"ns-column north-row"},Qh={key:0,class:"position north"},Zh={key:0,class:"position west"},eg={class:"center"},tg={key:1,class:"position east"},sg={class:"ns-column south-row"},ng={key:0,class:"position south"},og={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return v(),h("div",{class:de(["bridge-table",{compact:e.compact}])},[i("div",Xh,[!e.hiddenSeats.includes("N")&&e.hands.N?(v(),h("div",Qh,[ge(_o,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=l=>t.$emit("card-click",{seat:"N",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(v(),h("div",Zh,[ge(_o,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=l=>t.$emit("card-click",{seat:"W",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),i("div",eg,[Wd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(v(),h("div",tg,[ge(_o,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=l=>t.$emit("card-click",{seat:"E",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),i("div",sg,[!e.hiddenSeats.includes("S")&&e.hands.S?(v(),h("div",ng,[ge(_o,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=l=>t.$emit("card-click",{seat:"S",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)])],2)}}},ag=Ce(og,[["__scopeId","data-v-ec6230a9"]]),rg={class:"bidding-box"},lg={class:"bid-section"},ig={class:"levels"},cg=["onClick"],ug={class:"strains"},dg=["disabled","onClick"],fg=["innerHTML"],mg={class:"special-bids"},pg=["disabled"],vg=["disabled"],hg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=O(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=E(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),l=E(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const m=p[1].toUpperCase();return f.indexOf(m==="N"?"NT":m)});function c(f){o.value=f}function u(f,p){if(!f)return!1;const g=["C","D","H","S","NT"].indexOf(p);return f>r.value||f===r.value&&g>l.value}function d(f,p){u(f,p)&&n("bid",`${f}${p}`)}return(f,p)=>(v(),h("div",rg,[i("div",lg,[i("div",ig,[(v(),h(ee,null,le(7,m=>i("button",{key:m,class:de(["level-btn",{active:o.value===m}]),onClick:g=>c(m)},S(m),11,cg)),64))]),i("div",ug,[(v(),h(ee,null,le(a,m=>i("button",{key:m.value,class:de(["strain-btn",[m.colorClass,{disabled:!u(o.value,m.value)}]]),disabled:!u(o.value,m.value),onClick:g=>d(o.value,m.value)},[i("span",{innerHTML:m.display},null,8,fg)],10,dg)),64))])]),i("div",mg,[i("button",{class:"special-btn pass",onClick:p[0]||(p[0]=m=>f.$emit("bid","Pass"))}," Pass "),i("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=m=>f.$emit("bid","X"))}," Double ",8,pg),i("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=m=>f.$emit("bid","XX"))}," Redouble ",8,vg)])]))}},gg=Ce(hg,[["__scopeId","data-v-38ccb98f"]]),yg={class:"auction-table"},bg={class:"rounds"},_g=["innerHTML"],wg={key:1,class:"turn-indicator"},Cg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=E(()=>["W","N","E","S"].indexOf(t.dealer)),n=E(()=>{const u=[],d=t.bids;let f=0,p=0;for(;f<d.length||p===0&&d.length>0;){const m=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&f<d.length;y++)m[y]=d[f],f++;if(m.some(y=>y!==null)&&u.push(m),p++,p>20)break}if(t.currentBidIndex>=d.length){const m=u[u.length-1],g=m?m.filter(y=>y!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function a(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function r(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function l(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function c(u){return Pr(u).html}return(u,d)=>(v(),h("div",yg,[d[0]||(d[0]=Po('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),i("div",bg,[(v(!0),h(ee,null,le(n.value,(f,p)=>(v(),h("div",{key:p,class:"round"},[(v(!0),h(ee,null,le(f,(m,g)=>(v(),h("div",{key:g,class:de(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":l(p,g)}])},[m?(v(),h("span",{key:0,innerHTML:c(m)},null,8,_g)):e.showTurnIndicator&&a(p,g)?(v(),h("span",wg,"?")):B("",!0)],2))),128))]))),128))])]))}},Sg=Ce(Cg,[["__scopeId","data-v-ac265db8"]]),$g={class:"deal-info"},kg={class:"board-number"},xg={key:0,class:"board-popup"},Ag={class:"popup-list"},Ng=["onClick"],Tg={class:"info-row"},Eg={class:"info-item"},Og={class:"value"},Ig={class:"info-item"},Rg={key:0,class:"contract-row"},Pg={class:"info-item"},Dg=["innerHTML"],Lg={key:0,class:"label"},Bg={key:0,class:"info-item"},Ug=["innerHTML"],Mg={key:1,class:"title"},Fg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=O(!1);function a(p){n("goto",p),o.value=!1}const r=E(()=>Ya(s.dealer)),l=E(()=>Ya(s.declarer)),c=E(()=>Ap(s.vulnerable)),u=E(()=>{var m;const p=(m=s.vulnerable)==null?void 0:m.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),d=E(()=>s.contract?Pr(s.contract).html:""),f=E(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],m=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},T=g[p]||p;return`<span class="${y[p]||"black"}">${T}</span>${m==="T"?"10":m}`});return(p,m)=>(v(),h("div",$g,[i("div",{class:"board-selector",onMouseenter:m[0]||(m[0]=g=>o.value=!0),onMouseleave:m[1]||(m[1]=g=>o.value=!1)},[i("div",kg,"Board "+S(e.boardNumber),1),o.value&&e.totalDeals>1?(v(),h("div",xg,[m[2]||(m[2]=i("div",{class:"popup-header"},"Select Board",-1)),i("div",Ag,[(v(!0),h(ee,null,le(e.totalDeals,g=>(v(),h("button",{key:g,class:de(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+S(e.dealBoardNumbers[g-1]||g),11,Ng))),128))])])):B("",!0)],32),i("div",Tg,[i("div",Eg,[m[3]||(m[3]=i("span",{class:"label"},"Dealer:",-1)),i("span",Og,S(r.value),1)]),i("div",Ig,[m[4]||(m[4]=i("span",{class:"label"},"Vul:",-1)),i("span",{class:de(["value",u.value])},S(c.value),3)])]),e.showContract&&e.contract?(v(),h("div",Rg,[i("div",Pg,[i("span",{class:"value contract",innerHTML:d.value},null,8,Dg),e.declarer?(v(),h("span",Lg,"by "+S(l.value),1)):B("",!0)]),e.openingLead?(v(),h("div",Bg,[m[5]||(m[5]=i("span",{class:"label"},"OL:",-1)),i("span",{class:"value lead-card",innerHTML:f.value},null,8,Ug)])):B("",!0)])):B("",!0),e.title?(v(),h("div",Mg,S(e.title),1)):B("",!0)]))}},jg=Ce(Fg,[["__scopeId","data-v-5a844c49"]]),Hg={class:"feedback-header"},Wg={key:0,class:"icon"},Vg={key:1,class:"icon"},Kg={class:"title"},Gg={key:0,class:"feedback-content"},zg={class:"bid-comparison"},Jg={class:"bid-item your-bid"},Yg=["innerHTML"],qg={class:"bid-item correct-bid"},Xg=["innerHTML"],Qg={key:1,class:"feedback-content"},Zg={class:"bid-comparison"},ey={class:"bid-item your-bid"},ty=["innerHTML"],sy={class:"bid-item correct-bid"},ny=["innerHTML"],oy=["innerHTML"],ay={class:"actions"},ry={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=E(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Pr(a).html}function o(a){return Tp(a).html}return(a,r)=>e.visible?(v(),h("div",{key:0,class:de(["feedback-panel",e.type])},[i("div",Hg,[e.type==="wrong"?(v(),h("span",Wg,"")):e.type==="correct"?(v(),h("span",Vg,"")):B("",!0),i("span",Kg,S(s.value),1)]),e.wrongBid?(v(),h("div",Gg,[i("div",zg,[i("div",Jg,[r[1]||(r[1]=i("span",{class:"label"},"Your bid:",-1)),i("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Yg)]),i("div",qg,[r[2]||(r[2]=i("span",{class:"label"},"Correct bid:",-1)),i("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Xg)])])])):B("",!0),e.wrongCardCode?(v(),h("div",Qg,[i("div",Zg,[i("div",ey,[r[3]||(r[3]=i("span",{class:"label"},"Your card:",-1)),i("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,ty)]),i("div",sy,[r[4]||(r[4]=i("span",{class:"label"},"Correct card:",-1)),i("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,ny)])])])):B("",!0),e.commentary?(v(),h("div",{key:2,class:"commentary",innerHTML:P(Ks)(e.commentary)},null,8,oy)):B("",!0),i("div",ay,[e.showContinue?(v(),h("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=l=>a.$emit("continue"))}," Continue ")):B("",!0)])],2)):B("",!0)}},ai=Ce(ry,[["__scopeId","data-v-04368462"]]),ly={class:"welcome-screen"},iy={class:"welcome-card"},cy={class:"welcome-header"},uy={key:0,class:"welcome-body"},dy={class:"form-group"},fy={key:0,class:"error-message"},my={class:"form-group"},py={key:0,class:"error-message"},vy={class:"form-group"},hy={key:0,class:"error-message"},gy={key:0,class:"form-group"},yy={class:"checkbox-group"},by=["value","checked","onChange"],_y={key:1,class:"form-group"},wy={class:"single-classroom"},Cy={class:"form-group consent-group"},Sy={class:"checkbox-label consent-label"},$y={key:0,class:"consent-details"},ky=["disabled"],xy={key:0},Ay={key:1},Ny={key:1,class:"welcome-body returning"},Ty={key:2,class:"welcome-body switcher"},Ey={class:"user-list"},Oy=["onClick"],Iy={class:"user-name"},Ry={key:0,class:"user-class"},Py={key:3,class:"welcome-body recovery-sent"},Dy={class:"subtitle"},Ly={class:"recovery-info"},By={class:"code-entry"},Uy=["disabled"],My={key:0},Fy={key:1},jy={key:0,class:"error-message"},Hy={key:4,class:"welcome-body recovery-claiming"},Wy={class:"subtitle"},Vy={key:0,class:"recovery-error-panel"},Ky={class:"error-message"},Gy={key:1,class:"loading-spinner"},zy={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=ao(),o=He(),a="https://api.bridge-classroom.com/api",r=O("form"),l=O(""),c=O(""),u=O(""),d=O([]),f=O(!0),p=O({firstName:"",lastName:"",email:"",classrooms:""}),m=O(!1),g=O(!1),y=O(""),T=O(""),C=O(""),_=O(""),b=O("");St(async()=>{o.initialize(),n.initializeFromUrl();const G=new URLSearchParams(window.location.search),U=G.get("recover"),oe=G.get("user_id");if(U&&oe){await me(oe,U),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const I=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,X=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Z=E(()=>l.value.trim().length>0&&c.value.trim().length>0&&u.value.trim().length>0&&I.test(u.value.trim())),L=E(()=>o.currentUser.value?o.currentUser.value.firstName:""),Y=E(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function J(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let G=!0;return l.value.trim()||(p.value.firstName="First name is required",G=!1),c.value.trim()||(p.value.lastName="Last name is required",G=!1),u.value.trim()?I.test(u.value.trim())||(p.value.email="Please enter a valid email address",G=!1):(p.value.email="Email is required",G=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",G=!1),G}async function fe(){const G=u.value.trim().toLowerCase();if(!navigator.onLine)return Ht("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const U=await o.requestRecovery(G,a);return U.success?(T.value=G,_.value=U.message,r.value="recovery-sent",!1):U.message&&U.message.includes("No account found")?!0:(Ht("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${G}`,U.message),await Hn(),p.value.email=U.message||"Unable to verify email. Please try again.",!1)}catch(U){return Ht("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${G}`,U),await Hn(),X?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function me(G,U){r.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",C.value="";try{const oe=await o.claimRecovery(G,U,a);oe.success&&oe.user?s("userReady",oe.user):(C.value=oe.error||"Recovery failed. Please try again.",r.value="form")}catch(oe){Ht("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${G}`,oe),C.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,y.value=""}}async function ue(){if(b.value.trim().length===6){g.value=!0,y.value="Verifying code...",C.value="";try{const G=await o.claimRecoveryByCode(T.value.trim(),b.value.trim(),a);G.success&&G.user?s("userReady",G.user):C.value=G.error||"Invalid code. Please check and try again."}catch(G){Ht("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${T.value.trim()}`,G),C.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function _e(){if(!J())return;if(g.value=!0,y.value="Checking account...",!await fe()){g.value=!1,y.value="";return}let U=[];n.hasSingleClassroom.value?U=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(U=[...d.value]),y.value="Creating your secure encryption key...";try{const oe=await o.createUser({firstName:l.value,lastName:c.value,email:u.value,classrooms:U,dataConsent:f.value,apiUrl:a});s("userReady",oe)}catch(oe){const De=oe instanceof Error?oe.message:String(oe);Ht("registration_create_user_failed",`handleSubmit  createUser threw for ${u.value.trim()}`,oe),await Hn(),p.value.email=`Failed to create account: ${De}. Please try again.`}finally{g.value=!1,y.value=""}}function Ae(){s("userReady",o.currentUser.value)}function te(){r.value="switcher"}function ie(G){o.switchUser(G),s("userReady",o.currentUser.value)}function q(){l.value="",c.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function K(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function H(G){const U=d.value.indexOf(G);U===-1?d.value.push(G):d.value.splice(U,1)}return(G,U)=>(v(),h("div",ly,[i("div",iy,[i("div",cy,[i("h1",null,S(Y.value),1)]),r.value==="form"?(v(),h("div",uy,[U[16]||(U[16]=i("h2",null,"Welcome!",-1)),U[17]||(U[17]=i("p",{class:"subtitle"},"Please enter your name to get started.",-1)),i("form",{onSubmit:Lt(_e,["prevent"]),class:"user-form"},[i("div",dy,[U[8]||(U[8]=i("label",{for:"firstName"},"First Name",-1)),Pe(i("input",{id:"firstName","onUpdate:modelValue":U[0]||(U[0]=oe=>l.value=oe),type:"text",placeholder:"Enter your first name",class:de({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[ht,l.value]]),p.value.firstName?(v(),h("span",fy,S(p.value.firstName),1)):B("",!0)]),i("div",my,[U[9]||(U[9]=i("label",{for:"lastName"},"Last Name",-1)),Pe(i("input",{id:"lastName","onUpdate:modelValue":U[1]||(U[1]=oe=>c.value=oe),type:"text",placeholder:"Enter your last name",class:de({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[ht,c.value]]),p.value.lastName?(v(),h("span",py,S(p.value.lastName),1)):B("",!0)]),i("div",vy,[U[10]||(U[10]=i("label",{for:"email"},"Email Address",-1)),Pe(i("input",{id:"email","onUpdate:modelValue":U[2]||(U[2]=oe=>u.value=oe),type:"email",placeholder:"Enter your email address",class:de({"has-error":p.value.email}),autocomplete:"email"},null,2),[[ht,u.value]]),p.value.email?(v(),h("span",hy,S(p.value.email),1)):B("",!0),U[11]||(U[11]=i("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),P(n).hasMultipleClassrooms.value?(v(),h("div",gy,[U[12]||(U[12]=i("label",null,"Select Your Class(es)",-1)),i("div",yy,[(v(!0),h(ee,null,le(P(n).availableClassrooms.value,oe=>(v(),h("label",{key:oe.id,class:"checkbox-label"},[i("input",{type:"checkbox",value:oe.id,checked:d.value.includes(oe.id),onChange:De=>H(oe.id)},null,40,by),i("span",null,S(oe.name),1)]))),128))])])):P(n).hasSingleClassroom.value?(v(),h("div",_y,[U[13]||(U[13]=i("label",null,"Class",-1)),i("div",wy,S(P(n).singleClassroom.value.name),1)])):B("",!0),i("div",Cy,[i("label",Sy,[Pe(i("input",{type:"checkbox","onUpdate:modelValue":U[3]||(U[3]=oe=>f.value=oe)},null,512),[[Tr,f.value]]),U[14]||(U[14]=i("span",null," Preserve my practice history ",-1))]),i("button",{type:"button",class:"details-toggle",onClick:U[4]||(U[4]=oe=>m.value=!m.value)},S(m.value?"Hide details":"What data is preserved?"),1),m.value?(v(),h("div",$y,[...U[15]||(U[15]=[Po('<p data-v-903ed78e>Your practice history is saved online so you can track your progress over time.</p><p data-v-903ed78e><strong data-v-903ed78e>How it works:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Your data is encrypted with your personal key</li><li data-v-903ed78e>Only you and people you authorize can view it</li><li data-v-903ed78e>The site administrator can also access your data</li></ul><p data-v-903ed78e><strong data-v-903ed78e>What&#39;s preserved:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Which hands you practiced</li><li data-v-903ed78e>Your bidding choices (correct and incorrect)</li><li data-v-903ed78e>When you practiced</li></ul><p class="consent-note" data-v-903ed78e>You can change this setting anytime in Settings.</p>',6)])])):B("",!0)]),i("button",{type:"submit",class:"submit-btn",disabled:!Z.value||g.value},[g.value?(v(),h("span",xy,S(y.value),1)):(v(),h("span",Ay,"Start Practicing"))],8,ky)],32),P(o).hasUsers.value?(v(),h("button",{key:0,class:"back-link",onClick:K}," Back to user selection ")):B("",!0)])):r.value==="returning"?(v(),h("div",Ny,[i("h2",null,"Welcome back, "+S(L.value)+"!",1),U[18]||(U[18]=i("p",{class:"subtitle"},"Ready to continue practicing?",-1)),i("button",{class:"submit-btn",onClick:Ae}," Continue "),i("button",{class:"switch-link",onClick:te}," Not "+S(L.value)+"? Switch user ",1)])):r.value==="switcher"?(v(),h("div",Ty,[U[19]||(U[19]=i("h2",null,"Select User",-1)),U[20]||(U[20]=i("p",{class:"subtitle"},"Choose who's practicing today:",-1)),i("div",Ey,[(v(!0),h(ee,null,le(P(o).allUsers.value,oe=>{var De;return v(),h("button",{key:oe.id,class:de(["user-item",{"is-current":oe.id===P(o).currentUserId.value}]),onClick:Ge=>ie(oe.id)},[i("span",Iy,S(oe.firstName)+" "+S(oe.lastName),1),(De=oe.classrooms)!=null&&De.length?(v(),h("span",Ry,S(oe.classrooms.join(", ")),1)):B("",!0)],10,Oy)}),128))]),i("button",{class:"add-user-btn",onClick:q}," + Add New User "),P(o).currentUser.value?(v(),h("button",{key:0,class:"back-link",onClick:K}," Cancel ")):B("",!0)])):r.value==="recovery-sent"?(v(),h("div",Py,[U[25]||(U[25]=i("h2",null,"Check Your Email",-1)),i("p",Dy,[U[21]||(U[21]=xt(" We found an existing account for ",-1)),i("strong",null,S(T.value),1),U[22]||(U[22]=xt(". ",-1))]),i("div",Ly,[i("p",null,S(_.value),1),U[23]||(U[23]=i("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),i("div",By,[U[24]||(U[24]=i("label",{for:"recoveryCode"},"Recovery Code",-1)),Pe(i("input",{id:"recoveryCode","onUpdate:modelValue":U[5]||(U[5]=oe=>b.value=oe),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Bo(ue,["enter"])},null,544),[[ht,b.value]]),i("button",{class:"submit-btn",disabled:b.value.trim().length!==6||g.value,onClick:ue},[g.value?(v(),h("span",My,S(y.value),1)):(v(),h("span",Fy,"Restore Account"))],8,Uy),C.value?(v(),h("span",jy,S(C.value),1)):B("",!0)]),i("button",{class:"back-link",onClick:U[6]||(U[6]=oe=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(v(),h("div",Hy,[U[27]||(U[27]=i("h2",null,"Restoring Your Account",-1)),i("p",Wy,S(y.value),1),C.value?(v(),h("div",Vy,[i("p",Ky,S(C.value),1),i("button",{class:"back-link",onClick:U[7]||(U[7]=oe=>r.value="form")}," Try again ")])):(v(),h("div",Gy,[...U[26]||(U[26]=[i("div",{class:"spinner"},null,-1)])]))])):B("",!0)])]))}},Jy=Ce(zy,[["__scopeId","data-v-903ed78e"]]),As="https://api.bridge-classroom.com/api",js="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ns=O([]),Hs=O(null),kt=O(!1),Je=O(null);function mo(){async function e(c){kt.value=!0,Je.value=null;try{const d=await(await fetch(`${As}/classrooms?teacher_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":js}})).json();return d.success?Ns.value=d.classrooms:Je.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Je.value="Unable to connect to server",null}finally{kt.value=!1}}async function t(c,u,d){kt.value=!0,Je.value=null;try{const f=await fetch(`${As}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":js},body:JSON.stringify({teacher_id:c,name:u,description:d||null})});if(!f.ok){const m=await f.text();return Je.value=m||`Server error (${f.status})`,{success:!1,error:Je.value}}const p=await f.json();return p.success?Ns.value=[p.classroom,...Ns.value]:Je.value=p.error||"Failed to create classroom",p}catch(f){return console.error("Failed to create classroom:",f),Je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{kt.value=!1}}async function s(c){kt.value=!0,Je.value=null;try{const d=await(await fetch(`${As}/classrooms/${encodeURIComponent(c)}`,{headers:{"x-api-key":js}})).json();return d.success?Hs.value=d.classroom:Je.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Je.value="Unable to connect to server",null}finally{kt.value=!1}}async function n(c,u){try{const f=await(await fetch(`${As}/classrooms/${encodeURIComponent(c)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":js}})).json();if(f.success&&Hs.value){Hs.value.members=Hs.value.members.filter(m=>m.student_id!==u);const p=Ns.value.findIndex(m=>m.id===c);p!==-1&&Ns.value[p].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(c){kt.value=!0,Je.value=null;try{const u=await fetch(`${As}/join/${encodeURIComponent(c)}`);return u.status===404?(Je.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Je.value="Unable to connect to server",null}finally{kt.value=!1}}async function a(c,u,d){kt.value=!0,Je.value=null;try{const p=await(await fetch(`${As}/join/${encodeURIComponent(c)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":js},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return p.success||(Je.value=p.error||"Failed to join classroom"),p}catch(f){return console.error("Failed to join classroom:",f),Je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{kt.value=!1}}async function r(c,u){try{return await(await fetch(`${As}/classrooms/${encodeURIComponent(c)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":js},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function l(){Ns.value=[],Hs.value=null,kt.value=!1,Je.value=null}return{teacherClassrooms:Ns,currentClassroom:Hs,loading:kt,error:Je,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:l}}const Yy={class:"settings-panel"},qy={class:"settings-body"},Xy={class:"settings-section"},Qy={class:"info-row"},Zy={class:"info-value"},eb={class:"info-row"},tb={class:"info-value"},sb={class:"info-row"},nb={class:"info-row"},ob={class:"info-value"},ab={key:1,class:"edit-form"},rb={class:"form-group"},lb={class:"form-group"},ib={class:"form-group"},cb={class:"checkbox-label"},ub={key:0,class:"settings-section"},db={class:"assignment-list"},fb={class:"assignment-header"},mb={class:"assignment-name"},pb={class:"assignment-progress"},vb={class:"progress-bar"},hb={class:"assignment-meta"},gb={key:0},yb={class:"assignment-list"},bb={class:"assignment-header"},_b={class:"assignment-name"},wb={class:"assignment-meta"},Cb={key:1,class:"settings-section"},Sb={class:"classroom-id"},$b=["disabled","onClick"],kb={class:"settings-section"},xb={class:"toggle-row"},Ab={class:"toggle-label"},Nb=["checked"],Tb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=He(),o=ao(),a=ia(),r=mo(),l=O(!1),c=O(""),u=O(""),d=O(!0),f=E(()=>n.currentUser.value),p=E(()=>{var Y;return!f.value||!((Y=f.value.classrooms)!=null&&Y.length)?"No classroom assigned":f.value.classrooms.map(J=>{const fe=o.availableClassrooms.value.find(me=>me.id===J);return fe?fe.name:J}).join(", ")}),m=E(()=>a.getAllAssignments().filter(Y=>Y.completionPercent<100)),g=E(()=>a.getAllAssignments().filter(Y=>Y.completionPercent>=100));function y(){f.value&&(c.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,l.value=!0)}function T(){l.value=!1}function C(){f.value&&(n.updateUser(f.value.id,{firstName:c.value,lastName:u.value,dataConsent:d.value}),l.value=!1)}function _(){s("switchUser")}function b(){l.value=!1,s("close")}const I=O(null);async function X(Y){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(I.value=Y,(await r.leaveClassroom(Y,f.value.id)).success){const fe=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:fe.filter(me=>me!==Y)})}I.value=null}function Z(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function L(Y){return Y?new Date(Y).toLocaleDateString():"N/A"}return(Y,J)=>{var fe,me,ue,_e,Ae,te,ie;return e.visible?(v(),h("div",{key:0,class:"settings-overlay",onClick:Lt(b,["self"])},[i("div",Yy,[i("div",{class:"settings-header"},[J[5]||(J[5]=i("h2",null,"Settings",-1)),i("button",{class:"close-btn",onClick:b,"aria-label":"Close"},"  ")]),i("div",qy,[i("section",Xy,[J[12]||(J[12]=i("h3",null,"Your Profile",-1)),l.value?(v(),h("div",ab,[i("div",rb,[J[10]||(J[10]=i("label",{for:"editFirstName"},"First Name",-1)),Pe(i("input",{id:"editFirstName","onUpdate:modelValue":J[1]||(J[1]=q=>c.value=q),type:"text"},null,512),[[ht,c.value]])]),i("div",lb,[J[11]||(J[11]=i("label",{for:"editLastName"},"Last Name",-1)),Pe(i("input",{id:"editLastName","onUpdate:modelValue":J[2]||(J[2]=q=>u.value=q),type:"text"},null,512),[[ht,u.value]])]),i("div",ib,[i("label",cb,[Pe(i("input",{type:"checkbox","onUpdate:modelValue":J[3]||(J[3]=q=>d.value=q)},null,512),[[Tr,d.value]]),i("span",null,"Share practice results with "+S(P(o).teacherName.value||"teacher"),1)])]),i("div",{class:"button-row"},[i("button",{class:"primary-btn",onClick:C}," Save Changes "),i("button",{class:"secondary-btn",onClick:T}," Cancel ")])])):(v(),h(ee,{key:0},[i("div",Qy,[J[6]||(J[6]=i("span",{class:"info-label"},"Name",-1)),i("span",Zy,S((fe=f.value)==null?void 0:fe.firstName)+" "+S((me=f.value)==null?void 0:me.lastName),1)]),i("div",eb,[J[7]||(J[7]=i("span",{class:"info-label"},"Class",-1)),i("span",tb,S(p.value),1)]),i("div",sb,[J[8]||(J[8]=i("span",{class:"info-label"},"Data Sharing",-1)),i("span",{class:de(["info-value",(ue=f.value)!=null&&ue.dataConsent?"enabled":"disabled"])},S((_e=f.value)!=null&&_e.dataConsent?"Enabled":"Disabled"),3)]),i("div",nb,[J[9]||(J[9]=i("span",{class:"info-label"},"Member Since",-1)),i("span",ob,S(L((Ae=f.value)==null?void 0:Ae.createdAt)),1)]),i("div",{class:"button-row"},[i("button",{class:"secondary-btn",onClick:y}," Edit Profile "),i("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((te=f.value)==null?void 0:te.role)!=="teacher"&&((ie=f.value)==null?void 0:ie.role)!=="admin"?(v(),h("button",{key:0,class:"become-teacher-btn",onClick:J[0]||(J[0]=q=>{s("close"),s("become-teacher")})}," Become a Teacher ")):B("",!0)],64))]),m.value.length||g.value.length?(v(),h("section",ub,[J[16]||(J[16]=i("h3",null,"Assignments",-1)),m.value.length?(v(),h(ee,{key:0},[J[13]||(J[13]=i("h4",null,"Active",-1)),i("div",db,[(v(!0),h(ee,null,le(m.value,q=>(v(),h("div",{key:q.id,class:"assignment-item"},[i("div",fb,[i("span",mb,S(q.name),1),i("span",pb,S(q.completionPercent)+"%",1)]),i("div",vb,[i("div",{class:"progress-fill",style:dt({width:`${q.completionPercent}%`})},null,4)]),i("div",hb,[q.dueDate?(v(),h("span",gb," Due: "+S(L(q.dueDate)),1)):B("",!0),i("span",null,S(q.completedDeals)+"/"+S(q.totalDeals)+" deals ",1)])]))),128))])],64)):B("",!0),g.value.length?(v(),h(ee,{key:1},[J[15]||(J[15]=i("h4",null,"Completed",-1)),i("div",yb,[(v(!0),h(ee,null,le(g.value,q=>(v(),h("div",{key:q.id,class:"assignment-item completed"},[i("div",bb,[i("span",_b,S(q.name),1),J[14]||(J[14]=i("span",{class:"assignment-check"},"",-1))]),i("div",wb," Completed "+S(L(q.lastPracticedAt)),1)]))),128))])],64)):B("",!0)])):B("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(v(),h("section",Cb,[J[17]||(J[17]=i("h3",null,"My Classrooms",-1)),(v(!0),h(ee,null,le(f.value.classrooms,q=>(v(),h("div",{key:q,class:"classroom-row"},[i("span",Sb,S(q),1),i("button",{class:"leave-btn",disabled:I.value===q,onClick:K=>X(q)},S(I.value===q?"Leaving...":"Leave"),9,$b)]))),128))])):B("",!0),i("section",kb,[J[19]||(J[19]=i("h3",null,"Display Options",-1)),i("div",xb,[i("label",Ab,[i("input",{type:"checkbox",checked:P(o).showLoadPbnOption.value,onChange:J[4]||(J[4]=q=>P(o).setUIPref("showLoadPbnOption",q.target.checked))},null,40,Nb),J[18]||(J[18]=i("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),i("section",{class:"settings-section"},[J[20]||(J[20]=i("h3",null,"Data & Privacy",-1)),J[21]||(J[21]=i("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),i("button",{class:"remove-device-btn",onClick:Z}," Remove account from this device "),J[22]||(J[22]=i("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):B("",!0)}}},Eb=Ce(Tb,[["__scopeId","data-v-57179473"]]),Ob={class:"banner-content"},Ib={class:"assignment-info"},Rb={class:"assignment-title"},Pb={class:"assignment-name"},Db={class:"assignment-meta"},Lb={class:"progress-text"},Bb={class:"progress-bar"},Ub={key:0,class:"complete-badge"},Mb={class:"return-text"},Fb={__name:"AssignmentBanner",setup(e){const t=ia(),s=E(()=>t.currentAssignment.value),n=E(()=>t.hasActiveAssignment.value),o=E(()=>t.assignmentProgress.value),a=E(()=>t.isAssignmentComplete.value),r=E(()=>t.inAssignmentMode.value),l=E(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),c=E(()=>l.value===null?null:l.value<0?"Overdue":l.value===0?"Due today":l.value===1?"Due tomorrow":`Due in ${l.value} days`),u=E(()=>l.value===null?"":l.value<0?"overdue":l.value<=1?"urgent":l.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(p,m)=>{var g,y;return n.value&&r.value?(v(),h("div",{key:0,class:de(["assignment-banner",{complete:a.value}])},[i("div",Ob,[i("div",Ib,[i("div",Rb,[m[0]||(m[0]=i("span",{class:"assignment-label"},"Assignment:",-1)),i("span",Pb,S((g=s.value)==null?void 0:g.name),1)]),i("div",Db,[i("span",Lb,S(o.value.completed)+" of "+S(o.value.total)+" deals ("+S(o.value.percent)+"%) ",1),c.value?(v(),h("span",{key:0,class:de(["due-text",u.value])},S(c.value),3)):B("",!0)])]),i("div",Bb,[i("div",{class:de(["progress-fill",{complete:a.value}]),style:dt({width:`${o.value.percent}%`})},null,6)]),i("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(v(),h("div",Ub," Complete! ")):B("",!0)],2)):s.value&&!r.value?(v(),h("div",{key:1,class:"return-banner",onClick:f},[m[1]||(m[1]=i("span",{class:"return-icon"},"",-1)),i("span",Mb," Return to assignment: "+S((y=s.value)==null?void 0:y.name)+" ("+S(o.value.percent)+"% complete) ",1)])):B("",!0)}}},jb=Ce(Fb,[["__scopeId","data-v-a4095a6a"]]),Hb=["innerHTML"],Wb={__name:"AnnouncementBanner",setup(e){const t=Kr(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,l)=>{const c=s[l.toLowerCase()];return c?`<span class="ann-circle" style="background:${c.bg};color:${c.fg}"></span>`:r})}return(o,a)=>P(t).announcement.value&&P(t).dismissed.value!==P(t).announcement.value.id?(v(),h("div",{key:0,class:de(["announcement-banner",P(t).announcement.value.type])},[i("span",{class:"announcement-text",innerHTML:n(P(t).announcement.value.message)},null,8,Hb),i("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>P(t).dismiss()),title:"Dismiss"},"")],2)):B("",!0)}},Vb=Ce(Wb,[["__scopeId","data-v-4b12409b"]]),Kb={key:0,class:"status-content"},Gb={key:1,class:"status-content offline"},zb={key:0,class:"badge"},Jb={key:2,class:"status-content error"},Yb={class:"status-text"},qb={key:0,class:"badge"},Xb={key:3,class:"status-content pending"},Qb={class:"status-text"},Zb={key:4,class:"status-content synced"},e_={__name:"SyncStatus",setup(e){const t=hu(),s=ws(),n=E(()=>s.pendingCount.value),o=E(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=E(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function l(){t.retrySync()}return(c,u)=>(v(),h("div",{class:de(["sync-status",a.value]),onClick:r},[P(t).isSyncing.value?(v(),h("div",Kb,[...u[0]||(u[0]=[i("span",{class:"spinner"},null,-1),i("span",{class:"status-text"},"Syncing...",-1)])])):P(t).isOffline.value?(v(),h("div",Gb,[u[1]||(u[1]=i("span",{class:"icon"},"",-1)),u[2]||(u[2]=i("span",{class:"status-text"},"Offline",-1)),n.value>0?(v(),h("span",zb,S(n.value),1)):B("",!0)])):P(t).hasError.value?(v(),h("div",Jb,[u[3]||(u[3]=i("span",{class:"icon"},"",-1)),i("span",Yb,S(o.value),1),n.value>0?(v(),h("span",qb,S(n.value),1)):B("",!0),i("button",{class:"retry-btn",onClick:Lt(l,["stop"])},"Retry")])):n.value>0?(v(),h("div",Xb,[u[4]||(u[4]=i("span",{class:"icon"},"",-1)),i("span",Qb,S(n.value)+" pending",1)])):(v(),h("div",Zb,[...u[5]||(u[5]=[i("span",{class:"icon"},"",-1),i("span",{class:"status-text"},"Synced",-1)])]))],2))}},t_=Ce(e_,[["__scopeId","data-v-8457149a"]]),yu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function s_(e){return yu.find(t=>t.path===e)||null}yu.reduce((e,t)=>e+t.dealCount,0);const Wn=36e5;function ri(e){if(!e||e.length===0)return"untried";const t=[...e].sort((d,f)=>d.ts-f.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(d=>!d.correct&&n.ts-d.ts<Wn),r=t.slice(-5),l=r.filter(d=>d.correct).length,c=r.length-l;return a&&l/r.length>=.8&&c<=1?"mastered":r.filter(d=>d.correct?!t.filter(p=>p.ts<d.ts).reverse().find(p=>!p.correct&&d.ts-p.ts<Wn):!1).length>=1?"progressing":"struggling"}function n_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var I,X;const l=Object.keys(r).map(Number).sort((Z,L)=>Z-L);let c=0,u=0,d=0;l.forEach(Z=>{const L=ri(r[Z]);L==="mastered"?c++:L==="progressing"?u++:d++});const f=l.length,p=[];l.forEach(Z=>{r[Z].forEach(L=>p.push({...L,dealNum:Z}))}),p.sort((Z,L)=>Z.ts-L.ts);const m=2*Wn,g=l.map(Z=>{var Ae;const L=r[Z].slice().sort((te,ie)=>te.ts-ie.ts),Y=ri(L),J=((Ae=L[L.length-1])==null?void 0:Ae.correct)??!1,fe=L.map((te,ie)=>{if(te.correct){const q=L.slice(0,ie).reverse().find(K=>!K.correct&&te.ts-K.ts<Wn);return{ts:te.ts,y:q?.75:1,correct:!0}}else{const q=L.slice(ie+1).find(K=>K.correct&&K.ts-te.ts<Wn);return{ts:te.ts,y:q?.5:0,correct:!1}}}),me=5*60*1e3,ue=fe.map(te=>({...te,vts:te.ts.getTime(),rawTs:te.ts.getTime()}));let _e=0;for(;_e<ue.length;){let te=_e;for(;te+1<ue.length&&ue[te+1].vts-ue[te].vts<me;)te++;if(te>_e){const ie=ue[te].vts-ue[_e].vts,q=Math.max(ie,m),K=ie>0?q/ie:1,H=ue[_e].vts;for(let G=_e;G<=te;G++)ue[G].vts=H+(ue[G].vts-H)*K}_e=te+1}return{dealNum:Z,status:Y,lastCorrect:J,points:ue}}),y=g.flatMap(Z=>Z.points.map(L=>L.rawTs)),T=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-T||1;g.forEach(Z=>{Z.points=Z.points.map(L=>({...L,x:(L.rawTs-T)/_}))});const b=(()=>{const Z=Object.values(r);if(Z.length===0)return 0;const L=Z.reduce((J,fe)=>{const me=fe.slice(-5);return J+me.filter(ue=>ue.correct).length},0),Y=Z.reduce((J,fe)=>J+Math.min(fe.length,5),0);return Y>0?Math.round(L/Y*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:f,mastered:c,progressing:u,struggling:d,totalBoards:t[a]??f,totalAttempts:p.length,recentRate:b,boardLines:g,firstActivity:(I=p[0])==null?void 0:I.ts,lastActivity:(X=p[p.length-1])==null?void 0:X.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function o_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=s_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=Ic(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const qs={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function bu(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const a_={key:0,class:"sparkline-empty"},r_=["width","height"],l_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],i_=["d","stroke"],c_=["cx","cy","r","fill"],u_=5,d_=2.5,f_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=E(()=>t.width-n.l-n.r),a=E(()=>t.height-n.t-n.b),r=E(()=>{const f=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...f),m=Math.max(...f);return{min:p,max:m,span:m-p||1}});function l(f){return n.t+(1-f)*a.value}function c(f,p){const m=p>=.9?1:p>0?.5:0;return{px:n.l+(f-r.value.min)/r.value.span*o.value,py:n.t+(1-m)*a.value,yMapped:m}}const u=E(()=>t.boardLines.map(f=>{const p=qs[f.status]||"#6b7280",m=f.points.filter(y=>y.y!==.75).map(y=>c(y.x,y.y)),g=m.length>=2?m.map((y,T)=>`${T===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:m,pathD:g}})),d=E(()=>{const f=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...c(y.x,y.y),y:y.y}))),p=new Array(f.length).fill(!1),m=[];return f.forEach((g,y)=>{if(p[y])return;const T=[g];p[y]=!0,f.forEach((I,X)=>{if(p[X])return;const Z=I.px-g.px,L=I.py-g.py;Math.sqrt(Z*Z+L*L)<u_&&(T.push(I),p[X]=!0)});const C=T.reduce((I,X)=>I+X.px,0)/T.length,_=T.reduce((I,X)=>I+X.py,0)/T.length,b=T.sort((I,X)=>X.yMapped-I.yMapped)[0].yMapped;m.push({px:C,py:_,y:b,n:T.length})}),m});return(f,p)=>!e.boardLines||e.boardLines.length===0?(v(),h("div",a_," No data ")):(v(),h("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(v(),h(ee,null,le(s,m=>i("line",{key:m,x1:n.l,y1:l(m),x2:n.l+o.value,y2:l(m),stroke:m===.5?"#d1d5db":"#e5e7eb","stroke-width":m===.5?1:.5,"stroke-dasharray":m===.5?"3,3":"none"},null,8,l_)),64)),(v(!0),h(ee,null,le(u.value,(m,g)=>Pe((v(),h("path",{key:"line-"+g,d:m.pathD,fill:"none",stroke:m.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,i_)),[[Bf,m.pts.length>=2]])),128)),(v(!0),h(ee,null,le(d.value,(m,g)=>(v(),h("circle",{key:"bubble-"+g,cx:m.px,cy:m.py,r:d_*Math.sqrt(m.n),fill:P(bu)(m.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,c_))),128))],8,r_))}},m_=Ce(f_,[["__scopeId","data-v-a14e2bb7"]]),p_={class:"details-header"},v_={class:"details-title"},h_={class:"details-subtitle"},g_=["viewBox","height"],y_=["x","y","fill"],b_=["y","width","height","fill","fill-opacity"],__=["x","y","fill"],w_=["x1","y1","x2","y2","stroke-dasharray"],C_=["x","y"],S_=["cx","cy","fill"],$_={key:0,class:"details-activity"},k_={class:"stats-row"},x_={class:"stat-value"},A_={class:"stat-label"},N_=["viewBox"],T_=["x","y","width","height"],E_={class:"activity-dates"},O_={class:"details-legend"},Aa=7,li=.3,Na=110,Ts=560,Yt=28,Ta=40,ii=36e5,yt=864e5,I_={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close"],setup(e){const t=e,s={t:16,r:20,b:40,l:Na},n=E(()=>{const C=new Set(t.lesson.boardLines.map(b=>b.dealNum)),_=t.lesson.totalBoards??Math.max(...C);return Array.from({length:_},(b,I)=>I+1)}),o=E(()=>n.value.length*Yt),a=E(()=>Ts+s.l+s.r),r=E(()=>o.value+s.t+s.b),l=E(()=>new Set(t.lesson.boardLines.map(C=>C.dealNum)));function c(C){return l.value.has(C)}function u(C){const _=t.lesson.boardLines.find(b=>b.dealNum===C);return _?qs[_.status]||"#6b7280":"#d1d5db"}const d=E(()=>{const C=t.rawData.filter(te=>te.skill_path===t.lesson.path),_=n.value,b=C.map(te=>{const ie=new Date(te.timestamp).getTime(),q=te.deal_number,K=_.indexOf(q);return{rawTs:ie,dealNum:q,boardIdx:K,correct:te.correct,y:te.correct?1:0}});if(b.forEach(te=>{const ie=b.filter(K=>K.dealNum===te.dealNum).sort((K,H)=>K.rawTs-H.rawTs),q=ie.findIndex(K=>K.rawTs===te.rawTs&&K.correct===te.correct);if(te.correct){const K=ie.slice(0,q).reverse().find(H=>!H.correct&&te.rawTs-H.rawTs<ii);te.y=K?.75:1}else{const K=ie.slice(q+1).find(H=>H.correct&&H.rawTs-te.rawTs<ii);te.y=K?.5:0}}),b.length===0)return[];const I=b.map(te=>te.rawTs),X=Math.min(...I),Z=Math.max(...I),L=Math.floor(X/yt)*yt,J=(Math.floor(Z/yt)+1)*yt-1-L||1,fe=te=>s.l+(te.rawTs-L)/J*Ts,me=te=>s.t+te*Yt+Yt/2,ue=Aa*2*(1-li),_e=Aa*2*(1-li),Ae=b.map(te=>({...te,px:fe(te),py:me(te.boardIdx)}));return _.forEach(te=>{const ie=Ae.filter(K=>K.dealNum===te),q={};ie.forEach(K=>{const H=K.rawTs;q[H]||(q[H]=[]),q[H].push(K)}),Object.values(q).forEach(K=>{if(K.length<2)return;const H=K[0].py;K.forEach((G,U)=>{G.py=H+(U-(K.length-1)/2)*_e})})}),_.forEach(te=>{const ie=Ae.filter(H=>H.dealNum===te).sort((H,G)=>H.px-G.px),q=[];let K=0;for(;K<ie.length;){let H=K;for(;H+1<ie.length&&ie[H+1].px-ie[K].px<ue;)H++;q.push({start:K,end:H}),K=H+1}q.forEach((H,G)=>{const U=H.end-H.start+1;if(U===1)return;const oe=(U-1)*ue;let De;G===0?De=ie[H.start].px:G===q.length-1?De=ie[H.end].px-oe:De=(ie[H.start].px+ie[H.end].px)/2-oe/2;for(let Ge=0;Ge<U;Ge++)ie[H.start+Ge].px=De+Ge*ue})}),Ae}),f=E(()=>[...d.value].sort((C,_)=>C.y-_.y)),p=E(()=>{const C=d.value;if(C.length===0)return[];const _=C.map(J=>J.rawTs),b=Math.min(..._),I=Math.max(..._),X=Math.floor(b/yt)*yt,L=(Math.floor(I/yt)+1)*yt-1-X||1,Y=5;return Array.from({length:Y},(J,fe)=>{const me=fe/(Y-1),ue=new Date(X+me*L);return{x:s.l+me*Ts,label:ue.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+ue.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),m=E(()=>{const C=d.value;if(C.length===0)return null;const _={};C.forEach(fe=>{const me=Math.floor(fe.rawTs/yt);_[me]=(_[me]||0)+1});const b=Object.keys(_).map(Number).sort();if(b.length===0)return null;const I=b[0],X=b[b.length-1],Z=X-I+1,L=Math.max(...Object.values(_)),Y=Math.max(2,Ts/Z-1);return{bars:b.map(fe=>({dayKey:fe,x:(fe-I)/Z*Ts,h:_[fe]/L*Ta,w:Y,count:_[fe],dateLabel:new Date(fe*yt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Ts,firstLabel:new Date(I*yt).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(X*yt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),g=E(()=>{const C=d.value,_={};return C.forEach(b=>{const I=Math.floor(b.rawTs/yt);_[I]=!0}),[{label:"Days active",value:Object.keys(_).length},{label:"Boards tried",value:t.lesson.tried},{label:"Observations",value:C.length}]}),y=[{color:"#10b981",label:"Clean success"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hour)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function T(C){return new Date(C).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(C,_)=>(v(),h("div",{class:"details-overlay",onClick:_[2]||(_[2]=Lt(b=>C.$emit("close"),["self"]))},[i("div",{class:"details-panel",onClick:_[1]||(_[1]=Lt(()=>{},["stop"]))},[i("div",p_,[i("div",null,[i("h2",v_,S(e.lesson.name),1),i("p",h_,S(e.lesson.tried)+" boards  "+S(e.lesson.totalAttempts)+" attempts ",1)]),i("button",{class:"details-close-btn",onClick:_[0]||(_[0]=b=>C.$emit("close"))}," close")]),(v(),h("svg",{viewBox:`0 0 ${a.value} ${r.value}`,width:"100%",height:r.value,class:"details-chart"},[(v(!0),h(ee,null,le(n.value,(b,I)=>(v(),h("rect",{key:"bg-"+b,x:s.l,y:s.t+I*Yt,width:Ts,height:Yt,fill:I%2===0?"#ffffff":"#f9fafb"},null,8,y_))),128)),(v(!0),h(ee,null,le(n.value,(b,I)=>(v(),h("g",{key:"label-"+b},[i("rect",{x:2,y:s.t+I*Yt+3,width:Na-14,height:Yt-6,rx:"3",fill:u(b),"fill-opacity":c(b)?.12:.05},null,8,b_),i("text",{x:Na-16,y:s.t+I*Yt+Yt/2+4,"text-anchor":"end","font-size":"13",fill:u(b),"font-family":"monospace"}," Board "+S(b)+S(c(b)?"":" "),9,__)]))),128)),(v(!0),h(ee,null,le(p.value,(b,I)=>(v(),h("line",{key:"grid-"+I,x1:b.x,y1:s.t,x2:b.x,y2:s.t+o.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":I===0||I===p.value.length-1?"none":"3,4"},null,8,w_))),128)),(v(!0),h(ee,null,le(p.value,(b,I)=>(v(),h("text",{key:"tick-"+I,x:b.x,y:s.t+o.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},S(b.label),9,C_))),128)),(v(!0),h(ee,null,le(f.value,(b,I)=>(v(),h("circle",{key:"dot-"+I,cx:b.px,cy:b.py,r:Aa,fill:P(bu)(b.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92"},[i("title",null,"Board "+S(b.dealNum)+"  "+S(b.correct?"Correct":"Incorrect")+"  "+S(T(b.rawTs)),1)],8,S_))),128))],8,g_)),m.value?(v(),h("div",$_,[i("div",k_,[(v(!0),h(ee,null,le(g.value,b=>(v(),h("div",{class:"stat-item",key:b.label},[i("div",x_,S(b.value),1),i("div",A_,S(b.label),1)]))),128))]),(v(),h("svg",{width:"100%",viewBox:`0 0 ${m.value.barW} ${Ta}`,class:"activity-chart"},[(v(!0),h(ee,null,le(m.value.bars,b=>(v(),h("rect",{key:b.dayKey,x:b.x,y:Ta-b.h,width:b.w,height:b.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[i("title",null,S(b.dateLabel)+": "+S(b.count)+" observations",1)],8,T_))),128))],8,N_)),i("div",E_,[i("span",null,S(m.value.firstLabel),1),i("span",null,S(m.value.lastLabel),1)])])):B("",!0),i("div",O_,[(v(),h(ee,null,le(y,b=>i("span",{key:b.label,class:"legend-item"},[i("span",{class:"legend-dot",style:dt({backgroundColor:b.color})},null,4),xt(" "+S(b.label),1)])),64))])])]))}},R_=Ce(I_,[["__scopeId","data-v-95dd7375"]]),P_={class:"student-progress-panel"},D_={key:0,class:"sp-empty"},L_={class:"sp-header"},B_={class:"sp-header-row"},U_={key:0,class:"sp-name-badge"},M_={class:"sp-meta"},F_={key:0,class:"sp-activity-chart"},j_={class:"sp-activity-header"},H_={class:"sp-activity-meta"},W_={class:"sp-activity-body"},V_={class:"sp-activity-svg-wrap"},K_=["viewBox"],G_=["x"],z_=["x","y"],J_=["x1","x2","y2"],Y_=["x","y","width","height","fill"],q_=["x","y"],X_=["x","y"],Q_={class:"sp-activity-legend"},Z_={class:"sp-legend"},e1={class:"sp-grid"},t1=["onClick"],s1={class:"sp-card-header"},n1={class:"sp-card-info"},o1={class:"sp-card-name"},a1={class:"sp-card-meta"},r1={class:"sp-card-rate"},l1={class:"sp-card-sparkline"},i1={class:"sp-mastery"},c1={class:"sp-mastery-track"},u1=["title"],d1={class:"sp-mastery-legend"},f1={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""}},setup(e){const t=e,s=O(null),n=E(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:m,lessonNames:g}=o_(t.observations);return n_(t.observations,m,g)}),o=E(()=>n.value.reduce((m,g)=>m+g.tried,0)),a=E(()=>n.value.reduce((m,g)=>m+g.totalAttempts,0)),r=[{color:"#10b981",label:"Success (clean)"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hr)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function l(m){return`hsl(${Math.round(m*360/n.value.length)}, 65%, 55%)`}function c(m){return m>=75?"#10b981":m>=50?"#f59e0b":"#f43f5e"}function u(m){return m?m.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function d(m){if(!m.firstActivity||!m.lastActivity)return null;const g=m.lastActivity-m.firstActivity,y=g/6e4,T=g/36e5,C=g/864e5;return y<90?`${Math.round(y)} min`:T<48?`${Math.round(T)} hr`:C<14?`${Math.round(C)} days`:`${Math.round(C/7)} wks`}function f(m){const g=Math.max(0,(m.totalBoards||0)-m.tried),y=[{count:m.mastered,color:qs.mastered,label:"Mastered"},{count:m.progressing,color:qs.progressing,label:"Progressing"},{count:m.struggling,color:qs.struggling,label:"Struggling"},{count:g,color:qs.untried,label:"Untried"}].filter(C=>C.count>0),T=y.reduce((C,_)=>C+_.count,0);return y.forEach(C=>{C.pct=`${(C.count/T*100).toFixed(1)}%`}),y}const p=E(()=>{if(n.value.length===0)return null;const m=864e5,g=28,y=700,T=120,C=new Set,_=n.value.map(me=>{const ue={};return me.boardLines.forEach(_e=>{_e.points.forEach(Ae=>{const te=Math.floor((Ae.rawTs??0)/m);te>0&&(ue[te]=(ue[te]||0)+1,C.add(te))})}),ue});if(C.size===0)return null;const b=[...C].sort(),I=b[0],X=b[b.length-1],Z=X-I+1,L=b.map(me=>_.reduce((ue,_e)=>ue+(_e[me]||0),0)),Y=Math.max(...L),J=Math.max(1,y/Z*.75);return{days:b.map(me=>{const ue=g+(me-I)/Z*y;let _e=T;const Ae=[];return n.value.forEach((te,ie)=>{const q=_[ie][me]||0;if(!q)return;const K=q/Y*T;_e-=K,Ae.push({y:_e,h:K,count:q,color:l(ie),name:te.name})}),{dayKey:me,x:ue,segments:Ae,dateLabel:new Date(me*m).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:Y,barW:J,barH:T,chartW:y,svgW:g+y,yAxisW:g,firstLabel:new Date(I*m).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(X*m).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(m,g)=>(v(),h("div",P_,[n.value.length===0?(v(),h("div",D_,[...g[1]||(g[1]=[i("p",null,"No practice data to display yet.",-1)])])):(v(),h(ee,{key:1},[i("div",L_,[i("div",B_,[e.studentName?(v(),h("span",U_,S(e.studentName),1)):B("",!0),i("span",M_,S(n.value.length)+" lesson"+S(n.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),p.value?(v(),h("div",F_,[i("div",j_,[g[2]||(g[2]=xt(" Daily practice activity ",-1)),i("span",H_,S(o.value)+" boards  "+S(a.value)+" observations ",1)]),i("div",W_,[i("div",V_,[(v(),h("svg",{width:"100%",viewBox:`0 0 ${p.value.svgW} ${p.value.barH+26}`,style:dt({display:"block",height:p.value.barH+26+"px"})},[i("text",{x:p.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.maxCount),9,G_),i("text",{x:p.value.yAxisW-3,y:p.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,z_),i("line",{x1:p.value.yAxisW,y1:"0",x2:p.value.yAxisW,y2:p.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,J_),(v(!0),h(ee,null,le(p.value.days,y=>(v(),h("g",{key:y.dayKey},[(v(!0),h(ee,null,le(y.segments,(T,C)=>(v(),h("rect",{key:C,x:y.x,y:T.y,width:p.value.barW,height:T.h,fill:T.color,opacity:"0.85",rx:"1"},[i("title",null,S(T.name)+": "+S(T.count)+" on "+S(y.dateLabel),1)],8,Y_))),128))]))),128)),i("text",{x:p.value.yAxisW,y:p.value.barH+18,"font-size":"10",fill:"#6b7280"},S(p.value.firstLabel),9,q_),i("text",{x:p.value.yAxisW+p.value.chartW,y:p.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.lastLabel),9,X_)],12,K_))]),i("div",Q_,[(v(!0),h(ee,null,le(n.value,(y,T)=>(v(),h("span",{key:y.path,class:"sp-activity-legend-item"},[i("span",{class:"sp-legend-dot",style:dt({backgroundColor:l(T)})},null,4),xt(" "+S(y.name),1)]))),128))])])])):B("",!0),i("div",Z_,[(v(),h(ee,null,le(r,y=>i("span",{key:y.label,class:"sp-legend-item"},[i("span",{class:"sp-legend-dot",style:dt({backgroundColor:y.color})},null,4),xt(" "+S(y.label),1)])),64)),g[3]||(g[3]=i("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),i("div",e1,[(v(!0),h(ee,null,le(n.value,y=>(v(),h("div",{key:y.path,class:"sp-lesson-card",onClick:T=>s.value=y},[i("div",s1,[i("div",n1,[i("div",o1,S(y.name),1),i("div",a1,S(y.tried)+" boards  "+S(y.totalAttempts)+" attempts  last "+S(u(y.lastActivity))+S(d(y)?`  span ${d(y)}`:""),1)]),i("div",r1,[i("div",{class:"sp-rate-value",style:dt({color:c(y.recentRate)})},S(y.recentRate)+"% ",5),g[4]||(g[4]=i("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),i("div",l1,[ge(m_,{boardLines:y.boardLines,width:280,height:70},null,8,["boardLines"])]),i("div",i1,[i("div",c1,[(v(!0),h(ee,null,le(f(y),T=>(v(),h("div",{key:T.label,class:"sp-mastery-segment",style:dt({width:T.pct,backgroundColor:T.color}),title:`${T.label}: ${T.count}`},null,12,u1))),128))]),i("div",d1,[(v(!0),h(ee,null,le(f(y),T=>(v(),h("span",{key:T.label,class:"sp-mastery-item"},[i("span",{class:"sp-legend-dot",style:dt({backgroundColor:T.color})},null,4),xt(" "+S(T.count)+" "+S(T.label),1)]))),128))])]),g[5]||(g[5]=i("div",{class:"sp-card-hint"},"details ",-1))],8,t1))),128))])],64)),s.value?(v(),Ue(R_,{key:2,lesson:s.value,rawData:e.observations,onClose:g[0]||(g[0]=y=>s.value=null)},null,8,["lesson","rawData"])):B("",!0)]))}},_u=Ce(f1,[["__scopeId","data-v-722715b0"]]),m1={class:"progress-dashboard"},p1={class:"dashboard-header"},v1={key:0,class:"loading"},h1={key:1,class:"error-state"},g1={key:2,class:"empty-state"},y1={key:3,class:"dashboard-content"},b1={class:"dashboard-actions"},_1={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Ur(),s=He(),n=E(()=>t.decryptedObservations.value),o=E(()=>n.value.length>0),a=E(()=>{const l=s.currentUser.value;return l?`${l.firstName} ${l.lastName}`:""});St(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(l,c)=>(v(),h("div",m1,[i("header",p1,[c[3]||(c[3]=i("h2",null,"Student Progress",-1)),i("button",{class:"close-btn",onClick:c[0]||(c[0]=u=>l.$emit("close"))},"")]),P(t).isLoading.value?(v(),h("div",v1,[...c[4]||(c[4]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading your progress...",-1)])])):P(t).hasError.value?(v(),h("div",h1,[i("p",null,"Failed to load progress: "+S(P(t).error.value),1),i("button",{onClick:r},"Try Again")])):o.value?(v(),h("div",y1,[ge(_u,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),i("div",b1,[i("button",{class:"secondary-btn",onClick:r},"Refresh Data"),i("button",{class:"primary-btn",onClick:c[2]||(c[2]=u=>l.$emit("close"))},"Continue Practicing")])])):(v(),h("div",g1,[c[5]||(c[5]=i("h3",null,"No Practice Data Yet",-1)),c[6]||(c[6]=i("p",null,"Complete some practice deals to see your progress here!",-1)),i("button",{class:"primary-btn",onClick:c[1]||(c[1]=u=>l.$emit("close"))},"Start Practicing")]))]))}},w1=Ce(_1,[["__scopeId","data-v-286a38c8"]]),C1="test-user-mastery",S1="test-classroom",$1="Negative_Double",k1="competitive_bidding/negative_double";let lr=0;function Qe({boardNumber:e,correct:t,timestamp:s}){return lr++,{id:`mastery-test-${lr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:C1,skill_path:k1,correct:t,deal_subfolder:$1,deal_number:e,classroom:S1}}function mt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function wo(e){return new Date(Date.now()-e*60*1e3).toISOString()}function x1(){lr=0;const e=[];e.push(Qe({boardNumber:2,correct:!0,timestamp:mt(5)}),Qe({boardNumber:2,correct:!1,timestamp:mt(1)})),e.push(Qe({boardNumber:3,correct:!1,timestamp:wo(30)}),Qe({boardNumber:3,correct:!0,timestamp:wo(20)})),e.push(Qe({boardNumber:4,correct:!1,timestamp:wo(90)}),Qe({boardNumber:4,correct:!0,timestamp:wo(60)})),e.push(Qe({boardNumber:5,correct:!1,timestamp:mt(10)}),Qe({boardNumber:5,correct:!0,timestamp:mt(2)})),e.push(Qe({boardNumber:6,correct:!0,timestamp:mt(14)}),Qe({boardNumber:6,correct:!0,timestamp:mt(7)})),e.push(Qe({boardNumber:7,correct:!0,timestamp:mt(21)}),Qe({boardNumber:7,correct:!0,timestamp:mt(14)}),Qe({boardNumber:7,correct:!0,timestamp:mt(7)})),e.push(Qe({boardNumber:8,correct:!0,timestamp:mt(28)}),Qe({boardNumber:8,correct:!0,timestamp:mt(21)}),Qe({boardNumber:8,correct:!0,timestamp:mt(14)}),Qe({boardNumber:8,correct:!1,timestamp:mt(1)}));const t=[1,2,3,4,5].map(s=>({...Qe({boardNumber:s,correct:!0,timestamp:mt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const A1=["onClick","title"],N1={key:0,class:"medal gold-medal"},T1={key:1,class:"medal silver-medal"},E1={class:"board-num"},O1={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=vs(),a=E(()=>{const l=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const c=l.find(u=>u.boardNumber===s.forceRedBoard);c&&(c.status="red")}return l});function r(l){const c={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${l.boardNumber}: ${c[l.status]}${u[l.achievement]}`}return(l,c)=>e.boardNumbers.length>0?(v(),h("div",{key:0,class:de(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(v(),h("button",{key:0,class:"intro-btn",onClick:c[0]||(c[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):B("",!0),(v(!0),h(ee,null,le(a.value,(u,d)=>(v(),h("div",{key:u.boardNumber,class:de(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:r(u)},[u.achievement==="gold"?(v(),h("span",N1,"")):u.achievement==="silver"?(v(),h("span",T1,"")):B("",!0),i("span",E1,S(u.boardNumber),1)],10,A1))),128))],2)):B("",!0)}},wu=Ce(O1,[["__scopeId","data-v-820a0f0c"]]),I1={class:"accomplishments-view"},R1={class:"view-header"},P1={key:0,class:"user-selector"},D1=["value"],L1=["value"],B1={key:1,class:"loading-state"},U1={key:2,class:"error-state"},M1={key:3,class:"empty-state"},F1={key:4,class:"view-content"},j1={class:"controls-row"},H1={class:"tabs"},W1={key:0,class:"tab-content"},V1={key:0,class:"no-data"},K1={key:1,class:"lesson-list"},G1={class:"lesson-header"},z1={class:"lesson-name"},J1={key:1,class:"tab-content"},Y1={key:0,class:"no-data"},q1={key:1,class:"taxon-list"},X1={class:"taxon-header"},Q1={class:"taxon-category"},Z1={class:"taxon-name"},e0={class:"taxon-counts"},t0={class:"taxon-stat correct"},s0={class:"taxon-stat incorrect"},n0={class:"taxon-stat total"},o0={class:"view-actions"},a0={key:5,class:"test-mode-banner"},r0={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=gs(),o=vs(),r=new URLSearchParams(window.location.search).get("test");St(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode(x1()):await n.initialize()});async function l(){await n.loadAccomplishments(!0)}async function c(p){await n.selectUser(p)}function u(p,m){s("navigate-to-deal",{subfolder:p,dealNumber:m})}const d=E(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),T=o.computeLessonAchievement(y);return{...g,achievement:T.achievement}}).sort((g,y)=>f(g.subfolder).localeCompare(f(y.subfolder)))});vt(d,p=>{o.fetchMissingBoardCounts(p.map(m=>m.subfolder))},{immediate:!0});function f(p){return n.formatLessonName(p)}return(p,m)=>(v(),h("div",I1,[i("header",R1,[m[6]||(m[6]=i("h2",null,"Accomplishments",-1)),i("button",{class:"close-btn",onClick:m[0]||(m[0]=g=>p.$emit("close"))},"")]),P(n).canViewOtherUsers.value?(v(),h("div",P1,[m[7]||(m[7]=i("label",{for:"user-select"},"Viewing:",-1)),i("select",{id:"user-select",value:P(n).selectedUserId.value,onChange:m[1]||(m[1]=g=>c(g.target.value))},[(v(!0),h(ee,null,le(P(n).accessibleUsers.value,g=>(v(),h("option",{key:g.id,value:g.id},S(g.name)+S(g.isSelf?" (You)":""),9,L1))),128))],40,D1)])):B("",!0),P(n).loading.value?(v(),h("div",B1,[...m[8]||(m[8]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading accomplishments...",-1)])])):P(n).error.value?(v(),h("div",U1,[i("p",null,"Failed to load: "+S(P(n).error.value),1),i("button",{onClick:l},"Try Again")])):P(n).hasData.value?(v(),h("div",F1,[i("div",j1,[i("div",H1,[i("button",{class:de(["tab-btn",{active:P(n).activeTab.value==="lessons"}]),onClick:m[3]||(m[3]=g=>P(n).activeTab.value="lessons")}," Lessons ",2),i("button",{class:de(["tab-btn",{active:P(n).activeTab.value==="taxons"}]),onClick:m[4]||(m[4]=g=>P(n).activeTab.value="taxons")}," Taxons ",2)])]),P(n).activeTab.value==="lessons"?(v(),h("div",W1,[d.value.length===0?(v(),h("div",V1," No lesson data available yet. ")):(v(),h("div",K1,[(v(!0),h(ee,null,le(d.value,g=>(v(),h("div",{key:g.subfolder,class:"lesson-row"},[i("div",G1,[i("span",z1,S(f(g.subfolder)),1),g.achievement!=="none"?(v(),h("span",{key:0,class:de(["achievement-badge",g.achievement])},"  "+S(g.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),ge(wu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):B("",!0),P(n).activeTab.value==="taxons"?(v(),h("div",J1,[P(n).filteredTaxonStats.value.length===0?(v(),h("div",Y1," No skill data available yet. ")):(v(),h("div",q1,[(v(!0),h(ee,null,le(P(n).filteredTaxonStats.value,g=>(v(),h("div",{key:g.skillPath,class:"taxon-card"},[i("div",X1,[i("span",Q1,S(g.categoryName),1),i("span",Z1,S(g.skillName),1)]),i("div",e0,[i("span",t0,S(g.correct),1),i("span",s0,S(g.incorrect),1),i("span",n0,S(g.total)+" total",1)])]))),128))]))])):B("",!0),i("div",o0,[i("button",{class:"secondary-btn",onClick:l}," Refresh "),i("button",{class:"primary-btn",onClick:m[5]||(m[5]=g=>p.$emit("close"))}," Done ")])])):(v(),h("div",M1,[m[9]||(m[9]=i("h3",null,"No Practice Data Yet",-1)),m[10]||(m[10]=i("p",null,"Complete some practice deals to see your accomplishments here!",-1)),i("button",{class:"primary-btn",onClick:m[2]||(m[2]=g=>p.$emit("close"))},"Start Practicing")])),P(n).useTestData.value?(v(),h("div",a0," Test Mode - Using Generated Data ")):B("",!0)]))}},l0=Ce(r0,[["__scopeId","data-v-38e59c14"]]),Cu="bridge-classroom-anon-mode",i0="BridgeClassroom-Anon",Ea=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],ci=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function c0(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function u0(e,t){const s=`${i0}:${e} ${t}`,n=c0(s),o=Number(n%BigInt(Ea.length)),a=Number(n/BigInt(Ea.length)%BigInt(ci.length));return{firstName:Ea[o],lastName:ci[a]}}const kn=O(localStorage.getItem(Cu)==="true");function d0(){function e(){kn.value=!kn.value,localStorage.setItem(Cu,kn.value.toString())}function t(o){return kn.value?u0(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),l=(a==null?void 0:a.charAt(0))||"",c=(r==null?void 0:r.charAt(0))||"";return(l+c).toUpperCase()||"?"}return{isAnonymized:kn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const f0={class:"teacher-student-list"},m0={class:"teacher-header"},p0={class:"header-actions"},v0=["value"],h0={key:0,class:"loading-state"},g0={key:1,class:"error-state"},y0={key:2,class:"empty-state"},b0={key:3,class:"empty-state"},_0={key:4,class:"student-table-wrap"},w0={class:"student-table"},C0=["onClick"],S0={class:"col-name"},$0={class:"student-name-cell"},k0={class:"avatar"},x0={class:"col-mastery"},A0={class:"mastery-pills"},N0={key:0,class:"pill pill-green"},T0={key:1,class:"pill pill-orange"},E0={key:2,class:"pill pill-yellow"},O0={key:3,class:"pill pill-red"},I0={key:4,class:"no-data-label"},R0={class:"col-active"},P0={class:"col-lessons"},D0={class:"recent-lessons"},L0={key:0,class:"no-data-label"},B0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=ro(),n=mo(),o=He(),a=d0(),r=O("all"),l=O({});St(async()=>{await s.loadAllStudentSummaries(),await c()});async function c(){const C=o.currentUser.value;if(!C)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(C.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async b=>{const I=await n.fetchClassroomDetail(b.id);I!=null&&I.success&&(_[b.id]=new Set(I.classroom.members.map(X=>X.student_id)))})),l.value=_}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await c()}const d=E(()=>{const C=new Set;for(const _ of Object.values(l.value))for(const b of _)C.add(b);return C}),f=E(()=>{const C=s.students.value;if(r.value==="all")return C;if(r.value==="none")return C.filter(b=>!d.value.has(b.id));const _=l.value[r.value];return _?C.filter(b=>_.has(b.id)):C}),p=E(()=>[...f.value].sort((C,_)=>{var X,Z;const b=((X=m.value[C.id])==null?void 0:X.lastObservationTime)||"",I=((Z=m.value[_.id])==null?void 0:Z.lastObservationTime)||"";return I!==b?I.localeCompare(b):y(C).localeCompare(y(_))})),m=E(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentMasterySummary(_.id);return C}),g=E(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentRecentLessons(_.id);return C});function y(C){return a.displayFullName(C)}function T(C){return a.displayInitials(C)}return(C,_)=>(v(),h("div",f0,[i("header",m0,[_[5]||(_[5]=i("h2",null,"My Students",-1)),i("div",p0,[P(n).teacherClassrooms.value.length?Pe((v(),h("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=b=>r.value=b),class:"filter-select"},[_[3]||(_[3]=i("option",{value:"all"},"All Students",-1)),(v(!0),h(ee,null,le(P(n).teacherClassrooms.value,b=>(v(),h("option",{key:b.id,value:b.id},S(b.name),9,v0))),128)),_[4]||(_[4]=i("option",{value:"none"},"No Classroom",-1))],512)),[[Un,r.value]]):B("",!0),i("button",{class:de(["anon-btn",{active:P(a).isAnonymized.value}]),onClick:_[1]||(_[1]=b=>P(a).toggleAnonymize())},S(P(a).isAnonymized.value?"Clear":"Anon"),3),i("button",{class:"secondary-btn",onClick:u},"Refresh"),i("button",{class:"secondary-btn",onClick:_[2]||(_[2]=b=>C.$emit("close"))},"Back")])]),P(s).loading.value?(v(),h("div",h0,[..._[6]||(_[6]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):P(s).error.value?(v(),h("div",g0,[i("p",null,"Failed to load: "+S(P(s).error.value),1),i("button",{onClick:u},"Try Again")])):P(s).students.value.length===0?(v(),h("div",y0,[..._[7]||(_[7]=[i("h3",null,"No Students Yet",-1),i("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(v(),h("div",b0,[..._[8]||(_[8]=[i("h3",null,"No Matching Students",-1),i("p",null,"No students match the selected filter.",-1)])])):(v(),h("div",_0,[i("table",w0,[_[9]||(_[9]=i("thead",null,[i("tr",null,[i("th",{class:"col-name"},"Student"),i("th",{class:"col-mastery"},"Mastery"),i("th",{class:"col-active"},"Last Active"),i("th",{class:"col-lessons"},"Recent Lessons")])],-1)),i("tbody",null,[(v(!0),h(ee,null,le(p.value,b=>{var I,X,Z,L,Y,J,fe;return v(),h("tr",{key:b.id,class:"student-row",onClick:me=>C.$emit("select-student",b.id,y(b))},[i("td",S0,[i("div",$0,[i("div",k0,S(T(b)),1),i("span",null,S(y(b)),1)])]),i("td",x0,[i("div",A0,[(I=m.value[b.id])!=null&&I.green?(v(),h("span",N0,S(m.value[b.id].green),1)):B("",!0),(X=m.value[b.id])!=null&&X.orange?(v(),h("span",T0,S(m.value[b.id].orange),1)):B("",!0),(Z=m.value[b.id])!=null&&Z.yellow?(v(),h("span",E0,S(m.value[b.id].yellow),1)):B("",!0),(L=m.value[b.id])!=null&&L.red?(v(),h("span",O0,S(m.value[b.id].red),1)):B("",!0),(Y=m.value[b.id])!=null&&Y.total?B("",!0):(v(),h("span",I0,"No data"))])]),i("td",R0,S(P(s).formatTimeSince((J=m.value[b.id])==null?void 0:J.lastObservationTime)),1),i("td",P0,[i("div",D0,[(v(!0),h(ee,null,le(g.value[b.id],(me,ue)=>(v(),h("span",{key:ue,class:"lesson-tag"},S(me),1))),128)),(fe=g.value[b.id])!=null&&fe.length?B("",!0):(v(),h("span",L0,"-"))])])],8,C0)}),128))])])]))]))}},U0=Ce(B0,[["__scopeId","data-v-dd6d8e66"]]),M0={class:"teacher-student-detail"},F0={class:"detail-header"},j0={class:"student-info"},H0={class:"avatar"},W0={class:"last-active"},V0={key:0,class:"loading-state"},K0={key:1,class:"detail-content"},G0={class:"tab-bar"},z0=["onClick"],J0={key:0,class:"tab-content"},Y0={key:1,class:"tab-content"},q0={key:0,class:"stats-row"},X0={class:"stat stat-green"},Q0={key:0,class:"stat stat-orange"},Z0={key:1,class:"stat stat-yellow"},ew={key:2,class:"stat stat-red"},tw={key:3,class:"stat stat-grey"},sw={key:1,class:"no-data"},nw={key:2,class:"lesson-list"},ow={class:"lesson-header"},aw=["onClick"],rw={class:"mastery-strip"},lw=["title","onClick"],iw={key:0,class:"medal gold-medal"},cw={key:1,class:"medal silver-medal"},uw={class:"board-num"},dw={class:"observation-total"},fw={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=ro(),a=vs(),r=gs(),l=O(!1),c=O("progress"),u=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],d=E(()=>s.studentName.split(" ").map(_=>_[0]||"").join("").toUpperCase());St(async()=>{o.studentObservations.value[s.studentId]||(l.value=!0,await o.fetchStudentObservations(s.studentId),l.value=!1)});const f=E(()=>o.studentObservations.value[s.studentId]||[]),p=E(()=>o.getStudentMasterySummary(s.studentId)),m=E(()=>o.formatTimeSince(p.value.lastObservationTime)),g=E(()=>{const C=f.value;return C.length===0?[]:a.extractLessonsFromObservations(C).map(b=>{const I=a.computeBoardMastery(C,b.subfolder,b.boardNumbers),X=a.computeLessonAchievement(I);return{...b,boardMastery:I,achievement:X.achievement}}).sort((b,I)=>y(b.subfolder).localeCompare(y(I.subfolder)))});vt(g,C=>{a.fetchMissingBoardCounts(C.map(_=>_.subfolder))},{immediate:!0});function y(C){return r.formatLessonName(C)}function T(C){const _={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${C.boardNumber}: ${_[C.status]}`}return(C,_)=>(v(),h("div",M0,[i("header",F0,[i("button",{class:"back-btn",onClick:_[0]||(_[0]=b=>C.$emit("back"))}," Students"),i("div",j0,[i("div",H0,S(d.value),1),i("div",null,[i("h2",null,S(e.studentName),1),i("span",W0,"Last active: "+S(m.value),1)])])]),l.value?(v(),h("div",V0,[..._[1]||(_[1]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):(v(),h("div",K0,[i("div",G0,[(v(),h(ee,null,le(u,b=>i("button",{key:b.id,class:de(["tab-btn",{active:c.value===b.id}]),onClick:I=>c.value=b.id},S(b.label),11,z0)),64))]),c.value==="progress"?(v(),h("div",J0,[ge(_u,{observations:f.value,studentName:s.studentName},null,8,["observations","studentName"])])):c.value==="mastery"?(v(),h("div",Y0,[p.value.total>0?(v(),h("div",q0,[i("div",X0,S(p.value.green)+" Green",1),p.value.orange?(v(),h("div",Q0,S(p.value.orange)+" Orange",1)):B("",!0),p.value.yellow?(v(),h("div",Z0,S(p.value.yellow)+" Yellow",1)):B("",!0),p.value.red?(v(),h("div",ew,S(p.value.red)+" Red",1)):B("",!0),p.value.grey?(v(),h("div",tw,S(p.value.grey)+" Grey",1)):B("",!0)])):B("",!0),g.value.length===0?(v(),h("div",sw," No lesson data available yet. ")):(v(),h("div",nw,[(v(!0),h(ee,null,le(g.value,b=>(v(),h("div",{key:b.subfolder,class:"lesson-row"},[i("div",ow,[i("button",{class:"lesson-name lesson-link",onClick:I=>n("navigate-to-lesson",b.subfolder)},S(y(b.subfolder)),9,aw),b.achievement!=="none"?(v(),h("span",{key:0,class:de(["achievement-badge",b.achievement])},"  "+S(b.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),i("div",rw,[(v(!0),h(ee,null,le(b.boardMastery,I=>(v(),h("div",{key:I.boardNumber,class:de(["board-circle board-clickable","status-"+I.status]),title:T(I),onClick:X=>n("navigate-to-lesson",b.subfolder,I.boardNumber)},[I.achievement==="gold"?(v(),h("span",iw,"")):I.achievement==="silver"?(v(),h("span",cw,"")):B("",!0),i("span",uw,S(I.boardNumber),1)],10,lw))),128))])]))),128))]))])):B("",!0),i("div",dw,S(f.value.length)+" observations",1)]))]))}},mw=Ce(fw,[["__scopeId","data-v-0df670c0"]]),pw={key:0,class:"lesson-browser-loading"},vw={key:1,class:"lesson-browser-error"},hw={class:"lesson-browser"},gw={class:"browser-header"},yw={class:"browser-content"},bw=["onClick"],_w={class:"expand-icon"},ww={class:"category-name"},Cw={class:"category-count"},Sw={key:0,class:"lesson-list"},$w=["onClick"],kw={class:"lesson-name"},xw={class:"lesson-description"},Aw={key:0,class:"error-message"},Nw={key:3,class:"lesson-browser-inline"},Tw={class:"browser-content-inline"},Ew=["onClick"],Ow={class:"expand-icon"},Iw={class:"category-name"},Rw={class:"category-count"},Pw={key:0,class:"lesson-list"},Dw=["onClick"],Lw={class:"lesson-name"},Bw={class:"lesson-description"},Uw={key:0,class:"error-message-inline"},Mw={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=O(null),a=O(null),r=O(!1),l=O([]),c=O(null),u=O(null);vt(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&d()},{immediate:!0});async function d(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{r.value=!1}}function f(g){const y=l.value.indexOf(g);y>=0?l.value.splice(y,1):l.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function m(g,y){var T;u.value=null,c.value=g.id;try{const C=((T=s.collection)==null?void 0:T.baseUrl)||"",_=p(g.id),b=`${C}/${_}.pbn`,I=await fetch(b);if(!I.ok)throw new Error(`Failed to load lesson: ${I.statusText}`);const X=await I.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:X}),s.inline||n("close")}catch(C){console.error("Error loading lesson:",C),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{c.value=null}}return(g,y)=>e.visible&&r.value?(v(),h("div",pw,[...y[2]||(y[2]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(v(),h("div",vw,[i("p",null,S(a.value),1),i("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(v(),h("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Lt(T=>g.$emit("close"),["self"]))},[i("div",hw,[i("div",gw,[i("h2",null,S(o.value.name),1),i("button",{class:"close-btn",onClick:y[0]||(y[0]=T=>g.$emit("close"))},"")]),i("div",yw,[(v(!0),h(ee,null,le(o.value.categories,T=>(v(),h("div",{key:T.id,class:"category-section"},[i("button",{class:de(["category-header",{expanded:l.value.includes(T.id)}]),onClick:C=>f(T.id)},[i("span",_w,S(l.value.includes(T.id)?"":""),1),i("span",ww,S(T.name),1),i("span",Cw,S(T.lessons.length)+" lessons",1)],10,bw),l.value.includes(T.id)?(v(),h("div",Sw,[(v(!0),h(ee,null,le(T.lessons,C=>(v(),h("button",{key:C.id,class:de(["lesson-item",{loading:c.value===C.id}]),onClick:_=>m(C,T)},[i("span",kw,S(C.name),1),i("span",xw,S(C.description),1)],10,$w))),128))])):B("",!0)]))),128))]),u.value?(v(),h("div",Aw,S(u.value),1)):B("",!0)])])):e.visible&&e.inline&&o.value?(v(),h("div",Nw,[i("div",Tw,[(v(!0),h(ee,null,le(o.value.categories,T=>(v(),h("div",{key:T.id,class:"category-section"},[i("button",{class:de(["category-header",{expanded:l.value.includes(T.id)}]),onClick:C=>f(T.id)},[i("span",Ow,S(l.value.includes(T.id)?"":""),1),i("span",Iw,S(T.name),1),i("span",Rw,S(T.lessons.length)+" lessons",1)],10,Ew),l.value.includes(T.id)?(v(),h("div",Pw,[(v(!0),h(ee,null,le(T.lessons,C=>(v(),h("button",{key:C.id,class:de(["lesson-item",{loading:c.value===C.id}]),onClick:_=>m(C,T)},[i("span",Lw,S(C.name),1),i("span",Bw,S(C.description),1)],10,Dw))),128))])):B("",!0)]))),128))]),u.value?(v(),h("div",Uw,S(u.value),1)):B("",!0)])):B("",!0)}},Fw=Ce(Mw,[["__scopeId","data-v-384a9c63"]]),jw={class:"viewer-controls"},Hw={class:"viewer-body"},Ww={key:0,class:"interaction-overlay"},Vw={key:1,class:"viewer-loading"},Kw={key:2,class:"viewer-error"},Gw=["src"],zw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Vt({x:80,y:80}),n=Vt({w:550,h:700}),o=O(!1),a=Vt({x:0,y:0}),r=O(null),l=O(!1),c=O(null),u=E(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function d(_){if(f(),!!_){l.value=!0,c.value=null;try{const b=await fetch(_);if(!b.ok)throw new Error("Failed to load PDF");const I=await b.blob(),X=new Blob([I],{type:"application/pdf"});r.value=URL.createObjectURL(X)}catch(b){c.value="Could not load PDF",console.error("Failed to fetch intro PDF:",b)}finally{l.value=!1}}}function f(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}vt(()=>[t.visible,t.url],([_,b])=>{_&&b?d(b):_||f()},{immediate:!0}),Gi(f);function m(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",C))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",T),document.addEventListener("pointerup",C)}function T(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function C(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",C)}return(_,b)=>e.visible?(v(),h("div",{key:0,class:"intro-pdf-viewer",style:dt({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[i("div",{class:"viewer-titlebar",onPointerdown:m},[b[1]||(b[1]=i("span",{class:"viewer-title"},"Lesson Introduction",-1)),i("div",jw,[i("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),i("button",{class:"viewer-btn close",onClick:b[0]||(b[0]=I=>_.$emit("close")),title:"Close"},"")])],32),i("div",Hw,[o.value?(v(),h("div",Ww)):B("",!0),l.value?(v(),h("div",Vw,"Loading PDF...")):c.value?(v(),h("div",Kw,S(c.value),1)):u.value?(v(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,Gw)):B("",!0)]),i("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):B("",!0)}},Jw=Ce(zw,[["__scopeId","data-v-a97df645"]]),Yw={class:"collection-icon"},qw={class:"collection-name"},Xw={class:"collection-desc"},Qw={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(v(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[i("span",Yw,S(e.collection.icon),1),i("span",qw,S(e.collection.name),1),i("span",Xw,S(e.collection.description),1)]))}},Zw=Ce(Qw,[["__scopeId","data-v-747be5b1"]]),eC={class:"collection-grid"},tC={class:"collection-cards"},sC={key:0,class:"load-file-section"},nC={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=ao(),s=t.COLLECTIONS;return(n,o)=>(v(),h("div",eC,[o[2]||(o[2]=i("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=i("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),i("div",tC,[(v(!0),h(ee,null,le(P(s),a=>(v(),Ue(Zw,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),P(t).showLoadPbnOption.value?(v(),h("div",sC,[o[1]||(o[1]=i("p",null,"Or load your own PBN file:",-1)),i("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):B("",!0)]))}},Gr=Ce(nC,[["__scopeId","data-v-35b62d22"]]),oC={class:"casual-lobby"},aC={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(v(),h("div",oC,[ge(Gr,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},rC=Ce(aC,[["__scopeId","data-v-1ce1f7d7"]]),lC={class:"assignment-panel"},iC={key:0,class:"loading-state"},cC={key:1,class:"empty-state"},uC={key:2,class:"assignment-cards"},dC=["onClick"],fC={class:"card-header"},mC={class:"exercise-name"},pC={class:"card-meta"},vC={key:0,class:"meta-item"},hC={class:"progress-section"},gC={class:"progress-bar"},yC={class:"progress-label"},bC={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const l=s(r);return l==="complete"?"Complete":l==="overdue"?"Overdue":l==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const l=new Date(r.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(r){if(!r.due_at)return"";const l=new Date(r.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(r,l)=>(v(),h("div",lC,[l[2]||(l[2]=i("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(v(),h("div",iC,[...l[0]||(l[0]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(v(),h("div",cC,[...l[1]||(l[1]=[i("p",{class:"empty-title"},"No assignments yet",-1),i("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(v(),h("div",uC,[(v(!0),h(ee,null,le(e.assignments,c=>(v(),h("div",{key:c.id,class:de(["assignment-card",s(c)]),onClick:u=>r.$emit("select-assignment",c)},[i("div",fC,[i("span",mC,S(c.exercise_name),1),i("span",{class:de(["status-badge",s(c)])},S(n(c)),3)]),i("div",pC,[c.classroom_name?(v(),h("span",vC,S(c.classroom_name),1)):B("",!0),c.due_at?(v(),h("span",{key:1,class:de(["meta-item",a(c)])},S(o(c)),3)):B("",!0)]),i("div",hC,[i("div",gC,[i("div",{class:de(["progress-fill",s(c)]),style:dt({width:t(c)+"%"})},null,6)]),i("span",yC,S(c.attempted_boards)+" / "+S(c.total_boards)+" boards ",1)])],10,dC))),128))]))]))}},_C=Ce(bC,[["__scopeId","data-v-dc0b8e86"]]),wC={class:"student-lobby"},CC={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=He(),o=fo(),a=E(()=>o.studentAssignments.value.length>0),r=E(()=>o.loading.value);function l(c){s("select-assignment",c)}return St(()=>{const c=n.currentUser.value;c&&o.fetchStudentAssignments(c.id)}),(c,u)=>(v(),h("div",wC,[a.value||r.value?(v(),Ue(_C,{key:0,assignments:P(o).studentAssignments.value,loading:r.value,onSelectAssignment:l},null,8,["assignments","loading"])):B("",!0),ge(Gr,{onSelectCollection:u[0]||(u[0]=d=>c.$emit("select-collection",d)),onLoadFile:u[1]||(u[1]=d=>c.$emit("load-file",d))})]))}},SC=Ce(CC,[["__scopeId","data-v-3310fc38"]]),Su="https://api.bridge-classroom.com/api",$u="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ao=O([]),zr=O([]),Jr=O([]),ir=O(!1),Oa=O(null),$C=2*60*1e3;async function kC(e,t=!1){if(!t&&Oa.value&&Date.now()-new Date(Oa.value).getTime()<$C)return{success:!0,cached:!0};ir.value=!0;try{const s=await fetch(`${Su}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":$u}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Ao.value=n.classrooms||[],zr.value=n.needs_attention||[],Jr.value=n.recent_activity||[],Oa.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{ir.value=!1}}async function xC(e,t){try{const s=await fetch(`${Su}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":$u},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?zr.value=[]:t==="activity"&&(Jr.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function AC(){const e=E(()=>({classroomCount:Ao.value.length,openAssignmentCount:Ao.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Ao,needsAttention:zr,recentActivity:Jr,lobbyLoading:ir,summaryStats:e,loadTeacherLobbyData:kC,clearPanel:xC}}const NC={class:"roster"},TC={class:"roster-header"},EC={class:"member-count"},OC={key:0,class:"roster-empty"},IC={key:1,class:"roster-table"},RC={class:"member-name"},PC={class:"member-email"},DC={class:"member-date"},LC={class:"member-action"},BC=["onClick","disabled"],UC={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=O(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const l=`${r.first_name} ${r.last_name}`;confirm(`Remove ${l} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,l)=>(v(),h("div",NC,[i("div",TC,[l[0]||(l[0]=i("h4",null,"Class Roster",-1)),i("span",EC,S(e.members.length)+" "+S(e.members.length===1?"student":"students"),1)]),e.members.length===0?(v(),h("div",OC,[...l[1]||(l[1]=[i("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(v(),h("table",IC,[l[2]||(l[2]=i("thead",null,[i("tr",null,[i("th",null,"Name"),i("th",null,"Email"),i("th",null,"Joined"),i("th")])],-1)),i("tbody",null,[(v(!0),h(ee,null,le(e.members,c=>(v(),h("tr",{key:c.student_id},[i("td",RC,S(c.first_name)+" "+S(c.last_name),1),i("td",PC,S(c.email),1),i("td",DC,S(o(c.joined_at)),1),i("td",LC,[i("button",{class:"remove-btn",onClick:u=>a(c),disabled:n.value===c.student_id},S(n.value===c.student_id?"Removing...":"Remove"),9,BC)])]))),128))])]))]))}},MC=Ce(UC,[["__scopeId","data-v-ee901be3"]]),FC={class:"header-left"},jC={class:"classroom-name"},HC={class:"header-meta"},WC={class:"join-badge"},VC={class:"member-count"},KC={key:0,class:"stat-badge"},GC={key:1,class:"stat-badge completion"},zC={key:0,class:"mini-bars"},JC={class:"bar-label"},YC={class:"bar-track"},qC={class:"bar-count"},XC=["aria-label"],QC={key:0,class:"card-body"},ZC={key:0,class:"classroom-desc"},eS={class:"invite-section"},tS={class:"invite-field"},sS=["value"],nS={class:"email-section"},oS={class:"email-header"},aS={class:"email-template"},rS={class:"email-body"},lS={key:1,class:"assignments-section"},iS={class:"assignment-list"},cS={class:"assignment-name"},uS={key:0,class:"assignment-due"},dS={class:"assignment-boards"},fS={key:3,class:"loading-roster"},mS={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=mo(),a=fo(),r=O(null),l=O(!1),c=O(!1),u=O(!1),d=O([]),f=E(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);vt(()=>s.expanded,async C=>{if(C&&!r.value){l.value=!0;const[_,b]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(r.value=_.classroom),d.value=b||[],l.value=!1}});function p(C){return C?new Date(C).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function m(C){return C.students_total?Math.round(C.students_completed/C.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(f.value),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function y(){const C=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(C),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function T(C){const _=await o.removeMember(s.classroom.id,C);_!=null&&_.success&&(r.value&&(r.value.members=r.value.members.filter(b=>b.student_id!==C)),n("member-removed"))}return(C,_)=>(v(),h("div",{class:de(["classroom-card",{expanded:e.expanded}])},[i("div",{class:"card-header",onClick:_[0]||(_[0]=b=>C.$emit("toggle"))},[i("div",FC,[i("h3",jC,S(e.classroom.name),1),i("div",HC,[i("span",WC,"JOIN: "+S(e.classroom.join_code),1),i("span",VC,S(e.classroom.member_count)+" "+S(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(v(),h("span",KC,S(e.classroom.open_assignment_count)+" "+S(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):B("",!0),e.classroom.avg_completion_pct>0?(v(),h("span",GC,S(e.classroom.avg_completion_pct)+"% avg",1)):B("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(v(),h("div",zC,[(v(!0),h(ee,null,le(e.classroom.assignments,b=>(v(),h("div",{key:b.id,class:"mini-bar"},[i("span",JC,S(b.exercise_name),1),i("div",YC,[i("div",{class:"bar-fill",style:dt({width:m(b)})},null,4)]),i("span",qC,S(b.students_completed)+"/"+S(b.students_total),1)]))),128))])):B("",!0)]),i("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[i("span",{class:de(["chevron",{rotated:e.expanded}])},"",2)],8,XC)]),e.expanded?(v(),h("div",QC,[e.classroom.description?(v(),h("p",ZC,S(e.classroom.description),1)):B("",!0),i("div",eS,[_[2]||(_[2]=i("h4",null,"Invite Link",-1)),_[3]||(_[3]=i("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),i("div",tS,[i("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=b=>b.target.select())},null,8,sS),i("button",{class:"copy-btn",onClick:g},S(c.value?"Copied!":"Copy"),1)])]),i("div",nS,[i("div",oS,[_[4]||(_[4]=i("h4",null,"Email Template",-1)),i("button",{class:"copy-btn copy-btn-small",onClick:y},S(u.value?"Copied!":"Copy"),1)]),i("div",aS,[_[5]||(_[5]=i("p",null,[i("strong",null,"Subject:"),xt(" Join our Bridge Classroom for practice exercises")],-1)),i("div",rS," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+S(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(v(),h("div",lS,[_[6]||(_[6]=i("h4",null,"Assignments",-1)),i("div",iS,[(v(!0),h(ee,null,le(d.value,b=>(v(),h("div",{key:b.id,class:"assignment-row"},[i("span",cS,S(b.exercise_name),1),b.due_at?(v(),h("span",uS,"Due "+S(p(b.due_at)),1)):B("",!0),i("span",dS,S(b.total_boards)+" boards",1)]))),128))])])):B("",!0),r.value?(v(),Ue(MC,{key:2,members:r.value.members,onRemoveMember:T},null,8,["members"])):l.value?(v(),h("div",fS," Loading roster... ")):B("",!0)])):B("",!0)],2))}},pS=Ce(mS,[["__scopeId","data-v-59d6a074"]]),vS={class:"modal-content"},hS={class:"step"},gS={class:"form-group"},yS={class:"form-group"},bS={class:"step-actions"},_S=["disabled"],wS={key:0,class:"error-text"},CS={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=He(),o=mo(),a=O(""),r=O(""),l=O(!1),c=O(null);async function u(){if(!a.value.trim()||l.value)return;const d=n.currentUser.value;if(!d)return;l.value=!0,c.value=null;const f=await o.createClassroom(d.id,a.value.trim(),r.value.trim()||null);f.success?s("classroom-created",f.classroom):c.value=f.error||"Failed to create classroom",l.value=!1}return(d,f)=>(v(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Lt(p=>d.$emit("close"),["self"]))},[i("div",vS,[i("div",hS,[f[7]||(f[7]=i("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=i("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),i("div",gS,[f[4]||(f[4]=i("label",{for:"classroom-name"},"Classroom Name",-1)),Pe(i("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Bo(u,["enter"])},null,544),[[ht,a.value]]),f[5]||(f[5]=i("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),i("div",yS,[f[6]||(f[6]=i("label",{for:"classroom-desc"},[xt("Description "),i("span",{class:"optional"},"(optional)")],-1)),Pe(i("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[ht,r.value]])]),i("div",bS,[i("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=p=>d.$emit("close"))},"Cancel"),i("button",{class:"btn btn-primary",disabled:!a.value.trim()||l.value,onClick:u},S(l.value?"Creating...":"Create Classroom"),9,_S)]),c.value?(v(),h("p",wS,S(c.value),1)):B("",!0)])])]))}},SS=Ce(CS,[["__scopeId","data-v-c26a1ae6"]]),xn="https://api.bridge-classroom.com/api",An="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Es=O([]),Ia=O(null),Mt=O(!1),Le=O(null);function $S(){async function e(r={}){Mt.value=!0,Le.value=null;try{const l=new URLSearchParams;r.created_by&&l.set("created_by",r.created_by),r.curriculum_path&&l.set("curriculum_path",r.curriculum_path),r.visibility&&l.set("visibility",r.visibility);const c=l.toString(),u=`${xn}/exercises${c?"?"+c:""}`,d=await fetch(u,{headers:{"x-api-key":An}});if(!d.ok){const p=await d.text();return Le.value=p||`Server error (${d.status})`,null}const f=await d.json();return f.success?Es.value=f.exercises:Le.value=f.error||"Failed to fetch exercises",f}catch(l){return console.error("Failed to fetch exercises:",l),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function t(r){Mt.value=!0,Le.value=null;try{const l=await fetch(`${xn}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Le.value=u||`Server error (${l.status})`,null}const c=await l.json();return c.success?Ia.value=c.exercise:Le.value=c.error||"Failed to fetch exercise",c}catch(l){return console.error("Failed to fetch exercise detail:",l),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function s({name:r,description:l,created_by:c,curriculum_path:u,visibility:d,boards:f}){Mt.value=!0,Le.value=null;try{const p=await fetch(`${xn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify({name:r,description:l||null,created_by:c||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!p.ok){const g=await p.text();return Le.value=g||`Server error (${p.status})`,{success:!1,error:Le.value}}const m=await p.json();return m.success?Es.value=[m.exercise,...Es.value]:Le.value=m.error||"Failed to create exercise",m}catch(p){return console.error("Failed to create exercise:",p),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function n(r,l){Mt.value=!0,Le.value=null;try{const c=await fetch(`${xn}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify(l)});if(!c.ok){const d=await c.text();return Le.value=d||`Server error (${c.status})`,{success:!1,error:Le.value}}const u=await c.json();return u.success||(Le.value=u.error||"Failed to update exercise"),u}catch(c){return console.error("Failed to update exercise:",c),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function o(r){try{const l=await fetch(`${xn}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Le.value=u||`Server error (${l.status})`,{success:!1,error:Le.value}}const c=await l.json();return c.success&&(Es.value=Es.value.filter(u=>u.id!==r)),c}catch(l){return console.error("Failed to delete exercise:",l),{success:!1,error:"Unable to connect to server"}}}function a(){Es.value=[],Ia.value=null,Mt.value=!1,Le.value=null}return{exercises:Es,currentExercise:Ia,loading:Mt,error:Le,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const kS={class:"modal-content"},xS={class:"step"},AS={class:"form-group"},NS=["value"],TS={key:0,class:"form-hint"},ES={class:"form-group"},OS={class:"target-options"},IS={class:"radio-option"},RS={class:"radio-option"},PS={key:0,class:"form-group"},DS=["value"],LS={key:1,class:"form-group"},BS=["value"],US={class:"form-group"},MS={class:"step-actions"},FS=["disabled"],jS={key:2,class:"error-text"},HS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=He(),a=$S(),r=fo(),l=mo(),c=ro(),u=O(""),d=O("classroom"),f=O(s.preselectedClassroomId||""),p=O(""),m=O(""),g=O(!1),y=O(null),T=E(()=>a.exercises.value),C=E(()=>a.loading.value),_=E(()=>l.teacherClassrooms.value),b=E(()=>c.students.value),I=E(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!p.value));async function X(){if(!I.value||g.value)return;const Z=o.currentUser.value;if(!Z)return;g.value=!0,y.value=null;const L=await r.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?p.value:null,assigned_by:Z.id,due_at:m.value||null});L.success?n("assignment-created",L.assignment):y.value=L.error||"Failed to create assignment",g.value=!1}return St(async()=>{a.exercises.value.length||await a.fetchExercises();const Z=o.currentUser.value;Z&&!l.teacherClassrooms.value.length&&await l.fetchTeacherClassrooms(Z.id)}),(Z,L)=>(v(),h("div",{class:"modal-overlay",onClick:L[7]||(L[7]=Lt(Y=>Z.$emit("close"),["self"]))},[i("div",kS,[i("div",xS,[L[18]||(L[18]=i("h2",null,"Create Assignment",-1)),L[19]||(L[19]=i("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),i("div",AS,[L[9]||(L[9]=i("label",{for:"exercise-select"},"Exercise",-1)),Pe(i("select",{id:"exercise-select","onUpdate:modelValue":L[0]||(L[0]=Y=>u.value=Y),class:"form-select"},[L[8]||(L[8]=i("option",{value:""},"Select an exercise...",-1)),(v(!0),h(ee,null,le(T.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.board_count)+" boards)",9,NS))),128))],512),[[Un,u.value]]),C.value?(v(),h("p",TS,"Loading exercises...")):B("",!0)]),i("div",ES,[L[12]||(L[12]=i("label",null,"Assign to",-1)),i("div",OS,[i("label",IS,[Pe(i("input",{type:"radio","onUpdate:modelValue":L[1]||(L[1]=Y=>d.value=Y),value:"classroom"},null,512),[[Al,d.value]]),L[10]||(L[10]=i("span",null,"Classroom",-1))]),i("label",RS,[Pe(i("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=Y=>d.value=Y),value:"student"},null,512),[[Al,d.value]]),L[11]||(L[11]=i("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(v(),h("div",PS,[L[14]||(L[14]=i("label",{for:"classroom-select"},"Classroom",-1)),Pe(i("select",{id:"classroom-select","onUpdate:modelValue":L[3]||(L[3]=Y=>f.value=Y),class:"form-select"},[L[13]||(L[13]=i("option",{value:""},"Select a classroom...",-1)),(v(!0),h(ee,null,le(_.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.member_count)+" students)",9,DS))),128))],512),[[Un,f.value]])])):B("",!0),d.value==="student"?(v(),h("div",LS,[L[16]||(L[16]=i("label",{for:"student-select"},"Student",-1)),Pe(i("select",{id:"student-select","onUpdate:modelValue":L[4]||(L[4]=Y=>p.value=Y),class:"form-select"},[L[15]||(L[15]=i("option",{value:""},"Select a student...",-1)),(v(!0),h(ee,null,le(b.value,Y=>(v(),h("option",{key:Y.id,value:Y.id},S(Y.first_name)+" "+S(Y.last_name),9,BS))),128))],512),[[Un,p.value]])])):B("",!0),i("div",US,[L[17]||(L[17]=i("label",{for:"due-date"},[xt("Due Date "),i("span",{class:"optional"},"(optional)")],-1)),Pe(i("input",{id:"due-date","onUpdate:modelValue":L[5]||(L[5]=Y=>m.value=Y),type:"date",class:"form-input"},null,512),[[ht,m.value]])]),i("div",MS,[i("button",{class:"btn btn-secondary",onClick:L[6]||(L[6]=Y=>Z.$emit("close"))},"Cancel"),i("button",{class:"btn btn-primary",disabled:!I.value||g.value,onClick:X},S(g.value?"Creating...":"Create Assignment"),9,FS)]),y.value?(v(),h("p",jS,S(y.value),1)):B("",!0)])])]))}},WS=Ce(HS,[["__scopeId","data-v-5e97b847"]]),VS={class:"needs-attention"},KS={class:"panel-header"},GS={key:0,class:"empty-state"},zS={key:1,class:"attention-list"},JS={class:"item-icon"},YS={class:"item-text"},qS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(v(),h("div",VS,[i("div",KS,[a[1]||(a[1]=i("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(v(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):B("",!0)]),e.items.length?(v(),h("div",zS,[(v(!0),h(ee,null,le(e.items,(r,l)=>(v(),h("div",{key:l,class:de(["attention-item",r.type])},[i("span",JS,S(t(r.type)),1),i("span",YS,S(s(r)),1)],2))),128))])):(v(),h("div",GS," All caught up! No items need attention. "))]))}},XS=Ce(qS,[["__scopeId","data-v-65e8ba1f"]]),QS={class:"recent-activity"},ZS={class:"panel-header"},e$={key:0,class:"empty-state"},t$={key:1,class:"activity-list"},s$={class:"event-content"},n$={class:"event-text"},o$={class:"event-time"},a$={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const l=Math.floor(r/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(o,a)=>(v(),h("div",QS,[i("div",ZS,[a[1]||(a[1]=i("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(v(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):B("",!0)]),e.events.length?(v(),h("div",t$,[(v(!0),h(ee,null,le(e.events,(r,l)=>(v(),h("div",{key:l,class:"activity-item"},[i("span",{class:de(["event-icon",r.type])},S(t(r.type)),3),i("div",s$,[i("span",n$,S(s(r)),1),i("span",o$,S(n(r.timestamp)),1)])]))),128))])):(v(),h("div",e$," No recent activity. "))]))}},r$=Ce(a$,[["__scopeId","data-v-39e672f5"]]),l$={class:"teacher-lobby"},i$={class:"welcome-section"},c$={class:"welcome-title"},u$={class:"welcome-subtitle"},d$={class:"quick-actions"},f$={key:0,class:"loading-state"},m$={key:1,class:"dashboard-grid"},p$={class:"left-column"},v$={key:0,class:"classrooms-section"},h$={class:"classroom-cards"},g$={key:1,class:"empty-state"},y$={class:"right-column"},b$={class:"collections-section"},_$={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=He(),s=AC(),n=O(!1),o=O(!1),a=O(null),r=E(()=>{const m=t.currentUser.value;return m?m.firstName:""}),l=E(()=>{const m=s.summaryStats.value;if(!m||m.classroomCount===0)return"Get started by creating your first classroom.";const g=[];return g.push(`${m.classroomCount} active ${m.classroomCount===1?"classroom":"classrooms"}`),m.openAssignmentCount>0&&g.push(`${m.openAssignmentCount} open ${m.openAssignmentCount===1?"assignment":"assignments"}`),g.join(", ")+"."});function c(m){a.value=a.value===m?null:m}function u(m){n.value=!1,a.value=m.id,p()}function d(){o.value=!1,p()}function f(m){const g=t.currentUser.value;g&&s.clearPanel(g.id,m)}function p(){const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id,!0)}return St(()=>{const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id)}),(m,g)=>(v(),h("div",l$,[i("div",i$,[i("h2",c$,"Welcome back, "+S(r.value),1),i("p",u$,S(l.value),1)]),i("div",d$,[i("button",{class:"action-btn create",onClick:g[0]||(g[0]=y=>n.value=!0)}," + New Classroom "),i("button",{class:"action-btn assign",onClick:g[1]||(g[1]=y=>o.value=!0)}," + New Assignment "),e.isAdmin?(v(),h("button",{key:0,class:"action-btn admin",onClick:g[2]||(g[2]=y=>m.$emit("show-admin"))}," Admin Panel ")):B("",!0)]),P(s).lobbyLoading.value&&!P(s).lobbyClassrooms.value.length?(v(),h("div",f$,[...g[9]||(g[9]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading dashboard...",-1)])])):(v(),h("div",m$,[i("div",p$,[P(s).lobbyClassrooms.value.length?(v(),h("div",v$,[g[10]||(g[10]=i("h3",{class:"section-title"},"My Classrooms",-1)),i("div",h$,[(v(!0),h(ee,null,le(P(s).lobbyClassrooms.value,y=>(v(),Ue(pS,{key:y.id,classroom:y,expanded:a.value===y.id,onToggle:T=>c(y.id),onMemberRemoved:p},null,8,["classroom","expanded","onToggle"]))),128))])])):(v(),h("div",g$,[...g[11]||(g[11]=[i("p",{class:"empty-title"},"No classrooms yet",-1),i("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),i("div",y$,[ge(XS,{items:P(s).needsAttention.value,onClear:g[3]||(g[3]=y=>f("attention"))},null,8,["items"]),ge(r$,{events:P(s).recentActivity.value,onClear:g[4]||(g[4]=y=>f("activity"))},null,8,["events"])])])),i("div",b$,[g[12]||(g[12]=i("h3",{class:"section-title"},"Lesson Collections",-1)),ge(Gr,{onSelectCollection:g[5]||(g[5]=y=>m.$emit("select-collection",y)),onLoadFile:g[6]||(g[6]=y=>m.$emit("load-file",y))})]),n.value?(v(),Ue(SS,{key:2,onClose:g[7]||(g[7]=y=>n.value=!1),onClassroomCreated:u})):B("",!0),o.value?(v(),Ue(WS,{key:3,onClose:g[8]||(g[8]=y=>o.value=!1),onAssignmentCreated:d})):B("",!0)]))}},w$=Ce(_$,[["__scopeId","data-v-340b5670"]]),ku="https://api.bridge-classroom.com/api",xu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Au=O(null),Nu=O([]),Tu=O(null),Eu=O(null),cr=O(!1),ur=O(null),Ra=O(null),C$=60*1e3;async function Ou(e=!1){if(!e&&Ra.value&&Date.now()-new Date(Ra.value).getTime()<C$)return{success:!0,cached:!0};cr.value=!0,ur.value=null;try{const t=await fetch(`${ku}/admin/stats`,{headers:{"x-api-key":xu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Au.value=s.stats,Nu.value=s.popular_lessons||[],Tu.value=s.database,Ra.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),ur.value=t.message,{success:!1,error:t.message}}finally{cr.value=!1}}async function Iu(){try{const e=await fetch(`${ku}/admin/health`,{headers:{"x-api-key":xu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Eu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function S$(){await Promise.all([Ou(!0),Iu()])}function $$(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function k$(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Yr(){return{stats:Au,popularLessons:Nu,database:Tu,health:Eu,loading:cr,error:ur,loadStats:Ou,loadHealth:Iu,refreshAll:S$,formatBytes:$$,formatUptime:k$}}const x$={class:"stats-row"},A$={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},N$={class:"stat-number"},T$={class:"stat-card",style:{"border-top-color":"#1565c0"}},E$={class:"stat-number"},O$={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},I$={class:"stat-number"},R$={class:"stat-card",style:{"border-top-color":"#e65100"}},P$={class:"stat-number"},D$={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,l;return v(),h("div",x$,[i("div",A$,[i("div",N$,S(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=i("div",{class:"stat-label"},"Total Users",-1))]),i("div",T$,[i("div",E$,S(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=i("div",{class:"stat-label"},"Active (7d)",-1))]),i("div",O$,[i("div",I$,S(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=i("div",{class:"stat-label"},"Observations (7d)",-1))]),i("div",R$,[i("div",P$,S(((l=e.stats)==null?void 0:l.active_today)??""),1),n[3]||(n[3]=i("div",{class:"stat-label"},"Active Today",-1))])])}}},L$=Ce(D$,[["__scopeId","data-v-a14a2199"]]),B$={class:"popular-lessons"},U$={key:0,class:"empty-state"},M$={key:1,class:"table-wrap"},F$={class:"lessons-table"},j$={class:"lesson-name"},H$={class:"num-col"},W$={class:"num-col"},V$={class:"num-col"},K$={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(v(),h("div",B$,[o[1]||(o[1]=i("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(v(),h("div",M$,[i("table",F$,[o[0]||(o[0]=i("thead",null,[i("tr",null,[i("th",null,"Lesson"),i("th",{class:"num-col"},"Plays"),i("th",{class:"num-col"},"Users"),i("th",{class:"num-col"},"Accuracy")])],-1)),i("tbody",null,[(v(!0),h(ee,null,le(e.lessons.slice(0,15),a=>(v(),h("tr",{key:a.deal_subfolder},[i("td",j$,S(t(a.deal_subfolder)),1),i("td",H$,S(a.play_count.toLocaleString()),1),i("td",W$,S(a.unique_users),1),i("td",V$,[i("span",{class:de(["accuracy-badge",s(a.accuracy_pct)])},S(a.accuracy_pct)+"% ",3)])]))),128))])])])):(v(),h("div",U$,"No lesson data yet."))]))}},G$=Ce(K$,[["__scopeId","data-v-079bd4f8"]]),z$={class:"database-panel"},J$={key:0,class:"empty-state"},Y$={class:"db-size"},q$={class:"tables-table"},X$={class:"table-name"},Q$={class:"num-col"},Z$={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Yr();return(s,n)=>(v(),h("div",z$,[n[2]||(n[2]=i("h3",{class:"panel-title"},"Database",-1)),e.database?(v(),h(ee,{key:1},[i("div",Y$,[n[0]||(n[0]=xt(" SQLite file: ",-1)),i("strong",null,S(P(t)(e.database.file_size_bytes)),1)]),i("table",q$,[n[1]||(n[1]=i("thead",null,[i("tr",null,[i("th",null,"Table"),i("th",{class:"num-col"},"Rows")])],-1)),i("tbody",null,[(v(!0),h(ee,null,le(e.database.tables,o=>(v(),h("tr",{key:o.name},[i("td",X$,S(o.name),1),i("td",Q$,S(o.row_count.toLocaleString()),1)]))),128))])])],64)):(v(),h("div",J$,"Loading..."))]))}},ek=Ce(Z$,[["__scopeId","data-v-d5945aff"]]),tk={class:"system-health"},sk={class:"health-header"},nk=["disabled"],ok={key:0,class:"empty-state"},ak={key:1,class:"health-rows"},rk={class:"health-row"},lk={class:"health-value"},ik={class:"health-row"},ck={class:"health-value"},uk={class:"health-row"},dk={class:"health-value"},fk={class:"health-row"},mk={class:"health-value"},pk={class:"health-row"},vk={class:"health-value"},hk={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Yr();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(v(),h("div",tk,[i("div",sk,[o[1]||(o[1]=i("h3",{class:"panel-title"},"System Health",-1)),i("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},S(e.refreshing?"Refreshing...":"Refresh"),9,nk)]),e.health?(v(),h("div",ak,[i("div",rk,[o[2]||(o[2]=i("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=i("span",{class:"health-label"},"API Server",-1)),i("span",lk,"Up "+S(P(t)(e.health.uptime_seconds)),1)]),i("div",ik,[i("span",{class:de(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=i("span",{class:"health-label"},"Database",-1)),i("span",ck,S(e.health.database_writable?"Writable":"Error"),1)]),i("div",uk,[i("span",{class:de(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=i("span",{class:"health-label"},"Last Observation",-1)),i("span",dk,S(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),i("div",fk,[o[6]||(o[6]=i("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=i("span",{class:"health-label"},"Disk",-1)),i("span",mk,S(e.health.disk_available_gb)+" GB / "+S(e.health.disk_total_gb)+" GB available",1)]),i("div",pk,[o[8]||(o[8]=i("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=i("span",{class:"health-label"},"API Version",-1)),i("span",vk,"v"+S(e.health.api_version),1)])])):(v(),h("div",ok,"Loading..."))]))}},gk=Ce(hk,[["__scopeId","data-v-0d4e96d5"]]),yk={class:"admin-lobby"},bk={class:"admin-header"},_k={key:0,class:"admin-subtitle"},wk={key:0,class:"loading-state"},Ck={key:1,class:"error-state"},Sk={class:"announcement-section"},$k={class:"announcement-info"},kk=["innerHTML"],xk={key:0,class:"announcement-expires"},Ak={key:1,class:"announcement-expires"},Nk={class:"announcement-actions"},Tk=["disabled"],Ek={key:1,class:"announcement-form"},Ok={class:"form-row"},Ik=["disabled"],Rk={class:"content-grid"},Pk={class:"name-correction-section"},Dk={class:"search-row"},Lk=["disabled"],Bk={key:0,class:"search-results"},Uk=["onClick"],Mk={class:"result-name"},Fk={class:"result-email"},jk={key:0,class:"corrected-badge"},Hk={key:1,class:"no-results"},Wk={key:2,class:"edit-form"},Vk={class:"edit-row"},Kk={class:"edit-field"},Gk={class:"edit-field"},zk=["disabled"],Jk={key:0,class:"save-feedback success"},Yk={key:1,class:"save-feedback error"},qk={__name:"AdminLobby",emits:["back"],setup(e){const t=Yr(),s=Kr(),n=O(!1),o=O(""),a=O("info"),r=O(""),l=O(!1),c=O(!1),u=O(!1);function d(){const K=s.announcement.value;if(K){if(o.value=K.message,a.value=K.type,K.expires_at){const H=new Date(K.expires_at);r.value=new Date(H.getTime()-H.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";u.value=!0}}function f(){u.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){l.value=!0;try{const K=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,K),o.value="",a.value="info",r.value="",u.value=!1}catch(K){console.error("Failed to publish announcement:",K)}finally{l.value=!1}}}async function m(){c.value=!0;try{await s.clearAnnouncement()}catch(K){console.error("Failed to clear announcement:",K)}finally{c.value=!1}}function g(K){return K?new Date(K).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function T(K){return K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(G,U)=>{const oe=y[U.toLowerCase()];return oe?`<span class="ann-circle" style="background:${oe.bg};color:${oe.fg}"></span>`:G})}const C="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",b=O(""),I=O([]),X=O(!1),Z=O(!1),L=O(null),Y=O(""),J=O(""),fe=O(!1),me=O(!1),ue=O("");async function _e(){if(b.value.trim()){Z.value=!0,X.value=!1,I.value=[],L.value=null,me.value=!1,ue.value="";try{const K=await fetch(`${C}/admin/users/search?q=${encodeURIComponent(b.value.trim())}`,{headers:{"x-api-key":_}});if(!K.ok)throw new Error(`Search failed: ${K.status}`);const H=await K.json();I.value=H.users||[]}catch(K){console.error("User search failed:",K)}finally{Z.value=!1,X.value=!0}}}function Ae(K){L.value=K,Y.value=K.first_name,J.value=K.last_name,me.value=!1,ue.value=""}async function te(){if(!(!L.value||!Y.value.trim()||!J.value.trim())){fe.value=!0,me.value=!1,ue.value="";try{const K=await fetch(`${C}/admin/users/${encodeURIComponent(L.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:Y.value.trim(),last_name:J.value.trim()})});if(!K.ok)throw new Error(`Save failed: ${K.status}`);const H=await K.json();H.success&&(me.value=!0,L.value.first_name=H.user.first_name,L.value.last_name=H.user.last_name,L.value.name_corrected_at=H.user.name_corrected_at)}catch(K){ue.value=K.message}finally{fe.value=!1}}}async function ie(){await Promise.all([t.loadStats(),t.loadHealth()])}async function q(){n.value=!0,await t.refreshAll(),n.value=!1}return St(ie),(K,H)=>(v(),h("div",yk,[i("div",bk,[i("button",{class:"back-btn",onClick:H[0]||(H[0]=G=>K.$emit("back"))}," Back to Dashboard"),H[7]||(H[7]=i("h2",{class:"admin-title"},"Admin Dashboard",-1)),P(t).stats.value?(v(),h("p",_k,S(P(t).stats.value.total_observations.toLocaleString())+" total observations across "+S(P(t).stats.value.total_users)+" users ",1)):B("",!0)]),P(t).loading.value&&!P(t).stats.value?(v(),h("div",wk,[...H[8]||(H[8]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading dashboard...",-1)])])):P(t).error.value?(v(),h("div",Ck,[i("p",null,S(P(t).error.value),1),i("button",{class:"retry-btn",onClick:ie},"Retry")])):P(t).stats.value?(v(),h(ee,{key:2},[i("div",Sk,[H[10]||(H[10]=i("h3",{class:"section-title"},"Site Announcement",-1)),P(s).announcement.value&&!u.value?(v(),h("div",{key:0,class:de(["current-announcement",P(s).announcement.value.type])},[i("div",$k,[i("span",{class:de(["announcement-type-badge",P(s).announcement.value.type])},S(P(s).announcement.value.type),3),i("span",{class:"announcement-message",innerHTML:T(P(s).announcement.value.message)},null,8,kk),P(s).announcement.value.expires_at?(v(),h("span",xk," Expires: "+S(g(P(s).announcement.value.expires_at)),1)):(v(),h("span",Ak,"No expiration"))]),i("div",Nk,[i("button",{class:"edit-btn",onClick:d},"Edit"),i("button",{class:"clear-btn",onClick:m,disabled:c.value},S(c.value?"Clearing...":"Clear"),9,Tk)])],2)):u.value||!P(s).announcement.value?(v(),h("div",Ek,[Pe(i("input",{"onUpdate:modelValue":H[1]||(H[1]=G=>o.value=G),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Bo(p,["enter"])},null,544),[[ht,o.value]]),i("div",Ok,[Pe(i("select",{"onUpdate:modelValue":H[2]||(H[2]=G=>a.value=G),class:"type-select"},[...H[9]||(H[9]=[i("option",{value:"info"},"Info",-1),i("option",{value:"warning"},"Warning",-1),i("option",{value:"urgent"},"Urgent",-1)])],512),[[Un,a.value]]),Pe(i("input",{"onUpdate:modelValue":H[3]||(H[3]=G=>r.value=G),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[ht,r.value]]),u.value?(v(),h("button",{key:0,class:"cancel-btn",onClick:f},"Cancel")):B("",!0),i("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||l.value},S(l.value?"Publishing...":u.value?"Update":"Publish"),9,Ik)])])):B("",!0)]),ge(L$,{stats:P(t).stats.value},null,8,["stats"]),i("div",Rk,[ge(G$,{lessons:P(t).popularLessons.value},null,8,["lessons"]),ge(ek,{database:P(t).database.value},null,8,["database"])]),ge(gk,{health:P(t).health.value,refreshing:n.value,onRefresh:q},null,8,["health","refreshing"]),i("div",Pk,[H[13]||(H[13]=i("h3",{class:"section-title"},"Correct User Name",-1)),i("div",Dk,[Pe(i("input",{"onUpdate:modelValue":H[4]||(H[4]=G=>b.value=G),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Bo(_e,["enter"])},null,544),[[ht,b.value]]),i("button",{class:"search-btn",onClick:_e,disabled:Z.value||!b.value.trim()},S(Z.value?"Searching...":"Search"),9,Lk)]),I.value.length?(v(),h("div",Bk,[(v(!0),h(ee,null,le(I.value,G=>(v(),h("div",{key:G.id,class:de(["search-result-item",{selected:L.value&&L.value.id===G.id}]),onClick:U=>Ae(G)},[i("span",Mk,S(G.first_name)+" "+S(G.last_name),1),i("span",Fk,S(G.email),1),G.name_corrected_at?(v(),h("span",jk,"corrected")):B("",!0)],10,Uk))),128))])):B("",!0),X.value&&!I.value.length?(v(),h("div",Hk,' No users found for "'+S(b.value)+'" ',1)):B("",!0),L.value?(v(),h("div",Wk,[i("div",Vk,[i("div",Kk,[H[11]||(H[11]=i("label",null,"First Name",-1)),Pe(i("input",{"onUpdate:modelValue":H[5]||(H[5]=G=>Y.value=G),type:"text",class:"edit-input"},null,512),[[ht,Y.value]])]),i("div",Gk,[H[12]||(H[12]=i("label",null,"Last Name",-1)),Pe(i("input",{"onUpdate:modelValue":H[6]||(H[6]=G=>J.value=G),type:"text",class:"edit-input"},null,512),[[ht,J.value]])]),i("button",{class:"save-btn",onClick:te,disabled:fe.value||!Y.value.trim()||!J.value.trim()},S(fe.value?"Saving...":"Save"),9,zk)]),me.value?(v(),h("p",Jk,"Name corrected successfully.")):B("",!0),ue.value?(v(),h("p",Yk,S(ue.value),1)):B("",!0)])):B("",!0)])],64)):B("",!0)]))}},Xk=Ce(qk,[["__scopeId","data-v-5a6964cf"]]),Qk={class:"lobby-view"},Zk={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=He(),s=fo(),n=O(!1),o=E(()=>{const l=t.currentUser.value;return(l==null?void 0:l.role)||"student"}),a=E(()=>s.studentAssignments.value.length>0),r=E(()=>{const l=t.currentUser.value;return Array.isArray(l==null?void 0:l.classrooms)&&l.classrooms.length>0});return St(()=>{const l=t.currentUser.value;l&&o.value==="student"&&s.fetchStudentAssignments(l.id)}),(l,c)=>(v(),h("div",Qk,[n.value?(v(),Ue(Xk,{key:0,onBack:c[0]||(c[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(v(),Ue(w$,{key:1,"is-admin":o.value==="admin",onSelectCollection:c[1]||(c[1]=u=>l.$emit("select-collection",u)),onShowAdmin:c[2]||(c[2]=u=>n.value=!0),onLoadFile:c[3]||(c[3]=u=>l.$emit("load-file",u))},null,8,["is-admin"])):a.value||r.value?(v(),Ue(SC,{key:2,onSelectCollection:c[4]||(c[4]=u=>l.$emit("select-collection",u)),onSelectAssignment:c[5]||(c[5]=u=>l.$emit("select-assignment",u)),onLoadFile:c[6]||(c[6]=u=>l.$emit("load-file",u))})):(v(),Ue(rC,{key:3,onSelectCollection:c[7]||(c[7]=u=>l.$emit("select-collection",u)),onShowBecomeTeacher:c[8]||(c[8]=u=>l.$emit("show-become-teacher")),onLoadFile:c[9]||(c[9]=u=>l.$emit("load-file",u))}))]))}},ex=Ce(Zk,[["__scopeId","data-v-d84f343d"]]),tx={class:"modal-content"},sx={key:0,class:"step step-overview"},nx={class:"step-actions"},ox={key:1,class:"step step-agreement"},ax={class:"agreement-checkbox"},rx={class:"step-actions"},lx=["disabled"],ix={key:0,class:"error-text"},cx={key:2,class:"step step-confirmation"},ux={class:"step-actions"},dx={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=He(),o=O(1),a=O(!1),r=O(!1),l=O(null);async function c(){const u=n.currentUser.value;if(u){r.value=!0,l.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){l.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:m}=await Mp();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:m,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(d){console.error("Teacher activation failed:",d),l.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(u,d)=>(v(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Lt(f=>u.$emit("close"),["self"]))},[i("div",tx,[o.value===1?(v(),h("div",sx,[d[6]||(d[6]=Po('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),i("div",nx,[i("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),i("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(v(),h("div",ox,[d[8]||(d[8]=Po('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),i("label",ax,[Pe(i("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>a.value=f)},null,512),[[Tr,a.value]]),d[7]||(d[7]=i("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),i("div",rx,[i("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),i("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:c},S(r.value?"Activating...":"Activate Teacher Account"),9,lx)]),l.value?(v(),h("p",ix,S(l.value),1)):B("",!0)])):o.value===3?(v(),h("div",cx,[d[9]||(d[9]=i("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=i("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=i("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=i("ol",{class:"next-steps"},[i("li",null,"Create your first classroom from the teacher dashboard"),i("li",null,"Share the invite link with your students"),i("li",null,"Browse exercises and assign them to your class")],-1)),i("div",ux,[i("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):B("",!0)])]))}},fx=Ce(dx,[["__scopeId","data-v-56e5717d"]]),mx={},px={class:"page-footer"};function vx(e,t){return v(),h("footer",px,[...t[0]||(t[0]=[i("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),i("nav",{class:"footer-links"},[i("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),i("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const hx=Ce(mx,[["render",vx],["__scopeId","data-v-1b649814"]]),gx={key:1,class:"app"},yx={class:"app-header"},bx={class:"header-right"},_x=["title"],wx={key:3,class:"stats"},Cx={class:"correct"},Sx={class:"wrong"},$x={class:"user-avatar-group"},kx=["title"],xx=["title"],Ax={class:"app-main"},Nx={key:3,class:"collection-view"},Tx={key:4,class:"practice-layout"},Ex={class:"practice-left"},Ox={class:"practice-right"},Ix={key:1,class:"commentary-panel"},Rx=["innerHTML"],Px=["innerHTML"],Dx=["innerHTML"],Lx=["innerHTML"],Bx={class:"commentary-controls"},Ux={key:0,class:"bidding-box-wrapper"},Mx={key:1,class:"card-choice-prompt"},Fx=["innerHTML"],jx={key:3,class:"completion-controls"},Hx={key:0,class:"registration-toast"},Wx={__name:"MainLayout",setup(e){const t=bp(),s=ao(),n=He(),o=ia(),a=hu(),r=ro(),l=Kr(),c=fo(),u=Nv(),d=O(!1),f=O(!1),p=O(!1),m=O(!1),g=O(null),y=O(""),T=O(null),C=O(null),_=O(null),b=O(!1),I=O(null),X=O(null),Z=O(!1),L=O(!1),Y=O(null);function J(k,N=".current"){if(!k)return;const M=k.querySelector(N);M&&(k.scrollTop=M.offsetTop-k.offsetTop)}vt(()=>u.currentStepIndex.value,()=>{Gn(()=>{J(T.value,".narrative-text.current")})}),vt(()=>u.isComplete.value,k=>{k&&Gn(()=>{J(T.value,".narrative-text.current")})});const fe=E(()=>n.isAuthenticated.value),me=E(()=>{const k=n.currentUser.value;return k?`${k.firstName} ${k.lastName}`:""}),ue=E(()=>{const k=n.currentUser.value;return k?`${k.firstName.charAt(0)}${k.lastName.charAt(0)}`.toUpperCase():"?"}),_e=E(()=>{const k=n.currentUser.value;return(k==null?void 0:k.role)||"student"}),Ae=E(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let te=null;St(()=>{l.loadAnnouncement(),te=setInterval(()=>l.loadAnnouncement(),5*60*1e3)}),kr(()=>{te&&clearInterval(te)}),St(async()=>{s.initializeFromUrl(),n.initialize();const k=new URLSearchParams(window.location.search);k.get("recover")&&k.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),u.observationStore.initialize();const N=s.getCollectionFromUrl(),M=s.getLessonFromUrl();N&&(C.value=N,M&&await D(N,M)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),gs().initialize(),await r.checkTeacherStatus())});async function ie(k){console.log("User ready:",k.firstName,k.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),L.value=!0,setTimeout(()=>{L.value=!1},4e3)),await a.initialize(),gs().initialize(),await r.checkTeacherStatus();const M=sessionStorage.getItem("pendingJoinCode");if(M){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:M}});return}}function q(){gs().reset(),Ur().clearCache(),ws().reset(),r.reset(),H.value=[],G.value=0,C.value=null,_.value=null,u.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,d.value=!1,m.value=!1,g.value=null}async function K(){b.value=!1,await r.checkTeacherStatus()}const H=O([]),G=O(0),U=E(()=>H.value[G.value]||null),oe=E(()=>{var z;const k=x(C.value),N=k!=null&&k.name?`${k.name} - `:"";if((z=_.value)!=null&&z.name)return N+_.value.name;if(!U.value)return"";const M=U.value.subfolder||U.value.category||"";return M?N+M:""});vt(G,()=>{U.value&&(u.loadDeal(U.value),s.setDealInUrl(U.value.boardNumber))},{flush:"sync"}),vt(()=>u.observationStore.pendingCount.value,(k,N)=>{k>N&&a.triggerSync()}),vt(()=>u.isComplete.value,k=>{k&&(I.value=null)});async function De(k){const N=k.target.files[0];if(N)try{const M=await N.text(),z=go(M);if(z.length>0){const re=N.name.replace(/\.pbn$/i,""),ve=z.map(pe=>({...pe,subfolder:pe.subfolder||re,category:pe.category||re}));H.value=ve,G.value=0,u.loadDeal(ve[0]),u.resetStats(),vs().saveLessonBoardNumbers(re,ve.map(pe=>pe.boardNumber)),_.value={id:re,name:re,category:re}}else alert("No deals found in the PBN file")}catch(M){console.error("Error loading PBN file:",M),alert("Error loading PBN file: "+M.message)}}function Ge({subfolder:k,name:N,category:M,content:z}){const re=go(z);if(re.length>0){const ve=re.map(pe=>({...pe,subfolder:pe.subfolder||k,category:pe.category||M}));H.value=ve,G.value=0,u.loadDeal(ve[0]),u.resetStats(),vs().saveLessonBoardNumbers(k,ve.map(pe=>pe.boardNumber)),_.value={id:k,name:N,category:M},s.setLessonInUrl(k),Z.value=!1,j()}else alert("No deals found in the lesson file")}const gt=E(()=>u.boardState.correctCount),et=E(()=>u.boardState.wrongCount);function W(k){!u.makeBid(k)&&U.value&&(I.value=U.value.boardNumber)}function ae({seat:k,suit:N,rank:M}){!u.makeCardChoice(N,M)&&U.value&&(I.value=U.value.boardNumber)}function ne(){u.clearCardFeedback(),u.goBack()}function ce(){G.value<H.value.length-1&&(I.value=null,G.value++,u.loadDeal(H.value[G.value]))}function we(k){k>=0&&k<H.value.length&&(I.value=null,G.value=k,u.loadDeal(H.value[k]))}async function w({subfolder:k,dealNumber:N}){var M;if(((M=_.value)==null?void 0:M.id)===k&&H.value.length>0){const z=H.value.findIndex(re=>re.boardNumber===N);if(z>=0){we(z);return}}for(const z of s.COLLECTIONS)try{const re=k.includes("/")?k.split("/").pop():k,ve=`${z.baseUrl}/${re}.pbn`,ye=await fetch(ve);if(!ye.ok)continue;const pe=await ye.text();C.value=z.id,s.setCollectionInUrl(z.id),Ge({subfolder:k,name:k,category:"",content:pe});const Fe=H.value.findIndex(We=>We.boardNumber===N);Fe>=0&&we(Fe);return}catch{}}function $(k){p.value=!1,m.value=!1,g.value=null,w(k)}function R(k,N){m.value=!1,g.value=null,w({subfolder:k,dealNumber:N||1})}function F(){_.value=null,s.setLessonInUrl(null),H.value=[],G.value=0,u.resetStats(),Z.value=!1,X.value=null,m.value=!1,g.value=null}function V(){C.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),H.value=[],G.value=0,u.resetStats(),Z.value=!1,X.value=null,m.value=!1,g.value=null}async function j(){if(X.value=null,!C.value||!_.value)return;const k=x(C.value);if(!k)return;const N=_.value.id,M=N.includes("/")?N.split("/").pop():N,z=`${k.baseUrl}/${M}_Intro.pdf`;try{(await fetch(z,{method:"HEAD"})).ok&&(X.value=z)}catch{}}function se(k){window.innerWidth<600?window.open(k,"_blank"):(Y.value=k,Z.value=!0)}function Q(k){C.value=k,s.setCollectionInUrl(k)}async function A(k){const N=await c.fetchExerciseBoards(k.exercise_id);if(!N||N.length===0){alert("Could not load exercise boards.");return}const M=ye=>`${ye.collection_id||""}|${ye.deal_subfolder}`,z=new Map;for(const ye of N){const pe=M(ye);z.has(pe)||z.set(pe,[]),z.get(pe).push(ye)}const re=[];for(const[,ye]of z){const pe=ye[0].deal_subfolder,Fe=ye[0].collection_id,We=pe.includes("/")?pe.split("/").pop():pe;let qe=null;if(Fe){const Se=x(Fe);if(Se)try{const ze=`${Se.baseUrl}/${We}.pbn`,Xe=await fetch(ze);Xe.ok&&(qe=await Xe.text())}catch{}}if(!qe)for(const Se of s.COLLECTIONS)try{const ze=`${Se.baseUrl}/${We}.pbn`,Xe=await fetch(ze);if(Xe.ok){qe=await Xe.text();break}}catch{}if(!qe){console.warn(`Could not load PBN for subfolder: ${pe}`);continue}const Gt=go(qe),je=new Set(ye.map(Se=>Se.deal_number));for(const Se of Gt)if(je.has(Se.boardNumber)){const ze=ye.find(Xe=>Xe.deal_number===Se.boardNumber);re.push({...Se,subfolder:Se.subfolder||pe,category:Se.category||pe,_sortOrder:(ze==null?void 0:ze.sort_order)??999})}}if(re.length===0){alert("Could not find any of the assigned boards.");return}re.sort((ye,pe)=>ye._sortOrder-pe._sortOrder),H.value=re,G.value=0,u.loadDeal(re[0]),u.resetStats(),vs().saveLessonBoardNumbers(k.exercise_name,re.map(ye=>ye.boardNumber)),_.value={id:k.exercise_name,name:k.exercise_name,category:"Assignment"}}function x(k){return s.COLLECTIONS.find(N=>N.id===k)}async function D(k,N){var z;const M=x(k);if(!M)return console.error("Collection not found:",k),!1;try{const re=await fetch(M.tocUrl);if(!re.ok)throw new Error(`Failed to load TOC: ${re.statusText}`);const ve=await re.json();let ye=null,pe=null;for(const Se of ve.categories||[]){const ze=(z=Se.lessons)==null?void 0:z.find(Xe=>Xe.id===N);if(ze){ye=ze,pe=Se;break}}if(!ye)return console.error("Lesson not found in TOC:",N),!1;const Fe=N.includes("/")?N.split("/").pop():N,We=`${M.baseUrl}/${Fe}.pbn`,qe=await fetch(We);if(!qe.ok)throw new Error(`Failed to load lesson: ${qe.statusText}`);const Gt=await qe.text(),je=go(Gt);if(je.length>0){const Se=je.map(ls=>({...ls,subfolder:ls.subfolder||N,category:ls.category||pe.name}));H.value=Se;const ze=s.getDealFromUrl(),Xe=ze?Se.findIndex(ls=>ls.boardNumber===ze):-1;return G.value=Xe>=0?Xe:0,u.loadDeal(Se[G.value]),u.resetStats(),_.value={id:N,name:ye.name,category:pe.name},j(),!0}return!1}catch(re){return console.error("Error loading lesson from URL:",re),!1}}return(k,N)=>{var M,z,re,ve,ye,pe,Fe,We,qe,Gt,je,Se,ze,Xe,ls,qr;return fe.value?(v(),h("div",gx,[i("header",yx,[i("h1",null,S(H.value.length?oe.value:Ae.value),1),i("div",bx,[ge(t_),i("button",{class:"progress-btn",onClick:N[0]||(N[0]=Ee=>f.value=!0),title:"View Progress"}," Progress "),i("button",{class:"accomplishments-btn",onClick:N[1]||(N[1]=Ee=>p.value=!0),title:"View Accomplishments"}," Accomplishments "),P(r).isTeacher.value?(v(),h("button",{key:0,class:"teacher-btn",onClick:N[2]||(N[2]=Ee=>{m.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):B("",!0),H.value.length&&C.value?(v(),h("button",{key:1,class:"lessons-btn",onClick:F,title:"Back to "+((M=x(C.value))==null?void 0:M.name)},S((z=x(C.value))==null?void 0:z.name),9,_x)):B("",!0),C.value||H.value.length?(v(),h("button",{key:2,class:"lobby-btn",onClick:V,title:"Return to lobby"}," Lobby ")):B("",!0),gt.value+et.value>0?(v(),h("div",wx,[i("span",Cx,S(gt.value),1),i("span",Sx,S(et.value),1)])):B("",!0),i("div",$x,[_e.value!=="student"?(v(),h("button",{key:0,class:de(["role-badge","role-"+_e.value]),onClick:V,title:"Return to "+_e.value+" lobby"},S(_e.value),11,kx)):B("",!0),i("button",{class:"user-btn",onClick:N[3]||(N[3]=Ee=>d.value=!0),title:me.value},S(ue.value),9,xx)])])]),i("main",Ax,[ge(Vb),ge(jb),m.value&&!g.value?(v(),Ue(U0,{key:0,onClose:N[4]||(N[4]=Ee=>m.value=!1),onSelectStudent:N[5]||(N[5]=(Ee,gn)=>{g.value=Ee,y.value=gn})})):m.value&&g.value?(v(),Ue(mw,{key:1,studentId:g.value,studentName:y.value,onBack:N[6]||(N[6]=Ee=>g.value=null),onNavigateToLesson:R},null,8,["studentId","studentName"])):!H.value.length&&!C.value?(v(),Ue(ex,{key:2,onSelectCollection:Q,onSelectAssignment:A,onShowBecomeTeacher:N[7]||(N[7]=Ee=>b.value=!0),onLoadFile:De})):!H.value.length&&C.value?(v(),h("div",Nx,[i("h2",null,S(((re=x(C.value))==null?void 0:re.name)||C.value),1),N[17]||(N[17]=i("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ge(Fw,{visible:!0,inline:!0,collection:x(C.value),onLoad:Ge},null,8,["collection"])])):(v(),h("div",Tx,[i("div",Ex,[H.value.length>1?(v(),Ue(wu,{key:0,boardNumbers:H.value.map(Ee=>Ee.boardNumber),lessonSubfolder:((ve=U.value)==null?void 0:ve.subfolder)||((ye=U.value)==null?void 0:ye.category)||"",currentIndex:G.value,forceRedBoard:I.value,introUrl:X.value,onGoto:we,onOpenIntro:se},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):B("",!0),ge(jg,{boardNumber:(pe=U.value)==null?void 0:pe.boardNumber,dealer:(Fe=U.value)==null?void 0:Fe.dealer,vulnerable:(We=U.value)==null?void 0:We.vulnerable,contract:(qe=U.value)==null?void 0:qe.contract,declarer:(Gt=U.value)==null?void 0:Gt.declarer,showContract:P(u).auctionState.auctionComplete||P(u).showOpeningLead.value||P(u).hasSteps.value&&!P(u).hasBidSteps.value,openingLead:P(u).showOpeningLead.value?(je=U.value)==null?void 0:je.openingLead:"",totalDeals:H.value.length,currentIndex:G.value,dealBoardNumbers:H.value.map(Ee=>Ee.boardNumber),onGoto:we},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ge(ag,{hands:P(u).hands.value,hiddenSeats:P(u).hiddenSeats.value,showHcp:P(u).showHcp.value,compact:!0,clickableSeat:P(u).hasCardChoice.value?P(u).studentSeat.value:null,playedCards:P(u).showcardsPlayedCards.value,onCardClick:ae},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),i("div",Ox,[P(u).showAuctionTable.value?(v(),Ue(Sg,{key:0,bids:P(u).hasBidSteps.value?P(u).auctionState.displayedBids:((Se=U.value)==null?void 0:Se.auction)||[],dealer:((ze=U.value)==null?void 0:ze.dealer)||"N",currentBidIndex:P(u).hasBidSteps.value?P(u).auctionState.currentBidIndex:-1,wrongBidIndex:P(u).auctionState.wrongBidIndex,correctBidIndex:P(u).auctionState.correctBidIndex,showTurnIndicator:P(u).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):B("",!0),ge(ai,{visible:!!P(u).auctionState.wrongBid,type:"wrong",wrongBid:P(u).auctionState.wrongBid,correctBid:P(u).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ge(ai,{visible:!!P(u).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:P(u).cardChoiceState.wrongCard,correctCardCode:P(u).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),P(u).hasSteps.value?(v(),h("div",Ix,[i("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:T},[(v(!0),h(ee,null,le(P(u).steps.value.slice(0,P(u).currentStepIndex.value),(Ee,gn)=>(v(),h(ee,{key:"prev-"+gn},[gn>=P(u).commentaryStartIndex.value?(v(),h(ee,{key:0},[i("span",{class:"narrative-text previous",innerHTML:P(Ks)(P(Sn)(Ee.text))},null,8,Rx),Ee.type==="bid"&&Ee.explanationText?(v(),h("span",{key:0,class:de(["narrative-text",gn===P(u).currentStepIndex.value-1&&P(u).isBidStep.value&&!P(u).bidAnswered.value?"current":"previous"]),innerHTML:P(Ks)(P(Sn)(Ee.explanationText))},null,10,Px)):B("",!0)],64)):B("",!0)],64))),128)),P(u).currentStep.value?(v(),h("span",{key:0,class:"narrative-text current",innerHTML:P(Ks)(P(Sn)(P(u).currentStep.value.text))},null,8,Dx)):B("",!0),P(u).bidAnswered.value&&((Xe=P(u).currentStep.value)!=null&&Xe.explanationText)?(v(),h("span",{key:1,class:"narrative-text current",innerHTML:P(Ks)(P(Sn)(P(u).currentStep.value.explanationText))},null,8,Lx)):B("",!0)],512),i("div",Bx,[P(u).hasBidPrompt.value?(v(),h("div",Ux,[ge(gg,{lastBid:P(u).lastContractBid.value,canDouble:P(u).canDouble.value,canRedouble:P(u).canRedouble.value,onBid:W},null,8,["lastBid","canDouble","canRedouble"])])):P(u).hasCardChoice.value?(v(),h("div",Mx," Click on the card you would choose ")):B("",!0),P(u).canGoBack.value?(v(),h("button",{key:2,class:"instruction-btn secondary",onClick:ne},"  Back ")):B("",!0),!P(u).isComplete.value&&(P(u).bidAnswered.value||!P(u).hasBidPrompt.value&&!P(u).hasCardChoice.value&&P(u).currentStep.value&&P(u).currentStep.value.type!=="end")?(v(),h("button",{key:3,class:"instruction-btn primary",onClick:N[8]||(N[8]=Ee=>P(u).advance())},S(((ls=P(u).currentStep.value)==null?void 0:ls.type)==="rotate"?"Rotate":"Next")+"  ",1)):B("",!0),P(u).isComplete.value&&G.value<H.value.length-1?(v(),h("button",{key:4,class:"next-deal-btn",onClick:ce}," Next Deal  ")):B("",!0)])])):(qr=U.value)!=null&&qr.commentary?(v(),h("div",{key:2,class:"display-commentary",innerHTML:P(Ks)(P(Sn)(P(Ep)(U.value.commentary)))},null,8,Fx)):B("",!0),!P(u).hasSteps.value&&P(u).isComplete.value&&G.value<H.value.length-1?(v(),h("div",jx,[i("button",{class:"next-deal-btn",onClick:ce}," Next Deal  ")])):B("",!0)])]))]),ge(Eb,{visible:d.value,onClose:N[9]||(N[9]=Ee=>d.value=!1),onSwitchUser:q,onLogout:q,onBecomeTeacher:N[10]||(N[10]=Ee=>b.value=!0)},null,8,["visible"]),L.value?(v(),h("div",Hx," Account created  your data is encrypted and linked to your email for recovery. ")):B("",!0),f.value?(v(),h("div",{key:1,class:"modal-overlay",onClick:N[12]||(N[12]=Lt(Ee=>f.value=!1,["self"]))},[ge(w1,{onClose:N[11]||(N[11]=Ee=>f.value=!1)})])):B("",!0),p.value?(v(),h("div",{key:2,class:"modal-overlay",onClick:N[14]||(N[14]=Lt(Ee=>p.value=!1,["self"]))},[ge(l0,{onClose:N[13]||(N[13]=Ee=>p.value=!1),onNavigateToDeal:$})])):B("",!0),ge(Jw,{visible:Z.value,url:Y.value||"",onClose:N[15]||(N[15]=Ee=>Z.value=!1)},null,8,["visible","url"]),b.value?(v(),Ue(fx,{key:3,onClose:N[16]||(N[16]=Ee=>b.value=!1),onActivated:K})):B("",!0),ge(hx)])):(v(),Ue(Jy,{key:0,onUserReady:ie}))}}},Vx=()=>dm(()=>import("./JoinClassroomView-LRmxZN1o.js"),__vite__mapDeps([0,1])),Kx=[{path:"/join/:joinCode",name:"join",component:Vx},{path:"/:pathMatch(.*)*",name:"app",component:Wx}],Gx=yp({history:qm(),routes:Kx});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const Ru=nm(im);Ru.use(Gx);Ru.mount("#app");export{Ce as _,i as a,ge as b,h as c,B as d,xt as e,Po as f,He as g,mo as h,Fd as i,Bc as j,bp as k,v as l,St as o,O as r,S as t,zx as u,Cd as w};
