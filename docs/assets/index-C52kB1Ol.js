const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-BBeFEdVz.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const De={},on=[],Jt=()=>{},Ei=()=>!1,oa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xr=e=>e.startsWith("onUpdate:"),at=Object.assign,Ar=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},sd=Object.prototype.hasOwnProperty,Pe=(e,t)=>sd.call(e,t),ge=Array.isArray,an=e=>po(e)==="[object Map]",wn=e=>po(e)==="[object Set]",vl=e=>po(e)==="[object Date]",Se=e=>typeof e=="function",Ye=e=>typeof e=="string",Mt=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",Oi=e=>(Re(e)||Se(e))&&Se(e.then)&&Se(e.catch),Ii=Object.prototype.toString,po=e=>Ii.call(e),nd=e=>po(e).slice(8,-1),Pi=e=>po(e)==="[object Object]",Tr=e=>Ye(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mn=kr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aa=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},od=/-\w/g,It=aa(e=>e.replace(od,t=>t.slice(1).toUpperCase())),ad=/\B([A-Z])/g,$s=aa(e=>e.replace(ad,"-$1").toLowerCase()),ra=aa(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sa=aa(e=>e?`on${ra(e)}`:""),ys=(e,t)=>!Object.is(e,t),Oo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Di=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},la=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ml;const ia=()=>ml||(ml=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function et(e){if(ge(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ye(n)?cd(n):et(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Ye(e)||Re(e))return e}const rd=/;(?![^(]*\))/g,ld=/:([^]+)/,id=/\/\*[^]*?\*\//g;function cd(e){const t={};return e.replace(id,"").split(rd).forEach(s=>{if(s){const n=s.split(ld);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(Ye(e))t=e;else if(ge(e))for(let s=0;s<e.length;s++){const n=ie(e[s]);n&&(t+=n+" ")}else if(Re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ud="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dd=kr(ud);function Ri(e){return!!e||e===""}function fd(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Fs(e[n],t[n]);return s}function Fs(e,t){if(e===t)return!0;let s=vl(e),n=vl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Mt(e),n=Mt(t),s||n)return e===t;if(s=ge(e),n=ge(t),s||n)return s&&n?fd(e,t):!1;if(s=Re(e),n=Re(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const l in e){const i=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(i&&!u||!i&&u||!Fs(e[l],t[l]))return!1}}return String(e)===String(t)}function Nr(e,t){return e.findIndex(s=>Fs(s,t))}const Li=e=>!!(e&&e.__v_isRef===!0),b=e=>Ye(e)?e:e==null?"":ge(e)||Re(e)&&(e.toString===Ii||!Se(e.toString))?Li(e)?b(e.value):JSON.stringify(e,Bi,2):String(e),Bi=(e,t)=>Li(t)?Bi(e,t.value):an(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[Ca(n,a)+" =>"]=o,s),{})}:wn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Ca(s))}:Mt(t)?Ca(t):Re(t)&&!ge(t)&&!Pi(t)?String(t):t,Ca=(e,t="")=>{var s;return Mt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _t;class pd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_t,!t&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=_t;try{return _t=this,t()}finally{_t=s}}}on(){++this._on===1&&(this.prevScope=_t,_t=this)}off(){this._on>0&&--this._on===0&&(_t=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function vd(){return _t}let Me;const $a=new WeakSet;class Mi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_t&&_t.active&&_t.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$a.has(this)&&($a.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hl(this),ji(this);const t=Me,s=Rt;Me=this,Rt=!0;try{return this.fn()}finally{Hi(this),Me=t,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ir(t);this.deps=this.depsTail=void 0,hl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$a.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Va(this)&&this.run()}get dirty(){return Va(this)}}let Ui=0,Un,Fn;function Fi(e,t=!1){if(e.flags|=8,t){e.next=Fn,Fn=e;return}e.next=Un,Un=e}function Er(){Ui++}function Or(){if(--Ui>0)return;if(Fn){let t=Fn;for(Fn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Un;){let t=Un;for(Un=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function ji(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Hi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Ir(n),md(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Va(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qn)||(e.globalVersion=Qn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Va(e))))return;e.flags|=2;const t=e.dep,s=Me,n=Rt;Me=e,Rt=!0;try{ji(e);const o=e.fn(e._value);(t.version===0||ys(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Me=s,Rt=n,Hi(e),e.flags&=-3}}function Ir(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)Ir(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function md(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Rt=!0;const Ki=[];function as(){Ki.push(Rt),Rt=!1}function rs(){const e=Ki.pop();Rt=e===void 0?!0:e}function hl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Me;Me=void 0;try{t()}finally{Me=s}}}let Qn=0;class hd{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Me||!Rt||Me===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Me)s=this.activeLink=new hd(Me,this),Me.deps?(s.prevDep=Me.depsTail,Me.depsTail.nextDep=s,Me.depsTail=s):Me.deps=Me.depsTail=s,Vi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Me.depsTail,s.nextDep=void 0,Me.depsTail.nextDep=s,Me.depsTail=s,Me.deps===s&&(Me.deps=n)}return s}trigger(t){this.version++,Qn++,this.notify(t)}notify(t){Er();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Or()}}}function Vi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Vi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ga=new WeakMap,Bs=Symbol(""),za=Symbol(""),Zn=Symbol("");function ut(e,t,s){if(Rt&&Me){let n=Ga.get(e);n||Ga.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Pr),o.map=n,o.key=s),o.track()}}function es(e,t,s,n,o,a){const l=Ga.get(e);if(!l){Qn++;return}const i=u=>{u&&u.trigger()};if(Er(),t==="clear")l.forEach(i);else{const u=ge(e),c=u&&Tr(s);if(u&&s==="length"){const f=Number(n);l.forEach((d,p)=>{(p==="length"||p===Zn||!Mt(p)&&p>=f)&&i(d)})}else switch((s!==void 0||l.has(void 0))&&i(l.get(s)),c&&i(l.get(Zn)),t){case"add":u?c&&i(l.get("length")):(i(l.get(Bs)),an(e)&&i(l.get(za)));break;case"delete":u||(i(l.get(Bs)),an(e)&&i(l.get(za)));break;case"set":an(e)&&i(l.get(Bs));break}}Or()}function Vs(e){const t=Ie(e);return t===e?t:(ut(t,"iterate",Zn),Et(e)?t:t.map(Ut))}function ca(e){return ut(e=Ie(e),"iterate",Zn),e}function ps(e,t){return ls(e)?dn(Ms(e)?Ut(t):t):Ut(t)}const gd={__proto__:null,[Symbol.iterator](){return ka(this,Symbol.iterator,e=>ps(this,e))},concat(...e){return Vs(this).concat(...e.map(t=>ge(t)?Vs(t):t))},entries(){return ka(this,"entries",e=>(e[1]=ps(this,e[1]),e))},every(e,t){return qt(this,"every",e,t,void 0,arguments)},filter(e,t){return qt(this,"filter",e,t,s=>s.map(n=>ps(this,n)),arguments)},find(e,t){return qt(this,"find",e,t,s=>ps(this,s),arguments)},findIndex(e,t){return qt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qt(this,"findLast",e,t,s=>ps(this,s),arguments)},findLastIndex(e,t){return qt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qt(this,"forEach",e,t,void 0,arguments)},includes(...e){return xa(this,"includes",e)},indexOf(...e){return xa(this,"indexOf",e)},join(e){return Vs(this).join(e)},lastIndexOf(...e){return xa(this,"lastIndexOf",e)},map(e,t){return qt(this,"map",e,t,void 0,arguments)},pop(){return xn(this,"pop")},push(...e){return xn(this,"push",e)},reduce(e,...t){return gl(this,"reduce",e,t)},reduceRight(e,...t){return gl(this,"reduceRight",e,t)},shift(){return xn(this,"shift")},some(e,t){return qt(this,"some",e,t,void 0,arguments)},splice(...e){return xn(this,"splice",e)},toReversed(){return Vs(this).toReversed()},toSorted(e){return Vs(this).toSorted(e)},toSpliced(...e){return Vs(this).toSpliced(...e)},unshift(...e){return xn(this,"unshift",e)},values(){return ka(this,"values",e=>ps(this,e))}};function ka(e,t,s){const n=ca(e),o=n[t]();return n!==e&&!Et(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const yd=Array.prototype;function qt(e,t,s,n,o,a){const l=ca(e),i=l!==e&&!Et(e),u=l[t];if(u!==yd[t]){const d=u.apply(e,a);return i?Ut(d):d}let c=s;l!==e&&(i?c=function(d,p){return s.call(this,ps(e,d),p,e)}:s.length>2&&(c=function(d,p){return s.call(this,d,p,e)}));const f=u.call(l,c,n);return i&&o?o(f):f}function gl(e,t,s,n){const o=ca(e);let a=s;return o!==e&&(Et(e)?s.length>3&&(a=function(l,i,u){return s.call(this,l,i,u,e)}):a=function(l,i,u){return s.call(this,l,ps(e,i),u,e)}),o[t](a,...n)}function xa(e,t,s){const n=Ie(e);ut(n,"iterate",Zn);const o=n[t](...s);return(o===-1||o===!1)&&Lr(s[0])?(s[0]=Ie(s[0]),n[t](...s)):o}function xn(e,t,s=[]){as(),Er();const n=Ie(e)[t].apply(e,s);return Or(),rs(),n}const bd=kr("__proto__,__v_isRef,__isVue"),Gi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function _d(e){Mt(e)||(e=String(e));const t=Ie(this);return ut(t,"has",e),t.hasOwnProperty(e)}class zi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?Ed:Xi:a?qi:Yi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=ge(t);if(!o){let u;if(l&&(u=gd[s]))return u;if(s==="hasOwnProperty")return _d}const i=Reflect.get(t,s,ft(t)?t:n);if((Mt(s)?Gi.has(s):bd(s))||(o||ut(t,"get",s),a))return i;if(ft(i)){const u=l&&Tr(s)?i:i.value;return o&&Re(u)?Ya(u):u}return Re(i)?o?Ya(i):Lt(i):i}}class Ji extends zi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const l=ge(t)&&Tr(s);if(!this._isShallow){const c=ls(a);if(!Et(n)&&!ls(n)&&(a=Ie(a),n=Ie(n)),!l&&ft(a)&&!ft(n))return c||(a.value=n),!0}const i=l?Number(s)<t.length:Pe(t,s),u=Reflect.set(t,s,n,ft(t)?t:o);return t===Ie(o)&&(i?ys(n,a)&&es(t,"set",s,n):es(t,"add",s,n)),u}deleteProperty(t,s){const n=Pe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&es(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Mt(s)||!Gi.has(s))&&ut(t,"has",s),n}ownKeys(t){return ut(t,"iterate",ge(t)?"length":Bs),Reflect.ownKeys(t)}}class wd extends zi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Sd=new Ji,Cd=new wd,$d=new Ji(!0);const Ja=e=>e,So=e=>Reflect.getPrototypeOf(e);function kd(e,t,s){return function(...n){const o=this.__v_raw,a=Ie(o),l=an(a),i=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,c=o[e](...n),f=s?Ja:t?dn:Ut;return!t&&ut(a,"iterate",u?za:Bs),at(Object.create(c),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:i?[f(d[0]),f(d[1])]:f(d),done:p}}})}}function Co(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function xd(e,t){const s={get(o){const a=this.__v_raw,l=Ie(a),i=Ie(o);e||(ys(o,i)&&ut(l,"get",o),ut(l,"get",i));const{has:u}=So(l),c=t?Ja:e?dn:Ut;if(u.call(l,o))return c(a.get(o));if(u.call(l,i))return c(a.get(i));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!e&&ut(Ie(o),"iterate",Bs),o.size},has(o){const a=this.__v_raw,l=Ie(a),i=Ie(o);return e||(ys(o,i)&&ut(l,"has",o),ut(l,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const l=this,i=l.__v_raw,u=Ie(i),c=t?Ja:e?dn:Ut;return!e&&ut(u,"iterate",Bs),i.forEach((f,d)=>o.call(a,c(f),c(d),l))}};return at(s,e?{add:Co("add"),set:Co("set"),delete:Co("delete"),clear:Co("clear")}:{add(o){!t&&!Et(o)&&!ls(o)&&(o=Ie(o));const a=Ie(this);return So(a).has.call(a,o)||(a.add(o),es(a,"add",o,o)),this},set(o,a){!t&&!Et(a)&&!ls(a)&&(a=Ie(a));const l=Ie(this),{has:i,get:u}=So(l);let c=i.call(l,o);c||(o=Ie(o),c=i.call(l,o));const f=u.call(l,o);return l.set(o,a),c?ys(a,f)&&es(l,"set",o,a):es(l,"add",o,a),this},delete(o){const a=Ie(this),{has:l,get:i}=So(a);let u=l.call(a,o);u||(o=Ie(o),u=l.call(a,o)),i&&i.call(a,o);const c=a.delete(o);return u&&es(a,"delete",o,void 0),c},clear(){const o=Ie(this),a=o.size!==0,l=o.clear();return a&&es(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=kd(o,e,t)}),s}function Dr(e,t){const s=xd(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Pe(s,o)&&o in n?s:n,o,a)}const Ad={get:Dr(!1,!1)},Td={get:Dr(!1,!0)},Nd={get:Dr(!0,!1)};const Yi=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Ed=new WeakMap;function Od(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Id(e){return e.__v_skip||!Object.isExtensible(e)?0:Od(nd(e))}function Lt(e){return ls(e)?e:Rr(e,!1,Sd,Ad,Yi)}function Qi(e){return Rr(e,!1,$d,Td,qi)}function Ya(e){return Rr(e,!0,Cd,Nd,Xi)}function Rr(e,t,s,n,o){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Id(e);if(a===0)return e;const l=o.get(e);if(l)return l;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Ms(e){return ls(e)?Ms(e.__v_raw):!!(e&&e.__v_isReactive)}function ls(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Lr(e){return e?!!e.__v_raw:!1}function Ie(e){const t=e&&e.__v_raw;return t?Ie(t):e}function Pd(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&Di(e,"__v_skip",!0),e}const Ut=e=>Re(e)?Lt(e):e,dn=e=>Re(e)?Ya(e):e;function ft(e){return e?e.__v_isRef===!0:!1}function O(e){return Zi(e,!1)}function Dd(e){return Zi(e,!0)}function Zi(e,t){return ft(e)?e:new Rd(e,t)}class Rd{constructor(t,s){this.dep=new Pr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Ie(t),this._value=s?t:Ut(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Et(t)||ls(t);t=n?t:Ie(t),ys(t,s)&&(this._rawValue=t,this._value=n?t:Ut(t),this.dep.trigger())}}function M(e){return ft(e)?e.value:e}const Ld={get:(e,t,s)=>t==="__v_raw"?e:M(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ft(o)&&!ft(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function ec(e){return Ms(e)?e:new Proxy(e,Ld)}class Bd{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Pr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return Fi(this,!0),!0}get value(){const t=this.dep.track();return Wi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Md(e,t,s=!1){let n,o;return Se(e)?n=e:(n=e.get,o=e.set),new Bd(n,o,s)}const $o={},Uo=new WeakMap;let Ds;function Ud(e,t=!1,s=Ds){if(s){let n=Uo.get(s);n||Uo.set(s,n=[]),n.push(e)}}function Fd(e,t,s=De){const{immediate:n,deep:o,once:a,scheduler:l,augmentJob:i,call:u}=s,c=A=>o?A:Et(A)||o===!1||o===0?ts(A,1):ts(A);let f,d,p,h,g=!1,y=!1;if(ft(e)?(d=()=>e.value,g=Et(e)):Ms(e)?(d=()=>c(e),g=!0):ge(e)?(y=!0,g=e.some(A=>Ms(A)||Et(A)),d=()=>e.map(A=>{if(ft(A))return A.value;if(Ms(A))return c(A);if(Se(A))return u?u(A,2):A()})):Se(e)?t?d=u?()=>u(e,2):e:d=()=>{if(p){as();try{p()}finally{rs()}}const A=Ds;Ds=f;try{return u?u(e,3,[h]):e(h)}finally{Ds=A}}:d=Jt,t&&o){const A=d,D=o===!0?1/0:o;d=()=>ts(A(),D)}const $=vd(),C=()=>{f.stop(),$&&$.active&&Ar($.effects,f)};if(a&&t){const A=t;t=(...D)=>{A(...D),C()}}let _=y?new Array(e.length).fill($o):$o;const w=A=>{if(!(!(f.flags&1)||!f.dirty&&!A))if(t){const D=f.run();if(o||g||(y?D.some((U,R)=>ys(U,_[R])):ys(D,_))){p&&p();const U=Ds;Ds=f;try{const R=[D,_===$o?void 0:y&&_[0]===$o?[]:_,h];_=D,u?u(t,3,R):t(...R)}finally{Ds=U}}}else f.run()};return i&&i(w),f=new Mi(d),f.scheduler=l?()=>l(w,!1):w,h=A=>Ud(A,!1,f),p=f.onStop=()=>{const A=Uo.get(f);if(A){if(u)u(A,4);else for(const D of A)D();Uo.delete(f)}},t?n?w(!0):_=f.run():l?l(w.bind(null,!0),!0):f.run(),C.pause=f.pause.bind(f),C.resume=f.resume.bind(f),C.stop=C,C}function ts(e,t=1/0,s){if(t<=0||!Re(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ft(e))ts(e.value,t,s);else if(ge(e))for(let n=0;n<e.length;n++)ts(e[n],t,s);else if(wn(e)||an(e))e.forEach(n=>{ts(n,t,s)});else if(Pi(e)){for(const n in e)ts(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ts(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vo(e,t,s,n){try{return n?e(...n):e()}catch(o){ua(o,t,s)}}function Yt(e,t,s,n){if(Se(e)){const o=vo(e,t,s,n);return o&&Oi(o)&&o.catch(a=>{ua(a,t,s)}),o}if(ge(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Yt(e[a],t,s,n));return o}}function ua(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||De;if(t){let i=t.parent;const u=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,u,c)===!1)return}i=i.parent}if(a){as(),vo(a,null,10,[e,u,c]),rs();return}}jd(e,s,o,n,l)}function jd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const gt=[];let Kt=-1;const rn=[];let vs=null,Js=0;const tc=Promise.resolve();let Fo=null;function eo(e){const t=Fo||tc;return e?t.then(this?e.bind(this):e):t}function Hd(e){let t=Kt+1,s=gt.length;for(;t<s;){const n=t+s>>>1,o=gt[n],a=to(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Br(e){if(!(e.flags&1)){const t=to(e),s=gt[gt.length-1];!s||!(e.flags&2)&&t>=to(s)?gt.push(e):gt.splice(Hd(t),0,e),e.flags|=1,sc()}}function sc(){Fo||(Fo=tc.then(oc))}function Wd(e){ge(e)?rn.push(...e):vs&&e.id===-1?vs.splice(Js+1,0,e):e.flags&1||(rn.push(e),e.flags|=1),sc()}function yl(e,t,s=Kt+1){for(;s<gt.length;s++){const n=gt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;gt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function nc(e){if(rn.length){const t=[...new Set(rn)].sort((s,n)=>to(s)-to(n));if(rn.length=0,vs){vs.push(...t);return}for(vs=t,Js=0;Js<vs.length;Js++){const s=vs[Js];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}vs=null,Js=0}}const to=e=>e.id==null?e.flags&2?-1:1/0:e.id;function oc(e){try{for(Kt=0;Kt<gt.length;Kt++){const t=gt[Kt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),vo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kt<gt.length;Kt++){const t=gt[Kt];t&&(t.flags&=-2)}Kt=-1,gt.length=0,nc(),Fo=null,(gt.length||rn.length)&&oc()}}let ot=null,ac=null;function jo(e){const t=ot;return ot=e,ac=e&&e.type.__scopeId||null,t}function Kd(e,t=ot,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Ko(-1);const a=jo(t);let l;try{l=e(...o)}finally{jo(a),n._d&&Ko(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function We(e,t){if(ot===null)return e;const s=va(ot),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,i,u=De]=t[o];a&&(Se(a)&&(a={mounted:a,updated:a}),a.deep&&ts(l),n.push({dir:a,instance:s,value:l,oldValue:void 0,arg:i,modifiers:u}))}return e}function ks(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let l=0;l<o.length;l++){const i=o[l];a&&(i.oldValue=a[l].value);let u=i.dir[n];u&&(as(),Yt(u,s,8,[e.el,i,e,t]),rs())}}function Io(e,t){if(dt){let s=dt.provides;const n=dt.parent&&dt.parent.provides;n===s&&(s=dt.provides=Object.create(n)),s[e]=t}}function Bt(e,t,s=!1){const n=zf();if(n||cn){let o=cn?cn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&Se(t)?t.call(n&&n.proxy):t}}const Vd=Symbol.for("v-scx"),Gd=()=>Bt(Vd);function nt(e,t,s){return rc(e,t,s)}function rc(e,t,s=De){const{immediate:n,deep:o,flush:a,once:l}=s,i=at({},s),u=t&&n||!t&&a!=="post";let c;if(ao){if(a==="sync"){const h=Gd();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=Jt,h.resume=Jt,h.pause=Jt,h}}const f=dt;i.call=(h,g,y)=>Yt(h,f,g,y);let d=!1;a==="post"?i.scheduler=h=>{mt(h,f&&f.suspense)}:a!=="sync"&&(d=!0,i.scheduler=(h,g)=>{g?h():Br(h)}),i.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const p=Fd(e,t,i);return ao&&(c?c.push(p):u&&p()),p}function zd(e,t,s){const n=this.proxy,o=Ye(e)?e.includes(".")?lc(n,e):()=>n[e]:e.bind(n,n);let a;Se(t)?a=t:(a=t.handler,s=t);const l=mo(this),i=rc(o,a.bind(n),s);return l(),i}function lc(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const ic=Symbol("_vte"),Jd=e=>e.__isTeleport,jn=e=>e&&(e.disabled||e.disabled===""),bl=e=>e&&(e.defer||e.defer===""),_l=e=>typeof SVGElement<"u"&&e instanceof SVGElement,wl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,qa=(e,t)=>{const s=e&&e.to;return Ye(s)?t?t(s):null:s},cc={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,l,i,u,c){const{mc:f,pc:d,pbc:p,o:{insert:h,querySelector:g,createText:y,createComment:$}}=c,C=jn(t.props);let{shapeFlag:_,children:w,dynamicChildren:A}=t;if(e==null){const D=t.el=y(""),U=t.anchor=y("");h(D,s,n),h(U,s,n);const R=(z,ue)=>{_&16&&f(w,z,ue,o,a,l,i,u)},Y=()=>{const z=t.target=qa(t.props,g),ue=uc(z,t,y,h);z&&(l!=="svg"&&_l(z)?l="svg":l!=="mathml"&&wl(z)&&(l="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(z),C||(R(z,ue),Po(t,!1)))};C&&(R(s,U),Po(t,!0)),bl(t.props)?(t.el.__isMounted=!1,mt(()=>{Y(),delete t.el.__isMounted},a)):Y()}else{if(bl(t.props)&&e.el.__isMounted===!1){mt(()=>{cc.process(e,t,s,n,o,a,l,i,u,c)},a);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,U=t.target=e.target,R=t.targetAnchor=e.targetAnchor,Y=jn(e.props),z=Y?s:U,ue=Y?D:R;if(l==="svg"||_l(U)?l="svg":(l==="mathml"||wl(U))&&(l="mathml"),A?(p(e.dynamicChildren,A,z,o,a,l,i),Wr(e,t,!0)):u||d(e,t,z,ue,o,a,l,i,!1),C)Y?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ko(t,s,D,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const me=t.target=qa(t.props,g);me&&ko(t,me,null,c,0)}else Y&&ko(t,U,R,c,1);Po(t,C)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:l,children:i,anchor:u,targetStart:c,targetAnchor:f,target:d,props:p}=e;if(d&&(o(c),o(f)),a&&o(u),l&16){const h=a||!jn(p);for(let g=0;g<i.length;g++){const y=i[g];n(y,t,s,h,!!y.dynamicChildren)}}},move:ko,hydrate:Yd};function ko(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:l,anchor:i,shapeFlag:u,children:c,props:f}=e,d=a===2;if(d&&n(l,t,s),(!d||jn(f))&&u&16)for(let p=0;p<c.length;p++)o(c[p],t,s,2);d&&n(i,t,s)}function Yd(e,t,s,n,o,a,{o:{nextSibling:l,parentNode:i,querySelector:u,insert:c,createText:f}},d){function p(y,$,C,_){$.anchor=d(l(y),$,i(y),s,n,o,a),$.targetStart=C,$.targetAnchor=_}const h=t.target=qa(t.props,u),g=jn(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)p(e,t,y,y&&l(y));else{t.anchor=l(e);let $=y;for(;$;){if($&&$.nodeType===8){if($.data==="teleport start anchor")t.targetStart=$;else if($.data==="teleport anchor"){t.targetAnchor=$,h._lpa=t.targetAnchor&&l(t.targetAnchor);break}}$=l($)}t.targetAnchor||uc(h,t,f,c),d(y&&l(y),t,h,s,n,o,a)}Po(t,g)}else g&&t.shapeFlag&16&&p(e,t,e,l(e));return t.anchor&&l(t.anchor)}const qd=cc;function Po(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function uc(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[ic]=a,e&&(n(o,e),n(a,e)),a}const Xd=Symbol("_leaveCb");function Mr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function dc(e,t){return Se(e)?at({name:e.name},t,{setup:e}):e}function fc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ho=new WeakMap;function Hn(e,t,s,n,o=!1){if(ge(e)){e.forEach((g,y)=>Hn(g,t&&(ge(t)?t[y]:t),s,n,o));return}if(ln(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Hn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?va(n.component):n.el,l=o?null:a,{i,r:u}=e,c=t&&t.r,f=i.refs===De?i.refs={}:i.refs,d=i.setupState,p=Ie(d),h=d===De?Ei:g=>Pe(p,g);if(c!=null&&c!==u){if(Sl(t),Ye(c))f[c]=null,h(c)&&(d[c]=null);else if(ft(c)){c.value=null;const g=t;g.k&&(f[g.k]=null)}}if(Se(u))vo(u,i,12,[l,f]);else{const g=Ye(u),y=ft(u);if(g||y){const $=()=>{if(e.f){const C=g?h(u)?d[u]:f[u]:u.value;if(o)ge(C)&&Ar(C,a);else if(ge(C))C.includes(a)||C.push(a);else if(g)f[u]=[a],h(u)&&(d[u]=f[u]);else{const _=[a];u.value=_,e.k&&(f[e.k]=_)}}else g?(f[u]=l,h(u)&&(d[u]=l)):y&&(u.value=l,e.k&&(f[e.k]=l))};if(l){const C=()=>{$(),Ho.delete(e)};C.id=-1,Ho.set(e,C),mt(C,s)}else Sl(e),$()}}}function Sl(e){const t=Ho.get(e);t&&(t.flags|=8,Ho.delete(e))}ia().requestIdleCallback;ia().cancelIdleCallback;const ln=e=>!!e.type.__asyncLoader,pc=e=>e.type.__isKeepAlive;function Qd(e,t){vc(e,"a",t)}function Zd(e,t){vc(e,"da",t)}function vc(e,t,s=dt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(da(t,n,s),s){let o=s.parent;for(;o&&o.parent;)pc(o.parent.vnode)&&ef(n,t,s,o),o=o.parent}}function ef(e,t,s,n){const o=da(t,e,n,!0);Fr(()=>{Ar(n[t],o)},s)}function da(e,t,s=dt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{as();const i=mo(s),u=Yt(t,s,e,l);return i(),rs(),u});return n?o.unshift(a):o.push(a),a}}const cs=e=>(t,s=dt)=>{(!ao||e==="sp")&&da(e,(...n)=>t(...n),s)},tf=cs("bm"),yt=cs("m"),sf=cs("bu"),nf=cs("u"),Ur=cs("bum"),Fr=cs("um"),of=cs("sp"),af=cs("rtg"),rf=cs("rtc");function lf(e,t=dt){da("ec",e,t)}const cf="components";function uf(e,t){return ff(cf,e,!0,t)||e}const df=Symbol.for("v-ndc");function ff(e,t,s=!0,n=!1){const o=ot||dt;if(o){const a=o.type;{const i=Qf(a,!1);if(i&&(i===t||i===It(t)||i===ra(It(t))))return a}const l=Cl(o[e]||a[e],t)||Cl(o.appContext[e],t);return!l&&n?a:l}}function Cl(e,t){return e&&(e[t]||e[It(t)]||e[ra(It(t))])}function le(e,t,s,n){let o;const a=s,l=ge(e);if(l||Ye(e)){const i=l&&Ms(e);let u=!1,c=!1;i&&(u=!Et(e),c=ls(e),e=ca(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(u?c?dn(Ut(e[f])):Ut(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(Re(e))if(e[Symbol.iterator])o=Array.from(e,(i,u)=>t(i,u,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let u=0,c=i.length;u<c;u++){const f=i[u];o[u]=t(e[f],f,u,a)}}else o=[];return o}function pf(e,t,s={},n,o){if(ot.ce||ot.parent&&ln(ot.parent)&&ot.parent.ce){const c=Object.keys(s).length>0;return s.name=t,v(),He(X,null,[ye("slot",s,n)],c?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),v();const l=a&&mc(a(s)),i=s.key||l&&l.key,u=He(X,{key:(i&&!Mt(i)?i:`_${t}`)+(!l&&n?"_fb":"")},l||[],l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),u}function mc(e){return e.some(t=>no(t)?!(t.type===is||t.type===X&&!mc(t.children)):!0)?e:null}const Xa=e=>e?Pc(e)?va(e):Xa(e.parent):null,Wn=at(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xa(e.parent),$root:e=>Xa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gc(e),$forceUpdate:e=>e.f||(e.f=()=>{Br(e.update)}),$nextTick:e=>e.n||(e.n=eo.bind(e.proxy)),$watch:e=>zd.bind(e)}),Aa=(e,t)=>e!==De&&!e.__isScriptSetup&&Pe(e,t),vf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:l,type:i,appContext:u}=e;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(Aa(n,t))return l[t]=1,n[t];if(o!==De&&Pe(o,t))return l[t]=2,o[t];if(Pe(a,t))return l[t]=3,a[t];if(s!==De&&Pe(s,t))return l[t]=4,s[t];Qa&&(l[t]=0)}}const c=Wn[t];let f,d;if(c)return t==="$attrs"&&ut(e.attrs,"get",""),c(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==De&&Pe(s,t))return l[t]=4,s[t];if(d=u.config.globalProperties,Pe(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return Aa(o,t)?(o[t]=s,!0):n!==De&&Pe(n,t)?(n[t]=s,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:l}},i){let u;return!!(s[i]||e!==De&&i[0]!=="$"&&Pe(e,i)||Aa(t,i)||Pe(a,i)||Pe(n,i)||Pe(Wn,i)||Pe(o.config.globalProperties,i)||(u=l.__cssModules)&&u[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Pe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function $l(e){return ge(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Qa=!0;function mf(e){const t=gc(e),s=e.proxy,n=e.ctx;Qa=!1,t.beforeCreate&&kl(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:i,provide:u,inject:c,created:f,beforeMount:d,mounted:p,beforeUpdate:h,updated:g,activated:y,deactivated:$,beforeDestroy:C,beforeUnmount:_,destroyed:w,unmounted:A,render:D,renderTracked:U,renderTriggered:R,errorCaptured:Y,serverPrefetch:z,expose:ue,inheritAttrs:me,components:fe,directives:be,filters:$e}=t;if(c&&hf(c,n,null),l)for(const Z in l){const Q=l[Z];Se(Q)&&(n[Z]=Q.bind(s))}if(o){const Z=o.call(s,s);Re(Z)&&(e.data=Lt(Z))}if(Qa=!0,a)for(const Z in a){const Q=a[Z],te=Se(Q)?Q.bind(s,s):Se(Q.get)?Q.get.bind(s,s):Jt,I=!Se(Q)&&Se(Q.set)?Q.set.bind(s):Jt,k=N({get:te,set:I});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>k.value,set:E=>k.value=E})}if(i)for(const Z in i)hc(i[Z],n,s,Z);if(u){const Z=Se(u)?u.call(s):u;Reflect.ownKeys(Z).forEach(Q=>{Io(Q,Z[Q])})}f&&kl(f,e,"c");function ve(Z,Q){ge(Q)?Q.forEach(te=>Z(te.bind(s))):Q&&Z(Q.bind(s))}if(ve(tf,d),ve(yt,p),ve(sf,h),ve(nf,g),ve(Qd,y),ve(Zd,$),ve(lf,Y),ve(rf,U),ve(af,R),ve(Ur,_),ve(Fr,A),ve(of,z),ge(ue))if(ue.length){const Z=e.exposed||(e.exposed={});ue.forEach(Q=>{Object.defineProperty(Z,Q,{get:()=>s[Q],set:te=>s[Q]=te,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===Jt&&(e.render=D),me!=null&&(e.inheritAttrs=me),fe&&(e.components=fe),be&&(e.directives=be),z&&fc(e)}function hf(e,t,s=Jt){ge(e)&&(e=Za(e));for(const n in e){const o=e[n];let a;Re(o)?"default"in o?a=Bt(o.from||n,o.default,!0):a=Bt(o.from||n):a=Bt(o),ft(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[n]=a}}function kl(e,t,s){Yt(ge(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function hc(e,t,s,n){let o=n.includes(".")?lc(s,n):()=>s[n];if(Ye(e)){const a=t[e];Se(a)&&nt(o,a)}else if(Se(e))nt(o,e.bind(s));else if(Re(e))if(ge(e))e.forEach(a=>hc(a,t,s,n));else{const a=Se(e.handler)?e.handler.bind(s):t[e.handler];Se(a)&&nt(o,a,e)}}function gc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,i=a.get(t);let u;return i?u=i:!o.length&&!s&&!n?u=t:(u={},o.length&&o.forEach(c=>Wo(u,c,l,!0)),Wo(u,t,l)),Re(t)&&a.set(t,u),u}function Wo(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&Wo(e,a,s,!0),o&&o.forEach(l=>Wo(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const i=gf[l]||s&&s[l];e[l]=i?i(e[l],t[l]):t[l]}return e}const gf={data:xl,props:Al,emits:Al,methods:Ln,computed:Ln,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:Ln,directives:Ln,watch:bf,provide:xl,inject:yf};function xl(e,t){return t?e?function(){return at(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function yf(e,t){return Ln(Za(e),Za(t))}function Za(e){if(ge(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function vt(e,t){return e?[...new Set([].concat(e,t))]:t}function Ln(e,t){return e?at(Object.create(null),e,t):t}function Al(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:at(Object.create(null),$l(e),$l(t??{})):t}function bf(e,t){if(!e)return t;if(!t)return e;const s=at(Object.create(null),e);for(const n in t)s[n]=vt(e[n],t[n]);return s}function yc(){return{app:null,config:{isNativeTag:Ei,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _f=0;function wf(e,t){return function(n,o=null){Se(n)||(n=at({},n)),o!=null&&!Re(o)&&(o=null);const a=yc(),l=new WeakSet,i=[];let u=!1;const c=a.app={_uid:_f++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:ep,get config(){return a.config},set config(f){},use(f,...d){return l.has(f)||(f&&Se(f.install)?(l.add(f),f.install(c,...d)):Se(f)&&(l.add(f),f(c,...d))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,d){return d?(a.components[f]=d,c):a.components[f]},directive(f,d){return d?(a.directives[f]=d,c):a.directives[f]},mount(f,d,p){if(!u){const h=c._ceVNode||ye(n,o);return h.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(h,f,p),u=!0,c._container=f,f.__vue_app__=c,va(h.component)}},onUnmount(f){i.push(f)},unmount(){u&&(Yt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,d){return a.provides[f]=d,c},runWithContext(f){const d=cn;cn=c;try{return f()}finally{cn=d}}};return c}}let cn=null;const Sf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${It(t)}Modifiers`]||e[`${$s(t)}Modifiers`];function Cf(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||De;let o=s;const a=t.startsWith("update:"),l=a&&Sf(n,t.slice(7));l&&(l.trim&&(o=s.map(f=>Ye(f)?f.trim():f)),l.number&&(o=s.map(la)));let i,u=n[i=Sa(t)]||n[i=Sa(It(t))];!u&&a&&(u=n[i=Sa($s(t))]),u&&Yt(u,e,6,o);const c=n[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Yt(c,e,6,o)}}const $f=new WeakMap;function bc(e,t,s=!1){const n=s?$f:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let l={},i=!1;if(!Se(e)){const u=c=>{const f=bc(c,t,!0);f&&(i=!0,at(l,f))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!i?(Re(e)&&n.set(e,null),null):(ge(a)?a.forEach(u=>l[u]=null):at(l,a),Re(e)&&n.set(e,l),l)}function fa(e,t){return!e||!oa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,$s(t))||Pe(e,t))}function Tl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:l,attrs:i,emit:u,render:c,renderCache:f,props:d,data:p,setupState:h,ctx:g,inheritAttrs:y}=e,$=jo(e);let C,_;try{if(s.shapeFlag&4){const A=o||n,D=A;C=Vt(c.call(D,A,f,d,h,p,g)),_=i}else{const A=t;C=Vt(A.length>1?A(d,{attrs:i,slots:l,emit:u}):A(d,null)),_=t.props?i:kf(i)}}catch(A){Kn.length=0,ua(A,e,1),C=ye(is)}let w=C;if(_&&y!==!1){const A=Object.keys(_),{shapeFlag:D}=w;A.length&&D&7&&(a&&A.some(xr)&&(_=xf(_,a)),w=fn(w,_,!1,!0))}return s.dirs&&(w=fn(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&Mr(w,s.transition),C=w,jo($),C}const kf=e=>{let t;for(const s in e)(s==="class"||s==="style"||oa(s))&&((t||(t={}))[s]=e[s]);return t},xf=(e,t)=>{const s={};for(const n in e)(!xr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Af(e,t,s){const{props:n,children:o,component:a}=e,{props:l,children:i,patchFlag:u}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?Nl(n,l,c):!!l;if(u&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const p=f[d];if(l[p]!==n[p]&&!fa(c,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===l?!1:n?l?Nl(n,l,c):!0:!!l;return!1}function Nl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!fa(s,a))return!0}return!1}function Tf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const _c={},wc=()=>Object.create(_c),Sc=e=>Object.getPrototypeOf(e)===_c;function Nf(e,t,s,n=!1){const o={},a=wc();e.propsDefaults=Object.create(null),Cc(e,t,o,a);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:Qi(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Ef(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,i=Ie(o),[u]=e.propsOptions;let c=!1;if((n||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let p=f[d];if(fa(e.emitsOptions,p))continue;const h=t[p];if(u)if(Pe(a,p))h!==a[p]&&(a[p]=h,c=!0);else{const g=It(p);o[g]=er(u,i,g,h,e,!1)}else h!==a[p]&&(a[p]=h,c=!0)}}}else{Cc(e,t,o,a)&&(c=!0);let f;for(const d in i)(!t||!Pe(t,d)&&((f=$s(d))===d||!Pe(t,f)))&&(u?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=er(u,i,d,void 0,e,!0)):delete o[d]);if(a!==i)for(const d in a)(!t||!Pe(t,d))&&(delete a[d],c=!0)}c&&es(e.attrs,"set","")}function Cc(e,t,s,n){const[o,a]=e.propsOptions;let l=!1,i;if(t)for(let u in t){if(Mn(u))continue;const c=t[u];let f;o&&Pe(o,f=It(u))?!a||!a.includes(f)?s[f]=c:(i||(i={}))[f]=c:fa(e.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,l=!0)}if(a){const u=Ie(s),c=i||De;for(let f=0;f<a.length;f++){const d=a[f];s[d]=er(o,u,d,c[d],e,!Pe(c,d))}}return l}function er(e,t,s,n,o,a){const l=e[s];if(l!=null){const i=Pe(l,"default");if(i&&n===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Se(u)){const{propsDefaults:c}=o;if(s in c)n=c[s];else{const f=mo(o);n=c[s]=u.call(null,t),f()}}else n=u;o.ce&&o.ce._setProp(s,n)}l[0]&&(a&&!i?n=!1:l[1]&&(n===""||n===$s(s))&&(n=!0))}return n}const Of=new WeakMap;function $c(e,t,s=!1){const n=s?Of:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,l={},i=[];let u=!1;if(!Se(e)){const f=d=>{u=!0;const[p,h]=$c(d,t,!0);at(l,p),h&&i.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!u)return Re(e)&&n.set(e,on),on;if(ge(a))for(let f=0;f<a.length;f++){const d=It(a[f]);El(d)&&(l[d]=De)}else if(a)for(const f in a){const d=It(f);if(El(d)){const p=a[f],h=l[d]=ge(p)||Se(p)?{type:p}:at({},p),g=h.type;let y=!1,$=!0;if(ge(g))for(let C=0;C<g.length;++C){const _=g[C],w=Se(_)&&_.name;if(w==="Boolean"){y=!0;break}else w==="String"&&($=!1)}else y=Se(g)&&g.name==="Boolean";h[0]=y,h[1]=$,(y||Pe(h,"default"))&&i.push(d)}}const c=[l,i];return Re(e)&&n.set(e,c),c}function El(e){return e[0]!=="$"&&!Mn(e)}const jr=e=>e==="_"||e==="_ctx"||e==="$stable",Hr=e=>ge(e)?e.map(Vt):[Vt(e)],If=(e,t,s)=>{if(t._n)return t;const n=Kd((...o)=>Hr(t(...o)),s);return n._c=!1,n},kc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(jr(o))continue;const a=e[o];if(Se(a))t[o]=If(o,a,n);else if(a!=null){const l=Hr(a);t[o]=()=>l}}},xc=(e,t)=>{const s=Hr(t);e.slots.default=()=>s},Ac=(e,t,s)=>{for(const n in t)(s||!jr(n))&&(e[n]=t[n])},Pf=(e,t,s)=>{const n=e.slots=wc();if(e.vnode.shapeFlag&32){const o=t._;o?(Ac(n,t,s),s&&Di(n,"_",o,!0)):kc(t,n)}else t&&xc(e,t)},Df=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,l=De;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:Ac(o,t,s):(a=!t.$stable,kc(t,o)),l=t}else t&&(xc(e,t),l={default:1});if(a)for(const i in o)!jr(i)&&l[i]==null&&delete o[i]},mt=Uf;function Rf(e){return Lf(e)}function Lf(e,t){const s=ia();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:l,createText:i,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:p,setScopeId:h=Jt,insertStaticContent:g}=e,y=(S,x,B,V=null,J=null,G=null,ne=void 0,ee=null,T=!!x.dynamicChildren)=>{if(S===x)return;S&&!An(S,x)&&(V=K(S),E(S,J,G,!0),S=null),x.patchFlag===-2&&(T=!1,x.dynamicChildren=null);const{type:P,ref:W,shapeFlag:j}=x;switch(P){case pa:$(S,x,B,V);break;case is:C(S,x,B,V);break;case Do:S==null&&_(x,B,V,ne);break;case X:fe(S,x,B,V,J,G,ne,ee,T);break;default:j&1?D(S,x,B,V,J,G,ne,ee,T):j&6?be(S,x,B,V,J,G,ne,ee,T):(j&64||j&128)&&P.process(S,x,B,V,J,G,ne,ee,T,de)}W!=null&&J?Hn(W,S&&S.ref,G,x||S,!x):W==null&&S&&S.ref!=null&&Hn(S.ref,null,G,S,!0)},$=(S,x,B,V)=>{if(S==null)n(x.el=i(x.children),B,V);else{const J=x.el=S.el;x.children!==S.children&&c(J,x.children)}},C=(S,x,B,V)=>{S==null?n(x.el=u(x.children||""),B,V):x.el=S.el},_=(S,x,B,V)=>{[S.el,S.anchor]=g(S.children,x,B,V,S.el,S.anchor)},w=({el:S,anchor:x},B,V)=>{let J;for(;S&&S!==x;)J=p(S),n(S,B,V),S=J;n(x,B,V)},A=({el:S,anchor:x})=>{let B;for(;S&&S!==x;)B=p(S),o(S),S=B;o(x)},D=(S,x,B,V,J,G,ne,ee,T)=>{if(x.type==="svg"?ne="svg":x.type==="math"&&(ne="mathml"),S==null)U(x,B,V,J,G,ne,ee,T);else{const P=S.el&&S.el._isVueCE?S.el:null;try{P&&P._beginPatch(),z(S,x,J,G,ne,ee,T)}finally{P&&P._endPatch()}}},U=(S,x,B,V,J,G,ne,ee)=>{let T,P;const{props:W,shapeFlag:j,transition:q,dirs:L}=S;if(T=S.el=l(S.type,G,W&&W.is,W),j&8?f(T,S.children):j&16&&Y(S.children,T,null,V,J,Ta(S,G),ne,ee),L&&ks(S,null,V,"created"),R(T,S,S.scopeId,ne,V),W){for(const se in W)se!=="value"&&!Mn(se)&&a(T,se,null,W[se],G,V);"value"in W&&a(T,"value",null,W.value,G),(P=W.onVnodeBeforeMount)&&Ht(P,V,S)}L&&ks(S,null,V,"beforeMount");const H=Bf(J,q);H&&q.beforeEnter(T),n(T,x,B),((P=W&&W.onVnodeMounted)||H||L)&&mt(()=>{P&&Ht(P,V,S),H&&q.enter(T),L&&ks(S,null,V,"mounted")},J)},R=(S,x,B,V,J)=>{if(B&&h(S,B),V)for(let G=0;G<V.length;G++)h(S,V[G]);if(J){let G=J.subTree;if(x===G||Ec(G.type)&&(G.ssContent===x||G.ssFallback===x)){const ne=J.vnode;R(S,ne,ne.scopeId,ne.slotScopeIds,J.parent)}}},Y=(S,x,B,V,J,G,ne,ee,T=0)=>{for(let P=T;P<S.length;P++){const W=S[P]=ee?ms(S[P]):Vt(S[P]);y(null,W,x,B,V,J,G,ne,ee)}},z=(S,x,B,V,J,G,ne)=>{const ee=x.el=S.el;let{patchFlag:T,dynamicChildren:P,dirs:W}=x;T|=S.patchFlag&16;const j=S.props||De,q=x.props||De;let L;if(B&&xs(B,!1),(L=q.onVnodeBeforeUpdate)&&Ht(L,B,x,S),W&&ks(x,S,B,"beforeUpdate"),B&&xs(B,!0),(j.innerHTML&&q.innerHTML==null||j.textContent&&q.textContent==null)&&f(ee,""),P?ue(S.dynamicChildren,P,ee,B,V,Ta(x,J),G):ne||Q(S,x,ee,null,B,V,Ta(x,J),G,!1),T>0){if(T&16)me(ee,j,q,B,J);else if(T&2&&j.class!==q.class&&a(ee,"class",null,q.class,J),T&4&&a(ee,"style",j.style,q.style,J),T&8){const H=x.dynamicProps;for(let se=0;se<H.length;se++){const re=H[se],he=j[re],Ne=q[re];(Ne!==he||re==="value")&&a(ee,re,he,Ne,J,B)}}T&1&&S.children!==x.children&&f(ee,x.children)}else!ne&&P==null&&me(ee,j,q,B,J);((L=q.onVnodeUpdated)||W)&&mt(()=>{L&&Ht(L,B,x,S),W&&ks(x,S,B,"updated")},V)},ue=(S,x,B,V,J,G,ne)=>{for(let ee=0;ee<x.length;ee++){const T=S[ee],P=x[ee],W=T.el&&(T.type===X||!An(T,P)||T.shapeFlag&198)?d(T.el):B;y(T,P,W,null,V,J,G,ne,!0)}},me=(S,x,B,V,J)=>{if(x!==B){if(x!==De)for(const G in x)!Mn(G)&&!(G in B)&&a(S,G,x[G],null,J,V);for(const G in B){if(Mn(G))continue;const ne=B[G],ee=x[G];ne!==ee&&G!=="value"&&a(S,G,ee,ne,J,V)}"value"in B&&a(S,"value",x.value,B.value,J)}},fe=(S,x,B,V,J,G,ne,ee,T)=>{const P=x.el=S?S.el:i(""),W=x.anchor=S?S.anchor:i("");let{patchFlag:j,dynamicChildren:q,slotScopeIds:L}=x;L&&(ee=ee?ee.concat(L):L),S==null?(n(P,B,V),n(W,B,V),Y(x.children||[],B,W,J,G,ne,ee,T)):j>0&&j&64&&q&&S.dynamicChildren&&S.dynamicChildren.length===q.length?(ue(S.dynamicChildren,q,B,J,G,ne,ee),(x.key!=null||J&&x===J.subTree)&&Wr(S,x,!0)):Q(S,x,B,W,J,G,ne,ee,T)},be=(S,x,B,V,J,G,ne,ee,T)=>{x.slotScopeIds=ee,S==null?x.shapeFlag&512?J.ctx.activate(x,B,V,ne,T):$e(x,B,V,J,G,ne,T):pe(S,x,T)},$e=(S,x,B,V,J,G,ne)=>{const ee=S.component=Gf(S,V,J);if(pc(S)&&(ee.ctx.renderer=de),Jf(ee,!1,ne),ee.asyncDep){if(J&&J.registerDep(ee,ve,ne),!S.el){const T=ee.subTree=ye(is);C(null,T,x,B),S.placeholder=T.el}}else ve(ee,S,x,B,J,G,ne)},pe=(S,x,B)=>{const V=x.component=S.component;if(Af(S,x,B))if(V.asyncDep&&!V.asyncResolved){Z(V,x,B);return}else V.next=x,V.update();else x.el=S.el,V.vnode=x},ve=(S,x,B,V,J,G,ne)=>{const ee=()=>{if(S.isMounted){let{next:j,bu:q,u:L,parent:H,vnode:se}=S;{const _e=Tc(S);if(_e){j&&(j.el=se.el,Z(S,j,ne)),_e.asyncDep.then(()=>{S.isUnmounted||ee()});return}}let re=j,he;xs(S,!1),j?(j.el=se.el,Z(S,j,ne)):j=se,q&&Oo(q),(he=j.props&&j.props.onVnodeBeforeUpdate)&&Ht(he,H,j,se),xs(S,!0);const Ne=Tl(S),xe=S.subTree;S.subTree=Ne,y(xe,Ne,d(xe.el),K(xe),S,J,G),j.el=Ne.el,re===null&&Tf(S,Ne.el),L&&mt(L,J),(he=j.props&&j.props.onVnodeUpdated)&&mt(()=>Ht(he,H,j,se),J)}else{let j;const{el:q,props:L}=x,{bm:H,m:se,parent:re,root:he,type:Ne}=S,xe=ln(x);xs(S,!1),H&&Oo(H),!xe&&(j=L&&L.onVnodeBeforeMount)&&Ht(j,re,x),xs(S,!0);{he.ce&&he.ce._def.shadowRoot!==!1&&he.ce._injectChildStyle(Ne);const _e=S.subTree=Tl(S);y(null,_e,B,V,S,J,G),x.el=_e.el}if(se&&mt(se,J),!xe&&(j=L&&L.onVnodeMounted)){const _e=x;mt(()=>Ht(j,re,_e),J)}(x.shapeFlag&256||re&&ln(re.vnode)&&re.vnode.shapeFlag&256)&&S.a&&mt(S.a,J),S.isMounted=!0,x=B=V=null}};S.scope.on();const T=S.effect=new Mi(ee);S.scope.off();const P=S.update=T.run.bind(T),W=S.job=T.runIfDirty.bind(T);W.i=S,W.id=S.uid,T.scheduler=()=>Br(W),xs(S,!0),P()},Z=(S,x,B)=>{x.component=S;const V=S.vnode.props;S.vnode=x,S.next=null,Ef(S,x.props,V,B),Df(S,x.children,B),as(),yl(S),rs()},Q=(S,x,B,V,J,G,ne,ee,T=!1)=>{const P=S&&S.children,W=S?S.shapeFlag:0,j=x.children,{patchFlag:q,shapeFlag:L}=x;if(q>0){if(q&128){I(P,j,B,V,J,G,ne,ee,T);return}else if(q&256){te(P,j,B,V,J,G,ne,ee,T);return}}L&8?(W&16&&Te(P,J,G),j!==P&&f(B,j)):W&16?L&16?I(P,j,B,V,J,G,ne,ee,T):Te(P,J,G,!0):(W&8&&f(B,""),L&16&&Y(j,B,V,J,G,ne,ee,T))},te=(S,x,B,V,J,G,ne,ee,T)=>{S=S||on,x=x||on;const P=S.length,W=x.length,j=Math.min(P,W);let q;for(q=0;q<j;q++){const L=x[q]=T?ms(x[q]):Vt(x[q]);y(S[q],L,B,null,J,G,ne,ee,T)}P>W?Te(S,J,G,!0,!1,j):Y(x,B,V,J,G,ne,ee,T,j)},I=(S,x,B,V,J,G,ne,ee,T)=>{let P=0;const W=x.length;let j=S.length-1,q=W-1;for(;P<=j&&P<=q;){const L=S[P],H=x[P]=T?ms(x[P]):Vt(x[P]);if(An(L,H))y(L,H,B,null,J,G,ne,ee,T);else break;P++}for(;P<=j&&P<=q;){const L=S[j],H=x[q]=T?ms(x[q]):Vt(x[q]);if(An(L,H))y(L,H,B,null,J,G,ne,ee,T);else break;j--,q--}if(P>j){if(P<=q){const L=q+1,H=L<W?x[L].el:V;for(;P<=q;)y(null,x[P]=T?ms(x[P]):Vt(x[P]),B,H,J,G,ne,ee,T),P++}}else if(P>q)for(;P<=j;)E(S[P],J,G,!0),P++;else{const L=P,H=P,se=new Map;for(P=H;P<=q;P++){const Le=x[P]=T?ms(x[P]):Vt(x[P]);Le.key!=null&&se.set(Le.key,P)}let re,he=0;const Ne=q-H+1;let xe=!1,_e=0;const lt=new Array(Ne);for(P=0;P<Ne;P++)lt[P]=0;for(P=L;P<=j;P++){const Le=S[P];if(he>=Ne){E(Le,J,G,!0);continue}let st;if(Le.key!=null)st=se.get(Le.key);else for(re=H;re<=q;re++)if(lt[re-H]===0&&An(Le,x[re])){st=re;break}st===void 0?E(Le,J,G,!0):(lt[st-H]=P+1,st>=_e?_e=st:xe=!0,y(Le,x[st],B,null,J,G,ne,ee,T),he++)}const At=xe?Mf(lt):on;for(re=At.length-1,P=Ne-1;P>=0;P--){const Le=H+P,st=x[Le],jt=x[Le+1],Fe=Le+1<W?jt.el||Nc(jt):V;lt[P]===0?y(null,st,B,Fe,J,G,ne,ee,T):xe&&(re<0||P!==At[re]?k(st,B,Fe,2):re--)}}},k=(S,x,B,V,J=null)=>{const{el:G,type:ne,transition:ee,children:T,shapeFlag:P}=S;if(P&6){k(S.component.subTree,x,B,V);return}if(P&128){S.suspense.move(x,B,V);return}if(P&64){ne.move(S,x,B,de);return}if(ne===X){n(G,x,B);for(let j=0;j<T.length;j++)k(T[j],x,B,V);n(S.anchor,x,B);return}if(ne===Do){w(S,x,B);return}if(V!==2&&P&1&&ee)if(V===0)ee.beforeEnter(G),n(G,x,B),mt(()=>ee.enter(G),J);else{const{leave:j,delayLeave:q,afterLeave:L}=ee,H=()=>{S.ctx.isUnmounted?o(G):n(G,x,B)},se=()=>{G._isLeaving&&G[Xd](!0),j(G,()=>{H(),L&&L()})};q?q(G,H,se):se()}else n(G,x,B)},E=(S,x,B,V=!1,J=!1)=>{const{type:G,props:ne,ref:ee,children:T,dynamicChildren:P,shapeFlag:W,patchFlag:j,dirs:q,cacheIndex:L}=S;if(j===-2&&(J=!1),ee!=null&&(as(),Hn(ee,null,B,S,!0),rs()),L!=null&&(x.renderCache[L]=void 0),W&256){x.ctx.deactivate(S);return}const H=W&1&&q,se=!ln(S);let re;if(se&&(re=ne&&ne.onVnodeBeforeUnmount)&&Ht(re,x,S),W&6)Ee(S.component,B,V);else{if(W&128){S.suspense.unmount(B,V);return}H&&ks(S,null,x,"beforeUnmount"),W&64?S.type.remove(S,x,B,de,V):P&&!P.hasOnce&&(G!==X||j>0&&j&64)?Te(P,x,B,!1,!0):(G===X&&j&384||!J&&W&16)&&Te(T,x,B),V&&ce(S)}(se&&(re=ne&&ne.onVnodeUnmounted)||H)&&mt(()=>{re&&Ht(re,x,S),H&&ks(S,null,x,"unmounted")},B)},ce=S=>{const{type:x,el:B,anchor:V,transition:J}=S;if(x===X){Ce(B,V);return}if(x===Do){A(S);return}const G=()=>{o(B),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(S.shapeFlag&1&&J&&!J.persisted){const{leave:ne,delayLeave:ee}=J,T=()=>ne(B,G);ee?ee(S.el,G,T):T()}else G()},Ce=(S,x)=>{let B;for(;S!==x;)B=p(S),o(S),S=B;o(x)},Ee=(S,x,B)=>{const{bum:V,scope:J,job:G,subTree:ne,um:ee,m:T,a:P}=S;Ol(T),Ol(P),V&&Oo(V),J.stop(),G&&(G.flags|=8,E(ne,S,x,B)),ee&&mt(ee,x),mt(()=>{S.isUnmounted=!0},x)},Te=(S,x,B,V=!1,J=!1,G=0)=>{for(let ne=G;ne<S.length;ne++)E(S[ne],x,B,V,J)},K=S=>{if(S.shapeFlag&6)return K(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const x=p(S.anchor||S.el),B=x&&x[ic];return B?p(B):x};let ae=!1;const oe=(S,x,B)=>{let V;S==null?x._vnode&&(E(x._vnode,null,null,!0),V=x._vnode.component):y(x._vnode||null,S,x,null,null,null,B),x._vnode=S,ae||(ae=!0,yl(V),nc(),ae=!1)},de={p:y,um:E,m:k,r:ce,mt:$e,mc:Y,pc:Q,pbc:ue,n:K,o:e};return{render:oe,hydrate:void 0,createApp:wf(oe)}}function Ta({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function xs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Bf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Wr(e,t,s=!1){const n=e.children,o=t.children;if(ge(n)&&ge(o))for(let a=0;a<n.length;a++){const l=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=ms(o[a]),i.el=l.el),!s&&i.patchFlag!==-2&&Wr(l,i)),i.type===pa&&(i.patchFlag!==-1?i.el=l.el:i.__elIndex=a+(e.type===X?1:0)),i.type===is&&!i.el&&(i.el=l.el)}}function Mf(e){const t=e.slice(),s=[0];let n,o,a,l,i;const u=e.length;for(n=0;n<u;n++){const c=e[n];if(c!==0){if(o=s[s.length-1],e[o]<c){t[n]=o,s.push(n);continue}for(a=0,l=s.length-1;a<l;)i=a+l>>1,e[s[i]]<c?a=i+1:l=i;c<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function Tc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Tc(t)}function Ol(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Nc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Nc(t.subTree):null}const Ec=e=>e.__isSuspense;function Uf(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):Wd(e)}const X=Symbol.for("v-fgt"),pa=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),Do=Symbol.for("v-stc"),Kn=[];let xt=null;function v(e=!1){Kn.push(xt=e?null:[])}function Ff(){Kn.pop(),xt=Kn[Kn.length-1]||null}let so=1;function Ko(e,t=!1){so+=e,e<0&&xt&&t&&(xt.hasOnce=!0)}function Oc(e){return e.dynamicChildren=so>0?xt||on:null,Ff(),so>0&&xt&&xt.push(e),e}function m(e,t,s,n,o,a){return Oc(r(e,t,s,n,o,a,!0))}function He(e,t,s,n,o){return Oc(ye(e,t,s,n,o,!0))}function no(e){return e?e.__v_isVNode===!0:!1}function An(e,t){return e.type===t.type&&e.key===t.key}const Ic=({key:e})=>e??null,Ro=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ye(e)||ft(e)||Se(e)?{i:ot,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===X?0:1,l=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ic(t),ref:t&&Ro(t),scopeId:ac,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ot};return i?(Kr(u,s),a&128&&e.normalize(u)):s&&(u.shapeFlag|=Ye(s)?8:16),so>0&&!l&&xt&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&xt.push(u),u}const ye=jf;function jf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===df)&&(e=is),no(e)){const i=fn(e,t,!0);return s&&Kr(i,s),so>0&&!a&&xt&&(i.shapeFlag&6?xt[xt.indexOf(e)]=i:xt.push(i)),i.patchFlag=-2,i}if(Zf(e)&&(e=e.__vccOpts),t){t=Hf(t);let{class:i,style:u}=t;i&&!Ye(i)&&(t.class=ie(i)),Re(u)&&(Lr(u)&&!ge(u)&&(u=at({},u)),t.style=et(u))}const l=Ye(e)?1:Ec(e)?128:Jd(e)?64:Re(e)?4:Se(e)?2:0;return r(e,t,s,n,o,l,a,!0)}function Hf(e){return e?Lr(e)||Sc(e)?at({},e):e:null}function fn(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:l,children:i,transition:u}=e,c=t?Wf(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ic(c),ref:t&&t.ref?s&&a?ge(a)?a.concat(Ro(t)):[a,Ro(t)]:Ro(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==X?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fn(e.ssContent),ssFallback:e.ssFallback&&fn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Mr(f,u.clone(f)),f}function Ae(e=" ",t=0){return ye(pa,null,e,t)}function oo(e,t){const s=ye(Do,null,e);return s.staticCount=t,s}function F(e="",t=!1){return t?(v(),He(is,null,e)):ye(is,null,e)}function Vt(e){return e==null||typeof e=="boolean"?ye(is):ge(e)?ye(X,null,e.slice()):no(e)?ms(e):ye(pa,null,String(e))}function ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:fn(e)}function Kr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ge(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Kr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Sc(t)?t._ctx=ot:o===3&&ot&&(ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:ot},s=32):(t=String(t),n&64?(s=16,t=[Ae(t)]):s=8);e.children=t,e.shapeFlag|=s}function Wf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(o==="style")t.style=et([t.style,n.style]);else if(oa(o)){const a=t[o],l=n[o];l&&a!==l&&!(ge(a)&&a.includes(l))&&(t[o]=a?[].concat(a,l):l)}else o!==""&&(t[o]=n[o])}return t}function Ht(e,t,s,n=null){Yt(e,t,7,[s,n])}const Kf=yc();let Vf=0;function Gf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Kf,a={uid:Vf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$c(n,o),emitsOptions:bc(n,o),emit:null,emitted:null,propsDefaults:De,inheritAttrs:n.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Cf.bind(null,a),e.ce&&e.ce(a),a}let dt=null;const zf=()=>dt||ot;let Vo,tr;{const e=ia(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};Vo=t("__VUE_INSTANCE_SETTERS__",s=>dt=s),tr=t("__VUE_SSR_SETTERS__",s=>ao=s)}const mo=e=>{const t=dt;return Vo(e),e.scope.on(),()=>{e.scope.off(),Vo(t)}},Il=()=>{dt&&dt.scope.off(),Vo(null)};function Pc(e){return e.vnode.shapeFlag&4}let ao=!1;function Jf(e,t=!1,s=!1){t&&tr(t);const{props:n,children:o}=e.vnode,a=Pc(e);Nf(e,n,a,t),Pf(e,o,s||t);const l=a?Yf(e,t):void 0;return t&&tr(!1),l}function Yf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,vf);const{setup:n}=s;if(n){as();const o=e.setupContext=n.length>1?Xf(e):null,a=mo(e),l=vo(n,e,0,[e.props,o]),i=Oi(l);if(rs(),a(),(i||e.sp)&&!ln(e)&&fc(e),i){if(l.then(Il,Il),t)return l.then(u=>{Pl(e,u)}).catch(u=>{ua(u,e,0)});e.asyncDep=l}else Pl(e,l)}else Dc(e)}function Pl(e,t,s){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=ec(t)),Dc(e)}function Dc(e,t,s){const n=e.type;e.render||(e.render=n.render||Jt);{const o=mo(e);as();try{mf(e)}finally{rs(),o()}}}const qf={get(e,t){return ut(e,"get",""),e[t]}};function Xf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,qf),slots:e.slots,emit:e.emit,expose:t}}function va(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ec(Pd(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Wn)return Wn[s](e)},has(t,s){return s in t||s in Wn}})):e.proxy}function Qf(e,t=!0){return Se(e)?e.displayName||e.name:e.name||t&&e.__name}function Zf(e){return Se(e)&&"__vccOpts"in e}const N=(e,t)=>Md(e,t,ao);function Rc(e,t,s){try{Ko(-1);const n=arguments.length;return n===2?Re(t)&&!ge(t)?no(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&no(s)&&(s=[s]),ye(e,t,s))}finally{Ko(1)}}const ep="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sr;const Dl=typeof window<"u"&&window.trustedTypes;if(Dl)try{sr=Dl.createPolicy("vue",{createHTML:e=>e})}catch{}const Lc=sr?e=>sr.createHTML(e):e=>e,tp="http://www.w3.org/2000/svg",sp="http://www.w3.org/1998/Math/MathML",Zt=typeof document<"u"?document:null,Rl=Zt&&Zt.createElement("template"),np={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Zt.createElementNS(tp,e):t==="mathml"?Zt.createElementNS(sp,e):s?Zt.createElement(e,{is:s}):Zt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Zt.createTextNode(e),createComment:e=>Zt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const l=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{Rl.innerHTML=Lc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Rl.content;if(n==="svg"||n==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},op=Symbol("_vtc");function ap(e,t,s){const n=e[op];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Go=Symbol("_vod"),Bc=Symbol("_vsh"),rp={name:"show",beforeMount(e,{value:t},{transition:s}){e[Go]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Tn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),Tn(e,!0),n.enter(e)):n.leave(e,()=>{Tn(e,!1)}):Tn(e,t))},beforeUnmount(e,{value:t}){Tn(e,t)}};function Tn(e,t){e.style.display=t?e[Go]:"none",e[Bc]=!t}const lp=Symbol(""),ip=/(?:^|;)\s*display\s*:/;function cp(e,t,s){const n=e.style,o=Ye(s);let a=!1;if(s&&!o){if(t)if(Ye(t))for(const l of t.split(";")){const i=l.slice(0,l.indexOf(":")).trim();s[i]==null&&Lo(n,i,"")}else for(const l in t)s[l]==null&&Lo(n,l,"");for(const l in s)l==="display"&&(a=!0),Lo(n,l,s[l])}else if(o){if(t!==s){const l=n[lp];l&&(s+=";"+l),n.cssText=s,a=ip.test(s)}}else t&&e.removeAttribute("style");Go in e&&(e[Go]=a?n.display:"",e[Bc]&&(n.display="none"))}const Ll=/\s*!important$/;function Lo(e,t,s){if(ge(s))s.forEach(n=>Lo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=up(e,t);Ll.test(s)?e.setProperty($s(n),s.replace(Ll,""),"important"):e[n]=s}}const Bl=["Webkit","Moz","ms"],Na={};function up(e,t){const s=Na[t];if(s)return s;let n=It(t);if(n!=="filter"&&n in e)return Na[t]=n;n=ra(n);for(let o=0;o<Bl.length;o++){const a=Bl[o]+n;if(a in e)return Na[t]=a}return t}const Ml="http://www.w3.org/1999/xlink";function Ul(e,t,s,n,o,a=dd(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Ml,t.slice(6,t.length)):e.setAttributeNS(Ml,t,s):s==null||a&&!Ri(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Mt(s)?String(s):s)}function Fl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Lc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(i!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Ri(s):s==null&&i==="string"?(s="",l=!0):i==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function ss(e,t,s,n){e.addEventListener(t,s,n)}function dp(e,t,s,n){e.removeEventListener(t,s,n)}const jl=Symbol("_vei");function fp(e,t,s,n,o=null){const a=e[jl]||(e[jl]={}),l=a[t];if(n&&l)l.value=n;else{const[i,u]=pp(t);if(n){const c=a[t]=hp(n,o);ss(e,i,c,u)}else l&&(dp(e,i,l,u),a[t]=void 0)}}const Hl=/(?:Once|Passive|Capture)$/;function pp(e){let t;if(Hl.test(e)){t={};let n;for(;n=e.match(Hl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$s(e.slice(2)),t]}let Ea=0;const vp=Promise.resolve(),mp=()=>Ea||(vp.then(()=>Ea=0),Ea=Date.now());function hp(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Yt(gp(n,s.value),t,5,[n])};return s.value=e,s.attached=mp(),s}function gp(e,t){if(ge(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Wl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,yp=(e,t,s,n,o,a)=>{const l=o==="svg";t==="class"?ap(e,n,l):t==="style"?cp(e,s,n):oa(t)?xr(t)||fp(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bp(e,t,n,l))?(Fl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ul(e,t,n,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ye(n))?Fl(e,It(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ul(e,t,n,l))};function bp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wl(t)&&Se(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Wl(t)&&Ye(s)?!1:t in e}const Ss=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?s=>Oo(t,s):t};function _p(e){e.target.composing=!0}function Kl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function Vl(e,t,s){return t&&(e=e.trim()),s&&(e=la(e)),e}const wt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ot]=Ss(o);const a=n||o.props&&o.props.type==="number";ss(e,t?"change":"input",l=>{l.target.composing||e[Ot](Vl(e.value,s,a))}),(s||a)&&ss(e,"change",()=>{e.value=Vl(e.value,s,a)}),t||(ss(e,"compositionstart",_p),ss(e,"compositionend",Kl),ss(e,"change",Kl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},l){if(e[Ot]=Ss(l),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?la(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===u)||(e.value=u))}},Vr={deep:!0,created(e,t,s){e[Ot]=Ss(s),ss(e,"change",()=>{const n=e._modelValue,o=pn(e),a=e.checked,l=e[Ot];if(ge(n)){const i=Nr(n,o),u=i!==-1;if(a&&!u)l(n.concat(o));else if(!a&&u){const c=[...n];c.splice(i,1),l(c)}}else if(wn(n)){const i=new Set(n);a?i.add(o):i.delete(o),l(i)}else l(Mc(e,a))})},mounted:Gl,beforeUpdate(e,t,s){e[Ot]=Ss(s),Gl(e,t,s)}};function Gl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ge(t))o=Nr(t,n.props.value)>-1;else if(wn(t))o=t.has(n.props.value);else{if(t===s)return;o=Fs(t,Mc(e,!0))}e.checked!==o&&(e.checked=o)}const zl={created(e,{value:t},s){e.checked=Fs(t,s.props.value),e[Ot]=Ss(s),ss(e,"change",()=>{e[Ot](pn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ot]=Ss(n),t!==s&&(e.checked=Fs(t,n.props.value))}},Vn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=wn(t);ss(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?la(pn(l)):pn(l));e[Ot](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,eo(()=>{e._assigning=!1})}),e[Ot]=Ss(n)},mounted(e,{value:t}){Jl(e,t)},beforeUpdate(e,t,s){e[Ot]=Ss(s)},updated(e,{value:t}){e._assigning||Jl(e,t)}};function Jl(e,t){const s=e.multiple,n=ge(t);if(!(s&&!n&&!wn(t))){for(let o=0,a=e.options.length;o<a;o++){const l=e.options[o],i=pn(l);if(s)if(n){const u=typeof i;u==="string"||u==="number"?l.selected=t.some(c=>String(c)===String(i)):l.selected=Nr(t,i)>-1}else l.selected=t.has(i);else if(Fs(pn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function pn(e){return"_value"in e?e._value:e.value}function Mc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const wp=["ctrl","shift","alt","meta"],Sp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wp.some(s=>e[`${s}Key`]&&!t.includes(s))},St=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let l=0;l<t.length;l++){const i=Sp[t[l]];if(i&&i(o,t))return}return e(o,...a)})},Cp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zo=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=$s(o.key);if(t.some(l=>l===a||Cp[l]===a))return e(o)})},$p=at({patchProp:yp},np);let Yl;function kp(){return Yl||(Yl=Rf($p))}const xp=(...e)=>{const t=kp().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Tp(n);if(!o)return;const a=t._component;!Se(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,Ap(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function Ap(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tp(e){return Ye(e)?document.querySelector(e):e}const we=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Np={};function Ep(e,t){const s=uf("router-view");return v(),He(s)}const Op=we(Np,[["render",Ep]]),Ip="modulepreload",Pp=function(e){return"/"+e},ql={},Dp=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),i=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(s.map(u=>{if(u=Pp(u),u in ql)return;ql[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ip,c||(d.as="script"),d.crossOrigin="",d.href=u,i&&d.setAttribute("nonce",i),document.head.appendChild(d),c)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return o.then(l=>{for(const i of l||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ys=typeof document<"u";function Uc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Uc(e.default)}const Oe=Object.assign;function Oa(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ft(o)?o.map(e):e(o)}return s}const Gn=()=>{},Ft=Array.isArray;function Xl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Fc=/#/g,Lp=/&/g,Bp=/\//g,Mp=/=/g,Up=/\?/g,jc=/\+/g,Fp=/%5B/g,jp=/%5D/g,Hc=/%5E/g,Hp=/%60/g,Wc=/%7B/g,Wp=/%7C/g,Kc=/%7D/g,Kp=/%20/g;function Gr(e){return e==null?"":encodeURI(""+e).replace(Wp,"|").replace(Fp,"[").replace(jp,"]")}function Vp(e){return Gr(e).replace(Wc,"{").replace(Kc,"}").replace(Hc,"^")}function nr(e){return Gr(e).replace(jc,"%2B").replace(Kp,"+").replace(Fc,"%23").replace(Lp,"%26").replace(Hp,"`").replace(Wc,"{").replace(Kc,"}").replace(Hc,"^")}function Gp(e){return nr(e).replace(Mp,"%3D")}function zp(e){return Gr(e).replace(Fc,"%23").replace(Up,"%3F")}function Jp(e){return zp(e).replace(Bp,"%2F")}function ro(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Yp=/\/$/,qp=e=>e.replace(Yp,"");function Ia(e,t,s="/"){let n,o={},a="",l="";const i=t.indexOf("#");let u=t.indexOf("?");return u=i>=0&&u>i?-1:u,u>=0&&(n=t.slice(0,u),a=t.slice(u,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),l=t.slice(i,t.length)),n=ev(n??t,s),{fullPath:n+a+l,path:n,query:o,hash:ro(l)}}function Xp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Ql(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Qp(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&vn(t.matched[n],s.matched[o])&&Vc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function vn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Vc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Zp(e[s],t[s]))return!1;return!0}function Zp(e,t){return Ft(e)?Zl(e,t):Ft(t)?Zl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Zl(e,t){return Ft(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function ev(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,l,i;for(l=0;l<n.length;l++)if(i=n[l],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(l).join("/")}const fs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let or=function(e){return e.pop="pop",e.push="push",e}({}),Pa=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function tv(e){if(!e)if(Ys){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qp(e)}const sv=/^[^#]+#/;function nv(e,t){return e.replace(sv,"#")+t}function ov(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const ma=()=>({left:window.scrollX,top:window.scrollY});function av(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=ov(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ei(e,t){return(history.state?history.state.position-t:-1)+e}const ar=new Map;function rv(e,t){ar.set(e,t)}function lv(e){const t=ar.get(e);return ar.delete(e),t}function iv(e){return typeof e=="string"||e&&typeof e=="object"}function Gc(e){return typeof e=="string"||typeof e=="symbol"}let Ge=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const zc=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function mn(e,t){return Oe(new Error,{type:e,[zc]:!0},t)}function Xt(e,t){return e instanceof Error&&zc in e&&(t==null||!!(e.type&t))}const cv=["params","query","hash"];function uv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of cv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function dv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(jc," "),a=o.indexOf("="),l=ro(a<0?o:o.slice(0,a)),i=a<0?null:ro(o.slice(a+1));if(l in t){let u=t[l];Ft(u)||(u=t[l]=[u]),u.push(i)}else t[l]=i}return t}function ti(e){let t="";for(let s in e){const n=e[s];if(s=Gp(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ft(n)?n.map(o=>o&&nr(o)):[n&&nr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function fv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ft(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const pv=Symbol(""),si=Symbol(""),ha=Symbol(""),zr=Symbol(""),rr=Symbol("");function Nn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function hs(e,t,s,n,o,a=l=>l()){const l=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,u)=>{const c=p=>{p===!1?u(mn(Ge.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?u(p):iv(p)?u(mn(Ge.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(l&&n.enterCallbacks[o]===l&&typeof p=="function"&&l.push(p),i())},f=a(()=>e.call(n&&n.instances[o],t,s,c));let d=Promise.resolve(f);e.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function Da(e,t,s,n,o=a=>a()){const a=[];for(const l of e)for(const i in l.components){let u=l.components[i];if(!(t!=="beforeRouteEnter"&&!l.instances[i]))if(Uc(u)){const c=(u.__vccOpts||u)[t];c&&a.push(hs(c,s,n,l,i,o))}else{let c=u();a.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${l.path}"`);const d=Rp(f)?f.default:f;l.mods[i]=f,l.components[i]=d;const p=(d.__vccOpts||d)[t];return p&&hs(p,s,n,l,i,o)()}))}}return a}function vv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let l=0;l<a;l++){const i=t.matched[l];i&&(e.matched.find(c=>vn(c,i))?n.push(i):s.push(i));const u=e.matched[l];u&&(t.matched.find(c=>vn(c,u))||o.push(u))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mv=()=>location.protocol+"//"+location.host;function Jc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let l=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(l);return i[0]!=="/"&&(i="/"+i),Ql(i,"")}return Ql(s,e)+n+o}function hv(e,t,s,n){let o=[],a=[],l=null;const i=({state:p})=>{const h=Jc(e,location),g=s.value,y=t.value;let $=0;if(p){if(s.value=h,t.value=p,l&&l===g){l=null;return}$=y?p.position-y.position:0}else n(h);o.forEach(C=>{C(s.value,g,{delta:$,type:or.pop,direction:$?$>0?Pa.forward:Pa.back:Pa.unknown})})};function u(){l=s.value}function c(p){o.push(p);const h=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(h),h}function f(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Oe({},p.state,{scroll:ma()}),"")}}function d(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:u,listen:c,destroy:d}}function ni(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?ma():null}}function gv(e){const{history:t,location:s}=window,n={value:Jc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(u,c,f){const d=e.indexOf("#"),p=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+u:mv()+e+u;try{t[f?"replaceState":"pushState"](c,"",p),o.value=c}catch(h){console.error(h),s[f?"replace":"assign"](p)}}function l(u,c){a(u,Oe({},t.state,ni(o.value.back,u,o.value.forward,!0),c,{position:o.value.position}),!0),n.value=u}function i(u,c){const f=Oe({},o.value,t.state,{forward:u,scroll:ma()});a(f.current,f,!0),a(u,Oe({},ni(n.value,u,null),{position:f.position+1},c),!1),n.value=u}return{location:n,state:o,push:i,replace:l}}function yv(e){e=tv(e);const t=gv(e),s=hv(e,t.state,t.location,t.replace);function n(a,l=!0){l||s.pauseListeners(),history.go(a)}const o=Oe({location:"",base:e,go:n,createHref:nv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function bv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),yv(e)}let Ls=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Qe=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Qe||{});const _v={type:Ls.Static,value:""},wv=/[a-zA-Z0-9_]/;function Sv(e){if(!e)return[[]];if(e==="/")return[[_v]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${c}": ${h}`)}let s=Qe.Static,n=s;const o=[];let a;function l(){a&&o.push(a),a=[]}let i=0,u,c="",f="";function d(){c&&(s===Qe.Static?a.push({type:Ls.Static,value:c}):s===Qe.Param||s===Qe.ParamRegExp||s===Qe.ParamRegExpEnd?(a.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ls.Param,value:c,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&s!==Qe.ParamRegExp){n=s,s=Qe.EscapeNext;continue}switch(s){case Qe.Static:u==="/"?(c&&d(),l()):u===":"?(d(),s=Qe.Param):p();break;case Qe.EscapeNext:p(),s=n;break;case Qe.Param:u==="("?s=Qe.ParamRegExp:wv.test(u)?p():(d(),s=Qe.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case Qe.ParamRegExp:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:s=Qe.ParamRegExpEnd:f+=u;break;case Qe.ParamRegExpEnd:d(),s=Qe.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===Qe.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),l(),o}const oi="[^/]+?",Cv={sensitive:!1,strict:!1,start:!0,end:!0};var ht=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ht||{});const $v=/[.+*?^${}()[\]/\\]/g;function kv(e,t){const s=Oe({},Cv,t),n=[];let o=s.start?"^":"";const a=[];for(const c of e){const f=c.length?[]:[ht.Root];s.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const p=c[d];let h=ht.Segment+(s.sensitive?ht.BonusCaseSensitive:0);if(p.type===Ls.Static)d||(o+="/"),o+=p.value.replace($v,"\\$&"),h+=ht.Static;else if(p.type===Ls.Param){const{value:g,repeatable:y,optional:$,regexp:C}=p;a.push({name:g,repeatable:y,optional:$});const _=C||oi;if(_!==oi){h+=ht.BonusCustomRegExp;try{`${_}`}catch(A){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+A.message)}}let w=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=$&&c.length<2?`(?:/${w})`:"/"+w),$&&(w+="?"),o+=w,h+=ht.Dynamic,$&&(h+=ht.BonusOptional),y&&(h+=ht.BonusRepeatable),_===".*"&&(h+=ht.BonusWildcard)}f.push(h)}n.push(f)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=ht.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,s.sensitive?"":"i");function i(c){const f=c.match(l),d={};if(!f)return null;for(let p=1;p<f.length;p++){const h=f[p]||"",g=a[p-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function u(c){let f="",d=!1;for(const p of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const h of p)if(h.type===Ls.Static)f+=h.value;else if(h.type===Ls.Param){const{value:g,repeatable:y,optional:$}=h,C=g in c?c[g]:"";if(Ft(C)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Ft(C)?C.join("/"):C;if(!_)if($)p.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=_}}return f||"/"}return{re:l,score:n,keys:a,parse:i,stringify:u}}function xv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===ht.Static+ht.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ht.Static+ht.Segment?1:-1:0}function Yc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=xv(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(ai(n))return 1;if(ai(o))return-1}return o.length-n.length}function ai(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Av={strict:!1,end:!0,sensitive:!1};function Tv(e,t,s){const n=kv(Sv(e.path),s),o=Oe(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Nv(e,t){const s=[],n=new Map;t=Xl(Av,t);function o(d){return n.get(d)}function a(d,p,h){const g=!h,y=li(d);y.aliasOf=h&&h.record;const $=Xl(t,d),C=[y];if("alias"in d){const A=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of A)C.push(li(Oe({},y,{components:h?h.record.components:y.components,path:D,aliasOf:h?h.record:y})))}let _,w;for(const A of C){const{path:D}=A;if(p&&D[0]!=="/"){const U=p.record.path,R=U[U.length-1]==="/"?"":"/";A.path=p.record.path+(D&&R+D)}if(_=Tv(A,p,$),h?h.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),g&&d.name&&!ii(_)&&l(d.name)),qc(_)&&u(_),y.children){const U=y.children;for(let R=0;R<U.length;R++)a(U[R],_,h&&h.children[R])}h=h||_}return w?()=>{l(w)}:Gn}function l(d){if(Gc(d)){const p=n.get(d);p&&(n.delete(d),s.splice(s.indexOf(p),1),p.children.forEach(l),p.alias.forEach(l))}else{const p=s.indexOf(d);p>-1&&(s.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function i(){return s}function u(d){const p=Iv(d,s);s.splice(p,0,d),d.record.name&&!ii(d)&&n.set(d.record.name,d)}function c(d,p){let h,g={},y,$;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw mn(Ge.MATCHER_NOT_FOUND,{location:d});$=h.record.name,g=Oe(ri(p.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&ri(d.params,h.keys.map(w=>w.name))),y=h.stringify(g)}else if(d.path!=null)y=d.path,h=s.find(w=>w.re.test(y)),h&&(g=h.parse(y),$=h.record.name);else{if(h=p.name?n.get(p.name):s.find(w=>w.re.test(p.path)),!h)throw mn(Ge.MATCHER_NOT_FOUND,{location:d,currentLocation:p});$=h.record.name,g=Oe({},p.params,d.params),y=h.stringify(g)}const C=[];let _=h;for(;_;)C.unshift(_.record),_=_.parent;return{name:$,path:y,params:g,matched:C,meta:Ov(C)}}e.forEach(d=>a(d));function f(){s.length=0,n.clear()}return{addRoute:a,resolve:c,removeRoute:l,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function ri(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function li(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ev(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ev(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function ii(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ov(e){return e.reduce((t,s)=>Oe(t,s.meta),{})}function Iv(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Yc(e,t[a])<0?n=a:s=a+1}const o=Pv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Pv(e){let t=e;for(;t=t.parent;)if(qc(t)&&Yc(e,t)===0)return t}function qc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ci(e){const t=Bt(ha),s=Bt(zr),n=N(()=>{const u=M(e.to);return t.resolve(u)}),o=N(()=>{const{matched:u}=n.value,{length:c}=u,f=u[c-1],d=s.matched;if(!f||!d.length)return-1;const p=d.findIndex(vn.bind(null,f));if(p>-1)return p;const h=ui(u[c-2]);return c>1&&ui(f)===h&&d[d.length-1].path!==h?d.findIndex(vn.bind(null,u[c-2])):p}),a=N(()=>o.value>-1&&Mv(s.params,n.value.params)),l=N(()=>o.value>-1&&o.value===s.matched.length-1&&Vc(s.params,n.value.params));function i(u={}){if(Bv(u)){const c=t[M(e.replace)?"replace":"push"](M(e.to)).catch(Gn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:N(()=>n.value.href),isActive:a,isExactActive:l,navigate:i}}function Dv(e){return e.length===1?e[0]:e}const Rv=dc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ci,setup(e,{slots:t}){const s=Lt(ci(e)),{options:n}=Bt(ha),o=N(()=>({[di(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[di(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&Dv(t.default(s));return e.custom?a:Rc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),Lv=Rv;function Bv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Mv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ft(o)||o.length!==n.length||n.some((a,l)=>a.valueOf()!==o[l].valueOf()))return!1}return!0}function ui(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const di=(e,t,s)=>e??t??s,Uv=dc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Bt(rr),o=N(()=>e.route||n.value),a=Bt(si,0),l=N(()=>{let c=M(a);const{matched:f}=o.value;let d;for(;(d=f[c])&&!d.components;)c++;return c}),i=N(()=>o.value.matched[l.value]);Io(si,N(()=>l.value+1)),Io(pv,i),Io(rr,o);const u=O();return nt(()=>[u.value,i.value,e.name],([c,f,d],[p,h,g])=>{f&&(f.instances[d]=c,h&&h!==f&&c&&c===p&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),c&&f&&(!h||!vn(f,h)||!p)&&(f.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=o.value,f=e.name,d=i.value,p=d&&d.components[f];if(!p)return fi(s.default,{Component:p,route:c});const h=d.props[f],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,$=Rc(p,Oe({},g,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[f]=null)},ref:u}));return fi(s.default,{Component:$,route:c})||$}}});function fi(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Fv=Uv;function jv(e){const t=Nv(e.routes,e),s=e.parseQuery||dv,n=e.stringifyQuery||ti,o=e.history,a=Nn(),l=Nn(),i=Nn(),u=Dd(fs);let c=fs;Ys&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Oa.bind(null,K=>""+K),d=Oa.bind(null,Jp),p=Oa.bind(null,ro);function h(K,ae){let oe,de;return Gc(K)?(oe=t.getRecordMatcher(K),de=ae):de=K,t.addRoute(de,oe)}function g(K){const ae=t.getRecordMatcher(K);ae&&t.removeRoute(ae)}function y(){return t.getRoutes().map(K=>K.record)}function $(K){return!!t.getRecordMatcher(K)}function C(K,ae){if(ae=Oe({},ae||u.value),typeof K=="string"){const B=Ia(s,K,ae.path),V=t.resolve({path:B.path},ae),J=o.createHref(B.fullPath);return Oe(B,V,{params:p(V.params),hash:ro(B.hash),redirectedFrom:void 0,href:J})}let oe;if(K.path!=null)oe=Oe({},K,{path:Ia(s,K.path,ae.path).path});else{const B=Oe({},K.params);for(const V in B)B[V]==null&&delete B[V];oe=Oe({},K,{params:d(B)}),ae.params=d(ae.params)}const de=t.resolve(oe,ae),ke=K.hash||"";de.params=f(p(de.params));const S=Xp(n,Oe({},K,{hash:Vp(ke),path:de.path})),x=o.createHref(S);return Oe({fullPath:S,hash:ke,query:n===ti?fv(K.query):K.query||{}},de,{redirectedFrom:void 0,href:x})}function _(K){return typeof K=="string"?Ia(s,K,u.value.path):Oe({},K)}function w(K,ae){if(c!==K)return mn(Ge.NAVIGATION_CANCELLED,{from:ae,to:K})}function A(K){return R(K)}function D(K){return A(Oe(_(K),{replace:!0}))}function U(K,ae){const oe=K.matched[K.matched.length-1];if(oe&&oe.redirect){const{redirect:de}=oe;let ke=typeof de=="function"?de(K,ae):de;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=_(ke):{path:ke},ke.params={}),Oe({query:K.query,hash:K.hash,params:ke.path!=null?{}:K.params},ke)}}function R(K,ae){const oe=c=C(K),de=u.value,ke=K.state,S=K.force,x=K.replace===!0,B=U(oe,de);if(B)return R(Oe(_(B),{state:typeof B=="object"?Oe({},ke,B.state):ke,force:S,replace:x}),ae||oe);const V=oe;V.redirectedFrom=ae;let J;return!S&&Qp(n,de,oe)&&(J=mn(Ge.NAVIGATION_DUPLICATED,{to:V,from:de}),k(de,de,!0,!1)),(J?Promise.resolve(J):ue(V,de)).catch(G=>Xt(G)?Xt(G,Ge.NAVIGATION_GUARD_REDIRECT)?G:I(G):Q(G,V,de)).then(G=>{if(G){if(Xt(G,Ge.NAVIGATION_GUARD_REDIRECT))return R(Oe({replace:x},_(G.to),{state:typeof G.to=="object"?Oe({},ke,G.to.state):ke,force:S}),ae||V)}else G=fe(V,de,!0,x,ke);return me(V,de,G),G})}function Y(K,ae){const oe=w(K,ae);return oe?Promise.reject(oe):Promise.resolve()}function z(K){const ae=Ce.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(K):K()}function ue(K,ae){let oe;const[de,ke,S]=vv(K,ae);oe=Da(de.reverse(),"beforeRouteLeave",K,ae);for(const B of de)B.leaveGuards.forEach(V=>{oe.push(hs(V,K,ae))});const x=Y.bind(null,K,ae);return oe.push(x),Te(oe).then(()=>{oe=[];for(const B of a.list())oe.push(hs(B,K,ae));return oe.push(x),Te(oe)}).then(()=>{oe=Da(ke,"beforeRouteUpdate",K,ae);for(const B of ke)B.updateGuards.forEach(V=>{oe.push(hs(V,K,ae))});return oe.push(x),Te(oe)}).then(()=>{oe=[];for(const B of S)if(B.beforeEnter)if(Ft(B.beforeEnter))for(const V of B.beforeEnter)oe.push(hs(V,K,ae));else oe.push(hs(B.beforeEnter,K,ae));return oe.push(x),Te(oe)}).then(()=>(K.matched.forEach(B=>B.enterCallbacks={}),oe=Da(S,"beforeRouteEnter",K,ae,z),oe.push(x),Te(oe))).then(()=>{oe=[];for(const B of l.list())oe.push(hs(B,K,ae));return oe.push(x),Te(oe)}).catch(B=>Xt(B,Ge.NAVIGATION_CANCELLED)?B:Promise.reject(B))}function me(K,ae,oe){i.list().forEach(de=>z(()=>de(K,ae,oe)))}function fe(K,ae,oe,de,ke){const S=w(K,ae);if(S)return S;const x=ae===fs,B=Ys?history.state:{};oe&&(de||x?o.replace(K.fullPath,Oe({scroll:x&&B&&B.scroll},ke)):o.push(K.fullPath,ke)),u.value=K,k(K,ae,oe,x),I()}let be;function $e(){be||(be=o.listen((K,ae,oe)=>{if(!Ee.listening)return;const de=C(K),ke=U(de,Ee.currentRoute.value);if(ke){R(Oe(ke,{replace:!0,force:!0}),de).catch(Gn);return}c=de;const S=u.value;Ys&&rv(ei(S.fullPath,oe.delta),ma()),ue(de,S).catch(x=>Xt(x,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?x:Xt(x,Ge.NAVIGATION_GUARD_REDIRECT)?(R(Oe(_(x.to),{force:!0}),de).then(B=>{Xt(B,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!oe.delta&&oe.type===or.pop&&o.go(-1,!1)}).catch(Gn),Promise.reject()):(oe.delta&&o.go(-oe.delta,!1),Q(x,de,S))).then(x=>{x=x||fe(de,S,!1),x&&(oe.delta&&!Xt(x,Ge.NAVIGATION_CANCELLED)?o.go(-oe.delta,!1):oe.type===or.pop&&Xt(x,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),me(de,S,x)}).catch(Gn)}))}let pe=Nn(),ve=Nn(),Z;function Q(K,ae,oe){I(K);const de=ve.list();return de.length?de.forEach(ke=>ke(K,ae,oe)):console.error(K),Promise.reject(K)}function te(){return Z&&u.value!==fs?Promise.resolve():new Promise((K,ae)=>{pe.add([K,ae])})}function I(K){return Z||(Z=!K,$e(),pe.list().forEach(([ae,oe])=>K?oe(K):ae()),pe.reset()),K}function k(K,ae,oe,de){const{scrollBehavior:ke}=e;if(!Ys||!ke)return Promise.resolve();const S=!oe&&lv(ei(K.fullPath,0))||(de||!oe)&&history.state&&history.state.scroll||null;return eo().then(()=>ke(K,ae,S)).then(x=>x&&av(x)).catch(x=>Q(x,K,ae))}const E=K=>o.go(K);let ce;const Ce=new Set,Ee={currentRoute:u,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:y,resolve:C,options:e,push:A,replace:D,go:E,back:()=>E(-1),forward:()=>E(1),beforeEach:a.add,beforeResolve:l.add,afterEach:i.add,onError:ve.add,isReady:te,install(K){K.component("RouterLink",Lv),K.component("RouterView",Fv),K.config.globalProperties.$router=Ee,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>M(u)}),Ys&&!ce&&u.value===fs&&(ce=!0,A(o.location).catch(de=>{}));const ae={};for(const de in fs)Object.defineProperty(ae,de,{get:()=>u.value[de],enumerable:!0});K.provide(ha,Ee),K.provide(zr,Qi(ae)),K.provide(rr,u);const oe=K.unmount;Ce.add(K),K.unmount=function(){Ce.delete(K),Ce.size<1&&(c=fs,be&&be(),be=null,u.value=fs,ce=!1,Z=!1),oe()}}};function Te(K){return K.reduce((ae,oe)=>ae.then(()=>z(oe)),Promise.resolve())}return Ee}function Hv(){return Bt(ha)}function DT(e){return Bt(zr)}function xo(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,l="";for(let i=0;i<s.length;i++){const u=s[i];if(u.startsWith("%"))continue;if(a){u.includes("}")?(l+=u.substring(0,u.indexOf("}")),o.push(l.trim()),l="",a=!1):l+=u+`
`;continue}if(u.includes("{")){const d=u.indexOf("{");if(u.includes("}")){const p=u.indexOf("}");o.push(u.substring(d+1,p).trim())}else l=u.substring(d+1)+`
`,a=!0;continue}const c=u.match(/\[Play\s+"([NESW])"\](\w+)/);if(c&&n){n.openingLeader=c[1],n.openingLead=c[2];continue}const f=u.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,p]=f;if(d==="Board")n&&(n.commentary=mi(o),n.steps=pi(o),n.auction=vi(n.auction),t.push(n)),n=Wv(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=Kv(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const d=u.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const p=Gv(d);n.auction.push(...p)}}}return n&&(n.commentary=mi(o),n.steps=pi(o),n.auction=vi(n.auction),t.push(n)),t}function pi(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let l=0;l<n.length;l++){const i=n[l],u=i.match(/^\[BID\s+([^\]]+)\]$/i),c=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(u){const p=Jr(u[1]).replace(/!/g,"").trim(),h=a.trim();a="";let g="";if(l+1<n.length){const C=n[l+1];C.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=C.trim(),l++)}const y=En(h,"bid"),$=En(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:$.text,showSeatsAfter:$.showSeats})}else if(c||f){const p=c?"next":"rotate";a.trim()&&o.push(En(a.trim(),p)),a=""}else if(d){const p=d[1].trim();let h;if(p.toLowerCase().startsWith("any:")?h={cards:p.substring(4).split(",").map(y=>Jo(y.trim())),anyOf:!0}:h={card:Jo(p)},a.trim()){const g=En(a.trim(),"choose-card");g.chooseCard=h,o.push(g)}a=""}else a+=i}if(a.trim()){const l=En(a.trim(),"end");o.push(l)}return o}function En(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const w=[];_.includes("N")&&w.push("N"),_.includes("E")&&w.push("E"),_.includes("S")&&w.push("S"),_.includes("W")&&w.push("W"),w.length>0&&(s=w)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let l;for(;(l=a.exec(e))!==null;)o.push(l[1]);const i=/\[RESET\]/i.test(e);let u=null;const c=e.match(/\[choose-card\s+([^\]]+)\]/i);if(c){const _=c[1].trim();_.toLowerCase().startsWith("any:")?u={cards:_.substring(4).split(",").map(A=>Jo(A.trim())),anyOf:!0}:u={card:Jo(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),p&&(f=!0);const h=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const $=e.match(/\[showcards\s+([^\]]+)\]/i);if($){const _=$[1].trim();y={};const w=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let A;for(;(A=w.exec(_))!==null;){const D=A[1].toUpperCase(),U=A[2].split(",").map(R=>R.trim().toUpperCase());y[D]=U}Object.keys(y).length===0&&(y=null)}let C=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Jr(C),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:h,clearCommentary:g,showcards:y,chooseCard:u}}function Wv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Jo(e){return e.toUpperCase().replace("10","T")}function Kv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],l=a.indexOf(":");if(l!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(l+1)}for(let i=0;i<4;i++){const u=(o+i)%4,c=n[u];t[c]=Vv(s[i])}return t}function Vv(e){const t=e.split(".");return t.length!==4?null:{spades:Ao(t[0]),hearts:Ao(t[1]),diamonds:Ao(t[2]),clubs:Ao(t[3])}}function Ao(e){return e?e.split(""):[]}function vi(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Gv(e){const t=e.split(/\s+/).filter(n=>n.length>0).filter(n=>!/^=\d+=?$/.test(n)),s=[];for(const n of t)n.toUpperCase()==="AP"?s.push("Pass","Pass","Pass"):s.push(zv(n));return s}function zv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function mi(e){return e.length?Jr(e.join(`

`)):""}function Jr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Jv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function To(e,t){return Jv(t)[e%4]}const Yr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},hi={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Xc=["spades","hearts","diamonds","clubs"];function Ra(e){return e==="T"?"10":e}function qr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Yr[o],l=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${l}">${a}</span>`}}return{text:e,html:e}}function Yv(e){return(hi[e.toLowerCase()]||hi[e])==="red"?"suit-red":"suit-black"}function qv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function lr(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Xv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Xc)for(const o of e[n]||[])s+=t[o]||0;return s}function Qv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Yr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function On(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Zv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function qs(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function em({observationId:e=null,userId:t,sessionId:s,deal:n,promptIndex:o,auctionSoFar:a,expectedBid:l,studentBid:i,correct:u,attemptNumber:c,timeTakenMs:f,skillPath:d,assignment:p=null,prompts:h=null,boardResult:g=null}){var _,w,A,D,U,R,Y,z,ue,me,fe;const y=((_=n.steps)==null?void 0:_.filter(be=>be.type==="bid").length)||1,$=n.studentSeat||"S",C=((w=n.hands)==null?void 0:w[$.toLowerCase()])||"";return{observation_id:e||crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:t,session_id:s,deal:{subfolder:n.subfolder||n.category||"Unknown",filename:n.filename||null,deal_number:n.boardNumber||n.dealNumber||null,kind:n.kind||null,dealer:n.dealer||"N",vulnerability:n.vulnerable||"None",student_seat:$,hands:{north:((A=n.hands)==null?void 0:A.N)||((D=n.hands)==null?void 0:D.north)||"",east:((U=n.hands)==null?void 0:U.E)||((R=n.hands)==null?void 0:R.east)||"",south:((Y=n.hands)==null?void 0:Y.S)||((z=n.hands)==null?void 0:z.south)||"",west:((ue=n.hands)==null?void 0:ue.W)||((me=n.hands)==null?void 0:me.west)||""},full_auction:((fe=n.auction)==null?void 0:fe.join(" "))||"",contract:n.contract||null,declarer:n.declarer||null,lead:n.lead||null},bid_prompt:{prompt_index:o,total_prompts:y,auction_so_far:[...a],expected_bid:l,student_hand:C},result:{student_bid:i,correct:u,attempt_number:c,time_taken_ms:f},skill_path:d,board_result:g,assignment:p,prompts:h||[]}}function Qc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,board_result:e.board_result||null,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function tm(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function sm(){return crypto.randomUUID()}function nm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Zc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function om(e){const[t]=e.split("/");return t||"uncategorized"}function am(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const eu={name:"AES-GCM",length:256},Xr={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function rm(){const e=await crypto.subtle.generateKey(eu,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return js(t)}async function tu(e){const t=Hs(e);return crypto.subtle.importKey("raw",t,eu,!0,["encrypt","decrypt"])}async function Qr(e,t){const s=await tu(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:js(l),iv:js(n)}}async function Zr(e,t,s){const n=await tu(s),o=Hs(e),a=Hs(t),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(l))}async function lm(e){const t=Hs(e);return crypto.subtle.importKey("spki",t,Xr,!0,["encrypt"])}async function im(e){const t=Hs(e);return crypto.subtle.importKey("pkcs8",t,Xr,!0,["decrypt"])}async function cm(){const e=await crypto.subtle.generateKey(Xr,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:js(t),privateKey:js(s)}}async function su(e,t){const s=await lm(t),n=Hs(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return js(o)}async function um(e,t){const s=await im(t),n=Hs(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return js(o)}function dm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function fm(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function pm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Qr(t,e);return(await Zr(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function js(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Hs(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const ir="bridgePractice",Ue=O({}),qe=O(null),Cs=O(null),lo=O(!1),ga=O(!1);function nu(){try{const e=localStorage.getItem(ir);if(e){const t=JSON.parse(e);Ue.value=t.users||{},qe.value=t.currentUserId||null,Cs.value=t.adminViewerId||null}lo.value=!0}catch(e){console.error("Failed to load user store from storage:",e),lo.value=!0}}function Pt(){try{const e=localStorage.getItem(ir),t=e?JSON.parse(e):{};t.users=Ue.value,t.currentUserId=qe.value,Cs.value&&(t.adminViewerId=Cs.value),localStorage.setItem(ir,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function vm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const l=crypto.randomUUID(),i=new Date().toISOString(),u=await rm();let c=null;if(a)try{const d=await fetch(`${a}/keys/admin`);if(d.ok){const p=await d.json();Cs.value=p.viewer_id,c={grantee_id:p.viewer_id,encrypted_payload:await su(u,p.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:l,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:u,role:"student",serverRegistered:!1,adminGrantPayload:c,createdAt:i,updatedAt:i};return Ue.value[l]=f,qe.value=l,Pt(),ga.value=!0,f}function mm(e,t){if(!Ue.value[e])return console.error("User not found:",e),null;const s=Ue.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Pt(),s}function hm(e){if(!Ue.value[e])return!1;if(delete Ue.value[e],qe.value===e){const t=Object.keys(Ue.value);qe.value=t.length>0?t[0]:null}return Pt(),!0}function gm(e){return Ue.value[e]?(qe.value=e,Pt(),!0):(console.error("User not found:",e),!1)}function ym(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Ue.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function bm(e){const t=e.trim().toLowerCase();for(const s of Object.values(Ue.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function _m(e){return Ue.value[e]||null}function wm(){Ue.value={},qe.value=null,Cs.value=null,ga.value=!1,Pt(),lo.value=!1}function Sm(){lo.value||nu()}async function Cm(e){const t=fm(e);if(!t.valid)return{success:!1,error:t.error};if(!await pm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Ue.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),qe.value=e.user_id,Pt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",l=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:l,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[i.id]=i,qe.value=i.id,Pt(),{success:!0,user:i}}function $m(){const e=Ue.value[qe.value];return!e||!e.secretKey?null:dm(e)}function km(){ga.value=!1}function xm(){return Cs.value}function Am(e){Cs.value=e,Pt()}async function Tm(e){const t=Ue.value[qe.value];return!t||!t.secretKey?null:su(t.secretKey,e)}async function Nm(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Em(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Om(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Im(){if(!qe.value)return;const e=Ue.value[qe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Pt()}catch{}}function Ke(){const e=N(()=>qe.value&&Ue.value[qe.value]||null),t=N(()=>Object.values(Ue.value)),s=N(()=>Object.keys(Ue.value).length>0),n=N(()=>Object.keys(Ue.value).length),o=N(()=>qe.value!==null&&!!Ue.value[qe.value]);return{users:Ue,currentUserId:qe,adminViewerId:Cs,initialized:lo,showKeyBackupModal:ga,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Sm,loadFromStorage:nu,saveToStorage:Pt,createUser:vm,updateUser:mm,deleteUser:hm,switchUser:gm,findUserByName:ym,findUserByEmail:bm,getUser:_m,clearUsers:wm,restoreFromBackup:Cm,getKeyBackup:$m,dismissKeyBackupModal:km,getAdminViewerId:xm,setAdminViewerId:Am,createGrantForViewer:Tm,requestRecovery:Nm,claimRecovery:Em,claimRecoveryByCode:Om,syncRole:Im}}const cr="bridgePractice",rt=O({}),Je=O(null),Dt=O(!1),hn=O(!1);function ou(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const l=s.split(",").map(u=>u.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:l,dueDate:n||null,teacherName:o||null,classroom:i}}function au(){try{const e=localStorage.getItem(cr);if(e){const t=JSON.parse(e);rt.value=t.assignments||{},Je.value=t.currentAssignmentId||null,Je.value&&rt.value[Je.value]&&(Dt.value=!0)}hn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),hn.value=!0}}function Ws(){try{const e=localStorage.getItem(cr),t=e?JSON.parse(e):{};t.assignments=rt.value,t.currentAssignmentId=Je.value,localStorage.setItem(cr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function ru({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(rt.value).find(c=>c.name===e);if(a){const c=new Set(a.lessons);for(const f of n)c.add(f);return a.lessons=Array.from(c),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Je.value=a.id,Dt.value=!0,Ws(),a}const l=crypto.randomUUID(),i=new Date().toISOString(),u={id:l,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return rt.value[l]=u,Je.value=l,Dt.value=!0,Ws(),u}function Pm(){if(hn.value)return;au();const e=ou();e&&ru(e),hn.value=!0}function Dm(e){if(!Dt.value||!Je.value)return!1;const t=rt.value[Je.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Rm(e){if(!Je.value)return;const t=rt.value[Je.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Ws())}function Lm(e){if(!Je.value||!Dt.value)return!1;const t=rt.value[Je.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Ws(),!0}function Bm(){if(!Dt.value||!Je.value)return null;const e=rt.value[Je.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Mm(){Dt.value=!1}function Um(){Je.value&&rt.value[Je.value]&&(Dt.value=!0)}function Fm(e){return rt.value[e]||null}function jm(){return Object.values(rt.value)}function Hm(e){return rt.value[e]?(delete rt.value[e],Je.value===e&&(Je.value=null,Dt.value=!1),Ws(),!0):!1}function Wm(){rt.value={},Je.value=null,Dt.value=!1,hn.value=!1,Ws()}function ya(){const e=N(()=>Je.value&&rt.value[Je.value]||null),t=N(()=>Dt.value&&e.value!==null),s=N(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=N(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:rt,currentAssignmentId:Je,inAssignmentMode:Dt,initialized:hn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Pm,loadFromStorage:au,saveToStorage:Ws,createAssignment:ru,isLessonInAssignment:Dm,setTotalDeals:Rm,recordDealCompletion:Lm,getAssignmentTag:Bm,exitAssignmentMode:Mm,returnToAssignmentMode:Um,getAssignment:Fm,getAllAssignments:jm,deleteAssignment:Hm,clearAssignments:Wm,parseAssignmentFromUrl:ou}}const ur="bridgePractice",ze=O([]),gn=O(null),yn=O(!1),Us=O({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function lu(){try{const e=localStorage.getItem(ur);if(e){const t=JSON.parse(e);ze.value=t.pendingObservations||[]}yn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),yn.value=!0}}function Ks(){try{const e=localStorage.getItem(ur),t=e?JSON.parse(e):{};t.pendingObservations=ze.value,localStorage.setItem(ur,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function iu(){yn.value||lu(),gn.value||cu()}function cu(){gn.value=sm(),Us.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Km({observationId:e=null,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,prompts:c,boardResult:f=null}){var w,A;const d=Ke(),p=ya();yn.value||iu();const h=d.currentUser.value;if(!h)return{success:!1,error:"No authenticated user"};let g=t.skillPath;if(!g){const D=t.subfolder||t.category||"Unknown";g=nm(D)}const y=p.getAssignmentTag(),$=e&&ze.value.some(D=>{var U;return((U=D.metadata)==null?void 0:U.observation_id)===e}),C=em({observationId:e,userId:h.id,sessionId:gn.value,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,skillPath:g,assignment:y,prompts:c,boardResult:f}),_=tm(C);if(!_.valid)return console.error("Invalid observation:",_.errors),{success:!1,error:_.errors.join(", ")};if($||(Us.value.totalObservations++,l?Us.value.correctCount++:Us.value.wrongCount++),h.dataConsent&&h.secretKey){const D=await Vm(C,h);D.success||(console.warn("Failed to encrypt observation, storing unencrypted:",D.error),gi(C,((w=h.classrooms)==null?void 0:w[0])||null))}else gi(C,((A=h.classrooms)==null?void 0:A[0])||null);return{success:!0,observation:C}}async function Vm(e,t){var s;try{const{encrypted_data:n,iv:o}=await Qr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,l=Qc(e,a),i={encrypted_data:n,iv:o,metadata:l,encrypted:!0,queuedAt:new Date().toISOString()},u=ze.value.findIndex(c=>{var f;return((f=c.metadata)==null?void 0:f.observation_id)===l.observation_id});return u!==-1?ze.value[u]=i:ze.value.push(i),Ks(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function gi(e,t){const s=Qc(e,t),n={observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()},o=ze.value.findIndex(a=>{var l;return((l=a.metadata)==null?void 0:l.observation_id)===s.observation_id});o!==-1?ze.value[o]=n:ze.value.push(n),Ks()}async function Gm(){const t=Ke().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<ze.value.length;n++){const o=ze.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:l}=await Qr(o.observation,t.secretKey);ze.value[n]={encrypted_data:a,iv:l,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ks(),s}function zm(){return ze.value.length}function Jm(){return[...ze.value]}function Ym(e){ze.value=ze.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ks()}function qm(){ze.value=[],Ks()}function Xm(){return{...Us.value}}function Qm(){ze.value=[],gn.value=null,Us.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},yn.value=!1,Ks()}function us(){const e=N(()=>ze.value.length),t=N(()=>ze.value.length>0),s=N(()=>ze.value.some(o=>!o.encrypted)),n=N(()=>gn.value);return{pendingObservations:ze,sessionId:gn,sessionStats:Us,initialized:yn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:iu,startNewSession:cu,recordObservation:Km,encryptPendingObservations:Gm,getPendingCount:zm,getPendingObservations:Jm,removeSyncedObservations:Ym,clearPendingObservations:qm,getSessionStats:Xm,reset:Qm,loadFromStorage:lu,saveToStorage:Ks}}function Zm(){const e=us(),t=O(null),s=O(0),n=O(!1),o=O(!1),a=Lt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),l=Lt({answered:{},wrongCard:null,correctCard:null}),i=Lt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{},promptHistory:[],observationId:null}),u=O({N:[],E:[],S:[],W:[]}),c=O(null),f=O(1),d=N(()=>{var T;return((T=t.value)==null?void 0:T.steps)||[]}),p=N(()=>d.value.length>0),h=N(()=>d.value[s.value]||null),g=N(()=>d.value.some(T=>T.type==="bid")),y=N(()=>{var T;return((T=h.value)==null?void 0:T.type)==="bid"}),$=N(()=>{var T;for(let P=s.value;P>=0;P--)if((T=d.value[P])!=null&&T.clearCommentary)return P;return 0}),C=N(()=>{var T;return((T=t.value)==null?void 0:T.studentSeat)||"S"}),_=N(()=>t.value?To(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),w=N(()=>_.value===C.value),A=N(()=>{var W,j;if(!y.value||!w.value||a.auctionComplete||o.value)return!1;const T=h.value;if(!(T!=null&&T.bid))return!1;const P=(j=(W=t.value)==null?void 0:W.auction)==null?void 0:j[a.currentBidIndex];return P?ee(T.bid)===ee(P):!1}),D=N(()=>{for(let T=a.displayedBids.length-1;T>=0;T--){const P=a.displayedBids[T];if(P&&P!=="Pass"&&P!=="X"&&P!=="XX")return P}return null}),U=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;const T=a.displayedBids[a.displayedBids.length-1];if(T==="X"||T==="XX"||!D.value)return!1;let P=-1;for(let L=a.displayedBids.length-1;L>=0;L--){const H=a.displayedBids[L];if(H&&H!=="Pass"&&H!=="X"&&H!=="XX"){P=L;break}}if(P===-1)return!1;const W=To(P,t.value.auctionDealer||t.value.dealer),j=_.value;return(j==="N"||j==="S")&&(W==="E"||W==="W")||(j==="E"||j==="W")&&(W==="N"||W==="S")}),R=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let T=a.displayedBids.length-1;T>=0;T--){const P=a.displayedBids[T];if(P!=="Pass"){if(P==="XX")return!1;if(P==="X"){const W=To(T,t.value.auctionDealer||t.value.dealer),j=_.value;return!(j==="N"&&W==="S"||j==="S"&&W==="N"||j==="E"&&W==="W"||j==="W"&&W==="E")}return!1}}return!1}),Y=N(()=>{const T=h.value;return T!=null&&T.chooseCard?!l.answered[s.value]:!1}),z=N(()=>{var T;return((T=h.value)==null?void 0:T.chooseCard)||null}),ue=N(()=>{if(!t.value)return[];const T=["N","E","S","W"];if(!p.value)return[];let P=null;const W=d.value;for(let j=0;j<=s.value&&j<W.length;j++){const q=W[j];q!=null&&q.showSeats&&(P=q.showSeats),q!=null&&q.showSeatsAfter&&(j<s.value||j===s.value&&o.value)&&(P=q.showSeatsAfter)}return P?T.filter(j=>!P.includes(j)):T}),me=N(()=>{if(!t.value||!p.value)return null;let T={};const P=d.value;for(let W=0;W<=s.value&&W<P.length;W++){const j=P[W];if(j!=null&&j.showcards)for(const[q,L]of Object.entries(j.showcards))T[q]=L;if(j!=null&&j.showSeats)for(const q of j.showSeats)delete T[q];if(j!=null&&j.showSeatsAfter&&(W<s.value||W===s.value&&o.value))for(const q of j.showSeatsAfter)delete T[q]}return Object.keys(T).length>0?T:null}),fe=N(()=>{if(!t.value||!p.value)return{};let T={},P=new Set;const W=d.value;for(let q=0;q<=s.value&&q<W.length;q++){const L=W[q];if(L!=null&&L.showcards)for(const[H,se]of Object.entries(L.showcards))T[H]=se;if(L!=null&&L.showSeats)for(const H of L.showSeats)P.add(H)}const j={};for(const[q,L]of Object.entries(T))P.has(q)&&(j[q]=L);return j}),be=N(()=>{const T=me.value;return T?Object.keys(T):[]}),$e=N(()=>{const T=ue.value,P=be.value;return P.length?T.filter(W=>!P.includes(W)):T});function pe(T){const P={spades:[],hearts:[],diamonds:[],clubs:[]},W={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const j of T){const q=j[0].toUpperCase(),L=j.slice(1).toUpperCase(),H=W[q];H&&P[H].push(L)}return P}const ve=N(()=>{var W,j;if(!((W=t.value)!=null&&W.hands))return{};if((j=h.value)!=null&&j.reset)return t.value.hands;const T=me.value,P={};for(const q of["N","E","S","W"]){if(T&&T[q]){P[q]=pe(T[q]);continue}const L=t.value.hands[q];if(!L){P[q]=null;continue}P[q]={spades:[...L.spades||[]],hearts:[...L.hearts||[]],diamonds:[...L.diamonds||[]],clubs:[...L.clubs||[]]};for(const H of u.value[q]){const se={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[H.suit];if(se&&P[q][se]){const re=P[q][se].indexOf(H.card);re!==-1&&P[q][se].splice(re,1)}}}return P}),Z=N(()=>!(g.value&&!a.auctionComplete)),Q=N(()=>{if(!p.value)return!0;let T=!0;const P=d.value;for(let W=0;W<=s.value&&W<P.length;W++){const j=P[W];(j==null?void 0:j.showAuction)!==null&&(j==null?void 0:j.showAuction)!==void 0&&(T=j.showAuction)}return T}),te=N(()=>{var P;if(!p.value)return!1;const T=d.value;for(let W=0;W<=s.value&&W<T.length;W++)if((P=T[W])!=null&&P.showLead)return!0;return!1}),I=N(()=>{var T;return(T=t.value)!=null&&T.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),k=N(()=>{if(!p.value||n.value)return!0;const T=h.value;return(T==null?void 0:T.type)==="end"&&!Y.value}),E=N(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function ce(){var P;u.value={N:[],E:[],S:[],W:[]};const T=d.value;for(let W=0;W<=s.value&&W<T.length;W++){const j=T[W];if((P=j==null?void 0:j.plays)!=null&&P.length)for(const q of j.plays){const L=q.split(/[,\s]+/);for(const H of L){if(!H)continue;const se=H.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(se){const re=se[1].toUpperCase(),he=se[2].toUpperCase();let Ne=se[3].toUpperCase();Ne==="10"&&(Ne="T"),u.value[re].push({suit:he,card:Ne})}}}}}function Ce(){if(!t.value)return;const T=t.value.auction||[],P=Ee(s.value);if(P===-1){for(;a.currentBidIndex<T.length;)a.displayedBids.push(T[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,c.value=null;return}const W=d.value[P],j=ee(W.bid);for(;a.currentBidIndex<T.length;){const q=To(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),L=ee(T[a.currentBidIndex]);if(q===C.value&&L===j){c.value=Date.now(),f.value=1;return}a.displayedBids.push(T[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,c.value=null}function Ee(T){const P=d.value;for(let W=T;W<P.length;W++)if(P[W].type==="bid")return W;return-1}function Te(T){if(!t.value||a.auctionComplete||!y.value)return!1;const P=t.value.auction[a.currentBidIndex],W=ee(T)===ee(P),j=s.value;W?j in i.wrongStepIndices&&delete i.wrongStepIndices[j]:(i.wrongStepIndices[j]=!0,i.boardHadWrong=!0);const q=d.value.slice(0,j+1).filter(he=>he.type==="bid").length-1,L=c.value?Date.now()-c.value:0;i.promptHistory.push({type:"bid",prompt_index:q,auction_so_far:[...a.displayedBids],expected_bid:P,student_bid:T,correct:W,time_ms:L}),W||J(!1);const H=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,c.value=null,f.value=1,W?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=T,a.correctBid=P,a.wrongBidIndex=H);const se=s.value+1,re=d.value[se];return(re==null?void 0:re.type)==="bid"?(s.value=se,o.value=!1,Ce()):(o.value=!0,K(),s.value>=d.value.length-1&&S()),W}function K(){var P;if(a.auctionComplete)return;if(Ee(s.value+1)===-1){const W=((P=t.value)==null?void 0:P.auction)||[];for(;a.currentBidIndex<W.length;)a.displayedBids.push(W[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function ae(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function oe(T,P){if(!t.value||!Y.value)return!1;const W=z.value;if(!W)return!1;const j=(T+P).toUpperCase(),q=s.value;let L=!1,H="";W.anyOf?(L=W.cards.includes(j),H=W.cards[0]):(L=j===W.card,H=W.card),L?q in i.wrongStepIndices&&delete i.wrongStepIndices[q]:(i.wrongStepIndices[q]=!0,i.boardHadWrong=!0);const se=c.value?Date.now()-c.value:0;return i.promptHistory.push({type:"card",expected_card:H,student_card:j,correct:L,time_ms:se}),c.value=null,L||J(!1),l.answered[q]=!0,L?(l.wrongCard=null,l.correctCard=null):(l.wrongCard=j,l.correctCard=H),ke(),L}function de(){l.wrongCard=null,l.correctCard=null}function ke(){var T,P;if(A.value||Y.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,ce(),((T=d.value[s.value])==null?void 0:T.type)==="bid"&&Ce(),((P=d.value[s.value])==null?void 0:P.type)==="choose-card"&&(c.value=Date.now()),s.value>=d.value.length-1){const W=d.value[s.value];(W==null?void 0:W.type)!=="bid"&&(W==null?void 0:W.type)!=="choose-card"&&S()}return!0}return S(),!1}function S(){n.value=!0,x()}function x(){if(!d.value.some(j=>j.type==="bid"||j.type==="choose-card"))return;i.boardHadWrong?i.wrongCount++:i.correctCount++;const P=Object.keys(i.wrongStepIndices).length===0,W=!i.boardHadWrong||P;J(W)}function B(){if(ae(),de(),o.value)return o.value=!1,V(s.value),!0;if(s.value>0){const T=s.value-1,P=d.value[T];return l.answered[T]&&delete l.answered[T],(P==null?void 0:P.type)==="bid"&&V(T),s.value=T,n.value=!1,o.value=!1,ce(),!0}return!1}function V(T){var L;const P=d.value[T];if(!P||P.type!=="bid")return;const W=ee(P.bid),j=((L=t.value)==null?void 0:L.auction)||[];let q=0;for(let H=0;H<j.length;H++)if(ee(j[H])===W){q=H;break}a.currentBidIndex=q,a.displayedBids=j.slice(0,q),a.auctionComplete=!1,c.value=Date.now(),f.value=1}async function J(T){if(!t.value)return;const P=T?i.boardHadWrong?"corrected":"correct":"failed";try{await e.recordObservation({observationId:i.observationId,deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:T?"PASS":"FAIL",correct:T,attemptNumber:1,timeTakenMs:0,prompts:[...i.promptHistory],boardResult:P})}catch(W){console.error("Failed to record board observation:",W)}}function G(T){var P,W;t.value=T,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,l.answered={},l.wrongCard=null,l.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},i.promptHistory=[],i.observationId=crypto.randomUUID(),u.value={N:[],E:[],S:[],W:[]},c.value=null,f.value=1,(P=T==null?void 0:T.steps)!=null&&P.length&&(ce(),((W=T.steps[0])==null?void 0:W.type)==="bid"&&Ce())}function ne(){i.correctCount=0,i.wrongCount=0}function ee(T){if(!T)return"";const W=T.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return W==="PASS"||W==="P"?"PASS":W==="X"||W==="DBL"||W==="DOUBLE"?"X":W==="XX"||W==="RDBL"||W==="REDOUBLE"?"XX":W.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:l,boardState:i,steps:d,hasSteps:p,currentStep:h,hasBidSteps:g,isBidStep:y,commentaryStartIndex:$,studentSeat:C,currentTurnSeat:_,isStudentTurn:w,hasBidPrompt:A,lastContractBid:D,canDouble:U,canRedouble:R,canGoBack:E,hasCardChoice:Y,currentChooseCard:z,hiddenSeats:$e,hands:ve,showHcp:Z,showcardsPlayedCards:fe,isComplete:k,showAuctionTable:Q,showOpeningLead:te,openingLead:I,advance:ke,makeBid:Te,clearFeedback:ae,goBack:B,makeCardChoice:oe,clearCardFeedback:de,loadDeal:G,resetStats:ne,observationStore:e}}const Yo="bridgePractice",uu="bridgePracticeUIPrefs",ct=O({teacherName:null,availableClassrooms:[],configuredAt:null}),bn=O({showLoadPbnOption:!1}),qo=O(!1);function du(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function fu(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:du(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function eh(){return new URLSearchParams(window.location.search).get("collection")}function th(){return new URLSearchParams(window.location.search).get("lesson")}function sh(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function nh(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function oh(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function ah(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const rh=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function pu(){try{const e=localStorage.getItem(Yo);if(e){const t=JSON.parse(e);t.appConfig&&(ct.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function lh(){try{const e=localStorage.getItem(uu);if(e){const t=JSON.parse(e);bn.value={...bn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function ih(){try{localStorage.setItem(uu,JSON.stringify(bn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function ch(e,t){bn.value[e]=t,ih()}function el(){try{const e=localStorage.getItem(Yo),t=e?JSON.parse(e):{};t.appConfig=ct.value,localStorage.setItem(Yo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function vu(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function uh(){if(qo.value)return;pu(),lh();const{teacher:e,classrooms:t}=fu();(e||t.length>0)&&(e&&!ct.value.teacherName&&(ct.value.teacherName=e),t.length>0&&(ct.value.availableClassrooms=vu(ct.value.availableClassrooms||[],t)),ct.value.configuredAt||(ct.value.configuredAt=new Date().toISOString()),el()),qo.value=!0}function dh(){try{const e=localStorage.getItem(Yo);return e?JSON.parse(e):null}catch{return null}}function fh(){ct.value={teacherName:null,availableClassrooms:[],configuredAt:null},el(),qo.value=!1}function ho(){const e=N(()=>ct.value.availableClassrooms.length===0),t=N(()=>ct.value.availableClassrooms.length>1),s=N(()=>ct.value.availableClassrooms.length===1),n=N(()=>s.value?ct.value.availableClassrooms[0]:null),o=N(()=>ct.value.teacherName),a=N(()=>ct.value.availableClassrooms),l=N(()=>bn.value.showLoadPbnOption);return{appConfig:ct,initialized:qo,uiPrefs:bn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:l,initializeFromUrl:uh,loadFromStorage:pu,saveToStorage:el,clearConfig:fh,getStorageData:dh,getCollectionFromUrl:eh,setCollectionInUrl:sh,getLessonFromUrl:th,setLessonInUrl:nh,getDealFromUrl:oh,setDealInUrl:ah,setUIPref:ch,COLLECTIONS:rh,parseUrlParams:fu,classroomIdToName:du,mergeClassrooms:vu}}const ph="https://api.bridge-classroom.com/api",vh="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",tl=O([]),tt=O([]),Xo=O(!1),Qo=O(null),zn=O(null),Zo=O(!1),mh=5*60*1e3;async function hh(e){const t=await fetch(`${ph}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":vh}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function gh(e,t){try{return{...await Zr(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number,board_result:e.board_result}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function yh(){return us().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,board_result:n.board_result,session_id:n.session_id,_local:!0,_pending:!0}})}async function mu(e=!1){const s=Ke().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=yh();if(!e&&zn.value&&Date.now()-new Date(zn.value).getTime()<mh&&tt.value.length>0)return bh(n),{success:!0,cached:!0};Xo.value=!0,Qo.value=null;let o=[];try{const i=await hh(s.id);if(tl.value=i,s.secretKey&&i.length>0){const u=i.map(f=>gh(f,s.secretKey));o=(await Promise.all(u)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Qo.value=i.message)}const a=new Set(o.map(i=>i.id)),l=n.filter(i=>!a.has(i.id));return tt.value=[...o,...l],zn.value=new Date().toISOString(),Xo.value=!1,{success:!0,count:tt.value.length}}function bh(e){const t=new Set(tt.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(tt.value=[...tt.value,...s])}async function _h(){if(Zo.value)return;Ke().isAuthenticated.value&&await mu(),Zo.value=!0}function wh(){tl.value=[],tt.value=[],zn.value=null,Zo.value=!1}function hu(){const e={};for(const t of tt.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function yi(){const e={};for(const t of tt.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function bi(){const e={};for(const t of tt.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function _i(e=10){return[...tt.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function wi(){const e=new Date().toISOString().split("T")[0];return tt.value.filter(t=>t.timestamp.startsWith(e))}function Si(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return tt.value.filter(n=>n.timestamp>=s)}function Sh(){const e=hu(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let l=1;l<t.length;l++){const i=new Date(t[l]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function sl(){const e=N(()=>tt.value.length),t=N(()=>tt.value.filter(h=>h.correct).length),s=N(()=>tt.value.filter(h=>!h.correct).length),n=N(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=N(()=>{const h=wi(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=N(()=>{const h=Si(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),l=N(()=>Sh()),i=N(()=>yi()),u=N(()=>bi()),c=N(()=>_i(20)),f=N(()=>tt.value.length>0),d=N(()=>Xo.value),p=N(()=>Qo.value!==null);return{observations:tl,decryptedObservations:tt,loading:Xo,error:Qo,lastFetchedAt:zn,initialized:Zo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:l,skillStats:i,sessions:u,recentObservations:c,hasData:f,isLoading:d,hasError:p,initialize:_h,fetchProgress:mu,clearCache:wh,getObservationsByDate:hu,getStatsBySkill:yi,getSessions:bi,getRecentObservations:_i,getTodayObservations:wi,getThisWeekObservations:Si}}const Rs={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},$t={NONE:"none",SILVER:"silver",GOLD:"gold"},Ch=6;function $h(e){return e.slice(0,10)}function gu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function yu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Ci=60*60*1e3;function bu(e){if(e.length===0)return Rs.GREY;const t=e[e.length-1];if(!t.correct)return Rs.RED;const s=Date.now()-Ci;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return Rs.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return Rs.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=Ci?Rs.ORANGE:Rs.GREEN}function _u(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function wu(e){if(e.length===0)return $t.NONE;const t=new Set;for(const l of e)t.add($h(l.timestamp));const s=[...t].filter(l=>_u(e,l)).sort();if(s.length<2)return $t.NONE;let n=1,o=1,a=s[0];for(let l=1;l<s.length;l++)gu(a,s[l])>=Ch&&(o++,a=s[l],o>n&&(n=o));return n>=3?$t.GOLD:n>=2?$t.SILVER:$t.NONE}function kh(e){const t=e.observations.value||[];let s=[];try{s=us().getPendingObservations().filter(i=>i.metadata).map(i=>{const u=i.metadata;return{id:u.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:u.timestamp||i.queuedAt,skill_path:u.skill_path,correct:u.correct,deal_subfolder:u.deal_subfolder,deal_number:u.deal_number,session_id:u.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function xh(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var u;return(i.deal_number??((u=i.deal)==null?void 0:u.deal_number))===o}).sort((i,u)=>i.timestamp.localeCompare(u.timestamp)),l=yu(a);return{boardNumber:o,status:bu(a),achievement:wu(a),attemptCount:l.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function Ah(e){return!e||e.length===0?{achievement:$t.NONE}:e.every(n=>n.achievement===$t.GOLD)?{achievement:$t.GOLD}:e.every(n=>n.achievement===$t.SILVER||n.achievement===$t.GOLD)?{achievement:$t.SILVER}:{achievement:$t.NONE}}const Su="bridgeLessonBoards",io=O(Th()),La=new Set;function Th(){try{const e=localStorage.getItem(Su);return e?JSON.parse(e):{}}catch{return{}}}function Nh(){try{localStorage.setItem(Su,JSON.stringify(io.value))}catch{}}function Cu(e,t){io.value={...io.value,[e]:t},Nh()}function Eh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Oh(e){const t=ho(),s=e.filter(n=>!io.value[n]&&!La.has(n));if(s.length!==0){for(const n of s)La.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,l=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(l);if(!i.ok)continue;const u=await i.text(),c=Eh(u);if(c.length>0){Cu(n,c);break}}catch{continue}}}finally{La.delete(n)}}))}}function Ih(e){var n,o;const t=io.value,s={};for(const a of e){const l=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!l||i==null||(s[l]||(s[l]={boards:new Set,lastActivity:a.timestamp}),s[l].boards.add(i),a.timestamp>s[l].lastActivity&&(s[l].lastActivity=a.timestamp))}return Object.entries(s).map(([a,l])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:l.lastActivity};const u=Math.max(...l.boards),c=[];for(let f=1;f<=u;f++)c.push(f);return{subfolder:a,boardNumbers:c,lastActivity:l.lastActivity}})}function bs(){const e=ws();function t(){return kh(e)}return{STATUS:Rs,ACHIEVEMENT:$t,getObservations:t,computeBoardMastery:xh,computeLessonAchievement:Ah,extractLessonsFromObservations:Ih,saveLessonBoardNumbers:Cu,fetchMissingBoardCounts:Oh,groupIntoBoardAttempts:yu,calculateCurrentStatus:bu,calculateAchievement:wu,hasGreenDay:_u,daysBetween:gu}}const Qs="https://api.bridge-classroom.com/api",Zs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ea=O(!1),co=O(null),ba=O([]),_s=O({}),uo=O({}),ta=O(!1),sa=O(null),nl=O(!1),na={},Ph=2*60*1e3,Jn={};let Bo=null;async function Dh(){var s;const e=Ke(),t=e.currentUser.value;if(!t||!t.email){ea.value=!1;return}try{const n=await fetch(`${Qs}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Zs}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;co.value=a.id;const l=await fetch(`${Qs}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Zs}});if(!l.ok)return;const u=(await l.json()).grants||[],c=new Set(u.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(c.size===0)return;const f=await fetch(`${Qs}/users`,{headers:{"x-api-key":Zs}});if(!f.ok)return;const p=(await f.json()).users||[],h=(s=t.email)==null?void 0:s.toLowerCase();if(ba.value=p.filter(g=>{var y;return c.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==h}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),ea.value=!0,nl.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Qs}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Zs},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function $u(e){const t=_s.value[e],s=na[e];if(t&&s&&Date.now()-s<Ph)return t;try{const n=await fetch(`${Qs}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Zs}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=(await n.json()).observations||[],l=a.map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number,board_result:i.board_result}));return uo.value={...uo.value,[e]:a},_s.value={..._s.value,[e]:l},na[e]=Date.now(),l}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Rh(){ta.value=!0,sa.value=null;try{await Promise.allSettled(ba.value.map(s=>$u(s.id)));const e=bs(),t=new Set;for(const s of Object.values(_s.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){sa.value=e.message,console.error("Failed to load student summaries:",e)}finally{ta.value=!1}}function Lh(e){const t=_s.value[e]||[];if(t.length===0)return{green:0,blue:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=bs(),n=s.extractLessonsFromObservations(t),o={green:0,blue:0,orange:0,yellow:0,red:0,grey:0};for(const l of n){const i=s.computeBoardMastery(t,l.subfolder,l.boardNumbers);for(const u of i)o[u.status]=(o[u.status]||0)+1}let a=null;for(const l of t)(!a||l.timestamp>a)&&(a=l.timestamp);return{...o,total:o.green+o.blue+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Bh(e,t=3){const s=_s.value[e]||[],n=ws(),o={};for(const a of s){const l=a.deal_subfolder;l&&(!o[l]||a.timestamp>o[l])&&(o[l]=a.timestamp)}return Object.entries(o).sort(([,a],[,l])=>l.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function Mh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),l=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:s.toLocaleDateString()}function Uh(){try{const s=JSON.parse(sessionStorage.getItem("bridgeTeacherSession")||"null");if(s!=null&&s.privateKeyBase64&&(!s.expiry||new Date(s.expiry)>=new Date))return s.privateKeyBase64}catch{}const t=Ke().currentUser.value;return t!=null&&t.viewerPrivateKey?(sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:t.viewerPrivateKey,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()})),t.viewerPrivateKey):null}async function ku(e){if(Jn[e])return Jn[e];const t=Uh();if(!t)return null;if(!Bo&&co.value)try{const n=await fetch(`${Qs}/grants?grantee_id=${co.value}`,{headers:{"x-api-key":Zs}});n.ok&&(Bo=(await n.json()).grants||[])}catch{return null}const s=(Bo||[]).find(n=>n.grantor_id===e);if(!s)return null;try{const n=await um(s.encrypted_payload,t);return Jn[e]=n,n}catch(n){return console.error(`Failed to decrypt grant for student ${e}:`,n),null}}async function xu(e,t){if(!t.encrypted_data||!t.iv)return null;const s=await ku(e);if(!s)return null;try{return{...await Zr(t.encrypted_data,t.iv,s),id:t.id,timestamp:t.timestamp,skill_path:t.skill_path,correct:t.correct,deal_subfolder:t.deal_subfolder,deal_number:t.deal_number,board_result:t.board_result}}catch(n){return console.error("Failed to decrypt observation:",t.id,n),null}}async function Fh(e,t,s,n){const a=(uo.value[e]||[]).find(l=>{const i=new Date(l.timestamp).getTime();return Math.abs(i-t)<1e3&&l.deal_number===s&&l.correct===n});return a?xu(e,a):null}function jh(){ea.value=!1,co.value=null,ba.value=[],_s.value={},uo.value={},ta.value=!1,sa.value=null,nl.value=!1,Bo=null;for(const e of Object.keys(Jn))delete Jn[e];for(const e of Object.keys(na))delete na[e]}function Sn(){return{isTeacher:ea,viewerId:co,students:ba,studentObservations:_s,loading:ta,error:sa,initialized:nl,checkTeacherStatus:Dh,fetchStudentObservations:$u,loadAllStudentSummaries:Rh,getStudentMasterySummary:Lh,getStudentRecentLessons:Bh,formatTimeSince:Mh,findAndDecryptObservation:Fh,decryptStudentObservation:xu,getStudentKey:ku,studentRawObservations:uo,reset:jh}}const dr="https://api.bridge-classroom.com/api",fr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",pr=O(!1),en=O(null),ns=O(null),fo=O([]),_n=O([]),ol=O("lessons"),_a=O(!0),Cn=O(!1),go=O([]);function Hh(e){Cn.value=!0,go.value=e}function Wh(){Cn.value=!1,go.value=[]}function yo(){return Cn.value?go.value:fo.value}async function Au(){const e=Ke(),t=Sn(),s=e.currentUser.value;if(!s){_n.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${dr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":fr}});if(o.ok){const{grants:a}=await o.json(),l=await fetch(`${dr}/users`,{headers:{"x-api-key":fr}});if(l.ok){const{users:i}=await l.json(),u=new Set(a.map(c=>c.grantor_id));for(const c of i)u.has(c.id)&&c.id!==s.id&&n.push({id:c.id,name:`${c.first_name} ${c.last_name}`,email:c.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}_n.value=n}async function al(e=!1){if(Cn.value)return{success:!0};const t=Ke(),s=sl(),n=t.currentUser.value;if(!n)return en.value="No authenticated user",{success:!1,error:en.value};pr.value=!0,en.value=null;try{if(!ns.value||ns.value===n.id)ns.value=n.id,await s.fetchProgress(e),fo.value=s.decryptedObservations.value;else{const o=await fetch(`${dr}/observations?user_id=${ns.value}&limit=10000`,{headers:{"x-api-key":fr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();fo.value=a.observations||[]}return{success:!0}}catch(o){return en.value=o.message,{success:!1,error:o.message}}finally{pr.value=!1}}async function Kh(e){ns.value=e,await al(!0)}const vr=N(()=>{var n;const e=yo(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:Eu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),mr=N(()=>{const e=yo(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=om(o),l=Zc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:am(a).name,skillName:l.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Tu=N(()=>_a.value?vr.value.filter(e=>e.total>0):vr.value),Nu=N(()=>_a.value?mr.value.filter(e=>e.total>0):mr.value);function Eu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Vh=N(()=>ol.value==="lessons"?Tu.value:Nu.value),Gh=N(()=>_n.value.length>1),zh=N(()=>_n.value.find(e=>e.id===ns.value)||null),Jh=N(()=>yo().length>0),Yh=N(()=>yo().length),qh=N(()=>{const e=yo();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Xh(){const t=Ke().currentUser.value;t&&(ns.value=t.id,await Au(),await al())}function Qh(){fo.value=[],_n.value=[],ns.value=null,ol.value="lessons",_a.value=!0,en.value=null,Cn.value=!1,go.value=[]}function ws(){return{loading:pr,error:en,selectedUserId:ns,observations:fo,accessibleUsers:_n,activeTab:ol,onlyWithObservations:_a,useTestData:Cn,testObservations:go,enableTestMode:Hh,disableTestMode:Wh,lessonStats:vr,taxonStats:mr,filteredLessonStats:Tu,filteredTaxonStats:Nu,currentStats:Vh,canViewOtherUsers:Gh,selectedUser:zh,hasData:Jh,totalObservations:Yh,overallSuccessRate:qh,initialize:Xh,loadAccomplishments:al,selectUser:Kh,fetchAccessibleUsers:Au,reset:Qh,formatLessonName:Eu}}const Zh="https://api.bridge-classroom.com/api",eg="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Gt=Lt({}),hr=O(!1),gr=O(0),tg=60*60*1e3;async function sg(e,t=null,s=!1){var o,a;if(!e)return[];const n=`${e}::${t||"__all__"}`;if(!s&&Gt[n]&&Date.now()-Gt[n].fetchedAt<3e4)return Gt[n].boards;hr.value=!0;try{let l=`${Zh}/board-status?user_id=${encodeURIComponent(e)}`;t&&(l+=`&deal_subfolder=${encodeURIComponent(t)}`);const i=await fetch(l,{headers:{"x-api-key":eg}});if(!i.ok)return console.error("Failed to fetch board status:",i.status),((o=Gt[n])==null?void 0:o.boards)||[];const c=(await i.json()).boards||[];return Gt[n]={boards:c,fetchedAt:Date.now()},c}catch(l){return console.error("Failed to fetch board status:",l),((a=Gt[n])==null?void 0:a.boards)||[]}finally{hr.value=!1}}function ng(e=null,t=null){if(!e){for(const n in Gt)delete Gt[n];gr.value++;return}const s=`${e}::`;for(const n in Gt)n.startsWith(s)&&(!t||n===`${e}::${t}`||n===`${e}::__all__`)&&delete Gt[n];gr.value++}function Ou(e,t){switch(e){case"failed":return"red";case"corrected":return t&&Date.now()-new Date(t).getTime()<tg?"yellow":"orange";case"fresh_correct":return"orange";case"clean_correct":return"green";case"not_attempted":default:return"grey"}}function og(e,t){const s={};for(const n of e)s[n.deal_number]=n;return t.map(n=>{const o=s[n];return o?{boardNumber:n,status:Ou(o.status,o.last_observation_at),achievement:o.achievement||"none",lastObservationAt:o.last_observation_at}:{boardNumber:n,status:"grey",achievement:"none",lastObservationAt:null}})}function ag(e,t){try{const n=us().getPendingObservations();for(const o of n){if(!o.metadata||o.metadata.deal_subfolder!==t)continue;const a=o.metadata.deal_number,l=e.find(u=>u.boardNumber===a);if(!l)continue;const i=o.metadata.board_result;i==="failed"?l.status="red":i==="corrected"?l.status="yellow":i==="correct"?l.status="green":l.status=o.metadata.correct?"green":"red"}}catch{}}function wa(){return{loading:hr,cacheVersion:gr,fetchBoardStatus:sg,invalidateCache:ng,getDisplayColor:Ou,buildBoardMastery:og,mergeLocalPending:ag}}const rg="https://api.bridge-classroom.com/api",lg=5e3,yr=20;let gs=[],Yn=null;function zt(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),gs.push(n),gs.length>=yr?qn():Yn||(Yn=setTimeout(qn,lg))}async function qn(){if(Yn&&(clearTimeout(Yn),Yn=null),gs.length===0)return;const e=gs.splice(0);try{await fetch(`${rg}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{gs.unshift(...e),gs.length>yr*2&&(gs=gs.slice(-yr))}}const rl="https://api.bridge-classroom.com/api",Iu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",kt=O("idle"),Pu=O(null),Xs=O(null),tn=O(0),sn=O(navigator.onLine),Bn=O(!1),$i=5,ig=1e3,cg=6e4,ug=5e3;let un=null;function dg(e){const t=Math.min(ig*Math.pow(2,e),cg);return t+Math.random()*t*.25}async function Du(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${rl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return zt("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return zt("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function Ru(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${rl}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Iu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function bo(){var n,o;const e=Ke(),t=us();if(!navigator.onLine)return kt.value="offline",{success:!1,offline:!0};kt.value="syncing",Xs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const u=await Du(a);if(u.success)e.updateUser(a.id,{serverRegistered:!0}),Bn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(u.error==="email_exists")return zt("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),kt.value="error",Xs.value="Account already exists. Please use recovery.",Bn.value=!0,s;zt("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,u.error),Bn.value=!0,Xs.value=`Registration failed: ${u.error}`}}const l=await t.encryptPendingObservations();l>0&&console.log(`Encrypted ${l} observations`);let i=!1;if(a!=null&&a.dataConsent){const u=t.getPendingObservations();if(u.length>0){const c=await Ru(u);if(c.success&&c.synced>0){const f=u.filter(d=>d.encrypted).slice(0,c.synced).map(d=>{var p;return(p=d.metadata)==null?void 0:p.observation_id});s.observationsSynced=c.synced,console.log(`Synced ${c.synced} observations`);try{await ws().loadAccomplishments(!0)}catch{}try{wa().invalidateCache(a==null?void 0:a.id)}catch{}t.removeSyncedObservations(f)}c.success?((o=c.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",c.errors):(i=!0,Xs.value=((n=c.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",c.errors))}}return Bn.value||i?kt.value="error":(kt.value="idle",Pu.value=new Date().toISOString(),tn.value=0),s}catch(a){return console.error("Sync failed:",a),Xs.value=a.message,kt.value="error",s.success=!1,s}}function br(){un&&clearTimeout(un),un=setTimeout(async()=>{await bo()},ug)}async function Lu(){return un&&(clearTimeout(un),un=null),await bo()}async function Bu(){if(tn.value>=$i){console.log("Max retries reached, giving up"),kt.value="error";return}const e=dg(tn.value);tn.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${tn.value}/${$i})`),setTimeout(async()=>{const t=await bo();!t.success&&t.offline!==!0&&Bu()},e)}function fg(){var i;const e=Ke(),t=us(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(u=>u.encrypted);if(o.length===0)return;const a={observations:o.map(u=>({encrypted_data:u.encrypted_data,iv:u.iv,metadata:u.metadata}))},l=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${rl}/observations?api_key=${Iu}`,l),console.log("Sent beacon with",o.length,"observations")}function pg(){window.addEventListener("online",()=>{sn.value=!0,console.log("Back online, triggering sync"),Lu()}),window.addEventListener("offline",()=>{sn.value=!1,kt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&sn.value&&(console.log("Tab visible, triggering sync"),br())}),window.addEventListener("beforeunload",fg),setInterval(()=>{document.visibilityState==="visible"&&sn.value&&br()},5*60*1e3)}async function vg(){pg(),navigator.onLine?await bo():kt.value="offline"}function Mu(){const e=N(()=>kt.value==="syncing"),t=N(()=>kt.value==="offline"||!sn.value),s=N(()=>kt.value==="error"),n=N(()=>us().pendingCount.value>0);return{syncState:kt,lastSyncAt:Pu,lastError:Xs,retryCount:tn,isOnline:sn,registrationFailed:Bn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:vg,performSync:bo,triggerSync:br,forceSync:Lu,retrySync:Bu,registerUserWithServer:Du,syncObservationsToServer:Ru}}const ll="https://api.bridge-classroom.com/api",Uu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",os=O(null),_r=O(!1),_o=O(null);async function mg(){_r.value=!0;try{const e=await fetch(`${ll}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=os.value;os.value=t.announcement||null,os.value&&(!s||s.id!==os.value.id)&&(_o.value=null)}catch{}finally{_r.value=!1}}async function hg(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${ll}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Uu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return os.value=a.announcement||null,_o.value=null,a}async function gg(){const e=await fetch(`${ll}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Uu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);os.value=null,_o.value=null}function yg(){os.value&&(_o.value=os.value.id)}function il(){return{announcement:os,loading:_r,dismissed:_o,loadAnnouncement:mg,setAnnouncement:hg,clearAnnouncement:gg,dismiss:yg}}const As="https://api.bridge-classroom.com/api",Ts="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",In=O([]),Ns=O([]),Ba=O(null),Tt=O(!1),je=O(null);function $n(){async function e(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${As}/assignments?student_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Ts}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();if(f.success){const d=new Map;for(const p of f.assignments){const h=d.get(p.exercise_id);(!h||p.attempted_boards>h.attempted_boards)&&d.set(p.exercise_id,p)}In.value=Array.from(d.values())}else je.value=f.error||"Failed to fetch assignments";return f}catch(c){return console.error("Failed to fetch student assignments:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function t(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${As}/assignments?assigned_by=${encodeURIComponent(u)}`,{headers:{"x-api-key":Ts}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Ns.value=f.assignments:je.value=f.error||"Failed to fetch assignments",f}catch(c){return console.error("Failed to fetch teacher assignments:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function s(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${As}/assignments?classroom_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Ts}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?f.assignments:(je.value=f.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),je.value="Unable to connect to server",[]}finally{Tt.value=!1}}async function n(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${As}/assignments/${encodeURIComponent(u)}`,{headers:{"x-api-key":Ts}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Ba.value=f.assignment:je.value=f.error||"Failed to fetch assignment",f}catch(c){return console.error("Failed to fetch assignment detail:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function o({exercise_id:u,classroom_id:c,student_id:f,assigned_by:d,due_at:p,sort_order:h}){Tt.value=!0,je.value=null;try{const g=await fetch(`${As}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ts},body:JSON.stringify({exercise_id:u,classroom_id:c||null,student_id:f||null,assigned_by:d,due_at:p||null,sort_order:h??null})});if(!g.ok){const $=await g.text();return je.value=$||`Server error (${g.status})`,{success:!1,error:je.value}}const y=await g.json();return y.success?Ns.value=[y.assignment,...Ns.value]:je.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Tt.value=!1}}async function a(u){try{const c=await fetch(`${As}/assignments/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Ts}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,{success:!1,error:je.value}}const f=await c.json();return f.success&&(Ns.value=Ns.value.filter(d=>d.id!==u),In.value=In.value.filter(d=>d.id!==u)),f}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}async function l(u){try{const c=await fetch(`${As}/exercises/${encodeURIComponent(u)}`,{headers:{"x-api-key":Ts}});if(!c.ok)return null;const f=await c.json();return f.success?f.exercise.boards:null}catch(c){return console.error("Failed to fetch exercise boards:",c),null}}function i(){In.value=[],Ns.value=[],Ba.value=null,Tt.value=!1,je.value=null}return{studentAssignments:In,teacherAssignments:Ns,currentAssignment:Ba,loading:Tt,error:je,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:l,reset:i}}const bg={key:0,class:"minimal-hand"},_g={class:"seat-label-inline"},wg={class:"seat-label"},Sg={key:0,class:"suits"},Cg={key:0,class:"suit-row"},$g={key:0,class:"cards clickable-cards"},kg=["onClick"],xg={key:1,class:"cards"},Ag={key:2,class:"cards"},Tg={key:1,class:"hidden-hand"},Ng={key:2,class:"hcp"},Eg={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Xc,n=N(()=>lr(t.seat)),o=N(()=>Xv(t.hand)),a=N(()=>t.hand?s.reduce(($,C)=>{var _;return $+(((_=t.hand[C])==null?void 0:_.length)||0)},0):0),l=N(()=>a.value>0&&a.value<5);function i($){return t.hand&&t.hand[$]&&t.hand[$].length>0}function u($){return Yr[$]}function c($){return Yv($)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d($){return f[$]||$}function p($){if(!t.hand||!t.hand[$])return"";const C=t.hand[$];return C.length===0?"":C.map(Ra).join(" ")}const h=N(()=>t.playedCards&&t.playedCards.length>0),g=N(()=>{if(!t.playedCards)return null;const $=new Set;for(const C of t.playedCards){const _=C[0].toUpperCase(),w=C.slice(1).toUpperCase(),A={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];A&&$.add(`${A}:${w}`)}return $});function y($,C){return g.value?g.value.has(`${$}:${C}`):!1}return($,C)=>(v(),m("div",{class:ie(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(v(),m("div",bg,[r("span",_g,b(e.seat),1),(v(!0),m(X,null,le(M(s),_=>(v(),m("span",{key:_,class:ie(["suit-symbol-inline",c(_)])},b(u(_)),3))),128))])):(v(),m(X,{key:1},[r("div",wg,b(n.value),1),!e.hidden&&e.hand?(v(),m("div",Sg,[(v(!0),m(X,null,le(M(s),_=>(v(),m(X,{key:_},[!l.value||i(_)?(v(),m("div",Cg,[r("span",{class:ie(["suit-symbol",c(_)])},b(u(_)),3),e.clickable?(v(),m("span",$g,[(v(!0),m(X,null,le(e.hand[_],w=>(v(),m("span",{key:w,class:ie(y(_,w)?"card-played":"card-clickable"),onClick:A=>!y(_,w)&&$.$emit("card-click",{suit:d(_),rank:w})},b(M(Ra)(w)),11,kg))),128))])):h.value?(v(),m("span",xg,[(v(!0),m(X,null,le(e.hand[_],w=>(v(),m("span",{key:w,class:ie({"card-played":y(_,w)})},b(M(Ra)(w)),3))),128))])):(v(),m("span",Ag,b(p(_)),1))])):F("",!0)],64))),128))])):e.hidden?(v(),m("div",Tg,[...C[0]||(C[0]=[r("div",{class:"card-back"},null,-1)])])):F("",!0),e.showHcp&&e.hand&&!e.hidden&&!l.value?(v(),m("div",Ng,b(o.value)+" HCP ",1)):F("",!0)],64))],2))}},No=we(Eg,[["__scopeId","data-v-128fc7ed"]]),Og={class:"ns-column north-row"},Ig={key:0,class:"position north"},Pg={key:0,class:"position west"},Dg={class:"center"},Rg={key:1,class:"position east"},Lg={class:"ns-column south-row"},Bg={key:0,class:"position south"},Mg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,l;return v(),m("div",{class:ie(["bridge-table",{compact:e.compact}])},[r("div",Og,[!e.hiddenSeats.includes("N")&&e.hands.N?(v(),m("div",Ig,[ye(No,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(v(),m("div",Pg,[ye(No,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),r("div",Dg,[pf(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(v(),m("div",Rg,[ye(No,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),r("div",Lg,[!e.hiddenSeats.includes("S")&&e.hands.S?(v(),m("div",Bg,[ye(No,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(l=e.playedCards)==null?void 0:l.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)])],2)}}},Ug=we(Mg,[["__scopeId","data-v-ec6230a9"]]),Fg={class:"bidding-box"},jg={class:"bid-section"},Hg={class:"levels"},Wg=["onClick"],Kg={class:"strains"},Vg=["disabled","onClick"],Gg=["innerHTML"],zg={class:"special-bids"},Jg=["disabled"],Yg=["disabled"],qg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=O(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],l=N(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=N(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const h=p[1].toUpperCase();return d.indexOf(h==="N"?"NT":h)});function u(d){o.value=d}function c(d,p){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(p);return d>l.value||d===l.value&&g>i.value}function f(d,p){c(d,p)&&n("bid",`${d}${p}`)}return(d,p)=>(v(),m("div",Fg,[r("div",jg,[r("div",Hg,[(v(),m(X,null,le(7,h=>r("button",{key:h,class:ie(["level-btn",{active:o.value===h}]),onClick:g=>u(h)},b(h),11,Wg)),64))]),r("div",Kg,[(v(),m(X,null,le(a,h=>r("button",{key:h.value,class:ie(["strain-btn",[h.colorClass,{disabled:!c(o.value,h.value)}]]),disabled:!c(o.value,h.value),onClick:g=>f(o.value,h.value)},[r("span",{innerHTML:h.display},null,8,Gg)],10,Vg)),64))])]),r("div",zg,[r("button",{class:"special-btn pass",onClick:p[0]||(p[0]=h=>d.$emit("bid","Pass"))}," Pass "),r("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=h=>d.$emit("bid","X"))}," Double ",8,Jg),r("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=h=>d.$emit("bid","XX"))}," Redouble ",8,Yg)])]))}},Xg=we(qg,[["__scopeId","data-v-38ccb98f"]]),Qg={class:"auction-table"},Zg={class:"rounds"},ey=["innerHTML"],ty={key:1,class:"turn-indicator"},sy={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=N(()=>["W","N","E","S"].indexOf(t.dealer)),n=N(()=>{const c=[],f=t.bids;let d=0,p=0;for(;d<f.length||p===0&&f.length>0;){const h=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&d<f.length;y++)h[y]=f[d],d++;if(h.some(y=>y!==null)&&c.push(h),p++,p>20)break}if(t.currentBidIndex>=f.length){const h=c[c.length-1],g=h?h.filter(y=>y!==null).length:0;if(c.length===1&&s.value,g===4||c.length>1&&g===4){const y=[null,null,null,null];c.push(y)}}return c});function o(c,f){return c===0?f-s.value:4-s.value+(c-1)*4+f}function a(c,f){const d=o(c,f);return d===t.currentBidIndex&&d>=t.bids.length}function l(c,f){return t.wrongBidIndex<0?!1:o(c,f)===t.wrongBidIndex}function i(c,f){return t.correctBidIndex<0?!1:o(c,f)===t.correctBidIndex}function u(c){return qr(c).html}return(c,f)=>(v(),m("div",Qg,[f[0]||(f[0]=oo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),r("div",Zg,[(v(!0),m(X,null,le(n.value,(d,p)=>(v(),m("div",{key:p,class:"round"},[(v(!0),m(X,null,le(d,(h,g)=>(v(),m("div",{key:g,class:ie(["bid-cell",{"current-turn":a(p,g),"wrong-bid":l(p,g),"correct-bid":i(p,g)}])},[h?(v(),m("span",{key:0,innerHTML:u(h)},null,8,ey)):e.showTurnIndicator&&a(p,g)?(v(),m("span",ty,"?")):F("",!0)],2))),128))]))),128))])]))}},ny=we(sy,[["__scopeId","data-v-ac265db8"]]),oy={class:"deal-info"},ay={class:"board-number"},ry={key:0,class:"board-popup"},ly={class:"popup-list"},iy=["onClick"],cy={class:"info-row"},uy={class:"info-item"},dy={class:"value"},fy={class:"info-item"},py={key:0,class:"contract-row"},vy={class:"info-item"},my=["innerHTML"],hy={key:0,class:"label"},gy={key:0,class:"info-item"},yy=["innerHTML"],by={key:1,class:"title"},_y={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=O(!1);function a(p){n("goto",p),o.value=!1}const l=N(()=>lr(s.dealer)),i=N(()=>lr(s.declarer)),u=N(()=>qv(s.vulnerable)),c=N(()=>{var h;const p=(h=s.vulnerable)==null?void 0:h.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),f=N(()=>s.contract?qr(s.contract).html:""),d=N(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],h=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},$=g[p]||p;return`<span class="${y[p]||"black"}">${$}</span>${h==="T"?"10":h}`});return(p,h)=>(v(),m("div",oy,[r("div",{class:"board-selector",onMouseenter:h[0]||(h[0]=g=>o.value=!0),onMouseleave:h[1]||(h[1]=g=>o.value=!1)},[r("div",ay,"Board "+b(e.boardNumber),1),o.value&&e.totalDeals>1?(v(),m("div",ry,[h[2]||(h[2]=r("div",{class:"popup-header"},"Select Board",-1)),r("div",ly,[(v(!0),m(X,null,le(e.totalDeals,g=>(v(),m("button",{key:g,class:ie(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+b(e.dealBoardNumbers[g-1]||g),11,iy))),128))])])):F("",!0)],32),r("div",cy,[r("div",uy,[h[3]||(h[3]=r("span",{class:"label"},"Dealer:",-1)),r("span",dy,b(l.value),1)]),r("div",fy,[h[4]||(h[4]=r("span",{class:"label"},"Vul:",-1)),r("span",{class:ie(["value",c.value])},b(u.value),3)])]),e.showContract&&e.contract?(v(),m("div",py,[r("div",vy,[r("span",{class:"value contract",innerHTML:f.value},null,8,my),e.declarer?(v(),m("span",hy,"by "+b(i.value),1)):F("",!0)]),e.openingLead?(v(),m("div",gy,[h[5]||(h[5]=r("span",{class:"label"},"OL:",-1)),r("span",{class:"value lead-card",innerHTML:d.value},null,8,yy)])):F("",!0)])):F("",!0),e.title?(v(),m("div",by,b(e.title),1)):F("",!0)]))}},wy=we(_y,[["__scopeId","data-v-5a844c49"]]),Sy={class:"feedback-header"},Cy={key:0,class:"icon"},$y={key:1,class:"icon"},ky={class:"title"},xy={key:0,class:"feedback-content"},Ay={class:"bid-comparison"},Ty={class:"bid-item your-bid"},Ny=["innerHTML"],Ey={class:"bid-item correct-bid"},Oy=["innerHTML"],Iy={key:1,class:"feedback-content"},Py={class:"bid-comparison"},Dy={class:"bid-item your-bid"},Ry=["innerHTML"],Ly={class:"bid-item correct-bid"},By=["innerHTML"],My=["innerHTML"],Uy={class:"actions"},Fy={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=N(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return qr(a).html}function o(a){return Qv(a).html}return(a,l)=>e.visible?(v(),m("div",{key:0,class:ie(["feedback-panel",e.type])},[r("div",Sy,[e.type==="wrong"?(v(),m("span",Cy,"")):e.type==="correct"?(v(),m("span",$y,"")):F("",!0),r("span",ky,b(s.value),1)]),e.wrongBid?(v(),m("div",xy,[r("div",Ay,[r("div",Ty,[l[1]||(l[1]=r("span",{class:"label"},"Your bid:",-1)),r("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Ny)]),r("div",Ey,[l[2]||(l[2]=r("span",{class:"label"},"Correct bid:",-1)),r("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Oy)])])])):F("",!0),e.wrongCardCode?(v(),m("div",Iy,[r("div",Py,[r("div",Dy,[l[3]||(l[3]=r("span",{class:"label"},"Your card:",-1)),r("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Ry)]),r("div",Ly,[l[4]||(l[4]=r("span",{class:"label"},"Correct card:",-1)),r("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,By)])])])):F("",!0),e.commentary?(v(),m("div",{key:2,class:"commentary",innerHTML:M(qs)(e.commentary)},null,8,My)):F("",!0),r("div",Uy,[e.showContinue?(v(),m("button",{key:0,class:"btn continue",onClick:l[0]||(l[0]=i=>a.$emit("continue"))}," Continue ")):F("",!0)])],2)):F("",!0)}},ki=we(Fy,[["__scopeId","data-v-04368462"]]),jy={class:"welcome-screen"},Hy={class:"welcome-card"},Wy={class:"welcome-header"},Ky={key:0,class:"welcome-body"},Vy={class:"form-group"},Gy={key:0,class:"error-message"},zy={class:"form-group"},Jy={key:0,class:"error-message"},Yy={class:"form-group"},qy={key:0,class:"error-message"},Xy={key:0,class:"form-group"},Qy={class:"checkbox-group"},Zy=["value","checked","onChange"],eb={key:1,class:"form-group"},tb={class:"single-classroom"},sb={class:"form-group consent-group"},nb={class:"checkbox-label consent-label"},ob={key:0,class:"consent-details"},ab=["disabled"],rb={key:0},lb={key:1},ib={key:1,class:"welcome-body returning"},cb={key:2,class:"welcome-body switcher"},ub={class:"user-list"},db=["onClick"],fb={class:"user-name"},pb={key:0,class:"user-class"},vb={key:3,class:"welcome-body recovery-sent"},mb={class:"subtitle"},hb={class:"recovery-info"},gb={class:"code-entry"},yb=["disabled"],bb={key:0},_b={key:1},wb={key:0,class:"error-message"},Sb={key:4,class:"welcome-body recovery-claiming"},Cb={class:"subtitle"},$b={key:0,class:"recovery-error-panel"},kb={class:"error-message"},xb={key:1,class:"loading-spinner"},Ab={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=ho(),o=Ke(),a="https://api.bridge-classroom.com/api",l=O("form"),i=O(""),u=O(""),c=O(""),f=O([]),d=O(!0),p=O({firstName:"",lastName:"",email:"",classrooms:""}),h=O(!1),g=O(!1),y=O(""),$=O(""),C=O(""),_=O(""),w=O("");yt(async()=>{o.initialize(),n.initializeFromUrl();const I=new URLSearchParams(window.location.search),k=I.get("recover"),E=I.get("user_id");if(k&&E){await me(E,k),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?l.value="returning":o.hasUsers.value?l.value="switcher":l.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const A=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),U=N(()=>i.value.trim().length>0&&u.value.trim().length>0&&c.value.trim().length>0&&A.test(c.value.trim())),R=N(()=>o.currentUser.value?o.currentUser.value.firstName:""),Y=N(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function z(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let I=!0;return i.value.trim()||(p.value.firstName="First name is required",I=!1),u.value.trim()||(p.value.lastName="Last name is required",I=!1),c.value.trim()?A.test(c.value.trim())||(p.value.email="Please enter a valid email address",I=!1):(p.value.email="Email is required",I=!1),o.findUserByEmail(c.value)&&(p.value.email="This email is already registered on this device.",I=!1),I}async function ue(){const I=c.value.trim().toLowerCase();if(!navigator.onLine)return zt("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const k=await o.requestRecovery(I,a);return k.success?($.value=I,_.value=k.message,l.value="recovery-sent",!1):k.message&&k.message.includes("No account found")?!0:(zt("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${I}`,k.message),await qn(),p.value.email=k.message||"Unable to verify email. Please try again.",!1)}catch(k){return zt("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${I}`,k),await qn(),D?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function me(I,k){l.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",C.value="";try{const E=await o.claimRecovery(I,k,a);E.success&&E.user?s("userReady",E.user):(C.value=E.error||"Recovery failed. Please try again.",l.value="form")}catch(E){zt("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${I}`,E),C.value="Unable to complete recovery. Please try again.",l.value="form"}finally{g.value=!1,y.value=""}}async function fe(){if(w.value.trim().length===6){g.value=!0,y.value="Verifying code...",C.value="";try{const I=await o.claimRecoveryByCode($.value.trim(),w.value.trim(),a);I.success&&I.user?s("userReady",I.user):C.value=I.error||"Invalid code. Please check and try again."}catch(I){zt("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${$.value.trim()}`,I),C.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function be(){if(!z())return;if(g.value=!0,y.value="Checking account...",!await ue()){g.value=!1,y.value="";return}let k=[];n.hasSingleClassroom.value?k=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(k=[...f.value]),y.value="Creating your secure encryption key...";try{const E=await o.createUser({firstName:i.value,lastName:u.value,email:c.value,classrooms:k,dataConsent:d.value,apiUrl:a});s("userReady",E)}catch(E){const ce=E instanceof Error?E.message:String(E);zt("registration_create_user_failed",`handleSubmit  createUser threw for ${c.value.trim()}`,E),await qn(),p.value.email=`Failed to create account: ${ce}. Please try again.`}finally{g.value=!1,y.value=""}}function $e(){s("userReady",o.currentUser.value)}function pe(){l.value="switcher"}function ve(I){o.switchUser(I),s("userReady",o.currentUser.value)}function Z(){i.value="",u.value="",c.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},l.value="form"}function Q(){o.currentUser.value?l.value="returning":o.hasUsers.value&&(l.value="switcher")}function te(I){const k=f.value.indexOf(I);k===-1?f.value.push(I):f.value.splice(k,1)}return(I,k)=>(v(),m("div",jy,[r("div",Hy,[r("div",Wy,[r("h1",null,b(Y.value),1)]),l.value==="form"?(v(),m("div",Ky,[k[16]||(k[16]=r("h2",null,"Welcome!",-1)),k[17]||(k[17]=r("p",{class:"subtitle"},"Please enter your name to get started.",-1)),r("form",{onSubmit:St(be,["prevent"]),class:"user-form"},[r("div",Vy,[k[8]||(k[8]=r("label",{for:"firstName"},"First Name",-1)),We(r("input",{id:"firstName","onUpdate:modelValue":k[0]||(k[0]=E=>i.value=E),type:"text",placeholder:"Enter your first name",class:ie({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[wt,i.value]]),p.value.firstName?(v(),m("span",Gy,b(p.value.firstName),1)):F("",!0)]),r("div",zy,[k[9]||(k[9]=r("label",{for:"lastName"},"Last Name",-1)),We(r("input",{id:"lastName","onUpdate:modelValue":k[1]||(k[1]=E=>u.value=E),type:"text",placeholder:"Enter your last name",class:ie({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[wt,u.value]]),p.value.lastName?(v(),m("span",Jy,b(p.value.lastName),1)):F("",!0)]),r("div",Yy,[k[10]||(k[10]=r("label",{for:"email"},"Email Address",-1)),We(r("input",{id:"email","onUpdate:modelValue":k[2]||(k[2]=E=>c.value=E),type:"email",placeholder:"Enter your email address",class:ie({"has-error":p.value.email}),autocomplete:"email"},null,2),[[wt,c.value]]),p.value.email?(v(),m("span",qy,b(p.value.email),1)):F("",!0),k[11]||(k[11]=r("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),M(n).hasMultipleClassrooms.value?(v(),m("div",Xy,[k[12]||(k[12]=r("label",null,"Select Your Class(es)",-1)),r("div",Qy,[(v(!0),m(X,null,le(M(n).availableClassrooms.value,E=>(v(),m("label",{key:E.id,class:"checkbox-label"},[r("input",{type:"checkbox",value:E.id,checked:f.value.includes(E.id),onChange:ce=>te(E.id)},null,40,Zy),r("span",null,b(E.name),1)]))),128))])])):M(n).hasSingleClassroom.value?(v(),m("div",eb,[k[13]||(k[13]=r("label",null,"Class",-1)),r("div",tb,b(M(n).singleClassroom.value.name),1)])):F("",!0),r("div",sb,[r("label",nb,[We(r("input",{type:"checkbox","onUpdate:modelValue":k[3]||(k[3]=E=>d.value=E)},null,512),[[Vr,d.value]]),k[14]||(k[14]=r("span",null," Preserve my practice history ",-1))]),r("button",{type:"button",class:"details-toggle",onClick:k[4]||(k[4]=E=>h.value=!h.value)},b(h.value?"Hide details":"What data is preserved?"),1),h.value?(v(),m("div",ob,[...k[15]||(k[15]=[oo('<p data-v-903ed78e>Your practice history is saved online so you can track your progress over time.</p><p data-v-903ed78e><strong data-v-903ed78e>How it works:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Your data is encrypted with your personal key</li><li data-v-903ed78e>Only you and people you authorize can view it</li><li data-v-903ed78e>The site administrator can also access your data</li></ul><p data-v-903ed78e><strong data-v-903ed78e>What&#39;s preserved:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Which hands you practiced</li><li data-v-903ed78e>Your bidding choices (correct and incorrect)</li><li data-v-903ed78e>When you practiced</li></ul><p class="consent-note" data-v-903ed78e>You can change this setting anytime in Settings.</p>',6)])])):F("",!0)]),r("button",{type:"submit",class:"submit-btn",disabled:!U.value||g.value},[g.value?(v(),m("span",rb,b(y.value),1)):(v(),m("span",lb,"Start Practicing"))],8,ab)],32),M(o).hasUsers.value?(v(),m("button",{key:0,class:"back-link",onClick:Q}," Back to user selection ")):F("",!0)])):l.value==="returning"?(v(),m("div",ib,[r("h2",null,"Welcome back, "+b(R.value)+"!",1),k[18]||(k[18]=r("p",{class:"subtitle"},"Ready to continue practicing?",-1)),r("button",{class:"submit-btn",onClick:$e}," Continue "),r("button",{class:"switch-link",onClick:pe}," Not "+b(R.value)+"? Switch user ",1)])):l.value==="switcher"?(v(),m("div",cb,[k[19]||(k[19]=r("h2",null,"Select User",-1)),k[20]||(k[20]=r("p",{class:"subtitle"},"Choose who's practicing today:",-1)),r("div",ub,[(v(!0),m(X,null,le(M(o).allUsers.value,E=>{var ce;return v(),m("button",{key:E.id,class:ie(["user-item",{"is-current":E.id===M(o).currentUserId.value}]),onClick:Ce=>ve(E.id)},[r("span",fb,b(E.firstName)+" "+b(E.lastName),1),(ce=E.classrooms)!=null&&ce.length?(v(),m("span",pb,b(E.classrooms.join(", ")),1)):F("",!0)],10,db)}),128))]),r("button",{class:"add-user-btn",onClick:Z}," + Add New User "),M(o).currentUser.value?(v(),m("button",{key:0,class:"back-link",onClick:Q}," Cancel ")):F("",!0)])):l.value==="recovery-sent"?(v(),m("div",vb,[k[25]||(k[25]=r("h2",null,"Check Your Email",-1)),r("p",mb,[k[21]||(k[21]=Ae(" We found an existing account for ",-1)),r("strong",null,b($.value),1),k[22]||(k[22]=Ae(". ",-1))]),r("div",hb,[r("p",null,b(_.value),1),k[23]||(k[23]=r("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),r("div",gb,[k[24]||(k[24]=r("label",{for:"recoveryCode"},"Recovery Code",-1)),We(r("input",{id:"recoveryCode","onUpdate:modelValue":k[5]||(k[5]=E=>w.value=E),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:zo(fe,["enter"])},null,544),[[wt,w.value]]),r("button",{class:"submit-btn",disabled:w.value.trim().length!==6||g.value,onClick:fe},[g.value?(v(),m("span",bb,b(y.value),1)):(v(),m("span",_b,"Restore Account"))],8,yb),C.value?(v(),m("span",wb,b(C.value),1)):F("",!0)]),r("button",{class:"back-link",onClick:k[6]||(k[6]=E=>l.value="form")}," Use a different email ")])):l.value==="recovery-claiming"?(v(),m("div",Sb,[k[27]||(k[27]=r("h2",null,"Restoring Your Account",-1)),r("p",Cb,b(y.value),1),C.value?(v(),m("div",$b,[r("p",kb,b(C.value),1),r("button",{class:"back-link",onClick:k[7]||(k[7]=E=>l.value="form")}," Try again ")])):(v(),m("div",xb,[...k[26]||(k[26]=[r("div",{class:"spinner"},null,-1)])]))])):F("",!0)])]))}},Tb=we(Ab,[["__scopeId","data-v-903ed78e"]]),Es="https://api.bridge-classroom.com/api",Gs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Os=O([]),zs=O(null),Nt=O(!1),Xe=O(null);function wo(){async function e(u){Nt.value=!0,Xe.value=null;try{const f=await(await fetch(`${Es}/classrooms?teacher_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Gs}})).json();return f.success?Os.value=f.classrooms:Xe.value=f.error||"Failed to fetch classrooms",f}catch(c){return console.error("Failed to fetch classrooms:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function t(u,c,f){Nt.value=!0,Xe.value=null;try{const d=await fetch(`${Es}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Gs},body:JSON.stringify({teacher_id:u,name:c,description:f||null})});if(!d.ok){const h=await d.text();return Xe.value=h||`Server error (${d.status})`,{success:!1,error:Xe.value}}const p=await d.json();return p.success?Os.value=[p.classroom,...Os.value]:Xe.value=p.error||"Failed to create classroom",p}catch(d){return console.error("Failed to create classroom:",d),Xe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function s(u){Nt.value=!0,Xe.value=null;try{const f=await(await fetch(`${Es}/classrooms/${encodeURIComponent(u)}`,{headers:{"x-api-key":Gs}})).json();return f.success?zs.value=f.classroom:Xe.value=f.error||"Failed to fetch classroom",f}catch(c){return console.error("Failed to fetch classroom detail:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function n(u,c){try{const d=await(await fetch(`${Es}/classrooms/${encodeURIComponent(u)}/members/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":Gs}})).json();if(d.success&&zs.value){zs.value.members=zs.value.members.filter(h=>h.student_id!==c);const p=Os.value.findIndex(h=>h.id===u);p!==-1&&Os.value[p].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(u){Nt.value=!0,Xe.value=null;try{const c=await fetch(`${Es}/join/${encodeURIComponent(u)}`);return c.status===404?(Xe.value="Classroom not found",null):await c.json()}catch(c){return console.error("Failed to fetch join info:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function a(u,c,f){Nt.value=!0,Xe.value=null;try{const p=await(await fetch(`${Es}/join/${encodeURIComponent(u)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Gs},body:JSON.stringify({student_id:c,encrypted_grant_payload:f})})).json();return p.success||(Xe.value=p.error||"Failed to join classroom"),p}catch(d){return console.error("Failed to join classroom:",d),Xe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function l(u,c){try{return await(await fetch(`${Es}/classrooms/${encodeURIComponent(u)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Gs},body:JSON.stringify({student_id:c})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){Os.value=[],zs.value=null,Nt.value=!1,Xe.value=null}return{teacherClassrooms:Os,currentClassroom:zs,loading:Nt,error:Xe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:l,reset:i}}const Nb={class:"settings-panel"},Eb={class:"settings-body"},Ob={class:"settings-section"},Ib={class:"info-row"},Pb={class:"info-value"},Db={class:"info-row"},Rb={class:"info-value"},Lb={class:"info-row"},Bb={class:"info-row"},Mb={class:"info-value"},Ub={key:1,class:"edit-form"},Fb={class:"form-group"},jb={class:"form-group"},Hb={class:"form-group"},Wb={class:"checkbox-label"},Kb={key:0,class:"settings-section"},Vb={class:"assignment-list"},Gb={class:"assignment-header"},zb={class:"assignment-name"},Jb={class:"assignment-progress"},Yb={class:"progress-bar"},qb={class:"assignment-meta"},Xb={key:0},Qb={class:"assignment-list"},Zb={class:"assignment-header"},e_={class:"assignment-name"},t_={class:"assignment-meta"},s_={key:1,class:"settings-section"},n_={class:"classroom-id"},o_=["disabled","onClick"],a_={class:"settings-section"},r_={class:"toggle-row"},l_={class:"toggle-label"},i_=["checked"],c_={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Ke(),o=ho(),a=ya(),l=wo(),i=O(!1),u=O(""),c=O(""),f=O(!0),d=N(()=>n.currentUser.value),p=N(()=>{var Y;return!d.value||!((Y=d.value.classrooms)!=null&&Y.length)?"No classroom assigned":d.value.classrooms.map(z=>{const ue=o.availableClassrooms.value.find(me=>me.id===z);return ue?ue.name:z}).join(", ")}),h=N(()=>a.getAllAssignments().filter(Y=>Y.completionPercent<100)),g=N(()=>a.getAllAssignments().filter(Y=>Y.completionPercent>=100));function y(){d.value&&(u.value=d.value.firstName,c.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function $(){i.value=!1}function C(){d.value&&(n.updateUser(d.value.id,{firstName:u.value,lastName:c.value,dataConsent:f.value}),i.value=!1)}function _(){s("switchUser")}function w(){i.value=!1,s("close")}const A=O(null);async function D(Y){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(A.value=Y,(await l.leaveClassroom(Y,d.value.id)).success){const ue=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:ue.filter(me=>me!==Y)})}A.value=null}function U(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function R(Y){return Y?new Date(Y).toLocaleDateString():"N/A"}return(Y,z)=>{var ue,me,fe,be,$e,pe,ve;return e.visible?(v(),m("div",{key:0,class:"settings-overlay",onClick:St(w,["self"])},[r("div",Nb,[r("div",{class:"settings-header"},[z[5]||(z[5]=r("h2",null,"Settings",-1)),r("button",{class:"close-btn",onClick:w,"aria-label":"Close"},"  ")]),r("div",Eb,[r("section",Ob,[z[12]||(z[12]=r("h3",null,"Your Profile",-1)),i.value?(v(),m("div",Ub,[r("div",Fb,[z[10]||(z[10]=r("label",{for:"editFirstName"},"First Name",-1)),We(r("input",{id:"editFirstName","onUpdate:modelValue":z[1]||(z[1]=Z=>u.value=Z),type:"text"},null,512),[[wt,u.value]])]),r("div",jb,[z[11]||(z[11]=r("label",{for:"editLastName"},"Last Name",-1)),We(r("input",{id:"editLastName","onUpdate:modelValue":z[2]||(z[2]=Z=>c.value=Z),type:"text"},null,512),[[wt,c.value]])]),r("div",Hb,[r("label",Wb,[We(r("input",{type:"checkbox","onUpdate:modelValue":z[3]||(z[3]=Z=>f.value=Z)},null,512),[[Vr,f.value]]),r("span",null,"Share practice results with "+b(M(o).teacherName.value||"teacher"),1)])]),r("div",{class:"button-row"},[r("button",{class:"primary-btn",onClick:C}," Save Changes "),r("button",{class:"secondary-btn",onClick:$}," Cancel ")])])):(v(),m(X,{key:0},[r("div",Ib,[z[6]||(z[6]=r("span",{class:"info-label"},"Name",-1)),r("span",Pb,b((ue=d.value)==null?void 0:ue.firstName)+" "+b((me=d.value)==null?void 0:me.lastName),1)]),r("div",Db,[z[7]||(z[7]=r("span",{class:"info-label"},"Class",-1)),r("span",Rb,b(p.value),1)]),r("div",Lb,[z[8]||(z[8]=r("span",{class:"info-label"},"Data Sharing",-1)),r("span",{class:ie(["info-value",(fe=d.value)!=null&&fe.dataConsent?"enabled":"disabled"])},b((be=d.value)!=null&&be.dataConsent?"Enabled":"Disabled"),3)]),r("div",Bb,[z[9]||(z[9]=r("span",{class:"info-label"},"Member Since",-1)),r("span",Mb,b(R(($e=d.value)==null?void 0:$e.createdAt)),1)]),r("div",{class:"button-row"},[r("button",{class:"secondary-btn",onClick:y}," Edit Profile "),r("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((pe=d.value)==null?void 0:pe.role)!=="teacher"&&((ve=d.value)==null?void 0:ve.role)!=="admin"?(v(),m("button",{key:0,class:"become-teacher-btn",onClick:z[0]||(z[0]=Z=>{s("close"),s("become-teacher")})}," Become a Teacher ")):F("",!0)],64))]),h.value.length||g.value.length?(v(),m("section",Kb,[z[16]||(z[16]=r("h3",null,"Assignments",-1)),h.value.length?(v(),m(X,{key:0},[z[13]||(z[13]=r("h4",null,"Active",-1)),r("div",Vb,[(v(!0),m(X,null,le(h.value,Z=>(v(),m("div",{key:Z.id,class:"assignment-item"},[r("div",Gb,[r("span",zb,b(Z.name),1),r("span",Jb,b(Z.completionPercent)+"%",1)]),r("div",Yb,[r("div",{class:"progress-fill",style:et({width:`${Z.completionPercent}%`})},null,4)]),r("div",qb,[Z.dueDate?(v(),m("span",Xb," Due: "+b(R(Z.dueDate)),1)):F("",!0),r("span",null,b(Z.completedDeals)+"/"+b(Z.totalDeals)+" deals ",1)])]))),128))])],64)):F("",!0),g.value.length?(v(),m(X,{key:1},[z[15]||(z[15]=r("h4",null,"Completed",-1)),r("div",Qb,[(v(!0),m(X,null,le(g.value,Z=>(v(),m("div",{key:Z.id,class:"assignment-item completed"},[r("div",Zb,[r("span",e_,b(Z.name),1),z[14]||(z[14]=r("span",{class:"assignment-check"},"",-1))]),r("div",t_," Completed "+b(R(Z.lastPracticedAt)),1)]))),128))])],64)):F("",!0)])):F("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(v(),m("section",s_,[z[17]||(z[17]=r("h3",null,"My Classrooms",-1)),(v(!0),m(X,null,le(d.value.classrooms,Z=>(v(),m("div",{key:Z,class:"classroom-row"},[r("span",n_,b(Z),1),r("button",{class:"leave-btn",disabled:A.value===Z,onClick:Q=>D(Z)},b(A.value===Z?"Leaving...":"Leave"),9,o_)]))),128))])):F("",!0),r("section",a_,[z[19]||(z[19]=r("h3",null,"Display Options",-1)),r("div",r_,[r("label",l_,[r("input",{type:"checkbox",checked:M(o).showLoadPbnOption.value,onChange:z[4]||(z[4]=Z=>M(o).setUIPref("showLoadPbnOption",Z.target.checked))},null,40,i_),z[18]||(z[18]=r("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),r("section",{class:"settings-section"},[z[20]||(z[20]=r("h3",null,"Data & Privacy",-1)),z[21]||(z[21]=r("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),r("button",{class:"remove-device-btn",onClick:U}," Remove account from this device "),z[22]||(z[22]=r("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):F("",!0)}}},u_=we(c_,[["__scopeId","data-v-57179473"]]),d_={class:"banner-content"},f_={class:"assignment-info"},p_={class:"assignment-title"},v_={class:"assignment-name"},m_={class:"assignment-meta"},h_={class:"progress-text"},g_={class:"progress-bar"},y_={key:0,class:"complete-badge"},b_={class:"return-text"},__={__name:"AssignmentBanner",setup(e){const t=ya(),s=N(()=>t.currentAssignment.value),n=N(()=>t.hasActiveAssignment.value),o=N(()=>t.assignmentProgress.value),a=N(()=>t.isAssignmentComplete.value),l=N(()=>t.inAssignmentMode.value),i=N(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),u=N(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),c=N(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(p,h)=>{var g,y;return n.value&&l.value?(v(),m("div",{key:0,class:ie(["assignment-banner",{complete:a.value}])},[r("div",d_,[r("div",f_,[r("div",p_,[h[0]||(h[0]=r("span",{class:"assignment-label"},"Assignment:",-1)),r("span",v_,b((g=s.value)==null?void 0:g.name),1)]),r("div",m_,[r("span",h_,b(o.value.completed)+" of "+b(o.value.total)+" deals ("+b(o.value.percent)+"%) ",1),u.value?(v(),m("span",{key:0,class:ie(["due-text",c.value])},b(u.value),3)):F("",!0)])]),r("div",g_,[r("div",{class:ie(["progress-fill",{complete:a.value}]),style:et({width:`${o.value.percent}%`})},null,6)]),r("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(v(),m("div",y_," Complete! ")):F("",!0)],2)):s.value&&!l.value?(v(),m("div",{key:1,class:"return-banner",onClick:d},[h[1]||(h[1]=r("span",{class:"return-icon"},"",-1)),r("span",b_," Return to assignment: "+b((y=s.value)==null?void 0:y.name)+" ("+b(o.value.percent)+"% complete) ",1)])):F("",!0)}}},w_=we(__,[["__scopeId","data-v-a4095a6a"]]),S_=["innerHTML"],C_={__name:"AnnouncementBanner",setup(e){const t=il(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(l,i)=>{const u=s[i.toLowerCase()];return u?`<span class="ann-circle" style="background:${u.bg};color:${u.fg}"></span>`:l})}return(o,a)=>M(t).announcement.value&&M(t).dismissed.value!==M(t).announcement.value.id?(v(),m("div",{key:0,class:ie(["announcement-banner",M(t).announcement.value.type])},[r("span",{class:"announcement-text",innerHTML:n(M(t).announcement.value.message)},null,8,S_),r("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=l=>M(t).dismiss()),title:"Dismiss"},"")],2)):F("",!0)}},$_=we(C_,[["__scopeId","data-v-4b12409b"]]),k_={key:0,class:"status-content"},x_={key:1,class:"status-content offline"},A_={key:0,class:"badge"},T_={key:2,class:"status-content error"},N_={class:"status-text"},E_={key:0,class:"badge"},O_={key:3,class:"status-content pending"},I_={class:"status-text"},P_={key:4,class:"status-content synced"},D_={__name:"SyncStatus",setup(e){const t=Mu(),s=us(),n=N(()=>s.pendingCount.value),o=N(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=N(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function l(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(u,c)=>(v(),m("div",{class:ie(["sync-status",a.value]),onClick:l},[M(t).isSyncing.value?(v(),m("div",k_,[...c[0]||(c[0]=[r("span",{class:"spinner"},null,-1),r("span",{class:"status-text"},"Syncing...",-1)])])):M(t).isOffline.value?(v(),m("div",x_,[c[1]||(c[1]=r("span",{class:"icon"},"",-1)),c[2]||(c[2]=r("span",{class:"status-text"},"Offline",-1)),n.value>0?(v(),m("span",A_,b(n.value),1)):F("",!0)])):M(t).hasError.value?(v(),m("div",T_,[c[3]||(c[3]=r("span",{class:"icon"},"",-1)),r("span",N_,b(o.value),1),n.value>0?(v(),m("span",E_,b(n.value),1)):F("",!0),r("button",{class:"retry-btn",onClick:St(i,["stop"])},"Retry")])):n.value>0?(v(),m("div",O_,[c[4]||(c[4]=r("span",{class:"icon"},"",-1)),r("span",I_,b(n.value)+" pending",1)])):(v(),m("div",P_,[...c[5]||(c[5]=[r("span",{class:"icon"},"",-1),r("span",{class:"status-text"},"Synced",-1)])]))],2))}},R_=we(D_,[["__scopeId","data-v-8457149a"]]),Fu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function L_(e){return Fu.find(t=>t.path===e)||null}Fu.reduce((e,t)=>e+t.dealCount,0);const Xn=36e5;function xi(e){if(!e||e.length===0)return"untried";const t=[...e].sort((f,d)=>f.ts-d.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(f=>!f.correct&&n.ts-f.ts<Xn),l=t.slice(-5),i=l.filter(f=>f.correct).length,u=l.length-i;return a&&i/l.length>=.8&&u<=1?"mastered":l.filter(f=>f.correct?!t.filter(p=>p.ts<f.ts).reverse().find(p=>!p.correct&&f.ts-p.ts<Xn):!1).length>=1?"progressing":"struggling"}function B_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const l=a.deal_number;n[a.skill_path][l]||(n[a.skill_path][l]=[]),n[a.skill_path][l].push({correct:a.correct,ts:new Date(a.timestamp),board_result:a.board_result})}),Object.entries(n).map(([a,l])=>{var A,D;const i=Object.keys(l).map(Number).sort((U,R)=>U-R);let u=0,c=0,f=0;i.forEach(U=>{const R=xi(l[U]);R==="mastered"?u++:R==="progressing"?c++:f++});const d=i.length,p=[];i.forEach(U=>{l[U].forEach(R=>p.push({...R,dealNum:U}))}),p.sort((U,R)=>U.ts-R.ts);const h=2*Xn,g=i.map(U=>{var $e;const R=l[U].slice().sort((pe,ve)=>pe.ts-ve.ts),Y=xi(R),z=(($e=R[R.length-1])==null?void 0:$e.correct)??!1,ue=R.map((pe,ve)=>{if(pe.board_result==="corrected")return{ts:pe.ts,y:.5,correct:pe.correct};if(pe.board_result==="failed")return{ts:pe.ts,y:0,correct:!1};if(pe.correct){const Z=R.slice(0,ve).reverse().find(Q=>(Q.board_result?Q.board_result!=="correct":!Q.correct)&&pe.ts-Q.ts<Xn);return{ts:pe.ts,y:Z?.75:1,correct:!0}}else{const Z=R.slice(ve+1).find(Q=>Q.correct&&Q.ts-pe.ts<Xn);return{ts:pe.ts,y:Z?.5:0,correct:!1}}}),me=5*60*1e3,fe=ue.map(pe=>({...pe,vts:pe.ts.getTime(),rawTs:pe.ts.getTime()}));let be=0;for(;be<fe.length;){let pe=be;for(;pe+1<fe.length&&fe[pe+1].vts-fe[pe].vts<me;)pe++;if(pe>be){const ve=fe[pe].vts-fe[be].vts,Z=Math.max(ve,h),Q=ve>0?Z/ve:1,te=fe[be].vts;for(let I=be;I<=pe;I++)fe[I].vts=te+(fe[I].vts-te)*Q}be=pe+1}return{dealNum:U,status:Y,lastCorrect:z,points:fe}}),y=g.flatMap(U=>U.points.map(R=>R.rawTs)),$=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-$||1;g.forEach(U=>{U.points=U.points.map(R=>({...R,x:(R.rawTs-$)/_}))});const w=(()=>{const U=Object.values(l);if(U.length===0)return 0;const R=U.reduce((z,ue)=>{const me=ue.slice(-5);return z+me.filter(fe=>fe.correct).length},0),Y=U.reduce((z,ue)=>z+Math.min(ue.length,5),0);return Y>0?Math.round(R/Y*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:d,mastered:u,progressing:c,struggling:f,totalBoards:t[a]??d,totalAttempts:p.length,recentRate:w,boardLines:g,firstActivity:(A=p[0])==null?void 0:A.ts,lastActivity:(D=p[p.length-1])==null?void 0:D.ts}}).sort((a,l)=>(l.lastActivity||0)-(a.lastActivity||0))}function M_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=L_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const l=Zc(o);n[o]=l.name}}return{lessonTotals:s,lessonNames:n}}const nn={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function ju(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const U_={key:0,class:"sparkline-empty"},F_=["width","height"],j_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],H_=["d","stroke"],W_=["cx","cy","r","fill"],K_=5,V_=2.5,G_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=N(()=>t.width-n.l-n.r),a=N(()=>t.height-n.t-n.b),l=N(()=>{const d=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...d),h=Math.max(...d);return{min:p,max:h,span:h-p||1}});function i(d){return n.t+(1-d)*a.value}function u(d,p){const h=p>=.9?1:p>0?.5:0;return{px:n.l+(d-l.value.min)/l.value.span*o.value,py:n.t+(1-h)*a.value,yMapped:h}}const c=N(()=>t.boardLines.map(d=>{const p=nn[d.status]||"#6b7280",h=d.points.filter(y=>y.y!==.75).map(y=>u(y.x,y.y)),g=h.length>=2?h.map((y,$)=>`${$===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:h,pathD:g}})),f=N(()=>{const d=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...u(y.x,y.y),y:y.y}))),p=new Array(d.length).fill(!1),h=[];return d.forEach((g,y)=>{if(p[y])return;const $=[g];p[y]=!0,d.forEach((A,D)=>{if(p[D])return;const U=A.px-g.px,R=A.py-g.py;Math.sqrt(U*U+R*R)<K_&&($.push(A),p[D]=!0)});const C=$.reduce((A,D)=>A+D.px,0)/$.length,_=$.reduce((A,D)=>A+D.py,0)/$.length,w=$.sort((A,D)=>D.yMapped-A.yMapped)[0].yMapped;h.push({px:C,py:_,y:w,n:$.length})}),h});return(d,p)=>!e.boardLines||e.boardLines.length===0?(v(),m("div",U_," No data ")):(v(),m("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(v(),m(X,null,le(s,h=>r("line",{key:h,x1:n.l,y1:i(h),x2:n.l+o.value,y2:i(h),stroke:h===.5?"#d1d5db":"#e5e7eb","stroke-width":h===.5?1:.5,"stroke-dasharray":h===.5?"3,3":"none"},null,8,j_)),64)),(v(!0),m(X,null,le(c.value,(h,g)=>We((v(),m("path",{key:"line-"+g,d:h.pathD,fill:"none",stroke:h.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,H_)),[[rp,h.pts.length>=2]])),128)),(v(!0),m(X,null,le(f.value,(h,g)=>(v(),m("circle",{key:"bubble-"+g,cx:h.px,cy:h.py,r:V_*Math.sqrt(h.n),fill:M(ju)(h.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,W_))),128))],8,F_))}},z_=we(G_,[["__scopeId","data-v-a14e2bb7"]]),J_={class:"details-header"},Y_={class:"details-title"},q_={class:"details-subtitle"},X_=["viewBox","height"],Q_=["x","y","fill"],Z_=["y","width","height","fill","fill-opacity"],e1=["x","y","fill"],t1=["x1","y1","x2","y2","stroke-dasharray"],s1=["x","y"],n1=["cx","cy","fill","onClick"],o1={key:0,class:"details-activity"},a1={class:"stats-row"},r1={class:"stat-value"},l1={class:"stat-label"},i1=["viewBox"],c1=["x","y","width","height"],u1={class:"activity-dates"},d1={class:"details-legend"},Ma=7,Ai=.3,Ua=110,Is=560,Qt=28,Fa=40,Ti=36e5,Ct=864e5,f1={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close","dot-click"],setup(e,{emit:t}){const s=e,n=t,o={t:16,r:20,b:40,l:Ua},a=N(()=>{const w=new Set(s.lesson.boardLines.map(D=>D.dealNum)),A=s.lesson.totalBoards??Math.max(...w);return Array.from({length:A},(D,U)=>U+1)}),l=N(()=>a.value.length*Qt),i=N(()=>Is+o.l+o.r),u=N(()=>l.value+o.t+o.b),c=N(()=>new Set(s.lesson.boardLines.map(w=>w.dealNum)));function f(w){return c.value.has(w)}function d(w){const A=s.lesson.boardLines.find(D=>D.dealNum===w);return A?nn[A.status]||"#6b7280":"#d1d5db"}const p=N(()=>{const w=s.rawData.filter(Q=>Q.skill_path===s.lesson.path),A=a.value,D=w.map(Q=>{const te=new Date(Q.timestamp).getTime(),I=Q.deal_number,k=A.indexOf(I);return{rawTs:te,dealNum:I,boardIdx:k,correct:Q.correct,board_result:Q.board_result,y:Q.correct?1:0}}),U={};D.forEach(Q=>{U[Q.dealNum]||(U[Q.dealNum]=[]),U[Q.dealNum].push(Q)});for(const Q of Object.values(U))Q.sort((te,I)=>te.rawTs-I.rawTs),Q.forEach((te,I)=>{if(te.board_result==="corrected"){te.y=.5;return}if(te.board_result==="failed"){te.y=0;return}if(te.correct){const k=Q.slice(0,I).reverse().find(E=>(E.board_result?E.board_result!=="correct":!E.correct)&&te.rawTs-E.rawTs<Ti);te.y=k?.75:1}else{const k=Q.slice(I+1).find(E=>E.correct&&E.rawTs-te.rawTs<Ti);te.y=k?.5:0}});if(D.length===0)return[];const R=D.map(Q=>Q.rawTs),Y=Math.min(...R),z=Math.max(...R),ue=Math.floor(Y/Ct)*Ct,fe=(Math.floor(z/Ct)+1)*Ct-1-ue||1,be=Q=>o.l+(Q.rawTs-ue)/fe*Is,$e=Q=>o.t+Q*Qt+Qt/2,pe=Ma*2*(1-Ai),ve=Ma*2*(1-Ai),Z=D.map(Q=>({...Q,px:be(Q),py:$e(Q.boardIdx)}));return A.forEach(Q=>{const te=Z.filter(k=>k.dealNum===Q),I={};te.forEach(k=>{const E=k.rawTs;I[E]||(I[E]=[]),I[E].push(k)}),Object.values(I).forEach(k=>{if(k.length<2)return;const E=k[0].py;k.forEach((ce,Ce)=>{ce.py=E+(Ce-(k.length-1)/2)*ve})})}),A.forEach(Q=>{const te=Z.filter(E=>E.dealNum===Q).sort((E,ce)=>E.px-ce.px),I=[];let k=0;for(;k<te.length;){let E=k;for(;E+1<te.length&&te[E+1].px-te[k].px<pe;)E++;I.push({start:k,end:E}),k=E+1}I.forEach((E,ce)=>{const Ce=E.end-E.start+1;if(Ce===1)return;const Ee=(Ce-1)*pe;let Te;ce===0?Te=te[E.start].px:ce===I.length-1?Te=te[E.end].px-Ee:Te=(te[E.start].px+te[E.end].px)/2-Ee/2;for(let K=0;K<Ce;K++)te[E.start+K].px=Te+K*pe})}),Z}),h=N(()=>[...p.value].sort((w,A)=>w.y-A.y)),g=N(()=>{const w=p.value;if(w.length===0)return[];const A=w.map(me=>me.rawTs),D=Math.min(...A),U=Math.max(...A),R=Math.floor(D/Ct)*Ct,z=(Math.floor(U/Ct)+1)*Ct-1-R||1,ue=5;return Array.from({length:ue},(me,fe)=>{const be=fe/(ue-1),$e=new Date(R+be*z);return{x:o.l+be*Is,label:$e.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+$e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),y=N(()=>{const w=p.value;if(w.length===0)return null;const A={};w.forEach(fe=>{const be=Math.floor(fe.rawTs/Ct);A[be]=(A[be]||0)+1});const D=Object.keys(A).map(Number).sort();if(D.length===0)return null;const U=D[0],R=D[D.length-1],Y=R-U+1,z=Math.max(...Object.values(A)),ue=Math.max(2,Is/Y-1);return{bars:D.map(fe=>({dayKey:fe,x:(fe-U)/Y*Is,h:A[fe]/z*Fa,w:ue,count:A[fe],dateLabel:new Date(fe*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Is,firstLabel:new Date(U*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(R*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),$=N(()=>{const w=p.value,A={};return w.forEach(D=>{const U=Math.floor(D.rawTs/Ct);A[U]=!0}),[{label:"Days active",value:Object.keys(A).length},{label:"Boards tried",value:s.lesson.tried},{label:"Observations",value:w.length}]}),C=[{color:"#10b981",label:"Clean correct"},{color:"#3b82f6",label:"Recent correct (after fail within 1 hr)"},{color:"#f59e0b",label:"Corrected (errors fixed within board)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function _(w){return new Date(w).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(w,A)=>(v(),m("div",{class:"details-overlay",onClick:A[2]||(A[2]=St(D=>w.$emit("close"),["self"]))},[r("div",{class:"details-panel",onClick:A[1]||(A[1]=St(()=>{},["stop"]))},[r("div",J_,[r("div",null,[r("h2",Y_,b(e.lesson.name),1),r("p",q_,b(e.lesson.tried)+" boards  "+b(e.lesson.totalAttempts)+" attempts ",1)]),r("button",{class:"details-close-btn",onClick:A[0]||(A[0]=D=>w.$emit("close"))}," close")]),(v(),m("svg",{viewBox:`0 0 ${i.value} ${u.value}`,width:"100%",height:u.value,class:"details-chart"},[(v(!0),m(X,null,le(a.value,(D,U)=>(v(),m("rect",{key:"bg-"+D,x:o.l,y:o.t+U*Qt,width:Is,height:Qt,fill:U%2===0?"#ffffff":"#f9fafb"},null,8,Q_))),128)),(v(!0),m(X,null,le(a.value,(D,U)=>(v(),m("g",{key:"label-"+D},[r("rect",{x:2,y:o.t+U*Qt+3,width:Ua-14,height:Qt-6,rx:"3",fill:d(D),"fill-opacity":f(D)?.12:.05},null,8,Z_),r("text",{x:Ua-16,y:o.t+U*Qt+Qt/2+4,"text-anchor":"end","font-size":"13",fill:d(D),"font-family":"monospace"}," Board "+b(D)+b(f(D)?"":" "),9,e1)]))),128)),(v(!0),m(X,null,le(g.value,(D,U)=>(v(),m("line",{key:"grid-"+U,x1:D.x,y1:o.t,x2:D.x,y2:o.t+l.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":U===0||U===g.value.length-1?"none":"3,4"},null,8,t1))),128)),(v(!0),m(X,null,le(g.value,(D,U)=>(v(),m("text",{key:"tick-"+U,x:D.x,y:o.t+l.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},b(D.label),9,s1))),128)),(v(!0),m(X,null,le(h.value,(D,U)=>(v(),m("circle",{key:"dot-"+U,cx:D.px,cy:D.py,r:Ma,fill:M(ju)(D.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92",class:"obs-dot",onClick:St(R=>n("dot-click",{rawTs:D.rawTs,dealNum:D.dealNum,correct:D.correct,event:R}),["stop"])},[r("title",null,"Board "+b(D.dealNum)+"  "+b(D.correct?"Correct":"Incorrect")+"  "+b(_(D.rawTs)),1)],8,n1))),128))],8,X_)),y.value?(v(),m("div",o1,[r("div",a1,[(v(!0),m(X,null,le($.value,D=>(v(),m("div",{class:"stat-item",key:D.label},[r("div",r1,b(D.value),1),r("div",l1,b(D.label),1)]))),128))]),(v(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.barW} ${Fa}`,class:"activity-chart"},[(v(!0),m(X,null,le(y.value.bars,D=>(v(),m("rect",{key:D.dayKey,x:D.x,y:Fa-D.h,width:D.w,height:D.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[r("title",null,b(D.dateLabel)+": "+b(D.count)+" observations",1)],8,c1))),128))],8,i1)),r("div",u1,[r("span",null,b(y.value.firstLabel),1),r("span",null,b(y.value.lastLabel),1)])])):F("",!0),r("div",d1,[(v(),m(X,null,le(C,D=>r("span",{key:D.label,class:"legend-item"},[r("span",{class:"legend-dot",style:et({backgroundColor:D.color})},null,4),Ae(" "+b(D.label),1)])),64))])])]))}},p1=we(f1,[["__scopeId","data-v-2176fcbb"]]),v1={class:"obs-header-left"},m1={class:"obs-id"},h1={class:"obs-header-right"},g1={class:"timestamp"},y1={class:"obs-body"},b1={class:"obs-col"},_1={class:"card"},w1={class:"hands-grid"},S1={class:"deal-meta-top"},C1={class:"meta-row"},$1={class:"meta-value"},k1={class:"meta-row"},x1={class:"meta-value"},A1={class:"meta-row"},T1={class:"meta-value"},N1={class:"meta-row"},E1={class:"meta-value"},O1={class:"compass-north"},I1={class:"seat-label"},P1={key:0,class:"you-tag"},D1={class:"cards"},R1={key:1,class:"hidden-hand"},L1={class:"seat-label"},B1={key:0,class:"you-tag"},M1={class:"cards"},U1={key:1,class:"hidden-hand"},F1={class:"seat-label"},j1={key:0,class:"you-tag"},H1={class:"cards"},W1={key:1,class:"hidden-hand"},K1={class:"deal-meta-bottom"},V1={class:"meta-row"},G1={class:"meta-contract"},z1={class:"compass-south"},J1={class:"seat-label"},Y1={key:0,class:"you-tag"},q1={class:"cards"},X1={key:1,class:"hidden-hand"},Q1={class:"obs-col"},Z1={class:"card"},e0={class:"auction-header"},t0={key:0,class:"split-cell"},s0={class:"pill-expected"},n0={key:1,class:"split-cell"},o0={class:"pill-expected"},a0={key:0,class:"pill-student"},r0={key:2,class:"auction-bid"},l0={key:0,class:"prompts-list"},i0={class:"prompt-num"},c0={key:0,class:"prompt-detail"},u0={class:"pill-expected-sm"},d0={class:"pill-student-sm"},f0={key:1,class:"prompt-ok"},p0={key:1,class:"prompt-detail"},v0={class:"pill-expected-sm"},m0={class:"pill-student-sm"},h0={key:1,class:"prompt-ok"},g0={key:2,class:"prompt-time"},y0={key:1,class:"prompt-meta"},b0={class:"prompt-meta-auction"},_0={key:2,class:"auction-legend"},w0={key:0,class:"legend-item"},S0={key:3,class:"auction-legend"},C0={key:0,class:"legend-item"},$0={class:"card"},k0={class:"info-grid"},x0={class:"info-item"},A0={class:"info-value"},T0={class:"info-item"},N0={class:"info-value"},E0={class:"info-item full-width"},O0={class:"info-item"},I0={class:"info-value"},P0={class:"info-item"},D0={class:"info-value"},R0={class:"info-item full-width"},L0={class:"info-value mono"},B0={__name:"ObservationViewer",props:{obs:{type:Object,required:!0},initialX:{type:Number,default:100},initialY:{type:Number,default:100},zIndex:{type:Number,default:3e3}},emits:["close","focus"],setup(e,{emit:t}){const s=e,n=t,o=O(s.initialX),a=O(s.initialY);let l=!1,i=0,u=0;function c(te){l=!0,i=te.clientX-o.value,u=te.clientY-a.value,document.addEventListener("mousemove",f),document.addEventListener("mouseup",d),n("focus")}function f(te){l&&(o.value=te.clientX-i,a.value=te.clientY-u)}function d(){l=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)}Ur(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)});const p=N(()=>s.obs.deal||{}),h=N(()=>s.obs.bid_prompt||{}),g=N(()=>s.obs.result||{}),y=N(()=>g.value.correct),$=N(()=>p.value.hands||{}),C=N(()=>p.value.student_seat),_=N(()=>h.value.prompt_index===-1||h.value.expected_bid==="BOARD"),w=N(()=>s.obs.prompts||[]),A=N(()=>w.value.length>0),D=N(()=>A.value&&R.value.corrected>0||s.obs.board_result==="corrected"),U=N(()=>{if(!A.value)return{};const te=be.indexOf(p.value.dealer),I={};for(const E of w.value){if(E.type!=="bid"||!E.auction_so_far)continue;const ce=te+E.auction_so_far.length;I[ce]||(I[ce]=[]),I[ce].push(E)}const k={};for(const[E,ce]of Object.entries(I)){const Ce=ce.find(Te=>!Te.correct);if(!Ce)continue;const Ee=ce.some(Te=>Te.correct);k[E]={expected:Ce.expected_bid,student:Ce.student_bid,correct:!1,corrected:Ee}}return k}),R=N(()=>{const te=w.value,I=new Map;for(const Ee of te){const Te=Ee.type==="bid"?`bid-${Ee.prompt_index}`:`card-${te.indexOf(Ee)}`;I.has(Te)||I.set(Te,[]),I.get(Te).push(Ee)}let k=I.size,E=0,ce=0;for(const Ee of I.values()){const Te=Ee.some(ae=>!ae.correct),K=Ee.some(ae=>ae.correct);Te&&(E++,K&&ce++)}const Ce=te.reduce((Ee,Te)=>Ee+(Te.time_ms||0),0);return{total:k,wrong:E,corrected:ce,totalTime:Ce}}),Y=N(()=>h.value.expected_bid),z=N(()=>g.value.student_bid),ue=N(()=>h.value.auction_so_far||[]),me=N(()=>((s.obs.observation_id||s.obs.id||"")+"").slice(0,8)+""),fe=N(()=>s.obs.timestamp?new Date(s.obs.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),be=["W","N","E","S"],$e=N(()=>{const te=p.value.full_auction,I=(typeof te=="string"?te:Array.isArray(te)?te.join(" "):"").split(" ").filter(Boolean),k=[];for(const ce of I){const Ce=ce.toUpperCase();Ce==="AP"||Ce==="ALL"?k.push("Pass","Pass","Pass"):k.push(ce)}const E=be.indexOf(p.value.dealer);return[...Array(Math.max(0,E)).fill(null),...k]}),pe=N(()=>be.indexOf(p.value.dealer)+ue.value.length),ve=N(()=>{const te=[];for(let I=0;I<$e.value.length;I+=4)te.push($e.value.slice(I,I+4));return te});function Z(te){return!te||te<=0?"":te<1e3?te+"ms":(te/1e3).toFixed(1)+"s"}function Q(te){if(!te)return null;if(typeof te=="object"&&te.spades!==void 0)return[{suit:"",cards:(te.spades||[]).join(""),color:"black"},{suit:"",cards:(te.hearts||[]).join(""),color:"red"},{suit:"",cards:(te.diamonds||[]).join(""),color:"red"},{suit:"",cards:(te.clubs||[]).join(""),color:"black"}];if(typeof te!="string")return null;const I=te.split(".");if(I.length<4)return null;const[k,E,ce,Ce]=I;return[{suit:"",cards:k,color:"black"},{suit:"",cards:E,color:"red"},{suit:"",cards:ce,color:"red"},{suit:"",cards:Ce,color:"black"}]}return(te,I)=>(v(),m("div",{class:"obs-viewer",style:et({left:o.value+"px",top:a.value+"px",zIndex:e.zIndex}),onMousedown:I[1]||(I[1]=k=>te.$emit("focus"))},[r("div",{class:"obs-header",onMousedown:St(c,["prevent"])},[r("div",v1,[I[2]||(I[2]=r("span",{class:"suit-icon"},"",-1)),I[3]||(I[3]=r("span",{class:"obs-title"},"Observation Detail",-1)),r("span",m1,b(me.value),1)]),r("div",h1,[r("span",g1,b(fe.value),1),r("span",{class:ie(["result-badge",D.value?"corrected":y.value?"correct":"incorrect"])},b(D.value?" Corrected":y.value?" Correct":" Incorrect"),3),r("button",{class:"close-btn",onClick:I[0]||(I[0]=k=>te.$emit("close")),title:"Close"},"")])],32),r("div",y1,[r("div",b1,[r("div",_1,[I[16]||(I[16]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ae(" Hands")],-1)),r("div",w1,[r("div",S1,[r("div",C1,[I[4]||(I[4]=r("span",{class:"meta-label"},"Lesson",-1)),r("span",$1,b(p.value.subfolder),1)]),r("div",k1,[I[5]||(I[5]=r("span",{class:"meta-label"},"Deal",-1)),r("span",x1,"#"+b(p.value.deal_number),1)]),r("div",A1,[I[6]||(I[6]=r("span",{class:"meta-label"},"Dealer",-1)),r("span",T1,b(p.value.dealer),1)]),r("div",N1,[I[7]||(I[7]=r("span",{class:"meta-label"},"Vul",-1)),r("span",E1,b(p.value.vulnerability),1)])]),r("div",O1,[r("div",{class:ie(["hand-cell",{student:C.value==="N"}])},[r("div",I1,[I[8]||(I[8]=Ae("N ",-1)),C.value==="N"?(v(),m("span",P1,"YOU")):F("",!0)]),Q($.value.north)?(v(!0),m(X,{key:0},le(Q($.value.north),k=>(v(),m("div",{key:k.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",k.color])},b(k.suit),3),r("span",D1,b(k.cards||""),1)]))),128)):(v(),m("span",R1,"Hidden"))],2)]),I[13]||(I[13]=r("div",null,null,-1)),r("div",{class:ie(["hand-cell",{student:C.value==="W"}])},[r("div",L1,[I[9]||(I[9]=Ae("W ",-1)),C.value==="W"?(v(),m("span",B1,"YOU")):F("",!0)]),Q($.value.west)?(v(!0),m(X,{key:0},le(Q($.value.west),k=>(v(),m("div",{key:k.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",k.color])},b(k.suit),3),r("span",M1,b(k.cards||""),1)]))),128)):(v(),m("span",U1,"Hidden"))],2),I[14]||(I[14]=oo('<div class="compass-center" data-v-2afa4d0f><div class="compass-rose" data-v-2afa4d0f><span class="cr-n" data-v-2afa4d0f>N</span><span class="cr-w" data-v-2afa4d0f>W</span><span class="cr-e" data-v-2afa4d0f>E</span><span class="cr-s" data-v-2afa4d0f>S</span></div></div>',1)),r("div",{class:ie(["hand-cell",{student:C.value==="E"}])},[r("div",F1,[I[10]||(I[10]=Ae("E ",-1)),C.value==="E"?(v(),m("span",j1,"YOU")):F("",!0)]),Q($.value.east)?(v(!0),m(X,{key:0},le(Q($.value.east),k=>(v(),m("div",{key:k.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",k.color])},b(k.suit),3),r("span",H1,b(k.cards||""),1)]))),128)):(v(),m("span",W1,"Hidden"))],2),r("div",K1,[r("div",V1,[I[11]||(I[11]=r("span",{class:"meta-label"},"Contract",-1)),r("span",G1,b(p.value.contract)+" by "+b(p.value.declarer),1)])]),r("div",z1,[r("div",{class:ie(["hand-cell",{student:C.value==="S"}])},[r("div",J1,[I[12]||(I[12]=Ae("S ",-1)),C.value==="S"?(v(),m("span",Y1,"YOU")):F("",!0)]),Q($.value.south)?(v(!0),m(X,{key:0},le(Q($.value.south),k=>(v(),m("div",{key:k.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",k.color])},b(k.suit),3),r("span",q1,b(k.cards||""),1)]))),128)):(v(),m("span",X1,"Hidden"))],2)]),I[15]||(I[15]=r("div",null,null,-1))])])]),r("div",Q1,[r("div",Z1,[I[28]||(I[28]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ae(" Auction")],-1)),r("div",e0,[(v(),m(X,null,le(["W","N","E","S"],k=>r("span",{key:k,class:"auction-dir"},b(k),1)),64))]),(v(!0),m(X,null,le(ve.value,(k,E)=>(v(),m("div",{key:E,class:"auction-row"},[(v(!0),m(X,null,le(k,(ce,Ce)=>(v(),m(X,{key:Ce},[A.value&&U.value[E*4+Ce]?(v(),m("div",t0,[r("span",s0,b(U.value[E*4+Ce].expected),1),r("span",{class:ie(U.value[E*4+Ce].corrected?"pill-corrected":"pill-student")},b(U.value[E*4+Ce].student),3)])):!_.value&&!A.value&&E*4+Ce===pe.value?(v(),m("div",n0,[r("span",o0,b(Y.value),1),y.value?F("",!0):(v(),m("span",a0,b(z.value),1))])):(v(),m("span",r0,b(ce||""),1))],64))),128))]))),128)),A.value?(v(),m("div",l0,[(v(!0),m(X,null,le(w.value,(k,E)=>(v(),m("div",{key:E,class:ie(["prompt-row",k.correct?"prompt-correct":"prompt-wrong"])},[r("span",i0,"#"+b(E+1),1),k.type==="bid"?(v(),m("span",c0,[I[18]||(I[18]=Ae(" Expected ",-1)),r("span",u0,b(k.expected_bid),1),k.correct?(v(),m("span",f0,"")):(v(),m(X,{key:0},[I[17]||(I[17]=Ae(" got ",-1)),r("span",d0,b(k.student_bid),1)],64))])):k.type==="card"?(v(),m("span",p0,[I[20]||(I[20]=Ae(" Expected ",-1)),r("span",v0,b(k.expected_card),1),k.correct?(v(),m("span",h0,"")):(v(),m(X,{key:0},[I[19]||(I[19]=Ae(" got ",-1)),r("span",m0,b(k.student_card),1)],64))])):F("",!0),k.time_ms>0?(v(),m("span",g0,b(Z(k.time_ms)),1)):F("",!0)],2))),128))])):_.value?(v(),m("div",y0,[I[21]||(I[21]=r("span",{class:"prompt-meta-label"},"Board summary",-1)),I[22]||(I[22]=r("span",{class:"prompt-meta-sep"},"",-1)),r("span",b0,b(y.value?"All prompts answered correctly":"Student made errors on this board"),1)])):F("",!0),!_.value&&!A.value?(v(),m("div",_0,[I[24]||(I[24]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Ae(" Expected")],-1)),y.value?F("",!0):(v(),m("span",w0,[...I[23]||(I[23]=[r("span",{class:"legend-dot red"},null,-1),Ae(" Student bid",-1)])])),I[25]||(I[25]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot gray"}),Ae(" After this point")],-1))])):A.value?(v(),m("div",S0,[I[27]||(I[27]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Ae(" Expected")],-1)),w.value.some(k=>!k.correct)?(v(),m("span",C0,[...I[26]||(I[26]=[r("span",{class:"legend-dot red"},null,-1),Ae(" Student response",-1)])])):F("",!0)])):F("",!0)]),r("div",$0,[I[35]||(I[35]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ae(" Result & Meta")],-1)),r("div",k0,[A.value?(v(),m(X,{key:0},[r("div",x0,[I[29]||(I[29]=r("span",{class:"info-label"},"Prompts",-1)),r("span",A0,b(R.value.total),1)]),r("div",T0,[I[30]||(I[30]=r("span",{class:"info-label"},"Total Time",-1)),r("span",N0,b(R.value.totalTime>0?Z(R.value.totalTime):"n/a"),1)]),r("div",E0,[I[31]||(I[31]=r("span",{class:"info-label"},"Result",-1)),r("span",{class:"info-value",style:et({color:R.value.wrong===0?"var(--green)":"var(--red)"})},b(R.value.wrong===0?"All correct":`${R.value.wrong} error${R.value.wrong>1?"s":""}`)+b(R.value.corrected>0?`, ${R.value.corrected} fixed`:""),5)])],64)):(v(),m(X,{key:1},[r("div",O0,[I[32]||(I[32]=r("span",{class:"info-label"},"Attempt #",-1)),r("span",I0,b(g.value.attempt_number),1)]),r("div",P0,[I[33]||(I[33]=r("span",{class:"info-label"},"Time Taken",-1)),r("span",D0,b(g.value.time_taken_ms===0?"n/a":g.value.time_taken_ms+" ms"),1)])],64)),r("div",R0,[I[34]||(I[34]=r("span",{class:"info-label"},"Skill Path",-1)),r("span",L0,b(e.obs.skill_path),1)])])])])])],36))}},M0=we(B0,[["__scopeId","data-v-2afa4d0f"]]),U0=30,F0={__name:"ObservationPopupManager",setup(e,{expose:t}){const s=O([]);let n=0,o=3e3;function a(c,f){const d=s.value.length*U0,p=f?Math.min(f.clientX+20+d,window.innerWidth-700):60+d,h=f?Math.min(f.clientY-40+d,window.innerHeight-400):60+d;o++,s.value.push({id:n++,obs:c,x:Math.max(10,p),y:Math.max(10,h),zIndex:o})}function l(c){s.value=s.value.filter(f=>f.id!==c)}function i(c){o++;const f=s.value.find(d=>d.id===c);f&&(f.zIndex=o)}function u(){s.value=[]}return t({openObservation:a,closeAll:u}),(c,f)=>(v(),He(qd,{to:"body"},[(v(!0),m(X,null,le(s.value,d=>(v(),He(M0,{key:d.id,obs:d.obs,"initial-x":d.x,"initial-y":d.y,"z-index":d.zIndex,onClose:p=>l(d.id),onFocus:p=>i(d.id)},null,8,["obs","initial-x","initial-y","z-index","onClose","onFocus"]))),128))]))}},j0={class:"student-progress-panel"},H0={key:0,class:"sp-empty"},W0={class:"sp-header"},K0={class:"sp-header-row"},V0={key:0,class:"sp-name-badge"},G0={class:"sp-meta"},z0={key:0,class:"sp-activity-chart"},J0={class:"sp-activity-header"},Y0={class:"sp-activity-meta"},q0={class:"sp-activity-body"},X0={class:"sp-activity-svg-wrap"},Q0=["viewBox"],Z0=["x"],ew=["x","y"],tw=["x1","x2","y2"],sw=["x","y","width","height","fill"],nw=["x","y"],ow=["x","y"],aw={class:"sp-activity-legend"},rw={class:"sp-legend"},lw={class:"sp-grid"},iw=["onClick"],cw={class:"sp-card-header"},uw={class:"sp-card-info"},dw={class:"sp-card-name"},fw={class:"sp-card-meta"},pw={class:"sp-card-rate"},vw={class:"sp-card-sparkline"},mw={class:"sp-mastery"},hw={class:"sp-mastery-track"},gw=["title"],yw={class:"sp-mastery-legend"},bw={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""},studentId:{type:String,default:""}},setup(e){const t=e,s=O(null),n=O(null),o=Sn(),a=N(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:$,lessonNames:C}=M_(t.observations);return B_(t.observations,$,C)}),l=N(()=>a.value.reduce(($,C)=>$+C.tried,0)),i=N(()=>a.value.reduce(($,C)=>$+C.totalAttempts,0)),u=[{color:"#10b981",label:"Clean correct"},{color:"#f59e0b",label:"Corrected (errors fixed)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function c($){return`hsl(${Math.round($*360/a.value.length)}, 65%, 55%)`}function f($){return $>=75?"#10b981":$>=50?"#f59e0b":"#f43f5e"}function d($){return $?$.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function p($){if(!$.firstActivity||!$.lastActivity)return null;const C=$.lastActivity-$.firstActivity,_=C/6e4,w=C/36e5,A=C/864e5;return _<90?`${Math.round(_)} min`:w<48?`${Math.round(w)} hr`:A<14?`${Math.round(A)} days`:`${Math.round(A/7)} wks`}async function h({rawTs:$,dealNum:C,correct:_,event:w}){if(n.value)if(t.studentId){const A=await o.findAndDecryptObservation(t.studentId,$,C,_);A?n.value.openObservation(A,w):console.warn("Observation decryption failed  teacher private key may be missing")}else{const A=t.observations.find(D=>{const U=new Date(D.timestamp).getTime();return Math.abs(U-$)<1e3&&D.deal_number===C&&D.correct===_});A&&n.value.openObservation(A,w)}}function g($){const C=Math.max(0,($.totalBoards||0)-$.tried),_=[{count:$.mastered,color:nn.mastered,label:"Mastered"},{count:$.progressing,color:nn.progressing,label:"Progressing"},{count:$.struggling,color:nn.struggling,label:"Struggling"},{count:C,color:nn.untried,label:"Untried"}].filter(A=>A.count>0),w=_.reduce((A,D)=>A+D.count,0);return _.forEach(A=>{A.pct=`${(A.count/w*100).toFixed(1)}%`}),_}const y=N(()=>{if(a.value.length===0)return null;const $=864e5,C=28,_=700,w=120,A=new Set,D=a.value.map($e=>{const pe={};return $e.boardLines.forEach(ve=>{ve.points.forEach(Z=>{const Q=Math.floor((Z.rawTs??0)/$);Q>0&&(pe[Q]=(pe[Q]||0)+1,A.add(Q))})}),pe});if(A.size===0)return null;const U=[...A].sort(),R=U[0],Y=U[U.length-1],z=Y-R+1,ue=U.map($e=>D.reduce((pe,ve)=>pe+(ve[$e]||0),0)),me=Math.max(...ue),fe=Math.max(1,_/z*.75);return{days:U.map($e=>{const pe=C+($e-R)/z*_;let ve=w;const Z=[];return a.value.forEach((Q,te)=>{const I=D[te][$e]||0;if(!I)return;const k=I/me*w;ve-=k,Z.push({y:ve,h:k,count:I,color:c(te),name:Q.name})}),{dayKey:$e,x:pe,segments:Z,dateLabel:new Date($e*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:me,barW:fe,barH:w,chartW:_,svgW:C+_,yAxisW:C,firstLabel:new Date(R*$).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(Y*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return($,C)=>(v(),m("div",j0,[a.value.length===0?(v(),m("div",H0,[...C[1]||(C[1]=[r("p",null,"No practice data to display yet.",-1)])])):(v(),m(X,{key:1},[r("div",W0,[r("div",K0,[e.studentName?(v(),m("span",V0,b(e.studentName),1)):F("",!0),r("span",G0,b(a.value.length)+" lesson"+b(a.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),y.value?(v(),m("div",z0,[r("div",J0,[C[2]||(C[2]=Ae(" Daily practice activity ",-1)),r("span",Y0,b(l.value)+" boards  "+b(i.value)+" observations ",1)]),r("div",q0,[r("div",X0,[(v(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.svgW} ${y.value.barH+26}`,style:et({display:"block",height:y.value.barH+26+"px"})},[r("text",{x:y.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.maxCount),9,Z0),r("text",{x:y.value.yAxisW-3,y:y.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,ew),r("line",{x1:y.value.yAxisW,y1:"0",x2:y.value.yAxisW,y2:y.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,tw),(v(!0),m(X,null,le(y.value.days,_=>(v(),m("g",{key:_.dayKey},[(v(!0),m(X,null,le(_.segments,(w,A)=>(v(),m("rect",{key:A,x:_.x,y:w.y,width:y.value.barW,height:w.h,fill:w.color,opacity:"0.85",rx:"1"},[r("title",null,b(w.name)+": "+b(w.count)+" on "+b(_.dateLabel),1)],8,sw))),128))]))),128)),r("text",{x:y.value.yAxisW,y:y.value.barH+18,"font-size":"10",fill:"#6b7280"},b(y.value.firstLabel),9,nw),r("text",{x:y.value.yAxisW+y.value.chartW,y:y.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.lastLabel),9,ow)],12,Q0))]),r("div",aw,[(v(!0),m(X,null,le(a.value,(_,w)=>(v(),m("span",{key:_.path,class:"sp-activity-legend-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:c(w)})},null,4),Ae(" "+b(_.name),1)]))),128))])])])):F("",!0),r("div",rw,[(v(),m(X,null,le(u,_=>r("span",{key:_.label,class:"sp-legend-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:_.color})},null,4),Ae(" "+b(_.label),1)])),64)),C[3]||(C[3]=r("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),r("div",lw,[(v(!0),m(X,null,le(a.value,_=>(v(),m("div",{key:_.path,class:"sp-lesson-card",onClick:w=>s.value=_},[r("div",cw,[r("div",uw,[r("div",dw,b(_.name),1),r("div",fw,b(_.tried)+" boards  "+b(_.totalAttempts)+" attempts  last "+b(d(_.lastActivity))+b(p(_)?`  span ${p(_)}`:""),1)]),r("div",pw,[r("div",{class:"sp-rate-value",style:et({color:f(_.recentRate)})},b(_.recentRate)+"% ",5),C[4]||(C[4]=r("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),r("div",vw,[ye(z_,{boardLines:_.boardLines,width:280,height:70},null,8,["boardLines"])]),r("div",mw,[r("div",hw,[(v(!0),m(X,null,le(g(_),w=>(v(),m("div",{key:w.label,class:"sp-mastery-segment",style:et({width:w.pct,backgroundColor:w.color}),title:`${w.label}: ${w.count}`},null,12,gw))),128))]),r("div",yw,[(v(!0),m(X,null,le(g(_),w=>(v(),m("span",{key:w.label,class:"sp-mastery-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:w.color})},null,4),Ae(" "+b(w.count)+" "+b(w.label),1)]))),128))])]),C[5]||(C[5]=r("div",{class:"sp-card-hint"},"details ",-1))],8,iw))),128))])],64)),s.value?(v(),He(p1,{key:2,lesson:s.value,rawData:e.observations,onClose:C[0]||(C[0]=_=>s.value=null),onDotClick:h},null,8,["lesson","rawData"])):F("",!0),ye(F0,{ref_key:"popupManager",ref:n},null,512)]))}},Hu=we(bw,[["__scopeId","data-v-81e679f8"]]),_w={class:"progress-dashboard"},ww={class:"dashboard-header"},Sw={key:0,class:"loading"},Cw={key:1,class:"error-state"},$w={key:2,class:"empty-state"},kw={key:3,class:"dashboard-content"},xw={class:"dashboard-actions"},Aw={__name:"ProgressDashboard",emits:["close"],setup(e){const t=sl(),s=Ke(),n=N(()=>t.decryptedObservations.value),o=N(()=>n.value.length>0),a=N(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});yt(async()=>{await t.fetchProgress()});async function l(){await t.fetchProgress(!0)}return(i,u)=>(v(),m("div",_w,[r("header",ww,[u[3]||(u[3]=r("h2",null,"Student Progress",-1)),r("button",{class:"close-btn",onClick:u[0]||(u[0]=c=>i.$emit("close"))},"")]),M(t).isLoading.value?(v(),m("div",Sw,[...u[4]||(u[4]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading your progress...",-1)])])):M(t).hasError.value?(v(),m("div",Cw,[r("p",null,"Failed to load progress: "+b(M(t).error.value),1),r("button",{onClick:l},"Try Again")])):o.value?(v(),m("div",kw,[ye(Hu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),r("div",xw,[r("button",{class:"secondary-btn",onClick:l},"Refresh Data"),r("button",{class:"primary-btn",onClick:u[2]||(u[2]=c=>i.$emit("close"))},"Continue Practicing")])])):(v(),m("div",$w,[u[5]||(u[5]=r("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=r("p",null,"Complete some practice deals to see your progress here!",-1)),r("button",{class:"primary-btn",onClick:u[1]||(u[1]=c=>i.$emit("close"))},"Start Practicing")]))]))}},Tw=we(Aw,[["__scopeId","data-v-286a38c8"]]),Nw="test-user-mastery",Ew="test-classroom",Ow="Negative_Double",Iw="competitive_bidding/negative_double";let wr=0;function Ze({boardNumber:e,correct:t,timestamp:s}){return wr++,{id:`mastery-test-${wr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Nw,skill_path:Iw,correct:t,deal_subfolder:Ow,deal_number:e,classroom:Ew}}function bt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function Eo(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Pw(){wr=0;const e=[];e.push(Ze({boardNumber:2,correct:!0,timestamp:bt(5)}),Ze({boardNumber:2,correct:!1,timestamp:bt(1)})),e.push(Ze({boardNumber:3,correct:!1,timestamp:Eo(30)}),Ze({boardNumber:3,correct:!0,timestamp:Eo(20)})),e.push(Ze({boardNumber:4,correct:!1,timestamp:Eo(90)}),Ze({boardNumber:4,correct:!0,timestamp:Eo(60)})),e.push(Ze({boardNumber:5,correct:!1,timestamp:bt(10)}),Ze({boardNumber:5,correct:!0,timestamp:bt(2)})),e.push(Ze({boardNumber:6,correct:!0,timestamp:bt(14)}),Ze({boardNumber:6,correct:!0,timestamp:bt(7)})),e.push(Ze({boardNumber:7,correct:!0,timestamp:bt(21)}),Ze({boardNumber:7,correct:!0,timestamp:bt(14)}),Ze({boardNumber:7,correct:!0,timestamp:bt(7)})),e.push(Ze({boardNumber:8,correct:!0,timestamp:bt(28)}),Ze({boardNumber:8,correct:!0,timestamp:bt(21)}),Ze({boardNumber:8,correct:!0,timestamp:bt(14)}),Ze({boardNumber:8,correct:!1,timestamp:bt(1)}));const t=[1,2,3,4,5].map(s=>({...Ze({boardNumber:s,correct:!0,timestamp:bt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Dw=["onClick","title"],Rw={key:0,class:"medal gold-medal"},Lw={key:1,class:"medal silver-medal"},Bw={class:"board-num"},Mw={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceBoardStatus:{type:Object,default:()=>({})},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1},userId:{type:String,default:null}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=wa(),a=bs(),l=Ke(),i=O([]),u=O(!1);async function c(){var h;const p=s.userId||((h=l.currentUser.value)==null?void 0:h.id);if(!(!p||!s.lessonSubfolder))try{const g=await o.fetchBoardStatus(p,s.lessonSubfolder);g.length>0&&(i.value=g,u.value=!0)}catch{}}yt(c),nt(()=>s.lessonSubfolder,c),nt(()=>o.cacheVersion.value,c);const f=N(()=>{let p;if(u.value&&i.value.length>0?(p=o.buildBoardMastery(i.value,s.boardNumbers),o.mergeLocalPending(p,s.lessonSubfolder)):p=a.computeBoardMastery(a.getObservations(),s.lessonSubfolder,s.boardNumbers),s.forceBoardStatus)for(const[h,g]of Object.entries(s.forceBoardStatus)){const y=p.find($=>$.boardNumber===Number(h));y&&(y.status=g)}return p});function d(p){const h={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"},g={none:"",silver:" | Silver star",gold:" | Gold star"};return`Board ${p.boardNumber}: ${h[p.status]||p.status}${g[p.achievement]||""}`}return(p,h)=>e.boardNumbers.length>0?(v(),m("div",{key:0,class:ie(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(v(),m("button",{key:0,class:"intro-btn",onClick:h[0]||(h[0]=g=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):F("",!0),(v(!0),m(X,null,le(f.value,(g,y)=>(v(),m("div",{key:g.boardNumber,class:ie(["board-indicator",[`status-${g.status}`,{active:y===e.currentIndex},{"has-medal":g.achievement!=="none"},{"medal-gold":g.achievement==="gold"},{"medal-silver":g.achievement==="silver"}]]),onClick:$=>n("goto",y),title:d(g)},[g.achievement==="gold"?(v(),m("span",Rw,"")):g.achievement==="silver"?(v(),m("span",Lw,"")):F("",!0),r("span",Bw,b(g.boardNumber),1)],10,Dw))),128))],2)):F("",!0)}},Wu=we(Mw,[["__scopeId","data-v-6dba945a"]]),Uw={class:"accomplishments-view"},Fw={class:"view-header"},jw={key:0,class:"user-selector"},Hw=["value"],Ww=["value"],Kw={key:1,class:"loading-state"},Vw={key:2,class:"error-state"},Gw={key:3,class:"empty-state"},zw={key:4,class:"view-content"},Jw={class:"controls-row"},Yw={class:"tabs"},qw={key:0,class:"tab-content"},Xw={key:0,class:"no-data"},Qw={key:1,class:"lesson-list"},Zw={class:"lesson-header"},eS={class:"lesson-name"},tS={key:1,class:"tab-content"},sS={key:0,class:"no-data"},nS={key:1,class:"taxon-list"},oS={class:"taxon-header"},aS={class:"taxon-category"},rS={class:"taxon-name"},lS={class:"taxon-counts"},iS={class:"taxon-stat correct"},cS={class:"taxon-stat incorrect"},uS={class:"taxon-stat total"},dS={class:"view-actions"},fS={key:5,class:"test-mode-banner"},pS={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=ws(),o=bs(),l=new URLSearchParams(window.location.search).get("test");yt(async()=>{l==="mastery"||l==="accomplishments"?n.enableTestMode(Pw()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function u(p){await n.selectUser(p)}function c(p,h){s("navigate-to-deal",{subfolder:p,dealNumber:h})}const f=N(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),$=o.computeLessonAchievement(y);return{...g,achievement:$.achievement}}).sort((g,y)=>d(g.subfolder).localeCompare(d(y.subfolder)))});nt(f,p=>{o.fetchMissingBoardCounts(p.map(h=>h.subfolder))},{immediate:!0});function d(p){return n.formatLessonName(p)}return(p,h)=>(v(),m("div",Uw,[r("header",Fw,[h[6]||(h[6]=r("h2",null,"Accomplishments",-1)),r("button",{class:"close-btn",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"")]),M(n).canViewOtherUsers.value?(v(),m("div",jw,[h[7]||(h[7]=r("label",{for:"user-select"},"Viewing:",-1)),r("select",{id:"user-select",value:M(n).selectedUserId.value,onChange:h[1]||(h[1]=g=>u(g.target.value))},[(v(!0),m(X,null,le(M(n).accessibleUsers.value,g=>(v(),m("option",{key:g.id,value:g.id},b(g.name)+b(g.isSelf?" (You)":""),9,Ww))),128))],40,Hw)])):F("",!0),M(n).loading.value?(v(),m("div",Kw,[...h[8]||(h[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading accomplishments...",-1)])])):M(n).error.value?(v(),m("div",Vw,[r("p",null,"Failed to load: "+b(M(n).error.value),1),r("button",{onClick:i},"Try Again")])):M(n).hasData.value?(v(),m("div",zw,[r("div",Jw,[r("div",Yw,[r("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="lessons"}]),onClick:h[3]||(h[3]=g=>M(n).activeTab.value="lessons")}," Lessons ",2),r("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="taxons"}]),onClick:h[4]||(h[4]=g=>M(n).activeTab.value="taxons")}," Taxons ",2)])]),M(n).activeTab.value==="lessons"?(v(),m("div",qw,[f.value.length===0?(v(),m("div",Xw," No lesson data available yet. ")):(v(),m("div",Qw,[(v(!0),m(X,null,le(f.value,g=>(v(),m("div",{key:g.subfolder,class:"lesson-row"},[r("div",Zw,[r("span",eS,b(d(g.subfolder)),1),g.achievement!=="none"?(v(),m("span",{key:0,class:ie(["achievement-badge",g.achievement])},"  "+b(g.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),ye(Wu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,userId:M(n).selectedUserId.value,onGoto:y=>c(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","userId","onGoto"])]))),128))]))])):F("",!0),M(n).activeTab.value==="taxons"?(v(),m("div",tS,[M(n).filteredTaxonStats.value.length===0?(v(),m("div",sS," No skill data available yet. ")):(v(),m("div",nS,[(v(!0),m(X,null,le(M(n).filteredTaxonStats.value,g=>(v(),m("div",{key:g.skillPath,class:"taxon-card"},[r("div",oS,[r("span",aS,b(g.categoryName),1),r("span",rS,b(g.skillName),1)]),r("div",lS,[r("span",iS,b(g.correct),1),r("span",cS,b(g.incorrect),1),r("span",uS,b(g.total)+" total",1)])]))),128))]))])):F("",!0),r("div",dS,[r("button",{class:"secondary-btn",onClick:i}," Refresh "),r("button",{class:"primary-btn",onClick:h[5]||(h[5]=g=>p.$emit("close"))}," Done ")])])):(v(),m("div",Gw,[h[9]||(h[9]=r("h3",null,"No Practice Data Yet",-1)),h[10]||(h[10]=r("p",null,"Complete some practice deals to see your accomplishments here!",-1)),r("button",{class:"primary-btn",onClick:h[2]||(h[2]=g=>p.$emit("close"))},"Start Practicing")])),M(n).useTestData.value?(v(),m("div",fS," Test Mode - Using Generated Data ")):F("",!0)]))}},vS=we(pS,[["__scopeId","data-v-b2e1ca98"]]),Ku="bridge-classroom-anon-mode",mS="BridgeClassroom-Anon",ja=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Ni=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function hS(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function gS(e,t){const s=`${mS}:${e} ${t}`,n=hS(s),o=Number(n%BigInt(ja.length)),a=Number(n/BigInt(ja.length)%BigInt(Ni.length));return{firstName:ja[o],lastName:Ni[a]}}const Pn=O(localStorage.getItem(Ku)==="true");function yS(){function e(){Pn.value=!Pn.value,localStorage.setItem(Ku,Pn.value.toString())}function t(o){return Pn.value?gS(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:l}=t(o);return`${a} ${l}`}function n(o){const{firstName:a,lastName:l}=t(o),i=(a==null?void 0:a.charAt(0))||"",u=(l==null?void 0:l.charAt(0))||"";return(i+u).toUpperCase()||"?"}return{isAnonymized:Pn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const bS={class:"teacher-student-list"},_S={class:"teacher-header"},wS={class:"header-actions"},SS=["value"],CS={key:0,class:"loading-state"},$S={key:1,class:"error-state"},kS={key:2,class:"empty-state"},xS={key:3,class:"empty-state"},AS={key:4,class:"student-table-wrap"},TS={class:"student-table"},NS=["onClick"],ES={class:"col-name"},OS={class:"student-name-cell"},IS={class:"avatar"},PS={class:"col-mastery"},DS={class:"mastery-pills"},RS={key:0,class:"pill pill-green"},LS={key:1,class:"pill pill-orange"},BS={key:2,class:"pill pill-yellow"},MS={key:3,class:"pill pill-red"},US={key:4,class:"no-data-label"},FS={class:"col-active"},jS={class:"col-lessons"},HS={class:"recent-lessons"},WS={key:0,class:"no-data-label"},KS={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=Sn(),n=wo(),o=Ke(),a=yS(),l=O("all"),i=O({});yt(async()=>{await s.loadAllStudentSummaries(),await u()});async function u(){const C=o.currentUser.value;if(!C)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(C.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async w=>{const A=await n.fetchClassroomDetail(w.id);A!=null&&A.success&&(_[w.id]=new Set(A.classroom.members.map(D=>D.student_id)))})),i.value=_}async function c(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await u()}const f=N(()=>{const C=new Set;for(const _ of Object.values(i.value))for(const w of _)C.add(w);return C}),d=N(()=>{const C=s.students.value;if(l.value==="all")return C;if(l.value==="none")return C.filter(w=>!f.value.has(w.id));const _=i.value[l.value];return _?C.filter(w=>_.has(w.id)):C}),p=N(()=>[...d.value].sort((C,_)=>{var D,U;const w=((D=h.value[C.id])==null?void 0:D.lastObservationTime)||"",A=((U=h.value[_.id])==null?void 0:U.lastObservationTime)||"";return A!==w?A.localeCompare(w):y(C).localeCompare(y(_))})),h=N(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentMasterySummary(_.id);return C}),g=N(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentRecentLessons(_.id);return C});function y(C){return a.displayFullName(C)}function $(C){return a.displayInitials(C)}return(C,_)=>(v(),m("div",bS,[r("header",_S,[_[5]||(_[5]=r("h2",null,"My Students",-1)),r("div",wS,[M(n).teacherClassrooms.value.length?We((v(),m("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=w=>l.value=w),class:"filter-select"},[_[3]||(_[3]=r("option",{value:"all"},"All Students",-1)),(v(!0),m(X,null,le(M(n).teacherClassrooms.value,w=>(v(),m("option",{key:w.id,value:w.id},b(w.name),9,SS))),128)),_[4]||(_[4]=r("option",{value:"none"},"No Classroom",-1))],512)),[[Vn,l.value]]):F("",!0),r("button",{class:ie(["anon-btn",{active:M(a).isAnonymized.value}]),onClick:_[1]||(_[1]=w=>M(a).toggleAnonymize())},b(M(a).isAnonymized.value?"Clear":"Anon"),3),r("button",{class:"secondary-btn",onClick:c},"Refresh"),r("button",{class:"secondary-btn",onClick:_[2]||(_[2]=w=>C.$emit("close"))},"Back")])]),M(s).loading.value?(v(),m("div",CS,[..._[6]||(_[6]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):M(s).error.value?(v(),m("div",$S,[r("p",null,"Failed to load: "+b(M(s).error.value),1),r("button",{onClick:c},"Try Again")])):M(s).students.value.length===0?(v(),m("div",kS,[..._[7]||(_[7]=[r("h3",null,"No Students Yet",-1),r("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(v(),m("div",xS,[..._[8]||(_[8]=[r("h3",null,"No Matching Students",-1),r("p",null,"No students match the selected filter.",-1)])])):(v(),m("div",AS,[r("table",TS,[_[9]||(_[9]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-mastery"},"Mastery"),r("th",{class:"col-active"},"Last Active"),r("th",{class:"col-lessons"},"Recent Lessons")])],-1)),r("tbody",null,[(v(!0),m(X,null,le(p.value,w=>{var A,D,U,R,Y,z,ue;return v(),m("tr",{key:w.id,class:"student-row",onClick:me=>C.$emit("select-student",w.id,y(w))},[r("td",ES,[r("div",OS,[r("div",IS,b($(w)),1),r("span",null,b(y(w)),1)])]),r("td",PS,[r("div",DS,[(A=h.value[w.id])!=null&&A.green?(v(),m("span",RS,b(h.value[w.id].green),1)):F("",!0),(D=h.value[w.id])!=null&&D.orange?(v(),m("span",LS,b(h.value[w.id].orange),1)):F("",!0),(U=h.value[w.id])!=null&&U.yellow?(v(),m("span",BS,b(h.value[w.id].yellow),1)):F("",!0),(R=h.value[w.id])!=null&&R.red?(v(),m("span",MS,b(h.value[w.id].red),1)):F("",!0),(Y=h.value[w.id])!=null&&Y.total?F("",!0):(v(),m("span",US,"No data"))])]),r("td",FS,b(M(s).formatTimeSince((z=h.value[w.id])==null?void 0:z.lastObservationTime)),1),r("td",jS,[r("div",HS,[(v(!0),m(X,null,le(g.value[w.id],(me,fe)=>(v(),m("span",{key:fe,class:"lesson-tag"},b(me),1))),128)),(ue=g.value[w.id])!=null&&ue.length?F("",!0):(v(),m("span",WS,"-"))])])],8,NS)}),128))])])]))]))}},VS=we(KS,[["__scopeId","data-v-dd6d8e66"]]),GS={class:"teacher-student-detail"},zS={class:"detail-header"},JS={class:"student-info"},YS={class:"avatar"},qS={class:"last-active"},XS={key:0,class:"loading-state"},QS={key:1,class:"detail-content"},ZS={class:"tab-bar"},eC=["onClick"],tC={key:0,class:"tab-content"},sC={key:1,class:"tab-content"},nC={key:0,class:"stats-row"},oC={class:"stat stat-green"},aC={key:0,class:"stat stat-blue"},rC={key:1,class:"stat stat-orange"},lC={key:2,class:"stat stat-yellow"},iC={key:3,class:"stat stat-red"},cC={key:4,class:"stat stat-grey"},uC={key:1,class:"no-data"},dC={key:2,class:"lesson-list"},fC={class:"lesson-header"},pC=["onClick"],vC={class:"mastery-strip"},mC=["title","onClick"],hC={key:0,class:"medal gold-medal"},gC={key:1,class:"medal silver-medal"},yC={class:"board-num"},bC={class:"observation-total"},_C={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=Sn(),a=bs(),l=wa(),i=ws(),u=O(!1),c=O("progress"),f=O([]),d=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],p=N(()=>s.studentName.split(" ").map(A=>A[0]||"").join("").toUpperCase());yt(async()=>{o.studentObservations.value[s.studentId]||(u.value=!0,await o.fetchStudentObservations(s.studentId),u.value=!1);try{f.value=await l.fetchBoardStatus(s.studentId)}catch{}});const h=N(()=>o.studentObservations.value[s.studentId]||[]),g=N(()=>o.getStudentMasterySummary(s.studentId)),y=N(()=>o.formatTimeSince(g.value.lastObservationTime)),$=N(()=>{const w=h.value;if(w.length===0&&f.value.length===0)return[];const A=a.extractLessonsFromObservations(w),D={};for(const U of f.value)D[U.deal_subfolder]||(D[U.deal_subfolder]=[]),D[U.deal_subfolder].push(U);for(const U in D)if(!A.find(R=>R.subfolder===U)){const R=D[U].map(Y=>Y.deal_number).sort((Y,z)=>Y-z);A.push({subfolder:U,boardNumbers:R,lastActivity:null})}return A.map(U=>{let R;const Y=D[U.subfolder];Y&&Y.length>0?R=l.buildBoardMastery(Y,U.boardNumbers):R=a.computeBoardMastery(w,U.subfolder,U.boardNumbers);const z=a.computeLessonAchievement(R);return{...U,boardMastery:R,achievement:z.achievement}}).sort((U,R)=>C(U.subfolder).localeCompare(C(R.subfolder)))});nt($,w=>{a.fetchMissingBoardCounts(w.map(A=>A.subfolder))},{immediate:!0});function C(w){return i.formatLessonName(w)}function _(w){const A={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"};return`Board ${w.boardNumber}: ${A[w.status]||w.status}`}return(w,A)=>(v(),m("div",GS,[r("header",zS,[r("button",{class:"back-btn",onClick:A[0]||(A[0]=D=>w.$emit("back"))}," Students"),r("div",JS,[r("div",YS,b(p.value),1),r("div",null,[r("h2",null,b(e.studentName),1),r("span",qS,"Last active: "+b(y.value),1)])])]),u.value?(v(),m("div",XS,[...A[1]||(A[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):(v(),m("div",QS,[r("div",ZS,[(v(),m(X,null,le(d,D=>r("button",{key:D.id,class:ie(["tab-btn",{active:c.value===D.id}]),onClick:U=>c.value=D.id},b(D.label),11,eC)),64))]),c.value==="progress"?(v(),m("div",tC,[ye(Hu,{observations:h.value,studentName:s.studentName,studentId:s.studentId},null,8,["observations","studentName","studentId"])])):c.value==="mastery"?(v(),m("div",sC,[g.value.total>0?(v(),m("div",nC,[r("div",oC,b(g.value.green)+" Green",1),g.value.blue?(v(),m("div",aC,b(g.value.blue)+" Blue",1)):F("",!0),g.value.orange?(v(),m("div",rC,b(g.value.orange)+" Orange",1)):F("",!0),g.value.yellow?(v(),m("div",lC,b(g.value.yellow)+" Yellow",1)):F("",!0),g.value.red?(v(),m("div",iC,b(g.value.red)+" Red",1)):F("",!0),g.value.grey?(v(),m("div",cC,b(g.value.grey)+" Grey",1)):F("",!0)])):F("",!0),$.value.length===0?(v(),m("div",uC," No lesson data available yet. ")):(v(),m("div",dC,[(v(!0),m(X,null,le($.value,D=>(v(),m("div",{key:D.subfolder,class:"lesson-row"},[r("div",fC,[r("button",{class:"lesson-name lesson-link",onClick:U=>n("navigate-to-lesson",D.subfolder)},b(C(D.subfolder)),9,pC),D.achievement!=="none"?(v(),m("span",{key:0,class:ie(["achievement-badge",D.achievement])},"  "+b(D.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),r("div",vC,[(v(!0),m(X,null,le(D.boardMastery,U=>(v(),m("div",{key:U.boardNumber,class:ie(["board-circle board-clickable","status-"+U.status]),title:_(U),onClick:R=>n("navigate-to-lesson",D.subfolder,U.boardNumber)},[U.achievement==="gold"?(v(),m("span",hC,"")):U.achievement==="silver"?(v(),m("span",gC,"")):F("",!0),r("span",yC,b(U.boardNumber),1)],10,mC))),128))])]))),128))]))])):F("",!0),r("div",bC,b(h.value.length)+" observations",1)]))]))}},wC=we(_C,[["__scopeId","data-v-62d6827c"]]),SC={key:0,class:"lesson-browser-loading"},CC={key:1,class:"lesson-browser-error"},$C={class:"lesson-browser"},kC={class:"browser-header"},xC={class:"browser-content"},AC=["onClick"],TC={class:"expand-icon"},NC={class:"category-name"},EC={class:"category-count"},OC={key:0,class:"lesson-list"},IC=["onClick"],PC={class:"lesson-name"},DC={class:"lesson-description"},RC={key:0,class:"error-message"},LC={key:3,class:"lesson-browser-inline"},BC={class:"browser-content-inline"},MC=["onClick"],UC={class:"expand-icon"},FC={class:"category-name"},jC={class:"category-count"},HC={key:0,class:"lesson-list"},WC=["onClick"],KC={class:"lesson-name"},VC={class:"lesson-description"},GC={key:0,class:"error-message-inline"},zC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=O(null),a=O(null),l=O(!1),i=O([]),u=O(null),c=O(null);nt(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}l.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{l.value=!1}}function d(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function h(g,y){var $;c.value=null,u.value=g.id;try{const C=(($=s.collection)==null?void 0:$.baseUrl)||"",_=p(g.id),w=`${C}/${_}.pbn`,A=await fetch(w);if(!A.ok)throw new Error(`Failed to load lesson: ${A.statusText}`);const D=await A.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:D}),s.inline||n("close")}catch(C){console.error("Error loading lesson:",C),c.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{u.value=null}}return(g,y)=>e.visible&&l.value?(v(),m("div",SC,[...y[2]||(y[2]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(v(),m("div",CC,[r("p",null,b(a.value),1),r("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(v(),m("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=St($=>g.$emit("close"),["self"]))},[r("div",$C,[r("div",kC,[r("h2",null,b(o.value.name),1),r("button",{class:"close-btn",onClick:y[0]||(y[0]=$=>g.$emit("close"))},"")]),r("div",xC,[(v(!0),m(X,null,le(o.value.categories,$=>(v(),m("div",{key:$.id,class:"category-section"},[r("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:C=>d($.id)},[r("span",TC,b(i.value.includes($.id)?"":""),1),r("span",NC,b($.name),1),r("span",EC,b($.lessons.length)+" lessons",1)],10,AC),i.value.includes($.id)?(v(),m("div",OC,[(v(!0),m(X,null,le($.lessons,C=>(v(),m("button",{key:C.id,class:ie(["lesson-item",{loading:u.value===C.id}]),onClick:_=>h(C,$)},[r("span",PC,b(C.name),1),r("span",DC,b(C.description),1)],10,IC))),128))])):F("",!0)]))),128))]),c.value?(v(),m("div",RC,b(c.value),1)):F("",!0)])])):e.visible&&e.inline&&o.value?(v(),m("div",LC,[r("div",BC,[(v(!0),m(X,null,le(o.value.categories,$=>(v(),m("div",{key:$.id,class:"category-section"},[r("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:C=>d($.id)},[r("span",UC,b(i.value.includes($.id)?"":""),1),r("span",FC,b($.name),1),r("span",jC,b($.lessons.length)+" lessons",1)],10,MC),i.value.includes($.id)?(v(),m("div",HC,[(v(!0),m(X,null,le($.lessons,C=>(v(),m("button",{key:C.id,class:ie(["lesson-item",{loading:u.value===C.id}]),onClick:_=>h(C,$)},[r("span",KC,b(C.name),1),r("span",VC,b(C.description),1)],10,WC))),128))])):F("",!0)]))),128))]),c.value?(v(),m("div",GC,b(c.value),1)):F("",!0)])):F("",!0)}},JC=we(zC,[["__scopeId","data-v-384a9c63"]]),YC={class:"viewer-controls"},qC={class:"viewer-body"},XC={key:0,class:"interaction-overlay"},QC={key:1,class:"viewer-loading"},ZC={key:2,class:"viewer-error"},e$=["src"],t$={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Lt({x:80,y:80}),n=Lt({w:550,h:700}),o=O(!1),a=Lt({x:0,y:0}),l=O(null),i=O(!1),u=O(null),c=N(()=>l.value?l.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){i.value=!0,u.value=null;try{const w=await fetch(_);if(!w.ok)throw new Error("Failed to load PDF");const A=await w.blob(),D=new Blob([A],{type:"application/pdf"});l.value=URL.createObjectURL(D)}catch(w){u.value="Could not load PDF",console.error("Failed to fetch intro PDF:",w)}finally{i.value=!1}}}function d(){l.value&&(URL.revokeObjectURL(l.value),l.value=null)}function p(){l.value&&window.open(l.value,"_blank")}nt(()=>[t.visible,t.url],([_,w])=>{_&&w?f(w):_||d()},{immediate:!0}),Ur(d);function h(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",C))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",$),document.addEventListener("pointerup",C)}function $(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function C(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",C)}return(_,w)=>e.visible?(v(),m("div",{key:0,class:"intro-pdf-viewer",style:et({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[r("div",{class:"viewer-titlebar",onPointerdown:h},[w[1]||(w[1]=r("span",{class:"viewer-title"},"Lesson Introduction",-1)),r("div",YC,[r("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),r("button",{class:"viewer-btn close",onClick:w[0]||(w[0]=A=>_.$emit("close")),title:"Close"},"")])],32),r("div",qC,[o.value?(v(),m("div",XC)):F("",!0),i.value?(v(),m("div",QC,"Loading PDF...")):u.value?(v(),m("div",ZC,b(u.value),1)):c.value?(v(),m("iframe",{key:3,src:c.value,class:"viewer-iframe"},null,8,e$)):F("",!0)]),r("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):F("",!0)}},s$=we(t$,[["__scopeId","data-v-a97df645"]]),n$={class:"collection-icon"},o$={class:"collection-name"},a$={class:"collection-desc"},r$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(v(),m("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[r("span",n$,b(e.collection.icon),1),r("span",o$,b(e.collection.name),1),r("span",a$,b(e.collection.description),1)]))}},l$=we(r$,[["__scopeId","data-v-747be5b1"]]),i$={class:"collection-grid"},c$={class:"collection-cards"},u$={key:0,class:"load-file-section"},d$={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=ho(),s=t.COLLECTIONS;return(n,o)=>(v(),m("div",i$,[o[2]||(o[2]=r("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=r("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),r("div",c$,[(v(!0),m(X,null,le(M(s),a=>(v(),He(l$,{key:a.id,collection:a,onClick:l=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),M(t).showLoadPbnOption.value?(v(),m("div",u$,[o[1]||(o[1]=r("p",null,"Or load your own PBN file:",-1)),r("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):F("",!0)]))}},cl=we(d$,[["__scopeId","data-v-35b62d22"]]),f$={class:"casual-lobby"},p$={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(v(),m("div",f$,[ye(cl,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},v$=we(p$,[["__scopeId","data-v-1ce1f7d7"]]),m$={class:"assignment-panel"},h$={key:0,class:"loading-state"},g$={key:1,class:"empty-state"},y$={key:2,class:"assignment-cards"},b$=["onClick"],_$={class:"card-header"},w$={class:"exercise-name"},S$={class:"card-meta"},C$={key:0,class:"meta-item"},$$={class:"progress-section"},k$={class:"progress-bar"},x$={class:"progress-label"},A$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(i){return i.total_boards?Math.round(i.attempted_boards/i.total_boards*100):0}function s(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0?"complete":i.due_at&&new Date(i.due_at)<new Date&&i.attempted_boards<i.total_boards?"overdue":i.attempted_boards>0?"in-progress":"new"}function n(i){const u=s(i);return u==="complete"?"Complete":u==="overdue"?"Overdue":u==="in-progress"?"In Progress":"New"}function o(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0}function a(i){if(!i.due_at)return null;const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?o(i)?"Completed":"Overdue":f===0?"Due today":f===1?"Due tomorrow":`Due in ${f} days`}function l(i){if(!i.due_at||o(i))return"";const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?"overdue":f<=1?"urgent":f<=3?"soon":""}return(i,u)=>(v(),m("div",m$,[u[2]||(u[2]=r("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(v(),m("div",h$,[...u[0]||(u[0]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(v(),m("div",g$,[...u[1]||(u[1]=[r("p",{class:"empty-title"},"No assignments yet",-1),r("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(v(),m("div",y$,[(v(!0),m(X,null,le(e.assignments,c=>(v(),m("div",{key:c.id,class:ie(["assignment-card",s(c)]),onClick:f=>i.$emit("select-assignment",c)},[r("div",_$,[r("span",w$,b(c.exercise_name),1),r("span",{class:ie(["status-badge",s(c)])},b(n(c)),3)]),r("div",S$,[c.classroom_name?(v(),m("span",C$,b(c.classroom_name),1)):F("",!0),c.due_at?(v(),m("span",{key:1,class:ie(["meta-item",l(c)])},b(a(c)),3)):F("",!0)]),r("div",$$,[r("div",k$,[r("div",{class:ie(["progress-fill",s(c)]),style:et({width:t(c)+"%"})},null,6)]),r("span",x$,b(c.attempted_boards)+" / "+b(c.total_boards)+" boards ",1)])],10,b$))),128))]))]))}},T$=we(A$,[["__scopeId","data-v-af7a8941"]]),N$={class:"student-lobby"},E$={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=Ke(),o=$n(),a=N(()=>o.studentAssignments.value.length>0),l=N(()=>o.loading.value);function i(u){s("select-assignment",u)}return yt(()=>{const u=n.currentUser.value;u&&o.fetchStudentAssignments(u.id)}),(u,c)=>(v(),m("div",N$,[a.value||l.value?(v(),He(T$,{key:0,assignments:M(o).studentAssignments.value,loading:l.value,onSelectAssignment:i},null,8,["assignments","loading"])):F("",!0),ye(cl,{onSelectCollection:c[0]||(c[0]=f=>u.$emit("select-collection",f)),onLoadFile:c[1]||(c[1]=f=>u.$emit("load-file",f))})]))}},O$=we(E$,[["__scopeId","data-v-3310fc38"]]),Vu="https://api.bridge-classroom.com/api",Gu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Mo=O([]),ul=O([]),dl=O([]),Sr=O(!1),Ha=O(null),I$=2*60*1e3;async function P$(e,t=!1){if(!t&&Ha.value&&Date.now()-new Date(Ha.value).getTime()<I$)return{success:!0,cached:!0};Sr.value=!0;try{const s=await fetch(`${Vu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Gu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Mo.value=n.classrooms||[],ul.value=n.needs_attention||[],dl.value=n.recent_activity||[],Ha.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{Sr.value=!1}}async function D$(e,t){try{const s=await fetch(`${Vu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Gu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?ul.value=[]:t==="activity"&&(dl.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function R$(){const e=N(()=>({classroomCount:Mo.value.length,openAssignmentCount:Mo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Mo,needsAttention:ul,recentActivity:dl,lobbyLoading:Sr,summaryStats:e,loadTeacherLobbyData:P$,clearPanel:D$}}const L$={class:"roster"},B$={class:"roster-header"},M$={class:"member-count"},U$={key:0,class:"roster-empty"},F$={key:1,class:"roster-table"},j$={class:"member-name"},H$={class:"member-email"},W$={class:"member-date"},K$={class:"member-action"},V$=["onClick","disabled"],G$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=O(null);function o(l){try{return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return l}}function a(l){const i=`${l.first_name} ${l.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=l.student_id,s("remove-member",l.student_id),setTimeout(()=>{n.value=null},2e3))}return(l,i)=>(v(),m("div",L$,[r("div",B$,[i[0]||(i[0]=r("h4",null,"Class Roster",-1)),r("span",M$,b(e.members.length)+" "+b(e.members.length===1?"student":"students"),1)]),e.members.length===0?(v(),m("div",U$,[...i[1]||(i[1]=[r("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(v(),m("table",F$,[i[2]||(i[2]=r("thead",null,[r("tr",null,[r("th",null,"Name"),r("th",null,"Email"),r("th",null,"Joined"),r("th")])],-1)),r("tbody",null,[(v(!0),m(X,null,le(e.members,u=>(v(),m("tr",{key:u.student_id},[r("td",j$,b(u.first_name)+" "+b(u.last_name),1),r("td",H$,b(u.email),1),r("td",W$,b(o(u.joined_at)),1),r("td",K$,[r("button",{class:"remove-btn",onClick:c=>a(u),disabled:n.value===u.student_id},b(n.value===u.student_id?"Removing...":"Remove"),9,V$)])]))),128))])]))]))}},z$=we(G$,[["__scopeId","data-v-ee901be3"]]),J$={class:"header-left"},Y$={class:"classroom-name"},q$={class:"header-meta"},X$={class:"join-badge"},Q$={class:"member-count"},Z$={key:0,class:"stat-badge"},ek={key:1,class:"stat-badge completion"},tk={key:0,class:"mini-bars"},sk={class:"bar-label"},nk={class:"bar-track"},ok={class:"bar-count"},ak=["aria-label"],rk={key:0,class:"card-body"},lk={key:0,class:"classroom-desc"},ik={class:"invite-section"},ck={class:"invite-field"},uk=["value"],dk={class:"email-section"},fk={class:"email-header"},pk={class:"email-template"},vk={class:"email-body"},mk={key:1,class:"assignments-section"},hk={class:"assignment-list"},gk=["onClick"],yk={class:"assignment-name"},bk={key:0,class:"assignment-due"},_k={class:"assignment-boards"},wk={key:3,class:"loading-roster"},Sk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed","view-assignment"],setup(e,{emit:t}){const s=e,n=t,o=wo(),a=$n(),l=O(null),i=O(!1),u=O(!1),c=O(!1),f=O([]),d=N(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);nt(()=>s.expanded,async C=>{if(C&&!l.value){i.value=!0;const[_,w]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(l.value=_.classroom),f.value=w||[],i.value=!1}});function p(C){return C?new Date(C).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function h(C){return C.students_total?Math.round(C.students_completed/C.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function y(){const C=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(C),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function $(C){const _=await o.removeMember(s.classroom.id,C);_!=null&&_.success&&(l.value&&(l.value.members=l.value.members.filter(w=>w.student_id!==C)),n("member-removed"))}return(C,_)=>(v(),m("div",{class:ie(["classroom-card",{expanded:e.expanded}])},[r("div",{class:"card-header",onClick:_[0]||(_[0]=w=>C.$emit("toggle"))},[r("div",J$,[r("h3",Y$,b(e.classroom.name),1),r("div",q$,[r("span",X$,"JOIN: "+b(e.classroom.join_code),1),r("span",Q$,b(e.classroom.member_count)+" "+b(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(v(),m("span",Z$,b(e.classroom.open_assignment_count)+" "+b(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):F("",!0),e.classroom.avg_completion_pct>0?(v(),m("span",ek,b(e.classroom.avg_completion_pct)+"% avg",1)):F("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(v(),m("div",tk,[(v(!0),m(X,null,le(e.classroom.assignments,w=>(v(),m("div",{key:w.id,class:"mini-bar"},[r("span",sk,b(w.exercise_name),1),r("div",nk,[r("div",{class:"bar-fill",style:et({width:h(w)})},null,4)]),r("span",ok,b(w.students_completed)+"/"+b(w.students_total),1)]))),128))])):F("",!0)]),r("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[r("span",{class:ie(["chevron",{rotated:e.expanded}])},"",2)],8,ak)]),e.expanded?(v(),m("div",rk,[e.classroom.description?(v(),m("p",lk,b(e.classroom.description),1)):F("",!0),r("div",ik,[_[2]||(_[2]=r("h4",null,"Invite Link",-1)),_[3]||(_[3]=r("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),r("div",ck,[r("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=w=>w.target.select())},null,8,uk),r("button",{class:"copy-btn",onClick:g},b(u.value?"Copied!":"Copy"),1)])]),r("div",dk,[r("div",fk,[_[4]||(_[4]=r("h4",null,"Email Template",-1)),r("button",{class:"copy-btn copy-btn-small",onClick:y},b(c.value?"Copied!":"Copy"),1)]),r("div",pk,[_[5]||(_[5]=r("p",null,[r("strong",null,"Subject:"),Ae(" Join our Bridge Classroom for practice exercises")],-1)),r("div",vk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+b(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(v(),m("div",mk,[_[7]||(_[7]=r("h4",null,"Assignments",-1)),r("div",hk,[(v(!0),m(X,null,le(f.value,w=>(v(),m("div",{key:w.id,class:"assignment-row clickable",onClick:A=>n("view-assignment",w.id)},[r("span",yk,b(w.exercise_name),1),w.due_at?(v(),m("span",bk,"Due "+b(p(w.due_at)),1)):F("",!0),r("span",_k,b(w.total_boards)+" boards",1),_[6]||(_[6]=r("span",{class:"view-arrow"},"",-1))],8,gk))),128))])])):F("",!0),l.value?(v(),He(z$,{key:2,members:l.value.members,onRemoveMember:$},null,8,["members"])):i.value?(v(),m("div",wk," Loading roster... ")):F("",!0)])):F("",!0)],2))}},Ck=we(Sk,[["__scopeId","data-v-3dc8e5a5"]]),$k={class:"modal-content"},kk={class:"step"},xk={class:"form-group"},Ak={class:"form-group"},Tk={class:"step-actions"},Nk=["disabled"],Ek={key:0,class:"error-text"},Ok={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Ke(),o=wo(),a=O(""),l=O(""),i=O(!1),u=O(null);async function c(){if(!a.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,u.value=null;const d=await o.createClassroom(f.id,a.value.trim(),l.value.trim()||null);d.success?s("classroom-created",d.classroom):u.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(v(),m("div",{class:"modal-overlay",onClick:d[3]||(d[3]=St(p=>f.$emit("close"),["self"]))},[r("div",$k,[r("div",kk,[d[7]||(d[7]=r("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=r("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),r("div",xk,[d[4]||(d[4]=r("label",{for:"classroom-name"},"Classroom Name",-1)),We(r("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:zo(c,["enter"])},null,544),[[wt,a.value]]),d[5]||(d[5]=r("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),r("div",Ak,[d[6]||(d[6]=r("label",{for:"classroom-desc"},[Ae("Description "),r("span",{class:"optional"},"(optional)")],-1)),We(r("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=p=>l.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[wt,l.value]])]),r("div",Tk,[r("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=p=>f.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:c},b(i.value?"Creating...":"Create Classroom"),9,Nk)]),u.value?(v(),m("p",Ek,b(u.value),1)):F("",!0)])])]))}},Ik=we(Ok,[["__scopeId","data-v-c26a1ae6"]]),Dn="https://api.bridge-classroom.com/api",Rn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ps=O([]),Wa=O(null),Wt=O(!1),Ve=O(null);function Pk(){async function e(l={}){Wt.value=!0,Ve.value=null;try{const i=new URLSearchParams;l.created_by&&i.set("created_by",l.created_by),l.curriculum_path&&i.set("curriculum_path",l.curriculum_path),l.visibility&&i.set("visibility",l.visibility);const u=i.toString(),c=`${Dn}/exercises${u?"?"+u:""}`,f=await fetch(c,{headers:{"x-api-key":Rn}});if(!f.ok){const p=await f.text();return Ve.value=p||`Server error (${f.status})`,null}const d=await f.json();return d.success?Ps.value=d.exercises:Ve.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),Ve.value="Unable to connect to server",null}finally{Wt.value=!1}}async function t(l){Wt.value=!0,Ve.value=null;try{const i=await fetch(`${Dn}/exercises/${encodeURIComponent(l)}`,{headers:{"x-api-key":Rn}});if(!i.ok){const c=await i.text();return Ve.value=c||`Server error (${i.status})`,null}const u=await i.json();return u.success?Wa.value=u.exercise:Ve.value=u.error||"Failed to fetch exercise",u}catch(i){return console.error("Failed to fetch exercise detail:",i),Ve.value="Unable to connect to server",null}finally{Wt.value=!1}}async function s({name:l,description:i,created_by:u,curriculum_path:c,visibility:f,boards:d}){Wt.value=!0,Ve.value=null;try{const p=await fetch(`${Dn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Rn},body:JSON.stringify({name:l,description:i||null,created_by:u||null,curriculum_path:c||null,visibility:f||"public",boards:d})});if(!p.ok){const g=await p.text();return Ve.value=g||`Server error (${p.status})`,{success:!1,error:Ve.value}}const h=await p.json();return h.success?Ps.value=[h.exercise,...Ps.value]:Ve.value=h.error||"Failed to create exercise",h}catch(p){return console.error("Failed to create exercise:",p),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Wt.value=!1}}async function n(l,i){Wt.value=!0,Ve.value=null;try{const u=await fetch(`${Dn}/exercises/${encodeURIComponent(l)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Rn},body:JSON.stringify(i)});if(!u.ok){const f=await u.text();return Ve.value=f||`Server error (${u.status})`,{success:!1,error:Ve.value}}const c=await u.json();return c.success||(Ve.value=c.error||"Failed to update exercise"),c}catch(u){return console.error("Failed to update exercise:",u),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Wt.value=!1}}async function o(l){try{const i=await fetch(`${Dn}/exercises/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":Rn}});if(!i.ok){const c=await i.text();return Ve.value=c||`Server error (${i.status})`,{success:!1,error:Ve.value}}const u=await i.json();return u.success&&(Ps.value=Ps.value.filter(c=>c.id!==l)),u}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Ps.value=[],Wa.value=null,Wt.value=!1,Ve.value=null}return{exercises:Ps,currentExercise:Wa,loading:Wt,error:Ve,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const Dk={class:"modal-content"},Rk={class:"step"},Lk={class:"form-group"},Bk=["value"],Mk={key:0,class:"form-hint"},Uk={class:"form-group"},Fk={class:"target-options"},jk={class:"radio-option"},Hk={class:"radio-option"},Wk={key:0,class:"form-group"},Kk=["value"],Vk={key:1,class:"form-group"},Gk=["value"],zk={class:"form-group"},Jk={class:"step-actions"},Yk=["disabled"],qk={key:2,class:"error-text"},Xk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Ke(),a=Pk(),l=$n(),i=wo(),u=Sn(),c=O(""),f=O("classroom"),d=O(s.preselectedClassroomId||""),p=O(""),h=O(""),g=O(!1),y=O(null),$=N(()=>a.exercises.value),C=N(()=>a.loading.value),_=N(()=>i.teacherClassrooms.value),w=N(()=>u.students.value),A=N(()=>!(!c.value||f.value==="classroom"&&!d.value||f.value==="student"&&!p.value));async function D(){if(!A.value||g.value)return;const U=o.currentUser.value;if(!U)return;g.value=!0,y.value=null;const R=await l.createAssignment({exercise_id:c.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?p.value:null,assigned_by:U.id,due_at:h.value||null});R.success?n("assignment-created",R.assignment):y.value=R.error||"Failed to create assignment",g.value=!1}return yt(async()=>{a.exercises.value.length||await a.fetchExercises();const U=o.currentUser.value;U&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(U.id)}),(U,R)=>(v(),m("div",{class:"modal-overlay",onClick:R[7]||(R[7]=St(Y=>U.$emit("close"),["self"]))},[r("div",Dk,[r("div",Rk,[R[18]||(R[18]=r("h2",null,"Create Assignment",-1)),R[19]||(R[19]=r("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),r("div",Lk,[R[9]||(R[9]=r("label",{for:"exercise-select"},"Exercise",-1)),We(r("select",{id:"exercise-select","onUpdate:modelValue":R[0]||(R[0]=Y=>c.value=Y),class:"form-select"},[R[8]||(R[8]=r("option",{value:""},"Select an exercise...",-1)),(v(!0),m(X,null,le($.value,Y=>(v(),m("option",{key:Y.id,value:Y.id},b(Y.name)+" ("+b(Y.board_count)+" boards)",9,Bk))),128))],512),[[Vn,c.value]]),C.value?(v(),m("p",Mk,"Loading exercises...")):F("",!0)]),r("div",Uk,[R[12]||(R[12]=r("label",null,"Assign to",-1)),r("div",Fk,[r("label",jk,[We(r("input",{type:"radio","onUpdate:modelValue":R[1]||(R[1]=Y=>f.value=Y),value:"classroom"},null,512),[[zl,f.value]]),R[10]||(R[10]=r("span",null,"Classroom",-1))]),r("label",Hk,[We(r("input",{type:"radio","onUpdate:modelValue":R[2]||(R[2]=Y=>f.value=Y),value:"student"},null,512),[[zl,f.value]]),R[11]||(R[11]=r("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(v(),m("div",Wk,[R[14]||(R[14]=r("label",{for:"classroom-select"},"Classroom",-1)),We(r("select",{id:"classroom-select","onUpdate:modelValue":R[3]||(R[3]=Y=>d.value=Y),class:"form-select"},[R[13]||(R[13]=r("option",{value:""},"Select a classroom...",-1)),(v(!0),m(X,null,le(_.value,Y=>(v(),m("option",{key:Y.id,value:Y.id},b(Y.name)+" ("+b(Y.member_count)+" students)",9,Kk))),128))],512),[[Vn,d.value]])])):F("",!0),f.value==="student"?(v(),m("div",Vk,[R[16]||(R[16]=r("label",{for:"student-select"},"Student",-1)),We(r("select",{id:"student-select","onUpdate:modelValue":R[4]||(R[4]=Y=>p.value=Y),class:"form-select"},[R[15]||(R[15]=r("option",{value:""},"Select a student...",-1)),(v(!0),m(X,null,le(w.value,Y=>(v(),m("option",{key:Y.id,value:Y.id},b(Y.first_name)+" "+b(Y.last_name),9,Gk))),128))],512),[[Vn,p.value]])])):F("",!0),r("div",zk,[R[17]||(R[17]=r("label",{for:"due-date"},[Ae("Due Date "),r("span",{class:"optional"},"(optional)")],-1)),We(r("input",{id:"due-date","onUpdate:modelValue":R[5]||(R[5]=Y=>h.value=Y),type:"date",class:"form-input"},null,512),[[wt,h.value]])]),r("div",Jk,[r("button",{class:"btn btn-secondary",onClick:R[6]||(R[6]=Y=>U.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!A.value||g.value,onClick:D},b(g.value?"Creating...":"Create Assignment"),9,Yk)]),y.value?(v(),m("p",qk,b(y.value),1)):F("",!0)])])]))}},Qk=we(Xk,[["__scopeId","data-v-5e97b847"]]),Zk={class:"modal-content"},ex={class:"modal-body"},tx={key:0,class:"loading-state"},sx={key:1,class:"error-state"},nx={class:"error-text"},ox={class:"modal-header"},ax={class:"assignment-meta"},rx={class:"meta-item"},lx={key:0,class:"meta-item"},ix={key:1,class:"meta-item"},cx={key:0,class:"progress-table-wrapper"},ux={class:"progress-table"},dx={class:"col-name"},fx={class:"col-progress"},px={class:"progress-cell"},vx={class:"progress-bar-track"},mx={class:"progress-label"},hx={class:"col-correct"},gx={key:1,class:"empty-state"},yx={key:2,class:"summary-row"},bx={key:0},_x={__name:"AssignmentDetailModal",props:{assignmentId:{type:String,required:!0}},emits:["close"],setup(e){const t=e,s=$n(),n=O(!0),o=O(null),a=N(()=>s.currentAssignment.value),l=N(()=>{var C;const p=(C=a.value)==null?void 0:C.student_progress;if(!p||p.length===0)return null;const h=p.length,g=p.filter(_=>_.attempted_boards>=_.total_boards).length,y=p.filter(_=>_.attempted_boards>0);let $=null;if(y.length>0){const _=y.reduce((w,A)=>w+A.correct_boards/A.attempted_boards*100,0);$=Math.round(_/y.length)}return{total:h,completed:g,avgAccuracy:$}});function i(p){return p?new Date(p).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function u(p){return p.total_boards?Math.round(p.attempted_boards/p.total_boards*100)+"%":"0%"}function c(p){return p.attempted_boards>=p.total_boards?"complete":p.attempted_boards>0?"partial":""}function f(p){return p.attempted_boards===0?"":Math.round(p.correct_boards/p.attempted_boards*100)+"%"}function d(p){if(p.attempted_boards===0)return"";const h=p.correct_boards/p.attempted_boards*100;return h>=80?"accuracy-high":h>=50?"accuracy-mid":"accuracy-low"}return yt(async()=>{const p=await s.fetchAssignmentDetail(t.assignmentId);p!=null&&p.success||(o.value=s.error.value||"Failed to load assignment details"),n.value=!1}),(p,h)=>(v(),m("div",{class:"modal-overlay",onClick:h[2]||(h[2]=St(g=>p.$emit("close"),["self"]))},[r("div",Zk,[r("div",ex,[n.value?(v(),m("div",tx,[...h[3]||(h[3]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignment details...",-1)])])):o.value?(v(),m("div",sx,[r("p",nx,b(o.value),1),r("button",{class:"btn btn-secondary",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"Close")])):a.value?(v(),m(X,{key:2},[r("div",ox,[r("h2",null,b(a.value.exercise_name),1),r("button",{class:"close-btn",onClick:h[1]||(h[1]=g=>p.$emit("close")),"aria-label":"Close"},"")]),r("div",ax,[r("span",rx,b(a.value.total_boards)+" "+b(a.value.total_boards===1?"board":"boards"),1),a.value.due_at?(v(),m("span",lx,"Due "+b(i(a.value.due_at)),1)):F("",!0),a.value.classroom_name?(v(),m("span",ix,b(a.value.classroom_name),1)):F("",!0)]),a.value.student_progress&&a.value.student_progress.length?(v(),m("div",cx,[r("table",ux,[h[4]||(h[4]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-progress"},"Progress"),r("th",{class:"col-correct"},"Correct"),r("th",{class:"col-accuracy"},"Accuracy")])],-1)),r("tbody",null,[(v(!0),m(X,null,le(a.value.student_progress,g=>(v(),m("tr",{key:g.student_id},[r("td",dx,b(g.first_name)+" "+b(g.last_name),1),r("td",fx,[r("div",px,[r("div",vx,[r("div",{class:ie(["progress-bar-fill",c(g)]),style:et({width:u(g)})},null,6)]),r("span",mx,b(g.attempted_boards)+"/"+b(g.total_boards),1)])]),r("td",hx,b(g.correct_boards)+"/"+b(g.total_boards),1),r("td",{class:ie(["col-accuracy",d(g)])},b(f(g)),3)]))),128))])])])):(v(),m("div",gx,[...h[5]||(h[5]=[r("p",null,"No students assigned yet.",-1)])])),l.value?(v(),m("div",yx,[r("span",null,b(l.value.completed)+"/"+b(l.value.total)+" students completed",1),l.value.avgAccuracy!==null?(v(),m("span",bx,b(l.value.avgAccuracy)+"% avg accuracy",1)):F("",!0)])):F("",!0)],64)):F("",!0)])])]))}},wx=we(_x,[["__scopeId","data-v-d654f00a"]]),Sx={class:"needs-attention"},Cx={class:"panel-header"},$x={key:0,class:"empty-state"},kx={key:1,class:"attention-list"},xx={class:"item-icon"},Ax={class:"item-text"},Tx={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),l=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${l}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(v(),m("div",Sx,[r("div",Cx,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(v(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):F("",!0)]),e.items.length?(v(),m("div",kx,[(v(!0),m(X,null,le(e.items,(l,i)=>(v(),m("div",{key:i,class:ie(["attention-item",l.type])},[r("span",xx,b(t(l.type)),1),r("span",Ax,b(s(l)),1)],2))),128))])):(v(),m("div",$x," All caught up! No items need attention. "))]))}},Nx=we(Tx,[["__scopeId","data-v-65e8ba1f"]]),Ex={class:"recent-activity"},Ox={class:"panel-header"},Ix={key:0,class:"empty-state"},Px={key:1,class:"activity-list"},Dx={class:"event-content"},Rx={class:"event-text"},Lx={class:"event-time"},Bx={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),l=Math.floor(a/6e4);if(l<1)return"just now";if(l<60)return`${l}m ago`;const i=Math.floor(l/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(v(),m("div",Ex,[r("div",Ox,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(v(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):F("",!0)]),e.events.length?(v(),m("div",Px,[(v(!0),m(X,null,le(e.events,(l,i)=>(v(),m("div",{key:i,class:"activity-item"},[r("span",{class:ie(["event-icon",l.type])},b(t(l.type)),3),r("div",Dx,[r("span",Rx,b(s(l)),1),r("span",Lx,b(n(l.timestamp)),1)])]))),128))])):(v(),m("div",Ix," No recent activity. "))]))}},Mx=we(Bx,[["__scopeId","data-v-39e672f5"]]),Ux={class:"teacher-lobby"},Fx={class:"welcome-section"},jx={class:"welcome-title"},Hx={class:"welcome-subtitle"},Wx={class:"quick-actions"},Kx={key:0,class:"loading-state"},Vx={key:1,class:"dashboard-grid"},Gx={class:"left-column"},zx={key:0,class:"classrooms-section"},Jx={class:"classroom-cards"},Yx={key:1,class:"empty-state"},qx={class:"right-column"},Xx={class:"collections-section"},Qx={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=Ke(),s=R$(),n=O(!1),o=O(!1),a=O(null),l=O(null),i=N(()=>{const g=t.currentUser.value;return g?g.firstName:""}),u=N(()=>{const g=s.summaryStats.value;if(!g||g.classroomCount===0)return"Get started by creating your first classroom.";const y=[];return y.push(`${g.classroomCount} active ${g.classroomCount===1?"classroom":"classrooms"}`),g.openAssignmentCount>0&&y.push(`${g.openAssignmentCount} open ${g.openAssignmentCount===1?"assignment":"assignments"}`),y.join(", ")+"."});function c(g){l.value=l.value===g?null:g}function f(g){n.value=!1,l.value=g.id,h()}function d(){o.value=!1,h()}function p(g){const y=t.currentUser.value;y&&s.clearPanel(y.id,g)}function h(){const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id,!0)}return yt(()=>{const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id)}),(g,y)=>(v(),m("div",Ux,[r("div",Fx,[r("h2",jx,"Welcome back, "+b(i.value),1),r("p",Hx,b(u.value),1)]),r("div",Wx,[r("button",{class:"action-btn create",onClick:y[0]||(y[0]=$=>n.value=!0)}," + New Classroom "),r("button",{class:"action-btn assign",onClick:y[1]||(y[1]=$=>o.value=!0)}," + New Assignment "),e.isAdmin?(v(),m("button",{key:0,class:"action-btn admin",onClick:y[2]||(y[2]=$=>g.$emit("show-admin"))}," Admin Panel ")):F("",!0)]),M(s).lobbyLoading.value&&!M(s).lobbyClassrooms.value.length?(v(),m("div",Kx,[...y[11]||(y[11]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):(v(),m("div",Vx,[r("div",Gx,[M(s).lobbyClassrooms.value.length?(v(),m("div",zx,[y[12]||(y[12]=r("h3",{class:"section-title"},"My Classrooms",-1)),r("div",Jx,[(v(!0),m(X,null,le(M(s).lobbyClassrooms.value,$=>(v(),He(Ck,{key:$.id,classroom:$,expanded:l.value===$.id,onToggle:C=>c($.id),onMemberRemoved:h,onViewAssignment:y[3]||(y[3]=C=>a.value=C)},null,8,["classroom","expanded","onToggle"]))),128))])])):(v(),m("div",Yx,[...y[13]||(y[13]=[r("p",{class:"empty-title"},"No classrooms yet",-1),r("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),r("div",qx,[ye(Nx,{items:M(s).needsAttention.value,onClear:y[4]||(y[4]=$=>p("attention"))},null,8,["items"]),ye(Mx,{events:M(s).recentActivity.value,onClear:y[5]||(y[5]=$=>p("activity"))},null,8,["events"])])])),r("div",Xx,[y[14]||(y[14]=r("h3",{class:"section-title"},"Lesson Collections",-1)),ye(cl,{onSelectCollection:y[6]||(y[6]=$=>g.$emit("select-collection",$)),onLoadFile:y[7]||(y[7]=$=>g.$emit("load-file",$))})]),n.value?(v(),He(Ik,{key:2,onClose:y[8]||(y[8]=$=>n.value=!1),onClassroomCreated:f})):F("",!0),o.value?(v(),He(Qk,{key:3,onClose:y[9]||(y[9]=$=>o.value=!1),onAssignmentCreated:d})):F("",!0),a.value?(v(),He(wx,{key:4,"assignment-id":a.value,onClose:y[10]||(y[10]=$=>a.value=null)},null,8,["assignment-id"])):F("",!0)]))}},Zx=we(Qx,[["__scopeId","data-v-364209cc"]]),zu="https://api.bridge-classroom.com/api",Ju="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Yu=O(null),qu=O([]),Xu=O(null),Qu=O(null),Cr=O(!1),$r=O(null),Ka=O(null),eA=60*1e3;async function Zu(e=!1){if(!e&&Ka.value&&Date.now()-new Date(Ka.value).getTime()<eA)return{success:!0,cached:!0};Cr.value=!0,$r.value=null;try{const t=await fetch(`${zu}/admin/stats`,{headers:{"x-api-key":Ju}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Yu.value=s.stats,qu.value=s.popular_lessons||[],Xu.value=s.database,Ka.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),$r.value=t.message,{success:!1,error:t.message}}finally{Cr.value=!1}}async function ed(){try{const e=await fetch(`${zu}/admin/health`,{headers:{"x-api-key":Ju}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Qu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function tA(){await Promise.all([Zu(!0),ed()])}function sA(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function nA(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function fl(){return{stats:Yu,popularLessons:qu,database:Xu,health:Qu,loading:Cr,error:$r,loadStats:Zu,loadHealth:ed,refreshAll:tA,formatBytes:sA,formatUptime:nA}}const oA={class:"stats-row"},aA={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},rA={class:"stat-number"},lA={class:"stat-card",style:{"border-top-color":"#1565c0"}},iA={class:"stat-number"},cA={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},uA={class:"stat-number"},dA={class:"stat-card",style:{"border-top-color":"#e65100"}},fA={class:"stat-number"},pA={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,l,i;return v(),m("div",oA,[r("div",aA,[r("div",rA,b(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=r("div",{class:"stat-label"},"Total Users",-1))]),r("div",lA,[r("div",iA,b(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=r("div",{class:"stat-label"},"Active (7d)",-1))]),r("div",cA,[r("div",uA,b(t((l=e.stats)==null?void 0:l.observation_count_7d)),1),n[2]||(n[2]=r("div",{class:"stat-label"},"Observations (7d)",-1))]),r("div",dA,[r("div",fA,b(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=r("div",{class:"stat-label"},"Active Today",-1))])])}}},vA=we(pA,[["__scopeId","data-v-a14a2199"]]),mA={class:"popular-lessons"},hA={key:0,class:"empty-state"},gA={key:1,class:"table-wrap"},yA={class:"lessons-table"},bA={class:"lesson-name"},_A={class:"num-col"},wA={class:"num-col"},SA={class:"num-col"},CA={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(v(),m("div",mA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(v(),m("div",gA,[r("table",yA,[o[0]||(o[0]=r("thead",null,[r("tr",null,[r("th",null,"Lesson"),r("th",{class:"num-col"},"Plays"),r("th",{class:"num-col"},"Users"),r("th",{class:"num-col"},"Accuracy")])],-1)),r("tbody",null,[(v(!0),m(X,null,le(e.lessons.slice(0,15),a=>(v(),m("tr",{key:a.deal_subfolder},[r("td",bA,b(t(a.deal_subfolder)),1),r("td",_A,b(a.play_count.toLocaleString()),1),r("td",wA,b(a.unique_users),1),r("td",SA,[r("span",{class:ie(["accuracy-badge",s(a.accuracy_pct)])},b(a.accuracy_pct)+"% ",3)])]))),128))])])])):(v(),m("div",hA,"No lesson data yet."))]))}},$A=we(CA,[["__scopeId","data-v-079bd4f8"]]),kA={class:"database-panel"},xA={key:0,class:"empty-state"},AA={class:"db-size"},TA={class:"tables-table"},NA={class:"table-name"},EA={class:"num-col"},OA={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=fl();return(s,n)=>(v(),m("div",kA,[n[2]||(n[2]=r("h3",{class:"panel-title"},"Database",-1)),e.database?(v(),m(X,{key:1},[r("div",AA,[n[0]||(n[0]=Ae(" SQLite file: ",-1)),r("strong",null,b(M(t)(e.database.file_size_bytes)),1)]),r("table",TA,[n[1]||(n[1]=r("thead",null,[r("tr",null,[r("th",null,"Table"),r("th",{class:"num-col"},"Rows")])],-1)),r("tbody",null,[(v(!0),m(X,null,le(e.database.tables,o=>(v(),m("tr",{key:o.name},[r("td",NA,b(o.name),1),r("td",EA,b(o.row_count.toLocaleString()),1)]))),128))])])],64)):(v(),m("div",xA,"Loading..."))]))}},IA=we(OA,[["__scopeId","data-v-d5945aff"]]),PA={class:"system-health"},DA={class:"health-header"},RA=["disabled"],LA={key:0,class:"empty-state"},BA={key:1,class:"health-rows"},MA={class:"health-row"},UA={class:"health-value"},FA={class:"health-row"},jA={class:"health-value"},HA={class:"health-row"},WA={class:"health-value"},KA={class:"health-row"},VA={class:"health-value"},GA={class:"health-row"},zA={class:"health-value"},JA={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=fl();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(n,o)=>(v(),m("div",PA,[r("div",DA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"System Health",-1)),r("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},b(e.refreshing?"Refreshing...":"Refresh"),9,RA)]),e.health?(v(),m("div",BA,[r("div",MA,[o[2]||(o[2]=r("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=r("span",{class:"health-label"},"API Server",-1)),r("span",UA,"Up "+b(M(t)(e.health.uptime_seconds)),1)]),r("div",FA,[r("span",{class:ie(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=r("span",{class:"health-label"},"Database",-1)),r("span",jA,b(e.health.database_writable?"Writable":"Error"),1)]),r("div",HA,[r("span",{class:ie(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=r("span",{class:"health-label"},"Last Observation",-1)),r("span",WA,b(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),r("div",KA,[o[6]||(o[6]=r("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=r("span",{class:"health-label"},"Disk",-1)),r("span",VA,b(e.health.disk_available_gb)+" GB / "+b(e.health.disk_total_gb)+" GB available",1)]),r("div",GA,[o[8]||(o[8]=r("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=r("span",{class:"health-label"},"API Version",-1)),r("span",zA,"v"+b(e.health.api_version),1)])])):(v(),m("div",LA,"Loading..."))]))}},YA=we(JA,[["__scopeId","data-v-0d4e96d5"]]),qA={class:"admin-lobby"},XA={class:"admin-header"},QA={key:0,class:"admin-subtitle"},ZA={key:0,class:"loading-state"},e2={key:1,class:"error-state"},t2={class:"announcement-section"},s2={class:"announcement-info"},n2=["innerHTML"],o2={key:0,class:"announcement-expires"},a2={key:1,class:"announcement-expires"},r2={class:"announcement-actions"},l2=["disabled"],i2={key:1,class:"announcement-form"},c2={class:"form-row"},u2=["disabled"],d2={class:"content-grid"},f2={class:"name-correction-section"},p2={class:"search-row"},v2=["disabled"],m2={key:0,class:"search-results"},h2=["onClick"],g2={class:"result-name"},y2={class:"result-email"},b2={key:0,class:"corrected-badge"},_2={key:1,class:"no-results"},w2={key:2,class:"edit-form"},S2={class:"edit-row"},C2={class:"edit-field"},$2={class:"edit-field"},k2=["disabled"],x2={key:0,class:"save-feedback success"},A2={key:1,class:"save-feedback error"},T2={class:"decrypt-section"},N2={class:"decrypt-actions"},E2=["disabled"],O2={key:0,class:"decrypt-progress"},I2={key:0},P2={key:0},D2={key:1},R2={key:1},L2={key:2,class:"decrypt-hint"},B2={__name:"AdminLobby",emits:["back"],setup(e){const t=fl(),s=il(),n=O(!1),o=O(""),a=O("info"),l=O(""),i=O(!1),u=O(!1),c=O(!1);function f(){const k=s.announcement.value;if(k){if(o.value=k.message,a.value=k.type,k.expires_at){const E=new Date(k.expires_at);l.value=new Date(E.getTime()-E.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else l.value="";c.value=!0}}function d(){c.value=!1,o.value="",a.value="info",l.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const k=l.value?new Date(l.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,k),o.value="",a.value="info",l.value="",c.value=!1}catch(k){console.error("Failed to publish announcement:",k)}finally{i.value=!1}}}async function h(){u.value=!0;try{await s.clearAnnouncement()}catch(k){console.error("Failed to clear announcement:",k)}finally{u.value=!1}}function g(k){return k?new Date(k).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function $(k){return k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(ce,Ce)=>{const Ee=y[Ce.toLowerCase()];return Ee?`<span class="ann-circle" style="background:${Ee.bg};color:${Ee.fg}"></span>`:ce})}const C="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",w=O(""),A=O([]),D=O(!1),U=O(!1),R=O(null),Y=O(""),z=O(""),ue=O(!1),me=O(!1),fe=O("");async function be(){if(w.value.trim()){U.value=!0,D.value=!1,A.value=[],R.value=null,me.value=!1,fe.value="";try{const k=await fetch(`${C}/admin/users/search?q=${encodeURIComponent(w.value.trim())}`,{headers:{"x-api-key":_}});if(!k.ok)throw new Error(`Search failed: ${k.status}`);const E=await k.json();A.value=E.users||[]}catch(k){console.error("User search failed:",k)}finally{U.value=!1,D.value=!0}}}function $e(k){R.value=k,Y.value=k.first_name,z.value=k.last_name,me.value=!1,fe.value=""}async function pe(){if(!(!R.value||!Y.value.trim()||!z.value.trim())){ue.value=!0,me.value=!1,fe.value="";try{const k=await fetch(`${C}/admin/users/${encodeURIComponent(R.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:Y.value.trim(),last_name:z.value.trim()})});if(!k.ok)throw new Error(`Save failed: ${k.status}`);const E=await k.json();E.success&&(me.value=!0,R.value.first_name=E.user.first_name,R.value.last_name=E.user.last_name,R.value.name_corrected_at=E.user.name_corrected_at)}catch(k){fe.value=k.message}finally{ue.value=!1}}}const ve=O(!1),Z=O(null);async function Q(){ve.value=!0,Z.value=null;try{const k=await fetch(`${C}/admin/decrypt-observations`,{method:"POST",headers:{"x-api-key":_}});if(!k.ok){const E=await k.text();Z.value={success:!1,error:`HTTP ${k.status}: ${E}`};return}Z.value=await k.json()}catch(k){Z.value={success:!1,error:k.message}}finally{ve.value=!1}}async function te(){await Promise.all([t.loadStats(),t.loadHealth()])}async function I(){n.value=!0,await t.refreshAll(),n.value=!1}return yt(te),(k,E)=>(v(),m("div",qA,[r("div",XA,[r("button",{class:"back-btn",onClick:E[0]||(E[0]=ce=>k.$emit("back"))}," Back to Dashboard"),E[7]||(E[7]=r("h2",{class:"admin-title"},"Admin Dashboard",-1)),M(t).stats.value?(v(),m("p",QA,b(M(t).stats.value.total_observations.toLocaleString())+" total observations across "+b(M(t).stats.value.total_users)+" users ",1)):F("",!0)]),M(t).loading.value&&!M(t).stats.value?(v(),m("div",ZA,[...E[8]||(E[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):M(t).error.value?(v(),m("div",e2,[r("p",null,b(M(t).error.value),1),r("button",{class:"retry-btn",onClick:te},"Retry")])):M(t).stats.value?(v(),m(X,{key:2},[r("div",t2,[E[10]||(E[10]=r("h3",{class:"section-title"},"Site Announcement",-1)),M(s).announcement.value&&!c.value?(v(),m("div",{key:0,class:ie(["current-announcement",M(s).announcement.value.type])},[r("div",s2,[r("span",{class:ie(["announcement-type-badge",M(s).announcement.value.type])},b(M(s).announcement.value.type),3),r("span",{class:"announcement-message",innerHTML:$(M(s).announcement.value.message)},null,8,n2),M(s).announcement.value.expires_at?(v(),m("span",o2," Expires: "+b(g(M(s).announcement.value.expires_at)),1)):(v(),m("span",a2,"No expiration"))]),r("div",r2,[r("button",{class:"edit-btn",onClick:f},"Edit"),r("button",{class:"clear-btn",onClick:h,disabled:u.value},b(u.value?"Clearing...":"Clear"),9,l2)])],2)):c.value||!M(s).announcement.value?(v(),m("div",i2,[We(r("input",{"onUpdate:modelValue":E[1]||(E[1]=ce=>o.value=ce),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:zo(p,["enter"])},null,544),[[wt,o.value]]),r("div",c2,[We(r("select",{"onUpdate:modelValue":E[2]||(E[2]=ce=>a.value=ce),class:"type-select"},[...E[9]||(E[9]=[r("option",{value:"info"},"Info",-1),r("option",{value:"warning"},"Warning",-1),r("option",{value:"urgent"},"Urgent",-1)])],512),[[Vn,a.value]]),We(r("input",{"onUpdate:modelValue":E[3]||(E[3]=ce=>l.value=ce),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[wt,l.value]]),c.value?(v(),m("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):F("",!0),r("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},b(i.value?"Publishing...":c.value?"Update":"Publish"),9,u2)])])):F("",!0)]),ye(vA,{stats:M(t).stats.value},null,8,["stats"]),r("div",d2,[ye($A,{lessons:M(t).popularLessons.value},null,8,["lessons"]),ye(IA,{database:M(t).database.value},null,8,["database"])]),ye(YA,{health:M(t).health.value,refreshing:n.value,onRefresh:I},null,8,["health","refreshing"]),r("div",f2,[E[13]||(E[13]=r("h3",{class:"section-title"},"Correct User Name",-1)),r("div",p2,[We(r("input",{"onUpdate:modelValue":E[4]||(E[4]=ce=>w.value=ce),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:zo(be,["enter"])},null,544),[[wt,w.value]]),r("button",{class:"search-btn",onClick:be,disabled:U.value||!w.value.trim()},b(U.value?"Searching...":"Search"),9,v2)]),A.value.length?(v(),m("div",m2,[(v(!0),m(X,null,le(A.value,ce=>(v(),m("div",{key:ce.id,class:ie(["search-result-item",{selected:R.value&&R.value.id===ce.id}]),onClick:Ce=>$e(ce)},[r("span",g2,b(ce.first_name)+" "+b(ce.last_name),1),r("span",y2,b(ce.email),1),ce.name_corrected_at?(v(),m("span",b2,"corrected")):F("",!0)],10,h2))),128))])):F("",!0),D.value&&!A.value.length?(v(),m("div",_2,' No users found for "'+b(w.value)+'" ',1)):F("",!0),R.value?(v(),m("div",w2,[r("div",S2,[r("div",C2,[E[11]||(E[11]=r("label",null,"First Name",-1)),We(r("input",{"onUpdate:modelValue":E[5]||(E[5]=ce=>Y.value=ce),type:"text",class:"edit-input"},null,512),[[wt,Y.value]])]),r("div",$2,[E[12]||(E[12]=r("label",null,"Last Name",-1)),We(r("input",{"onUpdate:modelValue":E[6]||(E[6]=ce=>z.value=ce),type:"text",class:"edit-input"},null,512),[[wt,z.value]])]),r("button",{class:"save-btn",onClick:pe,disabled:ue.value||!Y.value.trim()||!z.value.trim()},b(ue.value?"Saving...":"Save"),9,k2)]),me.value?(v(),m("p",x2,"Name corrected successfully.")):F("",!0),fe.value?(v(),m("p",A2,b(fe.value),1)):F("",!0)])):F("",!0)]),r("div",T2,[E[19]||(E[19]=r("h3",{class:"section-title"},"Observation Decryption",-1)),E[20]||(E[20]=r("p",{class:"decrypt-description"},[Ae(" Decrypt all observations using RECOVERY_SECRET and populate the "),r("code",null,"observations_decrypted"),Ae(" table for inspection and backfill. ")],-1)),r("div",N2,[r("button",{class:"decrypt-btn",onClick:Q,disabled:ve.value},b(ve.value?"Decrypting...":"Decrypt All Observations"),9,E2)]),ve.value?(v(),m("div",O2,[...E[14]||(E[14]=[r("div",{class:"spinner"},null,-1),r("p",null,"Processing observations (this may take a minute)...",-1)])])):F("",!0),Z.value?(v(),m("div",{key:1,class:ie(["decrypt-result",{error:!Z.value.success}])},[Z.value.success?(v(),m("p",I2,[E[15]||(E[15]=Ae(" Decrypted ",-1)),r("strong",null,b(Z.value.observations_decrypted.toLocaleString()),1),E[16]||(E[16]=Ae(" observations from ",-1)),r("strong",null,b(Z.value.users_processed),1),E[17]||(E[17]=Ae(" users. ",-1)),Z.value.users_skipped?(v(),m("span",P2," ("+b(Z.value.users_skipped)+" users skipped  no recovery key)",1)):F("",!0),Z.value.errors?(v(),m("span",D2," | "+b(Z.value.errors)+" errors",1)):F("",!0)])):(v(),m("p",R2,"Decryption failed: "+b(Z.value.error),1)),Z.value.success?(v(),m("p",L2,[...E[18]||(E[18]=[Ae(" Results in ",-1),r("code",null,"observations_decrypted",-1),Ae(" table. Query via SQLite to inspect. ",-1)])])):F("",!0)],2)):F("",!0)])],64)):F("",!0)]))}},M2=we(B2,[["__scopeId","data-v-a782c5e0"]]),U2={class:"lobby-view"},F2={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=Ke(),s=$n(),n=O(!1),o=N(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=N(()=>s.studentAssignments.value.length>0),l=N(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return yt(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,u)=>(v(),m("div",U2,[n.value?(v(),He(M2,{key:0,onBack:u[0]||(u[0]=c=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(v(),He(Zx,{key:1,"is-admin":o.value==="admin",onSelectCollection:u[1]||(u[1]=c=>i.$emit("select-collection",c)),onShowAdmin:u[2]||(u[2]=c=>n.value=!0),onLoadFile:u[3]||(u[3]=c=>i.$emit("load-file",c))},null,8,["is-admin"])):a.value||l.value?(v(),He(O$,{key:2,onSelectCollection:u[4]||(u[4]=c=>i.$emit("select-collection",c)),onSelectAssignment:u[5]||(u[5]=c=>i.$emit("select-assignment",c)),onLoadFile:u[6]||(u[6]=c=>i.$emit("load-file",c))})):(v(),He(v$,{key:3,onSelectCollection:u[7]||(u[7]=c=>i.$emit("select-collection",c)),onShowBecomeTeacher:u[8]||(u[8]=c=>i.$emit("show-become-teacher")),onLoadFile:u[9]||(u[9]=c=>i.$emit("load-file",c))}))]))}},j2=we(F2,[["__scopeId","data-v-d84f343d"]]),H2={class:"modal-content"},W2={key:0,class:"step step-overview"},K2={class:"step-actions"},V2={key:1,class:"step step-agreement"},G2={class:"agreement-checkbox"},z2={class:"step-actions"},J2=["disabled"],Y2={key:0,class:"error-text"},q2={key:2,class:"step step-confirmation"},X2={class:"step-actions"},Q2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Ke(),o=O(1),a=O(!1),l=O(!1),i=O(null);async function u(){const c=n.currentUser.value;if(c){l.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:c.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(c.id,{role:"teacher"});try{const{publicKey:p,privateKey:h}=await cm();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${c.firstName} ${c.lastName}`,email:c.email,public_key:p,private_key:h,role:"teacher"})}),n.updateUser(c.id,{viewerPrivateKey:h}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:h,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{l.value=!1}}}return(c,f)=>(v(),m("div",{class:"modal-overlay",onClick:f[5]||(f[5]=St(d=>c.$emit("close"),["self"]))},[r("div",H2,[o.value===1?(v(),m("div",W2,[f[6]||(f[6]=oo('<h2 data-v-8bdcc044>Become a Teacher</h2><p class="step-desc" data-v-8bdcc044>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-8bdcc044><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Create Classrooms</strong><p data-v-8bdcc044>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Assign Exercises</strong><p data-v-8bdcc044>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Track Progress</strong><p data-v-8bdcc044>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-8bdcc044><strong data-v-8bdcc044>Still a Student Too</strong><p data-v-8bdcc044>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),r("div",K2,[r("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>c.$emit("close"))},"Not Now"),r("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(v(),m("div",V2,[f[8]||(f[8]=oo('<h2 data-v-8bdcc044>Teacher Agreement</h2><p class="step-desc" data-v-8bdcc044>Please review and accept the terms below.</p><div class="terms-scroll" data-v-8bdcc044><h4 data-v-8bdcc044>Service Availability</h4><p data-v-8bdcc044>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-8bdcc044>Data &amp; Storage</h4><p data-v-8bdcc044>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-8bdcc044>Student Data &amp; Privacy</h4><p data-v-8bdcc044>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-8bdcc044><li data-v-8bdcc044>Use student data for educational purposes only</li><li data-v-8bdcc044>Not share student data publicly or with unauthorized parties</li><li data-v-8bdcc044>Respect that students can revoke your access at any time</li></ul><h4 data-v-8bdcc044>Your Responsibilities</h4><p data-v-8bdcc044>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-8bdcc044>No Warranty</h4><p data-v-8bdcc044>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-8bdcc044>Open Source</h4><p data-v-8bdcc044>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),r("label",G2,[We(r("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d)},null,512),[[Vr,a.value]]),f[7]||(f[7]=r("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),r("div",z2,[r("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),r("button",{class:"btn btn-primary",disabled:!a.value||l.value,onClick:u},b(l.value?"Activating...":"Activate Teacher Account"),9,J2)]),i.value?(v(),m("p",Y2,b(i.value),1)):F("",!0)])):o.value===3?(v(),m("div",q2,[f[9]||(f[9]=r("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=r("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=r("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=r("ol",{class:"next-steps"},[r("li",null,"Create your first classroom from the teacher dashboard"),r("li",null,"Share the invite link with your students"),r("li",null,"Browse exercises and assign them to your class")],-1)),r("div",X2,[r("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>c.$emit("activated"))},"Go to Dashboard ")])])):F("",!0)])]))}},Z2=we(Q2,[["__scopeId","data-v-8bdcc044"]]),eT={},tT={class:"page-footer"};function sT(e,t){return v(),m("footer",tT,[...t[0]||(t[0]=[r("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),r("nav",{class:"footer-links"},[r("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),r("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const nT=we(eT,[["render",sT],["__scopeId","data-v-1b649814"]]),oT={key:1,class:"app"},aT={class:"app-header"},rT={class:"header-right"},lT=["title"],iT={key:3,class:"stats"},cT={class:"correct"},uT={class:"wrong"},dT={class:"user-avatar-group"},fT=["title"],pT=["title"],vT={class:"app-main"},mT={key:3,class:"collection-view"},hT={key:4,class:"practice-layout"},gT={class:"practice-left"},yT={class:"practice-right"},bT={key:1,class:"commentary-panel"},_T=["innerHTML"],wT=["innerHTML"],ST=["innerHTML"],CT=["innerHTML"],$T={class:"commentary-controls"},kT={key:0,class:"bidding-box-wrapper"},xT={key:1,class:"card-choice-prompt"},AT=["innerHTML"],TT={key:3,class:"completion-controls"},NT={key:0,class:"registration-toast"},ET={__name:"MainLayout",setup(e){const t=Hv(),s=ho(),n=Ke(),o=ya(),a=Mu(),l=Sn(),i=il(),u=$n(),c=Zm(),f=O(!1),d=O(!1),p=O(!1),h=O(!1),g=O(null),y=O(""),$=O(null),C=O(null),_=O(null),w=O(!1),A=O({}),D=wa(),U=O(null),R=O(!1),Y=O(!1),z=O(null);function ue(L,H=".current"){if(!L)return;const se=L.querySelector(H);se&&(L.scrollTop=se.offsetTop-L.offsetTop)}nt(()=>c.currentStepIndex.value,()=>{eo(()=>{ue($.value,".narrative-text.current")})}),nt(()=>c.isComplete.value,L=>{L&&eo(()=>{ue($.value,".narrative-text.current")})});const me=N(()=>n.isAuthenticated.value),fe=N(()=>{const L=n.currentUser.value;return L?`${L.firstName} ${L.lastName}`:""}),be=N(()=>{const L=n.currentUser.value;return L?`${L.firstName.charAt(0)}${L.lastName.charAt(0)}`.toUpperCase():"?"}),$e=N(()=>{const L=n.currentUser.value;return(L==null?void 0:L.role)||"student"}),pe=N(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let ve=null;yt(()=>{i.loadAnnouncement(),ve=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),Fr(()=>{ve&&clearInterval(ve)}),yt(async()=>{s.initializeFromUrl(),n.initialize();const L=new URLSearchParams(window.location.search);L.get("recover")&&L.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),c.observationStore.initialize();const H=s.getCollectionFromUrl(),se=s.getLessonFromUrl();H&&(C.value=H,se&&await q(H,se)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),ws().initialize(),await l.checkTeacherStatus())});async function Z(L){console.log("User ready:",L.firstName,L.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),Y.value=!0,setTimeout(()=>{Y.value=!1},4e3)),await a.initialize(),ws().initialize(),await l.checkTeacherStatus();const se=sessionStorage.getItem("pendingJoinCode");if(se){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:se}});return}}function Q(){ws().reset(),sl().clearCache(),us().reset(),l.reset(),I.value=[],k.value=0,C.value=null,_.value=null,c.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,f.value=!1,h.value=!1,g.value=null}async function te(){w.value=!1,await l.checkTeacherStatus()}const I=O([]),k=O(0),E=N(()=>I.value[k.value]||null),ce=N(()=>{var re;const L=j(C.value),H=L!=null&&L.name?`${L.name} - `:"";if((re=_.value)!=null&&re.name)return H+_.value.name;if(!E.value)return"";const se=E.value.subfolder||E.value.category||"";return se?H+se:""});nt(k,()=>{E.value&&(c.loadDeal(E.value),s.setDealInUrl(E.value.boardNumber))},{flush:"sync"}),nt(()=>c.observationStore.pendingCount.value,(L,H)=>{L>H&&a.triggerSync()}),nt(()=>c.isComplete.value,L=>{if(L&&E.value){const H=E.value.boardNumber,se=c.boardState.boardHadWrong,re=se&&Object.keys(c.boardState.wrongStepIndices).length===0,he=se?re?"yellow":"red":"green";A.value={...A.value,[H]:he}}}),nt(()=>D.cacheVersion.value,()=>{A.value={}});async function Ce(L){const H=L.target.files[0];if(H)try{const se=await H.text(),re=xo(se);if(re.length>0){const he=H.name.replace(/\.pbn$/i,""),Ne=re.map(_e=>({..._e,subfolder:_e.subfolder||he,category:_e.category||he}));I.value=Ne,k.value=0,c.loadDeal(Ne[0]),c.resetStats(),bs().saveLessonBoardNumbers(he,Ne.map(_e=>_e.boardNumber)),_.value={id:he,name:he,category:he}}else alert("No deals found in the PBN file")}catch(se){console.error("Error loading PBN file:",se),alert("Error loading PBN file: "+se.message)}}function Ee({subfolder:L,name:H,category:se,content:re}){const he=xo(re);if(he.length>0){const Ne=he.map(_e=>({..._e,subfolder:_e.subfolder||L,category:_e.category||se}));I.value=Ne,k.value=0,c.loadDeal(Ne[0]),c.resetStats(),bs().saveLessonBoardNumbers(L,Ne.map(_e=>_e.boardNumber)),_.value={id:L,name:H,category:se},s.setLessonInUrl(L),R.value=!1,ee()}else alert("No deals found in the lesson file")}const Te=N(()=>c.boardState.correctCount),K=N(()=>c.boardState.wrongCount);function ae(L){const H=c.makeBid(L);E.value&&de(H)}function oe({seat:L,suit:H,rank:se}){const re=c.makeCardChoice(H,se);E.value&&de(re)}function de(L){const H=E.value.boardNumber;if(!L)A.value={...A.value,[H]:"red"};else if(c.boardState.boardHadWrong){const se=Object.keys(c.boardState.wrongStepIndices).length===0;A.value={...A.value,[H]:se?"yellow":"red"}}}function ke(){c.clearCardFeedback(),c.goBack()}function S(){k.value<I.value.length-1&&(k.value++,c.loadDeal(I.value[k.value]))}function x(L){L>=0&&L<I.value.length&&(k.value=L,c.loadDeal(I.value[L]))}async function B({subfolder:L,dealNumber:H}){var se;if(((se=_.value)==null?void 0:se.id)===L&&I.value.length>0){const re=I.value.findIndex(he=>he.boardNumber===H);if(re>=0){x(re);return}}for(const re of s.COLLECTIONS)try{const he=L.includes("/")?L.split("/").pop():L,Ne=`${re.baseUrl}/${he}.pbn`,xe=await fetch(Ne);if(!xe.ok)continue;const _e=await xe.text();C.value=re.id,s.setCollectionInUrl(re.id),Ee({subfolder:L,name:L,category:"",content:_e});const lt=I.value.findIndex(At=>At.boardNumber===H);lt>=0&&x(lt);return}catch{}}function V(L){p.value=!1,h.value=!1,g.value=null,B(L)}function J(L,H){h.value=!1,g.value=null,B({subfolder:L,dealNumber:H||1})}function G(){_.value=null,s.setLessonInUrl(null),I.value=[],k.value=0,c.resetStats(),R.value=!1,U.value=null,h.value=!1,g.value=null}function ne(){C.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),I.value=[],k.value=0,c.resetStats(),R.value=!1,U.value=null,h.value=!1,g.value=null}async function ee(){if(U.value=null,!C.value||!_.value)return;const L=j(C.value);if(!L)return;const H=_.value.id,se=H.includes("/")?H.split("/").pop():H,re=`${L.baseUrl}/${se}_Intro.pdf`;try{(await fetch(re,{method:"HEAD"})).ok&&(U.value=re)}catch{}}function T(L){window.innerWidth<600?window.open(L,"_blank"):(z.value=L,R.value=!0)}function P(L){C.value=L,s.setCollectionInUrl(L)}async function W(L){const H=await u.fetchExerciseBoards(L.exercise_id);if(!H||H.length===0){alert("Could not load exercise boards.");return}const se=xe=>`${xe.collection_id||""}|${xe.deal_subfolder}`,re=new Map;for(const xe of H){const _e=se(xe);re.has(_e)||re.set(_e,[]),re.get(_e).push(xe)}const he=[];for(const[,xe]of re){const _e=xe[0].deal_subfolder,lt=xe[0].collection_id,At=_e.includes("/")?_e.split("/").pop():_e;let Le=null;if(lt){const Fe=j(lt);if(Fe)try{const it=`${Fe.baseUrl}/${At}.pbn`,pt=await fetch(it);pt.ok&&(Le=await pt.text())}catch{}}if(!Le)for(const Fe of s.COLLECTIONS)try{const it=`${Fe.baseUrl}/${At}.pbn`,pt=await fetch(it);if(pt.ok){Le=await pt.text();break}}catch{}if(!Le){console.warn(`Could not load PBN for subfolder: ${_e}`);continue}const st=xo(Le),jt=new Set(xe.map(Fe=>Fe.deal_number));for(const Fe of st)if(jt.has(Fe.boardNumber)){const it=xe.find(pt=>pt.deal_number===Fe.boardNumber);he.push({...Fe,subfolder:Fe.subfolder||_e,category:Fe.category||_e,_sortOrder:(it==null?void 0:it.sort_order)??999})}}if(he.length===0){alert("Could not find any of the assigned boards.");return}he.sort((xe,_e)=>xe._sortOrder-_e._sortOrder),I.value=he,k.value=0,c.loadDeal(he[0]),c.resetStats(),bs().saveLessonBoardNumbers(L.exercise_name,he.map(xe=>xe.boardNumber)),_.value={id:L.exercise_name,name:L.exercise_name,category:"Assignment"}}function j(L){return s.COLLECTIONS.find(H=>H.id===L)}async function q(L,H){var re;const se=j(L);if(!se)return console.error("Collection not found:",L),!1;try{const he=await fetch(se.tocUrl);if(!he.ok)throw new Error(`Failed to load TOC: ${he.statusText}`);const Ne=await he.json();let xe=null,_e=null;for(const Fe of Ne.categories||[]){const it=(re=Fe.lessons)==null?void 0:re.find(pt=>pt.id===H);if(it){xe=it,_e=Fe;break}}if(!xe)return console.error("Lesson not found in TOC:",H),!1;const lt=H.includes("/")?H.split("/").pop():H,At=`${se.baseUrl}/${lt}.pbn`,Le=await fetch(At);if(!Le.ok)throw new Error(`Failed to load lesson: ${Le.statusText}`);const st=await Le.text(),jt=xo(st);if(jt.length>0){const Fe=jt.map(ds=>({...ds,subfolder:ds.subfolder||H,category:ds.category||_e.name}));I.value=Fe;const it=s.getDealFromUrl(),pt=it?Fe.findIndex(ds=>ds.boardNumber===it):-1;return k.value=pt>=0?pt:0,c.loadDeal(Fe[k.value]),c.resetStats(),_.value={id:H,name:xe.name,category:_e.name},ee(),!0}return!1}catch(he){return console.error("Error loading lesson from URL:",he),!1}}return(L,H)=>{var se,re,he,Ne,xe,_e,lt,At,Le,st,jt,Fe,it,pt,ds,pl;return me.value?(v(),m("div",oT,[r("header",aT,[r("h1",null,b(I.value.length?ce.value:pe.value),1),r("div",rT,[ye(R_),r("button",{class:"progress-btn",onClick:H[0]||(H[0]=Be=>d.value=!0),title:"View Progress"}," Progress "),r("button",{class:"accomplishments-btn",onClick:H[1]||(H[1]=Be=>p.value=!0),title:"View Accomplishments"}," Accomplishments "),M(l).isTeacher.value?(v(),m("button",{key:0,class:"teacher-btn",onClick:H[2]||(H[2]=Be=>{h.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):F("",!0),I.value.length&&C.value?(v(),m("button",{key:1,class:"lessons-btn",onClick:G,title:"Back to "+((se=j(C.value))==null?void 0:se.name)},b((re=j(C.value))==null?void 0:re.name),9,lT)):F("",!0),C.value||I.value.length?(v(),m("button",{key:2,class:"lobby-btn",onClick:ne,title:"Return to lobby"}," Lobby ")):F("",!0),Te.value+K.value>0?(v(),m("div",iT,[r("span",cT,b(Te.value),1),r("span",uT,b(K.value),1)])):F("",!0),r("div",dT,[$e.value!=="student"?(v(),m("button",{key:0,class:ie(["role-badge","role-"+$e.value]),onClick:ne,title:"Return to "+$e.value+" lobby"},b($e.value),11,fT)):F("",!0),r("button",{class:"user-btn",onClick:H[3]||(H[3]=Be=>f.value=!0),title:fe.value},b(be.value),9,pT)])])]),r("main",vT,[ye($_),ye(w_),h.value&&!g.value?(v(),He(VS,{key:0,onClose:H[4]||(H[4]=Be=>h.value=!1),onSelectStudent:H[5]||(H[5]=(Be,kn)=>{g.value=Be,y.value=kn})})):h.value&&g.value?(v(),He(wC,{key:1,studentId:g.value,studentName:y.value,onBack:H[6]||(H[6]=Be=>g.value=null),onNavigateToLesson:J},null,8,["studentId","studentName"])):!I.value.length&&!C.value?(v(),He(j2,{key:2,onSelectCollection:P,onSelectAssignment:W,onShowBecomeTeacher:H[7]||(H[7]=Be=>w.value=!0),onLoadFile:Ce})):!I.value.length&&C.value?(v(),m("div",mT,[r("h2",null,b(((he=j(C.value))==null?void 0:he.name)||C.value),1),H[17]||(H[17]=r("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ye(JC,{visible:!0,inline:!0,collection:j(C.value),onLoad:Ee},null,8,["collection"])])):(v(),m("div",hT,[r("div",gT,[I.value.length>1?(v(),He(Wu,{key:0,boardNumbers:I.value.map(Be=>Be.boardNumber),lessonSubfolder:((Ne=E.value)==null?void 0:Ne.subfolder)||((xe=E.value)==null?void 0:xe.category)||"",currentIndex:k.value,forceBoardStatus:A.value,introUrl:U.value,onGoto:x,onOpenIntro:T},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceBoardStatus","introUrl"])):F("",!0),ye(wy,{boardNumber:(_e=E.value)==null?void 0:_e.boardNumber,dealer:(lt=E.value)==null?void 0:lt.dealer,vulnerable:(At=E.value)==null?void 0:At.vulnerable,contract:(Le=E.value)==null?void 0:Le.contract,declarer:(st=E.value)==null?void 0:st.declarer,showContract:M(c).auctionState.auctionComplete||M(c).showOpeningLead.value||M(c).hasSteps.value&&!M(c).hasBidSteps.value,openingLead:M(c).showOpeningLead.value?(jt=E.value)==null?void 0:jt.openingLead:"",totalDeals:I.value.length,currentIndex:k.value,dealBoardNumbers:I.value.map(Be=>Be.boardNumber),onGoto:x},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ye(Ug,{hands:M(c).hands.value,hiddenSeats:M(c).hiddenSeats.value,showHcp:M(c).showHcp.value,compact:!0,clickableSeat:M(c).hasCardChoice.value?M(c).studentSeat.value:null,playedCards:M(c).showcardsPlayedCards.value,onCardClick:oe},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),r("div",yT,[M(c).showAuctionTable.value?(v(),He(ny,{key:0,bids:M(c).hasBidSteps.value?M(c).auctionState.displayedBids:((Fe=E.value)==null?void 0:Fe.auction)||[],dealer:((it=E.value)==null?void 0:it.dealer)||"N",currentBidIndex:M(c).hasBidSteps.value?M(c).auctionState.currentBidIndex:-1,wrongBidIndex:M(c).auctionState.wrongBidIndex,correctBidIndex:M(c).auctionState.correctBidIndex,showTurnIndicator:M(c).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):F("",!0),ye(ki,{visible:!!M(c).auctionState.wrongBid,type:"wrong",wrongBid:M(c).auctionState.wrongBid,correctBid:M(c).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ye(ki,{visible:!!M(c).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:M(c).cardChoiceState.wrongCard,correctCardCode:M(c).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),M(c).hasSteps.value?(v(),m("div",bT,[r("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:$},[(v(!0),m(X,null,le(M(c).steps.value.slice(0,M(c).currentStepIndex.value),(Be,kn)=>(v(),m(X,{key:"prev-"+kn},[kn>=M(c).commentaryStartIndex.value?(v(),m(X,{key:0},[r("span",{class:"narrative-text previous",innerHTML:M(qs)(M(On)(Be.text))},null,8,_T),Be.type==="bid"&&Be.explanationText?(v(),m("span",{key:0,class:ie(["narrative-text",kn===M(c).currentStepIndex.value-1&&M(c).isBidStep.value&&!M(c).bidAnswered.value?"current":"previous"]),innerHTML:M(qs)(M(On)(Be.explanationText))},null,10,wT)):F("",!0)],64)):F("",!0)],64))),128)),M(c).currentStep.value?(v(),m("span",{key:0,class:"narrative-text current",innerHTML:M(qs)(M(On)(M(c).currentStep.value.text))},null,8,ST)):F("",!0),M(c).bidAnswered.value&&((pt=M(c).currentStep.value)!=null&&pt.explanationText)?(v(),m("span",{key:1,class:"narrative-text current",innerHTML:M(qs)(M(On)(M(c).currentStep.value.explanationText))},null,8,CT)):F("",!0)],512),r("div",$T,[M(c).hasBidPrompt.value?(v(),m("div",kT,[ye(Xg,{lastBid:M(c).lastContractBid.value,canDouble:M(c).canDouble.value,canRedouble:M(c).canRedouble.value,onBid:ae},null,8,["lastBid","canDouble","canRedouble"])])):M(c).hasCardChoice.value?(v(),m("div",xT," Click on the card you would choose ")):F("",!0),M(c).canGoBack.value?(v(),m("button",{key:2,class:"instruction-btn secondary",onClick:ke},"  Back ")):F("",!0),!M(c).isComplete.value&&(M(c).bidAnswered.value||!M(c).hasBidPrompt.value&&!M(c).hasCardChoice.value&&M(c).currentStep.value&&M(c).currentStep.value.type!=="end")?(v(),m("button",{key:3,class:"instruction-btn primary",onClick:H[8]||(H[8]=Be=>M(c).advance())},b(((ds=M(c).currentStep.value)==null?void 0:ds.type)==="rotate"?"Rotate":"Next")+"  ",1)):F("",!0),M(c).isComplete.value&&k.value<I.value.length-1?(v(),m("button",{key:4,class:"next-deal-btn",onClick:S}," Next Deal  ")):F("",!0)])])):(pl=E.value)!=null&&pl.commentary?(v(),m("div",{key:2,class:"display-commentary",innerHTML:M(qs)(M(On)(M(Zv)(E.value.commentary)))},null,8,AT)):F("",!0),!M(c).hasSteps.value&&M(c).isComplete.value&&k.value<I.value.length-1?(v(),m("div",TT,[r("button",{class:"next-deal-btn",onClick:S}," Next Deal  ")])):F("",!0)])]))]),ye(u_,{visible:f.value,onClose:H[9]||(H[9]=Be=>f.value=!1),onSwitchUser:Q,onLogout:Q,onBecomeTeacher:H[10]||(H[10]=Be=>w.value=!0)},null,8,["visible"]),Y.value?(v(),m("div",NT," Account created  your data is encrypted and linked to your email for recovery. ")):F("",!0),d.value?(v(),m("div",{key:1,class:"modal-overlay",onClick:H[12]||(H[12]=St(Be=>d.value=!1,["self"]))},[ye(Tw,{onClose:H[11]||(H[11]=Be=>d.value=!1)})])):F("",!0),p.value?(v(),m("div",{key:2,class:"modal-overlay",onClick:H[14]||(H[14]=St(Be=>p.value=!1,["self"]))},[ye(vS,{onClose:H[13]||(H[13]=Be=>p.value=!1),onNavigateToDeal:V})])):F("",!0),ye(s$,{visible:R.value,url:z.value||"",onClose:H[15]||(H[15]=Be=>R.value=!1)},null,8,["visible","url"]),w.value?(v(),He(Z2,{key:3,onClose:H[16]||(H[16]=Be=>w.value=!1),onActivated:te})):F("",!0),ye(nT)])):(v(),He(Tb,{key:0,onUserReady:Z}))}}},OT=()=>Dp(()=>import("./JoinClassroomView-BBeFEdVz.js"),__vite__mapDeps([0,1])),IT=[{path:"/join/:joinCode",name:"join",component:OT},{path:"/:pathMatch(.*)*",name:"app",component:ET}],PT=jv({history:bv(),routes:IT});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const td=xp(Op);td.use(PT);td.mount("#app");export{we as _,r as a,ye as b,m as c,F as d,Ae as e,oo as f,Ke as g,wo as h,uf as i,su as j,Hv as k,v as l,yt as o,O as r,b as t,DT as u,Kd as w};
