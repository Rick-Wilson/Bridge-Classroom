const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-CBDI4H6o.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ar(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ke={},Gs=[],Ht=()=>{},ni=()=>!1,jo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),rr=e=>e.startsWith("onUpdate:"),Qe=Object.assign,lr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Au=Object.prototype.hasOwnProperty,$e=(e,t)=>Au.call(e,t),me=Array.isArray,zs=e=>Xn(e)==="[object Map]",un=e=>Xn(e)==="[object Set]",Vr=e=>Xn(e)==="[object Date]",ge=e=>typeof e=="function",He=e=>typeof e=="string",Pt=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",oi=e=>(xe(e)||ge(e))&&ge(e.then)&&ge(e.catch),ai=Object.prototype.toString,Xn=e=>ai.call(e),Nu=e=>Xn(e).slice(8,-1),ri=e=>Xn(e)==="[object Object]",ir=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Tn=ar(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ho=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Tu=/-\w/g,At=Ho(e=>e.replace(Tu,t=>t.slice(1).toUpperCase())),Eu=/\B([A-Z])/g,ms=Ho(e=>e.replace(Eu,"-$1").toLowerCase()),Wo=Ho(e=>e.charAt(0).toUpperCase()+e.slice(1)),aa=Ho(e=>e?`on${Wo(e)}`:""),us=(e,t)=>!Object.is(e,t),mo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},li=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Vo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Kr;const Ko=()=>Kr||(Kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function it(e){if(me(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=He(n)?Pu(n):it(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(He(e)||xe(e))return e}const Ou=/;(?![^(]*\))/g,Ru=/:([^]+)/,Iu=/\/\*[^]*?\*\//g;function Pu(e){const t={};return e.replace(Iu,"").split(Ou).forEach(s=>{if(s){const n=s.split(Ru);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ue(e){let t="";if(He(e))t=e;else if(me(e))for(let s=0;s<e.length;s++){const n=ue(e[s]);n&&(t+=n+" ")}else if(xe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Du="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Lu=ar(Du);function ii(e){return!!e||e===""}function Bu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Es(e[n],t[n]);return s}function Es(e,t){if(e===t)return!0;let s=Vr(e),n=Vr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Pt(e),n=Pt(t),s||n)return e===t;if(s=me(e),n=me(t),s||n)return s&&n?Bu(e,t):!1;if(s=xe(e),n=xe(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const i=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(i&&!l||!i&&l||!Es(e[r],t[r]))return!1}}return String(e)===String(t)}function cr(e,t){return e.findIndex(s=>Es(s,t))}const ci=e=>!!(e&&e.__v_isRef===!0),S=e=>He(e)?e:e==null?"":me(e)||xe(e)&&(e.toString===ai||!ge(e.toString))?ci(e)?S(e.value):JSON.stringify(e,ui,2):String(e),ui=(e,t)=>ci(t)?ui(e,t.value):zs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[ra(n,a)+" =>"]=o,s),{})}:un(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>ra(s))}:Pt(t)?ra(t):xe(t)&&!me(t)&&!ri(t)?String(t):t,ra=(e,t="")=>{var s;return Pt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Uu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!t&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=dt;try{return dt=this,t()}finally{dt=s}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Mu(){return dt}let Ne;const la=new WeakSet;class di{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,la.has(this)&&(la.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gr(this),pi(this);const t=Ne,s=Rt;Ne=this,Rt=!0;try{return this.fn()}finally{mi(this),Ne=t,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fr(t);this.deps=this.depsTail=void 0,Gr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?la.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ta(this)&&this.run()}get dirty(){return Ta(this)}}let fi=0,En,On;function vi(e,t=!1){if(e.flags|=8,t){e.next=On,On=e;return}e.next=En,En=e}function ur(){fi++}function dr(){if(--fi>0)return;if(On){let t=On;for(On=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;En;){let t=En;for(En=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function pi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function mi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),fr(n),Fu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Ta(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(hi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function hi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Mn)||(e.globalVersion=Mn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ta(e))))return;e.flags|=2;const t=e.dep,s=Ne,n=Rt;Ne=e,Rt=!0;try{pi(e);const o=e.fn(e._value);(t.version===0||us(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ne=s,Rt=n,mi(e),e.flags&=-3}}function fr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)fr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Fu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Rt=!0;const gi=[];function es(){gi.push(Rt),Rt=!1}function ts(){const e=gi.pop();Rt=e===void 0?!0:e}function Gr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Ne;Ne=void 0;try{t()}finally{Ne=s}}}let Mn=0;class ju{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ne||!Rt||Ne===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ne)s=this.activeLink=new ju(Ne,this),Ne.deps?(s.prevDep=Ne.depsTail,Ne.depsTail.nextDep=s,Ne.depsTail=s):Ne.deps=Ne.depsTail=s,yi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Ne.depsTail,s.nextDep=void 0,Ne.depsTail.nextDep=s,Ne.depsTail=s,Ne.deps===s&&(Ne.deps=n)}return s}trigger(t){this.version++,Mn++,this.notify(t)}notify(t){ur();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{dr()}}}function yi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)yi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ea=new WeakMap,As=Symbol(""),Oa=Symbol(""),Fn=Symbol("");function st(e,t,s){if(Rt&&Ne){let n=Ea.get(e);n||Ea.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new vr),o.map=n,o.key=s),o.track()}}function Yt(e,t,s,n,o,a){const r=Ea.get(e);if(!r){Mn++;return}const i=l=>{l&&l.trigger()};if(ur(),t==="clear")r.forEach(i);else{const l=me(e),u=l&&ir(s);if(l&&s==="length"){const d=Number(n);r.forEach((f,p)=>{(p==="length"||p===Fn||!Pt(p)&&p>=d)&&i(f)})}else switch((s!==void 0||r.has(void 0))&&i(r.get(s)),u&&i(r.get(Fn)),t){case"add":l?u&&i(r.get("length")):(i(r.get(As)),zs(e)&&i(r.get(Oa)));break;case"delete":l||(i(r.get(As)),zs(e)&&i(r.get(Oa)));break;case"set":zs(e)&&i(r.get(As));break}}dr()}function Is(e){const t=Se(e);return t===e?t:(st(t,"iterate",Fn),kt(e)?t:t.map(Dt))}function Go(e){return st(e=Se(e),"iterate",Fn),e}function rs(e,t){return ss(e)?Qs(Ns(e)?Dt(t):t):Dt(t)}const Hu={__proto__:null,[Symbol.iterator](){return ia(this,Symbol.iterator,e=>rs(this,e))},concat(...e){return Is(this).concat(...e.map(t=>me(t)?Is(t):t))},entries(){return ia(this,"entries",e=>(e[1]=rs(this,e[1]),e))},every(e,t){return Kt(this,"every",e,t,void 0,arguments)},filter(e,t){return Kt(this,"filter",e,t,s=>s.map(n=>rs(this,n)),arguments)},find(e,t){return Kt(this,"find",e,t,s=>rs(this,s),arguments)},findIndex(e,t){return Kt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Kt(this,"findLast",e,t,s=>rs(this,s),arguments)},findLastIndex(e,t){return Kt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Kt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ca(this,"includes",e)},indexOf(...e){return ca(this,"indexOf",e)},join(e){return Is(this).join(e)},lastIndexOf(...e){return ca(this,"lastIndexOf",e)},map(e,t){return Kt(this,"map",e,t,void 0,arguments)},pop(){return mn(this,"pop")},push(...e){return mn(this,"push",e)},reduce(e,...t){return zr(this,"reduce",e,t)},reduceRight(e,...t){return zr(this,"reduceRight",e,t)},shift(){return mn(this,"shift")},some(e,t){return Kt(this,"some",e,t,void 0,arguments)},splice(...e){return mn(this,"splice",e)},toReversed(){return Is(this).toReversed()},toSorted(e){return Is(this).toSorted(e)},toSpliced(...e){return Is(this).toSpliced(...e)},unshift(...e){return mn(this,"unshift",e)},values(){return ia(this,"values",e=>rs(this,e))}};function ia(e,t,s){const n=Go(e),o=n[t]();return n!==e&&!kt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const Wu=Array.prototype;function Kt(e,t,s,n,o,a){const r=Go(e),i=r!==e&&!kt(e),l=r[t];if(l!==Wu[t]){const f=l.apply(e,a);return i?Dt(f):f}let u=s;r!==e&&(i?u=function(f,p){return s.call(this,rs(e,f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const d=l.call(r,u,n);return i&&o?o(d):d}function zr(e,t,s,n){const o=Go(e);let a=s;return o!==e&&(kt(e)?s.length>3&&(a=function(r,i,l){return s.call(this,r,i,l,e)}):a=function(r,i,l){return s.call(this,r,rs(e,i),l,e)}),o[t](a,...n)}function ca(e,t,s){const n=Se(e);st(n,"iterate",Fn);const o=n[t](...s);return(o===-1||o===!1)&&hr(s[0])?(s[0]=Se(s[0]),n[t](...s)):o}function mn(e,t,s=[]){es(),ur();const n=Se(e)[t].apply(e,s);return dr(),ts(),n}const Vu=ar("__proto__,__v_isRef,__isVue"),bi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pt));function Ku(e){Pt(e)||(e=String(e));const t=Se(this);return st(t,"has",e),t.hasOwnProperty(e)}class _i{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?td:$i:a?Si:Ci).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=me(t);if(!o){let l;if(r&&(l=Hu[s]))return l;if(s==="hasOwnProperty")return Ku}const i=Reflect.get(t,s,ot(t)?t:n);if((Pt(s)?bi.has(s):Vu(s))||(o||st(t,"get",s),a))return i;if(ot(i)){const l=r&&ir(s)?i:i.value;return o&&xe(l)?Ia(l):l}return xe(i)?o?Ia(i):Wt(i):i}}class wi extends _i{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=me(t)&&ir(s);if(!this._isShallow){const u=ss(a);if(!kt(n)&&!ss(n)&&(a=Se(a),n=Se(n)),!r&&ot(a)&&!ot(n))return u||(a.value=n),!0}const i=r?Number(s)<t.length:$e(t,s),l=Reflect.set(t,s,n,ot(t)?t:o);return t===Se(o)&&(i?us(n,a)&&Yt(t,"set",s,n):Yt(t,"add",s,n)),l}deleteProperty(t,s){const n=$e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Yt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Pt(s)||!bi.has(s))&&st(t,"has",s),n}ownKeys(t){return st(t,"iterate",me(t)?"length":As),Reflect.ownKeys(t)}}class Gu extends _i{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const zu=new wi,Ju=new Gu,Yu=new wi(!0);const Ra=e=>e,lo=e=>Reflect.getPrototypeOf(e);function qu(e,t,s){return function(...n){const o=this.__v_raw,a=Se(o),r=zs(a),i=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,u=o[e](...n),d=s?Ra:t?Qs:Dt;return!t&&st(a,"iterate",l?Oa:As),Qe(Object.create(u),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:i?[d(f[0]),d(f[1])]:d(f),done:p}}})}}function io(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Xu(e,t){const s={get(o){const a=this.__v_raw,r=Se(a),i=Se(o);e||(us(o,i)&&st(r,"get",o),st(r,"get",i));const{has:l}=lo(r),u=t?Ra:e?Qs:Dt;if(l.call(r,o))return u(a.get(o));if(l.call(r,i))return u(a.get(i));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&st(Se(o),"iterate",As),o.size},has(o){const a=this.__v_raw,r=Se(a),i=Se(o);return e||(us(o,i)&&st(r,"has",o),st(r,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const r=this,i=r.__v_raw,l=Se(i),u=t?Ra:e?Qs:Dt;return!e&&st(l,"iterate",As),i.forEach((d,f)=>o.call(a,u(d),u(f),r))}};return Qe(s,e?{add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear")}:{add(o){!t&&!kt(o)&&!ss(o)&&(o=Se(o));const a=Se(this);return lo(a).has.call(a,o)||(a.add(o),Yt(a,"add",o,o)),this},set(o,a){!t&&!kt(a)&&!ss(a)&&(a=Se(a));const r=Se(this),{has:i,get:l}=lo(r);let u=i.call(r,o);u||(o=Se(o),u=i.call(r,o));const d=l.call(r,o);return r.set(o,a),u?us(a,d)&&Yt(r,"set",o,a):Yt(r,"add",o,a),this},delete(o){const a=Se(this),{has:r,get:i}=lo(a);let l=r.call(a,o);l||(o=Se(o),l=r.call(a,o)),i&&i.call(a,o);const u=a.delete(o);return l&&Yt(a,"delete",o,void 0),u},clear(){const o=Se(this),a=o.size!==0,r=o.clear();return a&&Yt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=qu(o,e,t)}),s}function pr(e,t){const s=Xu(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get($e(s,o)&&o in n?s:n,o,a)}const Qu={get:pr(!1,!1)},Zu={get:pr(!1,!0)},ed={get:pr(!0,!1)};const Ci=new WeakMap,Si=new WeakMap,$i=new WeakMap,td=new WeakMap;function sd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nd(e){return e.__v_skip||!Object.isExtensible(e)?0:sd(Nu(e))}function Wt(e){return ss(e)?e:mr(e,!1,zu,Qu,Ci)}function ki(e){return mr(e,!1,Yu,Zu,Si)}function Ia(e){return mr(e,!0,Ju,ed,$i)}function mr(e,t,s,n,o){if(!xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=nd(e);if(a===0)return e;const r=o.get(e);if(r)return r;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Ns(e){return ss(e)?Ns(e.__v_raw):!!(e&&e.__v_isReactive)}function ss(e){return!!(e&&e.__v_isReadonly)}function kt(e){return!!(e&&e.__v_isShallow)}function hr(e){return e?!!e.__v_raw:!1}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function od(e){return!$e(e,"__v_skip")&&Object.isExtensible(e)&&li(e,"__v_skip",!0),e}const Dt=e=>xe(e)?Wt(e):e,Qs=e=>xe(e)?Ia(e):e;function ot(e){return e?e.__v_isRef===!0:!1}function E(e){return xi(e,!1)}function ad(e){return xi(e,!0)}function xi(e,t){return ot(e)?e:new rd(e,t)}class rd{constructor(t,s){this.dep=new vr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Se(t),this._value=s?t:Dt(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||kt(t)||ss(t);t=n?t:Se(t),us(t,s)&&(this._rawValue=t,this._value=n?t:Dt(t),this.dep.trigger())}}function P(e){return ot(e)?e.value:e}const ld={get:(e,t,s)=>t==="__v_raw"?e:P(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ot(o)&&!ot(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Ai(e){return Ns(e)?e:new Proxy(e,ld)}class id{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new vr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return vi(this,!0),!0}get value(){const t=this.dep.track();return hi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cd(e,t,s=!1){let n,o;return ge(e)?n=e:(n=e.get,o=e.set),new id(n,o,s)}const co={},wo=new WeakMap;let $s;function ud(e,t=!1,s=$s){if(s){let n=wo.get(s);n||wo.set(s,n=[]),n.push(e)}}function dd(e,t,s=ke){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:i,call:l}=s,u=R=>o?R:kt(R)||o===!1||o===0?qt(R,1):qt(R);let d,f,p,v,g=!1,y=!1;if(ot(e)?(f=()=>e.value,g=kt(e)):Ns(e)?(f=()=>u(e),g=!0):me(e)?(y=!0,g=e.some(R=>Ns(R)||kt(R)),f=()=>e.map(R=>{if(ot(R))return R.value;if(Ns(R))return u(R);if(ge(R))return l?l(R,2):R()})):ge(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){es();try{p()}finally{ts()}}const R=$s;$s=d;try{return l?l(e,3,[v]):e(v)}finally{$s=R}}:f=Ht,t&&o){const R=f,q=o===!0?1/0:o;f=()=>qt(R(),q)}const N=Mu(),$=()=>{d.stop(),N&&N.active&&lr(N.effects,d)};if(a&&t){const R=t;t=(...q)=>{R(...q),$()}}let w=y?new Array(e.length).fill(co):co;const _=R=>{if(!(!(d.flags&1)||!d.dirty&&!R))if(t){const q=d.run();if(o||g||(y?q.some((Q,L)=>us(Q,w[L])):us(q,w))){p&&p();const Q=$s;$s=d;try{const L=[q,w===co?void 0:y&&w[0]===co?[]:w,v];w=q,l?l(t,3,L):t(...L)}finally{$s=Q}}}else d.run()};return i&&i(_),d=new di(f),d.scheduler=r?()=>r(_,!1):_,v=R=>ud(R,!1,d),p=d.onStop=()=>{const R=wo.get(d);if(R){if(l)l(R,4);else for(const q of R)q();wo.delete(d)}},t?n?_(!0):w=d.run():r?r(_.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function qt(e,t=1/0,s){if(t<=0||!xe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ot(e))qt(e.value,t,s);else if(me(e))for(let n=0;n<e.length;n++)qt(e[n],t,s);else if(un(e)||zs(e))e.forEach(n=>{qt(n,t,s)});else if(ri(e)){for(const n in e)qt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&qt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qn(e,t,s,n){try{return n?e(...n):e()}catch(o){zo(o,t,s)}}function Vt(e,t,s,n){if(ge(e)){const o=Qn(e,t,s,n);return o&&oi(o)&&o.catch(a=>{zo(a,t,s)}),o}if(me(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Vt(e[a],t,s,n));return o}}function zo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||ke;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,l,u)===!1)return}i=i.parent}if(a){es(),Qn(a,null,10,[e,l,u]),ts();return}}fd(e,s,o,n,r)}function fd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const ct=[];let Ft=-1;const Js=[];let ls=null,Us=0;const Ni=Promise.resolve();let Co=null;function jn(e){const t=Co||Ni;return e?t.then(this?e.bind(this):e):t}function vd(e){let t=Ft+1,s=ct.length;for(;t<s;){const n=t+s>>>1,o=ct[n],a=Hn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function gr(e){if(!(e.flags&1)){const t=Hn(e),s=ct[ct.length-1];!s||!(e.flags&2)&&t>=Hn(s)?ct.push(e):ct.splice(vd(t),0,e),e.flags|=1,Ti()}}function Ti(){Co||(Co=Ni.then(Oi))}function pd(e){me(e)?Js.push(...e):ls&&e.id===-1?ls.splice(Us+1,0,e):e.flags&1||(Js.push(e),e.flags|=1),Ti()}function Jr(e,t,s=Ft+1){for(;s<ct.length;s++){const n=ct[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ct.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ei(e){if(Js.length){const t=[...new Set(Js)].sort((s,n)=>Hn(s)-Hn(n));if(Js.length=0,ls){ls.push(...t);return}for(ls=t,Us=0;Us<ls.length;Us++){const s=ls[Us];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ls=null,Us=0}}const Hn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Oi(e){try{for(Ft=0;Ft<ct.length;Ft++){const t=ct[Ft];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Qn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ft<ct.length;Ft++){const t=ct[Ft];t&&(t.flags&=-2)}Ft=-1,ct.length=0,Ei(),Co=null,(ct.length||Js.length)&&Oi()}}let qe=null,Ri=null;function So(e){const t=qe;return qe=e,Ri=e&&e.type.__scopeId||null,t}function md(e,t=qe,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&xo(-1);const a=So(t);let r;try{r=e(...o)}finally{So(a),n._d&&xo(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Re(e,t){if(qe===null)return e;const s=Xo(qe),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,i,l=ke]=t[o];a&&(ge(a)&&(a={mounted:a,updated:a}),a.deep&&qt(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:i,modifiers:l}))}return e}function gs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const i=o[r];a&&(i.oldValue=a[r].value);let l=i.dir[n];l&&(es(),Vt(l,s,8,[e.el,i,e,t]),ts())}}function ho(e,t){if(nt){let s=nt.provides;const n=nt.parent&&nt.parent.provides;n===s&&(s=nt.provides=Object.create(n)),s[e]=t}}function It(e,t,s=!1){const n=gf();if(n||qs){let o=qs?qs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ge(t)?t.call(n&&n.proxy):t}}const hd=Symbol.for("v-scx"),gd=()=>It(hd);function ft(e,t,s){return Ii(e,t,s)}function Ii(e,t,s=ke){const{immediate:n,deep:o,flush:a,once:r}=s,i=Qe({},s),l=t&&n||!t&&a!=="post";let u;if(Kn){if(a==="sync"){const v=gd();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=Ht,v.resume=Ht,v.pause=Ht,v}}const d=nt;i.call=(v,g,y)=>Vt(v,d,g,y);let f=!1;a==="post"?i.scheduler=v=>{ht(v,d&&d.suspense)}:a!=="sync"&&(f=!0,i.scheduler=(v,g)=>{g?v():gr(v)}),i.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const p=dd(e,t,i);return Kn&&(u?u.push(p):l&&p()),p}function yd(e,t,s){const n=this.proxy,o=He(e)?e.includes(".")?Pi(n,e):()=>n[e]:e.bind(n,n);let a;ge(t)?a=t:(a=t.handler,s=t);const r=Zn(this),i=Ii(o,a.bind(n),s);return r(),i}function Pi(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const bd=Symbol("_vte"),_d=e=>e.__isTeleport,wd=Symbol("_leaveCb");function yr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,yr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Di(e,t){return ge(e)?Qe({name:e.name},t,{setup:e}):e}function Li(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const $o=new WeakMap;function Rn(e,t,s,n,o=!1){if(me(e)){e.forEach((g,y)=>Rn(g,t&&(me(t)?t[y]:t),s,n,o));return}if(Ys(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Rn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?Xo(n.component):n.el,r=o?null:a,{i,r:l}=e,u=t&&t.r,d=i.refs===ke?i.refs={}:i.refs,f=i.setupState,p=Se(f),v=f===ke?ni:g=>$e(p,g);if(u!=null&&u!==l){if(Yr(t),He(u))d[u]=null,v(u)&&(f[u]=null);else if(ot(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(ge(l))Qn(l,i,12,[r,d]);else{const g=He(l),y=ot(l);if(g||y){const N=()=>{if(e.f){const $=g?v(l)?f[l]:d[l]:l.value;if(o)me($)&&lr($,a);else if(me($))$.includes(a)||$.push(a);else if(g)d[l]=[a],v(l)&&(f[l]=d[l]);else{const w=[a];l.value=w,e.k&&(d[e.k]=w)}}else g?(d[l]=r,v(l)&&(f[l]=r)):y&&(l.value=r,e.k&&(d[e.k]=r))};if(r){const $=()=>{N(),$o.delete(e)};$.id=-1,$o.set(e,$),ht($,s)}else Yr(e),N()}}}function Yr(e){const t=$o.get(e);t&&(t.flags|=8,$o.delete(e))}Ko().requestIdleCallback;Ko().cancelIdleCallback;const Ys=e=>!!e.type.__asyncLoader,Bi=e=>e.type.__isKeepAlive;function Cd(e,t){Ui(e,"a",t)}function Sd(e,t){Ui(e,"da",t)}function Ui(e,t,s=nt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Jo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Bi(o.parent.vnode)&&$d(n,t,s,o),o=o.parent}}function $d(e,t,s,n){const o=Jo(t,e,n,!0);br(()=>{lr(n[t],o)},s)}function Jo(e,t,s=nt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{es();const i=Zn(s),l=Vt(t,s,e,r);return i(),ts(),l});return n?o.unshift(a):o.push(a),a}}const os=e=>(t,s=nt)=>{(!Kn||e==="sp")&&Jo(e,(...n)=>t(...n),s)},kd=os("bm"),_t=os("m"),xd=os("bu"),Ad=os("u"),Mi=os("bum"),br=os("um"),Nd=os("sp"),Td=os("rtg"),Ed=os("rtc");function Od(e,t=nt){Jo("ec",e,t)}const Rd="components";function Id(e,t){return Dd(Rd,e,!0,t)||e}const Pd=Symbol.for("v-ndc");function Dd(e,t,s=!0,n=!1){const o=qe||nt;if(o){const a=o.type;{const i=Cf(a,!1);if(i&&(i===t||i===At(t)||i===Wo(At(t))))return a}const r=qr(o[e]||a[e],t)||qr(o.appContext[e],t);return!r&&n?a:r}}function qr(e,t){return e&&(e[t]||e[At(t)]||e[Wo(At(t))])}function ie(e,t,s,n){let o;const a=s,r=me(e);if(r||He(e)){const i=r&&Ns(e);let l=!1,u=!1;i&&(l=!kt(e),u=ss(e),e=Go(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(l?u?Qs(Dt(e[d])):Dt(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(xe(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const d=i[l];o[l]=t(e[d],d,l,a)}}else o=[];return o}function Ld(e,t,s={},n,o){if(qe.ce||qe.parent&&Ys(qe.parent)&&qe.parent.ce){const u=Object.keys(s).length>0;return s.name=t,m(),Ue(Z,null,[he("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),m();const r=a&&Fi(a(s)),i=s.key||r&&r.key,l=Ue(Z,{key:(i&&!Pt(i)?i:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),l}function Fi(e){return e.some(t=>Vn(t)?!(t.type===ns||t.type===Z&&!Fi(t.children)):!0)?e:null}const Pa=e=>e?ac(e)?Xo(e):Pa(e.parent):null,In=Qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pa(e.parent),$root:e=>Pa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Hi(e),$forceUpdate:e=>e.f||(e.f=()=>{gr(e.update)}),$nextTick:e=>e.n||(e.n=jn.bind(e.proxy)),$watch:e=>yd.bind(e)}),ua=(e,t)=>e!==ke&&!e.__isScriptSetup&&$e(e,t),Bd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:i,appContext:l}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ua(n,t))return r[t]=1,n[t];if(o!==ke&&$e(o,t))return r[t]=2,o[t];if($e(a,t))return r[t]=3,a[t];if(s!==ke&&$e(s,t))return r[t]=4,s[t];Da&&(r[t]=0)}}const u=In[t];let d,f;if(u)return t==="$attrs"&&st(e.attrs,"get",""),u(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(s!==ke&&$e(s,t))return r[t]=4,s[t];if(f=l.config.globalProperties,$e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ua(o,t)?(o[t]=s,!0):n!==ke&&$e(n,t)?(n[t]=s,!0):$e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},i){let l;return!!(s[i]||e!==ke&&i[0]!=="$"&&$e(e,i)||ua(t,i)||$e(a,i)||$e(n,i)||$e(In,i)||$e(o.config.globalProperties,i)||(l=r.__cssModules)&&l[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:$e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Xr(e){return me(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Da=!0;function Ud(e){const t=Hi(e),s=e.proxy,n=e.ctx;Da=!1,t.beforeCreate&&Qr(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:i,provide:l,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:v,updated:g,activated:y,deactivated:N,beforeDestroy:$,beforeUnmount:w,destroyed:_,unmounted:R,render:q,renderTracked:Q,renderTriggered:L,errorCaptured:Y,serverPrefetch:J,expose:de,inheritAttrs:ve,components:ce,directives:_e,filters:we}=t;if(u&&Md(u,n,null),r)for(const X in r){const D=r[X];ge(D)&&(n[X]=D.bind(s))}if(o){const X=o.call(s,s);xe(X)&&(e.data=Wt(X))}if(Da=!0,a)for(const X in a){const D=a[X],V=ge(D)?D.bind(s,s):ge(D.get)?D.get.bind(s,s):Ht,G=!ge(D)&&ge(D.set)?D.set.bind(s):Ht,K=T({get:V,set:G});Object.defineProperty(n,X,{enumerable:!0,configurable:!0,get:()=>K.value,set:ae=>K.value=ae})}if(i)for(const X in i)ji(i[X],n,s,X);if(l){const X=ge(l)?l.call(s):l;Reflect.ownKeys(X).forEach(D=>{ho(D,X[D])})}d&&Qr(d,e,"c");function re(X,D){me(D)?D.forEach(V=>X(V.bind(s))):D&&X(D.bind(s))}if(re(kd,f),re(_t,p),re(xd,v),re(Ad,g),re(Cd,y),re(Sd,N),re(Od,Y),re(Ed,Q),re(Td,L),re(Mi,w),re(br,R),re(Nd,J),me(de))if(de.length){const X=e.exposed||(e.exposed={});de.forEach(D=>{Object.defineProperty(X,D,{get:()=>s[D],set:V=>s[D]=V,enumerable:!0})})}else e.exposed||(e.exposed={});q&&e.render===Ht&&(e.render=q),ve!=null&&(e.inheritAttrs=ve),ce&&(e.components=ce),_e&&(e.directives=_e),J&&Li(e)}function Md(e,t,s=Ht){me(e)&&(e=La(e));for(const n in e){const o=e[n];let a;xe(o)?"default"in o?a=It(o.from||n,o.default,!0):a=It(o.from||n):a=It(o),ot(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function Qr(e,t,s){Vt(me(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function ji(e,t,s,n){let o=n.includes(".")?Pi(s,n):()=>s[n];if(He(e)){const a=t[e];ge(a)&&ft(o,a)}else if(ge(e))ft(o,e.bind(s));else if(xe(e))if(me(e))e.forEach(a=>ji(a,t,s,n));else{const a=ge(e.handler)?e.handler.bind(s):t[e.handler];ge(a)&&ft(o,a,e)}}function Hi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,i=a.get(t);let l;return i?l=i:!o.length&&!s&&!n?l=t:(l={},o.length&&o.forEach(u=>ko(l,u,r,!0)),ko(l,t,r)),xe(t)&&a.set(t,l),l}function ko(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&ko(e,a,s,!0),o&&o.forEach(r=>ko(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const i=Fd[r]||s&&s[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const Fd={data:Zr,props:el,emits:el,methods:kn,computed:kn,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:kn,directives:kn,watch:Hd,provide:Zr,inject:jd};function Zr(e,t){return t?e?function(){return Qe(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function jd(e,t){return kn(La(e),La(t))}function La(e){if(me(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function kn(e,t){return e?Qe(Object.create(null),e,t):t}function el(e,t){return e?me(e)&&me(t)?[...new Set([...e,...t])]:Qe(Object.create(null),Xr(e),Xr(t??{})):t}function Hd(e,t){if(!e)return t;if(!t)return e;const s=Qe(Object.create(null),e);for(const n in t)s[n]=rt(e[n],t[n]);return s}function Wi(){return{app:null,config:{isNativeTag:ni,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wd=0;function Vd(e,t){return function(n,o=null){ge(n)||(n=Qe({},n)),o!=null&&!xe(o)&&(o=null);const a=Wi(),r=new WeakSet,i=[];let l=!1;const u=a.app={_uid:Wd++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:$f,get config(){return a.config},set config(d){},use(d,...f){return r.has(d)||(d&&ge(d.install)?(r.add(d),d.install(u,...f)):ge(d)&&(r.add(d),d(u,...f))),u},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),u},component(d,f){return f?(a.components[d]=f,u):a.components[d]},directive(d,f){return f?(a.directives[d]=f,u):a.directives[d]},mount(d,f,p){if(!l){const v=u._ceVNode||he(n,o);return v.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(v,d,p),l=!0,u._container=d,d.__vue_app__=u,Xo(v.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Vt(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return a.provides[d]=f,u},runWithContext(d){const f=qs;qs=u;try{return d()}finally{qs=f}}};return u}}let qs=null;const Kd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${At(t)}Modifiers`]||e[`${ms(t)}Modifiers`];function Gd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ke;let o=s;const a=t.startsWith("update:"),r=a&&Kd(n,t.slice(7));r&&(r.trim&&(o=s.map(d=>He(d)?d.trim():d)),r.number&&(o=s.map(Vo)));let i,l=n[i=aa(t)]||n[i=aa(At(t))];!l&&a&&(l=n[i=aa(ms(t))]),l&&Vt(l,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Vt(u,e,6,o)}}const zd=new WeakMap;function Vi(e,t,s=!1){const n=s?zd:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},i=!1;if(!ge(e)){const l=u=>{const d=Vi(u,t,!0);d&&(i=!0,Qe(r,d))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!i?(xe(e)&&n.set(e,null),null):(me(a)?a.forEach(l=>r[l]=null):Qe(r,a),xe(e)&&n.set(e,r),r)}function Yo(e,t){return!e||!jo(t)?!1:(t=t.slice(2).replace(/Once$/,""),$e(e,t[0].toLowerCase()+t.slice(1))||$e(e,ms(t))||$e(e,t))}function tl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:i,emit:l,render:u,renderCache:d,props:f,data:p,setupState:v,ctx:g,inheritAttrs:y}=e,N=So(e);let $,w;try{if(s.shapeFlag&4){const R=o||n,q=R;$=jt(u.call(q,R,d,f,v,p,g)),w=i}else{const R=t;$=jt(R.length>1?R(f,{attrs:i,slots:r,emit:l}):R(f,null)),w=t.props?i:Jd(i)}}catch(R){Pn.length=0,zo(R,e,1),$=he(ns)}let _=$;if(w&&y!==!1){const R=Object.keys(w),{shapeFlag:q}=_;R.length&&q&7&&(a&&R.some(rr)&&(w=Yd(w,a)),_=Zs(_,w,!1,!0))}return s.dirs&&(_=Zs(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(s.dirs):s.dirs),s.transition&&yr(_,s.transition),$=_,So(N),$}const Jd=e=>{let t;for(const s in e)(s==="class"||s==="style"||jo(s))&&((t||(t={}))[s]=e[s]);return t},Yd=(e,t)=>{const s={};for(const n in e)(!rr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function qd(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:i,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?sl(n,r,u):!!r;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(r[p]!==n[p]&&!Yo(u,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===r?!1:n?r?sl(n,r,u):!0:!!r;return!1}function sl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!Yo(s,a))return!0}return!1}function Xd({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Ki={},Gi=()=>Object.create(Ki),zi=e=>Object.getPrototypeOf(e)===Ki;function Qd(e,t,s,n=!1){const o={},a=Gi();e.propsDefaults=Object.create(null),Ji(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:ki(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Zd(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,i=Se(o),[l]=e.propsOptions;let u=!1;if((n||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Yo(e.emitsOptions,p))continue;const v=t[p];if(l)if($e(a,p))v!==a[p]&&(a[p]=v,u=!0);else{const g=At(p);o[g]=Ba(l,i,g,v,e,!1)}else v!==a[p]&&(a[p]=v,u=!0)}}}else{Ji(e,t,o,a)&&(u=!0);let d;for(const f in i)(!t||!$e(t,f)&&((d=ms(f))===f||!$e(t,d)))&&(l?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Ba(l,i,f,void 0,e,!0)):delete o[f]);if(a!==i)for(const f in a)(!t||!$e(t,f))&&(delete a[f],u=!0)}u&&Yt(e.attrs,"set","")}function Ji(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,i;if(t)for(let l in t){if(Tn(l))continue;const u=t[l];let d;o&&$e(o,d=At(l))?!a||!a.includes(d)?s[d]=u:(i||(i={}))[d]=u:Yo(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,r=!0)}if(a){const l=Se(s),u=i||ke;for(let d=0;d<a.length;d++){const f=a[d];s[f]=Ba(o,l,f,u[f],e,!$e(u,f))}}return r}function Ba(e,t,s,n,o,a){const r=e[s];if(r!=null){const i=$e(r,"default");if(i&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ge(l)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=Zn(o);n=u[s]=l.call(null,t),d()}}else n=l;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!i?n=!1:r[1]&&(n===""||n===ms(s))&&(n=!0))}return n}const ef=new WeakMap;function Yi(e,t,s=!1){const n=s?ef:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},i=[];let l=!1;if(!ge(e)){const d=f=>{l=!0;const[p,v]=Yi(f,t,!0);Qe(r,p),v&&i.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!l)return xe(e)&&n.set(e,Gs),Gs;if(me(a))for(let d=0;d<a.length;d++){const f=At(a[d]);nl(f)&&(r[f]=ke)}else if(a)for(const d in a){const f=At(d);if(nl(f)){const p=a[d],v=r[f]=me(p)||ge(p)?{type:p}:Qe({},p),g=v.type;let y=!1,N=!0;if(me(g))for(let $=0;$<g.length;++$){const w=g[$],_=ge(w)&&w.name;if(_==="Boolean"){y=!0;break}else _==="String"&&(N=!1)}else y=ge(g)&&g.name==="Boolean";v[0]=y,v[1]=N,(y||$e(v,"default"))&&i.push(f)}}const u=[r,i];return xe(e)&&n.set(e,u),u}function nl(e){return e[0]!=="$"&&!Tn(e)}const _r=e=>e==="_"||e==="_ctx"||e==="$stable",wr=e=>me(e)?e.map(jt):[jt(e)],tf=(e,t,s)=>{if(t._n)return t;const n=md((...o)=>wr(t(...o)),s);return n._c=!1,n},qi=(e,t,s)=>{const n=e._ctx;for(const o in e){if(_r(o))continue;const a=e[o];if(ge(a))t[o]=tf(o,a,n);else if(a!=null){const r=wr(a);t[o]=()=>r}}},Xi=(e,t)=>{const s=wr(t);e.slots.default=()=>s},Qi=(e,t,s)=>{for(const n in t)(s||!_r(n))&&(e[n]=t[n])},sf=(e,t,s)=>{const n=e.slots=Gi();if(e.vnode.shapeFlag&32){const o=t._;o?(Qi(n,t,s),s&&li(n,"_",o,!0)):qi(t,n)}else t&&Xi(e,t)},nf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=ke;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:Qi(o,t,s):(a=!t.$stable,qi(t,o)),r=t}else t&&(Xi(e,t),r={default:1});if(a)for(const i in o)!_r(i)&&r[i]==null&&delete o[i]},ht=cf;function of(e){return af(e)}function af(e,t){const s=Ko();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:i,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:v=Ht,insertStaticContent:g}=e,y=(C,k,I,M=null,H=null,F=null,te=void 0,z=null,A=!!k.dynamicChildren)=>{if(C===k)return;C&&!hn(C,k)&&(M=j(C),ae(C,H,F,!0),C=null),k.patchFlag===-2&&(A=!1,k.dynamicChildren=null);const{type:b,ref:x,shapeFlag:O}=k;switch(b){case qo:N(C,k,I,M);break;case ns:$(C,k,I,M);break;case go:C==null&&w(k,I,M,te);break;case Z:ce(C,k,I,M,H,F,te,z,A);break;default:O&1?q(C,k,I,M,H,F,te,z,A):O&6?_e(C,k,I,M,H,F,te,z,A):(O&64||O&128)&&b.process(C,k,I,M,H,F,te,z,A,le)}x!=null&&H?Rn(x,C&&C.ref,F,k||C,!k):x==null&&C&&C.ref!=null&&Rn(C.ref,null,F,C,!0)},N=(C,k,I,M)=>{if(C==null)n(k.el=i(k.children),I,M);else{const H=k.el=C.el;k.children!==C.children&&u(H,k.children)}},$=(C,k,I,M)=>{C==null?n(k.el=l(k.children||""),I,M):k.el=C.el},w=(C,k,I,M)=>{[C.el,C.anchor]=g(C.children,k,I,M,C.el,C.anchor)},_=({el:C,anchor:k},I,M)=>{let H;for(;C&&C!==k;)H=p(C),n(C,I,M),C=H;n(k,I,M)},R=({el:C,anchor:k})=>{let I;for(;C&&C!==k;)I=p(C),o(C),C=I;o(k)},q=(C,k,I,M,H,F,te,z,A)=>{if(k.type==="svg"?te="svg":k.type==="math"&&(te="mathml"),C==null)Q(k,I,M,H,F,te,z,A);else{const b=C.el&&C.el._isVueCE?C.el:null;try{b&&b._beginPatch(),J(C,k,H,F,te,z,A)}finally{b&&b._endPatch()}}},Q=(C,k,I,M,H,F,te,z)=>{let A,b;const{props:x,shapeFlag:O,transition:B,dirs:W}=C;if(A=C.el=r(C.type,F,x&&x.is,x),O&8?d(A,C.children):O&16&&Y(C.children,A,null,M,H,da(C,F),te,z),W&&gs(C,null,M,"created"),L(A,C,C.scopeId,te,M),x){for(const fe in x)fe!=="value"&&!Tn(fe)&&a(A,fe,null,x[fe],F,M);"value"in x&&a(A,"value",null,x.value,F),(b=x.onVnodeBeforeMount)&&Ut(b,M,C)}W&&gs(C,null,M,"beforeMount");const ee=rf(H,B);ee&&B.beforeEnter(A),n(A,k,I),((b=x&&x.onVnodeMounted)||ee||W)&&ht(()=>{b&&Ut(b,M,C),ee&&B.enter(A),W&&gs(C,null,M,"mounted")},H)},L=(C,k,I,M,H)=>{if(I&&v(C,I),M)for(let F=0;F<M.length;F++)v(C,M[F]);if(H){let F=H.subTree;if(k===F||sc(F.type)&&(F.ssContent===k||F.ssFallback===k)){const te=H.vnode;L(C,te,te.scopeId,te.slotScopeIds,H.parent)}}},Y=(C,k,I,M,H,F,te,z,A=0)=>{for(let b=A;b<C.length;b++){const x=C[b]=z?is(C[b]):jt(C[b]);y(null,x,k,I,M,H,F,te,z)}},J=(C,k,I,M,H,F,te)=>{const z=k.el=C.el;let{patchFlag:A,dynamicChildren:b,dirs:x}=k;A|=C.patchFlag&16;const O=C.props||ke,B=k.props||ke;let W;if(I&&ys(I,!1),(W=B.onVnodeBeforeUpdate)&&Ut(W,I,k,C),x&&gs(k,C,I,"beforeUpdate"),I&&ys(I,!0),(O.innerHTML&&B.innerHTML==null||O.textContent&&B.textContent==null)&&d(z,""),b?de(C.dynamicChildren,b,z,I,M,da(k,H),F):te||D(C,k,z,null,I,M,da(k,H),F,!1),A>0){if(A&16)ve(z,O,B,I,H);else if(A&2&&O.class!==B.class&&a(z,"class",null,B.class,H),A&4&&a(z,"style",O.style,B.style,H),A&8){const ee=k.dynamicProps;for(let fe=0;fe<ee.length;fe++){const pe=ee[fe],Ie=O[pe],Ee=B[pe];(Ee!==Ie||pe==="value")&&a(z,pe,Ie,Ee,H,I)}}A&1&&C.children!==k.children&&d(z,k.children)}else!te&&b==null&&ve(z,O,B,I,H);((W=B.onVnodeUpdated)||x)&&ht(()=>{W&&Ut(W,I,k,C),x&&gs(k,C,I,"updated")},M)},de=(C,k,I,M,H,F,te)=>{for(let z=0;z<k.length;z++){const A=C[z],b=k[z],x=A.el&&(A.type===Z||!hn(A,b)||A.shapeFlag&198)?f(A.el):I;y(A,b,x,null,M,H,F,te,!0)}},ve=(C,k,I,M,H)=>{if(k!==I){if(k!==ke)for(const F in k)!Tn(F)&&!(F in I)&&a(C,F,k[F],null,H,M);for(const F in I){if(Tn(F))continue;const te=I[F],z=k[F];te!==z&&F!=="value"&&a(C,F,z,te,H,M)}"value"in I&&a(C,"value",k.value,I.value,H)}},ce=(C,k,I,M,H,F,te,z,A)=>{const b=k.el=C?C.el:i(""),x=k.anchor=C?C.anchor:i("");let{patchFlag:O,dynamicChildren:B,slotScopeIds:W}=k;W&&(z=z?z.concat(W):W),C==null?(n(b,I,M),n(x,I,M),Y(k.children||[],I,x,H,F,te,z,A)):O>0&&O&64&&B&&C.dynamicChildren&&C.dynamicChildren.length===B.length?(de(C.dynamicChildren,B,I,H,F,te,z),(k.key!=null||H&&k===H.subTree)&&Zi(C,k,!0)):D(C,k,I,x,H,F,te,z,A)},_e=(C,k,I,M,H,F,te,z,A)=>{k.slotScopeIds=z,C==null?k.shapeFlag&512?H.ctx.activate(k,I,M,te,A):we(k,I,M,H,F,te,A):ne(C,k,A)},we=(C,k,I,M,H,F,te)=>{const z=C.component=hf(C,M,H);if(Bi(C)&&(z.ctx.renderer=le),yf(z,!1,te),z.asyncDep){if(H&&H.registerDep(z,re,te),!C.el){const A=z.subTree=he(ns);$(null,A,k,I),C.placeholder=A.el}}else re(z,C,k,I,H,F,te)},ne=(C,k,I)=>{const M=k.component=C.component;if(qd(C,k,I))if(M.asyncDep&&!M.asyncResolved){X(M,k,I);return}else M.next=k,M.update();else k.el=C.el,M.vnode=k},re=(C,k,I,M,H,F,te)=>{const z=()=>{if(C.isMounted){let{next:O,bu:B,u:W,parent:ee,vnode:fe}=C;{const at=ec(C);if(at){O&&(O.el=fe.el,X(C,O,te)),at.asyncDep.then(()=>{C.isUnmounted||z()});return}}let pe=O,Ie;ys(C,!1),O?(O.el=fe.el,X(C,O,te)):O=fe,B&&mo(B),(Ie=O.props&&O.props.onVnodeBeforeUpdate)&&Ut(Ie,ee,O,fe),ys(C,!0);const Ee=tl(C),Ye=C.subTree;C.subTree=Ee,y(Ye,Ee,f(Ye.el),j(Ye),C,H,F),O.el=Ee.el,pe===null&&Xd(C,Ee.el),W&&ht(W,H),(Ie=O.props&&O.props.onVnodeUpdated)&&ht(()=>Ut(Ie,ee,O,fe),H)}else{let O;const{el:B,props:W}=k,{bm:ee,m:fe,parent:pe,root:Ie,type:Ee}=C,Ye=Ys(k);ys(C,!1),ee&&mo(ee),!Ye&&(O=W&&W.onVnodeBeforeMount)&&Ut(O,pe,k),ys(C,!0);{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(Ee);const at=C.subTree=tl(C);y(null,at,I,M,C,H,F),k.el=at.el}if(fe&&ht(fe,H),!Ye&&(O=W&&W.onVnodeMounted)){const at=k;ht(()=>Ut(O,pe,at),H)}(k.shapeFlag&256||pe&&Ys(pe.vnode)&&pe.vnode.shapeFlag&256)&&C.a&&ht(C.a,H),C.isMounted=!0,k=I=M=null}};C.scope.on();const A=C.effect=new di(z);C.scope.off();const b=C.update=A.run.bind(A),x=C.job=A.runIfDirty.bind(A);x.i=C,x.id=C.uid,A.scheduler=()=>gr(x),ys(C,!0),b()},X=(C,k,I)=>{k.component=C;const M=C.vnode.props;C.vnode=k,C.next=null,Zd(C,k.props,M,I),nf(C,k.children,I),es(),Jr(C),ts()},D=(C,k,I,M,H,F,te,z,A=!1)=>{const b=C&&C.children,x=C?C.shapeFlag:0,O=k.children,{patchFlag:B,shapeFlag:W}=k;if(B>0){if(B&128){G(b,O,I,M,H,F,te,z,A);return}else if(B&256){V(b,O,I,M,H,F,te,z,A);return}}W&8?(x&16&&et(b,H,F),O!==b&&d(I,O)):x&16?W&16?G(b,O,I,M,H,F,te,z,A):et(b,H,F,!0):(x&8&&d(I,""),W&16&&Y(O,I,M,H,F,te,z,A))},V=(C,k,I,M,H,F,te,z,A)=>{C=C||Gs,k=k||Gs;const b=C.length,x=k.length,O=Math.min(b,x);let B;for(B=0;B<O;B++){const W=k[B]=A?is(k[B]):jt(k[B]);y(C[B],W,I,null,H,F,te,z,A)}b>x?et(C,H,F,!0,!1,O):Y(k,I,M,H,F,te,z,A,O)},G=(C,k,I,M,H,F,te,z,A)=>{let b=0;const x=k.length;let O=C.length-1,B=x-1;for(;b<=O&&b<=B;){const W=C[b],ee=k[b]=A?is(k[b]):jt(k[b]);if(hn(W,ee))y(W,ee,I,null,H,F,te,z,A);else break;b++}for(;b<=O&&b<=B;){const W=C[O],ee=k[B]=A?is(k[B]):jt(k[B]);if(hn(W,ee))y(W,ee,I,null,H,F,te,z,A);else break;O--,B--}if(b>O){if(b<=B){const W=B+1,ee=W<x?k[W].el:M;for(;b<=B;)y(null,k[b]=A?is(k[b]):jt(k[b]),I,ee,H,F,te,z,A),b++}}else if(b>B)for(;b<=O;)ae(C[b],H,F,!0),b++;else{const W=b,ee=b,fe=new Map;for(b=ee;b<=B;b++){const De=k[b]=A?is(k[b]):jt(k[b]);De.key!=null&&fe.set(De.key,b)}let pe,Ie=0;const Ee=B-ee+1;let Ye=!1,at=0;const Et=new Array(Ee);for(b=0;b<Ee;b++)Et[b]=0;for(b=W;b<=O;b++){const De=C[b];if(Ie>=Ee){ae(De,H,F,!0);continue}let Ge;if(De.key!=null)Ge=fe.get(De.key);else for(pe=ee;pe<=B;pe++)if(Et[pe-ee]===0&&hn(De,k[pe])){Ge=pe;break}Ge===void 0?ae(De,H,F,!0):(Et[Ge-ee]=b+1,Ge>=at?at=Ge:Ye=!0,y(De,k[Ge],I,null,H,F,te,z,A),Ie++)}const wt=Ye?lf(Et):Gs;for(pe=wt.length-1,b=Ee-1;b>=0;b--){const De=ee+b,Ge=k[De],Ot=k[De+1],vn=De+1<x?Ot.el||tc(Ot):M;Et[b]===0?y(null,Ge,I,vn,H,F,te,z,A):Ye&&(pe<0||b!==wt[pe]?K(Ge,I,vn,2):pe--)}}},K=(C,k,I,M,H=null)=>{const{el:F,type:te,transition:z,children:A,shapeFlag:b}=C;if(b&6){K(C.component.subTree,k,I,M);return}if(b&128){C.suspense.move(k,I,M);return}if(b&64){te.move(C,k,I,le);return}if(te===Z){n(F,k,I);for(let O=0;O<A.length;O++)K(A[O],k,I,M);n(C.anchor,k,I);return}if(te===go){_(C,k,I);return}if(M!==2&&b&1&&z)if(M===0)z.beforeEnter(F),n(F,k,I),ht(()=>z.enter(F),H);else{const{leave:O,delayLeave:B,afterLeave:W}=z,ee=()=>{C.ctx.isUnmounted?o(F):n(F,k,I)},fe=()=>{F._isLeaving&&F[wd](!0),O(F,()=>{ee(),W&&W()})};B?B(F,ee,fe):fe()}else n(F,k,I)},ae=(C,k,I,M=!1,H=!1)=>{const{type:F,props:te,ref:z,children:A,dynamicChildren:b,shapeFlag:x,patchFlag:O,dirs:B,cacheIndex:W}=C;if(O===-2&&(H=!1),z!=null&&(es(),Rn(z,null,I,C,!0),ts()),W!=null&&(k.renderCache[W]=void 0),x&256){k.ctx.deactivate(C);return}const ee=x&1&&B,fe=!Ys(C);let pe;if(fe&&(pe=te&&te.onVnodeBeforeUnmount)&&Ut(pe,k,C),x&6)pt(C.component,I,M);else{if(x&128){C.suspense.unmount(I,M);return}ee&&gs(C,null,k,"beforeUnmount"),x&64?C.type.remove(C,k,I,le,M):b&&!b.hasOnce&&(F!==Z||O>0&&O&64)?et(b,k,I,!1,!0):(F===Z&&O&384||!H&&x&16)&&et(A,k,I),M&&Pe(C)}(fe&&(pe=te&&te.onVnodeUnmounted)||ee)&&ht(()=>{pe&&Ut(pe,k,C),ee&&gs(C,null,k,"unmounted")},I)},Pe=C=>{const{type:k,el:I,anchor:M,transition:H}=C;if(k===Z){We(I,M);return}if(k===go){R(C);return}const F=()=>{o(I),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(C.shapeFlag&1&&H&&!H.persisted){const{leave:te,delayLeave:z}=H,A=()=>te(I,F);z?z(C.el,F,A):A()}else F()},We=(C,k)=>{let I;for(;C!==k;)I=p(C),o(C),C=I;o(k)},pt=(C,k,I)=>{const{bum:M,scope:H,job:F,subTree:te,um:z,m:A,a:b}=C;ol(A),ol(b),M&&mo(M),H.stop(),F&&(F.flags|=8,ae(te,C,k,I)),z&&ht(z,k),ht(()=>{C.isUnmounted=!0},k)},et=(C,k,I,M=!1,H=!1,F=0)=>{for(let te=F;te<C.length;te++)ae(C[te],k,I,M,H)},j=C=>{if(C.shapeFlag&6)return j(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const k=p(C.anchor||C.el),I=k&&k[bd];return I?p(I):k};let oe=!1;const se=(C,k,I)=>{let M;C==null?k._vnode&&(ae(k._vnode,null,null,!0),M=k._vnode.component):y(k._vnode||null,C,k,null,null,null,I),k._vnode=C,oe||(oe=!0,Jr(M),Ei(),oe=!1)},le={p:y,um:ae,m:K,r:Pe,mt:we,mc:Y,pc:D,pbc:de,n:j,o:e};return{render:se,hydrate:void 0,createApp:Vd(se)}}function da({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ys({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function rf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zi(e,t,s=!1){const n=e.children,o=t.children;if(me(n)&&me(o))for(let a=0;a<n.length;a++){const r=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=is(o[a]),i.el=r.el),!s&&i.patchFlag!==-2&&Zi(r,i)),i.type===qo&&(i.patchFlag!==-1?i.el=r.el:i.__elIndex=a+(e.type===Z?1:0)),i.type===ns&&!i.el&&(i.el=r.el)}}function lf(e){const t=e.slice(),s=[0];let n,o,a,r,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)i=a+r>>1,e[s[i]]<u?a=i+1:r=i;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function ec(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ec(t)}function ol(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function tc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?tc(t.subTree):null}const sc=e=>e.__isSuspense;function cf(e,t){t&&t.pendingBranch?me(e)?t.effects.push(...e):t.effects.push(e):pd(e)}const Z=Symbol.for("v-fgt"),qo=Symbol.for("v-txt"),ns=Symbol.for("v-cmt"),go=Symbol.for("v-stc"),Pn=[];let bt=null;function m(e=!1){Pn.push(bt=e?null:[])}function uf(){Pn.pop(),bt=Pn[Pn.length-1]||null}let Wn=1;function xo(e,t=!1){Wn+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function nc(e){return e.dynamicChildren=Wn>0?bt||Gs:null,uf(),Wn>0&&bt&&bt.push(e),e}function h(e,t,s,n,o,a){return nc(c(e,t,s,n,o,a,!0))}function Ue(e,t,s,n,o){return nc(he(e,t,s,n,o,!0))}function Vn(e){return e?e.__v_isVNode===!0:!1}function hn(e,t){return e.type===t.type&&e.key===t.key}const oc=({key:e})=>e??null,yo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||ot(e)||ge(e)?{i:qe,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,a=e===Z?0:1,r=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&oc(t),ref:t&&yo(t),scopeId:Ri,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:qe};return i?(Cr(l,s),a&128&&e.normalize(l)):s&&(l.shapeFlag|=He(s)?8:16),Wn>0&&!r&&bt&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&bt.push(l),l}const he=df;function df(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===Pd)&&(e=ns),Vn(e)){const i=Zs(e,t,!0);return s&&Cr(i,s),Wn>0&&!a&&bt&&(i.shapeFlag&6?bt[bt.indexOf(e)]=i:bt.push(i)),i.patchFlag=-2,i}if(Sf(e)&&(e=e.__vccOpts),t){t=ff(t);let{class:i,style:l}=t;i&&!He(i)&&(t.class=ue(i)),xe(l)&&(hr(l)&&!me(l)&&(l=Qe({},l)),t.style=it(l))}const r=He(e)?1:sc(e)?128:_d(e)?64:xe(e)?4:ge(e)?2:0;return c(e,t,s,n,o,r,a,!0)}function ff(e){return e?hr(e)||zi(e)?Qe({},e):e:null}function Zs(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:i,transition:l}=e,u=t?vf(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&oc(u),ref:t&&t.ref?s&&a?me(a)?a.concat(yo(t)):[a,yo(t)]:yo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Zs(e.ssContent),ssFallback:e.ssFallback&&Zs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&yr(d,l.clone(d)),d}function $t(e=" ",t=0){return he(qo,null,e,t)}function Ao(e,t){const s=he(go,null,e);return s.staticCount=t,s}function U(e="",t=!1){return t?(m(),Ue(ns,null,e)):he(ns,null,e)}function jt(e){return e==null||typeof e=="boolean"?he(ns):me(e)?he(Z,null,e.slice()):Vn(e)?is(e):he(qo,null,String(e))}function is(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Zs(e)}function Cr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(me(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Cr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!zi(t)?t._ctx=qe:o===3&&qe&&(qe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:qe},s=32):(t=String(t),n&64?(s=16,t=[$t(t)]):s=8);e.children=t,e.shapeFlag|=s}function vf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ue([t.class,n.class]));else if(o==="style")t.style=it([t.style,n.style]);else if(jo(o)){const a=t[o],r=n[o];r&&a!==r&&!(me(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function Ut(e,t,s,n=null){Vt(e,t,7,[s,n])}const pf=Wi();let mf=0;function hf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||pf,a={uid:mf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yi(n,o),emitsOptions:Vi(n,o),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:n.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Gd.bind(null,a),e.ce&&e.ce(a),a}let nt=null;const gf=()=>nt||qe;let No,Ua;{const e=Ko(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};No=t("__VUE_INSTANCE_SETTERS__",s=>nt=s),Ua=t("__VUE_SSR_SETTERS__",s=>Kn=s)}const Zn=e=>{const t=nt;return No(e),e.scope.on(),()=>{e.scope.off(),No(t)}},al=()=>{nt&&nt.scope.off(),No(null)};function ac(e){return e.vnode.shapeFlag&4}let Kn=!1;function yf(e,t=!1,s=!1){t&&Ua(t);const{props:n,children:o}=e.vnode,a=ac(e);Qd(e,n,a,t),sf(e,o,s||t);const r=a?bf(e,t):void 0;return t&&Ua(!1),r}function bf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Bd);const{setup:n}=s;if(n){es();const o=e.setupContext=n.length>1?wf(e):null,a=Zn(e),r=Qn(n,e,0,[e.props,o]),i=oi(r);if(ts(),a(),(i||e.sp)&&!Ys(e)&&Li(e),i){if(r.then(al,al),t)return r.then(l=>{rl(e,l)}).catch(l=>{zo(l,e,0)});e.asyncDep=r}else rl(e,r)}else rc(e)}function rl(e,t,s){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xe(t)&&(e.setupState=Ai(t)),rc(e)}function rc(e,t,s){const n=e.type;e.render||(e.render=n.render||Ht);{const o=Zn(e);es();try{Ud(e)}finally{ts(),o()}}}const _f={get(e,t){return st(e,"get",""),e[t]}};function wf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,_f),slots:e.slots,emit:e.emit,expose:t}}function Xo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ai(od(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in In)return In[s](e)},has(t,s){return s in t||s in In}})):e.proxy}function Cf(e,t=!0){return ge(e)?e.displayName||e.name:e.name||t&&e.__name}function Sf(e){return ge(e)&&"__vccOpts"in e}const T=(e,t)=>cd(e,t,Kn);function lc(e,t,s){try{xo(-1);const n=arguments.length;return n===2?xe(t)&&!me(t)?Vn(t)?he(e,null,[t]):he(e,t):he(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Vn(s)&&(s=[s]),he(e,t,s))}finally{xo(1)}}const $f="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ma;const ll=typeof window<"u"&&window.trustedTypes;if(ll)try{Ma=ll.createPolicy("vue",{createHTML:e=>e})}catch{}const ic=Ma?e=>Ma.createHTML(e):e=>e,kf="http://www.w3.org/2000/svg",xf="http://www.w3.org/1998/Math/MathML",Jt=typeof document<"u"?document:null,il=Jt&&Jt.createElement("template"),Af={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Jt.createElementNS(kf,e):t==="mathml"?Jt.createElementNS(xf,e):s?Jt.createElement(e,{is:s}):Jt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Jt.createTextNode(e),createComment:e=>Jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{il.innerHTML=ic(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=il.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Nf=Symbol("_vtc");function Tf(e,t,s){const n=e[Nf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const To=Symbol("_vod"),cc=Symbol("_vsh"),Ef={name:"show",beforeMount(e,{value:t},{transition:s}){e[To]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):gn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),gn(e,!0),n.enter(e)):n.leave(e,()=>{gn(e,!1)}):gn(e,t))},beforeUnmount(e,{value:t}){gn(e,t)}};function gn(e,t){e.style.display=t?e[To]:"none",e[cc]=!t}const Of=Symbol(""),Rf=/(?:^|;)\s*display\s*:/;function If(e,t,s){const n=e.style,o=He(s);let a=!1;if(s&&!o){if(t)if(He(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();s[i]==null&&bo(n,i,"")}else for(const r in t)s[r]==null&&bo(n,r,"");for(const r in s)r==="display"&&(a=!0),bo(n,r,s[r])}else if(o){if(t!==s){const r=n[Of];r&&(s+=";"+r),n.cssText=s,a=Rf.test(s)}}else t&&e.removeAttribute("style");To in e&&(e[To]=a?n.display:"",e[cc]&&(n.display="none"))}const cl=/\s*!important$/;function bo(e,t,s){if(me(s))s.forEach(n=>bo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Pf(e,t);cl.test(s)?e.setProperty(ms(n),s.replace(cl,""),"important"):e[n]=s}}const ul=["Webkit","Moz","ms"],fa={};function Pf(e,t){const s=fa[t];if(s)return s;let n=At(t);if(n!=="filter"&&n in e)return fa[t]=n;n=Wo(n);for(let o=0;o<ul.length;o++){const a=ul[o]+n;if(a in e)return fa[t]=a}return t}const dl="http://www.w3.org/1999/xlink";function fl(e,t,s,n,o,a=Lu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(dl,t.slice(6,t.length)):e.setAttributeNS(dl,t,s):s==null||a&&!ii(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Pt(s)?String(s):s)}function vl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ic(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(i!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=ii(s):s==null&&i==="string"?(s="",r=!0):i==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function Xt(e,t,s,n){e.addEventListener(t,s,n)}function Df(e,t,s,n){e.removeEventListener(t,s,n)}const pl=Symbol("_vei");function Lf(e,t,s,n,o=null){const a=e[pl]||(e[pl]={}),r=a[t];if(n&&r)r.value=n;else{const[i,l]=Bf(t);if(n){const u=a[t]=Ff(n,o);Xt(e,i,u,l)}else r&&(Df(e,i,r,l),a[t]=void 0)}}const ml=/(?:Once|Passive|Capture)$/;function Bf(e){let t;if(ml.test(e)){t={};let n;for(;n=e.match(ml);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ms(e.slice(2)),t]}let va=0;const Uf=Promise.resolve(),Mf=()=>va||(Uf.then(()=>va=0),va=Date.now());function Ff(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Vt(jf(n,s.value),t,5,[n])};return s.value=e,s.attached=Mf(),s}function jf(e,t){if(me(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const hl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Hf=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?Tf(e,n,r):t==="style"?If(e,s,n):jo(t)?rr(t)||Lf(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Wf(e,t,n,r))?(vl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&fl(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!He(n))?vl(e,At(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),fl(e,t,n,r))};function Wf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&hl(t)&&ge(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return hl(t)&&He(s)?!1:t in e}const vs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return me(t)?s=>mo(t,s):t};function Vf(e){e.target.composing=!0}function gl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xt=Symbol("_assign");function yl(e,t,s){return t&&(e=e.trim()),s&&(e=Vo(e)),e}const vt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[xt]=vs(o);const a=n||o.props&&o.props.type==="number";Xt(e,t?"change":"input",r=>{r.target.composing||e[xt](yl(e.value,s,a))}),(s||a)&&Xt(e,"change",()=>{e.value=yl(e.value,s,a)}),t||(Xt(e,"compositionstart",Vf),Xt(e,"compositionend",gl),Xt(e,"change",gl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[xt]=vs(r),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?Vo(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===l)||(e.value=l))}},Sr={deep:!0,created(e,t,s){e[xt]=vs(s),Xt(e,"change",()=>{const n=e._modelValue,o=en(e),a=e.checked,r=e[xt];if(me(n)){const i=cr(n,o),l=i!==-1;if(a&&!l)r(n.concat(o));else if(!a&&l){const u=[...n];u.splice(i,1),r(u)}}else if(un(n)){const i=new Set(n);a?i.add(o):i.delete(o),r(i)}else r(uc(e,a))})},mounted:bl,beforeUpdate(e,t,s){e[xt]=vs(s),bl(e,t,s)}};function bl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(me(t))o=cr(t,n.props.value)>-1;else if(un(t))o=t.has(n.props.value);else{if(t===s)return;o=Es(t,uc(e,!0))}e.checked!==o&&(e.checked=o)}const _l={created(e,{value:t},s){e.checked=Es(t,s.props.value),e[xt]=vs(s),Xt(e,"change",()=>{e[xt](en(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[xt]=vs(n),t!==s&&(e.checked=Es(t,n.props.value))}},Dn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=un(t);Xt(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?Vo(en(r)):en(r));e[xt](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,jn(()=>{e._assigning=!1})}),e[xt]=vs(n)},mounted(e,{value:t}){wl(e,t)},beforeUpdate(e,t,s){e[xt]=vs(s)},updated(e,{value:t}){e._assigning||wl(e,t)}};function wl(e,t){const s=e.multiple,n=me(t);if(!(s&&!n&&!un(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],i=en(r);if(s)if(n){const l=typeof i;l==="string"||l==="number"?r.selected=t.some(u=>String(u)===String(i)):r.selected=cr(t,i)>-1}else r.selected=t.has(i);else if(Es(en(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function en(e){return"_value"in e?e._value:e.value}function uc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Kf=["ctrl","shift","alt","meta"],Gf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Kf.some(s=>e[`${s}Key`]&&!t.includes(s))},Lt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const i=Gf[t[r]];if(i&&i(o,t))return}return e(o,...a)})},zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Eo=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=ms(o.key);if(t.some(r=>r===a||zf[r]===a))return e(o)})},Jf=Qe({patchProp:Hf},Af);let Cl;function Yf(){return Cl||(Cl=of(Jf))}const qf=(...e)=>{const t=Yf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Qf(n);if(!o)return;const a=t._component;!ge(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,Xf(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function Xf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Qf(e){return He(e)?document.querySelector(e):e}const ye=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Zf={};function ev(e,t){const s=Id("router-view");return m(),Ue(s)}const tv=ye(Zf,[["render",ev]]),sv="modulepreload",nv=function(e){return"/"+e},Sl={},ov=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(l=>{if(l=nv(l),l in Sl)return;Sl[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":sv,u||(f.as="script"),f.crossOrigin="",f.href=l,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ms=typeof document<"u";function dc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function av(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&dc(e.default)}const Ce=Object.assign;function pa(e,t){const s={};for(const n in t){const o=t[n];s[n]=Bt(o)?o.map(e):e(o)}return s}const Ln=()=>{},Bt=Array.isArray;function $l(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const fc=/#/g,rv=/&/g,lv=/\//g,iv=/=/g,cv=/\?/g,vc=/\+/g,uv=/%5B/g,dv=/%5D/g,pc=/%5E/g,fv=/%60/g,mc=/%7B/g,vv=/%7C/g,hc=/%7D/g,pv=/%20/g;function $r(e){return e==null?"":encodeURI(""+e).replace(vv,"|").replace(uv,"[").replace(dv,"]")}function mv(e){return $r(e).replace(mc,"{").replace(hc,"}").replace(pc,"^")}function Fa(e){return $r(e).replace(vc,"%2B").replace(pv,"+").replace(fc,"%23").replace(rv,"%26").replace(fv,"`").replace(mc,"{").replace(hc,"}").replace(pc,"^")}function hv(e){return Fa(e).replace(iv,"%3D")}function gv(e){return $r(e).replace(fc,"%23").replace(cv,"%3F")}function yv(e){return gv(e).replace(lv,"%2F")}function Gn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const bv=/\/$/,_v=e=>e.replace(bv,"");function ma(e,t,s="/"){let n,o={},a="",r="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(n=t.slice(0,l),a=t.slice(l,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),r=t.slice(i,t.length)),n=$v(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:Gn(r)}}function wv(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function kl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Cv(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&tn(t.matched[n],s.matched[o])&&gc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function tn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Sv(e[s],t[s]))return!1;return!0}function Sv(e,t){return Bt(e)?xl(e,t):Bt(t)?xl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function xl(e,t){return Bt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function $v(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,i;for(r=0;r<n.length;r++)if(i=n[r],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ja=function(e){return e.pop="pop",e.push="push",e}({}),ha=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function kv(e){if(!e)if(Ms){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),_v(e)}const xv=/^[^#]+#/;function Av(e,t){return e.replace(xv,"#")+t}function Nv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Qo=()=>({left:window.scrollX,top:window.scrollY});function Tv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Nv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Al(e,t){return(history.state?history.state.position-t:-1)+e}const Ha=new Map;function Ev(e,t){Ha.set(e,t)}function Ov(e){const t=Ha.get(e);return Ha.delete(e),t}function Rv(e){return typeof e=="string"||e&&typeof e=="object"}function yc(e){return typeof e=="string"||typeof e=="symbol"}let Be=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const bc=Symbol("");Be.MATCHER_NOT_FOUND+"",Be.NAVIGATION_GUARD_REDIRECT+"",Be.NAVIGATION_ABORTED+"",Be.NAVIGATION_CANCELLED+"",Be.NAVIGATION_DUPLICATED+"";function sn(e,t){return Ce(new Error,{type:e,[bc]:!0},t)}function Gt(e,t){return e instanceof Error&&bc in e&&(t==null||!!(e.type&t))}const Iv=["params","query","hash"];function Pv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Iv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function Dv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(vc," "),a=o.indexOf("="),r=Gn(a<0?o:o.slice(0,a)),i=a<0?null:Gn(o.slice(a+1));if(r in t){let l=t[r];Bt(l)||(l=t[r]=[l]),l.push(i)}else t[r]=i}return t}function Nl(e){let t="";for(let s in e){const n=e[s];if(s=hv(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Bt(n)?n.map(o=>o&&Fa(o)):[n&&Fa(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Lv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Bt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const Bv=Symbol(""),Tl=Symbol(""),Zo=Symbol(""),kr=Symbol(""),Wa=Symbol("");function yn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function cs(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,l)=>{const u=p=>{p===!1?l(sn(Be.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?l(p):Rv(p)?l(sn(Be.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),i())},d=a(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function ga(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const i in r.components){let l=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(dc(l)){const u=(l.__vccOpts||l)[t];u&&a.push(cs(u,s,n,r,i,o))}else{let u=l();a.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${r.path}"`);const f=av(d)?d.default:d;r.mods[i]=d,r.components[i]=f;const p=(f.__vccOpts||f)[t];return p&&cs(p,s,n,r,i,o)()}))}}return a}function Uv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const i=t.matched[r];i&&(e.matched.find(u=>tn(u,i))?n.push(i):s.push(i));const l=e.matched[r];l&&(t.matched.find(u=>tn(u,l))||o.push(l))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Mv=()=>location.protocol+"//"+location.host;function _c(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(r);return i[0]!=="/"&&(i="/"+i),kl(i,"")}return kl(s,e)+n+o}function Fv(e,t,s,n){let o=[],a=[],r=null;const i=({state:p})=>{const v=_c(e,location),g=s.value,y=t.value;let N=0;if(p){if(s.value=v,t.value=p,r&&r===g){r=null;return}N=y?p.position-y.position:0}else n(v);o.forEach($=>{$(s.value,g,{delta:N,type:ja.pop,direction:N?N>0?ha.forward:ha.back:ha.unknown})})};function l(){r=s.value}function u(p){o.push(p);const v=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ce({},p.state,{scroll:Qo()}),"")}}function f(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:f}}function El(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Qo():null}}function jv(e){const{history:t,location:s}=window,n={value:_c(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,u,d){const f=e.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+l:Mv()+e+l;try{t[d?"replaceState":"pushState"](u,"",p),o.value=u}catch(v){console.error(v),s[d?"replace":"assign"](p)}}function r(l,u){a(l,Ce({},t.state,El(o.value.back,l,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=l}function i(l,u){const d=Ce({},o.value,t.state,{forward:l,scroll:Qo()});a(d.current,d,!0),a(l,Ce({},El(n.value,l,null),{position:d.position+1},u),!1),n.value=l}return{location:n,state:o,push:i,replace:r}}function Hv(e){e=kv(e);const t=jv(e),s=Fv(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=Ce({location:"",base:e,go:n,createHref:Av.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Wv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Hv(e)}let xs=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ke=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ke||{});const Vv={type:xs.Static,value:""},Kv=/[a-zA-Z0-9_]/;function Gv(e){if(!e)return[[]];if(e==="/")return[[Vv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=Ke.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let i=0,l,u="",d="";function f(){u&&(s===Ke.Static?a.push({type:xs.Static,value:u}):s===Ke.Param||s===Ke.ParamRegExp||s===Ke.ParamRegExpEnd?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:xs.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&s!==Ke.ParamRegExp){n=s,s=Ke.EscapeNext;continue}switch(s){case Ke.Static:l==="/"?(u&&f(),r()):l===":"?(f(),s=Ke.Param):p();break;case Ke.EscapeNext:p(),s=n;break;case Ke.Param:l==="("?s=Ke.ParamRegExp:Kv.test(l)?p():(f(),s=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case Ke.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=Ke.ParamRegExpEnd:d+=l;break;case Ke.ParamRegExpEnd:f(),s=Ke.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,d="";break;default:t("Unknown state");break}}return s===Ke.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),r(),o}const Ol="[^/]+?",zv={sensitive:!1,strict:!1,start:!0,end:!0};var lt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(lt||{});const Jv=/[.+*?^${}()[\]/\\]/g;function Yv(e,t){const s=Ce({},zv,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const d=u.length?[]:[lt.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let v=lt.Segment+(s.sensitive?lt.BonusCaseSensitive:0);if(p.type===xs.Static)f||(o+="/"),o+=p.value.replace(Jv,"\\$&"),v+=lt.Static;else if(p.type===xs.Param){const{value:g,repeatable:y,optional:N,regexp:$}=p;a.push({name:g,repeatable:y,optional:N});const w=$||Ol;if(w!==Ol){v+=lt.BonusCustomRegExp;try{`${w}`}catch(R){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+R.message)}}let _=y?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;f||(_=N&&u.length<2?`(?:/${_})`:"/"+_),N&&(_+="?"),o+=_,v+=lt.Dynamic,N&&(v+=lt.BonusOptional),y&&(v+=lt.BonusRepeatable),w===".*"&&(v+=lt.BonusWildcard)}d.push(v)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=lt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function i(u){const d=u.match(r),f={};if(!d)return null;for(let p=1;p<d.length;p++){const v=d[p]||"",g=a[p-1];f[g.name]=v&&g.repeatable?v.split("/"):v}return f}function l(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of p)if(v.type===xs.Static)d+=v.value;else if(v.type===xs.Param){const{value:g,repeatable:y,optional:N}=v,$=g in u?u[g]:"";if(Bt($)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=Bt($)?$.join("/"):$;if(!w)if(N)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);d+=w}}return d||"/"}return{re:r,score:n,keys:a,parse:i,stringify:l}}function qv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===lt.Static+lt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===lt.Static+lt.Segment?1:-1:0}function wc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=qv(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(Rl(n))return 1;if(Rl(o))return-1}return o.length-n.length}function Rl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Xv={strict:!1,end:!0,sensitive:!1};function Qv(e,t,s){const n=Yv(Gv(e.path),s),o=Ce(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Zv(e,t){const s=[],n=new Map;t=$l(Xv,t);function o(f){return n.get(f)}function a(f,p,v){const g=!v,y=Pl(f);y.aliasOf=v&&v.record;const N=$l(t,f),$=[y];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const q of R)$.push(Pl(Ce({},y,{components:v?v.record.components:y.components,path:q,aliasOf:v?v.record:y})))}let w,_;for(const R of $){const{path:q}=R;if(p&&q[0]!=="/"){const Q=p.record.path,L=Q[Q.length-1]==="/"?"":"/";R.path=p.record.path+(q&&L+q)}if(w=Qv(R,p,N),v?v.alias.push(w):(_=_||w,_!==w&&_.alias.push(w),g&&f.name&&!Dl(w)&&r(f.name)),Cc(w)&&l(w),y.children){const Q=y.children;for(let L=0;L<Q.length;L++)a(Q[L],w,v&&v.children[L])}v=v||w}return _?()=>{r(_)}:Ln}function r(f){if(yc(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(r),f.alias.forEach(r))}}function i(){return s}function l(f){const p=sp(f,s);s.splice(p,0,f),f.record.name&&!Dl(f)&&n.set(f.record.name,f)}function u(f,p){let v,g={},y,N;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw sn(Be.MATCHER_NOT_FOUND,{location:f});N=v.record.name,g=Ce(Il(p.params,v.keys.filter(_=>!_.optional).concat(v.parent?v.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),f.params&&Il(f.params,v.keys.map(_=>_.name))),y=v.stringify(g)}else if(f.path!=null)y=f.path,v=s.find(_=>_.re.test(y)),v&&(g=v.parse(y),N=v.record.name);else{if(v=p.name?n.get(p.name):s.find(_=>_.re.test(p.path)),!v)throw sn(Be.MATCHER_NOT_FOUND,{location:f,currentLocation:p});N=v.record.name,g=Ce({},p.params,f.params),y=v.stringify(g)}const $=[];let w=v;for(;w;)$.unshift(w.record),w=w.parent;return{name:N,path:y,params:g,matched:$,meta:tp($)}}e.forEach(f=>a(f));function d(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:r,clearRoutes:d,getRoutes:i,getRecordMatcher:o}}function Il(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Pl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ep(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ep(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Dl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function tp(e){return e.reduce((t,s)=>Ce(t,s.meta),{})}function sp(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;wc(e,t[a])<0?n=a:s=a+1}const o=np(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function np(e){let t=e;for(;t=t.parent;)if(Cc(t)&&wc(e,t)===0)return t}function Cc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Ll(e){const t=It(Zo),s=It(kr),n=T(()=>{const l=P(e.to);return t.resolve(l)}),o=T(()=>{const{matched:l}=n.value,{length:u}=l,d=l[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(tn.bind(null,d));if(p>-1)return p;const v=Bl(l[u-2]);return u>1&&Bl(d)===v&&f[f.length-1].path!==v?f.findIndex(tn.bind(null,l[u-2])):p}),a=T(()=>o.value>-1&&ip(s.params,n.value.params)),r=T(()=>o.value>-1&&o.value===s.matched.length-1&&gc(s.params,n.value.params));function i(l={}){if(lp(l)){const u=t[P(e.replace)?"replace":"push"](P(e.to)).catch(Ln);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:T(()=>n.value.href),isActive:a,isExactActive:r,navigate:i}}function op(e){return e.length===1?e[0]:e}const ap=Di({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ll,setup(e,{slots:t}){const s=Wt(Ll(e)),{options:n}=It(Zo),o=T(()=>({[Ul(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Ul(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&op(t.default(s));return e.custom?a:lc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),rp=ap;function lp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ip(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Bt(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function Bl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ul=(e,t,s)=>e??t??s,cp=Di({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=It(Wa),o=T(()=>e.route||n.value),a=It(Tl,0),r=T(()=>{let u=P(a);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),i=T(()=>o.value.matched[r.value]);ho(Tl,T(()=>r.value+1)),ho(Bv,i),ho(Wa,o);const l=E();return ft(()=>[l.value,i.value,e.name],([u,d,f],[p,v,g])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!tn(d,v)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=i.value,p=f&&f.components[d];if(!p)return Ml(s.default,{Component:p,route:u});const v=f.props[d],g=v?v===!0?u.params:typeof v=="function"?v(u):v:null,N=lc(p,Ce({},g,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return Ml(s.default,{Component:N,route:u})||N}}});function Ml(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const up=cp;function dp(e){const t=Zv(e.routes,e),s=e.parseQuery||Dv,n=e.stringifyQuery||Nl,o=e.history,a=yn(),r=yn(),i=yn(),l=ad(as);let u=as;Ms&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=pa.bind(null,j=>""+j),f=pa.bind(null,yv),p=pa.bind(null,Gn);function v(j,oe){let se,le;return yc(j)?(se=t.getRecordMatcher(j),le=oe):le=j,t.addRoute(le,se)}function g(j){const oe=t.getRecordMatcher(j);oe&&t.removeRoute(oe)}function y(){return t.getRoutes().map(j=>j.record)}function N(j){return!!t.getRecordMatcher(j)}function $(j,oe){if(oe=Ce({},oe||l.value),typeof j=="string"){const I=ma(s,j,oe.path),M=t.resolve({path:I.path},oe),H=o.createHref(I.fullPath);return Ce(I,M,{params:p(M.params),hash:Gn(I.hash),redirectedFrom:void 0,href:H})}let se;if(j.path!=null)se=Ce({},j,{path:ma(s,j.path,oe.path).path});else{const I=Ce({},j.params);for(const M in I)I[M]==null&&delete I[M];se=Ce({},j,{params:f(I)}),oe.params=f(oe.params)}const le=t.resolve(se,oe),be=j.hash||"";le.params=d(p(le.params));const C=wv(n,Ce({},j,{hash:mv(be),path:le.path})),k=o.createHref(C);return Ce({fullPath:C,hash:be,query:n===Nl?Lv(j.query):j.query||{}},le,{redirectedFrom:void 0,href:k})}function w(j){return typeof j=="string"?ma(s,j,l.value.path):Ce({},j)}function _(j,oe){if(u!==j)return sn(Be.NAVIGATION_CANCELLED,{from:oe,to:j})}function R(j){return L(j)}function q(j){return R(Ce(w(j),{replace:!0}))}function Q(j,oe){const se=j.matched[j.matched.length-1];if(se&&se.redirect){const{redirect:le}=se;let be=typeof le=="function"?le(j,oe):le;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=w(be):{path:be},be.params={}),Ce({query:j.query,hash:j.hash,params:be.path!=null?{}:j.params},be)}}function L(j,oe){const se=u=$(j),le=l.value,be=j.state,C=j.force,k=j.replace===!0,I=Q(se,le);if(I)return L(Ce(w(I),{state:typeof I=="object"?Ce({},be,I.state):be,force:C,replace:k}),oe||se);const M=se;M.redirectedFrom=oe;let H;return!C&&Cv(n,le,se)&&(H=sn(Be.NAVIGATION_DUPLICATED,{to:M,from:le}),K(le,le,!0,!1)),(H?Promise.resolve(H):de(M,le)).catch(F=>Gt(F)?Gt(F,Be.NAVIGATION_GUARD_REDIRECT)?F:G(F):D(F,M,le)).then(F=>{if(F){if(Gt(F,Be.NAVIGATION_GUARD_REDIRECT))return L(Ce({replace:k},w(F.to),{state:typeof F.to=="object"?Ce({},be,F.to.state):be,force:C}),oe||M)}else F=ce(M,le,!0,k,be);return ve(M,le,F),F})}function Y(j,oe){const se=_(j,oe);return se?Promise.reject(se):Promise.resolve()}function J(j){const oe=We.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(j):j()}function de(j,oe){let se;const[le,be,C]=Uv(j,oe);se=ga(le.reverse(),"beforeRouteLeave",j,oe);for(const I of le)I.leaveGuards.forEach(M=>{se.push(cs(M,j,oe))});const k=Y.bind(null,j,oe);return se.push(k),et(se).then(()=>{se=[];for(const I of a.list())se.push(cs(I,j,oe));return se.push(k),et(se)}).then(()=>{se=ga(be,"beforeRouteUpdate",j,oe);for(const I of be)I.updateGuards.forEach(M=>{se.push(cs(M,j,oe))});return se.push(k),et(se)}).then(()=>{se=[];for(const I of C)if(I.beforeEnter)if(Bt(I.beforeEnter))for(const M of I.beforeEnter)se.push(cs(M,j,oe));else se.push(cs(I.beforeEnter,j,oe));return se.push(k),et(se)}).then(()=>(j.matched.forEach(I=>I.enterCallbacks={}),se=ga(C,"beforeRouteEnter",j,oe,J),se.push(k),et(se))).then(()=>{se=[];for(const I of r.list())se.push(cs(I,j,oe));return se.push(k),et(se)}).catch(I=>Gt(I,Be.NAVIGATION_CANCELLED)?I:Promise.reject(I))}function ve(j,oe,se){i.list().forEach(le=>J(()=>le(j,oe,se)))}function ce(j,oe,se,le,be){const C=_(j,oe);if(C)return C;const k=oe===as,I=Ms?history.state:{};se&&(le||k?o.replace(j.fullPath,Ce({scroll:k&&I&&I.scroll},be)):o.push(j.fullPath,be)),l.value=j,K(j,oe,se,k),G()}let _e;function we(){_e||(_e=o.listen((j,oe,se)=>{if(!pt.listening)return;const le=$(j),be=Q(le,pt.currentRoute.value);if(be){L(Ce(be,{replace:!0,force:!0}),le).catch(Ln);return}u=le;const C=l.value;Ms&&Ev(Al(C.fullPath,se.delta),Qo()),de(le,C).catch(k=>Gt(k,Be.NAVIGATION_ABORTED|Be.NAVIGATION_CANCELLED)?k:Gt(k,Be.NAVIGATION_GUARD_REDIRECT)?(L(Ce(w(k.to),{force:!0}),le).then(I=>{Gt(I,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&!se.delta&&se.type===ja.pop&&o.go(-1,!1)}).catch(Ln),Promise.reject()):(se.delta&&o.go(-se.delta,!1),D(k,le,C))).then(k=>{k=k||ce(le,C,!1),k&&(se.delta&&!Gt(k,Be.NAVIGATION_CANCELLED)?o.go(-se.delta,!1):se.type===ja.pop&&Gt(k,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ve(le,C,k)}).catch(Ln)}))}let ne=yn(),re=yn(),X;function D(j,oe,se){G(j);const le=re.list();return le.length?le.forEach(be=>be(j,oe,se)):console.error(j),Promise.reject(j)}function V(){return X&&l.value!==as?Promise.resolve():new Promise((j,oe)=>{ne.add([j,oe])})}function G(j){return X||(X=!j,we(),ne.list().forEach(([oe,se])=>j?se(j):oe()),ne.reset()),j}function K(j,oe,se,le){const{scrollBehavior:be}=e;if(!Ms||!be)return Promise.resolve();const C=!se&&Ov(Al(j.fullPath,0))||(le||!se)&&history.state&&history.state.scroll||null;return jn().then(()=>be(j,oe,C)).then(k=>k&&Tv(k)).catch(k=>D(k,j,oe))}const ae=j=>o.go(j);let Pe;const We=new Set,pt={currentRoute:l,listening:!0,addRoute:v,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:y,resolve:$,options:e,push:R,replace:q,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:a.add,beforeResolve:r.add,afterEach:i.add,onError:re.add,isReady:V,install(j){j.component("RouterLink",rp),j.component("RouterView",up),j.config.globalProperties.$router=pt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>P(l)}),Ms&&!Pe&&l.value===as&&(Pe=!0,R(o.location).catch(le=>{}));const oe={};for(const le in as)Object.defineProperty(oe,le,{get:()=>l.value[le],enumerable:!0});j.provide(Zo,pt),j.provide(kr,ki(oe)),j.provide(Wa,l);const se=j.unmount;We.add(j),j.unmount=function(){We.delete(j),We.size<1&&(u=as,_e&&_e(),_e=null,l.value=as,Pe=!1,X=!1),se()}}};function et(j){return j.reduce((oe,se)=>oe.then(()=>J(se)),Promise.resolve())}return pt}function fp(){return It(Zo)}function Ux(e){return It(kr)}function ya(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let i=0;i<s.length;i++){const l=s[i];if(l.startsWith("%"))continue;if(a){l.includes("}")?(r+=l.substring(0,l.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=l+`
`;continue}if(l.includes("{")){const f=l.indexOf("{");if(l.includes("}")){const p=l.indexOf("}");o.push(l.substring(f+1,p).trim())}else r=l.substring(f+1)+`
`,a=!0;continue}const u=l.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=l.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,p]=d;if(f==="Board")n&&(n.commentary=Hl(o),n.steps=Fl(o),n.auction=jl(n.auction),t.push(n)),n=vp(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=pp(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const f=l.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const p=hp(f);n.auction.push(...p)}}}return n&&(n.commentary=Hl(o),n.steps=Fl(o),n.auction=jl(n.auction),t.push(n)),t}function Fl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const i=n[r],l=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),d=/^\[ROTATE\]$/i.test(i),f=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(l){const p=xr(l[1]).replace(/!/g,"").trim(),v=a.trim();a="";let g="";if(r+1<n.length){const $=n[r+1];$.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=$.trim(),r++)}const y=bn(v,"bid"),N=bn(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:N.text,showSeatsAfter:N.showSeats})}else if(u||d){const p=u?"next":"rotate";a.trim()&&o.push(bn(a.trim(),p)),a=""}else if(f){const p=f[1].trim();let v;if(p.toLowerCase().startsWith("any:")?v={cards:p.substring(4).split(",").map(y=>Oo(y.trim())),anyOf:!0}:v={card:Oo(p)},a.trim()){const g=bn(a.trim(),"choose-card");g.chooseCard=v,o.push(g)}a=""}else a+=i}if(a.trim()){const r=bn(a.trim(),"end");o.push(r)}return o}function bn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const w=n[1].toUpperCase().trim();if(w==="ALL")s=["N","E","S","W"];else{const _=[];w.includes("N")&&_.push("N"),w.includes("E")&&_.push("E"),w.includes("S")&&_.push("S"),w.includes("W")&&_.push("W"),_.length>0&&(s=_)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const i=/\[RESET\]/i.test(e);let l=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const w=u[1].trim();w.toLowerCase().startsWith("any:")?l={cards:w.substring(4).split(",").map(R=>Oo(R.trim())),anyOf:!0}:l={card:Oo(w)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),p&&(d=!0);const v=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const N=e.match(/\[showcards\s+([^\]]+)\]/i);if(N){const w=N[1].trim();y={};const _=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let R;for(;(R=_.exec(w))!==null;){const q=R[1].toUpperCase(),Q=R[2].split(",").map(L=>L.trim().toUpperCase());y[q]=Q}Object.keys(y).length===0&&(y=null)}let $=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:xr($),type:t,showSeats:s,plays:o,reset:i,showAuction:d,showLead:v,clearCommentary:g,showcards:y,chooseCard:l}}function vp(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Oo(e){return e.toUpperCase().replace("10","T")}function pp(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(r+1)}for(let i=0;i<4;i++){const l=(o+i)%4,u=n[l];t[u]=mp(s[i])}return t}function mp(e){const t=e.split(".");return t.length!==4?null:{spades:uo(t[0]),hearts:uo(t[1]),diamonds:uo(t[2]),clubs:uo(t[3])}}function uo(e){return e?e.split(""):[]}function jl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function hp(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>gp(t))}function gp(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Hl(e){return e.length?xr(e.join(`

`)):""}function xr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function yp(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function fo(e,t){return yp(t)[e%4]}const Ar={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Wl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Sc=["spades","hearts","diamonds","clubs"];function ba(e){return e==="T"?"10":e}function Nr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Ar[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function bp(e){return(Wl[e.toLowerCase()]||Wl[e])==="red"?"suit-red":"suit-black"}function _p(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Va(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function wp(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Sc)for(const o of e[n]||[])s+=t[o]||0;return s}function Cp(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Ar[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function _n(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Sp(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Fs(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function $p({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:a,studentBid:r,correct:i,attemptNumber:l,timeTakenMs:u,skillPath:d,assignment:f=null}){var y,N,$,w,_,R,q,Q,L,Y,J;const p=((y=s.steps)==null?void 0:y.filter(de=>de.type==="bid").length)||1,v=s.studentSeat||"S",g=((N=s.hands)==null?void 0:N[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:(($=s.hands)==null?void 0:$.N)||((w=s.hands)==null?void 0:w.north)||"",east:((_=s.hands)==null?void 0:_.E)||((R=s.hands)==null?void 0:R.east)||"",south:((q=s.hands)==null?void 0:q.S)||((Q=s.hands)==null?void 0:Q.south)||"",west:((L=s.hands)==null?void 0:L.W)||((Y=s.hands)==null?void 0:Y.west)||""},full_auction:((J=s.auction)==null?void 0:J.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:a,student_hand:g},result:{student_bid:r,correct:i,attempt_number:l,time_taken_ms:u},skill_path:d,assignment:f}}function $c(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function kp(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function xp(){return crypto.randomUUID()}function Ap(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function kc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Np(e){const[t]=e.split("/");return t||"uncategorized"}function Tp(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const xc={name:"AES-GCM",length:256},Ac={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function Ep(){const e=await crypto.subtle.generateKey(xc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return nn(t)}async function Nc(e){const t=zn(e);return crypto.subtle.importKey("raw",t,xc,!0,["encrypt","decrypt"])}async function Tr(e,t){const s=await Nc(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:nn(r),iv:nn(n)}}async function Tc(e,t,s){const n=await Nc(s),o=zn(e),a=zn(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(r))}async function Op(e){const t=zn(e);return crypto.subtle.importKey("spki",t,Ac,!0,["encrypt"])}async function Rp(){const e=await crypto.subtle.generateKey(Ac,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:nn(t),privateKey:nn(s)}}async function Ec(e,t){const s=await Op(t),n=zn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return nn(o)}function Ip(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function Pp(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function Dp(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Tr(t,e);return(await Tc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function nn(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function zn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Ka="bridgePractice",Te=E({}),je=E(null),ps=E(null),Jn=E(!1),ea=E(!1);function Oc(){try{const e=localStorage.getItem(Ka);if(e){const t=JSON.parse(e);Te.value=t.users||{},je.value=t.currentUserId||null,ps.value=t.adminViewerId||null}Jn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),Jn.value=!0}}function Nt(){try{const e=localStorage.getItem(Ka),t=e?JSON.parse(e):{};t.users=Te.value,t.currentUserId=je.value,ps.value&&(t.adminViewerId=ps.value),localStorage.setItem(Ka,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function Lp({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),i=new Date().toISOString(),l=await Ep();let u=null;if(a)try{const f=await fetch(`${a}/keys/admin`);if(f.ok){const p=await f.json();ps.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await Ec(l,p.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:l,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return Te.value[r]=d,je.value=r,Nt(),ea.value=!0,d}function Bp(e,t){if(!Te.value[e])return console.error("User not found:",e),null;const s=Te.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Nt(),s}function Up(e){if(!Te.value[e])return!1;if(delete Te.value[e],je.value===e){const t=Object.keys(Te.value);je.value=t.length>0?t[0]:null}return Nt(),!0}function Mp(e){return Te.value[e]?(je.value=e,Nt(),!0):(console.error("User not found:",e),!1)}function Fp(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Te.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function jp(e){const t=e.trim().toLowerCase();for(const s of Object.values(Te.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function Hp(e){return Te.value[e]||null}function Wp(){Te.value={},je.value=null,ps.value=null,ea.value=!1,Nt(),Jn.value=!1}function Vp(){Jn.value||Oc()}async function Kp(e){const t=Pp(e);if(!t.valid)return{success:!1,error:t.error};if(!await Dp(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Te.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),je.value=e.user_id,Nt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[i.id]=i,je.value=i.id,Nt(),{success:!0,user:i}}function Gp(){const e=Te.value[je.value];return!e||!e.secretKey?null:Ip(e)}function zp(){ea.value=!1}function Jp(){return ps.value}function Yp(e){ps.value=e,Nt()}async function qp(e){const t=Te.value[je.value];return!t||!t.secretKey?null:Ec(t.secretKey,e)}async function Xp(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Qp(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Zp(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Te.value[a.id]=a,je.value=a.id,Nt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function em(){if(!je.value)return;const e=Te.value[je.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Nt()}catch{}}function Fe(){const e=T(()=>je.value&&Te.value[je.value]||null),t=T(()=>Object.values(Te.value)),s=T(()=>Object.keys(Te.value).length>0),n=T(()=>Object.keys(Te.value).length),o=T(()=>je.value!==null&&!!Te.value[je.value]);return{users:Te,currentUserId:je,adminViewerId:ps,initialized:Jn,showKeyBackupModal:ea,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Vp,loadFromStorage:Oc,saveToStorage:Nt,createUser:Lp,updateUser:Bp,deleteUser:Up,switchUser:Mp,findUserByName:Fp,findUserByEmail:jp,getUser:Hp,clearUsers:Wp,restoreFromBackup:Kp,getKeyBackup:Gp,dismissKeyBackupModal:zp,getAdminViewerId:Jp,setAdminViewerId:Yp,createGrantForViewer:qp,requestRecovery:Xp,claimRecovery:Qp,claimRecoveryByCode:Zp,syncRole:em}}const Ga="bridgePractice",Ze=E({}),Me=E(null),Tt=E(!1),on=E(!1);function Rc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(l=>l.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:i}}function Ic(){try{const e=localStorage.getItem(Ga);if(e){const t=JSON.parse(e);Ze.value=t.assignments||{},Me.value=t.currentAssignmentId||null,Me.value&&Ze.value[Me.value]&&(Tt.value=!0)}on.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),on.value=!0}}function Os(){try{const e=localStorage.getItem(Ga),t=e?JSON.parse(e):{};t.assignments=Ze.value,t.currentAssignmentId=Me.value,localStorage.setItem(Ga,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function Pc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(Ze.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const d of n)u.add(d);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Me.value=a.id,Tt.value=!0,Os(),a}const r=crypto.randomUUID(),i=new Date().toISOString(),l={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return Ze.value[r]=l,Me.value=r,Tt.value=!0,Os(),l}function tm(){if(on.value)return;Ic();const e=Rc();e&&Pc(e),on.value=!0}function sm(e){if(!Tt.value||!Me.value)return!1;const t=Ze.value[Me.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function nm(e){if(!Me.value)return;const t=Ze.value[Me.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Os())}function om(e){if(!Me.value||!Tt.value)return!1;const t=Ze.value[Me.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Os(),!0}function am(){if(!Tt.value||!Me.value)return null;const e=Ze.value[Me.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function rm(){Tt.value=!1}function lm(){Me.value&&Ze.value[Me.value]&&(Tt.value=!0)}function im(e){return Ze.value[e]||null}function cm(){return Object.values(Ze.value)}function um(e){return Ze.value[e]?(delete Ze.value[e],Me.value===e&&(Me.value=null,Tt.value=!1),Os(),!0):!1}function dm(){Ze.value={},Me.value=null,Tt.value=!1,on.value=!1,Os()}function ta(){const e=T(()=>Me.value&&Ze.value[Me.value]||null),t=T(()=>Tt.value&&e.value!==null),s=T(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=T(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Ze,currentAssignmentId:Me,inAssignmentMode:Tt,initialized:on,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:tm,loadFromStorage:Ic,saveToStorage:Os,createAssignment:Pc,isLessonInAssignment:sm,setTotalDeals:nm,recordDealCompletion:om,getAssignmentTag:am,exitAssignmentMode:rm,returnToAssignmentMode:lm,getAssignment:im,getAllAssignments:cm,deleteAssignment:um,clearAssignments:dm,parseAssignmentFromUrl:Rc}}const za="bridgePractice",Xe=E([]),an=E(null),rn=E(!1),Ts=E({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Dc(){try{const e=localStorage.getItem(za);if(e){const t=JSON.parse(e);Xe.value=t.pendingObservations||[]}rn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),rn.value=!0}}function Rs(){try{const e=localStorage.getItem(za),t=e?JSON.parse(e):{};t.pendingObservations=Xe.value,localStorage.setItem(za,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Lc(){rn.value||Dc(),an.value||Bc()}function Bc(){an.value=xp(),Ts.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function fm({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i}){var y,N;const l=Fe(),u=ta();rn.value||Lc();const d=l.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const $=e.subfolder||e.category||"Unknown";f=Ap($)}const p=u.getAssignmentTag(),v=$p({userId:d.id,sessionId:an.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:r,timeTakenMs:i,skillPath:f,assignment:p}),g=kp(v);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if(Ts.value.totalObservations++,a?Ts.value.correctCount++:Ts.value.wrongCount++,d.dataConsent&&d.secretKey){const $=await vm(v,d);$.success||(console.warn("Failed to encrypt observation, storing unencrypted:",$.error),Vl(v,((y=d.classrooms)==null?void 0:y[0])||null))}else Vl(v,((N=d.classrooms)==null?void 0:N[0])||null);return{success:!0,observation:v}}async function vm(e,t){var s;try{const{encrypted_data:n,iv:o}=await Tr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=$c(e,a);return Xe.value.push({encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()}),Rs(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Vl(e,t){const s=$c(e,t);Xe.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Rs()}async function pm(){const t=Fe().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Xe.value.length;n++){const o=Xe.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await Tr(o.observation,t.secretKey);Xe.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Rs(),s}function mm(){return Xe.value.length}function hm(){return[...Xe.value]}function gm(e){Xe.value=Xe.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Rs()}function ym(){Xe.value=[],Rs()}function bm(){return{...Ts.value}}function _m(){Xe.value=[],an.value=null,Ts.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},rn.value=!1,Rs()}function hs(){const e=T(()=>Xe.value.length),t=T(()=>Xe.value.length>0),s=T(()=>Xe.value.some(o=>!o.encrypted)),n=T(()=>an.value);return{pendingObservations:Xe,sessionId:an,sessionStats:Ts,initialized:rn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Lc,startNewSession:Bc,recordObservation:fm,encryptPendingObservations:pm,getPendingCount:mm,getPendingObservations:hm,removeSyncedObservations:gm,clearPendingObservations:ym,getSessionStats:bm,reset:_m,loadFromStorage:Dc,saveToStorage:Rs}}function wm(){const e=hs(),t=E(null),s=E(0),n=E(!1),o=E(!1),a=Wt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Wt({answered:{},wrongCard:null,correctCard:null}),i=Wt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),l=E({N:[],E:[],S:[],W:[]}),u=E(null),d=E(1),f=T(()=>{var A;return((A=t.value)==null?void 0:A.steps)||[]}),p=T(()=>f.value.length>0),v=T(()=>f.value[s.value]||null),g=T(()=>f.value.some(A=>A.type==="bid")),y=T(()=>{var A;return((A=v.value)==null?void 0:A.type)==="bid"}),N=T(()=>{var A;for(let b=s.value;b>=0;b--)if((A=f.value[b])!=null&&A.clearCommentary)return b;return 0}),$=T(()=>{var A;return((A=t.value)==null?void 0:A.studentSeat)||"S"}),w=T(()=>t.value?fo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),_=T(()=>w.value===$.value),R=T(()=>{var x,O;if(!y.value||!_.value||a.auctionComplete||o.value)return!1;const A=v.value;if(!(A!=null&&A.bid))return!1;const b=(O=(x=t.value)==null?void 0:x.auction)==null?void 0:O[a.currentBidIndex];return b?z(A.bid)===z(b):!1}),q=T(()=>{for(let A=a.displayedBids.length-1;A>=0;A--){const b=a.displayedBids[A];if(b&&b!=="Pass"&&b!=="X"&&b!=="XX")return b}return null}),Q=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;const A=a.displayedBids[a.displayedBids.length-1];if(A==="X"||A==="XX"||!q.value)return!1;let b=-1;for(let W=a.displayedBids.length-1;W>=0;W--){const ee=a.displayedBids[W];if(ee&&ee!=="Pass"&&ee!=="X"&&ee!=="XX"){b=W;break}}if(b===-1)return!1;const x=fo(b,t.value.auctionDealer||t.value.dealer),O=w.value;return(O==="N"||O==="S")&&(x==="E"||x==="W")||(O==="E"||O==="W")&&(x==="N"||x==="S")}),L=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let A=a.displayedBids.length-1;A>=0;A--){const b=a.displayedBids[A];if(b!=="Pass"){if(b==="XX")return!1;if(b==="X"){const x=fo(A,t.value.auctionDealer||t.value.dealer),O=w.value;return!(O==="N"&&x==="S"||O==="S"&&x==="N"||O==="E"&&x==="W"||O==="W"&&x==="E")}return!1}}return!1}),Y=T(()=>{const A=v.value;return A!=null&&A.chooseCard?!r.answered[s.value]:!1}),J=T(()=>{var A;return((A=v.value)==null?void 0:A.chooseCard)||null}),de=T(()=>{if(!t.value)return[];const A=["N","E","S","W"];if(!p.value)return[];let b=null;const x=f.value;for(let O=0;O<=s.value&&O<x.length;O++){const B=x[O];B!=null&&B.showSeats&&(b=B.showSeats),B!=null&&B.showSeatsAfter&&(O<s.value||O===s.value&&o.value)&&(b=B.showSeatsAfter)}return b?A.filter(O=>!b.includes(O)):A}),ve=T(()=>{if(!t.value||!p.value)return null;let A={};const b=f.value;for(let x=0;x<=s.value&&x<b.length;x++){const O=b[x];if(O!=null&&O.showcards)for(const[B,W]of Object.entries(O.showcards))A[B]=W;if(O!=null&&O.showSeats)for(const B of O.showSeats)delete A[B];if(O!=null&&O.showSeatsAfter&&(x<s.value||x===s.value&&o.value))for(const B of O.showSeatsAfter)delete A[B]}return Object.keys(A).length>0?A:null}),ce=T(()=>{if(!t.value||!p.value)return{};let A={},b=new Set;const x=f.value;for(let B=0;B<=s.value&&B<x.length;B++){const W=x[B];if(W!=null&&W.showcards)for(const[ee,fe]of Object.entries(W.showcards))A[ee]=fe;if(W!=null&&W.showSeats)for(const ee of W.showSeats)b.add(ee)}const O={};for(const[B,W]of Object.entries(A))b.has(B)&&(O[B]=W);return O}),_e=T(()=>{const A=ve.value;return A?Object.keys(A):[]}),we=T(()=>{const A=de.value,b=_e.value;return b.length?A.filter(x=>!b.includes(x)):A});function ne(A){const b={spades:[],hearts:[],diamonds:[],clubs:[]},x={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const O of A){const B=O[0].toUpperCase(),W=O.slice(1).toUpperCase(),ee=x[B];ee&&b[ee].push(W)}return b}const re=T(()=>{var x,O;if(!((x=t.value)!=null&&x.hands))return{};if((O=v.value)!=null&&O.reset)return t.value.hands;const A=ve.value,b={};for(const B of["N","E","S","W"]){if(A&&A[B]){b[B]=ne(A[B]);continue}const W=t.value.hands[B];if(!W){b[B]=null;continue}b[B]={spades:[...W.spades||[]],hearts:[...W.hearts||[]],diamonds:[...W.diamonds||[]],clubs:[...W.clubs||[]]};for(const ee of l.value[B]){const fe={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[ee.suit];if(fe&&b[B][fe]){const pe=b[B][fe].indexOf(ee.card);pe!==-1&&b[B][fe].splice(pe,1)}}}return b}),X=T(()=>!(g.value&&!a.auctionComplete)),D=T(()=>{if(!p.value)return!0;let A=!0;const b=f.value;for(let x=0;x<=s.value&&x<b.length;x++){const O=b[x];(O==null?void 0:O.showAuction)!==null&&(O==null?void 0:O.showAuction)!==void 0&&(A=O.showAuction)}return A}),V=T(()=>{var b;if(!p.value)return!1;const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++)if((b=A[x])!=null&&b.showLead)return!0;return!1}),G=T(()=>{var A;return(A=t.value)!=null&&A.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),K=T(()=>{if(!p.value||n.value)return!0;const A=v.value;return(A==null?void 0:A.type)==="end"&&!Y.value}),ae=T(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function Pe(){var b;l.value={N:[],E:[],S:[],W:[]};const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++){const O=A[x];if((b=O==null?void 0:O.plays)!=null&&b.length)for(const B of O.plays){const W=B.split(/[,\s]+/);for(const ee of W){if(!ee)continue;const fe=ee.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(fe){const pe=fe[1].toUpperCase(),Ie=fe[2].toUpperCase();let Ee=fe[3].toUpperCase();Ee==="10"&&(Ee="T"),l.value[pe].push({suit:Ie,card:Ee})}}}}}function We(){if(!t.value)return;const A=t.value.auction||[],b=pt(s.value);if(b===-1){for(;a.currentBidIndex<A.length;)a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const x=f.value[b],O=z(x.bid);for(;a.currentBidIndex<A.length;){const B=fo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),W=z(A[a.currentBidIndex]);if(B===$.value&&W===O){u.value=Date.now(),d.value=1;return}a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function pt(A){const b=f.value;for(let x=A;x<b.length;x++)if(b[x].type==="bid")return x;return-1}function et(A){if(!t.value||a.auctionComplete||!y.value)return!1;const b=t.value.auction[a.currentBidIndex],x=z(A)===z(b),O=s.value;x?O in i.wrongStepIndices&&(delete i.wrongStepIndices[O],H(!0)):(H(!1),i.wrongStepIndices[O]=!0,i.boardHadWrong=!0);const B=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,d.value=1,x?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=A,a.correctBid=b,a.wrongBidIndex=B);const W=s.value+1,ee=f.value[W];return(ee==null?void 0:ee.type)==="bid"?(s.value=W,o.value=!1,We()):(o.value=!0,j(),s.value>=f.value.length-1&&C()),x}function j(){var b;if(a.auctionComplete)return;if(pt(s.value+1)===-1){const x=((b=t.value)==null?void 0:b.auction)||[];for(;a.currentBidIndex<x.length;)a.displayedBids.push(x[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function oe(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function se(A,b){if(!t.value||!Y.value)return!1;const x=J.value;if(!x)return!1;const O=(A+b).toUpperCase(),B=s.value;let W=!1,ee="";return x.anyOf?(W=x.cards.includes(O),ee=x.cards[0]):(W=O===x.card,ee=x.card),W?B in i.wrongStepIndices&&(delete i.wrongStepIndices[B],H(!0)):(H(!1),i.wrongStepIndices[B]=!0,i.boardHadWrong=!0),r.answered[B]=!0,W?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=O,r.correctCard=ee),be(),W}function le(){r.wrongCard=null,r.correctCard=null}function be(){var A;if(R.value||Y.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,Pe(),((A=f.value[s.value])==null?void 0:A.type)==="bid"&&We(),s.value>=f.value.length-1){const b=f.value[s.value];(b==null?void 0:b.type)!=="bid"&&(b==null?void 0:b.type)!=="choose-card"&&C()}return!0}return C(),!1}function C(){n.value=!0,k()}function k(){if(f.value.some(b=>b.type==="bid"||b.type==="choose-card"))if(i.boardHadWrong){i.wrongCount++;const b=Object.keys(i.wrongStepIndices).length===0;H(b)}else i.correctCount++,H(!0)}function I(){if(oe(),le(),o.value)return o.value=!1,M(s.value),!0;if(s.value>0){const A=s.value-1,b=f.value[A];return r.answered[A]&&delete r.answered[A],(b==null?void 0:b.type)==="bid"&&M(A),s.value=A,n.value=!1,o.value=!1,Pe(),!0}return!1}function M(A){var W;const b=f.value[A];if(!b||b.type!=="bid")return;const x=z(b.bid),O=((W=t.value)==null?void 0:W.auction)||[];let B=0;for(let ee=0;ee<O.length;ee++)if(z(O[ee])===x){B=ee;break}a.currentBidIndex=B,a.displayedBids=O.slice(0,B),a.auctionComplete=!1,u.value=Date.now(),d.value=1}async function H(A){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:A?"PASS":"FAIL",correct:A,attemptNumber:1,timeTakenMs:0})}catch(b){console.error("Failed to record board observation:",b)}}function F(A){var b,x;t.value=A,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},l.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(b=A==null?void 0:A.steps)!=null&&b.length&&(Pe(),((x=A.steps[0])==null?void 0:x.type)==="bid"&&We())}function te(){i.correctCount=0,i.wrongCount=0}function z(A){if(!A)return"";const x=A.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return x==="PASS"||x==="P"?"PASS":x==="X"||x==="DBL"||x==="DOUBLE"?"X":x==="XX"||x==="RDBL"||x==="REDOUBLE"?"XX":x.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:i,steps:f,hasSteps:p,currentStep:v,hasBidSteps:g,isBidStep:y,commentaryStartIndex:N,studentSeat:$,currentTurnSeat:w,isStudentTurn:_,hasBidPrompt:R,lastContractBid:q,canDouble:Q,canRedouble:L,canGoBack:ae,hasCardChoice:Y,currentChooseCard:J,hiddenSeats:we,hands:re,showHcp:X,showcardsPlayedCards:ce,isComplete:K,showAuctionTable:D,showOpeningLead:V,openingLead:G,advance:be,makeBid:et,clearFeedback:oe,goBack:I,makeCardChoice:se,clearCardFeedback:le,loadDeal:F,resetStats:te,observationStore:e}}const Ro="bridgePractice",Uc="bridgePracticeUIPrefs",tt=E({teacherName:null,availableClassrooms:[],configuredAt:null}),ln=E({showLoadPbnOption:!1}),Io=E(!1);function Mc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Fc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:Mc(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Cm(){return new URLSearchParams(window.location.search).get("collection")}function Sm(){return new URLSearchParams(window.location.search).get("lesson")}function $m(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function km(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function xm(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function Am(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const Nm=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function jc(){try{const e=localStorage.getItem(Ro);if(e){const t=JSON.parse(e);t.appConfig&&(tt.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function Tm(){try{const e=localStorage.getItem(Uc);if(e){const t=JSON.parse(e);ln.value={...ln.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function Em(){try{localStorage.setItem(Uc,JSON.stringify(ln.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function Om(e,t){ln.value[e]=t,Em()}function Er(){try{const e=localStorage.getItem(Ro),t=e?JSON.parse(e):{};t.appConfig=tt.value,localStorage.setItem(Ro,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Hc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function Rm(){if(Io.value)return;jc(),Tm();const{teacher:e,classrooms:t}=Fc();(e||t.length>0)&&(e&&!tt.value.teacherName&&(tt.value.teacherName=e),t.length>0&&(tt.value.availableClassrooms=Hc(tt.value.availableClassrooms||[],t)),tt.value.configuredAt||(tt.value.configuredAt=new Date().toISOString()),Er()),Io.value=!0}function Im(){try{const e=localStorage.getItem(Ro);return e?JSON.parse(e):null}catch{return null}}function Pm(){tt.value={teacherName:null,availableClassrooms:[],configuredAt:null},Er(),Io.value=!1}function eo(){const e=T(()=>tt.value.availableClassrooms.length===0),t=T(()=>tt.value.availableClassrooms.length>1),s=T(()=>tt.value.availableClassrooms.length===1),n=T(()=>s.value?tt.value.availableClassrooms[0]:null),o=T(()=>tt.value.teacherName),a=T(()=>tt.value.availableClassrooms),r=T(()=>ln.value.showLoadPbnOption);return{appConfig:tt,initialized:Io,uiPrefs:ln,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:Rm,loadFromStorage:jc,saveToStorage:Er,clearConfig:Pm,getStorageData:Im,getCollectionFromUrl:Cm,setCollectionInUrl:$m,getLessonFromUrl:Sm,setLessonInUrl:km,getDealFromUrl:xm,setDealInUrl:Am,setUIPref:Om,COLLECTIONS:Nm,parseUrlParams:Fc,classroomIdToName:Mc,mergeClassrooms:Hc}}const Dm="https://api.bridge-classroom.com/api",Lm="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Or=E([]),Je=E([]),Po=E(!1),Do=E(null),Bn=E(null),Lo=E(!1),Bm=5*60*1e3;async function Um(e){const t=await fetch(`${Dm}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":Lm}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Mm(e,t){try{return{...await Tc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function Fm(){return hs().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Wc(e=!1){const s=Fe().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=Fm();if(!e&&Bn.value&&Date.now()-new Date(Bn.value).getTime()<Bm&&Je.value.length>0)return jm(n),{success:!0,cached:!0};Po.value=!0,Do.value=null;let o=[];try{const i=await Um(s.id);if(Or.value=i,s.secretKey&&i.length>0){const l=i.map(d=>Mm(d,s.secretKey));o=(await Promise.all(l)).filter(d=>d!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Do.value=i.message)}const a=new Set(o.map(i=>i.id)),r=n.filter(i=>!a.has(i.id));return Je.value=[...o,...r],Bn.value=new Date().toISOString(),Po.value=!1,{success:!0,count:Je.value.length}}function jm(e){const t=new Set(Je.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Je.value=[...Je.value,...s])}async function Hm(){if(Lo.value)return;Fe().isAuthenticated.value&&await Wc(),Lo.value=!0}function Wm(){Or.value=[],Je.value=[],Bn.value=null,Lo.value=!1}function Vc(){const e={};for(const t of Je.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Kl(){const e={};for(const t of Je.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Gl(){const e={};for(const t of Je.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function zl(e=10){return[...Je.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Jl(){const e=new Date().toISOString().split("T")[0];return Je.value.filter(t=>t.timestamp.startsWith(e))}function Yl(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Je.value.filter(n=>n.timestamp>=s)}function Vm(){const e=Vc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const i=new Date(t[r]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Rr(){const e=T(()=>Je.value.length),t=T(()=>Je.value.filter(v=>v.correct).length),s=T(()=>Je.value.filter(v=>!v.correct).length),n=T(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=T(()=>{const v=Jl(),g=v.filter(N=>N.correct).length,y=v.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=T(()=>{const v=Yl(),g=v.filter(N=>N.correct).length,y=v.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),r=T(()=>Vm()),i=T(()=>Kl()),l=T(()=>Gl()),u=T(()=>zl(20)),d=T(()=>Je.value.length>0),f=T(()=>Po.value),p=T(()=>Do.value!==null);return{observations:Or,decryptedObservations:Je,loading:Po,error:Do,lastFetchedAt:Bn,initialized:Lo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:i,sessions:l,recentObservations:u,hasData:d,isLoading:f,hasError:p,initialize:Hm,fetchProgress:Wc,clearCache:Wm,getObservationsByDate:Vc,getStatsBySkill:Kl,getSessions:Gl,getRecentObservations:zl,getTodayObservations:Jl,getThisWeekObservations:Yl}}const ks={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},gt={NONE:"none",SILVER:"silver",GOLD:"gold"},Km=6;function Gm(e){return e.slice(0,10)}function Kc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Gc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const ql=60*60*1e3;function zc(e){if(e.length===0)return ks.GREY;const t=e[e.length-1];if(!t.correct)return ks.RED;const s=Date.now()-ql;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return ks.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return ks.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=ql?ks.ORANGE:ks.GREEN}function Jc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function Yc(e){if(e.length===0)return gt.NONE;const t=new Set;for(const r of e)t.add(Gm(r.timestamp));const s=[...t].filter(r=>Jc(e,r)).sort();if(s.length<2)return gt.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)Kc(a,s[r])>=Km&&(o++,a=s[r],o>n&&(n=o));return n>=3?gt.GOLD:n>=2?gt.SILVER:gt.NONE}function zm(e){const t=e.observations.value||[];let s=[];try{s=hs().getPendingObservations().filter(i=>i.metadata).map(i=>{const l=i.metadata;return{id:l.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:l.timestamp||i.queuedAt,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number,session_id:l.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function Jm(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var l;return(i.deal_number??((l=i.deal)==null?void 0:l.deal_number))===o}).sort((i,l)=>i.timestamp.localeCompare(l.timestamp)),r=Gc(a);return{boardNumber:o,status:zc(a),achievement:Yc(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function Ym(e){return!e||e.length===0?{achievement:gt.NONE}:e.every(n=>n.achievement===gt.GOLD)?{achievement:gt.GOLD}:e.every(n=>n.achievement===gt.SILVER||n.achievement===gt.GOLD)?{achievement:gt.SILVER}:{achievement:gt.NONE}}const qc="bridgeLessonBoards",Yn=E(qm()),_a=new Set;function qm(){try{const e=localStorage.getItem(qc);return e?JSON.parse(e):{}}catch{return{}}}function Xm(){try{localStorage.setItem(qc,JSON.stringify(Yn.value))}catch{}}function Xc(e,t){Yn.value={...Yn.value,[e]:t},Xm()}function Qm(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Zm(e){const t=eo(),s=e.filter(n=>!Yn.value[n]&&!_a.has(n));if(s.length!==0){for(const n of s)_a.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(r);if(!i.ok)continue;const l=await i.text(),u=Qm(l);if(u.length>0){Xc(n,u);break}}catch{continue}}}finally{_a.delete(n)}}))}}function eh(e){var n,o;const t=Yn.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||i==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(i),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:r.lastActivity};const l=Math.max(...r.boards),u=[];for(let d=1;d<=l;d++)u.push(d);return{subfolder:a,boardNumbers:u,lastActivity:r.lastActivity}})}function dn(){const e=fs();function t(){return zm(e)}return{STATUS:ks,ACHIEVEMENT:gt,getObservations:t,computeBoardMastery:Jm,computeLessonAchievement:Ym,extractLessonsFromObservations:eh,saveLessonBoardNumbers:Xc,fetchMissingBoardCounts:Zm,groupIntoBoardAttempts:Gc,calculateCurrentStatus:zc,calculateAchievement:Yc,hasGreenDay:Jc,daysBetween:Kc}}const xn="https://api.bridge-classroom.com/api",An="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Bo=E(!1),Ir=E(null),sa=E([]),ds=E({}),Uo=E(!1),Mo=E(null),Pr=E(!1),Fo={},th=2*60*1e3;async function sh(){var s;const e=Fe(),t=e.currentUser.value;if(!t||!t.email){Bo.value=!1;return}try{const n=await fetch(`${xn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":An}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;Ir.value=a.id;const r=await fetch(`${xn}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":An}});if(!r.ok)return;const l=(await r.json()).grants||[],u=new Set(l.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const d=await fetch(`${xn}/users`,{headers:{"x-api-key":An}});if(!d.ok)return;const p=(await d.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(sa.value=p.filter(g=>{var y;return u.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==v}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Bo.value=!0,Pr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${xn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Qc(e){const t=ds.value[e],s=Fo[e];if(t&&s&&Date.now()-s<th)return t;try{const n=await fetch(`${xn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":An}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=((await n.json()).observations||[]).map(r=>({id:r.id||r.observation_id,timestamp:r.timestamp,skill_path:r.skill_path,correct:r.correct,deal_subfolder:r.deal_subfolder,deal_number:r.deal_number}));return ds.value={...ds.value,[e]:a},Fo[e]=Date.now(),a}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function nh(){Uo.value=!0,Mo.value=null;try{await Promise.allSettled(sa.value.map(s=>Qc(s.id)));const e=dn(),t=new Set;for(const s of Object.values(ds.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Mo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Uo.value=!1}}function oh(e){const t=ds.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=dn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const i=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const l of i)o[l.status]=(o[l.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function ah(e,t=3){const s=ds.value[e]||[],n=fs(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function rh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function lh(){Bo.value=!1,Ir.value=null,sa.value=[],ds.value={},Uo.value=!1,Mo.value=null,Pr.value=!1;for(const e of Object.keys(Fo))delete Fo[e]}function to(){return{isTeacher:Bo,viewerId:Ir,students:sa,studentObservations:ds,loading:Uo,error:Mo,initialized:Pr,checkTeacherStatus:sh,fetchStudentObservations:Qc,loadAllStudentSummaries:nh,getStudentMasterySummary:oh,getStudentRecentLessons:ah,formatTimeSince:rh,reset:lh}}const Ja="https://api.bridge-classroom.com/api",Ya="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",qa=E(!1),Hs=E(null),Qt=E(null),qn=E([]),cn=E([]),Dr=E("lessons"),na=E(!0),fn=E(!1),so=E([]);function ih(e){fn.value=!0,so.value=e}function ch(){fn.value=!1,so.value=[]}function no(){return fn.value?so.value:qn.value}async function Zc(){const e=Fe(),t=to(),s=e.currentUser.value;if(!s){cn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Ja}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":Ya}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${Ja}/users`,{headers:{"x-api-key":Ya}});if(r.ok){const{users:i}=await r.json(),l=new Set(a.map(u=>u.grantor_id));for(const u of i)l.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}cn.value=n}async function Lr(e=!1){if(fn.value)return{success:!0};const t=Fe(),s=Rr(),n=t.currentUser.value;if(!n)return Hs.value="No authenticated user",{success:!1,error:Hs.value};qa.value=!0,Hs.value=null;try{if(!Qt.value||Qt.value===n.id)Qt.value=n.id,await s.fetchProgress(e),qn.value=s.decryptedObservations.value;else{const o=await fetch(`${Ja}/observations?user_id=${Qt.value}&limit=10000`,{headers:{"x-api-key":Ya}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();qn.value=a.observations||[]}return{success:!0}}catch(o){return Hs.value=o.message,{success:!1,error:o.message}}finally{qa.value=!1}}async function uh(e){Qt.value=e,await Lr(!0)}const Xa=T(()=>{var n;const e=no(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:su(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),Qa=T(()=>{const e=no(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Np(o),r=kc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Tp(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),eu=T(()=>na.value?Xa.value.filter(e=>e.total>0):Xa.value),tu=T(()=>na.value?Qa.value.filter(e=>e.total>0):Qa.value);function su(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const dh=T(()=>Dr.value==="lessons"?eu.value:tu.value),fh=T(()=>cn.value.length>1),vh=T(()=>cn.value.find(e=>e.id===Qt.value)||null),ph=T(()=>no().length>0),mh=T(()=>no().length),hh=T(()=>{const e=no();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function gh(){const t=Fe().currentUser.value;t&&(Qt.value=t.id,await Zc(),await Lr())}function yh(){qn.value=[],cn.value=[],Qt.value=null,Dr.value="lessons",na.value=!0,Hs.value=null,fn.value=!1,so.value=[]}function fs(){return{loading:qa,error:Hs,selectedUserId:Qt,observations:qn,accessibleUsers:cn,activeTab:Dr,onlyWithObservations:na,useTestData:fn,testObservations:so,enableTestMode:ih,disableTestMode:ch,lessonStats:Xa,taxonStats:Qa,filteredLessonStats:eu,filteredTaxonStats:tu,currentStats:dh,canViewOtherUsers:fh,selectedUser:vh,hasData:ph,totalObservations:mh,overallSuccessRate:hh,initialize:gh,loadAccomplishments:Lr,selectUser:uh,fetchAccessibleUsers:Zc,reset:yh,formatLessonName:su}}const Br="https://api.bridge-classroom.com/api",nu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",yt=E("idle"),ou=E(null),js=E(null),Ws=E(0),Vs=E(navigator.onLine),Nn=E(!1),Xl=5,bh=1e3,_h=6e4,wh=5e3;let Xs=null;function Ch(e){const t=Math.min(bh*Math.pow(2,e),_h);return t+Math.random()*t*.25}async function au(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${Br}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function ru(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${Br}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":nu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function oo(){var n,o;const e=Fe(),t=hs();if(!navigator.onLine)return yt.value="offline",{success:!1,offline:!0};yt.value="syncing",js.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const l=await au(a);if(l.success)e.updateUser(a.id,{serverRegistered:!0}),Nn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(l.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),yt.value="error",js.value="Account already exists. Please use recovery.",Nn.value=!0,s;console.warn("User registration failed:",l.error),Nn.value=!0,js.value=`Registration failed: ${l.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let i=!1;if(a!=null&&a.dataConsent){const l=t.getPendingObservations();if(l.length>0){const u=await ru(l);if(u.success&&u.synced>0){const d=l.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var p;return(p=f.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await fs().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,js.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return Nn.value||i?yt.value="error":(yt.value="idle",ou.value=new Date().toISOString(),Ws.value=0),s}catch(a){return console.error("Sync failed:",a),js.value=a.message,yt.value="error",s.success=!1,s}}function Za(){Xs&&clearTimeout(Xs),Xs=setTimeout(async()=>{await oo()},wh)}async function lu(){return Xs&&(clearTimeout(Xs),Xs=null),await oo()}async function iu(){if(Ws.value>=Xl){console.log("Max retries reached, giving up"),yt.value="error";return}const e=Ch(Ws.value);Ws.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Ws.value}/${Xl})`),setTimeout(async()=>{const t=await oo();!t.success&&t.offline!==!0&&iu()},e)}function Sh(){var i;const e=Fe(),t=hs(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(l=>l.encrypted);if(o.length===0)return;const a={observations:o.map(l=>({encrypted_data:l.encrypted_data,iv:l.iv,metadata:l.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${Br}/observations?api_key=${nu}`,r),console.log("Sent beacon with",o.length,"observations")}function $h(){window.addEventListener("online",()=>{Vs.value=!0,console.log("Back online, triggering sync"),lu()}),window.addEventListener("offline",()=>{Vs.value=!1,yt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Vs.value&&(console.log("Tab visible, triggering sync"),Za())}),window.addEventListener("beforeunload",Sh),setInterval(()=>{document.visibilityState==="visible"&&Vs.value&&Za()},5*60*1e3)}async function kh(){$h(),navigator.onLine?await oo():yt.value="offline"}function cu(){const e=T(()=>yt.value==="syncing"),t=T(()=>yt.value==="offline"||!Vs.value),s=T(()=>yt.value==="error"),n=T(()=>hs().pendingCount.value>0);return{syncState:yt,lastSyncAt:ou,lastError:js,retryCount:Ws,isOnline:Vs,registrationFailed:Nn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:kh,performSync:oo,triggerSync:Za,forceSync:lu,retrySync:iu,registerUserWithServer:au,syncObservationsToServer:ru}}const Ur="https://api.bridge-classroom.com/api",uu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Zt=E(null),er=E(!1),ao=E(null);async function xh(){er.value=!0;try{const e=await fetch(`${Ur}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=Zt.value;Zt.value=t.announcement||null,Zt.value&&(!s||s.id!==Zt.value.id)&&(ao.value=null)}catch{}finally{er.value=!1}}async function Ah(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${Ur}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":uu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return Zt.value=a.announcement||null,ao.value=null,a}async function Nh(){const e=await fetch(`${Ur}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":uu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);Zt.value=null,ao.value=null}function Th(){Zt.value&&(ao.value=Zt.value.id)}function Mr(){return{announcement:Zt,loading:er,dismissed:ao,loadAnnouncement:xh,setAnnouncement:Ah,clearAnnouncement:Nh,dismiss:Th}}const Eh={key:0,class:"minimal-hand"},Oh={class:"seat-label-inline"},Rh={class:"seat-label"},Ih={key:0,class:"suits"},Ph={key:0,class:"suit-row"},Dh={key:0,class:"cards clickable-cards"},Lh=["onClick"],Bh={key:1,class:"cards"},Uh={key:2,class:"cards"},Mh={key:1,class:"hidden-hand"},Fh={key:2,class:"hcp"},jh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Sc,n=T(()=>Va(t.seat)),o=T(()=>wp(t.hand)),a=T(()=>t.hand?s.reduce((N,$)=>{var w;return N+(((w=t.hand[$])==null?void 0:w.length)||0)},0):0),r=T(()=>a.value>0&&a.value<5);function i(N){return t.hand&&t.hand[N]&&t.hand[N].length>0}function l(N){return Ar[N]}function u(N){return bp(N)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(N){return d[N]||N}function p(N){if(!t.hand||!t.hand[N])return"";const $=t.hand[N];return $.length===0?"":$.map(ba).join(" ")}const v=T(()=>t.playedCards&&t.playedCards.length>0),g=T(()=>{if(!t.playedCards)return null;const N=new Set;for(const $ of t.playedCards){const w=$[0].toUpperCase(),_=$.slice(1).toUpperCase(),R={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[w];R&&N.add(`${R}:${_}`)}return N});function y(N,$){return g.value?g.value.has(`${N}:${$}`):!1}return(N,$)=>(m(),h("div",{class:ue(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(m(),h("div",Eh,[c("span",Oh,S(e.seat),1),(m(!0),h(Z,null,ie(P(s),w=>(m(),h("span",{key:w,class:ue(["suit-symbol-inline",u(w)])},S(l(w)),3))),128))])):(m(),h(Z,{key:1},[c("div",Rh,S(n.value),1),!e.hidden&&e.hand?(m(),h("div",Ih,[(m(!0),h(Z,null,ie(P(s),w=>(m(),h(Z,{key:w},[!r.value||i(w)?(m(),h("div",Ph,[c("span",{class:ue(["suit-symbol",u(w)])},S(l(w)),3),e.clickable?(m(),h("span",Dh,[(m(!0),h(Z,null,ie(e.hand[w],_=>(m(),h("span",{key:_,class:ue(y(w,_)?"card-played":"card-clickable"),onClick:R=>!y(w,_)&&N.$emit("card-click",{suit:f(w),rank:_})},S(P(ba)(_)),11,Lh))),128))])):v.value?(m(),h("span",Bh,[(m(!0),h(Z,null,ie(e.hand[w],_=>(m(),h("span",{key:_,class:ue({"card-played":y(w,_)})},S(P(ba)(_)),3))),128))])):(m(),h("span",Uh,S(p(w)),1))])):U("",!0)],64))),128))])):e.hidden?(m(),h("div",Mh,[...$[0]||($[0]=[c("div",{class:"card-back"},null,-1)])])):U("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(m(),h("div",Fh,S(o.value)+" HCP ",1)):U("",!0)],64))],2))}},vo=ye(jh,[["__scopeId","data-v-128fc7ed"]]),Hh={class:"ns-column north-row"},Wh={key:0,class:"position north"},Vh={key:0,class:"position west"},Kh={class:"center"},Gh={key:1,class:"position east"},zh={class:"ns-column south-row"},Jh={key:0,class:"position south"},Yh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return m(),h("div",{class:ue(["bridge-table",{compact:e.compact}])},[c("div",Hh,[!e.hiddenSeats.includes("N")&&e.hands.N?(m(),h("div",Wh,[he(vo,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(m(),h("div",Vh,[he(vo,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0),c("div",Kh,[Ld(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(m(),h("div",Gh,[he(vo,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0),c("div",zh,[!e.hiddenSeats.includes("S")&&e.hands.S?(m(),h("div",Jh,[he(vo,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):U("",!0)])],2)}}},qh=ye(Yh,[["__scopeId","data-v-ec6230a9"]]),Xh={class:"bidding-box"},Qh={class:"bid-section"},Zh={class:"levels"},eg=["onClick"],tg={class:"strains"},sg=["disabled","onClick"],ng=["innerHTML"],og={class:"special-bids"},ag=["disabled"],rg=["disabled"],lg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=E(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=T(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),i=T(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const v=p[1].toUpperCase();return f.indexOf(v==="N"?"NT":v)});function l(f){o.value=f}function u(f,p){if(!f)return!1;const g=["C","D","H","S","NT"].indexOf(p);return f>r.value||f===r.value&&g>i.value}function d(f,p){u(f,p)&&n("bid",`${f}${p}`)}return(f,p)=>(m(),h("div",Xh,[c("div",Qh,[c("div",Zh,[(m(),h(Z,null,ie(7,v=>c("button",{key:v,class:ue(["level-btn",{active:o.value===v}]),onClick:g=>l(v)},S(v),11,eg)),64))]),c("div",tg,[(m(),h(Z,null,ie(a,v=>c("button",{key:v.value,class:ue(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:g=>d(o.value,v.value)},[c("span",{innerHTML:v.display},null,8,ng)],10,sg)),64))])]),c("div",og,[c("button",{class:"special-btn pass",onClick:p[0]||(p[0]=v=>f.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=v=>f.$emit("bid","X"))}," Double ",8,ag),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=v=>f.$emit("bid","XX"))}," Redouble ",8,rg)])]))}},ig=ye(lg,[["__scopeId","data-v-38ccb98f"]]),cg={class:"auction-table"},ug={class:"rounds"},dg=["innerHTML"],fg={key:1,class:"turn-indicator"},vg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=T(()=>["W","N","E","S"].indexOf(t.dealer)),n=T(()=>{const u=[],d=t.bids;let f=0,p=0;for(;f<d.length||p===0&&d.length>0;){const v=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&f<d.length;y++)v[y]=d[f],f++;if(v.some(y=>y!==null)&&u.push(v),p++,p>20)break}if(t.currentBidIndex>=d.length){const v=u[u.length-1],g=v?v.filter(y=>y!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function a(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function r(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function i(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function l(u){return Nr(u).html}return(u,d)=>(m(),h("div",cg,[d[0]||(d[0]=Ao('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",ug,[(m(!0),h(Z,null,ie(n.value,(f,p)=>(m(),h("div",{key:p,class:"round"},[(m(!0),h(Z,null,ie(f,(v,g)=>(m(),h("div",{key:g,class:ue(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":i(p,g)}])},[v?(m(),h("span",{key:0,innerHTML:l(v)},null,8,dg)):e.showTurnIndicator&&a(p,g)?(m(),h("span",fg,"?")):U("",!0)],2))),128))]))),128))])]))}},pg=ye(vg,[["__scopeId","data-v-ac265db8"]]),mg={class:"deal-info"},hg={class:"board-number"},gg={key:0,class:"board-popup"},yg={class:"popup-list"},bg=["onClick"],_g={class:"info-row"},wg={class:"info-item"},Cg={class:"value"},Sg={class:"info-item"},$g={key:0,class:"contract-row"},kg={class:"info-item"},xg=["innerHTML"],Ag={key:0,class:"label"},Ng={key:0,class:"info-item"},Tg=["innerHTML"],Eg={key:1,class:"title"},Og={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=E(!1);function a(p){n("goto",p),o.value=!1}const r=T(()=>Va(s.dealer)),i=T(()=>Va(s.declarer)),l=T(()=>_p(s.vulnerable)),u=T(()=>{var v;const p=(v=s.vulnerable)==null?void 0:v.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),d=T(()=>s.contract?Nr(s.contract).html:""),f=T(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],v=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},N=g[p]||p;return`<span class="${y[p]||"black"}">${N}</span>${v==="T"?"10":v}`});return(p,v)=>(m(),h("div",mg,[c("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=g=>o.value=!0),onMouseleave:v[1]||(v[1]=g=>o.value=!1)},[c("div",hg,"Board "+S(e.boardNumber),1),o.value&&e.totalDeals>1?(m(),h("div",gg,[v[2]||(v[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",yg,[(m(!0),h(Z,null,ie(e.totalDeals,g=>(m(),h("button",{key:g,class:ue(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+S(e.dealBoardNumbers[g-1]||g),11,bg))),128))])])):U("",!0)],32),c("div",_g,[c("div",wg,[v[3]||(v[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",Cg,S(r.value),1)]),c("div",Sg,[v[4]||(v[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:ue(["value",u.value])},S(l.value),3)])]),e.showContract&&e.contract?(m(),h("div",$g,[c("div",kg,[c("span",{class:"value contract",innerHTML:d.value},null,8,xg),e.declarer?(m(),h("span",Ag,"by "+S(i.value),1)):U("",!0)]),e.openingLead?(m(),h("div",Ng,[v[5]||(v[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:f.value},null,8,Tg)])):U("",!0)])):U("",!0),e.title?(m(),h("div",Eg,S(e.title),1)):U("",!0)]))}},Rg=ye(Og,[["__scopeId","data-v-5a844c49"]]),Ig={class:"feedback-header"},Pg={key:0,class:"icon"},Dg={key:1,class:"icon"},Lg={class:"title"},Bg={key:0,class:"feedback-content"},Ug={class:"bid-comparison"},Mg={class:"bid-item your-bid"},Fg=["innerHTML"],jg={class:"bid-item correct-bid"},Hg=["innerHTML"],Wg={key:1,class:"feedback-content"},Vg={class:"bid-comparison"},Kg={class:"bid-item your-bid"},Gg=["innerHTML"],zg={class:"bid-item correct-bid"},Jg=["innerHTML"],Yg=["innerHTML"],qg={class:"actions"},Xg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=T(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Nr(a).html}function o(a){return Cp(a).html}return(a,r)=>e.visible?(m(),h("div",{key:0,class:ue(["feedback-panel",e.type])},[c("div",Ig,[e.type==="wrong"?(m(),h("span",Pg,"")):e.type==="correct"?(m(),h("span",Dg,"")):U("",!0),c("span",Lg,S(s.value),1)]),e.wrongBid?(m(),h("div",Bg,[c("div",Ug,[c("div",Mg,[r[1]||(r[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Fg)]),c("div",jg,[r[2]||(r[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Hg)])])])):U("",!0),e.wrongCardCode?(m(),h("div",Wg,[c("div",Vg,[c("div",Kg,[r[3]||(r[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Gg)]),c("div",zg,[r[4]||(r[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Jg)])])])):U("",!0),e.commentary?(m(),h("div",{key:2,class:"commentary",innerHTML:P(Fs)(e.commentary)},null,8,Yg)):U("",!0),c("div",qg,[e.showContinue?(m(),h("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=i=>a.$emit("continue"))}," Continue ")):U("",!0)])],2)):U("",!0)}},Ql=ye(Xg,[["__scopeId","data-v-04368462"]]),Qg={class:"welcome-screen"},Zg={class:"welcome-card"},ey={class:"welcome-header"},ty={key:0,class:"welcome-body"},sy={class:"form-group"},ny={key:0,class:"error-message"},oy={class:"form-group"},ay={key:0,class:"error-message"},ry={class:"form-group"},ly={key:0,class:"error-message"},iy={key:0,class:"form-group"},cy={class:"checkbox-group"},uy=["value","checked","onChange"],dy={key:1,class:"form-group"},fy={class:"single-classroom"},vy={class:"form-group consent-group"},py={class:"checkbox-label consent-label"},my={key:0,class:"consent-details"},hy=["disabled"],gy={key:0},yy={key:1},by={key:1,class:"welcome-body returning"},_y={key:2,class:"welcome-body switcher"},wy={class:"user-list"},Cy=["onClick"],Sy={class:"user-name"},$y={key:0,class:"user-class"},ky={key:3,class:"welcome-body recovery-sent"},xy={class:"subtitle"},Ay={class:"recovery-info"},Ny={class:"code-entry"},Ty=["disabled"],Ey={key:0},Oy={key:1},Ry={key:0,class:"error-message"},Iy={key:4,class:"welcome-body recovery-claiming"},Py={class:"subtitle"},Dy={key:0,class:"recovery-error-panel"},Ly={class:"error-message"},By={key:1,class:"loading-spinner"},Uy={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=eo(),o=Fe(),a="https://api.bridge-classroom.com/api",r=E("form"),i=E(""),l=E(""),u=E(""),d=E([]),f=E(!0),p=E({firstName:"",lastName:"",email:"",classrooms:""}),v=E(!1),g=E(!1),y=E(""),N=E(""),$=E(""),w=E(""),_=E("");_t(async()=>{o.initialize(),n.initializeFromUrl();const G=new URLSearchParams(window.location.search),K=G.get("recover"),ae=G.get("user_id");if(K&&ae){await ve(ae,K),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,q=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Q=T(()=>i.value.trim().length>0&&l.value.trim().length>0&&u.value.trim().length>0&&R.test(u.value.trim())),L=T(()=>o.currentUser.value?o.currentUser.value.firstName:""),Y=T(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function J(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let G=!0;return i.value.trim()||(p.value.firstName="First name is required",G=!1),l.value.trim()||(p.value.lastName="Last name is required",G=!1),u.value.trim()?R.test(u.value.trim())||(p.value.email="Please enter a valid email address",G=!1):(p.value.email="Email is required",G=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",G=!1),G}async function de(){const G=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const K=await o.requestRecovery(G,a);return K.success?(N.value=G,w.value=K.message,r.value="recovery-sent",!1):K.message&&K.message.includes("No account found")?!0:(p.value.email=K.message||"Unable to verify email. Please try again.",!1)}catch(K){return console.error("Failed to check email on server:",K),q?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ve(G,K){r.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",$.value="";try{const ae=await o.claimRecovery(G,K,a);ae.success&&ae.user?s("userReady",ae.user):($.value=ae.error||"Recovery failed. Please try again.",r.value="form")}catch(ae){console.error("[Recovery] Exception:",ae),$.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,y.value=""}}async function ce(){if(_.value.trim().length===6){g.value=!0,y.value="Verifying code...",$.value="";try{const G=await o.claimRecoveryByCode(N.value.trim(),_.value.trim(),a);G.success&&G.user?s("userReady",G.user):$.value=G.error||"Invalid code. Please check and try again."}catch(G){console.error("Recovery code claim failed:",G),$.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function _e(){if(!J())return;if(g.value=!0,y.value="Checking account...",!await de()){g.value=!1,y.value="";return}let K=[];n.hasSingleClassroom.value?K=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(K=[...d.value]),y.value="Creating your secure encryption key...";try{const ae=await o.createUser({firstName:i.value,lastName:l.value,email:u.value,classrooms:K,dataConsent:f.value,apiUrl:a});s("userReady",ae)}catch(ae){console.error("Failed to create user:",ae),p.value.email="Failed to create account. Please try again."}finally{g.value=!1,y.value=""}}function we(){s("userReady",o.currentUser.value)}function ne(){r.value="switcher"}function re(G){o.switchUser(G),s("userReady",o.currentUser.value)}function X(){i.value="",l.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function D(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function V(G){const K=d.value.indexOf(G);K===-1?d.value.push(G):d.value.splice(K,1)}return(G,K)=>(m(),h("div",Qg,[c("div",Zg,[c("div",ey,[c("h1",null,S(Y.value),1)]),r.value==="form"?(m(),h("div",ty,[K[16]||(K[16]=c("h2",null,"Welcome!",-1)),K[17]||(K[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:Lt(_e,["prevent"]),class:"user-form"},[c("div",sy,[K[8]||(K[8]=c("label",{for:"firstName"},"First Name",-1)),Re(c("input",{id:"firstName","onUpdate:modelValue":K[0]||(K[0]=ae=>i.value=ae),type:"text",placeholder:"Enter your first name",class:ue({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[vt,i.value]]),p.value.firstName?(m(),h("span",ny,S(p.value.firstName),1)):U("",!0)]),c("div",oy,[K[9]||(K[9]=c("label",{for:"lastName"},"Last Name",-1)),Re(c("input",{id:"lastName","onUpdate:modelValue":K[1]||(K[1]=ae=>l.value=ae),type:"text",placeholder:"Enter your last name",class:ue({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[vt,l.value]]),p.value.lastName?(m(),h("span",ay,S(p.value.lastName),1)):U("",!0)]),c("div",ry,[K[10]||(K[10]=c("label",{for:"email"},"Email Address",-1)),Re(c("input",{id:"email","onUpdate:modelValue":K[2]||(K[2]=ae=>u.value=ae),type:"email",placeholder:"Enter your email address",class:ue({"has-error":p.value.email}),autocomplete:"email"},null,2),[[vt,u.value]]),p.value.email?(m(),h("span",ly,S(p.value.email),1)):U("",!0),K[11]||(K[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),P(n).hasMultipleClassrooms.value?(m(),h("div",iy,[K[12]||(K[12]=c("label",null,"Select Your Class(es)",-1)),c("div",cy,[(m(!0),h(Z,null,ie(P(n).availableClassrooms.value,ae=>(m(),h("label",{key:ae.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:ae.id,checked:d.value.includes(ae.id),onChange:Pe=>V(ae.id)},null,40,uy),c("span",null,S(ae.name),1)]))),128))])])):P(n).hasSingleClassroom.value?(m(),h("div",dy,[K[13]||(K[13]=c("label",null,"Class",-1)),c("div",fy,S(P(n).singleClassroom.value.name),1)])):U("",!0),c("div",vy,[c("label",py,[Re(c("input",{type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=ae=>f.value=ae)},null,512),[[Sr,f.value]]),K[14]||(K[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:K[4]||(K[4]=ae=>v.value=!v.value)},S(v.value?"Hide details":"What data is preserved?"),1),v.value?(m(),h("div",my,[...K[15]||(K[15]=[Ao('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):U("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!Q.value||g.value},[g.value?(m(),h("span",gy,S(y.value),1)):(m(),h("span",yy,"Start Practicing"))],8,hy)],32),P(o).hasUsers.value?(m(),h("button",{key:0,class:"back-link",onClick:D}," Back to user selection ")):U("",!0)])):r.value==="returning"?(m(),h("div",by,[c("h2",null,"Welcome back, "+S(L.value)+"!",1),K[18]||(K[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:we}," Continue "),c("button",{class:"switch-link",onClick:ne}," Not "+S(L.value)+"? Switch user ",1)])):r.value==="switcher"?(m(),h("div",_y,[K[19]||(K[19]=c("h2",null,"Select User",-1)),K[20]||(K[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",wy,[(m(!0),h(Z,null,ie(P(o).allUsers.value,ae=>{var Pe;return m(),h("button",{key:ae.id,class:ue(["user-item",{"is-current":ae.id===P(o).currentUserId.value}]),onClick:We=>re(ae.id)},[c("span",Sy,S(ae.firstName)+" "+S(ae.lastName),1),(Pe=ae.classrooms)!=null&&Pe.length?(m(),h("span",$y,S(ae.classrooms.join(", ")),1)):U("",!0)],10,Cy)}),128))]),c("button",{class:"add-user-btn",onClick:X}," + Add New User "),P(o).currentUser.value?(m(),h("button",{key:0,class:"back-link",onClick:D}," Cancel ")):U("",!0)])):r.value==="recovery-sent"?(m(),h("div",ky,[K[25]||(K[25]=c("h2",null,"Check Your Email",-1)),c("p",xy,[K[21]||(K[21]=$t(" We found an existing account for ",-1)),c("strong",null,S(N.value),1),K[22]||(K[22]=$t(". ",-1))]),c("div",Ay,[c("p",null,S(w.value),1),K[23]||(K[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",Ny,[K[24]||(K[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),Re(c("input",{id:"recoveryCode","onUpdate:modelValue":K[5]||(K[5]=ae=>_.value=ae),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Eo(ce,["enter"])},null,544),[[vt,_.value]]),c("button",{class:"submit-btn",disabled:_.value.trim().length!==6||g.value,onClick:ce},[g.value?(m(),h("span",Ey,S(y.value),1)):(m(),h("span",Oy,"Restore Account"))],8,Ty),$.value?(m(),h("span",Ry,S($.value),1)):U("",!0)]),c("button",{class:"back-link",onClick:K[6]||(K[6]=ae=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(m(),h("div",Iy,[K[27]||(K[27]=c("h2",null,"Restoring Your Account",-1)),c("p",Py,S(y.value),1),$.value?(m(),h("div",Dy,[c("p",Ly,S($.value),1),c("button",{class:"back-link",onClick:K[7]||(K[7]=ae=>r.value="form")}," Try again ")])):(m(),h("div",By,[...K[26]||(K[26]=[c("div",{class:"spinner"},null,-1)])]))])):U("",!0)])]))}},My=ye(Uy,[["__scopeId","data-v-4e48322f"]]),bs="https://api.bridge-classroom.com/api",Ps="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_s=E([]),Ds=E(null),Ct=E(!1),Ve=E(null);function ro(){async function e(l){Ct.value=!0,Ve.value=null;try{const d=await(await fetch(`${bs}/classrooms?teacher_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Ps}})).json();return d.success?_s.value=d.classrooms:Ve.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function t(l,u,d){Ct.value=!0,Ve.value=null;try{const f=await fetch(`${bs}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ps},body:JSON.stringify({teacher_id:l,name:u,description:d||null})});if(!f.ok){const v=await f.text();return Ve.value=v||`Server error (${f.status})`,{success:!1,error:Ve.value}}const p=await f.json();return p.success?_s.value=[p.classroom,..._s.value]:Ve.value=p.error||"Failed to create classroom",p}catch(f){return console.error("Failed to create classroom:",f),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function s(l){Ct.value=!0,Ve.value=null;try{const d=await(await fetch(`${bs}/classrooms/${encodeURIComponent(l)}`,{headers:{"x-api-key":Ps}})).json();return d.success?Ds.value=d.classroom:Ve.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function n(l,u){try{const f=await(await fetch(`${bs}/classrooms/${encodeURIComponent(l)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Ps}})).json();if(f.success&&Ds.value){Ds.value.members=Ds.value.members.filter(v=>v.student_id!==u);const p=_s.value.findIndex(v=>v.id===l);p!==-1&&_s.value[p].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(l){Ct.value=!0,Ve.value=null;try{const u=await fetch(`${bs}/join/${encodeURIComponent(l)}`);return u.status===404?(Ve.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Ve.value="Unable to connect to server",null}finally{Ct.value=!1}}async function a(l,u,d){Ct.value=!0,Ve.value=null;try{const p=await(await fetch(`${bs}/join/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ps},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return p.success||(Ve.value=p.error||"Failed to join classroom"),p}catch(f){return console.error("Failed to join classroom:",f),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ct.value=!1}}async function r(l,u){try{return await(await fetch(`${bs}/classrooms/${encodeURIComponent(l)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ps},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function i(){_s.value=[],Ds.value=null,Ct.value=!1,Ve.value=null}return{teacherClassrooms:_s,currentClassroom:Ds,loading:Ct,error:Ve,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:i}}const Fy={class:"settings-panel"},jy={class:"settings-body"},Hy={class:"settings-section"},Wy={class:"info-row"},Vy={class:"info-value"},Ky={class:"info-row"},Gy={class:"info-value"},zy={class:"info-row"},Jy={class:"info-row"},Yy={class:"info-value"},qy={key:1,class:"edit-form"},Xy={class:"form-group"},Qy={class:"form-group"},Zy={class:"form-group"},eb={class:"checkbox-label"},tb={key:0,class:"settings-section"},sb={class:"assignment-list"},nb={class:"assignment-header"},ob={class:"assignment-name"},ab={class:"assignment-progress"},rb={class:"progress-bar"},lb={class:"assignment-meta"},ib={key:0},cb={class:"assignment-list"},ub={class:"assignment-header"},db={class:"assignment-name"},fb={class:"assignment-meta"},vb={key:1,class:"settings-section"},pb={class:"classroom-id"},mb=["disabled","onClick"],hb={class:"settings-section"},gb={class:"toggle-row"},yb={class:"toggle-label"},bb=["checked"],_b={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Fe(),o=eo(),a=ta(),r=ro(),i=E(!1),l=E(""),u=E(""),d=E(!0),f=T(()=>n.currentUser.value),p=T(()=>{var Y;return!f.value||!((Y=f.value.classrooms)!=null&&Y.length)?"No classroom assigned":f.value.classrooms.map(J=>{const de=o.availableClassrooms.value.find(ve=>ve.id===J);return de?de.name:J}).join(", ")}),v=T(()=>a.getAllAssignments().filter(Y=>Y.completionPercent<100)),g=T(()=>a.getAllAssignments().filter(Y=>Y.completionPercent>=100));function y(){f.value&&(l.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,i.value=!0)}function N(){i.value=!1}function $(){f.value&&(n.updateUser(f.value.id,{firstName:l.value,lastName:u.value,dataConsent:d.value}),i.value=!1)}function w(){s("switchUser")}function _(){i.value=!1,s("close")}const R=E(null);async function q(Y){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(R.value=Y,(await r.leaveClassroom(Y,f.value.id)).success){const de=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:de.filter(ve=>ve!==Y)})}R.value=null}function Q(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function L(Y){return Y?new Date(Y).toLocaleDateString():"N/A"}return(Y,J)=>{var de,ve,ce,_e,we,ne,re;return e.visible?(m(),h("div",{key:0,class:"settings-overlay",onClick:Lt(_,["self"])},[c("div",Fy,[c("div",{class:"settings-header"},[J[5]||(J[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:_,"aria-label":"Close"},"  ")]),c("div",jy,[c("section",Hy,[J[12]||(J[12]=c("h3",null,"Your Profile",-1)),i.value?(m(),h("div",qy,[c("div",Xy,[J[10]||(J[10]=c("label",{for:"editFirstName"},"First Name",-1)),Re(c("input",{id:"editFirstName","onUpdate:modelValue":J[1]||(J[1]=X=>l.value=X),type:"text"},null,512),[[vt,l.value]])]),c("div",Qy,[J[11]||(J[11]=c("label",{for:"editLastName"},"Last Name",-1)),Re(c("input",{id:"editLastName","onUpdate:modelValue":J[2]||(J[2]=X=>u.value=X),type:"text"},null,512),[[vt,u.value]])]),c("div",Zy,[c("label",eb,[Re(c("input",{type:"checkbox","onUpdate:modelValue":J[3]||(J[3]=X=>d.value=X)},null,512),[[Sr,d.value]]),c("span",null,"Share practice results with "+S(P(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:$}," Save Changes "),c("button",{class:"secondary-btn",onClick:N}," Cancel ")])])):(m(),h(Z,{key:0},[c("div",Wy,[J[6]||(J[6]=c("span",{class:"info-label"},"Name",-1)),c("span",Vy,S((de=f.value)==null?void 0:de.firstName)+" "+S((ve=f.value)==null?void 0:ve.lastName),1)]),c("div",Ky,[J[7]||(J[7]=c("span",{class:"info-label"},"Class",-1)),c("span",Gy,S(p.value),1)]),c("div",zy,[J[8]||(J[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:ue(["info-value",(ce=f.value)!=null&&ce.dataConsent?"enabled":"disabled"])},S((_e=f.value)!=null&&_e.dataConsent?"Enabled":"Disabled"),3)]),c("div",Jy,[J[9]||(J[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",Yy,S(L((we=f.value)==null?void 0:we.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:y}," Edit Profile "),c("button",{class:"secondary-btn",onClick:w}," Switch User ")]),((ne=f.value)==null?void 0:ne.role)!=="teacher"&&((re=f.value)==null?void 0:re.role)!=="admin"?(m(),h("button",{key:0,class:"become-teacher-btn",onClick:J[0]||(J[0]=X=>{s("close"),s("become-teacher")})}," Become a Teacher ")):U("",!0)],64))]),v.value.length||g.value.length?(m(),h("section",tb,[J[16]||(J[16]=c("h3",null,"Assignments",-1)),v.value.length?(m(),h(Z,{key:0},[J[13]||(J[13]=c("h4",null,"Active",-1)),c("div",sb,[(m(!0),h(Z,null,ie(v.value,X=>(m(),h("div",{key:X.id,class:"assignment-item"},[c("div",nb,[c("span",ob,S(X.name),1),c("span",ab,S(X.completionPercent)+"%",1)]),c("div",rb,[c("div",{class:"progress-fill",style:it({width:`${X.completionPercent}%`})},null,4)]),c("div",lb,[X.dueDate?(m(),h("span",ib," Due: "+S(L(X.dueDate)),1)):U("",!0),c("span",null,S(X.completedDeals)+"/"+S(X.totalDeals)+" deals ",1)])]))),128))])],64)):U("",!0),g.value.length?(m(),h(Z,{key:1},[J[15]||(J[15]=c("h4",null,"Completed",-1)),c("div",cb,[(m(!0),h(Z,null,ie(g.value,X=>(m(),h("div",{key:X.id,class:"assignment-item completed"},[c("div",ub,[c("span",db,S(X.name),1),J[14]||(J[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",fb," Completed "+S(L(X.lastPracticedAt)),1)]))),128))])],64)):U("",!0)])):U("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(m(),h("section",vb,[J[17]||(J[17]=c("h3",null,"My Classrooms",-1)),(m(!0),h(Z,null,ie(f.value.classrooms,X=>(m(),h("div",{key:X,class:"classroom-row"},[c("span",pb,S(X),1),c("button",{class:"leave-btn",disabled:R.value===X,onClick:D=>q(X)},S(R.value===X?"Leaving...":"Leave"),9,mb)]))),128))])):U("",!0),c("section",hb,[J[19]||(J[19]=c("h3",null,"Display Options",-1)),c("div",gb,[c("label",yb,[c("input",{type:"checkbox",checked:P(o).showLoadPbnOption.value,onChange:J[4]||(J[4]=X=>P(o).setUIPref("showLoadPbnOption",X.target.checked))},null,40,bb),J[18]||(J[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[J[20]||(J[20]=c("h3",null,"Data & Privacy",-1)),J[21]||(J[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:Q}," Remove account from this device "),J[22]||(J[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):U("",!0)}}},wb=ye(_b,[["__scopeId","data-v-57179473"]]),Cb={class:"banner-content"},Sb={class:"assignment-info"},$b={class:"assignment-title"},kb={class:"assignment-name"},xb={class:"assignment-meta"},Ab={class:"progress-text"},Nb={class:"progress-bar"},Tb={key:0,class:"complete-badge"},Eb={class:"return-text"},Ob={__name:"AssignmentBanner",setup(e){const t=ta(),s=T(()=>t.currentAssignment.value),n=T(()=>t.hasActiveAssignment.value),o=T(()=>t.assignmentProgress.value),a=T(()=>t.isAssignmentComplete.value),r=T(()=>t.inAssignmentMode.value),i=T(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),l=T(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=T(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(p,v)=>{var g,y;return n.value&&r.value?(m(),h("div",{key:0,class:ue(["assignment-banner",{complete:a.value}])},[c("div",Cb,[c("div",Sb,[c("div",$b,[v[0]||(v[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",kb,S((g=s.value)==null?void 0:g.name),1)]),c("div",xb,[c("span",Ab,S(o.value.completed)+" of "+S(o.value.total)+" deals ("+S(o.value.percent)+"%) ",1),l.value?(m(),h("span",{key:0,class:ue(["due-text",u.value])},S(l.value),3)):U("",!0)])]),c("div",Nb,[c("div",{class:ue(["progress-fill",{complete:a.value}]),style:it({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(m(),h("div",Tb," Complete! ")):U("",!0)],2)):s.value&&!r.value?(m(),h("div",{key:1,class:"return-banner",onClick:f},[v[1]||(v[1]=c("span",{class:"return-icon"},"",-1)),c("span",Eb," Return to assignment: "+S((y=s.value)==null?void 0:y.name)+" ("+S(o.value.percent)+"% complete) ",1)])):U("",!0)}}},Rb=ye(Ob,[["__scopeId","data-v-a4095a6a"]]),Ib=["innerHTML"],Pb={__name:"AnnouncementBanner",setup(e){const t=Mr(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,i)=>{const l=s[i.toLowerCase()];return l?`<span class="ann-circle" style="background:${l.bg};color:${l.fg}"></span>`:r})}return(o,a)=>P(t).announcement.value&&P(t).dismissed.value!==P(t).announcement.value.id?(m(),h("div",{key:0,class:ue(["announcement-banner",P(t).announcement.value.type])},[c("span",{class:"announcement-text",innerHTML:n(P(t).announcement.value.message)},null,8,Ib),c("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>P(t).dismiss()),title:"Dismiss"},"")],2)):U("",!0)}},Db=ye(Pb,[["__scopeId","data-v-4b12409b"]]),Lb={key:0,class:"status-content"},Bb={key:1,class:"status-content offline"},Ub={key:0,class:"badge"},Mb={key:2,class:"status-content error"},Fb={class:"status-text"},jb={key:0,class:"badge"},Hb={key:3,class:"status-content pending"},Wb={class:"status-text"},Vb={key:4,class:"status-content synced"},Kb={__name:"SyncStatus",setup(e){const t=cu(),s=hs(),n=T(()=>s.pendingCount.value),o=T(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=T(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(l,u)=>(m(),h("div",{class:ue(["sync-status",a.value]),onClick:r},[P(t).isSyncing.value?(m(),h("div",Lb,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):P(t).isOffline.value?(m(),h("div",Bb,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(m(),h("span",Ub,S(n.value),1)):U("",!0)])):P(t).hasError.value?(m(),h("div",Mb,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",Fb,S(o.value),1),n.value>0?(m(),h("span",jb,S(n.value),1)):U("",!0),c("button",{class:"retry-btn",onClick:Lt(i,["stop"])},"Retry")])):n.value>0?(m(),h("div",Hb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",Wb,S(n.value)+" pending",1)])):(m(),h("div",Vb,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},Gb=ye(Kb,[["__scopeId","data-v-8457149a"]]),du=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function zb(e){return du.find(t=>t.path===e)||null}du.reduce((e,t)=>e+t.dealCount,0);const Un=36e5;function Zl(e){if(!e||e.length===0)return"untried";const t=[...e].sort((d,f)=>d.ts-f.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(d=>!d.correct&&n.ts-d.ts<Un),r=t.slice(-5),i=r.filter(d=>d.correct).length,l=r.length-i;return a&&i/r.length>=.8&&l<=1?"mastered":r.filter(d=>d.correct?!t.filter(p=>p.ts<d.ts).reverse().find(p=>!p.correct&&d.ts-p.ts<Un):!1).length>=1?"progressing":"struggling"}function Jb(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var R,q;const i=Object.keys(r).map(Number).sort((Q,L)=>Q-L);let l=0,u=0,d=0;i.forEach(Q=>{const L=Zl(r[Q]);L==="mastered"?l++:L==="progressing"?u++:d++});const f=i.length,p=[];i.forEach(Q=>{r[Q].forEach(L=>p.push({...L,dealNum:Q}))}),p.sort((Q,L)=>Q.ts-L.ts);const v=2*Un,g=i.map(Q=>{var we;const L=r[Q].slice().sort((ne,re)=>ne.ts-re.ts),Y=Zl(L),J=((we=L[L.length-1])==null?void 0:we.correct)??!1,de=L.map((ne,re)=>{if(ne.correct){const X=L.slice(0,re).reverse().find(D=>!D.correct&&ne.ts-D.ts<Un);return{ts:ne.ts,y:X?.75:1,correct:!0}}else{const X=L.slice(re+1).find(D=>D.correct&&D.ts-ne.ts<Un);return{ts:ne.ts,y:X?.5:0,correct:!1}}}),ve=5*60*1e3,ce=de.map(ne=>({...ne,vts:ne.ts.getTime(),rawTs:ne.ts.getTime()}));let _e=0;for(;_e<ce.length;){let ne=_e;for(;ne+1<ce.length&&ce[ne+1].vts-ce[ne].vts<ve;)ne++;if(ne>_e){const re=ce[ne].vts-ce[_e].vts,X=Math.max(re,v),D=re>0?X/re:1,V=ce[_e].vts;for(let G=_e;G<=ne;G++)ce[G].vts=V+(ce[G].vts-V)*D}_e=ne+1}return{dealNum:Q,status:Y,lastCorrect:J,points:ce}}),y=g.flatMap(Q=>Q.points.map(L=>L.rawTs)),N=y.length?Math.min(...y):0,w=(y.length?Math.max(...y):1)-N||1;g.forEach(Q=>{Q.points=Q.points.map(L=>({...L,x:(L.rawTs-N)/w}))});const _=(()=>{const Q=Object.values(r);if(Q.length===0)return 0;const L=Q.reduce((J,de)=>{const ve=de.slice(-5);return J+ve.filter(ce=>ce.correct).length},0),Y=Q.reduce((J,de)=>J+Math.min(de.length,5),0);return Y>0?Math.round(L/Y*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:f,mastered:l,progressing:u,struggling:d,totalBoards:t[a]??f,totalAttempts:p.length,recentRate:_,boardLines:g,firstActivity:(R=p[0])==null?void 0:R.ts,lastActivity:(q=p[p.length-1])==null?void 0:q.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function Yb(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=zb(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=kc(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const Ks={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function fu(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const qb={key:0,class:"sparkline-empty"},Xb=["width","height"],Qb=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],Zb=["d","stroke"],e_=["cx","cy","r","fill"],t_=5,s_=2.5,n_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=T(()=>t.width-n.l-n.r),a=T(()=>t.height-n.t-n.b),r=T(()=>{const f=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...f),v=Math.max(...f);return{min:p,max:v,span:v-p||1}});function i(f){return n.t+(1-f)*a.value}function l(f,p){const v=p>=.9?1:p>0?.5:0;return{px:n.l+(f-r.value.min)/r.value.span*o.value,py:n.t+(1-v)*a.value,yMapped:v}}const u=T(()=>t.boardLines.map(f=>{const p=Ks[f.status]||"#6b7280",v=f.points.filter(y=>y.y!==.75).map(y=>l(y.x,y.y)),g=v.length>=2?v.map((y,N)=>`${N===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:v,pathD:g}})),d=T(()=>{const f=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...l(y.x,y.y),y:y.y}))),p=new Array(f.length).fill(!1),v=[];return f.forEach((g,y)=>{if(p[y])return;const N=[g];p[y]=!0,f.forEach((R,q)=>{if(p[q])return;const Q=R.px-g.px,L=R.py-g.py;Math.sqrt(Q*Q+L*L)<t_&&(N.push(R),p[q]=!0)});const $=N.reduce((R,q)=>R+q.px,0)/N.length,w=N.reduce((R,q)=>R+q.py,0)/N.length,_=N.sort((R,q)=>q.yMapped-R.yMapped)[0].yMapped;v.push({px:$,py:w,y:_,n:N.length})}),v});return(f,p)=>!e.boardLines||e.boardLines.length===0?(m(),h("div",qb," No data ")):(m(),h("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(m(),h(Z,null,ie(s,v=>c("line",{key:v,x1:n.l,y1:i(v),x2:n.l+o.value,y2:i(v),stroke:v===.5?"#d1d5db":"#e5e7eb","stroke-width":v===.5?1:.5,"stroke-dasharray":v===.5?"3,3":"none"},null,8,Qb)),64)),(m(!0),h(Z,null,ie(u.value,(v,g)=>Re((m(),h("path",{key:"line-"+g,d:v.pathD,fill:"none",stroke:v.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,Zb)),[[Ef,v.pts.length>=2]])),128)),(m(!0),h(Z,null,ie(d.value,(v,g)=>(m(),h("circle",{key:"bubble-"+g,cx:v.px,cy:v.py,r:s_*Math.sqrt(v.n),fill:P(fu)(v.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,e_))),128))],8,Xb))}},o_=ye(n_,[["__scopeId","data-v-a14e2bb7"]]),a_={class:"details-header"},r_={class:"details-title"},l_={class:"details-subtitle"},i_=["viewBox","height"],c_=["x","y","fill"],u_=["y","width","height","fill","fill-opacity"],d_=["x","y","fill"],f_=["x1","y1","x2","y2","stroke-dasharray"],v_=["x","y"],p_=["cx","cy","fill"],m_={key:0,class:"details-activity"},h_={class:"stats-row"},g_={class:"stat-value"},y_={class:"stat-label"},b_=["viewBox"],__=["x","y","width","height"],w_={class:"activity-dates"},C_={class:"details-legend"},wa=7,ei=.3,Ca=110,ws=560,zt=28,Sa=40,ti=36e5,mt=864e5,S_={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close"],setup(e){const t=e,s={t:16,r:20,b:40,l:Ca},n=T(()=>{const $=new Set(t.lesson.boardLines.map(_=>_.dealNum)),w=t.lesson.totalBoards??Math.max(...$);return Array.from({length:w},(_,R)=>R+1)}),o=T(()=>n.value.length*zt),a=T(()=>ws+s.l+s.r),r=T(()=>o.value+s.t+s.b),i=T(()=>new Set(t.lesson.boardLines.map($=>$.dealNum)));function l($){return i.value.has($)}function u($){const w=t.lesson.boardLines.find(_=>_.dealNum===$);return w?Ks[w.status]||"#6b7280":"#d1d5db"}const d=T(()=>{const $=t.rawData.filter(ne=>ne.skill_path===t.lesson.path),w=n.value,_=$.map(ne=>{const re=new Date(ne.timestamp).getTime(),X=ne.deal_number,D=w.indexOf(X);return{rawTs:re,dealNum:X,boardIdx:D,correct:ne.correct,y:ne.correct?1:0}});if(_.forEach(ne=>{const re=_.filter(D=>D.dealNum===ne.dealNum).sort((D,V)=>D.rawTs-V.rawTs),X=re.findIndex(D=>D.rawTs===ne.rawTs&&D.correct===ne.correct);if(ne.correct){const D=re.slice(0,X).reverse().find(V=>!V.correct&&ne.rawTs-V.rawTs<ti);ne.y=D?.75:1}else{const D=re.slice(X+1).find(V=>V.correct&&V.rawTs-ne.rawTs<ti);ne.y=D?.5:0}}),_.length===0)return[];const R=_.map(ne=>ne.rawTs),q=Math.min(...R),Q=Math.max(...R),L=Math.floor(q/mt)*mt,J=(Math.floor(Q/mt)+1)*mt-1-L||1,de=ne=>s.l+(ne.rawTs-L)/J*ws,ve=ne=>s.t+ne*zt+zt/2,ce=wa*2*(1-ei),_e=wa*2*(1-ei),we=_.map(ne=>({...ne,px:de(ne),py:ve(ne.boardIdx)}));return w.forEach(ne=>{const re=we.filter(D=>D.dealNum===ne),X={};re.forEach(D=>{const V=D.rawTs;X[V]||(X[V]=[]),X[V].push(D)}),Object.values(X).forEach(D=>{if(D.length<2)return;const V=D[0].py;D.forEach((G,K)=>{G.py=V+(K-(D.length-1)/2)*_e})})}),w.forEach(ne=>{const re=we.filter(V=>V.dealNum===ne).sort((V,G)=>V.px-G.px),X=[];let D=0;for(;D<re.length;){let V=D;for(;V+1<re.length&&re[V+1].px-re[D].px<ce;)V++;X.push({start:D,end:V}),D=V+1}X.forEach((V,G)=>{const K=V.end-V.start+1;if(K===1)return;const ae=(K-1)*ce;let Pe;G===0?Pe=re[V.start].px:G===X.length-1?Pe=re[V.end].px-ae:Pe=(re[V.start].px+re[V.end].px)/2-ae/2;for(let We=0;We<K;We++)re[V.start+We].px=Pe+We*ce})}),we}),f=T(()=>[...d.value].sort(($,w)=>$.y-w.y)),p=T(()=>{const $=d.value;if($.length===0)return[];const w=$.map(J=>J.rawTs),_=Math.min(...w),R=Math.max(...w),q=Math.floor(_/mt)*mt,L=(Math.floor(R/mt)+1)*mt-1-q||1,Y=5;return Array.from({length:Y},(J,de)=>{const ve=de/(Y-1),ce=new Date(q+ve*L);return{x:s.l+ve*ws,label:ce.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+ce.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),v=T(()=>{const $=d.value;if($.length===0)return null;const w={};$.forEach(de=>{const ve=Math.floor(de.rawTs/mt);w[ve]=(w[ve]||0)+1});const _=Object.keys(w).map(Number).sort();if(_.length===0)return null;const R=_[0],q=_[_.length-1],Q=q-R+1,L=Math.max(...Object.values(w)),Y=Math.max(2,ws/Q-1);return{bars:_.map(de=>({dayKey:de,x:(de-R)/Q*ws,h:w[de]/L*Sa,w:Y,count:w[de],dateLabel:new Date(de*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:ws,firstLabel:new Date(R*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(q*mt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),g=T(()=>{const $=d.value,w={};return $.forEach(_=>{const R=Math.floor(_.rawTs/mt);w[R]=!0}),[{label:"Days active",value:Object.keys(w).length},{label:"Boards tried",value:t.lesson.tried},{label:"Observations",value:$.length}]}),y=[{color:"#10b981",label:"Clean success"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hour)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function N($){return new Date($).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return($,w)=>(m(),h("div",{class:"details-overlay",onClick:w[2]||(w[2]=Lt(_=>$.$emit("close"),["self"]))},[c("div",{class:"details-panel",onClick:w[1]||(w[1]=Lt(()=>{},["stop"]))},[c("div",a_,[c("div",null,[c("h2",r_,S(e.lesson.name),1),c("p",l_,S(e.lesson.tried)+" boards  "+S(e.lesson.totalAttempts)+" attempts ",1)]),c("button",{class:"details-close-btn",onClick:w[0]||(w[0]=_=>$.$emit("close"))}," close")]),(m(),h("svg",{viewBox:`0 0 ${a.value} ${r.value}`,width:"100%",height:r.value,class:"details-chart"},[(m(!0),h(Z,null,ie(n.value,(_,R)=>(m(),h("rect",{key:"bg-"+_,x:s.l,y:s.t+R*zt,width:ws,height:zt,fill:R%2===0?"#ffffff":"#f9fafb"},null,8,c_))),128)),(m(!0),h(Z,null,ie(n.value,(_,R)=>(m(),h("g",{key:"label-"+_},[c("rect",{x:2,y:s.t+R*zt+3,width:Ca-14,height:zt-6,rx:"3",fill:u(_),"fill-opacity":l(_)?.12:.05},null,8,u_),c("text",{x:Ca-16,y:s.t+R*zt+zt/2+4,"text-anchor":"end","font-size":"13",fill:u(_),"font-family":"monospace"}," Board "+S(_)+S(l(_)?"":" "),9,d_)]))),128)),(m(!0),h(Z,null,ie(p.value,(_,R)=>(m(),h("line",{key:"grid-"+R,x1:_.x,y1:s.t,x2:_.x,y2:s.t+o.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":R===0||R===p.value.length-1?"none":"3,4"},null,8,f_))),128)),(m(!0),h(Z,null,ie(p.value,(_,R)=>(m(),h("text",{key:"tick-"+R,x:_.x,y:s.t+o.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},S(_.label),9,v_))),128)),(m(!0),h(Z,null,ie(f.value,(_,R)=>(m(),h("circle",{key:"dot-"+R,cx:_.px,cy:_.py,r:wa,fill:P(fu)(_.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92"},[c("title",null,"Board "+S(_.dealNum)+"  "+S(_.correct?"Correct":"Incorrect")+"  "+S(N(_.rawTs)),1)],8,p_))),128))],8,i_)),v.value?(m(),h("div",m_,[c("div",h_,[(m(!0),h(Z,null,ie(g.value,_=>(m(),h("div",{class:"stat-item",key:_.label},[c("div",g_,S(_.value),1),c("div",y_,S(_.label),1)]))),128))]),(m(),h("svg",{width:"100%",viewBox:`0 0 ${v.value.barW} ${Sa}`,class:"activity-chart"},[(m(!0),h(Z,null,ie(v.value.bars,_=>(m(),h("rect",{key:_.dayKey,x:_.x,y:Sa-_.h,width:_.w,height:_.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[c("title",null,S(_.dateLabel)+": "+S(_.count)+" observations",1)],8,__))),128))],8,b_)),c("div",w_,[c("span",null,S(v.value.firstLabel),1),c("span",null,S(v.value.lastLabel),1)])])):U("",!0),c("div",C_,[(m(),h(Z,null,ie(y,_=>c("span",{key:_.label,class:"legend-item"},[c("span",{class:"legend-dot",style:it({backgroundColor:_.color})},null,4),$t(" "+S(_.label),1)])),64))])])]))}},$_=ye(S_,[["__scopeId","data-v-95dd7375"]]),k_={class:"student-progress-panel"},x_={key:0,class:"sp-empty"},A_={class:"sp-header"},N_={class:"sp-header-row"},T_={key:0,class:"sp-name-badge"},E_={class:"sp-meta"},O_={key:0,class:"sp-activity-chart"},R_={class:"sp-activity-header"},I_={class:"sp-activity-meta"},P_={class:"sp-activity-body"},D_={class:"sp-activity-svg-wrap"},L_=["viewBox"],B_=["x"],U_=["x","y"],M_=["x1","x2","y2"],F_=["x","y","width","height","fill"],j_=["x","y"],H_=["x","y"],W_={class:"sp-activity-legend"},V_={class:"sp-legend"},K_={class:"sp-grid"},G_=["onClick"],z_={class:"sp-card-header"},J_={class:"sp-card-info"},Y_={class:"sp-card-name"},q_={class:"sp-card-meta"},X_={class:"sp-card-rate"},Q_={class:"sp-card-sparkline"},Z_={class:"sp-mastery"},e1={class:"sp-mastery-track"},t1=["title"],s1={class:"sp-mastery-legend"},n1={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""}},setup(e){const t=e,s=E(null),n=T(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:v,lessonNames:g}=Yb(t.observations);return Jb(t.observations,v,g)}),o=T(()=>n.value.reduce((v,g)=>v+g.tried,0)),a=T(()=>n.value.reduce((v,g)=>v+g.totalAttempts,0)),r=[{color:"#10b981",label:"Success (clean)"},{color:"#f59e0b",label:"Corrected (fail then fix within 1 hr)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function i(v){return`hsl(${Math.round(v*360/n.value.length)}, 65%, 55%)`}function l(v){return v>=75?"#10b981":v>=50?"#f59e0b":"#f43f5e"}function u(v){return v?v.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function d(v){if(!v.firstActivity||!v.lastActivity)return null;const g=v.lastActivity-v.firstActivity,y=g/6e4,N=g/36e5,$=g/864e5;return y<90?`${Math.round(y)} min`:N<48?`${Math.round(N)} hr`:$<14?`${Math.round($)} days`:`${Math.round($/7)} wks`}function f(v){const g=Math.max(0,(v.totalBoards||0)-v.tried),y=[{count:v.mastered,color:Ks.mastered,label:"Mastered"},{count:v.progressing,color:Ks.progressing,label:"Progressing"},{count:v.struggling,color:Ks.struggling,label:"Struggling"},{count:g,color:Ks.untried,label:"Untried"}].filter($=>$.count>0),N=y.reduce(($,w)=>$+w.count,0);return y.forEach($=>{$.pct=`${($.count/N*100).toFixed(1)}%`}),y}const p=T(()=>{if(n.value.length===0)return null;const v=864e5,g=28,y=700,N=120,$=new Set,w=n.value.map(ve=>{const ce={};return ve.boardLines.forEach(_e=>{_e.points.forEach(we=>{const ne=Math.floor((we.rawTs??0)/v);ne>0&&(ce[ne]=(ce[ne]||0)+1,$.add(ne))})}),ce});if($.size===0)return null;const _=[...$].sort(),R=_[0],q=_[_.length-1],Q=q-R+1,L=_.map(ve=>w.reduce((ce,_e)=>ce+(_e[ve]||0),0)),Y=Math.max(...L),J=Math.max(1,y/Q*.75);return{days:_.map(ve=>{const ce=g+(ve-R)/Q*y;let _e=N;const we=[];return n.value.forEach((ne,re)=>{const X=w[re][ve]||0;if(!X)return;const D=X/Y*N;_e-=D,we.push({y:_e,h:D,count:X,color:i(re),name:ne.name})}),{dayKey:ve,x:ce,segments:we,dateLabel:new Date(ve*v).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:Y,barW:J,barH:N,chartW:y,svgW:g+y,yAxisW:g,firstLabel:new Date(R*v).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(q*v).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(v,g)=>(m(),h("div",k_,[n.value.length===0?(m(),h("div",x_,[...g[1]||(g[1]=[c("p",null,"No practice data to display yet.",-1)])])):(m(),h(Z,{key:1},[c("div",A_,[c("div",N_,[e.studentName?(m(),h("span",T_,S(e.studentName),1)):U("",!0),c("span",E_,S(n.value.length)+" lesson"+S(n.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),p.value?(m(),h("div",O_,[c("div",R_,[g[2]||(g[2]=$t(" Daily practice activity ",-1)),c("span",I_,S(o.value)+" boards  "+S(a.value)+" observations ",1)]),c("div",P_,[c("div",D_,[(m(),h("svg",{width:"100%",viewBox:`0 0 ${p.value.svgW} ${p.value.barH+26}`,style:it({display:"block",height:p.value.barH+26+"px"})},[c("text",{x:p.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.maxCount),9,B_),c("text",{x:p.value.yAxisW-3,y:p.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,U_),c("line",{x1:p.value.yAxisW,y1:"0",x2:p.value.yAxisW,y2:p.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,M_),(m(!0),h(Z,null,ie(p.value.days,y=>(m(),h("g",{key:y.dayKey},[(m(!0),h(Z,null,ie(y.segments,(N,$)=>(m(),h("rect",{key:$,x:y.x,y:N.y,width:p.value.barW,height:N.h,fill:N.color,opacity:"0.85",rx:"1"},[c("title",null,S(N.name)+": "+S(N.count)+" on "+S(y.dateLabel),1)],8,F_))),128))]))),128)),c("text",{x:p.value.yAxisW,y:p.value.barH+18,"font-size":"10",fill:"#6b7280"},S(p.value.firstLabel),9,j_),c("text",{x:p.value.yAxisW+p.value.chartW,y:p.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},S(p.value.lastLabel),9,H_)],12,L_))]),c("div",W_,[(m(!0),h(Z,null,ie(n.value,(y,N)=>(m(),h("span",{key:y.path,class:"sp-activity-legend-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:i(N)})},null,4),$t(" "+S(y.name),1)]))),128))])])])):U("",!0),c("div",V_,[(m(),h(Z,null,ie(r,y=>c("span",{key:y.label,class:"sp-legend-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:y.color})},null,4),$t(" "+S(y.label),1)])),64)),g[3]||(g[3]=c("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),c("div",K_,[(m(!0),h(Z,null,ie(n.value,y=>(m(),h("div",{key:y.path,class:"sp-lesson-card",onClick:N=>s.value=y},[c("div",z_,[c("div",J_,[c("div",Y_,S(y.name),1),c("div",q_,S(y.tried)+" boards  "+S(y.totalAttempts)+" attempts  last "+S(u(y.lastActivity))+S(d(y)?`  span ${d(y)}`:""),1)]),c("div",X_,[c("div",{class:"sp-rate-value",style:it({color:l(y.recentRate)})},S(y.recentRate)+"% ",5),g[4]||(g[4]=c("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),c("div",Q_,[he(o_,{boardLines:y.boardLines,width:280,height:70},null,8,["boardLines"])]),c("div",Z_,[c("div",e1,[(m(!0),h(Z,null,ie(f(y),N=>(m(),h("div",{key:N.label,class:"sp-mastery-segment",style:it({width:N.pct,backgroundColor:N.color}),title:`${N.label}: ${N.count}`},null,12,t1))),128))]),c("div",s1,[(m(!0),h(Z,null,ie(f(y),N=>(m(),h("span",{key:N.label,class:"sp-mastery-item"},[c("span",{class:"sp-legend-dot",style:it({backgroundColor:N.color})},null,4),$t(" "+S(N.count)+" "+S(N.label),1)]))),128))])]),g[5]||(g[5]=c("div",{class:"sp-card-hint"},"details ",-1))],8,G_))),128))])],64)),s.value?(m(),Ue($_,{key:2,lesson:s.value,rawData:e.observations,onClose:g[0]||(g[0]=y=>s.value=null)},null,8,["lesson","rawData"])):U("",!0)]))}},vu=ye(n1,[["__scopeId","data-v-722715b0"]]),o1={class:"progress-dashboard"},a1={class:"dashboard-header"},r1={key:0,class:"loading"},l1={key:1,class:"error-state"},i1={key:2,class:"empty-state"},c1={key:3,class:"dashboard-content"},u1={class:"dashboard-actions"},d1={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Rr(),s=Fe(),n=T(()=>t.decryptedObservations.value),o=T(()=>n.value.length>0),a=T(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});_t(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(i,l)=>(m(),h("div",o1,[c("header",a1,[l[3]||(l[3]=c("h2",null,"Student Progress",-1)),c("button",{class:"close-btn",onClick:l[0]||(l[0]=u=>i.$emit("close"))},"")]),P(t).isLoading.value?(m(),h("div",r1,[...l[4]||(l[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):P(t).hasError.value?(m(),h("div",l1,[c("p",null,"Failed to load progress: "+S(P(t).error.value),1),c("button",{onClick:r},"Try Again")])):o.value?(m(),h("div",c1,[he(vu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),c("div",u1,[c("button",{class:"secondary-btn",onClick:r},"Refresh Data"),c("button",{class:"primary-btn",onClick:l[2]||(l[2]=u=>i.$emit("close"))},"Continue Practicing")])])):(m(),h("div",i1,[l[5]||(l[5]=c("h3",null,"No Practice Data Yet",-1)),l[6]||(l[6]=c("p",null,"Complete some practice deals to see your progress here!",-1)),c("button",{class:"primary-btn",onClick:l[1]||(l[1]=u=>i.$emit("close"))},"Start Practicing")]))]))}},f1=ye(d1,[["__scopeId","data-v-286a38c8"]]),v1="test-user-mastery",p1="test-classroom",m1="Negative_Double",h1="competitive_bidding/negative_double";let tr=0;function ze({boardNumber:e,correct:t,timestamp:s}){return tr++,{id:`mastery-test-${tr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:v1,skill_path:h1,correct:t,deal_subfolder:m1,deal_number:e,classroom:p1}}function ut(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function po(e){return new Date(Date.now()-e*60*1e3).toISOString()}function g1(){tr=0;const e=[];e.push(ze({boardNumber:2,correct:!0,timestamp:ut(5)}),ze({boardNumber:2,correct:!1,timestamp:ut(1)})),e.push(ze({boardNumber:3,correct:!1,timestamp:po(30)}),ze({boardNumber:3,correct:!0,timestamp:po(20)})),e.push(ze({boardNumber:4,correct:!1,timestamp:po(90)}),ze({boardNumber:4,correct:!0,timestamp:po(60)})),e.push(ze({boardNumber:5,correct:!1,timestamp:ut(10)}),ze({boardNumber:5,correct:!0,timestamp:ut(2)})),e.push(ze({boardNumber:6,correct:!0,timestamp:ut(14)}),ze({boardNumber:6,correct:!0,timestamp:ut(7)})),e.push(ze({boardNumber:7,correct:!0,timestamp:ut(21)}),ze({boardNumber:7,correct:!0,timestamp:ut(14)}),ze({boardNumber:7,correct:!0,timestamp:ut(7)})),e.push(ze({boardNumber:8,correct:!0,timestamp:ut(28)}),ze({boardNumber:8,correct:!0,timestamp:ut(21)}),ze({boardNumber:8,correct:!0,timestamp:ut(14)}),ze({boardNumber:8,correct:!1,timestamp:ut(1)}));const t=[1,2,3,4,5].map(s=>({...ze({boardNumber:s,correct:!0,timestamp:ut(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const y1=["onClick","title"],b1={key:0,class:"medal gold-medal"},_1={key:1,class:"medal silver-medal"},w1={class:"board-num"},C1={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=dn(),a=T(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const l=i.find(u=>u.boardNumber===s.forceRedBoard);l&&(l.status="red")}return i});function r(i){const l={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${l[i.status]}${u[i.achievement]}`}return(i,l)=>e.boardNumbers.length>0?(m(),h("div",{key:0,class:ue(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(m(),h("button",{key:0,class:"intro-btn",onClick:l[0]||(l[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):U("",!0),(m(!0),h(Z,null,ie(a.value,(u,d)=>(m(),h("div",{key:u.boardNumber,class:ue(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:r(u)},[u.achievement==="gold"?(m(),h("span",b1,"")):u.achievement==="silver"?(m(),h("span",_1,"")):U("",!0),c("span",w1,S(u.boardNumber),1)],10,y1))),128))],2)):U("",!0)}},pu=ye(C1,[["__scopeId","data-v-820a0f0c"]]),S1={class:"accomplishments-view"},$1={class:"view-header"},k1={key:0,class:"user-selector"},x1=["value"],A1=["value"],N1={key:1,class:"loading-state"},T1={key:2,class:"error-state"},E1={key:3,class:"empty-state"},O1={key:4,class:"view-content"},R1={class:"controls-row"},I1={class:"tabs"},P1={key:0,class:"tab-content"},D1={key:0,class:"no-data"},L1={key:1,class:"lesson-list"},B1={class:"lesson-header"},U1={class:"lesson-name"},M1={key:1,class:"tab-content"},F1={key:0,class:"no-data"},j1={key:1,class:"taxon-list"},H1={class:"taxon-header"},W1={class:"taxon-category"},V1={class:"taxon-name"},K1={class:"taxon-counts"},G1={class:"taxon-stat correct"},z1={class:"taxon-stat incorrect"},J1={class:"taxon-stat total"},Y1={class:"view-actions"},q1={key:5,class:"test-mode-banner"},X1={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=fs(),o=dn(),r=new URLSearchParams(window.location.search).get("test");_t(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode(g1()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function l(p){await n.selectUser(p)}function u(p,v){s("navigate-to-deal",{subfolder:p,dealNumber:v})}const d=T(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),N=o.computeLessonAchievement(y);return{...g,achievement:N.achievement}}).sort((g,y)=>f(g.subfolder).localeCompare(f(y.subfolder)))});ft(d,p=>{o.fetchMissingBoardCounts(p.map(v=>v.subfolder))},{immediate:!0});function f(p){return n.formatLessonName(p)}return(p,v)=>(m(),h("div",S1,[c("header",$1,[v[6]||(v[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:v[0]||(v[0]=g=>p.$emit("close"))},"")]),P(n).canViewOtherUsers.value?(m(),h("div",k1,[v[7]||(v[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:P(n).selectedUserId.value,onChange:v[1]||(v[1]=g=>l(g.target.value))},[(m(!0),h(Z,null,ie(P(n).accessibleUsers.value,g=>(m(),h("option",{key:g.id,value:g.id},S(g.name)+S(g.isSelf?" (You)":""),9,A1))),128))],40,x1)])):U("",!0),P(n).loading.value?(m(),h("div",N1,[...v[8]||(v[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):P(n).error.value?(m(),h("div",T1,[c("p",null,"Failed to load: "+S(P(n).error.value),1),c("button",{onClick:i},"Try Again")])):P(n).hasData.value?(m(),h("div",O1,[c("div",R1,[c("div",I1,[c("button",{class:ue(["tab-btn",{active:P(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=g=>P(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:ue(["tab-btn",{active:P(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=g=>P(n).activeTab.value="taxons")}," Taxons ",2)])]),P(n).activeTab.value==="lessons"?(m(),h("div",P1,[d.value.length===0?(m(),h("div",D1," No lesson data available yet. ")):(m(),h("div",L1,[(m(!0),h(Z,null,ie(d.value,g=>(m(),h("div",{key:g.subfolder,class:"lesson-row"},[c("div",B1,[c("span",U1,S(f(g.subfolder)),1),g.achievement!=="none"?(m(),h("span",{key:0,class:ue(["achievement-badge",g.achievement])},"  "+S(g.achievement==="gold"?"Gold":"Silver"),3)):U("",!0)]),he(pu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):U("",!0),P(n).activeTab.value==="taxons"?(m(),h("div",M1,[P(n).filteredTaxonStats.value.length===0?(m(),h("div",F1," No skill data available yet. ")):(m(),h("div",j1,[(m(!0),h(Z,null,ie(P(n).filteredTaxonStats.value,g=>(m(),h("div",{key:g.skillPath,class:"taxon-card"},[c("div",H1,[c("span",W1,S(g.categoryName),1),c("span",V1,S(g.skillName),1)]),c("div",K1,[c("span",G1,S(g.correct),1),c("span",z1,S(g.incorrect),1),c("span",J1,S(g.total)+" total",1)])]))),128))]))])):U("",!0),c("div",Y1,[c("button",{class:"secondary-btn",onClick:i}," Refresh "),c("button",{class:"primary-btn",onClick:v[5]||(v[5]=g=>p.$emit("close"))}," Done ")])])):(m(),h("div",E1,[v[9]||(v[9]=c("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:v[2]||(v[2]=g=>p.$emit("close"))},"Start Practicing")])),P(n).useTestData.value?(m(),h("div",q1," Test Mode - Using Generated Data ")):U("",!0)]))}},Q1=ye(X1,[["__scopeId","data-v-38e59c14"]]),mu="bridge-classroom-anon-mode",Z1="BridgeClassroom-Anon",$a=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],si=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function e0(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function t0(e,t){const s=`${Z1}:${e} ${t}`,n=e0(s),o=Number(n%BigInt($a.length)),a=Number(n/BigInt($a.length)%BigInt(si.length));return{firstName:$a[o],lastName:si[a]}}const wn=E(localStorage.getItem(mu)==="true");function s0(){function e(){wn.value=!wn.value,localStorage.setItem(mu,wn.value.toString())}function t(o){return wn.value?t0(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),i=(a==null?void 0:a.charAt(0))||"",l=(r==null?void 0:r.charAt(0))||"";return(i+l).toUpperCase()||"?"}return{isAnonymized:wn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const n0={class:"teacher-student-list"},o0={class:"teacher-header"},a0={class:"header-actions"},r0=["value"],l0={key:0,class:"loading-state"},i0={key:1,class:"error-state"},c0={key:2,class:"empty-state"},u0={key:3,class:"empty-state"},d0={key:4,class:"student-table-wrap"},f0={class:"student-table"},v0=["onClick"],p0={class:"col-name"},m0={class:"student-name-cell"},h0={class:"avatar"},g0={class:"col-mastery"},y0={class:"mastery-pills"},b0={key:0,class:"pill pill-green"},_0={key:1,class:"pill pill-orange"},w0={key:2,class:"pill pill-yellow"},C0={key:3,class:"pill pill-red"},S0={key:4,class:"no-data-label"},$0={class:"col-active"},k0={class:"col-lessons"},x0={class:"recent-lessons"},A0={key:0,class:"no-data-label"},N0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=to(),n=ro(),o=Fe(),a=s0(),r=E("all"),i=E({});_t(async()=>{await s.loadAllStudentSummaries(),await l()});async function l(){const $=o.currentUser.value;if(!$)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms($.id);const w={};await Promise.all(n.teacherClassrooms.value.map(async _=>{const R=await n.fetchClassroomDetail(_.id);R!=null&&R.success&&(w[_.id]=new Set(R.classroom.members.map(q=>q.student_id)))})),i.value=w}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await l()}const d=T(()=>{const $=new Set;for(const w of Object.values(i.value))for(const _ of w)$.add(_);return $}),f=T(()=>{const $=s.students.value;if(r.value==="all")return $;if(r.value==="none")return $.filter(_=>!d.value.has(_.id));const w=i.value[r.value];return w?$.filter(_=>w.has(_.id)):$}),p=T(()=>[...f.value].sort(($,w)=>{var q,Q;const _=((q=v.value[$.id])==null?void 0:q.lastObservationTime)||"",R=((Q=v.value[w.id])==null?void 0:Q.lastObservationTime)||"";return R!==_?R.localeCompare(_):y($).localeCompare(y(w))})),v=T(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentMasterySummary(w.id);return $}),g=T(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentRecentLessons(w.id);return $});function y($){return a.displayFullName($)}function N($){return a.displayInitials($)}return($,w)=>(m(),h("div",n0,[c("header",o0,[w[5]||(w[5]=c("h2",null,"My Students",-1)),c("div",a0,[P(n).teacherClassrooms.value.length?Re((m(),h("select",{key:0,"onUpdate:modelValue":w[0]||(w[0]=_=>r.value=_),class:"filter-select"},[w[3]||(w[3]=c("option",{value:"all"},"All Students",-1)),(m(!0),h(Z,null,ie(P(n).teacherClassrooms.value,_=>(m(),h("option",{key:_.id,value:_.id},S(_.name),9,r0))),128)),w[4]||(w[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[Dn,r.value]]):U("",!0),c("button",{class:ue(["anon-btn",{active:P(a).isAnonymized.value}]),onClick:w[1]||(w[1]=_=>P(a).toggleAnonymize())},S(P(a).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:w[2]||(w[2]=_=>$.$emit("close"))},"Back")])]),P(s).loading.value?(m(),h("div",l0,[...w[6]||(w[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):P(s).error.value?(m(),h("div",i0,[c("p",null,"Failed to load: "+S(P(s).error.value),1),c("button",{onClick:u},"Try Again")])):P(s).students.value.length===0?(m(),h("div",c0,[...w[7]||(w[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(m(),h("div",u0,[...w[8]||(w[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(m(),h("div",d0,[c("table",f0,[w[9]||(w[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(m(!0),h(Z,null,ie(p.value,_=>{var R,q,Q,L,Y,J,de;return m(),h("tr",{key:_.id,class:"student-row",onClick:ve=>$.$emit("select-student",_.id,y(_))},[c("td",p0,[c("div",m0,[c("div",h0,S(N(_)),1),c("span",null,S(y(_)),1)])]),c("td",g0,[c("div",y0,[(R=v.value[_.id])!=null&&R.green?(m(),h("span",b0,S(v.value[_.id].green),1)):U("",!0),(q=v.value[_.id])!=null&&q.orange?(m(),h("span",_0,S(v.value[_.id].orange),1)):U("",!0),(Q=v.value[_.id])!=null&&Q.yellow?(m(),h("span",w0,S(v.value[_.id].yellow),1)):U("",!0),(L=v.value[_.id])!=null&&L.red?(m(),h("span",C0,S(v.value[_.id].red),1)):U("",!0),(Y=v.value[_.id])!=null&&Y.total?U("",!0):(m(),h("span",S0,"No data"))])]),c("td",$0,S(P(s).formatTimeSince((J=v.value[_.id])==null?void 0:J.lastObservationTime)),1),c("td",k0,[c("div",x0,[(m(!0),h(Z,null,ie(g.value[_.id],(ve,ce)=>(m(),h("span",{key:ce,class:"lesson-tag"},S(ve),1))),128)),(de=g.value[_.id])!=null&&de.length?U("",!0):(m(),h("span",A0,"-"))])])],8,v0)}),128))])])]))]))}},T0=ye(N0,[["__scopeId","data-v-dd6d8e66"]]),E0={class:"teacher-student-detail"},O0={class:"detail-header"},R0={class:"student-info"},I0={class:"avatar"},P0={class:"last-active"},D0={key:0,class:"loading-state"},L0={key:1,class:"detail-content"},B0={class:"tab-bar"},U0=["onClick"],M0={key:0,class:"tab-content"},F0={key:1,class:"tab-content"},j0={key:0,class:"stats-row"},H0={class:"stat stat-green"},W0={key:0,class:"stat stat-orange"},V0={key:1,class:"stat stat-yellow"},K0={key:2,class:"stat stat-red"},G0={key:3,class:"stat stat-grey"},z0={key:1,class:"no-data"},J0={key:2,class:"lesson-list"},Y0={class:"lesson-header"},q0=["onClick"],X0={class:"mastery-strip"},Q0=["title","onClick"],Z0={key:0,class:"medal gold-medal"},ew={key:1,class:"medal silver-medal"},tw={class:"board-num"},sw={class:"observation-total"},nw={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=to(),a=dn(),r=fs(),i=E(!1),l=E("progress"),u=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],d=T(()=>s.studentName.split(" ").map(w=>w[0]||"").join("").toUpperCase());_t(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const f=T(()=>o.studentObservations.value[s.studentId]||[]),p=T(()=>o.getStudentMasterySummary(s.studentId)),v=T(()=>o.formatTimeSince(p.value.lastObservationTime)),g=T(()=>{const $=f.value;return $.length===0?[]:a.extractLessonsFromObservations($).map(_=>{const R=a.computeBoardMastery($,_.subfolder,_.boardNumbers),q=a.computeLessonAchievement(R);return{..._,boardMastery:R,achievement:q.achievement}}).sort((_,R)=>y(_.subfolder).localeCompare(y(R.subfolder)))});ft(g,$=>{a.fetchMissingBoardCounts($.map(w=>w.subfolder))},{immediate:!0});function y($){return r.formatLessonName($)}function N($){const w={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${$.boardNumber}: ${w[$.status]}`}return($,w)=>(m(),h("div",E0,[c("header",O0,[c("button",{class:"back-btn",onClick:w[0]||(w[0]=_=>$.$emit("back"))}," Students"),c("div",R0,[c("div",I0,S(d.value),1),c("div",null,[c("h2",null,S(e.studentName),1),c("span",P0,"Last active: "+S(v.value),1)])])]),i.value?(m(),h("div",D0,[...w[1]||(w[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(m(),h("div",L0,[c("div",B0,[(m(),h(Z,null,ie(u,_=>c("button",{key:_.id,class:ue(["tab-btn",{active:l.value===_.id}]),onClick:R=>l.value=_.id},S(_.label),11,U0)),64))]),l.value==="progress"?(m(),h("div",M0,[he(vu,{observations:f.value,studentName:s.studentName},null,8,["observations","studentName"])])):l.value==="mastery"?(m(),h("div",F0,[p.value.total>0?(m(),h("div",j0,[c("div",H0,S(p.value.green)+" Green",1),p.value.orange?(m(),h("div",W0,S(p.value.orange)+" Orange",1)):U("",!0),p.value.yellow?(m(),h("div",V0,S(p.value.yellow)+" Yellow",1)):U("",!0),p.value.red?(m(),h("div",K0,S(p.value.red)+" Red",1)):U("",!0),p.value.grey?(m(),h("div",G0,S(p.value.grey)+" Grey",1)):U("",!0)])):U("",!0),g.value.length===0?(m(),h("div",z0," No lesson data available yet. ")):(m(),h("div",J0,[(m(!0),h(Z,null,ie(g.value,_=>(m(),h("div",{key:_.subfolder,class:"lesson-row"},[c("div",Y0,[c("button",{class:"lesson-name lesson-link",onClick:R=>n("navigate-to-lesson",_.subfolder)},S(y(_.subfolder)),9,q0),_.achievement!=="none"?(m(),h("span",{key:0,class:ue(["achievement-badge",_.achievement])},"  "+S(_.achievement==="gold"?"Gold":"Silver"),3)):U("",!0)]),c("div",X0,[(m(!0),h(Z,null,ie(_.boardMastery,R=>(m(),h("div",{key:R.boardNumber,class:ue(["board-circle board-clickable","status-"+R.status]),title:N(R),onClick:q=>n("navigate-to-lesson",_.subfolder,R.boardNumber)},[R.achievement==="gold"?(m(),h("span",Z0,"")):R.achievement==="silver"?(m(),h("span",ew,"")):U("",!0),c("span",tw,S(R.boardNumber),1)],10,Q0))),128))])]))),128))]))])):U("",!0),c("div",sw,S(f.value.length)+" observations",1)]))]))}},ow=ye(nw,[["__scopeId","data-v-0df670c0"]]),aw={key:0,class:"lesson-browser-loading"},rw={key:1,class:"lesson-browser-error"},lw={class:"lesson-browser"},iw={class:"browser-header"},cw={class:"browser-content"},uw=["onClick"],dw={class:"expand-icon"},fw={class:"category-name"},vw={class:"category-count"},pw={key:0,class:"lesson-list"},mw=["onClick"],hw={class:"lesson-name"},gw={class:"lesson-description"},yw={key:0,class:"error-message"},bw={key:3,class:"lesson-browser-inline"},_w={class:"browser-content-inline"},ww=["onClick"],Cw={class:"expand-icon"},Sw={class:"category-name"},$w={class:"category-count"},kw={key:0,class:"lesson-list"},xw=["onClick"],Aw={class:"lesson-name"},Nw={class:"lesson-description"},Tw={key:0,class:"error-message-inline"},Ew={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=E(null),a=E(null),r=E(!1),i=E([]),l=E(null),u=E(null);ft(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&d()},{immediate:!0});async function d(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{r.value=!1}}function f(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function v(g,y){var N;u.value=null,l.value=g.id;try{const $=((N=s.collection)==null?void 0:N.baseUrl)||"",w=p(g.id),_=`${$}/${w}.pbn`,R=await fetch(_);if(!R.ok)throw new Error(`Failed to load lesson: ${R.statusText}`);const q=await R.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:q}),s.inline||n("close")}catch($){console.error("Error loading lesson:",$),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{l.value=null}}return(g,y)=>e.visible&&r.value?(m(),h("div",aw,[...y[2]||(y[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(m(),h("div",rw,[c("p",null,S(a.value),1),c("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(m(),h("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Lt(N=>g.$emit("close"),["self"]))},[c("div",lw,[c("div",iw,[c("h2",null,S(o.value.name),1),c("button",{class:"close-btn",onClick:y[0]||(y[0]=N=>g.$emit("close"))},"")]),c("div",cw,[(m(!0),h(Z,null,ie(o.value.categories,N=>(m(),h("div",{key:N.id,class:"category-section"},[c("button",{class:ue(["category-header",{expanded:i.value.includes(N.id)}]),onClick:$=>f(N.id)},[c("span",dw,S(i.value.includes(N.id)?"":""),1),c("span",fw,S(N.name),1),c("span",vw,S(N.lessons.length)+" lessons",1)],10,uw),i.value.includes(N.id)?(m(),h("div",pw,[(m(!0),h(Z,null,ie(N.lessons,$=>(m(),h("button",{key:$.id,class:ue(["lesson-item",{loading:l.value===$.id}]),onClick:w=>v($,N)},[c("span",hw,S($.name),1),c("span",gw,S($.description),1)],10,mw))),128))])):U("",!0)]))),128))]),u.value?(m(),h("div",yw,S(u.value),1)):U("",!0)])])):e.visible&&e.inline&&o.value?(m(),h("div",bw,[c("div",_w,[(m(!0),h(Z,null,ie(o.value.categories,N=>(m(),h("div",{key:N.id,class:"category-section"},[c("button",{class:ue(["category-header",{expanded:i.value.includes(N.id)}]),onClick:$=>f(N.id)},[c("span",Cw,S(i.value.includes(N.id)?"":""),1),c("span",Sw,S(N.name),1),c("span",$w,S(N.lessons.length)+" lessons",1)],10,ww),i.value.includes(N.id)?(m(),h("div",kw,[(m(!0),h(Z,null,ie(N.lessons,$=>(m(),h("button",{key:$.id,class:ue(["lesson-item",{loading:l.value===$.id}]),onClick:w=>v($,N)},[c("span",Aw,S($.name),1),c("span",Nw,S($.description),1)],10,xw))),128))])):U("",!0)]))),128))]),u.value?(m(),h("div",Tw,S(u.value),1)):U("",!0)])):U("",!0)}},Ow=ye(Ew,[["__scopeId","data-v-384a9c63"]]),Rw={class:"viewer-controls"},Iw={class:"viewer-body"},Pw={key:0,class:"interaction-overlay"},Dw={key:1,class:"viewer-loading"},Lw={key:2,class:"viewer-error"},Bw=["src"],Uw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Wt({x:80,y:80}),n=Wt({w:550,h:700}),o=E(!1),a=Wt({x:0,y:0}),r=E(null),i=E(!1),l=E(null),u=T(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function d(w){if(f(),!!w){i.value=!0,l.value=null;try{const _=await fetch(w);if(!_.ok)throw new Error("Failed to load PDF");const R=await _.blob(),q=new Blob([R],{type:"application/pdf"});r.value=URL.createObjectURL(q)}catch(_){l.value="Could not load PDF",console.error("Failed to fetch intro PDF:",_)}finally{i.value=!1}}}function f(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}ft(()=>[t.visible,t.url],([w,_])=>{w&&_?d(_):w||f()},{immediate:!0}),Mi(f);function v(w){w.target.closest("button")||(o.value=!0,a.x=w.clientX-s.x,a.y=w.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",$))}function g(w){s.x=Math.max(0,w.clientX-a.x),s.y=Math.max(0,w.clientY-a.y)}function y(w){o.value=!0,a.x=w.clientX,a.y=w.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",N),document.addEventListener("pointerup",$)}function N(w){n.w=Math.max(320,a.startW+(w.clientX-a.x)),n.h=Math.max(300,a.startH+(w.clientY-a.y))}function $(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",$)}return(w,_)=>e.visible?(m(),h("div",{key:0,class:"intro-pdf-viewer",style:it({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:v},[_[1]||(_[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",Rw,[c("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:_[0]||(_[0]=R=>w.$emit("close")),title:"Close"},"")])],32),c("div",Iw,[o.value?(m(),h("div",Pw)):U("",!0),i.value?(m(),h("div",Dw,"Loading PDF...")):l.value?(m(),h("div",Lw,S(l.value),1)):u.value?(m(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,Bw)):U("",!0)]),c("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):U("",!0)}},Mw=ye(Uw,[["__scopeId","data-v-a97df645"]]),Ls="https://api.bridge-classroom.com/api",Bs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Cn=E([]),Cs=E([]),ka=E(null),St=E(!1),Oe=E(null);function oa(){async function e(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ls}/assignments?student_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Bs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?Cn.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch student assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function t(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ls}/assignments?assigned_by=${encodeURIComponent(i)}`,{headers:{"x-api-key":Bs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?Cs.value=u.assignments:Oe.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch teacher assignments:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function s(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ls}/assignments?classroom_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Bs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?u.assignments:(Oe.value=u.error||"Failed to fetch assignments",[])}catch(l){return console.error("Failed to fetch classroom assignments:",l),Oe.value="Unable to connect to server",[]}finally{St.value=!1}}async function n(i){St.value=!0,Oe.value=null;try{const l=await fetch(`${Ls}/assignments/${encodeURIComponent(i)}`,{headers:{"x-api-key":Bs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?ka.value=u.assignment:Oe.value=u.error||"Failed to fetch assignment",u}catch(l){return console.error("Failed to fetch assignment detail:",l),Oe.value="Unable to connect to server",null}finally{St.value=!1}}async function o({exercise_id:i,classroom_id:l,student_id:u,assigned_by:d,due_at:f,sort_order:p}){St.value=!0,Oe.value=null;try{const v=await fetch(`${Ls}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({exercise_id:i,classroom_id:l||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:p??null})});if(!v.ok){const y=await v.text();return Oe.value=y||`Server error (${v.status})`,{success:!1,error:Oe.value}}const g=await v.json();return g.success?Cs.value=[g.assignment,...Cs.value]:Oe.value=g.error||"Failed to create assignment",g}catch(v){return console.error("Failed to create assignment:",v),Oe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{St.value=!1}}async function a(i){try{const l=await fetch(`${Ls}/assignments/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":Bs}});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,{success:!1,error:Oe.value}}const u=await l.json();return u.success&&(Cs.value=Cs.value.filter(d=>d.id!==i),Cn.value=Cn.value.filter(d=>d.id!==i)),u}catch(l){return console.error("Failed to delete assignment:",l),{success:!1,error:"Unable to connect to server"}}}function r(){Cn.value=[],Cs.value=[],ka.value=null,St.value=!1,Oe.value=null}return{studentAssignments:Cn,teacherAssignments:Cs,currentAssignment:ka,loading:St,error:Oe,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,reset:r}}const Fw={class:"collection-icon"},jw={class:"collection-name"},Hw={class:"collection-desc"},Ww={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(m(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",Fw,S(e.collection.icon),1),c("span",jw,S(e.collection.name),1),c("span",Hw,S(e.collection.description),1)]))}},Vw=ye(Ww,[["__scopeId","data-v-747be5b1"]]),Kw={class:"collection-grid"},Gw={class:"collection-cards"},zw={key:0,class:"load-file-section"},Jw={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=eo(),s=t.COLLECTIONS;return(n,o)=>(m(),h("div",Kw,[o[2]||(o[2]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",Gw,[(m(!0),h(Z,null,ie(P(s),a=>(m(),Ue(Vw,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),P(t).showLoadPbnOption.value?(m(),h("div",zw,[o[1]||(o[1]=c("p",null,"Or load your own PBN file:",-1)),c("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):U("",!0)]))}},Fr=ye(Jw,[["__scopeId","data-v-35b62d22"]]),Yw={class:"casual-lobby"},qw={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(m(),h("div",Yw,[he(Fr,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},Xw=ye(qw,[["__scopeId","data-v-1ce1f7d7"]]),Qw={class:"assignment-panel"},Zw={key:0,class:"loading-state"},eC={key:1,class:"empty-state"},tC={key:2,class:"assignment-cards"},sC=["onClick"],nC={class:"card-header"},oC={class:"exercise-name"},aC={class:"card-meta"},rC={key:0,class:"meta-item"},lC={class:"progress-section"},iC={class:"progress-bar"},cC={class:"progress-label"},uC={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const i=s(r);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(r){if(!r.due_at)return"";const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(r,i)=>(m(),h("div",Qw,[i[2]||(i[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(m(),h("div",Zw,[...i[0]||(i[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(m(),h("div",eC,[...i[1]||(i[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(m(),h("div",tC,[(m(!0),h(Z,null,ie(e.assignments,l=>(m(),h("div",{key:l.id,class:ue(["assignment-card",s(l)]),onClick:u=>r.$emit("select-assignment",l)},[c("div",nC,[c("span",oC,S(l.exercise_name),1),c("span",{class:ue(["status-badge",s(l)])},S(n(l)),3)]),c("div",aC,[l.classroom_name?(m(),h("span",rC,S(l.classroom_name),1)):U("",!0),l.due_at?(m(),h("span",{key:1,class:ue(["meta-item",a(l)])},S(o(l)),3)):U("",!0)]),c("div",lC,[c("div",iC,[c("div",{class:ue(["progress-fill",s(l)]),style:it({width:t(l)+"%"})},null,6)]),c("span",cC,S(l.attempted_boards)+" / "+S(l.total_boards)+" boards ",1)])],10,sC))),128))]))]))}},dC=ye(uC,[["__scopeId","data-v-dc0b8e86"]]),fC={class:"student-lobby"},vC={__name:"StudentLobby",emits:["select-collection","load-file"],setup(e,{emit:t}){const s=Fe(),n=oa(),o=T(()=>n.studentAssignments.value.length>0),a=T(()=>n.loading.value);function r(i){console.log("Selected assignment:",i)}return _t(()=>{const i=s.currentUser.value;i&&n.fetchStudentAssignments(i.id)}),(i,l)=>(m(),h("div",fC,[o.value||a.value?(m(),Ue(dC,{key:0,assignments:P(n).studentAssignments.value,loading:a.value,onSelectAssignment:r},null,8,["assignments","loading"])):U("",!0),he(Fr,{onSelectCollection:l[0]||(l[0]=u=>i.$emit("select-collection",u)),onLoadFile:l[1]||(l[1]=u=>i.$emit("load-file",u))})]))}},pC=ye(vC,[["__scopeId","data-v-74a1ec15"]]),hu="https://api.bridge-classroom.com/api",gu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_o=E([]),jr=E([]),Hr=E([]),sr=E(!1),xa=E(null),mC=2*60*1e3;async function hC(e,t=!1){if(!t&&xa.value&&Date.now()-new Date(xa.value).getTime()<mC)return{success:!0,cached:!0};sr.value=!0;try{const s=await fetch(`${hu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":gu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return _o.value=n.classrooms||[],jr.value=n.needs_attention||[],Hr.value=n.recent_activity||[],xa.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{sr.value=!1}}async function gC(e,t){try{const s=await fetch(`${hu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":gu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?jr.value=[]:t==="activity"&&(Hr.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function yC(){const e=T(()=>({classroomCount:_o.value.length,openAssignmentCount:_o.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:_o,needsAttention:jr,recentActivity:Hr,lobbyLoading:sr,summaryStats:e,loadTeacherLobbyData:hC,clearPanel:gC}}const bC={class:"roster"},_C={class:"roster-header"},wC={class:"member-count"},CC={key:0,class:"roster-empty"},SC={key:1,class:"roster-table"},$C={class:"member-name"},kC={class:"member-email"},xC={class:"member-date"},AC={class:"member-action"},NC=["onClick","disabled"],TC={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=E(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const i=`${r.first_name} ${r.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,i)=>(m(),h("div",bC,[c("div",_C,[i[0]||(i[0]=c("h4",null,"Class Roster",-1)),c("span",wC,S(e.members.length)+" "+S(e.members.length===1?"student":"students"),1)]),e.members.length===0?(m(),h("div",CC,[...i[1]||(i[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(m(),h("table",SC,[i[2]||(i[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(m(!0),h(Z,null,ie(e.members,l=>(m(),h("tr",{key:l.student_id},[c("td",$C,S(l.first_name)+" "+S(l.last_name),1),c("td",kC,S(l.email),1),c("td",xC,S(o(l.joined_at)),1),c("td",AC,[c("button",{class:"remove-btn",onClick:u=>a(l),disabled:n.value===l.student_id},S(n.value===l.student_id?"Removing...":"Remove"),9,NC)])]))),128))])]))]))}},EC=ye(TC,[["__scopeId","data-v-ee901be3"]]),OC={class:"header-left"},RC={class:"classroom-name"},IC={class:"header-meta"},PC={class:"join-badge"},DC={class:"member-count"},LC={key:0,class:"stat-badge"},BC={key:1,class:"stat-badge completion"},UC={key:0,class:"mini-bars"},MC={class:"bar-label"},FC={class:"bar-track"},jC={class:"bar-count"},HC=["aria-label"],WC={key:0,class:"card-body"},VC={key:0,class:"classroom-desc"},KC={class:"invite-section"},GC={class:"invite-field"},zC=["value"],JC={class:"email-section"},YC={class:"email-header"},qC={class:"email-template"},XC={class:"email-body"},QC={key:1,class:"assignments-section"},ZC={class:"assignment-list"},eS={class:"assignment-name"},tS={key:0,class:"assignment-due"},sS={class:"assignment-boards"},nS={key:3,class:"loading-roster"},oS={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=ro(),a=oa(),r=E(null),i=E(!1),l=E(!1),u=E(!1),d=E([]),f=T(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ft(()=>s.expanded,async $=>{if($&&!r.value){i.value=!0;const[w,_]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);w!=null&&w.success&&(r.value=w.classroom),d.value=_||[],i.value=!1}});function p($){return $?new Date($).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function v($){return $.students_total?Math.round($.students_completed/$.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(f.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function y(){const $=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText($),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function N($){const w=await o.removeMember(s.classroom.id,$);w!=null&&w.success&&(r.value&&(r.value.members=r.value.members.filter(_=>_.student_id!==$)),n("member-removed"))}return($,w)=>(m(),h("div",{class:ue(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:w[0]||(w[0]=_=>$.$emit("toggle"))},[c("div",OC,[c("h3",RC,S(e.classroom.name),1),c("div",IC,[c("span",PC,"JOIN: "+S(e.classroom.join_code),1),c("span",DC,S(e.classroom.member_count)+" "+S(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(m(),h("span",LC,S(e.classroom.open_assignment_count)+" "+S(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):U("",!0),e.classroom.avg_completion_pct>0?(m(),h("span",BC,S(e.classroom.avg_completion_pct)+"% avg",1)):U("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(m(),h("div",UC,[(m(!0),h(Z,null,ie(e.classroom.assignments,_=>(m(),h("div",{key:_.id,class:"mini-bar"},[c("span",MC,S(_.exercise_name),1),c("div",FC,[c("div",{class:"bar-fill",style:it({width:v(_)})},null,4)]),c("span",jC,S(_.students_completed)+"/"+S(_.students_total),1)]))),128))])):U("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:ue(["chevron",{rotated:e.expanded}])},"",2)],8,HC)]),e.expanded?(m(),h("div",WC,[e.classroom.description?(m(),h("p",VC,S(e.classroom.description),1)):U("",!0),c("div",KC,[w[2]||(w[2]=c("h4",null,"Invite Link",-1)),w[3]||(w[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",GC,[c("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:w[1]||(w[1]=_=>_.target.select())},null,8,zC),c("button",{class:"copy-btn",onClick:g},S(l.value?"Copied!":"Copy"),1)])]),c("div",JC,[c("div",YC,[w[4]||(w[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:y},S(u.value?"Copied!":"Copy"),1)]),c("div",qC,[w[5]||(w[5]=c("p",null,[c("strong",null,"Subject:"),$t(" Join our Bridge Classroom for practice exercises")],-1)),c("div",XC," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+S(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(m(),h("div",QC,[w[6]||(w[6]=c("h4",null,"Assignments",-1)),c("div",ZC,[(m(!0),h(Z,null,ie(d.value,_=>(m(),h("div",{key:_.id,class:"assignment-row"},[c("span",eS,S(_.exercise_name),1),_.due_at?(m(),h("span",tS,"Due "+S(p(_.due_at)),1)):U("",!0),c("span",sS,S(_.total_boards)+" boards",1)]))),128))])])):U("",!0),r.value?(m(),Ue(EC,{key:2,members:r.value.members,onRemoveMember:N},null,8,["members"])):i.value?(m(),h("div",nS," Loading roster... ")):U("",!0)])):U("",!0)],2))}},aS=ye(oS,[["__scopeId","data-v-59d6a074"]]),rS={class:"modal-content"},lS={class:"step"},iS={class:"form-group"},cS={class:"form-group"},uS={class:"step-actions"},dS=["disabled"],fS={key:0,class:"error-text"},vS={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Fe(),o=ro(),a=E(""),r=E(""),i=E(!1),l=E(null);async function u(){if(!a.value.trim()||i.value)return;const d=n.currentUser.value;if(!d)return;i.value=!0,l.value=null;const f=await o.createClassroom(d.id,a.value.trim(),r.value.trim()||null);f.success?s("classroom-created",f.classroom):l.value=f.error||"Failed to create classroom",i.value=!1}return(d,f)=>(m(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Lt(p=>d.$emit("close"),["self"]))},[c("div",rS,[c("div",lS,[f[7]||(f[7]=c("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",iS,[f[4]||(f[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),Re(c("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Eo(u,["enter"])},null,544),[[vt,a.value]]),f[5]||(f[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",cS,[f[6]||(f[6]=c("label",{for:"classroom-desc"},[$t("Description "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[vt,r.value]])]),c("div",uS,[c("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=p=>d.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:u},S(i.value?"Creating...":"Create Classroom"),9,dS)]),l.value?(m(),h("p",fS,S(l.value),1)):U("",!0)])])]))}},pS=ye(vS,[["__scopeId","data-v-c26a1ae6"]]),Sn="https://api.bridge-classroom.com/api",$n="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ss=E([]),Aa=E(null),Mt=E(!1),Le=E(null);function mS(){async function e(r={}){Mt.value=!0,Le.value=null;try{const i=new URLSearchParams;r.created_by&&i.set("created_by",r.created_by),r.curriculum_path&&i.set("curriculum_path",r.curriculum_path),r.visibility&&i.set("visibility",r.visibility);const l=i.toString(),u=`${Sn}/exercises${l?"?"+l:""}`,d=await fetch(u,{headers:{"x-api-key":$n}});if(!d.ok){const p=await d.text();return Le.value=p||`Server error (${d.status})`,null}const f=await d.json();return f.success?Ss.value=f.exercises:Le.value=f.error||"Failed to fetch exercises",f}catch(i){return console.error("Failed to fetch exercises:",i),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function t(r){Mt.value=!0,Le.value=null;try{const i=await fetch(`${Sn}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":$n}});if(!i.ok){const u=await i.text();return Le.value=u||`Server error (${i.status})`,null}const l=await i.json();return l.success?Aa.value=l.exercise:Le.value=l.error||"Failed to fetch exercise",l}catch(i){return console.error("Failed to fetch exercise detail:",i),Le.value="Unable to connect to server",null}finally{Mt.value=!1}}async function s({name:r,description:i,created_by:l,curriculum_path:u,visibility:d,boards:f}){Mt.value=!0,Le.value=null;try{const p=await fetch(`${Sn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":$n},body:JSON.stringify({name:r,description:i||null,created_by:l||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!p.ok){const g=await p.text();return Le.value=g||`Server error (${p.status})`,{success:!1,error:Le.value}}const v=await p.json();return v.success?Ss.value=[v.exercise,...Ss.value]:Le.value=v.error||"Failed to create exercise",v}catch(p){return console.error("Failed to create exercise:",p),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function n(r,i){Mt.value=!0,Le.value=null;try{const l=await fetch(`${Sn}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":$n},body:JSON.stringify(i)});if(!l.ok){const d=await l.text();return Le.value=d||`Server error (${l.status})`,{success:!1,error:Le.value}}const u=await l.json();return u.success||(Le.value=u.error||"Failed to update exercise"),u}catch(l){return console.error("Failed to update exercise:",l),Le.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Mt.value=!1}}async function o(r){try{const i=await fetch(`${Sn}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":$n}});if(!i.ok){const u=await i.text();return Le.value=u||`Server error (${i.status})`,{success:!1,error:Le.value}}const l=await i.json();return l.success&&(Ss.value=Ss.value.filter(u=>u.id!==r)),l}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Ss.value=[],Aa.value=null,Mt.value=!1,Le.value=null}return{exercises:Ss,currentExercise:Aa,loading:Mt,error:Le,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const hS={class:"modal-content"},gS={class:"step"},yS={class:"form-group"},bS=["value"],_S={key:0,class:"form-hint"},wS={class:"form-group"},CS={class:"target-options"},SS={class:"radio-option"},$S={class:"radio-option"},kS={key:0,class:"form-group"},xS=["value"],AS={key:1,class:"form-group"},NS=["value"],TS={class:"form-group"},ES={class:"step-actions"},OS=["disabled"],RS={key:2,class:"error-text"},IS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Fe(),a=mS(),r=oa(),i=ro(),l=to(),u=E(""),d=E("classroom"),f=E(s.preselectedClassroomId||""),p=E(""),v=E(""),g=E(!1),y=E(null),N=T(()=>a.exercises.value),$=T(()=>a.loading.value),w=T(()=>i.teacherClassrooms.value),_=T(()=>l.students.value),R=T(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!p.value));async function q(){if(!R.value||g.value)return;const Q=o.currentUser.value;if(!Q)return;g.value=!0,y.value=null;const L=await r.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?p.value:null,assigned_by:Q.id,due_at:v.value||null});L.success?n("assignment-created",L.assignment):y.value=L.error||"Failed to create assignment",g.value=!1}return _t(async()=>{a.exercises.value.length||await a.fetchExercises();const Q=o.currentUser.value;Q&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(Q.id)}),(Q,L)=>(m(),h("div",{class:"modal-overlay",onClick:L[7]||(L[7]=Lt(Y=>Q.$emit("close"),["self"]))},[c("div",hS,[c("div",gS,[L[18]||(L[18]=c("h2",null,"Create Assignment",-1)),L[19]||(L[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",yS,[L[9]||(L[9]=c("label",{for:"exercise-select"},"Exercise",-1)),Re(c("select",{id:"exercise-select","onUpdate:modelValue":L[0]||(L[0]=Y=>u.value=Y),class:"form-select"},[L[8]||(L[8]=c("option",{value:""},"Select an exercise...",-1)),(m(!0),h(Z,null,ie(N.value,Y=>(m(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.board_count)+" boards)",9,bS))),128))],512),[[Dn,u.value]]),$.value?(m(),h("p",_S,"Loading exercises...")):U("",!0)]),c("div",wS,[L[12]||(L[12]=c("label",null,"Assign to",-1)),c("div",CS,[c("label",SS,[Re(c("input",{type:"radio","onUpdate:modelValue":L[1]||(L[1]=Y=>d.value=Y),value:"classroom"},null,512),[[_l,d.value]]),L[10]||(L[10]=c("span",null,"Classroom",-1))]),c("label",$S,[Re(c("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=Y=>d.value=Y),value:"student"},null,512),[[_l,d.value]]),L[11]||(L[11]=c("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(m(),h("div",kS,[L[14]||(L[14]=c("label",{for:"classroom-select"},"Classroom",-1)),Re(c("select",{id:"classroom-select","onUpdate:modelValue":L[3]||(L[3]=Y=>f.value=Y),class:"form-select"},[L[13]||(L[13]=c("option",{value:""},"Select a classroom...",-1)),(m(!0),h(Z,null,ie(w.value,Y=>(m(),h("option",{key:Y.id,value:Y.id},S(Y.name)+" ("+S(Y.member_count)+" students)",9,xS))),128))],512),[[Dn,f.value]])])):U("",!0),d.value==="student"?(m(),h("div",AS,[L[16]||(L[16]=c("label",{for:"student-select"},"Student",-1)),Re(c("select",{id:"student-select","onUpdate:modelValue":L[4]||(L[4]=Y=>p.value=Y),class:"form-select"},[L[15]||(L[15]=c("option",{value:""},"Select a student...",-1)),(m(!0),h(Z,null,ie(_.value,Y=>(m(),h("option",{key:Y.id,value:Y.id},S(Y.first_name)+" "+S(Y.last_name),9,NS))),128))],512),[[Dn,p.value]])])):U("",!0),c("div",TS,[L[17]||(L[17]=c("label",{for:"due-date"},[$t("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),Re(c("input",{id:"due-date","onUpdate:modelValue":L[5]||(L[5]=Y=>v.value=Y),type:"date",class:"form-input"},null,512),[[vt,v.value]])]),c("div",ES,[c("button",{class:"btn btn-secondary",onClick:L[6]||(L[6]=Y=>Q.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!R.value||g.value,onClick:q},S(g.value?"Creating...":"Create Assignment"),9,OS)]),y.value?(m(),h("p",RS,S(y.value),1)):U("",!0)])])]))}},PS=ye(IS,[["__scopeId","data-v-5e97b847"]]),DS={class:"needs-attention"},LS={class:"panel-header"},BS={key:0,class:"empty-state"},US={key:1,class:"attention-list"},MS={class:"item-icon"},FS={class:"item-text"},jS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(m(),h("div",DS,[c("div",LS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(m(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):U("",!0)]),e.items.length?(m(),h("div",US,[(m(!0),h(Z,null,ie(e.items,(r,i)=>(m(),h("div",{key:i,class:ue(["attention-item",r.type])},[c("span",MS,S(t(r.type)),1),c("span",FS,S(s(r)),1)],2))),128))])):(m(),h("div",BS," All caught up! No items need attention. "))]))}},HS=ye(jS,[["__scopeId","data-v-65e8ba1f"]]),WS={class:"recent-activity"},VS={class:"panel-header"},KS={key:0,class:"empty-state"},GS={key:1,class:"activity-list"},zS={class:"event-content"},JS={class:"event-text"},YS={class:"event-time"},qS={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(m(),h("div",WS,[c("div",VS,[a[1]||(a[1]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(m(),h("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):U("",!0)]),e.events.length?(m(),h("div",GS,[(m(!0),h(Z,null,ie(e.events,(r,i)=>(m(),h("div",{key:i,class:"activity-item"},[c("span",{class:ue(["event-icon",r.type])},S(t(r.type)),3),c("div",zS,[c("span",JS,S(s(r)),1),c("span",YS,S(n(r.timestamp)),1)])]))),128))])):(m(),h("div",KS," No recent activity. "))]))}},XS=ye(qS,[["__scopeId","data-v-39e672f5"]]),QS={class:"teacher-lobby"},ZS={class:"welcome-section"},e$={class:"welcome-title"},t$={class:"welcome-subtitle"},s$={class:"quick-actions"},n$={key:0,class:"loading-state"},o$={key:1,class:"dashboard-grid"},a$={class:"left-column"},r$={key:0,class:"classrooms-section"},l$={class:"classroom-cards"},i$={key:1,class:"empty-state"},c$={class:"right-column"},u$={class:"collections-section"},d$={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=Fe(),s=yC(),n=E(!1),o=E(!1),a=E(null),r=T(()=>{const v=t.currentUser.value;return v?v.firstName:""}),i=T(()=>{const v=s.summaryStats.value;if(!v||v.classroomCount===0)return"Get started by creating your first classroom.";const g=[];return g.push(`${v.classroomCount} active ${v.classroomCount===1?"classroom":"classrooms"}`),v.openAssignmentCount>0&&g.push(`${v.openAssignmentCount} open ${v.openAssignmentCount===1?"assignment":"assignments"}`),g.join(", ")+"."});function l(v){a.value=a.value===v?null:v}function u(v){n.value=!1,a.value=v.id,p()}function d(){o.value=!1,p()}function f(v){const g=t.currentUser.value;g&&s.clearPanel(g.id,v)}function p(){const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id,!0)}return _t(()=>{const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id)}),(v,g)=>(m(),h("div",QS,[c("div",ZS,[c("h2",e$,"Welcome back, "+S(r.value),1),c("p",t$,S(i.value),1)]),c("div",s$,[c("button",{class:"action-btn create",onClick:g[0]||(g[0]=y=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:g[1]||(g[1]=y=>o.value=!0)}," + New Assignment "),e.isAdmin?(m(),h("button",{key:0,class:"action-btn admin",onClick:g[2]||(g[2]=y=>v.$emit("show-admin"))}," Admin Panel ")):U("",!0)]),P(s).lobbyLoading.value&&!P(s).lobbyClassrooms.value.length?(m(),h("div",n$,[...g[9]||(g[9]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(m(),h("div",o$,[c("div",a$,[P(s).lobbyClassrooms.value.length?(m(),h("div",r$,[g[10]||(g[10]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",l$,[(m(!0),h(Z,null,ie(P(s).lobbyClassrooms.value,y=>(m(),Ue(aS,{key:y.id,classroom:y,expanded:a.value===y.id,onToggle:N=>l(y.id),onMemberRemoved:p},null,8,["classroom","expanded","onToggle"]))),128))])])):(m(),h("div",i$,[...g[11]||(g[11]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",c$,[he(HS,{items:P(s).needsAttention.value,onClear:g[3]||(g[3]=y=>f("attention"))},null,8,["items"]),he(XS,{events:P(s).recentActivity.value,onClear:g[4]||(g[4]=y=>f("activity"))},null,8,["events"])])])),c("div",u$,[g[12]||(g[12]=c("h3",{class:"section-title"},"Lesson Collections",-1)),he(Fr,{onSelectCollection:g[5]||(g[5]=y=>v.$emit("select-collection",y)),onLoadFile:g[6]||(g[6]=y=>v.$emit("load-file",y))})]),n.value?(m(),Ue(pS,{key:2,onClose:g[7]||(g[7]=y=>n.value=!1),onClassroomCreated:u})):U("",!0),o.value?(m(),Ue(PS,{key:3,onClose:g[8]||(g[8]=y=>o.value=!1),onAssignmentCreated:d})):U("",!0)]))}},f$=ye(d$,[["__scopeId","data-v-340b5670"]]),yu="https://api.bridge-classroom.com/api",bu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_u=E(null),wu=E([]),Cu=E(null),Su=E(null),nr=E(!1),or=E(null),Na=E(null),v$=60*1e3;async function $u(e=!1){if(!e&&Na.value&&Date.now()-new Date(Na.value).getTime()<v$)return{success:!0,cached:!0};nr.value=!0,or.value=null;try{const t=await fetch(`${yu}/admin/stats`,{headers:{"x-api-key":bu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return _u.value=s.stats,wu.value=s.popular_lessons||[],Cu.value=s.database,Na.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),or.value=t.message,{success:!1,error:t.message}}finally{nr.value=!1}}async function ku(){try{const e=await fetch(`${yu}/admin/health`,{headers:{"x-api-key":bu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Su.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function p$(){await Promise.all([$u(!0),ku()])}function m$(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function h$(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Wr(){return{stats:_u,popularLessons:wu,database:Cu,health:Su,loading:nr,error:or,loadStats:$u,loadHealth:ku,refreshAll:p$,formatBytes:m$,formatUptime:h$}}const g$={class:"stats-row"},y$={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},b$={class:"stat-number"},_$={class:"stat-card",style:{"border-top-color":"#1565c0"}},w$={class:"stat-number"},C$={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},S$={class:"stat-number"},$$={class:"stat-card",style:{"border-top-color":"#e65100"}},k$={class:"stat-number"},x$={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,i;return m(),h("div",g$,[c("div",y$,[c("div",b$,S(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",_$,[c("div",w$,S(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",C$,[c("div",S$,S(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",$$,[c("div",k$,S(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},A$=ye(x$,[["__scopeId","data-v-a14a2199"]]),N$={class:"popular-lessons"},T$={key:0,class:"empty-state"},E$={key:1,class:"table-wrap"},O$={class:"lessons-table"},R$={class:"lesson-name"},I$={class:"num-col"},P$={class:"num-col"},D$={class:"num-col"},L$={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(m(),h("div",N$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(m(),h("div",E$,[c("table",O$,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(m(!0),h(Z,null,ie(e.lessons.slice(0,15),a=>(m(),h("tr",{key:a.deal_subfolder},[c("td",R$,S(t(a.deal_subfolder)),1),c("td",I$,S(a.play_count.toLocaleString()),1),c("td",P$,S(a.unique_users),1),c("td",D$,[c("span",{class:ue(["accuracy-badge",s(a.accuracy_pct)])},S(a.accuracy_pct)+"% ",3)])]))),128))])])])):(m(),h("div",T$,"No lesson data yet."))]))}},B$=ye(L$,[["__scopeId","data-v-079bd4f8"]]),U$={class:"database-panel"},M$={key:0,class:"empty-state"},F$={class:"db-size"},j$={class:"tables-table"},H$={class:"table-name"},W$={class:"num-col"},V$={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Wr();return(s,n)=>(m(),h("div",U$,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(m(),h(Z,{key:1},[c("div",F$,[n[0]||(n[0]=$t(" SQLite file: ",-1)),c("strong",null,S(P(t)(e.database.file_size_bytes)),1)]),c("table",j$,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(m(!0),h(Z,null,ie(e.database.tables,o=>(m(),h("tr",{key:o.name},[c("td",H$,S(o.name),1),c("td",W$,S(o.row_count.toLocaleString()),1)]))),128))])])],64)):(m(),h("div",M$,"Loading..."))]))}},K$=ye(V$,[["__scopeId","data-v-d5945aff"]]),G$={class:"system-health"},z$={class:"health-header"},J$=["disabled"],Y$={key:0,class:"empty-state"},q$={key:1,class:"health-rows"},X$={class:"health-row"},Q$={class:"health-value"},Z$={class:"health-row"},ek={class:"health-value"},tk={class:"health-row"},sk={class:"health-value"},nk={class:"health-row"},ok={class:"health-value"},ak={class:"health-row"},rk={class:"health-value"},lk={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Wr();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(m(),h("div",G$,[c("div",z$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},S(e.refreshing?"Refreshing...":"Refresh"),9,J$)]),e.health?(m(),h("div",q$,[c("div",X$,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",Q$,"Up "+S(P(t)(e.health.uptime_seconds)),1)]),c("div",Z$,[c("span",{class:ue(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",ek,S(e.health.database_writable?"Writable":"Error"),1)]),c("div",tk,[c("span",{class:ue(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",sk,S(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",nk,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",ok,S(e.health.disk_available_gb)+" GB / "+S(e.health.disk_total_gb)+" GB available",1)]),c("div",ak,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",rk,"v"+S(e.health.api_version),1)])])):(m(),h("div",Y$,"Loading..."))]))}},ik=ye(lk,[["__scopeId","data-v-0d4e96d5"]]),ck={class:"admin-lobby"},uk={class:"admin-header"},dk={key:0,class:"admin-subtitle"},fk={key:0,class:"loading-state"},vk={key:1,class:"error-state"},pk={class:"announcement-section"},mk={class:"announcement-info"},hk=["innerHTML"],gk={key:0,class:"announcement-expires"},yk={key:1,class:"announcement-expires"},bk={class:"announcement-actions"},_k=["disabled"],wk={key:1,class:"announcement-form"},Ck={class:"form-row"},Sk=["disabled"],$k={class:"content-grid"},kk={class:"name-correction-section"},xk={class:"search-row"},Ak=["disabled"],Nk={key:0,class:"search-results"},Tk=["onClick"],Ek={class:"result-name"},Ok={class:"result-email"},Rk={key:0,class:"corrected-badge"},Ik={key:1,class:"no-results"},Pk={key:2,class:"edit-form"},Dk={class:"edit-row"},Lk={class:"edit-field"},Bk={class:"edit-field"},Uk=["disabled"],Mk={key:0,class:"save-feedback success"},Fk={key:1,class:"save-feedback error"},jk={__name:"AdminLobby",emits:["back"],setup(e){const t=Wr(),s=Mr(),n=E(!1),o=E(""),a=E("info"),r=E(""),i=E(!1),l=E(!1),u=E(!1);function d(){const D=s.announcement.value;if(D){if(o.value=D.message,a.value=D.type,D.expires_at){const V=new Date(D.expires_at);r.value=new Date(V.getTime()-V.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";u.value=!0}}function f(){u.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const D=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,D),o.value="",a.value="info",r.value="",u.value=!1}catch(D){console.error("Failed to publish announcement:",D)}finally{i.value=!1}}}async function v(){l.value=!0;try{await s.clearAnnouncement()}catch(D){console.error("Failed to clear announcement:",D)}finally{l.value=!1}}function g(D){return D?new Date(D).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function N(D){return D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(G,K)=>{const ae=y[K.toLowerCase()];return ae?`<span class="ann-circle" style="background:${ae.bg};color:${ae.fg}"></span>`:G})}const $="https://api.bridge-classroom.com/api",w="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_=E(""),R=E([]),q=E(!1),Q=E(!1),L=E(null),Y=E(""),J=E(""),de=E(!1),ve=E(!1),ce=E("");async function _e(){if(_.value.trim()){Q.value=!0,q.value=!1,R.value=[],L.value=null,ve.value=!1,ce.value="";try{const D=await fetch(`${$}/admin/users/search?q=${encodeURIComponent(_.value.trim())}`,{headers:{"x-api-key":w}});if(!D.ok)throw new Error(`Search failed: ${D.status}`);const V=await D.json();R.value=V.users||[]}catch(D){console.error("User search failed:",D)}finally{Q.value=!1,q.value=!0}}}function we(D){L.value=D,Y.value=D.first_name,J.value=D.last_name,ve.value=!1,ce.value=""}async function ne(){if(!(!L.value||!Y.value.trim()||!J.value.trim())){de.value=!0,ve.value=!1,ce.value="";try{const D=await fetch(`${$}/admin/users/${encodeURIComponent(L.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":w},body:JSON.stringify({first_name:Y.value.trim(),last_name:J.value.trim()})});if(!D.ok)throw new Error(`Save failed: ${D.status}`);const V=await D.json();V.success&&(ve.value=!0,L.value.first_name=V.user.first_name,L.value.last_name=V.user.last_name,L.value.name_corrected_at=V.user.name_corrected_at)}catch(D){ce.value=D.message}finally{de.value=!1}}}async function re(){await Promise.all([t.loadStats(),t.loadHealth()])}async function X(){n.value=!0,await t.refreshAll(),n.value=!1}return _t(re),(D,V)=>(m(),h("div",ck,[c("div",uk,[c("button",{class:"back-btn",onClick:V[0]||(V[0]=G=>D.$emit("back"))}," Back to Dashboard"),V[7]||(V[7]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),P(t).stats.value?(m(),h("p",dk,S(P(t).stats.value.total_observations.toLocaleString())+" total observations across "+S(P(t).stats.value.total_users)+" users ",1)):U("",!0)]),P(t).loading.value&&!P(t).stats.value?(m(),h("div",fk,[...V[8]||(V[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):P(t).error.value?(m(),h("div",vk,[c("p",null,S(P(t).error.value),1),c("button",{class:"retry-btn",onClick:re},"Retry")])):P(t).stats.value?(m(),h(Z,{key:2},[c("div",pk,[V[10]||(V[10]=c("h3",{class:"section-title"},"Site Announcement",-1)),P(s).announcement.value&&!u.value?(m(),h("div",{key:0,class:ue(["current-announcement",P(s).announcement.value.type])},[c("div",mk,[c("span",{class:ue(["announcement-type-badge",P(s).announcement.value.type])},S(P(s).announcement.value.type),3),c("span",{class:"announcement-message",innerHTML:N(P(s).announcement.value.message)},null,8,hk),P(s).announcement.value.expires_at?(m(),h("span",gk," Expires: "+S(g(P(s).announcement.value.expires_at)),1)):(m(),h("span",yk,"No expiration"))]),c("div",bk,[c("button",{class:"edit-btn",onClick:d},"Edit"),c("button",{class:"clear-btn",onClick:v,disabled:l.value},S(l.value?"Clearing...":"Clear"),9,_k)])],2)):u.value||!P(s).announcement.value?(m(),h("div",wk,[Re(c("input",{"onUpdate:modelValue":V[1]||(V[1]=G=>o.value=G),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Eo(p,["enter"])},null,544),[[vt,o.value]]),c("div",Ck,[Re(c("select",{"onUpdate:modelValue":V[2]||(V[2]=G=>a.value=G),class:"type-select"},[...V[9]||(V[9]=[c("option",{value:"info"},"Info",-1),c("option",{value:"warning"},"Warning",-1),c("option",{value:"urgent"},"Urgent",-1)])],512),[[Dn,a.value]]),Re(c("input",{"onUpdate:modelValue":V[3]||(V[3]=G=>r.value=G),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[vt,r.value]]),u.value?(m(),h("button",{key:0,class:"cancel-btn",onClick:f},"Cancel")):U("",!0),c("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},S(i.value?"Publishing...":u.value?"Update":"Publish"),9,Sk)])])):U("",!0)]),he(A$,{stats:P(t).stats.value},null,8,["stats"]),c("div",$k,[he(B$,{lessons:P(t).popularLessons.value},null,8,["lessons"]),he(K$,{database:P(t).database.value},null,8,["database"])]),he(ik,{health:P(t).health.value,refreshing:n.value,onRefresh:X},null,8,["health","refreshing"]),c("div",kk,[V[13]||(V[13]=c("h3",{class:"section-title"},"Correct User Name",-1)),c("div",xk,[Re(c("input",{"onUpdate:modelValue":V[4]||(V[4]=G=>_.value=G),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Eo(_e,["enter"])},null,544),[[vt,_.value]]),c("button",{class:"search-btn",onClick:_e,disabled:Q.value||!_.value.trim()},S(Q.value?"Searching...":"Search"),9,Ak)]),R.value.length?(m(),h("div",Nk,[(m(!0),h(Z,null,ie(R.value,G=>(m(),h("div",{key:G.id,class:ue(["search-result-item",{selected:L.value&&L.value.id===G.id}]),onClick:K=>we(G)},[c("span",Ek,S(G.first_name)+" "+S(G.last_name),1),c("span",Ok,S(G.email),1),G.name_corrected_at?(m(),h("span",Rk,"corrected")):U("",!0)],10,Tk))),128))])):U("",!0),q.value&&!R.value.length?(m(),h("div",Ik,' No users found for "'+S(_.value)+'" ',1)):U("",!0),L.value?(m(),h("div",Pk,[c("div",Dk,[c("div",Lk,[V[11]||(V[11]=c("label",null,"First Name",-1)),Re(c("input",{"onUpdate:modelValue":V[5]||(V[5]=G=>Y.value=G),type:"text",class:"edit-input"},null,512),[[vt,Y.value]])]),c("div",Bk,[V[12]||(V[12]=c("label",null,"Last Name",-1)),Re(c("input",{"onUpdate:modelValue":V[6]||(V[6]=G=>J.value=G),type:"text",class:"edit-input"},null,512),[[vt,J.value]])]),c("button",{class:"save-btn",onClick:ne,disabled:de.value||!Y.value.trim()||!J.value.trim()},S(de.value?"Saving...":"Save"),9,Uk)]),ve.value?(m(),h("p",Mk,"Name corrected successfully.")):U("",!0),ce.value?(m(),h("p",Fk,S(ce.value),1)):U("",!0)])):U("",!0)])],64)):U("",!0)]))}},Hk=ye(jk,[["__scopeId","data-v-5a6964cf"]]),Wk={class:"lobby-view"},Vk={__name:"LobbyView",emits:["select-collection","show-become-teacher","load-file"],setup(e){const t=Fe(),s=oa(),n=E(!1),o=T(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=T(()=>s.studentAssignments.value.length>0),r=T(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return _t(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,l)=>(m(),h("div",Wk,[n.value?(m(),Ue(Hk,{key:0,onBack:l[0]||(l[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(m(),Ue(f$,{key:1,"is-admin":o.value==="admin",onSelectCollection:l[1]||(l[1]=u=>i.$emit("select-collection",u)),onShowAdmin:l[2]||(l[2]=u=>n.value=!0),onLoadFile:l[3]||(l[3]=u=>i.$emit("load-file",u))},null,8,["is-admin"])):a.value||r.value?(m(),Ue(pC,{key:2,onSelectCollection:l[4]||(l[4]=u=>i.$emit("select-collection",u)),onLoadFile:l[5]||(l[5]=u=>i.$emit("load-file",u))})):(m(),Ue(Xw,{key:3,onSelectCollection:l[6]||(l[6]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:l[7]||(l[7]=u=>i.$emit("show-become-teacher")),onLoadFile:l[8]||(l[8]=u=>i.$emit("load-file",u))}))]))}},Kk=ye(Vk,[["__scopeId","data-v-61fd42da"]]),Gk={class:"modal-content"},zk={key:0,class:"step step-overview"},Jk={class:"step-actions"},Yk={key:1,class:"step step-agreement"},qk={class:"agreement-checkbox"},Xk={class:"step-actions"},Qk=["disabled"],Zk={key:0,class:"error-text"},ex={key:2,class:"step step-confirmation"},tx={class:"step-actions"},sx={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Fe(),o=E(1),a=E(!1),r=E(!1),i=E(null);async function l(){const u=n.currentUser.value;if(u){r.value=!0,i.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){i.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:v}=await Rp();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(d){console.error("Teacher activation failed:",d),i.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(u,d)=>(m(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Lt(f=>u.$emit("close"),["self"]))},[c("div",Gk,[o.value===1?(m(),h("div",zk,[d[6]||(d[6]=Ao('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",Jk,[c("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(m(),h("div",Yk,[d[8]||(d[8]=Ao('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",qk,[Re(c("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>a.value=f)},null,512),[[Sr,a.value]]),d[7]||(d[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",Xk,[c("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:l},S(r.value?"Activating...":"Activate Teacher Account"),9,Qk)]),i.value?(m(),h("p",Zk,S(i.value),1)):U("",!0)])):o.value===3?(m(),h("div",ex,[d[9]||(d[9]=c("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=c("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",tx,[c("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):U("",!0)])]))}},nx=ye(sx,[["__scopeId","data-v-56e5717d"]]),ox={},ax={class:"page-footer"};function rx(e,t){return m(),h("footer",ax,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const lx=ye(ox,[["render",rx],["__scopeId","data-v-1b649814"]]),ix={key:1,class:"app"},cx={class:"app-header"},ux={class:"header-right"},dx=["title"],fx={key:3,class:"stats"},vx={class:"correct"},px={class:"wrong"},mx={class:"user-avatar-group"},hx=["title"],gx=["title"],yx={class:"app-main"},bx={key:3,class:"collection-view"},_x={key:4,class:"practice-layout"},wx={class:"practice-left"},Cx={class:"practice-right"},Sx={key:1,class:"commentary-panel"},$x=["innerHTML"],kx=["innerHTML"],xx=["innerHTML"],Ax=["innerHTML"],Nx={class:"commentary-controls"},Tx={key:0,class:"bidding-box-wrapper"},Ex={key:1,class:"card-choice-prompt"},Ox=["innerHTML"],Rx={key:3,class:"completion-controls"},Ix={key:0,class:"registration-toast"},Px={__name:"MainLayout",setup(e){const t=fp(),s=eo(),n=Fe(),o=ta(),a=cu(),r=to(),i=Mr(),l=wm(),u=E(!1),d=E(!1),f=E(!1),p=E(!1),v=E(null),g=E(""),y=E(null),N=E(null),$=E(null),w=E(!1),_=E(null),R=E(null),q=E(!1),Q=E(!1),L=E(null);function Y(b,x=".current"){if(!b)return;const O=b.querySelector(x);O&&(b.scrollTop=O.offsetTop-b.offsetTop)}ft(()=>l.currentStepIndex.value,()=>{jn(()=>{Y(y.value,".narrative-text.current")})}),ft(()=>l.isComplete.value,b=>{b&&jn(()=>{Y(y.value,".narrative-text.current")})});const J=T(()=>n.isAuthenticated.value),de=T(()=>{const b=n.currentUser.value;return b?`${b.firstName} ${b.lastName}`:""}),ve=T(()=>{const b=n.currentUser.value;return b?`${b.firstName.charAt(0)}${b.lastName.charAt(0)}`.toUpperCase():"?"}),ce=T(()=>{const b=n.currentUser.value;return(b==null?void 0:b.role)||"student"}),_e=T(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let we=null;_t(()=>{i.loadAnnouncement(),we=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),br(()=>{we&&clearInterval(we)}),_t(async()=>{s.initializeFromUrl(),n.initialize();const b=new URLSearchParams(window.location.search);b.get("recover")&&b.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const x=s.getCollectionFromUrl(),O=s.getLessonFromUrl();x&&(N.value=x,O&&await A(x,O)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),fs().initialize(),await r.checkTeacherStatus())});async function ne(b){console.log("User ready:",b.firstName,b.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),Q.value=!0,setTimeout(()=>{Q.value=!1},4e3)),await a.initialize(),fs().initialize(),await r.checkTeacherStatus();const O=sessionStorage.getItem("pendingJoinCode");if(O){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:O}});return}}function re(){fs().reset(),Rr().clearCache(),hs().reset(),r.reset(),n.currentUserId.value=null,u.value=!1,p.value=!1,v.value=null}async function X(){w.value=!1,await r.checkTeacherStatus()}const D=E([]),V=E(0),G=T(()=>D.value[V.value]||null),K=T(()=>{var B;const b=z(N.value),x=b!=null&&b.name?`${b.name} - `:"";if((B=$.value)!=null&&B.name)return x+$.value.name;if(!G.value)return"";const O=G.value.subfolder||G.value.category||"";return O?x+O:""});ft(V,()=>{G.value&&(l.loadDeal(G.value),s.setDealInUrl(G.value.boardNumber))},{flush:"sync"}),ft(()=>l.observationStore.pendingCount.value,(b,x)=>{b>x&&a.triggerSync()}),ft(()=>l.isComplete.value,b=>{b&&(_.value=null)});async function ae(b){const x=b.target.files[0];if(x)try{const O=await x.text(),B=ya(O);if(B.length>0){const W=x.name.replace(/\.pbn$/i,""),ee=B.map(fe=>({...fe,subfolder:fe.subfolder||W,category:fe.category||W}));D.value=ee,V.value=0,l.loadDeal(ee[0]),l.resetStats()}else alert("No deals found in the PBN file")}catch(O){console.error("Error loading PBN file:",O),alert("Error loading PBN file: "+O.message)}}function Pe({subfolder:b,name:x,category:O,content:B}){const W=ya(B);if(W.length>0){const ee=W.map(pe=>({...pe,subfolder:pe.subfolder||b,category:pe.category||O}));D.value=ee,V.value=0,l.loadDeal(ee[0]),l.resetStats(),dn().saveLessonBoardNumbers(b,ee.map(pe=>pe.boardNumber)),$.value={id:b,name:x,category:O},s.setLessonInUrl(b),q.value=!1,H()}else alert("No deals found in the lesson file")}const We=T(()=>l.boardState.correctCount),pt=T(()=>l.boardState.wrongCount);function et(b){!l.makeBid(b)&&G.value&&(_.value=G.value.boardNumber)}function j({seat:b,suit:x,rank:O}){!l.makeCardChoice(x,O)&&G.value&&(_.value=G.value.boardNumber)}function oe(){l.clearCardFeedback(),l.goBack()}function se(){V.value<D.value.length-1&&(_.value=null,V.value++,l.loadDeal(D.value[V.value]))}function le(b){b>=0&&b<D.value.length&&(_.value=null,V.value=b,l.loadDeal(D.value[b]))}async function be({subfolder:b,dealNumber:x}){var O;if(((O=$.value)==null?void 0:O.id)===b&&D.value.length>0){const B=D.value.findIndex(W=>W.boardNumber===x);if(B>=0){le(B);return}}for(const B of s.COLLECTIONS)try{const W=b.includes("/")?b.split("/").pop():b,ee=`${B.baseUrl}/${W}.pbn`,fe=await fetch(ee);if(!fe.ok)continue;const pe=await fe.text();N.value=B.id,s.setCollectionInUrl(B.id),Pe({subfolder:b,name:b,category:"",content:pe});const Ie=D.value.findIndex(Ee=>Ee.boardNumber===x);Ie>=0&&le(Ie);return}catch{}}function C(b){f.value=!1,p.value=!1,v.value=null,be(b)}function k(b,x){p.value=!1,v.value=null,be({subfolder:b,dealNumber:x||1})}function I(){$.value=null,s.setLessonInUrl(null),D.value=[],V.value=0,l.resetStats(),q.value=!1,R.value=null,p.value=!1,v.value=null}function M(){N.value=null,$.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),D.value=[],V.value=0,l.resetStats(),q.value=!1,R.value=null,p.value=!1,v.value=null}async function H(){if(R.value=null,!N.value||!$.value)return;const b=z(N.value);if(!b)return;const x=$.value.id,O=x.includes("/")?x.split("/").pop():x,B=`${b.baseUrl}/${O}_Intro.pdf`;try{(await fetch(B,{method:"HEAD"})).ok&&(R.value=B)}catch{}}function F(b){window.innerWidth<600?window.open(b,"_blank"):(L.value=b,q.value=!0)}function te(b){N.value=b,s.setCollectionInUrl(b)}function z(b){return s.COLLECTIONS.find(x=>x.id===b)}async function A(b,x){var B;const O=z(b);if(!O)return console.error("Collection not found:",b),!1;try{const W=await fetch(O.tocUrl);if(!W.ok)throw new Error(`Failed to load TOC: ${W.statusText}`);const ee=await W.json();let fe=null,pe=null;for(const wt of ee.categories||[]){const De=(B=wt.lessons)==null?void 0:B.find(Ge=>Ge.id===x);if(De){fe=De,pe=wt;break}}if(!fe)return console.error("Lesson not found in TOC:",x),!1;const Ie=x.includes("/")?x.split("/").pop():x,Ee=`${O.baseUrl}/${Ie}.pbn`,Ye=await fetch(Ee);if(!Ye.ok)throw new Error(`Failed to load lesson: ${Ye.statusText}`);const at=await Ye.text(),Et=ya(at);if(Et.length>0){const wt=Et.map(Ot=>({...Ot,subfolder:Ot.subfolder||x,category:Ot.category||pe.name}));D.value=wt;const De=s.getDealFromUrl(),Ge=De?wt.findIndex(Ot=>Ot.boardNumber===De):-1;return V.value=Ge>=0?Ge:0,l.loadDeal(wt[V.value]),l.resetStats(),$.value={id:x,name:fe.name,category:pe.name},H(),!0}return!1}catch(W){return console.error("Error loading lesson from URL:",W),!1}}return(b,x)=>{var O,B,W,ee,fe,pe,Ie,Ee,Ye,at,Et,wt,De,Ge,Ot,vn;return J.value?(m(),h("div",ix,[c("header",cx,[c("h1",null,S(D.value.length?K.value:_e.value),1),c("div",ux,[he(Gb),c("button",{class:"progress-btn",onClick:x[0]||(x[0]=Ae=>d.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:x[1]||(x[1]=Ae=>f.value=!0),title:"View Accomplishments"}," Accomplishments "),P(r).isTeacher.value?(m(),h("button",{key:0,class:"teacher-btn",onClick:x[2]||(x[2]=Ae=>{p.value=!0,v.value=null,g.value=""}),title:"View Students"}," Students ")):U("",!0),D.value.length&&N.value?(m(),h("button",{key:1,class:"lessons-btn",onClick:I,title:"Back to "+((O=z(N.value))==null?void 0:O.name)},S((B=z(N.value))==null?void 0:B.name),9,dx)):U("",!0),N.value?(m(),h("button",{key:2,class:"lobby-btn",onClick:M,title:"Return to lobby"}," Lobby ")):U("",!0),We.value+pt.value>0?(m(),h("div",fx,[c("span",vx,S(We.value),1),c("span",px,S(pt.value),1)])):U("",!0),c("div",mx,[ce.value!=="student"?(m(),h("button",{key:0,class:ue(["role-badge","role-"+ce.value]),onClick:M,title:"Return to "+ce.value+" lobby"},S(ce.value),11,hx)):U("",!0),c("button",{class:"user-btn",onClick:x[3]||(x[3]=Ae=>u.value=!0),title:de.value},S(ve.value),9,gx)])])]),c("main",yx,[he(Db),he(Rb),p.value&&!v.value?(m(),Ue(T0,{key:0,onClose:x[4]||(x[4]=Ae=>p.value=!1),onSelectStudent:x[5]||(x[5]=(Ae,pn)=>{v.value=Ae,g.value=pn})})):p.value&&v.value?(m(),Ue(ow,{key:1,studentId:v.value,studentName:g.value,onBack:x[6]||(x[6]=Ae=>v.value=null),onNavigateToLesson:k},null,8,["studentId","studentName"])):!D.value.length&&!N.value?(m(),Ue(Kk,{key:2,onSelectCollection:te,onShowBecomeTeacher:x[7]||(x[7]=Ae=>w.value=!0),onLoadFile:ae})):!D.value.length&&N.value?(m(),h("div",bx,[c("h2",null,S(((W=z(N.value))==null?void 0:W.name)||N.value),1),x[17]||(x[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),he(Ow,{visible:!0,inline:!0,collection:z(N.value),onLoad:Pe},null,8,["collection"])])):(m(),h("div",_x,[c("div",wx,[D.value.length>1?(m(),Ue(pu,{key:0,boardNumbers:D.value.map(Ae=>Ae.boardNumber),lessonSubfolder:((ee=G.value)==null?void 0:ee.subfolder)||((fe=G.value)==null?void 0:fe.category)||"",currentIndex:V.value,forceRedBoard:_.value,introUrl:R.value,onGoto:le,onOpenIntro:F},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):U("",!0),he(Rg,{boardNumber:(pe=G.value)==null?void 0:pe.boardNumber,dealer:(Ie=G.value)==null?void 0:Ie.dealer,vulnerable:(Ee=G.value)==null?void 0:Ee.vulnerable,contract:(Ye=G.value)==null?void 0:Ye.contract,declarer:(at=G.value)==null?void 0:at.declarer,showContract:P(l).auctionState.auctionComplete||P(l).showOpeningLead.value||P(l).hasSteps.value&&!P(l).hasBidSteps.value,openingLead:P(l).showOpeningLead.value?(Et=G.value)==null?void 0:Et.openingLead:"",totalDeals:D.value.length,currentIndex:V.value,dealBoardNumbers:D.value.map(Ae=>Ae.boardNumber),onGoto:le},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),he(qh,{hands:P(l).hands.value,hiddenSeats:P(l).hiddenSeats.value,showHcp:P(l).showHcp.value,compact:!0,clickableSeat:P(l).hasCardChoice.value?P(l).studentSeat.value:null,playedCards:P(l).showcardsPlayedCards.value,onCardClick:j},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",Cx,[P(l).showAuctionTable.value?(m(),Ue(pg,{key:0,bids:P(l).hasBidSteps.value?P(l).auctionState.displayedBids:((wt=G.value)==null?void 0:wt.auction)||[],dealer:((De=G.value)==null?void 0:De.dealer)||"N",currentBidIndex:P(l).hasBidSteps.value?P(l).auctionState.currentBidIndex:-1,wrongBidIndex:P(l).auctionState.wrongBidIndex,correctBidIndex:P(l).auctionState.correctBidIndex,showTurnIndicator:P(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):U("",!0),he(Ql,{visible:!!P(l).auctionState.wrongBid,type:"wrong",wrongBid:P(l).auctionState.wrongBid,correctBid:P(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),he(Ql,{visible:!!P(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:P(l).cardChoiceState.wrongCard,correctCardCode:P(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),P(l).hasSteps.value?(m(),h("div",Sx,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:y},[(m(!0),h(Z,null,ie(P(l).steps.value.slice(0,P(l).currentStepIndex.value),(Ae,pn)=>(m(),h(Z,{key:"prev-"+pn},[pn>=P(l).commentaryStartIndex.value?(m(),h(Z,{key:0},[c("span",{class:"narrative-text previous",innerHTML:P(Fs)(P(_n)(Ae.text))},null,8,$x),Ae.type==="bid"&&Ae.explanationText?(m(),h("span",{key:0,class:ue(["narrative-text",pn===P(l).currentStepIndex.value-1&&P(l).isBidStep.value&&!P(l).bidAnswered.value?"current":"previous"]),innerHTML:P(Fs)(P(_n)(Ae.explanationText))},null,10,kx)):U("",!0)],64)):U("",!0)],64))),128)),P(l).currentStep.value?(m(),h("span",{key:0,class:"narrative-text current",innerHTML:P(Fs)(P(_n)(P(l).currentStep.value.text))},null,8,xx)):U("",!0),P(l).bidAnswered.value&&((Ge=P(l).currentStep.value)!=null&&Ge.explanationText)?(m(),h("span",{key:1,class:"narrative-text current",innerHTML:P(Fs)(P(_n)(P(l).currentStep.value.explanationText))},null,8,Ax)):U("",!0)],512),c("div",Nx,[P(l).hasBidPrompt.value?(m(),h("div",Tx,[he(ig,{lastBid:P(l).lastContractBid.value,canDouble:P(l).canDouble.value,canRedouble:P(l).canRedouble.value,onBid:et},null,8,["lastBid","canDouble","canRedouble"])])):P(l).hasCardChoice.value?(m(),h("div",Ex," Click on the card you would choose ")):U("",!0),P(l).canGoBack.value?(m(),h("button",{key:2,class:"instruction-btn secondary",onClick:oe},"  Back ")):U("",!0),!P(l).isComplete.value&&(P(l).bidAnswered.value||!P(l).hasBidPrompt.value&&!P(l).hasCardChoice.value&&P(l).currentStep.value&&P(l).currentStep.value.type!=="end")?(m(),h("button",{key:3,class:"instruction-btn primary",onClick:x[8]||(x[8]=Ae=>P(l).advance())},S(((Ot=P(l).currentStep.value)==null?void 0:Ot.type)==="rotate"?"Rotate":"Next")+"  ",1)):U("",!0),P(l).isComplete.value&&V.value<D.value.length-1?(m(),h("button",{key:4,class:"next-deal-btn",onClick:se}," Next Deal  ")):U("",!0)])])):(vn=G.value)!=null&&vn.commentary?(m(),h("div",{key:2,class:"display-commentary",innerHTML:P(Fs)(P(_n)(P(Sp)(G.value.commentary)))},null,8,Ox)):U("",!0),!P(l).hasSteps.value&&P(l).isComplete.value&&V.value<D.value.length-1?(m(),h("div",Rx,[c("button",{class:"next-deal-btn",onClick:se}," Next Deal  ")])):U("",!0)])]))]),he(wb,{visible:u.value,onClose:x[9]||(x[9]=Ae=>u.value=!1),onSwitchUser:re,onLogout:re,onBecomeTeacher:x[10]||(x[10]=Ae=>w.value=!0)},null,8,["visible"]),Q.value?(m(),h("div",Ix," Account created  your data is encrypted and linked to your email for recovery. ")):U("",!0),d.value?(m(),h("div",{key:1,class:"modal-overlay",onClick:x[12]||(x[12]=Lt(Ae=>d.value=!1,["self"]))},[he(f1,{onClose:x[11]||(x[11]=Ae=>d.value=!1)})])):U("",!0),f.value?(m(),h("div",{key:2,class:"modal-overlay",onClick:x[14]||(x[14]=Lt(Ae=>f.value=!1,["self"]))},[he(Q1,{onClose:x[13]||(x[13]=Ae=>f.value=!1),onNavigateToDeal:C})])):U("",!0),he(Mw,{visible:q.value,url:L.value||"",onClose:x[15]||(x[15]=Ae=>q.value=!1)},null,8,["visible","url"]),w.value?(m(),Ue(nx,{key:3,onClose:x[16]||(x[16]=Ae=>w.value=!1),onActivated:X})):U("",!0),he(lx)])):(m(),Ue(My,{key:0,onUserReady:ne}))}}},Dx=()=>ov(()=>import("./JoinClassroomView-CBDI4H6o.js"),__vite__mapDeps([0,1])),Lx=[{path:"/join/:joinCode",name:"join",component:Dx},{path:"/:pathMatch(.*)*",name:"app",component:Px}],Bx=dp({history:Wv(),routes:Lx}),xu=qf(tv);xu.use(Bx);xu.mount("#app");export{ye as _,c as a,he as b,h as c,U as d,$t as e,Ao as f,Fe as g,ro as h,Id as i,Ec as j,fp as k,m as l,_t as o,E as r,S as t,Ux as u,md as w};
