const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-B7_7bpTU.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ce={},js=[],Ut=()=>{},Kl=()=>!1,Ro=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jr=e=>e.startsWith("onUpdate:"),Ye=Object.assign,qr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},du=Object.prototype.hasOwnProperty,_e=(e,t)=>du.call(e,t),ie=Array.isArray,Hs=e=>Kn(e)==="[object Map]",on=e=>Kn(e)==="[object Set]",Ia=e=>Kn(e)==="[object Date]",de=e=>typeof e=="function",Ue=e=>typeof e=="string",Ot=e=>typeof e=="symbol",$e=e=>e!==null&&typeof e=="object",Wl=e=>($e(e)||de(e))&&de(e.then)&&de(e.catch),Gl=Object.prototype.toString,Kn=e=>Gl.call(e),fu=e=>Kn(e).slice(8,-1),zl=e=>Kn(e)==="[object Object]",Yr=e=>Ue(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cn=zr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Po=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},vu=/-\w/g,$t=Po(e=>e.replace(vu,t=>t.slice(1).toUpperCase())),mu=/\B([A-Z])/g,ds=Po(e=>e.replace(mu,"-$1").toLowerCase()),Lo=Po(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xo=Po(e=>e?`on${Lo(e)}`:""),ls=(e,t)=>!Object.is(e,t),lo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Jl=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Do=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ra;const Bo=()=>Ra||(Ra=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kt(e){if(ie(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ue(n)?yu(n):kt(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(Ue(e)||$e(e))return e}const pu=/;(?![^(]*\))/g,hu=/:([^]+)/,gu=/\/\*[^]*?\*\//g;function yu(e){const t={};return e.replace(gu,"").split(pu).forEach(s=>{if(s){const n=s.split(hu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ae(e){let t="";if(Ue(e))t=e;else if(ie(e))for(let s=0;s<e.length;s++){const n=ae(e[s]);n&&(t+=n+" ")}else if($e(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const bu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_u=zr(bu);function ql(e){return!!e||e===""}function wu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=ks(e[n],t[n]);return s}function ks(e,t){if(e===t)return!0;let s=Ia(e),n=Ia(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ot(e),n=Ot(t),s||n)return e===t;if(s=ie(e),n=ie(t),s||n)return s&&n?wu(e,t):!1;if(s=$e(e),n=$e(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!ks(e[a],t[a]))return!1}}return String(e)===String(t)}function Xr(e,t){return e.findIndex(s=>ks(s,t))}const Yl=e=>!!(e&&e.__v_isRef===!0),w=e=>Ue(e)?e:e==null?"":ie(e)||$e(e)&&(e.toString===Gl||!de(e.toString))?Yl(e)?w(e.value):JSON.stringify(e,Xl,2):String(e),Xl=(e,t)=>Yl(t)?Xl(e,t.value):Hs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[Qo(n,r)+" =>"]=o,s),{})}:on(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Qo(s))}:Ot(t)?Qo(t):$e(t)&&!ie(t)&&!zl(t)?String(t):t,Qo=(e,t="")=>{var s;return Ot(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Su{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!t&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=dt;try{return dt=this,t()}finally{dt=s}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Cu(){return dt}let ke;const Zo=new WeakSet;class Ql{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zo.has(this)&&(Zo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ei(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pa(this),ti(this);const t=ke,s=Tt;ke=this,Tt=!0;try{return this.fn()}finally{si(this),ke=t,Tt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ea(t);this.deps=this.depsTail=void 0,Pa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gr(this)&&this.run()}get dirty(){return gr(this)}}let Zl=0,$n,kn;function ei(e,t=!1){if(e.flags|=8,t){e.next=kn,kn=e;return}e.next=$n,$n=e}function Qr(){Zl++}function Zr(){if(--Zl>0)return;if(kn){let t=kn;for(kn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;$n;){let t=$n;for($n=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function ti(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function si(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),ea(n),$u(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function gr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ni(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ni(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===In)||(e.globalVersion=In,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gr(e))))return;e.flags|=2;const t=e.dep,s=ke,n=Tt;ke=e,Tt=!0;try{ti(e);const o=e.fn(e._value);(t.version===0||ls(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ke=s,Tt=n,si(e),e.flags&=-3}}function ea(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)ea(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function $u(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Tt=!0;const oi=[];function Yt(){oi.push(Tt),Tt=!1}function Xt(){const e=oi.pop();Tt=e===void 0?!0:e}function Pa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ke;ke=void 0;try{t()}finally{ke=s}}}let In=0;class ku{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ta{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ke||!Tt||ke===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ke)s=this.activeLink=new ku(ke,this),ke.deps?(s.prevDep=ke.depsTail,ke.depsTail.nextDep=s,ke.depsTail=s):ke.deps=ke.depsTail=s,ri(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ke.depsTail,s.nextDep=void 0,ke.depsTail.nextDep=s,ke.depsTail=s,ke.deps===s&&(ke.deps=n)}return s}trigger(t){this.version++,In++,this.notify(t)}notify(t){Qr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Zr()}}}function ri(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)ri(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const yr=new WeakMap,Ss=Symbol(""),br=Symbol(""),Rn=Symbol("");function tt(e,t,s){if(Tt&&ke){let n=yr.get(e);n||yr.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new ta),o.map=n,o.key=s),o.track()}}function Kt(e,t,s,n,o,r){const a=yr.get(e);if(!a){In++;return}const i=l=>{l&&l.trigger()};if(Qr(),t==="clear")a.forEach(i);else{const l=ie(e),u=l&&Yr(s);if(l&&s==="length"){const f=Number(n);a.forEach((d,v)=>{(v==="length"||v===Rn||!Ot(v)&&v>=f)&&i(d)})}else switch((s!==void 0||a.has(void 0))&&i(a.get(s)),u&&i(a.get(Rn)),t){case"add":l?u&&i(a.get("length")):(i(a.get(Ss)),Hs(e)&&i(a.get(br)));break;case"delete":l||(i(a.get(Ss)),Hs(e)&&i(a.get(br)));break;case"set":Hs(e)&&i(a.get(Ss));break}}Zr()}function Ts(e){const t=be(e);return t===e?t:(tt(t,"iterate",Rn),St(e)?t:t.map(It))}function Uo(e){return tt(e=be(e),"iterate",Rn),e}function ns(e,t){return Qt(e)?zs(Cs(e)?It(t):t):It(t)}const xu={__proto__:null,[Symbol.iterator](){return er(this,Symbol.iterator,e=>ns(this,e))},concat(...e){return Ts(this).concat(...e.map(t=>ie(t)?Ts(t):t))},entries(){return er(this,"entries",e=>(e[1]=ns(this,e[1]),e))},every(e,t){return jt(this,"every",e,t,void 0,arguments)},filter(e,t){return jt(this,"filter",e,t,s=>s.map(n=>ns(this,n)),arguments)},find(e,t){return jt(this,"find",e,t,s=>ns(this,s),arguments)},findIndex(e,t){return jt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return jt(this,"findLast",e,t,s=>ns(this,s),arguments)},findLastIndex(e,t){return jt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return jt(this,"forEach",e,t,void 0,arguments)},includes(...e){return tr(this,"includes",e)},indexOf(...e){return tr(this,"indexOf",e)},join(e){return Ts(this).join(e)},lastIndexOf(...e){return tr(this,"lastIndexOf",e)},map(e,t){return jt(this,"map",e,t,void 0,arguments)},pop(){return un(this,"pop")},push(...e){return un(this,"push",e)},reduce(e,...t){return La(this,"reduce",e,t)},reduceRight(e,...t){return La(this,"reduceRight",e,t)},shift(){return un(this,"shift")},some(e,t){return jt(this,"some",e,t,void 0,arguments)},splice(...e){return un(this,"splice",e)},toReversed(){return Ts(this).toReversed()},toSorted(e){return Ts(this).toSorted(e)},toSpliced(...e){return Ts(this).toSpliced(...e)},unshift(...e){return un(this,"unshift",e)},values(){return er(this,"values",e=>ns(this,e))}};function er(e,t,s){const n=Uo(e),o=n[t]();return n!==e&&!St(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const Au=Array.prototype;function jt(e,t,s,n,o,r){const a=Uo(e),i=a!==e&&!St(e),l=a[t];if(l!==Au[t]){const d=l.apply(e,r);return i?It(d):d}let u=s;a!==e&&(i?u=function(d,v){return s.call(this,ns(e,d),v,e)}:s.length>2&&(u=function(d,v){return s.call(this,d,v,e)}));const f=l.call(a,u,n);return i&&o?o(f):f}function La(e,t,s,n){const o=Uo(e);let r=s;return o!==e&&(St(e)?s.length>3&&(r=function(a,i,l){return s.call(this,a,i,l,e)}):r=function(a,i,l){return s.call(this,a,ns(e,i),l,e)}),o[t](r,...n)}function tr(e,t,s){const n=be(e);tt(n,"iterate",Rn);const o=n[t](...s);return(o===-1||o===!1)&&oa(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function un(e,t,s=[]){Yt(),Qr();const n=be(e)[t].apply(e,s);return Zr(),Xt(),n}const Nu=zr("__proto__,__v_isRef,__isVue"),ai=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ot));function Tu(e){Ot(e)||(e=String(e));const t=be(this);return tt(t,"has",e),t.hasOwnProperty(e)}class li{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Mu:di:r?ui:ci).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=ie(t);if(!o){let l;if(a&&(l=xu[s]))return l;if(s==="hasOwnProperty")return Tu}const i=Reflect.get(t,s,nt(t)?t:n);if((Ot(s)?ai.has(s):Nu(s))||(o||tt(t,"get",s),r))return i;if(nt(i)){const l=a&&Yr(s)?i:i.value;return o&&$e(l)?wr(l):l}return $e(i)?o?wr(i):Mt(i):i}}class ii extends li{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const a=ie(t)&&Yr(s);if(!this._isShallow){const u=Qt(r);if(!St(n)&&!Qt(n)&&(r=be(r),n=be(n)),!a&&nt(r)&&!nt(n))return u||(r.value=n),!0}const i=a?Number(s)<t.length:_e(t,s),l=Reflect.set(t,s,n,nt(t)?t:o);return t===be(o)&&(i?ls(n,r)&&Kt(t,"set",s,n):Kt(t,"add",s,n)),l}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Kt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Ot(s)||!ai.has(s))&&tt(t,"has",s),n}ownKeys(t){return tt(t,"iterate",ie(t)?"length":Ss),Reflect.ownKeys(t)}}class Eu extends li{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ou=new ii,Iu=new Eu,Ru=new ii(!0);const _r=e=>e,eo=e=>Reflect.getPrototypeOf(e);function Pu(e,t,s){return function(...n){const o=this.__v_raw,r=be(o),a=Hs(r),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=o[e](...n),f=s?_r:t?zs:It;return!t&&tt(r,"iterate",l?br:Ss),Ye(Object.create(u),{next(){const{value:d,done:v}=u.next();return v?{value:d,done:v}:{value:i?[f(d[0]),f(d[1])]:f(d),done:v}}})}}function to(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Lu(e,t){const s={get(o){const r=this.__v_raw,a=be(r),i=be(o);e||(ls(o,i)&&tt(a,"get",o),tt(a,"get",i));const{has:l}=eo(a),u=t?_r:e?zs:It;if(l.call(a,o))return u(r.get(o));if(l.call(a,i))return u(r.get(i));r!==a&&r.get(o)},get size(){const o=this.__v_raw;return!e&&tt(be(o),"iterate",Ss),o.size},has(o){const r=this.__v_raw,a=be(r),i=be(o);return e||(ls(o,i)&&tt(a,"has",o),tt(a,"has",i)),o===i?r.has(o):r.has(o)||r.has(i)},forEach(o,r){const a=this,i=a.__v_raw,l=be(i),u=t?_r:e?zs:It;return!e&&tt(l,"iterate",Ss),i.forEach((f,d)=>o.call(r,u(f),u(d),a))}};return Ye(s,e?{add:to("add"),set:to("set"),delete:to("delete"),clear:to("clear")}:{add(o){!t&&!St(o)&&!Qt(o)&&(o=be(o));const r=be(this);return eo(r).has.call(r,o)||(r.add(o),Kt(r,"add",o,o)),this},set(o,r){!t&&!St(r)&&!Qt(r)&&(r=be(r));const a=be(this),{has:i,get:l}=eo(a);let u=i.call(a,o);u||(o=be(o),u=i.call(a,o));const f=l.call(a,o);return a.set(o,r),u?ls(r,f)&&Kt(a,"set",o,r):Kt(a,"add",o,r),this},delete(o){const r=be(this),{has:a,get:i}=eo(r);let l=a.call(r,o);l||(o=be(o),l=a.call(r,o)),i&&i.call(r,o);const u=r.delete(o);return l&&Kt(r,"delete",o,void 0),u},clear(){const o=be(this),r=o.size!==0,a=o.clear();return r&&Kt(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Pu(o,e,t)}),s}function sa(e,t){const s=Lu(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,r)}const Du={get:sa(!1,!1)},Bu={get:sa(!1,!0)},Uu={get:sa(!0,!1)};const ci=new WeakMap,ui=new WeakMap,di=new WeakMap,Mu=new WeakMap;function Fu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ju(e){return e.__v_skip||!Object.isExtensible(e)?0:Fu(fu(e))}function Mt(e){return Qt(e)?e:na(e,!1,Ou,Du,ci)}function fi(e){return na(e,!1,Ru,Bu,ui)}function wr(e){return na(e,!0,Iu,Uu,di)}function na(e,t,s,n,o){if(!$e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=ju(e);if(r===0)return e;const a=o.get(e);if(a)return a;const i=new Proxy(e,r===2?n:s);return o.set(e,i),i}function Cs(e){return Qt(e)?Cs(e.__v_raw):!!(e&&e.__v_isReactive)}function Qt(e){return!!(e&&e.__v_isReadonly)}function St(e){return!!(e&&e.__v_isShallow)}function oa(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function Hu(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&Jl(e,"__v_skip",!0),e}const It=e=>$e(e)?Mt(e):e,zs=e=>$e(e)?wr(e):e;function nt(e){return e?e.__v_isRef===!0:!1}function A(e){return vi(e,!1)}function Vu(e){return vi(e,!0)}function vi(e,t){return nt(e)?e:new Ku(e,t)}class Ku{constructor(t,s){this.dep=new ta,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:It(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||St(t)||Qt(t);t=n?t:be(t),ls(t,s)&&(this._rawValue=t,this._value=n?t:It(t),this.dep.trigger())}}function I(e){return nt(e)?e.value:e}const Wu={get:(e,t,s)=>t==="__v_raw"?e:I(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return nt(o)&&!nt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function mi(e){return Cs(e)?e:new Proxy(e,Wu)}class Gu{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new ta(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=In-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return ei(this,!0),!0}get value(){const t=this.dep.track();return ni(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zu(e,t,s=!1){let n,o;return de(e)?n=e:(n=e.get,o=e.set),new Gu(n,o,s)}const so={},mo=new WeakMap;let bs;function Ju(e,t=!1,s=bs){if(s){let n=mo.get(s);n||mo.set(s,n=[]),n.push(e)}}function qu(e,t,s=Ce){const{immediate:n,deep:o,once:r,scheduler:a,augmentJob:i,call:l}=s,u=P=>o?P:St(P)||o===!1||o===0?Wt(P,1):Wt(P);let f,d,v,m,g=!1,$=!1;if(nt(e)?(d=()=>e.value,g=St(e)):Cs(e)?(d=()=>u(e),g=!0):ie(e)?($=!0,g=e.some(P=>Cs(P)||St(P)),d=()=>e.map(P=>{if(nt(P))return P.value;if(Cs(P))return u(P);if(de(P))return l?l(P,2):P()})):de(e)?t?d=l?()=>l(e,2):e:d=()=>{if(v){Yt();try{v()}finally{Xt()}}const P=bs;bs=f;try{return l?l(e,3,[m]):e(m)}finally{bs=P}}:d=Ut,t&&o){const P=d,W=o===!0?1/0:o;d=()=>Wt(P(),W)}const R=Cu(),k=()=>{f.stop(),R&&R.active&&qr(R.effects,f)};if(r&&t){const P=t;t=(...W)=>{P(...W),k()}}let C=$?new Array(e.length).fill(so):so;const x=P=>{if(!(!(f.flags&1)||!f.dirty&&!P))if(t){const W=f.run();if(o||g||($?W.some((z,L)=>ls(z,C[L])):ls(W,C))){v&&v();const z=bs;bs=f;try{const L=[W,C===so?void 0:$&&C[0]===so?[]:C,m];C=W,l?l(t,3,L):t(...L)}finally{bs=z}}}else f.run()};return i&&i(x),f=new Ql(d),f.scheduler=a?()=>a(x,!1):x,m=P=>Ju(P,!1,f),v=f.onStop=()=>{const P=mo.get(f);if(P){if(l)l(P,4);else for(const W of P)W();mo.delete(f)}},t?n?x(!0):C=f.run():a?a(x.bind(null,!0),!0):f.run(),k.pause=f.pause.bind(f),k.resume=f.resume.bind(f),k.stop=k,k}function Wt(e,t=1/0,s){if(t<=0||!$e(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,nt(e))Wt(e.value,t,s);else if(ie(e))for(let n=0;n<e.length;n++)Wt(e[n],t,s);else if(on(e)||Hs(e))e.forEach(n=>{Wt(n,t,s)});else if(zl(e)){for(const n in e)Wt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Wt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wn(e,t,s,n){try{return n?e(...n):e()}catch(o){Mo(o,t,s)}}function Ft(e,t,s,n){if(de(e)){const o=Wn(e,t,s,n);return o&&Wl(o)&&o.catch(r=>{Mo(r,t,s)}),o}if(ie(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Ft(e[r],t,s,n));return o}}function Mo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ce;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,l,u)===!1)return}i=i.parent}if(r){Yt(),Wn(r,null,10,[e,l,u]),Xt();return}}Yu(e,s,o,n,a)}function Yu(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const it=[];let Dt=-1;const Vs=[];let os=null,Ps=0;const pi=Promise.resolve();let po=null;function Pn(e){const t=po||pi;return e?t.then(this?e.bind(this):e):t}function Xu(e){let t=Dt+1,s=it.length;for(;t<s;){const n=t+s>>>1,o=it[n],r=Ln(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function ra(e){if(!(e.flags&1)){const t=Ln(e),s=it[it.length-1];!s||!(e.flags&2)&&t>=Ln(s)?it.push(e):it.splice(Xu(t),0,e),e.flags|=1,hi()}}function hi(){po||(po=pi.then(yi))}function Qu(e){ie(e)?Vs.push(...e):os&&e.id===-1?os.splice(Ps+1,0,e):e.flags&1||(Vs.push(e),e.flags|=1),hi()}function Da(e,t,s=Dt+1){for(;s<it.length;s++){const n=it[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;it.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function gi(e){if(Vs.length){const t=[...new Set(Vs)].sort((s,n)=>Ln(s)-Ln(n));if(Vs.length=0,os){os.push(...t);return}for(os=t,Ps=0;Ps<os.length;Ps++){const s=os[Ps];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}os=null,Ps=0}}const Ln=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yi(e){try{for(Dt=0;Dt<it.length;Dt++){const t=it[Dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dt<it.length;Dt++){const t=it[Dt];t&&(t.flags&=-2)}Dt=-1,it.length=0,gi(),po=null,(it.length||Vs.length)&&yi()}}let Je=null,bi=null;function ho(e){const t=Je;return Je=e,bi=e&&e.type.__scopeId||null,t}function Zu(e,t=Je,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&bo(-1);const r=ho(t);let a;try{a=e(...o)}finally{ho(r),n._d&&bo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Te(e,t){if(Je===null)return e;const s=Vo(Je),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,i,l=Ce]=t[o];r&&(de(r)&&(r={mounted:r,updated:r}),r.deep&&Wt(a),n.push({dir:r,instance:s,value:a,oldValue:void 0,arg:i,modifiers:l}))}return e}function vs(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const i=o[a];r&&(i.oldValue=r[a].value);let l=i.dir[n];l&&(Yt(),Ft(l,s,8,[e.el,i,e,t]),Xt())}}function io(e,t){if(st){let s=st.provides;const n=st.parent&&st.parent.provides;n===s&&(s=st.provides=Object.create(n)),s[e]=t}}function Et(e,t,s=!1){const n=ef();if(n||Ws){let o=Ws?Ws._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&de(t)?t.call(n&&n.proxy):t}}const ed=Symbol.for("v-scx"),td=()=>Et(ed);function ft(e,t,s){return _i(e,t,s)}function _i(e,t,s=Ce){const{immediate:n,deep:o,flush:r,once:a}=s,i=Ye({},s),l=t&&n||!t&&r!=="post";let u;if(Un){if(r==="sync"){const m=td();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Ut,m.resume=Ut,m.pause=Ut,m}}const f=st;i.call=(m,g,$)=>Ft(m,f,g,$);let d=!1;r==="post"?i.scheduler=m=>{mt(m,f&&f.suspense)}:r!=="sync"&&(d=!0,i.scheduler=(m,g)=>{g?m():ra(m)}),i.augmentJob=m=>{t&&(m.flags|=4),d&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const v=qu(e,t,i);return Un&&(u?u.push(v):l&&v()),v}function sd(e,t,s){const n=this.proxy,o=Ue(e)?e.includes(".")?wi(n,e):()=>n[e]:e.bind(n,n);let r;de(t)?r=t:(r=t.handler,s=t);const a=Gn(this),i=_i(o,r.bind(n),s);return a(),i}function wi(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const nd=Symbol("_vte"),od=e=>e.__isTeleport,rd=Symbol("_leaveCb");function aa(e,t){e.shapeFlag&6&&e.component?(e.transition=t,aa(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Si(e,t){return de(e)?Ye({name:e.name},t,{setup:e}):e}function Ci(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const go=new WeakMap;function xn(e,t,s,n,o=!1){if(ie(e)){e.forEach((g,$)=>xn(g,t&&(ie(t)?t[$]:t),s,n,o));return}if(Ks(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xn(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Vo(n.component):n.el,a=o?null:r,{i,r:l}=e,u=t&&t.r,f=i.refs===Ce?i.refs={}:i.refs,d=i.setupState,v=be(d),m=d===Ce?Kl:g=>_e(v,g);if(u!=null&&u!==l){if(Ba(t),Ue(u))f[u]=null,m(u)&&(d[u]=null);else if(nt(u)){u.value=null;const g=t;g.k&&(f[g.k]=null)}}if(de(l))Wn(l,i,12,[a,f]);else{const g=Ue(l),$=nt(l);if(g||$){const R=()=>{if(e.f){const k=g?m(l)?d[l]:f[l]:l.value;if(o)ie(k)&&qr(k,r);else if(ie(k))k.includes(r)||k.push(r);else if(g)f[l]=[r],m(l)&&(d[l]=f[l]);else{const C=[r];l.value=C,e.k&&(f[e.k]=C)}}else g?(f[l]=a,m(l)&&(d[l]=a)):$&&(l.value=a,e.k&&(f[e.k]=a))};if(a){const k=()=>{R(),go.delete(e)};k.id=-1,go.set(e,k),mt(k,s)}else Ba(e),R()}}}function Ba(e){const t=go.get(e);t&&(t.flags|=8,go.delete(e))}Bo().requestIdleCallback;Bo().cancelIdleCallback;const Ks=e=>!!e.type.__asyncLoader,$i=e=>e.type.__isKeepAlive;function ad(e,t){ki(e,"a",t)}function ld(e,t){ki(e,"da",t)}function ki(e,t,s=st){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Fo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)$i(o.parent.vnode)&&id(n,t,s,o),o=o.parent}}function id(e,t,s,n){const o=Fo(t,e,n,!0);la(()=>{qr(n[t],o)},s)}function Fo(e,t,s=st,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Yt();const i=Gn(s),l=Ft(t,s,e,a);return i(),Xt(),l});return n?o.unshift(r):o.push(r),r}}const ts=e=>(t,s=st)=>{(!Un||e==="sp")&&Fo(e,(...n)=>t(...n),s)},cd=ts("bm"),yt=ts("m"),ud=ts("bu"),dd=ts("u"),xi=ts("bum"),la=ts("um"),fd=ts("sp"),vd=ts("rtg"),md=ts("rtc");function pd(e,t=st){Fo("ec",e,t)}const hd="components";function gd(e,t){return bd(hd,e,!0,t)||e}const yd=Symbol.for("v-ndc");function bd(e,t,s=!0,n=!1){const o=Je||st;if(o){const r=o.type;{const i=rf(r,!1);if(i&&(i===t||i===$t(t)||i===Lo($t(t))))return r}const a=Ua(o[e]||r[e],t)||Ua(o.appContext[e],t);return!a&&n?r:a}}function Ua(e,t){return e&&(e[t]||e[$t(t)]||e[Lo($t(t))])}function ce(e,t,s,n){let o;const r=s,a=ie(e);if(a||Ue(e)){const i=a&&Cs(e);let l=!1,u=!1;i&&(l=!St(e),u=Qt(e),e=Uo(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(l?u?zs(It(e[f])):It(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r)}else if($e(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,r));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const f=i[l];o[l]=t(e[f],f,l,r)}}else o=[];return o}function _d(e,t,s={},n,o){if(Je.ce||Je.parent&&Ks(Je.parent)&&Je.parent.ce){const u=Object.keys(s).length>0;return s.name=t,p(),De(te,null,[ue("slot",s,n)],u?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),p();const a=r&&Ai(r(s)),i=s.key||a&&a.key,l=De(te,{key:(i&&!Ot(i)?i:`_${t}`)+(!a&&n?"_fb":"")},a||[],a&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function Ai(e){return e.some(t=>Bn(t)?!(t.type===Zt||t.type===te&&!Ai(t.children)):!0)?e:null}const Sr=e=>e?Gi(e)?Vo(e):Sr(e.parent):null,An=Ye(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Sr(e.parent),$root:e=>Sr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ti(e),$forceUpdate:e=>e.f||(e.f=()=>{ra(e.update)}),$nextTick:e=>e.n||(e.n=Pn.bind(e.proxy)),$watch:e=>sd.bind(e)}),sr=(e,t)=>e!==Ce&&!e.__isScriptSetup&&_e(e,t),wd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:a,type:i,appContext:l}=e;if(t[0]!=="$"){const v=a[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(sr(n,t))return a[t]=1,n[t];if(o!==Ce&&_e(o,t))return a[t]=2,o[t];if(_e(r,t))return a[t]=3,r[t];if(s!==Ce&&_e(s,t))return a[t]=4,s[t];Cr&&(a[t]=0)}}const u=An[t];let f,d;if(u)return t==="$attrs"&&tt(e.attrs,"get",""),u(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==Ce&&_e(s,t))return a[t]=4,s[t];if(d=l.config.globalProperties,_e(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return sr(o,t)?(o[t]=s,!0):n!==Ce&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:a}},i){let l;return!!(s[i]||e!==Ce&&i[0]!=="$"&&_e(e,i)||sr(t,i)||_e(r,i)||_e(n,i)||_e(An,i)||_e(o.config.globalProperties,i)||(l=a.__cssModules)&&l[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ma(e){return ie(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Cr=!0;function Sd(e){const t=Ti(e),s=e.proxy,n=e.ctx;Cr=!1,t.beforeCreate&&Fa(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:i,provide:l,inject:u,created:f,beforeMount:d,mounted:v,beforeUpdate:m,updated:g,activated:$,deactivated:R,beforeDestroy:k,beforeUnmount:C,destroyed:x,unmounted:P,render:W,renderTracked:z,renderTriggered:L,errorCaptured:Y,serverPrefetch:X,expose:pe,inheritAttrs:he,components:we,directives:Oe,filters:Ve}=t;if(u&&Cd(u,n,null),a)for(const ne in a){const K=a[ne];de(K)&&(n[ne]=K.bind(s))}if(o){const ne=o.call(s,s);$e(ne)&&(e.data=Mt(ne))}if(Cr=!0,r)for(const ne in r){const K=r[ne],se=de(K)?K.bind(s,s):de(K.get)?K.get.bind(s,s):Ut,J=!de(K)&&de(K.set)?K.set.bind(s):Ut,V=O({get:se,set:J});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>V.value,set:oe=>V.value=oe})}if(i)for(const ne in i)Ni(i[ne],n,s,ne);if(l){const ne=de(l)?l.call(s):l;Reflect.ownKeys(ne).forEach(K=>{io(K,ne[K])})}f&&Fa(f,e,"c");function ge(ne,K){ie(K)?K.forEach(se=>ne(se.bind(s))):K&&ne(K.bind(s))}if(ge(cd,d),ge(yt,v),ge(ud,m),ge(dd,g),ge(ad,$),ge(ld,R),ge(pd,Y),ge(md,z),ge(vd,L),ge(xi,C),ge(la,P),ge(fd,X),ie(pe))if(pe.length){const ne=e.exposed||(e.exposed={});pe.forEach(K=>{Object.defineProperty(ne,K,{get:()=>s[K],set:se=>s[K]=se,enumerable:!0})})}else e.exposed||(e.exposed={});W&&e.render===Ut&&(e.render=W),he!=null&&(e.inheritAttrs=he),we&&(e.components=we),Oe&&(e.directives=Oe),X&&Ci(e)}function Cd(e,t,s=Ut){ie(e)&&(e=$r(e));for(const n in e){const o=e[n];let r;$e(o)?"default"in o?r=Et(o.from||n,o.default,!0):r=Et(o.from||n):r=Et(o),nt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Fa(e,t,s){Ft(ie(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ni(e,t,s,n){let o=n.includes(".")?wi(s,n):()=>s[n];if(Ue(e)){const r=t[e];de(r)&&ft(o,r)}else if(de(e))ft(o,e.bind(s));else if($e(e))if(ie(e))e.forEach(r=>Ni(r,t,s,n));else{const r=de(e.handler)?e.handler.bind(s):t[e.handler];de(r)&&ft(o,r,e)}}function Ti(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let l;return i?l=i:!o.length&&!s&&!n?l=t:(l={},o.length&&o.forEach(u=>yo(l,u,a,!0)),yo(l,t,a)),$e(t)&&r.set(t,l),l}function yo(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&yo(e,r,s,!0),o&&o.forEach(a=>yo(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const i=$d[a]||s&&s[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const $d={data:ja,props:Ha,emits:Ha,methods:bn,computed:bn,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:bn,directives:bn,watch:xd,provide:ja,inject:kd};function ja(e,t){return t?e?function(){return Ye(de(e)?e.call(this,this):e,de(t)?t.call(this,this):t)}:t:e}function kd(e,t){return bn($r(e),$r(t))}function $r(e){if(ie(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function bn(e,t){return e?Ye(Object.create(null),e,t):t}function Ha(e,t){return e?ie(e)&&ie(t)?[...new Set([...e,...t])]:Ye(Object.create(null),Ma(e),Ma(t??{})):t}function xd(e,t){if(!e)return t;if(!t)return e;const s=Ye(Object.create(null),e);for(const n in t)s[n]=at(e[n],t[n]);return s}function Ei(){return{app:null,config:{isNativeTag:Kl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ad=0;function Nd(e,t){return function(n,o=null){de(n)||(n=Ye({},n)),o!=null&&!$e(o)&&(o=null);const r=Ei(),a=new WeakSet,i=[];let l=!1;const u=r.app={_uid:Ad++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:lf,get config(){return r.config},set config(f){},use(f,...d){return a.has(f)||(f&&de(f.install)?(a.add(f),f.install(u,...d)):de(f)&&(a.add(f),f(u,...d))),u},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),u},component(f,d){return d?(r.components[f]=d,u):r.components[f]},directive(f,d){return d?(r.directives[f]=d,u):r.directives[f]},mount(f,d,v){if(!l){const m=u._ceVNode||ue(n,o);return m.appContext=r,v===!0?v="svg":v===!1&&(v=void 0),e(m,f,v),l=!0,u._container=f,f.__vue_app__=u,Vo(m.component)}},onUnmount(f){i.push(f)},unmount(){l&&(Ft(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,d){return r.provides[f]=d,u},runWithContext(f){const d=Ws;Ws=u;try{return f()}finally{Ws=d}}};return u}}let Ws=null;const Td=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${$t(t)}Modifiers`]||e[`${ds(t)}Modifiers`];function Ed(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ce;let o=s;const r=t.startsWith("update:"),a=r&&Td(n,t.slice(7));a&&(a.trim&&(o=s.map(f=>Ue(f)?f.trim():f)),a.number&&(o=s.map(Do)));let i,l=n[i=Xo(t)]||n[i=Xo($t(t))];!l&&r&&(l=n[i=Xo(ds(t))]),l&&Ft(l,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Ft(u,e,6,o)}}const Od=new WeakMap;function Oi(e,t,s=!1){const n=s?Od:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let a={},i=!1;if(!de(e)){const l=u=>{const f=Oi(u,t,!0);f&&(i=!0,Ye(a,f))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!i?($e(e)&&n.set(e,null),null):(ie(r)?r.forEach(l=>a[l]=null):Ye(a,r),$e(e)&&n.set(e,a),a)}function jo(e,t){return!e||!Ro(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,ds(t))||_e(e,t))}function Va(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:a,attrs:i,emit:l,render:u,renderCache:f,props:d,data:v,setupState:m,ctx:g,inheritAttrs:$}=e,R=ho(e);let k,C;try{if(s.shapeFlag&4){const P=o||n,W=P;k=Bt(u.call(W,P,f,d,m,v,g)),C=i}else{const P=t;k=Bt(P.length>1?P(d,{attrs:i,slots:a,emit:l}):P(d,null)),C=t.props?i:Id(i)}}catch(P){Nn.length=0,Mo(P,e,1),k=ue(Zt)}let x=k;if(C&&$!==!1){const P=Object.keys(C),{shapeFlag:W}=x;P.length&&W&7&&(r&&P.some(Jr)&&(C=Rd(C,r)),x=Js(x,C,!1,!0))}return s.dirs&&(x=Js(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(s.dirs):s.dirs),s.transition&&aa(x,s.transition),k=x,ho(R),k}const Id=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ro(s))&&((t||(t={}))[s]=e[s]);return t},Rd=(e,t)=>{const s={};for(const n in e)(!Jr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Pd(e,t,s){const{props:n,children:o,component:r}=e,{props:a,children:i,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ka(n,a,u):!!a;if(l&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const v=f[d];if(a[v]!==n[v]&&!jo(u,v))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===a?!1:n?a?Ka(n,a,u):!0:!!a;return!1}function Ka(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!jo(s,r))return!0}return!1}function Ld({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Ii={},Ri=()=>Object.create(Ii),Pi=e=>Object.getPrototypeOf(e)===Ii;function Dd(e,t,s,n=!1){const o={},r=Ri();e.propsDefaults=Object.create(null),Li(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);s?e.props=n?o:fi(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Bd(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,i=be(o),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let v=f[d];if(jo(e.emitsOptions,v))continue;const m=t[v];if(l)if(_e(r,v))m!==r[v]&&(r[v]=m,u=!0);else{const g=$t(v);o[g]=kr(l,i,g,m,e,!1)}else m!==r[v]&&(r[v]=m,u=!0)}}}else{Li(e,t,o,r)&&(u=!0);let f;for(const d in i)(!t||!_e(t,d)&&((f=ds(d))===d||!_e(t,f)))&&(l?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=kr(l,i,d,void 0,e,!0)):delete o[d]);if(r!==i)for(const d in r)(!t||!_e(t,d))&&(delete r[d],u=!0)}u&&Kt(e.attrs,"set","")}function Li(e,t,s,n){const[o,r]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(Cn(l))continue;const u=t[l];let f;o&&_e(o,f=$t(l))?!r||!r.includes(f)?s[f]=u:(i||(i={}))[f]=u:jo(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(r){const l=be(s),u=i||Ce;for(let f=0;f<r.length;f++){const d=r[f];s[d]=kr(o,l,d,u[d],e,!_e(u,d))}}return a}function kr(e,t,s,n,o,r){const a=e[s];if(a!=null){const i=_e(a,"default");if(i&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&de(l)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const f=Gn(o);n=u[s]=l.call(null,t),f()}}else n=l;o.ce&&o.ce._setProp(s,n)}a[0]&&(r&&!i?n=!1:a[1]&&(n===""||n===ds(s))&&(n=!0))}return n}const Ud=new WeakMap;function Di(e,t,s=!1){const n=s?Ud:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,a={},i=[];let l=!1;if(!de(e)){const f=d=>{l=!0;const[v,m]=Di(d,t,!0);Ye(a,v),m&&i.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!l)return $e(e)&&n.set(e,js),js;if(ie(r))for(let f=0;f<r.length;f++){const d=$t(r[f]);Wa(d)&&(a[d]=Ce)}else if(r)for(const f in r){const d=$t(f);if(Wa(d)){const v=r[f],m=a[d]=ie(v)||de(v)?{type:v}:Ye({},v),g=m.type;let $=!1,R=!0;if(ie(g))for(let k=0;k<g.length;++k){const C=g[k],x=de(C)&&C.name;if(x==="Boolean"){$=!0;break}else x==="String"&&(R=!1)}else $=de(g)&&g.name==="Boolean";m[0]=$,m[1]=R,($||_e(m,"default"))&&i.push(d)}}const u=[a,i];return $e(e)&&n.set(e,u),u}function Wa(e){return e[0]!=="$"&&!Cn(e)}const ia=e=>e==="_"||e==="_ctx"||e==="$stable",ca=e=>ie(e)?e.map(Bt):[Bt(e)],Md=(e,t,s)=>{if(t._n)return t;const n=Zu((...o)=>ca(t(...o)),s);return n._c=!1,n},Bi=(e,t,s)=>{const n=e._ctx;for(const o in e){if(ia(o))continue;const r=e[o];if(de(r))t[o]=Md(o,r,n);else if(r!=null){const a=ca(r);t[o]=()=>a}}},Ui=(e,t)=>{const s=ca(t);e.slots.default=()=>s},Mi=(e,t,s)=>{for(const n in t)(s||!ia(n))&&(e[n]=t[n])},Fd=(e,t,s)=>{const n=e.slots=Ri();if(e.vnode.shapeFlag&32){const o=t._;o?(Mi(n,t,s),s&&Jl(n,"_",o,!0)):Bi(t,n)}else t&&Ui(e,t)},jd=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,a=Ce;if(n.shapeFlag&32){const i=t._;i?s&&i===1?r=!1:Mi(o,t,s):(r=!t.$stable,Bi(t,o)),a=t}else t&&(Ui(e,t),a={default:1});if(r)for(const i in o)!ia(i)&&a[i]==null&&delete o[i]},mt=Gd;function Hd(e){return Vd(e)}function Vd(e,t){const s=Bo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:a,createText:i,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:v,setScopeId:m=Ut,insertStaticContent:g}=e,$=(_,S,N,U=null,j=null,M=null,q=void 0,G=null,y=!!S.dynamicChildren)=>{if(_===S)return;_&&!dn(_,S)&&(U=F(_),oe(_,j,M,!0),_=null),S.patchFlag===-2&&(y=!1,S.dynamicChildren=null);const{type:b,ref:T,shapeFlag:E}=S;switch(b){case Ho:R(_,S,N,U);break;case Zt:k(_,S,N,U);break;case co:_==null&&C(S,N,U,q);break;case te:we(_,S,N,U,j,M,q,G,y);break;default:E&1?W(_,S,N,U,j,M,q,G,y):E&6?Oe(_,S,N,U,j,M,q,G,y):(E&64||E&128)&&b.process(_,S,N,U,j,M,q,G,y,re)}T!=null&&j?xn(T,_&&_.ref,M,S||_,!S):T==null&&_&&_.ref!=null&&xn(_.ref,null,M,_,!0)},R=(_,S,N,U)=>{if(_==null)n(S.el=i(S.children),N,U);else{const j=S.el=_.el;S.children!==_.children&&u(j,S.children)}},k=(_,S,N,U)=>{_==null?n(S.el=l(S.children||""),N,U):S.el=_.el},C=(_,S,N,U)=>{[_.el,_.anchor]=g(_.children,S,N,U,_.el,_.anchor)},x=({el:_,anchor:S},N,U)=>{let j;for(;_&&_!==S;)j=v(_),n(_,N,U),_=j;n(S,N,U)},P=({el:_,anchor:S})=>{let N;for(;_&&_!==S;)N=v(_),o(_),_=N;o(S)},W=(_,S,N,U,j,M,q,G,y)=>{if(S.type==="svg"?q="svg":S.type==="math"&&(q="mathml"),_==null)z(S,N,U,j,M,q,G,y);else{const b=_.el&&_.el._isVueCE?_.el:null;try{b&&b._beginPatch(),X(_,S,j,M,q,G,y)}finally{b&&b._endPatch()}}},z=(_,S,N,U,j,M,q,G)=>{let y,b;const{props:T,shapeFlag:E,transition:B,dirs:H}=_;if(y=_.el=a(_.type,M,T&&T.is,T),E&8?f(y,_.children):E&16&&Y(_.children,y,null,U,j,nr(_,M),q,G),H&&vs(_,null,U,"created"),L(y,_,_.scopeId,q,U),T){for(const le in T)le!=="value"&&!Cn(le)&&r(y,le,null,T[le],M,U);"value"in T&&r(y,"value",null,T.value,M),(b=T.onVnodeBeforeMount)&&Pt(b,U,_)}H&&vs(_,null,U,"beforeMount");const Z=Kd(j,B);Z&&B.beforeEnter(y),n(y,S,N),((b=T&&T.onVnodeMounted)||Z||H)&&mt(()=>{b&&Pt(b,U,_),Z&&B.enter(y),H&&vs(_,null,U,"mounted")},j)},L=(_,S,N,U,j)=>{if(N&&m(_,N),U)for(let M=0;M<U.length;M++)m(_,U[M]);if(j){let M=j.subTree;if(S===M||Vi(M.type)&&(M.ssContent===S||M.ssFallback===S)){const q=j.vnode;L(_,q,q.scopeId,q.slotScopeIds,j.parent)}}},Y=(_,S,N,U,j,M,q,G,y=0)=>{for(let b=y;b<_.length;b++){const T=_[b]=G?rs(_[b]):Bt(_[b]);$(null,T,S,N,U,j,M,q,G)}},X=(_,S,N,U,j,M,q)=>{const G=S.el=_.el;let{patchFlag:y,dynamicChildren:b,dirs:T}=S;y|=_.patchFlag&16;const E=_.props||Ce,B=S.props||Ce;let H;if(N&&ms(N,!1),(H=B.onVnodeBeforeUpdate)&&Pt(H,N,S,_),T&&vs(S,_,N,"beforeUpdate"),N&&ms(N,!0),(E.innerHTML&&B.innerHTML==null||E.textContent&&B.textContent==null)&&f(G,""),b?pe(_.dynamicChildren,b,G,N,U,nr(S,j),M):q||K(_,S,G,null,N,U,nr(S,j),M,!1),y>0){if(y&16)he(G,E,B,N,j);else if(y&2&&E.class!==B.class&&r(G,"class",null,B.class,j),y&4&&r(G,"style",E.style,B.style,j),y&8){const Z=S.dynamicProps;for(let le=0;le<Z.length;le++){const fe=Z[le],Ee=E[fe],Ae=B[fe];(Ae!==Ee||fe==="value")&&r(G,fe,Ee,Ae,j,N)}}y&1&&_.children!==S.children&&f(G,S.children)}else!q&&b==null&&he(G,E,B,N,j);((H=B.onVnodeUpdated)||T)&&mt(()=>{H&&Pt(H,N,S,_),T&&vs(S,_,N,"updated")},U)},pe=(_,S,N,U,j,M,q)=>{for(let G=0;G<S.length;G++){const y=_[G],b=S[G],T=y.el&&(y.type===te||!dn(y,b)||y.shapeFlag&198)?d(y.el):N;$(y,b,T,null,U,j,M,q,!0)}},he=(_,S,N,U,j)=>{if(S!==N){if(S!==Ce)for(const M in S)!Cn(M)&&!(M in N)&&r(_,M,S[M],null,j,U);for(const M in N){if(Cn(M))continue;const q=N[M],G=S[M];q!==G&&M!=="value"&&r(_,M,G,q,j,U)}"value"in N&&r(_,"value",S.value,N.value,j)}},we=(_,S,N,U,j,M,q,G,y)=>{const b=S.el=_?_.el:i(""),T=S.anchor=_?_.anchor:i("");let{patchFlag:E,dynamicChildren:B,slotScopeIds:H}=S;H&&(G=G?G.concat(H):H),_==null?(n(b,N,U),n(T,N,U),Y(S.children||[],N,T,j,M,q,G,y)):E>0&&E&64&&B&&_.dynamicChildren&&_.dynamicChildren.length===B.length?(pe(_.dynamicChildren,B,N,j,M,q,G),(S.key!=null||j&&S===j.subTree)&&Fi(_,S,!0)):K(_,S,N,T,j,M,q,G,y)},Oe=(_,S,N,U,j,M,q,G,y)=>{S.slotScopeIds=G,_==null?S.shapeFlag&512?j.ctx.activate(S,N,U,q,y):Ve(S,N,U,j,M,q,y):Ge(_,S,y)},Ve=(_,S,N,U,j,M,q)=>{const G=_.component=Zd(_,U,j);if($i(_)&&(G.ctx.renderer=re),tf(G,!1,q),G.asyncDep){if(j&&j.registerDep(G,ge,q),!_.el){const y=G.subTree=ue(Zt);k(null,y,S,N),_.placeholder=y.el}}else ge(G,_,S,N,j,M,q)},Ge=(_,S,N)=>{const U=S.component=_.component;if(Pd(_,S,N))if(U.asyncDep&&!U.asyncResolved){ne(U,S,N);return}else U.next=S,U.update();else S.el=_.el,U.vnode=S},ge=(_,S,N,U,j,M,q)=>{const G=()=>{if(_.isMounted){let{next:E,bu:B,u:H,parent:Z,vnode:le}=_;{const Ze=ji(_);if(Ze){E&&(E.el=le.el,ne(_,E,q)),Ze.asyncDep.then(()=>{_.isUnmounted||G()});return}}let fe=E,Ee;ms(_,!1),E?(E.el=le.el,ne(_,E,q)):E=le,B&&lo(B),(Ee=E.props&&E.props.onVnodeBeforeUpdate)&&Pt(Ee,Z,E,le),ms(_,!0);const Ae=Va(_),ot=_.subTree;_.subTree=Ae,$(ot,Ae,d(ot.el),F(ot),_,j,M),E.el=Ae.el,fe===null&&Ld(_,Ae.el),H&&mt(H,j),(Ee=E.props&&E.props.onVnodeUpdated)&&mt(()=>Pt(Ee,Z,E,le),j)}else{let E;const{el:B,props:H}=S,{bm:Z,m:le,parent:fe,root:Ee,type:Ae}=_,ot=Ks(S);ms(_,!1),Z&&lo(Z),!ot&&(E=H&&H.onVnodeBeforeMount)&&Pt(E,fe,S),ms(_,!0);{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(Ae);const Ze=_.subTree=Va(_);$(null,Ze,N,U,_,j,M),S.el=Ze.el}if(le&&mt(le,j),!ot&&(E=H&&H.onVnodeMounted)){const Ze=S;mt(()=>Pt(E,fe,Ze),j)}(S.shapeFlag&256||fe&&Ks(fe.vnode)&&fe.vnode.shapeFlag&256)&&_.a&&mt(_.a,j),_.isMounted=!0,S=N=U=null}};_.scope.on();const y=_.effect=new Ql(G);_.scope.off();const b=_.update=y.run.bind(y),T=_.job=y.runIfDirty.bind(y);T.i=_,T.id=_.uid,y.scheduler=()=>ra(T),ms(_,!0),b()},ne=(_,S,N)=>{S.component=_;const U=_.vnode.props;_.vnode=S,_.next=null,Bd(_,S.props,U,N),jd(_,S.children,N),Yt(),Da(_),Xt()},K=(_,S,N,U,j,M,q,G,y=!1)=>{const b=_&&_.children,T=_?_.shapeFlag:0,E=S.children,{patchFlag:B,shapeFlag:H}=S;if(B>0){if(B&128){J(b,E,N,U,j,M,q,G,y);return}else if(B&256){se(b,E,N,U,j,M,q,G,y);return}}H&8?(T&16&&Qe(b,j,M),E!==b&&f(N,E)):T&16?H&16?J(b,E,N,U,j,M,q,G,y):Qe(b,j,M,!0):(T&8&&f(N,""),H&16&&Y(E,N,U,j,M,q,G,y))},se=(_,S,N,U,j,M,q,G,y)=>{_=_||js,S=S||js;const b=_.length,T=S.length,E=Math.min(b,T);let B;for(B=0;B<E;B++){const H=S[B]=y?rs(S[B]):Bt(S[B]);$(_[B],H,N,null,j,M,q,G,y)}b>T?Qe(_,j,M,!0,!1,E):Y(S,N,U,j,M,q,G,y,E)},J=(_,S,N,U,j,M,q,G,y)=>{let b=0;const T=S.length;let E=_.length-1,B=T-1;for(;b<=E&&b<=B;){const H=_[b],Z=S[b]=y?rs(S[b]):Bt(S[b]);if(dn(H,Z))$(H,Z,N,null,j,M,q,G,y);else break;b++}for(;b<=E&&b<=B;){const H=_[E],Z=S[B]=y?rs(S[B]):Bt(S[B]);if(dn(H,Z))$(H,Z,N,null,j,M,q,G,y);else break;E--,B--}if(b>E){if(b<=B){const H=B+1,Z=H<T?S[H].el:U;for(;b<=B;)$(null,S[b]=y?rs(S[b]):Bt(S[b]),N,Z,j,M,q,G,y),b++}}else if(b>B)for(;b<=E;)oe(_[b],j,M,!0),b++;else{const H=b,Z=b,le=new Map;for(b=Z;b<=B;b++){const Le=S[b]=y?rs(S[b]):Bt(S[b]);Le.key!=null&&le.set(Le.key,b)}let fe,Ee=0;const Ae=B-Z+1;let ot=!1,Ze=0;const rt=new Array(Ae);for(b=0;b<Ae;b++)rt[b]=0;for(b=H;b<=E;b++){const Le=_[b];if(Ee>=Ae){oe(Le,j,M,!0);continue}let Fe;if(Le.key!=null)Fe=le.get(Le.key);else for(fe=Z;fe<=B;fe++)if(rt[fe-Z]===0&&dn(Le,S[fe])){Fe=fe;break}Fe===void 0?oe(Le,j,M,!0):(rt[Fe-Z]=b+1,Fe>=Ze?Ze=Fe:ot=!0,$(Le,S[Fe],N,null,j,M,q,G,y),Ee++)}const Nt=ot?Wd(rt):js;for(fe=Nt.length-1,b=Ae-1;b>=0;b--){const Le=Z+b,Fe=S[Le],ln=S[Le+1],Se=Le+1<T?ln.el||Hi(ln):U;rt[b]===0?$(null,Fe,N,Se,j,M,q,G,y):ot&&(fe<0||b!==Nt[fe]?V(Fe,N,Se,2):fe--)}}},V=(_,S,N,U,j=null)=>{const{el:M,type:q,transition:G,children:y,shapeFlag:b}=_;if(b&6){V(_.component.subTree,S,N,U);return}if(b&128){_.suspense.move(S,N,U);return}if(b&64){q.move(_,S,N,re);return}if(q===te){n(M,S,N);for(let E=0;E<y.length;E++)V(y[E],S,N,U);n(_.anchor,S,N);return}if(q===co){x(_,S,N);return}if(U!==2&&b&1&&G)if(U===0)G.beforeEnter(M),n(M,S,N),mt(()=>G.enter(M),j);else{const{leave:E,delayLeave:B,afterLeave:H}=G,Z=()=>{_.ctx.isUnmounted?o(M):n(M,S,N)},le=()=>{M._isLeaving&&M[rd](!0),E(M,()=>{Z(),H&&H()})};B?B(M,Z,le):le()}else n(M,S,N)},oe=(_,S,N,U=!1,j=!1)=>{const{type:M,props:q,ref:G,children:y,dynamicChildren:b,shapeFlag:T,patchFlag:E,dirs:B,cacheIndex:H}=_;if(E===-2&&(j=!1),G!=null&&(Yt(),xn(G,null,N,_,!0),Xt()),H!=null&&(S.renderCache[H]=void 0),T&256){S.ctx.deactivate(_);return}const Z=T&1&&B,le=!Ks(_);let fe;if(le&&(fe=q&&q.onVnodeBeforeUnmount)&&Pt(fe,S,_),T&6)bt(_.component,N,U);else{if(T&128){_.suspense.unmount(N,U);return}Z&&vs(_,null,S,"beforeUnmount"),T&64?_.type.remove(_,S,N,re,U):b&&!b.hasOnce&&(M!==te||E>0&&E&64)?Qe(b,S,N,!1,!0):(M===te&&E&384||!j&&T&16)&&Qe(y,S,N),U&&ze(_)}(le&&(fe=q&&q.onVnodeUnmounted)||Z)&&mt(()=>{fe&&Pt(fe,S,_),Z&&vs(_,null,S,"unmounted")},N)},ze=_=>{const{type:S,el:N,anchor:U,transition:j}=_;if(S===te){ct(N,U);return}if(S===co){P(_);return}const M=()=>{o(N),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(_.shapeFlag&1&&j&&!j.persisted){const{leave:q,delayLeave:G}=j,y=()=>q(N,M);G?G(_.el,M,y):y()}else M()},ct=(_,S)=>{let N;for(;_!==S;)N=v(_),o(_),_=N;o(S)},bt=(_,S,N)=>{const{bum:U,scope:j,job:M,subTree:q,um:G,m:y,a:b}=_;Ga(y),Ga(b),U&&lo(U),j.stop(),M&&(M.flags|=8,oe(q,_,S,N)),G&&mt(G,S),mt(()=>{_.isUnmounted=!0},S)},Qe=(_,S,N,U=!1,j=!1,M=0)=>{for(let q=M;q<_.length;q++)oe(_[q],S,N,U,j)},F=_=>{if(_.shapeFlag&6)return F(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const S=v(_.anchor||_.el),N=S&&S[nd];return N?v(N):S};let ee=!1;const Q=(_,S,N)=>{let U;_==null?S._vnode&&(oe(S._vnode,null,null,!0),U=S._vnode.component):$(S._vnode||null,_,S,null,null,null,N),S._vnode=_,ee||(ee=!0,Da(U),gi(),ee=!1)},re={p:$,um:oe,m:V,r:ze,mt:Ve,mc:Y,pc:K,pbc:pe,n:F,o:e};return{render:Q,hydrate:void 0,createApp:Nd(Q)}}function nr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ms({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Kd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fi(e,t,s=!1){const n=e.children,o=t.children;if(ie(n)&&ie(o))for(let r=0;r<n.length;r++){const a=n[r];let i=o[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[r]=rs(o[r]),i.el=a.el),!s&&i.patchFlag!==-2&&Fi(a,i)),i.type===Ho&&(i.patchFlag!==-1?i.el=a.el:i.__elIndex=r+(e.type===te?1:0)),i.type===Zt&&!i.el&&(i.el=a.el)}}function Wd(e){const t=e.slice(),s=[0];let n,o,r,a,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(r=0,a=s.length-1;r<a;)i=r+a>>1,e[s[i]]<u?r=i+1:a=i;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,a=s[r-1];r-- >0;)s[r]=a,a=t[a];return s}function ji(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ji(t)}function Ga(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Hi(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Hi(t.subTree):null}const Vi=e=>e.__isSuspense;function Gd(e,t){t&&t.pendingBranch?ie(e)?t.effects.push(...e):t.effects.push(e):Qu(e)}const te=Symbol.for("v-fgt"),Ho=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),co=Symbol.for("v-stc"),Nn=[];let gt=null;function p(e=!1){Nn.push(gt=e?null:[])}function zd(){Nn.pop(),gt=Nn[Nn.length-1]||null}let Dn=1;function bo(e,t=!1){Dn+=e,e<0&&gt&&t&&(gt.hasOnce=!0)}function Ki(e){return e.dynamicChildren=Dn>0?gt||js:null,zd(),Dn>0&&gt&&gt.push(e),e}function h(e,t,s,n,o,r){return Ki(c(e,t,s,n,o,r,!0))}function De(e,t,s,n,o){return Ki(ue(e,t,s,n,o,!0))}function Bn(e){return e?e.__v_isVNode===!0:!1}function dn(e,t){return e.type===t.type&&e.key===t.key}const Wi=({key:e})=>e??null,uo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ue(e)||nt(e)||de(e)?{i:Je,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,r=e===te?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wi(t),ref:t&&uo(t),scopeId:bi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Je};return i?(ua(l,s),r&128&&e.normalize(l)):s&&(l.shapeFlag|=Ue(s)?8:16),Dn>0&&!a&&gt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&gt.push(l),l}const ue=Jd;function Jd(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===yd)&&(e=Zt),Bn(e)){const i=Js(e,t,!0);return s&&ua(i,s),Dn>0&&!r&&gt&&(i.shapeFlag&6?gt[gt.indexOf(e)]=i:gt.push(i)),i.patchFlag=-2,i}if(af(e)&&(e=e.__vccOpts),t){t=qd(t);let{class:i,style:l}=t;i&&!Ue(i)&&(t.class=ae(i)),$e(l)&&(oa(l)&&!ie(l)&&(l=Ye({},l)),t.style=kt(l))}const a=Ue(e)?1:Vi(e)?128:od(e)?64:$e(e)?4:de(e)?2:0;return c(e,t,s,n,o,a,r,!0)}function qd(e){return e?oa(e)||Pi(e)?Ye({},e):e:null}function Js(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:a,children:i,transition:l}=e,u=t?Yd(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Wi(u),ref:t&&t.ref?s&&r?ie(r)?r.concat(uo(t)):[r,uo(t)]:uo(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==te?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Js(e.ssContent),ssFallback:e.ssFallback&&Js(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&aa(f,l.clone(f)),f}function xs(e=" ",t=0){return ue(Ho,null,e,t)}function _o(e,t){const s=ue(co,null,e);return s.staticCount=t,s}function D(e="",t=!1){return t?(p(),De(Zt,null,e)):ue(Zt,null,e)}function Bt(e){return e==null||typeof e=="boolean"?ue(Zt):ie(e)?ue(te,null,e.slice()):Bn(e)?rs(e):ue(Ho,null,String(e))}function rs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Js(e)}function ua(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ie(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),ua(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Pi(t)?t._ctx=Je:o===3&&Je&&(Je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else de(t)?(t={default:t,_ctx:Je},s=32):(t=String(t),n&64?(s=16,t=[xs(t)]):s=8);e.children=t,e.shapeFlag|=s}function Yd(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ae([t.class,n.class]));else if(o==="style")t.style=kt([t.style,n.style]);else if(Ro(o)){const r=t[o],a=n[o];a&&r!==a&&!(ie(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=n[o])}return t}function Pt(e,t,s,n=null){Ft(e,t,7,[s,n])}const Xd=Ei();let Qd=0;function Zd(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Xd,r={uid:Qd++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Su(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Di(n,o),emitsOptions:Oi(n,o),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:n.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ed.bind(null,r),e.ce&&e.ce(r),r}let st=null;const ef=()=>st||Je;let wo,xr;{const e=Bo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(a=>a(r)):o[0](r)}};wo=t("__VUE_INSTANCE_SETTERS__",s=>st=s),xr=t("__VUE_SSR_SETTERS__",s=>Un=s)}const Gn=e=>{const t=st;return wo(e),e.scope.on(),()=>{e.scope.off(),wo(t)}},za=()=>{st&&st.scope.off(),wo(null)};function Gi(e){return e.vnode.shapeFlag&4}let Un=!1;function tf(e,t=!1,s=!1){t&&xr(t);const{props:n,children:o}=e.vnode,r=Gi(e);Dd(e,n,r,t),Fd(e,o,s||t);const a=r?sf(e,t):void 0;return t&&xr(!1),a}function sf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wd);const{setup:n}=s;if(n){Yt();const o=e.setupContext=n.length>1?of(e):null,r=Gn(e),a=Wn(n,e,0,[e.props,o]),i=Wl(a);if(Xt(),r(),(i||e.sp)&&!Ks(e)&&Ci(e),i){if(a.then(za,za),t)return a.then(l=>{Ja(e,l)}).catch(l=>{Mo(l,e,0)});e.asyncDep=a}else Ja(e,a)}else zi(e)}function Ja(e,t,s){de(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$e(t)&&(e.setupState=mi(t)),zi(e)}function zi(e,t,s){const n=e.type;e.render||(e.render=n.render||Ut);{const o=Gn(e);Yt();try{Sd(e)}finally{Xt(),o()}}}const nf={get(e,t){return tt(e,"get",""),e[t]}};function of(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,nf),slots:e.slots,emit:e.emit,expose:t}}function Vo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(mi(Hu(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in An)return An[s](e)},has(t,s){return s in t||s in An}})):e.proxy}function rf(e,t=!0){return de(e)?e.displayName||e.name:e.name||t&&e.__name}function af(e){return de(e)&&"__vccOpts"in e}const O=(e,t)=>zu(e,t,Un);function Ji(e,t,s){try{bo(-1);const n=arguments.length;return n===2?$e(t)&&!ie(t)?Bn(t)?ue(e,null,[t]):ue(e,t):ue(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Bn(s)&&(s=[s]),ue(e,t,s))}finally{bo(1)}}const lf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ar;const qa=typeof window<"u"&&window.trustedTypes;if(qa)try{Ar=qa.createPolicy("vue",{createHTML:e=>e})}catch{}const qi=Ar?e=>Ar.createHTML(e):e=>e,cf="http://www.w3.org/2000/svg",uf="http://www.w3.org/1998/Math/MathML",Vt=typeof document<"u"?document:null,Ya=Vt&&Vt.createElement("template"),df={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Vt.createElementNS(cf,e):t==="mathml"?Vt.createElementNS(uf,e):s?Vt.createElement(e,{is:s}):Vt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Vt.createTextNode(e),createComment:e=>Vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const a=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Ya.innerHTML=qi(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Ya.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ff=Symbol("_vtc");function vf(e,t,s){const n=e[ff];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Xa=Symbol("_vod"),mf=Symbol("_vsh"),pf=Symbol(""),hf=/(?:^|;)\s*display\s*:/;function gf(e,t,s){const n=e.style,o=Ue(s);let r=!1;if(s&&!o){if(t)if(Ue(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();s[i]==null&&fo(n,i,"")}else for(const a in t)s[a]==null&&fo(n,a,"");for(const a in s)a==="display"&&(r=!0),fo(n,a,s[a])}else if(o){if(t!==s){const a=n[pf];a&&(s+=";"+a),n.cssText=s,r=hf.test(s)}}else t&&e.removeAttribute("style");Xa in e&&(e[Xa]=r?n.display:"",e[mf]&&(n.display="none"))}const Qa=/\s*!important$/;function fo(e,t,s){if(ie(s))s.forEach(n=>fo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=yf(e,t);Qa.test(s)?e.setProperty(ds(n),s.replace(Qa,""),"important"):e[n]=s}}const Za=["Webkit","Moz","ms"],or={};function yf(e,t){const s=or[t];if(s)return s;let n=$t(t);if(n!=="filter"&&n in e)return or[t]=n;n=Lo(n);for(let o=0;o<Za.length;o++){const r=Za[o]+n;if(r in e)return or[t]=r}return t}const el="http://www.w3.org/1999/xlink";function tl(e,t,s,n,o,r=_u(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(el,t.slice(6,t.length)):e.setAttributeNS(el,t,s):s==null||r&&!ql(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Ot(s)?String(s):s)}function sl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?qi(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(i!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let a=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=ql(s):s==null&&i==="string"?(s="",a=!0):i==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(o||t)}function Gt(e,t,s,n){e.addEventListener(t,s,n)}function bf(e,t,s,n){e.removeEventListener(t,s,n)}const nl=Symbol("_vei");function _f(e,t,s,n,o=null){const r=e[nl]||(e[nl]={}),a=r[t];if(n&&a)a.value=n;else{const[i,l]=wf(t);if(n){const u=r[t]=$f(n,o);Gt(e,i,u,l)}else a&&(bf(e,i,a,l),r[t]=void 0)}}const ol=/(?:Once|Passive|Capture)$/;function wf(e){let t;if(ol.test(e)){t={};let n;for(;n=e.match(ol);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ds(e.slice(2)),t]}let rr=0;const Sf=Promise.resolve(),Cf=()=>rr||(Sf.then(()=>rr=0),rr=Date.now());function $f(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ft(kf(n,s.value),t,5,[n])};return s.value=e,s.attached=Cf(),s}function kf(e,t){if(ie(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const rl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xf=(e,t,s,n,o,r)=>{const a=o==="svg";t==="class"?vf(e,n,a):t==="style"?gf(e,s,n):Ro(t)?Jr(t)||_f(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Af(e,t,n,a))?(sl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tl(e,t,n,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ue(n))?sl(e,$t(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),tl(e,t,n,a))};function Af(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&rl(t)&&de(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return rl(t)&&Ue(s)?!1:t in e}const cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ie(t)?s=>lo(t,s):t};function Nf(e){e.target.composing=!0}function al(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ct=Symbol("_assign");function ll(e,t,s){return t&&(e=e.trim()),s&&(e=Do(e)),e}const vt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ct]=cs(o);const r=n||o.props&&o.props.type==="number";Gt(e,t?"change":"input",a=>{a.target.composing||e[Ct](ll(e.value,s,r))}),(s||r)&&Gt(e,"change",()=>{e.value=ll(e.value,s,r)}),t||(Gt(e,"compositionstart",Nf),Gt(e,"compositionend",al),Gt(e,"change",al))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},a){if(e[Ct]=cs(a),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?Do(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===l)||(e.value=l))}},da={deep:!0,created(e,t,s){e[Ct]=cs(s),Gt(e,"change",()=>{const n=e._modelValue,o=qs(e),r=e.checked,a=e[Ct];if(ie(n)){const i=Xr(n,o),l=i!==-1;if(r&&!l)a(n.concat(o));else if(!r&&l){const u=[...n];u.splice(i,1),a(u)}}else if(on(n)){const i=new Set(n);r?i.add(o):i.delete(o),a(i)}else a(Yi(e,r))})},mounted:il,beforeUpdate(e,t,s){e[Ct]=cs(s),il(e,t,s)}};function il(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ie(t))o=Xr(t,n.props.value)>-1;else if(on(t))o=t.has(n.props.value);else{if(t===s)return;o=ks(t,Yi(e,!0))}e.checked!==o&&(e.checked=o)}const cl={created(e,{value:t},s){e.checked=ks(t,s.props.value),e[Ct]=cs(s),Gt(e,"change",()=>{e[Ct](qs(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ct]=cs(n),t!==s&&(e.checked=ks(t,n.props.value))}},Tn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=on(t);Gt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?Do(qs(a)):qs(a));e[Ct](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Pn(()=>{e._assigning=!1})}),e[Ct]=cs(n)},mounted(e,{value:t}){ul(e,t)},beforeUpdate(e,t,s){e[Ct]=cs(s)},updated(e,{value:t}){e._assigning||ul(e,t)}};function ul(e,t){const s=e.multiple,n=ie(t);if(!(s&&!n&&!on(t))){for(let o=0,r=e.options.length;o<r;o++){const a=e.options[o],i=qs(a);if(s)if(n){const l=typeof i;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(i)):a.selected=Xr(t,i)>-1}else a.selected=t.has(i);else if(ks(qs(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function qs(e){return"_value"in e?e._value:e.value}function Yi(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Tf=["ctrl","shift","alt","meta"],Ef={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Tf.some(s=>e[`${s}Key`]&&!t.includes(s))},es=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let a=0;a<t.length;a++){const i=Ef[t[a]];if(i&&i(o,t))return}return e(o,...r)})},Of={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},So=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const r=ds(o.key);if(t.some(a=>a===r||Of[a]===r))return e(o)})},If=Ye({patchProp:xf},df);let dl;function Rf(){return dl||(dl=Hd(If))}const Pf=(...e)=>{const t=Rf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Df(n);if(!o)return;const r=t._component;!de(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=s(o,!1,Lf(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function Lf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Df(e){return Ue(e)?document.querySelector(e):e}const me=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Bf={};function Uf(e,t){const s=gd("router-view");return p(),De(s)}const Mf=me(Bf,[["render",Uf]]),Ff="modulepreload",jf=function(e){return"/"+e},fl={},Hf=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(s.map(l=>{if(l=jf(l),l in fl)return;fl[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ff,u||(d.as="script"),d.crossOrigin="",d.href=l,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((v,m)=>{d.addEventListener("load",v),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&r(i.reason);return t().catch(r)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ls=typeof document<"u";function Xi(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Vf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Xi(e.default)}const ye=Object.assign;function ar(e,t){const s={};for(const n in t){const o=t[n];s[n]=Rt(o)?o.map(e):e(o)}return s}const En=()=>{},Rt=Array.isArray;function vl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Qi=/#/g,Kf=/&/g,Wf=/\//g,Gf=/=/g,zf=/\?/g,Zi=/\+/g,Jf=/%5B/g,qf=/%5D/g,ec=/%5E/g,Yf=/%60/g,tc=/%7B/g,Xf=/%7C/g,sc=/%7D/g,Qf=/%20/g;function fa(e){return e==null?"":encodeURI(""+e).replace(Xf,"|").replace(Jf,"[").replace(qf,"]")}function Zf(e){return fa(e).replace(tc,"{").replace(sc,"}").replace(ec,"^")}function Nr(e){return fa(e).replace(Zi,"%2B").replace(Qf,"+").replace(Qi,"%23").replace(Kf,"%26").replace(Yf,"`").replace(tc,"{").replace(sc,"}").replace(ec,"^")}function ev(e){return Nr(e).replace(Gf,"%3D")}function tv(e){return fa(e).replace(Qi,"%23").replace(zf,"%3F")}function sv(e){return tv(e).replace(Wf,"%2F")}function Mn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const nv=/\/$/,ov=e=>e.replace(nv,"");function lr(e,t,s="/"){let n,o={},r="",a="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(n=t.slice(0,l),r=t.slice(l,i>0?i:t.length),o=e(r.slice(1))),i>=0&&(n=n||t.slice(0,i),a=t.slice(i,t.length)),n=iv(n??t,s),{fullPath:n+r+a,path:n,query:o,hash:Mn(a)}}function rv(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ml(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function av(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&Ys(t.matched[n],s.matched[o])&&nc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Ys(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function nc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!lv(e[s],t[s]))return!1;return!0}function lv(e,t){return Rt(e)?pl(e,t):Rt(t)?pl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function pl(e,t){return Rt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function iv(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let r=s.length-1,a,i;for(a=0;a<n.length;a++)if(i=n[a],i!==".")if(i==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Tr=function(e){return e.pop="pop",e.push="push",e}({}),ir=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function cv(e){if(!e)if(Ls){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ov(e)}const uv=/^[^#]+#/;function dv(e,t){return e.replace(uv,"#")+t}function fv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Ko=()=>({left:window.scrollX,top:window.scrollY});function vv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=fv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function hl(e,t){return(history.state?history.state.position-t:-1)+e}const Er=new Map;function mv(e,t){Er.set(e,t)}function pv(e){const t=Er.get(e);return Er.delete(e),t}function hv(e){return typeof e=="string"||e&&typeof e=="object"}function oc(e){return typeof e=="string"||typeof e=="symbol"}let Re=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const rc=Symbol("");Re.MATCHER_NOT_FOUND+"",Re.NAVIGATION_GUARD_REDIRECT+"",Re.NAVIGATION_ABORTED+"",Re.NAVIGATION_CANCELLED+"",Re.NAVIGATION_DUPLICATED+"";function Xs(e,t){return ye(new Error,{type:e,[rc]:!0},t)}function Ht(e,t){return e instanceof Error&&rc in e&&(t==null||!!(e.type&t))}const gv=["params","query","hash"];function yv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of gv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function bv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Zi," "),r=o.indexOf("="),a=Mn(r<0?o:o.slice(0,r)),i=r<0?null:Mn(o.slice(r+1));if(a in t){let l=t[a];Rt(l)||(l=t[a]=[l]),l.push(i)}else t[a]=i}return t}function gl(e){let t="";for(let s in e){const n=e[s];if(s=ev(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Rt(n)?n.map(o=>o&&Nr(o)):[n&&Nr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function _v(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Rt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const wv=Symbol(""),yl=Symbol(""),Wo=Symbol(""),va=Symbol(""),Or=Symbol("");function fn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function as(e,t,s,n,o,r=a=>a()){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,l)=>{const u=v=>{v===!1?l(Xs(Re.NAVIGATION_ABORTED,{from:s,to:t})):v instanceof Error?l(v):hv(v)?l(Xs(Re.NAVIGATION_GUARD_REDIRECT,{from:t,to:v})):(a&&n.enterCallbacks[o]===a&&typeof v=="function"&&a.push(v),i())},f=r(()=>e.call(n&&n.instances[o],t,s,u));let d=Promise.resolve(f);e.length<3&&(d=d.then(u)),d.catch(v=>l(v))})}function cr(e,t,s,n,o=r=>r()){const r=[];for(const a of e)for(const i in a.components){let l=a.components[i];if(!(t!=="beforeRouteEnter"&&!a.instances[i]))if(Xi(l)){const u=(l.__vccOpts||l)[t];u&&r.push(as(u,s,n,a,i,o))}else{let u=l();r.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const d=Vf(f)?f.default:f;a.mods[i]=f,a.components[i]=d;const v=(d.__vccOpts||d)[t];return v&&as(v,s,n,a,i,o)()}))}}return r}function Sv(e,t){const s=[],n=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(u=>Ys(u,i))?n.push(i):s.push(i));const l=e.matched[a];l&&(t.matched.find(u=>Ys(u,l))||o.push(l))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Cv=()=>location.protocol+"//"+location.host;function ac(e,t){const{pathname:s,search:n,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,i=o.slice(a);return i[0]!=="/"&&(i="/"+i),ml(i,"")}return ml(s,e)+n+o}function $v(e,t,s,n){let o=[],r=[],a=null;const i=({state:v})=>{const m=ac(e,location),g=s.value,$=t.value;let R=0;if(v){if(s.value=m,t.value=v,a&&a===g){a=null;return}R=$?v.position-$.position:0}else n(m);o.forEach(k=>{k(s.value,g,{delta:R,type:Tr.pop,direction:R?R>0?ir.forward:ir.back:ir.unknown})})};function l(){a=s.value}function u(v){o.push(v);const m=()=>{const g=o.indexOf(v);g>-1&&o.splice(g,1)};return r.push(m),m}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(ye({},v.state,{scroll:Ko()}),"")}}function d(){for(const v of r)v();r=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:d}}function bl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Ko():null}}function kv(e){const{history:t,location:s}=window,n={value:ac(e,s)},o={value:t.state};o.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,f){const d=e.indexOf("#"),v=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+l:Cv()+e+l;try{t[f?"replaceState":"pushState"](u,"",v),o.value=u}catch(m){console.error(m),s[f?"replace":"assign"](v)}}function a(l,u){r(l,ye({},t.state,bl(o.value.back,l,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=l}function i(l,u){const f=ye({},o.value,t.state,{forward:l,scroll:Ko()});r(f.current,f,!0),r(l,ye({},bl(n.value,l,null),{position:f.position+1},u),!1),n.value=l}return{location:n,state:o,push:i,replace:a}}function xv(e){e=cv(e);const t=kv(e),s=$v(e,t.state,t.location,t.replace);function n(r,a=!0){a||s.pauseListeners(),history.go(r)}const o=ye({location:"",base:e,go:n,createHref:dv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Av(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),xv(e)}let ws=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var He=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(He||{});const Nv={type:ws.Static,value:""},Tv=/[a-zA-Z0-9_]/;function Ev(e){if(!e)return[[]];if(e==="/")return[[Nv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${u}": ${m}`)}let s=He.Static,n=s;const o=[];let r;function a(){r&&o.push(r),r=[]}let i=0,l,u="",f="";function d(){u&&(s===He.Static?r.push({type:ws.Static,value:u}):s===He.Param||s===He.ParamRegExp||s===He.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ws.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function v(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&s!==He.ParamRegExp){n=s,s=He.EscapeNext;continue}switch(s){case He.Static:l==="/"?(u&&d(),a()):l===":"?(d(),s=He.Param):v();break;case He.EscapeNext:v(),s=n;break;case He.Param:l==="("?s=He.ParamRegExp:Tv.test(l)?v():(d(),s=He.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case He.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:s=He.ParamRegExpEnd:f+=l;break;case He.ParamRegExpEnd:d(),s=He.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===He.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),o}const _l="[^/]+?",Ov={sensitive:!1,strict:!1,start:!0,end:!0};var lt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(lt||{});const Iv=/[.+*?^${}()[\]/\\]/g;function Rv(e,t){const s=ye({},Ov,t),n=[];let o=s.start?"^":"";const r=[];for(const u of e){const f=u.length?[]:[lt.Root];s.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const v=u[d];let m=lt.Segment+(s.sensitive?lt.BonusCaseSensitive:0);if(v.type===ws.Static)d||(o+="/"),o+=v.value.replace(Iv,"\\$&"),m+=lt.Static;else if(v.type===ws.Param){const{value:g,repeatable:$,optional:R,regexp:k}=v;r.push({name:g,repeatable:$,optional:R});const C=k||_l;if(C!==_l){m+=lt.BonusCustomRegExp;try{`${C}`}catch(P){throw new Error(`Invalid custom RegExp for param "${g}" (${C}): `+P.message)}}let x=$?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;d||(x=R&&u.length<2?`(?:/${x})`:"/"+x),R&&(x+="?"),o+=x,m+=lt.Dynamic,R&&(m+=lt.BonusOptional),$&&(m+=lt.BonusRepeatable),C===".*"&&(m+=lt.BonusWildcard)}f.push(m)}n.push(f)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=lt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,s.sensitive?"":"i");function i(u){const f=u.match(a),d={};if(!f)return null;for(let v=1;v<f.length;v++){const m=f[v]||"",g=r[v-1];d[g.name]=m&&g.repeatable?m.split("/"):m}return d}function l(u){let f="",d=!1;for(const v of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const m of v)if(m.type===ws.Static)f+=m.value;else if(m.type===ws.Param){const{value:g,repeatable:$,optional:R}=m,k=g in u?u[g]:"";if(Rt(k)&&!$)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const C=Rt(k)?k.join("/"):k;if(!C)if(R)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=C}}return f||"/"}return{re:a,score:n,keys:r,parse:i,stringify:l}}function Pv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===lt.Static+lt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===lt.Static+lt.Segment?1:-1:0}function lc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const r=Pv(n[s],o[s]);if(r)return r;s++}if(Math.abs(o.length-n.length)===1){if(wl(n))return 1;if(wl(o))return-1}return o.length-n.length}function wl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Lv={strict:!1,end:!0,sensitive:!1};function Dv(e,t,s){const n=Rv(Ev(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Bv(e,t){const s=[],n=new Map;t=vl(Lv,t);function o(d){return n.get(d)}function r(d,v,m){const g=!m,$=Cl(d);$.aliasOf=m&&m.record;const R=vl(t,d),k=[$];if("alias"in d){const P=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of P)k.push(Cl(ye({},$,{components:m?m.record.components:$.components,path:W,aliasOf:m?m.record:$})))}let C,x;for(const P of k){const{path:W}=P;if(v&&W[0]!=="/"){const z=v.record.path,L=z[z.length-1]==="/"?"":"/";P.path=v.record.path+(W&&L+W)}if(C=Dv(P,v,R),m?m.alias.push(C):(x=x||C,x!==C&&x.alias.push(C),g&&d.name&&!$l(C)&&a(d.name)),ic(C)&&l(C),$.children){const z=$.children;for(let L=0;L<z.length;L++)r(z[L],C,m&&m.children[L])}m=m||C}return x?()=>{a(x)}:En}function a(d){if(oc(d)){const v=n.get(d);v&&(n.delete(d),s.splice(s.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=s.indexOf(d);v>-1&&(s.splice(v,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function i(){return s}function l(d){const v=Fv(d,s);s.splice(v,0,d),d.record.name&&!$l(d)&&n.set(d.record.name,d)}function u(d,v){let m,g={},$,R;if("name"in d&&d.name){if(m=n.get(d.name),!m)throw Xs(Re.MATCHER_NOT_FOUND,{location:d});R=m.record.name,g=ye(Sl(v.params,m.keys.filter(x=>!x.optional).concat(m.parent?m.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&Sl(d.params,m.keys.map(x=>x.name))),$=m.stringify(g)}else if(d.path!=null)$=d.path,m=s.find(x=>x.re.test($)),m&&(g=m.parse($),R=m.record.name);else{if(m=v.name?n.get(v.name):s.find(x=>x.re.test(v.path)),!m)throw Xs(Re.MATCHER_NOT_FOUND,{location:d,currentLocation:v});R=m.record.name,g=ye({},v.params,d.params),$=m.stringify(g)}const k=[];let C=m;for(;C;)k.unshift(C.record),C=C.parent;return{name:R,path:$,params:g,matched:k,meta:Mv(k)}}e.forEach(d=>r(d));function f(){s.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function Sl(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Cl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Uv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Uv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function $l(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Mv(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function Fv(e,t){let s=0,n=t.length;for(;s!==n;){const r=s+n>>1;lc(e,t[r])<0?n=r:s=r+1}const o=jv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function jv(e){let t=e;for(;t=t.parent;)if(ic(t)&&lc(e,t)===0)return t}function ic({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function kl(e){const t=Et(Wo),s=Et(va),n=O(()=>{const l=I(e.to);return t.resolve(l)}),o=O(()=>{const{matched:l}=n.value,{length:u}=l,f=l[u-1],d=s.matched;if(!f||!d.length)return-1;const v=d.findIndex(Ys.bind(null,f));if(v>-1)return v;const m=xl(l[u-2]);return u>1&&xl(f)===m&&d[d.length-1].path!==m?d.findIndex(Ys.bind(null,l[u-2])):v}),r=O(()=>o.value>-1&&Gv(s.params,n.value.params)),a=O(()=>o.value>-1&&o.value===s.matched.length-1&&nc(s.params,n.value.params));function i(l={}){if(Wv(l)){const u=t[I(e.replace)?"replace":"push"](I(e.to)).catch(En);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:O(()=>n.value.href),isActive:r,isExactActive:a,navigate:i}}function Hv(e){return e.length===1?e[0]:e}const Vv=Si({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:kl,setup(e,{slots:t}){const s=Mt(kl(e)),{options:n}=Et(Wo),o=O(()=>({[Al(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Al(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=t.default&&Hv(t.default(s));return e.custom?r:Ji("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},r)}}}),Kv=Vv;function Wv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Gv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Rt(o)||o.length!==n.length||n.some((r,a)=>r.valueOf()!==o[a].valueOf()))return!1}return!0}function xl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Al=(e,t,s)=>e??t??s,zv=Si({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Et(Or),o=O(()=>e.route||n.value),r=Et(yl,0),a=O(()=>{let u=I(r);const{matched:f}=o.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),i=O(()=>o.value.matched[a.value]);io(yl,O(()=>a.value+1)),io(wv,i),io(Or,o);const l=A();return ft(()=>[l.value,i.value,e.name],([u,f,d],[v,m,g])=>{f&&(f.instances[d]=u,m&&m!==f&&u&&u===v&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),u&&f&&(!m||!Ys(f,m)||!v)&&(f.enterCallbacks[d]||[]).forEach($=>$(u))},{flush:"post"}),()=>{const u=o.value,f=e.name,d=i.value,v=d&&d.components[f];if(!v)return Nl(s.default,{Component:v,route:u});const m=d.props[f],g=m?m===!0?u.params:typeof m=="function"?m(u):m:null,R=Ji(v,ye({},g,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return Nl(s.default,{Component:R,route:u})||R}}});function Nl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Jv=zv;function qv(e){const t=Bv(e.routes,e),s=e.parseQuery||bv,n=e.stringifyQuery||gl,o=e.history,r=fn(),a=fn(),i=fn(),l=Vu(ss);let u=ss;Ls&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=ar.bind(null,F=>""+F),d=ar.bind(null,sv),v=ar.bind(null,Mn);function m(F,ee){let Q,re;return oc(F)?(Q=t.getRecordMatcher(F),re=ee):re=F,t.addRoute(re,Q)}function g(F){const ee=t.getRecordMatcher(F);ee&&t.removeRoute(ee)}function $(){return t.getRoutes().map(F=>F.record)}function R(F){return!!t.getRecordMatcher(F)}function k(F,ee){if(ee=ye({},ee||l.value),typeof F=="string"){const N=lr(s,F,ee.path),U=t.resolve({path:N.path},ee),j=o.createHref(N.fullPath);return ye(N,U,{params:v(U.params),hash:Mn(N.hash),redirectedFrom:void 0,href:j})}let Q;if(F.path!=null)Q=ye({},F,{path:lr(s,F.path,ee.path).path});else{const N=ye({},F.params);for(const U in N)N[U]==null&&delete N[U];Q=ye({},F,{params:d(N)}),ee.params=d(ee.params)}const re=t.resolve(Q,ee),ve=F.hash||"";re.params=f(v(re.params));const _=rv(n,ye({},F,{hash:Zf(ve),path:re.path})),S=o.createHref(_);return ye({fullPath:_,hash:ve,query:n===gl?_v(F.query):F.query||{}},re,{redirectedFrom:void 0,href:S})}function C(F){return typeof F=="string"?lr(s,F,l.value.path):ye({},F)}function x(F,ee){if(u!==F)return Xs(Re.NAVIGATION_CANCELLED,{from:ee,to:F})}function P(F){return L(F)}function W(F){return P(ye(C(F),{replace:!0}))}function z(F,ee){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:re}=Q;let ve=typeof re=="function"?re(F,ee):re;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=C(ve):{path:ve},ve.params={}),ye({query:F.query,hash:F.hash,params:ve.path!=null?{}:F.params},ve)}}function L(F,ee){const Q=u=k(F),re=l.value,ve=F.state,_=F.force,S=F.replace===!0,N=z(Q,re);if(N)return L(ye(C(N),{state:typeof N=="object"?ye({},ve,N.state):ve,force:_,replace:S}),ee||Q);const U=Q;U.redirectedFrom=ee;let j;return!_&&av(n,re,Q)&&(j=Xs(Re.NAVIGATION_DUPLICATED,{to:U,from:re}),V(re,re,!0,!1)),(j?Promise.resolve(j):pe(U,re)).catch(M=>Ht(M)?Ht(M,Re.NAVIGATION_GUARD_REDIRECT)?M:J(M):K(M,U,re)).then(M=>{if(M){if(Ht(M,Re.NAVIGATION_GUARD_REDIRECT))return L(ye({replace:S},C(M.to),{state:typeof M.to=="object"?ye({},ve,M.to.state):ve,force:_}),ee||U)}else M=we(U,re,!0,S,ve);return he(U,re,M),M})}function Y(F,ee){const Q=x(F,ee);return Q?Promise.reject(Q):Promise.resolve()}function X(F){const ee=ct.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(F):F()}function pe(F,ee){let Q;const[re,ve,_]=Sv(F,ee);Q=cr(re.reverse(),"beforeRouteLeave",F,ee);for(const N of re)N.leaveGuards.forEach(U=>{Q.push(as(U,F,ee))});const S=Y.bind(null,F,ee);return Q.push(S),Qe(Q).then(()=>{Q=[];for(const N of r.list())Q.push(as(N,F,ee));return Q.push(S),Qe(Q)}).then(()=>{Q=cr(ve,"beforeRouteUpdate",F,ee);for(const N of ve)N.updateGuards.forEach(U=>{Q.push(as(U,F,ee))});return Q.push(S),Qe(Q)}).then(()=>{Q=[];for(const N of _)if(N.beforeEnter)if(Rt(N.beforeEnter))for(const U of N.beforeEnter)Q.push(as(U,F,ee));else Q.push(as(N.beforeEnter,F,ee));return Q.push(S),Qe(Q)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),Q=cr(_,"beforeRouteEnter",F,ee,X),Q.push(S),Qe(Q))).then(()=>{Q=[];for(const N of a.list())Q.push(as(N,F,ee));return Q.push(S),Qe(Q)}).catch(N=>Ht(N,Re.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function he(F,ee,Q){i.list().forEach(re=>X(()=>re(F,ee,Q)))}function we(F,ee,Q,re,ve){const _=x(F,ee);if(_)return _;const S=ee===ss,N=Ls?history.state:{};Q&&(re||S?o.replace(F.fullPath,ye({scroll:S&&N&&N.scroll},ve)):o.push(F.fullPath,ve)),l.value=F,V(F,ee,Q,S),J()}let Oe;function Ve(){Oe||(Oe=o.listen((F,ee,Q)=>{if(!bt.listening)return;const re=k(F),ve=z(re,bt.currentRoute.value);if(ve){L(ye(ve,{replace:!0,force:!0}),re).catch(En);return}u=re;const _=l.value;Ls&&mv(hl(_.fullPath,Q.delta),Ko()),pe(re,_).catch(S=>Ht(S,Re.NAVIGATION_ABORTED|Re.NAVIGATION_CANCELLED)?S:Ht(S,Re.NAVIGATION_GUARD_REDIRECT)?(L(ye(C(S.to),{force:!0}),re).then(N=>{Ht(N,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Tr.pop&&o.go(-1,!1)}).catch(En),Promise.reject()):(Q.delta&&o.go(-Q.delta,!1),K(S,re,_))).then(S=>{S=S||we(re,_,!1),S&&(Q.delta&&!Ht(S,Re.NAVIGATION_CANCELLED)?o.go(-Q.delta,!1):Q.type===Tr.pop&&Ht(S,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),he(re,_,S)}).catch(En)}))}let Ge=fn(),ge=fn(),ne;function K(F,ee,Q){J(F);const re=ge.list();return re.length?re.forEach(ve=>ve(F,ee,Q)):console.error(F),Promise.reject(F)}function se(){return ne&&l.value!==ss?Promise.resolve():new Promise((F,ee)=>{Ge.add([F,ee])})}function J(F){return ne||(ne=!F,Ve(),Ge.list().forEach(([ee,Q])=>F?Q(F):ee()),Ge.reset()),F}function V(F,ee,Q,re){const{scrollBehavior:ve}=e;if(!Ls||!ve)return Promise.resolve();const _=!Q&&pv(hl(F.fullPath,0))||(re||!Q)&&history.state&&history.state.scroll||null;return Pn().then(()=>ve(F,ee,_)).then(S=>S&&vv(S)).catch(S=>K(S,F,ee))}const oe=F=>o.go(F);let ze;const ct=new Set,bt={currentRoute:l,listening:!0,addRoute:m,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:R,getRoutes:$,resolve:k,options:e,push:P,replace:W,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:ge.add,isReady:se,install(F){F.component("RouterLink",Kv),F.component("RouterView",Jv),F.config.globalProperties.$router=bt,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>I(l)}),Ls&&!ze&&l.value===ss&&(ze=!0,P(o.location).catch(re=>{}));const ee={};for(const re in ss)Object.defineProperty(ee,re,{get:()=>l.value[re],enumerable:!0});F.provide(Wo,bt),F.provide(va,fi(ee)),F.provide(Or,l);const Q=F.unmount;ct.add(F),F.unmount=function(){ct.delete(F),ct.size<1&&(u=ss,Oe&&Oe(),Oe=null,l.value=ss,ze=!1,ne=!1),Q()}}};function Qe(F){return F.reduce((ee,Q)=>ee.then(()=>X(Q)),Promise.resolve())}return bt}function Yv(){return Et(Wo)}function tx(e){return Et(va)}function Tl(e){const t=[],s=e.split(`
`);let n=null,o=[],r=!1,a="";for(let i=0;i<s.length;i++){const l=s[i];if(l.startsWith("%"))continue;if(r){l.includes("}")?(a+=l.substring(0,l.indexOf("}")),o.push(a.trim()),a="",r=!1):a+=l+`
`;continue}if(l.includes("{")){const d=l.indexOf("{");if(l.includes("}")){const v=l.indexOf("}");o.push(l.substring(d+1,v).trim())}else a=l.substring(d+1)+`
`,r=!0;continue}const u=l.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const f=l.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,v]=f;if(d==="Board")n&&(n.commentary=Il(o),n.steps=El(o),n.auction=Ol(n.auction),t.push(n)),n=Xv(),n.boardNumber=parseInt(v,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=v;break;case"Vulnerable":n.vulnerable=v;break;case"Contract":n.contract=v;break;case"Declarer":n.declarer=v;break;case"Student":n.studentSeat=v;break;case"Deal":n.hands=Qv(v);break;case"Auction":n.auctionDealer=v;break;case"Result":n.result=v;break;case"Event":n.event=v;break;case"SkillPath":n.skillPath=v;break;case"Category":n.category=v;break;case"Difficulty":n.difficulty=v;break}continue}if(n&&n.auctionDealer){const d=l.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const v=em(d);n.auction.push(...v)}}}return n&&(n.commentary=Il(o),n.steps=El(o),n.auction=Ol(n.auction),t.push(n)),t}function El(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let r="";for(let a=0;a<n.length;a++){const i=n[a],l=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(l){const v=ma(l[1]).replace(/!/g,"").trim(),m=r.trim();r="";let g="";if(a+1<n.length){const k=n[a+1];k.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=k.trim(),a++)}const $=vn(m,"bid"),R=vn(g,"bid");o.push({...$,type:"bid",bid:v,explanationText:R.text,showSeatsAfter:R.showSeats})}else if(u||f){const v=u?"next":"rotate";r.trim()&&o.push(vn(r.trim(),v)),r=""}else if(d){const v=d[1].trim();let m;if(v.toLowerCase().startsWith("any:")?m={cards:v.substring(4).split(",").map($=>Co($.trim())),anyOf:!0}:m={card:Co(v)},r.trim()){const g=vn(r.trim(),"choose-card");g.chooseCard=m,o.push(g)}r=""}else r+=i}if(r.trim()){const a=vn(r.trim(),"end");o.push(a)}return o}function vn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const C=n[1].toUpperCase().trim();if(C==="ALL")s=["N","E","S","W"];else{const x=[];C.includes("N")&&x.push("N"),C.includes("E")&&x.push("E"),C.includes("S")&&x.push("S"),C.includes("W")&&x.push("W"),x.length>0&&(s=x)}}const o=[],r=/\[PLAY\s+([^\]]+)\]/gi;let a;for(;(a=r.exec(e))!==null;)o.push(a[1]);const i=/\[RESET\]/i.test(e);let l=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const C=u[1].trim();C.toLowerCase().startsWith("any:")?l={cards:C.substring(4).split(",").map(P=>Co(P.trim())),anyOf:!0}:l={card:Co(C)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),v=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),v&&(f=!0);const m=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let $=null;const R=e.match(/\[showcards\s+([^\]]+)\]/i);if(R){const C=R[1].trim();$={};const x=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let P;for(;(P=x.exec(C))!==null;){const W=P[1].toUpperCase(),z=P[2].split(",").map(L=>L.trim().toUpperCase());$[W]=z}Object.keys($).length===0&&($=null)}let k=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:ma(k),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:m,clearCommentary:g,showcards:$,chooseCard:l}}function Xv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Co(e){return e.toUpperCase().replace("10","T")}function Qv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const r=s[0],a=r.indexOf(":");if(a!==-1){const i=r.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=r.substring(a+1)}for(let i=0;i<4;i++){const l=(o+i)%4,u=n[l];t[u]=Zv(s[i])}return t}function Zv(e){const t=e.split(".");return t.length!==4?null:{spades:no(t[0]),hearts:no(t[1]),diamonds:no(t[2]),clubs:no(t[3])}}function no(e){return e?e.split(""):[]}function Ol(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function em(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>tm(t))}function tm(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Il(e){return e.length?ma(e.join(`

`)):""}function ma(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function sm(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function oo(e,t){return sm(t)[e%4]}const pa={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Rl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},cc=["spades","hearts","diamonds","clubs"];function ur(e){return e==="T"?"10":e}function ha(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const r=pa[o],a=o==="H"||o==="D"?"red":"black";return{text:`${n}${r}`,html:`${n}<span class="${a}">${r}</span>`}}return{text:e,html:e}}function nm(e){return(Rl[e.toLowerCase()]||Rl[e])==="red"?"suit-red":"suit-black"}function om(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Ir(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function rm(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of cc)for(const o of e[n]||[])s+=t[o]||0;return s}function am(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=pa[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function mn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function lm(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ds(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function im({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:r,studentBid:a,correct:i,attemptNumber:l,timeTakenMs:u,skillPath:f,assignment:d=null}){var $,R,k,C,x,P,W,z,L,Y,X;const v=(($=s.steps)==null?void 0:$.filter(pe=>pe.type==="bid").length)||1,m=s.studentSeat||"S",g=((R=s.hands)==null?void 0:R[m.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:m,hands:{north:((k=s.hands)==null?void 0:k.N)||((C=s.hands)==null?void 0:C.north)||"",east:((x=s.hands)==null?void 0:x.E)||((P=s.hands)==null?void 0:P.east)||"",south:((W=s.hands)==null?void 0:W.S)||((z=s.hands)==null?void 0:z.south)||"",west:((L=s.hands)==null?void 0:L.W)||((Y=s.hands)==null?void 0:Y.west)||""},full_auction:((X=s.auction)==null?void 0:X.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:v,auction_so_far:[...o],expected_bid:r,student_hand:g},result:{student_bid:a,correct:i,attempt_number:l,time_taken_ms:u},skill_path:f,assignment:d}}function uc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function cm(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function um(){return crypto.randomUUID()}function dm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function dc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=r=>r.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function fm(e){const[t]=e.split("/");return t||"uncategorized"}function vm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const fc={name:"AES-GCM",length:256},vc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function mm(){const e=await crypto.subtle.generateKey(fc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Qs(t)}async function mc(e){const t=Fn(e);return crypto.subtle.importKey("raw",t,fc,!0,["encrypt","decrypt"])}async function ga(e,t){const s=await mc(t),n=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(JSON.stringify(e)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{encrypted_data:Qs(a),iv:Qs(n)}}async function pc(e,t,s){const n=await mc(s),o=Fn(e),r=Fn(t),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,o),i=new TextDecoder;return JSON.parse(i.decode(a))}async function pm(e){const t=Fn(e);return crypto.subtle.importKey("spki",t,vc,!0,["encrypt"])}async function hm(){const e=await crypto.subtle.generateKey(vc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Qs(t),privateKey:Qs(s)}}async function hc(e,t){const s=await pm(t),n=Fn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Qs(o)}function gm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function ym(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function bm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await ga(t,e);return(await pc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Qs(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Fn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Rr="bridgePractice",xe=A({}),Be=A(null),us=A(null),jn=A(!1),Go=A(!1);function gc(){try{const e=localStorage.getItem(Rr);if(e){const t=JSON.parse(e);xe.value=t.users||{},Be.value=t.currentUserId||null,us.value=t.adminViewerId||null}jn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),jn.value=!0}}function xt(){try{const e=localStorage.getItem(Rr),t=e?JSON.parse(e):{};t.users=xe.value,t.currentUserId=Be.value,us.value&&(t.adminViewerId=us.value),localStorage.setItem(Rr,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function _m({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:r}){const a=crypto.randomUUID(),i=new Date().toISOString(),l=await mm();let u=null;if(r)try{const d=await fetch(`${r}/keys/admin`);if(d.ok){const v=await d.json();us.value=v.viewer_id,u={grantee_id:v.viewer_id,encrypted_payload:await hc(l,v.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:a,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:l,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return xe.value[a]=f,Be.value=a,xt(),Go.value=!0,f}function wm(e,t){if(!xe.value[e])return console.error("User not found:",e),null;const s=xe.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),xt(),s}function Sm(e){if(!xe.value[e])return!1;if(delete xe.value[e],Be.value===e){const t=Object.keys(xe.value);Be.value=t.length>0?t[0]:null}return xt(),!0}function Cm(e){return xe.value[e]?(Be.value=e,xt(),!0):(console.error("User not found:",e),!1)}function $m(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(xe.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function km(e){const t=e.trim().toLowerCase();for(const s of Object.values(xe.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function xm(e){return xe.value[e]||null}function Am(){xe.value={},Be.value=null,us.value=null,Go.value=!1,xt(),jn.value=!1}function Nm(){jn.value||gc()}async function Tm(e){const t=ym(e);if(!t.valid)return{success:!1,error:t.error};if(!await bm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=xe.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Be.value=e.user_id,xt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),r=o[0]||"Restored",a=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:r,lastName:a,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[i.id]=i,Be.value=i.id,xt(),{success:!0,user:i}}function Em(){const e=xe.value[Be.value];return!e||!e.secretKey?null:gm(e)}function Om(){Go.value=!1}function Im(){return us.value}function Rm(e){us.value=e,xt()}async function Pm(e){const t=xe.value[Be.value];return!t||!t.secretKey?null:hc(t.secretKey,e)}async function Lm(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Dm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Be.value=r.id,xt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Bm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Be.value=r.id,xt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Um(){if(!Be.value)return;const e=xe.value[Be.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let r=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,r=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,r=!0),r&&xt()}catch{}}function Me(){const e=O(()=>Be.value&&xe.value[Be.value]||null),t=O(()=>Object.values(xe.value)),s=O(()=>Object.keys(xe.value).length>0),n=O(()=>Object.keys(xe.value).length),o=O(()=>Be.value!==null&&!!xe.value[Be.value]);return{users:xe,currentUserId:Be,adminViewerId:us,initialized:jn,showKeyBackupModal:Go,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Nm,loadFromStorage:gc,saveToStorage:xt,createUser:_m,updateUser:wm,deleteUser:Sm,switchUser:Cm,findUserByName:$m,findUserByEmail:km,getUser:xm,clearUsers:Am,restoreFromBackup:Tm,getKeyBackup:Em,dismissKeyBackupModal:Om,getAdminViewerId:Im,setAdminViewerId:Rm,createGrantForViewer:Pm,requestRecovery:Lm,claimRecovery:Dm,claimRecoveryByCode:Bm,syncRole:Um}}const Pr="bridgePractice",Xe=A({}),Pe=A(null),At=A(!1),Zs=A(!1);function yc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),r=e.get("classrooms");if(!t||!s)return null;const a=s.split(",").map(l=>l.trim()).filter(Boolean),i=r?r.split(",")[0].trim():null;return{name:t,lessons:a,dueDate:n||null,teacherName:o||null,classroom:i}}function bc(){try{const e=localStorage.getItem(Pr);if(e){const t=JSON.parse(e);Xe.value=t.assignments||{},Pe.value=t.currentAssignmentId||null,Pe.value&&Xe.value[Pe.value]&&(At.value=!0)}Zs.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),Zs.value=!0}}function As(){try{const e=localStorage.getItem(Pr),t=e?JSON.parse(e):{};t.assignments=Xe.value,t.currentAssignmentId=Pe.value,localStorage.setItem(Pr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function _c({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const r=Object.values(Xe.value).find(u=>u.name===e);if(r){const u=new Set(r.lessons);for(const f of n)u.add(f);return r.lessons=Array.from(u),o&&(r.dueDate=o),r.updatedAt=new Date().toISOString(),Pe.value=r.id,At.value=!0,As(),r}const a=crypto.randomUUID(),i=new Date().toISOString(),l={id:a,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return Xe.value[a]=l,Pe.value=a,At.value=!0,As(),l}function Mm(){if(Zs.value)return;bc();const e=yc();e&&_c(e),Zs.value=!0}function Fm(e){if(!At.value||!Pe.value)return!1;const t=Xe.value[Pe.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function jm(e){if(!Pe.value)return;const t=Xe.value[Pe.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),As())}function Hm(e){if(!Pe.value||!At.value)return!1;const t=Xe.value[Pe.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,As(),!0}function Vm(){if(!At.value||!Pe.value)return null;const e=Xe.value[Pe.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Km(){At.value=!1}function Wm(){Pe.value&&Xe.value[Pe.value]&&(At.value=!0)}function Gm(e){return Xe.value[e]||null}function zm(){return Object.values(Xe.value)}function Jm(e){return Xe.value[e]?(delete Xe.value[e],Pe.value===e&&(Pe.value=null,At.value=!1),As(),!0):!1}function qm(){Xe.value={},Pe.value=null,At.value=!1,Zs.value=!1,As()}function zo(){const e=O(()=>Pe.value&&Xe.value[Pe.value]||null),t=O(()=>At.value&&e.value!==null),s=O(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=O(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Xe,currentAssignmentId:Pe,inAssignmentMode:At,initialized:Zs,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Mm,loadFromStorage:bc,saveToStorage:As,createAssignment:_c,isLessonInAssignment:Fm,setTotalDeals:jm,recordDealCompletion:Hm,getAssignmentTag:Vm,exitAssignmentMode:Km,returnToAssignmentMode:Wm,getAssignment:Gm,getAllAssignments:zm,deleteAssignment:Jm,clearAssignments:qm,parseAssignmentFromUrl:yc}}const Lr="bridgePractice",qe=A([]),en=A(null),tn=A(!1),$s=A({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function wc(){try{const e=localStorage.getItem(Lr);if(e){const t=JSON.parse(e);qe.value=t.pendingObservations||[]}tn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),tn.value=!0}}function Ns(){try{const e=localStorage.getItem(Lr),t=e?JSON.parse(e):{};t.pendingObservations=qe.value,localStorage.setItem(Lr,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Sc(){tn.value||wc(),en.value||Cc()}function Cc(){en.value=um(),$s.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Ym({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:i}){var $,R;const l=Me(),u=zo();tn.value||Sc();const f=l.currentUser.value;if(!f)return{success:!1,error:"No authenticated user"};let d=e.skillPath;if(!d){const k=e.subfolder||e.category||"Unknown";d=dm(k)}const v=u.getAssignmentTag(),m=im({userId:f.id,sessionId:en.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:i,skillPath:d,assignment:v}),g=cm(m);if(!g.valid)return console.error("Invalid observation:",g.errors),{success:!1,error:g.errors.join(", ")};if($s.value.totalObservations++,r?$s.value.correctCount++:$s.value.wrongCount++,f.dataConsent&&f.secretKey){const k=await Xm(m,f);k.success||(console.warn("Failed to encrypt observation, storing unencrypted:",k.error),Pl(m,(($=f.classrooms)==null?void 0:$[0])||null))}else Pl(m,((R=f.classrooms)==null?void 0:R[0])||null);return{success:!0,observation:m}}async function Xm(e,t){var s;try{const{encrypted_data:n,iv:o}=await ga(e,t.secretKey),r=((s=t.classrooms)==null?void 0:s[0])||null,a=uc(e,r);return qe.value.push({encrypted_data:n,iv:o,metadata:a,encrypted:!0,queuedAt:new Date().toISOString()}),Ns(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Pl(e,t){const s=uc(e,t);qe.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ns()}async function Qm(){const t=Me().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<qe.value.length;n++){const o=qe.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:r,iv:a}=await ga(o.observation,t.secretKey);qe.value[n]={encrypted_data:r,iv:a,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(r){console.error("Failed to encrypt observation:",r)}}return s>0&&Ns(),s}function Zm(){return qe.value.length}function ep(){return[...qe.value]}function tp(e){qe.value=qe.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ns()}function sp(){qe.value=[],Ns()}function np(){return{...$s.value}}function op(){qe.value=[],en.value=null,$s.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},tn.value=!1,Ns()}function fs(){const e=O(()=>qe.value.length),t=O(()=>qe.value.length>0),s=O(()=>qe.value.some(o=>!o.encrypted)),n=O(()=>en.value);return{pendingObservations:qe,sessionId:en,sessionStats:$s,initialized:tn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Sc,startNewSession:Cc,recordObservation:Ym,encryptPendingObservations:Qm,getPendingCount:Zm,getPendingObservations:ep,removeSyncedObservations:tp,clearPendingObservations:sp,getSessionStats:np,reset:op,loadFromStorage:wc,saveToStorage:Ns}}function rp(){const e=fs(),t=A(null),s=A(0),n=A(!1),o=A(!1),r=Mt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),a=Mt({answered:{},wrongCard:null,correctCard:null}),i=Mt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),l=A({N:[],E:[],S:[],W:[]}),u=A(null),f=A(1),d=O(()=>{var y;return((y=t.value)==null?void 0:y.steps)||[]}),v=O(()=>d.value.length>0),m=O(()=>d.value[s.value]||null),g=O(()=>d.value.some(y=>y.type==="bid")),$=O(()=>{var y;return((y=m.value)==null?void 0:y.type)==="bid"}),R=O(()=>{var y;for(let b=s.value;b>=0;b--)if((y=d.value[b])!=null&&y.clearCommentary)return b;return 0}),k=O(()=>{var y;return((y=t.value)==null?void 0:y.studentSeat)||"S"}),C=O(()=>t.value?oo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),x=O(()=>C.value===k.value),P=O(()=>{var T,E;if(!$.value||!x.value||r.auctionComplete||o.value)return!1;const y=m.value;if(!(y!=null&&y.bid))return!1;const b=(E=(T=t.value)==null?void 0:T.auction)==null?void 0:E[r.currentBidIndex];return b?G(y.bid)===G(b):!1}),W=O(()=>{for(let y=r.displayedBids.length-1;y>=0;y--){const b=r.displayedBids[y];if(b&&b!=="Pass"&&b!=="X"&&b!=="XX")return b}return null}),z=O(()=>{if(!t.value||r.displayedBids.length===0)return!1;const y=r.displayedBids[r.displayedBids.length-1];if(y==="X"||y==="XX"||!W.value)return!1;let b=-1;for(let H=r.displayedBids.length-1;H>=0;H--){const Z=r.displayedBids[H];if(Z&&Z!=="Pass"&&Z!=="X"&&Z!=="XX"){b=H;break}}if(b===-1)return!1;const T=oo(b,t.value.auctionDealer||t.value.dealer),E=C.value;return(E==="N"||E==="S")&&(T==="E"||T==="W")||(E==="E"||E==="W")&&(T==="N"||T==="S")}),L=O(()=>{if(!t.value||r.displayedBids.length===0)return!1;for(let y=r.displayedBids.length-1;y>=0;y--){const b=r.displayedBids[y];if(b!=="Pass"){if(b==="XX")return!1;if(b==="X"){const T=oo(y,t.value.auctionDealer||t.value.dealer),E=C.value;return!(E==="N"&&T==="S"||E==="S"&&T==="N"||E==="E"&&T==="W"||E==="W"&&T==="E")}return!1}}return!1}),Y=O(()=>{const y=m.value;return y!=null&&y.chooseCard?!a.answered[s.value]:!1}),X=O(()=>{var y;return((y=m.value)==null?void 0:y.chooseCard)||null}),pe=O(()=>{if(!t.value)return[];const y=["N","E","S","W"];if(!v.value)return[];let b=null;const T=d.value;for(let E=0;E<=s.value&&E<T.length;E++){const B=T[E];B!=null&&B.showSeats&&(b=B.showSeats),B!=null&&B.showSeatsAfter&&(E<s.value||E===s.value&&o.value)&&(b=B.showSeatsAfter)}return b?y.filter(E=>!b.includes(E)):y}),he=O(()=>{if(!t.value||!v.value)return null;let y={};const b=d.value;for(let T=0;T<=s.value&&T<b.length;T++){const E=b[T];if(E!=null&&E.showcards)for(const[B,H]of Object.entries(E.showcards))y[B]=H;if(E!=null&&E.showSeats)for(const B of E.showSeats)delete y[B];if(E!=null&&E.showSeatsAfter&&(T<s.value||T===s.value&&o.value))for(const B of E.showSeatsAfter)delete y[B]}return Object.keys(y).length>0?y:null}),we=O(()=>{if(!t.value||!v.value)return{};let y={},b=new Set;const T=d.value;for(let B=0;B<=s.value&&B<T.length;B++){const H=T[B];if(H!=null&&H.showcards)for(const[Z,le]of Object.entries(H.showcards))y[Z]=le;if(H!=null&&H.showSeats)for(const Z of H.showSeats)b.add(Z)}const E={};for(const[B,H]of Object.entries(y))b.has(B)&&(E[B]=H);return E}),Oe=O(()=>{const y=he.value;return y?Object.keys(y):[]}),Ve=O(()=>{const y=pe.value,b=Oe.value;return b.length?y.filter(T=>!b.includes(T)):y});function Ge(y){const b={spades:[],hearts:[],diamonds:[],clubs:[]},T={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const E of y){const B=E[0].toUpperCase(),H=E.slice(1).toUpperCase(),Z=T[B];Z&&b[Z].push(H)}return b}const ge=O(()=>{var T,E;if(!((T=t.value)!=null&&T.hands))return{};if((E=m.value)!=null&&E.reset)return t.value.hands;const y=he.value,b={};for(const B of["N","E","S","W"]){if(y&&y[B]){b[B]=Ge(y[B]);continue}const H=t.value.hands[B];if(!H){b[B]=null;continue}b[B]={spades:[...H.spades||[]],hearts:[...H.hearts||[]],diamonds:[...H.diamonds||[]],clubs:[...H.clubs||[]]};for(const Z of l.value[B]){const le={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[Z.suit];if(le&&b[B][le]){const fe=b[B][le].indexOf(Z.card);fe!==-1&&b[B][le].splice(fe,1)}}}return b}),ne=O(()=>!(g.value&&!r.auctionComplete)),K=O(()=>{if(!v.value)return!0;let y=!0;const b=d.value;for(let T=0;T<=s.value&&T<b.length;T++){const E=b[T];(E==null?void 0:E.showAuction)!==null&&(E==null?void 0:E.showAuction)!==void 0&&(y=E.showAuction)}return y}),se=O(()=>{var b;if(!v.value)return!1;const y=d.value;for(let T=0;T<=s.value&&T<y.length;T++)if((b=y[T])!=null&&b.showLead)return!0;return!1}),J=O(()=>{var y;return(y=t.value)!=null&&y.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),V=O(()=>{if(!v.value||n.value)return!0;const y=m.value;return(y==null?void 0:y.type)==="end"&&!Y.value}),oe=O(()=>v.value?!!(o.value||s.value>0||$.value&&r.currentBidIndex>0):!1);function ze(){var b;l.value={N:[],E:[],S:[],W:[]};const y=d.value;for(let T=0;T<=s.value&&T<y.length;T++){const E=y[T];if((b=E==null?void 0:E.plays)!=null&&b.length)for(const B of E.plays){const H=B.split(/[,\s]+/);for(const Z of H){if(!Z)continue;const le=Z.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(le){const fe=le[1].toUpperCase(),Ee=le[2].toUpperCase();let Ae=le[3].toUpperCase();Ae==="10"&&(Ae="T"),l.value[fe].push({suit:Ee,card:Ae})}}}}}function ct(){if(!t.value)return;const y=t.value.auction||[],b=bt(s.value);if(b===-1){for(;r.currentBidIndex<y.length;)r.displayedBids.push(y[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0,u.value=null;return}const T=d.value[b],E=G(T.bid);for(;r.currentBidIndex<y.length;){const B=oo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer),H=G(y[r.currentBidIndex]);if(B===k.value&&H===E){u.value=Date.now(),f.value=1;return}r.displayedBids.push(y[r.currentBidIndex]),r.currentBidIndex++}r.auctionComplete=!0,u.value=null}function bt(y){const b=d.value;for(let T=y;T<b.length;T++)if(b[T].type==="bid")return T;return-1}function Qe(y){if(!t.value||r.auctionComplete||!$.value)return!1;const b=t.value.auction[r.currentBidIndex],T=G(y)===G(b),E=s.value;T?E in i.wrongStepIndices&&(delete i.wrongStepIndices[E],j(!0)):(j(!1),i.wrongStepIndices[E]=!0,i.boardHadWrong=!0);const B=r.currentBidIndex;r.displayedBids.push(t.value.auction[r.currentBidIndex]),r.currentBidIndex++,u.value=null,f.value=1,T?(r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1):(r.wrongBid=y,r.correctBid=b,r.wrongBidIndex=B);const H=s.value+1,Z=d.value[H];return(Z==null?void 0:Z.type)==="bid"?(s.value=H,o.value=!1,ct()):(o.value=!0,F(),s.value>=d.value.length-1&&_()),T}function F(){var b;if(r.auctionComplete)return;if(bt(s.value+1)===-1){const T=((b=t.value)==null?void 0:b.auction)||[];for(;r.currentBidIndex<T.length;)r.displayedBids.push(T[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0}}function ee(){r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1}function Q(y,b){if(!t.value||!Y.value)return!1;const T=X.value;if(!T)return!1;const E=(y+b).toUpperCase(),B=s.value;let H=!1,Z="";return T.anyOf?(H=T.cards.includes(E),Z=T.cards[0]):(H=E===T.card,Z=T.card),H?B in i.wrongStepIndices&&(delete i.wrongStepIndices[B],j(!0)):(j(!1),i.wrongStepIndices[B]=!0,i.boardHadWrong=!0),a.answered[B]=!0,H?(a.wrongCard=null,a.correctCard=null):(a.wrongCard=E,a.correctCard=Z),ve(),H}function re(){a.wrongCard=null,a.correctCard=null}function ve(){var y;if(P.value||Y.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,ze(),((y=d.value[s.value])==null?void 0:y.type)==="bid"&&ct(),s.value>=d.value.length-1){const b=d.value[s.value];(b==null?void 0:b.type)!=="bid"&&(b==null?void 0:b.type)!=="choose-card"&&_()}return!0}return _(),!1}function _(){n.value=!0,S()}function S(){if(d.value.some(b=>b.type==="bid"||b.type==="choose-card"))if(i.boardHadWrong){i.wrongCount++;const b=Object.keys(i.wrongStepIndices).length===0;j(b)}else i.correctCount++,j(!0)}function N(){if(ee(),re(),o.value)return o.value=!1,U(s.value),!0;if(s.value>0){const y=s.value-1,b=d.value[y];return a.answered[y]&&delete a.answered[y],(b==null?void 0:b.type)==="bid"&&U(y),s.value=y,n.value=!1,o.value=!1,ze(),!0}return!1}function U(y){var H;const b=d.value[y];if(!b||b.type!=="bid")return;const T=G(b.bid),E=((H=t.value)==null?void 0:H.auction)||[];let B=0;for(let Z=0;Z<E.length;Z++)if(G(E[Z])===T){B=Z;break}r.currentBidIndex=B,r.displayedBids=E.slice(0,B),r.auctionComplete=!1,u.value=Date.now(),f.value=1}async function j(y){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...r.displayedBids],expectedBid:"BOARD",studentBid:y?"PASS":"FAIL",correct:y,attemptNumber:1,timeTakenMs:0})}catch(b){console.error("Failed to record board observation:",b)}}function M(y){var b,T;t.value=y,s.value=0,n.value=!1,o.value=!1,r.displayedBids=[],r.currentBidIndex=0,r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1,r.auctionComplete=!1,a.answered={},a.wrongCard=null,a.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},l.value={N:[],E:[],S:[],W:[]},u.value=null,f.value=1,(b=y==null?void 0:y.steps)!=null&&b.length&&(ze(),((T=y.steps[0])==null?void 0:T.type)==="bid"&&ct())}function q(){i.correctCount=0,i.wrongCount=0}function G(y){if(!y)return"";const T=y.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return T==="PASS"||T==="P"?"PASS":T==="X"||T==="DBL"||T==="DOUBLE"?"X":T==="XX"||T==="RDBL"||T==="REDOUBLE"?"XX":T.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:r,cardChoiceState:a,boardState:i,steps:d,hasSteps:v,currentStep:m,hasBidSteps:g,isBidStep:$,commentaryStartIndex:R,studentSeat:k,currentTurnSeat:C,isStudentTurn:x,hasBidPrompt:P,lastContractBid:W,canDouble:z,canRedouble:L,canGoBack:oe,hasCardChoice:Y,currentChooseCard:X,hiddenSeats:Ve,hands:ge,showHcp:ne,showcardsPlayedCards:we,isComplete:V,showAuctionTable:K,showOpeningLead:se,openingLead:J,advance:ve,makeBid:Qe,clearFeedback:ee,goBack:N,makeCardChoice:Q,clearCardFeedback:re,loadDeal:M,resetStats:q,observationStore:e}}const $o="bridgePractice",$c="bridgePracticeUIPrefs",et=A({teacherName:null,availableClassrooms:[],configuredAt:null}),sn=A({showLoadPbnOption:!1}),ko=A(!1);function kc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function xc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(r=>({id:r.trim(),name:kc(r.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function ap(){return new URLSearchParams(window.location.search).get("collection")}function lp(){return new URLSearchParams(window.location.search).get("lesson")}function ip(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function cp(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function up(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function dp(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const fp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Ac(){try{const e=localStorage.getItem($o);if(e){const t=JSON.parse(e);t.appConfig&&(et.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function vp(){try{const e=localStorage.getItem($c);if(e){const t=JSON.parse(e);sn.value={...sn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function mp(){try{localStorage.setItem($c,JSON.stringify(sn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function pp(e,t){sn.value[e]=t,mp()}function ya(){try{const e=localStorage.getItem($o),t=e?JSON.parse(e):{};t.appConfig=et.value,localStorage.setItem($o,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Nc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function hp(){if(ko.value)return;Ac(),vp();const{teacher:e,classrooms:t}=xc();(e||t.length>0)&&(e&&!et.value.teacherName&&(et.value.teacherName=e),t.length>0&&(et.value.availableClassrooms=Nc(et.value.availableClassrooms||[],t)),et.value.configuredAt||(et.value.configuredAt=new Date().toISOString()),ya()),ko.value=!0}function gp(){try{const e=localStorage.getItem($o);return e?JSON.parse(e):null}catch{return null}}function yp(){et.value={teacherName:null,availableClassrooms:[],configuredAt:null},ya(),ko.value=!1}function zn(){const e=O(()=>et.value.availableClassrooms.length===0),t=O(()=>et.value.availableClassrooms.length>1),s=O(()=>et.value.availableClassrooms.length===1),n=O(()=>s.value?et.value.availableClassrooms[0]:null),o=O(()=>et.value.teacherName),r=O(()=>et.value.availableClassrooms),a=O(()=>sn.value.showLoadPbnOption);return{appConfig:et,initialized:ko,uiPrefs:sn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:r,showLoadPbnOption:a,initializeFromUrl:hp,loadFromStorage:Ac,saveToStorage:ya,clearConfig:yp,getStorageData:gp,getCollectionFromUrl:ap,setCollectionInUrl:ip,getLessonFromUrl:lp,setLessonInUrl:cp,getDealFromUrl:up,setDealInUrl:dp,setUIPref:pp,COLLECTIONS:fp,parseUrlParams:xc,classroomIdToName:kc,mergeClassrooms:Nc}}const bp="https://api.bridge-classroom.com/api",_p="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ba=A([]),We=A([]),xo=A(!1),Ao=A(null),On=A(null),No=A(!1),wp=5*60*1e3;async function Sp(e){const t=await fetch(`${bp}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":_p}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Cp(e,t){try{return{...await pc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function $p(){return fs().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Tc(e=!1){const s=Me().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=$p();if(!e&&On.value&&Date.now()-new Date(On.value).getTime()<wp&&We.value.length>0)return kp(n),{success:!0,cached:!0};xo.value=!0,Ao.value=null;let o=[];try{const i=await Sp(s.id);if(ba.value=i,s.secretKey&&i.length>0){const l=i.map(f=>Cp(f,s.secretKey));o=(await Promise.all(l)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Ao.value=i.message)}const r=new Set(o.map(i=>i.id)),a=n.filter(i=>!r.has(i.id));return We.value=[...o,...a],On.value=new Date().toISOString(),xo.value=!1,{success:!0,count:We.value.length}}function kp(e){const t=new Set(We.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(We.value=[...We.value,...s])}async function xp(){if(No.value)return;Me().isAuthenticated.value&&await Tc(),No.value=!0}function Ap(){ba.value=[],We.value=[],On.value=null,No.value=!1}function Ec(){const e={};for(const t of We.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Ll(){const e={};for(const t of We.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Dl(){const e={};for(const t of We.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Bl(e=10){return[...We.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Ul(){const e=new Date().toISOString().split("T")[0];return We.value.filter(t=>t.timestamp.startsWith(e))}function Ml(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return We.value.filter(n=>n.timestamp>=s)}function Np(){const e=Ec(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,r=new Date(t[0]);for(let a=1;a<t.length;a++){const i=new Date(t[a]);if(Math.round((r-i)/(24*60*60*1e3))===1)o++,r=i;else break}return o}function _a(){const e=O(()=>We.value.length),t=O(()=>We.value.filter(m=>m.correct).length),s=O(()=>We.value.filter(m=>!m.correct).length),n=O(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=O(()=>{const m=Ul(),g=m.filter(R=>R.correct).length,$=m.length;return{total:$,correct:g,incorrect:$-g,accuracy:$>0?Math.round(g/$*100):0}}),r=O(()=>{const m=Ml(),g=m.filter(R=>R.correct).length,$=m.length;return{total:$,correct:g,incorrect:$-g,accuracy:$>0?Math.round(g/$*100):0}}),a=O(()=>Np()),i=O(()=>Ll()),l=O(()=>Dl()),u=O(()=>Bl(20)),f=O(()=>We.value.length>0),d=O(()=>xo.value),v=O(()=>Ao.value!==null);return{observations:ba,decryptedObservations:We,loading:xo,error:Ao,lastFetchedAt:On,initialized:No,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:r,streak:a,skillStats:i,sessions:l,recentObservations:u,hasData:f,isLoading:d,hasError:v,initialize:xp,fetchProgress:Tc,clearCache:Ap,getObservationsByDate:Ec,getStatsBySkill:Ll,getSessions:Dl,getRecentObservations:Bl,getTodayObservations:Ul,getThisWeekObservations:Ml}}const _s={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},pt={NONE:"none",SILVER:"silver",GOLD:"gold"},Tp=6;function Ep(e){return e.slice(0,10)}function Oc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Ic(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Fl=60*60*1e3;function Rc(e){if(e.length===0)return _s.GREY;const t=e[e.length-1];if(!t.correct)return _s.RED;const s=Date.now()-Fl;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return _s.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return _s.GREEN;const r=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-r<=Fl?_s.ORANGE:_s.GREEN}function Pc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function Lc(e){if(e.length===0)return pt.NONE;const t=new Set;for(const a of e)t.add(Ep(a.timestamp));const s=[...t].filter(a=>Pc(e,a)).sort();if(s.length<2)return pt.NONE;let n=1,o=1,r=s[0];for(let a=1;a<s.length;a++)Oc(r,s[a])>=Tp&&(o++,r=s[a],o>n&&(n=o));return n>=3?pt.GOLD:n>=2?pt.SILVER:pt.NONE}function Op(e){const t=e.observations.value||[];let s=[];try{s=fs().getPendingObservations().filter(i=>i.metadata).map(i=>{const l=i.metadata;return{id:l.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:l.timestamp||i.queuedAt,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number,session_id:l.session_id,_local:!0}})}catch{}const n=new Set(t.map(r=>r.id)),o=s.filter(r=>!n.has(r.id));return[...t,...o]}function Ip(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var r;return(o.deal_subfolder||((r=o.deal)==null?void 0:r.subfolder))===t});return s.map(o=>{const r=n.filter(i=>{var l;return(i.deal_number??((l=i.deal)==null?void 0:l.deal_number))===o}).sort((i,l)=>i.timestamp.localeCompare(l.timestamp)),a=Ic(r);return{boardNumber:o,status:Rc(r),achievement:Lc(r),attemptCount:a.length,lastAttemptTime:r.length>0?r[r.length-1].timestamp:null}})}function Rp(e){return!e||e.length===0?{achievement:pt.NONE}:e.every(n=>n.achievement===pt.GOLD)?{achievement:pt.GOLD}:e.every(n=>n.achievement===pt.SILVER||n.achievement===pt.GOLD)?{achievement:pt.SILVER}:{achievement:pt.NONE}}const Dc="bridgeLessonBoards",Hn=A(Pp()),dr=new Set;function Pp(){try{const e=localStorage.getItem(Dc);return e?JSON.parse(e):{}}catch{return{}}}function Lp(){try{localStorage.setItem(Dc,JSON.stringify(Hn.value))}catch{}}function Bc(e,t){Hn.value={...Hn.value,[e]:t},Lp()}function Dp(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,r)=>o-r)}async function Bp(e){const t=zn(),s=e.filter(n=>!Hn.value[n]&&!dr.has(n));if(s.length!==0){for(const n of s)dr.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const r=n.includes("/")?n.split("/").pop():n,a=`${o.baseUrl}/${r}.pbn`;try{const i=await fetch(a);if(!i.ok)continue;const l=await i.text(),u=Dp(l);if(u.length>0){Bc(n,u);break}}catch{continue}}}finally{dr.delete(n)}}))}}function Up(e){var n,o;const t=Hn.value,s={};for(const r of e){const a=r.deal_subfolder||((n=r.deal)==null?void 0:n.subfolder),i=r.deal_number??((o=r.deal)==null?void 0:o.deal_number);!a||i==null||(s[a]||(s[a]={boards:new Set,lastActivity:r.timestamp}),s[a].boards.add(i),r.timestamp>s[a].lastActivity&&(s[a].lastActivity=r.timestamp))}return Object.entries(s).map(([r,a])=>{const i=t[r];if(i)return{subfolder:r,boardNumbers:i,lastActivity:a.lastActivity};const l=Math.max(...a.boards),u=[];for(let f=1;f<=l;f++)u.push(f);return{subfolder:r,boardNumbers:u,lastActivity:a.lastActivity}})}function rn(){const e=qt();function t(){return Op(e)}return{STATUS:_s,ACHIEVEMENT:pt,getObservations:t,computeBoardMastery:Ip,computeLessonAchievement:Rp,extractLessonsFromObservations:Up,saveLessonBoardNumbers:Bc,fetchMissingBoardCounts:Bp,groupIntoBoardAttempts:Ic,calculateCurrentStatus:Rc,calculateAchievement:Lc,hasGreenDay:Pc,daysBetween:Oc}}const _n="https://api.bridge-classroom.com/api",wn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",To=A(!1),wa=A(null),Jo=A([]),is=A({}),Eo=A(!1),Oo=A(null),Sa=A(!1),Io={},Mp=2*60*1e3;async function Fp(){var s;const e=Me(),t=e.currentUser.value;if(!t||!t.email){To.value=!1;return}try{const n=await fetch(`${_n}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":wn}});if(!n.ok)return;const o=await n.json(),r=Array.isArray(o)?o[0]:null;if(!r)return;wa.value=r.id;const a=await fetch(`${_n}/grants?grantee_id=${r.id}`,{headers:{"x-api-key":wn}});if(!a.ok)return;const l=(await a.json()).grants||[],u=new Set(l.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const f=await fetch(`${_n}/users`,{headers:{"x-api-key":wn}});if(!f.ok)return;const v=(await f.json()).users||[],m=(s=t.email)==null?void 0:s.toLowerCase();if(Jo.value=v.filter(g=>{var $;return u.has(g.id)&&g.id!==t.id&&(($=g.email)==null?void 0:$.toLowerCase())!==m}).sort((g,$)=>`${g.first_name} ${g.last_name}`.localeCompare(`${$.first_name} ${$.last_name}`)),To.value=!0,Sa.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${_n}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":wn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Uc(e){const t=is.value[e],s=Io[e];if(t&&s&&Date.now()-s<Mp)return t;try{const n=await fetch(`${_n}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":wn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=((await n.json()).observations||[]).map(a=>({id:a.id||a.observation_id,timestamp:a.timestamp,skill_path:a.skill_path,correct:a.correct,deal_subfolder:a.deal_subfolder,deal_number:a.deal_number}));return is.value={...is.value,[e]:r},Io[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function jp(){Eo.value=!0,Oo.value=null;try{await Promise.allSettled(Jo.value.map(s=>Uc(s.id)));const e=rn(),t=new Set;for(const s of Object.values(is.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Oo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Eo.value=!1}}function Hp(e){const t=is.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=rn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const a of n){const i=s.computeBoardMastery(t,a.subfolder,a.boardNumbers);for(const l of i)o[l.status]=(o[l.status]||0)+1}let r=null;for(const a of t)(!r||a.timestamp>r)&&(r=a.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:r}}function Vp(e,t=3){const s=is.value[e]||[],n=qt(),o={};for(const r of s){const a=r.deal_subfolder;a&&(!o[a]||r.timestamp>o[a])&&(o[a]=r.timestamp)}return Object.entries(o).sort(([,r],[,a])=>a.localeCompare(r)).slice(0,t).map(([r])=>n.formatLessonName(r))}function Kp(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),r=Math.floor(n/36e5),a=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:s.toLocaleDateString()}function Wp(){To.value=!1,wa.value=null,Jo.value=[],is.value={},Eo.value=!1,Oo.value=null,Sa.value=!1;for(const e of Object.keys(Io))delete Io[e]}function Jn(){return{isTeacher:To,viewerId:wa,students:Jo,studentObservations:is,loading:Eo,error:Oo,initialized:Sa,checkTeacherStatus:Fp,fetchStudentObservations:Uc,loadAllStudentSummaries:jp,getStudentMasterySummary:Hp,getStudentRecentLessons:Vp,formatTimeSince:Kp,reset:Wp}}const Dr="https://api.bridge-classroom.com/api",Br="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ur=A(!1),Us=A(null),zt=A(null),Vn=A([]),nn=A([]),Ca=A("lessons"),qo=A(!0),an=A(!1),qn=A([]);function Gp(e){an.value=!0,qn.value=e}function zp(){an.value=!1,qn.value=[]}function Yn(){return an.value?qn.value:Vn.value}async function Mc(){const e=Me(),t=Jn(),s=e.currentUser.value;if(!s){nn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Dr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":Br}});if(o.ok){const{grants:r}=await o.json(),a=await fetch(`${Dr}/users`,{headers:{"x-api-key":Br}});if(a.ok){const{users:i}=await a.json(),l=new Set(r.map(u=>u.grantor_id));for(const u of i)l.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}nn.value=n}async function $a(e=!1){if(an.value)return{success:!0};const t=Me(),s=_a(),n=t.currentUser.value;if(!n)return Us.value="No authenticated user",{success:!1,error:Us.value};Ur.value=!0,Us.value=null;try{if(!zt.value||zt.value===n.id)zt.value=n.id,await s.fetchProgress(e),Vn.value=s.decryptedObservations.value;else{const o=await fetch(`${Dr}/observations?user_id=${zt.value}&limit=10000`,{headers:{"x-api-key":Br}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const r=await o.json();Vn.value=r.observations||[]}return{success:!0}}catch(o){return Us.value=o.message,{success:!1,error:o.message}}finally{Ur.value=!1}}async function Jp(e){zt.value=e,await $a(!0)}const Mr=O(()=>{var n;const e=Yn(),t={};for(const o of e){const r=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[r]||(t[r]={lesson:r,displayName:Hc(r),total:0,correct:0,incorrect:0,observations:[]}),t[r].total++,o.correct?t[r].correct++:t[r].incorrect++,t[r].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,r)=>o.displayName.localeCompare(r.displayName)),s}),Fr=O(()=>{const e=Yn(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",r=fm(o),a=dc(o);t[o]||(t[o]={skillPath:o,category:r,categoryName:vm(r).name,skillName:a.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const r=n.categoryName.localeCompare(o.categoryName);return r!==0?r:n.skillName.localeCompare(o.skillName)}),s}),Fc=O(()=>qo.value?Mr.value.filter(e=>e.total>0):Mr.value),jc=O(()=>qo.value?Fr.value.filter(e=>e.total>0):Fr.value);function Hc(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const qp=O(()=>Ca.value==="lessons"?Fc.value:jc.value),Yp=O(()=>nn.value.length>1),Xp=O(()=>nn.value.find(e=>e.id===zt.value)||null),Qp=O(()=>Yn().length>0),Zp=O(()=>Yn().length),eh=O(()=>{const e=Yn();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function th(){const t=Me().currentUser.value;t&&(zt.value=t.id,await Mc(),await $a())}function sh(){Vn.value=[],nn.value=[],zt.value=null,Ca.value="lessons",qo.value=!0,Us.value=null,an.value=!1,qn.value=[]}function qt(){return{loading:Ur,error:Us,selectedUserId:zt,observations:Vn,accessibleUsers:nn,activeTab:Ca,onlyWithObservations:qo,useTestData:an,testObservations:qn,enableTestMode:Gp,disableTestMode:zp,lessonStats:Mr,taxonStats:Fr,filteredLessonStats:Fc,filteredTaxonStats:jc,currentStats:qp,canViewOtherUsers:Yp,selectedUser:Xp,hasData:Qp,totalObservations:Zp,overallSuccessRate:eh,initialize:th,loadAccomplishments:$a,selectUser:Jp,fetchAccessibleUsers:Mc,reset:sh,formatLessonName:Hc}}const ka="https://api.bridge-classroom.com/api",Vc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ht=A("idle"),Kc=A(null),Bs=A(null),Ms=A(0),Fs=A(navigator.onLine),Sn=A(!1),jl=5,nh=1e3,oh=6e4,rh=5e3;let Gs=null;function ah(e){const t=Math.min(nh*Math.pow(2,e),oh);return t+Math.random()*t*.25}async function Wc(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${ka}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,error:`Server error: ${n.status} - ${r}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function Gc(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(r=>({encrypted_data:r.encrypted_data,iv:r.iv,metadata:r.metadata}))},n=await fetch(`${ka}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vc},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${r}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function Xn(){var n,o;const e=Me(),t=fs();if(!navigator.onLine)return ht.value="offline",{success:!1,offline:!0};ht.value="syncing",Bs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const r=e.currentUser.value;if(r&&!r.serverRegistered){const l=await Wc(r);if(l.success)e.updateUser(r.id,{serverRegistered:!0}),Sn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(l.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),ht.value="error",Bs.value="Account already exists. Please use recovery.",Sn.value=!0,s;console.warn("User registration failed:",l.error),Sn.value=!0,Bs.value=`Registration failed: ${l.error}`}}const a=await t.encryptPendingObservations();a>0&&console.log(`Encrypted ${a} observations`);let i=!1;if(r!=null&&r.dataConsent){const l=t.getPendingObservations();if(l.length>0){const u=await Gc(l);if(u.success&&u.synced>0){const f=l.filter(d=>d.encrypted).slice(0,u.synced).map(d=>{var v;return(v=d.metadata)==null?void 0:v.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await qt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(f)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,Bs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return Sn.value||i?ht.value="error":(ht.value="idle",Kc.value=new Date().toISOString(),Ms.value=0),s}catch(r){return console.error("Sync failed:",r),Bs.value=r.message,ht.value="error",s.success=!1,s}}function jr(){Gs&&clearTimeout(Gs),Gs=setTimeout(async()=>{await Xn()},rh)}async function zc(){return Gs&&(clearTimeout(Gs),Gs=null),await Xn()}async function Jc(){if(Ms.value>=jl){console.log("Max retries reached, giving up"),ht.value="error";return}const e=ah(Ms.value);Ms.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Ms.value}/${jl})`),setTimeout(async()=>{const t=await Xn();!t.success&&t.offline!==!0&&Jc()},e)}function lh(){var i;const e=Me(),t=fs(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(l=>l.encrypted);if(o.length===0)return;const r={observations:o.map(l=>({encrypted_data:l.encrypted_data,iv:l.iv,metadata:l.metadata}))},a=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(`${ka}/observations?api_key=${Vc}`,a),console.log("Sent beacon with",o.length,"observations")}function ih(){window.addEventListener("online",()=>{Fs.value=!0,console.log("Back online, triggering sync"),zc()}),window.addEventListener("offline",()=>{Fs.value=!1,ht.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Fs.value&&(console.log("Tab visible, triggering sync"),jr())}),window.addEventListener("beforeunload",lh),setInterval(()=>{document.visibilityState==="visible"&&Fs.value&&jr()},5*60*1e3)}async function ch(){ih(),navigator.onLine?await Xn():ht.value="offline"}function qc(){const e=O(()=>ht.value==="syncing"),t=O(()=>ht.value==="offline"||!Fs.value),s=O(()=>ht.value==="error"),n=O(()=>fs().pendingCount.value>0);return{syncState:ht,lastSyncAt:Kc,lastError:Bs,retryCount:Ms,isOnline:Fs,registrationFailed:Sn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:ch,performSync:Xn,triggerSync:jr,forceSync:zc,retrySync:Jc,registerUserWithServer:Wc,syncObservationsToServer:Gc}}const xa="https://api.bridge-classroom.com/api",Yc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Jt=A(null),Hr=A(!1),Qn=A(null);async function uh(){Hr.value=!0;try{const e=await fetch(`${xa}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=Jt.value;Jt.value=t.announcement||null,Jt.value&&(!s||s.id!==Jt.value.id)&&(Qn.value=null)}catch{}finally{Hr.value=!1}}async function dh(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${xa}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Yc},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const r=await o.json();return Jt.value=r.announcement||null,Qn.value=null,r}async function fh(){const e=await fetch(`${xa}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Yc}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);Jt.value=null,Qn.value=null}function vh(){Jt.value&&(Qn.value=Jt.value.id)}function Aa(){return{announcement:Jt,loading:Hr,dismissed:Qn,loadAnnouncement:uh,setAnnouncement:dh,clearAnnouncement:fh,dismiss:vh}}const mh={key:0,class:"minimal-hand"},ph={class:"seat-label-inline"},hh={class:"seat-label"},gh={key:0,class:"suits"},yh={key:0,class:"suit-row"},bh={key:0,class:"cards clickable-cards"},_h=["onClick"],wh={key:1,class:"cards"},Sh={key:2,class:"cards"},Ch={key:1,class:"hidden-hand"},$h={key:2,class:"hcp"},kh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=cc,n=O(()=>Ir(t.seat)),o=O(()=>rm(t.hand)),r=O(()=>t.hand?s.reduce((R,k)=>{var C;return R+(((C=t.hand[k])==null?void 0:C.length)||0)},0):0),a=O(()=>r.value>0&&r.value<5);function i(R){return t.hand&&t.hand[R]&&t.hand[R].length>0}function l(R){return pa[R]}function u(R){return nm(R)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d(R){return f[R]||R}function v(R){if(!t.hand||!t.hand[R])return"";const k=t.hand[R];return k.length===0?"":k.map(ur).join(" ")}const m=O(()=>t.playedCards&&t.playedCards.length>0),g=O(()=>{if(!t.playedCards)return null;const R=new Set;for(const k of t.playedCards){const C=k[0].toUpperCase(),x=k.slice(1).toUpperCase(),P={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[C];P&&R.add(`${P}:${x}`)}return R});function $(R,k){return g.value?g.value.has(`${R}:${k}`):!1}return(R,k)=>(p(),h("div",{class:ae(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),h("div",mh,[c("span",ph,w(e.seat),1),(p(!0),h(te,null,ce(I(s),C=>(p(),h("span",{key:C,class:ae(["suit-symbol-inline",u(C)])},w(l(C)),3))),128))])):(p(),h(te,{key:1},[c("div",hh,w(n.value),1),!e.hidden&&e.hand?(p(),h("div",gh,[(p(!0),h(te,null,ce(I(s),C=>(p(),h(te,{key:C},[!a.value||i(C)?(p(),h("div",yh,[c("span",{class:ae(["suit-symbol",u(C)])},w(l(C)),3),e.clickable?(p(),h("span",bh,[(p(!0),h(te,null,ce(e.hand[C],x=>(p(),h("span",{key:x,class:ae($(C,x)?"card-played":"card-clickable"),onClick:P=>!$(C,x)&&R.$emit("card-click",{suit:d(C),rank:x})},w(I(ur)(x)),11,_h))),128))])):m.value?(p(),h("span",wh,[(p(!0),h(te,null,ce(e.hand[C],x=>(p(),h("span",{key:x,class:ae({"card-played":$(C,x)})},w(I(ur)(x)),3))),128))])):(p(),h("span",Sh,w(v(C)),1))])):D("",!0)],64))),128))])):e.hidden?(p(),h("div",Ch,[...k[0]||(k[0]=[c("div",{class:"card-back"},null,-1)])])):D("",!0),e.showHcp&&e.hand&&!e.hidden&&!a.value?(p(),h("div",$h,w(o.value)+" HCP ",1)):D("",!0)],64))],2))}},ro=me(kh,[["__scopeId","data-v-128fc7ed"]]),xh={class:"ns-column north-row"},Ah={key:0,class:"position north"},Nh={key:0,class:"position west"},Th={class:"center"},Eh={key:1,class:"position east"},Oh={class:"ns-column south-row"},Ih={key:0,class:"position south"},Rh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,r,a;return p(),h("div",{class:ae(["bridge-table",{compact:e.compact}])},[c("div",xh,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),h("div",Ah,[ue(ro,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):D("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),h("div",Nh,[ue(ro,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):D("",!0),c("div",Th,[_d(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),h("div",Eh,[ue(ro,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(r=e.playedCards)==null?void 0:r.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):D("",!0),c("div",Oh,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),h("div",Ih,[ue(ro,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(a=e.playedCards)==null?void 0:a.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):D("",!0)])],2)}}},Ph=me(Rh,[["__scopeId","data-v-ec6230a9"]]),Lh={class:"bidding-box"},Dh={class:"bid-section"},Bh={class:"levels"},Uh=["onClick"],Mh={class:"strains"},Fh=["disabled","onClick"],jh=["innerHTML"],Hh={class:"special-bids"},Vh=["disabled"],Kh=["disabled"],Wh={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=A(1),r=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],a=O(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=O(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],v=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!v)return-1;const m=v[1].toUpperCase();return d.indexOf(m==="N"?"NT":m)});function l(d){o.value=d}function u(d,v){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(v);return d>a.value||d===a.value&&g>i.value}function f(d,v){u(d,v)&&n("bid",`${d}${v}`)}return(d,v)=>(p(),h("div",Lh,[c("div",Dh,[c("div",Bh,[(p(),h(te,null,ce(7,m=>c("button",{key:m,class:ae(["level-btn",{active:o.value===m}]),onClick:g=>l(m)},w(m),11,Uh)),64))]),c("div",Mh,[(p(),h(te,null,ce(r,m=>c("button",{key:m.value,class:ae(["strain-btn",[m.colorClass,{disabled:!u(o.value,m.value)}]]),disabled:!u(o.value,m.value),onClick:g=>f(o.value,m.value)},[c("span",{innerHTML:m.display},null,8,jh)],10,Fh)),64))])]),c("div",Hh,[c("button",{class:"special-btn pass",onClick:v[0]||(v[0]=m=>d.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:v[1]||(v[1]=m=>d.$emit("bid","X"))}," Double ",8,Vh),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:v[2]||(v[2]=m=>d.$emit("bid","XX"))}," Redouble ",8,Kh)])]))}},Gh=me(Wh,[["__scopeId","data-v-38ccb98f"]]),zh={class:"auction-table"},Jh={class:"rounds"},qh=["innerHTML"],Yh={key:1,class:"turn-indicator"},Xh={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=O(()=>["W","N","E","S"].indexOf(t.dealer)),n=O(()=>{const u=[],f=t.bids;let d=0,v=0;for(;d<f.length||v===0&&f.length>0;){const m=[null,null,null,null],g=v===0?s.value:0;for(let $=g;$<4&&d<f.length;$++)m[$]=f[d],d++;if(m.some($=>$!==null)&&u.push(m),v++,v>20)break}if(t.currentBidIndex>=f.length){const m=u[u.length-1],g=m?m.filter($=>$!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const $=[null,null,null,null];u.push($)}}return u});function o(u,f){return u===0?f-s.value:4-s.value+(u-1)*4+f}function r(u,f){const d=o(u,f);return d===t.currentBidIndex&&d>=t.bids.length}function a(u,f){return t.wrongBidIndex<0?!1:o(u,f)===t.wrongBidIndex}function i(u,f){return t.correctBidIndex<0?!1:o(u,f)===t.correctBidIndex}function l(u){return ha(u).html}return(u,f)=>(p(),h("div",zh,[f[0]||(f[0]=_o('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",Jh,[(p(!0),h(te,null,ce(n.value,(d,v)=>(p(),h("div",{key:v,class:"round"},[(p(!0),h(te,null,ce(d,(m,g)=>(p(),h("div",{key:g,class:ae(["bid-cell",{"current-turn":r(v,g),"wrong-bid":a(v,g),"correct-bid":i(v,g)}])},[m?(p(),h("span",{key:0,innerHTML:l(m)},null,8,qh)):e.showTurnIndicator&&r(v,g)?(p(),h("span",Yh,"?")):D("",!0)],2))),128))]))),128))])]))}},Qh=me(Xh,[["__scopeId","data-v-ac265db8"]]),Zh={class:"deal-info"},eg={class:"board-number"},tg={key:0,class:"board-popup"},sg={class:"popup-list"},ng=["onClick"],og={class:"info-row"},rg={class:"info-item"},ag={class:"value"},lg={class:"info-item"},ig={key:0,class:"contract-row"},cg={class:"info-item"},ug=["innerHTML"],dg={key:0,class:"label"},fg={key:0,class:"info-item"},vg=["innerHTML"],mg={key:1,class:"title"},pg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=A(!1);function r(v){n("goto",v),o.value=!1}const a=O(()=>Ir(s.dealer)),i=O(()=>Ir(s.declarer)),l=O(()=>om(s.vulnerable)),u=O(()=>{var m;const v=(m=s.vulnerable)==null?void 0:m.toUpperCase();return v==="BOTH"||v==="ALL"?"vul-both":v==="NS"||v==="EW"?"vul-partial":"vul-none"}),f=O(()=>s.contract?ha(s.contract).html:""),d=O(()=>{if(!s.openingLead)return"";const v=s.openingLead[0],m=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},$={S:"black",H:"red",D:"red",C:"black"},R=g[v]||v;return`<span class="${$[v]||"black"}">${R}</span>${m==="T"?"10":m}`});return(v,m)=>(p(),h("div",Zh,[c("div",{class:"board-selector",onMouseenter:m[0]||(m[0]=g=>o.value=!0),onMouseleave:m[1]||(m[1]=g=>o.value=!1)},[c("div",eg,"Board "+w(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),h("div",tg,[m[2]||(m[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",sg,[(p(!0),h(te,null,ce(e.totalDeals,g=>(p(),h("button",{key:g,class:ae(["popup-item",{active:g-1===e.currentIndex}]),onClick:$=>r(g-1)}," Board "+w(e.dealBoardNumbers[g-1]||g),11,ng))),128))])])):D("",!0)],32),c("div",og,[c("div",rg,[m[3]||(m[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",ag,w(a.value),1)]),c("div",lg,[m[4]||(m[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:ae(["value",u.value])},w(l.value),3)])]),e.showContract&&e.contract?(p(),h("div",ig,[c("div",cg,[c("span",{class:"value contract",innerHTML:f.value},null,8,ug),e.declarer?(p(),h("span",dg,"by "+w(i.value),1)):D("",!0)]),e.openingLead?(p(),h("div",fg,[m[5]||(m[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:d.value},null,8,vg)])):D("",!0)])):D("",!0),e.title?(p(),h("div",mg,w(e.title),1)):D("",!0)]))}},hg=me(pg,[["__scopeId","data-v-5a844c49"]]),gg={class:"feedback-header"},yg={key:0,class:"icon"},bg={key:1,class:"icon"},_g={class:"title"},wg={key:0,class:"feedback-content"},Sg={class:"bid-comparison"},Cg={class:"bid-item your-bid"},$g=["innerHTML"],kg={class:"bid-item correct-bid"},xg=["innerHTML"],Ag={key:1,class:"feedback-content"},Ng={class:"bid-comparison"},Tg={class:"bid-item your-bid"},Eg=["innerHTML"],Og={class:"bid-item correct-bid"},Ig=["innerHTML"],Rg=["innerHTML"],Pg={class:"actions"},Lg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=O(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(r){return ha(r).html}function o(r){return am(r).html}return(r,a)=>e.visible?(p(),h("div",{key:0,class:ae(["feedback-panel",e.type])},[c("div",gg,[e.type==="wrong"?(p(),h("span",yg,"")):e.type==="correct"?(p(),h("span",bg,"")):D("",!0),c("span",_g,w(s.value),1)]),e.wrongBid?(p(),h("div",wg,[c("div",Sg,[c("div",Cg,[a[1]||(a[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,$g)]),c("div",kg,[a[2]||(a[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,xg)])])])):D("",!0),e.wrongCardCode?(p(),h("div",Ag,[c("div",Ng,[c("div",Tg,[a[3]||(a[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Eg)]),c("div",Og,[a[4]||(a[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Ig)])])])):D("",!0),e.commentary?(p(),h("div",{key:2,class:"commentary",innerHTML:I(Ds)(e.commentary)},null,8,Rg)):D("",!0),c("div",Pg,[e.showContinue?(p(),h("button",{key:0,class:"btn continue",onClick:a[0]||(a[0]=i=>r.$emit("continue"))}," Continue ")):D("",!0)])],2)):D("",!0)}},Hl=me(Lg,[["__scopeId","data-v-04368462"]]),Dg={class:"welcome-screen"},Bg={class:"welcome-card"},Ug={class:"welcome-header"},Mg={key:0,class:"welcome-body"},Fg={class:"form-group"},jg={key:0,class:"error-message"},Hg={class:"form-group"},Vg={key:0,class:"error-message"},Kg={class:"form-group"},Wg={key:0,class:"error-message"},Gg={key:0,class:"form-group"},zg={class:"checkbox-group"},Jg=["value","checked","onChange"],qg={key:1,class:"form-group"},Yg={class:"single-classroom"},Xg={class:"form-group consent-group"},Qg={class:"checkbox-label consent-label"},Zg={key:0,class:"consent-details"},ey=["disabled"],ty={key:0},sy={key:1},ny={key:1,class:"welcome-body returning"},oy={key:2,class:"welcome-body switcher"},ry={class:"user-list"},ay=["onClick"],ly={class:"user-name"},iy={key:0,class:"user-class"},cy={key:3,class:"welcome-body recovery-sent"},uy={class:"subtitle"},dy={class:"recovery-info"},fy={class:"code-entry"},vy=["disabled"],my={key:0},py={key:1},hy={key:0,class:"error-message"},gy={key:4,class:"welcome-body recovery-claiming"},yy={class:"subtitle"},by={key:0,class:"recovery-error-panel"},_y={class:"error-message"},wy={key:1,class:"loading-spinner"},Sy={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=zn(),o=Me(),r="https://api.bridge-classroom.com/api",a=A("form"),i=A(""),l=A(""),u=A(""),f=A([]),d=A(!0),v=A({firstName:"",lastName:"",email:"",classrooms:""}),m=A(!1),g=A(!1),$=A(""),R=A(""),k=A(""),C=A(""),x=A("");yt(async()=>{o.initialize(),n.initializeFromUrl();const J=new URLSearchParams(window.location.search),V=J.get("recover"),oe=J.get("user_id");if(V&&oe){await he(oe,V),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?a.value="returning":o.hasUsers.value?a.value="switcher":a.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,W=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),z=O(()=>i.value.trim().length>0&&l.value.trim().length>0&&u.value.trim().length>0&&P.test(u.value.trim())),L=O(()=>o.currentUser.value?o.currentUser.value.firstName:""),Y=O(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function X(){v.value={firstName:"",lastName:"",email:"",classrooms:""};let J=!0;return i.value.trim()||(v.value.firstName="First name is required",J=!1),l.value.trim()||(v.value.lastName="Last name is required",J=!1),u.value.trim()?P.test(u.value.trim())||(v.value.email="Please enter a valid email address",J=!1):(v.value.email="Email is required",J=!1),o.findUserByEmail(u.value)&&(v.value.email="This email is already registered on this device.",J=!1),J}async function pe(){const J=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const V=await o.requestRecovery(J,r);return V.success?(R.value=J,C.value=V.message,a.value="recovery-sent",!1):V.message&&V.message.includes("No account found")?!0:(v.value.email=V.message||"Unable to verify email. Please try again.",!1)}catch(V){return console.error("Failed to check email on server:",V),W?v.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":v.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function he(J,V){a.value="recovery-claiming",g.value=!0,$.value="Recovering your account...",k.value="";try{const oe=await o.claimRecovery(J,V,r);oe.success&&oe.user?s("userReady",oe.user):(k.value=oe.error||"Recovery failed. Please try again.",a.value="form")}catch(oe){console.error("[Recovery] Exception:",oe),k.value="Unable to complete recovery. Please try again.",a.value="form"}finally{g.value=!1,$.value=""}}async function we(){if(x.value.trim().length===6){g.value=!0,$.value="Verifying code...",k.value="";try{const J=await o.claimRecoveryByCode(R.value.trim(),x.value.trim(),r);J.success&&J.user?s("userReady",J.user):k.value=J.error||"Invalid code. Please check and try again."}catch(J){console.error("Recovery code claim failed:",J),k.value="Unable to connect to server. Please try again."}finally{g.value=!1,$.value=""}}}async function Oe(){if(!X())return;if(g.value=!0,$.value="Checking account...",!await pe()){g.value=!1,$.value="";return}let V=[];n.hasSingleClassroom.value?V=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(V=[...f.value]),$.value="Creating your secure encryption key...";try{const oe=await o.createUser({firstName:i.value,lastName:l.value,email:u.value,classrooms:V,dataConsent:d.value,apiUrl:r});s("userReady",oe)}catch(oe){console.error("Failed to create user:",oe),v.value.email="Failed to create account. Please try again."}finally{g.value=!1,$.value=""}}function Ve(){s("userReady",o.currentUser.value)}function Ge(){a.value="switcher"}function ge(J){o.switchUser(J),s("userReady",o.currentUser.value)}function ne(){i.value="",l.value="",u.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,v.value={firstName:"",lastName:"",email:"",classrooms:""},a.value="form"}function K(){o.currentUser.value?a.value="returning":o.hasUsers.value&&(a.value="switcher")}function se(J){const V=f.value.indexOf(J);V===-1?f.value.push(J):f.value.splice(V,1)}return(J,V)=>(p(),h("div",Dg,[c("div",Bg,[c("div",Ug,[c("h1",null,w(Y.value),1)]),a.value==="form"?(p(),h("div",Mg,[V[16]||(V[16]=c("h2",null,"Welcome!",-1)),V[17]||(V[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:es(Oe,["prevent"]),class:"user-form"},[c("div",Fg,[V[8]||(V[8]=c("label",{for:"firstName"},"First Name",-1)),Te(c("input",{id:"firstName","onUpdate:modelValue":V[0]||(V[0]=oe=>i.value=oe),type:"text",placeholder:"Enter your first name",class:ae({"has-error":v.value.firstName}),autocomplete:"given-name"},null,2),[[vt,i.value]]),v.value.firstName?(p(),h("span",jg,w(v.value.firstName),1)):D("",!0)]),c("div",Hg,[V[9]||(V[9]=c("label",{for:"lastName"},"Last Name",-1)),Te(c("input",{id:"lastName","onUpdate:modelValue":V[1]||(V[1]=oe=>l.value=oe),type:"text",placeholder:"Enter your last name",class:ae({"has-error":v.value.lastName}),autocomplete:"family-name"},null,2),[[vt,l.value]]),v.value.lastName?(p(),h("span",Vg,w(v.value.lastName),1)):D("",!0)]),c("div",Kg,[V[10]||(V[10]=c("label",{for:"email"},"Email Address",-1)),Te(c("input",{id:"email","onUpdate:modelValue":V[2]||(V[2]=oe=>u.value=oe),type:"email",placeholder:"Enter your email address",class:ae({"has-error":v.value.email}),autocomplete:"email"},null,2),[[vt,u.value]]),v.value.email?(p(),h("span",Wg,w(v.value.email),1)):D("",!0),V[11]||(V[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),I(n).hasMultipleClassrooms.value?(p(),h("div",Gg,[V[12]||(V[12]=c("label",null,"Select Your Class(es)",-1)),c("div",zg,[(p(!0),h(te,null,ce(I(n).availableClassrooms.value,oe=>(p(),h("label",{key:oe.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:oe.id,checked:f.value.includes(oe.id),onChange:ze=>se(oe.id)},null,40,Jg),c("span",null,w(oe.name),1)]))),128))])])):I(n).hasSingleClassroom.value?(p(),h("div",qg,[V[13]||(V[13]=c("label",null,"Class",-1)),c("div",Yg,w(I(n).singleClassroom.value.name),1)])):D("",!0),c("div",Xg,[c("label",Qg,[Te(c("input",{type:"checkbox","onUpdate:modelValue":V[3]||(V[3]=oe=>d.value=oe)},null,512),[[da,d.value]]),V[14]||(V[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:V[4]||(V[4]=oe=>m.value=!m.value)},w(m.value?"Hide details":"What data is preserved?"),1),m.value?(p(),h("div",Zg,[...V[15]||(V[15]=[_o('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):D("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!z.value||g.value},[g.value?(p(),h("span",ty,w($.value),1)):(p(),h("span",sy,"Start Practicing"))],8,ey)],32),I(o).hasUsers.value?(p(),h("button",{key:0,class:"back-link",onClick:K}," Back to user selection ")):D("",!0)])):a.value==="returning"?(p(),h("div",ny,[c("h2",null,"Welcome back, "+w(L.value)+"!",1),V[18]||(V[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:Ve}," Continue "),c("button",{class:"switch-link",onClick:Ge}," Not "+w(L.value)+"? Switch user ",1)])):a.value==="switcher"?(p(),h("div",oy,[V[19]||(V[19]=c("h2",null,"Select User",-1)),V[20]||(V[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",ry,[(p(!0),h(te,null,ce(I(o).allUsers.value,oe=>{var ze;return p(),h("button",{key:oe.id,class:ae(["user-item",{"is-current":oe.id===I(o).currentUserId.value}]),onClick:ct=>ge(oe.id)},[c("span",ly,w(oe.firstName)+" "+w(oe.lastName),1),(ze=oe.classrooms)!=null&&ze.length?(p(),h("span",iy,w(oe.classrooms.join(", ")),1)):D("",!0)],10,ay)}),128))]),c("button",{class:"add-user-btn",onClick:ne}," + Add New User "),I(o).currentUser.value?(p(),h("button",{key:0,class:"back-link",onClick:K}," Cancel ")):D("",!0)])):a.value==="recovery-sent"?(p(),h("div",cy,[V[25]||(V[25]=c("h2",null,"Check Your Email",-1)),c("p",uy,[V[21]||(V[21]=xs(" We found an existing account for ",-1)),c("strong",null,w(R.value),1),V[22]||(V[22]=xs(". ",-1))]),c("div",dy,[c("p",null,w(C.value),1),V[23]||(V[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",fy,[V[24]||(V[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),Te(c("input",{id:"recoveryCode","onUpdate:modelValue":V[5]||(V[5]=oe=>x.value=oe),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:So(we,["enter"])},null,544),[[vt,x.value]]),c("button",{class:"submit-btn",disabled:x.value.trim().length!==6||g.value,onClick:we},[g.value?(p(),h("span",my,w($.value),1)):(p(),h("span",py,"Restore Account"))],8,vy),k.value?(p(),h("span",hy,w(k.value),1)):D("",!0)]),c("button",{class:"back-link",onClick:V[6]||(V[6]=oe=>a.value="form")}," Use a different email ")])):a.value==="recovery-claiming"?(p(),h("div",gy,[V[27]||(V[27]=c("h2",null,"Restoring Your Account",-1)),c("p",yy,w($.value),1),k.value?(p(),h("div",by,[c("p",_y,w(k.value),1),c("button",{class:"back-link",onClick:V[7]||(V[7]=oe=>a.value="form")}," Try again ")])):(p(),h("div",wy,[...V[26]||(V[26]=[c("div",{class:"spinner"},null,-1)])]))])):D("",!0)])]))}},Cy=me(Sy,[["__scopeId","data-v-4e48322f"]]),ps="https://api.bridge-classroom.com/api",Es="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",hs=A([]),Os=A(null),_t=A(!1),je=A(null);function Zn(){async function e(l){_t.value=!0,je.value=null;try{const f=await(await fetch(`${ps}/classrooms?teacher_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Es}})).json();return f.success?hs.value=f.classrooms:je.value=f.error||"Failed to fetch classrooms",f}catch(u){return console.error("Failed to fetch classrooms:",u),je.value="Unable to connect to server",null}finally{_t.value=!1}}async function t(l,u,f){_t.value=!0,je.value=null;try{const d=await fetch(`${ps}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Es},body:JSON.stringify({teacher_id:l,name:u,description:f||null})});if(!d.ok){const m=await d.text();return je.value=m||`Server error (${d.status})`,{success:!1,error:je.value}}const v=await d.json();return v.success?hs.value=[v.classroom,...hs.value]:je.value=v.error||"Failed to create classroom",v}catch(d){return console.error("Failed to create classroom:",d),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{_t.value=!1}}async function s(l){_t.value=!0,je.value=null;try{const f=await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}`,{headers:{"x-api-key":Es}})).json();return f.success?Os.value=f.classroom:je.value=f.error||"Failed to fetch classroom",f}catch(u){return console.error("Failed to fetch classroom detail:",u),je.value="Unable to connect to server",null}finally{_t.value=!1}}async function n(l,u){try{const d=await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Es}})).json();if(d.success&&Os.value){Os.value.members=Os.value.members.filter(m=>m.student_id!==u);const v=hs.value.findIndex(m=>m.id===l);v!==-1&&hs.value[v].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(l){_t.value=!0,je.value=null;try{const u=await fetch(`${ps}/join/${encodeURIComponent(l)}`);return u.status===404?(je.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),je.value="Unable to connect to server",null}finally{_t.value=!1}}async function r(l,u,f){_t.value=!0,je.value=null;try{const v=await(await fetch(`${ps}/join/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Es},body:JSON.stringify({student_id:u,encrypted_grant_payload:f})})).json();return v.success||(je.value=v.error||"Failed to join classroom"),v}catch(d){return console.error("Failed to join classroom:",d),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{_t.value=!1}}async function a(l,u){try{return await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Es},body:JSON.stringify({student_id:u})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){hs.value=[],Os.value=null,_t.value=!1,je.value=null}return{teacherClassrooms:hs,currentClassroom:Os,loading:_t,error:je,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:r,leaveClassroom:a,reset:i}}const $y={class:"settings-panel"},ky={class:"settings-body"},xy={class:"settings-section"},Ay={class:"info-row"},Ny={class:"info-value"},Ty={class:"info-row"},Ey={class:"info-value"},Oy={class:"info-row"},Iy={class:"info-row"},Ry={class:"info-value"},Py={key:1,class:"edit-form"},Ly={class:"form-group"},Dy={class:"form-group"},By={class:"form-group"},Uy={class:"checkbox-label"},My={key:0,class:"settings-section"},Fy={class:"assignment-list"},jy={class:"assignment-header"},Hy={class:"assignment-name"},Vy={class:"assignment-progress"},Ky={class:"progress-bar"},Wy={class:"assignment-meta"},Gy={key:0},zy={class:"assignment-list"},Jy={class:"assignment-header"},qy={class:"assignment-name"},Yy={class:"assignment-meta"},Xy={key:1,class:"settings-section"},Qy={class:"classroom-id"},Zy=["disabled","onClick"],eb={class:"settings-section"},tb={class:"toggle-row"},sb={class:"toggle-label"},nb=["checked"],ob={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Me(),o=zn(),r=zo(),a=Zn(),i=A(!1),l=A(""),u=A(""),f=A(!0),d=O(()=>n.currentUser.value),v=O(()=>{var Y;return!d.value||!((Y=d.value.classrooms)!=null&&Y.length)?"No classroom assigned":d.value.classrooms.map(X=>{const pe=o.availableClassrooms.value.find(he=>he.id===X);return pe?pe.name:X}).join(", ")}),m=O(()=>r.getAllAssignments().filter(Y=>Y.completionPercent<100)),g=O(()=>r.getAllAssignments().filter(Y=>Y.completionPercent>=100));function $(){d.value&&(l.value=d.value.firstName,u.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function R(){i.value=!1}function k(){d.value&&(n.updateUser(d.value.id,{firstName:l.value,lastName:u.value,dataConsent:f.value}),i.value=!1)}function C(){s("switchUser")}function x(){i.value=!1,s("close")}const P=A(null);async function W(Y){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(P.value=Y,(await a.leaveClassroom(Y,d.value.id)).success){const pe=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:pe.filter(he=>he!==Y)})}P.value=null}function z(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function L(Y){return Y?new Date(Y).toLocaleDateString():"N/A"}return(Y,X)=>{var pe,he,we,Oe,Ve,Ge,ge;return e.visible?(p(),h("div",{key:0,class:"settings-overlay",onClick:es(x,["self"])},[c("div",$y,[c("div",{class:"settings-header"},[X[5]||(X[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:x,"aria-label":"Close"},"  ")]),c("div",ky,[c("section",xy,[X[12]||(X[12]=c("h3",null,"Your Profile",-1)),i.value?(p(),h("div",Py,[c("div",Ly,[X[10]||(X[10]=c("label",{for:"editFirstName"},"First Name",-1)),Te(c("input",{id:"editFirstName","onUpdate:modelValue":X[1]||(X[1]=ne=>l.value=ne),type:"text"},null,512),[[vt,l.value]])]),c("div",Dy,[X[11]||(X[11]=c("label",{for:"editLastName"},"Last Name",-1)),Te(c("input",{id:"editLastName","onUpdate:modelValue":X[2]||(X[2]=ne=>u.value=ne),type:"text"},null,512),[[vt,u.value]])]),c("div",By,[c("label",Uy,[Te(c("input",{type:"checkbox","onUpdate:modelValue":X[3]||(X[3]=ne=>f.value=ne)},null,512),[[da,f.value]]),c("span",null,"Share practice results with "+w(I(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:k}," Save Changes "),c("button",{class:"secondary-btn",onClick:R}," Cancel ")])])):(p(),h(te,{key:0},[c("div",Ay,[X[6]||(X[6]=c("span",{class:"info-label"},"Name",-1)),c("span",Ny,w((pe=d.value)==null?void 0:pe.firstName)+" "+w((he=d.value)==null?void 0:he.lastName),1)]),c("div",Ty,[X[7]||(X[7]=c("span",{class:"info-label"},"Class",-1)),c("span",Ey,w(v.value),1)]),c("div",Oy,[X[8]||(X[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:ae(["info-value",(we=d.value)!=null&&we.dataConsent?"enabled":"disabled"])},w((Oe=d.value)!=null&&Oe.dataConsent?"Enabled":"Disabled"),3)]),c("div",Iy,[X[9]||(X[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",Ry,w(L((Ve=d.value)==null?void 0:Ve.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:$}," Edit Profile "),c("button",{class:"secondary-btn",onClick:C}," Switch User ")]),((Ge=d.value)==null?void 0:Ge.role)!=="teacher"&&((ge=d.value)==null?void 0:ge.role)!=="admin"?(p(),h("button",{key:0,class:"become-teacher-btn",onClick:X[0]||(X[0]=ne=>{s("close"),s("become-teacher")})}," Become a Teacher ")):D("",!0)],64))]),m.value.length||g.value.length?(p(),h("section",My,[X[16]||(X[16]=c("h3",null,"Assignments",-1)),m.value.length?(p(),h(te,{key:0},[X[13]||(X[13]=c("h4",null,"Active",-1)),c("div",Fy,[(p(!0),h(te,null,ce(m.value,ne=>(p(),h("div",{key:ne.id,class:"assignment-item"},[c("div",jy,[c("span",Hy,w(ne.name),1),c("span",Vy,w(ne.completionPercent)+"%",1)]),c("div",Ky,[c("div",{class:"progress-fill",style:kt({width:`${ne.completionPercent}%`})},null,4)]),c("div",Wy,[ne.dueDate?(p(),h("span",Gy," Due: "+w(L(ne.dueDate)),1)):D("",!0),c("span",null,w(ne.completedDeals)+"/"+w(ne.totalDeals)+" deals ",1)])]))),128))])],64)):D("",!0),g.value.length?(p(),h(te,{key:1},[X[15]||(X[15]=c("h4",null,"Completed",-1)),c("div",zy,[(p(!0),h(te,null,ce(g.value,ne=>(p(),h("div",{key:ne.id,class:"assignment-item completed"},[c("div",Jy,[c("span",qy,w(ne.name),1),X[14]||(X[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",Yy," Completed "+w(L(ne.lastPracticedAt)),1)]))),128))])],64)):D("",!0)])):D("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(p(),h("section",Xy,[X[17]||(X[17]=c("h3",null,"My Classrooms",-1)),(p(!0),h(te,null,ce(d.value.classrooms,ne=>(p(),h("div",{key:ne,class:"classroom-row"},[c("span",Qy,w(ne),1),c("button",{class:"leave-btn",disabled:P.value===ne,onClick:K=>W(ne)},w(P.value===ne?"Leaving...":"Leave"),9,Zy)]))),128))])):D("",!0),c("section",eb,[X[19]||(X[19]=c("h3",null,"Display Options",-1)),c("div",tb,[c("label",sb,[c("input",{type:"checkbox",checked:I(o).showLoadPbnOption.value,onChange:X[4]||(X[4]=ne=>I(o).setUIPref("showLoadPbnOption",ne.target.checked))},null,40,nb),X[18]||(X[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[X[20]||(X[20]=c("h3",null,"Data & Privacy",-1)),X[21]||(X[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:z}," Remove account from this device "),X[22]||(X[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):D("",!0)}}},rb=me(ob,[["__scopeId","data-v-57179473"]]),ab={class:"banner-content"},lb={class:"assignment-info"},ib={class:"assignment-title"},cb={class:"assignment-name"},ub={class:"assignment-meta"},db={class:"progress-text"},fb={class:"progress-bar"},vb={key:0,class:"complete-badge"},mb={class:"return-text"},pb={__name:"AssignmentBanner",setup(e){const t=zo(),s=O(()=>t.currentAssignment.value),n=O(()=>t.hasActiveAssignment.value),o=O(()=>t.assignmentProgress.value),r=O(()=>t.isAssignmentComplete.value),a=O(()=>t.inAssignmentMode.value),i=O(()=>{var $;if(!(($=s.value)!=null&&$.dueDate))return null;const v=new Date(s.value.dueDate);return Math.ceil((v-new Date)/(1e3*60*60*24))}),l=O(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=O(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(v,m)=>{var g,$;return n.value&&a.value?(p(),h("div",{key:0,class:ae(["assignment-banner",{complete:r.value}])},[c("div",ab,[c("div",lb,[c("div",ib,[m[0]||(m[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",cb,w((g=s.value)==null?void 0:g.name),1)]),c("div",ub,[c("span",db,w(o.value.completed)+" of "+w(o.value.total)+" deals ("+w(o.value.percent)+"%) ",1),l.value?(p(),h("span",{key:0,class:ae(["due-text",u.value])},w(l.value),3)):D("",!0)])]),c("div",fb,[c("div",{class:ae(["progress-fill",{complete:r.value}]),style:kt({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),r.value?(p(),h("div",vb," Complete! ")):D("",!0)],2)):s.value&&!a.value?(p(),h("div",{key:1,class:"return-banner",onClick:d},[m[1]||(m[1]=c("span",{class:"return-icon"},"",-1)),c("span",mb," Return to assignment: "+w(($=s.value)==null?void 0:$.name)+" ("+w(o.value.percent)+"% complete) ",1)])):D("",!0)}}},hb=me(pb,[["__scopeId","data-v-a4095a6a"]]),gb=["innerHTML"],yb={__name:"AnnouncementBanner",setup(e){const t=Aa(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(a,i)=>{const l=s[i.toLowerCase()];return l?`<span class="ann-circle" style="background:${l.bg};color:${l.fg}"></span>`:a})}return(o,r)=>I(t).announcement.value&&I(t).dismissed.value!==I(t).announcement.value.id?(p(),h("div",{key:0,class:ae(["announcement-banner",I(t).announcement.value.type])},[c("span",{class:"announcement-text",innerHTML:n(I(t).announcement.value.message)},null,8,gb),c("button",{class:"dismiss-btn",onClick:r[0]||(r[0]=a=>I(t).dismiss()),title:"Dismiss"},"")],2)):D("",!0)}},bb=me(yb,[["__scopeId","data-v-4b12409b"]]),_b={key:0,class:"status-content"},wb={key:1,class:"status-content offline"},Sb={key:0,class:"badge"},Cb={key:2,class:"status-content error"},$b={class:"status-text"},kb={key:0,class:"badge"},xb={key:3,class:"status-content pending"},Ab={class:"status-text"},Nb={key:4,class:"status-content synced"},Tb={__name:"SyncStatus",setup(e){const t=qc(),s=fs(),n=O(()=>s.pendingCount.value),o=O(()=>t.registrationFailed.value?"Not registered":"Sync failed"),r=O(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function a(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(l,u)=>(p(),h("div",{class:ae(["sync-status",r.value]),onClick:a},[I(t).isSyncing.value?(p(),h("div",_b,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):I(t).isOffline.value?(p(),h("div",wb,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),h("span",Sb,w(n.value),1)):D("",!0)])):I(t).hasError.value?(p(),h("div",Cb,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",$b,w(o.value),1),n.value>0?(p(),h("span",kb,w(n.value),1)):D("",!0),c("button",{class:"retry-btn",onClick:es(i,["stop"])},"Retry")])):n.value>0?(p(),h("div",xb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",Ab,w(n.value)+" pending",1)])):(p(),h("div",Nb,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},Eb=me(Tb,[["__scopeId","data-v-8457149a"]]),Ob=3;function Xc(e){if(!e||e.length===0)return null;const t={};for(const u of e){if(!u.deal_subfolder||u.deal_number==null)continue;const f=`${u.deal_subfolder}|${u.deal_number}`;t[f]||(t[f]={subfolder:u.deal_subfolder,number:u.deal_number,skillPath:u.skill_path,attempts:[]}),t[f].attempts.push({correct:u.correct,timestamp:u.timestamp})}const s=[];for(const u of Object.values(t)){if(u.attempts.length<Ob)continue;u.attempts.sort((k,C)=>k.timestamp.localeCompare(C.timestamp));const f=Math.floor(u.attempts.length/2),d=u.attempts.slice(0,f),v=u.attempts.slice(f),m=d.filter(k=>k.correct).length,g=d.length>0?Math.round(100*m/d.length):0,$=v.filter(k=>k.correct).length,R=v.length>0?Math.round(100*$/v.length):0;s.push({subfolder:u.subfolder,number:u.number,skillPath:u.skillPath,attempts:u.attempts.length,earlyPct:g,recentPct:R,improvement:R-g})}if(s.length===0)return null;const n={};for(const u of s){const f=u.skillPath||"uncategorized/unknown";if(!n[f]){const $=dc(f);n[f]={skillPath:f,skillName:$.name,category:$.category,boards:[],earlyTotal:0,earlyCount:0,recentTotal:0,recentCount:0}}const d=n[f];d.boards.push(u);const v=Math.floor(u.attempts/2),m=v,g=u.attempts-v;d.earlyTotal+=u.earlyPct*m,d.earlyCount+=m,d.recentTotal+=u.recentPct*g,d.recentCount+=g}const o=Object.values(n).map(u=>{const f=u.earlyCount>0?Math.round(u.earlyTotal/u.earlyCount):0,d=u.recentCount>0?Math.round(u.recentTotal/u.recentCount):0;return u.boards.sort((v,m)=>m.improvement-v.improvement),{skillPath:u.skillPath,skillName:u.skillName,category:u.category,boardCount:u.boards.length,earlyPct:f,recentPct:d,improvement:d-f,boards:u.boards}});o.sort((u,f)=>f.improvement-u.improvement);const r=Object.values(n).reduce((u,f)=>u+f.earlyCount,0),a=Object.values(n).reduce((u,f)=>u+f.earlyTotal,0),i=Object.values(n).reduce((u,f)=>u+f.recentCount,0),l=Object.values(n).reduce((u,f)=>u+f.recentTotal,0);return{skillLearning:o,totalBoardsAnalyzed:s.length,overallEarlyPct:r>0?Math.round(a/r):0,overallRecentPct:i>0?Math.round(l/i):0}}function Ib(){const e=_a();return{learningData:O(()=>Xc(e.decryptedObservations.value)),isLoading:e.isLoading,hasError:e.hasError,error:e.error,fetchProgress:e.fetchProgress}}const Rb={class:"progress-dashboard"},Pb={class:"dashboard-header"},Lb={key:0,class:"loading"},Db={key:1,class:"error-state"},Bb={key:2,class:"empty-state"},Ub={key:3,class:"dashboard-content"},Mb={class:"overall-summary"},Fb={class:"overall-trend"},jb={class:"pct early"},Hb={class:"pct recent"},Vb={class:"overall-bars"},Kb={class:"bar-pair"},Wb={class:"bar-track"},Gb={class:"bar-pair"},zb={class:"bar-track"},Jb={class:"overall-count"},qb=["onClick"],Yb={class:"skill-info"},Xb={class:"skill-name"},Qb={class:"skill-meta"},Zb={key:0,class:"skill-boards"},e_={class:"board-name"},t_={class:"board-attempts"},s_={class:"board-trend"},n_={key:1,class:"skill-preview"},o_={class:"preview-name"},r_={class:"preview-trend"},a_=["onClick"],l_={class:"dashboard-actions"},i_={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Ib(),s=qt(),n=A(new Set),o=O(()=>t.learningData.value);yt(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}function a(d){const v=new Set(n.value);v.has(d)?v.delete(d):v.add(d),n.value=v}function i(d){return d.slice(0,3)}function l(d){return s.formatLessonName(d)}function u(d){return d>0?"+"+d:d<0?""+d:"0"}function f(d){return d>0?"positive":d<0?"negative":"neutral"}return(d,v)=>(p(),h("div",Rb,[c("header",Pb,[v[3]||(v[3]=c("h2",null,"Learning Progress",-1)),c("button",{class:"close-btn",onClick:v[0]||(v[0]=m=>d.$emit("close"))},"")]),I(t).isLoading.value?(p(),h("div",Lb,[...v[4]||(v[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):I(t).hasError.value?(p(),h("div",Db,[c("p",null,"Failed to load progress: "+w(I(t).error.value),1),c("button",{onClick:r},"Try Again")])):I(t).learningData.value?(p(),h("div",Ub,[c("div",Mb,[v[11]||(v[11]=c("div",{class:"overall-label"},"Overall",-1)),c("div",Fb,[c("span",jb,w(o.value.overallEarlyPct)+"%",1),v[8]||(v[8]=c("span",{class:"arrow"},"",-1)),c("span",Hb,w(o.value.overallRecentPct)+"%",1),c("span",{class:ae(["delta",f(o.value.overallRecentPct-o.value.overallEarlyPct)])},w(u(o.value.overallRecentPct-o.value.overallEarlyPct)),3)]),c("div",Vb,[c("div",Kb,[v[9]||(v[9]=c("div",{class:"bar-label"},"Early",-1)),c("div",Wb,[c("div",{class:"bar-fill early",style:kt({width:o.value.overallEarlyPct+"%"})},null,4)])]),c("div",Gb,[v[10]||(v[10]=c("div",{class:"bar-label"},"Now",-1)),c("div",zb,[c("div",{class:"bar-fill recent",style:kt({width:o.value.overallRecentPct+"%"})},null,4)])])]),c("div",Jb,w(o.value.totalBoardsAnalyzed)+" boards analyzed",1)]),(p(!0),h(te,null,ce(o.value.skillLearning,m=>(p(),h("div",{key:m.skillPath,class:"skill-card"},[c("div",{class:"skill-header",onClick:g=>a(m.skillPath)},[c("div",Yb,[c("span",Xb,w(m.skillName),1),c("span",Qb,w(m.boardCount)+" board"+w(m.boardCount!==1?"s":"")+"  "+w(m.earlyPct)+"%  "+w(m.recentPct)+"%",1)]),c("span",{class:ae(["skill-delta",f(m.improvement)])},w(u(m.improvement)),3)],8,qb),n.value.has(m.skillPath)?(p(),h("div",Zb,[(p(!0),h(te,null,ce(m.boards,g=>(p(),h("div",{key:g.subfolder+g.number,class:"board-row"},[c("span",e_,w(l(g.subfolder))+" #"+w(g.number),1),c("span",t_,w(g.attempts)+"x",1),c("span",s_,w(g.earlyPct)+"%  "+w(g.recentPct)+"%",1),c("span",{class:ae(["board-delta",f(g.improvement)])},w(u(g.improvement)),3)]))),128))])):m.boards.length>0?(p(),h("div",n_,[(p(!0),h(te,null,ce(i(m.boards),g=>(p(),h("div",{key:g.subfolder+g.number,class:"preview-row"},[c("span",o_,w(l(g.subfolder))+" #"+w(g.number)+":",1),c("span",r_,w(g.earlyPct)+"%  "+w(g.recentPct)+"%",1)]))),128)),m.boards.length>3?(p(),h("div",{key:0,class:"preview-more",onClick:g=>a(m.skillPath)}," +"+w(m.boards.length-3)+" more boards... ",9,a_)):D("",!0)])):D("",!0)]))),128)),c("div",l_,[c("button",{class:"secondary-btn",onClick:r},"Refresh Data"),c("button",{class:"primary-btn",onClick:v[2]||(v[2]=m=>d.$emit("close"))},"Continue Practicing")])])):(p(),h("div",Bb,[v[5]||(v[5]=c("h3",null,"Not Enough Data Yet",-1)),v[6]||(v[6]=c("p",null,"Keep practicing the same boards and you'll see your learning trends here!",-1)),v[7]||(v[7]=c("p",{class:"empty-hint"},"Boards need at least 3 attempts to show a trend.",-1)),c("button",{class:"primary-btn",onClick:v[1]||(v[1]=m=>d.$emit("close"))},"Start Practicing")]))]))}},c_=me(i_,[["__scopeId","data-v-8e03caf6"]]),u_="test-user-mastery",d_="test-classroom",f_="Negative_Double",v_="competitive_bidding/negative_double";let Vr=0;function Ke({boardNumber:e,correct:t,timestamp:s}){return Vr++,{id:`mastery-test-${Vr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:u_,skill_path:v_,correct:t,deal_subfolder:f_,deal_number:e,classroom:d_}}function ut(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function ao(e){return new Date(Date.now()-e*60*1e3).toISOString()}function m_(){Vr=0;const e=[];e.push(Ke({boardNumber:2,correct:!0,timestamp:ut(5)}),Ke({boardNumber:2,correct:!1,timestamp:ut(1)})),e.push(Ke({boardNumber:3,correct:!1,timestamp:ao(30)}),Ke({boardNumber:3,correct:!0,timestamp:ao(20)})),e.push(Ke({boardNumber:4,correct:!1,timestamp:ao(90)}),Ke({boardNumber:4,correct:!0,timestamp:ao(60)})),e.push(Ke({boardNumber:5,correct:!1,timestamp:ut(10)}),Ke({boardNumber:5,correct:!0,timestamp:ut(2)})),e.push(Ke({boardNumber:6,correct:!0,timestamp:ut(14)}),Ke({boardNumber:6,correct:!0,timestamp:ut(7)})),e.push(Ke({boardNumber:7,correct:!0,timestamp:ut(21)}),Ke({boardNumber:7,correct:!0,timestamp:ut(14)}),Ke({boardNumber:7,correct:!0,timestamp:ut(7)})),e.push(Ke({boardNumber:8,correct:!0,timestamp:ut(28)}),Ke({boardNumber:8,correct:!0,timestamp:ut(21)}),Ke({boardNumber:8,correct:!0,timestamp:ut(14)}),Ke({boardNumber:8,correct:!1,timestamp:ut(1)}));const t=[1,2,3,4,5].map(s=>({...Ke({boardNumber:s,correct:!0,timestamp:ut(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const p_=["onClick","title"],h_={key:0,class:"medal gold-medal"},g_={key:1,class:"medal silver-medal"},y_={class:"board-num"},b_={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=rn(),r=O(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const l=i.find(u=>u.boardNumber===s.forceRedBoard);l&&(l.status="red")}return i});function a(i){const l={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${l[i.status]}${u[i.achievement]}`}return(i,l)=>e.boardNumbers.length>0?(p(),h("div",{key:0,class:ae(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),h("button",{key:0,class:"intro-btn",onClick:l[0]||(l[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):D("",!0),(p(!0),h(te,null,ce(r.value,(u,f)=>(p(),h("div",{key:u.boardNumber,class:ae(["board-indicator",[`status-${u.status}`,{active:f===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:d=>n("goto",f),title:a(u)},[u.achievement==="gold"?(p(),h("span",h_,"")):u.achievement==="silver"?(p(),h("span",g_,"")):D("",!0),c("span",y_,w(u.boardNumber),1)],10,p_))),128))],2)):D("",!0)}},Qc=me(b_,[["__scopeId","data-v-820a0f0c"]]),__={class:"accomplishments-view"},w_={class:"view-header"},S_={key:0,class:"user-selector"},C_=["value"],$_=["value"],k_={key:1,class:"loading-state"},x_={key:2,class:"error-state"},A_={key:3,class:"empty-state"},N_={key:4,class:"view-content"},T_={class:"controls-row"},E_={class:"tabs"},O_={key:0,class:"tab-content"},I_={key:0,class:"no-data"},R_={key:1,class:"lesson-list"},P_={class:"lesson-header"},L_={class:"lesson-name"},D_={key:1,class:"tab-content"},B_={key:0,class:"no-data"},U_={key:1,class:"taxon-list"},M_={class:"taxon-header"},F_={class:"taxon-category"},j_={class:"taxon-name"},H_={class:"taxon-counts"},V_={class:"taxon-stat correct"},K_={class:"taxon-stat incorrect"},W_={class:"taxon-stat total"},G_={class:"view-actions"},z_={key:5,class:"test-mode-banner"},J_={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=qt(),o=rn(),a=new URLSearchParams(window.location.search).get("test");yt(async()=>{a==="mastery"||a==="accomplishments"?n.enableTestMode(m_()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function l(v){await n.selectUser(v)}function u(v,m){s("navigate-to-deal",{subfolder:v,dealNumber:m})}const f=O(()=>{const v=o.getObservations();return o.extractLessonsFromObservations(v).map(g=>{const $=o.computeBoardMastery(v,g.subfolder,g.boardNumbers),R=o.computeLessonAchievement($);return{...g,achievement:R.achievement}}).sort((g,$)=>d(g.subfolder).localeCompare(d($.subfolder)))});ft(f,v=>{o.fetchMissingBoardCounts(v.map(m=>m.subfolder))},{immediate:!0});function d(v){return n.formatLessonName(v)}return(v,m)=>(p(),h("div",__,[c("header",w_,[m[6]||(m[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:m[0]||(m[0]=g=>v.$emit("close"))},"")]),I(n).canViewOtherUsers.value?(p(),h("div",S_,[m[7]||(m[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:I(n).selectedUserId.value,onChange:m[1]||(m[1]=g=>l(g.target.value))},[(p(!0),h(te,null,ce(I(n).accessibleUsers.value,g=>(p(),h("option",{key:g.id,value:g.id},w(g.name)+w(g.isSelf?" (You)":""),9,$_))),128))],40,C_)])):D("",!0),I(n).loading.value?(p(),h("div",k_,[...m[8]||(m[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):I(n).error.value?(p(),h("div",x_,[c("p",null,"Failed to load: "+w(I(n).error.value),1),c("button",{onClick:i},"Try Again")])):I(n).hasData.value?(p(),h("div",N_,[c("div",T_,[c("div",E_,[c("button",{class:ae(["tab-btn",{active:I(n).activeTab.value==="lessons"}]),onClick:m[3]||(m[3]=g=>I(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:ae(["tab-btn",{active:I(n).activeTab.value==="taxons"}]),onClick:m[4]||(m[4]=g=>I(n).activeTab.value="taxons")}," Taxons ",2)])]),I(n).activeTab.value==="lessons"?(p(),h("div",O_,[f.value.length===0?(p(),h("div",I_," No lesson data available yet. ")):(p(),h("div",R_,[(p(!0),h(te,null,ce(f.value,g=>(p(),h("div",{key:g.subfolder,class:"lesson-row"},[c("div",P_,[c("span",L_,w(d(g.subfolder)),1),g.achievement!=="none"?(p(),h("span",{key:0,class:ae(["achievement-badge",g.achievement])},"  "+w(g.achievement==="gold"?"Gold":"Silver"),3)):D("",!0)]),ue(Qc,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,onGoto:$=>u(g.subfolder,g.boardNumbers[$])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):D("",!0),I(n).activeTab.value==="taxons"?(p(),h("div",D_,[I(n).filteredTaxonStats.value.length===0?(p(),h("div",B_," No skill data available yet. ")):(p(),h("div",U_,[(p(!0),h(te,null,ce(I(n).filteredTaxonStats.value,g=>(p(),h("div",{key:g.skillPath,class:"taxon-card"},[c("div",M_,[c("span",F_,w(g.categoryName),1),c("span",j_,w(g.skillName),1)]),c("div",H_,[c("span",V_,w(g.correct),1),c("span",K_,w(g.incorrect),1),c("span",W_,w(g.total)+" total",1)])]))),128))]))])):D("",!0),c("div",G_,[c("button",{class:"secondary-btn",onClick:i}," Refresh "),c("button",{class:"primary-btn",onClick:m[5]||(m[5]=g=>v.$emit("close"))}," Done ")])])):(p(),h("div",A_,[m[9]||(m[9]=c("h3",null,"No Practice Data Yet",-1)),m[10]||(m[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:m[2]||(m[2]=g=>v.$emit("close"))},"Start Practicing")])),I(n).useTestData.value?(p(),h("div",z_," Test Mode - Using Generated Data ")):D("",!0)]))}},q_=me(J_,[["__scopeId","data-v-38e59c14"]]),Zc="bridge-classroom-anon-mode",Y_="BridgeClassroom-Anon",fr=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Vl=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function X_(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function Q_(e,t){const s=`${Y_}:${e} ${t}`,n=X_(s),o=Number(n%BigInt(fr.length)),r=Number(n/BigInt(fr.length)%BigInt(Vl.length));return{firstName:fr[o],lastName:Vl[r]}}const pn=A(localStorage.getItem(Zc)==="true");function Z_(){function e(){pn.value=!pn.value,localStorage.setItem(Zc,pn.value.toString())}function t(o){return pn.value?Q_(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:r,lastName:a}=t(o);return`${r} ${a}`}function n(o){const{firstName:r,lastName:a}=t(o),i=(r==null?void 0:r.charAt(0))||"",l=(a==null?void 0:a.charAt(0))||"";return(i+l).toUpperCase()||"?"}return{isAnonymized:pn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const e1={class:"teacher-student-list"},t1={class:"teacher-header"},s1={class:"header-actions"},n1=["value"],o1={key:0,class:"loading-state"},r1={key:1,class:"error-state"},a1={key:2,class:"empty-state"},l1={key:3,class:"empty-state"},i1={key:4,class:"student-table-wrap"},c1={class:"student-table"},u1=["onClick"],d1={class:"col-name"},f1={class:"student-name-cell"},v1={class:"avatar"},m1={class:"col-mastery"},p1={class:"mastery-pills"},h1={key:0,class:"pill pill-green"},g1={key:1,class:"pill pill-orange"},y1={key:2,class:"pill pill-yellow"},b1={key:3,class:"pill pill-red"},_1={key:4,class:"no-data-label"},w1={class:"col-active"},S1={class:"col-lessons"},C1={class:"recent-lessons"},$1={key:0,class:"no-data-label"},k1={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=Jn(),n=Zn(),o=Me(),r=Z_(),a=A("all"),i=A({});yt(async()=>{await s.loadAllStudentSummaries(),await l()});async function l(){const k=o.currentUser.value;if(!k)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(k.id);const C={};await Promise.all(n.teacherClassrooms.value.map(async x=>{const P=await n.fetchClassroomDetail(x.id);P!=null&&P.success&&(C[x.id]=new Set(P.classroom.members.map(W=>W.student_id)))})),i.value=C}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await l()}const f=O(()=>{const k=new Set;for(const C of Object.values(i.value))for(const x of C)k.add(x);return k}),d=O(()=>{const k=s.students.value;if(a.value==="all")return k;if(a.value==="none")return k.filter(x=>!f.value.has(x.id));const C=i.value[a.value];return C?k.filter(x=>C.has(x.id)):k}),v=O(()=>[...d.value].sort((k,C)=>{var W,z;const x=((W=m.value[k.id])==null?void 0:W.lastObservationTime)||"",P=((z=m.value[C.id])==null?void 0:z.lastObservationTime)||"";return P!==x?P.localeCompare(x):$(k).localeCompare($(C))})),m=O(()=>{const k={};for(const C of s.students.value)k[C.id]=s.getStudentMasterySummary(C.id);return k}),g=O(()=>{const k={};for(const C of s.students.value)k[C.id]=s.getStudentRecentLessons(C.id);return k});function $(k){return r.displayFullName(k)}function R(k){return r.displayInitials(k)}return(k,C)=>(p(),h("div",e1,[c("header",t1,[C[5]||(C[5]=c("h2",null,"My Students",-1)),c("div",s1,[I(n).teacherClassrooms.value.length?Te((p(),h("select",{key:0,"onUpdate:modelValue":C[0]||(C[0]=x=>a.value=x),class:"filter-select"},[C[3]||(C[3]=c("option",{value:"all"},"All Students",-1)),(p(!0),h(te,null,ce(I(n).teacherClassrooms.value,x=>(p(),h("option",{key:x.id,value:x.id},w(x.name),9,n1))),128)),C[4]||(C[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[Tn,a.value]]):D("",!0),c("button",{class:ae(["anon-btn",{active:I(r).isAnonymized.value}]),onClick:C[1]||(C[1]=x=>I(r).toggleAnonymize())},w(I(r).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:C[2]||(C[2]=x=>k.$emit("close"))},"Back")])]),I(s).loading.value?(p(),h("div",o1,[...C[6]||(C[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):I(s).error.value?(p(),h("div",r1,[c("p",null,"Failed to load: "+w(I(s).error.value),1),c("button",{onClick:u},"Try Again")])):I(s).students.value.length===0?(p(),h("div",a1,[...C[7]||(C[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):v.value.length===0?(p(),h("div",l1,[...C[8]||(C[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(p(),h("div",i1,[c("table",c1,[C[9]||(C[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(p(!0),h(te,null,ce(v.value,x=>{var P,W,z,L,Y,X,pe;return p(),h("tr",{key:x.id,class:"student-row",onClick:he=>k.$emit("select-student",x.id,$(x))},[c("td",d1,[c("div",f1,[c("div",v1,w(R(x)),1),c("span",null,w($(x)),1)])]),c("td",m1,[c("div",p1,[(P=m.value[x.id])!=null&&P.green?(p(),h("span",h1,w(m.value[x.id].green),1)):D("",!0),(W=m.value[x.id])!=null&&W.orange?(p(),h("span",g1,w(m.value[x.id].orange),1)):D("",!0),(z=m.value[x.id])!=null&&z.yellow?(p(),h("span",y1,w(m.value[x.id].yellow),1)):D("",!0),(L=m.value[x.id])!=null&&L.red?(p(),h("span",b1,w(m.value[x.id].red),1)):D("",!0),(Y=m.value[x.id])!=null&&Y.total?D("",!0):(p(),h("span",_1,"No data"))])]),c("td",w1,w(I(s).formatTimeSince((X=m.value[x.id])==null?void 0:X.lastObservationTime)),1),c("td",S1,[c("div",C1,[(p(!0),h(te,null,ce(g.value[x.id],(he,we)=>(p(),h("span",{key:we,class:"lesson-tag"},w(he),1))),128)),(pe=g.value[x.id])!=null&&pe.length?D("",!0):(p(),h("span",$1,"-"))])])],8,u1)}),128))])])]))]))}},x1=me(k1,[["__scopeId","data-v-dd6d8e66"]]),A1={class:"teacher-student-detail"},N1={class:"detail-header"},T1={class:"student-info"},E1={class:"avatar"},O1={class:"last-active"},I1={key:0,class:"loading-state"},R1={key:1,class:"detail-content"},P1={key:0,class:"stats-row"},L1={class:"stat stat-green"},D1={key:0,class:"stat stat-orange"},B1={key:1,class:"stat stat-yellow"},U1={key:2,class:"stat stat-red"},M1={key:3,class:"stat stat-grey"},F1={class:"mastery-section"},j1={key:0,class:"no-data"},H1={key:1,class:"lesson-list"},V1={class:"lesson-header"},K1=["onClick"],W1={class:"mastery-strip"},G1=["title","onClick"],z1={key:0,class:"medal gold-medal"},J1={key:1,class:"medal silver-medal"},q1={class:"board-num"},Y1={class:"progress-section"},X1={key:0,class:"no-data"},Q1={key:1},Z1={class:"learning-overall"},e0={class:"learning-overall-trend"},t0={class:"pct early"},s0={class:"pct recent"},n0={class:"learning-bar-row"},o0={class:"bar-track"},r0={class:"learning-bar-row"},a0={class:"bar-track"},l0={class:"learning-count"},i0=["onClick"],c0={class:"learning-skill-info"},u0={class:"learning-skill-name"},d0={class:"learning-skill-meta"},f0={key:0,class:"learning-boards"},v0={class:"learning-board-name"},m0={class:"learning-board-attempts"},p0={class:"learning-board-trend"},h0={key:1,class:"learning-preview"},g0={class:"learning-preview-name"},y0={class:"learning-preview-trend"},b0=["onClick"],_0={class:"observation-total"},w0={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=Jn(),r=rn(),a=qt(),i=A(!1),l=A(new Set),u=O(()=>s.studentName.split(" ").map(W=>W[0]||"").join("").toUpperCase());yt(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const f=O(()=>o.studentObservations.value[s.studentId]||[]),d=O(()=>Xc(f.value)),v=O(()=>o.getStudentMasterySummary(s.studentId)),m=O(()=>o.formatTimeSince(v.value.lastObservationTime)),g=O(()=>{const P=f.value;return P.length===0?[]:r.extractLessonsFromObservations(P).map(z=>{const L=r.computeBoardMastery(P,z.subfolder,z.boardNumbers),Y=r.computeLessonAchievement(L);return{...z,boardMastery:L,achievement:Y.achievement}}).sort((z,L)=>C(z.subfolder).localeCompare(C(L.subfolder)))});ft(g,P=>{r.fetchMissingBoardCounts(P.map(W=>W.subfolder))},{immediate:!0});function $(P){const W=new Set(l.value);W.has(P)?W.delete(P):W.add(P),l.value=W}function R(P){return P>0?"+"+P:P<0?""+P:"0"}function k(P){return P>0?"positive":P<0?"negative":"neutral"}function C(P){return a.formatLessonName(P)}function x(P){const W={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${P.boardNumber}: ${W[P.status]}`}return(P,W)=>(p(),h("div",A1,[c("header",N1,[c("button",{class:"back-btn",onClick:W[0]||(W[0]=z=>P.$emit("back"))}," Students"),c("div",T1,[c("div",E1,w(u.value),1),c("div",null,[c("h2",null,w(e.studentName),1),c("span",O1,"Last active: "+w(m.value),1)])])]),i.value?(p(),h("div",I1,[...W[1]||(W[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(p(),h("div",R1,[v.value.total>0?(p(),h("div",P1,[c("div",L1,w(v.value.green)+" Green",1),v.value.orange?(p(),h("div",D1,w(v.value.orange)+" Orange",1)):D("",!0),v.value.yellow?(p(),h("div",B1,w(v.value.yellow)+" Yellow",1)):D("",!0),v.value.red?(p(),h("div",U1,w(v.value.red)+" Red",1)):D("",!0),v.value.grey?(p(),h("div",M1,w(v.value.grey)+" Grey",1)):D("",!0)])):D("",!0),c("section",F1,[W[2]||(W[2]=c("h3",null,"Lesson Mastery",-1)),g.value.length===0?(p(),h("div",j1," No lesson data available yet. ")):(p(),h("div",H1,[(p(!0),h(te,null,ce(g.value,z=>(p(),h("div",{key:z.subfolder,class:"lesson-row"},[c("div",V1,[c("button",{class:"lesson-name lesson-link",onClick:L=>n("navigate-to-lesson",z.subfolder)},w(C(z.subfolder)),9,K1),z.achievement!=="none"?(p(),h("span",{key:0,class:ae(["achievement-badge",z.achievement])},"  "+w(z.achievement==="gold"?"Gold":"Silver"),3)):D("",!0)]),c("div",W1,[(p(!0),h(te,null,ce(z.boardMastery,L=>(p(),h("div",{key:L.boardNumber,class:ae(["board-circle board-clickable","status-"+L.status]),title:x(L),onClick:Y=>n("navigate-to-lesson",z.subfolder,L.boardNumber)},[L.achievement==="gold"?(p(),h("span",z1,"")):L.achievement==="silver"?(p(),h("span",J1,"")):D("",!0),c("span",q1,w(L.boardNumber),1)],10,G1))),128))])]))),128))]))]),c("section",Y1,[W[6]||(W[6]=c("h3",null,"Learning Progress",-1)),d.value?(p(),h("div",Q1,[c("div",Z1,[c("div",e0,[c("span",t0,w(d.value.overallEarlyPct)+"%",1),W[3]||(W[3]=c("span",{class:"arrow"},"",-1)),c("span",s0,w(d.value.overallRecentPct)+"%",1),c("span",{class:ae(["learning-delta",k(d.value.overallRecentPct-d.value.overallEarlyPct)])},w(R(d.value.overallRecentPct-d.value.overallEarlyPct)),3)]),c("div",n0,[W[4]||(W[4]=c("span",{class:"bar-label"},"Early",-1)),c("div",o0,[c("div",{class:"bar-fill early",style:kt({width:d.value.overallEarlyPct+"%"})},null,4)])]),c("div",r0,[W[5]||(W[5]=c("span",{class:"bar-label"},"Now",-1)),c("div",a0,[c("div",{class:"bar-fill recent",style:kt({width:d.value.overallRecentPct+"%"})},null,4)])]),c("div",l0,w(d.value.totalBoardsAnalyzed)+" boards analyzed",1)]),(p(!0),h(te,null,ce(d.value.skillLearning,z=>(p(),h("div",{key:z.skillPath,class:"learning-skill-card"},[c("div",{class:"learning-skill-header",onClick:L=>$(z.skillPath)},[c("div",c0,[c("span",u0,w(z.skillName),1),c("span",d0,w(z.boardCount)+" board"+w(z.boardCount!==1?"s":"")+"  "+w(z.earlyPct)+"%  "+w(z.recentPct)+"%",1)]),c("span",{class:ae(["learning-delta",k(z.improvement)])},w(R(z.improvement)),3)],8,i0),l.value.has(z.skillPath)?(p(),h("div",f0,[(p(!0),h(te,null,ce(z.boards,L=>(p(),h("div",{key:L.subfolder+L.number,class:"learning-board-row"},[c("span",v0,w(C(L.subfolder))+" #"+w(L.number),1),c("span",m0,w(L.attempts)+"x",1),c("span",p0,w(L.earlyPct)+"%  "+w(L.recentPct)+"%",1),c("span",{class:ae(["learning-delta-sm",k(L.improvement)])},w(R(L.improvement)),3)]))),128))])):z.boards.length>0?(p(),h("div",h0,[(p(!0),h(te,null,ce(z.boards.slice(0,3),L=>(p(),h("div",{key:L.subfolder+L.number,class:"learning-preview-row"},[c("span",g0,w(C(L.subfolder))+" #"+w(L.number)+":",1),c("span",y0,w(L.earlyPct)+"%  "+w(L.recentPct)+"%",1)]))),128)),z.boards.length>3?(p(),h("div",{key:0,class:"learning-preview-more",onClick:L=>$(z.skillPath)}," +"+w(z.boards.length-3)+" more boards... ",9,b0)):D("",!0)])):D("",!0)]))),128))])):(p(),h("div",X1," Not enough repeat practice yet to show learning trends. "))]),c("div",_0,w(f.value.length)+" observations",1)]))]))}},S0=me(w0,[["__scopeId","data-v-277713db"]]),C0={key:0,class:"lesson-browser-loading"},$0={key:1,class:"lesson-browser-error"},k0={class:"lesson-browser"},x0={class:"browser-header"},A0={class:"browser-content"},N0=["onClick"],T0={class:"expand-icon"},E0={class:"category-name"},O0={class:"category-count"},I0={key:0,class:"lesson-list"},R0=["onClick"],P0={class:"lesson-name"},L0={class:"lesson-description"},D0={key:0,class:"error-message"},B0={key:3,class:"lesson-browser-inline"},U0={class:"browser-content-inline"},M0=["onClick"],F0={class:"expand-icon"},j0={class:"category-name"},H0={class:"category-count"},V0={key:0,class:"lesson-list"},K0=["onClick"],W0={class:"lesson-name"},G0={class:"lesson-description"},z0={key:0,class:"error-message-inline"},J0={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=A(null),r=A(null),a=A(!1),i=A([]),l=A(null),u=A(null);ft(()=>[s.visible,s.collection],([g,$])=>{g&&$&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){r.value="No collection specified";return}a.value=!0,r.value=null;try{const $=await fetch(s.collection.tocUrl);if(!$.ok)throw new Error(`Failed to load: ${$.statusText}`);o.value=await $.json()}catch($){console.error("Error fetching TOC:",$),r.value=`Could not load lesson catalog. ${$.message}`}finally{a.value=!1}}function d(g){const $=i.value.indexOf(g);$>=0?i.value.splice($,1):i.value.push(g)}function v(g){return g.includes("/")?g.split("/").pop():g}async function m(g,$){var R;u.value=null,l.value=g.id;try{const k=((R=s.collection)==null?void 0:R.baseUrl)||"",C=v(g.id),x=`${k}/${C}.pbn`,P=await fetch(x);if(!P.ok)throw new Error(`Failed to load lesson: ${P.statusText}`);const W=await P.text();n("load",{subfolder:g.id,name:g.name,category:$.name,content:W}),s.inline||n("close")}catch(k){console.error("Error loading lesson:",k),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{l.value=null}}return(g,$)=>e.visible&&a.value?(p(),h("div",C0,[...$[2]||($[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&r.value?(p(),h("div",$0,[c("p",null,w(r.value),1),c("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:$[1]||($[1]=es(R=>g.$emit("close"),["self"]))},[c("div",k0,[c("div",x0,[c("h2",null,w(o.value.name),1),c("button",{class:"close-btn",onClick:$[0]||($[0]=R=>g.$emit("close"))},"")]),c("div",A0,[(p(!0),h(te,null,ce(o.value.categories,R=>(p(),h("div",{key:R.id,class:"category-section"},[c("button",{class:ae(["category-header",{expanded:i.value.includes(R.id)}]),onClick:k=>d(R.id)},[c("span",T0,w(i.value.includes(R.id)?"":""),1),c("span",E0,w(R.name),1),c("span",O0,w(R.lessons.length)+" lessons",1)],10,N0),i.value.includes(R.id)?(p(),h("div",I0,[(p(!0),h(te,null,ce(R.lessons,k=>(p(),h("button",{key:k.id,class:ae(["lesson-item",{loading:l.value===k.id}]),onClick:C=>m(k,R)},[c("span",P0,w(k.name),1),c("span",L0,w(k.description),1)],10,R0))),128))])):D("",!0)]))),128))]),u.value?(p(),h("div",D0,w(u.value),1)):D("",!0)])])):e.visible&&e.inline&&o.value?(p(),h("div",B0,[c("div",U0,[(p(!0),h(te,null,ce(o.value.categories,R=>(p(),h("div",{key:R.id,class:"category-section"},[c("button",{class:ae(["category-header",{expanded:i.value.includes(R.id)}]),onClick:k=>d(R.id)},[c("span",F0,w(i.value.includes(R.id)?"":""),1),c("span",j0,w(R.name),1),c("span",H0,w(R.lessons.length)+" lessons",1)],10,M0),i.value.includes(R.id)?(p(),h("div",V0,[(p(!0),h(te,null,ce(R.lessons,k=>(p(),h("button",{key:k.id,class:ae(["lesson-item",{loading:l.value===k.id}]),onClick:C=>m(k,R)},[c("span",W0,w(k.name),1),c("span",G0,w(k.description),1)],10,K0))),128))])):D("",!0)]))),128))]),u.value?(p(),h("div",z0,w(u.value),1)):D("",!0)])):D("",!0)}},q0=me(J0,[["__scopeId","data-v-384a9c63"]]),Y0={class:"viewer-controls"},X0={class:"viewer-body"},Q0={key:0,class:"interaction-overlay"},Z0={key:1,class:"viewer-loading"},ew={key:2,class:"viewer-error"},tw=["src"],sw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Mt({x:80,y:80}),n=Mt({w:550,h:700}),o=A(!1),r=Mt({x:0,y:0}),a=A(null),i=A(!1),l=A(null),u=O(()=>a.value?a.value+"#navpanes=0&toolbar=0":null);async function f(C){if(d(),!!C){i.value=!0,l.value=null;try{const x=await fetch(C);if(!x.ok)throw new Error("Failed to load PDF");const P=await x.blob(),W=new Blob([P],{type:"application/pdf"});a.value=URL.createObjectURL(W)}catch(x){l.value="Could not load PDF",console.error("Failed to fetch intro PDF:",x)}finally{i.value=!1}}}function d(){a.value&&(URL.revokeObjectURL(a.value),a.value=null)}function v(){a.value&&window.open(a.value,"_blank")}ft(()=>[t.visible,t.url],([C,x])=>{C&&x?f(x):C||d()},{immediate:!0}),xi(d);function m(C){C.target.closest("button")||(o.value=!0,r.x=C.clientX-s.x,r.y=C.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",k))}function g(C){s.x=Math.max(0,C.clientX-r.x),s.y=Math.max(0,C.clientY-r.y)}function $(C){o.value=!0,r.x=C.clientX,r.y=C.clientY,r.startW=n.w,r.startH=n.h,document.addEventListener("pointermove",R),document.addEventListener("pointerup",k)}function R(C){n.w=Math.max(320,r.startW+(C.clientX-r.x)),n.h=Math.max(300,r.startH+(C.clientY-r.y))}function k(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",k)}return(C,x)=>e.visible?(p(),h("div",{key:0,class:"intro-pdf-viewer",style:kt({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:m},[x[1]||(x[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",Y0,[c("button",{class:"viewer-btn",onClick:v,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:x[0]||(x[0]=P=>C.$emit("close")),title:"Close"},"")])],32),c("div",X0,[o.value?(p(),h("div",Q0)):D("",!0),i.value?(p(),h("div",Z0,"Loading PDF...")):l.value?(p(),h("div",ew,w(l.value),1)):u.value?(p(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,tw)):D("",!0)]),c("div",{class:"resize-handle",onPointerdown:$},"",32)],4)):D("",!0)}},nw=me(sw,[["__scopeId","data-v-a97df645"]]),Is="https://api.bridge-classroom.com/api",Rs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",hn=A([]),gs=A([]),vr=A(null),wt=A(!1),Ne=A(null);function Yo(){async function e(i){wt.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?student_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const f=await l.text();return Ne.value=f||`Server error (${l.status})`,null}const u=await l.json();return u.success?hn.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch student assignments:",l),Ne.value="Unable to connect to server",null}finally{wt.value=!1}}async function t(i){wt.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?assigned_by=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const f=await l.text();return Ne.value=f||`Server error (${l.status})`,null}const u=await l.json();return u.success?gs.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch teacher assignments:",l),Ne.value="Unable to connect to server",null}finally{wt.value=!1}}async function s(i){wt.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?classroom_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const f=await l.text();return Ne.value=f||`Server error (${l.status})`,null}const u=await l.json();return u.success?u.assignments:(Ne.value=u.error||"Failed to fetch assignments",[])}catch(l){return console.error("Failed to fetch classroom assignments:",l),Ne.value="Unable to connect to server",[]}finally{wt.value=!1}}async function n(i){wt.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments/${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const f=await l.text();return Ne.value=f||`Server error (${l.status})`,null}const u=await l.json();return u.success?vr.value=u.assignment:Ne.value=u.error||"Failed to fetch assignment",u}catch(l){return console.error("Failed to fetch assignment detail:",l),Ne.value="Unable to connect to server",null}finally{wt.value=!1}}async function o({exercise_id:i,classroom_id:l,student_id:u,assigned_by:f,due_at:d,sort_order:v}){wt.value=!0,Ne.value=null;try{const m=await fetch(`${Is}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Rs},body:JSON.stringify({exercise_id:i,classroom_id:l||null,student_id:u||null,assigned_by:f,due_at:d||null,sort_order:v??null})});if(!m.ok){const $=await m.text();return Ne.value=$||`Server error (${m.status})`,{success:!1,error:Ne.value}}const g=await m.json();return g.success?gs.value=[g.assignment,...gs.value]:Ne.value=g.error||"Failed to create assignment",g}catch(m){return console.error("Failed to create assignment:",m),Ne.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{wt.value=!1}}async function r(i){try{const l=await fetch(`${Is}/assignments/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":Rs}});if(!l.ok){const f=await l.text();return Ne.value=f||`Server error (${l.status})`,{success:!1,error:Ne.value}}const u=await l.json();return u.success&&(gs.value=gs.value.filter(f=>f.id!==i),hn.value=hn.value.filter(f=>f.id!==i)),u}catch(l){return console.error("Failed to delete assignment:",l),{success:!1,error:"Unable to connect to server"}}}function a(){hn.value=[],gs.value=[],vr.value=null,wt.value=!1,Ne.value=null}return{studentAssignments:hn,teacherAssignments:gs,currentAssignment:vr,loading:wt,error:Ne,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:r,reset:a}}const ow={class:"collection-icon"},rw={class:"collection-name"},aw={class:"collection-desc"},lw={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",ow,w(e.collection.icon),1),c("span",rw,w(e.collection.name),1),c("span",aw,w(e.collection.description),1)]))}},iw=me(lw,[["__scopeId","data-v-747be5b1"]]),cw={class:"collection-grid"},uw={class:"collection-cards"},dw={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=zn().COLLECTIONS;return(n,o)=>(p(),h("div",cw,[o[0]||(o[0]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",uw,[(p(!0),h(te,null,ce(I(s),r=>(p(),De(iw,{key:r.id,collection:r,onClick:a=>n.$emit("select-collection",r.id)},null,8,["collection","onClick"]))),128))])]))}},Na=me(dw,[["__scopeId","data-v-66fee6e8"]]),fw={class:"casual-lobby"},vw={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(p(),h("div",fw,[ue(Na,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},mw=me(vw,[["__scopeId","data-v-a78f70b6"]]),pw={class:"assignment-panel"},hw={key:0,class:"loading-state"},gw={key:1,class:"empty-state"},yw={key:2,class:"assignment-cards"},bw=["onClick"],_w={class:"card-header"},ww={class:"exercise-name"},Sw={class:"card-meta"},Cw={key:0,class:"meta-item"},$w={class:"progress-section"},kw={class:"progress-bar"},xw={class:"progress-label"},Aw={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(a){return a.total_boards?Math.round(a.attempted_boards/a.total_boards*100):0}function s(a){return a.attempted_boards>=a.total_boards&&a.total_boards>0?"complete":a.due_at&&new Date(a.due_at)<new Date&&a.attempted_boards<a.total_boards?"overdue":a.attempted_boards>0?"in-progress":"new"}function n(a){const i=s(a);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(a){if(!a.due_at)return null;const i=new Date(a.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function r(a){if(!a.due_at)return"";const i=new Date(a.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(a,i)=>(p(),h("div",pw,[i[2]||(i[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),h("div",hw,[...i[0]||(i[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),h("div",gw,[...i[1]||(i[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),h("div",yw,[(p(!0),h(te,null,ce(e.assignments,l=>(p(),h("div",{key:l.id,class:ae(["assignment-card",s(l)]),onClick:u=>a.$emit("select-assignment",l)},[c("div",_w,[c("span",ww,w(l.exercise_name),1),c("span",{class:ae(["status-badge",s(l)])},w(n(l)),3)]),c("div",Sw,[l.classroom_name?(p(),h("span",Cw,w(l.classroom_name),1)):D("",!0),l.due_at?(p(),h("span",{key:1,class:ae(["meta-item",r(l)])},w(o(l)),3)):D("",!0)]),c("div",$w,[c("div",kw,[c("div",{class:ae(["progress-fill",s(l)]),style:kt({width:t(l)+"%"})},null,6)]),c("span",xw,w(l.attempted_boards)+" / "+w(l.total_boards)+" boards ",1)])],10,bw))),128))]))]))}},Nw=me(Aw,[["__scopeId","data-v-dc0b8e86"]]),Tw={class:"student-lobby"},Ew={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Me(),n=Yo(),o=O(()=>n.studentAssignments.value.length>0),r=O(()=>n.loading.value);function a(i){console.log("Selected assignment:",i)}return yt(()=>{const i=s.currentUser.value;i&&n.fetchStudentAssignments(i.id)}),(i,l)=>(p(),h("div",Tw,[o.value||r.value?(p(),De(Nw,{key:0,assignments:I(n).studentAssignments.value,loading:r.value,onSelectAssignment:a},null,8,["assignments","loading"])):D("",!0),ue(Na,{onSelectCollection:l[0]||(l[0]=u=>i.$emit("select-collection",u))})]))}},Ow=me(Ew,[["__scopeId","data-v-de436049"]]),eu="https://api.bridge-classroom.com/api",tu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",vo=A([]),Ta=A([]),Ea=A([]),Kr=A(!1),mr=A(null),Iw=2*60*1e3;async function Rw(e,t=!1){if(!t&&mr.value&&Date.now()-new Date(mr.value).getTime()<Iw)return{success:!0,cached:!0};Kr.value=!0;try{const s=await fetch(`${eu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":tu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return vo.value=n.classrooms||[],Ta.value=n.needs_attention||[],Ea.value=n.recent_activity||[],mr.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{Kr.value=!1}}async function Pw(e,t){try{const s=await fetch(`${eu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":tu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?Ta.value=[]:t==="activity"&&(Ea.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function Lw(){const e=O(()=>({classroomCount:vo.value.length,openAssignmentCount:vo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:vo,needsAttention:Ta,recentActivity:Ea,lobbyLoading:Kr,summaryStats:e,loadTeacherLobbyData:Rw,clearPanel:Pw}}const Dw={class:"roster"},Bw={class:"roster-header"},Uw={class:"member-count"},Mw={key:0,class:"roster-empty"},Fw={key:1,class:"roster-table"},jw={class:"member-name"},Hw={class:"member-email"},Vw={class:"member-date"},Kw={class:"member-action"},Ww=["onClick","disabled"],Gw={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=A(null);function o(a){try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return a}}function r(a){const i=`${a.first_name} ${a.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=a.student_id,s("remove-member",a.student_id),setTimeout(()=>{n.value=null},2e3))}return(a,i)=>(p(),h("div",Dw,[c("div",Bw,[i[0]||(i[0]=c("h4",null,"Class Roster",-1)),c("span",Uw,w(e.members.length)+" "+w(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),h("div",Mw,[...i[1]||(i[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),h("table",Fw,[i[2]||(i[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(p(!0),h(te,null,ce(e.members,l=>(p(),h("tr",{key:l.student_id},[c("td",jw,w(l.first_name)+" "+w(l.last_name),1),c("td",Hw,w(l.email),1),c("td",Vw,w(o(l.joined_at)),1),c("td",Kw,[c("button",{class:"remove-btn",onClick:u=>r(l),disabled:n.value===l.student_id},w(n.value===l.student_id?"Removing...":"Remove"),9,Ww)])]))),128))])]))]))}},zw=me(Gw,[["__scopeId","data-v-ee901be3"]]),Jw={class:"header-left"},qw={class:"classroom-name"},Yw={class:"header-meta"},Xw={class:"join-badge"},Qw={class:"member-count"},Zw={key:0,class:"stat-badge"},eS={key:1,class:"stat-badge completion"},tS={key:0,class:"mini-bars"},sS={class:"bar-label"},nS={class:"bar-track"},oS={class:"bar-count"},rS=["aria-label"],aS={key:0,class:"card-body"},lS={key:0,class:"classroom-desc"},iS={class:"invite-section"},cS={class:"invite-field"},uS=["value"],dS={class:"email-section"},fS={class:"email-header"},vS={class:"email-template"},mS={class:"email-body"},pS={key:1,class:"assignments-section"},hS={class:"assignment-list"},gS={class:"assignment-name"},yS={key:0,class:"assignment-due"},bS={class:"assignment-boards"},_S={key:3,class:"loading-roster"},wS={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=Zn(),r=Yo(),a=A(null),i=A(!1),l=A(!1),u=A(!1),f=A([]),d=O(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ft(()=>s.expanded,async k=>{if(k&&!a.value){i.value=!0;const[C,x]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),r.fetchClassroomAssignments(s.classroom.id)]);C!=null&&C.success&&(a.value=C.classroom),f.value=x||[],i.value=!1}});function v(k){return k?new Date(k).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function m(k){return k.students_total?Math.round(k.students_completed/k.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function $(){const k=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(k),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function R(k){const C=await o.removeMember(s.classroom.id,k);C!=null&&C.success&&(a.value&&(a.value.members=a.value.members.filter(x=>x.student_id!==k)),n("member-removed"))}return(k,C)=>(p(),h("div",{class:ae(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:C[0]||(C[0]=x=>k.$emit("toggle"))},[c("div",Jw,[c("h3",qw,w(e.classroom.name),1),c("div",Yw,[c("span",Xw,"JOIN: "+w(e.classroom.join_code),1),c("span",Qw,w(e.classroom.member_count)+" "+w(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),h("span",Zw,w(e.classroom.open_assignment_count)+" "+w(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):D("",!0),e.classroom.avg_completion_pct>0?(p(),h("span",eS,w(e.classroom.avg_completion_pct)+"% avg",1)):D("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),h("div",tS,[(p(!0),h(te,null,ce(e.classroom.assignments,x=>(p(),h("div",{key:x.id,class:"mini-bar"},[c("span",sS,w(x.exercise_name),1),c("div",nS,[c("div",{class:"bar-fill",style:kt({width:m(x)})},null,4)]),c("span",oS,w(x.students_completed)+"/"+w(x.students_total),1)]))),128))])):D("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:ae(["chevron",{rotated:e.expanded}])},"",2)],8,rS)]),e.expanded?(p(),h("div",aS,[e.classroom.description?(p(),h("p",lS,w(e.classroom.description),1)):D("",!0),c("div",iS,[C[2]||(C[2]=c("h4",null,"Invite Link",-1)),C[3]||(C[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",cS,[c("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:C[1]||(C[1]=x=>x.target.select())},null,8,uS),c("button",{class:"copy-btn",onClick:g},w(l.value?"Copied!":"Copy"),1)])]),c("div",dS,[c("div",fS,[C[4]||(C[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:$},w(u.value?"Copied!":"Copy"),1)]),c("div",vS,[C[5]||(C[5]=c("p",null,[c("strong",null,"Subject:"),xs(" Join our Bridge Classroom for practice exercises")],-1)),c("div",mS," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+w(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(p(),h("div",pS,[C[6]||(C[6]=c("h4",null,"Assignments",-1)),c("div",hS,[(p(!0),h(te,null,ce(f.value,x=>(p(),h("div",{key:x.id,class:"assignment-row"},[c("span",gS,w(x.exercise_name),1),x.due_at?(p(),h("span",yS,"Due "+w(v(x.due_at)),1)):D("",!0),c("span",bS,w(x.total_boards)+" boards",1)]))),128))])])):D("",!0),a.value?(p(),De(zw,{key:2,members:a.value.members,onRemoveMember:R},null,8,["members"])):i.value?(p(),h("div",_S," Loading roster... ")):D("",!0)])):D("",!0)],2))}},SS=me(wS,[["__scopeId","data-v-59d6a074"]]),CS={class:"modal-content"},$S={class:"step"},kS={class:"form-group"},xS={class:"form-group"},AS={class:"step-actions"},NS=["disabled"],TS={key:0,class:"error-text"},ES={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Me(),o=Zn(),r=A(""),a=A(""),i=A(!1),l=A(null);async function u(){if(!r.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,l.value=null;const d=await o.createClassroom(f.id,r.value.trim(),a.value.trim()||null);d.success?s("classroom-created",d.classroom):l.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(p(),h("div",{class:"modal-overlay",onClick:d[3]||(d[3]=es(v=>f.$emit("close"),["self"]))},[c("div",CS,[c("div",$S,[d[7]||(d[7]=c("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",kS,[d[4]||(d[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),Te(c("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=v=>r.value=v),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:So(u,["enter"])},null,544),[[vt,r.value]]),d[5]||(d[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",xS,[d[6]||(d[6]=c("label",{for:"classroom-desc"},[xs("Description "),c("span",{class:"optional"},"(optional)")],-1)),Te(c("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=v=>a.value=v),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[vt,a.value]])]),c("div",AS,[c("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=v=>f.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!r.value.trim()||i.value,onClick:u},w(i.value?"Creating...":"Create Classroom"),9,NS)]),l.value?(p(),h("p",TS,w(l.value),1)):D("",!0)])])]))}},OS=me(ES,[["__scopeId","data-v-c26a1ae6"]]),gn="https://api.bridge-classroom.com/api",yn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ys=A([]),pr=A(null),Lt=A(!1),Ie=A(null);function IS(){async function e(a={}){Lt.value=!0,Ie.value=null;try{const i=new URLSearchParams;a.created_by&&i.set("created_by",a.created_by),a.curriculum_path&&i.set("curriculum_path",a.curriculum_path),a.visibility&&i.set("visibility",a.visibility);const l=i.toString(),u=`${gn}/exercises${l?"?"+l:""}`,f=await fetch(u,{headers:{"x-api-key":yn}});if(!f.ok){const v=await f.text();return Ie.value=v||`Server error (${f.status})`,null}const d=await f.json();return d.success?ys.value=d.exercises:Ie.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),Ie.value="Unable to connect to server",null}finally{Lt.value=!1}}async function t(a){Lt.value=!0,Ie.value=null;try{const i=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{headers:{"x-api-key":yn}});if(!i.ok){const u=await i.text();return Ie.value=u||`Server error (${i.status})`,null}const l=await i.json();return l.success?pr.value=l.exercise:Ie.value=l.error||"Failed to fetch exercise",l}catch(i){return console.error("Failed to fetch exercise detail:",i),Ie.value="Unable to connect to server",null}finally{Lt.value=!1}}async function s({name:a,description:i,created_by:l,curriculum_path:u,visibility:f,boards:d}){Lt.value=!0,Ie.value=null;try{const v=await fetch(`${gn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":yn},body:JSON.stringify({name:a,description:i||null,created_by:l||null,curriculum_path:u||null,visibility:f||"public",boards:d})});if(!v.ok){const g=await v.text();return Ie.value=g||`Server error (${v.status})`,{success:!1,error:Ie.value}}const m=await v.json();return m.success?ys.value=[m.exercise,...ys.value]:Ie.value=m.error||"Failed to create exercise",m}catch(v){return console.error("Failed to create exercise:",v),Ie.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function n(a,i){Lt.value=!0,Ie.value=null;try{const l=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":yn},body:JSON.stringify(i)});if(!l.ok){const f=await l.text();return Ie.value=f||`Server error (${l.status})`,{success:!1,error:Ie.value}}const u=await l.json();return u.success||(Ie.value=u.error||"Failed to update exercise"),u}catch(l){return console.error("Failed to update exercise:",l),Ie.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function o(a){try{const i=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{method:"DELETE",headers:{"x-api-key":yn}});if(!i.ok){const u=await i.text();return Ie.value=u||`Server error (${i.status})`,{success:!1,error:Ie.value}}const l=await i.json();return l.success&&(ys.value=ys.value.filter(u=>u.id!==a)),l}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function r(){ys.value=[],pr.value=null,Lt.value=!1,Ie.value=null}return{exercises:ys,currentExercise:pr,loading:Lt,error:Ie,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:r}}const RS={class:"modal-content"},PS={class:"step"},LS={class:"form-group"},DS=["value"],BS={key:0,class:"form-hint"},US={class:"form-group"},MS={class:"target-options"},FS={class:"radio-option"},jS={class:"radio-option"},HS={key:0,class:"form-group"},VS=["value"],KS={key:1,class:"form-group"},WS=["value"],GS={class:"form-group"},zS={class:"step-actions"},JS=["disabled"],qS={key:2,class:"error-text"},YS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Me(),r=IS(),a=Yo(),i=Zn(),l=Jn(),u=A(""),f=A("classroom"),d=A(s.preselectedClassroomId||""),v=A(""),m=A(""),g=A(!1),$=A(null),R=O(()=>r.exercises.value),k=O(()=>r.loading.value),C=O(()=>i.teacherClassrooms.value),x=O(()=>l.students.value),P=O(()=>!(!u.value||f.value==="classroom"&&!d.value||f.value==="student"&&!v.value));async function W(){if(!P.value||g.value)return;const z=o.currentUser.value;if(!z)return;g.value=!0,$.value=null;const L=await a.createAssignment({exercise_id:u.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?v.value:null,assigned_by:z.id,due_at:m.value||null});L.success?n("assignment-created",L.assignment):$.value=L.error||"Failed to create assignment",g.value=!1}return yt(async()=>{r.exercises.value.length||await r.fetchExercises();const z=o.currentUser.value;z&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(z.id)}),(z,L)=>(p(),h("div",{class:"modal-overlay",onClick:L[7]||(L[7]=es(Y=>z.$emit("close"),["self"]))},[c("div",RS,[c("div",PS,[L[18]||(L[18]=c("h2",null,"Create Assignment",-1)),L[19]||(L[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",LS,[L[9]||(L[9]=c("label",{for:"exercise-select"},"Exercise",-1)),Te(c("select",{id:"exercise-select","onUpdate:modelValue":L[0]||(L[0]=Y=>u.value=Y),class:"form-select"},[L[8]||(L[8]=c("option",{value:""},"Select an exercise...",-1)),(p(!0),h(te,null,ce(R.value,Y=>(p(),h("option",{key:Y.id,value:Y.id},w(Y.name)+" ("+w(Y.board_count)+" boards)",9,DS))),128))],512),[[Tn,u.value]]),k.value?(p(),h("p",BS,"Loading exercises...")):D("",!0)]),c("div",US,[L[12]||(L[12]=c("label",null,"Assign to",-1)),c("div",MS,[c("label",FS,[Te(c("input",{type:"radio","onUpdate:modelValue":L[1]||(L[1]=Y=>f.value=Y),value:"classroom"},null,512),[[cl,f.value]]),L[10]||(L[10]=c("span",null,"Classroom",-1))]),c("label",jS,[Te(c("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=Y=>f.value=Y),value:"student"},null,512),[[cl,f.value]]),L[11]||(L[11]=c("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(p(),h("div",HS,[L[14]||(L[14]=c("label",{for:"classroom-select"},"Classroom",-1)),Te(c("select",{id:"classroom-select","onUpdate:modelValue":L[3]||(L[3]=Y=>d.value=Y),class:"form-select"},[L[13]||(L[13]=c("option",{value:""},"Select a classroom...",-1)),(p(!0),h(te,null,ce(C.value,Y=>(p(),h("option",{key:Y.id,value:Y.id},w(Y.name)+" ("+w(Y.member_count)+" students)",9,VS))),128))],512),[[Tn,d.value]])])):D("",!0),f.value==="student"?(p(),h("div",KS,[L[16]||(L[16]=c("label",{for:"student-select"},"Student",-1)),Te(c("select",{id:"student-select","onUpdate:modelValue":L[4]||(L[4]=Y=>v.value=Y),class:"form-select"},[L[15]||(L[15]=c("option",{value:""},"Select a student...",-1)),(p(!0),h(te,null,ce(x.value,Y=>(p(),h("option",{key:Y.id,value:Y.id},w(Y.first_name)+" "+w(Y.last_name),9,WS))),128))],512),[[Tn,v.value]])])):D("",!0),c("div",GS,[L[17]||(L[17]=c("label",{for:"due-date"},[xs("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),Te(c("input",{id:"due-date","onUpdate:modelValue":L[5]||(L[5]=Y=>m.value=Y),type:"date",class:"form-input"},null,512),[[vt,m.value]])]),c("div",zS,[c("button",{class:"btn btn-secondary",onClick:L[6]||(L[6]=Y=>z.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!P.value||g.value,onClick:W},w(g.value?"Creating...":"Create Assignment"),9,JS)]),$.value?(p(),h("p",qS,w($.value),1)):D("",!0)])])]))}},XS=me(YS,[["__scopeId","data-v-5e97b847"]]),QS={class:"needs-attention"},ZS={class:"panel-header"},eC={key:0,class:"empty-state"},tC={key:1,class:"attention-list"},sC={class:"item-icon"},nC={class:"item-text"},oC={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const r=n(o.due_at),a=r<=1?"tomorrow":`in ${r} days`;return`${o.exercise_name} due ${a}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const r=new Date(o)-Date.now();return Math.max(0,Math.ceil(r/(1e3*60*60*24)))}return(o,r)=>(p(),h("div",QS,[c("div",ZS,[r[1]||(r[1]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),h("button",{key:0,class:"clear-btn",onClick:r[0]||(r[0]=a=>o.$emit("clear"))},"Clear")):D("",!0)]),e.items.length?(p(),h("div",tC,[(p(!0),h(te,null,ce(e.items,(a,i)=>(p(),h("div",{key:i,class:ae(["attention-item",a.type])},[c("span",sC,w(t(a.type)),1),c("span",nC,w(s(a)),1)],2))),128))])):(p(),h("div",eC," All caught up! No items need attention. "))]))}},rC=me(oC,[["__scopeId","data-v-65e8ba1f"]]),aC={class:"recent-activity"},lC={class:"panel-header"},iC={key:0,class:"empty-state"},cC={key:1,class:"activity-list"},uC={class:"event-content"},dC={class:"event-text"},fC={class:"event-time"},vC={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const r=Date.now()-new Date(o).getTime(),a=Math.floor(r/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,r)=>(p(),h("div",aC,[c("div",lC,[r[1]||(r[1]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),h("button",{key:0,class:"clear-btn",onClick:r[0]||(r[0]=a=>o.$emit("clear"))},"Clear")):D("",!0)]),e.events.length?(p(),h("div",cC,[(p(!0),h(te,null,ce(e.events,(a,i)=>(p(),h("div",{key:i,class:"activity-item"},[c("span",{class:ae(["event-icon",a.type])},w(t(a.type)),3),c("div",uC,[c("span",dC,w(s(a)),1),c("span",fC,w(n(a.timestamp)),1)])]))),128))])):(p(),h("div",iC," No recent activity. "))]))}},mC=me(vC,[["__scopeId","data-v-39e672f5"]]),pC={class:"teacher-lobby"},hC={class:"welcome-section"},gC={class:"welcome-title"},yC={class:"welcome-subtitle"},bC={class:"quick-actions"},_C={key:0,class:"loading-state"},wC={key:1,class:"dashboard-grid"},SC={class:"left-column"},CC={key:0,class:"classrooms-section"},$C={class:"classroom-cards"},kC={key:1,class:"empty-state"},xC={class:"right-column"},AC={class:"collections-section"},NC={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin"],setup(e){const t=Me(),s=Lw(),n=A(!1),o=A(!1),r=A(null),a=O(()=>{const m=t.currentUser.value;return m?m.firstName:""}),i=O(()=>{const m=s.summaryStats.value;if(!m||m.classroomCount===0)return"Get started by creating your first classroom.";const g=[];return g.push(`${m.classroomCount} active ${m.classroomCount===1?"classroom":"classrooms"}`),m.openAssignmentCount>0&&g.push(`${m.openAssignmentCount} open ${m.openAssignmentCount===1?"assignment":"assignments"}`),g.join(", ")+"."});function l(m){r.value=r.value===m?null:m}function u(m){n.value=!1,r.value=m.id,v()}function f(){o.value=!1,v()}function d(m){const g=t.currentUser.value;g&&s.clearPanel(g.id,m)}function v(){const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id,!0)}return yt(()=>{const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id)}),(m,g)=>(p(),h("div",pC,[c("div",hC,[c("h2",gC,"Welcome back, "+w(a.value),1),c("p",yC,w(i.value),1)]),c("div",bC,[c("button",{class:"action-btn create",onClick:g[0]||(g[0]=$=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:g[1]||(g[1]=$=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),h("button",{key:0,class:"action-btn admin",onClick:g[2]||(g[2]=$=>m.$emit("show-admin"))}," Admin Panel ")):D("",!0)]),I(s).lobbyLoading.value&&!I(s).lobbyClassrooms.value.length?(p(),h("div",_C,[...g[8]||(g[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(p(),h("div",wC,[c("div",SC,[I(s).lobbyClassrooms.value.length?(p(),h("div",CC,[g[9]||(g[9]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",$C,[(p(!0),h(te,null,ce(I(s).lobbyClassrooms.value,$=>(p(),De(SS,{key:$.id,classroom:$,expanded:r.value===$.id,onToggle:R=>l($.id),onMemberRemoved:v},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),h("div",kC,[...g[10]||(g[10]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",xC,[ue(rC,{items:I(s).needsAttention.value,onClear:g[3]||(g[3]=$=>d("attention"))},null,8,["items"]),ue(mC,{events:I(s).recentActivity.value,onClear:g[4]||(g[4]=$=>d("activity"))},null,8,["events"])])])),c("div",AC,[g[11]||(g[11]=c("h3",{class:"section-title"},"Lesson Collections",-1)),ue(Na,{onSelectCollection:g[5]||(g[5]=$=>m.$emit("select-collection",$))})]),n.value?(p(),De(OS,{key:2,onClose:g[6]||(g[6]=$=>n.value=!1),onClassroomCreated:u})):D("",!0),o.value?(p(),De(XS,{key:3,onClose:g[7]||(g[7]=$=>o.value=!1),onAssignmentCreated:f})):D("",!0)]))}},TC=me(NC,[["__scopeId","data-v-82f0156b"]]),su="https://api.bridge-classroom.com/api",nu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ou=A(null),ru=A([]),au=A(null),lu=A(null),Wr=A(!1),Gr=A(null),hr=A(null),EC=60*1e3;async function iu(e=!1){if(!e&&hr.value&&Date.now()-new Date(hr.value).getTime()<EC)return{success:!0,cached:!0};Wr.value=!0,Gr.value=null;try{const t=await fetch(`${su}/admin/stats`,{headers:{"x-api-key":nu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return ou.value=s.stats,ru.value=s.popular_lessons||[],au.value=s.database,hr.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),Gr.value=t.message,{success:!1,error:t.message}}finally{Wr.value=!1}}async function cu(){try{const e=await fetch(`${su}/admin/health`,{headers:{"x-api-key":nu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return lu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function OC(){await Promise.all([iu(!0),cu()])}function IC(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function RC(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Oa(){return{stats:ou,popularLessons:ru,database:au,health:lu,loading:Wr,error:Gr,loadStats:iu,loadHealth:cu,refreshAll:OC,formatBytes:IC,formatUptime:RC}}const PC={class:"stats-row"},LC={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},DC={class:"stat-number"},BC={class:"stat-card",style:{"border-top-color":"#1565c0"}},UC={class:"stat-number"},MC={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},FC={class:"stat-number"},jC={class:"stat-card",style:{"border-top-color":"#e65100"}},HC={class:"stat-number"},VC={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,r,a,i;return p(),h("div",PC,[c("div",LC,[c("div",DC,w(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",BC,[c("div",UC,w(((r=e.stats)==null?void 0:r.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",MC,[c("div",FC,w(t((a=e.stats)==null?void 0:a.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",jC,[c("div",HC,w(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},KC=me(VC,[["__scopeId","data-v-a14a2199"]]),WC={class:"popular-lessons"},GC={key:0,class:"empty-state"},zC={key:1,class:"table-wrap"},JC={class:"lessons-table"},qC={class:"lesson-name"},YC={class:"num-col"},XC={class:"num-col"},QC={class:"num-col"},ZC={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),h("div",WC,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),h("div",zC,[c("table",JC,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(p(!0),h(te,null,ce(e.lessons.slice(0,15),r=>(p(),h("tr",{key:r.deal_subfolder},[c("td",qC,w(t(r.deal_subfolder)),1),c("td",YC,w(r.play_count.toLocaleString()),1),c("td",XC,w(r.unique_users),1),c("td",QC,[c("span",{class:ae(["accuracy-badge",s(r.accuracy_pct)])},w(r.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),h("div",GC,"No lesson data yet."))]))}},e$=me(ZC,[["__scopeId","data-v-079bd4f8"]]),t$={class:"database-panel"},s$={key:0,class:"empty-state"},n$={class:"db-size"},o$={class:"tables-table"},r$={class:"table-name"},a$={class:"num-col"},l$={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Oa();return(s,n)=>(p(),h("div",t$,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),h(te,{key:1},[c("div",n$,[n[0]||(n[0]=xs(" SQLite file: ",-1)),c("strong",null,w(I(t)(e.database.file_size_bytes)),1)]),c("table",o$,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(p(!0),h(te,null,ce(e.database.tables,o=>(p(),h("tr",{key:o.name},[c("td",r$,w(o.name),1),c("td",a$,w(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),h("div",s$,"Loading..."))]))}},i$=me(l$,[["__scopeId","data-v-d5945aff"]]),c$={class:"system-health"},u$={class:"health-header"},d$=["disabled"],f$={key:0,class:"empty-state"},v$={key:1,class:"health-rows"},m$={class:"health-row"},p$={class:"health-value"},h$={class:"health-row"},g$={class:"health-value"},y$={class:"health-row"},b$={class:"health-value"},_$={class:"health-row"},w$={class:"health-value"},S$={class:"health-row"},C$={class:"health-value"},$$={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Oa();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),r=Math.floor(o/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const a=Math.floor(r/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}return(n,o)=>(p(),h("div",c$,[c("div",u$,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=r=>n.$emit("refresh")),disabled:e.refreshing},w(e.refreshing?"Refreshing...":"Refresh"),9,d$)]),e.health?(p(),h("div",v$,[c("div",m$,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",p$,"Up "+w(I(t)(e.health.uptime_seconds)),1)]),c("div",h$,[c("span",{class:ae(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",g$,w(e.health.database_writable?"Writable":"Error"),1)]),c("div",y$,[c("span",{class:ae(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",b$,w(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",_$,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",w$,w(e.health.disk_available_gb)+" GB / "+w(e.health.disk_total_gb)+" GB available",1)]),c("div",S$,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",C$,"v"+w(e.health.api_version),1)])])):(p(),h("div",f$,"Loading..."))]))}},k$=me($$,[["__scopeId","data-v-0d4e96d5"]]),x$={class:"admin-lobby"},A$={class:"admin-header"},N$={key:0,class:"admin-subtitle"},T$={key:0,class:"loading-state"},E$={key:1,class:"error-state"},O$={class:"announcement-section"},I$={class:"announcement-info"},R$=["innerHTML"],P$={key:0,class:"announcement-expires"},L$={key:1,class:"announcement-expires"},D$={class:"announcement-actions"},B$=["disabled"],U$={key:1,class:"announcement-form"},M$={class:"form-row"},F$=["disabled"],j$={class:"content-grid"},H$={class:"name-correction-section"},V$={class:"search-row"},K$=["disabled"],W$={key:0,class:"search-results"},G$=["onClick"],z$={class:"result-name"},J$={class:"result-email"},q$={key:0,class:"corrected-badge"},Y$={key:1,class:"no-results"},X$={key:2,class:"edit-form"},Q$={class:"edit-row"},Z$={class:"edit-field"},ek={class:"edit-field"},tk=["disabled"],sk={key:0,class:"save-feedback success"},nk={key:1,class:"save-feedback error"},ok={__name:"AdminLobby",emits:["back"],setup(e){const t=Oa(),s=Aa(),n=A(!1),o=A(""),r=A("info"),a=A(""),i=A(!1),l=A(!1),u=A(!1);function f(){const K=s.announcement.value;if(K){if(o.value=K.message,r.value=K.type,K.expires_at){const se=new Date(K.expires_at);a.value=new Date(se.getTime()-se.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else a.value="";u.value=!0}}function d(){u.value=!1,o.value="",r.value="info",a.value=""}async function v(){if(o.value.trim()){i.value=!0;try{const K=a.value?new Date(a.value).toISOString():null;await s.setAnnouncement(o.value.trim(),r.value,K),o.value="",r.value="info",a.value="",u.value=!1}catch(K){console.error("Failed to publish announcement:",K)}finally{i.value=!1}}}async function m(){l.value=!0;try{await s.clearAnnouncement()}catch(K){console.error("Failed to clear announcement:",K)}finally{l.value=!1}}function g(K){return K?new Date(K).toLocaleString():""}const $={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function R(K){return K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(J,V)=>{const oe=$[V.toLowerCase()];return oe?`<span class="ann-circle" style="background:${oe.bg};color:${oe.fg}"></span>`:J})}const k="https://api.bridge-classroom.com/api",C="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",x=A(""),P=A([]),W=A(!1),z=A(!1),L=A(null),Y=A(""),X=A(""),pe=A(!1),he=A(!1),we=A("");async function Oe(){if(x.value.trim()){z.value=!0,W.value=!1,P.value=[],L.value=null,he.value=!1,we.value="";try{const K=await fetch(`${k}/admin/users/search?q=${encodeURIComponent(x.value.trim())}`,{headers:{"x-api-key":C}});if(!K.ok)throw new Error(`Search failed: ${K.status}`);const se=await K.json();P.value=se.users||[]}catch(K){console.error("User search failed:",K)}finally{z.value=!1,W.value=!0}}}function Ve(K){L.value=K,Y.value=K.first_name,X.value=K.last_name,he.value=!1,we.value=""}async function Ge(){if(!(!L.value||!Y.value.trim()||!X.value.trim())){pe.value=!0,he.value=!1,we.value="";try{const K=await fetch(`${k}/admin/users/${encodeURIComponent(L.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":C},body:JSON.stringify({first_name:Y.value.trim(),last_name:X.value.trim()})});if(!K.ok)throw new Error(`Save failed: ${K.status}`);const se=await K.json();se.success&&(he.value=!0,L.value.first_name=se.user.first_name,L.value.last_name=se.user.last_name,L.value.name_corrected_at=se.user.name_corrected_at)}catch(K){we.value=K.message}finally{pe.value=!1}}}async function ge(){await Promise.all([t.loadStats(),t.loadHealth()])}async function ne(){n.value=!0,await t.refreshAll(),n.value=!1}return yt(ge),(K,se)=>(p(),h("div",x$,[c("div",A$,[c("button",{class:"back-btn",onClick:se[0]||(se[0]=J=>K.$emit("back"))}," Back to Dashboard"),se[7]||(se[7]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),I(t).stats.value?(p(),h("p",N$,w(I(t).stats.value.total_observations.toLocaleString())+" total observations across "+w(I(t).stats.value.total_users)+" users ",1)):D("",!0)]),I(t).loading.value&&!I(t).stats.value?(p(),h("div",T$,[...se[8]||(se[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):I(t).error.value?(p(),h("div",E$,[c("p",null,w(I(t).error.value),1),c("button",{class:"retry-btn",onClick:ge},"Retry")])):I(t).stats.value?(p(),h(te,{key:2},[c("div",O$,[se[10]||(se[10]=c("h3",{class:"section-title"},"Site Announcement",-1)),I(s).announcement.value&&!u.value?(p(),h("div",{key:0,class:ae(["current-announcement",I(s).announcement.value.type])},[c("div",I$,[c("span",{class:ae(["announcement-type-badge",I(s).announcement.value.type])},w(I(s).announcement.value.type),3),c("span",{class:"announcement-message",innerHTML:R(I(s).announcement.value.message)},null,8,R$),I(s).announcement.value.expires_at?(p(),h("span",P$," Expires: "+w(g(I(s).announcement.value.expires_at)),1)):(p(),h("span",L$,"No expiration"))]),c("div",D$,[c("button",{class:"edit-btn",onClick:f},"Edit"),c("button",{class:"clear-btn",onClick:m,disabled:l.value},w(l.value?"Clearing...":"Clear"),9,B$)])],2)):u.value||!I(s).announcement.value?(p(),h("div",U$,[Te(c("input",{"onUpdate:modelValue":se[1]||(se[1]=J=>o.value=J),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:So(v,["enter"])},null,544),[[vt,o.value]]),c("div",M$,[Te(c("select",{"onUpdate:modelValue":se[2]||(se[2]=J=>r.value=J),class:"type-select"},[...se[9]||(se[9]=[c("option",{value:"info"},"Info",-1),c("option",{value:"warning"},"Warning",-1),c("option",{value:"urgent"},"Urgent",-1)])],512),[[Tn,r.value]]),Te(c("input",{"onUpdate:modelValue":se[3]||(se[3]=J=>a.value=J),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[vt,a.value]]),u.value?(p(),h("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):D("",!0),c("button",{class:"publish-btn",onClick:v,disabled:!o.value.trim()||i.value},w(i.value?"Publishing...":u.value?"Update":"Publish"),9,F$)])])):D("",!0)]),ue(KC,{stats:I(t).stats.value},null,8,["stats"]),c("div",j$,[ue(e$,{lessons:I(t).popularLessons.value},null,8,["lessons"]),ue(i$,{database:I(t).database.value},null,8,["database"])]),ue(k$,{health:I(t).health.value,refreshing:n.value,onRefresh:ne},null,8,["health","refreshing"]),c("div",H$,[se[13]||(se[13]=c("h3",{class:"section-title"},"Correct User Name",-1)),c("div",V$,[Te(c("input",{"onUpdate:modelValue":se[4]||(se[4]=J=>x.value=J),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:So(Oe,["enter"])},null,544),[[vt,x.value]]),c("button",{class:"search-btn",onClick:Oe,disabled:z.value||!x.value.trim()},w(z.value?"Searching...":"Search"),9,K$)]),P.value.length?(p(),h("div",W$,[(p(!0),h(te,null,ce(P.value,J=>(p(),h("div",{key:J.id,class:ae(["search-result-item",{selected:L.value&&L.value.id===J.id}]),onClick:V=>Ve(J)},[c("span",z$,w(J.first_name)+" "+w(J.last_name),1),c("span",J$,w(J.email),1),J.name_corrected_at?(p(),h("span",q$,"corrected")):D("",!0)],10,G$))),128))])):D("",!0),W.value&&!P.value.length?(p(),h("div",Y$,' No users found for "'+w(x.value)+'" ',1)):D("",!0),L.value?(p(),h("div",X$,[c("div",Q$,[c("div",Z$,[se[11]||(se[11]=c("label",null,"First Name",-1)),Te(c("input",{"onUpdate:modelValue":se[5]||(se[5]=J=>Y.value=J),type:"text",class:"edit-input"},null,512),[[vt,Y.value]])]),c("div",ek,[se[12]||(se[12]=c("label",null,"Last Name",-1)),Te(c("input",{"onUpdate:modelValue":se[6]||(se[6]=J=>X.value=J),type:"text",class:"edit-input"},null,512),[[vt,X.value]])]),c("button",{class:"save-btn",onClick:Ge,disabled:pe.value||!Y.value.trim()||!X.value.trim()},w(pe.value?"Saving...":"Save"),9,tk)]),he.value?(p(),h("p",sk,"Name corrected successfully.")):D("",!0),we.value?(p(),h("p",nk,w(we.value),1)):D("",!0)])):D("",!0)])],64)):D("",!0)]))}},rk=me(ok,[["__scopeId","data-v-5a6964cf"]]),ak={class:"lobby-view"},lk={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Me(),s=Yo(),n=A(!1),o=O(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),r=O(()=>s.studentAssignments.value.length>0),a=O(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return yt(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,l)=>(p(),h("div",ak,[n.value?(p(),De(rk,{key:0,onBack:l[0]||(l[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),De(TC,{key:1,"is-admin":o.value==="admin",onSelectCollection:l[1]||(l[1]=u=>i.$emit("select-collection",u)),onShowAdmin:l[2]||(l[2]=u=>n.value=!0)},null,8,["is-admin"])):r.value||a.value?(p(),De(Ow,{key:2,onSelectCollection:l[3]||(l[3]=u=>i.$emit("select-collection",u))})):(p(),De(mw,{key:3,onSelectCollection:l[4]||(l[4]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:l[5]||(l[5]=u=>i.$emit("show-become-teacher"))}))]))}},ik=me(lk,[["__scopeId","data-v-0f28018d"]]),ck={class:"modal-content"},uk={key:0,class:"step step-overview"},dk={class:"step-actions"},fk={key:1,class:"step step-agreement"},vk={class:"agreement-checkbox"},mk={class:"step-actions"},pk=["disabled"],hk={key:0,class:"error-text"},gk={key:2,class:"step step-confirmation"},yk={class:"step-actions"},bk={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Me(),o=A(1),r=A(!1),a=A(!1),i=A(null);async function l(){const u=n.currentUser.value;if(u){a.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:v,privateKey:m}=await hm();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:v,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:m,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(v){console.warn("Failed to create viewer record:",v)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{a.value=!1}}}return(u,f)=>(p(),h("div",{class:"modal-overlay",onClick:f[5]||(f[5]=es(d=>u.$emit("close"),["self"]))},[c("div",ck,[o.value===1?(p(),h("div",uk,[f[6]||(f[6]=_o('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",dk,[c("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(p(),h("div",fk,[f[8]||(f[8]=_o('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",vk,[Te(c("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>r.value=d)},null,512),[[da,r.value]]),f[7]||(f[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",mk,[c("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!r.value||a.value,onClick:l},w(a.value?"Activating...":"Activate Teacher Account"),9,pk)]),i.value?(p(),h("p",hk,w(i.value),1)):D("",!0)])):o.value===3?(p(),h("div",gk,[f[9]||(f[9]=c("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=c("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",yk,[c("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>u.$emit("activated"))},"Go to Dashboard ")])])):D("",!0)])]))}},_k=me(bk,[["__scopeId","data-v-56e5717d"]]),wk={},Sk={class:"page-footer"};function Ck(e,t){return p(),h("footer",Sk,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const $k=me(wk,[["render",Ck],["__scopeId","data-v-1b649814"]]),kk={key:1,class:"app"},xk={class:"app-header"},Ak={class:"header-right"},Nk=["title"],Tk={key:3,class:"stats"},Ek={class:"correct"},Ok={class:"wrong"},Ik={class:"user-avatar-group"},Rk=["title"],Pk=["title"],Lk={class:"app-main"},Dk={key:3,class:"collection-view"},Bk={key:4,class:"practice-layout"},Uk={class:"practice-left"},Mk={class:"practice-right"},Fk={key:1,class:"commentary-panel"},jk=["innerHTML"],Hk=["innerHTML"],Vk=["innerHTML"],Kk=["innerHTML"],Wk={class:"commentary-controls"},Gk={key:0,class:"bidding-box-wrapper"},zk={key:1,class:"card-choice-prompt"},Jk=["innerHTML"],qk={key:3,class:"completion-controls"},Yk={key:0,class:"registration-toast"},Xk={__name:"MainLayout",setup(e){const t=Yv(),s=zn(),n=Me(),o=zo(),r=qc(),a=Jn(),i=Aa(),l=rp(),u=A(!1),f=A(!1),d=A(!1),v=A(!1),m=A(null),g=A(""),$=A(null),R=A(null),k=A(null),C=A(!1),x=A(null),P=A(null),W=A(!1),z=A(!1),L=A(null);function Y(y,b=".current"){if(!y)return;const T=y.querySelector(b);T&&(y.scrollTop=T.offsetTop-y.offsetTop)}ft(()=>l.currentStepIndex.value,()=>{Pn(()=>{Y($.value,".narrative-text.current")})}),ft(()=>l.isComplete.value,y=>{y&&Pn(()=>{Y($.value,".narrative-text.current")})});const X=O(()=>n.isAuthenticated.value),pe=O(()=>{const y=n.currentUser.value;return y?`${y.firstName} ${y.lastName}`:""}),he=O(()=>{const y=n.currentUser.value;return y?`${y.firstName.charAt(0)}${y.lastName.charAt(0)}`.toUpperCase():"?"}),we=O(()=>{const y=n.currentUser.value;return(y==null?void 0:y.role)||"student"}),Oe=O(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let Ve=null;yt(()=>{i.loadAnnouncement(),Ve=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),la(()=>{Ve&&clearInterval(Ve)}),yt(async()=>{s.initializeFromUrl(),n.initialize();const y=new URLSearchParams(window.location.search);y.get("recover")&&y.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const b=s.getCollectionFromUrl(),T=s.getLessonFromUrl();b&&(R.value=b,T&&await G(b,T)),n.isAuthenticated.value&&(await r.initialize(),await n.syncRole(),qt().initialize(),await a.checkTeacherStatus())});async function Ge(y){console.log("User ready:",y.firstName,y.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),z.value=!0,setTimeout(()=>{z.value=!1},4e3)),await r.initialize(),qt().initialize(),await a.checkTeacherStatus();const T=sessionStorage.getItem("pendingJoinCode");if(T){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:T}});return}}function ge(){qt().reset(),_a().clearCache(),fs().reset(),a.reset(),n.currentUserId.value=null,u.value=!1,v.value=!1,m.value=null}async function ne(){C.value=!1,await a.checkTeacherStatus()}const K=A([]),se=A(0),J=O(()=>K.value[se.value]||null),V=O(()=>{var E;const y=q(R.value),b=y!=null&&y.name?`${y.name} - `:"";if((E=k.value)!=null&&E.name)return b+k.value.name;if(!J.value)return"";const T=J.value.subfolder||J.value.category||"";return T?b+T:""});ft(se,()=>{J.value&&(l.loadDeal(J.value),s.setDealInUrl(J.value.boardNumber))},{flush:"sync"}),ft(()=>l.observationStore.pendingCount.value,(y,b)=>{y>b&&r.triggerSync()}),ft(()=>l.isComplete.value,y=>{y&&(x.value=null)});function oe({subfolder:y,name:b,category:T,content:E}){const B=Tl(E);if(B.length>0){const H=B.map(le=>({...le,subfolder:le.subfolder||y,category:le.category||T}));K.value=H,se.value=0,l.loadDeal(H[0]),l.resetStats(),rn().saveLessonBoardNumbers(y,H.map(le=>le.boardNumber)),k.value={id:y,name:b,category:T},s.setLessonInUrl(y),W.value=!1,U()}else alert("No deals found in the lesson file")}const ze=O(()=>l.boardState.correctCount),ct=O(()=>l.boardState.wrongCount);function bt(y){!l.makeBid(y)&&J.value&&(x.value=J.value.boardNumber)}function Qe({seat:y,suit:b,rank:T}){!l.makeCardChoice(b,T)&&J.value&&(x.value=J.value.boardNumber)}function F(){l.clearCardFeedback(),l.goBack()}function ee(){se.value<K.value.length-1&&(x.value=null,se.value++,l.loadDeal(K.value[se.value]))}function Q(y){y>=0&&y<K.value.length&&(x.value=null,se.value=y,l.loadDeal(K.value[y]))}async function re({subfolder:y,dealNumber:b}){var T;if(((T=k.value)==null?void 0:T.id)===y&&K.value.length>0){const E=K.value.findIndex(B=>B.boardNumber===b);if(E>=0){Q(E);return}}for(const E of s.COLLECTIONS)try{const B=y.includes("/")?y.split("/").pop():y,H=`${E.baseUrl}/${B}.pbn`,Z=await fetch(H);if(!Z.ok)continue;const le=await Z.text();R.value=E.id,s.setCollectionInUrl(E.id),oe({subfolder:y,name:y,category:"",content:le});const fe=K.value.findIndex(Ee=>Ee.boardNumber===b);fe>=0&&Q(fe);return}catch{}}function ve(y){d.value=!1,v.value=!1,m.value=null,re(y)}function _(y,b){v.value=!1,m.value=null,re({subfolder:y,dealNumber:b||1})}function S(){k.value=null,s.setLessonInUrl(null),K.value=[],se.value=0,l.resetStats(),W.value=!1,P.value=null,v.value=!1,m.value=null}function N(){R.value=null,k.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),K.value=[],se.value=0,l.resetStats(),W.value=!1,P.value=null,v.value=!1,m.value=null}async function U(){if(P.value=null,!R.value||!k.value)return;const y=q(R.value);if(!y)return;const b=k.value.id,T=b.includes("/")?b.split("/").pop():b,E=`${y.baseUrl}/${T}_Intro.pdf`;try{(await fetch(E,{method:"HEAD"})).ok&&(P.value=E)}catch{}}function j(y){window.innerWidth<600?window.open(y,"_blank"):(L.value=y,W.value=!0)}function M(y){R.value=y,s.setCollectionInUrl(y)}function q(y){return s.COLLECTIONS.find(b=>b.id===y)}async function G(y,b){var E;const T=q(y);if(!T)return console.error("Collection not found:",y),!1;try{const B=await fetch(T.tocUrl);if(!B.ok)throw new Error(`Failed to load TOC: ${B.statusText}`);const H=await B.json();let Z=null,le=null;for(const rt of H.categories||[]){const Nt=(E=rt.lessons)==null?void 0:E.find(Le=>Le.id===b);if(Nt){Z=Nt,le=rt;break}}if(!Z)return console.error("Lesson not found in TOC:",b),!1;const fe=b.includes("/")?b.split("/").pop():b,Ee=`${T.baseUrl}/${fe}.pbn`,Ae=await fetch(Ee);if(!Ae.ok)throw new Error(`Failed to load lesson: ${Ae.statusText}`);const ot=await Ae.text(),Ze=Tl(ot);if(Ze.length>0){const rt=Ze.map(Fe=>({...Fe,subfolder:Fe.subfolder||b,category:Fe.category||le.name}));K.value=rt;const Nt=s.getDealFromUrl(),Le=Nt?rt.findIndex(Fe=>Fe.boardNumber===Nt):-1;return se.value=Le>=0?Le:0,l.loadDeal(rt[se.value]),l.resetStats(),k.value={id:b,name:Z.name,category:le.name},U(),!0}return!1}catch(B){return console.error("Error loading lesson from URL:",B),!1}}return(y,b)=>{var T,E,B,H,Z,le,fe,Ee,Ae,ot,Ze,rt,Nt,Le,Fe,ln;return X.value?(p(),h("div",kk,[c("header",xk,[c("h1",null,w(K.value.length?V.value:Oe.value),1),c("div",Ak,[ue(Eb),c("button",{class:"progress-btn",onClick:b[0]||(b[0]=Se=>f.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:b[1]||(b[1]=Se=>d.value=!0),title:"View Accomplishments"}," Accomplishments "),I(a).isTeacher.value?(p(),h("button",{key:0,class:"teacher-btn",onClick:b[2]||(b[2]=Se=>{v.value=!0,m.value=null,g.value=""}),title:"View Students"}," Students ")):D("",!0),K.value.length&&R.value?(p(),h("button",{key:1,class:"lessons-btn",onClick:S,title:"Back to "+((T=q(R.value))==null?void 0:T.name)},w((E=q(R.value))==null?void 0:E.name),9,Nk)):D("",!0),R.value?(p(),h("button",{key:2,class:"lobby-btn",onClick:N,title:"Return to lobby"}," Lobby ")):D("",!0),ze.value+ct.value>0?(p(),h("div",Tk,[c("span",Ek,w(ze.value),1),c("span",Ok,w(ct.value),1)])):D("",!0),c("div",Ik,[we.value!=="student"?(p(),h("button",{key:0,class:ae(["role-badge","role-"+we.value]),onClick:N,title:"Return to "+we.value+" lobby"},w(we.value),11,Rk)):D("",!0),c("button",{class:"user-btn",onClick:b[3]||(b[3]=Se=>u.value=!0),title:pe.value},w(he.value),9,Pk)])])]),c("main",Lk,[ue(bb),ue(hb),v.value&&!m.value?(p(),De(x1,{key:0,onClose:b[4]||(b[4]=Se=>v.value=!1),onSelectStudent:b[5]||(b[5]=(Se,cn)=>{m.value=Se,g.value=cn})})):v.value&&m.value?(p(),De(S0,{key:1,studentId:m.value,studentName:g.value,onBack:b[6]||(b[6]=Se=>m.value=null),onNavigateToLesson:_},null,8,["studentId","studentName"])):!K.value.length&&!R.value?(p(),De(ik,{key:2,onSelectCollection:M,onShowBecomeTeacher:b[7]||(b[7]=Se=>C.value=!0)})):!K.value.length&&R.value?(p(),h("div",Dk,[c("h2",null,w(((B=q(R.value))==null?void 0:B.name)||R.value),1),b[17]||(b[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ue(q0,{visible:!0,inline:!0,collection:q(R.value),onLoad:oe},null,8,["collection"])])):(p(),h("div",Bk,[c("div",Uk,[K.value.length>1?(p(),De(Qc,{key:0,boardNumbers:K.value.map(Se=>Se.boardNumber),lessonSubfolder:((H=J.value)==null?void 0:H.subfolder)||((Z=J.value)==null?void 0:Z.category)||"",currentIndex:se.value,forceRedBoard:x.value,introUrl:P.value,onGoto:Q,onOpenIntro:j},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):D("",!0),ue(hg,{boardNumber:(le=J.value)==null?void 0:le.boardNumber,dealer:(fe=J.value)==null?void 0:fe.dealer,vulnerable:(Ee=J.value)==null?void 0:Ee.vulnerable,contract:(Ae=J.value)==null?void 0:Ae.contract,declarer:(ot=J.value)==null?void 0:ot.declarer,showContract:I(l).auctionState.auctionComplete||I(l).showOpeningLead.value||I(l).hasSteps.value&&!I(l).hasBidSteps.value,openingLead:I(l).showOpeningLead.value?(Ze=J.value)==null?void 0:Ze.openingLead:"",totalDeals:K.value.length,currentIndex:se.value,dealBoardNumbers:K.value.map(Se=>Se.boardNumber),onGoto:Q},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ue(Ph,{hands:I(l).hands.value,hiddenSeats:I(l).hiddenSeats.value,showHcp:I(l).showHcp.value,compact:!0,clickableSeat:I(l).hasCardChoice.value?I(l).studentSeat.value:null,playedCards:I(l).showcardsPlayedCards.value,onCardClick:Qe},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",Mk,[I(l).showAuctionTable.value?(p(),De(Qh,{key:0,bids:I(l).hasBidSteps.value?I(l).auctionState.displayedBids:((rt=J.value)==null?void 0:rt.auction)||[],dealer:((Nt=J.value)==null?void 0:Nt.dealer)||"N",currentBidIndex:I(l).hasBidSteps.value?I(l).auctionState.currentBidIndex:-1,wrongBidIndex:I(l).auctionState.wrongBidIndex,correctBidIndex:I(l).auctionState.correctBidIndex,showTurnIndicator:I(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):D("",!0),ue(Hl,{visible:!!I(l).auctionState.wrongBid,type:"wrong",wrongBid:I(l).auctionState.wrongBid,correctBid:I(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ue(Hl,{visible:!!I(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:I(l).cardChoiceState.wrongCard,correctCardCode:I(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),I(l).hasSteps.value?(p(),h("div",Fk,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:$},[(p(!0),h(te,null,ce(I(l).steps.value.slice(0,I(l).currentStepIndex.value),(Se,cn)=>(p(),h(te,{key:"prev-"+cn},[cn>=I(l).commentaryStartIndex.value?(p(),h(te,{key:0},[c("span",{class:"narrative-text previous",innerHTML:I(Ds)(I(mn)(Se.text))},null,8,jk),Se.type==="bid"&&Se.explanationText?(p(),h("span",{key:0,class:ae(["narrative-text",cn===I(l).currentStepIndex.value-1&&I(l).isBidStep.value&&!I(l).bidAnswered.value?"current":"previous"]),innerHTML:I(Ds)(I(mn)(Se.explanationText))},null,10,Hk)):D("",!0)],64)):D("",!0)],64))),128)),I(l).currentStep.value?(p(),h("span",{key:0,class:"narrative-text current",innerHTML:I(Ds)(I(mn)(I(l).currentStep.value.text))},null,8,Vk)):D("",!0),I(l).bidAnswered.value&&((Le=I(l).currentStep.value)!=null&&Le.explanationText)?(p(),h("span",{key:1,class:"narrative-text current",innerHTML:I(Ds)(I(mn)(I(l).currentStep.value.explanationText))},null,8,Kk)):D("",!0)],512),c("div",Wk,[I(l).hasBidPrompt.value?(p(),h("div",Gk,[ue(Gh,{lastBid:I(l).lastContractBid.value,canDouble:I(l).canDouble.value,canRedouble:I(l).canRedouble.value,onBid:bt},null,8,["lastBid","canDouble","canRedouble"])])):I(l).hasCardChoice.value?(p(),h("div",zk," Click on the card you would choose ")):D("",!0),I(l).canGoBack.value?(p(),h("button",{key:2,class:"instruction-btn secondary",onClick:F},"  Back ")):D("",!0),!I(l).isComplete.value&&(I(l).bidAnswered.value||!I(l).hasBidPrompt.value&&!I(l).hasCardChoice.value&&I(l).currentStep.value&&I(l).currentStep.value.type!=="end")?(p(),h("button",{key:3,class:"instruction-btn primary",onClick:b[8]||(b[8]=Se=>I(l).advance())},w(((Fe=I(l).currentStep.value)==null?void 0:Fe.type)==="rotate"?"Rotate":"Next")+"  ",1)):D("",!0),I(l).isComplete.value&&se.value<K.value.length-1?(p(),h("button",{key:4,class:"next-deal-btn",onClick:ee}," Next Deal  ")):D("",!0)])])):(ln=J.value)!=null&&ln.commentary?(p(),h("div",{key:2,class:"display-commentary",innerHTML:I(Ds)(I(mn)(I(lm)(J.value.commentary)))},null,8,Jk)):D("",!0),!I(l).hasSteps.value&&I(l).isComplete.value&&se.value<K.value.length-1?(p(),h("div",qk,[c("button",{class:"next-deal-btn",onClick:ee}," Next Deal  ")])):D("",!0)])]))]),ue(rb,{visible:u.value,onClose:b[9]||(b[9]=Se=>u.value=!1),onSwitchUser:ge,onLogout:ge,onBecomeTeacher:b[10]||(b[10]=Se=>C.value=!0)},null,8,["visible"]),z.value?(p(),h("div",Yk," Account created  your data is encrypted and linked to your email for recovery. ")):D("",!0),f.value?(p(),h("div",{key:1,class:"modal-overlay",onClick:b[12]||(b[12]=es(Se=>f.value=!1,["self"]))},[ue(c_,{onClose:b[11]||(b[11]=Se=>f.value=!1)})])):D("",!0),d.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:b[14]||(b[14]=es(Se=>d.value=!1,["self"]))},[ue(q_,{onClose:b[13]||(b[13]=Se=>d.value=!1),onNavigateToDeal:ve})])):D("",!0),ue(nw,{visible:W.value,url:L.value||"",onClose:b[15]||(b[15]=Se=>W.value=!1)},null,8,["visible","url"]),C.value?(p(),De(_k,{key:3,onClose:b[16]||(b[16]=Se=>C.value=!1),onActivated:ne})):D("",!0),ue($k)])):(p(),De(Cy,{key:0,onUserReady:Ge}))}}},Qk=()=>Hf(()=>import("./JoinClassroomView-B7_7bpTU.js"),__vite__mapDeps([0,1])),Zk=[{path:"/join/:joinCode",name:"join",component:Qk},{path:"/:pathMatch(.*)*",name:"app",component:Xk}],ex=qv({history:Av(),routes:Zk}),uu=Pf(Mf);uu.use(ex);uu.mount("#app");export{me as _,c as a,ue as b,h as c,D as d,xs as e,_o as f,Me as g,Zn as h,gd as i,hc as j,Yv as k,p as l,yt as o,A as r,w as t,tx as u,Zu as w};
