const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-Bo3u1vQC.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sa(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Se={},zs=[],Ft=()=>{},ei=()=>!1,Uo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),na=e=>e.startsWith("onUpdate:"),Xe=Object.assign,oa=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},hu=Object.prototype.hasOwnProperty,_e=(e,t)=>hu.call(e,t),le=Array.isArray,Js=e=>Zn(e)==="[object Map]",vn=e=>Zn(e)==="[object Set]",Fa=e=>Zn(e)==="[object Date]",ce=e=>typeof e=="function",Be=e=>typeof e=="string",Tt=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",ti=e=>(Ce(e)||ce(e))&&ce(e.then)&&ce(e.catch),si=Object.prototype.toString,Zn=e=>si.call(e),gu=e=>Zn(e).slice(8,-1),ni=e=>Zn(e)==="[object Object]",ra=e=>Be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,En=sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mo=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},yu=/-\w/g,Ct=Mo(e=>e.replace(yu,t=>t.slice(1).toUpperCase())),bu=/\B([A-Z])/g,ms=Mo(e=>e.replace(bu,"-$1").toLowerCase()),Fo=Mo(e=>e.charAt(0).toUpperCase()+e.slice(1)),ur=Mo(e=>e?`on${Fo(e)}`:""),cs=(e,t)=>!Object.is(e,t),po=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},oi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ja;const Ho=()=>ja||(ja=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ss(e){if(le(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Be(n)?Cu(n):ss(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(Be(e)||Ce(e))return e}const _u=/;(?![^(]*\))/g,wu=/:([^]+)/,Su=/\/\*[^]*?\*\//g;function Cu(e){const t={};return e.replace(Su,"").split(_u).forEach(s=>{if(s){const n=s.split(wu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function oe(e){let t="";if(Be(e))t=e;else if(le(e))for(let s=0;s<e.length;s++){const n=oe(e[s]);n&&(t+=n+" ")}else if(Ce(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const $u="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ku=sa($u);function ri(e){return!!e||e===""}function xu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Os(e[n],t[n]);return s}function Os(e,t){if(e===t)return!0;let s=Fa(e),n=Fa(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Tt(e),n=Tt(t),s||n)return e===t;if(s=le(e),n=le(t),s||n)return s&&n?xu(e,t):!1;if(s=Ce(e),n=Ce(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Os(e[a],t[a]))return!1}}return String(e)===String(t)}function aa(e,t){return e.findIndex(s=>Os(s,t))}const ai=e=>!!(e&&e.__v_isRef===!0),S=e=>Be(e)?e:e==null?"":le(e)||Ce(e)&&(e.toString===si||!ce(e.toString))?ai(e)?S(e.value):JSON.stringify(e,li,2):String(e),li=(e,t)=>ai(t)?li(e,t.value):Js(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[dr(n,r)+" =>"]=o,s),{})}:vn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>dr(s))}:Tt(t)?dr(t):Ce(t)&&!le(t)&&!ni(t)?String(t):t,dr=(e,t="")=>{var s;return Tt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Au{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!t&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=dt;try{return dt=this,t()}finally{dt=s}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Nu(){return dt}let ke;const fr=new WeakSet;class ii{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fr.has(this)&&(fr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ui(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ha(this),di(this);const t=ke,s=Nt;ke=this,Nt=!0;try{return this.fn()}finally{fi(this),ke=t,Nt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ca(t);this.deps=this.depsTail=void 0,Ha(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Or(this)&&this.run()}get dirty(){return Or(this)}}let ci=0,Rn,Dn;function ui(e,t=!1){if(e.flags|=8,t){e.next=Dn,Dn=e;return}e.next=Rn,Rn=e}function la(){ci++}function ia(){if(--ci>0)return;if(Dn){let t=Dn;for(Dn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Rn;){let t=Rn;for(Rn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function di(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function fi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),ca(n),Ou(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Or(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(vi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function vi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Hn)||(e.globalVersion=Hn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Or(e))))return;e.flags|=2;const t=e.dep,s=ke,n=Nt;ke=e,Nt=!0;try{di(e);const o=e.fn(e._value);(t.version===0||cs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ke=s,Nt=n,fi(e),e.flags&=-3}}function ca(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)ca(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ou(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Nt=!0;const mi=[];function Qt(){mi.push(Nt),Nt=!1}function Zt(){const e=mi.pop();Nt=e===void 0?!0:e}function Ha(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ke;ke=void 0;try{t()}finally{ke=s}}}let Hn=0;class Tu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ua{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ke||!Nt||ke===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ke)s=this.activeLink=new Tu(ke,this),ke.deps?(s.prevDep=ke.depsTail,ke.depsTail.nextDep=s,ke.depsTail=s):ke.deps=ke.depsTail=s,pi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ke.depsTail,s.nextDep=void 0,ke.depsTail.nextDep=s,ke.depsTail=s,ke.deps===s&&(ke.deps=n)}return s}trigger(t){this.version++,Hn++,this.notify(t)}notify(t){la();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ia()}}}function pi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)pi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Tr=new WeakMap,xs=Symbol(""),Ir=Symbol(""),Kn=Symbol("");function tt(e,t,s){if(Nt&&ke){let n=Tr.get(e);n||Tr.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new ua),o.map=n,o.key=s),o.track()}}function zt(e,t,s,n,o,r){const a=Tr.get(e);if(!a){Hn++;return}const l=c=>{c&&c.trigger()};if(la(),t==="clear")a.forEach(l);else{const c=le(e),u=c&&ra(s);if(c&&s==="length"){const d=Number(n);a.forEach((f,p)=>{(p==="length"||p===Kn||!Tt(p)&&p>=d)&&l(f)})}else switch((s!==void 0||a.has(void 0))&&l(a.get(s)),u&&l(a.get(Kn)),t){case"add":c?u&&l(a.get("length")):(l(a.get(xs)),Js(e)&&l(a.get(Ir)));break;case"delete":c||(l(a.get(xs)),Js(e)&&l(a.get(Ir)));break;case"set":Js(e)&&l(a.get(xs));break}}ia()}function Ps(e){const t=be(e);return t===e?t:(tt(t,"iterate",Kn),wt(e)?t:t.map(It))}function Ko(e){return tt(e=be(e),"iterate",Kn),e}function rs(e,t){return es(e)?Zs(As(e)?It(t):t):It(t)}const Iu={__proto__:null,[Symbol.iterator](){return vr(this,Symbol.iterator,e=>rs(this,e))},concat(...e){return Ps(this).concat(...e.map(t=>le(t)?Ps(t):t))},entries(){return vr(this,"entries",e=>(e[1]=rs(this,e[1]),e))},every(e,t){return Vt(this,"every",e,t,void 0,arguments)},filter(e,t){return Vt(this,"filter",e,t,s=>s.map(n=>rs(this,n)),arguments)},find(e,t){return Vt(this,"find",e,t,s=>rs(this,s),arguments)},findIndex(e,t){return Vt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Vt(this,"findLast",e,t,s=>rs(this,s),arguments)},findLastIndex(e,t){return Vt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Vt(this,"forEach",e,t,void 0,arguments)},includes(...e){return mr(this,"includes",e)},indexOf(...e){return mr(this,"indexOf",e)},join(e){return Ps(this).join(e)},lastIndexOf(...e){return mr(this,"lastIndexOf",e)},map(e,t){return Vt(this,"map",e,t,void 0,arguments)},pop(){return bn(this,"pop")},push(...e){return bn(this,"push",e)},reduce(e,...t){return Ka(this,"reduce",e,t)},reduceRight(e,...t){return Ka(this,"reduceRight",e,t)},shift(){return bn(this,"shift")},some(e,t){return Vt(this,"some",e,t,void 0,arguments)},splice(...e){return bn(this,"splice",e)},toReversed(){return Ps(this).toReversed()},toSorted(e){return Ps(this).toSorted(e)},toSpliced(...e){return Ps(this).toSpliced(...e)},unshift(...e){return bn(this,"unshift",e)},values(){return vr(this,"values",e=>rs(this,e))}};function vr(e,t,s){const n=Ko(e),o=n[t]();return n!==e&&!wt(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const Eu=Array.prototype;function Vt(e,t,s,n,o,r){const a=Ko(e),l=a!==e&&!wt(e),c=a[t];if(c!==Eu[t]){const f=c.apply(e,r);return l?It(f):f}let u=s;a!==e&&(l?u=function(f,p){return s.call(this,rs(e,f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const d=c.call(a,u,n);return l&&o?o(d):d}function Ka(e,t,s,n){const o=Ko(e);let r=s;return o!==e&&(wt(e)?s.length>3&&(r=function(a,l,c){return s.call(this,a,l,c,e)}):r=function(a,l,c){return s.call(this,a,rs(e,l),c,e)}),o[t](r,...n)}function mr(e,t,s){const n=be(e);tt(n,"iterate",Kn);const o=n[t](...s);return(o===-1||o===!1)&&va(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function bn(e,t,s=[]){Qt(),la();const n=be(e)[t].apply(e,s);return ia(),Zt(),n}const Ru=sa("__proto__,__v_isRef,__isVue"),hi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tt));function Du(e){Tt(e)||(e=String(e));const t=be(this);return tt(t,"has",e),t.hasOwnProperty(e)}class gi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Vu:wi:r?_i:bi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=le(t);if(!o){let c;if(a&&(c=Iu[s]))return c;if(s==="hasOwnProperty")return Du}const l=Reflect.get(t,s,nt(t)?t:n);if((Tt(s)?hi.has(s):Ru(s))||(o||tt(t,"get",s),r))return l;if(nt(l)){const c=a&&ra(s)?l:l.value;return o&&Ce(c)?Rr(c):c}return Ce(l)?o?Rr(l):jt(l):l}}class yi extends gi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const a=le(t)&&ra(s);if(!this._isShallow){const u=es(r);if(!wt(n)&&!es(n)&&(r=be(r),n=be(n)),!a&&nt(r)&&!nt(n))return u||(r.value=n),!0}const l=a?Number(s)<t.length:_e(t,s),c=Reflect.set(t,s,n,nt(t)?t:o);return t===be(o)&&(l?cs(n,r)&&zt(t,"set",s,n):zt(t,"add",s,n)),c}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&zt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Tt(s)||!hi.has(s))&&tt(t,"has",s),n}ownKeys(t){return tt(t,"iterate",le(t)?"length":xs),Reflect.ownKeys(t)}}class Pu extends gi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Lu=new yi,Bu=new Pu,Uu=new yi(!0);const Er=e=>e,lo=e=>Reflect.getPrototypeOf(e);function Mu(e,t,s){return function(...n){const o=this.__v_raw,r=be(o),a=Js(r),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,u=o[e](...n),d=s?Er:t?Zs:It;return!t&&tt(r,"iterate",c?Ir:xs),Xe(Object.create(u),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:l?[d(f[0]),d(f[1])]:d(f),done:p}}})}}function io(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Fu(e,t){const s={get(o){const r=this.__v_raw,a=be(r),l=be(o);e||(cs(o,l)&&tt(a,"get",o),tt(a,"get",l));const{has:c}=lo(a),u=t?Er:e?Zs:It;if(c.call(a,o))return u(r.get(o));if(c.call(a,l))return u(r.get(l));r!==a&&r.get(o)},get size(){const o=this.__v_raw;return!e&&tt(be(o),"iterate",xs),o.size},has(o){const r=this.__v_raw,a=be(r),l=be(o);return e||(cs(o,l)&&tt(a,"has",o),tt(a,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const a=this,l=a.__v_raw,c=be(l),u=t?Er:e?Zs:It;return!e&&tt(c,"iterate",xs),l.forEach((d,f)=>o.call(r,u(d),u(f),a))}};return Xe(s,e?{add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear")}:{add(o){!t&&!wt(o)&&!es(o)&&(o=be(o));const r=be(this);return lo(r).has.call(r,o)||(r.add(o),zt(r,"add",o,o)),this},set(o,r){!t&&!wt(r)&&!es(r)&&(r=be(r));const a=be(this),{has:l,get:c}=lo(a);let u=l.call(a,o);u||(o=be(o),u=l.call(a,o));const d=c.call(a,o);return a.set(o,r),u?cs(r,d)&&zt(a,"set",o,r):zt(a,"add",o,r),this},delete(o){const r=be(this),{has:a,get:l}=lo(r);let c=a.call(r,o);c||(o=be(o),c=a.call(r,o)),l&&l.call(r,o);const u=r.delete(o);return c&&zt(r,"delete",o,void 0),u},clear(){const o=be(this),r=o.size!==0,a=o.clear();return r&&zt(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Mu(o,e,t)}),s}function da(e,t){const s=Fu(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,r)}const ju={get:da(!1,!1)},Hu={get:da(!1,!0)},Ku={get:da(!0,!1)};const bi=new WeakMap,_i=new WeakMap,wi=new WeakMap,Vu=new WeakMap;function Wu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gu(e){return e.__v_skip||!Object.isExtensible(e)?0:Wu(gu(e))}function jt(e){return es(e)?e:fa(e,!1,Lu,ju,bi)}function Si(e){return fa(e,!1,Uu,Hu,_i)}function Rr(e){return fa(e,!0,Bu,Ku,wi)}function fa(e,t,s,n,o){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Gu(e);if(r===0)return e;const a=o.get(e);if(a)return a;const l=new Proxy(e,r===2?n:s);return o.set(e,l),l}function As(e){return es(e)?As(e.__v_raw):!!(e&&e.__v_isReactive)}function es(e){return!!(e&&e.__v_isReadonly)}function wt(e){return!!(e&&e.__v_isShallow)}function va(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function zu(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&oi(e,"__v_skip",!0),e}const It=e=>Ce(e)?jt(e):e,Zs=e=>Ce(e)?Rr(e):e;function nt(e){return e?e.__v_isRef===!0:!1}function T(e){return Ci(e,!1)}function Ju(e){return Ci(e,!0)}function Ci(e,t){return nt(e)?e:new Yu(e,t)}class Yu{constructor(t,s){this.dep=new ua,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:It(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||wt(t)||es(t);t=n?t:be(t),cs(t,s)&&(this._rawValue=t,this._value=n?t:It(t),this.dep.trigger())}}function R(e){return nt(e)?e.value:e}const qu={get:(e,t,s)=>t==="__v_raw"?e:R(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return nt(o)&&!nt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function $i(e){return As(e)?e:new Proxy(e,qu)}class Xu{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new ua(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return ui(this,!0),!0}get value(){const t=this.dep.track();return vi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Qu(e,t,s=!1){let n,o;return ce(e)?n=e:(n=e.get,o=e.set),new Xu(n,o,s)}const co={},_o=new WeakMap;let Cs;function Zu(e,t=!1,s=Cs){if(s){let n=_o.get(s);n||_o.set(s,n=[]),n.push(e)}}function ed(e,t,s=Se){const{immediate:n,deep:o,once:r,scheduler:a,augmentJob:l,call:c}=s,u=D=>o?D:wt(D)||o===!1||o===0?Jt(D,1):Jt(D);let d,f,p,v,m=!1,y=!1;if(nt(e)?(f=()=>e.value,m=wt(e)):As(e)?(f=()=>u(e),m=!0):le(e)?(y=!0,m=e.some(D=>As(D)||wt(D)),f=()=>e.map(D=>{if(nt(D))return D.value;if(As(D))return u(D);if(ce(D))return c?c(D,2):D()})):ce(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){Qt();try{p()}finally{Zt()}}const D=Cs;Cs=d;try{return c?c(e,3,[v]):e(v)}finally{Cs=D}}:f=Ft,t&&o){const D=f,V=o===!0?1/0:o;f=()=>Jt(D(),V)}const N=Nu(),C=()=>{d.stop(),N&&N.active&&oa(N.effects,d)};if(r&&t){const D=t;t=(...V)=>{D(...V),C()}}let b=y?new Array(e.length).fill(co):co;const $=D=>{if(!(!(d.flags&1)||!d.dirty&&!D))if(t){const V=d.run();if(o||m||(y?V.some((ee,K)=>cs(ee,b[K])):cs(V,b))){p&&p();const ee=Cs;Cs=d;try{const K=[V,b===co?void 0:y&&b[0]===co?[]:b,v];b=V,c?c(t,3,K):t(...K)}finally{Cs=ee}}}else d.run()};return l&&l($),d=new ii(f),d.scheduler=a?()=>a($,!1):$,v=D=>Zu(D,!1,d),p=d.onStop=()=>{const D=_o.get(d);if(D){if(c)c(D,4);else for(const V of D)V();_o.delete(d)}},t?n?$(!0):b=d.run():a?a($.bind(null,!0),!0):d.run(),C.pause=d.pause.bind(d),C.resume=d.resume.bind(d),C.stop=C,C}function Jt(e,t=1/0,s){if(t<=0||!Ce(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,nt(e))Jt(e.value,t,s);else if(le(e))for(let n=0;n<e.length;n++)Jt(e[n],t,s);else if(vn(e)||Js(e))e.forEach(n=>{Jt(n,t,s)});else if(ni(e)){for(const n in e)Jt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Jt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function eo(e,t,s,n){try{return n?e(...n):e()}catch(o){Vo(o,t,s)}}function Kt(e,t,s,n){if(ce(e)){const o=eo(e,t,s,n);return o&&ti(o)&&o.catch(r=>{Vo(r,t,s)}),o}if(le(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Kt(e[r],t,s,n));return o}}function Vo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Se;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,u)===!1)return}l=l.parent}if(r){Qt(),eo(r,null,10,[e,c,u]),Zt();return}}td(e,s,o,n,a)}function td(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const lt=[];let Bt=-1;const Ys=[];let as=null,Fs=0;const ki=Promise.resolve();let wo=null;function Vn(e){const t=wo||ki;return e?t.then(this?e.bind(this):e):t}function sd(e){let t=Bt+1,s=lt.length;for(;t<s;){const n=t+s>>>1,o=lt[n],r=Wn(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function ma(e){if(!(e.flags&1)){const t=Wn(e),s=lt[lt.length-1];!s||!(e.flags&2)&&t>=Wn(s)?lt.push(e):lt.splice(sd(t),0,e),e.flags|=1,xi()}}function xi(){wo||(wo=ki.then(Ni))}function nd(e){le(e)?Ys.push(...e):as&&e.id===-1?as.splice(Fs+1,0,e):e.flags&1||(Ys.push(e),e.flags|=1),xi()}function Va(e,t,s=Bt+1){for(;s<lt.length;s++){const n=lt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;lt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ai(e){if(Ys.length){const t=[...new Set(Ys)].sort((s,n)=>Wn(s)-Wn(n));if(Ys.length=0,as){as.push(...t);return}for(as=t,Fs=0;Fs<as.length;Fs++){const s=as[Fs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}as=null,Fs=0}}const Wn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ni(e){try{for(Bt=0;Bt<lt.length;Bt++){const t=lt[Bt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),eo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Bt<lt.length;Bt++){const t=lt[Bt];t&&(t.flags&=-2)}Bt=-1,lt.length=0,Ai(),wo=null,(lt.length||Ys.length)&&Ni()}}let Ye=null,Oi=null;function So(e){const t=Ye;return Ye=e,Oi=e&&e.type.__scopeId||null,t}function od(e,t=Ye,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&ko(-1);const r=So(t);let a;try{a=e(...o)}finally{So(r),n._d&&ko(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function De(e,t){if(Ye===null)return e;const s=Jo(Ye),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,l,c=Se]=t[o];r&&(ce(r)&&(r={mounted:r,updated:r}),r.deep&&Jt(a),n.push({dir:r,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function gs(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const l=o[a];r&&(l.oldValue=r[a].value);let c=l.dir[n];c&&(Qt(),Kt(c,s,8,[e.el,l,e,t]),Zt())}}function ho(e,t){if(st){let s=st.provides;const n=st.parent&&st.parent.provides;n===s&&(s=st.provides=Object.create(n)),s[e]=t}}function Ot(e,t,s=!1){const n=rf();if(n||Xs){let o=Xs?Xs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ce(t)?t.call(n&&n.proxy):t}}const rd=Symbol.for("v-scx"),ad=()=>Ot(rd);function it(e,t,s){return Ti(e,t,s)}function Ti(e,t,s=Se){const{immediate:n,deep:o,flush:r,once:a}=s,l=Xe({},s),c=t&&n||!t&&r!=="post";let u;if(Jn){if(r==="sync"){const v=ad();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=Ft,v.resume=Ft,v.pause=Ft,v}}const d=st;l.call=(v,m,y)=>Kt(v,d,m,y);let f=!1;r==="post"?l.scheduler=v=>{mt(v,d&&d.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(v,m)=>{m?v():ma(v)}),l.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const p=ed(e,t,l);return Jn&&(u?u.push(p):c&&p()),p}function ld(e,t,s){const n=this.proxy,o=Be(e)?e.includes(".")?Ii(n,e):()=>n[e]:e.bind(n,n);let r;ce(t)?r=t:(r=t.handler,s=t);const a=to(this),l=Ti(o,r.bind(n),s);return a(),l}function Ii(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const id=Symbol("_vte"),cd=e=>e.__isTeleport,ud=Symbol("_leaveCb");function pa(e,t){e.shapeFlag&6&&e.component?(e.transition=t,pa(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ei(e,t){return ce(e)?Xe({name:e.name},t,{setup:e}):e}function Ri(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Co=new WeakMap;function Pn(e,t,s,n,o=!1){if(le(e)){e.forEach((m,y)=>Pn(m,t&&(le(t)?t[y]:t),s,n,o));return}if(qs(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Pn(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Jo(n.component):n.el,a=o?null:r,{i:l,r:c}=e,u=t&&t.r,d=l.refs===Se?l.refs={}:l.refs,f=l.setupState,p=be(f),v=f===Se?ei:m=>_e(p,m);if(u!=null&&u!==c){if(Wa(t),Be(u))d[u]=null,v(u)&&(f[u]=null);else if(nt(u)){u.value=null;const m=t;m.k&&(d[m.k]=null)}}if(ce(c))eo(c,l,12,[a,d]);else{const m=Be(c),y=nt(c);if(m||y){const N=()=>{if(e.f){const C=m?v(c)?f[c]:d[c]:c.value;if(o)le(C)&&oa(C,r);else if(le(C))C.includes(r)||C.push(r);else if(m)d[c]=[r],v(c)&&(f[c]=d[c]);else{const b=[r];c.value=b,e.k&&(d[e.k]=b)}}else m?(d[c]=a,v(c)&&(f[c]=a)):y&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const C=()=>{N(),Co.delete(e)};C.id=-1,Co.set(e,C),mt(C,s)}else Wa(e),N()}}}function Wa(e){const t=Co.get(e);t&&(t.flags|=8,Co.delete(e))}Ho().requestIdleCallback;Ho().cancelIdleCallback;const qs=e=>!!e.type.__asyncLoader,Di=e=>e.type.__isKeepAlive;function dd(e,t){Pi(e,"a",t)}function fd(e,t){Pi(e,"da",t)}function Pi(e,t,s=st){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Wo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Di(o.parent.vnode)&&vd(n,t,s,o),o=o.parent}}function vd(e,t,s,n){const o=Wo(t,e,n,!0);Bi(()=>{oa(n[t],o)},s)}function Wo(e,t,s=st,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Qt();const l=to(s),c=Kt(t,s,e,a);return l(),Zt(),c});return n?o.unshift(r):o.push(r),r}}const ns=e=>(t,s=st)=>{(!Jn||e==="sp")&&Wo(e,(...n)=>t(...n),s)},md=ns("bm"),ft=ns("m"),pd=ns("bu"),hd=ns("u"),Li=ns("bum"),Bi=ns("um"),gd=ns("sp"),yd=ns("rtg"),bd=ns("rtc");function _d(e,t=st){Wo("ec",e,t)}const wd="components";function Sd(e,t){return $d(wd,e,!0,t)||e}const Cd=Symbol.for("v-ndc");function $d(e,t,s=!0,n=!1){const o=Ye||st;if(o){const r=o.type;{const l=df(r,!1);if(l&&(l===t||l===Ct(t)||l===Fo(Ct(t))))return r}const a=Ga(o[e]||r[e],t)||Ga(o.appContext[e],t);return!a&&n?r:a}}function Ga(e,t){return e&&(e[t]||e[Ct(t)]||e[Fo(Ct(t))])}function ie(e,t,s,n){let o;const r=s,a=le(e);if(a||Be(e)){const l=a&&As(e);let c=!1,u=!1;l&&(c=!wt(e),u=es(e),e=Ko(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(c?u?Zs(It(e[d])):It(e[d]):e[d],d,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(Ce(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];o[c]=t(e[d],d,c,r)}}else o=[];return o}function kd(e,t,s={},n,o){if(Ye.ce||Ye.parent&&qs(Ye.parent)&&Ye.parent.ce){const u=Object.keys(s).length>0;return s.name=t,h(),xe(Z,null,[he("slot",s,n)],u?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),h();const a=r&&Ui(r(s)),l=s.key||a&&a.key,c=xe(Z,{key:(l&&!Tt(l)?l:`_${t}`)+(!a&&n?"_fb":"")},a||[],a&&e._===1?64:-2);return r&&r._c&&(r._d=!0),c}function Ui(e){return e.some(t=>zn(t)?!(t.type===ts||t.type===Z&&!Ui(t.children)):!0)?e:null}const Dr=e=>e?nc(e)?Jo(e):Dr(e.parent):null,Ln=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Dr(e.parent),$root:e=>Dr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fi(e),$forceUpdate:e=>e.f||(e.f=()=>{ma(e.update)}),$nextTick:e=>e.n||(e.n=Vn.bind(e.proxy)),$watch:e=>ld.bind(e)}),pr=(e,t)=>e!==Se&&!e.__isScriptSetup&&_e(e,t),xd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:a,type:l,appContext:c}=e;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(pr(n,t))return a[t]=1,n[t];if(o!==Se&&_e(o,t))return a[t]=2,o[t];if(_e(r,t))return a[t]=3,r[t];if(s!==Se&&_e(s,t))return a[t]=4,s[t];Pr&&(a[t]=0)}}const u=Ln[t];let d,f;if(u)return t==="$attrs"&&tt(e.attrs,"get",""),u(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(s!==Se&&_e(s,t))return a[t]=4,s[t];if(f=c.config.globalProperties,_e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return pr(o,t)?(o[t]=s,!0):n!==Se&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:a}},l){let c;return!!(s[l]||e!==Se&&l[0]!=="$"&&_e(e,l)||pr(t,l)||_e(r,l)||_e(n,l)||_e(Ln,l)||_e(o.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function za(e){return le(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Pr=!0;function Ad(e){const t=Fi(e),s=e.proxy,n=e.ctx;Pr=!1,t.beforeCreate&&Ja(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:v,updated:m,activated:y,deactivated:N,beforeDestroy:C,beforeUnmount:b,destroyed:$,unmounted:D,render:V,renderTracked:ee,renderTriggered:K,errorCaptured:q,serverPrefetch:Y,expose:de,inheritAttrs:ue,components:we,directives:Le,filters:je}=t;if(u&&Nd(u,n,null),a)for(const Q in a){const fe=a[Q];ce(fe)&&(n[Q]=fe.bind(s))}if(o){const Q=o.call(s,s);Ce(Q)&&(e.data=jt(Q))}if(Pr=!0,r)for(const Q in r){const fe=r[Q],pe=ce(fe)?fe.bind(s,s):ce(fe.get)?fe.get.bind(s,s):Ft,ne=!ce(fe)&&ce(fe.set)?fe.set.bind(s):Ft,j=O({get:pe,set:ne});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>j.value,set:se=>j.value=se})}if(l)for(const Q in l)Mi(l[Q],n,s,Q);if(c){const Q=ce(c)?c.call(s):c;Reflect.ownKeys(Q).forEach(fe=>{ho(fe,Q[fe])})}d&&Ja(d,e,"c");function ge(Q,fe){le(fe)?fe.forEach(pe=>Q(pe.bind(s))):fe&&Q(fe.bind(s))}if(ge(md,f),ge(ft,p),ge(pd,v),ge(hd,m),ge(dd,y),ge(fd,N),ge(_d,q),ge(bd,ee),ge(yd,K),ge(Li,b),ge(Bi,D),ge(gd,Y),le(de))if(de.length){const Q=e.exposed||(e.exposed={});de.forEach(fe=>{Object.defineProperty(Q,fe,{get:()=>s[fe],set:pe=>s[fe]=pe,enumerable:!0})})}else e.exposed||(e.exposed={});V&&e.render===Ft&&(e.render=V),ue!=null&&(e.inheritAttrs=ue),we&&(e.components=we),Le&&(e.directives=Le),Y&&Ri(e)}function Nd(e,t,s=Ft){le(e)&&(e=Lr(e));for(const n in e){const o=e[n];let r;Ce(o)?"default"in o?r=Ot(o.from||n,o.default,!0):r=Ot(o.from||n):r=Ot(o),nt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Ja(e,t,s){Kt(le(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Mi(e,t,s,n){let o=n.includes(".")?Ii(s,n):()=>s[n];if(Be(e)){const r=t[e];ce(r)&&it(o,r)}else if(ce(e))it(o,e.bind(s));else if(Ce(e))if(le(e))e.forEach(r=>Mi(r,t,s,n));else{const r=ce(e.handler)?e.handler.bind(s):t[e.handler];ce(r)&&it(o,r,e)}}function Fi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,l=r.get(t);let c;return l?c=l:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(u=>$o(c,u,a,!0)),$o(c,t,a)),Ce(t)&&r.set(t,c),c}function $o(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&$o(e,r,s,!0),o&&o.forEach(a=>$o(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const l=Od[a]||s&&s[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Od={data:Ya,props:qa,emits:qa,methods:Nn,computed:Nn,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:Nn,directives:Nn,watch:Id,provide:Ya,inject:Td};function Ya(e,t){return t?e?function(){return Xe(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function Td(e,t){return Nn(Lr(e),Lr(t))}function Lr(e){if(le(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function Nn(e,t){return e?Xe(Object.create(null),e,t):t}function qa(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:Xe(Object.create(null),za(e),za(t??{})):t}function Id(e,t){if(!e)return t;if(!t)return e;const s=Xe(Object.create(null),e);for(const n in t)s[n]=rt(e[n],t[n]);return s}function ji(){return{app:null,config:{isNativeTag:ei,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ed=0;function Rd(e,t){return function(n,o=null){ce(n)||(n=Xe({},n)),o!=null&&!Ce(o)&&(o=null);const r=ji(),a=new WeakSet,l=[];let c=!1;const u=r.app={_uid:Ed++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:vf,get config(){return r.config},set config(d){},use(d,...f){return a.has(d)||(d&&ce(d.install)?(a.add(d),d.install(u,...f)):ce(d)&&(a.add(d),d(u,...f))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,f){return f?(r.components[d]=f,u):r.components[d]},directive(d,f){return f?(r.directives[d]=f,u):r.directives[d]},mount(d,f,p){if(!c){const v=u._ceVNode||he(n,o);return v.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(v,d,p),c=!0,u._container=d,d.__vue_app__=u,Jo(v.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Kt(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return r.provides[d]=f,u},runWithContext(d){const f=Xs;Xs=u;try{return d()}finally{Xs=f}}};return u}}let Xs=null;const Dd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ct(t)}Modifiers`]||e[`${ms(t)}Modifiers`];function Pd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Se;let o=s;const r=t.startsWith("update:"),a=r&&Dd(n,t.slice(7));a&&(a.trim&&(o=s.map(d=>Be(d)?d.trim():d)),a.number&&(o=s.map(jo)));let l,c=n[l=ur(t)]||n[l=ur(Ct(t))];!c&&r&&(c=n[l=ur(ms(t))]),c&&Kt(c,e,6,o);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Kt(u,e,6,o)}}const Ld=new WeakMap;function Hi(e,t,s=!1){const n=s?Ld:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let a={},l=!1;if(!ce(e)){const c=u=>{const d=Hi(u,t,!0);d&&(l=!0,Xe(a,d))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(Ce(e)&&n.set(e,null),null):(le(r)?r.forEach(c=>a[c]=null):Xe(a,r),Ce(e)&&n.set(e,a),a)}function Go(e,t){return!e||!Uo(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,ms(t))||_e(e,t))}function Xa(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:d,props:f,data:p,setupState:v,ctx:m,inheritAttrs:y}=e,N=So(e);let C,b;try{if(s.shapeFlag&4){const D=o||n,V=D;C=Ut(u.call(V,D,d,f,v,p,m)),b=l}else{const D=t;C=Ut(D.length>1?D(f,{attrs:l,slots:a,emit:c}):D(f,null)),b=t.props?l:Bd(l)}}catch(D){Bn.length=0,Vo(D,e,1),C=he(ts)}let $=C;if(b&&y!==!1){const D=Object.keys(b),{shapeFlag:V}=$;D.length&&V&7&&(r&&D.some(na)&&(b=Ud(b,r)),$=en($,b,!1,!0))}return s.dirs&&($=en($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&pa($,s.transition),C=$,So(N),C}const Bd=e=>{let t;for(const s in e)(s==="class"||s==="style"||Uo(s))&&((t||(t={}))[s]=e[s]);return t},Ud=(e,t)=>{const s={};for(const n in e)(!na(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Md(e,t,s){const{props:n,children:o,component:r}=e,{props:a,children:l,patchFlag:c}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Qa(n,a,u):!!a;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(a[p]!==n[p]&&!Go(u,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?Qa(n,a,u):!0:!!a;return!1}function Qa(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Go(s,r))return!0}return!1}function Fd({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Ki={},Vi=()=>Object.create(Ki),Wi=e=>Object.getPrototypeOf(e)===Ki;function jd(e,t,s,n=!1){const o={},r=Vi();e.propsDefaults=Object.create(null),Gi(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);s?e.props=n?o:Si(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Hd(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,l=be(o),[c]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Go(e.emitsOptions,p))continue;const v=t[p];if(c)if(_e(r,p))v!==r[p]&&(r[p]=v,u=!0);else{const m=Ct(p);o[m]=Br(c,l,m,v,e,!1)}else v!==r[p]&&(r[p]=v,u=!0)}}}else{Gi(e,t,o,r)&&(u=!0);let d;for(const f in l)(!t||!_e(t,f)&&((d=ms(f))===f||!_e(t,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Br(c,l,f,void 0,e,!0)):delete o[f]);if(r!==l)for(const f in r)(!t||!_e(t,f))&&(delete r[f],u=!0)}u&&zt(e.attrs,"set","")}function Gi(e,t,s,n){const[o,r]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(En(c))continue;const u=t[c];let d;o&&_e(o,d=Ct(c))?!r||!r.includes(d)?s[d]=u:(l||(l={}))[d]=u:Go(e.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,a=!0)}if(r){const c=be(s),u=l||Se;for(let d=0;d<r.length;d++){const f=r[d];s[f]=Br(o,c,f,u[f],e,!_e(u,f))}}return a}function Br(e,t,s,n,o,r){const a=e[s];if(a!=null){const l=_e(a,"default");if(l&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ce(c)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=to(o);n=u[s]=c.call(null,t),d()}}else n=c;o.ce&&o.ce._setProp(s,n)}a[0]&&(r&&!l?n=!1:a[1]&&(n===""||n===ms(s))&&(n=!0))}return n}const Kd=new WeakMap;function zi(e,t,s=!1){const n=s?Kd:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,a={},l=[];let c=!1;if(!ce(e)){const d=f=>{c=!0;const[p,v]=zi(f,t,!0);Xe(a,p),v&&l.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!c)return Ce(e)&&n.set(e,zs),zs;if(le(r))for(let d=0;d<r.length;d++){const f=Ct(r[d]);Za(f)&&(a[f]=Se)}else if(r)for(const d in r){const f=Ct(d);if(Za(f)){const p=r[d],v=a[f]=le(p)||ce(p)?{type:p}:Xe({},p),m=v.type;let y=!1,N=!0;if(le(m))for(let C=0;C<m.length;++C){const b=m[C],$=ce(b)&&b.name;if($==="Boolean"){y=!0;break}else $==="String"&&(N=!1)}else y=ce(m)&&m.name==="Boolean";v[0]=y,v[1]=N,(y||_e(v,"default"))&&l.push(f)}}const u=[a,l];return Ce(e)&&n.set(e,u),u}function Za(e){return e[0]!=="$"&&!En(e)}const ha=e=>e==="_"||e==="_ctx"||e==="$stable",ga=e=>le(e)?e.map(Ut):[Ut(e)],Vd=(e,t,s)=>{if(t._n)return t;const n=od((...o)=>ga(t(...o)),s);return n._c=!1,n},Ji=(e,t,s)=>{const n=e._ctx;for(const o in e){if(ha(o))continue;const r=e[o];if(ce(r))t[o]=Vd(o,r,n);else if(r!=null){const a=ga(r);t[o]=()=>a}}},Yi=(e,t)=>{const s=ga(t);e.slots.default=()=>s},qi=(e,t,s)=>{for(const n in t)(s||!ha(n))&&(e[n]=t[n])},Wd=(e,t,s)=>{const n=e.slots=Vi();if(e.vnode.shapeFlag&32){const o=t._;o?(qi(n,t,s),s&&oi(n,"_",o,!0)):Ji(t,n)}else t&&Yi(e,t)},Gd=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,a=Se;if(n.shapeFlag&32){const l=t._;l?s&&l===1?r=!1:qi(o,t,s):(r=!t.$stable,Ji(t,o)),a=t}else t&&(Yi(e,t),a={default:1});if(r)for(const l in o)!ha(l)&&a[l]==null&&delete o[l]},mt=Xd;function zd(e){return Jd(e)}function Jd(e,t){const s=Ho();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:a,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:v=Ft,insertStaticContent:m}=e,y=(w,k,E,B=null,F=null,U=null,G=void 0,W=null,A=!!k.dynamicChildren)=>{if(w===k)return;w&&!_n(w,k)&&(B=M(w),se(w,F,U,!0),w=null),k.patchFlag===-2&&(A=!1,k.dynamicChildren=null);const{type:_,ref:x,shapeFlag:I}=k;switch(_){case zo:N(w,k,E,B);break;case ts:C(w,k,E,B);break;case go:w==null&&b(k,E,B,G);break;case Z:we(w,k,E,B,F,U,G,W,A);break;default:I&1?V(w,k,E,B,F,U,G,W,A):I&6?Le(w,k,E,B,F,U,G,W,A):(I&64||I&128)&&_.process(w,k,E,B,F,U,G,W,A,te)}x!=null&&F?Pn(x,w&&w.ref,U,k||w,!k):x==null&&w&&w.ref!=null&&Pn(w.ref,null,U,w,!0)},N=(w,k,E,B)=>{if(w==null)n(k.el=l(k.children),E,B);else{const F=k.el=w.el;k.children!==w.children&&u(F,k.children)}},C=(w,k,E,B)=>{w==null?n(k.el=c(k.children||""),E,B):k.el=w.el},b=(w,k,E,B)=>{[w.el,w.anchor]=m(w.children,k,E,B,w.el,w.anchor)},$=({el:w,anchor:k},E,B)=>{let F;for(;w&&w!==k;)F=p(w),n(w,E,B),w=F;n(k,E,B)},D=({el:w,anchor:k})=>{let E;for(;w&&w!==k;)E=p(w),o(w),w=E;o(k)},V=(w,k,E,B,F,U,G,W,A)=>{if(k.type==="svg"?G="svg":k.type==="math"&&(G="mathml"),w==null)ee(k,E,B,F,U,G,W,A);else{const _=w.el&&w.el._isVueCE?w.el:null;try{_&&_._beginPatch(),Y(w,k,F,U,G,W,A)}finally{_&&_._endPatch()}}},ee=(w,k,E,B,F,U,G,W)=>{let A,_;const{props:x,shapeFlag:I,transition:L,dirs:H}=w;if(A=w.el=a(w.type,U,x&&x.is,x),I&8?d(A,w.children):I&16&&q(w.children,A,null,B,F,hr(w,U),G,W),H&&gs(w,null,B,"created"),K(A,w,w.scopeId,G,B),x){for(const re in x)re!=="value"&&!En(re)&&r(A,re,null,x[re],U,B);"value"in x&&r(A,"value",null,x.value,U),(_=x.onVnodeBeforeMount)&&Pt(_,B,w)}H&&gs(w,null,B,"beforeMount");const J=Yd(F,L);J&&L.beforeEnter(A),n(A,k,E),((_=x&&x.onVnodeMounted)||J||H)&&mt(()=>{_&&Pt(_,B,w),J&&L.enter(A),H&&gs(w,null,B,"mounted")},F)},K=(w,k,E,B,F)=>{if(E&&v(w,E),B)for(let U=0;U<B.length;U++)v(w,B[U]);if(F){let U=F.subTree;if(k===U||ec(U.type)&&(U.ssContent===k||U.ssFallback===k)){const G=F.vnode;K(w,G,G.scopeId,G.slotScopeIds,F.parent)}}},q=(w,k,E,B,F,U,G,W,A=0)=>{for(let _=A;_<w.length;_++){const x=w[_]=W?ls(w[_]):Ut(w[_]);y(null,x,k,E,B,F,U,G,W)}},Y=(w,k,E,B,F,U,G)=>{const W=k.el=w.el;let{patchFlag:A,dynamicChildren:_,dirs:x}=k;A|=w.patchFlag&16;const I=w.props||Se,L=k.props||Se;let H;if(E&&ys(E,!1),(H=L.onVnodeBeforeUpdate)&&Pt(H,E,k,w),x&&gs(k,w,E,"beforeUpdate"),E&&ys(E,!0),(I.innerHTML&&L.innerHTML==null||I.textContent&&L.textContent==null)&&d(W,""),_?de(w.dynamicChildren,_,W,E,B,hr(k,F),U):G||fe(w,k,W,null,E,B,hr(k,F),U,!1),A>0){if(A&16)ue(W,I,L,E,F);else if(A&2&&I.class!==L.class&&r(W,"class",null,L.class,F),A&4&&r(W,"style",I.style,L.style,F),A&8){const J=k.dynamicProps;for(let re=0;re<J.length;re++){const ae=J[re],Te=I[ae],Ae=L[ae];(Ae!==Te||ae==="value")&&r(W,ae,Te,Ae,F,E)}}A&1&&w.children!==k.children&&d(W,k.children)}else!G&&_==null&&ue(W,I,L,E,F);((H=L.onVnodeUpdated)||x)&&mt(()=>{H&&Pt(H,E,k,w),x&&gs(k,w,E,"updated")},B)},de=(w,k,E,B,F,U,G)=>{for(let W=0;W<k.length;W++){const A=w[W],_=k[W],x=A.el&&(A.type===Z||!_n(A,_)||A.shapeFlag&198)?f(A.el):E;y(A,_,x,null,B,F,U,G,!0)}},ue=(w,k,E,B,F)=>{if(k!==E){if(k!==Se)for(const U in k)!En(U)&&!(U in E)&&r(w,U,k[U],null,F,B);for(const U in E){if(En(U))continue;const G=E[U],W=k[U];G!==W&&U!=="value"&&r(w,U,W,G,F,B)}"value"in E&&r(w,"value",k.value,E.value,F)}},we=(w,k,E,B,F,U,G,W,A)=>{const _=k.el=w?w.el:l(""),x=k.anchor=w?w.anchor:l("");let{patchFlag:I,dynamicChildren:L,slotScopeIds:H}=k;H&&(W=W?W.concat(H):H),w==null?(n(_,E,B),n(x,E,B),q(k.children||[],E,x,F,U,G,W,A)):I>0&&I&64&&L&&w.dynamicChildren&&w.dynamicChildren.length===L.length?(de(w.dynamicChildren,L,E,F,U,G,W),(k.key!=null||F&&k===F.subTree)&&Xi(w,k,!0)):fe(w,k,E,x,F,U,G,W,A)},Le=(w,k,E,B,F,U,G,W,A)=>{k.slotScopeIds=W,w==null?k.shapeFlag&512?F.ctx.activate(k,E,B,G,A):je(k,E,B,F,U,G,A):Ge(w,k,A)},je=(w,k,E,B,F,U,G)=>{const W=w.component=of(w,B,F);if(Di(w)&&(W.ctx.renderer=te),af(W,!1,G),W.asyncDep){if(F&&F.registerDep(W,ge,G),!w.el){const A=W.subTree=he(ts);C(null,A,k,E),w.placeholder=A.el}}else ge(W,w,k,E,F,U,G)},Ge=(w,k,E)=>{const B=k.component=w.component;if(Md(w,k,E))if(B.asyncDep&&!B.asyncResolved){Q(B,k,E);return}else B.next=k,B.update();else k.el=w.el,B.vnode=k},ge=(w,k,E,B,F,U,G)=>{const W=()=>{if(w.isMounted){let{next:I,bu:L,u:H,parent:J,vnode:re}=w;{const ot=Qi(w);if(ot){I&&(I.el=re.el,Q(w,I,G)),ot.asyncDep.then(()=>{w.isUnmounted||W()});return}}let ae=I,Te;ys(w,!1),I?(I.el=re.el,Q(w,I,G)):I=re,L&&po(L),(Te=I.props&&I.props.onVnodeBeforeUpdate)&&Pt(Te,J,I,re),ys(w,!0);const Ae=Xa(w),Je=w.subTree;w.subTree=Ae,y(Je,Ae,f(Je.el),M(Je),w,F,U),I.el=Ae.el,ae===null&&Fd(w,Ae.el),H&&mt(H,F),(Te=I.props&&I.props.onVnodeUpdated)&&mt(()=>Pt(Te,J,I,re),F)}else{let I;const{el:L,props:H}=k,{bm:J,m:re,parent:ae,root:Te,type:Ae}=w,Je=qs(k);ys(w,!1),J&&po(J),!Je&&(I=H&&H.onVnodeBeforeMount)&&Pt(I,ae,k),ys(w,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(Ae);const ot=w.subTree=Xa(w);y(null,ot,E,B,w,F,U),k.el=ot.el}if(re&&mt(re,F),!Je&&(I=H&&H.onVnodeMounted)){const ot=k;mt(()=>Pt(I,ae,ot),F)}(k.shapeFlag&256||ae&&qs(ae.vnode)&&ae.vnode.shapeFlag&256)&&w.a&&mt(w.a,F),w.isMounted=!0,k=E=B=null}};w.scope.on();const A=w.effect=new ii(W);w.scope.off();const _=w.update=A.run.bind(A),x=w.job=A.runIfDirty.bind(A);x.i=w,x.id=w.uid,A.scheduler=()=>ma(x),ys(w,!0),_()},Q=(w,k,E)=>{k.component=w;const B=w.vnode.props;w.vnode=k,w.next=null,Hd(w,k.props,B,E),Gd(w,k.children,E),Qt(),Va(w),Zt()},fe=(w,k,E,B,F,U,G,W,A=!1)=>{const _=w&&w.children,x=w?w.shapeFlag:0,I=k.children,{patchFlag:L,shapeFlag:H}=k;if(L>0){if(L&128){ne(_,I,E,B,F,U,G,W,A);return}else if(L&256){pe(_,I,E,B,F,U,G,W,A);return}}H&8?(x&16&&Ze(_,F,U),I!==_&&d(E,I)):x&16?H&16?ne(_,I,E,B,F,U,G,W,A):Ze(_,F,U,!0):(x&8&&d(E,""),H&16&&q(I,E,B,F,U,G,W,A))},pe=(w,k,E,B,F,U,G,W,A)=>{w=w||zs,k=k||zs;const _=w.length,x=k.length,I=Math.min(_,x);let L;for(L=0;L<I;L++){const H=k[L]=A?ls(k[L]):Ut(k[L]);y(w[L],H,E,null,F,U,G,W,A)}_>x?Ze(w,F,U,!0,!1,I):q(k,E,B,F,U,G,W,A,I)},ne=(w,k,E,B,F,U,G,W,A)=>{let _=0;const x=k.length;let I=w.length-1,L=x-1;for(;_<=I&&_<=L;){const H=w[_],J=k[_]=A?ls(k[_]):Ut(k[_]);if(_n(H,J))y(H,J,E,null,F,U,G,W,A);else break;_++}for(;_<=I&&_<=L;){const H=w[I],J=k[L]=A?ls(k[L]):Ut(k[L]);if(_n(H,J))y(H,J,E,null,F,U,G,W,A);else break;I--,L--}if(_>I){if(_<=L){const H=L+1,J=H<x?k[H].el:B;for(;_<=L;)y(null,k[_]=A?ls(k[_]):Ut(k[_]),E,J,F,U,G,W,A),_++}}else if(_>L)for(;_<=I;)se(w[_],F,U,!0),_++;else{const H=_,J=_,re=new Map;for(_=J;_<=L;_++){const Ie=k[_]=A?ls(k[_]):Ut(k[_]);Ie.key!=null&&re.set(Ie.key,_)}let ae,Te=0;const Ae=L-J+1;let Je=!1,ot=0;const kt=new Array(Ae);for(_=0;_<Ae;_++)kt[_]=0;for(_=H;_<=I;_++){const Ie=w[_];if(Te>=Ae){se(Ie,F,U,!0);continue}let He;if(Ie.key!=null)He=re.get(Ie.key);else for(ae=J;ae<=L;ae++)if(kt[ae-J]===0&&_n(Ie,k[ae])){He=ae;break}He===void 0?se(Ie,F,U,!0):(kt[He-J]=_+1,He>=ot?ot=He:Je=!0,y(Ie,k[He],E,null,F,U,G,W,A),Te++)}const yt=Je?qd(kt):zs;for(ae=yt.length-1,_=Ae-1;_>=0;_--){const Ie=J+_,He=k[Ie],xt=k[Ie+1],gn=Ie+1<x?xt.el||Zi(xt):B;kt[_]===0?y(null,He,E,gn,F,U,G,W,A):Je&&(ae<0||_!==yt[ae]?j(He,E,gn,2):ae--)}}},j=(w,k,E,B,F=null)=>{const{el:U,type:G,transition:W,children:A,shapeFlag:_}=w;if(_&6){j(w.component.subTree,k,E,B);return}if(_&128){w.suspense.move(k,E,B);return}if(_&64){G.move(w,k,E,te);return}if(G===Z){n(U,k,E);for(let I=0;I<A.length;I++)j(A[I],k,E,B);n(w.anchor,k,E);return}if(G===go){$(w,k,E);return}if(B!==2&&_&1&&W)if(B===0)W.beforeEnter(U),n(U,k,E),mt(()=>W.enter(U),F);else{const{leave:I,delayLeave:L,afterLeave:H}=W,J=()=>{w.ctx.isUnmounted?o(U):n(U,k,E)},re=()=>{U._isLeaving&&U[ud](!0),I(U,()=>{J(),H&&H()})};L?L(U,J,re):re()}else n(U,k,E)},se=(w,k,E,B=!1,F=!1)=>{const{type:U,props:G,ref:W,children:A,dynamicChildren:_,shapeFlag:x,patchFlag:I,dirs:L,cacheIndex:H}=w;if(I===-2&&(F=!1),W!=null&&(Qt(),Pn(W,null,E,w,!0),Zt()),H!=null&&(k.renderCache[H]=void 0),x&256){k.ctx.deactivate(w);return}const J=x&1&&L,re=!qs(w);let ae;if(re&&(ae=G&&G.onVnodeBeforeUnmount)&&Pt(ae,k,w),x&6)vt(w.component,E,B);else{if(x&128){w.suspense.unmount(E,B);return}J&&gs(w,null,k,"beforeUnmount"),x&64?w.type.remove(w,k,E,te,B):_&&!_.hasOnce&&(U!==Z||I>0&&I&64)?Ze(_,k,E,!1,!0):(U===Z&&I&384||!F&&x&16)&&Ze(A,k,E),B&&ze(w)}(re&&(ae=G&&G.onVnodeUnmounted)||J)&&mt(()=>{ae&&Pt(ae,k,w),J&&gs(w,null,k,"unmounted")},E)},ze=w=>{const{type:k,el:E,anchor:B,transition:F}=w;if(k===Z){ct(E,B);return}if(k===go){D(w);return}const U=()=>{o(E),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(w.shapeFlag&1&&F&&!F.persisted){const{leave:G,delayLeave:W}=F,A=()=>G(E,U);W?W(w.el,U,A):A()}else U()},ct=(w,k)=>{let E;for(;w!==k;)E=p(w),o(w),w=E;o(k)},vt=(w,k,E)=>{const{bum:B,scope:F,job:U,subTree:G,um:W,m:A,a:_}=w;el(A),el(_),B&&po(B),F.stop(),U&&(U.flags|=8,se(G,w,k,E)),W&&mt(W,k),mt(()=>{w.isUnmounted=!0},k)},Ze=(w,k,E,B=!1,F=!1,U=0)=>{for(let G=U;G<w.length;G++)se(w[G],k,E,B,F)},M=w=>{if(w.shapeFlag&6)return M(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const k=p(w.anchor||w.el),E=k&&k[id];return E?p(E):k};let X=!1;const z=(w,k,E)=>{let B;w==null?k._vnode&&(se(k._vnode,null,null,!0),B=k._vnode.component):y(k._vnode||null,w,k,null,null,null,E),k._vnode=w,X||(X=!0,Va(B),Ai(),X=!1)},te={p:y,um:se,m:j,r:ze,mt:je,mc:q,pc:fe,pbc:de,n:M,o:e};return{render:z,hydrate:void 0,createApp:Rd(z)}}function hr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ys({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Yd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Xi(e,t,s=!1){const n=e.children,o=t.children;if(le(n)&&le(o))for(let r=0;r<n.length;r++){const a=n[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=ls(o[r]),l.el=a.el),!s&&l.patchFlag!==-2&&Xi(a,l)),l.type===zo&&(l.patchFlag!==-1?l.el=a.el:l.__elIndex=r+(e.type===Z?1:0)),l.type===ts&&!l.el&&(l.el=a.el)}}function qd(e){const t=e.slice(),s=[0];let n,o,r,a,l;const c=e.length;for(n=0;n<c;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(r=0,a=s.length-1;r<a;)l=r+a>>1,e[s[l]]<u?r=l+1:a=l;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,a=s[r-1];r-- >0;)s[r]=a,a=t[a];return s}function Qi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Qi(t)}function el(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Zi(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Zi(t.subTree):null}const ec=e=>e.__isSuspense;function Xd(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):nd(e)}const Z=Symbol.for("v-fgt"),zo=Symbol.for("v-txt"),ts=Symbol.for("v-cmt"),go=Symbol.for("v-stc"),Bn=[];let gt=null;function h(e=!1){Bn.push(gt=e?null:[])}function Qd(){Bn.pop(),gt=Bn[Bn.length-1]||null}let Gn=1;function ko(e,t=!1){Gn+=e,e<0&&gt&&t&&(gt.hasOnce=!0)}function tc(e){return e.dynamicChildren=Gn>0?gt||zs:null,Qd(),Gn>0&&gt&&gt.push(e),e}function g(e,t,s,n,o,r){return tc(i(e,t,s,n,o,r,!0))}function xe(e,t,s,n,o){return tc(he(e,t,s,n,o,!0))}function zn(e){return e?e.__v_isVNode===!0:!1}function _n(e,t){return e.type===t.type&&e.key===t.key}const sc=({key:e})=>e??null,yo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Be(e)||nt(e)||ce(e)?{i:Ye,r:e,k:t,f:!!s}:e:null);function i(e,t=null,s=null,n=0,o=null,r=e===Z?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sc(t),ref:t&&yo(t),scopeId:Oi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ye};return l?(ya(c,s),r&128&&e.normalize(c)):s&&(c.shapeFlag|=Be(s)?8:16),Gn>0&&!a&&gt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&gt.push(c),c}const he=Zd;function Zd(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===Cd)&&(e=ts),zn(e)){const l=en(e,t,!0);return s&&ya(l,s),Gn>0&&!r&&gt&&(l.shapeFlag&6?gt[gt.indexOf(e)]=l:gt.push(l)),l.patchFlag=-2,l}if(ff(e)&&(e=e.__vccOpts),t){t=ef(t);let{class:l,style:c}=t;l&&!Be(l)&&(t.class=oe(l)),Ce(c)&&(va(c)&&!le(c)&&(c=Xe({},c)),t.style=ss(c))}const a=Be(e)?1:ec(e)?128:cd(e)?64:Ce(e)?4:ce(e)?2:0;return i(e,t,s,n,o,a,r,!0)}function ef(e){return e?va(e)||Wi(e)?Xe({},e):e:null}function en(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:a,children:l,transition:c}=e,u=t?tf(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&sc(u),ref:t&&t.ref?s&&r?le(r)?r.concat(yo(t)):[r,yo(t)]:yo(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&en(e.ssContent),ssFallback:e.ssFallback&&en(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&pa(d,c.clone(d)),d}function tn(e=" ",t=0){return he(zo,null,e,t)}function xo(e,t){const s=he(go,null,e);return s.staticCount=t,s}function P(e="",t=!1){return t?(h(),xe(ts,null,e)):he(ts,null,e)}function Ut(e){return e==null||typeof e=="boolean"?he(ts):le(e)?he(Z,null,e.slice()):zn(e)?ls(e):he(zo,null,String(e))}function ls(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:en(e)}function ya(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(le(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),ya(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Wi(t)?t._ctx=Ye:o===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:Ye},s=32):(t=String(t),n&64?(s=16,t=[tn(t)]):s=8);e.children=t,e.shapeFlag|=s}function tf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=oe([t.class,n.class]));else if(o==="style")t.style=ss([t.style,n.style]);else if(Uo(o)){const r=t[o],a=n[o];a&&r!==a&&!(le(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=n[o])}return t}function Pt(e,t,s,n=null){Kt(e,t,7,[s,n])}const sf=ji();let nf=0;function of(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||sf,r={uid:nf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Au(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zi(n,o),emitsOptions:Hi(n,o),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Pd.bind(null,r),e.ce&&e.ce(r),r}let st=null;const rf=()=>st||Ye;let Ao,Ur;{const e=Ho(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(a=>a(r)):o[0](r)}};Ao=t("__VUE_INSTANCE_SETTERS__",s=>st=s),Ur=t("__VUE_SSR_SETTERS__",s=>Jn=s)}const to=e=>{const t=st;return Ao(e),e.scope.on(),()=>{e.scope.off(),Ao(t)}},tl=()=>{st&&st.scope.off(),Ao(null)};function nc(e){return e.vnode.shapeFlag&4}let Jn=!1;function af(e,t=!1,s=!1){t&&Ur(t);const{props:n,children:o}=e.vnode,r=nc(e);jd(e,n,r,t),Wd(e,o,s||t);const a=r?lf(e,t):void 0;return t&&Ur(!1),a}function lf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,xd);const{setup:n}=s;if(n){Qt();const o=e.setupContext=n.length>1?uf(e):null,r=to(e),a=eo(n,e,0,[e.props,o]),l=ti(a);if(Zt(),r(),(l||e.sp)&&!qs(e)&&Ri(e),l){if(a.then(tl,tl),t)return a.then(c=>{sl(e,c)}).catch(c=>{Vo(c,e,0)});e.asyncDep=a}else sl(e,a)}else oc(e)}function sl(e,t,s){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=$i(t)),oc(e)}function oc(e,t,s){const n=e.type;e.render||(e.render=n.render||Ft);{const o=to(e);Qt();try{Ad(e)}finally{Zt(),o()}}}const cf={get(e,t){return tt(e,"get",""),e[t]}};function uf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,cf),slots:e.slots,emit:e.emit,expose:t}}function Jo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($i(zu(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ln)return Ln[s](e)},has(t,s){return s in t||s in Ln}})):e.proxy}function df(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function ff(e){return ce(e)&&"__vccOpts"in e}const O=(e,t)=>Qu(e,t,Jn);function rc(e,t,s){try{ko(-1);const n=arguments.length;return n===2?Ce(t)&&!le(t)?zn(t)?he(e,null,[t]):he(e,t):he(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&zn(s)&&(s=[s]),he(e,t,s))}finally{ko(1)}}const vf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mr;const nl=typeof window<"u"&&window.trustedTypes;if(nl)try{Mr=nl.createPolicy("vue",{createHTML:e=>e})}catch{}const ac=Mr?e=>Mr.createHTML(e):e=>e,mf="http://www.w3.org/2000/svg",pf="http://www.w3.org/1998/Math/MathML",Gt=typeof document<"u"?document:null,ol=Gt&&Gt.createElement("template"),hf={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Gt.createElementNS(mf,e):t==="mathml"?Gt.createElementNS(pf,e):s?Gt.createElement(e,{is:s}):Gt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Gt.createTextNode(e),createComment:e=>Gt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const a=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{ol.innerHTML=ac(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=ol.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},gf=Symbol("_vtc");function yf(e,t,s){const n=e[gf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const rl=Symbol("_vod"),bf=Symbol("_vsh"),_f=Symbol(""),wf=/(?:^|;)\s*display\s*:/;function Sf(e,t,s){const n=e.style,o=Be(s);let r=!1;if(s&&!o){if(t)if(Be(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();s[l]==null&&bo(n,l,"")}else for(const a in t)s[a]==null&&bo(n,a,"");for(const a in s)a==="display"&&(r=!0),bo(n,a,s[a])}else if(o){if(t!==s){const a=n[_f];a&&(s+=";"+a),n.cssText=s,r=wf.test(s)}}else t&&e.removeAttribute("style");rl in e&&(e[rl]=r?n.display:"",e[bf]&&(n.display="none"))}const al=/\s*!important$/;function bo(e,t,s){if(le(s))s.forEach(n=>bo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Cf(e,t);al.test(s)?e.setProperty(ms(n),s.replace(al,""),"important"):e[n]=s}}const ll=["Webkit","Moz","ms"],gr={};function Cf(e,t){const s=gr[t];if(s)return s;let n=Ct(t);if(n!=="filter"&&n in e)return gr[t]=n;n=Fo(n);for(let o=0;o<ll.length;o++){const r=ll[o]+n;if(r in e)return gr[t]=r}return t}const il="http://www.w3.org/1999/xlink";function cl(e,t,s,n,o,r=ku(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(il,t.slice(6,t.length)):e.setAttributeNS(il,t,s):s==null||r&&!ri(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Tt(s)?String(s):s)}function ul(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ac(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let a=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=ri(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(o||t)}function Yt(e,t,s,n){e.addEventListener(t,s,n)}function $f(e,t,s,n){e.removeEventListener(t,s,n)}const dl=Symbol("_vei");function kf(e,t,s,n,o=null){const r=e[dl]||(e[dl]={}),a=r[t];if(n&&a)a.value=n;else{const[l,c]=xf(t);if(n){const u=r[t]=Of(n,o);Yt(e,l,u,c)}else a&&($f(e,l,a,c),r[t]=void 0)}}const fl=/(?:Once|Passive|Capture)$/;function xf(e){let t;if(fl.test(e)){t={};let n;for(;n=e.match(fl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ms(e.slice(2)),t]}let yr=0;const Af=Promise.resolve(),Nf=()=>yr||(Af.then(()=>yr=0),yr=Date.now());function Of(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Kt(Tf(n,s.value),t,5,[n])};return s.value=e,s.attached=Nf(),s}function Tf(e,t){if(le(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const vl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,If=(e,t,s,n,o,r)=>{const a=o==="svg";t==="class"?yf(e,n,a):t==="style"?Sf(e,s,n):Uo(t)?na(t)||kf(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ef(e,t,n,a))?(ul(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&cl(e,t,n,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Be(n))?ul(e,Ct(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),cl(e,t,n,a))};function Ef(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&vl(t)&&ce(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return vl(t)&&Be(s)?!1:t in e}const fs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return le(t)?s=>po(t,s):t};function Rf(e){e.target.composing=!0}function ml(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const St=Symbol("_assign");function pl(e,t,s){return t&&(e=e.trim()),s&&(e=jo(e)),e}const At={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[St]=fs(o);const r=n||o.props&&o.props.type==="number";Yt(e,t?"change":"input",a=>{a.target.composing||e[St](pl(e.value,s,r))}),(s||r)&&Yt(e,"change",()=>{e.value=pl(e.value,s,r)}),t||(Yt(e,"compositionstart",Rf),Yt(e,"compositionend",ml),Yt(e,"change",ml))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},a){if(e[St]=fs(a),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?jo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===c)||(e.value=c))}},Yo={deep:!0,created(e,t,s){e[St]=fs(s),Yt(e,"change",()=>{const n=e._modelValue,o=sn(e),r=e.checked,a=e[St];if(le(n)){const l=aa(n,o),c=l!==-1;if(r&&!c)a(n.concat(o));else if(!r&&c){const u=[...n];u.splice(l,1),a(u)}}else if(vn(n)){const l=new Set(n);r?l.add(o):l.delete(o),a(l)}else a(lc(e,r))})},mounted:hl,beforeUpdate(e,t,s){e[St]=fs(s),hl(e,t,s)}};function hl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(le(t))o=aa(t,n.props.value)>-1;else if(vn(t))o=t.has(n.props.value);else{if(t===s)return;o=Os(t,lc(e,!0))}e.checked!==o&&(e.checked=o)}const gl={created(e,{value:t},s){e.checked=Os(t,s.props.value),e[St]=fs(s),Yt(e,"change",()=>{e[St](sn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[St]=fs(n),t!==s&&(e.checked=Os(t,n.props.value))}},Un={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=vn(t);Yt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?jo(sn(a)):sn(a));e[St](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Vn(()=>{e._assigning=!1})}),e[St]=fs(n)},mounted(e,{value:t}){yl(e,t)},beforeUpdate(e,t,s){e[St]=fs(s)},updated(e,{value:t}){e._assigning||yl(e,t)}};function yl(e,t){const s=e.multiple,n=le(t);if(!(s&&!n&&!vn(t))){for(let o=0,r=e.options.length;o<r;o++){const a=e.options[o],l=sn(a);if(s)if(n){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(u=>String(u)===String(l)):a.selected=aa(t,l)>-1}else a.selected=t.has(l);else if(Os(sn(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function sn(e){return"_value"in e?e._value:e.value}function lc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Df=["ctrl","shift","alt","meta"],Pf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Df.some(s=>e[`${s}Key`]&&!t.includes(s))},Et=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let a=0;a<t.length;a++){const l=Pf[t[a]];if(l&&l(o,t))return}return e(o,...r)})},Lf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ic=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const r=ms(o.key);if(t.some(a=>a===r||Lf[a]===r))return e(o)})},Bf=Xe({patchProp:If},hf);let bl;function Uf(){return bl||(bl=zd(Bf))}const Mf=(...e)=>{const t=Uf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=jf(n);if(!o)return;const r=t._component;!ce(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=s(o,!1,Ff(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function Ff(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function jf(e){return Be(e)?document.querySelector(e):e}const me=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Hf={};function Kf(e,t){const s=Sd("router-view");return h(),xe(s)}const Vf=me(Hf,[["render",Kf]]),Wf="modulepreload",Gf=function(e){return"/"+e},_l={},zf=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(s.map(c=>{if(c=Gf(c),c in _l)return;_l[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Wf,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const js=typeof document<"u";function cc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Jf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&cc(e.default)}const ye=Object.assign;function br(e,t){const s={};for(const n in t){const o=t[n];s[n]=Rt(o)?o.map(e):e(o)}return s}const Mn=()=>{},Rt=Array.isArray;function wl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const uc=/#/g,Yf=/&/g,qf=/\//g,Xf=/=/g,Qf=/\?/g,dc=/\+/g,Zf=/%5B/g,ev=/%5D/g,fc=/%5E/g,tv=/%60/g,vc=/%7B/g,sv=/%7C/g,mc=/%7D/g,nv=/%20/g;function ba(e){return e==null?"":encodeURI(""+e).replace(sv,"|").replace(Zf,"[").replace(ev,"]")}function ov(e){return ba(e).replace(vc,"{").replace(mc,"}").replace(fc,"^")}function Fr(e){return ba(e).replace(dc,"%2B").replace(nv,"+").replace(uc,"%23").replace(Yf,"%26").replace(tv,"`").replace(vc,"{").replace(mc,"}").replace(fc,"^")}function rv(e){return Fr(e).replace(Xf,"%3D")}function av(e){return ba(e).replace(uc,"%23").replace(Qf,"%3F")}function lv(e){return av(e).replace(qf,"%2F")}function Yn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const iv=/\/$/,cv=e=>e.replace(iv,"");function _r(e,t,s="/"){let n,o={},r="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(n=t.slice(0,c),r=t.slice(c,l>0?l:t.length),o=e(r.slice(1))),l>=0&&(n=n||t.slice(0,l),a=t.slice(l,t.length)),n=vv(n??t,s),{fullPath:n+r+a,path:n,query:o,hash:Yn(a)}}function uv(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Sl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function dv(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&nn(t.matched[n],s.matched[o])&&pc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function nn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function pc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!fv(e[s],t[s]))return!1;return!0}function fv(e,t){return Rt(e)?Cl(e,t):Rt(t)?Cl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Cl(e,t){return Rt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function vv(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let r=s.length-1,a,l;for(a=0;a<n.length;a++)if(l=n[a],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const os={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let jr=function(e){return e.pop="pop",e.push="push",e}({}),wr=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function mv(e){if(!e)if(js){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cv(e)}const pv=/^[^#]+#/;function hv(e,t){return e.replace(pv,"#")+t}function gv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const qo=()=>({left:window.scrollX,top:window.scrollY});function yv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=gv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function $l(e,t){return(history.state?history.state.position-t:-1)+e}const Hr=new Map;function bv(e,t){Hr.set(e,t)}function _v(e){const t=Hr.get(e);return Hr.delete(e),t}function wv(e){return typeof e=="string"||e&&typeof e=="object"}function hc(e){return typeof e=="string"||typeof e=="symbol"}let Re=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const gc=Symbol("");Re.MATCHER_NOT_FOUND+"",Re.NAVIGATION_GUARD_REDIRECT+"",Re.NAVIGATION_ABORTED+"",Re.NAVIGATION_CANCELLED+"",Re.NAVIGATION_DUPLICATED+"";function on(e,t){return ye(new Error,{type:e,[gc]:!0},t)}function Wt(e,t){return e instanceof Error&&gc in e&&(t==null||!!(e.type&t))}const Sv=["params","query","hash"];function Cv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Sv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function $v(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(dc," "),r=o.indexOf("="),a=Yn(r<0?o:o.slice(0,r)),l=r<0?null:Yn(o.slice(r+1));if(a in t){let c=t[a];Rt(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function kl(e){let t="";for(let s in e){const n=e[s];if(s=rv(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Rt(n)?n.map(o=>o&&Fr(o)):[n&&Fr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function kv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Rt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const xv=Symbol(""),xl=Symbol(""),Xo=Symbol(""),_a=Symbol(""),Kr=Symbol("");function wn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function is(e,t,s,n,o,r=a=>a()){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const u=p=>{p===!1?c(on(Re.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?c(p):wv(p)?c(on(Re.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(a&&n.enterCallbacks[o]===a&&typeof p=="function"&&a.push(p),l())},d=r(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Sr(e,t,s,n,o=r=>r()){const r=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(cc(c)){const u=(c.__vccOpts||c)[t];u&&r.push(is(u,s,n,a,l,o))}else{let u=c();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const f=Jf(d)?d.default:d;a.mods[l]=d,a.components[l]=f;const p=(f.__vccOpts||f)[t];return p&&is(p,s,n,a,l,o)()}))}}return r}function Av(e,t){const s=[],n=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const l=t.matched[a];l&&(e.matched.find(u=>nn(u,l))?n.push(l):s.push(l));const c=e.matched[a];c&&(t.matched.find(u=>nn(u,c))||o.push(c))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Nv=()=>location.protocol+"//"+location.host;function yc(e,t){const{pathname:s,search:n,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),Sl(l,"")}return Sl(s,e)+n+o}function Ov(e,t,s,n){let o=[],r=[],a=null;const l=({state:p})=>{const v=yc(e,location),m=s.value,y=t.value;let N=0;if(p){if(s.value=v,t.value=p,a&&a===m){a=null;return}N=y?p.position-y.position:0}else n(v);o.forEach(C=>{C(s.value,m,{delta:N,type:jr.pop,direction:N?N>0?wr.forward:wr.back:wr.unknown})})};function c(){a=s.value}function u(p){o.push(p);const v=()=>{const m=o.indexOf(p);m>-1&&o.splice(m,1)};return r.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(ye({},p.state,{scroll:qo()}),"")}}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:f}}function Al(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?qo():null}}function Tv(e){const{history:t,location:s}=window,n={value:yc(e,s)},o={value:t.state};o.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,u,d){const f=e.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+c:Nv()+e+c;try{t[d?"replaceState":"pushState"](u,"",p),o.value=u}catch(v){console.error(v),s[d?"replace":"assign"](p)}}function a(c,u){r(c,ye({},t.state,Al(o.value.back,c,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=c}function l(c,u){const d=ye({},o.value,t.state,{forward:c,scroll:qo()});r(d.current,d,!0),r(c,ye({},Al(n.value,c,null),{position:d.position+1},u),!1),n.value=c}return{location:n,state:o,push:l,replace:a}}function Iv(e){e=mv(e);const t=Tv(e),s=Ov(e,t.state,t.location,t.replace);function n(r,a=!0){a||s.pauseListeners(),history.go(r)}const o=ye({location:"",base:e,go:n,createHref:hv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Ev(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Iv(e)}let ks=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Fe=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Fe||{});const Rv={type:ks.Static,value:""},Dv=/[a-zA-Z0-9_]/;function Pv(e){if(!e)return[[]];if(e==="/")return[[Rv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=Fe.Static,n=s;const o=[];let r;function a(){r&&o.push(r),r=[]}let l=0,c,u="",d="";function f(){u&&(s===Fe.Static?r.push({type:ks.Static,value:u}):s===Fe.Param||s===Fe.ParamRegExp||s===Fe.ParamRegExpEnd?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ks.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==Fe.ParamRegExp){n=s,s=Fe.EscapeNext;continue}switch(s){case Fe.Static:c==="/"?(u&&f(),a()):c===":"?(f(),s=Fe.Param):p();break;case Fe.EscapeNext:p(),s=n;break;case Fe.Param:c==="("?s=Fe.ParamRegExp:Dv.test(c)?p():(f(),s=Fe.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Fe.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=Fe.ParamRegExpEnd:d+=c;break;case Fe.ParamRegExpEnd:f(),s=Fe.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return s===Fe.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),o}const Nl="[^/]+?",Lv={sensitive:!1,strict:!1,start:!0,end:!0};var at=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(at||{});const Bv=/[.+*?^${}()[\]/\\]/g;function Uv(e,t){const s=ye({},Lv,t),n=[];let o=s.start?"^":"";const r=[];for(const u of e){const d=u.length?[]:[at.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let v=at.Segment+(s.sensitive?at.BonusCaseSensitive:0);if(p.type===ks.Static)f||(o+="/"),o+=p.value.replace(Bv,"\\$&"),v+=at.Static;else if(p.type===ks.Param){const{value:m,repeatable:y,optional:N,regexp:C}=p;r.push({name:m,repeatable:y,optional:N});const b=C||Nl;if(b!==Nl){v+=at.BonusCustomRegExp;try{`${b}`}catch(D){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+D.message)}}let $=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||($=N&&u.length<2?`(?:/${$})`:"/"+$),N&&($+="?"),o+=$,v+=at.Dynamic,N&&(v+=at.BonusOptional),y&&(v+=at.BonusRepeatable),b===".*"&&(v+=at.BonusWildcard)}d.push(v)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=at.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,s.sensitive?"":"i");function l(u){const d=u.match(a),f={};if(!d)return null;for(let p=1;p<d.length;p++){const v=d[p]||"",m=r[p-1];f[m.name]=v&&m.repeatable?v.split("/"):v}return f}function c(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of p)if(v.type===ks.Static)d+=v.value;else if(v.type===ks.Param){const{value:m,repeatable:y,optional:N}=v,C=m in u?u[m]:"";if(Rt(C)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=Rt(C)?C.join("/"):C;if(!b)if(N)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);d+=b}}return d||"/"}return{re:a,score:n,keys:r,parse:l,stringify:c}}function Mv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===at.Static+at.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===at.Static+at.Segment?1:-1:0}function bc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const r=Mv(n[s],o[s]);if(r)return r;s++}if(Math.abs(o.length-n.length)===1){if(Ol(n))return 1;if(Ol(o))return-1}return o.length-n.length}function Ol(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Fv={strict:!1,end:!0,sensitive:!1};function jv(e,t,s){const n=Uv(Pv(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Hv(e,t){const s=[],n=new Map;t=wl(Fv,t);function o(f){return n.get(f)}function r(f,p,v){const m=!v,y=Il(f);y.aliasOf=v&&v.record;const N=wl(t,f),C=[y];if("alias"in f){const D=typeof f.alias=="string"?[f.alias]:f.alias;for(const V of D)C.push(Il(ye({},y,{components:v?v.record.components:y.components,path:V,aliasOf:v?v.record:y})))}let b,$;for(const D of C){const{path:V}=D;if(p&&V[0]!=="/"){const ee=p.record.path,K=ee[ee.length-1]==="/"?"":"/";D.path=p.record.path+(V&&K+V)}if(b=jv(D,p,N),v?v.alias.push(b):($=$||b,$!==b&&$.alias.push(b),m&&f.name&&!El(b)&&a(f.name)),_c(b)&&c(b),y.children){const ee=y.children;for(let K=0;K<ee.length;K++)r(ee[K],b,v&&v.children[K])}v=v||b}return $?()=>{a($)}:Mn}function a(f){if(hc(f)){const p=n.get(f);p&&(n.delete(f),s.splice(s.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=s.indexOf(f);p>-1&&(s.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return s}function c(f){const p=Wv(f,s);s.splice(p,0,f),f.record.name&&!El(f)&&n.set(f.record.name,f)}function u(f,p){let v,m={},y,N;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw on(Re.MATCHER_NOT_FOUND,{location:f});N=v.record.name,m=ye(Tl(p.params,v.keys.filter($=>!$.optional).concat(v.parent?v.parent.keys.filter($=>$.optional):[]).map($=>$.name)),f.params&&Tl(f.params,v.keys.map($=>$.name))),y=v.stringify(m)}else if(f.path!=null)y=f.path,v=s.find($=>$.re.test(y)),v&&(m=v.parse(y),N=v.record.name);else{if(v=p.name?n.get(p.name):s.find($=>$.re.test(p.path)),!v)throw on(Re.MATCHER_NOT_FOUND,{location:f,currentLocation:p});N=v.record.name,m=ye({},p.params,f.params),y=v.stringify(m)}const C=[];let b=v;for(;b;)C.unshift(b.record),b=b.parent;return{name:N,path:y,params:m,matched:C,meta:Vv(C)}}e.forEach(f=>r(f));function d(){s.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:o}}function Tl(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Il(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Kv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Kv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function El(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Vv(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function Wv(e,t){let s=0,n=t.length;for(;s!==n;){const r=s+n>>1;bc(e,t[r])<0?n=r:s=r+1}const o=Gv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Gv(e){let t=e;for(;t=t.parent;)if(_c(t)&&bc(e,t)===0)return t}function _c({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Rl(e){const t=Ot(Xo),s=Ot(_a),n=O(()=>{const c=R(e.to);return t.resolve(c)}),o=O(()=>{const{matched:c}=n.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const p=f.findIndex(nn.bind(null,d));if(p>-1)return p;const v=Dl(c[u-2]);return u>1&&Dl(d)===v&&f[f.length-1].path!==v?f.findIndex(nn.bind(null,c[u-2])):p}),r=O(()=>o.value>-1&&Xv(s.params,n.value.params)),a=O(()=>o.value>-1&&o.value===s.matched.length-1&&pc(s.params,n.value.params));function l(c={}){if(qv(c)){const u=t[R(e.replace)?"replace":"push"](R(e.to)).catch(Mn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:O(()=>n.value.href),isActive:r,isExactActive:a,navigate:l}}function zv(e){return e.length===1?e[0]:e}const Jv=Ei({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rl,setup(e,{slots:t}){const s=jt(Rl(e)),{options:n}=Ot(Xo),o=O(()=>({[Pl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Pl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=t.default&&zv(t.default(s));return e.custom?r:rc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},r)}}}),Yv=Jv;function qv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Xv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Rt(o)||o.length!==n.length||n.some((r,a)=>r.valueOf()!==o[a].valueOf()))return!1}return!0}function Dl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Pl=(e,t,s)=>e??t??s,Qv=Ei({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Ot(Kr),o=O(()=>e.route||n.value),r=Ot(xl,0),a=O(()=>{let u=R(r);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=O(()=>o.value.matched[a.value]);ho(xl,O(()=>a.value+1)),ho(xv,l),ho(Kr,o);const c=T();return it(()=>[c.value,l.value,e.name],([u,d,f],[p,v,m])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!nn(d,v)||!p)&&(d.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=l.value,p=f&&f.components[d];if(!p)return Ll(s.default,{Component:p,route:u});const v=f.props[d],m=v?v===!0?u.params:typeof v=="function"?v(u):v:null,N=rc(p,ye({},m,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return Ll(s.default,{Component:N,route:u})||N}}});function Ll(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Zv=Qv;function em(e){const t=Hv(e.routes,e),s=e.parseQuery||$v,n=e.stringifyQuery||kl,o=e.history,r=wn(),a=wn(),l=wn(),c=Ju(os);let u=os;js&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=br.bind(null,M=>""+M),f=br.bind(null,lv),p=br.bind(null,Yn);function v(M,X){let z,te;return hc(M)?(z=t.getRecordMatcher(M),te=X):te=M,t.addRoute(te,z)}function m(M){const X=t.getRecordMatcher(M);X&&t.removeRoute(X)}function y(){return t.getRoutes().map(M=>M.record)}function N(M){return!!t.getRecordMatcher(M)}function C(M,X){if(X=ye({},X||c.value),typeof M=="string"){const E=_r(s,M,X.path),B=t.resolve({path:E.path},X),F=o.createHref(E.fullPath);return ye(E,B,{params:p(B.params),hash:Yn(E.hash),redirectedFrom:void 0,href:F})}let z;if(M.path!=null)z=ye({},M,{path:_r(s,M.path,X.path).path});else{const E=ye({},M.params);for(const B in E)E[B]==null&&delete E[B];z=ye({},M,{params:f(E)}),X.params=f(X.params)}const te=t.resolve(z,X),ve=M.hash||"";te.params=d(p(te.params));const w=uv(n,ye({},M,{hash:ov(ve),path:te.path})),k=o.createHref(w);return ye({fullPath:w,hash:ve,query:n===kl?kv(M.query):M.query||{}},te,{redirectedFrom:void 0,href:k})}function b(M){return typeof M=="string"?_r(s,M,c.value.path):ye({},M)}function $(M,X){if(u!==M)return on(Re.NAVIGATION_CANCELLED,{from:X,to:M})}function D(M){return K(M)}function V(M){return D(ye(b(M),{replace:!0}))}function ee(M,X){const z=M.matched[M.matched.length-1];if(z&&z.redirect){const{redirect:te}=z;let ve=typeof te=="function"?te(M,X):te;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=b(ve):{path:ve},ve.params={}),ye({query:M.query,hash:M.hash,params:ve.path!=null?{}:M.params},ve)}}function K(M,X){const z=u=C(M),te=c.value,ve=M.state,w=M.force,k=M.replace===!0,E=ee(z,te);if(E)return K(ye(b(E),{state:typeof E=="object"?ye({},ve,E.state):ve,force:w,replace:k}),X||z);const B=z;B.redirectedFrom=X;let F;return!w&&dv(n,te,z)&&(F=on(Re.NAVIGATION_DUPLICATED,{to:B,from:te}),j(te,te,!0,!1)),(F?Promise.resolve(F):de(B,te)).catch(U=>Wt(U)?Wt(U,Re.NAVIGATION_GUARD_REDIRECT)?U:ne(U):fe(U,B,te)).then(U=>{if(U){if(Wt(U,Re.NAVIGATION_GUARD_REDIRECT))return K(ye({replace:k},b(U.to),{state:typeof U.to=="object"?ye({},ve,U.to.state):ve,force:w}),X||B)}else U=we(B,te,!0,k,ve);return ue(B,te,U),U})}function q(M,X){const z=$(M,X);return z?Promise.reject(z):Promise.resolve()}function Y(M){const X=ct.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(M):M()}function de(M,X){let z;const[te,ve,w]=Av(M,X);z=Sr(te.reverse(),"beforeRouteLeave",M,X);for(const E of te)E.leaveGuards.forEach(B=>{z.push(is(B,M,X))});const k=q.bind(null,M,X);return z.push(k),Ze(z).then(()=>{z=[];for(const E of r.list())z.push(is(E,M,X));return z.push(k),Ze(z)}).then(()=>{z=Sr(ve,"beforeRouteUpdate",M,X);for(const E of ve)E.updateGuards.forEach(B=>{z.push(is(B,M,X))});return z.push(k),Ze(z)}).then(()=>{z=[];for(const E of w)if(E.beforeEnter)if(Rt(E.beforeEnter))for(const B of E.beforeEnter)z.push(is(B,M,X));else z.push(is(E.beforeEnter,M,X));return z.push(k),Ze(z)}).then(()=>(M.matched.forEach(E=>E.enterCallbacks={}),z=Sr(w,"beforeRouteEnter",M,X,Y),z.push(k),Ze(z))).then(()=>{z=[];for(const E of a.list())z.push(is(E,M,X));return z.push(k),Ze(z)}).catch(E=>Wt(E,Re.NAVIGATION_CANCELLED)?E:Promise.reject(E))}function ue(M,X,z){l.list().forEach(te=>Y(()=>te(M,X,z)))}function we(M,X,z,te,ve){const w=$(M,X);if(w)return w;const k=X===os,E=js?history.state:{};z&&(te||k?o.replace(M.fullPath,ye({scroll:k&&E&&E.scroll},ve)):o.push(M.fullPath,ve)),c.value=M,j(M,X,z,k),ne()}let Le;function je(){Le||(Le=o.listen((M,X,z)=>{if(!vt.listening)return;const te=C(M),ve=ee(te,vt.currentRoute.value);if(ve){K(ye(ve,{replace:!0,force:!0}),te).catch(Mn);return}u=te;const w=c.value;js&&bv($l(w.fullPath,z.delta),qo()),de(te,w).catch(k=>Wt(k,Re.NAVIGATION_ABORTED|Re.NAVIGATION_CANCELLED)?k:Wt(k,Re.NAVIGATION_GUARD_REDIRECT)?(K(ye(b(k.to),{force:!0}),te).then(E=>{Wt(E,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===jr.pop&&o.go(-1,!1)}).catch(Mn),Promise.reject()):(z.delta&&o.go(-z.delta,!1),fe(k,te,w))).then(k=>{k=k||we(te,w,!1),k&&(z.delta&&!Wt(k,Re.NAVIGATION_CANCELLED)?o.go(-z.delta,!1):z.type===jr.pop&&Wt(k,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ue(te,w,k)}).catch(Mn)}))}let Ge=wn(),ge=wn(),Q;function fe(M,X,z){ne(M);const te=ge.list();return te.length?te.forEach(ve=>ve(M,X,z)):console.error(M),Promise.reject(M)}function pe(){return Q&&c.value!==os?Promise.resolve():new Promise((M,X)=>{Ge.add([M,X])})}function ne(M){return Q||(Q=!M,je(),Ge.list().forEach(([X,z])=>M?z(M):X()),Ge.reset()),M}function j(M,X,z,te){const{scrollBehavior:ve}=e;if(!js||!ve)return Promise.resolve();const w=!z&&_v($l(M.fullPath,0))||(te||!z)&&history.state&&history.state.scroll||null;return Vn().then(()=>ve(M,X,w)).then(k=>k&&yv(k)).catch(k=>fe(k,M,X))}const se=M=>o.go(M);let ze;const ct=new Set,vt={currentRoute:c,listening:!0,addRoute:v,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:y,resolve:C,options:e,push:D,replace:V,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:r.add,beforeResolve:a.add,afterEach:l.add,onError:ge.add,isReady:pe,install(M){M.component("RouterLink",Yv),M.component("RouterView",Zv),M.config.globalProperties.$router=vt,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>R(c)}),js&&!ze&&c.value===os&&(ze=!0,D(o.location).catch(te=>{}));const X={};for(const te in os)Object.defineProperty(X,te,{get:()=>c.value[te],enumerable:!0});M.provide(Xo,vt),M.provide(_a,Si(X)),M.provide(Kr,c);const z=M.unmount;ct.add(M),M.unmount=function(){ct.delete(M),ct.size<1&&(u=os,Le&&Le(),Le=null,c.value=os,ze=!1,Q=!1),z()}}};function Ze(M){return M.reduce((X,z)=>X.then(()=>Y(z)),Promise.resolve())}return vt}function tm(){return Ot(Xo)}function Qx(e){return Ot(_a)}function Bl(e){const t=[],s=e.split(`
`);let n=null,o=[],r=!1,a="";for(let l=0;l<s.length;l++){const c=s[l];if(c.startsWith("%"))continue;if(r){c.includes("}")?(a+=c.substring(0,c.indexOf("}")),o.push(a.trim()),a="",r=!1):a+=c+`
`;continue}if(c.includes("{")){const f=c.indexOf("{");if(c.includes("}")){const p=c.indexOf("}");o.push(c.substring(f+1,p).trim())}else a=c.substring(f+1)+`
`,r=!0;continue}const u=c.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=c.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,p]=d;if(f==="Board")n&&(n.commentary=Fl(o),n.steps=Ul(o),n.auction=Ml(n.auction),t.push(n)),n=sm(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=nm(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const f=c.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const p=rm(f);n.auction.push(...p)}}}return n&&(n.commentary=Fl(o),n.steps=Ul(o),n.auction=Ml(n.auction),t.push(n)),t}function Ul(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let r="";for(let a=0;a<n.length;a++){const l=n[a],c=l.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(l),d=/^\[ROTATE\]$/i.test(l),f=l.match(/^\[choose-card\s+([^\]]+)\]$/i);if(c){const p=wa(c[1]).replace(/!/g,"").trim(),v=r.trim();r="";let m="";if(a+1<n.length){const C=n[a+1];C.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(m=C.trim(),a++)}const y=Sn(v,"bid"),N=Sn(m,"bid");o.push({...y,type:"bid",bid:p,explanationText:N.text,showSeatsAfter:N.showSeats})}else if(u||d){const p=u?"next":"rotate";r.trim()&&o.push(Sn(r.trim(),p)),r=""}else if(f){const p=f[1].trim();let v;if(p.toLowerCase().startsWith("any:")?v={cards:p.substring(4).split(",").map(y=>No(y.trim())),anyOf:!0}:v={card:No(p)},r.trim()){const m=Sn(r.trim(),"choose-card");m.chooseCard=v,o.push(m)}r=""}else r+=l}if(r.trim()){const a=Sn(r.trim(),"end");o.push(a)}return o}function Sn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const b=n[1].toUpperCase().trim();if(b==="ALL")s=["N","E","S","W"];else{const $=[];b.includes("N")&&$.push("N"),b.includes("E")&&$.push("E"),b.includes("S")&&$.push("S"),b.includes("W")&&$.push("W"),$.length>0&&(s=$)}}const o=[],r=/\[PLAY\s+([^\]]+)\]/gi;let a;for(;(a=r.exec(e))!==null;)o.push(a[1]);const l=/\[RESET\]/i.test(e);let c=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const b=u[1].trim();b.toLowerCase().startsWith("any:")?c={cards:b.substring(4).split(",").map(D=>No(D.trim())),anyOf:!0}:c={card:No(b)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),p&&(d=!0);const v=/\[SHOW_LEAD\]/i.test(e),m=/\[clear-commentary\]/i.test(e);let y=null;const N=e.match(/\[showcards\s+([^\]]+)\]/i);if(N){const b=N[1].trim();y={};const $=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let D;for(;(D=$.exec(b))!==null;){const V=D[1].toUpperCase(),ee=D[2].split(",").map(K=>K.trim().toUpperCase());y[V]=ee}Object.keys(y).length===0&&(y=null)}let C=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:wa(C),type:t,showSeats:s,plays:o,reset:l,showAuction:d,showLead:v,clearCommentary:m,showcards:y,chooseCard:c}}function sm(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function No(e){return e.toUpperCase().replace("10","T")}function nm(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const r=s[0],a=r.indexOf(":");if(a!==-1){const l=r.charAt(0).toUpperCase();o=n.indexOf(l),s[0]=r.substring(a+1)}for(let l=0;l<4;l++){const c=(o+l)%4,u=n[c];t[u]=om(s[l])}return t}function om(e){const t=e.split(".");return t.length!==4?null:{spades:uo(t[0]),hearts:uo(t[1]),diamonds:uo(t[2]),clubs:uo(t[3])}}function uo(e){return e?e.split(""):[]}function Ml(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function rm(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>am(t))}function am(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Fl(e){return e.length?wa(e.join(`

`)):""}function wa(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function lm(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function fo(e,t){return lm(t)[e%4]}const Sa={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},jl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},wc=["spades","hearts","diamonds","clubs"];function Cr(e){return e==="T"?"10":e}function Ca(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const r=Sa[o],a=o==="H"||o==="D"?"red":"black";return{text:`${n}${r}`,html:`${n}<span class="${a}">${r}</span>`}}return{text:e,html:e}}function im(e){return(jl[e.toLowerCase()]||jl[e])==="red"?"suit-red":"suit-black"}function cm(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Vr(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function um(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of wc)for(const o of e[n]||[])s+=t[o]||0;return s}function dm(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Sa[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Cn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function fm(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Hs(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function vm({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:r,studentBid:a,correct:l,attemptNumber:c,timeTakenMs:u,skillPath:d,assignment:f=null}){var y,N,C,b,$,D,V,ee,K,q,Y;const p=((y=s.steps)==null?void 0:y.filter(de=>de.type==="bid").length)||1,v=s.studentSeat||"S",m=((N=s.hands)==null?void 0:N[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:((C=s.hands)==null?void 0:C.N)||((b=s.hands)==null?void 0:b.north)||"",east:(($=s.hands)==null?void 0:$.E)||((D=s.hands)==null?void 0:D.east)||"",south:((V=s.hands)==null?void 0:V.S)||((ee=s.hands)==null?void 0:ee.south)||"",west:((K=s.hands)==null?void 0:K.W)||((q=s.hands)==null?void 0:q.west)||""},full_auction:((Y=s.auction)==null?void 0:Y.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:r,student_hand:m},result:{student_bid:a,correct:l,attempt_number:c,time_taken_ms:u},skill_path:d,assignment:f}}function Sc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function mm(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function pm(){return crypto.randomUUID()}function hm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Qo(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=r=>r.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function gm(e){const[t]=e.split("/");return t||"uncategorized"}function ym(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Cc={name:"AES-GCM",length:256},$a={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function bm(){const e=await crypto.subtle.generateKey(Cc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Ts(t)}async function $c(e){const t=Is(e);return crypto.subtle.importKey("raw",t,Cc,!0,["encrypt","decrypt"])}async function ka(e,t){const s=await $c(t),n=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(JSON.stringify(e)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{encrypted_data:Ts(a),iv:Ts(n)}}async function xa(e,t,s){const n=await $c(s),o=Is(e),r=Is(t),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,o),l=new TextDecoder;return JSON.parse(l.decode(a))}async function _m(e){const t=Is(e);return crypto.subtle.importKey("spki",t,$a,!0,["encrypt"])}async function kc(e){const t=Is(e);return crypto.subtle.importKey("pkcs8",t,$a,!0,["decrypt"])}async function wm(){const e=await crypto.subtle.generateKey($a,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Ts(t),privateKey:Ts(s)}}async function xc(e,t){const s=await _m(t),n=Is(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Ts(o)}async function Sm(e,t){const s=await kc(t),n=Is(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Ts(o)}function Cm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function $m(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function km(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await ka(t,e);return(await xa(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Ts(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Is(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Wr="bridgePractice",Oe=T({}),Ve=T(null),vs=T(null),qn=T(!1),Zo=T(!1);function Ac(){try{const e=localStorage.getItem(Wr);if(e){const t=JSON.parse(e);Oe.value=t.users||{},Ve.value=t.currentUserId||null,vs.value=t.adminViewerId||null}qn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),qn.value=!0}}function Dt(){try{const e=localStorage.getItem(Wr),t=e?JSON.parse(e):{};t.users=Oe.value,t.currentUserId=Ve.value,vs.value&&(t.adminViewerId=vs.value),localStorage.setItem(Wr,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function xm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:r}){const a=crypto.randomUUID(),l=new Date().toISOString(),c=await bm();let u=null;if(r)try{const f=await fetch(`${r}/keys/admin`);if(f.ok){const p=await f.json();vs.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await xc(c,p.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:a,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:c,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:l,updatedAt:l};return Oe.value[a]=d,Ve.value=a,Dt(),Zo.value=!0,d}function Am(e,t){if(!Oe.value[e])return console.error("User not found:",e),null;const s=Oe.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Dt(),s}function Nm(e){if(!Oe.value[e])return!1;if(delete Oe.value[e],Ve.value===e){const t=Object.keys(Oe.value);Ve.value=t.length>0?t[0]:null}return Dt(),!0}function Om(e){return Oe.value[e]?(Ve.value=e,Dt(),!0):(console.error("User not found:",e),!1)}function Tm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Oe.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Im(e){const t=e.trim().toLowerCase();for(const s of Object.values(Oe.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function Em(e){return Oe.value[e]||null}function Rm(){Oe.value={},Ve.value=null,vs.value=null,Zo.value=!1,Dt(),qn.value=!1}function Dm(){qn.value||Ac()}async function Pm(e){const t=$m(e);if(!t.valid)return{success:!1,error:t.error};if(!await km(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Oe.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Ve.value=e.user_id,Dt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),r=o[0]||"Restored",a=o.slice(1).join(" ")||"User",l={id:e.user_id,firstName:r,lastName:a,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Oe.value[l.id]=l,Ve.value=l.id,Dt(),{success:!0,user:l}}function Lm(){const e=Oe.value[Ve.value];return!e||!e.secretKey?null:Cm(e)}function Bm(){Zo.value=!1}function Um(){return vs.value}function Mm(e){vs.value=e,Dt()}async function Fm(e){const t=Oe.value[Ve.value];return!t||!t.secretKey?null:xc(t.secretKey,e)}async function jm(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Hm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Oe.value[r.id]=r,Ve.value=r.id,Dt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Km(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Oe.value[r.id]=r,Ve.value=r.id,Dt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}function Ue(){const e=O(()=>Ve.value&&Oe.value[Ve.value]||null),t=O(()=>Object.values(Oe.value)),s=O(()=>Object.keys(Oe.value).length>0),n=O(()=>Object.keys(Oe.value).length),o=O(()=>Ve.value!==null&&!!Oe.value[Ve.value]);return{users:Oe,currentUserId:Ve,adminViewerId:vs,initialized:qn,showKeyBackupModal:Zo,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Dm,loadFromStorage:Ac,saveToStorage:Dt,createUser:xm,updateUser:Am,deleteUser:Nm,switchUser:Om,findUserByName:Tm,findUserByEmail:Im,getUser:Em,clearUsers:Rm,restoreFromBackup:Pm,getKeyBackup:Lm,dismissKeyBackupModal:Bm,getAdminViewerId:Um,setAdminViewerId:Mm,createGrantForViewer:Fm,requestRecovery:jm,claimRecovery:Hm,claimRecoveryByCode:Km}}const Gr="bridgePractice",Qe=T({}),Pe=T(null),$t=T(!1),rn=T(!1);function Nc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),r=e.get("classrooms");if(!t||!s)return null;const a=s.split(",").map(c=>c.trim()).filter(Boolean),l=r?r.split(",")[0].trim():null;return{name:t,lessons:a,dueDate:n||null,teacherName:o||null,classroom:l}}function Oc(){try{const e=localStorage.getItem(Gr);if(e){const t=JSON.parse(e);Qe.value=t.assignments||{},Pe.value=t.currentAssignmentId||null,Pe.value&&Qe.value[Pe.value]&&($t.value=!0)}rn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),rn.value=!0}}function Es(){try{const e=localStorage.getItem(Gr),t=e?JSON.parse(e):{};t.assignments=Qe.value,t.currentAssignmentId=Pe.value,localStorage.setItem(Gr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function Tc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const r=Object.values(Qe.value).find(u=>u.name===e);if(r){const u=new Set(r.lessons);for(const d of n)u.add(d);return r.lessons=Array.from(u),o&&(r.dueDate=o),r.updatedAt=new Date().toISOString(),Pe.value=r.id,$t.value=!0,Es(),r}const a=crypto.randomUUID(),l=new Date().toISOString(),c={id:a,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:l,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:l,updatedAt:l};return Qe.value[a]=c,Pe.value=a,$t.value=!0,Es(),c}function Vm(){if(rn.value)return;Oc();const e=Nc();e&&Tc(e),rn.value=!0}function Wm(e){if(!$t.value||!Pe.value)return!1;const t=Qe.value[Pe.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Gm(e){if(!Pe.value)return;const t=Qe.value[Pe.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Es())}function zm(e){if(!Pe.value||!$t.value)return!1;const t=Qe.value[Pe.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Es(),!0}function Jm(){if(!$t.value||!Pe.value)return null;const e=Qe.value[Pe.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Ym(){$t.value=!1}function qm(){Pe.value&&Qe.value[Pe.value]&&($t.value=!0)}function Xm(e){return Qe.value[e]||null}function Qm(){return Object.values(Qe.value)}function Zm(e){return Qe.value[e]?(delete Qe.value[e],Pe.value===e&&(Pe.value=null,$t.value=!1),Es(),!0):!1}function ep(){Qe.value={},Pe.value=null,$t.value=!1,rn.value=!1,Es()}function er(){const e=O(()=>Pe.value&&Qe.value[Pe.value]||null),t=O(()=>$t.value&&e.value!==null),s=O(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=O(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Qe,currentAssignmentId:Pe,inAssignmentMode:$t,initialized:rn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Vm,loadFromStorage:Oc,saveToStorage:Es,createAssignment:Tc,isLessonInAssignment:Wm,setTotalDeals:Gm,recordDealCompletion:zm,getAssignmentTag:Jm,exitAssignmentMode:Ym,returnToAssignmentMode:qm,getAssignment:Xm,getAllAssignments:Qm,deleteAssignment:Zm,clearAssignments:ep,parseAssignmentFromUrl:Nc}}const zr="bridgePractice",qe=T([]),an=T(null),ln=T(!1),Ns=T({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Ic(){try{const e=localStorage.getItem(zr);if(e){const t=JSON.parse(e);qe.value=t.pendingObservations||[]}ln.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),ln.value=!0}}function Ds(){try{const e=localStorage.getItem(zr),t=e?JSON.parse(e):{};t.pendingObservations=qe.value,localStorage.setItem(zr,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Ec(){ln.value||Ic(),an.value||Rc()}function Rc(){an.value=pm(),Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function tp({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:l}){var y,N;const c=Ue(),u=er();ln.value||Ec();const d=c.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const C=e.subfolder||e.category||"Unknown";f=hm(C)}const p=u.getAssignmentTag(),v=vm({userId:d.id,sessionId:an.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:l,skillPath:f,assignment:p}),m=mm(v);if(!m.valid)return console.error("Invalid observation:",m.errors),{success:!1,error:m.errors.join(", ")};if(Ns.value.totalObservations++,r?Ns.value.correctCount++:Ns.value.wrongCount++,d.dataConsent&&d.secretKey){const C=await sp(v,d);C.success||(console.warn("Failed to encrypt observation, storing unencrypted:",C.error),Hl(v,((y=d.classrooms)==null?void 0:y[0])||null))}else Hl(v,((N=d.classrooms)==null?void 0:N[0])||null);return{success:!0,observation:v}}async function sp(e,t){var s;try{const{encrypted_data:n,iv:o}=await ka(e,t.secretKey),r=((s=t.classrooms)==null?void 0:s[0])||null,a=Sc(e,r);return qe.value.push({encrypted_data:n,iv:o,metadata:a,encrypted:!0,queuedAt:new Date().toISOString()}),Ds(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Hl(e,t){const s=Sc(e,t);qe.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ds()}async function np(){const t=Ue().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<qe.value.length;n++){const o=qe.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:r,iv:a}=await ka(o.observation,t.secretKey);qe.value[n]={encrypted_data:r,iv:a,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(r){console.error("Failed to encrypt observation:",r)}}return s>0&&Ds(),s}function op(){return qe.value.length}function rp(){return[...qe.value]}function ap(e){qe.value=qe.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ds()}function lp(){qe.value=[],Ds()}function ip(){return{...Ns.value}}function cp(){qe.value=[],an.value=null,Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},ln.value=!1,Ds()}function ps(){const e=O(()=>qe.value.length),t=O(()=>qe.value.length>0),s=O(()=>qe.value.some(o=>!o.encrypted)),n=O(()=>an.value);return{pendingObservations:qe,sessionId:an,sessionStats:Ns,initialized:ln,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Ec,startNewSession:Rc,recordObservation:tp,encryptPendingObservations:np,getPendingCount:op,getPendingObservations:rp,removeSyncedObservations:ap,clearPendingObservations:lp,getSessionStats:ip,reset:cp,loadFromStorage:Ic,saveToStorage:Ds}}function up(){const e=ps(),t=T(null),s=T(0),n=T(!1),o=T(!1),r=jt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),a=jt({answered:{},wrongCard:null,correctCard:null}),l=jt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),c=T({N:[],E:[],S:[],W:[]}),u=T(null),d=T(1),f=O(()=>{var A;return((A=t.value)==null?void 0:A.steps)||[]}),p=O(()=>f.value.length>0),v=O(()=>f.value[s.value]||null),m=O(()=>f.value.some(A=>A.type==="bid")),y=O(()=>{var A;return((A=v.value)==null?void 0:A.type)==="bid"}),N=O(()=>{var A;for(let _=s.value;_>=0;_--)if((A=f.value[_])!=null&&A.clearCommentary)return _;return 0}),C=O(()=>{var A;return((A=t.value)==null?void 0:A.studentSeat)||"S"}),b=O(()=>t.value?fo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),$=O(()=>b.value===C.value),D=O(()=>{var x,I;if(!y.value||!$.value||r.auctionComplete||o.value)return!1;const A=v.value;if(!(A!=null&&A.bid))return!1;const _=(I=(x=t.value)==null?void 0:x.auction)==null?void 0:I[r.currentBidIndex];return _?W(A.bid)===W(_):!1}),V=O(()=>{for(let A=r.displayedBids.length-1;A>=0;A--){const _=r.displayedBids[A];if(_&&_!=="Pass"&&_!=="X"&&_!=="XX")return _}return null}),ee=O(()=>{if(!t.value||r.displayedBids.length===0)return!1;const A=r.displayedBids[r.displayedBids.length-1];if(A==="X"||A==="XX"||!V.value)return!1;let _=-1;for(let H=r.displayedBids.length-1;H>=0;H--){const J=r.displayedBids[H];if(J&&J!=="Pass"&&J!=="X"&&J!=="XX"){_=H;break}}if(_===-1)return!1;const x=fo(_,t.value.auctionDealer||t.value.dealer),I=b.value;return(I==="N"||I==="S")&&(x==="E"||x==="W")||(I==="E"||I==="W")&&(x==="N"||x==="S")}),K=O(()=>{if(!t.value||r.displayedBids.length===0)return!1;for(let A=r.displayedBids.length-1;A>=0;A--){const _=r.displayedBids[A];if(_!=="Pass"){if(_==="XX")return!1;if(_==="X"){const x=fo(A,t.value.auctionDealer||t.value.dealer),I=b.value;return!(I==="N"&&x==="S"||I==="S"&&x==="N"||I==="E"&&x==="W"||I==="W"&&x==="E")}return!1}}return!1}),q=O(()=>{const A=v.value;return A!=null&&A.chooseCard?!a.answered[s.value]:!1}),Y=O(()=>{var A;return((A=v.value)==null?void 0:A.chooseCard)||null}),de=O(()=>{if(!t.value)return[];const A=["N","E","S","W"];if(!p.value)return[];let _=null;const x=f.value;for(let I=0;I<=s.value&&I<x.length;I++){const L=x[I];L!=null&&L.showSeats&&(_=L.showSeats),L!=null&&L.showSeatsAfter&&(I<s.value||I===s.value&&o.value)&&(_=L.showSeatsAfter)}return _?A.filter(I=>!_.includes(I)):A}),ue=O(()=>{if(!t.value||!p.value)return null;let A={};const _=f.value;for(let x=0;x<=s.value&&x<_.length;x++){const I=_[x];if(I!=null&&I.showcards)for(const[L,H]of Object.entries(I.showcards))A[L]=H;if(I!=null&&I.showSeats)for(const L of I.showSeats)delete A[L];if(I!=null&&I.showSeatsAfter&&(x<s.value||x===s.value&&o.value))for(const L of I.showSeatsAfter)delete A[L]}return Object.keys(A).length>0?A:null}),we=O(()=>{if(!t.value||!p.value)return{};let A={},_=new Set;const x=f.value;for(let L=0;L<=s.value&&L<x.length;L++){const H=x[L];if(H!=null&&H.showcards)for(const[J,re]of Object.entries(H.showcards))A[J]=re;if(H!=null&&H.showSeats)for(const J of H.showSeats)_.add(J)}const I={};for(const[L,H]of Object.entries(A))_.has(L)&&(I[L]=H);return I}),Le=O(()=>{const A=ue.value;return A?Object.keys(A):[]}),je=O(()=>{const A=de.value,_=Le.value;return _.length?A.filter(x=>!_.includes(x)):A});function Ge(A){const _={spades:[],hearts:[],diamonds:[],clubs:[]},x={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const I of A){const L=I[0].toUpperCase(),H=I.slice(1).toUpperCase(),J=x[L];J&&_[J].push(H)}return _}const ge=O(()=>{var x,I;if(!((x=t.value)!=null&&x.hands))return{};if((I=v.value)!=null&&I.reset)return t.value.hands;const A=ue.value,_={};for(const L of["N","E","S","W"]){if(A&&A[L]){_[L]=Ge(A[L]);continue}const H=t.value.hands[L];if(!H){_[L]=null;continue}_[L]={spades:[...H.spades||[]],hearts:[...H.hearts||[]],diamonds:[...H.diamonds||[]],clubs:[...H.clubs||[]]};for(const J of c.value[L]){const re={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[J.suit];if(re&&_[L][re]){const ae=_[L][re].indexOf(J.card);ae!==-1&&_[L][re].splice(ae,1)}}}return _}),Q=O(()=>!(m.value&&!r.auctionComplete)),fe=O(()=>{if(!p.value)return!0;let A=!0;const _=f.value;for(let x=0;x<=s.value&&x<_.length;x++){const I=_[x];(I==null?void 0:I.showAuction)!==null&&(I==null?void 0:I.showAuction)!==void 0&&(A=I.showAuction)}return A}),pe=O(()=>{var _;if(!p.value)return!1;const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++)if((_=A[x])!=null&&_.showLead)return!0;return!1}),ne=O(()=>{var A;return(A=t.value)!=null&&A.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),j=O(()=>{if(!p.value||n.value)return!0;const A=v.value;return(A==null?void 0:A.type)==="end"&&!q.value}),se=O(()=>p.value?!!(o.value||s.value>0||y.value&&r.currentBidIndex>0):!1);function ze(){var _;c.value={N:[],E:[],S:[],W:[]};const A=f.value;for(let x=0;x<=s.value&&x<A.length;x++){const I=A[x];if((_=I==null?void 0:I.plays)!=null&&_.length)for(const L of I.plays){const H=L.split(/[,\s]+/);for(const J of H){if(!J)continue;const re=J.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(re){const ae=re[1].toUpperCase(),Te=re[2].toUpperCase();let Ae=re[3].toUpperCase();Ae==="10"&&(Ae="T"),c.value[ae].push({suit:Te,card:Ae})}}}}}function ct(){if(!t.value)return;const A=t.value.auction||[],_=vt(s.value);if(_===-1){for(;r.currentBidIndex<A.length;)r.displayedBids.push(A[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0,u.value=null;return}const x=f.value[_],I=W(x.bid);for(;r.currentBidIndex<A.length;){const L=fo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer),H=W(A[r.currentBidIndex]);if(L===C.value&&H===I){u.value=Date.now(),d.value=1;return}r.displayedBids.push(A[r.currentBidIndex]),r.currentBidIndex++}r.auctionComplete=!0,u.value=null}function vt(A){const _=f.value;for(let x=A;x<_.length;x++)if(_[x].type==="bid")return x;return-1}function Ze(A){if(!t.value||r.auctionComplete||!y.value)return!1;const _=t.value.auction[r.currentBidIndex],x=W(A)===W(_),I=s.value;x?I in l.wrongStepIndices&&(delete l.wrongStepIndices[I],F(!0)):(F(!1),l.wrongStepIndices[I]=!0,l.boardHadWrong=!0);const L=r.currentBidIndex;r.displayedBids.push(t.value.auction[r.currentBidIndex]),r.currentBidIndex++,u.value=null,d.value=1,x?(r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1):(r.wrongBid=A,r.correctBid=_,r.wrongBidIndex=L);const H=s.value+1,J=f.value[H];return(J==null?void 0:J.type)==="bid"?(s.value=H,o.value=!1,ct()):(o.value=!0,M(),s.value>=f.value.length-1&&w()),x}function M(){var _;if(r.auctionComplete)return;if(vt(s.value+1)===-1){const x=((_=t.value)==null?void 0:_.auction)||[];for(;r.currentBidIndex<x.length;)r.displayedBids.push(x[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0}}function X(){r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1}function z(A,_){if(!t.value||!q.value)return!1;const x=Y.value;if(!x)return!1;const I=(A+_).toUpperCase(),L=s.value;let H=!1,J="";return x.anyOf?(H=x.cards.includes(I),J=x.cards[0]):(H=I===x.card,J=x.card),H?L in l.wrongStepIndices&&(delete l.wrongStepIndices[L],F(!0)):(F(!1),l.wrongStepIndices[L]=!0,l.boardHadWrong=!0),a.answered[L]=!0,H?(a.wrongCard=null,a.correctCard=null):(a.wrongCard=I,a.correctCard=J),ve(),H}function te(){a.wrongCard=null,a.correctCard=null}function ve(){var A;if(D.value||q.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,ze(),((A=f.value[s.value])==null?void 0:A.type)==="bid"&&ct(),s.value>=f.value.length-1){const _=f.value[s.value];(_==null?void 0:_.type)!=="bid"&&(_==null?void 0:_.type)!=="choose-card"&&w()}return!0}return w(),!1}function w(){n.value=!0,k()}function k(){if(f.value.some(_=>_.type==="bid"||_.type==="choose-card"))if(l.boardHadWrong){l.wrongCount++;const _=Object.keys(l.wrongStepIndices).length===0;F(_)}else l.correctCount++,F(!0)}function E(){if(X(),te(),o.value)return o.value=!1,B(s.value),!0;if(s.value>0){const A=s.value-1,_=f.value[A];return a.answered[A]&&delete a.answered[A],(_==null?void 0:_.type)==="bid"&&B(A),s.value=A,n.value=!1,o.value=!1,ze(),!0}return!1}function B(A){var H;const _=f.value[A];if(!_||_.type!=="bid")return;const x=W(_.bid),I=((H=t.value)==null?void 0:H.auction)||[];let L=0;for(let J=0;J<I.length;J++)if(W(I[J])===x){L=J;break}r.currentBidIndex=L,r.displayedBids=I.slice(0,L),r.auctionComplete=!1,u.value=Date.now(),d.value=1}async function F(A){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...r.displayedBids],expectedBid:"BOARD",studentBid:A?"PASS":"FAIL",correct:A,attemptNumber:1,timeTakenMs:0})}catch(_){console.error("Failed to record board observation:",_)}}function U(A){var _,x;t.value=A,s.value=0,n.value=!1,o.value=!1,r.displayedBids=[],r.currentBidIndex=0,r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1,r.auctionComplete=!1,a.answered={},a.wrongCard=null,a.correctCard=null,l.boardHadWrong=!1,l.wrongStepIndices={},c.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(_=A==null?void 0:A.steps)!=null&&_.length&&(ze(),((x=A.steps[0])==null?void 0:x.type)==="bid"&&ct())}function G(){l.correctCount=0,l.wrongCount=0}function W(A){if(!A)return"";const x=A.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return x==="PASS"||x==="P"?"PASS":x==="X"||x==="DBL"||x==="DOUBLE"?"X":x==="XX"||x==="RDBL"||x==="REDOUBLE"?"XX":x.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:r,cardChoiceState:a,boardState:l,steps:f,hasSteps:p,currentStep:v,hasBidSteps:m,isBidStep:y,commentaryStartIndex:N,studentSeat:C,currentTurnSeat:b,isStudentTurn:$,hasBidPrompt:D,lastContractBid:V,canDouble:ee,canRedouble:K,canGoBack:se,hasCardChoice:q,currentChooseCard:Y,hiddenSeats:je,hands:ge,showHcp:Q,showcardsPlayedCards:we,isComplete:j,showAuctionTable:fe,showOpeningLead:pe,openingLead:ne,advance:ve,makeBid:Ze,clearFeedback:X,goBack:E,makeCardChoice:z,clearCardFeedback:te,loadDeal:U,resetStats:G,observationStore:e}}const Oo="bridgePractice",Dc="bridgePracticeUIPrefs",et=T({teacherName:null,availableClassrooms:[],configuredAt:null}),cn=T({showLoadPbnOption:!1}),To=T(!1);function Pc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Lc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(r=>({id:r.trim(),name:Pc(r.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function dp(){return new URLSearchParams(window.location.search).get("collection")}function fp(){return new URLSearchParams(window.location.search).get("lesson")}function vp(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function mp(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function pp(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function hp(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const gp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Bc(){try{const e=localStorage.getItem(Oo);if(e){const t=JSON.parse(e);t.appConfig&&(et.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function yp(){try{const e=localStorage.getItem(Dc);if(e){const t=JSON.parse(e);cn.value={...cn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function bp(){try{localStorage.setItem(Dc,JSON.stringify(cn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function _p(e,t){cn.value[e]=t,bp()}function Aa(){try{const e=localStorage.getItem(Oo),t=e?JSON.parse(e):{};t.appConfig=et.value,localStorage.setItem(Oo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Uc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function wp(){if(To.value)return;Bc(),yp();const{teacher:e,classrooms:t}=Lc();(e||t.length>0)&&(e&&!et.value.teacherName&&(et.value.teacherName=e),t.length>0&&(et.value.availableClassrooms=Uc(et.value.availableClassrooms||[],t)),et.value.configuredAt||(et.value.configuredAt=new Date().toISOString()),Aa()),To.value=!0}function Sp(){try{const e=localStorage.getItem(Oo);return e?JSON.parse(e):null}catch{return null}}function Cp(){et.value={teacherName:null,availableClassrooms:[],configuredAt:null},Aa(),To.value=!1}function so(){const e=O(()=>et.value.availableClassrooms.length===0),t=O(()=>et.value.availableClassrooms.length>1),s=O(()=>et.value.availableClassrooms.length===1),n=O(()=>s.value?et.value.availableClassrooms[0]:null),o=O(()=>et.value.teacherName),r=O(()=>et.value.availableClassrooms),a=O(()=>cn.value.showLoadPbnOption);return{appConfig:et,initialized:To,uiPrefs:cn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:r,showLoadPbnOption:a,initializeFromUrl:wp,loadFromStorage:Bc,saveToStorage:Aa,clearConfig:Cp,getStorageData:Sp,getCollectionFromUrl:dp,setCollectionInUrl:vp,getLessonFromUrl:fp,setLessonInUrl:mp,getDealFromUrl:pp,setDealInUrl:hp,setUIPref:_p,COLLECTIONS:gp,parseUrlParams:Lc,classroomIdToName:Pc,mergeClassrooms:Uc}}const $p="https://api.bridge-classroom.com/api",kp="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Na=T([]),We=T([]),Io=T(!1),Eo=T(null),Fn=T(null),Ro=T(!1),xp=5*60*1e3;async function Ap(e){const t=await fetch(`${$p}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":kp}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Np(e,t){try{return{...await xa(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function Op(){return ps().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Mc(e=!1){const s=Ue().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=Op();if(!e&&Fn.value&&Date.now()-new Date(Fn.value).getTime()<xp&&We.value.length>0)return Tp(n),{success:!0,cached:!0};Io.value=!0,Eo.value=null;let o=[];try{const l=await Ap(s.id);if(Na.value=l,s.secretKey&&l.length>0){const c=l.map(d=>Np(d,s.secretKey));o=(await Promise.all(c)).filter(d=>d!==null)}}catch(l){console.error("Failed to fetch from server (will use local data):",l),n.length===0&&(Eo.value=l.message)}const r=new Set(o.map(l=>l.id)),a=n.filter(l=>!r.has(l.id));return We.value=[...o,...a],Fn.value=new Date().toISOString(),Io.value=!1,{success:!0,count:We.value.length}}function Tp(e){const t=new Set(We.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(We.value=[...We.value,...s])}async function Ip(){if(Ro.value)return;Ue().isAuthenticated.value&&await Mc(),Ro.value=!0}function Ep(){Na.value=[],We.value=[],Fn.value=null,Ro.value=!1}function Fc(){const e={};for(const t of We.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Kl(){const e={};for(const t of We.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Vl(){const e={};for(const t of We.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Wl(e=10){return[...We.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Gl(){const e=new Date().toISOString().split("T")[0];return We.value.filter(t=>t.timestamp.startsWith(e))}function zl(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return We.value.filter(n=>n.timestamp>=s)}function Rp(){const e=Fc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,r=new Date(t[0]);for(let a=1;a<t.length;a++){const l=new Date(t[a]);if(Math.round((r-l)/(24*60*60*1e3))===1)o++,r=l;else break}return o}function Oa(){const e=O(()=>We.value.length),t=O(()=>We.value.filter(v=>v.correct).length),s=O(()=>We.value.filter(v=>!v.correct).length),n=O(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=O(()=>{const v=Gl(),m=v.filter(N=>N.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),r=O(()=>{const v=zl(),m=v.filter(N=>N.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),a=O(()=>Rp()),l=O(()=>Kl()),c=O(()=>Vl()),u=O(()=>Wl(20)),d=O(()=>We.value.length>0),f=O(()=>Io.value),p=O(()=>Eo.value!==null);return{observations:Na,decryptedObservations:We,loading:Io,error:Eo,lastFetchedAt:Fn,initialized:Ro,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:r,streak:a,skillStats:l,sessions:c,recentObservations:u,hasData:d,isLoading:f,hasError:p,initialize:Ip,fetchProgress:Mc,clearCache:Ep,getObservationsByDate:Fc,getStatsBySkill:Kl,getSessions:Vl,getRecentObservations:Wl,getTodayObservations:Gl,getThisWeekObservations:zl}}const Ta="bridgeTeacher",Ia="bridgeTeacherSession",Dp="https://api.bridge-classroom.com/api",Pp="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",no=T(!1),Ea=T(null),Rs=T(null),tr=T(null),Ht=T(null),Jr=T(!1),jc=8*60*60*1e3;function Lp(e){let t=e.trim();return t.includes("-----BEGIN")&&(t=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,"")),t}async function Bp(e){try{const t=await fetch(`${Dp}/auth/teacher`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Pp},body:JSON.stringify({password:e})});return t.ok?{valid:!0}:t.status===401?{valid:!1,error:"Invalid password"}:{valid:!1,error:(await t.json().catch(()=>({}))).message||"Authentication failed"}}catch(t){return console.error("Password verification error:",t),{valid:!1,error:"Unable to connect to server"}}}async function Hc(e){try{return{valid:!0,key:await kc(e)}}catch(t){return console.error("Private key validation error:",t),{valid:!1,error:"Invalid private key format"}}}function Up(){try{const e=sessionStorage.getItem(Ia);if(e){const t=JSON.parse(e);if(t.expiry&&new Date(t.expiry)>new Date)return Ht.value=t.expiry,Rs.value=t.privateKeyBase64,tr.value=t.viewerId||null,!0}}catch(e){console.error("Failed to load session:",e)}return!1}function Ra(){try{const e={expiry:Ht.value,privateKeyBase64:Rs.value,viewerId:tr.value};sessionStorage.setItem(Ia,JSON.stringify(e))}catch(e){console.error("Failed to save session:",e)}}function Mp(){try{const e=localStorage.getItem(Ta);if(e)return JSON.parse(e).encryptedKey||null}catch(e){console.error("Failed to load remembered key:",e)}return null}function Fp(e){try{const t={encryptedKey:e};localStorage.setItem(Ta,JSON.stringify(t))}catch(t){console.error("Failed to save remembered key:",t)}}function jp(){localStorage.removeItem(Ta)}async function Hp(){if(!Jr.value){if(Up()&&Rs.value){const e=await Hc(Rs.value);e.valid&&(Ea.value=e.key,no.value=!0)}Jr.value=!0}}async function Kp(e,t,s=!1){const n=await Bp(e);if(!n.valid)return{success:!1,error:n.error};const o=Lp(t),r=await Hc(o);return r.valid?(Ea.value=r.key,Rs.value=o,Ht.value=new Date(Date.now()+jc).toISOString(),no.value=!0,Ra(),s&&Fp(o),{success:!0}):{success:!1,error:r.error}}function Vp(){no.value=!1,Ea.value=null,Rs.value=null,Ht.value=null,sessionStorage.removeItem(Ia)}function Wp(){return Rs.value}function Gp(){return tr.value}function zp(e){tr.value=e,Ra()}function Jp(){return Ht.value?new Date(Ht.value)>new Date:!1}function Yp(){no.value&&(Ht.value=new Date(Date.now()+jc).toISOString(),Ra())}function hs(){const e=O(()=>no.value),t=O(()=>{if(!Ht.value)return 0;const n=new Date(Ht.value).getTime()-Date.now();return Math.max(0,n)}),s=O(()=>!!Mp());return{isAuthenticated:e,sessionExpiry:Ht,initialized:Jr,sessionTimeRemaining:t,hasRememberedKey:s,initialize:Hp,login:Kp,logout:Vp,getPrivateKey:Wp,getViewerId:Gp,setViewerId:zp,isSessionValid:Jp,extendSession:Yp,clearRememberedKey:jp}}const Yr="https://api.bridge-classroom.com/api",qr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Xr=T(!1),Vs=T(null),qt=T(null),Xn=T([]),un=T([]),Da=T("lessons"),sr=T(!0),mn=T(!1),oo=T([]);function qp(e){mn.value=!0,oo.value=e}function Xp(){mn.value=!1,oo.value=[]}function ro(){return mn.value?oo.value:Xn.value}async function Kc(){var o;const e=Ue(),t=hs(),s=e.currentUser.value;if(!s){un.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isAuthenticated.value)try{const r=((o=t.getViewerId)==null?void 0:o.call(t))||null;if(r){const a=await fetch(`${Yr}/grants?grantee_id=${r}`,{headers:{"x-api-key":qr}});if(a.ok){const{grants:l}=await a.json(),c=await fetch(`${Yr}/users`,{headers:{"x-api-key":qr}});if(c.ok){const{users:u}=await c.json(),d=new Set(l.map(f=>f.grantor_id));for(const f of u)d.has(f.id)&&f.id!==s.id&&n.push({id:f.id,name:`${f.first_name} ${f.last_name}`,email:f.email,isSelf:!1})}}}}catch(r){console.error("Failed to fetch accessible users:",r)}un.value=n}async function Pa(e=!1){if(mn.value)return{success:!0};const t=Ue(),s=Oa(),n=t.currentUser.value;if(!n)return Vs.value="No authenticated user",{success:!1,error:Vs.value};Xr.value=!0,Vs.value=null;try{if(!qt.value||qt.value===n.id)qt.value=n.id,await s.fetchProgress(e),Xn.value=s.decryptedObservations.value;else{const o=await fetch(`${Yr}/observations?user_id=${qt.value}&limit=10000`,{headers:{"x-api-key":qr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const r=await o.json();Xn.value=r.observations||[]}return{success:!0}}catch(o){return Vs.value=o.message,{success:!1,error:o.message}}finally{Xr.value=!1}}async function Qp(e){qt.value=e,await Pa(!0)}const Qr=O(()=>{var n;const e=ro(),t={};for(const o of e){const r=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[r]||(t[r]={lesson:r,displayName:Gc(r),total:0,correct:0,incorrect:0,observations:[]}),t[r].total++,o.correct?t[r].correct++:t[r].incorrect++,t[r].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,r)=>o.displayName.localeCompare(r.displayName)),s}),Zr=O(()=>{const e=ro(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",r=gm(o),a=Qo(o);t[o]||(t[o]={skillPath:o,category:r,categoryName:ym(r).name,skillName:a.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const r=n.categoryName.localeCompare(o.categoryName);return r!==0?r:n.skillName.localeCompare(o.skillName)}),s}),Vc=O(()=>sr.value?Qr.value.filter(e=>e.total>0):Qr.value),Wc=O(()=>sr.value?Zr.value.filter(e=>e.total>0):Zr.value);function Gc(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Zp=O(()=>Da.value==="lessons"?Vc.value:Wc.value),eh=O(()=>un.value.length>1),th=O(()=>un.value.find(e=>e.id===qt.value)||null),sh=O(()=>ro().length>0),nh=O(()=>ro().length),oh=O(()=>{const e=ro();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function rh(){const t=Ue().currentUser.value;t&&(qt.value=t.id,await Kc(),await Pa())}function ah(){Xn.value=[],un.value=[],qt.value=null,Da.value="lessons",sr.value=!0,Vs.value=null,mn.value=!1,oo.value=[]}function Xt(){return{loading:Xr,error:Vs,selectedUserId:qt,observations:Xn,accessibleUsers:un,activeTab:Da,onlyWithObservations:sr,useTestData:mn,testObservations:oo,enableTestMode:qp,disableTestMode:Xp,lessonStats:Qr,taxonStats:Zr,filteredLessonStats:Vc,filteredTaxonStats:Wc,currentStats:Zp,canViewOtherUsers:eh,selectedUser:th,hasData:sh,totalObservations:nh,overallSuccessRate:oh,initialize:rh,loadAccomplishments:Pa,selectUser:Qp,fetchAccessibleUsers:Kc,reset:ah,formatLessonName:Gc}}const La="https://api.bridge-classroom.com/api",zc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ht=T("idle"),Jc=T(null),Ks=T(null),Ws=T(0),Gs=T(navigator.onLine),On=T(!1),Jl=5,lh=1e3,ih=6e4,ch=5e3;let Qs=null;function uh(e){const t=Math.min(lh*Math.pow(2,e),ih);return t+Math.random()*t*.25}async function Yc(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${La}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,error:`Server error: ${n.status} - ${r}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function qc(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(r=>({encrypted_data:r.encrypted_data,iv:r.iv,metadata:r.metadata}))},n=await fetch(`${La}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":zc},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${r}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function ao(){var n,o;const e=Ue(),t=ps();if(!navigator.onLine)return ht.value="offline",{success:!1,offline:!0};ht.value="syncing",Ks.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const r=e.currentUser.value;if(r&&!r.serverRegistered){const c=await Yc(r);if(c.success)e.updateUser(r.id,{serverRegistered:!0}),On.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(c.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),ht.value="error",Ks.value="Account already exists. Please use recovery.",On.value=!0,s;console.warn("User registration failed:",c.error),On.value=!0,Ks.value=`Registration failed: ${c.error}`}}const a=await t.encryptPendingObservations();a>0&&console.log(`Encrypted ${a} observations`);let l=!1;if(r!=null&&r.dataConsent){const c=t.getPendingObservations();if(c.length>0){const u=await qc(c);if(u.success&&u.synced>0){const d=c.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var p;return(p=f.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await Xt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(l=!0,Ks.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return On.value||l?ht.value="error":(ht.value="idle",Jc.value=new Date().toISOString(),Ws.value=0),s}catch(r){return console.error("Sync failed:",r),Ks.value=r.message,ht.value="error",s.success=!1,s}}function ea(){Qs&&clearTimeout(Qs),Qs=setTimeout(async()=>{await ao()},ch)}async function Xc(){return Qs&&(clearTimeout(Qs),Qs=null),await ao()}async function Qc(){if(Ws.value>=Jl){console.log("Max retries reached, giving up"),ht.value="error";return}const e=uh(Ws.value);Ws.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Ws.value}/${Jl})`),setTimeout(async()=>{const t=await ao();!t.success&&t.offline!==!0&&Qc()},e)}function dh(){var l;const e=Ue(),t=ps(),s=(l=e.currentUser)==null?void 0:l.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(c=>c.encrypted);if(o.length===0)return;const r={observations:o.map(c=>({encrypted_data:c.encrypted_data,iv:c.iv,metadata:c.metadata}))},a=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(`${La}/observations?api_key=${zc}`,a),console.log("Sent beacon with",o.length,"observations")}function fh(){window.addEventListener("online",()=>{Gs.value=!0,console.log("Back online, triggering sync"),Xc()}),window.addEventListener("offline",()=>{Gs.value=!1,ht.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Gs.value&&(console.log("Tab visible, triggering sync"),ea())}),window.addEventListener("beforeunload",dh),setInterval(()=>{document.visibilityState==="visible"&&Gs.value&&ea()},5*60*1e3)}async function vh(){fh(),navigator.onLine?await ao():ht.value="offline"}function Zc(){const e=O(()=>ht.value==="syncing"),t=O(()=>ht.value==="offline"||!Gs.value),s=O(()=>ht.value==="error"),n=O(()=>ps().pendingCount.value>0);return{syncState:ht,lastSyncAt:Jc,lastError:Ks,retryCount:Ws,isOnline:Gs,registrationFailed:On,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:vh,performSync:ao,triggerSync:ea,forceSync:Xc,retrySync:Qc,registerUserWithServer:Yc,syncObservationsToServer:qc}}const $s={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},pt={NONE:"none",SILVER:"silver",GOLD:"gold"},mh=6;function ph(e){return e.slice(0,10)}function eu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function tu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Yl=60*60*1e3;function su(e){if(e.length===0)return $s.GREY;const t=e[e.length-1];if(!t.correct)return $s.RED;const s=Date.now()-Yl;if(e.some(l=>!l.correct&&new Date(l.timestamp).getTime()>s))return $s.YELLOW;const o=e.filter(l=>!l.correct).pop();if(!o)return $s.GREEN;const r=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-r<=Yl?$s.ORANGE:$s.GREEN}function nu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function ou(e){if(e.length===0)return pt.NONE;const t=new Set;for(const a of e)t.add(ph(a.timestamp));const s=[...t].filter(a=>nu(e,a)).sort();if(s.length<2)return pt.NONE;let n=1,o=1,r=s[0];for(let a=1;a<s.length;a++)eu(r,s[a])>=mh&&(o++,r=s[a],o>n&&(n=o));return n>=3?pt.GOLD:n>=2?pt.SILVER:pt.NONE}function hh(e){const t=e.observations.value||[];let s=[];try{s=ps().getPendingObservations().filter(l=>l.metadata).map(l=>{const c=l.metadata;return{id:c.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:c.timestamp||l.queuedAt,skill_path:c.skill_path,correct:c.correct,deal_subfolder:c.deal_subfolder,deal_number:c.deal_number,session_id:c.session_id,_local:!0}})}catch{}const n=new Set(t.map(r=>r.id)),o=s.filter(r=>!n.has(r.id));return[...t,...o]}function gh(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var r;return(o.deal_subfolder||((r=o.deal)==null?void 0:r.subfolder))===t});return s.map(o=>{const r=n.filter(l=>{var c;return(l.deal_number??((c=l.deal)==null?void 0:c.deal_number))===o}).sort((l,c)=>l.timestamp.localeCompare(c.timestamp)),a=tu(r);return{boardNumber:o,status:su(r),achievement:ou(r),attemptCount:a.length,lastAttemptTime:r.length>0?r[r.length-1].timestamp:null}})}function yh(e){return!e||e.length===0?{achievement:pt.NONE}:e.every(n=>n.achievement===pt.GOLD)?{achievement:pt.GOLD}:e.every(n=>n.achievement===pt.SILVER||n.achievement===pt.GOLD)?{achievement:pt.SILVER}:{achievement:pt.NONE}}const ru="bridgeLessonBoards",Qn=T(bh()),$r=new Set;function bh(){try{const e=localStorage.getItem(ru);return e?JSON.parse(e):{}}catch{return{}}}function _h(){try{localStorage.setItem(ru,JSON.stringify(Qn.value))}catch{}}function au(e,t){Qn.value={...Qn.value,[e]:t},_h()}function wh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,r)=>o-r)}async function Sh(e){const t=so(),s=e.filter(n=>!Qn.value[n]&&!$r.has(n));if(s.length!==0){for(const n of s)$r.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const r=n.includes("/")?n.split("/").pop():n,a=`${o.baseUrl}/${r}.pbn`;try{const l=await fetch(a);if(!l.ok)continue;const c=await l.text(),u=wh(c);if(u.length>0){au(n,u);break}}catch{continue}}}finally{$r.delete(n)}}))}}function Ch(e){var n,o;const t=Qn.value,s={};for(const r of e){const a=r.deal_subfolder||((n=r.deal)==null?void 0:n.subfolder),l=r.deal_number??((o=r.deal)==null?void 0:o.deal_number);!a||l==null||(s[a]||(s[a]={boards:new Set,lastActivity:r.timestamp}),s[a].boards.add(l),r.timestamp>s[a].lastActivity&&(s[a].lastActivity=r.timestamp))}return Object.entries(s).map(([r,a])=>{const l=t[r];if(l)return{subfolder:r,boardNumbers:l,lastActivity:a.lastActivity};const c=Math.max(...a.boards),u=[];for(let d=1;d<=c;d++)u.push(d);return{subfolder:r,boardNumbers:u,lastActivity:a.lastActivity}})}function pn(){const e=Xt();function t(){return hh(e)}return{STATUS:$s,ACHIEVEMENT:pt,getObservations:t,computeBoardMastery:gh,computeLessonAchievement:yh,extractLessonsFromObservations:Ch,saveLessonBoardNumbers:au,fetchMissingBoardCounts:Sh,groupIntoBoardAttempts:tu,calculateCurrentStatus:su,calculateAchievement:ou,hasGreenDay:nu,daysBetween:eu}}const Tn="https://api.bridge-classroom.com/api",In="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Do=T(!1),Ba=T(null),nr=T([]),us=T({}),Po=T(!1),Lo=T(null),Ua=T(!1),Bo={},$h=2*60*1e3;async function kh(){var s;const e=Ue(),t=e.currentUser.value;if(!t||!t.email){Do.value=!1;return}try{const n=await fetch(`${Tn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":In}});if(!n.ok)return;const o=await n.json(),r=Array.isArray(o)?o[0]:null;if(!r)return;Ba.value=r.id;const a=await fetch(`${Tn}/grants?grantee_id=${r.id}`,{headers:{"x-api-key":In}});if(!a.ok)return;const c=(await a.json()).grants||[],u=new Set(c.filter(m=>m.grantor_id!==t.id).map(m=>m.grantor_id));if(u.size===0)return;const d=await fetch(`${Tn}/users`,{headers:{"x-api-key":In}});if(!d.ok)return;const p=(await d.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(nr.value=p.filter(m=>{var y;return u.has(m.id)&&m.id!==t.id&&((y=m.email)==null?void 0:y.toLowerCase())!==v}).sort((m,y)=>`${m.first_name} ${m.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Do.value=!0,Ua.value=!0,t.role!=="teacher"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Tn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":In},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function lu(e){const t=us.value[e],s=Bo[e];if(t&&s&&Date.now()-s<$h)return t;try{const n=await fetch(`${Tn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":In}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=((await n.json()).observations||[]).map(a=>({id:a.id||a.observation_id,timestamp:a.timestamp,skill_path:a.skill_path,correct:a.correct,deal_subfolder:a.deal_subfolder,deal_number:a.deal_number}));return us.value={...us.value,[e]:r},Bo[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function xh(){Po.value=!0,Lo.value=null;try{await Promise.allSettled(nr.value.map(s=>lu(s.id)));const e=pn(),t=new Set;for(const s of Object.values(us.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Lo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Po.value=!1}}function Ah(e){const t=us.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=pn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const a of n){const l=s.computeBoardMastery(t,a.subfolder,a.boardNumbers);for(const c of l)o[c.status]=(o[c.status]||0)+1}let r=null;for(const a of t)(!r||a.timestamp>r)&&(r=a.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:r}}function Nh(e,t=3){const s=us.value[e]||[],n=Xt(),o={};for(const r of s){const a=r.deal_subfolder;a&&(!o[a]||r.timestamp>o[a])&&(o[a]=r.timestamp)}return Object.entries(o).sort(([,r],[,a])=>a.localeCompare(r)).slice(0,t).map(([r])=>n.formatLessonName(r))}function Oh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),r=Math.floor(n/36e5),a=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:s.toLocaleDateString()}function Th(){Do.value=!1,Ba.value=null,nr.value=[],us.value={},Po.value=!1,Lo.value=null,Ua.value=!1;for(const e of Object.keys(Bo))delete Bo[e]}function or(){return{isTeacher:Do,viewerId:Ba,students:nr,studentObservations:us,loading:Po,error:Lo,initialized:Ua,checkTeacherStatus:kh,fetchStudentObservations:lu,loadAllStudentSummaries:xh,getStudentMasterySummary:Ah,getStudentRecentLessons:Nh,formatTimeSince:Oh,reset:Th}}const Ih={key:0,class:"minimal-hand"},Eh={class:"seat-label-inline"},Rh={class:"seat-label"},Dh={key:0,class:"suits"},Ph={key:0,class:"suit-row"},Lh={key:0,class:"cards clickable-cards"},Bh=["onClick"],Uh={key:1,class:"cards"},Mh={key:2,class:"cards"},Fh={key:1,class:"hidden-hand"},jh={key:2,class:"hcp"},Hh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=wc,n=O(()=>Vr(t.seat)),o=O(()=>um(t.hand)),r=O(()=>t.hand?s.reduce((N,C)=>{var b;return N+(((b=t.hand[C])==null?void 0:b.length)||0)},0):0),a=O(()=>r.value>0&&r.value<5);function l(N){return t.hand&&t.hand[N]&&t.hand[N].length>0}function c(N){return Sa[N]}function u(N){return im(N)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(N){return d[N]||N}function p(N){if(!t.hand||!t.hand[N])return"";const C=t.hand[N];return C.length===0?"":C.map(Cr).join(" ")}const v=O(()=>t.playedCards&&t.playedCards.length>0),m=O(()=>{if(!t.playedCards)return null;const N=new Set;for(const C of t.playedCards){const b=C[0].toUpperCase(),$=C.slice(1).toUpperCase(),D={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[b];D&&N.add(`${D}:${$}`)}return N});function y(N,C){return m.value?m.value.has(`${N}:${C}`):!1}return(N,C)=>(h(),g("div",{class:oe(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(h(),g("div",Ih,[i("span",Eh,S(e.seat),1),(h(!0),g(Z,null,ie(R(s),b=>(h(),g("span",{key:b,class:oe(["suit-symbol-inline",u(b)])},S(c(b)),3))),128))])):(h(),g(Z,{key:1},[i("div",Rh,S(n.value),1),!e.hidden&&e.hand?(h(),g("div",Dh,[(h(!0),g(Z,null,ie(R(s),b=>(h(),g(Z,{key:b},[!a.value||l(b)?(h(),g("div",Ph,[i("span",{class:oe(["suit-symbol",u(b)])},S(c(b)),3),e.clickable?(h(),g("span",Lh,[(h(!0),g(Z,null,ie(e.hand[b],$=>(h(),g("span",{key:$,class:oe(y(b,$)?"card-played":"card-clickable"),onClick:D=>!y(b,$)&&N.$emit("card-click",{suit:f(b),rank:$})},S(R(Cr)($)),11,Bh))),128))])):v.value?(h(),g("span",Uh,[(h(!0),g(Z,null,ie(e.hand[b],$=>(h(),g("span",{key:$,class:oe({"card-played":y(b,$)})},S(R(Cr)($)),3))),128))])):(h(),g("span",Mh,S(p(b)),1))])):P("",!0)],64))),128))])):e.hidden?(h(),g("div",Fh,[...C[0]||(C[0]=[i("div",{class:"card-back"},null,-1)])])):P("",!0),e.showHcp&&e.hand&&!e.hidden&&!a.value?(h(),g("div",jh,S(o.value)+" HCP ",1)):P("",!0)],64))],2))}},vo=me(Hh,[["__scopeId","data-v-128fc7ed"]]),Kh={class:"ns-column north-row"},Vh={key:0,class:"position north"},Wh={key:0,class:"position west"},Gh={class:"center"},zh={key:1,class:"position east"},Jh={class:"ns-column south-row"},Yh={key:0,class:"position south"},qh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,r,a;return h(),g("div",{class:oe(["bridge-table",{compact:e.compact}])},[i("div",Kh,[!e.hiddenSeats.includes("N")&&e.hands.N?(h(),g("div",Vh,[he(vo,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=l=>t.$emit("card-click",{seat:"N",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(h(),g("div",Wh,[he(vo,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=l=>t.$emit("card-click",{seat:"W",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0),i("div",Gh,[kd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(h(),g("div",zh,[he(vo,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(r=e.playedCards)==null?void 0:r.E,onCardClick:s[2]||(s[2]=l=>t.$emit("card-click",{seat:"E",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0),i("div",Jh,[!e.hiddenSeats.includes("S")&&e.hands.S?(h(),g("div",Yh,[he(vo,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(a=e.playedCards)==null?void 0:a.S,onCardClick:s[3]||(s[3]=l=>t.$emit("card-click",{seat:"S",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0)])],2)}}},Xh=me(qh,[["__scopeId","data-v-ec6230a9"]]),Qh={class:"bidding-box"},Zh={class:"bid-section"},eg={class:"levels"},tg=["onClick"],sg={class:"strains"},ng=["disabled","onClick"],og=["innerHTML"],rg={class:"special-bids"},ag=["disabled"],lg=["disabled"],ig={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=T(1),r=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],a=O(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),l=O(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const v=p[1].toUpperCase();return f.indexOf(v==="N"?"NT":v)});function c(f){o.value=f}function u(f,p){if(!f)return!1;const m=["C","D","H","S","NT"].indexOf(p);return f>a.value||f===a.value&&m>l.value}function d(f,p){u(f,p)&&n("bid",`${f}${p}`)}return(f,p)=>(h(),g("div",Qh,[i("div",Zh,[i("div",eg,[(h(),g(Z,null,ie(7,v=>i("button",{key:v,class:oe(["level-btn",{active:o.value===v}]),onClick:m=>c(v)},S(v),11,tg)),64))]),i("div",sg,[(h(),g(Z,null,ie(r,v=>i("button",{key:v.value,class:oe(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:m=>d(o.value,v.value)},[i("span",{innerHTML:v.display},null,8,og)],10,ng)),64))])]),i("div",rg,[i("button",{class:"special-btn pass",onClick:p[0]||(p[0]=v=>f.$emit("bid","Pass"))}," Pass "),i("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=v=>f.$emit("bid","X"))}," Double ",8,ag),i("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=v=>f.$emit("bid","XX"))}," Redouble ",8,lg)])]))}},cg=me(ig,[["__scopeId","data-v-38ccb98f"]]),ug={class:"auction-table"},dg={class:"rounds"},fg=["innerHTML"],vg={key:1,class:"turn-indicator"},mg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=O(()=>["W","N","E","S"].indexOf(t.dealer)),n=O(()=>{const u=[],d=t.bids;let f=0,p=0;for(;f<d.length||p===0&&d.length>0;){const v=[null,null,null,null],m=p===0?s.value:0;for(let y=m;y<4&&f<d.length;y++)v[y]=d[f],f++;if(v.some(y=>y!==null)&&u.push(v),p++,p>20)break}if(t.currentBidIndex>=d.length){const v=u[u.length-1],m=v?v.filter(y=>y!==null).length:0;if(u.length===1&&s.value,m===4||u.length>1&&m===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function r(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function a(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function l(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function c(u){return Ca(u).html}return(u,d)=>(h(),g("div",ug,[d[0]||(d[0]=xo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),i("div",dg,[(h(!0),g(Z,null,ie(n.value,(f,p)=>(h(),g("div",{key:p,class:"round"},[(h(!0),g(Z,null,ie(f,(v,m)=>(h(),g("div",{key:m,class:oe(["bid-cell",{"current-turn":r(p,m),"wrong-bid":a(p,m),"correct-bid":l(p,m)}])},[v?(h(),g("span",{key:0,innerHTML:c(v)},null,8,fg)):e.showTurnIndicator&&r(p,m)?(h(),g("span",vg,"?")):P("",!0)],2))),128))]))),128))])]))}},pg=me(mg,[["__scopeId","data-v-ac265db8"]]),hg={class:"deal-info"},gg={class:"board-number"},yg={key:0,class:"board-popup"},bg={class:"popup-list"},_g=["onClick"],wg={class:"info-row"},Sg={class:"info-item"},Cg={class:"value"},$g={class:"info-item"},kg={key:0,class:"contract-row"},xg={class:"info-item"},Ag=["innerHTML"],Ng={key:0,class:"label"},Og={key:0,class:"info-item"},Tg=["innerHTML"],Ig={key:1,class:"title"},Eg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=T(!1);function r(p){n("goto",p),o.value=!1}const a=O(()=>Vr(s.dealer)),l=O(()=>Vr(s.declarer)),c=O(()=>cm(s.vulnerable)),u=O(()=>{var v;const p=(v=s.vulnerable)==null?void 0:v.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),d=O(()=>s.contract?Ca(s.contract).html:""),f=O(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],v=s.openingLead.slice(1),m={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},N=m[p]||p;return`<span class="${y[p]||"black"}">${N}</span>${v==="T"?"10":v}`});return(p,v)=>(h(),g("div",hg,[i("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=m=>o.value=!0),onMouseleave:v[1]||(v[1]=m=>o.value=!1)},[i("div",gg,"Board "+S(e.boardNumber),1),o.value&&e.totalDeals>1?(h(),g("div",yg,[v[2]||(v[2]=i("div",{class:"popup-header"},"Select Board",-1)),i("div",bg,[(h(!0),g(Z,null,ie(e.totalDeals,m=>(h(),g("button",{key:m,class:oe(["popup-item",{active:m-1===e.currentIndex}]),onClick:y=>r(m-1)}," Board "+S(e.dealBoardNumbers[m-1]||m),11,_g))),128))])])):P("",!0)],32),i("div",wg,[i("div",Sg,[v[3]||(v[3]=i("span",{class:"label"},"Dealer:",-1)),i("span",Cg,S(a.value),1)]),i("div",$g,[v[4]||(v[4]=i("span",{class:"label"},"Vul:",-1)),i("span",{class:oe(["value",u.value])},S(c.value),3)])]),e.showContract&&e.contract?(h(),g("div",kg,[i("div",xg,[i("span",{class:"value contract",innerHTML:d.value},null,8,Ag),e.declarer?(h(),g("span",Ng,"by "+S(l.value),1)):P("",!0)]),e.openingLead?(h(),g("div",Og,[v[5]||(v[5]=i("span",{class:"label"},"OL:",-1)),i("span",{class:"value lead-card",innerHTML:f.value},null,8,Tg)])):P("",!0)])):P("",!0),e.title?(h(),g("div",Ig,S(e.title),1)):P("",!0)]))}},Rg=me(Eg,[["__scopeId","data-v-5a844c49"]]),Dg={class:"feedback-header"},Pg={key:0,class:"icon"},Lg={key:1,class:"icon"},Bg={class:"title"},Ug={key:0,class:"feedback-content"},Mg={class:"bid-comparison"},Fg={class:"bid-item your-bid"},jg=["innerHTML"],Hg={class:"bid-item correct-bid"},Kg=["innerHTML"],Vg={key:1,class:"feedback-content"},Wg={class:"bid-comparison"},Gg={class:"bid-item your-bid"},zg=["innerHTML"],Jg={class:"bid-item correct-bid"},Yg=["innerHTML"],qg=["innerHTML"],Xg={class:"actions"},Qg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=O(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(r){return Ca(r).html}function o(r){return dm(r).html}return(r,a)=>e.visible?(h(),g("div",{key:0,class:oe(["feedback-panel",e.type])},[i("div",Dg,[e.type==="wrong"?(h(),g("span",Pg,"")):e.type==="correct"?(h(),g("span",Lg,"")):P("",!0),i("span",Bg,S(s.value),1)]),e.wrongBid?(h(),g("div",Ug,[i("div",Mg,[i("div",Fg,[a[1]||(a[1]=i("span",{class:"label"},"Your bid:",-1)),i("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,jg)]),i("div",Hg,[a[2]||(a[2]=i("span",{class:"label"},"Correct bid:",-1)),i("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Kg)])])])):P("",!0),e.wrongCardCode?(h(),g("div",Vg,[i("div",Wg,[i("div",Gg,[a[3]||(a[3]=i("span",{class:"label"},"Your card:",-1)),i("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,zg)]),i("div",Jg,[a[4]||(a[4]=i("span",{class:"label"},"Correct card:",-1)),i("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Yg)])])])):P("",!0),e.commentary?(h(),g("div",{key:2,class:"commentary",innerHTML:R(Hs)(e.commentary)},null,8,qg)):P("",!0),i("div",Xg,[e.showContinue?(h(),g("button",{key:0,class:"btn continue",onClick:a[0]||(a[0]=l=>r.$emit("continue"))}," Continue ")):P("",!0)])],2)):P("",!0)}},ql=me(Qg,[["__scopeId","data-v-04368462"]]),Zg={class:"welcome-screen"},ey={class:"welcome-card"},ty={class:"welcome-header"},sy={key:0,class:"welcome-body"},ny={class:"form-group"},oy={key:0,class:"error-message"},ry={class:"form-group"},ay={key:0,class:"error-message"},ly={class:"form-group"},iy={key:0,class:"error-message"},cy={key:0,class:"form-group"},uy={class:"checkbox-group"},dy=["value","checked","onChange"],fy={key:1,class:"form-group"},vy={class:"single-classroom"},my={class:"form-group consent-group"},py={class:"checkbox-label consent-label"},hy={key:0,class:"consent-details"},gy=["disabled"],yy={key:0},by={key:1},_y={key:1,class:"welcome-body returning"},wy={key:2,class:"welcome-body switcher"},Sy={class:"user-list"},Cy=["onClick"],$y={class:"user-name"},ky={key:0,class:"user-class"},xy={key:3,class:"welcome-body recovery-sent"},Ay={class:"subtitle"},Ny={class:"recovery-info"},Oy={class:"code-entry"},Ty=["disabled"],Iy={key:0},Ey={key:1},Ry={key:0,class:"error-message"},Dy={key:4,class:"welcome-body recovery-claiming"},Py={class:"subtitle"},Ly={key:0,class:"recovery-error-panel"},By={class:"error-message"},Uy={key:1,class:"loading-spinner"},My={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=so(),o=Ue(),r="https://api.bridge-classroom.com/api",a=T("form"),l=T(""),c=T(""),u=T(""),d=T([]),f=T(!0),p=T({firstName:"",lastName:"",email:"",classrooms:""}),v=T(!1),m=T(!1),y=T(""),N=T(""),C=T(""),b=T(""),$=T("");ft(async()=>{o.initialize(),n.initializeFromUrl();const ne=new URLSearchParams(window.location.search),j=ne.get("recover"),se=ne.get("user_id");if(j&&se){await ue(se,j),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?a.value="returning":o.hasUsers.value?a.value="switcher":a.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,V=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ee=O(()=>l.value.trim().length>0&&c.value.trim().length>0&&u.value.trim().length>0&&D.test(u.value.trim())),K=O(()=>o.currentUser.value?o.currentUser.value.firstName:""),q=O(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function Y(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let ne=!0;return l.value.trim()||(p.value.firstName="First name is required",ne=!1),c.value.trim()||(p.value.lastName="Last name is required",ne=!1),u.value.trim()?D.test(u.value.trim())||(p.value.email="Please enter a valid email address",ne=!1):(p.value.email="Email is required",ne=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",ne=!1),ne}async function de(){const ne=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const j=await o.requestRecovery(ne,r);return j.success?(N.value=ne,b.value=j.message,a.value="recovery-sent",!1):j.message&&j.message.includes("No account found")?!0:(p.value.email=j.message||"Unable to verify email. Please try again.",!1)}catch(j){return console.error("Failed to check email on server:",j),V?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ue(ne,j){a.value="recovery-claiming",m.value=!0,y.value="Recovering your account...",C.value="";try{const se=await o.claimRecovery(ne,j,r);se.success&&se.user?s("userReady",se.user):(C.value=se.error||"Recovery failed. Please try again.",a.value="form")}catch(se){console.error("[Recovery] Exception:",se),C.value="Unable to complete recovery. Please try again.",a.value="form"}finally{m.value=!1,y.value=""}}async function we(){if($.value.trim().length===6){m.value=!0,y.value="Verifying code...",C.value="";try{const ne=await o.claimRecoveryByCode(N.value.trim(),$.value.trim(),r);ne.success&&ne.user?s("userReady",ne.user):C.value=ne.error||"Invalid code. Please check and try again."}catch(ne){console.error("Recovery code claim failed:",ne),C.value="Unable to connect to server. Please try again."}finally{m.value=!1,y.value=""}}}async function Le(){if(!Y())return;if(m.value=!0,y.value="Checking account...",!await de()){m.value=!1,y.value="";return}let j=[];n.hasSingleClassroom.value?j=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(j=[...d.value]),y.value="Creating your secure encryption key...";try{const se=await o.createUser({firstName:l.value,lastName:c.value,email:u.value,classrooms:j,dataConsent:f.value,apiUrl:r});s("userReady",se)}catch(se){console.error("Failed to create user:",se),p.value.email="Failed to create account. Please try again."}finally{m.value=!1,y.value=""}}function je(){s("userReady",o.currentUser.value)}function Ge(){a.value="switcher"}function ge(ne){o.switchUser(ne),s("userReady",o.currentUser.value)}function Q(){l.value="",c.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},a.value="form"}function fe(){o.currentUser.value?a.value="returning":o.hasUsers.value&&(a.value="switcher")}function pe(ne){const j=d.value.indexOf(ne);j===-1?d.value.push(ne):d.value.splice(j,1)}return(ne,j)=>(h(),g("div",Zg,[i("div",ey,[i("div",ty,[i("h1",null,S(q.value),1)]),a.value==="form"?(h(),g("div",sy,[j[16]||(j[16]=i("h2",null,"Welcome!",-1)),j[17]||(j[17]=i("p",{class:"subtitle"},"Please enter your name to get started.",-1)),i("form",{onSubmit:Et(Le,["prevent"]),class:"user-form"},[i("div",ny,[j[8]||(j[8]=i("label",{for:"firstName"},"First Name",-1)),De(i("input",{id:"firstName","onUpdate:modelValue":j[0]||(j[0]=se=>l.value=se),type:"text",placeholder:"Enter your first name",class:oe({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[At,l.value]]),p.value.firstName?(h(),g("span",oy,S(p.value.firstName),1)):P("",!0)]),i("div",ry,[j[9]||(j[9]=i("label",{for:"lastName"},"Last Name",-1)),De(i("input",{id:"lastName","onUpdate:modelValue":j[1]||(j[1]=se=>c.value=se),type:"text",placeholder:"Enter your last name",class:oe({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[At,c.value]]),p.value.lastName?(h(),g("span",ay,S(p.value.lastName),1)):P("",!0)]),i("div",ly,[j[10]||(j[10]=i("label",{for:"email"},"Email Address",-1)),De(i("input",{id:"email","onUpdate:modelValue":j[2]||(j[2]=se=>u.value=se),type:"email",placeholder:"Enter your email address",class:oe({"has-error":p.value.email}),autocomplete:"email"},null,2),[[At,u.value]]),p.value.email?(h(),g("span",iy,S(p.value.email),1)):P("",!0),j[11]||(j[11]=i("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),R(n).hasMultipleClassrooms.value?(h(),g("div",cy,[j[12]||(j[12]=i("label",null,"Select Your Class(es)",-1)),i("div",uy,[(h(!0),g(Z,null,ie(R(n).availableClassrooms.value,se=>(h(),g("label",{key:se.id,class:"checkbox-label"},[i("input",{type:"checkbox",value:se.id,checked:d.value.includes(se.id),onChange:ze=>pe(se.id)},null,40,dy),i("span",null,S(se.name),1)]))),128))])])):R(n).hasSingleClassroom.value?(h(),g("div",fy,[j[13]||(j[13]=i("label",null,"Class",-1)),i("div",vy,S(R(n).singleClassroom.value.name),1)])):P("",!0),i("div",my,[i("label",py,[De(i("input",{type:"checkbox","onUpdate:modelValue":j[3]||(j[3]=se=>f.value=se)},null,512),[[Yo,f.value]]),j[14]||(j[14]=i("span",null," Preserve my practice history ",-1))]),i("button",{type:"button",class:"details-toggle",onClick:j[4]||(j[4]=se=>v.value=!v.value)},S(v.value?"Hide details":"What data is preserved?"),1),v.value?(h(),g("div",hy,[...j[15]||(j[15]=[xo('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):P("",!0)]),i("button",{type:"submit",class:"submit-btn",disabled:!ee.value||m.value},[m.value?(h(),g("span",yy,S(y.value),1)):(h(),g("span",by,"Start Practicing"))],8,gy)],32),R(o).hasUsers.value?(h(),g("button",{key:0,class:"back-link",onClick:fe}," Back to user selection ")):P("",!0)])):a.value==="returning"?(h(),g("div",_y,[i("h2",null,"Welcome back, "+S(K.value)+"!",1),j[18]||(j[18]=i("p",{class:"subtitle"},"Ready to continue practicing?",-1)),i("button",{class:"submit-btn",onClick:je}," Continue "),i("button",{class:"switch-link",onClick:Ge}," Not "+S(K.value)+"? Switch user ",1)])):a.value==="switcher"?(h(),g("div",wy,[j[19]||(j[19]=i("h2",null,"Select User",-1)),j[20]||(j[20]=i("p",{class:"subtitle"},"Choose who's practicing today:",-1)),i("div",Sy,[(h(!0),g(Z,null,ie(R(o).allUsers.value,se=>{var ze;return h(),g("button",{key:se.id,class:oe(["user-item",{"is-current":se.id===R(o).currentUserId.value}]),onClick:ct=>ge(se.id)},[i("span",$y,S(se.firstName)+" "+S(se.lastName),1),(ze=se.classrooms)!=null&&ze.length?(h(),g("span",ky,S(se.classrooms.join(", ")),1)):P("",!0)],10,Cy)}),128))]),i("button",{class:"add-user-btn",onClick:Q}," + Add New User "),R(o).currentUser.value?(h(),g("button",{key:0,class:"back-link",onClick:fe}," Cancel ")):P("",!0)])):a.value==="recovery-sent"?(h(),g("div",xy,[j[25]||(j[25]=i("h2",null,"Check Your Email",-1)),i("p",Ay,[j[21]||(j[21]=tn(" We found an existing account for ",-1)),i("strong",null,S(N.value),1),j[22]||(j[22]=tn(". ",-1))]),i("div",Ny,[i("p",null,S(b.value),1),j[23]||(j[23]=i("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),i("div",Oy,[j[24]||(j[24]=i("label",{for:"recoveryCode"},"Recovery Code",-1)),De(i("input",{id:"recoveryCode","onUpdate:modelValue":j[5]||(j[5]=se=>$.value=se),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:ic(we,["enter"])},null,544),[[At,$.value]]),i("button",{class:"submit-btn",disabled:$.value.trim().length!==6||m.value,onClick:we},[m.value?(h(),g("span",Iy,S(y.value),1)):(h(),g("span",Ey,"Restore Account"))],8,Ty),C.value?(h(),g("span",Ry,S(C.value),1)):P("",!0)]),i("button",{class:"back-link",onClick:j[6]||(j[6]=se=>a.value="form")}," Use a different email ")])):a.value==="recovery-claiming"?(h(),g("div",Dy,[j[27]||(j[27]=i("h2",null,"Restoring Your Account",-1)),i("p",Py,S(y.value),1),C.value?(h(),g("div",Ly,[i("p",By,S(C.value),1),i("button",{class:"back-link",onClick:j[7]||(j[7]=se=>a.value="form")}," Try again ")])):(h(),g("div",Uy,[...j[26]||(j[26]=[i("div",{class:"spinner"},null,-1)])]))])):P("",!0)])]))}},Fy=me(My,[["__scopeId","data-v-4e48322f"]]),bs="https://api.bridge-classroom.com/api",Ls="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_s=T([]),Bs=T(null),bt=T(!1),Me=T(null);function hn(){async function e(c){bt.value=!0,Me.value=null;try{const d=await(await fetch(`${bs}/classrooms?teacher_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":Ls}})).json();return d.success?_s.value=d.classrooms:Me.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Me.value="Unable to connect to server",null}finally{bt.value=!1}}async function t(c,u,d){bt.value=!0,Me.value=null;try{const f=await fetch(`${bs}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ls},body:JSON.stringify({teacher_id:c,name:u,description:d||null})});if(!f.ok){const v=await f.text();return Me.value=v||`Server error (${f.status})`,{success:!1,error:Me.value}}const p=await f.json();return p.success?_s.value=[p.classroom,..._s.value]:Me.value=p.error||"Failed to create classroom",p}catch(f){return console.error("Failed to create classroom:",f),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function s(c){bt.value=!0,Me.value=null;try{const d=await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}`,{headers:{"x-api-key":Ls}})).json();return d.success?Bs.value=d.classroom:Me.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Me.value="Unable to connect to server",null}finally{bt.value=!1}}async function n(c,u){try{const f=await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Ls}})).json();if(f.success&&Bs.value){Bs.value.members=Bs.value.members.filter(v=>v.student_id!==u);const p=_s.value.findIndex(v=>v.id===c);p!==-1&&_s.value[p].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(c){bt.value=!0,Me.value=null;try{const u=await fetch(`${bs}/join/${encodeURIComponent(c)}`);return u.status===404?(Me.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Me.value="Unable to connect to server",null}finally{bt.value=!1}}async function r(c,u,d){bt.value=!0,Me.value=null;try{const p=await(await fetch(`${bs}/join/${encodeURIComponent(c)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ls},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return p.success||(Me.value=p.error||"Failed to join classroom"),p}catch(f){return console.error("Failed to join classroom:",f),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function a(c,u){try{return await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ls},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function l(){_s.value=[],Bs.value=null,bt.value=!1,Me.value=null}return{teacherClassrooms:_s,currentClassroom:Bs,loading:bt,error:Me,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:r,leaveClassroom:a,reset:l}}const jy={class:"settings-panel"},Hy={class:"settings-body"},Ky={class:"settings-section"},Vy={class:"info-row"},Wy={class:"info-value"},Gy={class:"info-row"},zy={class:"info-value"},Jy={class:"info-row"},Yy={class:"info-row"},qy={class:"info-value"},Xy={key:1,class:"edit-form"},Qy={class:"form-group"},Zy={class:"form-group"},eb={class:"form-group"},tb={class:"checkbox-label"},sb={key:0,class:"settings-section"},nb={class:"assignment-list"},ob={class:"assignment-header"},rb={class:"assignment-name"},ab={class:"assignment-progress"},lb={class:"progress-bar"},ib={class:"assignment-meta"},cb={key:0},ub={class:"assignment-list"},db={class:"assignment-header"},fb={class:"assignment-name"},vb={class:"assignment-meta"},mb={key:1,class:"settings-section"},pb={class:"classroom-id"},hb=["disabled","onClick"],gb={class:"settings-section"},yb={class:"toggle-row"},bb={class:"toggle-label"},_b=["checked"],wb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Ue(),o=so(),r=er(),a=hn(),l=T(!1),c=T(""),u=T(""),d=T(!0),f=O(()=>n.currentUser.value),p=O(()=>{var q;return!f.value||!((q=f.value.classrooms)!=null&&q.length)?"No classroom assigned":f.value.classrooms.map(Y=>{const de=o.availableClassrooms.value.find(ue=>ue.id===Y);return de?de.name:Y}).join(", ")}),v=O(()=>r.getAllAssignments().filter(q=>q.completionPercent<100)),m=O(()=>r.getAllAssignments().filter(q=>q.completionPercent>=100));function y(){f.value&&(c.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,l.value=!0)}function N(){l.value=!1}function C(){f.value&&(n.updateUser(f.value.id,{firstName:c.value,lastName:u.value,dataConsent:d.value}),l.value=!1)}function b(){s("switchUser")}function $(){l.value=!1,s("close")}const D=T(null);async function V(q){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(D.value=q,(await a.leaveClassroom(q,f.value.id)).success){const de=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:de.filter(ue=>ue!==q)})}D.value=null}function ee(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function K(q){return q?new Date(q).toLocaleDateString():"N/A"}return(q,Y)=>{var de,ue,we,Le,je,Ge,ge;return e.visible?(h(),g("div",{key:0,class:"settings-overlay",onClick:Et($,["self"])},[i("div",jy,[i("div",{class:"settings-header"},[Y[5]||(Y[5]=i("h2",null,"Settings",-1)),i("button",{class:"close-btn",onClick:$,"aria-label":"Close"},"  ")]),i("div",Hy,[i("section",Ky,[Y[12]||(Y[12]=i("h3",null,"Your Profile",-1)),l.value?(h(),g("div",Xy,[i("div",Qy,[Y[10]||(Y[10]=i("label",{for:"editFirstName"},"First Name",-1)),De(i("input",{id:"editFirstName","onUpdate:modelValue":Y[1]||(Y[1]=Q=>c.value=Q),type:"text"},null,512),[[At,c.value]])]),i("div",Zy,[Y[11]||(Y[11]=i("label",{for:"editLastName"},"Last Name",-1)),De(i("input",{id:"editLastName","onUpdate:modelValue":Y[2]||(Y[2]=Q=>u.value=Q),type:"text"},null,512),[[At,u.value]])]),i("div",eb,[i("label",tb,[De(i("input",{type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=Q=>d.value=Q)},null,512),[[Yo,d.value]]),i("span",null,"Share practice results with "+S(R(o).teacherName.value||"teacher"),1)])]),i("div",{class:"button-row"},[i("button",{class:"primary-btn",onClick:C}," Save Changes "),i("button",{class:"secondary-btn",onClick:N}," Cancel ")])])):(h(),g(Z,{key:0},[i("div",Vy,[Y[6]||(Y[6]=i("span",{class:"info-label"},"Name",-1)),i("span",Wy,S((de=f.value)==null?void 0:de.firstName)+" "+S((ue=f.value)==null?void 0:ue.lastName),1)]),i("div",Gy,[Y[7]||(Y[7]=i("span",{class:"info-label"},"Class",-1)),i("span",zy,S(p.value),1)]),i("div",Jy,[Y[8]||(Y[8]=i("span",{class:"info-label"},"Data Sharing",-1)),i("span",{class:oe(["info-value",(we=f.value)!=null&&we.dataConsent?"enabled":"disabled"])},S((Le=f.value)!=null&&Le.dataConsent?"Enabled":"Disabled"),3)]),i("div",Yy,[Y[9]||(Y[9]=i("span",{class:"info-label"},"Member Since",-1)),i("span",qy,S(K((je=f.value)==null?void 0:je.createdAt)),1)]),i("div",{class:"button-row"},[i("button",{class:"secondary-btn",onClick:y}," Edit Profile "),i("button",{class:"secondary-btn",onClick:b}," Switch User ")]),((Ge=f.value)==null?void 0:Ge.role)!=="teacher"&&((ge=f.value)==null?void 0:ge.role)!=="admin"?(h(),g("button",{key:0,class:"become-teacher-btn",onClick:Y[0]||(Y[0]=Q=>{s("close"),s("become-teacher")})}," Become a Teacher ")):P("",!0)],64))]),v.value.length||m.value.length?(h(),g("section",sb,[Y[16]||(Y[16]=i("h3",null,"Assignments",-1)),v.value.length?(h(),g(Z,{key:0},[Y[13]||(Y[13]=i("h4",null,"Active",-1)),i("div",nb,[(h(!0),g(Z,null,ie(v.value,Q=>(h(),g("div",{key:Q.id,class:"assignment-item"},[i("div",ob,[i("span",rb,S(Q.name),1),i("span",ab,S(Q.completionPercent)+"%",1)]),i("div",lb,[i("div",{class:"progress-fill",style:ss({width:`${Q.completionPercent}%`})},null,4)]),i("div",ib,[Q.dueDate?(h(),g("span",cb," Due: "+S(K(Q.dueDate)),1)):P("",!0),i("span",null,S(Q.completedDeals)+"/"+S(Q.totalDeals)+" deals ",1)])]))),128))])],64)):P("",!0),m.value.length?(h(),g(Z,{key:1},[Y[15]||(Y[15]=i("h4",null,"Completed",-1)),i("div",ub,[(h(!0),g(Z,null,ie(m.value,Q=>(h(),g("div",{key:Q.id,class:"assignment-item completed"},[i("div",db,[i("span",fb,S(Q.name),1),Y[14]||(Y[14]=i("span",{class:"assignment-check"},"",-1))]),i("div",vb," Completed "+S(K(Q.lastPracticedAt)),1)]))),128))])],64)):P("",!0)])):P("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(h(),g("section",mb,[Y[17]||(Y[17]=i("h3",null,"My Classrooms",-1)),(h(!0),g(Z,null,ie(f.value.classrooms,Q=>(h(),g("div",{key:Q,class:"classroom-row"},[i("span",pb,S(Q),1),i("button",{class:"leave-btn",disabled:D.value===Q,onClick:fe=>V(Q)},S(D.value===Q?"Leaving...":"Leave"),9,hb)]))),128))])):P("",!0),i("section",gb,[Y[19]||(Y[19]=i("h3",null,"Display Options",-1)),i("div",yb,[i("label",bb,[i("input",{type:"checkbox",checked:R(o).showLoadPbnOption.value,onChange:Y[4]||(Y[4]=Q=>R(o).setUIPref("showLoadPbnOption",Q.target.checked))},null,40,_b),Y[18]||(Y[18]=i("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),i("section",{class:"settings-section"},[Y[20]||(Y[20]=i("h3",null,"Data & Privacy",-1)),Y[21]||(Y[21]=i("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),i("button",{class:"remove-device-btn",onClick:ee}," Remove account from this device "),Y[22]||(Y[22]=i("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):P("",!0)}}},Sb=me(wb,[["__scopeId","data-v-57179473"]]),Cb={class:"banner-content"},$b={class:"assignment-info"},kb={class:"assignment-title"},xb={class:"assignment-name"},Ab={class:"assignment-meta"},Nb={class:"progress-text"},Ob={class:"progress-bar"},Tb={key:0,class:"complete-badge"},Ib={class:"return-text"},Eb={__name:"AssignmentBanner",setup(e){const t=er(),s=O(()=>t.currentAssignment.value),n=O(()=>t.hasActiveAssignment.value),o=O(()=>t.assignmentProgress.value),r=O(()=>t.isAssignmentComplete.value),a=O(()=>t.inAssignmentMode.value),l=O(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),c=O(()=>l.value===null?null:l.value<0?"Overdue":l.value===0?"Due today":l.value===1?"Due tomorrow":`Due in ${l.value} days`),u=O(()=>l.value===null?"":l.value<0?"overdue":l.value<=1?"urgent":l.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(p,v)=>{var m,y;return n.value&&a.value?(h(),g("div",{key:0,class:oe(["assignment-banner",{complete:r.value}])},[i("div",Cb,[i("div",$b,[i("div",kb,[v[0]||(v[0]=i("span",{class:"assignment-label"},"Assignment:",-1)),i("span",xb,S((m=s.value)==null?void 0:m.name),1)]),i("div",Ab,[i("span",Nb,S(o.value.completed)+" of "+S(o.value.total)+" deals ("+S(o.value.percent)+"%) ",1),c.value?(h(),g("span",{key:0,class:oe(["due-text",u.value])},S(c.value),3)):P("",!0)])]),i("div",Ob,[i("div",{class:oe(["progress-fill",{complete:r.value}]),style:ss({width:`${o.value.percent}%`})},null,6)]),i("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),r.value?(h(),g("div",Tb," Complete! ")):P("",!0)],2)):s.value&&!a.value?(h(),g("div",{key:1,class:"return-banner",onClick:f},[v[1]||(v[1]=i("span",{class:"return-icon"},"",-1)),i("span",Ib," Return to assignment: "+S((y=s.value)==null?void 0:y.name)+" ("+S(o.value.percent)+"% complete) ",1)])):P("",!0)}}},Rb=me(Eb,[["__scopeId","data-v-a4095a6a"]]),Db={key:0,class:"status-content"},Pb={key:1,class:"status-content offline"},Lb={key:0,class:"badge"},Bb={key:2,class:"status-content error"},Ub={class:"status-text"},Mb={key:0,class:"badge"},Fb={key:3,class:"status-content pending"},jb={class:"status-text"},Hb={key:4,class:"status-content synced"},Kb={__name:"SyncStatus",setup(e){const t=Zc(),s=ps(),n=O(()=>s.pendingCount.value),o=O(()=>t.registrationFailed.value?"Not registered":"Sync failed"),r=O(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function a(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function l(){t.retrySync()}return(c,u)=>(h(),g("div",{class:oe(["sync-status",r.value]),onClick:a},[R(t).isSyncing.value?(h(),g("div",Db,[...u[0]||(u[0]=[i("span",{class:"spinner"},null,-1),i("span",{class:"status-text"},"Syncing...",-1)])])):R(t).isOffline.value?(h(),g("div",Pb,[u[1]||(u[1]=i("span",{class:"icon"},"",-1)),u[2]||(u[2]=i("span",{class:"status-text"},"Offline",-1)),n.value>0?(h(),g("span",Lb,S(n.value),1)):P("",!0)])):R(t).hasError.value?(h(),g("div",Bb,[u[3]||(u[3]=i("span",{class:"icon"},"",-1)),i("span",Ub,S(o.value),1),n.value>0?(h(),g("span",Mb,S(n.value),1)):P("",!0),i("button",{class:"retry-btn",onClick:Et(l,["stop"])},"Retry")])):n.value>0?(h(),g("div",Fb,[u[4]||(u[4]=i("span",{class:"icon"},"",-1)),i("span",jb,S(n.value)+" pending",1)])):(h(),g("div",Hb,[...u[5]||(u[5]=[i("span",{class:"icon"},"",-1),i("span",{class:"status-text"},"Synced",-1)])]))],2))}},Vb=me(Kb,[["__scopeId","data-v-8457149a"]]),Wb={class:"progress-dashboard"},Gb={class:"dashboard-header"},zb={key:0,class:"loading"},Jb={key:1,class:"error-state"},Yb={key:2,class:"empty-state"},qb={key:3,class:"dashboard-content"},Xb={class:"day-header"},Qb={class:"day-date"},Zb={class:"day-summary"},e_={class:"day-lessons"},t_={class:"day-lesson-name"},s_={class:"day-lesson-counts"},n_={key:0,class:"count count-correct"},o_={key:1,class:"count count-incorrect"},r_={class:"observation-total"},a_={class:"dashboard-actions"},l_={__name:"ProgressDashboard",emits:["close"],setup(e,{emit:t}){const s=Oa(),n=Xt();ft(async()=>{await s.fetchProgress()});async function o(){await s.fetchProgress(!0)}const r=O(()=>{const c=s.getObservationsByDate();return Object.keys(c).sort().reverse().slice(0,10).map(d=>{var y,N;const f=c[d],p={};for(const C of f){const b=C.deal_subfolder||((y=C.deal)==null?void 0:y.subfolder),$=C.deal_number??((N=C.deal)==null?void 0:N.deal_number);!b||$==null||(p[b]||(p[b]={}),p[b][$]||(p[b][$]=[]),p[b][$].push(C))}const v=Object.entries(p).map(([C,b])=>{let $=0,D=0;for(const V of Object.values(b))V.every(K=>K.correct)?$++:D++;return{subfolder:C,correctCount:$,incorrectCount:D}}).sort((C,b)=>a(C.subfolder).localeCompare(a(b.subfolder))),m=v.reduce((C,b)=>C+b.correctCount+b.incorrectCount,0);return{date:d,lessons:v,totalBoards:m}})});function a(c){return n.formatLessonName(c)}function l(c){const u=new Date(c+"T00:00:00"),d=new Date,f=new Date(d);f.setDate(f.getDate()-1);const p=d.toISOString().split("T")[0],v=f.toISOString().split("T")[0];return c===p?"Today":c===v?"Yesterday":u.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}return(c,u)=>(h(),g("div",Wb,[i("header",Gb,[u[3]||(u[3]=i("h2",null,"Your Progress",-1)),i("button",{class:"close-btn",onClick:u[0]||(u[0]=d=>c.$emit("close"))},"")]),R(s).isLoading.value?(h(),g("div",zb,[...u[4]||(u[4]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading your progress...",-1)])])):R(s).hasError.value?(h(),g("div",Jb,[i("p",null,"Failed to load progress: "+S(R(s).error.value),1),i("button",{onClick:o},"Try Again")])):R(s).hasData.value?(h(),g("div",qb,[(h(!0),g(Z,null,ie(r.value,d=>(h(),g("div",{key:d.date,class:"day-card"},[i("div",Xb,[i("span",Qb,S(l(d.date)),1),i("span",Zb,S(d.totalBoards)+" board"+S(d.totalBoards!==1?"s":"")+" practiced",1)]),i("div",e_,[(h(!0),g(Z,null,ie(d.lessons,f=>(h(),g("div",{key:f.subfolder,class:"day-lesson-row"},[i("span",t_,S(a(f.subfolder)),1),i("div",s_,[f.correctCount?(h(),g("span",n_,S(f.correctCount),1)):P("",!0),f.incorrectCount?(h(),g("span",o_,S(f.incorrectCount),1)):P("",!0)])]))),128))])]))),128)),i("div",r_,S(R(s).totalObservations.value)+" observations",1),i("div",a_,[i("button",{class:"secondary-btn",onClick:o}," Refresh Data "),i("button",{class:"primary-btn",onClick:u[2]||(u[2]=d=>c.$emit("close"))}," Continue Practicing ")])])):(h(),g("div",Yb,[u[5]||(u[5]=i("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=i("p",null,"Complete some practice deals to see your progress here!",-1)),i("button",{class:"primary-btn",onClick:u[1]||(u[1]=d=>c.$emit("close"))},"Start Practicing")]))]))}},i_=me(l_,[["__scopeId","data-v-c70ddcce"]]),c_="test-user-mastery",u_="test-classroom",d_="Negative_Double",f_="competitive_bidding/negative_double";let ta=0;function Ke({boardNumber:e,correct:t,timestamp:s}){return ta++,{id:`mastery-test-${ta}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:c_,skill_path:f_,correct:t,deal_subfolder:d_,deal_number:e,classroom:u_}}function ut(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function mo(e){return new Date(Date.now()-e*60*1e3).toISOString()}function v_(){ta=0;const e=[];e.push(Ke({boardNumber:2,correct:!0,timestamp:ut(5)}),Ke({boardNumber:2,correct:!1,timestamp:ut(1)})),e.push(Ke({boardNumber:3,correct:!1,timestamp:mo(30)}),Ke({boardNumber:3,correct:!0,timestamp:mo(20)})),e.push(Ke({boardNumber:4,correct:!1,timestamp:mo(90)}),Ke({boardNumber:4,correct:!0,timestamp:mo(60)})),e.push(Ke({boardNumber:5,correct:!1,timestamp:ut(10)}),Ke({boardNumber:5,correct:!0,timestamp:ut(2)})),e.push(Ke({boardNumber:6,correct:!0,timestamp:ut(14)}),Ke({boardNumber:6,correct:!0,timestamp:ut(7)})),e.push(Ke({boardNumber:7,correct:!0,timestamp:ut(21)}),Ke({boardNumber:7,correct:!0,timestamp:ut(14)}),Ke({boardNumber:7,correct:!0,timestamp:ut(7)})),e.push(Ke({boardNumber:8,correct:!0,timestamp:ut(28)}),Ke({boardNumber:8,correct:!0,timestamp:ut(21)}),Ke({boardNumber:8,correct:!0,timestamp:ut(14)}),Ke({boardNumber:8,correct:!1,timestamp:ut(1)}));const t=[1,2,3,4,5].map(s=>({...Ke({boardNumber:s,correct:!0,timestamp:ut(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const m_=["onClick","title"],p_={key:0,class:"medal gold-medal"},h_={key:1,class:"medal silver-medal"},g_={class:"board-num"},y_={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=pn(),r=O(()=>{const l=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const c=l.find(u=>u.boardNumber===s.forceRedBoard);c&&(c.status="red")}return l});function a(l){const c={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${l.boardNumber}: ${c[l.status]}${u[l.achievement]}`}return(l,c)=>e.boardNumbers.length>0?(h(),g("div",{key:0,class:oe(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(h(),g("button",{key:0,class:"intro-btn",onClick:c[0]||(c[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):P("",!0),(h(!0),g(Z,null,ie(r.value,(u,d)=>(h(),g("div",{key:u.boardNumber,class:oe(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:a(u)},[u.achievement==="gold"?(h(),g("span",p_,"")):u.achievement==="silver"?(h(),g("span",h_,"")):P("",!0),i("span",g_,S(u.boardNumber),1)],10,m_))),128))],2)):P("",!0)}},iu=me(y_,[["__scopeId","data-v-820a0f0c"]]),b_={class:"accomplishments-view"},__={class:"view-header"},w_={key:0,class:"user-selector"},S_=["value"],C_=["value"],$_={key:1,class:"loading-state"},k_={key:2,class:"error-state"},x_={key:3,class:"empty-state"},A_={key:4,class:"view-content"},N_={class:"controls-row"},O_={class:"tabs"},T_={key:0,class:"tab-content"},I_={key:0,class:"no-data"},E_={key:1,class:"lesson-list"},R_={class:"lesson-header"},D_={class:"lesson-name"},P_={key:1,class:"tab-content"},L_={key:0,class:"no-data"},B_={key:1,class:"taxon-list"},U_={class:"taxon-header"},M_={class:"taxon-category"},F_={class:"taxon-name"},j_={class:"taxon-counts"},H_={class:"taxon-stat correct"},K_={class:"taxon-stat incorrect"},V_={class:"taxon-stat total"},W_={class:"view-actions"},G_={key:5,class:"test-mode-banner"},z_={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=Xt(),o=pn(),a=new URLSearchParams(window.location.search).get("test");ft(async()=>{a==="mastery"||a==="accomplishments"?n.enableTestMode(v_()):await n.initialize()});async function l(){await n.loadAccomplishments(!0)}async function c(p){await n.selectUser(p)}function u(p,v){s("navigate-to-deal",{subfolder:p,dealNumber:v})}const d=O(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(m=>{const y=o.computeBoardMastery(p,m.subfolder,m.boardNumbers),N=o.computeLessonAchievement(y);return{...m,achievement:N.achievement}}).sort((m,y)=>f(m.subfolder).localeCompare(f(y.subfolder)))});it(d,p=>{o.fetchMissingBoardCounts(p.map(v=>v.subfolder))},{immediate:!0});function f(p){return n.formatLessonName(p)}return(p,v)=>(h(),g("div",b_,[i("header",__,[v[6]||(v[6]=i("h2",null,"Accomplishments",-1)),i("button",{class:"close-btn",onClick:v[0]||(v[0]=m=>p.$emit("close"))},"")]),R(n).canViewOtherUsers.value?(h(),g("div",w_,[v[7]||(v[7]=i("label",{for:"user-select"},"Viewing:",-1)),i("select",{id:"user-select",value:R(n).selectedUserId.value,onChange:v[1]||(v[1]=m=>c(m.target.value))},[(h(!0),g(Z,null,ie(R(n).accessibleUsers.value,m=>(h(),g("option",{key:m.id,value:m.id},S(m.name)+S(m.isSelf?" (You)":""),9,C_))),128))],40,S_)])):P("",!0),R(n).loading.value?(h(),g("div",$_,[...v[8]||(v[8]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading accomplishments...",-1)])])):R(n).error.value?(h(),g("div",k_,[i("p",null,"Failed to load: "+S(R(n).error.value),1),i("button",{onClick:l},"Try Again")])):R(n).hasData.value?(h(),g("div",A_,[i("div",N_,[i("div",O_,[i("button",{class:oe(["tab-btn",{active:R(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=m=>R(n).activeTab.value="lessons")}," Lessons ",2),i("button",{class:oe(["tab-btn",{active:R(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=m=>R(n).activeTab.value="taxons")}," Taxons ",2)])]),R(n).activeTab.value==="lessons"?(h(),g("div",T_,[d.value.length===0?(h(),g("div",I_," No lesson data available yet. ")):(h(),g("div",E_,[(h(!0),g(Z,null,ie(d.value,m=>(h(),g("div",{key:m.subfolder,class:"lesson-row"},[i("div",R_,[i("span",D_,S(f(m.subfolder)),1),m.achievement!=="none"?(h(),g("span",{key:0,class:oe(["achievement-badge",m.achievement])},"  "+S(m.achievement==="gold"?"Gold":"Silver"),3)):P("",!0)]),he(iu,{boardNumbers:m.boardNumbers,lessonSubfolder:m.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(m.subfolder,m.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):P("",!0),R(n).activeTab.value==="taxons"?(h(),g("div",P_,[R(n).filteredTaxonStats.value.length===0?(h(),g("div",L_," No skill data available yet. ")):(h(),g("div",B_,[(h(!0),g(Z,null,ie(R(n).filteredTaxonStats.value,m=>(h(),g("div",{key:m.skillPath,class:"taxon-card"},[i("div",U_,[i("span",M_,S(m.categoryName),1),i("span",F_,S(m.skillName),1)]),i("div",j_,[i("span",H_,S(m.correct),1),i("span",K_,S(m.incorrect),1),i("span",V_,S(m.total)+" total",1)])]))),128))]))])):P("",!0),i("div",W_,[i("button",{class:"secondary-btn",onClick:l}," Refresh "),i("button",{class:"primary-btn",onClick:v[5]||(v[5]=m=>p.$emit("close"))}," Done ")])])):(h(),g("div",x_,[v[9]||(v[9]=i("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=i("p",null,"Complete some practice deals to see your accomplishments here!",-1)),i("button",{class:"primary-btn",onClick:v[2]||(v[2]=m=>p.$emit("close"))},"Start Practicing")])),R(n).useTestData.value?(h(),g("div",G_," Test Mode - Using Generated Data ")):P("",!0)]))}},J_=me(z_,[["__scopeId","data-v-38e59c14"]]),rr="https://api.bridge-classroom.com/api",ar="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ds=T([]),Mt=T([]),cu=T([]),dn=T(!1),fn=T(null),jn=T(null),Xl=T(!1),uu=T(null),du=T(null),Y_=T({start:null,end:null}),q_=2*60*1e3;async function X_(){const e=await fetch(`${rr}/users`,{headers:{"x-api-key":ar}});if(!e.ok)throw new Error(`Failed to fetch students: ${e.status}`);return(await e.json()).users||[]}async function Q_(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${rr}/observations${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":ar}});if(!n.ok)throw new Error(`Failed to fetch observations: ${n.status}`);return(await n.json()).observations||[]}async function Z_(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${rr}/observations/metadata${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":ar}});if(!n.ok)throw new Error(`Failed to fetch observation metadata: ${n.status}`);return await n.json()}async function e1(e,t){try{return{...await xa(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}const kr=new Map;async function t1(e,t){var o;if(kr.has(e))return kr.get(e);const s=hs(),n=((o=s.getViewerId)==null?void 0:o.call(s))||null;if(!n)return console.error("No viewer ID available"),null;try{const r=await fetch(`${rr}/grants?grantee_id=${n}`,{headers:{"x-api-key":ar}});if(!r.ok)return console.error("Failed to fetch grants:",r.status),null;const{grants:a}=await r.json(),l=a.find(u=>u.grantor_id===e);if(!l)return console.warn("No grant found from student:",e),null;const c=await Sm(l.encrypted_payload,t);return kr.set(e,c),c}catch(r){return console.error("Failed to get student secret key:",r),null}}async function fu(e=!1){if(!hs().isAuthenticated.value)return{success:!1,error:"Not authenticated"};if(!e&&jn.value&&Date.now()-new Date(jn.value).getTime()<q_)return{success:!0,cached:!0};dn.value=!0,fn.value=null;try{const[s,n]=await Promise.all([X_(),Z_({limit:1e4})]);return ds.value=s,Mt.value=n.observations||[],jn.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load dashboard:",s),fn.value=s.message,{success:!1,error:s.message}}finally{dn.value=!1}}async function s1(e){var n;const t=hs();if(!t.isAuthenticated.value)return{success:!1,error:"Not authenticated"};const s=((n=t.getPrivateKey)==null?void 0:n.call(t))||null;if(!s)return{success:!1,error:"Private key not available"};dn.value=!0,fn.value=null;try{const o=await t1(e,s);if(!o)return{success:!1,error:"No sharing grant from this student or failed to decrypt"};const a=(await Q_({userId:e,limit:1e3})).map(u=>e1(u,o));return{success:!0,observations:(await Promise.all(a)).filter(u=>u!==null)}}catch(o){return console.error("Failed to load student observations:",o),fn.value=o.message,{success:!1,error:o.message}}finally{dn.value=!1}}function Ql(){const e=new Map;for(const t of ds.value){const s=t.classroom||"ad-hoc";e.has(s)||e.set(s,{id:s,name:vu(s),studentCount:0}),e.get(s).studentCount++}return Array.from(e.values()).sort((t,s)=>t.name.localeCompare(s.name))}function vu(e){return!e||e==="ad-hoc"?"Ad-hoc Users":e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function n1(e=null){return e?ds.value.filter(t=>e==="ad-hoc"?!t.classroom:t.classroom===e):ds.value}function o1(e){const t=Mt.value.filter(u=>e==="ad-hoc"?!u.classroom:u.classroom===e),s=t.length,n=t.filter(u=>u.correct).length,o=new Set(t.map(u=>u.user_id)),r=new Date().toISOString().split("T")[0],a=t.filter(u=>{var d;return(d=u.timestamp)==null?void 0:d.startsWith(r)}),l=new Date(Date.now()-7*24*60*60*1e3).toISOString(),c=t.filter(u=>u.timestamp>=l);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,activeStudents:o.size,todayCount:a.length,weekCount:c.length}}function r1(e){var p;const t=Mt.value.filter(v=>v.user_id===e),s=t.length,n=t.filter(v=>v.correct).length,o=new Date().toISOString().split("T")[0],r=t.filter(v=>{var m;return(m=v.timestamp)==null?void 0:m.startsWith(o)}),a=new Date(Date.now()-7*24*60*60*1e3).toISOString(),l=t.filter(v=>v.timestamp>=a),c={};for(const v of t){const m=v.skill_path||"unknown";c[m]||(c[m]={total:0,correct:0}),c[m].total++,v.correct&&c[m].correct++}for(const v in c){const m=c[v];m.accuracy=m.total>0?Math.round(m.correct/m.total*100):0;const y=Qo(v);m.name=y.name,m.category=y.category}const d=((p=[...t].sort((v,m)=>new Date(m.timestamp)-new Date(v.timestamp))[0])==null?void 0:p.timestamp)||null,f=a1(t);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,todayCount:r.length,todayCorrect:r.filter(v=>v.correct).length,weekCount:l.length,weekCorrect:l.filter(v=>v.correct).length,lastPractice:d,streak:f,skillStats:c}}function a1(e){const t=new Set(e.map(l=>{var c;return(c=l.timestamp)==null?void 0:c.split("T")[0]}).filter(Boolean)),s=Array.from(t).sort().reverse();if(s.length===0)return 0;const n=new Date().toISOString().split("T")[0],o=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(s[0]!==n&&s[0]!==o)return 0;let r=1,a=new Date(s[0]);for(let l=1;l<s.length;l++){const c=new Date(s[l]);if(Math.round((a-c)/(24*60*60*1e3))===1)r++,a=c;else break}return r}function l1(e,t=10){return Mt.value.filter(s=>s.user_id===e&&!s.correct).sort((s,n)=>new Date(n.timestamp)-new Date(s.timestamp)).slice(0,t)}async function i1(){if(Xl.value)return;const e=hs();await e.initialize(),e.isAuthenticated.value&&await fu(),Xl.value=!0}function c1(){ds.value=[],Mt.value=[],cu.value=[],jn.value=null,uu.value=null,du.value=null}function lr(){const e=O(()=>ds.value.length),t=O(()=>Mt.value.length),s=O(()=>{const l=Mt.value.length;if(l===0)return 0;const c=Mt.value.filter(u=>u.correct).length;return Math.round(c/l*100)}),n=O(()=>Ql()),o=O(()=>dn.value),r=O(()=>fn.value!==null),a=O(()=>ds.value.length>0||Mt.value.length>0);return{students:ds,observations:Mt,decryptedObservations:cu,loading:dn,error:fn,lastFetchedAt:jn,selectedClassroom:uu,selectedStudent:du,dateRange:Y_,totalStudents:e,totalObservations:t,overallAccuracy:s,classrooms:n,isLoading:o,hasError:r,hasData:a,initialize:i1,loadDashboard:fu,loadStudentObservations:s1,getClassrooms:Ql,getStudentsByClassroom:n1,getClassroomStats:o1,getStudentStats:r1,getRecentErrors:l1,clearCache:c1,formatClassroomName:vu}}const u1={class:"teacher-login"},d1={class:"login-card"},f1={class:"form-group"},v1={class:"form-group"},m1={class:"key-options"},p1={key:1,class:"file-upload"},h1={for:"keyFile",class:"file-label"},g1={key:0},y1={key:1,class:"file-name"},b1={class:"form-group checkbox-group"},_1={class:"checkbox-label"},w1={key:0,class:"error-message"},S1=["disabled"],C1={key:0},$1={key:1},k1={class:"login-footer"},x1={__name:"TeacherLogin",emits:["authenticated","back"],setup(e,{emit:t}){const s=t,n=hs(),o=T(""),r=T(""),a=T("paste"),l=T(""),c=T(!1),u=T(!1),d=T("");function f(v){const m=v.target.files[0];if(!m)return;l.value=m.name;const y=new FileReader;y.onload=N=>{r.value=N.target.result},y.readAsText(m)}async function p(){if(d.value="",!o.value){d.value="Please enter the password";return}if(!r.value.trim()){d.value="Please provide your private key";return}u.value=!0;try{const v=await n.login(o.value,r.value.trim(),c.value);v.success?s("authenticated"):d.value=v.error||"Authentication failed"}catch(v){console.error("Login error:",v),d.value=v.message||"An unexpected error occurred"}finally{u.value=!1}}return(v,m)=>(h(),g("div",u1,[i("div",d1,[m[9]||(m[9]=i("h1",null,"Teacher Dashboard",-1)),m[10]||(m[10]=i("p",{class:"subtitle"},"Enter your credentials to view student progress",-1)),i("form",{onSubmit:Et(p,["prevent"]),class:"login-form"},[i("div",f1,[m[6]||(m[6]=i("label",{for:"password"},"Password",-1)),De(i("input",{id:"password",type:"password","onUpdate:modelValue":m[0]||(m[0]=y=>o.value=y),placeholder:"Enter teacher password",required:"",autocomplete:"current-password"},null,512),[[At,o.value]])]),i("div",v1,[m[7]||(m[7]=i("label",null,"Private Key",-1)),i("div",m1,[i("button",{type:"button",class:oe(["key-option",{active:a.value==="paste"}]),onClick:m[1]||(m[1]=y=>a.value="paste")}," Paste Key ",2),i("button",{type:"button",class:oe(["key-option",{active:a.value==="file"}]),onClick:m[2]||(m[2]=y=>a.value="file")}," Upload File ",2)]),a.value==="paste"?De((h(),g("textarea",{key:0,"onUpdate:modelValue":m[3]||(m[3]=y=>r.value=y),placeholder:"Paste your private key here (PEM format or base64)",rows:"6",class:"key-textarea"},null,512)),[[At,r.value]]):(h(),g("div",p1,[i("input",{type:"file",id:"keyFile",accept:".pem,.key,.txt",onChange:f,class:"file-input"},null,32),i("label",h1,[l.value?(h(),g("span",y1,S(l.value),1)):(h(),g("span",g1,"Choose key file..."))])]))]),i("div",b1,[i("label",_1,[De(i("input",{type:"checkbox","onUpdate:modelValue":m[4]||(m[4]=y=>c.value=y)},null,512),[[Yo,c.value]]),m[8]||(m[8]=i("span",null,"Remember my key on this device (encrypted)",-1))])]),d.value?(h(),g("div",w1,S(d.value),1)):P("",!0),i("button",{type:"submit",class:"login-btn",disabled:u.value},[u.value?(h(),g("span",C1,"Authenticating...")):(h(),g("span",$1,"Sign In"))],8,S1)],32),i("div",k1,[i("a",{href:"#",onClick:m[5]||(m[5]=Et(y=>v.$emit("back"),["prevent"]))}," Back to Practice")])])]))}},A1=me(x1,[["__scopeId","data-v-18d7c371"]]),mu="bridge-classroom-anon-mode",N1="BridgeClassroom-Anon",xr=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Zl=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function O1(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function T1(e,t){const s=`${N1}:${e} ${t}`,n=O1(s),o=Number(n%BigInt(xr.length)),r=Number(n/BigInt(xr.length)%BigInt(Zl.length));return{firstName:xr[o],lastName:Zl[r]}}const $n=T(localStorage.getItem(mu)==="true");function ir(){function e(){$n.value=!$n.value,localStorage.setItem(mu,$n.value.toString())}function t(o){return $n.value?T1(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:r,lastName:a}=t(o);return`${r} ${a}`}function n(o){const{firstName:r,lastName:a}=t(o),l=(r==null?void 0:r.charAt(0))||"",c=(a==null?void 0:a.charAt(0))||"";return(l+c).toUpperCase()||"?"}return{isAnonymized:$n,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const I1={class:"classroom-list"},E1={class:"dashboard-header"},R1={class:"header-left"},D1={key:0,class:"last-updated"},P1={class:"header-actions"},L1=["disabled"],B1={key:0,class:"loading"},U1={key:1,class:"error-state"},M1={key:2,class:"dashboard-content"},F1={class:"overall-stats"},j1={class:"stat-card"},H1={class:"stat-value"},K1={class:"stat-card"},V1={class:"stat-value"},W1={class:"stat-card accent"},G1={class:"stat-value"},z1={class:"stat-card"},J1={class:"stat-value"},Y1={class:"classrooms-section"},q1={class:"classroom-grid"},X1=["onClick"],Q1={class:"classroom-header"},Z1={class:"student-count"},ew={class:"classroom-stats"},tw={class:"mini-stat"},sw={class:"value"},nw={class:"mini-stat"},ow={class:"mini-stat"},rw={class:"value"},aw={class:"classroom-activity"},lw={key:0,class:"activity-badge"},iw={key:1,class:"activity-badge week"},cw={key:0,class:"empty-state"},uw={key:0,class:"recent-section"},dw={class:"recent-list"},fw=["onClick"],vw={class:"student-avatar"},mw={class:"student-info"},pw={class:"student-name"},hw={class:"student-classroom"},gw={class:"student-quick-stats"},yw={__name:"ClassroomList",emits:["selectClassroom","selectStudent","logout"],setup(e,{emit:t}){const s=t,n=lr(),o=hs(),r=ir();ft(async()=>{await n.initialize()});async function a(){await n.loadDashboard(!0)}function l(){o.logout(),n.clearCache(),s("logout")}function c(v){return n.getClassroomStats(v)}function u(v){return n.getStudentStats(v).accuracy}const d=O(()=>n.students.value.map(m=>({...m,stats:n.getStudentStats(m.id)})).filter(m=>m.stats.lastPractice).sort((m,y)=>new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice)).slice(0,5));function f(v){const m=new Date(v),N=new Date-m,C=Math.floor(N/6e4);if(C<1)return"just now";if(C<60)return`${C}m ago`;const b=Math.floor(C/60);return b<24?`${b}h ago`:m.toLocaleDateString()}function p(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(h(),g("div",I1,[i("header",E1,[i("div",R1,[m[1]||(m[1]=i("h1",null,"Teacher Dashboard",-1)),R(n).lastFetchedAt.value?(h(),g("span",D1," Updated "+S(f(R(n).lastFetchedAt.value)),1)):P("",!0)]),i("div",P1,[i("button",{class:oe(["anon-btn",{active:R(r).isAnonymized.value}]),onClick:m[0]||(m[0]=y=>R(r).toggleAnonymize())},S(R(r).isAnonymized.value?"Clear":"Anon"),3),i("button",{class:"refresh-btn",onClick:a,disabled:R(n).isLoading.value},S(R(n).isLoading.value?"Loading...":"Refresh"),9,L1),i("button",{class:"logout-btn",onClick:l},"Logout")])]),R(n).isLoading.value&&!R(n).hasData.value?(h(),g("div",B1,[...m[2]||(m[2]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading dashboard data...",-1)])])):R(n).hasError.value?(h(),g("div",U1,[i("p",null,"Failed to load dashboard: "+S(R(n).error.value),1),i("button",{onClick:a},"Try Again")])):(h(),g("div",M1,[i("section",F1,[i("div",j1,[i("div",H1,S(R(n).totalStudents.value),1),m[3]||(m[3]=i("div",{class:"stat-label"},"Total Students",-1))]),i("div",K1,[i("div",V1,S(R(n).totalObservations.value),1),m[4]||(m[4]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",W1,[i("div",G1,S(R(n).overallAccuracy.value)+"%",1),m[5]||(m[5]=i("div",{class:"stat-label"},"Overall Accuracy",-1))]),i("div",z1,[i("div",J1,S(R(n).classrooms.value.length),1),m[6]||(m[6]=i("div",{class:"stat-label"},"Classrooms",-1))])]),i("section",Y1,[m[11]||(m[11]=i("h2",null,"Classrooms",-1)),i("div",q1,[(h(!0),g(Z,null,ie(R(n).classrooms.value,y=>(h(),g("div",{key:y.id,class:"classroom-card",onClick:N=>v.$emit("selectClassroom",y.id)},[i("div",Q1,[i("h3",null,S(y.name),1),i("span",Z1,S(y.studentCount)+" students",1)]),i("div",ew,[i("div",tw,[i("span",sw,S(c(y.id).totalObservations),1),m[7]||(m[7]=i("span",{class:"label"},"bids",-1))]),i("div",nw,[i("span",{class:oe(["value accuracy",p(c(y.id).accuracy)])},S(c(y.id).accuracy)+"% ",3),m[8]||(m[8]=i("span",{class:"label"},"accuracy",-1))]),i("div",ow,[i("span",rw,S(c(y.id).activeStudents),1),m[9]||(m[9]=i("span",{class:"label"},"active",-1))])]),i("div",aw,[c(y.id).todayCount>0?(h(),g("span",lw,S(c(y.id).todayCount)+" today ",1)):P("",!0),c(y.id).weekCount>0?(h(),g("span",iw,S(c(y.id).weekCount)+" this week ",1)):P("",!0)])],8,X1))),128))]),R(n).classrooms.value.length===0?(h(),g("div",cw,[...m[10]||(m[10]=[i("p",null,"No classrooms found. Students will appear here once they register.",-1)])])):P("",!0)]),d.value.length>0?(h(),g("section",uw,[m[12]||(m[12]=i("h2",null,"Recently Active Students",-1)),i("div",dw,[(h(!0),g(Z,null,ie(d.value,y=>(h(),g("div",{key:y.id,class:"recent-item",onClick:N=>v.$emit("selectStudent",y.id)},[i("div",vw,S(R(r).displayInitials(y)),1),i("div",mw,[i("span",pw,S(R(r).displayFullName(y)),1),i("span",hw,S(R(n).formatClassroomName(y.classroom)),1)]),i("div",gw,[i("span",{class:oe(["accuracy",p(u(y.id))])},S(u(y.id))+"% ",3)])],8,fw))),128))])])):P("",!0)]))]))}},bw=me(yw,[["__scopeId","data-v-8c0b934b"]]),_w={class:"classroom-detail"},ww={class:"detail-header"},Sw={class:"header-info"},Cw={class:"student-count"},$w={class:"stats-summary"},kw={class:"stat-card"},xw={class:"stat-value"},Aw={class:"stat-card accent"},Nw={class:"stat-value"},Ow={class:"stat-card"},Tw={class:"stat-value"},Iw={class:"stat-card"},Ew={class:"stat-value"},Rw={key:0,class:"skill-profile"},Dw={class:"skill-bars"},Pw={class:"skill-info"},Lw={class:"skill-name"},Bw={class:"skill-count"},Uw={class:"skill-bar-container"},Mw={class:"skill-accuracy"},Fw={class:"students-section"},jw={class:"section-header"},Hw={class:"sort-controls"},Kw={class:"student-grid"},Vw=["onClick"],Ww={class:"student-header"},Gw={class:"student-avatar"},zw={class:"student-name-container"},Jw={class:"student-name"},Yw={key:0,class:"last-active"},qw={key:1,class:"last-active never"},Xw={class:"student-stats"},Qw={class:"stat"},Zw={class:"value"},eS={class:"stat"},tS={class:"stat"},sS={class:"value"},nS={class:"student-activity"},oS={key:0,class:"activity today"},rS={key:1,class:"activity week"},aS={key:0,class:"empty-state"},lS={__name:"ClassroomDetail",props:{classroomId:{type:String,required:!0}},emits:["back","selectStudent"],setup(e){const t=e,s=lr(),n=ir(),o=T("name"),r=O(()=>s.formatClassroomName(t.classroomId)),a=O(()=>s.getStudentsByClassroom(t.classroomId).map(m=>({...m,stats:s.getStudentStats(m.id)}))),l=O(()=>s.getClassroomStats(t.classroomId)),c=O(()=>{const v={},m=s.observations.value.filter(y=>t.classroomId==="ad-hoc"?!y.classroom:y.classroom===t.classroomId);for(const y of m){const N=y.skill_path||"unknown";if(!v[N]){const C=Qo(N);v[N]={name:C.name,category:C.category,total:0,correct:0}}v[N].total++,y.correct&&v[N].correct++}for(const y in v){const N=v[y];N.accuracy=N.total>0?Math.round(N.correct/N.total*100):0}return v}),u=O(()=>{const v=Object.entries(c.value);return v.sort((m,y)=>y[1].total-m[1].total),Object.fromEntries(v.slice(0,8))}),d=O(()=>{const v=[...a.value];switch(o.value){case"accuracy":return v.sort((m,y)=>y.stats.accuracy-m.stats.accuracy);case"recent":return v.sort((m,y)=>m.stats.lastPractice?y.stats.lastPractice?new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice):-1:1);case"total":return v.sort((m,y)=>y.stats.totalObservations-m.stats.totalObservations);case"name":default:return v.sort((m,y)=>{const N=n.displayFullName(m).toLowerCase(),C=n.displayFullName(y).toLowerCase();return N.localeCompare(C)})}});function f(v){if(!v)return"";const m=new Date(v),y=new Date,N=new Date(y);return N.setDate(N.getDate()-1),m.toDateString()===y.toDateString()?"Today":m.toDateString()===N.toDateString()?"Yesterday":m.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function p(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(h(),g("div",_w,[i("header",ww,[i("button",{class:"back-btn",onClick:m[0]||(m[0]=y=>v.$emit("back"))},"  Back to Classrooms "),i("div",Sw,[i("h1",null,S(r.value),1),i("span",Cw,S(a.value.length)+" students",1)])]),i("section",$w,[i("div",kw,[i("div",xw,S(l.value.totalObservations),1),m[2]||(m[2]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",Aw,[i("div",Nw,S(l.value.accuracy)+"%",1),m[3]||(m[3]=i("div",{class:"stat-label"},"Class Accuracy",-1))]),i("div",Ow,[i("div",Tw,S(l.value.activeStudents),1),m[4]||(m[4]=i("div",{class:"stat-label"},"Active Students",-1))]),i("div",Iw,[i("div",Ew,S(l.value.weekCount),1),m[5]||(m[5]=i("div",{class:"stat-label"},"This Week",-1))])]),Object.keys(c.value).length>0?(h(),g("section",Rw,[m[6]||(m[6]=i("h2",null,"Class Skill Profile",-1)),i("div",Dw,[(h(!0),g(Z,null,ie(u.value,(y,N)=>(h(),g("div",{key:N,class:"skill-bar-row"},[i("div",Pw,[i("span",Lw,S(y.name),1),i("span",Bw,S(y.total)+" bids",1)]),i("div",Uw,[i("div",{class:oe(["skill-bar",p(y.accuracy)]),style:ss({width:y.accuracy+"%"})},null,6),i("span",Mw,S(y.accuracy)+"%",1)])]))),128))])])):P("",!0),i("section",Fw,[i("div",jw,[m[9]||(m[9]=i("h2",null,"Students",-1)),i("div",Hw,[m[8]||(m[8]=i("label",null,"Sort by:",-1)),De(i("select",{"onUpdate:modelValue":m[1]||(m[1]=y=>o.value=y)},[...m[7]||(m[7]=[i("option",{value:"name"},"Name",-1),i("option",{value:"accuracy"},"Accuracy",-1),i("option",{value:"recent"},"Recently Active",-1),i("option",{value:"total"},"Total Bids",-1)])],512),[[Un,o.value]])])]),i("div",Kw,[(h(!0),g(Z,null,ie(d.value,y=>(h(),g("div",{key:y.id,class:"student-card",onClick:N=>v.$emit("selectStudent",y.id)},[i("div",Ww,[i("div",Gw,S(R(n).displayInitials(y)),1),i("div",zw,[i("span",Jw,S(R(n).displayFullName(y)),1),y.stats.lastPractice?(h(),g("span",Yw," Last active: "+S(f(y.stats.lastPractice)),1)):(h(),g("span",qw,"No practice yet"))])]),i("div",Xw,[i("div",Qw,[i("span",Zw,S(y.stats.totalObservations),1),m[10]||(m[10]=i("span",{class:"label"},"bids",-1))]),i("div",eS,[i("span",{class:oe(["value",p(y.stats.accuracy)])},S(y.stats.accuracy)+"% ",3),m[11]||(m[11]=i("span",{class:"label"},"accuracy",-1))]),i("div",tS,[i("span",sS,S(y.stats.streak),1),m[12]||(m[12]=i("span",{class:"label"},"streak",-1))])]),i("div",nS,[y.stats.todayCount>0?(h(),g("span",oS,S(y.stats.todayCount)+" today ",1)):P("",!0),y.stats.weekCount>0?(h(),g("span",rS,S(y.stats.weekCount)+" this week ",1)):P("",!0)])],8,Vw))),128))]),a.value.length===0?(h(),g("div",aS,[...m[13]||(m[13]=[i("p",null,"No students in this classroom yet.",-1)])])):P("",!0)])]))}},iS=me(lS,[["__scopeId","data-v-b7ee4d85"]]),cS={class:"student-detail"},uS={class:"detail-header"},dS={class:"header-content"},fS={class:"student-avatar large"},vS={class:"header-info"},mS={class:"classroom"},pS={key:0,class:"last-active"},hS={key:0,class:"loading"},gS={key:1,class:"stats-overview"},yS={class:"stat-cards"},bS={class:"stat-card"},_S={class:"stat-value"},wS={class:"stat-card accent"},SS={class:"stat-value"},CS={class:"stat-card streak"},$S={class:"stat-value"},kS={class:"period-stats"},xS={class:"period"},AS={class:"period-numbers"},NS={class:"total"},OS={class:"correct"},TS={key:0,class:"accuracy"},IS={class:"period"},ES={class:"period-numbers"},RS={class:"total"},DS={class:"correct"},PS={key:0,class:"accuracy"},LS={key:2,class:"skill-section"},BS={class:"skill-list"},US={class:"skill-info"},MS={class:"skill-name"},FS={class:"skill-category"},jS={class:"skill-bar-container"},HS={class:"skill-stats"},KS={class:"count"},VS={key:3,class:"errors-section"},WS={class:"error-list"},GS={class:"error-header"},zS={class:"error-skill"},JS={class:"error-date"},YS={key:0,class:"error-details"},qS={class:"bid-comparison"},XS={class:"bid wrong"},QS={class:"bid correct"},ZS={key:1,class:"error-context"},e0={key:4,class:"recommendations-section"},t0={class:"recommendation-list"},s0={class:"rec-skill"},n0={class:"rec-reason"},o0={class:"rec-stats"},r0={__name:"StudentDetail",props:{studentId:{type:String,required:!0}},emits:["back"],setup(e){const t=e,s=lr(),n=ir(),o=T(!1),r=O(()=>s.students.value.find(C=>C.id===t.studentId)),a=O(()=>r.value?n.displayFullName(r.value):"Unknown Student"),l=O(()=>r.value?n.displayInitials(r.value):"?"),c=O(()=>{var C;return s.formatClassroomName((C=r.value)==null?void 0:C.classroom)}),u=O(()=>s.getStudentStats(t.studentId)),d=O(()=>{const C=u.value.skillStats||{};return Object.entries(C).map(([b,$])=>({path:b,...$})).filter(b=>b.path!=="unknown"&&b.path!=="unknown/unknown").sort((b,$)=>$.total-b.total)}),f=O(()=>s.getRecentErrors(t.studentId,5)),p=O(()=>{const C=d.value,b=[];for(const $ of C)$.total>=3&&$.accuracy<60&&b.push({skill:$.path,name:$.name,accuracy:$.accuracy,total:$.total,reason:$.accuracy<40?"Struggling with this skill":"Room for improvement"});return b.sort(($,D)=>$.accuracy-D.accuracy).slice(0,3)});ft(async()=>{await v()}),it(()=>t.studentId,async()=>{await v()});async function v(){o.value=!0;try{}finally{o.value=!1}}function m(C){if(!C)return"";const b=new Date(C),$=new Date,D=new Date($);return D.setDate(D.getDate()-1),b.toDateString()===$.toDateString()?"Today at "+b.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):b.toDateString()===D.toDateString()?"Yesterday":b.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function y(C){return C>=80?"excellent":C>=60?"good":C>=40?"fair":"needs-work"}function N(C){return!C||C==="unknown"?"General Practice":Qo(C).name}return(C,b)=>(h(),g("div",cS,[i("header",uS,[i("button",{class:"back-btn",onClick:b[0]||(b[0]=$=>C.$emit("back"))},"  Back "),i("div",dS,[i("div",fS,S(l.value),1),i("div",vS,[i("h1",null,S(a.value),1),i("span",mS,S(c.value),1),u.value.lastPractice?(h(),g("span",pS," Last active: "+S(m(u.value.lastPractice)),1)):P("",!0)])])]),o.value?(h(),g("div",hS,[...b[1]||(b[1]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):(h(),g("section",gS,[i("div",yS,[i("div",bS,[i("div",_S,S(u.value.totalObservations),1),b[2]||(b[2]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",wS,[i("div",SS,S(u.value.accuracy)+"%",1),b[3]||(b[3]=i("div",{class:"stat-label"},"Overall Accuracy",-1))]),i("div",CS,[i("div",$S,S(u.value.streak),1),b[4]||(b[4]=i("div",{class:"stat-label"},"Day Streak",-1))])]),i("div",kS,[i("div",xS,[b[5]||(b[5]=i("h4",null,"Today",-1)),i("div",AS,[i("span",NS,S(u.value.todayCount)+" bids",1),i("span",OS,S(u.value.todayCorrect)+" correct",1),u.value.todayCount>0?(h(),g("span",TS,S(Math.round(u.value.todayCorrect/u.value.todayCount*100))+"% ",1)):P("",!0)])]),i("div",IS,[b[6]||(b[6]=i("h4",null,"This Week",-1)),i("div",ES,[i("span",RS,S(u.value.weekCount)+" bids",1),i("span",DS,S(u.value.weekCorrect)+" correct",1),u.value.weekCount>0?(h(),g("span",PS,S(Math.round(u.value.weekCorrect/u.value.weekCount*100))+"% ",1)):P("",!0)])])])])),d.value.length>0?(h(),g("section",LS,[b[7]||(b[7]=i("h2",null,"Skill Breakdown",-1)),i("div",BS,[(h(!0),g(Z,null,ie(d.value,$=>(h(),g("div",{key:$.path,class:"skill-row"},[i("div",US,[i("span",MS,S($.name),1),i("span",FS,S($.category),1)]),i("div",jS,[i("div",{class:oe(["skill-bar",y($.accuracy)]),style:ss({width:$.accuracy+"%"})},null,6)]),i("div",HS,[i("span",{class:oe(["accuracy",y($.accuracy)])},S($.accuracy)+"% ",3),i("span",KS,S($.total)+" bids",1)])]))),128))])])):P("",!0),f.value.length>0?(h(),g("section",VS,[b[9]||(b[9]=i("h2",null,"Recent Errors",-1)),b[10]||(b[10]=i("p",{class:"section-description"},"These are the most recent incorrect bids that may need review.",-1)),i("div",WS,[(h(!0),g(Z,null,ie(f.value,$=>(h(),g("div",{key:$.id,class:"error-card"},[i("div",GS,[i("span",zS,S(N($.skill_path)),1),i("span",JS,S(m($.timestamp)),1)]),$.student_bid||$.expected_bid?(h(),g("div",YS,[i("div",qS,[i("span",XS,S($.student_bid||"?"),1),b[8]||(b[8]=i("span",{class:"arrow"},"",-1)),i("span",QS,S($.expected_bid||"?"),1)])])):P("",!0),$.deal_subfolder?(h(),g("div",ZS," Deal #"+S($.deal_number||"?")+" from "+S($.deal_subfolder),1)):P("",!0)]))),128))])])):P("",!0),p.value.length>0?(h(),g("section",e0,[b[11]||(b[11]=i("h2",null,"Recommended Practice",-1)),i("div",t0,[(h(!0),g(Z,null,ie(p.value,$=>(h(),g("div",{key:$.skill,class:"recommendation-card"},[i("div",s0,S($.name),1),i("div",n0,S($.reason),1),i("div",o0,[i("span",null,S($.accuracy)+"% accuracy",1),i("span",null,S($.total)+" attempts",1)])]))),128))])])):P("",!0)]))}},a0=me(r0,[["__scopeId","data-v-5f3f434e"]]),l0={class:"teacher-dashboard"},i0={__name:"TeacherDashboard",emits:["close"],setup(e){const t=hs(),s=lr(),n=T("classrooms"),o=T(null),r=T(null),a=T(null);ft(async()=>{await t.initialize()});function l(){n.value="classrooms",s.loadDashboard()}function c(){n.value="classrooms",o.value=null,r.value=null}function u(p){o.value=p,a.value="classrooms",n.value="classroom"}function d(p){r.value=p,a.value=n.value,n.value="student"}function f(){a.value==="classroom"?n.value="classroom":n.value="classrooms"}return(p,v)=>(h(),g("div",l0,[R(t).isAuthenticated.value?(h(),g(Z,{key:1},[n.value==="classrooms"?(h(),xe(bw,{key:0,onSelectClassroom:u,onSelectStudent:d,onLogout:c})):n.value==="classroom"?(h(),xe(iS,{key:1,classroomId:o.value,onBack:v[1]||(v[1]=m=>n.value="classrooms"),onSelectStudent:d},null,8,["classroomId"])):n.value==="student"?(h(),xe(a0,{key:2,studentId:r.value,onBack:f},null,8,["studentId"])):P("",!0)],64)):(h(),xe(A1,{key:0,onAuthenticated:l,onBack:v[0]||(v[0]=m=>p.$emit("close"))}))]))}},c0=me(i0,[["__scopeId","data-v-50a55ca1"]]),u0={class:"teacher-student-list"},d0={class:"teacher-header"},f0={class:"header-actions"},v0=["value"],m0={key:0,class:"loading-state"},p0={key:1,class:"error-state"},h0={key:2,class:"empty-state"},g0={key:3,class:"empty-state"},y0={key:4,class:"student-table-wrap"},b0={class:"student-table"},_0=["onClick"],w0={class:"col-name"},S0={class:"student-name-cell"},C0={class:"avatar"},$0={class:"col-mastery"},k0={class:"mastery-pills"},x0={key:0,class:"pill pill-green"},A0={key:1,class:"pill pill-orange"},N0={key:2,class:"pill pill-yellow"},O0={key:3,class:"pill pill-red"},T0={key:4,class:"no-data-label"},I0={class:"col-active"},E0={class:"col-lessons"},R0={class:"recent-lessons"},D0={key:0,class:"no-data-label"},P0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=or(),n=hn(),o=Ue(),r=ir(),a=T("all"),l=T({});ft(async()=>{await s.loadAllStudentSummaries(),await c()});async function c(){const C=o.currentUser.value;if(!C)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(C.id);const b={};await Promise.all(n.teacherClassrooms.value.map(async $=>{const D=await n.fetchClassroomDetail($.id);D!=null&&D.success&&(b[$.id]=new Set(D.classroom.members.map(V=>V.student_id)))})),l.value=b}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await c()}const d=O(()=>{const C=new Set;for(const b of Object.values(l.value))for(const $ of b)C.add($);return C}),f=O(()=>{const C=s.students.value;if(a.value==="all")return C;if(a.value==="none")return C.filter($=>!d.value.has($.id));const b=l.value[a.value];return b?C.filter($=>b.has($.id)):C}),p=O(()=>[...f.value].sort((C,b)=>{var V,ee;const $=((V=v.value[C.id])==null?void 0:V.lastObservationTime)||"",D=((ee=v.value[b.id])==null?void 0:ee.lastObservationTime)||"";return D!==$?D.localeCompare($):y(C).localeCompare(y(b))})),v=O(()=>{const C={};for(const b of s.students.value)C[b.id]=s.getStudentMasterySummary(b.id);return C}),m=O(()=>{const C={};for(const b of s.students.value)C[b.id]=s.getStudentRecentLessons(b.id);return C});function y(C){return r.displayFullName(C)}function N(C){return r.displayInitials(C)}return(C,b)=>(h(),g("div",u0,[i("header",d0,[b[5]||(b[5]=i("h2",null,"My Students",-1)),i("div",f0,[R(n).teacherClassrooms.value.length?De((h(),g("select",{key:0,"onUpdate:modelValue":b[0]||(b[0]=$=>a.value=$),class:"filter-select"},[b[3]||(b[3]=i("option",{value:"all"},"All Students",-1)),(h(!0),g(Z,null,ie(R(n).teacherClassrooms.value,$=>(h(),g("option",{key:$.id,value:$.id},S($.name),9,v0))),128)),b[4]||(b[4]=i("option",{value:"none"},"No Classroom",-1))],512)),[[Un,a.value]]):P("",!0),i("button",{class:oe(["anon-btn",{active:R(r).isAnonymized.value}]),onClick:b[1]||(b[1]=$=>R(r).toggleAnonymize())},S(R(r).isAnonymized.value?"Clear":"Anon"),3),i("button",{class:"secondary-btn",onClick:u},"Refresh"),i("button",{class:"secondary-btn",onClick:b[2]||(b[2]=$=>C.$emit("close"))},"Back")])]),R(s).loading.value?(h(),g("div",m0,[...b[6]||(b[6]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):R(s).error.value?(h(),g("div",p0,[i("p",null,"Failed to load: "+S(R(s).error.value),1),i("button",{onClick:u},"Try Again")])):R(s).students.value.length===0?(h(),g("div",h0,[...b[7]||(b[7]=[i("h3",null,"No Students Yet",-1),i("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(h(),g("div",g0,[...b[8]||(b[8]=[i("h3",null,"No Matching Students",-1),i("p",null,"No students match the selected filter.",-1)])])):(h(),g("div",y0,[i("table",b0,[b[9]||(b[9]=i("thead",null,[i("tr",null,[i("th",{class:"col-name"},"Student"),i("th",{class:"col-mastery"},"Mastery"),i("th",{class:"col-active"},"Last Active"),i("th",{class:"col-lessons"},"Recent Lessons")])],-1)),i("tbody",null,[(h(!0),g(Z,null,ie(p.value,$=>{var D,V,ee,K,q,Y,de;return h(),g("tr",{key:$.id,class:"student-row",onClick:ue=>C.$emit("select-student",$.id,y($))},[i("td",w0,[i("div",S0,[i("div",C0,S(N($)),1),i("span",null,S(y($)),1)])]),i("td",$0,[i("div",k0,[(D=v.value[$.id])!=null&&D.green?(h(),g("span",x0,S(v.value[$.id].green),1)):P("",!0),(V=v.value[$.id])!=null&&V.orange?(h(),g("span",A0,S(v.value[$.id].orange),1)):P("",!0),(ee=v.value[$.id])!=null&&ee.yellow?(h(),g("span",N0,S(v.value[$.id].yellow),1)):P("",!0),(K=v.value[$.id])!=null&&K.red?(h(),g("span",O0,S(v.value[$.id].red),1)):P("",!0),(q=v.value[$.id])!=null&&q.total?P("",!0):(h(),g("span",T0,"No data"))])]),i("td",I0,S(R(s).formatTimeSince((Y=v.value[$.id])==null?void 0:Y.lastObservationTime)),1),i("td",E0,[i("div",R0,[(h(!0),g(Z,null,ie(m.value[$.id],(ue,we)=>(h(),g("span",{key:we,class:"lesson-tag"},S(ue),1))),128)),(de=m.value[$.id])!=null&&de.length?P("",!0):(h(),g("span",D0,"-"))])])],8,_0)}),128))])])]))]))}},L0=me(P0,[["__scopeId","data-v-dd6d8e66"]]),B0={class:"teacher-student-detail"},U0={class:"detail-header"},M0={class:"student-info"},F0={class:"avatar"},j0={class:"last-active"},H0={key:0,class:"loading-state"},K0={key:1,class:"detail-content"},V0={key:0,class:"stats-row"},W0={class:"stat stat-green"},G0={key:0,class:"stat stat-orange"},z0={key:1,class:"stat stat-yellow"},J0={key:2,class:"stat stat-red"},Y0={key:3,class:"stat stat-grey"},q0={class:"mastery-section"},X0={key:0,class:"no-data"},Q0={key:1,class:"lesson-list"},Z0={class:"lesson-header"},eC=["onClick"],tC={class:"mastery-strip"},sC=["title","onClick"],nC={key:0,class:"medal gold-medal"},oC={key:1,class:"medal silver-medal"},rC={class:"board-num"},aC={class:"progress-section"},lC={key:0,class:"no-data"},iC={key:1},cC={class:"day-header"},uC={class:"day-date"},dC={class:"day-summary"},fC={class:"day-lessons"},vC=["onClick"],mC={class:"day-lesson-counts"},pC={key:0,class:"count count-green"},hC={key:1,class:"count count-yellow"},gC={key:2,class:"count count-orange"},yC={key:3,class:"count count-red"},bC={class:"observation-total"},_C={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=or(),r=pn(),a=Xt(),l=T(!1),c=O(()=>s.studentName.split(" ").map($=>$[0]||"").join("").toUpperCase());ft(async()=>{o.studentObservations.value[s.studentId]||(l.value=!0,await o.fetchStudentObservations(s.studentId),l.value=!1)});const u=O(()=>o.studentObservations.value[s.studentId]||[]),d=O(()=>o.getStudentMasterySummary(s.studentId)),f=O(()=>o.formatTimeSince(d.value.lastObservationTime)),p=O(()=>{const b=u.value;return b.length===0?[]:r.extractLessonsFromObservations(b).map(D=>{const V=r.computeBoardMastery(b,D.subfolder,D.boardNumbers),ee=r.computeLessonAchievement(V);return{...D,boardMastery:V,achievement:ee.achievement}}).sort((D,V)=>m(D.subfolder).localeCompare(m(V.subfolder)))});it(p,b=>{r.fetchMissingBoardCounts(b.map($=>$.subfolder))},{immediate:!0});const v=O(()=>{const b=u.value;if(b.length===0)return[];const $={};for(const V of b){const ee=y(V.timestamp);$[ee]||($[ee]=[]),$[ee].push(V)}return Object.keys($).sort().reverse().slice(0,10).map(V=>{const ee=$[V],K={};for(const de of ee){const ue=de.deal_subfolder,we=de.deal_number;!ue||we==null||(K[ue]||(K[ue]={}),K[ue][we]||(K[ue][we]=[]),K[ue][we].push(de))}const q=Object.entries(K).map(([de,ue])=>{const we={green:0,yellow:0,orange:0,red:0};for(const[Le,je]of Object.entries(ue)){const Ge=b.filter(Q=>Q.deal_subfolder===de&&Q.deal_number===Number(Le)).sort((Q,fe)=>Q.timestamp.localeCompare(fe.timestamp)),ge=r.calculateCurrentStatus(Ge);we[ge]!==void 0?we[ge]++:we.green++}return{subfolder:de,...we}}).sort((de,ue)=>m(de.subfolder).localeCompare(m(ue.subfolder))),Y=q.reduce((de,ue)=>de+ue.green+ue.yellow+ue.orange+ue.red,0);return{date:V,lessons:q,totalBoards:Y}})});function m(b){return a.formatLessonName(b)}function y(b){const $=new Date(b),D=$.getFullYear(),V=String($.getMonth()+1).padStart(2,"0"),ee=String($.getDate()).padStart(2,"0");return`${D}-${V}-${ee}`}function N(b){const $=new Date(b+"T00:00:00"),D=new Date,V=y(D),ee=new Date(D);ee.setDate(ee.getDate()-1);const K=y(ee);return b===V?"Today":b===K?"Yesterday":$.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function C(b){const $={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${b.boardNumber}: ${$[b.status]}`}return(b,$)=>(h(),g("div",B0,[i("header",U0,[i("button",{class:"back-btn",onClick:$[0]||($[0]=D=>b.$emit("back"))}," Students"),i("div",M0,[i("div",F0,S(c.value),1),i("div",null,[i("h2",null,S(e.studentName),1),i("span",j0,"Last active: "+S(f.value),1)])])]),l.value?(h(),g("div",H0,[...$[1]||($[1]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):(h(),g("div",K0,[d.value.total>0?(h(),g("div",V0,[i("div",W0,S(d.value.green)+" Green",1),d.value.orange?(h(),g("div",G0,S(d.value.orange)+" Orange",1)):P("",!0),d.value.yellow?(h(),g("div",z0,S(d.value.yellow)+" Yellow",1)):P("",!0),d.value.red?(h(),g("div",J0,S(d.value.red)+" Red",1)):P("",!0),d.value.grey?(h(),g("div",Y0,S(d.value.grey)+" Grey",1)):P("",!0)])):P("",!0),i("section",q0,[$[2]||($[2]=i("h3",null,"Lesson Mastery",-1)),p.value.length===0?(h(),g("div",X0," No lesson data available yet. ")):(h(),g("div",Q0,[(h(!0),g(Z,null,ie(p.value,D=>(h(),g("div",{key:D.subfolder,class:"lesson-row"},[i("div",Z0,[i("button",{class:"lesson-name lesson-link",onClick:V=>n("navigate-to-lesson",D.subfolder)},S(m(D.subfolder)),9,eC),D.achievement!=="none"?(h(),g("span",{key:0,class:oe(["achievement-badge",D.achievement])},"  "+S(D.achievement==="gold"?"Gold":"Silver"),3)):P("",!0)]),i("div",tC,[(h(!0),g(Z,null,ie(D.boardMastery,V=>(h(),g("div",{key:V.boardNumber,class:oe(["board-circle board-clickable","status-"+V.status]),title:C(V),onClick:ee=>n("navigate-to-lesson",D.subfolder,V.boardNumber)},[V.achievement==="gold"?(h(),g("span",nC,"")):V.achievement==="silver"?(h(),g("span",oC,"")):P("",!0),i("span",rC,S(V.boardNumber),1)],10,sC))),128))])]))),128))]))]),i("section",aC,[$[3]||($[3]=i("h3",null,"Recent Activity",-1)),v.value.length===0?(h(),g("div",lC," No activity recorded yet. ")):(h(),g("div",iC,[(h(!0),g(Z,null,ie(v.value,D=>(h(),g("div",{key:D.date,class:"day-card"},[i("div",cC,[i("span",uC,S(N(D.date)),1),i("span",dC,S(D.totalBoards)+" board"+S(D.totalBoards!==1?"s":""),1)]),i("div",fC,[(h(!0),g(Z,null,ie(D.lessons,V=>(h(),g("div",{key:V.subfolder,class:"day-lesson-row"},[i("button",{class:"day-lesson-name lesson-link",onClick:ee=>n("navigate-to-lesson",V.subfolder)},S(m(V.subfolder)),9,vC),i("div",mC,[V.green?(h(),g("span",pC,S(V.green),1)):P("",!0),V.yellow?(h(),g("span",hC,S(V.yellow),1)):P("",!0),V.orange?(h(),g("span",gC,S(V.orange),1)):P("",!0),V.red?(h(),g("span",yC,S(V.red),1)):P("",!0)])]))),128))])]))),128))]))]),i("div",bC,S(u.value.length)+" observations",1)]))]))}},wC=me(_C,[["__scopeId","data-v-356ee2ef"]]),SC={key:0,class:"lesson-browser-loading"},CC={key:1,class:"lesson-browser-error"},$C={class:"lesson-browser"},kC={class:"browser-header"},xC={class:"browser-content"},AC=["onClick"],NC={class:"expand-icon"},OC={class:"category-name"},TC={class:"category-count"},IC={key:0,class:"lesson-list"},EC=["onClick"],RC={class:"lesson-name"},DC={class:"lesson-description"},PC={key:0,class:"error-message"},LC={key:3,class:"lesson-browser-inline"},BC={class:"browser-content-inline"},UC=["onClick"],MC={class:"expand-icon"},FC={class:"category-name"},jC={class:"category-count"},HC={key:0,class:"lesson-list"},KC=["onClick"],VC={class:"lesson-name"},WC={class:"lesson-description"},GC={key:0,class:"error-message-inline"},zC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=T(null),r=T(null),a=T(!1),l=T([]),c=T(null),u=T(null);it(()=>[s.visible,s.collection],([m,y])=>{m&&y&&!o.value&&d()},{immediate:!0});async function d(){var m;if(!((m=s.collection)!=null&&m.tocUrl)){r.value="No collection specified";return}a.value=!0,r.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),r.value=`Could not load lesson catalog. ${y.message}`}finally{a.value=!1}}function f(m){const y=l.value.indexOf(m);y>=0?l.value.splice(y,1):l.value.push(m)}function p(m){return m.includes("/")?m.split("/").pop():m}async function v(m,y){var N;u.value=null,c.value=m.id;try{const C=((N=s.collection)==null?void 0:N.baseUrl)||"",b=p(m.id),$=`${C}/${b}.pbn`,D=await fetch($);if(!D.ok)throw new Error(`Failed to load lesson: ${D.statusText}`);const V=await D.text();n("load",{subfolder:m.id,name:m.name,category:y.name,content:V}),s.inline||n("close")}catch(C){console.error("Error loading lesson:",C),u.value=`Could not load "${m.name}". The lesson may not be available yet.`}finally{c.value=null}}return(m,y)=>e.visible&&a.value?(h(),g("div",SC,[...y[2]||(y[2]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"Loading lessons...",-1)])])):e.visible&&r.value?(h(),g("div",CC,[i("p",null,S(r.value),1),i("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(h(),g("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Et(N=>m.$emit("close"),["self"]))},[i("div",$C,[i("div",kC,[i("h2",null,S(o.value.name),1),i("button",{class:"close-btn",onClick:y[0]||(y[0]=N=>m.$emit("close"))},"")]),i("div",xC,[(h(!0),g(Z,null,ie(o.value.categories,N=>(h(),g("div",{key:N.id,class:"category-section"},[i("button",{class:oe(["category-header",{expanded:l.value.includes(N.id)}]),onClick:C=>f(N.id)},[i("span",NC,S(l.value.includes(N.id)?"":""),1),i("span",OC,S(N.name),1),i("span",TC,S(N.lessons.length)+" lessons",1)],10,AC),l.value.includes(N.id)?(h(),g("div",IC,[(h(!0),g(Z,null,ie(N.lessons,C=>(h(),g("button",{key:C.id,class:oe(["lesson-item",{loading:c.value===C.id}]),onClick:b=>v(C,N)},[i("span",RC,S(C.name),1),i("span",DC,S(C.description),1)],10,EC))),128))])):P("",!0)]))),128))]),u.value?(h(),g("div",PC,S(u.value),1)):P("",!0)])])):e.visible&&e.inline&&o.value?(h(),g("div",LC,[i("div",BC,[(h(!0),g(Z,null,ie(o.value.categories,N=>(h(),g("div",{key:N.id,class:"category-section"},[i("button",{class:oe(["category-header",{expanded:l.value.includes(N.id)}]),onClick:C=>f(N.id)},[i("span",MC,S(l.value.includes(N.id)?"":""),1),i("span",FC,S(N.name),1),i("span",jC,S(N.lessons.length)+" lessons",1)],10,UC),l.value.includes(N.id)?(h(),g("div",HC,[(h(!0),g(Z,null,ie(N.lessons,C=>(h(),g("button",{key:C.id,class:oe(["lesson-item",{loading:c.value===C.id}]),onClick:b=>v(C,N)},[i("span",VC,S(C.name),1),i("span",WC,S(C.description),1)],10,KC))),128))])):P("",!0)]))),128))]),u.value?(h(),g("div",GC,S(u.value),1)):P("",!0)])):P("",!0)}},JC=me(zC,[["__scopeId","data-v-384a9c63"]]),YC={class:"viewer-controls"},qC={class:"viewer-body"},XC={key:0,class:"interaction-overlay"},QC={key:1,class:"viewer-loading"},ZC={key:2,class:"viewer-error"},e$=["src"],t$={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=jt({x:80,y:80}),n=jt({w:550,h:700}),o=T(!1),r=jt({x:0,y:0}),a=T(null),l=T(!1),c=T(null),u=O(()=>a.value?a.value+"#navpanes=0&toolbar=0":null);async function d(b){if(f(),!!b){l.value=!0,c.value=null;try{const $=await fetch(b);if(!$.ok)throw new Error("Failed to load PDF");const D=await $.blob(),V=new Blob([D],{type:"application/pdf"});a.value=URL.createObjectURL(V)}catch($){c.value="Could not load PDF",console.error("Failed to fetch intro PDF:",$)}finally{l.value=!1}}}function f(){a.value&&(URL.revokeObjectURL(a.value),a.value=null)}function p(){a.value&&window.open(a.value,"_blank")}it(()=>[t.visible,t.url],([b,$])=>{b&&$?d($):b||f()},{immediate:!0}),Li(f);function v(b){b.target.closest("button")||(o.value=!0,r.x=b.clientX-s.x,r.y=b.clientY-s.y,document.addEventListener("pointermove",m),document.addEventListener("pointerup",C))}function m(b){s.x=Math.max(0,b.clientX-r.x),s.y=Math.max(0,b.clientY-r.y)}function y(b){o.value=!0,r.x=b.clientX,r.y=b.clientY,r.startW=n.w,r.startH=n.h,document.addEventListener("pointermove",N),document.addEventListener("pointerup",C)}function N(b){n.w=Math.max(320,r.startW+(b.clientX-r.x)),n.h=Math.max(300,r.startH+(b.clientY-r.y))}function C(){o.value=!1,document.removeEventListener("pointermove",m),document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",C)}return(b,$)=>e.visible?(h(),g("div",{key:0,class:"intro-pdf-viewer",style:ss({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[i("div",{class:"viewer-titlebar",onPointerdown:v},[$[1]||($[1]=i("span",{class:"viewer-title"},"Lesson Introduction",-1)),i("div",YC,[i("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),i("button",{class:"viewer-btn close",onClick:$[0]||($[0]=D=>b.$emit("close")),title:"Close"},"")])],32),i("div",qC,[o.value?(h(),g("div",XC)):P("",!0),l.value?(h(),g("div",QC,"Loading PDF...")):c.value?(h(),g("div",ZC,S(c.value),1)):u.value?(h(),g("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,e$)):P("",!0)]),i("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):P("",!0)}},s$=me(t$,[["__scopeId","data-v-a97df645"]]),Us="https://api.bridge-classroom.com/api",Ms="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",kn=T([]),ws=T([]),Ar=T(null),_t=T(!1),Ne=T(null);function cr(){async function e(l){_t.value=!0,Ne.value=null;try{const c=await fetch(`${Us}/assignments?student_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Ms}});if(!c.ok){const d=await c.text();return Ne.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?kn.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(c){return console.error("Failed to fetch student assignments:",c),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function t(l){_t.value=!0,Ne.value=null;try{const c=await fetch(`${Us}/assignments?assigned_by=${encodeURIComponent(l)}`,{headers:{"x-api-key":Ms}});if(!c.ok){const d=await c.text();return Ne.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?ws.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(c){return console.error("Failed to fetch teacher assignments:",c),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function s(l){_t.value=!0,Ne.value=null;try{const c=await fetch(`${Us}/assignments?classroom_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Ms}});if(!c.ok){const d=await c.text();return Ne.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?u.assignments:(Ne.value=u.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),Ne.value="Unable to connect to server",[]}finally{_t.value=!1}}async function n(l){_t.value=!0,Ne.value=null;try{const c=await fetch(`${Us}/assignments/${encodeURIComponent(l)}`,{headers:{"x-api-key":Ms}});if(!c.ok){const d=await c.text();return Ne.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?Ar.value=u.assignment:Ne.value=u.error||"Failed to fetch assignment",u}catch(c){return console.error("Failed to fetch assignment detail:",c),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function o({exercise_id:l,classroom_id:c,student_id:u,assigned_by:d,due_at:f,sort_order:p}){_t.value=!0,Ne.value=null;try{const v=await fetch(`${Us}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ms},body:JSON.stringify({exercise_id:l,classroom_id:c||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:p??null})});if(!v.ok){const y=await v.text();return Ne.value=y||`Server error (${v.status})`,{success:!1,error:Ne.value}}const m=await v.json();return m.success?ws.value=[m.assignment,...ws.value]:Ne.value=m.error||"Failed to create assignment",m}catch(v){return console.error("Failed to create assignment:",v),Ne.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{_t.value=!1}}async function r(l){try{const c=await fetch(`${Us}/assignments/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":Ms}});if(!c.ok){const d=await c.text();return Ne.value=d||`Server error (${c.status})`,{success:!1,error:Ne.value}}const u=await c.json();return u.success&&(ws.value=ws.value.filter(d=>d.id!==l),kn.value=kn.value.filter(d=>d.id!==l)),u}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}function a(){kn.value=[],ws.value=[],Ar.value=null,_t.value=!1,Ne.value=null}return{studentAssignments:kn,teacherAssignments:ws,currentAssignment:Ar,loading:_t,error:Ne,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:r,reset:a}}const n$={class:"collection-icon"},o$={class:"collection-name"},r$={class:"collection-desc"},a$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(h(),g("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[i("span",n$,S(e.collection.icon),1),i("span",o$,S(e.collection.name),1),i("span",r$,S(e.collection.description),1)]))}},l$=me(a$,[["__scopeId","data-v-747be5b1"]]),i$={class:"collection-grid"},c$={class:"collection-cards"},u$={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=so().COLLECTIONS;return(n,o)=>(h(),g("div",i$,[o[0]||(o[0]=i("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=i("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),i("div",c$,[(h(!0),g(Z,null,ie(R(s),r=>(h(),xe(l$,{key:r.id,collection:r,onClick:a=>n.$emit("select-collection",r.id)},null,8,["collection","onClick"]))),128))])]))}},Ma=me(u$,[["__scopeId","data-v-66fee6e8"]]),d$={class:"casual-lobby"},f$={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(h(),g("div",d$,[he(Ma,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},v$=me(f$,[["__scopeId","data-v-a78f70b6"]]),m$={class:"assignment-panel"},p$={key:0,class:"loading-state"},h$={key:1,class:"empty-state"},g$={key:2,class:"assignment-cards"},y$=["onClick"],b$={class:"card-header"},_$={class:"exercise-name"},w$={class:"card-meta"},S$={key:0,class:"meta-item"},C$={class:"progress-section"},$$={class:"progress-bar"},k$={class:"progress-label"},x$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(a){return a.total_boards?Math.round(a.attempted_boards/a.total_boards*100):0}function s(a){return a.attempted_boards>=a.total_boards&&a.total_boards>0?"complete":a.due_at&&new Date(a.due_at)<new Date&&a.attempted_boards<a.total_boards?"overdue":a.attempted_boards>0?"in-progress":"new"}function n(a){const l=s(a);return l==="complete"?"Complete":l==="overdue"?"Overdue":l==="in-progress"?"In Progress":"New"}function o(a){if(!a.due_at)return null;const l=new Date(a.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function r(a){if(!a.due_at)return"";const l=new Date(a.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(a,l)=>(h(),g("div",m$,[l[2]||(l[2]=i("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(h(),g("div",p$,[...l[0]||(l[0]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(h(),g("div",h$,[...l[1]||(l[1]=[i("p",{class:"empty-title"},"No assignments yet",-1),i("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(h(),g("div",g$,[(h(!0),g(Z,null,ie(e.assignments,c=>(h(),g("div",{key:c.id,class:oe(["assignment-card",s(c)]),onClick:u=>a.$emit("select-assignment",c)},[i("div",b$,[i("span",_$,S(c.exercise_name),1),i("span",{class:oe(["status-badge",s(c)])},S(n(c)),3)]),i("div",w$,[c.classroom_name?(h(),g("span",S$,S(c.classroom_name),1)):P("",!0),c.due_at?(h(),g("span",{key:1,class:oe(["meta-item",r(c)])},S(o(c)),3)):P("",!0)]),i("div",C$,[i("div",$$,[i("div",{class:oe(["progress-fill",s(c)]),style:ss({width:t(c)+"%"})},null,6)]),i("span",k$,S(c.attempted_boards)+" / "+S(c.total_boards)+" boards ",1)])],10,y$))),128))]))]))}},A$=me(x$,[["__scopeId","data-v-dc0b8e86"]]),N$={class:"student-lobby"},O$={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Ue(),n=cr(),o=O(()=>n.studentAssignments.value.length>0),r=O(()=>n.loading.value);function a(l){console.log("Selected assignment:",l)}return ft(()=>{const l=s.currentUser.value;l&&n.fetchStudentAssignments(l.id)}),(l,c)=>(h(),g("div",N$,[o.value||r.value?(h(),xe(A$,{key:0,assignments:R(n).studentAssignments.value,loading:r.value,onSelectAssignment:a},null,8,["assignments","loading"])):P("",!0),he(Ma,{onSelectCollection:c[0]||(c[0]=u=>l.$emit("select-collection",u))})]))}},T$=me(O$,[["__scopeId","data-v-de436049"]]),I$={class:"roster"},E$={class:"roster-header"},R$={class:"member-count"},D$={key:0,class:"roster-empty"},P$={key:1,class:"roster-table"},L$={class:"member-name"},B$={class:"member-email"},U$={class:"member-date"},M$={class:"member-action"},F$=["onClick","disabled"],j$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=T(null);function o(a){try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return a}}function r(a){const l=`${a.first_name} ${a.last_name}`;confirm(`Remove ${l} from this classroom?`)&&(n.value=a.student_id,s("remove-member",a.student_id),setTimeout(()=>{n.value=null},2e3))}return(a,l)=>(h(),g("div",I$,[i("div",E$,[l[0]||(l[0]=i("h4",null,"Class Roster",-1)),i("span",R$,S(e.members.length)+" "+S(e.members.length===1?"student":"students"),1)]),e.members.length===0?(h(),g("div",D$,[...l[1]||(l[1]=[i("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(h(),g("table",P$,[l[2]||(l[2]=i("thead",null,[i("tr",null,[i("th",null,"Name"),i("th",null,"Email"),i("th",null,"Joined"),i("th")])],-1)),i("tbody",null,[(h(!0),g(Z,null,ie(e.members,c=>(h(),g("tr",{key:c.student_id},[i("td",L$,S(c.first_name)+" "+S(c.last_name),1),i("td",B$,S(c.email),1),i("td",U$,S(o(c.joined_at)),1),i("td",M$,[i("button",{class:"remove-btn",onClick:u=>r(c),disabled:n.value===c.student_id},S(n.value===c.student_id?"Removing...":"Remove"),9,F$)])]))),128))])]))]))}},H$=me(j$,[["__scopeId","data-v-ee901be3"]]),K$={class:"header-left"},V$={class:"classroom-name"},W$={class:"header-meta"},G$={class:"join-badge"},z$={class:"member-count"},J$=["aria-label"],Y$={key:0,class:"card-body"},q$={key:0,class:"classroom-desc"},X$={class:"invite-section"},Q$={class:"invite-field"},Z$=["value"],ek={class:"email-section"},tk={class:"email-header"},sk={class:"email-template"},nk={class:"email-body"},ok={key:1,class:"assignments-section"},rk={class:"assignment-list"},ak={class:"assignment-name"},lk={key:0,class:"assignment-due"},ik={class:"assignment-boards"},ck={key:3,class:"loading-roster"},uk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=hn(),r=cr(),a=T(null),l=T(!1),c=T(!1),u=T(!1),d=T([]),f=O(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);it(()=>s.expanded,async N=>{if(N&&!a.value){l.value=!0;const[C,b]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),r.fetchClassroomAssignments(s.classroom.id)]);C!=null&&C.success&&(a.value=C.classroom),d.value=b||[],l.value=!1}});function p(N){return N?new Date(N).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}async function v(){try{await navigator.clipboard.writeText(f.value),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function m(){const N=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(N),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function y(N){const C=await o.removeMember(s.classroom.id,N);C!=null&&C.success&&(a.value&&(a.value.members=a.value.members.filter(b=>b.student_id!==N)),n("member-removed"))}return(N,C)=>(h(),g("div",{class:oe(["classroom-card",{expanded:e.expanded}])},[i("div",{class:"card-header",onClick:C[0]||(C[0]=b=>N.$emit("toggle"))},[i("div",K$,[i("h3",V$,S(e.classroom.name),1),i("div",W$,[i("span",G$,"JOIN: "+S(e.classroom.join_code),1),i("span",z$,S(e.classroom.member_count)+" "+S(e.classroom.member_count===1?"student":"students"),1)])]),i("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[i("span",{class:oe(["chevron",{rotated:e.expanded}])},"",2)],8,J$)]),e.expanded?(h(),g("div",Y$,[e.classroom.description?(h(),g("p",q$,S(e.classroom.description),1)):P("",!0),i("div",X$,[C[2]||(C[2]=i("h4",null,"Invite Link",-1)),C[3]||(C[3]=i("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),i("div",Q$,[i("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:C[1]||(C[1]=b=>b.target.select())},null,8,Z$),i("button",{class:"copy-btn",onClick:v},S(c.value?"Copied!":"Copy"),1)])]),i("div",ek,[i("div",tk,[C[4]||(C[4]=i("h4",null,"Email Template",-1)),i("button",{class:"copy-btn copy-btn-small",onClick:m},S(u.value?"Copied!":"Copy"),1)]),i("div",sk,[C[5]||(C[5]=i("p",null,[i("strong",null,"Subject:"),tn(" Join our Bridge Classroom for practice exercises")],-1)),i("div",nk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+S(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(h(),g("div",ok,[C[6]||(C[6]=i("h4",null,"Assignments",-1)),i("div",rk,[(h(!0),g(Z,null,ie(d.value,b=>(h(),g("div",{key:b.id,class:"assignment-row"},[i("span",ak,S(b.exercise_name),1),b.due_at?(h(),g("span",lk,"Due "+S(p(b.due_at)),1)):P("",!0),i("span",ik,S(b.total_boards)+" boards",1)]))),128))])])):P("",!0),a.value?(h(),xe(H$,{key:2,members:a.value.members,onRemoveMember:y},null,8,["members"])):l.value?(h(),g("div",ck," Loading roster... ")):P("",!0)])):P("",!0)],2))}},dk=me(uk,[["__scopeId","data-v-62f0123b"]]),fk={class:"modal-content"},vk={class:"step"},mk={class:"form-group"},pk={class:"form-group"},hk={class:"step-actions"},gk=["disabled"],yk={key:0,class:"error-text"},bk={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Ue(),o=hn(),r=T(""),a=T(""),l=T(!1),c=T(null);async function u(){if(!r.value.trim()||l.value)return;const d=n.currentUser.value;if(!d)return;l.value=!0,c.value=null;const f=await o.createClassroom(d.id,r.value.trim(),a.value.trim()||null);f.success?s("classroom-created",f.classroom):c.value=f.error||"Failed to create classroom",l.value=!1}return(d,f)=>(h(),g("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Et(p=>d.$emit("close"),["self"]))},[i("div",fk,[i("div",vk,[f[7]||(f[7]=i("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=i("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),i("div",mk,[f[4]||(f[4]=i("label",{for:"classroom-name"},"Classroom Name",-1)),De(i("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=p=>r.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:ic(u,["enter"])},null,544),[[At,r.value]]),f[5]||(f[5]=i("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),i("div",pk,[f[6]||(f[6]=i("label",{for:"classroom-desc"},[tn("Description "),i("span",{class:"optional"},"(optional)")],-1)),De(i("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=p=>a.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[At,a.value]])]),i("div",hk,[i("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=p=>d.$emit("close"))},"Cancel"),i("button",{class:"btn btn-primary",disabled:!r.value.trim()||l.value,onClick:u},S(l.value?"Creating...":"Create Classroom"),9,gk)]),c.value?(h(),g("p",yk,S(c.value),1)):P("",!0)])])]))}},_k=me(bk,[["__scopeId","data-v-c26a1ae6"]]),xn="https://api.bridge-classroom.com/api",An="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ss=T([]),Nr=T(null),Lt=T(!1),Ee=T(null);function wk(){async function e(a={}){Lt.value=!0,Ee.value=null;try{const l=new URLSearchParams;a.created_by&&l.set("created_by",a.created_by),a.curriculum_path&&l.set("curriculum_path",a.curriculum_path),a.visibility&&l.set("visibility",a.visibility);const c=l.toString(),u=`${xn}/exercises${c?"?"+c:""}`,d=await fetch(u,{headers:{"x-api-key":An}});if(!d.ok){const p=await d.text();return Ee.value=p||`Server error (${d.status})`,null}const f=await d.json();return f.success?Ss.value=f.exercises:Ee.value=f.error||"Failed to fetch exercises",f}catch(l){return console.error("Failed to fetch exercises:",l),Ee.value="Unable to connect to server",null}finally{Lt.value=!1}}async function t(a){Lt.value=!0,Ee.value=null;try{const l=await fetch(`${xn}/exercises/${encodeURIComponent(a)}`,{headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Ee.value=u||`Server error (${l.status})`,null}const c=await l.json();return c.success?Nr.value=c.exercise:Ee.value=c.error||"Failed to fetch exercise",c}catch(l){return console.error("Failed to fetch exercise detail:",l),Ee.value="Unable to connect to server",null}finally{Lt.value=!1}}async function s({name:a,description:l,created_by:c,curriculum_path:u,visibility:d,boards:f}){Lt.value=!0,Ee.value=null;try{const p=await fetch(`${xn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify({name:a,description:l||null,created_by:c||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!p.ok){const m=await p.text();return Ee.value=m||`Server error (${p.status})`,{success:!1,error:Ee.value}}const v=await p.json();return v.success?Ss.value=[v.exercise,...Ss.value]:Ee.value=v.error||"Failed to create exercise",v}catch(p){return console.error("Failed to create exercise:",p),Ee.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function n(a,l){Lt.value=!0,Ee.value=null;try{const c=await fetch(`${xn}/exercises/${encodeURIComponent(a)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify(l)});if(!c.ok){const d=await c.text();return Ee.value=d||`Server error (${c.status})`,{success:!1,error:Ee.value}}const u=await c.json();return u.success||(Ee.value=u.error||"Failed to update exercise"),u}catch(c){return console.error("Failed to update exercise:",c),Ee.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function o(a){try{const l=await fetch(`${xn}/exercises/${encodeURIComponent(a)}`,{method:"DELETE",headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Ee.value=u||`Server error (${l.status})`,{success:!1,error:Ee.value}}const c=await l.json();return c.success&&(Ss.value=Ss.value.filter(u=>u.id!==a)),c}catch(l){return console.error("Failed to delete exercise:",l),{success:!1,error:"Unable to connect to server"}}}function r(){Ss.value=[],Nr.value=null,Lt.value=!1,Ee.value=null}return{exercises:Ss,currentExercise:Nr,loading:Lt,error:Ee,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:r}}const Sk={class:"modal-content"},Ck={class:"step"},$k={class:"form-group"},kk=["value"],xk={key:0,class:"form-hint"},Ak={class:"form-group"},Nk={class:"target-options"},Ok={class:"radio-option"},Tk={class:"radio-option"},Ik={key:0,class:"form-group"},Ek=["value"],Rk={key:1,class:"form-group"},Dk=["value"],Pk={class:"form-group"},Lk={class:"step-actions"},Bk=["disabled"],Uk={key:2,class:"error-text"},Mk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Ue(),r=wk(),a=cr(),l=hn(),c=or(),u=T(""),d=T("classroom"),f=T(s.preselectedClassroomId||""),p=T(""),v=T(""),m=T(!1),y=T(null),N=O(()=>r.exercises.value),C=O(()=>r.loading.value),b=O(()=>l.teacherClassrooms.value),$=O(()=>c.students.value),D=O(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!p.value));async function V(){if(!D.value||m.value)return;const ee=o.currentUser.value;if(!ee)return;m.value=!0,y.value=null;const K=await a.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?p.value:null,assigned_by:ee.id,due_at:v.value||null});K.success?n("assignment-created",K.assignment):y.value=K.error||"Failed to create assignment",m.value=!1}return ft(async()=>{r.exercises.value.length||await r.fetchExercises();const ee=o.currentUser.value;ee&&!l.teacherClassrooms.value.length&&await l.fetchTeacherClassrooms(ee.id)}),(ee,K)=>(h(),g("div",{class:"modal-overlay",onClick:K[7]||(K[7]=Et(q=>ee.$emit("close"),["self"]))},[i("div",Sk,[i("div",Ck,[K[18]||(K[18]=i("h2",null,"Create Assignment",-1)),K[19]||(K[19]=i("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),i("div",$k,[K[9]||(K[9]=i("label",{for:"exercise-select"},"Exercise",-1)),De(i("select",{id:"exercise-select","onUpdate:modelValue":K[0]||(K[0]=q=>u.value=q),class:"form-select"},[K[8]||(K[8]=i("option",{value:""},"Select an exercise...",-1)),(h(!0),g(Z,null,ie(N.value,q=>(h(),g("option",{key:q.id,value:q.id},S(q.name)+" ("+S(q.board_count)+" boards)",9,kk))),128))],512),[[Un,u.value]]),C.value?(h(),g("p",xk,"Loading exercises...")):P("",!0)]),i("div",Ak,[K[12]||(K[12]=i("label",null,"Assign to",-1)),i("div",Nk,[i("label",Ok,[De(i("input",{type:"radio","onUpdate:modelValue":K[1]||(K[1]=q=>d.value=q),value:"classroom"},null,512),[[gl,d.value]]),K[10]||(K[10]=i("span",null,"Classroom",-1))]),i("label",Tk,[De(i("input",{type:"radio","onUpdate:modelValue":K[2]||(K[2]=q=>d.value=q),value:"student"},null,512),[[gl,d.value]]),K[11]||(K[11]=i("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(h(),g("div",Ik,[K[14]||(K[14]=i("label",{for:"classroom-select"},"Classroom",-1)),De(i("select",{id:"classroom-select","onUpdate:modelValue":K[3]||(K[3]=q=>f.value=q),class:"form-select"},[K[13]||(K[13]=i("option",{value:""},"Select a classroom...",-1)),(h(!0),g(Z,null,ie(b.value,q=>(h(),g("option",{key:q.id,value:q.id},S(q.name)+" ("+S(q.member_count)+" students)",9,Ek))),128))],512),[[Un,f.value]])])):P("",!0),d.value==="student"?(h(),g("div",Rk,[K[16]||(K[16]=i("label",{for:"student-select"},"Student",-1)),De(i("select",{id:"student-select","onUpdate:modelValue":K[4]||(K[4]=q=>p.value=q),class:"form-select"},[K[15]||(K[15]=i("option",{value:""},"Select a student...",-1)),(h(!0),g(Z,null,ie($.value,q=>(h(),g("option",{key:q.id,value:q.id},S(q.first_name)+" "+S(q.last_name),9,Dk))),128))],512),[[Un,p.value]])])):P("",!0),i("div",Pk,[K[17]||(K[17]=i("label",{for:"due-date"},[tn("Due Date "),i("span",{class:"optional"},"(optional)")],-1)),De(i("input",{id:"due-date","onUpdate:modelValue":K[5]||(K[5]=q=>v.value=q),type:"date",class:"form-input"},null,512),[[At,v.value]])]),i("div",Lk,[i("button",{class:"btn btn-secondary",onClick:K[6]||(K[6]=q=>ee.$emit("close"))},"Cancel"),i("button",{class:"btn btn-primary",disabled:!D.value||m.value,onClick:V},S(m.value?"Creating...":"Create Assignment"),9,Bk)]),y.value?(h(),g("p",Uk,S(y.value),1)):P("",!0)])])]))}},Fk=me(Mk,[["__scopeId","data-v-5e97b847"]]),jk={class:"teacher-lobby"},Hk={class:"welcome-section"},Kk={class:"welcome-title"},Vk={class:"welcome-subtitle"},Wk={class:"quick-actions"},Gk=["href"],zk={key:0,class:"classrooms-section"},Jk={class:"classroom-cards"},Yk={key:1,class:"empty-state"},qk={class:"collections-section"},Xk={__name:"TeacherLobby",emits:["select-collection"],setup(e){const t=Ue(),s=hn(),n=T(!1),o=T(!1),r=T(null),a=O(()=>{const v=t.currentUser.value;return v?v.firstName:""}),l=O(()=>{const v=s.teacherClassrooms.value.length;return v===0?"Get started by creating your first classroom.":v===1?"You have 1 active classroom.":`You have ${v} active classrooms.`}),c=O(()=>`${window.location.origin}${window.location.pathname}?mode=teacher`);function u(v){r.value=r.value===v?null:v}function d(v){n.value=!1,r.value=v.id}function f(v){o.value=!1}function p(){const v=t.currentUser.value;v&&s.fetchTeacherClassrooms(v.id)}return ft(()=>{const v=t.currentUser.value;v&&s.fetchTeacherClassrooms(v.id)}),(v,m)=>(h(),g("div",jk,[i("div",Hk,[i("h2",Kk,"Welcome back, "+S(a.value),1),i("p",Vk,S(l.value),1)]),i("div",Wk,[i("button",{class:"action-btn create",onClick:m[0]||(m[0]=y=>n.value=!0)}," + New Classroom "),i("button",{class:"action-btn assign",onClick:m[1]||(m[1]=y=>o.value=!0)}," + New Assignment "),(h(),g("a",{key:0,href:c.value,class:"action-btn legacy"}," Legacy Dashboard ",8,Gk))]),R(s).teacherClassrooms.value.length?(h(),g("div",zk,[m[5]||(m[5]=i("h3",{class:"section-title"},"My Classrooms",-1)),i("div",Jk,[(h(!0),g(Z,null,ie(R(s).teacherClassrooms.value,y=>(h(),xe(dk,{key:y.id,classroom:y,expanded:r.value===y.id,onToggle:N=>u(y.id),onMemberRemoved:p},null,8,["classroom","expanded","onToggle"]))),128))])])):R(s).loading.value?P("",!0):(h(),g("div",Yk,[...m[6]||(m[6]=[i("p",{class:"empty-title"},"No classrooms yet",-1),i("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])])),i("div",qk,[m[7]||(m[7]=i("h3",{class:"section-title"},"Lesson Collections",-1)),he(Ma,{onSelectCollection:m[2]||(m[2]=y=>v.$emit("select-collection",y))})]),n.value?(h(),xe(_k,{key:2,onClose:m[3]||(m[3]=y=>n.value=!1),onClassroomCreated:d})):P("",!0),o.value?(h(),xe(Fk,{key:3,onClose:m[4]||(m[4]=y=>o.value=!1),onAssignmentCreated:f})):P("",!0)]))}},Qk=me(Xk,[["__scopeId","data-v-a267bfe2"]]),Zk={},ex={class:"admin-lobby"};function tx(e,t){return h(),g("div",ex,[...t[0]||(t[0]=[i("div",{class:"admin-placeholder"},[i("h2",{class:"admin-title"},"Admin Dashboard"),i("p",{class:"admin-subtitle"},"System metrics and monitoring coming in Phase 4.")],-1)])])}const sx=me(Zk,[["render",tx],["__scopeId","data-v-bf30d2dc"]]),nx={class:"lobby-view"},ox={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Ue(),s=cr(),n=O(()=>{const a=t.currentUser.value;return(a==null?void 0:a.role)||"student"}),o=O(()=>s.studentAssignments.value.length>0),r=O(()=>{const a=t.currentUser.value;return Array.isArray(a==null?void 0:a.classrooms)&&a.classrooms.length>0});return ft(()=>{const a=t.currentUser.value;a&&n.value==="student"&&s.fetchStudentAssignments(a.id)}),(a,l)=>(h(),g("div",nx,[n.value==="admin"?(h(),xe(sx,{key:0})):n.value==="teacher"?(h(),xe(Qk,{key:1,onSelectCollection:l[0]||(l[0]=c=>a.$emit("select-collection",c))})):o.value||r.value?(h(),xe(T$,{key:2,onSelectCollection:l[1]||(l[1]=c=>a.$emit("select-collection",c))})):(h(),xe(v$,{key:3,onSelectCollection:l[2]||(l[2]=c=>a.$emit("select-collection",c)),onShowBecomeTeacher:l[3]||(l[3]=c=>a.$emit("show-become-teacher"))}))]))}},rx=me(ox,[["__scopeId","data-v-0ec0eea2"]]),ax={class:"modal-content"},lx={key:0,class:"step step-overview"},ix={class:"step-actions"},cx={key:1,class:"step step-agreement"},ux={class:"agreement-checkbox"},dx={class:"step-actions"},fx=["disabled"],vx={key:0,class:"error-text"},mx={key:2,class:"step step-confirmation"},px={class:"step-actions"},hx={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Ue(),o=T(1),r=T(!1),a=T(!1),l=T(null);async function c(){const u=n.currentUser.value;if(u){a.value=!0,l.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){l.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:v}=await wm();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(d){console.error("Teacher activation failed:",d),l.value="Unable to connect to server. Please try again."}finally{a.value=!1}}}return(u,d)=>(h(),g("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Et(f=>u.$emit("close"),["self"]))},[i("div",ax,[o.value===1?(h(),g("div",lx,[d[6]||(d[6]=xo('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),i("div",ix,[i("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),i("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(h(),g("div",cx,[d[8]||(d[8]=xo('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),i("label",ux,[De(i("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>r.value=f)},null,512),[[Yo,r.value]]),d[7]||(d[7]=i("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),i("div",dx,[i("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),i("button",{class:"btn btn-primary",disabled:!r.value||a.value,onClick:c},S(a.value?"Activating...":"Activate Teacher Account"),9,fx)]),l.value?(h(),g("p",vx,S(l.value),1)):P("",!0)])):o.value===3?(h(),g("div",mx,[d[9]||(d[9]=i("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=i("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=i("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=i("ol",{class:"next-steps"},[i("li",null,"Create your first classroom from the teacher dashboard"),i("li",null,"Share the invite link with your students"),i("li",null,"Browse exercises and assign them to your class")],-1)),i("div",px,[i("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):P("",!0)])]))}},gx=me(hx,[["__scopeId","data-v-56e5717d"]]),yx={},bx={class:"page-footer"};function _x(e,t){return h(),g("footer",bx,[...t[0]||(t[0]=[i("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),i("nav",{class:"footer-links"},[i("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const wx=me(yx,[["render",_x],["__scopeId","data-v-1817839c"]]),Sx={key:2,class:"app"},Cx={class:"app-header"},$x={class:"header-right"},kx=["title"],xx={key:3,class:"stats"},Ax={class:"correct"},Nx={class:"wrong"},Ox={class:"user-avatar-group"},Tx=["title"],Ix=["title"],Ex={class:"app-main"},Rx={key:3,class:"collection-view"},Dx={key:4,class:"practice-layout"},Px={class:"practice-left"},Lx={class:"practice-right"},Bx={key:1,class:"commentary-panel"},Ux=["innerHTML"],Mx=["innerHTML"],Fx=["innerHTML"],jx=["innerHTML"],Hx={class:"commentary-controls"},Kx={key:0,class:"bidding-box-wrapper"},Vx={key:1,class:"card-choice-prompt"},Wx=["innerHTML"],Gx={key:3,class:"completion-controls"},zx={key:0,class:"registration-toast"},Jx={__name:"MainLayout",setup(e){const t=tm(),s=so(),n=Ue(),o=er(),r=Zc(),a=or(),l=up(),c=T(!1),u=T(!1),d=T(!1),f=T(!1),p=T(!1),v=T(null),m=T(""),y=T(null),N=T(null),C=T(null),b=T(!1),$=T(null),D=T(null),V=T(!1),ee=T(!1),K=T(null);function q(_,x=".current"){if(!_)return;const I=_.querySelector(x);I&&(_.scrollTop=I.offsetTop-_.offsetTop)}it(()=>l.currentStepIndex.value,()=>{Vn(()=>{q(y.value,".narrative-text.current")})}),it(()=>l.isComplete.value,_=>{_&&Vn(()=>{q(y.value,".narrative-text.current")})});function Y(){const _=new URLSearchParams(window.location.search);f.value=_.get("mode")==="teacher"}function de(){f.value=!1;const _=new URL(window.location.href);_.searchParams.delete("mode"),window.history.replaceState({},"",_.toString())}const ue=O(()=>n.isAuthenticated.value),we=O(()=>{const _=n.currentUser.value;return _?`${_.firstName} ${_.lastName}`:""}),Le=O(()=>{const _=n.currentUser.value;return _?`${_.firstName.charAt(0)}${_.lastName.charAt(0)}`.toUpperCase():"?"}),je=O(()=>{const _=n.currentUser.value;return(_==null?void 0:_.role)||"student"}),Ge=O(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");ft(async()=>{if(Y(),f.value)return;s.initializeFromUrl(),n.initialize();const _=new URLSearchParams(window.location.search);_.get("recover")&&_.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const x=s.getCollectionFromUrl(),I=s.getLessonFromUrl();x&&(N.value=x,I&&await A(x,I)),n.isAuthenticated.value&&(await r.initialize(),Xt().initialize(),await a.checkTeacherStatus())});async function ge(_){console.log("User ready:",_.firstName,_.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),ee.value=!0,setTimeout(()=>{ee.value=!1},4e3)),await r.initialize(),Xt().initialize(),await a.checkTeacherStatus();const I=sessionStorage.getItem("pendingJoinCode");if(I){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:I}});return}}function Q(){Xt().reset(),Oa().clearCache(),ps().reset(),a.reset(),n.currentUserId.value=null,c.value=!1,p.value=!1,v.value=null}async function fe(){b.value=!1,await a.checkTeacherStatus()}const pe=T([]),ne=T(0),j=O(()=>pe.value[ne.value]||null),se=O(()=>{var L;const _=W(N.value),x=_!=null&&_.name?`${_.name} - `:"";if((L=C.value)!=null&&L.name)return x+C.value.name;if(!j.value)return"";const I=j.value.subfolder||j.value.category||"";return I?x+I:""});it(ne,()=>{j.value&&(l.loadDeal(j.value),s.setDealInUrl(j.value.boardNumber))},{flush:"sync"}),it(()=>l.observationStore.pendingCount.value,(_,x)=>{_>x&&r.triggerSync()}),it(()=>l.isComplete.value,_=>{_&&($.value=null)});function ze({subfolder:_,name:x,category:I,content:L}){const H=Bl(L);if(H.length>0){const J=H.map(ae=>({...ae,subfolder:ae.subfolder||_,category:ae.category||I}));pe.value=J,ne.value=0,l.loadDeal(J[0]),l.resetStats(),pn().saveLessonBoardNumbers(_,J.map(ae=>ae.boardNumber)),C.value={id:_,name:x,category:I},s.setLessonInUrl(_),V.value=!1,F()}else alert("No deals found in the lesson file")}const ct=O(()=>l.boardState.correctCount),vt=O(()=>l.boardState.wrongCount);function Ze(_){!l.makeBid(_)&&j.value&&($.value=j.value.boardNumber)}function M({seat:_,suit:x,rank:I}){!l.makeCardChoice(x,I)&&j.value&&($.value=j.value.boardNumber)}function X(){l.clearCardFeedback(),l.goBack()}function z(){ne.value<pe.value.length-1&&($.value=null,ne.value++,l.loadDeal(pe.value[ne.value]))}function te(_){_>=0&&_<pe.value.length&&($.value=null,ne.value=_,l.loadDeal(pe.value[_]))}async function ve({subfolder:_,dealNumber:x}){var I;if(((I=C.value)==null?void 0:I.id)===_&&pe.value.length>0){const L=pe.value.findIndex(H=>H.boardNumber===x);if(L>=0){te(L);return}}for(const L of s.COLLECTIONS)try{const H=_.includes("/")?_.split("/").pop():_,J=`${L.baseUrl}/${H}.pbn`,re=await fetch(J);if(!re.ok)continue;const ae=await re.text();N.value=L.id,s.setCollectionInUrl(L.id),ze({subfolder:_,name:_,category:"",content:ae});const Te=pe.value.findIndex(Ae=>Ae.boardNumber===x);Te>=0&&te(Te);return}catch{}}function w(_){d.value=!1,p.value=!1,v.value=null,ve(_)}function k(_,x){p.value=!1,v.value=null,ve({subfolder:_,dealNumber:x||1})}function E(){C.value=null,s.setLessonInUrl(null),pe.value=[],ne.value=0,l.resetStats(),V.value=!1,D.value=null,p.value=!1,v.value=null}function B(){N.value=null,C.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),pe.value=[],ne.value=0,l.resetStats(),V.value=!1,D.value=null,p.value=!1,v.value=null}async function F(){if(D.value=null,!N.value||!C.value)return;const _=W(N.value);if(!_)return;const x=C.value.id,I=x.includes("/")?x.split("/").pop():x,L=`${_.baseUrl}/${I}_Intro.pdf`;try{(await fetch(L,{method:"HEAD"})).ok&&(D.value=L)}catch{}}function U(_){window.innerWidth<600?window.open(_,"_blank"):(K.value=_,V.value=!0)}function G(_){N.value=_,s.setCollectionInUrl(_)}function W(_){return s.COLLECTIONS.find(x=>x.id===_)}async function A(_,x){var L;const I=W(_);if(!I)return console.error("Collection not found:",_),!1;try{const H=await fetch(I.tocUrl);if(!H.ok)throw new Error(`Failed to load TOC: ${H.statusText}`);const J=await H.json();let re=null,ae=null;for(const yt of J.categories||[]){const Ie=(L=yt.lessons)==null?void 0:L.find(He=>He.id===x);if(Ie){re=Ie,ae=yt;break}}if(!re)return console.error("Lesson not found in TOC:",x),!1;const Te=x.includes("/")?x.split("/").pop():x,Ae=`${I.baseUrl}/${Te}.pbn`,Je=await fetch(Ae);if(!Je.ok)throw new Error(`Failed to load lesson: ${Je.statusText}`);const ot=await Je.text(),kt=Bl(ot);if(kt.length>0){const yt=kt.map(xt=>({...xt,subfolder:xt.subfolder||x,category:xt.category||ae.name}));pe.value=yt;const Ie=s.getDealFromUrl(),He=Ie?yt.findIndex(xt=>xt.boardNumber===Ie):-1;return ne.value=He>=0?He:0,l.loadDeal(yt[ne.value]),l.resetStats(),C.value={id:x,name:re.name,category:ae.name},F(),!0}return!1}catch(H){return console.error("Error loading lesson from URL:",H),!1}}return(_,x)=>{var I,L,H,J,re,ae,Te,Ae,Je,ot,kt,yt,Ie,He,xt,gn;return f.value?(h(),xe(c0,{key:0,onClose:de})):ue.value?(h(),g("div",Sx,[i("header",Cx,[i("h1",null,S(pe.value.length?se.value:Ge.value),1),i("div",$x,[he(Vb),i("button",{class:"progress-btn",onClick:x[0]||(x[0]=$e=>u.value=!0),title:"View Progress"}," Progress "),i("button",{class:"accomplishments-btn",onClick:x[1]||(x[1]=$e=>d.value=!0),title:"View Accomplishments"}," Accomplishments "),R(a).isTeacher.value?(h(),g("button",{key:0,class:"teacher-btn",onClick:x[2]||(x[2]=$e=>{p.value=!0,v.value=null,m.value=""}),title:"View Students"}," Students ")):P("",!0),pe.value.length&&N.value?(h(),g("button",{key:1,class:"lessons-btn",onClick:E,title:"Back to "+((I=W(N.value))==null?void 0:I.name)},S((L=W(N.value))==null?void 0:L.name),9,kx)):P("",!0),N.value?(h(),g("button",{key:2,class:"lobby-btn",onClick:B,title:"Return to lobby"}," Lobby ")):P("",!0),ct.value+vt.value>0?(h(),g("div",xx,[i("span",Ax,S(ct.value),1),i("span",Nx,S(vt.value),1)])):P("",!0),i("div",Ox,[je.value!=="student"?(h(),g("button",{key:0,class:oe(["role-badge","role-"+je.value]),onClick:B,title:"Return to "+je.value+" lobby"},S(je.value),11,Tx)):P("",!0),i("button",{class:"user-btn",onClick:x[3]||(x[3]=$e=>c.value=!0),title:we.value},S(Le.value),9,Ix)])])]),i("main",Ex,[he(Rb),p.value&&!v.value?(h(),xe(L0,{key:0,onClose:x[4]||(x[4]=$e=>p.value=!1),onSelectStudent:x[5]||(x[5]=($e,yn)=>{v.value=$e,m.value=yn})})):p.value&&v.value?(h(),xe(wC,{key:1,studentId:v.value,studentName:m.value,onBack:x[6]||(x[6]=$e=>v.value=null),onNavigateToLesson:k},null,8,["studentId","studentName"])):!pe.value.length&&!N.value?(h(),xe(rx,{key:2,onSelectCollection:G,onShowBecomeTeacher:x[7]||(x[7]=$e=>b.value=!0)})):!pe.value.length&&N.value?(h(),g("div",Rx,[i("h2",null,S(((H=W(N.value))==null?void 0:H.name)||N.value),1),x[17]||(x[17]=i("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),he(JC,{visible:!0,inline:!0,collection:W(N.value),onLoad:ze},null,8,["collection"])])):(h(),g("div",Dx,[i("div",Px,[pe.value.length>1?(h(),xe(iu,{key:0,boardNumbers:pe.value.map($e=>$e.boardNumber),lessonSubfolder:((J=j.value)==null?void 0:J.subfolder)||((re=j.value)==null?void 0:re.category)||"",currentIndex:ne.value,forceRedBoard:$.value,introUrl:D.value,onGoto:te,onOpenIntro:U},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):P("",!0),he(Rg,{boardNumber:(ae=j.value)==null?void 0:ae.boardNumber,dealer:(Te=j.value)==null?void 0:Te.dealer,vulnerable:(Ae=j.value)==null?void 0:Ae.vulnerable,contract:(Je=j.value)==null?void 0:Je.contract,declarer:(ot=j.value)==null?void 0:ot.declarer,showContract:R(l).auctionState.auctionComplete||R(l).showOpeningLead.value||R(l).hasSteps.value&&!R(l).hasBidSteps.value,openingLead:R(l).showOpeningLead.value?(kt=j.value)==null?void 0:kt.openingLead:"",totalDeals:pe.value.length,currentIndex:ne.value,dealBoardNumbers:pe.value.map($e=>$e.boardNumber),onGoto:te},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),he(Xh,{hands:R(l).hands.value,hiddenSeats:R(l).hiddenSeats.value,showHcp:R(l).showHcp.value,compact:!0,clickableSeat:R(l).hasCardChoice.value?R(l).studentSeat.value:null,playedCards:R(l).showcardsPlayedCards.value,onCardClick:M},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),i("div",Lx,[R(l).showAuctionTable.value?(h(),xe(pg,{key:0,bids:R(l).hasBidSteps.value?R(l).auctionState.displayedBids:((yt=j.value)==null?void 0:yt.auction)||[],dealer:((Ie=j.value)==null?void 0:Ie.dealer)||"N",currentBidIndex:R(l).hasBidSteps.value?R(l).auctionState.currentBidIndex:-1,wrongBidIndex:R(l).auctionState.wrongBidIndex,correctBidIndex:R(l).auctionState.correctBidIndex,showTurnIndicator:R(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):P("",!0),he(ql,{visible:!!R(l).auctionState.wrongBid,type:"wrong",wrongBid:R(l).auctionState.wrongBid,correctBid:R(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),he(ql,{visible:!!R(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:R(l).cardChoiceState.wrongCard,correctCardCode:R(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),R(l).hasSteps.value?(h(),g("div",Bx,[i("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:y},[(h(!0),g(Z,null,ie(R(l).steps.value.slice(0,R(l).currentStepIndex.value),($e,yn)=>(h(),g(Z,{key:"prev-"+yn},[yn>=R(l).commentaryStartIndex.value?(h(),g(Z,{key:0},[i("span",{class:"narrative-text previous",innerHTML:R(Hs)(R(Cn)($e.text))},null,8,Ux),$e.type==="bid"&&$e.explanationText?(h(),g("span",{key:0,class:oe(["narrative-text",yn===R(l).currentStepIndex.value-1&&R(l).isBidStep.value&&!R(l).bidAnswered.value?"current":"previous"]),innerHTML:R(Hs)(R(Cn)($e.explanationText))},null,10,Mx)):P("",!0)],64)):P("",!0)],64))),128)),R(l).currentStep.value?(h(),g("span",{key:0,class:"narrative-text current",innerHTML:R(Hs)(R(Cn)(R(l).currentStep.value.text))},null,8,Fx)):P("",!0),R(l).bidAnswered.value&&((He=R(l).currentStep.value)!=null&&He.explanationText)?(h(),g("span",{key:1,class:"narrative-text current",innerHTML:R(Hs)(R(Cn)(R(l).currentStep.value.explanationText))},null,8,jx)):P("",!0)],512),i("div",Hx,[R(l).hasBidPrompt.value?(h(),g("div",Kx,[he(cg,{lastBid:R(l).lastContractBid.value,canDouble:R(l).canDouble.value,canRedouble:R(l).canRedouble.value,onBid:Ze},null,8,["lastBid","canDouble","canRedouble"])])):R(l).hasCardChoice.value?(h(),g("div",Vx," Click on the card you would choose ")):P("",!0),R(l).canGoBack.value?(h(),g("button",{key:2,class:"instruction-btn secondary",onClick:X},"  Back ")):P("",!0),!R(l).isComplete.value&&(R(l).bidAnswered.value||!R(l).hasBidPrompt.value&&!R(l).hasCardChoice.value&&R(l).currentStep.value&&R(l).currentStep.value.type!=="end")?(h(),g("button",{key:3,class:"instruction-btn primary",onClick:x[8]||(x[8]=$e=>R(l).advance())},S(((xt=R(l).currentStep.value)==null?void 0:xt.type)==="rotate"?"Rotate":"Next")+"  ",1)):P("",!0),R(l).isComplete.value&&ne.value<pe.value.length-1?(h(),g("button",{key:4,class:"next-deal-btn",onClick:z}," Next Deal  ")):P("",!0)])])):(gn=j.value)!=null&&gn.commentary?(h(),g("div",{key:2,class:"display-commentary",innerHTML:R(Hs)(R(Cn)(R(fm)(j.value.commentary)))},null,8,Wx)):P("",!0),!R(l).hasSteps.value&&R(l).isComplete.value&&ne.value<pe.value.length-1?(h(),g("div",Gx,[i("button",{class:"next-deal-btn",onClick:z}," Next Deal  ")])):P("",!0)])]))]),he(Sb,{visible:c.value,onClose:x[9]||(x[9]=$e=>c.value=!1),onSwitchUser:Q,onLogout:Q,onBecomeTeacher:x[10]||(x[10]=$e=>b.value=!0)},null,8,["visible"]),ee.value?(h(),g("div",zx," Account created  your data is encrypted and linked to your email for recovery. ")):P("",!0),u.value?(h(),g("div",{key:1,class:"modal-overlay",onClick:x[12]||(x[12]=Et($e=>u.value=!1,["self"]))},[he(i_,{onClose:x[11]||(x[11]=$e=>u.value=!1)})])):P("",!0),d.value?(h(),g("div",{key:2,class:"modal-overlay",onClick:x[14]||(x[14]=Et($e=>d.value=!1,["self"]))},[he(J_,{onClose:x[13]||(x[13]=$e=>d.value=!1),onNavigateToDeal:w})])):P("",!0),he(s$,{visible:V.value,url:K.value||"",onClose:x[15]||(x[15]=$e=>V.value=!1)},null,8,["visible","url"]),b.value?(h(),xe(gx,{key:3,onClose:x[16]||(x[16]=$e=>b.value=!1),onActivated:fe})):P("",!0),he(wx)])):(h(),xe(Fy,{key:1,onUserReady:ge}))}}},Yx=()=>zf(()=>import("./JoinClassroomView-Bo3u1vQC.js"),__vite__mapDeps([0,1])),qx=[{path:"/join/:joinCode",name:"join",component:Yx},{path:"/:pathMatch(.*)*",name:"app",component:Jx}],Xx=em({history:Ev(),routes:qx}),pu=Mf(Vf);pu.use(Xx);pu.mount("#app");export{me as _,i as a,he as b,g as c,P as d,tn as e,xo as f,Ue as g,hn as h,Sd as i,xc as j,tm as k,h as l,ft as o,T as r,S as t,Qx as u,od as w};
