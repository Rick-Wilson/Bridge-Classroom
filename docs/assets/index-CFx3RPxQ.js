const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-tU2fY_aR.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ir(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Se={},Js=[],Ft=()=>{},li=()=>!1,Ho=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),cr=e=>e.startsWith("onUpdate:"),Xe=Object.assign,ur=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Du=Object.prototype.hasOwnProperty,_e=(e,t)=>Du.call(e,t),ie=Array.isArray,qs=e=>Qn(e)==="[object Map]",vn=e=>Qn(e)==="[object Set]",zr=e=>Qn(e)==="[object Date]",ce=e=>typeof e=="function",Ue=e=>typeof e=="string",It=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",ii=e=>(Ce(e)||ce(e))&&ce(e.then)&&ce(e.catch),ci=Object.prototype.toString,Qn=e=>ci.call(e),Ru=e=>Qn(e).slice(8,-1),ui=e=>Qn(e)==="[object Object]",dr=e=>Ue(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,In=ir(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ko=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Pu=/-\w/g,Ct=Ko(e=>e.replace(Pu,t=>t.slice(1).toUpperCase())),Lu=/\B([A-Z])/g,ms=Ko(e=>e.replace(Lu,"-$1").toLowerCase()),Vo=Ko(e=>e.charAt(0).toUpperCase()+e.slice(1)),da=Ko(e=>e?`on${Vo(e)}`:""),cs=(e,t)=>!Object.is(e,t),yo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},di=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Wo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Jr;const Go=()=>Jr||(Jr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vt(e){if(ie(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ue(n)?Fu(n):Vt(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Ue(e)||Ce(e))return e}const Bu=/;(?![^(]*\))/g,Uu=/:([^]+)/,Mu=/\/\*[^]*?\*\//g;function Fu(e){const t={};return e.replace(Mu,"").split(Bu).forEach(s=>{if(s){const n=s.split(Uu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ne(e){let t="";if(Ue(e))t=e;else if(ie(e))for(let s=0;s<e.length;s++){const n=ne(e[s]);n&&(t+=n+" ")}else if(Ce(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ju="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hu=ir(ju);function fi(e){return!!e||e===""}function Ku(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Ts(e[n],t[n]);return s}function Ts(e,t){if(e===t)return!0;let s=zr(e),n=zr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=It(e),n=It(t),s||n)return e===t;if(s=ie(e),n=ie(t),s||n)return s&&n?Ku(e,t):!1;if(s=Ce(e),n=Ce(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const i in e){const l=e.hasOwnProperty(i),c=t.hasOwnProperty(i);if(l&&!c||!l&&c||!Ts(e[i],t[i]))return!1}}return String(e)===String(t)}function fr(e,t){return e.findIndex(s=>Ts(s,t))}const vi=e=>!!(e&&e.__v_isRef===!0),_=e=>Ue(e)?e:e==null?"":ie(e)||Ce(e)&&(e.toString===ci||!ce(e.toString))?vi(e)?_(e.value):JSON.stringify(e,mi,2):String(e),mi=(e,t)=>vi(t)?mi(e,t.value):qs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[fa(n,a)+" =>"]=o,s),{})}:vn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>fa(s))}:It(t)?fa(t):Ce(t)&&!ie(t)&&!ui(t)?String(t):t,fa=(e,t="")=>{var s;return It(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ft;class Vu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ft,!t&&ft&&(this.index=(ft.scopes||(ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ft;try{return ft=this,t()}finally{ft=s}}}on(){++this._on===1&&(this.prevScope=ft,ft=this)}off(){this._on>0&&--this._on===0&&(ft=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Wu(){return ft}let ke;const va=new WeakSet;class pi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ft&&ft.active&&ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,va.has(this)&&(va.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qr(this),yi(this);const t=ke,s=Tt;ke=this,Tt=!0;try{return this.fn()}finally{bi(this),ke=t,Tt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pr(t);this.deps=this.depsTail=void 0,qr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?va.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ea(this)&&this.run()}get dirty(){return Ea(this)}}let hi=0,En,Dn;function gi(e,t=!1){if(e.flags|=8,t){e.next=Dn,Dn=e;return}e.next=En,En=e}function vr(){hi++}function mr(){if(--hi>0)return;if(Dn){let t=Dn;for(Dn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;En;){let t=En;for(En=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function yi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),pr(n),Gu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Ea(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_i(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _i(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===jn)||(e.globalVersion=jn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ea(e))))return;e.flags|=2;const t=e.dep,s=ke,n=Tt;ke=e,Tt=!0;try{yi(e);const o=e.fn(e._value);(t.version===0||cs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ke=s,Tt=n,bi(e),e.flags&=-3}}function pr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)pr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Gu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Tt=!0;const wi=[];function Zt(){wi.push(Tt),Tt=!1}function es(){const e=wi.pop();Tt=e===void 0?!0:e}function qr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ke;ke=void 0;try{t()}finally{ke=s}}}let jn=0;class zu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ke||!Tt||ke===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ke)s=this.activeLink=new zu(ke,this),ke.deps?(s.prevDep=ke.depsTail,ke.depsTail.nextDep=s,ke.depsTail=s):ke.deps=ke.depsTail=s,Si(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ke.depsTail,s.nextDep=void 0,ke.depsTail.nextDep=s,ke.depsTail=s,ke.deps===s&&(ke.deps=n)}return s}trigger(t){this.version++,jn++,this.notify(t)}notify(t){vr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{mr()}}}function Si(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Si(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Da=new WeakMap,As=Symbol(""),Ra=Symbol(""),Hn=Symbol("");function tt(e,t,s){if(Tt&&ke){let n=Da.get(e);n||Da.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new hr),o.map=n,o.key=s),o.track()}}function Jt(e,t,s,n,o,a){const i=Da.get(e);if(!i){jn++;return}const l=c=>{c&&c.trigger()};if(vr(),t==="clear")i.forEach(l);else{const c=ie(e),u=c&&dr(s);if(c&&s==="length"){const d=Number(n);i.forEach((f,h)=>{(h==="length"||h===Hn||!It(h)&&h>=d)&&l(f)})}else switch((s!==void 0||i.has(void 0))&&l(i.get(s)),u&&l(i.get(Hn)),t){case"add":c?u&&l(i.get("length")):(l(i.get(As)),qs(e)&&l(i.get(Ra)));break;case"delete":c||(l(i.get(As)),qs(e)&&l(i.get(Ra)));break;case"set":qs(e)&&l(i.get(As));break}}mr()}function Ls(e){const t=be(e);return t===e?t:(tt(t,"iterate",Hn),wt(e)?t:t.map(Et))}function zo(e){return tt(e=be(e),"iterate",Hn),e}function as(e,t){return ts(e)?en(xs(e)?Et(t):t):Et(t)}const Ju={__proto__:null,[Symbol.iterator](){return ma(this,Symbol.iterator,e=>as(this,e))},concat(...e){return Ls(this).concat(...e.map(t=>ie(t)?Ls(t):t))},entries(){return ma(this,"entries",e=>(e[1]=as(this,e[1]),e))},every(e,t){return Wt(this,"every",e,t,void 0,arguments)},filter(e,t){return Wt(this,"filter",e,t,s=>s.map(n=>as(this,n)),arguments)},find(e,t){return Wt(this,"find",e,t,s=>as(this,s),arguments)},findIndex(e,t){return Wt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Wt(this,"findLast",e,t,s=>as(this,s),arguments)},findLastIndex(e,t){return Wt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Wt(this,"forEach",e,t,void 0,arguments)},includes(...e){return pa(this,"includes",e)},indexOf(...e){return pa(this,"indexOf",e)},join(e){return Ls(this).join(e)},lastIndexOf(...e){return pa(this,"lastIndexOf",e)},map(e,t){return Wt(this,"map",e,t,void 0,arguments)},pop(){return yn(this,"pop")},push(...e){return yn(this,"push",e)},reduce(e,...t){return Yr(this,"reduce",e,t)},reduceRight(e,...t){return Yr(this,"reduceRight",e,t)},shift(){return yn(this,"shift")},some(e,t){return Wt(this,"some",e,t,void 0,arguments)},splice(...e){return yn(this,"splice",e)},toReversed(){return Ls(this).toReversed()},toSorted(e){return Ls(this).toSorted(e)},toSpliced(...e){return Ls(this).toSpliced(...e)},unshift(...e){return yn(this,"unshift",e)},values(){return ma(this,"values",e=>as(this,e))}};function ma(e,t,s){const n=zo(e),o=n[t]();return n!==e&&!wt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const qu=Array.prototype;function Wt(e,t,s,n,o,a){const i=zo(e),l=i!==e&&!wt(e),c=i[t];if(c!==qu[t]){const f=c.apply(e,a);return l?Et(f):f}let u=s;i!==e&&(l?u=function(f,h){return s.call(this,as(e,f),h,e)}:s.length>2&&(u=function(f,h){return s.call(this,f,h,e)}));const d=c.call(i,u,n);return l&&o?o(d):d}function Yr(e,t,s,n){const o=zo(e);let a=s;return o!==e&&(wt(e)?s.length>3&&(a=function(i,l,c){return s.call(this,i,l,c,e)}):a=function(i,l,c){return s.call(this,i,as(e,l),c,e)}),o[t](a,...n)}function pa(e,t,s){const n=be(e);tt(n,"iterate",Hn);const o=n[t](...s);return(o===-1||o===!1)&&br(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function yn(e,t,s=[]){Zt(),vr();const n=be(e)[t].apply(e,s);return mr(),es(),n}const Yu=ir("__proto__,__v_isRef,__isVue"),Ci=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(It));function Xu(e){It(e)||(e=String(e));const t=be(this);return tt(t,"has",e),t.hasOwnProperty(e)}class $i{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?ld:Ni:a?xi:Ai).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const i=ie(t);if(!o){let c;if(i&&(c=Ju[s]))return c;if(s==="hasOwnProperty")return Xu}const l=Reflect.get(t,s,nt(t)?t:n);if((It(s)?Ci.has(s):Yu(s))||(o||tt(t,"get",s),a))return l;if(nt(l)){const c=i&&dr(s)?l:l.value;return o&&Ce(c)?La(c):c}return Ce(l)?o?La(l):jt(l):l}}class ki extends $i{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const i=ie(t)&&dr(s);if(!this._isShallow){const u=ts(a);if(!wt(n)&&!ts(n)&&(a=be(a),n=be(n)),!i&&nt(a)&&!nt(n))return u||(a.value=n),!0}const l=i?Number(s)<t.length:_e(t,s),c=Reflect.set(t,s,n,nt(t)?t:o);return t===be(o)&&(l?cs(n,a)&&Jt(t,"set",s,n):Jt(t,"add",s,n)),c}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Jt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!It(s)||!Ci.has(s))&&tt(t,"has",s),n}ownKeys(t){return tt(t,"iterate",ie(t)?"length":As),Reflect.ownKeys(t)}}class Qu extends $i{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Zu=new ki,ed=new Qu,td=new ki(!0);const Pa=e=>e,uo=e=>Reflect.getPrototypeOf(e);function sd(e,t,s){return function(...n){const o=this.__v_raw,a=be(o),i=qs(a),l=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,u=o[e](...n),d=s?Pa:t?en:Et;return!t&&tt(a,"iterate",c?Ra:As),Xe(Object.create(u),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:l?[d(f[0]),d(f[1])]:d(f),done:h}}})}}function fo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function nd(e,t){const s={get(o){const a=this.__v_raw,i=be(a),l=be(o);e||(cs(o,l)&&tt(i,"get",o),tt(i,"get",l));const{has:c}=uo(i),u=t?Pa:e?en:Et;if(c.call(i,o))return u(a.get(o));if(c.call(i,l))return u(a.get(l));a!==i&&a.get(o)},get size(){const o=this.__v_raw;return!e&&tt(be(o),"iterate",As),o.size},has(o){const a=this.__v_raw,i=be(a),l=be(o);return e||(cs(o,l)&&tt(i,"has",o),tt(i,"has",l)),o===l?a.has(o):a.has(o)||a.has(l)},forEach(o,a){const i=this,l=i.__v_raw,c=be(l),u=t?Pa:e?en:Et;return!e&&tt(c,"iterate",As),l.forEach((d,f)=>o.call(a,u(d),u(f),i))}};return Xe(s,e?{add:fo("add"),set:fo("set"),delete:fo("delete"),clear:fo("clear")}:{add(o){!t&&!wt(o)&&!ts(o)&&(o=be(o));const a=be(this);return uo(a).has.call(a,o)||(a.add(o),Jt(a,"add",o,o)),this},set(o,a){!t&&!wt(a)&&!ts(a)&&(a=be(a));const i=be(this),{has:l,get:c}=uo(i);let u=l.call(i,o);u||(o=be(o),u=l.call(i,o));const d=c.call(i,o);return i.set(o,a),u?cs(a,d)&&Jt(i,"set",o,a):Jt(i,"add",o,a),this},delete(o){const a=be(this),{has:i,get:l}=uo(a);let c=i.call(a,o);c||(o=be(o),c=i.call(a,o)),l&&l.call(a,o);const u=a.delete(o);return c&&Jt(a,"delete",o,void 0),u},clear(){const o=be(this),a=o.size!==0,i=o.clear();return a&&Jt(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=sd(o,e,t)}),s}function gr(e,t){const s=nd(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,a)}const od={get:gr(!1,!1)},ad={get:gr(!1,!0)},rd={get:gr(!0,!1)};const Ai=new WeakMap,xi=new WeakMap,Ni=new WeakMap,ld=new WeakMap;function id(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cd(e){return e.__v_skip||!Object.isExtensible(e)?0:id(Ru(e))}function jt(e){return ts(e)?e:yr(e,!1,Zu,od,Ai)}function Ti(e){return yr(e,!1,td,ad,xi)}function La(e){return yr(e,!0,ed,rd,Ni)}function yr(e,t,s,n,o){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=cd(e);if(a===0)return e;const i=o.get(e);if(i)return i;const l=new Proxy(e,a===2?n:s);return o.set(e,l),l}function xs(e){return ts(e)?xs(e.__v_raw):!!(e&&e.__v_isReactive)}function ts(e){return!!(e&&e.__v_isReadonly)}function wt(e){return!!(e&&e.__v_isShallow)}function br(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function ud(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&di(e,"__v_skip",!0),e}const Et=e=>Ce(e)?jt(e):e,en=e=>Ce(e)?La(e):e;function nt(e){return e?e.__v_isRef===!0:!1}function N(e){return Oi(e,!1)}function dd(e){return Oi(e,!0)}function Oi(e,t){return nt(e)?e:new fd(e,t)}class fd{constructor(t,s){this.dep=new hr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:Et(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||wt(t)||ts(t);t=n?t:be(t),cs(t,s)&&(this._rawValue=t,this._value=n?t:Et(t),this.dep.trigger())}}function D(e){return nt(e)?e.value:e}const vd={get:(e,t,s)=>t==="__v_raw"?e:D(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return nt(o)&&!nt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Ii(e){return xs(e)?e:new Proxy(e,vd)}class md{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new hr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=jn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return gi(this,!0),!0}get value(){const t=this.dep.track();return _i(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pd(e,t,s=!1){let n,o;return ce(e)?n=e:(n=e.get,o=e.set),new md(n,o,s)}const vo={},$o=new WeakMap;let Cs;function hd(e,t=!1,s=Cs){if(s){let n=$o.get(s);n||$o.set(s,n=[]),n.push(e)}}function gd(e,t,s=Se){const{immediate:n,deep:o,once:a,scheduler:i,augmentJob:l,call:c}=s,u=R=>o?R:wt(R)||o===!1||o===0?qt(R,1):qt(R);let d,f,h,v,m=!1,y=!1;if(nt(e)?(f=()=>e.value,m=wt(e)):xs(e)?(f=()=>u(e),m=!0):ie(e)?(y=!0,m=e.some(R=>xs(R)||wt(R)),f=()=>e.map(R=>{if(nt(R))return R.value;if(xs(R))return u(R);if(ce(R))return c?c(R,2):R()})):ce(e)?t?f=c?()=>c(e,2):e:f=()=>{if(h){Zt();try{h()}finally{es()}}const R=Cs;Cs=d;try{return c?c(e,3,[v]):e(v)}finally{Cs=R}}:f=Ft,t&&o){const R=f,V=o===!0?1/0:o;f=()=>qt(R(),V)}const O=Wu(),k=()=>{d.stop(),O&&O.active&&ur(O.effects,d)};if(a&&t){const R=t;t=(...V)=>{R(...V),k()}}let b=y?new Array(e.length).fill(vo):vo;const C=R=>{if(!(!(d.flags&1)||!d.dirty&&!R))if(t){const V=d.run();if(o||m||(y?V.some((ee,K)=>cs(ee,b[K])):cs(V,b))){h&&h();const ee=Cs;Cs=d;try{const K=[V,b===vo?void 0:y&&b[0]===vo?[]:b,v];b=V,c?c(t,3,K):t(...K)}finally{Cs=ee}}}else d.run()};return l&&l(C),d=new pi(f),d.scheduler=i?()=>i(C,!1):C,v=R=>hd(R,!1,d),h=d.onStop=()=>{const R=$o.get(d);if(R){if(c)c(R,4);else for(const V of R)V();$o.delete(d)}},t?n?C(!0):b=d.run():i?i(C.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function qt(e,t=1/0,s){if(t<=0||!Ce(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,nt(e))qt(e.value,t,s);else if(ie(e))for(let n=0;n<e.length;n++)qt(e[n],t,s);else if(vn(e)||qs(e))e.forEach(n=>{qt(n,t,s)});else if(ui(e)){for(const n in e)qt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&qt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zn(e,t,s,n){try{return n?e(...n):e()}catch(o){Jo(o,t,s)}}function Kt(e,t,s,n){if(ce(e)){const o=Zn(e,t,s,n);return o&&ii(o)&&o.catch(a=>{Jo(a,t,s)}),o}if(ie(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Kt(e[a],t,s,n));return o}}function Jo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Se;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const d=l.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,c,u)===!1)return}l=l.parent}if(a){Zt(),Zn(a,null,10,[e,c,u]),es();return}}yd(e,s,o,n,i)}function yd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const lt=[];let Bt=-1;const Ys=[];let rs=null,js=0;const Ei=Promise.resolve();let ko=null;function Kn(e){const t=ko||Ei;return e?t.then(this?e.bind(this):e):t}function bd(e){let t=Bt+1,s=lt.length;for(;t<s;){const n=t+s>>>1,o=lt[n],a=Vn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function _r(e){if(!(e.flags&1)){const t=Vn(e),s=lt[lt.length-1];!s||!(e.flags&2)&&t>=Vn(s)?lt.push(e):lt.splice(bd(t),0,e),e.flags|=1,Di()}}function Di(){ko||(ko=Ei.then(Pi))}function _d(e){ie(e)?Ys.push(...e):rs&&e.id===-1?rs.splice(js+1,0,e):e.flags&1||(Ys.push(e),e.flags|=1),Di()}function Xr(e,t,s=Bt+1){for(;s<lt.length;s++){const n=lt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;lt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ri(e){if(Ys.length){const t=[...new Set(Ys)].sort((s,n)=>Vn(s)-Vn(n));if(Ys.length=0,rs){rs.push(...t);return}for(rs=t,js=0;js<rs.length;js++){const s=rs[js];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}rs=null,js=0}}const Vn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Pi(e){try{for(Bt=0;Bt<lt.length;Bt++){const t=lt[Bt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Zn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Bt<lt.length;Bt++){const t=lt[Bt];t&&(t.flags&=-2)}Bt=-1,lt.length=0,Ri(),ko=null,(lt.length||Ys.length)&&Pi()}}let qe=null,Li=null;function Ao(e){const t=qe;return qe=e,Li=e&&e.type.__scopeId||null,t}function wd(e,t=qe,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&To(-1);const a=Ao(t);let i;try{i=e(...o)}finally{Ao(a),n._d&&To(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function Re(e,t){if(qe===null)return e;const s=Qo(qe),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,i,l,c=Se]=t[o];a&&(ce(a)&&(a={mounted:a,updated:a}),a.deep&&qt(i),n.push({dir:a,instance:s,value:i,oldValue:void 0,arg:l,modifiers:c}))}return e}function gs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let i=0;i<o.length;i++){const l=o[i];a&&(l.oldValue=a[i].value);let c=l.dir[n];c&&(Zt(),Kt(c,s,8,[e.el,l,e,t]),es())}}function bo(e,t){if(st){let s=st.provides;const n=st.parent&&st.parent.provides;n===s&&(s=st.provides=Object.create(n)),s[e]=t}}function Ot(e,t,s=!1){const n=Cf();if(n||Qs){let o=Qs?Qs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ce(t)?t.call(n&&n.proxy):t}}const Sd=Symbol.for("v-scx"),Cd=()=>Ot(Sd);function it(e,t,s){return Bi(e,t,s)}function Bi(e,t,s=Se){const{immediate:n,deep:o,flush:a,once:i}=s,l=Xe({},s),c=t&&n||!t&&a!=="post";let u;if(zn){if(a==="sync"){const v=Cd();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=Ft,v.resume=Ft,v.pause=Ft,v}}const d=st;l.call=(v,m,y)=>Kt(v,d,m,y);let f=!1;a==="post"?l.scheduler=v=>{mt(v,d&&d.suspense)}:a!=="sync"&&(f=!0,l.scheduler=(v,m)=>{m?v():_r(v)}),l.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const h=gd(e,t,l);return zn&&(u?u.push(h):c&&h()),h}function $d(e,t,s){const n=this.proxy,o=Ue(e)?e.includes(".")?Ui(n,e):()=>n[e]:e.bind(n,n);let a;ce(t)?a=t:(a=t.handler,s=t);const i=eo(this),l=Bi(o,a.bind(n),s);return i(),l}function Ui(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const kd=Symbol("_vte"),Ad=e=>e.__isTeleport,xd=Symbol("_leaveCb");function wr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,wr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Mi(e,t){return ce(e)?Xe({name:e.name},t,{setup:e}):e}function Fi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xo=new WeakMap;function Rn(e,t,s,n,o=!1){if(ie(e)){e.forEach((m,y)=>Rn(m,t&&(ie(t)?t[y]:t),s,n,o));return}if(Xs(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Rn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?Qo(n.component):n.el,i=o?null:a,{i:l,r:c}=e,u=t&&t.r,d=l.refs===Se?l.refs={}:l.refs,f=l.setupState,h=be(f),v=f===Se?li:m=>_e(h,m);if(u!=null&&u!==c){if(Qr(t),Ue(u))d[u]=null,v(u)&&(f[u]=null);else if(nt(u)){u.value=null;const m=t;m.k&&(d[m.k]=null)}}if(ce(c))Zn(c,l,12,[i,d]);else{const m=Ue(c),y=nt(c);if(m||y){const O=()=>{if(e.f){const k=m?v(c)?f[c]:d[c]:c.value;if(o)ie(k)&&ur(k,a);else if(ie(k))k.includes(a)||k.push(a);else if(m)d[c]=[a],v(c)&&(f[c]=d[c]);else{const b=[a];c.value=b,e.k&&(d[e.k]=b)}}else m?(d[c]=i,v(c)&&(f[c]=i)):y&&(c.value=i,e.k&&(d[e.k]=i))};if(i){const k=()=>{O(),xo.delete(e)};k.id=-1,xo.set(e,k),mt(k,s)}else Qr(e),O()}}}function Qr(e){const t=xo.get(e);t&&(t.flags|=8,xo.delete(e))}Go().requestIdleCallback;Go().cancelIdleCallback;const Xs=e=>!!e.type.__asyncLoader,ji=e=>e.type.__isKeepAlive;function Nd(e,t){Hi(e,"a",t)}function Td(e,t){Hi(e,"da",t)}function Hi(e,t,s=st){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(qo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)ji(o.parent.vnode)&&Od(n,t,s,o),o=o.parent}}function Od(e,t,s,n){const o=qo(t,e,n,!0);Vi(()=>{ur(n[t],o)},s)}function qo(e,t,s=st,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...i)=>{Zt();const l=eo(s),c=Kt(t,s,e,i);return l(),es(),c});return n?o.unshift(a):o.push(a),a}}const ns=e=>(t,s=st)=>{(!zn||e==="sp")&&qo(e,(...n)=>t(...n),s)},Id=ns("bm"),ct=ns("m"),Ed=ns("bu"),Dd=ns("u"),Ki=ns("bum"),Vi=ns("um"),Rd=ns("sp"),Pd=ns("rtg"),Ld=ns("rtc");function Bd(e,t=st){qo("ec",e,t)}const Ud="components";function Md(e,t){return jd(Ud,e,!0,t)||e}const Fd=Symbol.for("v-ndc");function jd(e,t,s=!0,n=!1){const o=qe||st;if(o){const a=o.type;{const l=Nf(a,!1);if(l&&(l===t||l===Ct(t)||l===Vo(Ct(t))))return a}const i=Zr(o[e]||a[e],t)||Zr(o.appContext[e],t);return!i&&n?a:i}}function Zr(e,t){return e&&(e[t]||e[Ct(t)]||e[Vo(Ct(t))])}function ae(e,t,s,n){let o;const a=s,i=ie(e);if(i||Ue(e)){const l=i&&xs(e);let c=!1,u=!1;l&&(c=!wt(e),u=ts(e),e=zo(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(c?u?en(Et(e[d])):Et(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,a)}else if(Ce(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,a));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const d=l[c];o[c]=t(e[d],d,c,a)}}else o=[];return o}function Hd(e,t,s={},n,o){if(qe.ce||qe.parent&&Xs(qe.parent)&&qe.parent.ce){const u=Object.keys(s).length>0;return s.name=t,p(),Ae(q,null,[de("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),p();const i=a&&Wi(a(s)),l=s.key||i&&i.key,c=Ae(q,{key:(l&&!It(l)?l:`_${t}`)+(!i&&n?"_fb":"")},i||[],i&&e._===1?64:-2);return a&&a._c&&(a._d=!0),c}function Wi(e){return e.some(t=>Gn(t)?!(t.type===ss||t.type===q&&!Wi(t.children)):!0)?e:null}const Ba=e=>e?uc(e)?Qo(e):Ba(e.parent):null,Pn=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ba(e.parent),$root:e=>Ba(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zi(e),$forceUpdate:e=>e.f||(e.f=()=>{_r(e.update)}),$nextTick:e=>e.n||(e.n=Kn.bind(e.proxy)),$watch:e=>$d.bind(e)}),ha=(e,t)=>e!==Se&&!e.__isScriptSetup&&_e(e,t),Kd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:i,type:l,appContext:c}=e;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ha(n,t))return i[t]=1,n[t];if(o!==Se&&_e(o,t))return i[t]=2,o[t];if(_e(a,t))return i[t]=3,a[t];if(s!==Se&&_e(s,t))return i[t]=4,s[t];Ua&&(i[t]=0)}}const u=Pn[t];let d,f;if(u)return t==="$attrs"&&tt(e.attrs,"get",""),u(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(s!==Se&&_e(s,t))return i[t]=4,s[t];if(f=c.config.globalProperties,_e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ha(o,t)?(o[t]=s,!0):n!==Se&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:i}},l){let c;return!!(s[l]||e!==Se&&l[0]!=="$"&&_e(e,l)||ha(t,l)||_e(a,l)||_e(n,l)||_e(Pn,l)||_e(o.config.globalProperties,l)||(c=i.__cssModules)&&c[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function el(e){return ie(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ua=!0;function Vd(e){const t=zi(e),s=e.proxy,n=e.ctx;Ua=!1,t.beforeCreate&&tl(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:i,watch:l,provide:c,inject:u,created:d,beforeMount:f,mounted:h,beforeUpdate:v,updated:m,activated:y,deactivated:O,beforeDestroy:k,beforeUnmount:b,destroyed:C,unmounted:R,render:V,renderTracked:ee,renderTriggered:K,errorCaptured:X,serverPrefetch:Y,expose:ve,inheritAttrs:fe,components:we,directives:Le,filters:He}=t;if(u&&Wd(u,n,null),i)for(const Z in i){const me=i[Z];ce(me)&&(n[Z]=me.bind(s))}if(o){const Z=o.call(s,s);Ce(Z)&&(e.data=jt(Z))}if(Ua=!0,a)for(const Z in a){const me=a[Z],he=ce(me)?me.bind(s,s):ce(me.get)?me.get.bind(s,s):Ft,oe=!ce(me)&&ce(me.set)?me.set.bind(s):Ft,j=T({get:he,set:oe});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>j.value,set:se=>j.value=se})}if(l)for(const Z in l)Gi(l[Z],n,s,Z);if(c){const Z=ce(c)?c.call(s):c;Reflect.ownKeys(Z).forEach(me=>{bo(me,Z[me])})}d&&tl(d,e,"c");function ge(Z,me){ie(me)?me.forEach(he=>Z(he.bind(s))):me&&Z(me.bind(s))}if(ge(Id,f),ge(ct,h),ge(Ed,v),ge(Dd,m),ge(Nd,y),ge(Td,O),ge(Bd,X),ge(Ld,ee),ge(Pd,K),ge(Ki,b),ge(Vi,R),ge(Rd,Y),ie(ve))if(ve.length){const Z=e.exposed||(e.exposed={});ve.forEach(me=>{Object.defineProperty(Z,me,{get:()=>s[me],set:he=>s[me]=he,enumerable:!0})})}else e.exposed||(e.exposed={});V&&e.render===Ft&&(e.render=V),fe!=null&&(e.inheritAttrs=fe),we&&(e.components=we),Le&&(e.directives=Le),Y&&Fi(e)}function Wd(e,t,s=Ft){ie(e)&&(e=Ma(e));for(const n in e){const o=e[n];let a;Ce(o)?"default"in o?a=Ot(o.from||n,o.default,!0):a=Ot(o.from||n):a=Ot(o),nt(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:i=>a.value=i}):t[n]=a}}function tl(e,t,s){Kt(ie(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Gi(e,t,s,n){let o=n.includes(".")?Ui(s,n):()=>s[n];if(Ue(e)){const a=t[e];ce(a)&&it(o,a)}else if(ce(e))it(o,e.bind(s));else if(Ce(e))if(ie(e))e.forEach(a=>Gi(a,t,s,n));else{const a=ce(e.handler)?e.handler.bind(s):t[e.handler];ce(a)&&it(o,a,e)}}function zi(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:i}}=e.appContext,l=a.get(t);let c;return l?c=l:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(u=>No(c,u,i,!0)),No(c,t,i)),Ce(t)&&a.set(t,c),c}function No(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&No(e,a,s,!0),o&&o.forEach(i=>No(e,i,s,!0));for(const i in t)if(!(n&&i==="expose")){const l=Gd[i]||s&&s[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const Gd={data:sl,props:nl,emits:nl,methods:xn,computed:xn,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:xn,directives:xn,watch:Jd,provide:sl,inject:zd};function sl(e,t){return t?e?function(){return Xe(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function zd(e,t){return xn(Ma(e),Ma(t))}function Ma(e){if(ie(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function xn(e,t){return e?Xe(Object.create(null),e,t):t}function nl(e,t){return e?ie(e)&&ie(t)?[...new Set([...e,...t])]:Xe(Object.create(null),el(e),el(t??{})):t}function Jd(e,t){if(!e)return t;if(!t)return e;const s=Xe(Object.create(null),e);for(const n in t)s[n]=at(e[n],t[n]);return s}function Ji(){return{app:null,config:{isNativeTag:li,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qd=0;function Yd(e,t){return function(n,o=null){ce(n)||(n=Xe({},n)),o!=null&&!Ce(o)&&(o=null);const a=Ji(),i=new WeakSet,l=[];let c=!1;const u=a.app={_uid:qd++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Of,get config(){return a.config},set config(d){},use(d,...f){return i.has(d)||(d&&ce(d.install)?(i.add(d),d.install(u,...f)):ce(d)&&(i.add(d),d(u,...f))),u},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),u},component(d,f){return f?(a.components[d]=f,u):a.components[d]},directive(d,f){return f?(a.directives[d]=f,u):a.directives[d]},mount(d,f,h){if(!c){const v=u._ceVNode||de(n,o);return v.appContext=a,h===!0?h="svg":h===!1&&(h=void 0),e(v,d,h),c=!0,u._container=d,d.__vue_app__=u,Qo(v.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Kt(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return a.provides[d]=f,u},runWithContext(d){const f=Qs;Qs=u;try{return d()}finally{Qs=f}}};return u}}let Qs=null;const Xd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ct(t)}Modifiers`]||e[`${ms(t)}Modifiers`];function Qd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Se;let o=s;const a=t.startsWith("update:"),i=a&&Xd(n,t.slice(7));i&&(i.trim&&(o=s.map(d=>Ue(d)?d.trim():d)),i.number&&(o=s.map(Wo)));let l,c=n[l=da(t)]||n[l=da(Ct(t))];!c&&a&&(c=n[l=da(ms(t))]),c&&Kt(c,e,6,o);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Kt(u,e,6,o)}}const Zd=new WeakMap;function qi(e,t,s=!1){const n=s?Zd:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let i={},l=!1;if(!ce(e)){const c=u=>{const d=qi(u,t,!0);d&&(l=!0,Xe(i,d))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!l?(Ce(e)&&n.set(e,null),null):(ie(a)?a.forEach(c=>i[c]=null):Xe(i,a),Ce(e)&&n.set(e,i),i)}function Yo(e,t){return!e||!Ho(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,ms(t))||_e(e,t))}function ol(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:i,attrs:l,emit:c,render:u,renderCache:d,props:f,data:h,setupState:v,ctx:m,inheritAttrs:y}=e,O=Ao(e);let k,b;try{if(s.shapeFlag&4){const R=o||n,V=R;k=Ut(u.call(V,R,d,f,v,h,m)),b=l}else{const R=t;k=Ut(R.length>1?R(f,{attrs:l,slots:i,emit:c}):R(f,null)),b=t.props?l:ef(l)}}catch(R){Ln.length=0,Jo(R,e,1),k=de(ss)}let C=k;if(b&&y!==!1){const R=Object.keys(b),{shapeFlag:V}=C;R.length&&V&7&&(a&&R.some(cr)&&(b=tf(b,a)),C=tn(C,b,!1,!0))}return s.dirs&&(C=tn(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&wr(C,s.transition),k=C,Ao(O),k}const ef=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ho(s))&&((t||(t={}))[s]=e[s]);return t},tf=(e,t)=>{const s={};for(const n in e)(!cr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function sf(e,t,s){const{props:n,children:o,component:a}=e,{props:i,children:l,patchFlag:c}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?al(n,i,u):!!i;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const h=d[f];if(i[h]!==n[h]&&!Yo(u,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===i?!1:n?i?al(n,i,u):!0:!!i;return!1}function al(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!Yo(s,a))return!0}return!1}function nf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Yi={},Xi=()=>Object.create(Yi),Qi=e=>Object.getPrototypeOf(e)===Yi;function of(e,t,s,n=!1){const o={},a=Xi();e.propsDefaults=Object.create(null),Zi(e,t,o,a);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);s?e.props=n?o:Ti(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function af(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:i}}=e,l=be(o),[c]=e.propsOptions;let u=!1;if((n||i>0)&&!(i&16)){if(i&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let h=d[f];if(Yo(e.emitsOptions,h))continue;const v=t[h];if(c)if(_e(a,h))v!==a[h]&&(a[h]=v,u=!0);else{const m=Ct(h);o[m]=Fa(c,l,m,v,e,!1)}else v!==a[h]&&(a[h]=v,u=!0)}}}else{Zi(e,t,o,a)&&(u=!0);let d;for(const f in l)(!t||!_e(t,f)&&((d=ms(f))===f||!_e(t,d)))&&(c?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=Fa(c,l,f,void 0,e,!0)):delete o[f]);if(a!==l)for(const f in a)(!t||!_e(t,f))&&(delete a[f],u=!0)}u&&Jt(e.attrs,"set","")}function Zi(e,t,s,n){const[o,a]=e.propsOptions;let i=!1,l;if(t)for(let c in t){if(In(c))continue;const u=t[c];let d;o&&_e(o,d=Ct(c))?!a||!a.includes(d)?s[d]=u:(l||(l={}))[d]=u:Yo(e.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,i=!0)}if(a){const c=be(s),u=l||Se;for(let d=0;d<a.length;d++){const f=a[d];s[f]=Fa(o,c,f,u[f],e,!_e(u,f))}}return i}function Fa(e,t,s,n,o,a){const i=e[s];if(i!=null){const l=_e(i,"default");if(l&&n===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&ce(c)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=eo(o);n=u[s]=c.call(null,t),d()}}else n=c;o.ce&&o.ce._setProp(s,n)}i[0]&&(a&&!l?n=!1:i[1]&&(n===""||n===ms(s))&&(n=!0))}return n}const rf=new WeakMap;function ec(e,t,s=!1){const n=s?rf:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,i={},l=[];let c=!1;if(!ce(e)){const d=f=>{c=!0;const[h,v]=ec(f,t,!0);Xe(i,h),v&&l.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!c)return Ce(e)&&n.set(e,Js),Js;if(ie(a))for(let d=0;d<a.length;d++){const f=Ct(a[d]);rl(f)&&(i[f]=Se)}else if(a)for(const d in a){const f=Ct(d);if(rl(f)){const h=a[d],v=i[f]=ie(h)||ce(h)?{type:h}:Xe({},h),m=v.type;let y=!1,O=!0;if(ie(m))for(let k=0;k<m.length;++k){const b=m[k],C=ce(b)&&b.name;if(C==="Boolean"){y=!0;break}else C==="String"&&(O=!1)}else y=ce(m)&&m.name==="Boolean";v[0]=y,v[1]=O,(y||_e(v,"default"))&&l.push(f)}}const u=[i,l];return Ce(e)&&n.set(e,u),u}function rl(e){return e[0]!=="$"&&!In(e)}const Sr=e=>e==="_"||e==="_ctx"||e==="$stable",Cr=e=>ie(e)?e.map(Ut):[Ut(e)],lf=(e,t,s)=>{if(t._n)return t;const n=wd((...o)=>Cr(t(...o)),s);return n._c=!1,n},tc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Sr(o))continue;const a=e[o];if(ce(a))t[o]=lf(o,a,n);else if(a!=null){const i=Cr(a);t[o]=()=>i}}},sc=(e,t)=>{const s=Cr(t);e.slots.default=()=>s},nc=(e,t,s)=>{for(const n in t)(s||!Sr(n))&&(e[n]=t[n])},cf=(e,t,s)=>{const n=e.slots=Xi();if(e.vnode.shapeFlag&32){const o=t._;o?(nc(n,t,s),s&&di(n,"_",o,!0)):tc(t,n)}else t&&sc(e,t)},uf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,i=Se;if(n.shapeFlag&32){const l=t._;l?s&&l===1?a=!1:nc(o,t,s):(a=!t.$stable,tc(t,o)),i=t}else t&&(sc(e,t),i={default:1});if(a)for(const l in o)!Sr(l)&&i[l]==null&&delete o[l]},mt=pf;function df(e){return ff(e)}function ff(e,t){const s=Go();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:i,createText:l,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:h,setScopeId:v=Ft,insertStaticContent:m}=e,y=(S,$,E,B=null,F=null,U=null,G=void 0,W=null,x=!!$.dynamicChildren)=>{if(S===$)return;S&&!bn(S,$)&&(B=M(S),se(S,F,U,!0),S=null),$.patchFlag===-2&&(x=!1,$.dynamicChildren=null);const{type:w,ref:A,shapeFlag:I}=$;switch(w){case Xo:O(S,$,E,B);break;case ss:k(S,$,E,B);break;case _o:S==null&&b($,E,B,G);break;case q:we(S,$,E,B,F,U,G,W,x);break;default:I&1?V(S,$,E,B,F,U,G,W,x):I&6?Le(S,$,E,B,F,U,G,W,x):(I&64||I&128)&&w.process(S,$,E,B,F,U,G,W,x,te)}A!=null&&F?Rn(A,S&&S.ref,U,$||S,!$):A==null&&S&&S.ref!=null&&Rn(S.ref,null,U,S,!0)},O=(S,$,E,B)=>{if(S==null)n($.el=l($.children),E,B);else{const F=$.el=S.el;$.children!==S.children&&u(F,$.children)}},k=(S,$,E,B)=>{S==null?n($.el=c($.children||""),E,B):$.el=S.el},b=(S,$,E,B)=>{[S.el,S.anchor]=m(S.children,$,E,B,S.el,S.anchor)},C=({el:S,anchor:$},E,B)=>{let F;for(;S&&S!==$;)F=h(S),n(S,E,B),S=F;n($,E,B)},R=({el:S,anchor:$})=>{let E;for(;S&&S!==$;)E=h(S),o(S),S=E;o($)},V=(S,$,E,B,F,U,G,W,x)=>{if($.type==="svg"?G="svg":$.type==="math"&&(G="mathml"),S==null)ee($,E,B,F,U,G,W,x);else{const w=S.el&&S.el._isVueCE?S.el:null;try{w&&w._beginPatch(),Y(S,$,F,U,G,W,x)}finally{w&&w._endPatch()}}},ee=(S,$,E,B,F,U,G,W)=>{let x,w;const{props:A,shapeFlag:I,transition:L,dirs:H}=S;if(x=S.el=i(S.type,U,A&&A.is,A),I&8?d(x,S.children):I&16&&X(S.children,x,null,B,F,ga(S,U),G,W),H&&gs(S,null,B,"created"),K(x,S,S.scopeId,G,B),A){for(const re in A)re!=="value"&&!In(re)&&a(x,re,null,A[re],U,B);"value"in A&&a(x,"value",null,A.value,U),(w=A.onVnodeBeforeMount)&&Pt(w,B,S)}H&&gs(S,null,B,"beforeMount");const J=vf(F,L);J&&L.beforeEnter(x),n(x,$,E),((w=A&&A.onVnodeMounted)||J||H)&&mt(()=>{w&&Pt(w,B,S),J&&L.enter(x),H&&gs(S,null,B,"mounted")},F)},K=(S,$,E,B,F)=>{if(E&&v(S,E),B)for(let U=0;U<B.length;U++)v(S,B[U]);if(F){let U=F.subTree;if($===U||lc(U.type)&&(U.ssContent===$||U.ssFallback===$)){const G=F.vnode;K(S,G,G.scopeId,G.slotScopeIds,F.parent)}}},X=(S,$,E,B,F,U,G,W,x=0)=>{for(let w=x;w<S.length;w++){const A=S[w]=W?ls(S[w]):Ut(S[w]);y(null,A,$,E,B,F,U,G,W)}},Y=(S,$,E,B,F,U,G)=>{const W=$.el=S.el;let{patchFlag:x,dynamicChildren:w,dirs:A}=$;x|=S.patchFlag&16;const I=S.props||Se,L=$.props||Se;let H;if(E&&ys(E,!1),(H=L.onVnodeBeforeUpdate)&&Pt(H,E,$,S),A&&gs($,S,E,"beforeUpdate"),E&&ys(E,!0),(I.innerHTML&&L.innerHTML==null||I.textContent&&L.textContent==null)&&d(W,""),w?ve(S.dynamicChildren,w,W,E,B,ga($,F),U):G||me(S,$,W,null,E,B,ga($,F),U,!1),x>0){if(x&16)fe(W,I,L,E,F);else if(x&2&&I.class!==L.class&&a(W,"class",null,L.class,F),x&4&&a(W,"style",I.style,L.style,F),x&8){const J=$.dynamicProps;for(let re=0;re<J.length;re++){const le=J[re],Oe=I[le],Ne=L[le];(Ne!==Oe||le==="value")&&a(W,le,Oe,Ne,F,E)}}x&1&&S.children!==$.children&&d(W,$.children)}else!G&&w==null&&fe(W,I,L,E,F);((H=L.onVnodeUpdated)||A)&&mt(()=>{H&&Pt(H,E,$,S),A&&gs($,S,E,"updated")},B)},ve=(S,$,E,B,F,U,G)=>{for(let W=0;W<$.length;W++){const x=S[W],w=$[W],A=x.el&&(x.type===q||!bn(x,w)||x.shapeFlag&198)?f(x.el):E;y(x,w,A,null,B,F,U,G,!0)}},fe=(S,$,E,B,F)=>{if($!==E){if($!==Se)for(const U in $)!In(U)&&!(U in E)&&a(S,U,$[U],null,F,B);for(const U in E){if(In(U))continue;const G=E[U],W=$[U];G!==W&&U!=="value"&&a(S,U,W,G,F,B)}"value"in E&&a(S,"value",$.value,E.value,F)}},we=(S,$,E,B,F,U,G,W,x)=>{const w=$.el=S?S.el:l(""),A=$.anchor=S?S.anchor:l("");let{patchFlag:I,dynamicChildren:L,slotScopeIds:H}=$;H&&(W=W?W.concat(H):H),S==null?(n(w,E,B),n(A,E,B),X($.children||[],E,A,F,U,G,W,x)):I>0&&I&64&&L&&S.dynamicChildren&&S.dynamicChildren.length===L.length?(ve(S.dynamicChildren,L,E,F,U,G,W),($.key!=null||F&&$===F.subTree)&&oc(S,$,!0)):me(S,$,E,A,F,U,G,W,x)},Le=(S,$,E,B,F,U,G,W,x)=>{$.slotScopeIds=W,S==null?$.shapeFlag&512?F.ctx.activate($,E,B,G,x):He($,E,B,F,U,G,x):Ge(S,$,x)},He=(S,$,E,B,F,U,G)=>{const W=S.component=Sf(S,B,F);if(ji(S)&&(W.ctx.renderer=te),$f(W,!1,G),W.asyncDep){if(F&&F.registerDep(W,ge,G),!S.el){const x=W.subTree=de(ss);k(null,x,$,E),S.placeholder=x.el}}else ge(W,S,$,E,F,U,G)},Ge=(S,$,E)=>{const B=$.component=S.component;if(sf(S,$,E))if(B.asyncDep&&!B.asyncResolved){Z(B,$,E);return}else B.next=$,B.update();else $.el=S.el,B.vnode=$},ge=(S,$,E,B,F,U,G)=>{const W=()=>{if(S.isMounted){let{next:I,bu:L,u:H,parent:J,vnode:re}=S;{const ot=ac(S);if(ot){I&&(I.el=re.el,Z(S,I,G)),ot.asyncDep.then(()=>{S.isUnmounted||W()});return}}let le=I,Oe;ys(S,!1),I?(I.el=re.el,Z(S,I,G)):I=re,L&&yo(L),(Oe=I.props&&I.props.onVnodeBeforeUpdate)&&Pt(Oe,J,I,re),ys(S,!0);const Ne=ol(S),Je=S.subTree;S.subTree=Ne,y(Je,Ne,f(Je.el),M(Je),S,F,U),I.el=Ne.el,le===null&&nf(S,Ne.el),H&&mt(H,F),(Oe=I.props&&I.props.onVnodeUpdated)&&mt(()=>Pt(Oe,J,I,re),F)}else{let I;const{el:L,props:H}=$,{bm:J,m:re,parent:le,root:Oe,type:Ne}=S,Je=Xs($);ys(S,!1),J&&yo(J),!Je&&(I=H&&H.onVnodeBeforeMount)&&Pt(I,le,$),ys(S,!0);{Oe.ce&&Oe.ce._def.shadowRoot!==!1&&Oe.ce._injectChildStyle(Ne);const ot=S.subTree=ol(S);y(null,ot,E,B,S,F,U),$.el=ot.el}if(re&&mt(re,F),!Je&&(I=H&&H.onVnodeMounted)){const ot=$;mt(()=>Pt(I,le,ot),F)}($.shapeFlag&256||le&&Xs(le.vnode)&&le.vnode.shapeFlag&256)&&S.a&&mt(S.a,F),S.isMounted=!0,$=E=B=null}};S.scope.on();const x=S.effect=new pi(W);S.scope.off();const w=S.update=x.run.bind(x),A=S.job=x.runIfDirty.bind(x);A.i=S,A.id=S.uid,x.scheduler=()=>_r(A),ys(S,!0),w()},Z=(S,$,E)=>{$.component=S;const B=S.vnode.props;S.vnode=$,S.next=null,af(S,$.props,B,E),uf(S,$.children,E),Zt(),Xr(S),es()},me=(S,$,E,B,F,U,G,W,x=!1)=>{const w=S&&S.children,A=S?S.shapeFlag:0,I=$.children,{patchFlag:L,shapeFlag:H}=$;if(L>0){if(L&128){oe(w,I,E,B,F,U,G,W,x);return}else if(L&256){he(w,I,E,B,F,U,G,W,x);return}}H&8?(A&16&&Ze(w,F,U),I!==w&&d(E,I)):A&16?H&16?oe(w,I,E,B,F,U,G,W,x):Ze(w,F,U,!0):(A&8&&d(E,""),H&16&&X(I,E,B,F,U,G,W,x))},he=(S,$,E,B,F,U,G,W,x)=>{S=S||Js,$=$||Js;const w=S.length,A=$.length,I=Math.min(w,A);let L;for(L=0;L<I;L++){const H=$[L]=x?ls($[L]):Ut($[L]);y(S[L],H,E,null,F,U,G,W,x)}w>A?Ze(S,F,U,!0,!1,I):X($,E,B,F,U,G,W,x,I)},oe=(S,$,E,B,F,U,G,W,x)=>{let w=0;const A=$.length;let I=S.length-1,L=A-1;for(;w<=I&&w<=L;){const H=S[w],J=$[w]=x?ls($[w]):Ut($[w]);if(bn(H,J))y(H,J,E,null,F,U,G,W,x);else break;w++}for(;w<=I&&w<=L;){const H=S[I],J=$[L]=x?ls($[L]):Ut($[L]);if(bn(H,J))y(H,J,E,null,F,U,G,W,x);else break;I--,L--}if(w>I){if(w<=L){const H=L+1,J=H<A?$[H].el:B;for(;w<=L;)y(null,$[w]=x?ls($[w]):Ut($[w]),E,J,F,U,G,W,x),w++}}else if(w>L)for(;w<=I;)se(S[w],F,U,!0),w++;else{const H=w,J=w,re=new Map;for(w=J;w<=L;w++){const Ie=$[w]=x?ls($[w]):Ut($[w]);Ie.key!=null&&re.set(Ie.key,w)}let le,Oe=0;const Ne=L-J+1;let Je=!1,ot=0;const At=new Array(Ne);for(w=0;w<Ne;w++)At[w]=0;for(w=H;w<=I;w++){const Ie=S[w];if(Oe>=Ne){se(Ie,F,U,!0);continue}let Ke;if(Ie.key!=null)Ke=re.get(Ie.key);else for(le=J;le<=L;le++)if(At[le-J]===0&&bn(Ie,$[le])){Ke=le;break}Ke===void 0?se(Ie,F,U,!0):(At[Ke-J]=w+1,Ke>=ot?ot=Ke:Je=!0,y(Ie,$[Ke],E,null,F,U,G,W,x),Oe++)}const yt=Je?mf(At):Js;for(le=yt.length-1,w=Ne-1;w>=0;w--){const Ie=J+w,Ke=$[Ie],xt=$[Ie+1],hn=Ie+1<A?xt.el||rc(xt):B;At[w]===0?y(null,Ke,E,hn,F,U,G,W,x):Je&&(le<0||w!==yt[le]?j(Ke,E,hn,2):le--)}}},j=(S,$,E,B,F=null)=>{const{el:U,type:G,transition:W,children:x,shapeFlag:w}=S;if(w&6){j(S.component.subTree,$,E,B);return}if(w&128){S.suspense.move($,E,B);return}if(w&64){G.move(S,$,E,te);return}if(G===q){n(U,$,E);for(let I=0;I<x.length;I++)j(x[I],$,E,B);n(S.anchor,$,E);return}if(G===_o){C(S,$,E);return}if(B!==2&&w&1&&W)if(B===0)W.beforeEnter(U),n(U,$,E),mt(()=>W.enter(U),F);else{const{leave:I,delayLeave:L,afterLeave:H}=W,J=()=>{S.ctx.isUnmounted?o(U):n(U,$,E)},re=()=>{U._isLeaving&&U[xd](!0),I(U,()=>{J(),H&&H()})};L?L(U,J,re):re()}else n(U,$,E)},se=(S,$,E,B=!1,F=!1)=>{const{type:U,props:G,ref:W,children:x,dynamicChildren:w,shapeFlag:A,patchFlag:I,dirs:L,cacheIndex:H}=S;if(I===-2&&(F=!1),W!=null&&(Zt(),Rn(W,null,E,S,!0),es()),H!=null&&($.renderCache[H]=void 0),A&256){$.ctx.deactivate(S);return}const J=A&1&&L,re=!Xs(S);let le;if(re&&(le=G&&G.onVnodeBeforeUnmount)&&Pt(le,$,S),A&6)vt(S.component,E,B);else{if(A&128){S.suspense.unmount(E,B);return}J&&gs(S,null,$,"beforeUnmount"),A&64?S.type.remove(S,$,E,te,B):w&&!w.hasOnce&&(U!==q||I>0&&I&64)?Ze(w,$,E,!1,!0):(U===q&&I&384||!F&&A&16)&&Ze(x,$,E),B&&ze(S)}(re&&(le=G&&G.onVnodeUnmounted)||J)&&mt(()=>{le&&Pt(le,$,S),J&&gs(S,null,$,"unmounted")},E)},ze=S=>{const{type:$,el:E,anchor:B,transition:F}=S;if($===q){ut(E,B);return}if($===_o){R(S);return}const U=()=>{o(E),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:G,delayLeave:W}=F,x=()=>G(E,U);W?W(S.el,U,x):x()}else U()},ut=(S,$)=>{let E;for(;S!==$;)E=h(S),o(S),S=E;o($)},vt=(S,$,E)=>{const{bum:B,scope:F,job:U,subTree:G,um:W,m:x,a:w}=S;ll(x),ll(w),B&&yo(B),F.stop(),U&&(U.flags|=8,se(G,S,$,E)),W&&mt(W,$),mt(()=>{S.isUnmounted=!0},$)},Ze=(S,$,E,B=!1,F=!1,U=0)=>{for(let G=U;G<S.length;G++)se(S[G],$,E,B,F)},M=S=>{if(S.shapeFlag&6)return M(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const $=h(S.anchor||S.el),E=$&&$[kd];return E?h(E):$};let Q=!1;const z=(S,$,E)=>{let B;S==null?$._vnode&&(se($._vnode,null,null,!0),B=$._vnode.component):y($._vnode||null,S,$,null,null,null,E),$._vnode=S,Q||(Q=!0,Xr(B),Ri(),Q=!1)},te={p:y,um:se,m:j,r:ze,mt:He,mc:X,pc:me,pbc:ve,n:M,o:e};return{render:z,hydrate:void 0,createApp:Yd(z)}}function ga({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ys({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oc(e,t,s=!1){const n=e.children,o=t.children;if(ie(n)&&ie(o))for(let a=0;a<n.length;a++){const i=n[a];let l=o[a];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[a]=ls(o[a]),l.el=i.el),!s&&l.patchFlag!==-2&&oc(i,l)),l.type===Xo&&(l.patchFlag!==-1?l.el=i.el:l.__elIndex=a+(e.type===q?1:0)),l.type===ss&&!l.el&&(l.el=i.el)}}function mf(e){const t=e.slice(),s=[0];let n,o,a,i,l;const c=e.length;for(n=0;n<c;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,i=s.length-1;a<i;)l=a+i>>1,e[s[l]]<u?a=l+1:i=l;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,i=s[a-1];a-- >0;)s[a]=i,i=t[i];return s}function ac(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ac(t)}function ll(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function rc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?rc(t.subTree):null}const lc=e=>e.__isSuspense;function pf(e,t){t&&t.pendingBranch?ie(e)?t.effects.push(...e):t.effects.push(e):_d(e)}const q=Symbol.for("v-fgt"),Xo=Symbol.for("v-txt"),ss=Symbol.for("v-cmt"),_o=Symbol.for("v-stc"),Ln=[];let gt=null;function p(e=!1){Ln.push(gt=e?null:[])}function hf(){Ln.pop(),gt=Ln[Ln.length-1]||null}let Wn=1;function To(e,t=!1){Wn+=e,e<0&&gt&&t&&(gt.hasOnce=!0)}function ic(e){return e.dynamicChildren=Wn>0?gt||Js:null,hf(),Wn>0&&gt&&gt.push(e),e}function g(e,t,s,n,o,a){return ic(r(e,t,s,n,o,a,!0))}function Ae(e,t,s,n,o){return ic(de(e,t,s,n,o,!0))}function Gn(e){return e?e.__v_isVNode===!0:!1}function bn(e,t){return e.type===t.type&&e.key===t.key}const cc=({key:e})=>e??null,wo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ue(e)||nt(e)||ce(e)?{i:qe,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===q?0:1,i=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cc(t),ref:t&&wo(t),scopeId:Li,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:qe};return l?($r(c,s),a&128&&e.normalize(c)):s&&(c.shapeFlag|=Ue(s)?8:16),Wn>0&&!i&&gt&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&gt.push(c),c}const de=gf;function gf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===Fd)&&(e=ss),Gn(e)){const l=tn(e,t,!0);return s&&$r(l,s),Wn>0&&!a&&gt&&(l.shapeFlag&6?gt[gt.indexOf(e)]=l:gt.push(l)),l.patchFlag=-2,l}if(Tf(e)&&(e=e.__vccOpts),t){t=yf(t);let{class:l,style:c}=t;l&&!Ue(l)&&(t.class=ne(l)),Ce(c)&&(br(c)&&!ie(c)&&(c=Xe({},c)),t.style=Vt(c))}const i=Ue(e)?1:lc(e)?128:Ad(e)?64:Ce(e)?4:ce(e)?2:0;return r(e,t,s,n,o,i,a,!0)}function yf(e){return e?br(e)||Qi(e)?Xe({},e):e:null}function tn(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:i,children:l,transition:c}=e,u=t?bf(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&cc(u),ref:t&&t.ref?s&&a?ie(a)?a.concat(wo(t)):[a,wo(t)]:wo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==q?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&tn(e.ssContent),ssFallback:e.ssFallback&&tn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&wr(d,c.clone(d)),d}function Os(e=" ",t=0){return de(Xo,null,e,t)}function Oo(e,t){const s=de(_o,null,e);return s.staticCount=t,s}function P(e="",t=!1){return t?(p(),Ae(ss,null,e)):de(ss,null,e)}function Ut(e){return e==null||typeof e=="boolean"?de(ss):ie(e)?de(q,null,e.slice()):Gn(e)?ls(e):de(Xo,null,String(e))}function ls(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:tn(e)}function $r(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ie(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),$r(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Qi(t)?t._ctx=qe:o===3&&qe&&(qe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:qe},s=32):(t=String(t),n&64?(s=16,t=[Os(t)]):s=8);e.children=t,e.shapeFlag|=s}function bf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ne([t.class,n.class]));else if(o==="style")t.style=Vt([t.style,n.style]);else if(Ho(o)){const a=t[o],i=n[o];i&&a!==i&&!(ie(a)&&a.includes(i))&&(t[o]=a?[].concat(a,i):i)}else o!==""&&(t[o]=n[o])}return t}function Pt(e,t,s,n=null){Kt(e,t,7,[s,n])}const _f=Ji();let wf=0;function Sf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||_f,a={uid:wf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ec(n,o),emitsOptions:qi(n,o),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Qd.bind(null,a),e.ce&&e.ce(a),a}let st=null;const Cf=()=>st||qe;let Io,ja;{const e=Go(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(i=>i(a)):o[0](a)}};Io=t("__VUE_INSTANCE_SETTERS__",s=>st=s),ja=t("__VUE_SSR_SETTERS__",s=>zn=s)}const eo=e=>{const t=st;return Io(e),e.scope.on(),()=>{e.scope.off(),Io(t)}},il=()=>{st&&st.scope.off(),Io(null)};function uc(e){return e.vnode.shapeFlag&4}let zn=!1;function $f(e,t=!1,s=!1){t&&ja(t);const{props:n,children:o}=e.vnode,a=uc(e);of(e,n,a,t),cf(e,o,s||t);const i=a?kf(e,t):void 0;return t&&ja(!1),i}function kf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Kd);const{setup:n}=s;if(n){Zt();const o=e.setupContext=n.length>1?xf(e):null,a=eo(e),i=Zn(n,e,0,[e.props,o]),l=ii(i);if(es(),a(),(l||e.sp)&&!Xs(e)&&Fi(e),l){if(i.then(il,il),t)return i.then(c=>{cl(e,c)}).catch(c=>{Jo(c,e,0)});e.asyncDep=i}else cl(e,i)}else dc(e)}function cl(e,t,s){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=Ii(t)),dc(e)}function dc(e,t,s){const n=e.type;e.render||(e.render=n.render||Ft);{const o=eo(e);Zt();try{Vd(e)}finally{es(),o()}}}const Af={get(e,t){return tt(e,"get",""),e[t]}};function xf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Af),slots:e.slots,emit:e.emit,expose:t}}function Qo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ii(ud(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Pn)return Pn[s](e)},has(t,s){return s in t||s in Pn}})):e.proxy}function Nf(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function Tf(e){return ce(e)&&"__vccOpts"in e}const T=(e,t)=>pd(e,t,zn);function fc(e,t,s){try{To(-1);const n=arguments.length;return n===2?Ce(t)&&!ie(t)?Gn(t)?de(e,null,[t]):de(e,t):de(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Gn(s)&&(s=[s]),de(e,t,s))}finally{To(1)}}const Of="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ha;const ul=typeof window<"u"&&window.trustedTypes;if(ul)try{Ha=ul.createPolicy("vue",{createHTML:e=>e})}catch{}const vc=Ha?e=>Ha.createHTML(e):e=>e,If="http://www.w3.org/2000/svg",Ef="http://www.w3.org/1998/Math/MathML",zt=typeof document<"u"?document:null,dl=zt&&zt.createElement("template"),Df={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?zt.createElementNS(If,e):t==="mathml"?zt.createElementNS(Ef,e):s?zt.createElement(e,{is:s}):zt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>zt.createTextNode(e),createComment:e=>zt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const i=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{dl.innerHTML=vc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=dl.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Rf=Symbol("_vtc");function Pf(e,t,s){const n=e[Rf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const fl=Symbol("_vod"),Lf=Symbol("_vsh"),Bf=Symbol(""),Uf=/(?:^|;)\s*display\s*:/;function Mf(e,t,s){const n=e.style,o=Ue(s);let a=!1;if(s&&!o){if(t)if(Ue(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();s[l]==null&&So(n,l,"")}else for(const i in t)s[i]==null&&So(n,i,"");for(const i in s)i==="display"&&(a=!0),So(n,i,s[i])}else if(o){if(t!==s){const i=n[Bf];i&&(s+=";"+i),n.cssText=s,a=Uf.test(s)}}else t&&e.removeAttribute("style");fl in e&&(e[fl]=a?n.display:"",e[Lf]&&(n.display="none"))}const vl=/\s*!important$/;function So(e,t,s){if(ie(s))s.forEach(n=>So(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Ff(e,t);vl.test(s)?e.setProperty(ms(n),s.replace(vl,""),"important"):e[n]=s}}const ml=["Webkit","Moz","ms"],ya={};function Ff(e,t){const s=ya[t];if(s)return s;let n=Ct(t);if(n!=="filter"&&n in e)return ya[t]=n;n=Vo(n);for(let o=0;o<ml.length;o++){const a=ml[o]+n;if(a in e)return ya[t]=a}return t}const pl="http://www.w3.org/1999/xlink";function hl(e,t,s,n,o,a=Hu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(pl,t.slice(6,t.length)):e.setAttributeNS(pl,t,s):s==null||a&&!fi(s)?e.removeAttribute(t):e.setAttribute(t,a?"":It(s)?String(s):s)}function gl(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?vc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const l=a==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=fi(s):s==null&&l==="string"?(s="",i=!0):l==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(o||t)}function Yt(e,t,s,n){e.addEventListener(t,s,n)}function jf(e,t,s,n){e.removeEventListener(t,s,n)}const yl=Symbol("_vei");function Hf(e,t,s,n,o=null){const a=e[yl]||(e[yl]={}),i=a[t];if(n&&i)i.value=n;else{const[l,c]=Kf(t);if(n){const u=a[t]=Gf(n,o);Yt(e,l,u,c)}else i&&(jf(e,l,i,c),a[t]=void 0)}}const bl=/(?:Once|Passive|Capture)$/;function Kf(e){let t;if(bl.test(e)){t={};let n;for(;n=e.match(bl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ms(e.slice(2)),t]}let ba=0;const Vf=Promise.resolve(),Wf=()=>ba||(Vf.then(()=>ba=0),ba=Date.now());function Gf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Kt(zf(n,s.value),t,5,[n])};return s.value=e,s.attached=Wf(),s}function zf(e,t){if(ie(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const _l=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Jf=(e,t,s,n,o,a)=>{const i=o==="svg";t==="class"?Pf(e,n,i):t==="style"?Mf(e,s,n):Ho(t)?cr(t)||Hf(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qf(e,t,n,i))?(gl(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&hl(e,t,n,i,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ue(n))?gl(e,Ct(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),hl(e,t,n,i))};function qf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&_l(t)&&ce(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return _l(t)&&Ue(s)?!1:t in e}const fs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ie(t)?s=>yo(t,s):t};function Yf(e){e.target.composing=!0}function wl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const St=Symbol("_assign");function Sl(e,t,s){return t&&(e=e.trim()),s&&(e=Wo(e)),e}const Nt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[St]=fs(o);const a=n||o.props&&o.props.type==="number";Yt(e,t?"change":"input",i=>{i.target.composing||e[St](Sl(e.value,s,a))}),(s||a)&&Yt(e,"change",()=>{e.value=Sl(e.value,s,a)}),t||(Yt(e,"compositionstart",Yf),Yt(e,"compositionend",wl),Yt(e,"change",wl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},i){if(e[St]=fs(i),e.composing)return;const l=(a||e.type==="number")&&!/^0\d/.test(e.value)?Wo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===c)||(e.value=c))}},Zo={deep:!0,created(e,t,s){e[St]=fs(s),Yt(e,"change",()=>{const n=e._modelValue,o=sn(e),a=e.checked,i=e[St];if(ie(n)){const l=fr(n,o),c=l!==-1;if(a&&!c)i(n.concat(o));else if(!a&&c){const u=[...n];u.splice(l,1),i(u)}}else if(vn(n)){const l=new Set(n);a?l.add(o):l.delete(o),i(l)}else i(mc(e,a))})},mounted:Cl,beforeUpdate(e,t,s){e[St]=fs(s),Cl(e,t,s)}};function Cl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ie(t))o=fr(t,n.props.value)>-1;else if(vn(t))o=t.has(n.props.value);else{if(t===s)return;o=Ts(t,mc(e,!0))}e.checked!==o&&(e.checked=o)}const $l={created(e,{value:t},s){e.checked=Ts(t,s.props.value),e[St]=fs(s),Yt(e,"change",()=>{e[St](sn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[St]=fs(n),t!==s&&(e.checked=Ts(t,n.props.value))}},Bn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=vn(t);Yt(e,"change",()=>{const a=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>s?Wo(sn(i)):sn(i));e[St](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Kn(()=>{e._assigning=!1})}),e[St]=fs(n)},mounted(e,{value:t}){kl(e,t)},beforeUpdate(e,t,s){e[St]=fs(s)},updated(e,{value:t}){e._assigning||kl(e,t)}};function kl(e,t){const s=e.multiple,n=ie(t);if(!(s&&!n&&!vn(t))){for(let o=0,a=e.options.length;o<a;o++){const i=e.options[o],l=sn(i);if(s)if(n){const c=typeof l;c==="string"||c==="number"?i.selected=t.some(u=>String(u)===String(l)):i.selected=fr(t,l)>-1}else i.selected=t.has(l);else if(Ts(sn(i),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function sn(e){return"_value"in e?e._value:e.value}function mc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Xf=["ctrl","shift","alt","meta"],Qf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xf.some(s=>e[`${s}Key`]&&!t.includes(s))},Dt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let i=0;i<t.length;i++){const l=Qf[t[i]];if(l&&l(o,t))return}return e(o,...a)})},Zf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pc=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=ms(o.key);if(t.some(i=>i===a||Zf[i]===a))return e(o)})},ev=Xe({patchProp:Jf},Df);let Al;function tv(){return Al||(Al=df(ev))}const sv=(...e)=>{const t=tv().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=ov(n);if(!o)return;const a=t._component;!ce(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=s(o,!1,nv(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function nv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ov(e){return Ue(e)?document.querySelector(e):e}const ue=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},av={};function rv(e,t){const s=Md("router-view");return p(),Ae(s)}const lv=ue(av,[["render",rv]]),iv="modulepreload",cv=function(e){return"/"+e},xl={},uv=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(s.map(c=>{if(c=cv(c),c in xl)return;xl[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":iv,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,v)=>{f.addEventListener("load",h),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Hs=typeof document<"u";function hc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function dv(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&hc(e.default)}const ye=Object.assign;function _a(e,t){const s={};for(const n in t){const o=t[n];s[n]=Rt(o)?o.map(e):e(o)}return s}const Un=()=>{},Rt=Array.isArray;function Nl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const gc=/#/g,fv=/&/g,vv=/\//g,mv=/=/g,pv=/\?/g,yc=/\+/g,hv=/%5B/g,gv=/%5D/g,bc=/%5E/g,yv=/%60/g,_c=/%7B/g,bv=/%7C/g,wc=/%7D/g,_v=/%20/g;function kr(e){return e==null?"":encodeURI(""+e).replace(bv,"|").replace(hv,"[").replace(gv,"]")}function wv(e){return kr(e).replace(_c,"{").replace(wc,"}").replace(bc,"^")}function Ka(e){return kr(e).replace(yc,"%2B").replace(_v,"+").replace(gc,"%23").replace(fv,"%26").replace(yv,"`").replace(_c,"{").replace(wc,"}").replace(bc,"^")}function Sv(e){return Ka(e).replace(mv,"%3D")}function Cv(e){return kr(e).replace(gc,"%23").replace(pv,"%3F")}function $v(e){return Cv(e).replace(vv,"%2F")}function Jn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const kv=/\/$/,Av=e=>e.replace(kv,"");function wa(e,t,s="/"){let n,o={},a="",i="";const l=t.indexOf("#");let c=t.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(n=t.slice(0,c),a=t.slice(c,l>0?l:t.length),o=e(a.slice(1))),l>=0&&(n=n||t.slice(0,l),i=t.slice(l,t.length)),n=Ov(n??t,s),{fullPath:n+a+i,path:n,query:o,hash:Jn(i)}}function xv(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Tl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Nv(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&nn(t.matched[n],s.matched[o])&&Sc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function nn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Sc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Tv(e[s],t[s]))return!1;return!0}function Tv(e,t){return Rt(e)?Ol(e,t):Rt(t)?Ol(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Ol(e,t){return Rt(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Ov(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,i,l;for(i=0;i<n.length;i++)if(l=n[i],l!==".")if(l==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(i).join("/")}const os={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Va=function(e){return e.pop="pop",e.push="push",e}({}),Sa=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Iv(e){if(!e)if(Hs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Av(e)}const Ev=/^[^#]+#/;function Dv(e,t){return e.replace(Ev,"#")+t}function Rv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const ea=()=>({left:window.scrollX,top:window.scrollY});function Pv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Rv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Il(e,t){return(history.state?history.state.position-t:-1)+e}const Wa=new Map;function Lv(e,t){Wa.set(e,t)}function Bv(e){const t=Wa.get(e);return Wa.delete(e),t}function Uv(e){return typeof e=="string"||e&&typeof e=="object"}function Cc(e){return typeof e=="string"||typeof e=="symbol"}let De=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const $c=Symbol("");De.MATCHER_NOT_FOUND+"",De.NAVIGATION_GUARD_REDIRECT+"",De.NAVIGATION_ABORTED+"",De.NAVIGATION_CANCELLED+"",De.NAVIGATION_DUPLICATED+"";function on(e,t){return ye(new Error,{type:e,[$c]:!0},t)}function Gt(e,t){return e instanceof Error&&$c in e&&(t==null||!!(e.type&t))}const Mv=["params","query","hash"];function Fv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of Mv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function jv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(yc," "),a=o.indexOf("="),i=Jn(a<0?o:o.slice(0,a)),l=a<0?null:Jn(o.slice(a+1));if(i in t){let c=t[i];Rt(c)||(c=t[i]=[c]),c.push(l)}else t[i]=l}return t}function El(e){let t="";for(let s in e){const n=e[s];if(s=Sv(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Rt(n)?n.map(o=>o&&Ka(o)):[n&&Ka(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Hv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Rt(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const Kv=Symbol(""),Dl=Symbol(""),ta=Symbol(""),Ar=Symbol(""),Ga=Symbol("");function _n(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function is(e,t,s,n,o,a=i=>i()){const i=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const u=h=>{h===!1?c(on(De.NAVIGATION_ABORTED,{from:s,to:t})):h instanceof Error?c(h):Uv(h)?c(on(De.NAVIGATION_GUARD_REDIRECT,{from:t,to:h})):(i&&n.enterCallbacks[o]===i&&typeof h=="function"&&i.push(h),l())},d=a(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(h=>c(h))})}function Ca(e,t,s,n,o=a=>a()){const a=[];for(const i of e)for(const l in i.components){let c=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(hc(c)){const u=(c.__vccOpts||c)[t];u&&a.push(is(u,s,n,i,l,o))}else{let u=c();a.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${i.path}"`);const f=dv(d)?d.default:d;i.mods[l]=d,i.components[l]=f;const h=(f.__vccOpts||f)[t];return h&&is(h,s,n,i,l,o)()}))}}return a}function Vv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let i=0;i<a;i++){const l=t.matched[i];l&&(e.matched.find(u=>nn(u,l))?n.push(l):s.push(l));const c=e.matched[i];c&&(t.matched.find(u=>nn(u,c))||o.push(c))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Wv=()=>location.protocol+"//"+location.host;function kc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let i=o.includes(e.slice(a))?e.slice(a).length:1,l=o.slice(i);return l[0]!=="/"&&(l="/"+l),Tl(l,"")}return Tl(s,e)+n+o}function Gv(e,t,s,n){let o=[],a=[],i=null;const l=({state:h})=>{const v=kc(e,location),m=s.value,y=t.value;let O=0;if(h){if(s.value=v,t.value=h,i&&i===m){i=null;return}O=y?h.position-y.position:0}else n(v);o.forEach(k=>{k(s.value,m,{delta:O,type:Va.pop,direction:O?O>0?Sa.forward:Sa.back:Sa.unknown})})};function c(){i=s.value}function u(h){o.push(h);const v=()=>{const m=o.indexOf(h);m>-1&&o.splice(m,1)};return a.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(ye({},h.state,{scroll:ea()}),"")}}function f(){for(const h of a)h();a=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:u,destroy:f}}function Rl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?ea():null}}function zv(e){const{history:t,location:s}=window,n={value:kc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(c,u,d){const f=e.indexOf("#"),h=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+c:Wv()+e+c;try{t[d?"replaceState":"pushState"](u,"",h),o.value=u}catch(v){console.error(v),s[d?"replace":"assign"](h)}}function i(c,u){a(c,ye({},t.state,Rl(o.value.back,c,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=c}function l(c,u){const d=ye({},o.value,t.state,{forward:c,scroll:ea()});a(d.current,d,!0),a(c,ye({},Rl(n.value,c,null),{position:d.position+1},u),!1),n.value=c}return{location:n,state:o,push:l,replace:i}}function Jv(e){e=Iv(e);const t=zv(e),s=Gv(e,t.state,t.location,t.replace);function n(a,i=!0){i||s.pauseListeners(),history.go(a)}const o=ye({location:"",base:e,go:n,createHref:Dv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function qv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Jv(e)}let ks=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var je=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(je||{});const Yv={type:ks.Static,value:""},Xv=/[a-zA-Z0-9_]/;function Qv(e){if(!e)return[[]];if(e==="/")return[[Yv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=je.Static,n=s;const o=[];let a;function i(){a&&o.push(a),a=[]}let l=0,c,u="",d="";function f(){u&&(s===je.Static?a.push({type:ks.Static,value:u}):s===je.Param||s===je.ParamRegExp||s===je.ParamRegExpEnd?(a.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:ks.Param,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==je.ParamRegExp){n=s,s=je.EscapeNext;continue}switch(s){case je.Static:c==="/"?(u&&f(),i()):c===":"?(f(),s=je.Param):h();break;case je.EscapeNext:h(),s=n;break;case je.Param:c==="("?s=je.ParamRegExp:Xv.test(c)?h():(f(),s=je.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case je.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:s=je.ParamRegExpEnd:d+=c;break;case je.ParamRegExpEnd:f(),s=je.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return s===je.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),i(),o}const Pl="[^/]+?",Zv={sensitive:!1,strict:!1,start:!0,end:!0};var rt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(rt||{});const em=/[.+*?^${}()[\]/\\]/g;function tm(e,t){const s=ye({},Zv,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const d=u.length?[]:[rt.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const h=u[f];let v=rt.Segment+(s.sensitive?rt.BonusCaseSensitive:0);if(h.type===ks.Static)f||(o+="/"),o+=h.value.replace(em,"\\$&"),v+=rt.Static;else if(h.type===ks.Param){const{value:m,repeatable:y,optional:O,regexp:k}=h;a.push({name:m,repeatable:y,optional:O});const b=k||Pl;if(b!==Pl){v+=rt.BonusCustomRegExp;try{`${b}`}catch(R){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+R.message)}}let C=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(C=O&&u.length<2?`(?:/${C})`:"/"+C),O&&(C+="?"),o+=C,v+=rt.Dynamic,O&&(v+=rt.BonusOptional),y&&(v+=rt.BonusRepeatable),b===".*"&&(v+=rt.BonusWildcard)}d.push(v)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=rt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const i=new RegExp(o,s.sensitive?"":"i");function l(u){const d=u.match(i),f={};if(!d)return null;for(let h=1;h<d.length;h++){const v=d[h]||"",m=a[h-1];f[m.name]=v&&m.repeatable?v.split("/"):v}return f}function c(u){let d="",f=!1;for(const h of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of h)if(v.type===ks.Static)d+=v.value;else if(v.type===ks.Param){const{value:m,repeatable:y,optional:O}=v,k=m in u?u[m]:"";if(Rt(k)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=Rt(k)?k.join("/"):k;if(!b)if(O)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);d+=b}}return d||"/"}return{re:i,score:n,keys:a,parse:l,stringify:c}}function sm(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===rt.Static+rt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===rt.Static+rt.Segment?1:-1:0}function Ac(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=sm(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(Ll(n))return 1;if(Ll(o))return-1}return o.length-n.length}function Ll(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const nm={strict:!1,end:!0,sensitive:!1};function om(e,t,s){const n=tm(Qv(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function am(e,t){const s=[],n=new Map;t=Nl(nm,t);function o(f){return n.get(f)}function a(f,h,v){const m=!v,y=Ul(f);y.aliasOf=v&&v.record;const O=Nl(t,f),k=[y];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const V of R)k.push(Ul(ye({},y,{components:v?v.record.components:y.components,path:V,aliasOf:v?v.record:y})))}let b,C;for(const R of k){const{path:V}=R;if(h&&V[0]!=="/"){const ee=h.record.path,K=ee[ee.length-1]==="/"?"":"/";R.path=h.record.path+(V&&K+V)}if(b=om(R,h,O),v?v.alias.push(b):(C=C||b,C!==b&&C.alias.push(b),m&&f.name&&!Ml(b)&&i(f.name)),xc(b)&&c(b),y.children){const ee=y.children;for(let K=0;K<ee.length;K++)a(ee[K],b,v&&v.children[K])}v=v||b}return C?()=>{i(C)}:Un}function i(f){if(Cc(f)){const h=n.get(f);h&&(n.delete(f),s.splice(s.indexOf(h),1),h.children.forEach(i),h.alias.forEach(i))}else{const h=s.indexOf(f);h>-1&&(s.splice(h,1),f.record.name&&n.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function l(){return s}function c(f){const h=im(f,s);s.splice(h,0,f),f.record.name&&!Ml(f)&&n.set(f.record.name,f)}function u(f,h){let v,m={},y,O;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw on(De.MATCHER_NOT_FOUND,{location:f});O=v.record.name,m=ye(Bl(h.params,v.keys.filter(C=>!C.optional).concat(v.parent?v.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),f.params&&Bl(f.params,v.keys.map(C=>C.name))),y=v.stringify(m)}else if(f.path!=null)y=f.path,v=s.find(C=>C.re.test(y)),v&&(m=v.parse(y),O=v.record.name);else{if(v=h.name?n.get(h.name):s.find(C=>C.re.test(h.path)),!v)throw on(De.MATCHER_NOT_FOUND,{location:f,currentLocation:h});O=v.record.name,m=ye({},h.params,f.params),y=v.stringify(m)}const k=[];let b=v;for(;b;)k.unshift(b.record),b=b.parent;return{name:O,path:y,params:m,matched:k,meta:lm(k)}}e.forEach(f=>a(f));function d(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:i,clearRoutes:d,getRoutes:l,getRecordMatcher:o}}function Bl(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Ul(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:rm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function rm(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Ml(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function lm(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function im(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Ac(e,t[a])<0?n=a:s=a+1}const o=cm(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function cm(e){let t=e;for(;t=t.parent;)if(xc(t)&&Ac(e,t)===0)return t}function xc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Fl(e){const t=Ot(ta),s=Ot(Ar),n=T(()=>{const c=D(e.to);return t.resolve(c)}),o=T(()=>{const{matched:c}=n.value,{length:u}=c,d=c[u-1],f=s.matched;if(!d||!f.length)return-1;const h=f.findIndex(nn.bind(null,d));if(h>-1)return h;const v=jl(c[u-2]);return u>1&&jl(d)===v&&f[f.length-1].path!==v?f.findIndex(nn.bind(null,c[u-2])):h}),a=T(()=>o.value>-1&&mm(s.params,n.value.params)),i=T(()=>o.value>-1&&o.value===s.matched.length-1&&Sc(s.params,n.value.params));function l(c={}){if(vm(c)){const u=t[D(e.replace)?"replace":"push"](D(e.to)).catch(Un);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:T(()=>n.value.href),isActive:a,isExactActive:i,navigate:l}}function um(e){return e.length===1?e[0]:e}const dm=Mi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Fl,setup(e,{slots:t}){const s=jt(Fl(e)),{options:n}=Ot(ta),o=T(()=>({[Hl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Hl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&um(t.default(s));return e.custom?a:fc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),fm=dm;function vm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function mm(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Rt(o)||o.length!==n.length||n.some((a,i)=>a.valueOf()!==o[i].valueOf()))return!1}return!0}function jl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Hl=(e,t,s)=>e??t??s,pm=Mi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Ot(Ga),o=T(()=>e.route||n.value),a=Ot(Dl,0),i=T(()=>{let u=D(a);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),l=T(()=>o.value.matched[i.value]);bo(Dl,T(()=>i.value+1)),bo(Kv,l),bo(Ga,o);const c=N();return it(()=>[c.value,l.value,e.name],([u,d,f],[h,v,m])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===h&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!nn(d,v)||!h)&&(d.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=l.value,h=f&&f.components[d];if(!h)return Kl(s.default,{Component:h,route:u});const v=f.props[d],m=v?v===!0?u.params:typeof v=="function"?v(u):v:null,O=fc(h,ye({},m,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return Kl(s.default,{Component:O,route:u})||O}}});function Kl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const hm=pm;function gm(e){const t=am(e.routes,e),s=e.parseQuery||jv,n=e.stringifyQuery||El,o=e.history,a=_n(),i=_n(),l=_n(),c=dd(os);let u=os;Hs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=_a.bind(null,M=>""+M),f=_a.bind(null,$v),h=_a.bind(null,Jn);function v(M,Q){let z,te;return Cc(M)?(z=t.getRecordMatcher(M),te=Q):te=M,t.addRoute(te,z)}function m(M){const Q=t.getRecordMatcher(M);Q&&t.removeRoute(Q)}function y(){return t.getRoutes().map(M=>M.record)}function O(M){return!!t.getRecordMatcher(M)}function k(M,Q){if(Q=ye({},Q||c.value),typeof M=="string"){const E=wa(s,M,Q.path),B=t.resolve({path:E.path},Q),F=o.createHref(E.fullPath);return ye(E,B,{params:h(B.params),hash:Jn(E.hash),redirectedFrom:void 0,href:F})}let z;if(M.path!=null)z=ye({},M,{path:wa(s,M.path,Q.path).path});else{const E=ye({},M.params);for(const B in E)E[B]==null&&delete E[B];z=ye({},M,{params:f(E)}),Q.params=f(Q.params)}const te=t.resolve(z,Q),pe=M.hash||"";te.params=d(h(te.params));const S=xv(n,ye({},M,{hash:wv(pe),path:te.path})),$=o.createHref(S);return ye({fullPath:S,hash:pe,query:n===El?Hv(M.query):M.query||{}},te,{redirectedFrom:void 0,href:$})}function b(M){return typeof M=="string"?wa(s,M,c.value.path):ye({},M)}function C(M,Q){if(u!==M)return on(De.NAVIGATION_CANCELLED,{from:Q,to:M})}function R(M){return K(M)}function V(M){return R(ye(b(M),{replace:!0}))}function ee(M,Q){const z=M.matched[M.matched.length-1];if(z&&z.redirect){const{redirect:te}=z;let pe=typeof te=="function"?te(M,Q):te;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=b(pe):{path:pe},pe.params={}),ye({query:M.query,hash:M.hash,params:pe.path!=null?{}:M.params},pe)}}function K(M,Q){const z=u=k(M),te=c.value,pe=M.state,S=M.force,$=M.replace===!0,E=ee(z,te);if(E)return K(ye(b(E),{state:typeof E=="object"?ye({},pe,E.state):pe,force:S,replace:$}),Q||z);const B=z;B.redirectedFrom=Q;let F;return!S&&Nv(n,te,z)&&(F=on(De.NAVIGATION_DUPLICATED,{to:B,from:te}),j(te,te,!0,!1)),(F?Promise.resolve(F):ve(B,te)).catch(U=>Gt(U)?Gt(U,De.NAVIGATION_GUARD_REDIRECT)?U:oe(U):me(U,B,te)).then(U=>{if(U){if(Gt(U,De.NAVIGATION_GUARD_REDIRECT))return K(ye({replace:$},b(U.to),{state:typeof U.to=="object"?ye({},pe,U.to.state):pe,force:S}),Q||B)}else U=we(B,te,!0,$,pe);return fe(B,te,U),U})}function X(M,Q){const z=C(M,Q);return z?Promise.reject(z):Promise.resolve()}function Y(M){const Q=ut.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(M):M()}function ve(M,Q){let z;const[te,pe,S]=Vv(M,Q);z=Ca(te.reverse(),"beforeRouteLeave",M,Q);for(const E of te)E.leaveGuards.forEach(B=>{z.push(is(B,M,Q))});const $=X.bind(null,M,Q);return z.push($),Ze(z).then(()=>{z=[];for(const E of a.list())z.push(is(E,M,Q));return z.push($),Ze(z)}).then(()=>{z=Ca(pe,"beforeRouteUpdate",M,Q);for(const E of pe)E.updateGuards.forEach(B=>{z.push(is(B,M,Q))});return z.push($),Ze(z)}).then(()=>{z=[];for(const E of S)if(E.beforeEnter)if(Rt(E.beforeEnter))for(const B of E.beforeEnter)z.push(is(B,M,Q));else z.push(is(E.beforeEnter,M,Q));return z.push($),Ze(z)}).then(()=>(M.matched.forEach(E=>E.enterCallbacks={}),z=Ca(S,"beforeRouteEnter",M,Q,Y),z.push($),Ze(z))).then(()=>{z=[];for(const E of i.list())z.push(is(E,M,Q));return z.push($),Ze(z)}).catch(E=>Gt(E,De.NAVIGATION_CANCELLED)?E:Promise.reject(E))}function fe(M,Q,z){l.list().forEach(te=>Y(()=>te(M,Q,z)))}function we(M,Q,z,te,pe){const S=C(M,Q);if(S)return S;const $=Q===os,E=Hs?history.state:{};z&&(te||$?o.replace(M.fullPath,ye({scroll:$&&E&&E.scroll},pe)):o.push(M.fullPath,pe)),c.value=M,j(M,Q,z,$),oe()}let Le;function He(){Le||(Le=o.listen((M,Q,z)=>{if(!vt.listening)return;const te=k(M),pe=ee(te,vt.currentRoute.value);if(pe){K(ye(pe,{replace:!0,force:!0}),te).catch(Un);return}u=te;const S=c.value;Hs&&Lv(Il(S.fullPath,z.delta),ea()),ve(te,S).catch($=>Gt($,De.NAVIGATION_ABORTED|De.NAVIGATION_CANCELLED)?$:Gt($,De.NAVIGATION_GUARD_REDIRECT)?(K(ye(b($.to),{force:!0}),te).then(E=>{Gt(E,De.NAVIGATION_ABORTED|De.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===Va.pop&&o.go(-1,!1)}).catch(Un),Promise.reject()):(z.delta&&o.go(-z.delta,!1),me($,te,S))).then($=>{$=$||we(te,S,!1),$&&(z.delta&&!Gt($,De.NAVIGATION_CANCELLED)?o.go(-z.delta,!1):z.type===Va.pop&&Gt($,De.NAVIGATION_ABORTED|De.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),fe(te,S,$)}).catch(Un)}))}let Ge=_n(),ge=_n(),Z;function me(M,Q,z){oe(M);const te=ge.list();return te.length?te.forEach(pe=>pe(M,Q,z)):console.error(M),Promise.reject(M)}function he(){return Z&&c.value!==os?Promise.resolve():new Promise((M,Q)=>{Ge.add([M,Q])})}function oe(M){return Z||(Z=!M,He(),Ge.list().forEach(([Q,z])=>M?z(M):Q()),Ge.reset()),M}function j(M,Q,z,te){const{scrollBehavior:pe}=e;if(!Hs||!pe)return Promise.resolve();const S=!z&&Bv(Il(M.fullPath,0))||(te||!z)&&history.state&&history.state.scroll||null;return Kn().then(()=>pe(M,Q,S)).then($=>$&&Pv($)).catch($=>me($,M,Q))}const se=M=>o.go(M);let ze;const ut=new Set,vt={currentRoute:c,listening:!0,addRoute:v,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:O,getRoutes:y,resolve:k,options:e,push:R,replace:V,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:a.add,beforeResolve:i.add,afterEach:l.add,onError:ge.add,isReady:he,install(M){M.component("RouterLink",fm),M.component("RouterView",hm),M.config.globalProperties.$router=vt,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>D(c)}),Hs&&!ze&&c.value===os&&(ze=!0,R(o.location).catch(te=>{}));const Q={};for(const te in os)Object.defineProperty(Q,te,{get:()=>c.value[te],enumerable:!0});M.provide(ta,vt),M.provide(Ar,Ti(Q)),M.provide(Ga,c);const z=M.unmount;ut.add(M),M.unmount=function(){ut.delete(M),ut.size<1&&(u=os,Le&&Le(),Le=null,c.value=os,ze=!1,Z=!1),z()}}};function Ze(M){return M.reduce((Q,z)=>Q.then(()=>Y(z)),Promise.resolve())}return vt}function ym(){return Ot(ta)}function K2(e){return Ot(Ar)}function Vl(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,i="";for(let l=0;l<s.length;l++){const c=s[l];if(c.startsWith("%"))continue;if(a){c.includes("}")?(i+=c.substring(0,c.indexOf("}")),o.push(i.trim()),i="",a=!1):i+=c+`
`;continue}if(c.includes("{")){const f=c.indexOf("{");if(c.includes("}")){const h=c.indexOf("}");o.push(c.substring(f+1,h).trim())}else i=c.substring(f+1)+`
`,a=!0;continue}const u=c.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=c.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,h]=d;if(f==="Board")n&&(n.commentary=zl(o),n.steps=Wl(o),n.auction=Gl(n.auction),t.push(n)),n=bm(),n.boardNumber=parseInt(h,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=h;break;case"Vulnerable":n.vulnerable=h;break;case"Contract":n.contract=h;break;case"Declarer":n.declarer=h;break;case"Student":n.studentSeat=h;break;case"Deal":n.hands=_m(h);break;case"Auction":n.auctionDealer=h;break;case"Result":n.result=h;break;case"Event":n.event=h;break;case"SkillPath":n.skillPath=h;break;case"Category":n.category=h;break;case"Difficulty":n.difficulty=h;break}continue}if(n&&n.auctionDealer){const f=c.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const h=Sm(f);n.auction.push(...h)}}}return n&&(n.commentary=zl(o),n.steps=Wl(o),n.auction=Gl(n.auction),t.push(n)),t}function Wl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let i=0;i<n.length;i++){const l=n[i],c=l.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(l),d=/^\[ROTATE\]$/i.test(l),f=l.match(/^\[choose-card\s+([^\]]+)\]$/i);if(c){const h=xr(c[1]).replace(/!/g,"").trim(),v=a.trim();a="";let m="";if(i+1<n.length){const k=n[i+1];k.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(m=k.trim(),i++)}const y=wn(v,"bid"),O=wn(m,"bid");o.push({...y,type:"bid",bid:h,explanationText:O.text,showSeatsAfter:O.showSeats})}else if(u||d){const h=u?"next":"rotate";a.trim()&&o.push(wn(a.trim(),h)),a=""}else if(f){const h=f[1].trim();let v;if(h.toLowerCase().startsWith("any:")?v={cards:h.substring(4).split(",").map(y=>Eo(y.trim())),anyOf:!0}:v={card:Eo(h)},a.trim()){const m=wn(a.trim(),"choose-card");m.chooseCard=v,o.push(m)}a=""}else a+=l}if(a.trim()){const i=wn(a.trim(),"end");o.push(i)}return o}function wn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const b=n[1].toUpperCase().trim();if(b==="ALL")s=["N","E","S","W"];else{const C=[];b.includes("N")&&C.push("N"),b.includes("E")&&C.push("E"),b.includes("S")&&C.push("S"),b.includes("W")&&C.push("W"),C.length>0&&(s=C)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let i;for(;(i=a.exec(e))!==null;)o.push(i[1]);const l=/\[RESET\]/i.test(e);let c=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const b=u[1].trim();b.toLowerCase().startsWith("any:")?c={cards:b.substring(4).split(",").map(R=>Eo(R.trim())),anyOf:!0}:c={card:Eo(b)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),h=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),h&&(d=!0);const v=/\[SHOW_LEAD\]/i.test(e),m=/\[clear-commentary\]/i.test(e);let y=null;const O=e.match(/\[showcards\s+([^\]]+)\]/i);if(O){const b=O[1].trim();y={};const C=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let R;for(;(R=C.exec(b))!==null;){const V=R[1].toUpperCase(),ee=R[2].split(",").map(K=>K.trim().toUpperCase());y[V]=ee}Object.keys(y).length===0&&(y=null)}let k=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:xr(k),type:t,showSeats:s,plays:o,reset:l,showAuction:d,showLead:v,clearCommentary:m,showcards:y,chooseCard:c}}function bm(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Eo(e){return e.toUpperCase().replace("10","T")}function _m(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],i=a.indexOf(":");if(i!==-1){const l=a.charAt(0).toUpperCase();o=n.indexOf(l),s[0]=a.substring(i+1)}for(let l=0;l<4;l++){const c=(o+l)%4,u=n[c];t[u]=wm(s[l])}return t}function wm(e){const t=e.split(".");return t.length!==4?null:{spades:mo(t[0]),hearts:mo(t[1]),diamonds:mo(t[2]),clubs:mo(t[3])}}function mo(e){return e?e.split(""):[]}function Gl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Sm(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>Cm(t))}function Cm(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function zl(e){return e.length?xr(e.join(`

`)):""}function xr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function $m(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function po(e,t){return $m(t)[e%4]}const Nr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},Jl={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Nc=["spades","hearts","diamonds","clubs"];function $a(e){return e==="T"?"10":e}function Tr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Nr[o],i=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${i}">${a}</span>`}}return{text:e,html:e}}function km(e){return(Jl[e.toLowerCase()]||Jl[e])==="red"?"suit-red":"suit-black"}function Am(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function za(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function xm(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Nc)for(const o of e[n]||[])s+=t[o]||0;return s}function Nm(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Nr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Sn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Tm(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ks(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Om({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:a,studentBid:i,correct:l,attemptNumber:c,timeTakenMs:u,skillPath:d,assignment:f=null}){var y,O,k,b,C,R,V,ee,K,X,Y;const h=((y=s.steps)==null?void 0:y.filter(ve=>ve.type==="bid").length)||1,v=s.studentSeat||"S",m=((O=s.hands)==null?void 0:O[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:((k=s.hands)==null?void 0:k.N)||((b=s.hands)==null?void 0:b.north)||"",east:((C=s.hands)==null?void 0:C.E)||((R=s.hands)==null?void 0:R.east)||"",south:((V=s.hands)==null?void 0:V.S)||((ee=s.hands)==null?void 0:ee.south)||"",west:((K=s.hands)==null?void 0:K.W)||((X=s.hands)==null?void 0:X.west)||""},full_auction:((Y=s.auction)==null?void 0:Y.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:h,auction_so_far:[...o],expected_bid:a,student_hand:m},result:{student_bid:i,correct:l,attempt_number:c,time_taken_ms:u},skill_path:d,assignment:f}}function Tc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Im(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function Em(){return crypto.randomUUID()}function Dm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function sa(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function Rm(e){const[t]=e.split("/");return t||"uncategorized"}function Pm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Oc={name:"AES-GCM",length:256},Or={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function Lm(){const e=await crypto.subtle.generateKey(Oc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Is(t)}async function Ic(e){const t=Es(e);return crypto.subtle.importKey("raw",t,Oc,!0,["encrypt","decrypt"])}async function Ir(e,t){const s=await Ic(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:Is(i),iv:Is(n)}}async function Er(e,t,s){const n=await Ic(s),o=Es(e),a=Es(t),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),l=new TextDecoder;return JSON.parse(l.decode(i))}async function Bm(e){const t=Es(e);return crypto.subtle.importKey("spki",t,Or,!0,["encrypt"])}async function Ec(e){const t=Es(e);return crypto.subtle.importKey("pkcs8",t,Or,!0,["decrypt"])}async function Um(){const e=await crypto.subtle.generateKey(Or,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Is(t),privateKey:Is(s)}}async function Dc(e,t){const s=await Bm(t),n=Es(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Is(o)}async function Mm(e,t){const s=await Ec(t),n=Es(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Is(o)}function Fm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function jm(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function Hm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Ir(t,e);return(await Er(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Is(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Es(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Ja="bridgePractice",xe=N({}),Be=N(null),vs=N(null),qn=N(!1),na=N(!1);function Rc(){try{const e=localStorage.getItem(Ja);if(e){const t=JSON.parse(e);xe.value=t.users||{},Be.value=t.currentUserId||null,vs.value=t.adminViewerId||null}qn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),qn.value=!0}}function $t(){try{const e=localStorage.getItem(Ja),t=e?JSON.parse(e):{};t.users=xe.value,t.currentUserId=Be.value,vs.value&&(t.adminViewerId=vs.value),localStorage.setItem(Ja,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function Km({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const i=crypto.randomUUID(),l=new Date().toISOString(),c=await Lm();let u=null;if(a)try{const f=await fetch(`${a}/keys/admin`);if(f.ok){const h=await f.json();vs.value=h.viewer_id,u={grantee_id:h.viewer_id,encrypted_payload:await Dc(c,h.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:i,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:c,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:l,updatedAt:l};return xe.value[i]=d,Be.value=i,$t(),na.value=!0,d}function Vm(e,t){if(!xe.value[e])return console.error("User not found:",e),null;const s=xe.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),$t(),s}function Wm(e){if(!xe.value[e])return!1;if(delete xe.value[e],Be.value===e){const t=Object.keys(xe.value);Be.value=t.length>0?t[0]:null}return $t(),!0}function Gm(e){return xe.value[e]?(Be.value=e,$t(),!0):(console.error("User not found:",e),!1)}function zm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(xe.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Jm(e){const t=e.trim().toLowerCase();for(const s of Object.values(xe.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function qm(e){return xe.value[e]||null}function Ym(){xe.value={},Be.value=null,vs.value=null,na.value=!1,$t(),qn.value=!1}function Xm(){qn.value||Rc()}async function Qm(e){const t=jm(e);if(!t.valid)return{success:!1,error:t.error};if(!await Hm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=xe.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Be.value=e.user_id,$t(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",i=o.slice(1).join(" ")||"User",l={id:e.user_id,firstName:a,lastName:i,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[l.id]=l,Be.value=l.id,$t(),{success:!0,user:l}}function Zm(){const e=xe.value[Be.value];return!e||!e.secretKey?null:Fm(e)}function ep(){na.value=!1}function tp(){return vs.value}function sp(e){vs.value=e,$t()}async function np(e){const t=xe.value[Be.value];return!t||!t.secretKey?null:Dc(t.secretKey,e)}async function op(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function ap(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[a.id]=a,Be.value=a.id,$t(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function rp(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[a.id]=a,Be.value=a.id,$t(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function lp(){if(!Be.value)return;const e=xe.value[Be.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();o.success&&o.user&&o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,$t())}catch{}}function Me(){const e=T(()=>Be.value&&xe.value[Be.value]||null),t=T(()=>Object.values(xe.value)),s=T(()=>Object.keys(xe.value).length>0),n=T(()=>Object.keys(xe.value).length),o=T(()=>Be.value!==null&&!!xe.value[Be.value]);return{users:xe,currentUserId:Be,adminViewerId:vs,initialized:qn,showKeyBackupModal:na,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Xm,loadFromStorage:Rc,saveToStorage:$t,createUser:Km,updateUser:Vm,deleteUser:Wm,switchUser:Gm,findUserByName:zm,findUserByEmail:Jm,getUser:qm,clearUsers:Ym,restoreFromBackup:Qm,getKeyBackup:Zm,dismissKeyBackupModal:ep,getAdminViewerId:tp,setAdminViewerId:sp,createGrantForViewer:np,requestRecovery:op,claimRecovery:ap,claimRecoveryByCode:rp,syncRole:lp}}const qa="bridgePractice",Qe=N({}),Pe=N(null),kt=N(!1),an=N(!1);function Pc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const i=s.split(",").map(c=>c.trim()).filter(Boolean),l=a?a.split(",")[0].trim():null;return{name:t,lessons:i,dueDate:n||null,teacherName:o||null,classroom:l}}function Lc(){try{const e=localStorage.getItem(qa);if(e){const t=JSON.parse(e);Qe.value=t.assignments||{},Pe.value=t.currentAssignmentId||null,Pe.value&&Qe.value[Pe.value]&&(kt.value=!0)}an.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),an.value=!0}}function Ds(){try{const e=localStorage.getItem(qa),t=e?JSON.parse(e):{};t.assignments=Qe.value,t.currentAssignmentId=Pe.value,localStorage.setItem(qa,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function Bc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(Qe.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const d of n)u.add(d);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Pe.value=a.id,kt.value=!0,Ds(),a}const i=crypto.randomUUID(),l=new Date().toISOString(),c={id:i,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:l,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:l,updatedAt:l};return Qe.value[i]=c,Pe.value=i,kt.value=!0,Ds(),c}function ip(){if(an.value)return;Lc();const e=Pc();e&&Bc(e),an.value=!0}function cp(e){if(!kt.value||!Pe.value)return!1;const t=Qe.value[Pe.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function up(e){if(!Pe.value)return;const t=Qe.value[Pe.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Ds())}function dp(e){if(!Pe.value||!kt.value)return!1;const t=Qe.value[Pe.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Ds(),!0}function fp(){if(!kt.value||!Pe.value)return null;const e=Qe.value[Pe.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function vp(){kt.value=!1}function mp(){Pe.value&&Qe.value[Pe.value]&&(kt.value=!0)}function pp(e){return Qe.value[e]||null}function hp(){return Object.values(Qe.value)}function gp(e){return Qe.value[e]?(delete Qe.value[e],Pe.value===e&&(Pe.value=null,kt.value=!1),Ds(),!0):!1}function yp(){Qe.value={},Pe.value=null,kt.value=!1,an.value=!1,Ds()}function oa(){const e=T(()=>Pe.value&&Qe.value[Pe.value]||null),t=T(()=>kt.value&&e.value!==null),s=T(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=T(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Qe,currentAssignmentId:Pe,inAssignmentMode:kt,initialized:an,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:ip,loadFromStorage:Lc,saveToStorage:Ds,createAssignment:Bc,isLessonInAssignment:cp,setTotalDeals:up,recordDealCompletion:dp,getAssignmentTag:fp,exitAssignmentMode:vp,returnToAssignmentMode:mp,getAssignment:pp,getAllAssignments:hp,deleteAssignment:gp,clearAssignments:yp,parseAssignmentFromUrl:Pc}}const Ya="bridgePractice",Ye=N([]),rn=N(null),ln=N(!1),Ns=N({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function Uc(){try{const e=localStorage.getItem(Ya);if(e){const t=JSON.parse(e);Ye.value=t.pendingObservations||[]}ln.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),ln.value=!0}}function Ps(){try{const e=localStorage.getItem(Ya),t=e?JSON.parse(e):{};t.pendingObservations=Ye.value,localStorage.setItem(Ya,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function Mc(){ln.value||Uc(),rn.value||Fc()}function Fc(){rn.value=Em(),Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function bp({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:i,timeTakenMs:l}){var y,O;const c=Me(),u=oa();ln.value||Mc();const d=c.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const k=e.subfolder||e.category||"Unknown";f=Dm(k)}const h=u.getAssignmentTag(),v=Om({userId:d.id,sessionId:rn.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:a,attemptNumber:i,timeTakenMs:l,skillPath:f,assignment:h}),m=Im(v);if(!m.valid)return console.error("Invalid observation:",m.errors),{success:!1,error:m.errors.join(", ")};if(Ns.value.totalObservations++,a?Ns.value.correctCount++:Ns.value.wrongCount++,d.dataConsent&&d.secretKey){const k=await _p(v,d);k.success||(console.warn("Failed to encrypt observation, storing unencrypted:",k.error),ql(v,((y=d.classrooms)==null?void 0:y[0])||null))}else ql(v,((O=d.classrooms)==null?void 0:O[0])||null);return{success:!0,observation:v}}async function _p(e,t){var s;try{const{encrypted_data:n,iv:o}=await Ir(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,i=Tc(e,a);return Ye.value.push({encrypted_data:n,iv:o,metadata:i,encrypted:!0,queuedAt:new Date().toISOString()}),Ps(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function ql(e,t){const s=Tc(e,t);Ye.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ps()}async function wp(){const t=Me().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Ye.value.length;n++){const o=Ye.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:i}=await Ir(o.observation,t.secretKey);Ye.value[n]={encrypted_data:a,iv:i,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ps(),s}function Sp(){return Ye.value.length}function Cp(){return[...Ye.value]}function $p(e){Ye.value=Ye.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ps()}function kp(){Ye.value=[],Ps()}function Ap(){return{...Ns.value}}function xp(){Ye.value=[],rn.value=null,Ns.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},ln.value=!1,Ps()}function ps(){const e=T(()=>Ye.value.length),t=T(()=>Ye.value.length>0),s=T(()=>Ye.value.some(o=>!o.encrypted)),n=T(()=>rn.value);return{pendingObservations:Ye,sessionId:rn,sessionStats:Ns,initialized:ln,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:Mc,startNewSession:Fc,recordObservation:bp,encryptPendingObservations:wp,getPendingCount:Sp,getPendingObservations:Cp,removeSyncedObservations:$p,clearPendingObservations:kp,getSessionStats:Ap,reset:xp,loadFromStorage:Uc,saveToStorage:Ps}}function Np(){const e=ps(),t=N(null),s=N(0),n=N(!1),o=N(!1),a=jt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),i=jt({answered:{},wrongCard:null,correctCard:null}),l=jt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),c=N({N:[],E:[],S:[],W:[]}),u=N(null),d=N(1),f=T(()=>{var x;return((x=t.value)==null?void 0:x.steps)||[]}),h=T(()=>f.value.length>0),v=T(()=>f.value[s.value]||null),m=T(()=>f.value.some(x=>x.type==="bid")),y=T(()=>{var x;return((x=v.value)==null?void 0:x.type)==="bid"}),O=T(()=>{var x;for(let w=s.value;w>=0;w--)if((x=f.value[w])!=null&&x.clearCommentary)return w;return 0}),k=T(()=>{var x;return((x=t.value)==null?void 0:x.studentSeat)||"S"}),b=T(()=>t.value?po(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),C=T(()=>b.value===k.value),R=T(()=>{var A,I;if(!y.value||!C.value||a.auctionComplete||o.value)return!1;const x=v.value;if(!(x!=null&&x.bid))return!1;const w=(I=(A=t.value)==null?void 0:A.auction)==null?void 0:I[a.currentBidIndex];return w?W(x.bid)===W(w):!1}),V=T(()=>{for(let x=a.displayedBids.length-1;x>=0;x--){const w=a.displayedBids[x];if(w&&w!=="Pass"&&w!=="X"&&w!=="XX")return w}return null}),ee=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;const x=a.displayedBids[a.displayedBids.length-1];if(x==="X"||x==="XX"||!V.value)return!1;let w=-1;for(let H=a.displayedBids.length-1;H>=0;H--){const J=a.displayedBids[H];if(J&&J!=="Pass"&&J!=="X"&&J!=="XX"){w=H;break}}if(w===-1)return!1;const A=po(w,t.value.auctionDealer||t.value.dealer),I=b.value;return(I==="N"||I==="S")&&(A==="E"||A==="W")||(I==="E"||I==="W")&&(A==="N"||A==="S")}),K=T(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let x=a.displayedBids.length-1;x>=0;x--){const w=a.displayedBids[x];if(w!=="Pass"){if(w==="XX")return!1;if(w==="X"){const A=po(x,t.value.auctionDealer||t.value.dealer),I=b.value;return!(I==="N"&&A==="S"||I==="S"&&A==="N"||I==="E"&&A==="W"||I==="W"&&A==="E")}return!1}}return!1}),X=T(()=>{const x=v.value;return x!=null&&x.chooseCard?!i.answered[s.value]:!1}),Y=T(()=>{var x;return((x=v.value)==null?void 0:x.chooseCard)||null}),ve=T(()=>{if(!t.value)return[];const x=["N","E","S","W"];if(!h.value)return[];let w=null;const A=f.value;for(let I=0;I<=s.value&&I<A.length;I++){const L=A[I];L!=null&&L.showSeats&&(w=L.showSeats),L!=null&&L.showSeatsAfter&&(I<s.value||I===s.value&&o.value)&&(w=L.showSeatsAfter)}return w?x.filter(I=>!w.includes(I)):x}),fe=T(()=>{if(!t.value||!h.value)return null;let x={};const w=f.value;for(let A=0;A<=s.value&&A<w.length;A++){const I=w[A];if(I!=null&&I.showcards)for(const[L,H]of Object.entries(I.showcards))x[L]=H;if(I!=null&&I.showSeats)for(const L of I.showSeats)delete x[L];if(I!=null&&I.showSeatsAfter&&(A<s.value||A===s.value&&o.value))for(const L of I.showSeatsAfter)delete x[L]}return Object.keys(x).length>0?x:null}),we=T(()=>{if(!t.value||!h.value)return{};let x={},w=new Set;const A=f.value;for(let L=0;L<=s.value&&L<A.length;L++){const H=A[L];if(H!=null&&H.showcards)for(const[J,re]of Object.entries(H.showcards))x[J]=re;if(H!=null&&H.showSeats)for(const J of H.showSeats)w.add(J)}const I={};for(const[L,H]of Object.entries(x))w.has(L)&&(I[L]=H);return I}),Le=T(()=>{const x=fe.value;return x?Object.keys(x):[]}),He=T(()=>{const x=ve.value,w=Le.value;return w.length?x.filter(A=>!w.includes(A)):x});function Ge(x){const w={spades:[],hearts:[],diamonds:[],clubs:[]},A={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const I of x){const L=I[0].toUpperCase(),H=I.slice(1).toUpperCase(),J=A[L];J&&w[J].push(H)}return w}const ge=T(()=>{var A,I;if(!((A=t.value)!=null&&A.hands))return{};if((I=v.value)!=null&&I.reset)return t.value.hands;const x=fe.value,w={};for(const L of["N","E","S","W"]){if(x&&x[L]){w[L]=Ge(x[L]);continue}const H=t.value.hands[L];if(!H){w[L]=null;continue}w[L]={spades:[...H.spades||[]],hearts:[...H.hearts||[]],diamonds:[...H.diamonds||[]],clubs:[...H.clubs||[]]};for(const J of c.value[L]){const re={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[J.suit];if(re&&w[L][re]){const le=w[L][re].indexOf(J.card);le!==-1&&w[L][re].splice(le,1)}}}return w}),Z=T(()=>!(m.value&&!a.auctionComplete)),me=T(()=>{if(!h.value)return!0;let x=!0;const w=f.value;for(let A=0;A<=s.value&&A<w.length;A++){const I=w[A];(I==null?void 0:I.showAuction)!==null&&(I==null?void 0:I.showAuction)!==void 0&&(x=I.showAuction)}return x}),he=T(()=>{var w;if(!h.value)return!1;const x=f.value;for(let A=0;A<=s.value&&A<x.length;A++)if((w=x[A])!=null&&w.showLead)return!0;return!1}),oe=T(()=>{var x;return(x=t.value)!=null&&x.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),j=T(()=>{if(!h.value||n.value)return!0;const x=v.value;return(x==null?void 0:x.type)==="end"&&!X.value}),se=T(()=>h.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function ze(){var w;c.value={N:[],E:[],S:[],W:[]};const x=f.value;for(let A=0;A<=s.value&&A<x.length;A++){const I=x[A];if((w=I==null?void 0:I.plays)!=null&&w.length)for(const L of I.plays){const H=L.split(/[,\s]+/);for(const J of H){if(!J)continue;const re=J.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(re){const le=re[1].toUpperCase(),Oe=re[2].toUpperCase();let Ne=re[3].toUpperCase();Ne==="10"&&(Ne="T"),c.value[le].push({suit:Oe,card:Ne})}}}}}function ut(){if(!t.value)return;const x=t.value.auction||[],w=vt(s.value);if(w===-1){for(;a.currentBidIndex<x.length;)a.displayedBids.push(x[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const A=f.value[w],I=W(A.bid);for(;a.currentBidIndex<x.length;){const L=po(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),H=W(x[a.currentBidIndex]);if(L===k.value&&H===I){u.value=Date.now(),d.value=1;return}a.displayedBids.push(x[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function vt(x){const w=f.value;for(let A=x;A<w.length;A++)if(w[A].type==="bid")return A;return-1}function Ze(x){if(!t.value||a.auctionComplete||!y.value)return!1;const w=t.value.auction[a.currentBidIndex],A=W(x)===W(w),I=s.value;A?I in l.wrongStepIndices&&(delete l.wrongStepIndices[I],F(!0)):(F(!1),l.wrongStepIndices[I]=!0,l.boardHadWrong=!0);const L=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,d.value=1,A?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=x,a.correctBid=w,a.wrongBidIndex=L);const H=s.value+1,J=f.value[H];return(J==null?void 0:J.type)==="bid"?(s.value=H,o.value=!1,ut()):(o.value=!0,M(),s.value>=f.value.length-1&&S()),A}function M(){var w;if(a.auctionComplete)return;if(vt(s.value+1)===-1){const A=((w=t.value)==null?void 0:w.auction)||[];for(;a.currentBidIndex<A.length;)a.displayedBids.push(A[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function Q(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function z(x,w){if(!t.value||!X.value)return!1;const A=Y.value;if(!A)return!1;const I=(x+w).toUpperCase(),L=s.value;let H=!1,J="";return A.anyOf?(H=A.cards.includes(I),J=A.cards[0]):(H=I===A.card,J=A.card),H?L in l.wrongStepIndices&&(delete l.wrongStepIndices[L],F(!0)):(F(!1),l.wrongStepIndices[L]=!0,l.boardHadWrong=!0),i.answered[L]=!0,H?(i.wrongCard=null,i.correctCard=null):(i.wrongCard=I,i.correctCard=J),pe(),H}function te(){i.wrongCard=null,i.correctCard=null}function pe(){var x;if(R.value||X.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,ze(),((x=f.value[s.value])==null?void 0:x.type)==="bid"&&ut(),s.value>=f.value.length-1){const w=f.value[s.value];(w==null?void 0:w.type)!=="bid"&&(w==null?void 0:w.type)!=="choose-card"&&S()}return!0}return S(),!1}function S(){n.value=!0,$()}function $(){if(f.value.some(w=>w.type==="bid"||w.type==="choose-card"))if(l.boardHadWrong){l.wrongCount++;const w=Object.keys(l.wrongStepIndices).length===0;F(w)}else l.correctCount++,F(!0)}function E(){if(Q(),te(),o.value)return o.value=!1,B(s.value),!0;if(s.value>0){const x=s.value-1,w=f.value[x];return i.answered[x]&&delete i.answered[x],(w==null?void 0:w.type)==="bid"&&B(x),s.value=x,n.value=!1,o.value=!1,ze(),!0}return!1}function B(x){var H;const w=f.value[x];if(!w||w.type!=="bid")return;const A=W(w.bid),I=((H=t.value)==null?void 0:H.auction)||[];let L=0;for(let J=0;J<I.length;J++)if(W(I[J])===A){L=J;break}a.currentBidIndex=L,a.displayedBids=I.slice(0,L),a.auctionComplete=!1,u.value=Date.now(),d.value=1}async function F(x){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:x?"PASS":"FAIL",correct:x,attemptNumber:1,timeTakenMs:0})}catch(w){console.error("Failed to record board observation:",w)}}function U(x){var w,A;t.value=x,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,i.answered={},i.wrongCard=null,i.correctCard=null,l.boardHadWrong=!1,l.wrongStepIndices={},c.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(w=x==null?void 0:x.steps)!=null&&w.length&&(ze(),((A=x.steps[0])==null?void 0:A.type)==="bid"&&ut())}function G(){l.correctCount=0,l.wrongCount=0}function W(x){if(!x)return"";const A=x.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return A==="PASS"||A==="P"?"PASS":A==="X"||A==="DBL"||A==="DOUBLE"?"X":A==="XX"||A==="RDBL"||A==="REDOUBLE"?"XX":A.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:i,boardState:l,steps:f,hasSteps:h,currentStep:v,hasBidSteps:m,isBidStep:y,commentaryStartIndex:O,studentSeat:k,currentTurnSeat:b,isStudentTurn:C,hasBidPrompt:R,lastContractBid:V,canDouble:ee,canRedouble:K,canGoBack:se,hasCardChoice:X,currentChooseCard:Y,hiddenSeats:He,hands:ge,showHcp:Z,showcardsPlayedCards:we,isComplete:j,showAuctionTable:me,showOpeningLead:he,openingLead:oe,advance:pe,makeBid:Ze,clearFeedback:Q,goBack:E,makeCardChoice:z,clearCardFeedback:te,loadDeal:U,resetStats:G,observationStore:e}}const Do="bridgePractice",jc="bridgePracticeUIPrefs",et=N({teacherName:null,availableClassrooms:[],configuredAt:null}),cn=N({showLoadPbnOption:!1}),Ro=N(!1);function Hc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Kc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:Hc(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Tp(){return new URLSearchParams(window.location.search).get("collection")}function Op(){return new URLSearchParams(window.location.search).get("lesson")}function Ip(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Ep(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function Dp(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function Rp(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const Pp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Vc(){try{const e=localStorage.getItem(Do);if(e){const t=JSON.parse(e);t.appConfig&&(et.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function Lp(){try{const e=localStorage.getItem(jc);if(e){const t=JSON.parse(e);cn.value={...cn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function Bp(){try{localStorage.setItem(jc,JSON.stringify(cn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function Up(e,t){cn.value[e]=t,Bp()}function Dr(){try{const e=localStorage.getItem(Do),t=e?JSON.parse(e):{};t.appConfig=et.value,localStorage.setItem(Do,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Wc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function Mp(){if(Ro.value)return;Vc(),Lp();const{teacher:e,classrooms:t}=Kc();(e||t.length>0)&&(e&&!et.value.teacherName&&(et.value.teacherName=e),t.length>0&&(et.value.availableClassrooms=Wc(et.value.availableClassrooms||[],t)),et.value.configuredAt||(et.value.configuredAt=new Date().toISOString()),Dr()),Ro.value=!0}function Fp(){try{const e=localStorage.getItem(Do);return e?JSON.parse(e):null}catch{return null}}function jp(){et.value={teacherName:null,availableClassrooms:[],configuredAt:null},Dr(),Ro.value=!1}function to(){const e=T(()=>et.value.availableClassrooms.length===0),t=T(()=>et.value.availableClassrooms.length>1),s=T(()=>et.value.availableClassrooms.length===1),n=T(()=>s.value?et.value.availableClassrooms[0]:null),o=T(()=>et.value.teacherName),a=T(()=>et.value.availableClassrooms),i=T(()=>cn.value.showLoadPbnOption);return{appConfig:et,initialized:Ro,uiPrefs:cn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:i,initializeFromUrl:Mp,loadFromStorage:Vc,saveToStorage:Dr,clearConfig:jp,getStorageData:Fp,getCollectionFromUrl:Tp,setCollectionInUrl:Ip,getLessonFromUrl:Op,setLessonInUrl:Ep,getDealFromUrl:Dp,setDealInUrl:Rp,setUIPref:Up,COLLECTIONS:Pp,parseUrlParams:Kc,classroomIdToName:Hc,mergeClassrooms:Wc}}const Hp="https://api.bridge-classroom.com/api",Kp="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Rr=N([]),We=N([]),Po=N(!1),Lo=N(null),Mn=N(null),Bo=N(!1),Vp=5*60*1e3;async function Wp(e){const t=await fetch(`${Hp}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":Kp}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function Gp(e,t){try{return{...await Er(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function zp(){return ps().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function Gc(e=!1){const s=Me().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=zp();if(!e&&Mn.value&&Date.now()-new Date(Mn.value).getTime()<Vp&&We.value.length>0)return Jp(n),{success:!0,cached:!0};Po.value=!0,Lo.value=null;let o=[];try{const l=await Wp(s.id);if(Rr.value=l,s.secretKey&&l.length>0){const c=l.map(d=>Gp(d,s.secretKey));o=(await Promise.all(c)).filter(d=>d!==null)}}catch(l){console.error("Failed to fetch from server (will use local data):",l),n.length===0&&(Lo.value=l.message)}const a=new Set(o.map(l=>l.id)),i=n.filter(l=>!a.has(l.id));return We.value=[...o,...i],Mn.value=new Date().toISOString(),Po.value=!1,{success:!0,count:We.value.length}}function Jp(e){const t=new Set(We.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(We.value=[...We.value,...s])}async function qp(){if(Bo.value)return;Me().isAuthenticated.value&&await Gc(),Bo.value=!0}function Yp(){Rr.value=[],We.value=[],Mn.value=null,Bo.value=!1}function zc(){const e={};for(const t of We.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Yl(){const e={};for(const t of We.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Xl(){const e={};for(const t of We.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Ql(e=10){return[...We.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Zl(){const e=new Date().toISOString().split("T")[0];return We.value.filter(t=>t.timestamp.startsWith(e))}function ei(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return We.value.filter(n=>n.timestamp>=s)}function Xp(){const e=zc(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let i=1;i<t.length;i++){const l=new Date(t[i]);if(Math.round((a-l)/(24*60*60*1e3))===1)o++,a=l;else break}return o}function Pr(){const e=T(()=>We.value.length),t=T(()=>We.value.filter(v=>v.correct).length),s=T(()=>We.value.filter(v=>!v.correct).length),n=T(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=T(()=>{const v=Zl(),m=v.filter(O=>O.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),a=T(()=>{const v=ei(),m=v.filter(O=>O.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),i=T(()=>Xp()),l=T(()=>Yl()),c=T(()=>Xl()),u=T(()=>Ql(20)),d=T(()=>We.value.length>0),f=T(()=>Po.value),h=T(()=>Lo.value!==null);return{observations:Rr,decryptedObservations:We,loading:Po,error:Lo,lastFetchedAt:Mn,initialized:Bo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:i,skillStats:l,sessions:c,recentObservations:u,hasData:d,isLoading:f,hasError:h,initialize:qp,fetchProgress:Gc,clearCache:Yp,getObservationsByDate:zc,getStatsBySkill:Yl,getSessions:Xl,getRecentObservations:Ql,getTodayObservations:Zl,getThisWeekObservations:ei}}const Lr="bridgeTeacher",Br="bridgeTeacherSession",Qp="https://api.bridge-classroom.com/api",Zp="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",so=N(!1),Ur=N(null),Rs=N(null),aa=N(null),Ht=N(null),Xa=N(!1),Jc=8*60*60*1e3;function eh(e){let t=e.trim();return t.includes("-----BEGIN")&&(t=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,"")),t}async function th(e){try{const t=await fetch(`${Qp}/auth/teacher`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Zp},body:JSON.stringify({password:e})});return t.ok?{valid:!0}:t.status===401?{valid:!1,error:"Invalid password"}:{valid:!1,error:(await t.json().catch(()=>({}))).message||"Authentication failed"}}catch(t){return console.error("Password verification error:",t),{valid:!1,error:"Unable to connect to server"}}}async function qc(e){try{return{valid:!0,key:await Ec(e)}}catch(t){return console.error("Private key validation error:",t),{valid:!1,error:"Invalid private key format"}}}function sh(){try{const e=sessionStorage.getItem(Br);if(e){const t=JSON.parse(e);if(t.expiry&&new Date(t.expiry)>new Date)return Ht.value=t.expiry,Rs.value=t.privateKeyBase64,aa.value=t.viewerId||null,!0}}catch(e){console.error("Failed to load session:",e)}return!1}function Mr(){try{const e={expiry:Ht.value,privateKeyBase64:Rs.value,viewerId:aa.value};sessionStorage.setItem(Br,JSON.stringify(e))}catch(e){console.error("Failed to save session:",e)}}function nh(){try{const e=localStorage.getItem(Lr);if(e)return JSON.parse(e).encryptedKey||null}catch(e){console.error("Failed to load remembered key:",e)}return null}function oh(e){try{const t={encryptedKey:e};localStorage.setItem(Lr,JSON.stringify(t))}catch(t){console.error("Failed to save remembered key:",t)}}function ah(){localStorage.removeItem(Lr)}async function rh(){if(!Xa.value){if(sh()&&Rs.value){const e=await qc(Rs.value);e.valid&&(Ur.value=e.key,so.value=!0)}Xa.value=!0}}async function lh(e,t,s=!1){const n=await th(e);if(!n.valid)return{success:!1,error:n.error};const o=eh(t),a=await qc(o);return a.valid?(Ur.value=a.key,Rs.value=o,Ht.value=new Date(Date.now()+Jc).toISOString(),so.value=!0,Mr(),s&&oh(o),{success:!0}):{success:!1,error:a.error}}function ih(){so.value=!1,Ur.value=null,Rs.value=null,Ht.value=null,sessionStorage.removeItem(Br)}function ch(){return Rs.value}function uh(){return aa.value}function dh(e){aa.value=e,Mr()}function fh(){return Ht.value?new Date(Ht.value)>new Date:!1}function vh(){so.value&&(Ht.value=new Date(Date.now()+Jc).toISOString(),Mr())}function hs(){const e=T(()=>so.value),t=T(()=>{if(!Ht.value)return 0;const n=new Date(Ht.value).getTime()-Date.now();return Math.max(0,n)}),s=T(()=>!!nh());return{isAuthenticated:e,sessionExpiry:Ht,initialized:Xa,sessionTimeRemaining:t,hasRememberedKey:s,initialize:rh,login:lh,logout:ih,getPrivateKey:ch,getViewerId:uh,setViewerId:dh,isSessionValid:fh,extendSession:vh,clearRememberedKey:ah}}const Qa="https://api.bridge-classroom.com/api",Za="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",er=N(!1),Ws=N(null),Xt=N(null),Yn=N([]),un=N([]),Fr=N("lessons"),ra=N(!0),mn=N(!1),no=N([]);function mh(e){mn.value=!0,no.value=e}function ph(){mn.value=!1,no.value=[]}function oo(){return mn.value?no.value:Yn.value}async function Yc(){var o;const e=Me(),t=hs(),s=e.currentUser.value;if(!s){un.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isAuthenticated.value)try{const a=((o=t.getViewerId)==null?void 0:o.call(t))||null;if(a){const i=await fetch(`${Qa}/grants?grantee_id=${a}`,{headers:{"x-api-key":Za}});if(i.ok){const{grants:l}=await i.json(),c=await fetch(`${Qa}/users`,{headers:{"x-api-key":Za}});if(c.ok){const{users:u}=await c.json(),d=new Set(l.map(f=>f.grantor_id));for(const f of u)d.has(f.id)&&f.id!==s.id&&n.push({id:f.id,name:`${f.first_name} ${f.last_name}`,email:f.email,isSelf:!1})}}}}catch(a){console.error("Failed to fetch accessible users:",a)}un.value=n}async function jr(e=!1){if(mn.value)return{success:!0};const t=Me(),s=Pr(),n=t.currentUser.value;if(!n)return Ws.value="No authenticated user",{success:!1,error:Ws.value};er.value=!0,Ws.value=null;try{if(!Xt.value||Xt.value===n.id)Xt.value=n.id,await s.fetchProgress(e),Yn.value=s.decryptedObservations.value;else{const o=await fetch(`${Qa}/observations?user_id=${Xt.value}&limit=10000`,{headers:{"x-api-key":Za}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();Yn.value=a.observations||[]}return{success:!0}}catch(o){return Ws.value=o.message,{success:!1,error:o.message}}finally{er.value=!1}}async function hh(e){Xt.value=e,await jr(!0)}const tr=T(()=>{var n;const e=oo(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:Zc(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),sr=T(()=>{const e=oo(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=Rm(o),i=sa(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:Pm(a).name,skillName:i.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Xc=T(()=>ra.value?tr.value.filter(e=>e.total>0):tr.value),Qc=T(()=>ra.value?sr.value.filter(e=>e.total>0):sr.value);function Zc(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const gh=T(()=>Fr.value==="lessons"?Xc.value:Qc.value),yh=T(()=>un.value.length>1),bh=T(()=>un.value.find(e=>e.id===Xt.value)||null),_h=T(()=>oo().length>0),wh=T(()=>oo().length),Sh=T(()=>{const e=oo();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Ch(){const t=Me().currentUser.value;t&&(Xt.value=t.id,await Yc(),await jr())}function $h(){Yn.value=[],un.value=[],Xt.value=null,Fr.value="lessons",ra.value=!0,Ws.value=null,mn.value=!1,no.value=[]}function Qt(){return{loading:er,error:Ws,selectedUserId:Xt,observations:Yn,accessibleUsers:un,activeTab:Fr,onlyWithObservations:ra,useTestData:mn,testObservations:no,enableTestMode:mh,disableTestMode:ph,lessonStats:tr,taxonStats:sr,filteredLessonStats:Xc,filteredTaxonStats:Qc,currentStats:gh,canViewOtherUsers:yh,selectedUser:bh,hasData:_h,totalObservations:wh,overallSuccessRate:Sh,initialize:Ch,loadAccomplishments:jr,selectUser:hh,fetchAccessibleUsers:Yc,reset:$h,formatLessonName:Zc}}const Hr="https://api.bridge-classroom.com/api",eu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ht=N("idle"),tu=N(null),Vs=N(null),Gs=N(0),zs=N(navigator.onLine),Nn=N(!1),ti=5,kh=1e3,Ah=6e4,xh=5e3;let Zs=null;function Nh(e){const t=Math.min(kh*Math.pow(2,e),Ah);return t+Math.random()*t*.25}async function su(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${Hr}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function nu(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${Hr}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":eu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function ao(){var n,o;const e=Me(),t=ps();if(!navigator.onLine)return ht.value="offline",{success:!1,offline:!0};ht.value="syncing",Vs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const c=await su(a);if(c.success)e.updateUser(a.id,{serverRegistered:!0}),Nn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(c.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),ht.value="error",Vs.value="Account already exists. Please use recovery.",Nn.value=!0,s;console.warn("User registration failed:",c.error),Nn.value=!0,Vs.value=`Registration failed: ${c.error}`}}const i=await t.encryptPendingObservations();i>0&&console.log(`Encrypted ${i} observations`);let l=!1;if(a!=null&&a.dataConsent){const c=t.getPendingObservations();if(c.length>0){const u=await nu(c);if(u.success&&u.synced>0){const d=c.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var h;return(h=f.metadata)==null?void 0:h.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await Qt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(l=!0,Vs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return Nn.value||l?ht.value="error":(ht.value="idle",tu.value=new Date().toISOString(),Gs.value=0),s}catch(a){return console.error("Sync failed:",a),Vs.value=a.message,ht.value="error",s.success=!1,s}}function nr(){Zs&&clearTimeout(Zs),Zs=setTimeout(async()=>{await ao()},xh)}async function ou(){return Zs&&(clearTimeout(Zs),Zs=null),await ao()}async function au(){if(Gs.value>=ti){console.log("Max retries reached, giving up"),ht.value="error";return}const e=Nh(Gs.value);Gs.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Gs.value}/${ti})`),setTimeout(async()=>{const t=await ao();!t.success&&t.offline!==!0&&au()},e)}function Th(){var l;const e=Me(),t=ps(),s=(l=e.currentUser)==null?void 0:l.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(c=>c.encrypted);if(o.length===0)return;const a={observations:o.map(c=>({encrypted_data:c.encrypted_data,iv:c.iv,metadata:c.metadata}))},i=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${Hr}/observations?api_key=${eu}`,i),console.log("Sent beacon with",o.length,"observations")}function Oh(){window.addEventListener("online",()=>{zs.value=!0,console.log("Back online, triggering sync"),ou()}),window.addEventListener("offline",()=>{zs.value=!1,ht.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&zs.value&&(console.log("Tab visible, triggering sync"),nr())}),window.addEventListener("beforeunload",Th),setInterval(()=>{document.visibilityState==="visible"&&zs.value&&nr()},5*60*1e3)}async function Ih(){Oh(),navigator.onLine?await ao():ht.value="offline"}function ru(){const e=T(()=>ht.value==="syncing"),t=T(()=>ht.value==="offline"||!zs.value),s=T(()=>ht.value==="error"),n=T(()=>ps().pendingCount.value>0);return{syncState:ht,lastSyncAt:tu,lastError:Vs,retryCount:Gs,isOnline:zs,registrationFailed:Nn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:Ih,performSync:ao,triggerSync:nr,forceSync:ou,retrySync:au,registerUserWithServer:su,syncObservationsToServer:nu}}const $s={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},pt={NONE:"none",SILVER:"silver",GOLD:"gold"},Eh=6;function Dh(e){return e.slice(0,10)}function lu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function iu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const si=60*60*1e3;function cu(e){if(e.length===0)return $s.GREY;const t=e[e.length-1];if(!t.correct)return $s.RED;const s=Date.now()-si;if(e.some(l=>!l.correct&&new Date(l.timestamp).getTime()>s))return $s.YELLOW;const o=e.filter(l=>!l.correct).pop();if(!o)return $s.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=si?$s.ORANGE:$s.GREEN}function uu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function du(e){if(e.length===0)return pt.NONE;const t=new Set;for(const i of e)t.add(Dh(i.timestamp));const s=[...t].filter(i=>uu(e,i)).sort();if(s.length<2)return pt.NONE;let n=1,o=1,a=s[0];for(let i=1;i<s.length;i++)lu(a,s[i])>=Eh&&(o++,a=s[i],o>n&&(n=o));return n>=3?pt.GOLD:n>=2?pt.SILVER:pt.NONE}function Rh(e){const t=e.observations.value||[];let s=[];try{s=ps().getPendingObservations().filter(l=>l.metadata).map(l=>{const c=l.metadata;return{id:c.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:c.timestamp||l.queuedAt,skill_path:c.skill_path,correct:c.correct,deal_subfolder:c.deal_subfolder,deal_number:c.deal_number,session_id:c.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function Ph(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(l=>{var c;return(l.deal_number??((c=l.deal)==null?void 0:c.deal_number))===o}).sort((l,c)=>l.timestamp.localeCompare(c.timestamp)),i=iu(a);return{boardNumber:o,status:cu(a),achievement:du(a),attemptCount:i.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function Lh(e){return!e||e.length===0?{achievement:pt.NONE}:e.every(n=>n.achievement===pt.GOLD)?{achievement:pt.GOLD}:e.every(n=>n.achievement===pt.SILVER||n.achievement===pt.GOLD)?{achievement:pt.SILVER}:{achievement:pt.NONE}}const fu="bridgeLessonBoards",Xn=N(Bh()),ka=new Set;function Bh(){try{const e=localStorage.getItem(fu);return e?JSON.parse(e):{}}catch{return{}}}function Uh(){try{localStorage.setItem(fu,JSON.stringify(Xn.value))}catch{}}function vu(e,t){Xn.value={...Xn.value,[e]:t},Uh()}function Mh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Fh(e){const t=to(),s=e.filter(n=>!Xn.value[n]&&!ka.has(n));if(s.length!==0){for(const n of s)ka.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,i=`${o.baseUrl}/${a}.pbn`;try{const l=await fetch(i);if(!l.ok)continue;const c=await l.text(),u=Mh(c);if(u.length>0){vu(n,u);break}}catch{continue}}}finally{ka.delete(n)}}))}}function jh(e){var n,o;const t=Xn.value,s={};for(const a of e){const i=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),l=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!i||l==null||(s[i]||(s[i]={boards:new Set,lastActivity:a.timestamp}),s[i].boards.add(l),a.timestamp>s[i].lastActivity&&(s[i].lastActivity=a.timestamp))}return Object.entries(s).map(([a,i])=>{const l=t[a];if(l)return{subfolder:a,boardNumbers:l,lastActivity:i.lastActivity};const c=Math.max(...i.boards),u=[];for(let d=1;d<=c;d++)u.push(d);return{subfolder:a,boardNumbers:u,lastActivity:i.lastActivity}})}function pn(){const e=Qt();function t(){return Rh(e)}return{STATUS:$s,ACHIEVEMENT:pt,getObservations:t,computeBoardMastery:Ph,computeLessonAchievement:Lh,extractLessonsFromObservations:jh,saveLessonBoardNumbers:vu,fetchMissingBoardCounts:Fh,groupIntoBoardAttempts:iu,calculateCurrentStatus:cu,calculateAchievement:du,hasGreenDay:uu,daysBetween:lu}}const Tn="https://api.bridge-classroom.com/api",On="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Uo=N(!1),Kr=N(null),la=N([]),us=N({}),Mo=N(!1),Fo=N(null),Vr=N(!1),jo={},Hh=2*60*1e3;async function Kh(){var s;const e=Me(),t=e.currentUser.value;if(!t||!t.email){Uo.value=!1;return}try{const n=await fetch(`${Tn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":On}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;Kr.value=a.id;const i=await fetch(`${Tn}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":On}});if(!i.ok)return;const c=(await i.json()).grants||[],u=new Set(c.filter(m=>m.grantor_id!==t.id).map(m=>m.grantor_id));if(u.size===0)return;const d=await fetch(`${Tn}/users`,{headers:{"x-api-key":On}});if(!d.ok)return;const h=(await d.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(la.value=h.filter(m=>{var y;return u.has(m.id)&&m.id!==t.id&&((y=m.email)==null?void 0:y.toLowerCase())!==v}).sort((m,y)=>`${m.first_name} ${m.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Uo.value=!0,Vr.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Tn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":On},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function mu(e){const t=us.value[e],s=jo[e];if(t&&s&&Date.now()-s<Hh)return t;try{const n=await fetch(`${Tn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":On}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=((await n.json()).observations||[]).map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number}));return us.value={...us.value,[e]:a},jo[e]=Date.now(),a}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Vh(){Mo.value=!0,Fo.value=null;try{await Promise.allSettled(la.value.map(s=>mu(s.id)));const e=pn(),t=new Set;for(const s of Object.values(us.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Fo.value=e.message,console.error("Failed to load student summaries:",e)}finally{Mo.value=!1}}function Wh(e){const t=us.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=pn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const i of n){const l=s.computeBoardMastery(t,i.subfolder,i.boardNumbers);for(const c of l)o[c.status]=(o[c.status]||0)+1}let a=null;for(const i of t)(!a||i.timestamp>a)&&(a=i.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Gh(e,t=3){const s=us.value[e]||[],n=Qt(),o={};for(const a of s){const i=a.deal_subfolder;i&&(!o[i]||a.timestamp>o[i])&&(o[i]=a.timestamp)}return Object.entries(o).sort(([,a],[,i])=>i.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function zh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),i=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:i<7?`${i}d ago`:s.toLocaleDateString()}function Jh(){Uo.value=!1,Kr.value=null,la.value=[],us.value={},Mo.value=!1,Fo.value=null,Vr.value=!1;for(const e of Object.keys(jo))delete jo[e]}function ia(){return{isTeacher:Uo,viewerId:Kr,students:la,studentObservations:us,loading:Mo,error:Fo,initialized:Vr,checkTeacherStatus:Kh,fetchStudentObservations:mu,loadAllStudentSummaries:Vh,getStudentMasterySummary:Wh,getStudentRecentLessons:Gh,formatTimeSince:zh,reset:Jh}}const qh={key:0,class:"minimal-hand"},Yh={class:"seat-label-inline"},Xh={class:"seat-label"},Qh={key:0,class:"suits"},Zh={key:0,class:"suit-row"},eg={key:0,class:"cards clickable-cards"},tg=["onClick"],sg={key:1,class:"cards"},ng={key:2,class:"cards"},og={key:1,class:"hidden-hand"},ag={key:2,class:"hcp"},rg={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Nc,n=T(()=>za(t.seat)),o=T(()=>xm(t.hand)),a=T(()=>t.hand?s.reduce((O,k)=>{var b;return O+(((b=t.hand[k])==null?void 0:b.length)||0)},0):0),i=T(()=>a.value>0&&a.value<5);function l(O){return t.hand&&t.hand[O]&&t.hand[O].length>0}function c(O){return Nr[O]}function u(O){return km(O)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(O){return d[O]||O}function h(O){if(!t.hand||!t.hand[O])return"";const k=t.hand[O];return k.length===0?"":k.map($a).join(" ")}const v=T(()=>t.playedCards&&t.playedCards.length>0),m=T(()=>{if(!t.playedCards)return null;const O=new Set;for(const k of t.playedCards){const b=k[0].toUpperCase(),C=k.slice(1).toUpperCase(),R={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[b];R&&O.add(`${R}:${C}`)}return O});function y(O,k){return m.value?m.value.has(`${O}:${k}`):!1}return(O,k)=>(p(),g("div",{class:ne(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),g("div",qh,[r("span",Yh,_(e.seat),1),(p(!0),g(q,null,ae(D(s),b=>(p(),g("span",{key:b,class:ne(["suit-symbol-inline",u(b)])},_(c(b)),3))),128))])):(p(),g(q,{key:1},[r("div",Xh,_(n.value),1),!e.hidden&&e.hand?(p(),g("div",Qh,[(p(!0),g(q,null,ae(D(s),b=>(p(),g(q,{key:b},[!i.value||l(b)?(p(),g("div",Zh,[r("span",{class:ne(["suit-symbol",u(b)])},_(c(b)),3),e.clickable?(p(),g("span",eg,[(p(!0),g(q,null,ae(e.hand[b],C=>(p(),g("span",{key:C,class:ne(y(b,C)?"card-played":"card-clickable"),onClick:R=>!y(b,C)&&O.$emit("card-click",{suit:f(b),rank:C})},_(D($a)(C)),11,tg))),128))])):v.value?(p(),g("span",sg,[(p(!0),g(q,null,ae(e.hand[b],C=>(p(),g("span",{key:C,class:ne({"card-played":y(b,C)})},_(D($a)(C)),3))),128))])):(p(),g("span",ng,_(h(b)),1))])):P("",!0)],64))),128))])):e.hidden?(p(),g("div",og,[...k[0]||(k[0]=[r("div",{class:"card-back"},null,-1)])])):P("",!0),e.showHcp&&e.hand&&!e.hidden&&!i.value?(p(),g("div",ag,_(o.value)+" HCP ",1)):P("",!0)],64))],2))}},ho=ue(rg,[["__scopeId","data-v-128fc7ed"]]),lg={class:"ns-column north-row"},ig={key:0,class:"position north"},cg={key:0,class:"position west"},ug={class:"center"},dg={key:1,class:"position east"},fg={class:"ns-column south-row"},vg={key:0,class:"position south"},mg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,i;return p(),g("div",{class:ne(["bridge-table",{compact:e.compact}])},[r("div",lg,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),g("div",ig,[de(ho,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=l=>t.$emit("card-click",{seat:"N",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),g("div",cg,[de(ho,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=l=>t.$emit("card-click",{seat:"W",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0),r("div",ug,[Hd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),g("div",dg,[de(ho,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=l=>t.$emit("card-click",{seat:"E",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0),r("div",fg,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),g("div",vg,[de(ho,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(i=e.playedCards)==null?void 0:i.S,onCardClick:s[3]||(s[3]=l=>t.$emit("card-click",{seat:"S",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):P("",!0)])],2)}}},pg=ue(mg,[["__scopeId","data-v-ec6230a9"]]),hg={class:"bidding-box"},gg={class:"bid-section"},yg={class:"levels"},bg=["onClick"],_g={class:"strains"},wg=["disabled","onClick"],Sg=["innerHTML"],Cg={class:"special-bids"},$g=["disabled"],kg=["disabled"],Ag={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=N(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],i=T(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),l=T(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],h=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!h)return-1;const v=h[1].toUpperCase();return f.indexOf(v==="N"?"NT":v)});function c(f){o.value=f}function u(f,h){if(!f)return!1;const m=["C","D","H","S","NT"].indexOf(h);return f>i.value||f===i.value&&m>l.value}function d(f,h){u(f,h)&&n("bid",`${f}${h}`)}return(f,h)=>(p(),g("div",hg,[r("div",gg,[r("div",yg,[(p(),g(q,null,ae(7,v=>r("button",{key:v,class:ne(["level-btn",{active:o.value===v}]),onClick:m=>c(v)},_(v),11,bg)),64))]),r("div",_g,[(p(),g(q,null,ae(a,v=>r("button",{key:v.value,class:ne(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:m=>d(o.value,v.value)},[r("span",{innerHTML:v.display},null,8,Sg)],10,wg)),64))])]),r("div",Cg,[r("button",{class:"special-btn pass",onClick:h[0]||(h[0]=v=>f.$emit("bid","Pass"))}," Pass "),r("button",{class:"special-btn double",disabled:!e.canDouble,onClick:h[1]||(h[1]=v=>f.$emit("bid","X"))}," Double ",8,$g),r("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:h[2]||(h[2]=v=>f.$emit("bid","XX"))}," Redouble ",8,kg)])]))}},xg=ue(Ag,[["__scopeId","data-v-38ccb98f"]]),Ng={class:"auction-table"},Tg={class:"rounds"},Og=["innerHTML"],Ig={key:1,class:"turn-indicator"},Eg={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=T(()=>["W","N","E","S"].indexOf(t.dealer)),n=T(()=>{const u=[],d=t.bids;let f=0,h=0;for(;f<d.length||h===0&&d.length>0;){const v=[null,null,null,null],m=h===0?s.value:0;for(let y=m;y<4&&f<d.length;y++)v[y]=d[f],f++;if(v.some(y=>y!==null)&&u.push(v),h++,h>20)break}if(t.currentBidIndex>=d.length){const v=u[u.length-1],m=v?v.filter(y=>y!==null).length:0;if(u.length===1&&s.value,m===4||u.length>1&&m===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function a(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function i(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function l(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function c(u){return Tr(u).html}return(u,d)=>(p(),g("div",Ng,[d[0]||(d[0]=Oo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),r("div",Tg,[(p(!0),g(q,null,ae(n.value,(f,h)=>(p(),g("div",{key:h,class:"round"},[(p(!0),g(q,null,ae(f,(v,m)=>(p(),g("div",{key:m,class:ne(["bid-cell",{"current-turn":a(h,m),"wrong-bid":i(h,m),"correct-bid":l(h,m)}])},[v?(p(),g("span",{key:0,innerHTML:c(v)},null,8,Og)):e.showTurnIndicator&&a(h,m)?(p(),g("span",Ig,"?")):P("",!0)],2))),128))]))),128))])]))}},Dg=ue(Eg,[["__scopeId","data-v-ac265db8"]]),Rg={class:"deal-info"},Pg={class:"board-number"},Lg={key:0,class:"board-popup"},Bg={class:"popup-list"},Ug=["onClick"],Mg={class:"info-row"},Fg={class:"info-item"},jg={class:"value"},Hg={class:"info-item"},Kg={key:0,class:"contract-row"},Vg={class:"info-item"},Wg=["innerHTML"],Gg={key:0,class:"label"},zg={key:0,class:"info-item"},Jg=["innerHTML"],qg={key:1,class:"title"},Yg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=N(!1);function a(h){n("goto",h),o.value=!1}const i=T(()=>za(s.dealer)),l=T(()=>za(s.declarer)),c=T(()=>Am(s.vulnerable)),u=T(()=>{var v;const h=(v=s.vulnerable)==null?void 0:v.toUpperCase();return h==="BOTH"||h==="ALL"?"vul-both":h==="NS"||h==="EW"?"vul-partial":"vul-none"}),d=T(()=>s.contract?Tr(s.contract).html:""),f=T(()=>{if(!s.openingLead)return"";const h=s.openingLead[0],v=s.openingLead.slice(1),m={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},O=m[h]||h;return`<span class="${y[h]||"black"}">${O}</span>${v==="T"?"10":v}`});return(h,v)=>(p(),g("div",Rg,[r("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=m=>o.value=!0),onMouseleave:v[1]||(v[1]=m=>o.value=!1)},[r("div",Pg,"Board "+_(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),g("div",Lg,[v[2]||(v[2]=r("div",{class:"popup-header"},"Select Board",-1)),r("div",Bg,[(p(!0),g(q,null,ae(e.totalDeals,m=>(p(),g("button",{key:m,class:ne(["popup-item",{active:m-1===e.currentIndex}]),onClick:y=>a(m-1)}," Board "+_(e.dealBoardNumbers[m-1]||m),11,Ug))),128))])])):P("",!0)],32),r("div",Mg,[r("div",Fg,[v[3]||(v[3]=r("span",{class:"label"},"Dealer:",-1)),r("span",jg,_(i.value),1)]),r("div",Hg,[v[4]||(v[4]=r("span",{class:"label"},"Vul:",-1)),r("span",{class:ne(["value",u.value])},_(c.value),3)])]),e.showContract&&e.contract?(p(),g("div",Kg,[r("div",Vg,[r("span",{class:"value contract",innerHTML:d.value},null,8,Wg),e.declarer?(p(),g("span",Gg,"by "+_(l.value),1)):P("",!0)]),e.openingLead?(p(),g("div",zg,[v[5]||(v[5]=r("span",{class:"label"},"OL:",-1)),r("span",{class:"value lead-card",innerHTML:f.value},null,8,Jg)])):P("",!0)])):P("",!0),e.title?(p(),g("div",qg,_(e.title),1)):P("",!0)]))}},Xg=ue(Yg,[["__scopeId","data-v-5a844c49"]]),Qg={class:"feedback-header"},Zg={key:0,class:"icon"},ey={key:1,class:"icon"},ty={class:"title"},sy={key:0,class:"feedback-content"},ny={class:"bid-comparison"},oy={class:"bid-item your-bid"},ay=["innerHTML"],ry={class:"bid-item correct-bid"},ly=["innerHTML"],iy={key:1,class:"feedback-content"},cy={class:"bid-comparison"},uy={class:"bid-item your-bid"},dy=["innerHTML"],fy={class:"bid-item correct-bid"},vy=["innerHTML"],my=["innerHTML"],py={class:"actions"},hy={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=T(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Tr(a).html}function o(a){return Nm(a).html}return(a,i)=>e.visible?(p(),g("div",{key:0,class:ne(["feedback-panel",e.type])},[r("div",Qg,[e.type==="wrong"?(p(),g("span",Zg,"")):e.type==="correct"?(p(),g("span",ey,"")):P("",!0),r("span",ty,_(s.value),1)]),e.wrongBid?(p(),g("div",sy,[r("div",ny,[r("div",oy,[i[1]||(i[1]=r("span",{class:"label"},"Your bid:",-1)),r("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,ay)]),r("div",ry,[i[2]||(i[2]=r("span",{class:"label"},"Correct bid:",-1)),r("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,ly)])])])):P("",!0),e.wrongCardCode?(p(),g("div",iy,[r("div",cy,[r("div",uy,[i[3]||(i[3]=r("span",{class:"label"},"Your card:",-1)),r("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,dy)]),r("div",fy,[i[4]||(i[4]=r("span",{class:"label"},"Correct card:",-1)),r("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,vy)])])])):P("",!0),e.commentary?(p(),g("div",{key:2,class:"commentary",innerHTML:D(Ks)(e.commentary)},null,8,my)):P("",!0),r("div",py,[e.showContinue?(p(),g("button",{key:0,class:"btn continue",onClick:i[0]||(i[0]=l=>a.$emit("continue"))}," Continue ")):P("",!0)])],2)):P("",!0)}},ni=ue(hy,[["__scopeId","data-v-04368462"]]),gy={class:"welcome-screen"},yy={class:"welcome-card"},by={class:"welcome-header"},_y={key:0,class:"welcome-body"},wy={class:"form-group"},Sy={key:0,class:"error-message"},Cy={class:"form-group"},$y={key:0,class:"error-message"},ky={class:"form-group"},Ay={key:0,class:"error-message"},xy={key:0,class:"form-group"},Ny={class:"checkbox-group"},Ty=["value","checked","onChange"],Oy={key:1,class:"form-group"},Iy={class:"single-classroom"},Ey={class:"form-group consent-group"},Dy={class:"checkbox-label consent-label"},Ry={key:0,class:"consent-details"},Py=["disabled"],Ly={key:0},By={key:1},Uy={key:1,class:"welcome-body returning"},My={key:2,class:"welcome-body switcher"},Fy={class:"user-list"},jy=["onClick"],Hy={class:"user-name"},Ky={key:0,class:"user-class"},Vy={key:3,class:"welcome-body recovery-sent"},Wy={class:"subtitle"},Gy={class:"recovery-info"},zy={class:"code-entry"},Jy=["disabled"],qy={key:0},Yy={key:1},Xy={key:0,class:"error-message"},Qy={key:4,class:"welcome-body recovery-claiming"},Zy={class:"subtitle"},eb={key:0,class:"recovery-error-panel"},tb={class:"error-message"},sb={key:1,class:"loading-spinner"},nb={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=to(),o=Me(),a="https://api.bridge-classroom.com/api",i=N("form"),l=N(""),c=N(""),u=N(""),d=N([]),f=N(!0),h=N({firstName:"",lastName:"",email:"",classrooms:""}),v=N(!1),m=N(!1),y=N(""),O=N(""),k=N(""),b=N(""),C=N("");ct(async()=>{o.initialize(),n.initializeFromUrl();const oe=new URLSearchParams(window.location.search),j=oe.get("recover"),se=oe.get("user_id");if(j&&se){await fe(se,j),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?i.value="returning":o.hasUsers.value?i.value="switcher":i.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,V=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ee=T(()=>l.value.trim().length>0&&c.value.trim().length>0&&u.value.trim().length>0&&R.test(u.value.trim())),K=T(()=>o.currentUser.value?o.currentUser.value.firstName:""),X=T(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function Y(){h.value={firstName:"",lastName:"",email:"",classrooms:""};let oe=!0;return l.value.trim()||(h.value.firstName="First name is required",oe=!1),c.value.trim()||(h.value.lastName="Last name is required",oe=!1),u.value.trim()?R.test(u.value.trim())||(h.value.email="Please enter a valid email address",oe=!1):(h.value.email="Email is required",oe=!1),o.findUserByEmail(u.value)&&(h.value.email="This email is already registered on this device.",oe=!1),oe}async function ve(){const oe=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const j=await o.requestRecovery(oe,a);return j.success?(O.value=oe,b.value=j.message,i.value="recovery-sent",!1):j.message&&j.message.includes("No account found")?!0:(h.value.email=j.message||"Unable to verify email. Please try again.",!1)}catch(j){return console.error("Failed to check email on server:",j),V?h.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":h.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function fe(oe,j){i.value="recovery-claiming",m.value=!0,y.value="Recovering your account...",k.value="";try{const se=await o.claimRecovery(oe,j,a);se.success&&se.user?s("userReady",se.user):(k.value=se.error||"Recovery failed. Please try again.",i.value="form")}catch(se){console.error("[Recovery] Exception:",se),k.value="Unable to complete recovery. Please try again.",i.value="form"}finally{m.value=!1,y.value=""}}async function we(){if(C.value.trim().length===6){m.value=!0,y.value="Verifying code...",k.value="";try{const oe=await o.claimRecoveryByCode(O.value.trim(),C.value.trim(),a);oe.success&&oe.user?s("userReady",oe.user):k.value=oe.error||"Invalid code. Please check and try again."}catch(oe){console.error("Recovery code claim failed:",oe),k.value="Unable to connect to server. Please try again."}finally{m.value=!1,y.value=""}}}async function Le(){if(!Y())return;if(m.value=!0,y.value="Checking account...",!await ve()){m.value=!1,y.value="";return}let j=[];n.hasSingleClassroom.value?j=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(j=[...d.value]),y.value="Creating your secure encryption key...";try{const se=await o.createUser({firstName:l.value,lastName:c.value,email:u.value,classrooms:j,dataConsent:f.value,apiUrl:a});s("userReady",se)}catch(se){console.error("Failed to create user:",se),h.value.email="Failed to create account. Please try again."}finally{m.value=!1,y.value=""}}function He(){s("userReady",o.currentUser.value)}function Ge(){i.value="switcher"}function ge(oe){o.switchUser(oe),s("userReady",o.currentUser.value)}function Z(){l.value="",c.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,h.value={firstName:"",lastName:"",email:"",classrooms:""},i.value="form"}function me(){o.currentUser.value?i.value="returning":o.hasUsers.value&&(i.value="switcher")}function he(oe){const j=d.value.indexOf(oe);j===-1?d.value.push(oe):d.value.splice(j,1)}return(oe,j)=>(p(),g("div",gy,[r("div",yy,[r("div",by,[r("h1",null,_(X.value),1)]),i.value==="form"?(p(),g("div",_y,[j[16]||(j[16]=r("h2",null,"Welcome!",-1)),j[17]||(j[17]=r("p",{class:"subtitle"},"Please enter your name to get started.",-1)),r("form",{onSubmit:Dt(Le,["prevent"]),class:"user-form"},[r("div",wy,[j[8]||(j[8]=r("label",{for:"firstName"},"First Name",-1)),Re(r("input",{id:"firstName","onUpdate:modelValue":j[0]||(j[0]=se=>l.value=se),type:"text",placeholder:"Enter your first name",class:ne({"has-error":h.value.firstName}),autocomplete:"given-name"},null,2),[[Nt,l.value]]),h.value.firstName?(p(),g("span",Sy,_(h.value.firstName),1)):P("",!0)]),r("div",Cy,[j[9]||(j[9]=r("label",{for:"lastName"},"Last Name",-1)),Re(r("input",{id:"lastName","onUpdate:modelValue":j[1]||(j[1]=se=>c.value=se),type:"text",placeholder:"Enter your last name",class:ne({"has-error":h.value.lastName}),autocomplete:"family-name"},null,2),[[Nt,c.value]]),h.value.lastName?(p(),g("span",$y,_(h.value.lastName),1)):P("",!0)]),r("div",ky,[j[10]||(j[10]=r("label",{for:"email"},"Email Address",-1)),Re(r("input",{id:"email","onUpdate:modelValue":j[2]||(j[2]=se=>u.value=se),type:"email",placeholder:"Enter your email address",class:ne({"has-error":h.value.email}),autocomplete:"email"},null,2),[[Nt,u.value]]),h.value.email?(p(),g("span",Ay,_(h.value.email),1)):P("",!0),j[11]||(j[11]=r("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),D(n).hasMultipleClassrooms.value?(p(),g("div",xy,[j[12]||(j[12]=r("label",null,"Select Your Class(es)",-1)),r("div",Ny,[(p(!0),g(q,null,ae(D(n).availableClassrooms.value,se=>(p(),g("label",{key:se.id,class:"checkbox-label"},[r("input",{type:"checkbox",value:se.id,checked:d.value.includes(se.id),onChange:ze=>he(se.id)},null,40,Ty),r("span",null,_(se.name),1)]))),128))])])):D(n).hasSingleClassroom.value?(p(),g("div",Oy,[j[13]||(j[13]=r("label",null,"Class",-1)),r("div",Iy,_(D(n).singleClassroom.value.name),1)])):P("",!0),r("div",Ey,[r("label",Dy,[Re(r("input",{type:"checkbox","onUpdate:modelValue":j[3]||(j[3]=se=>f.value=se)},null,512),[[Zo,f.value]]),j[14]||(j[14]=r("span",null," Preserve my practice history ",-1))]),r("button",{type:"button",class:"details-toggle",onClick:j[4]||(j[4]=se=>v.value=!v.value)},_(v.value?"Hide details":"What data is preserved?"),1),v.value?(p(),g("div",Ry,[...j[15]||(j[15]=[Oo('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):P("",!0)]),r("button",{type:"submit",class:"submit-btn",disabled:!ee.value||m.value},[m.value?(p(),g("span",Ly,_(y.value),1)):(p(),g("span",By,"Start Practicing"))],8,Py)],32),D(o).hasUsers.value?(p(),g("button",{key:0,class:"back-link",onClick:me}," Back to user selection ")):P("",!0)])):i.value==="returning"?(p(),g("div",Uy,[r("h2",null,"Welcome back, "+_(K.value)+"!",1),j[18]||(j[18]=r("p",{class:"subtitle"},"Ready to continue practicing?",-1)),r("button",{class:"submit-btn",onClick:He}," Continue "),r("button",{class:"switch-link",onClick:Ge}," Not "+_(K.value)+"? Switch user ",1)])):i.value==="switcher"?(p(),g("div",My,[j[19]||(j[19]=r("h2",null,"Select User",-1)),j[20]||(j[20]=r("p",{class:"subtitle"},"Choose who's practicing today:",-1)),r("div",Fy,[(p(!0),g(q,null,ae(D(o).allUsers.value,se=>{var ze;return p(),g("button",{key:se.id,class:ne(["user-item",{"is-current":se.id===D(o).currentUserId.value}]),onClick:ut=>ge(se.id)},[r("span",Hy,_(se.firstName)+" "+_(se.lastName),1),(ze=se.classrooms)!=null&&ze.length?(p(),g("span",Ky,_(se.classrooms.join(", ")),1)):P("",!0)],10,jy)}),128))]),r("button",{class:"add-user-btn",onClick:Z}," + Add New User "),D(o).currentUser.value?(p(),g("button",{key:0,class:"back-link",onClick:me}," Cancel ")):P("",!0)])):i.value==="recovery-sent"?(p(),g("div",Vy,[j[25]||(j[25]=r("h2",null,"Check Your Email",-1)),r("p",Wy,[j[21]||(j[21]=Os(" We found an existing account for ",-1)),r("strong",null,_(O.value),1),j[22]||(j[22]=Os(". ",-1))]),r("div",Gy,[r("p",null,_(b.value),1),j[23]||(j[23]=r("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),r("div",zy,[j[24]||(j[24]=r("label",{for:"recoveryCode"},"Recovery Code",-1)),Re(r("input",{id:"recoveryCode","onUpdate:modelValue":j[5]||(j[5]=se=>C.value=se),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:pc(we,["enter"])},null,544),[[Nt,C.value]]),r("button",{class:"submit-btn",disabled:C.value.trim().length!==6||m.value,onClick:we},[m.value?(p(),g("span",qy,_(y.value),1)):(p(),g("span",Yy,"Restore Account"))],8,Jy),k.value?(p(),g("span",Xy,_(k.value),1)):P("",!0)]),r("button",{class:"back-link",onClick:j[6]||(j[6]=se=>i.value="form")}," Use a different email ")])):i.value==="recovery-claiming"?(p(),g("div",Qy,[j[27]||(j[27]=r("h2",null,"Restoring Your Account",-1)),r("p",Zy,_(y.value),1),k.value?(p(),g("div",eb,[r("p",tb,_(k.value),1),r("button",{class:"back-link",onClick:j[7]||(j[7]=se=>i.value="form")}," Try again ")])):(p(),g("div",sb,[...j[26]||(j[26]=[r("div",{class:"spinner"},null,-1)])]))])):P("",!0)])]))}},ob=ue(nb,[["__scopeId","data-v-4e48322f"]]),bs="https://api.bridge-classroom.com/api",Bs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",_s=N([]),Us=N(null),bt=N(!1),Fe=N(null);function ro(){async function e(c){bt.value=!0,Fe.value=null;try{const d=await(await fetch(`${bs}/classrooms?teacher_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":Bs}})).json();return d.success?_s.value=d.classrooms:Fe.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),Fe.value="Unable to connect to server",null}finally{bt.value=!1}}async function t(c,u,d){bt.value=!0,Fe.value=null;try{const f=await fetch(`${bs}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({teacher_id:c,name:u,description:d||null})});if(!f.ok){const v=await f.text();return Fe.value=v||`Server error (${f.status})`,{success:!1,error:Fe.value}}const h=await f.json();return h.success?_s.value=[h.classroom,..._s.value]:Fe.value=h.error||"Failed to create classroom",h}catch(f){return console.error("Failed to create classroom:",f),Fe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function s(c){bt.value=!0,Fe.value=null;try{const d=await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}`,{headers:{"x-api-key":Bs}})).json();return d.success?Us.value=d.classroom:Fe.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),Fe.value="Unable to connect to server",null}finally{bt.value=!1}}async function n(c,u){try{const f=await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Bs}})).json();if(f.success&&Us.value){Us.value.members=Us.value.members.filter(v=>v.student_id!==u);const h=_s.value.findIndex(v=>v.id===c);h!==-1&&_s.value[h].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(c){bt.value=!0,Fe.value=null;try{const u=await fetch(`${bs}/join/${encodeURIComponent(c)}`);return u.status===404?(Fe.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Fe.value="Unable to connect to server",null}finally{bt.value=!1}}async function a(c,u,d){bt.value=!0,Fe.value=null;try{const h=await(await fetch(`${bs}/join/${encodeURIComponent(c)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return h.success||(Fe.value=h.error||"Failed to join classroom"),h}catch(f){return console.error("Failed to join classroom:",f),Fe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function i(c,u){try{return await(await fetch(`${bs}/classrooms/${encodeURIComponent(c)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bs},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function l(){_s.value=[],Us.value=null,bt.value=!1,Fe.value=null}return{teacherClassrooms:_s,currentClassroom:Us,loading:bt,error:Fe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:i,reset:l}}const ab={class:"settings-panel"},rb={class:"settings-body"},lb={class:"settings-section"},ib={class:"info-row"},cb={class:"info-value"},ub={class:"info-row"},db={class:"info-value"},fb={class:"info-row"},vb={class:"info-row"},mb={class:"info-value"},pb={key:1,class:"edit-form"},hb={class:"form-group"},gb={class:"form-group"},yb={class:"form-group"},bb={class:"checkbox-label"},_b={key:0,class:"settings-section"},wb={class:"assignment-list"},Sb={class:"assignment-header"},Cb={class:"assignment-name"},$b={class:"assignment-progress"},kb={class:"progress-bar"},Ab={class:"assignment-meta"},xb={key:0},Nb={class:"assignment-list"},Tb={class:"assignment-header"},Ob={class:"assignment-name"},Ib={class:"assignment-meta"},Eb={key:1,class:"settings-section"},Db={class:"classroom-id"},Rb=["disabled","onClick"],Pb={class:"settings-section"},Lb={class:"toggle-row"},Bb={class:"toggle-label"},Ub=["checked"],Mb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Me(),o=to(),a=oa(),i=ro(),l=N(!1),c=N(""),u=N(""),d=N(!0),f=T(()=>n.currentUser.value),h=T(()=>{var X;return!f.value||!((X=f.value.classrooms)!=null&&X.length)?"No classroom assigned":f.value.classrooms.map(Y=>{const ve=o.availableClassrooms.value.find(fe=>fe.id===Y);return ve?ve.name:Y}).join(", ")}),v=T(()=>a.getAllAssignments().filter(X=>X.completionPercent<100)),m=T(()=>a.getAllAssignments().filter(X=>X.completionPercent>=100));function y(){f.value&&(c.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,l.value=!0)}function O(){l.value=!1}function k(){f.value&&(n.updateUser(f.value.id,{firstName:c.value,lastName:u.value,dataConsent:d.value}),l.value=!1)}function b(){s("switchUser")}function C(){l.value=!1,s("close")}const R=N(null);async function V(X){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(R.value=X,(await i.leaveClassroom(X,f.value.id)).success){const ve=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:ve.filter(fe=>fe!==X)})}R.value=null}function ee(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function K(X){return X?new Date(X).toLocaleDateString():"N/A"}return(X,Y)=>{var ve,fe,we,Le,He,Ge,ge;return e.visible?(p(),g("div",{key:0,class:"settings-overlay",onClick:Dt(C,["self"])},[r("div",ab,[r("div",{class:"settings-header"},[Y[5]||(Y[5]=r("h2",null,"Settings",-1)),r("button",{class:"close-btn",onClick:C,"aria-label":"Close"},"  ")]),r("div",rb,[r("section",lb,[Y[12]||(Y[12]=r("h3",null,"Your Profile",-1)),l.value?(p(),g("div",pb,[r("div",hb,[Y[10]||(Y[10]=r("label",{for:"editFirstName"},"First Name",-1)),Re(r("input",{id:"editFirstName","onUpdate:modelValue":Y[1]||(Y[1]=Z=>c.value=Z),type:"text"},null,512),[[Nt,c.value]])]),r("div",gb,[Y[11]||(Y[11]=r("label",{for:"editLastName"},"Last Name",-1)),Re(r("input",{id:"editLastName","onUpdate:modelValue":Y[2]||(Y[2]=Z=>u.value=Z),type:"text"},null,512),[[Nt,u.value]])]),r("div",yb,[r("label",bb,[Re(r("input",{type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=Z=>d.value=Z)},null,512),[[Zo,d.value]]),r("span",null,"Share practice results with "+_(D(o).teacherName.value||"teacher"),1)])]),r("div",{class:"button-row"},[r("button",{class:"primary-btn",onClick:k}," Save Changes "),r("button",{class:"secondary-btn",onClick:O}," Cancel ")])])):(p(),g(q,{key:0},[r("div",ib,[Y[6]||(Y[6]=r("span",{class:"info-label"},"Name",-1)),r("span",cb,_((ve=f.value)==null?void 0:ve.firstName)+" "+_((fe=f.value)==null?void 0:fe.lastName),1)]),r("div",ub,[Y[7]||(Y[7]=r("span",{class:"info-label"},"Class",-1)),r("span",db,_(h.value),1)]),r("div",fb,[Y[8]||(Y[8]=r("span",{class:"info-label"},"Data Sharing",-1)),r("span",{class:ne(["info-value",(we=f.value)!=null&&we.dataConsent?"enabled":"disabled"])},_((Le=f.value)!=null&&Le.dataConsent?"Enabled":"Disabled"),3)]),r("div",vb,[Y[9]||(Y[9]=r("span",{class:"info-label"},"Member Since",-1)),r("span",mb,_(K((He=f.value)==null?void 0:He.createdAt)),1)]),r("div",{class:"button-row"},[r("button",{class:"secondary-btn",onClick:y}," Edit Profile "),r("button",{class:"secondary-btn",onClick:b}," Switch User ")]),((Ge=f.value)==null?void 0:Ge.role)!=="teacher"&&((ge=f.value)==null?void 0:ge.role)!=="admin"?(p(),g("button",{key:0,class:"become-teacher-btn",onClick:Y[0]||(Y[0]=Z=>{s("close"),s("become-teacher")})}," Become a Teacher ")):P("",!0)],64))]),v.value.length||m.value.length?(p(),g("section",_b,[Y[16]||(Y[16]=r("h3",null,"Assignments",-1)),v.value.length?(p(),g(q,{key:0},[Y[13]||(Y[13]=r("h4",null,"Active",-1)),r("div",wb,[(p(!0),g(q,null,ae(v.value,Z=>(p(),g("div",{key:Z.id,class:"assignment-item"},[r("div",Sb,[r("span",Cb,_(Z.name),1),r("span",$b,_(Z.completionPercent)+"%",1)]),r("div",kb,[r("div",{class:"progress-fill",style:Vt({width:`${Z.completionPercent}%`})},null,4)]),r("div",Ab,[Z.dueDate?(p(),g("span",xb," Due: "+_(K(Z.dueDate)),1)):P("",!0),r("span",null,_(Z.completedDeals)+"/"+_(Z.totalDeals)+" deals ",1)])]))),128))])],64)):P("",!0),m.value.length?(p(),g(q,{key:1},[Y[15]||(Y[15]=r("h4",null,"Completed",-1)),r("div",Nb,[(p(!0),g(q,null,ae(m.value,Z=>(p(),g("div",{key:Z.id,class:"assignment-item completed"},[r("div",Tb,[r("span",Ob,_(Z.name),1),Y[14]||(Y[14]=r("span",{class:"assignment-check"},"",-1))]),r("div",Ib," Completed "+_(K(Z.lastPracticedAt)),1)]))),128))])],64)):P("",!0)])):P("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(p(),g("section",Eb,[Y[17]||(Y[17]=r("h3",null,"My Classrooms",-1)),(p(!0),g(q,null,ae(f.value.classrooms,Z=>(p(),g("div",{key:Z,class:"classroom-row"},[r("span",Db,_(Z),1),r("button",{class:"leave-btn",disabled:R.value===Z,onClick:me=>V(Z)},_(R.value===Z?"Leaving...":"Leave"),9,Rb)]))),128))])):P("",!0),r("section",Pb,[Y[19]||(Y[19]=r("h3",null,"Display Options",-1)),r("div",Lb,[r("label",Bb,[r("input",{type:"checkbox",checked:D(o).showLoadPbnOption.value,onChange:Y[4]||(Y[4]=Z=>D(o).setUIPref("showLoadPbnOption",Z.target.checked))},null,40,Ub),Y[18]||(Y[18]=r("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),r("section",{class:"settings-section"},[Y[20]||(Y[20]=r("h3",null,"Data & Privacy",-1)),Y[21]||(Y[21]=r("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),r("button",{class:"remove-device-btn",onClick:ee}," Remove account from this device "),Y[22]||(Y[22]=r("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):P("",!0)}}},Fb=ue(Mb,[["__scopeId","data-v-57179473"]]),jb={class:"banner-content"},Hb={class:"assignment-info"},Kb={class:"assignment-title"},Vb={class:"assignment-name"},Wb={class:"assignment-meta"},Gb={class:"progress-text"},zb={class:"progress-bar"},Jb={key:0,class:"complete-badge"},qb={class:"return-text"},Yb={__name:"AssignmentBanner",setup(e){const t=oa(),s=T(()=>t.currentAssignment.value),n=T(()=>t.hasActiveAssignment.value),o=T(()=>t.assignmentProgress.value),a=T(()=>t.isAssignmentComplete.value),i=T(()=>t.inAssignmentMode.value),l=T(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const h=new Date(s.value.dueDate);return Math.ceil((h-new Date)/(1e3*60*60*24))}),c=T(()=>l.value===null?null:l.value<0?"Overdue":l.value===0?"Due today":l.value===1?"Due tomorrow":`Due in ${l.value} days`),u=T(()=>l.value===null?"":l.value<0?"overdue":l.value<=1?"urgent":l.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(h,v)=>{var m,y;return n.value&&i.value?(p(),g("div",{key:0,class:ne(["assignment-banner",{complete:a.value}])},[r("div",jb,[r("div",Hb,[r("div",Kb,[v[0]||(v[0]=r("span",{class:"assignment-label"},"Assignment:",-1)),r("span",Vb,_((m=s.value)==null?void 0:m.name),1)]),r("div",Wb,[r("span",Gb,_(o.value.completed)+" of "+_(o.value.total)+" deals ("+_(o.value.percent)+"%) ",1),c.value?(p(),g("span",{key:0,class:ne(["due-text",u.value])},_(c.value),3)):P("",!0)])]),r("div",zb,[r("div",{class:ne(["progress-fill",{complete:a.value}]),style:Vt({width:`${o.value.percent}%`})},null,6)]),r("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(p(),g("div",Jb," Complete! ")):P("",!0)],2)):s.value&&!i.value?(p(),g("div",{key:1,class:"return-banner",onClick:f},[v[1]||(v[1]=r("span",{class:"return-icon"},"",-1)),r("span",qb," Return to assignment: "+_((y=s.value)==null?void 0:y.name)+" ("+_(o.value.percent)+"% complete) ",1)])):P("",!0)}}},Xb=ue(Yb,[["__scopeId","data-v-a4095a6a"]]),Qb={key:0,class:"status-content"},Zb={key:1,class:"status-content offline"},e_={key:0,class:"badge"},t_={key:2,class:"status-content error"},s_={class:"status-text"},n_={key:0,class:"badge"},o_={key:3,class:"status-content pending"},a_={class:"status-text"},r_={key:4,class:"status-content synced"},l_={__name:"SyncStatus",setup(e){const t=ru(),s=ps(),n=T(()=>s.pendingCount.value),o=T(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=T(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function i(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function l(){t.retrySync()}return(c,u)=>(p(),g("div",{class:ne(["sync-status",a.value]),onClick:i},[D(t).isSyncing.value?(p(),g("div",Qb,[...u[0]||(u[0]=[r("span",{class:"spinner"},null,-1),r("span",{class:"status-text"},"Syncing...",-1)])])):D(t).isOffline.value?(p(),g("div",Zb,[u[1]||(u[1]=r("span",{class:"icon"},"",-1)),u[2]||(u[2]=r("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),g("span",e_,_(n.value),1)):P("",!0)])):D(t).hasError.value?(p(),g("div",t_,[u[3]||(u[3]=r("span",{class:"icon"},"",-1)),r("span",s_,_(o.value),1),n.value>0?(p(),g("span",n_,_(n.value),1)):P("",!0),r("button",{class:"retry-btn",onClick:Dt(l,["stop"])},"Retry")])):n.value>0?(p(),g("div",o_,[u[4]||(u[4]=r("span",{class:"icon"},"",-1)),r("span",a_,_(n.value)+" pending",1)])):(p(),g("div",r_,[...u[5]||(u[5]=[r("span",{class:"icon"},"",-1),r("span",{class:"status-text"},"Synced",-1)])]))],2))}},i_=ue(l_,[["__scopeId","data-v-8457149a"]]),c_={class:"progress-dashboard"},u_={class:"dashboard-header"},d_={key:0,class:"loading"},f_={key:1,class:"error-state"},v_={key:2,class:"empty-state"},m_={key:3,class:"dashboard-content"},p_={class:"day-header"},h_={class:"day-date"},g_={class:"day-summary"},y_={class:"day-lessons"},b_={class:"day-lesson-name"},__={class:"day-lesson-counts"},w_={key:0,class:"count count-correct"},S_={key:1,class:"count count-incorrect"},C_={class:"observation-total"},$_={class:"dashboard-actions"},k_={__name:"ProgressDashboard",emits:["close"],setup(e,{emit:t}){const s=Pr(),n=Qt();ct(async()=>{await s.fetchProgress()});async function o(){await s.fetchProgress(!0)}const a=T(()=>{const c=s.getObservationsByDate();return Object.keys(c).sort().reverse().slice(0,10).map(d=>{var y,O;const f=c[d],h={};for(const k of f){const b=k.deal_subfolder||((y=k.deal)==null?void 0:y.subfolder),C=k.deal_number??((O=k.deal)==null?void 0:O.deal_number);!b||C==null||(h[b]||(h[b]={}),h[b][C]||(h[b][C]=[]),h[b][C].push(k))}const v=Object.entries(h).map(([k,b])=>{let C=0,R=0;for(const V of Object.values(b))V.every(K=>K.correct)?C++:R++;return{subfolder:k,correctCount:C,incorrectCount:R}}).sort((k,b)=>i(k.subfolder).localeCompare(i(b.subfolder))),m=v.reduce((k,b)=>k+b.correctCount+b.incorrectCount,0);return{date:d,lessons:v,totalBoards:m}})});function i(c){return n.formatLessonName(c)}function l(c){const u=new Date(c+"T00:00:00"),d=new Date,f=new Date(d);f.setDate(f.getDate()-1);const h=d.toISOString().split("T")[0],v=f.toISOString().split("T")[0];return c===h?"Today":c===v?"Yesterday":u.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}return(c,u)=>(p(),g("div",c_,[r("header",u_,[u[3]||(u[3]=r("h2",null,"Your Progress",-1)),r("button",{class:"close-btn",onClick:u[0]||(u[0]=d=>c.$emit("close"))},"")]),D(s).isLoading.value?(p(),g("div",d_,[...u[4]||(u[4]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading your progress...",-1)])])):D(s).hasError.value?(p(),g("div",f_,[r("p",null,"Failed to load progress: "+_(D(s).error.value),1),r("button",{onClick:o},"Try Again")])):D(s).hasData.value?(p(),g("div",m_,[(p(!0),g(q,null,ae(a.value,d=>(p(),g("div",{key:d.date,class:"day-card"},[r("div",p_,[r("span",h_,_(l(d.date)),1),r("span",g_,_(d.totalBoards)+" board"+_(d.totalBoards!==1?"s":"")+" practiced",1)]),r("div",y_,[(p(!0),g(q,null,ae(d.lessons,f=>(p(),g("div",{key:f.subfolder,class:"day-lesson-row"},[r("span",b_,_(i(f.subfolder)),1),r("div",__,[f.correctCount?(p(),g("span",w_,_(f.correctCount),1)):P("",!0),f.incorrectCount?(p(),g("span",S_,_(f.incorrectCount),1)):P("",!0)])]))),128))])]))),128)),r("div",C_,_(D(s).totalObservations.value)+" observations",1),r("div",$_,[r("button",{class:"secondary-btn",onClick:o}," Refresh Data "),r("button",{class:"primary-btn",onClick:u[2]||(u[2]=d=>c.$emit("close"))}," Continue Practicing ")])])):(p(),g("div",v_,[u[5]||(u[5]=r("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=r("p",null,"Complete some practice deals to see your progress here!",-1)),r("button",{class:"primary-btn",onClick:u[1]||(u[1]=d=>c.$emit("close"))},"Start Practicing")]))]))}},A_=ue(k_,[["__scopeId","data-v-c70ddcce"]]),x_="test-user-mastery",N_="test-classroom",T_="Negative_Double",O_="competitive_bidding/negative_double";let or=0;function Ve({boardNumber:e,correct:t,timestamp:s}){return or++,{id:`mastery-test-${or}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:x_,skill_path:O_,correct:t,deal_subfolder:T_,deal_number:e,classroom:N_}}function dt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function go(e){return new Date(Date.now()-e*60*1e3).toISOString()}function I_(){or=0;const e=[];e.push(Ve({boardNumber:2,correct:!0,timestamp:dt(5)}),Ve({boardNumber:2,correct:!1,timestamp:dt(1)})),e.push(Ve({boardNumber:3,correct:!1,timestamp:go(30)}),Ve({boardNumber:3,correct:!0,timestamp:go(20)})),e.push(Ve({boardNumber:4,correct:!1,timestamp:go(90)}),Ve({boardNumber:4,correct:!0,timestamp:go(60)})),e.push(Ve({boardNumber:5,correct:!1,timestamp:dt(10)}),Ve({boardNumber:5,correct:!0,timestamp:dt(2)})),e.push(Ve({boardNumber:6,correct:!0,timestamp:dt(14)}),Ve({boardNumber:6,correct:!0,timestamp:dt(7)})),e.push(Ve({boardNumber:7,correct:!0,timestamp:dt(21)}),Ve({boardNumber:7,correct:!0,timestamp:dt(14)}),Ve({boardNumber:7,correct:!0,timestamp:dt(7)})),e.push(Ve({boardNumber:8,correct:!0,timestamp:dt(28)}),Ve({boardNumber:8,correct:!0,timestamp:dt(21)}),Ve({boardNumber:8,correct:!0,timestamp:dt(14)}),Ve({boardNumber:8,correct:!1,timestamp:dt(1)}));const t=[1,2,3,4,5].map(s=>({...Ve({boardNumber:s,correct:!0,timestamp:dt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const E_=["onClick","title"],D_={key:0,class:"medal gold-medal"},R_={key:1,class:"medal silver-medal"},P_={class:"board-num"},L_={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=pn(),a=T(()=>{const l=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const c=l.find(u=>u.boardNumber===s.forceRedBoard);c&&(c.status="red")}return l});function i(l){const c={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${l.boardNumber}: ${c[l.status]}${u[l.achievement]}`}return(l,c)=>e.boardNumbers.length>0?(p(),g("div",{key:0,class:ne(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),g("button",{key:0,class:"intro-btn",onClick:c[0]||(c[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):P("",!0),(p(!0),g(q,null,ae(a.value,(u,d)=>(p(),g("div",{key:u.boardNumber,class:ne(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:i(u)},[u.achievement==="gold"?(p(),g("span",D_,"")):u.achievement==="silver"?(p(),g("span",R_,"")):P("",!0),r("span",P_,_(u.boardNumber),1)],10,E_))),128))],2)):P("",!0)}},pu=ue(L_,[["__scopeId","data-v-820a0f0c"]]),B_={class:"accomplishments-view"},U_={class:"view-header"},M_={key:0,class:"user-selector"},F_=["value"],j_=["value"],H_={key:1,class:"loading-state"},K_={key:2,class:"error-state"},V_={key:3,class:"empty-state"},W_={key:4,class:"view-content"},G_={class:"controls-row"},z_={class:"tabs"},J_={key:0,class:"tab-content"},q_={key:0,class:"no-data"},Y_={key:1,class:"lesson-list"},X_={class:"lesson-header"},Q_={class:"lesson-name"},Z_={key:1,class:"tab-content"},e1={key:0,class:"no-data"},t1={key:1,class:"taxon-list"},s1={class:"taxon-header"},n1={class:"taxon-category"},o1={class:"taxon-name"},a1={class:"taxon-counts"},r1={class:"taxon-stat correct"},l1={class:"taxon-stat incorrect"},i1={class:"taxon-stat total"},c1={class:"view-actions"},u1={key:5,class:"test-mode-banner"},d1={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=Qt(),o=pn(),i=new URLSearchParams(window.location.search).get("test");ct(async()=>{i==="mastery"||i==="accomplishments"?n.enableTestMode(I_()):await n.initialize()});async function l(){await n.loadAccomplishments(!0)}async function c(h){await n.selectUser(h)}function u(h,v){s("navigate-to-deal",{subfolder:h,dealNumber:v})}const d=T(()=>{const h=o.getObservations();return o.extractLessonsFromObservations(h).map(m=>{const y=o.computeBoardMastery(h,m.subfolder,m.boardNumbers),O=o.computeLessonAchievement(y);return{...m,achievement:O.achievement}}).sort((m,y)=>f(m.subfolder).localeCompare(f(y.subfolder)))});it(d,h=>{o.fetchMissingBoardCounts(h.map(v=>v.subfolder))},{immediate:!0});function f(h){return n.formatLessonName(h)}return(h,v)=>(p(),g("div",B_,[r("header",U_,[v[6]||(v[6]=r("h2",null,"Accomplishments",-1)),r("button",{class:"close-btn",onClick:v[0]||(v[0]=m=>h.$emit("close"))},"")]),D(n).canViewOtherUsers.value?(p(),g("div",M_,[v[7]||(v[7]=r("label",{for:"user-select"},"Viewing:",-1)),r("select",{id:"user-select",value:D(n).selectedUserId.value,onChange:v[1]||(v[1]=m=>c(m.target.value))},[(p(!0),g(q,null,ae(D(n).accessibleUsers.value,m=>(p(),g("option",{key:m.id,value:m.id},_(m.name)+_(m.isSelf?" (You)":""),9,j_))),128))],40,F_)])):P("",!0),D(n).loading.value?(p(),g("div",H_,[...v[8]||(v[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading accomplishments...",-1)])])):D(n).error.value?(p(),g("div",K_,[r("p",null,"Failed to load: "+_(D(n).error.value),1),r("button",{onClick:l},"Try Again")])):D(n).hasData.value?(p(),g("div",W_,[r("div",G_,[r("div",z_,[r("button",{class:ne(["tab-btn",{active:D(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=m=>D(n).activeTab.value="lessons")}," Lessons ",2),r("button",{class:ne(["tab-btn",{active:D(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=m=>D(n).activeTab.value="taxons")}," Taxons ",2)])]),D(n).activeTab.value==="lessons"?(p(),g("div",J_,[d.value.length===0?(p(),g("div",q_," No lesson data available yet. ")):(p(),g("div",Y_,[(p(!0),g(q,null,ae(d.value,m=>(p(),g("div",{key:m.subfolder,class:"lesson-row"},[r("div",X_,[r("span",Q_,_(f(m.subfolder)),1),m.achievement!=="none"?(p(),g("span",{key:0,class:ne(["achievement-badge",m.achievement])},"  "+_(m.achievement==="gold"?"Gold":"Silver"),3)):P("",!0)]),de(pu,{boardNumbers:m.boardNumbers,lessonSubfolder:m.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(m.subfolder,m.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):P("",!0),D(n).activeTab.value==="taxons"?(p(),g("div",Z_,[D(n).filteredTaxonStats.value.length===0?(p(),g("div",e1," No skill data available yet. ")):(p(),g("div",t1,[(p(!0),g(q,null,ae(D(n).filteredTaxonStats.value,m=>(p(),g("div",{key:m.skillPath,class:"taxon-card"},[r("div",s1,[r("span",n1,_(m.categoryName),1),r("span",o1,_(m.skillName),1)]),r("div",a1,[r("span",r1,_(m.correct),1),r("span",l1,_(m.incorrect),1),r("span",i1,_(m.total)+" total",1)])]))),128))]))])):P("",!0),r("div",c1,[r("button",{class:"secondary-btn",onClick:l}," Refresh "),r("button",{class:"primary-btn",onClick:v[5]||(v[5]=m=>h.$emit("close"))}," Done ")])])):(p(),g("div",V_,[v[9]||(v[9]=r("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=r("p",null,"Complete some practice deals to see your accomplishments here!",-1)),r("button",{class:"primary-btn",onClick:v[2]||(v[2]=m=>h.$emit("close"))},"Start Practicing")])),D(n).useTestData.value?(p(),g("div",u1," Test Mode - Using Generated Data ")):P("",!0)]))}},f1=ue(d1,[["__scopeId","data-v-38e59c14"]]),lo="https://api.bridge-classroom.com/api",io="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ds=N([]),Mt=N([]),hu=N([]),dn=N(!1),fn=N(null),Fn=N(null),oi=N(!1),gu=N(null),yu=N(null),v1=N({start:null,end:null}),m1=2*60*1e3;async function p1(){const e=await fetch(`${lo}/users`,{headers:{"x-api-key":io}});if(!e.ok)throw new Error(`Failed to fetch students: ${e.status}`);return(await e.json()).users||[]}async function h1(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${lo}/observations${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":io}});if(!n.ok)throw new Error(`Failed to fetch observations: ${n.status}`);return(await n.json()).observations||[]}async function g1(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${lo}/observations/metadata${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":io}});if(!n.ok)throw new Error(`Failed to fetch observation metadata: ${n.status}`);return await n.json()}async function y1(e,t){try{return{...await Er(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}const Aa=new Map;async function b1(e,t){var o;if(Aa.has(e))return Aa.get(e);const s=hs(),n=((o=s.getViewerId)==null?void 0:o.call(s))||null;if(!n)return console.error("No viewer ID available"),null;try{const a=await fetch(`${lo}/grants?grantee_id=${n}`,{headers:{"x-api-key":io}});if(!a.ok)return console.error("Failed to fetch grants:",a.status),null;const{grants:i}=await a.json(),l=i.find(u=>u.grantor_id===e);if(!l)return console.warn("No grant found from student:",e),null;const c=await Mm(l.encrypted_payload,t);return Aa.set(e,c),c}catch(a){return console.error("Failed to get student secret key:",a),null}}async function bu(e=!1){if(!hs().isAuthenticated.value)return{success:!1,error:"Not authenticated"};if(!e&&Fn.value&&Date.now()-new Date(Fn.value).getTime()<m1)return{success:!0,cached:!0};dn.value=!0,fn.value=null;try{const[s,n]=await Promise.all([p1(),g1({limit:1e4})]);return ds.value=s,Mt.value=n.observations||[],Fn.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load dashboard:",s),fn.value=s.message,{success:!1,error:s.message}}finally{dn.value=!1}}async function _1(e){var n;const t=hs();if(!t.isAuthenticated.value)return{success:!1,error:"Not authenticated"};const s=((n=t.getPrivateKey)==null?void 0:n.call(t))||null;if(!s)return{success:!1,error:"Private key not available"};dn.value=!0,fn.value=null;try{const o=await b1(e,s);if(!o)return{success:!1,error:"No sharing grant from this student or failed to decrypt"};const i=(await h1({userId:e,limit:1e3})).map(u=>y1(u,o));return{success:!0,observations:(await Promise.all(i)).filter(u=>u!==null)}}catch(o){return console.error("Failed to load student observations:",o),fn.value=o.message,{success:!1,error:o.message}}finally{dn.value=!1}}function ai(){const e=new Map;for(const t of ds.value){const s=t.classroom||"ad-hoc";e.has(s)||e.set(s,{id:s,name:_u(s),studentCount:0}),e.get(s).studentCount++}return Array.from(e.values()).sort((t,s)=>t.name.localeCompare(s.name))}function _u(e){return!e||e==="ad-hoc"?"Ad-hoc Users":e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function w1(e=null){return e?ds.value.filter(t=>e==="ad-hoc"?!t.classroom:t.classroom===e):ds.value}function S1(e){const t=Mt.value.filter(u=>e==="ad-hoc"?!u.classroom:u.classroom===e),s=t.length,n=t.filter(u=>u.correct).length,o=new Set(t.map(u=>u.user_id)),a=new Date().toISOString().split("T")[0],i=t.filter(u=>{var d;return(d=u.timestamp)==null?void 0:d.startsWith(a)}),l=new Date(Date.now()-7*24*60*60*1e3).toISOString(),c=t.filter(u=>u.timestamp>=l);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,activeStudents:o.size,todayCount:i.length,weekCount:c.length}}function C1(e){var h;const t=Mt.value.filter(v=>v.user_id===e),s=t.length,n=t.filter(v=>v.correct).length,o=new Date().toISOString().split("T")[0],a=t.filter(v=>{var m;return(m=v.timestamp)==null?void 0:m.startsWith(o)}),i=new Date(Date.now()-7*24*60*60*1e3).toISOString(),l=t.filter(v=>v.timestamp>=i),c={};for(const v of t){const m=v.skill_path||"unknown";c[m]||(c[m]={total:0,correct:0}),c[m].total++,v.correct&&c[m].correct++}for(const v in c){const m=c[v];m.accuracy=m.total>0?Math.round(m.correct/m.total*100):0;const y=sa(v);m.name=y.name,m.category=y.category}const d=((h=[...t].sort((v,m)=>new Date(m.timestamp)-new Date(v.timestamp))[0])==null?void 0:h.timestamp)||null,f=$1(t);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,todayCount:a.length,todayCorrect:a.filter(v=>v.correct).length,weekCount:l.length,weekCorrect:l.filter(v=>v.correct).length,lastPractice:d,streak:f,skillStats:c}}function $1(e){const t=new Set(e.map(l=>{var c;return(c=l.timestamp)==null?void 0:c.split("T")[0]}).filter(Boolean)),s=Array.from(t).sort().reverse();if(s.length===0)return 0;const n=new Date().toISOString().split("T")[0],o=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(s[0]!==n&&s[0]!==o)return 0;let a=1,i=new Date(s[0]);for(let l=1;l<s.length;l++){const c=new Date(s[l]);if(Math.round((i-c)/(24*60*60*1e3))===1)a++,i=c;else break}return a}function k1(e,t=10){return Mt.value.filter(s=>s.user_id===e&&!s.correct).sort((s,n)=>new Date(n.timestamp)-new Date(s.timestamp)).slice(0,t)}async function A1(){if(oi.value)return;const e=hs();await e.initialize(),e.isAuthenticated.value&&await bu(),oi.value=!0}function x1(){ds.value=[],Mt.value=[],hu.value=[],Fn.value=null,gu.value=null,yu.value=null}const Co=N([]),wu=N([]),Su=N([]),ar=N(!1),xa=N(null),N1=2*60*1e3;async function T1(e,t=!1){if(!t&&xa.value&&Date.now()-new Date(xa.value).getTime()<N1)return{success:!0,cached:!0};ar.value=!0;try{const s=await fetch(`${lo}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":io}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Co.value=n.classrooms||[],wu.value=n.needs_attention||[],Su.value=n.recent_activity||[],xa.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{ar.value=!1}}function co(){const e=T(()=>ds.value.length),t=T(()=>Mt.value.length),s=T(()=>{const c=Mt.value.length;if(c===0)return 0;const u=Mt.value.filter(d=>d.correct).length;return Math.round(u/c*100)}),n=T(()=>ai()),o=T(()=>dn.value),a=T(()=>fn.value!==null),i=T(()=>ds.value.length>0||Mt.value.length>0),l=T(()=>({classroomCount:Co.value.length,openAssignmentCount:Co.value.reduce((c,u)=>c+(u.open_assignment_count||0),0)}));return{students:ds,observations:Mt,decryptedObservations:hu,loading:dn,error:fn,lastFetchedAt:Fn,selectedClassroom:gu,selectedStudent:yu,dateRange:v1,lobbyClassrooms:Co,needsAttention:wu,recentActivity:Su,lobbyLoading:ar,totalStudents:e,totalObservations:t,overallAccuracy:s,classrooms:n,isLoading:o,hasError:a,hasData:i,summaryStats:l,initialize:A1,loadDashboard:bu,loadStudentObservations:_1,loadTeacherLobbyData:T1,getClassrooms:ai,getStudentsByClassroom:w1,getClassroomStats:S1,getStudentStats:C1,getRecentErrors:k1,clearCache:x1,formatClassroomName:_u}}const O1={class:"teacher-login"},I1={class:"login-card"},E1={class:"form-group"},D1={class:"form-group"},R1={class:"key-options"},P1={key:1,class:"file-upload"},L1={for:"keyFile",class:"file-label"},B1={key:0},U1={key:1,class:"file-name"},M1={class:"form-group checkbox-group"},F1={class:"checkbox-label"},j1={key:0,class:"error-message"},H1=["disabled"],K1={key:0},V1={key:1},W1={class:"login-footer"},G1={__name:"TeacherLogin",emits:["authenticated","back"],setup(e,{emit:t}){const s=t,n=hs(),o=N(""),a=N(""),i=N("paste"),l=N(""),c=N(!1),u=N(!1),d=N("");function f(v){const m=v.target.files[0];if(!m)return;l.value=m.name;const y=new FileReader;y.onload=O=>{a.value=O.target.result},y.readAsText(m)}async function h(){if(d.value="",!o.value){d.value="Please enter the password";return}if(!a.value.trim()){d.value="Please provide your private key";return}u.value=!0;try{const v=await n.login(o.value,a.value.trim(),c.value);v.success?s("authenticated"):d.value=v.error||"Authentication failed"}catch(v){console.error("Login error:",v),d.value=v.message||"An unexpected error occurred"}finally{u.value=!1}}return(v,m)=>(p(),g("div",O1,[r("div",I1,[m[9]||(m[9]=r("h1",null,"Teacher Dashboard",-1)),m[10]||(m[10]=r("p",{class:"subtitle"},"Enter your credentials to view student progress",-1)),r("form",{onSubmit:Dt(h,["prevent"]),class:"login-form"},[r("div",E1,[m[6]||(m[6]=r("label",{for:"password"},"Password",-1)),Re(r("input",{id:"password",type:"password","onUpdate:modelValue":m[0]||(m[0]=y=>o.value=y),placeholder:"Enter teacher password",required:"",autocomplete:"current-password"},null,512),[[Nt,o.value]])]),r("div",D1,[m[7]||(m[7]=r("label",null,"Private Key",-1)),r("div",R1,[r("button",{type:"button",class:ne(["key-option",{active:i.value==="paste"}]),onClick:m[1]||(m[1]=y=>i.value="paste")}," Paste Key ",2),r("button",{type:"button",class:ne(["key-option",{active:i.value==="file"}]),onClick:m[2]||(m[2]=y=>i.value="file")}," Upload File ",2)]),i.value==="paste"?Re((p(),g("textarea",{key:0,"onUpdate:modelValue":m[3]||(m[3]=y=>a.value=y),placeholder:"Paste your private key here (PEM format or base64)",rows:"6",class:"key-textarea"},null,512)),[[Nt,a.value]]):(p(),g("div",P1,[r("input",{type:"file",id:"keyFile",accept:".pem,.key,.txt",onChange:f,class:"file-input"},null,32),r("label",L1,[l.value?(p(),g("span",U1,_(l.value),1)):(p(),g("span",B1,"Choose key file..."))])]))]),r("div",M1,[r("label",F1,[Re(r("input",{type:"checkbox","onUpdate:modelValue":m[4]||(m[4]=y=>c.value=y)},null,512),[[Zo,c.value]]),m[8]||(m[8]=r("span",null,"Remember my key on this device (encrypted)",-1))])]),d.value?(p(),g("div",j1,_(d.value),1)):P("",!0),r("button",{type:"submit",class:"login-btn",disabled:u.value},[u.value?(p(),g("span",K1,"Authenticating...")):(p(),g("span",V1,"Sign In"))],8,H1)],32),r("div",W1,[r("a",{href:"#",onClick:m[5]||(m[5]=Dt(y=>v.$emit("back"),["prevent"]))}," Back to Practice")])])]))}},z1=ue(G1,[["__scopeId","data-v-18d7c371"]]),Cu="bridge-classroom-anon-mode",J1="BridgeClassroom-Anon",Na=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],ri=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function q1(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function Y1(e,t){const s=`${J1}:${e} ${t}`,n=q1(s),o=Number(n%BigInt(Na.length)),a=Number(n/BigInt(Na.length)%BigInt(ri.length));return{firstName:Na[o],lastName:ri[a]}}const Cn=N(localStorage.getItem(Cu)==="true");function ca(){function e(){Cn.value=!Cn.value,localStorage.setItem(Cu,Cn.value.toString())}function t(o){return Cn.value?Y1(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:i}=t(o);return`${a} ${i}`}function n(o){const{firstName:a,lastName:i}=t(o),l=(a==null?void 0:a.charAt(0))||"",c=(i==null?void 0:i.charAt(0))||"";return(l+c).toUpperCase()||"?"}return{isAnonymized:Cn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const X1={class:"classroom-list"},Q1={class:"dashboard-header"},Z1={class:"header-left"},ew={key:0,class:"last-updated"},tw={class:"header-actions"},sw=["disabled"],nw={key:0,class:"loading"},ow={key:1,class:"error-state"},aw={key:2,class:"dashboard-content"},rw={class:"overall-stats"},lw={class:"stat-card"},iw={class:"stat-value"},cw={class:"stat-card"},uw={class:"stat-value"},dw={class:"stat-card accent"},fw={class:"stat-value"},vw={class:"stat-card"},mw={class:"stat-value"},pw={class:"classrooms-section"},hw={class:"classroom-grid"},gw=["onClick"],yw={class:"classroom-header"},bw={class:"student-count"},_w={class:"classroom-stats"},ww={class:"mini-stat"},Sw={class:"value"},Cw={class:"mini-stat"},$w={class:"mini-stat"},kw={class:"value"},Aw={class:"classroom-activity"},xw={key:0,class:"activity-badge"},Nw={key:1,class:"activity-badge week"},Tw={key:0,class:"empty-state"},Ow={key:0,class:"recent-section"},Iw={class:"recent-list"},Ew=["onClick"],Dw={class:"student-avatar"},Rw={class:"student-info"},Pw={class:"student-name"},Lw={class:"student-classroom"},Bw={class:"student-quick-stats"},Uw={__name:"ClassroomList",emits:["selectClassroom","selectStudent","logout"],setup(e,{emit:t}){const s=t,n=co(),o=hs(),a=ca();ct(async()=>{await n.initialize()});async function i(){await n.loadDashboard(!0)}function l(){o.logout(),n.clearCache(),s("logout")}function c(v){return n.getClassroomStats(v)}function u(v){return n.getStudentStats(v).accuracy}const d=T(()=>n.students.value.map(m=>({...m,stats:n.getStudentStats(m.id)})).filter(m=>m.stats.lastPractice).sort((m,y)=>new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice)).slice(0,5));function f(v){const m=new Date(v),O=new Date-m,k=Math.floor(O/6e4);if(k<1)return"just now";if(k<60)return`${k}m ago`;const b=Math.floor(k/60);return b<24?`${b}h ago`:m.toLocaleDateString()}function h(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(p(),g("div",X1,[r("header",Q1,[r("div",Z1,[m[1]||(m[1]=r("h1",null,"Teacher Dashboard",-1)),D(n).lastFetchedAt.value?(p(),g("span",ew," Updated "+_(f(D(n).lastFetchedAt.value)),1)):P("",!0)]),r("div",tw,[r("button",{class:ne(["anon-btn",{active:D(a).isAnonymized.value}]),onClick:m[0]||(m[0]=y=>D(a).toggleAnonymize())},_(D(a).isAnonymized.value?"Clear":"Anon"),3),r("button",{class:"refresh-btn",onClick:i,disabled:D(n).isLoading.value},_(D(n).isLoading.value?"Loading...":"Refresh"),9,sw),r("button",{class:"logout-btn",onClick:l},"Logout")])]),D(n).isLoading.value&&!D(n).hasData.value?(p(),g("div",nw,[...m[2]||(m[2]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard data...",-1)])])):D(n).hasError.value?(p(),g("div",ow,[r("p",null,"Failed to load dashboard: "+_(D(n).error.value),1),r("button",{onClick:i},"Try Again")])):(p(),g("div",aw,[r("section",rw,[r("div",lw,[r("div",iw,_(D(n).totalStudents.value),1),m[3]||(m[3]=r("div",{class:"stat-label"},"Total Students",-1))]),r("div",cw,[r("div",uw,_(D(n).totalObservations.value),1),m[4]||(m[4]=r("div",{class:"stat-label"},"Total Bids",-1))]),r("div",dw,[r("div",fw,_(D(n).overallAccuracy.value)+"%",1),m[5]||(m[5]=r("div",{class:"stat-label"},"Overall Accuracy",-1))]),r("div",vw,[r("div",mw,_(D(n).classrooms.value.length),1),m[6]||(m[6]=r("div",{class:"stat-label"},"Classrooms",-1))])]),r("section",pw,[m[11]||(m[11]=r("h2",null,"Classrooms",-1)),r("div",hw,[(p(!0),g(q,null,ae(D(n).classrooms.value,y=>(p(),g("div",{key:y.id,class:"classroom-card",onClick:O=>v.$emit("selectClassroom",y.id)},[r("div",yw,[r("h3",null,_(y.name),1),r("span",bw,_(y.studentCount)+" students",1)]),r("div",_w,[r("div",ww,[r("span",Sw,_(c(y.id).totalObservations),1),m[7]||(m[7]=r("span",{class:"label"},"bids",-1))]),r("div",Cw,[r("span",{class:ne(["value accuracy",h(c(y.id).accuracy)])},_(c(y.id).accuracy)+"% ",3),m[8]||(m[8]=r("span",{class:"label"},"accuracy",-1))]),r("div",$w,[r("span",kw,_(c(y.id).activeStudents),1),m[9]||(m[9]=r("span",{class:"label"},"active",-1))])]),r("div",Aw,[c(y.id).todayCount>0?(p(),g("span",xw,_(c(y.id).todayCount)+" today ",1)):P("",!0),c(y.id).weekCount>0?(p(),g("span",Nw,_(c(y.id).weekCount)+" this week ",1)):P("",!0)])],8,gw))),128))]),D(n).classrooms.value.length===0?(p(),g("div",Tw,[...m[10]||(m[10]=[r("p",null,"No classrooms found. Students will appear here once they register.",-1)])])):P("",!0)]),d.value.length>0?(p(),g("section",Ow,[m[12]||(m[12]=r("h2",null,"Recently Active Students",-1)),r("div",Iw,[(p(!0),g(q,null,ae(d.value,y=>(p(),g("div",{key:y.id,class:"recent-item",onClick:O=>v.$emit("selectStudent",y.id)},[r("div",Dw,_(D(a).displayInitials(y)),1),r("div",Rw,[r("span",Pw,_(D(a).displayFullName(y)),1),r("span",Lw,_(D(n).formatClassroomName(y.classroom)),1)]),r("div",Bw,[r("span",{class:ne(["accuracy",h(u(y.id))])},_(u(y.id))+"% ",3)])],8,Ew))),128))])])):P("",!0)]))]))}},Mw=ue(Uw,[["__scopeId","data-v-8c0b934b"]]),Fw={class:"classroom-detail"},jw={class:"detail-header"},Hw={class:"header-info"},Kw={class:"student-count"},Vw={class:"stats-summary"},Ww={class:"stat-card"},Gw={class:"stat-value"},zw={class:"stat-card accent"},Jw={class:"stat-value"},qw={class:"stat-card"},Yw={class:"stat-value"},Xw={class:"stat-card"},Qw={class:"stat-value"},Zw={key:0,class:"skill-profile"},e0={class:"skill-bars"},t0={class:"skill-info"},s0={class:"skill-name"},n0={class:"skill-count"},o0={class:"skill-bar-container"},a0={class:"skill-accuracy"},r0={class:"students-section"},l0={class:"section-header"},i0={class:"sort-controls"},c0={class:"student-grid"},u0=["onClick"],d0={class:"student-header"},f0={class:"student-avatar"},v0={class:"student-name-container"},m0={class:"student-name"},p0={key:0,class:"last-active"},h0={key:1,class:"last-active never"},g0={class:"student-stats"},y0={class:"stat"},b0={class:"value"},_0={class:"stat"},w0={class:"stat"},S0={class:"value"},C0={class:"student-activity"},$0={key:0,class:"activity today"},k0={key:1,class:"activity week"},A0={key:0,class:"empty-state"},x0={__name:"ClassroomDetail",props:{classroomId:{type:String,required:!0}},emits:["back","selectStudent"],setup(e){const t=e,s=co(),n=ca(),o=N("name"),a=T(()=>s.formatClassroomName(t.classroomId)),i=T(()=>s.getStudentsByClassroom(t.classroomId).map(m=>({...m,stats:s.getStudentStats(m.id)}))),l=T(()=>s.getClassroomStats(t.classroomId)),c=T(()=>{const v={},m=s.observations.value.filter(y=>t.classroomId==="ad-hoc"?!y.classroom:y.classroom===t.classroomId);for(const y of m){const O=y.skill_path||"unknown";if(!v[O]){const k=sa(O);v[O]={name:k.name,category:k.category,total:0,correct:0}}v[O].total++,y.correct&&v[O].correct++}for(const y in v){const O=v[y];O.accuracy=O.total>0?Math.round(O.correct/O.total*100):0}return v}),u=T(()=>{const v=Object.entries(c.value);return v.sort((m,y)=>y[1].total-m[1].total),Object.fromEntries(v.slice(0,8))}),d=T(()=>{const v=[...i.value];switch(o.value){case"accuracy":return v.sort((m,y)=>y.stats.accuracy-m.stats.accuracy);case"recent":return v.sort((m,y)=>m.stats.lastPractice?y.stats.lastPractice?new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice):-1:1);case"total":return v.sort((m,y)=>y.stats.totalObservations-m.stats.totalObservations);case"name":default:return v.sort((m,y)=>{const O=n.displayFullName(m).toLowerCase(),k=n.displayFullName(y).toLowerCase();return O.localeCompare(k)})}});function f(v){if(!v)return"";const m=new Date(v),y=new Date,O=new Date(y);return O.setDate(O.getDate()-1),m.toDateString()===y.toDateString()?"Today":m.toDateString()===O.toDateString()?"Yesterday":m.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function h(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(p(),g("div",Fw,[r("header",jw,[r("button",{class:"back-btn",onClick:m[0]||(m[0]=y=>v.$emit("back"))},"  Back to Classrooms "),r("div",Hw,[r("h1",null,_(a.value),1),r("span",Kw,_(i.value.length)+" students",1)])]),r("section",Vw,[r("div",Ww,[r("div",Gw,_(l.value.totalObservations),1),m[2]||(m[2]=r("div",{class:"stat-label"},"Total Bids",-1))]),r("div",zw,[r("div",Jw,_(l.value.accuracy)+"%",1),m[3]||(m[3]=r("div",{class:"stat-label"},"Class Accuracy",-1))]),r("div",qw,[r("div",Yw,_(l.value.activeStudents),1),m[4]||(m[4]=r("div",{class:"stat-label"},"Active Students",-1))]),r("div",Xw,[r("div",Qw,_(l.value.weekCount),1),m[5]||(m[5]=r("div",{class:"stat-label"},"This Week",-1))])]),Object.keys(c.value).length>0?(p(),g("section",Zw,[m[6]||(m[6]=r("h2",null,"Class Skill Profile",-1)),r("div",e0,[(p(!0),g(q,null,ae(u.value,(y,O)=>(p(),g("div",{key:O,class:"skill-bar-row"},[r("div",t0,[r("span",s0,_(y.name),1),r("span",n0,_(y.total)+" bids",1)]),r("div",o0,[r("div",{class:ne(["skill-bar",h(y.accuracy)]),style:Vt({width:y.accuracy+"%"})},null,6),r("span",a0,_(y.accuracy)+"%",1)])]))),128))])])):P("",!0),r("section",r0,[r("div",l0,[m[9]||(m[9]=r("h2",null,"Students",-1)),r("div",i0,[m[8]||(m[8]=r("label",null,"Sort by:",-1)),Re(r("select",{"onUpdate:modelValue":m[1]||(m[1]=y=>o.value=y)},[...m[7]||(m[7]=[r("option",{value:"name"},"Name",-1),r("option",{value:"accuracy"},"Accuracy",-1),r("option",{value:"recent"},"Recently Active",-1),r("option",{value:"total"},"Total Bids",-1)])],512),[[Bn,o.value]])])]),r("div",c0,[(p(!0),g(q,null,ae(d.value,y=>(p(),g("div",{key:y.id,class:"student-card",onClick:O=>v.$emit("selectStudent",y.id)},[r("div",d0,[r("div",f0,_(D(n).displayInitials(y)),1),r("div",v0,[r("span",m0,_(D(n).displayFullName(y)),1),y.stats.lastPractice?(p(),g("span",p0," Last active: "+_(f(y.stats.lastPractice)),1)):(p(),g("span",h0,"No practice yet"))])]),r("div",g0,[r("div",y0,[r("span",b0,_(y.stats.totalObservations),1),m[10]||(m[10]=r("span",{class:"label"},"bids",-1))]),r("div",_0,[r("span",{class:ne(["value",h(y.stats.accuracy)])},_(y.stats.accuracy)+"% ",3),m[11]||(m[11]=r("span",{class:"label"},"accuracy",-1))]),r("div",w0,[r("span",S0,_(y.stats.streak),1),m[12]||(m[12]=r("span",{class:"label"},"streak",-1))])]),r("div",C0,[y.stats.todayCount>0?(p(),g("span",$0,_(y.stats.todayCount)+" today ",1)):P("",!0),y.stats.weekCount>0?(p(),g("span",k0,_(y.stats.weekCount)+" this week ",1)):P("",!0)])],8,u0))),128))]),i.value.length===0?(p(),g("div",A0,[...m[13]||(m[13]=[r("p",null,"No students in this classroom yet.",-1)])])):P("",!0)])]))}},N0=ue(x0,[["__scopeId","data-v-b7ee4d85"]]),T0={class:"student-detail"},O0={class:"detail-header"},I0={class:"header-content"},E0={class:"student-avatar large"},D0={class:"header-info"},R0={class:"classroom"},P0={key:0,class:"last-active"},L0={key:0,class:"loading"},B0={key:1,class:"stats-overview"},U0={class:"stat-cards"},M0={class:"stat-card"},F0={class:"stat-value"},j0={class:"stat-card accent"},H0={class:"stat-value"},K0={class:"stat-card streak"},V0={class:"stat-value"},W0={class:"period-stats"},G0={class:"period"},z0={class:"period-numbers"},J0={class:"total"},q0={class:"correct"},Y0={key:0,class:"accuracy"},X0={class:"period"},Q0={class:"period-numbers"},Z0={class:"total"},eS={class:"correct"},tS={key:0,class:"accuracy"},sS={key:2,class:"skill-section"},nS={class:"skill-list"},oS={class:"skill-info"},aS={class:"skill-name"},rS={class:"skill-category"},lS={class:"skill-bar-container"},iS={class:"skill-stats"},cS={class:"count"},uS={key:3,class:"errors-section"},dS={class:"error-list"},fS={class:"error-header"},vS={class:"error-skill"},mS={class:"error-date"},pS={key:0,class:"error-details"},hS={class:"bid-comparison"},gS={class:"bid wrong"},yS={class:"bid correct"},bS={key:1,class:"error-context"},_S={key:4,class:"recommendations-section"},wS={class:"recommendation-list"},SS={class:"rec-skill"},CS={class:"rec-reason"},$S={class:"rec-stats"},kS={__name:"StudentDetail",props:{studentId:{type:String,required:!0}},emits:["back"],setup(e){const t=e,s=co(),n=ca(),o=N(!1),a=T(()=>s.students.value.find(k=>k.id===t.studentId)),i=T(()=>a.value?n.displayFullName(a.value):"Unknown Student"),l=T(()=>a.value?n.displayInitials(a.value):"?"),c=T(()=>{var k;return s.formatClassroomName((k=a.value)==null?void 0:k.classroom)}),u=T(()=>s.getStudentStats(t.studentId)),d=T(()=>{const k=u.value.skillStats||{};return Object.entries(k).map(([b,C])=>({path:b,...C})).filter(b=>b.path!=="unknown"&&b.path!=="unknown/unknown").sort((b,C)=>C.total-b.total)}),f=T(()=>s.getRecentErrors(t.studentId,5)),h=T(()=>{const k=d.value,b=[];for(const C of k)C.total>=3&&C.accuracy<60&&b.push({skill:C.path,name:C.name,accuracy:C.accuracy,total:C.total,reason:C.accuracy<40?"Struggling with this skill":"Room for improvement"});return b.sort((C,R)=>C.accuracy-R.accuracy).slice(0,3)});ct(async()=>{await v()}),it(()=>t.studentId,async()=>{await v()});async function v(){o.value=!0;try{}finally{o.value=!1}}function m(k){if(!k)return"";const b=new Date(k),C=new Date,R=new Date(C);return R.setDate(R.getDate()-1),b.toDateString()===C.toDateString()?"Today at "+b.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):b.toDateString()===R.toDateString()?"Yesterday":b.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function y(k){return k>=80?"excellent":k>=60?"good":k>=40?"fair":"needs-work"}function O(k){return!k||k==="unknown"?"General Practice":sa(k).name}return(k,b)=>(p(),g("div",T0,[r("header",O0,[r("button",{class:"back-btn",onClick:b[0]||(b[0]=C=>k.$emit("back"))},"  Back "),r("div",I0,[r("div",E0,_(l.value),1),r("div",D0,[r("h1",null,_(i.value),1),r("span",R0,_(c.value),1),u.value.lastPractice?(p(),g("span",P0," Last active: "+_(m(u.value.lastPractice)),1)):P("",!0)])])]),o.value?(p(),g("div",L0,[...b[1]||(b[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):(p(),g("section",B0,[r("div",U0,[r("div",M0,[r("div",F0,_(u.value.totalObservations),1),b[2]||(b[2]=r("div",{class:"stat-label"},"Total Bids",-1))]),r("div",j0,[r("div",H0,_(u.value.accuracy)+"%",1),b[3]||(b[3]=r("div",{class:"stat-label"},"Overall Accuracy",-1))]),r("div",K0,[r("div",V0,_(u.value.streak),1),b[4]||(b[4]=r("div",{class:"stat-label"},"Day Streak",-1))])]),r("div",W0,[r("div",G0,[b[5]||(b[5]=r("h4",null,"Today",-1)),r("div",z0,[r("span",J0,_(u.value.todayCount)+" bids",1),r("span",q0,_(u.value.todayCorrect)+" correct",1),u.value.todayCount>0?(p(),g("span",Y0,_(Math.round(u.value.todayCorrect/u.value.todayCount*100))+"% ",1)):P("",!0)])]),r("div",X0,[b[6]||(b[6]=r("h4",null,"This Week",-1)),r("div",Q0,[r("span",Z0,_(u.value.weekCount)+" bids",1),r("span",eS,_(u.value.weekCorrect)+" correct",1),u.value.weekCount>0?(p(),g("span",tS,_(Math.round(u.value.weekCorrect/u.value.weekCount*100))+"% ",1)):P("",!0)])])])])),d.value.length>0?(p(),g("section",sS,[b[7]||(b[7]=r("h2",null,"Skill Breakdown",-1)),r("div",nS,[(p(!0),g(q,null,ae(d.value,C=>(p(),g("div",{key:C.path,class:"skill-row"},[r("div",oS,[r("span",aS,_(C.name),1),r("span",rS,_(C.category),1)]),r("div",lS,[r("div",{class:ne(["skill-bar",y(C.accuracy)]),style:Vt({width:C.accuracy+"%"})},null,6)]),r("div",iS,[r("span",{class:ne(["accuracy",y(C.accuracy)])},_(C.accuracy)+"% ",3),r("span",cS,_(C.total)+" bids",1)])]))),128))])])):P("",!0),f.value.length>0?(p(),g("section",uS,[b[9]||(b[9]=r("h2",null,"Recent Errors",-1)),b[10]||(b[10]=r("p",{class:"section-description"},"These are the most recent incorrect bids that may need review.",-1)),r("div",dS,[(p(!0),g(q,null,ae(f.value,C=>(p(),g("div",{key:C.id,class:"error-card"},[r("div",fS,[r("span",vS,_(O(C.skill_path)),1),r("span",mS,_(m(C.timestamp)),1)]),C.student_bid||C.expected_bid?(p(),g("div",pS,[r("div",hS,[r("span",gS,_(C.student_bid||"?"),1),b[8]||(b[8]=r("span",{class:"arrow"},"",-1)),r("span",yS,_(C.expected_bid||"?"),1)])])):P("",!0),C.deal_subfolder?(p(),g("div",bS," Deal #"+_(C.deal_number||"?")+" from "+_(C.deal_subfolder),1)):P("",!0)]))),128))])])):P("",!0),h.value.length>0?(p(),g("section",_S,[b[11]||(b[11]=r("h2",null,"Recommended Practice",-1)),r("div",wS,[(p(!0),g(q,null,ae(h.value,C=>(p(),g("div",{key:C.skill,class:"recommendation-card"},[r("div",SS,_(C.name),1),r("div",CS,_(C.reason),1),r("div",$S,[r("span",null,_(C.accuracy)+"% accuracy",1),r("span",null,_(C.total)+" attempts",1)])]))),128))])])):P("",!0)]))}},AS=ue(kS,[["__scopeId","data-v-5f3f434e"]]),xS={class:"teacher-dashboard"},NS={__name:"TeacherDashboard",emits:["close"],setup(e){const t=hs(),s=co(),n=N("classrooms"),o=N(null),a=N(null),i=N(null);ct(async()=>{await t.initialize()});function l(){n.value="classrooms",s.loadDashboard()}function c(){n.value="classrooms",o.value=null,a.value=null}function u(h){o.value=h,i.value="classrooms",n.value="classroom"}function d(h){a.value=h,i.value=n.value,n.value="student"}function f(){i.value==="classroom"?n.value="classroom":n.value="classrooms"}return(h,v)=>(p(),g("div",xS,[D(t).isAuthenticated.value?(p(),g(q,{key:1},[n.value==="classrooms"?(p(),Ae(Mw,{key:0,onSelectClassroom:u,onSelectStudent:d,onLogout:c})):n.value==="classroom"?(p(),Ae(N0,{key:1,classroomId:o.value,onBack:v[1]||(v[1]=m=>n.value="classrooms"),onSelectStudent:d},null,8,["classroomId"])):n.value==="student"?(p(),Ae(AS,{key:2,studentId:a.value,onBack:f},null,8,["studentId"])):P("",!0)],64)):(p(),Ae(z1,{key:0,onAuthenticated:l,onBack:v[0]||(v[0]=m=>h.$emit("close"))}))]))}},TS=ue(NS,[["__scopeId","data-v-50a55ca1"]]),OS={class:"teacher-student-list"},IS={class:"teacher-header"},ES={class:"header-actions"},DS=["value"],RS={key:0,class:"loading-state"},PS={key:1,class:"error-state"},LS={key:2,class:"empty-state"},BS={key:3,class:"empty-state"},US={key:4,class:"student-table-wrap"},MS={class:"student-table"},FS=["onClick"],jS={class:"col-name"},HS={class:"student-name-cell"},KS={class:"avatar"},VS={class:"col-mastery"},WS={class:"mastery-pills"},GS={key:0,class:"pill pill-green"},zS={key:1,class:"pill pill-orange"},JS={key:2,class:"pill pill-yellow"},qS={key:3,class:"pill pill-red"},YS={key:4,class:"no-data-label"},XS={class:"col-active"},QS={class:"col-lessons"},ZS={class:"recent-lessons"},eC={key:0,class:"no-data-label"},tC={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=ia(),n=ro(),o=Me(),a=ca(),i=N("all"),l=N({});ct(async()=>{await s.loadAllStudentSummaries(),await c()});async function c(){const k=o.currentUser.value;if(!k)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(k.id);const b={};await Promise.all(n.teacherClassrooms.value.map(async C=>{const R=await n.fetchClassroomDetail(C.id);R!=null&&R.success&&(b[C.id]=new Set(R.classroom.members.map(V=>V.student_id)))})),l.value=b}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await c()}const d=T(()=>{const k=new Set;for(const b of Object.values(l.value))for(const C of b)k.add(C);return k}),f=T(()=>{const k=s.students.value;if(i.value==="all")return k;if(i.value==="none")return k.filter(C=>!d.value.has(C.id));const b=l.value[i.value];return b?k.filter(C=>b.has(C.id)):k}),h=T(()=>[...f.value].sort((k,b)=>{var V,ee;const C=((V=v.value[k.id])==null?void 0:V.lastObservationTime)||"",R=((ee=v.value[b.id])==null?void 0:ee.lastObservationTime)||"";return R!==C?R.localeCompare(C):y(k).localeCompare(y(b))})),v=T(()=>{const k={};for(const b of s.students.value)k[b.id]=s.getStudentMasterySummary(b.id);return k}),m=T(()=>{const k={};for(const b of s.students.value)k[b.id]=s.getStudentRecentLessons(b.id);return k});function y(k){return a.displayFullName(k)}function O(k){return a.displayInitials(k)}return(k,b)=>(p(),g("div",OS,[r("header",IS,[b[5]||(b[5]=r("h2",null,"My Students",-1)),r("div",ES,[D(n).teacherClassrooms.value.length?Re((p(),g("select",{key:0,"onUpdate:modelValue":b[0]||(b[0]=C=>i.value=C),class:"filter-select"},[b[3]||(b[3]=r("option",{value:"all"},"All Students",-1)),(p(!0),g(q,null,ae(D(n).teacherClassrooms.value,C=>(p(),g("option",{key:C.id,value:C.id},_(C.name),9,DS))),128)),b[4]||(b[4]=r("option",{value:"none"},"No Classroom",-1))],512)),[[Bn,i.value]]):P("",!0),r("button",{class:ne(["anon-btn",{active:D(a).isAnonymized.value}]),onClick:b[1]||(b[1]=C=>D(a).toggleAnonymize())},_(D(a).isAnonymized.value?"Clear":"Anon"),3),r("button",{class:"secondary-btn",onClick:u},"Refresh"),r("button",{class:"secondary-btn",onClick:b[2]||(b[2]=C=>k.$emit("close"))},"Back")])]),D(s).loading.value?(p(),g("div",RS,[...b[6]||(b[6]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):D(s).error.value?(p(),g("div",PS,[r("p",null,"Failed to load: "+_(D(s).error.value),1),r("button",{onClick:u},"Try Again")])):D(s).students.value.length===0?(p(),g("div",LS,[...b[7]||(b[7]=[r("h3",null,"No Students Yet",-1),r("p",null,"Students will appear here once they register and grant you access.",-1)])])):h.value.length===0?(p(),g("div",BS,[...b[8]||(b[8]=[r("h3",null,"No Matching Students",-1),r("p",null,"No students match the selected filter.",-1)])])):(p(),g("div",US,[r("table",MS,[b[9]||(b[9]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-mastery"},"Mastery"),r("th",{class:"col-active"},"Last Active"),r("th",{class:"col-lessons"},"Recent Lessons")])],-1)),r("tbody",null,[(p(!0),g(q,null,ae(h.value,C=>{var R,V,ee,K,X,Y,ve;return p(),g("tr",{key:C.id,class:"student-row",onClick:fe=>k.$emit("select-student",C.id,y(C))},[r("td",jS,[r("div",HS,[r("div",KS,_(O(C)),1),r("span",null,_(y(C)),1)])]),r("td",VS,[r("div",WS,[(R=v.value[C.id])!=null&&R.green?(p(),g("span",GS,_(v.value[C.id].green),1)):P("",!0),(V=v.value[C.id])!=null&&V.orange?(p(),g("span",zS,_(v.value[C.id].orange),1)):P("",!0),(ee=v.value[C.id])!=null&&ee.yellow?(p(),g("span",JS,_(v.value[C.id].yellow),1)):P("",!0),(K=v.value[C.id])!=null&&K.red?(p(),g("span",qS,_(v.value[C.id].red),1)):P("",!0),(X=v.value[C.id])!=null&&X.total?P("",!0):(p(),g("span",YS,"No data"))])]),r("td",XS,_(D(s).formatTimeSince((Y=v.value[C.id])==null?void 0:Y.lastObservationTime)),1),r("td",QS,[r("div",ZS,[(p(!0),g(q,null,ae(m.value[C.id],(fe,we)=>(p(),g("span",{key:we,class:"lesson-tag"},_(fe),1))),128)),(ve=m.value[C.id])!=null&&ve.length?P("",!0):(p(),g("span",eC,"-"))])])],8,FS)}),128))])])]))]))}},sC=ue(tC,[["__scopeId","data-v-dd6d8e66"]]),nC={class:"teacher-student-detail"},oC={class:"detail-header"},aC={class:"student-info"},rC={class:"avatar"},lC={class:"last-active"},iC={key:0,class:"loading-state"},cC={key:1,class:"detail-content"},uC={key:0,class:"stats-row"},dC={class:"stat stat-green"},fC={key:0,class:"stat stat-orange"},vC={key:1,class:"stat stat-yellow"},mC={key:2,class:"stat stat-red"},pC={key:3,class:"stat stat-grey"},hC={class:"mastery-section"},gC={key:0,class:"no-data"},yC={key:1,class:"lesson-list"},bC={class:"lesson-header"},_C=["onClick"],wC={class:"mastery-strip"},SC=["title","onClick"],CC={key:0,class:"medal gold-medal"},$C={key:1,class:"medal silver-medal"},kC={class:"board-num"},AC={class:"progress-section"},xC={key:0,class:"no-data"},NC={key:1},TC={class:"day-header"},OC={class:"day-date"},IC={class:"day-summary"},EC={class:"day-lessons"},DC=["onClick"],RC={class:"day-lesson-counts"},PC={key:0,class:"count count-green"},LC={key:1,class:"count count-yellow"},BC={key:2,class:"count count-orange"},UC={key:3,class:"count count-red"},MC={class:"observation-total"},FC={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=ia(),a=pn(),i=Qt(),l=N(!1),c=T(()=>s.studentName.split(" ").map(C=>C[0]||"").join("").toUpperCase());ct(async()=>{o.studentObservations.value[s.studentId]||(l.value=!0,await o.fetchStudentObservations(s.studentId),l.value=!1)});const u=T(()=>o.studentObservations.value[s.studentId]||[]),d=T(()=>o.getStudentMasterySummary(s.studentId)),f=T(()=>o.formatTimeSince(d.value.lastObservationTime)),h=T(()=>{const b=u.value;return b.length===0?[]:a.extractLessonsFromObservations(b).map(R=>{const V=a.computeBoardMastery(b,R.subfolder,R.boardNumbers),ee=a.computeLessonAchievement(V);return{...R,boardMastery:V,achievement:ee.achievement}}).sort((R,V)=>m(R.subfolder).localeCompare(m(V.subfolder)))});it(h,b=>{a.fetchMissingBoardCounts(b.map(C=>C.subfolder))},{immediate:!0});const v=T(()=>{const b=u.value;if(b.length===0)return[];const C={};for(const V of b){const ee=y(V.timestamp);C[ee]||(C[ee]=[]),C[ee].push(V)}return Object.keys(C).sort().reverse().slice(0,10).map(V=>{const ee=C[V],K={};for(const ve of ee){const fe=ve.deal_subfolder,we=ve.deal_number;!fe||we==null||(K[fe]||(K[fe]={}),K[fe][we]||(K[fe][we]=[]),K[fe][we].push(ve))}const X=Object.entries(K).map(([ve,fe])=>{const we={green:0,yellow:0,orange:0,red:0};for(const[Le,He]of Object.entries(fe)){const Ge=b.filter(Z=>Z.deal_subfolder===ve&&Z.deal_number===Number(Le)).sort((Z,me)=>Z.timestamp.localeCompare(me.timestamp)),ge=a.calculateCurrentStatus(Ge);we[ge]!==void 0?we[ge]++:we.green++}return{subfolder:ve,...we}}).sort((ve,fe)=>m(ve.subfolder).localeCompare(m(fe.subfolder))),Y=X.reduce((ve,fe)=>ve+fe.green+fe.yellow+fe.orange+fe.red,0);return{date:V,lessons:X,totalBoards:Y}})});function m(b){return i.formatLessonName(b)}function y(b){const C=new Date(b),R=C.getFullYear(),V=String(C.getMonth()+1).padStart(2,"0"),ee=String(C.getDate()).padStart(2,"0");return`${R}-${V}-${ee}`}function O(b){const C=new Date(b+"T00:00:00"),R=new Date,V=y(R),ee=new Date(R);ee.setDate(ee.getDate()-1);const K=y(ee);return b===V?"Today":b===K?"Yesterday":C.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function k(b){const C={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${b.boardNumber}: ${C[b.status]}`}return(b,C)=>(p(),g("div",nC,[r("header",oC,[r("button",{class:"back-btn",onClick:C[0]||(C[0]=R=>b.$emit("back"))}," Students"),r("div",aC,[r("div",rC,_(c.value),1),r("div",null,[r("h2",null,_(e.studentName),1),r("span",lC,"Last active: "+_(f.value),1)])])]),l.value?(p(),g("div",iC,[...C[1]||(C[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):(p(),g("div",cC,[d.value.total>0?(p(),g("div",uC,[r("div",dC,_(d.value.green)+" Green",1),d.value.orange?(p(),g("div",fC,_(d.value.orange)+" Orange",1)):P("",!0),d.value.yellow?(p(),g("div",vC,_(d.value.yellow)+" Yellow",1)):P("",!0),d.value.red?(p(),g("div",mC,_(d.value.red)+" Red",1)):P("",!0),d.value.grey?(p(),g("div",pC,_(d.value.grey)+" Grey",1)):P("",!0)])):P("",!0),r("section",hC,[C[2]||(C[2]=r("h3",null,"Lesson Mastery",-1)),h.value.length===0?(p(),g("div",gC," No lesson data available yet. ")):(p(),g("div",yC,[(p(!0),g(q,null,ae(h.value,R=>(p(),g("div",{key:R.subfolder,class:"lesson-row"},[r("div",bC,[r("button",{class:"lesson-name lesson-link",onClick:V=>n("navigate-to-lesson",R.subfolder)},_(m(R.subfolder)),9,_C),R.achievement!=="none"?(p(),g("span",{key:0,class:ne(["achievement-badge",R.achievement])},"  "+_(R.achievement==="gold"?"Gold":"Silver"),3)):P("",!0)]),r("div",wC,[(p(!0),g(q,null,ae(R.boardMastery,V=>(p(),g("div",{key:V.boardNumber,class:ne(["board-circle board-clickable","status-"+V.status]),title:k(V),onClick:ee=>n("navigate-to-lesson",R.subfolder,V.boardNumber)},[V.achievement==="gold"?(p(),g("span",CC,"")):V.achievement==="silver"?(p(),g("span",$C,"")):P("",!0),r("span",kC,_(V.boardNumber),1)],10,SC))),128))])]))),128))]))]),r("section",AC,[C[3]||(C[3]=r("h3",null,"Recent Activity",-1)),v.value.length===0?(p(),g("div",xC," No activity recorded yet. ")):(p(),g("div",NC,[(p(!0),g(q,null,ae(v.value,R=>(p(),g("div",{key:R.date,class:"day-card"},[r("div",TC,[r("span",OC,_(O(R.date)),1),r("span",IC,_(R.totalBoards)+" board"+_(R.totalBoards!==1?"s":""),1)]),r("div",EC,[(p(!0),g(q,null,ae(R.lessons,V=>(p(),g("div",{key:V.subfolder,class:"day-lesson-row"},[r("button",{class:"day-lesson-name lesson-link",onClick:ee=>n("navigate-to-lesson",V.subfolder)},_(m(V.subfolder)),9,DC),r("div",RC,[V.green?(p(),g("span",PC,_(V.green),1)):P("",!0),V.yellow?(p(),g("span",LC,_(V.yellow),1)):P("",!0),V.orange?(p(),g("span",BC,_(V.orange),1)):P("",!0),V.red?(p(),g("span",UC,_(V.red),1)):P("",!0)])]))),128))])]))),128))]))]),r("div",MC,_(u.value.length)+" observations",1)]))]))}},jC=ue(FC,[["__scopeId","data-v-356ee2ef"]]),HC={key:0,class:"lesson-browser-loading"},KC={key:1,class:"lesson-browser-error"},VC={class:"lesson-browser"},WC={class:"browser-header"},GC={class:"browser-content"},zC=["onClick"],JC={class:"expand-icon"},qC={class:"category-name"},YC={class:"category-count"},XC={key:0,class:"lesson-list"},QC=["onClick"],ZC={class:"lesson-name"},e$={class:"lesson-description"},t$={key:0,class:"error-message"},s$={key:3,class:"lesson-browser-inline"},n$={class:"browser-content-inline"},o$=["onClick"],a$={class:"expand-icon"},r$={class:"category-name"},l$={class:"category-count"},i$={key:0,class:"lesson-list"},c$=["onClick"],u$={class:"lesson-name"},d$={class:"lesson-description"},f$={key:0,class:"error-message-inline"},v$={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=N(null),a=N(null),i=N(!1),l=N([]),c=N(null),u=N(null);it(()=>[s.visible,s.collection],([m,y])=>{m&&y&&!o.value&&d()},{immediate:!0});async function d(){var m;if(!((m=s.collection)!=null&&m.tocUrl)){a.value="No collection specified";return}i.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{i.value=!1}}function f(m){const y=l.value.indexOf(m);y>=0?l.value.splice(y,1):l.value.push(m)}function h(m){return m.includes("/")?m.split("/").pop():m}async function v(m,y){var O;u.value=null,c.value=m.id;try{const k=((O=s.collection)==null?void 0:O.baseUrl)||"",b=h(m.id),C=`${k}/${b}.pbn`,R=await fetch(C);if(!R.ok)throw new Error(`Failed to load lesson: ${R.statusText}`);const V=await R.text();n("load",{subfolder:m.id,name:m.name,category:y.name,content:V}),s.inline||n("close")}catch(k){console.error("Error loading lesson:",k),u.value=`Could not load "${m.name}". The lesson may not be available yet.`}finally{c.value=null}}return(m,y)=>e.visible&&i.value?(p(),g("div",HC,[...y[2]||(y[2]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(p(),g("div",KC,[r("p",null,_(a.value),1),r("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),g("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Dt(O=>m.$emit("close"),["self"]))},[r("div",VC,[r("div",WC,[r("h2",null,_(o.value.name),1),r("button",{class:"close-btn",onClick:y[0]||(y[0]=O=>m.$emit("close"))},"")]),r("div",GC,[(p(!0),g(q,null,ae(o.value.categories,O=>(p(),g("div",{key:O.id,class:"category-section"},[r("button",{class:ne(["category-header",{expanded:l.value.includes(O.id)}]),onClick:k=>f(O.id)},[r("span",JC,_(l.value.includes(O.id)?"":""),1),r("span",qC,_(O.name),1),r("span",YC,_(O.lessons.length)+" lessons",1)],10,zC),l.value.includes(O.id)?(p(),g("div",XC,[(p(!0),g(q,null,ae(O.lessons,k=>(p(),g("button",{key:k.id,class:ne(["lesson-item",{loading:c.value===k.id}]),onClick:b=>v(k,O)},[r("span",ZC,_(k.name),1),r("span",e$,_(k.description),1)],10,QC))),128))])):P("",!0)]))),128))]),u.value?(p(),g("div",t$,_(u.value),1)):P("",!0)])])):e.visible&&e.inline&&o.value?(p(),g("div",s$,[r("div",n$,[(p(!0),g(q,null,ae(o.value.categories,O=>(p(),g("div",{key:O.id,class:"category-section"},[r("button",{class:ne(["category-header",{expanded:l.value.includes(O.id)}]),onClick:k=>f(O.id)},[r("span",a$,_(l.value.includes(O.id)?"":""),1),r("span",r$,_(O.name),1),r("span",l$,_(O.lessons.length)+" lessons",1)],10,o$),l.value.includes(O.id)?(p(),g("div",i$,[(p(!0),g(q,null,ae(O.lessons,k=>(p(),g("button",{key:k.id,class:ne(["lesson-item",{loading:c.value===k.id}]),onClick:b=>v(k,O)},[r("span",u$,_(k.name),1),r("span",d$,_(k.description),1)],10,c$))),128))])):P("",!0)]))),128))]),u.value?(p(),g("div",f$,_(u.value),1)):P("",!0)])):P("",!0)}},m$=ue(v$,[["__scopeId","data-v-384a9c63"]]),p$={class:"viewer-controls"},h$={class:"viewer-body"},g$={key:0,class:"interaction-overlay"},y$={key:1,class:"viewer-loading"},b$={key:2,class:"viewer-error"},_$=["src"],w$={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=jt({x:80,y:80}),n=jt({w:550,h:700}),o=N(!1),a=jt({x:0,y:0}),i=N(null),l=N(!1),c=N(null),u=T(()=>i.value?i.value+"#navpanes=0&toolbar=0":null);async function d(b){if(f(),!!b){l.value=!0,c.value=null;try{const C=await fetch(b);if(!C.ok)throw new Error("Failed to load PDF");const R=await C.blob(),V=new Blob([R],{type:"application/pdf"});i.value=URL.createObjectURL(V)}catch(C){c.value="Could not load PDF",console.error("Failed to fetch intro PDF:",C)}finally{l.value=!1}}}function f(){i.value&&(URL.revokeObjectURL(i.value),i.value=null)}function h(){i.value&&window.open(i.value,"_blank")}it(()=>[t.visible,t.url],([b,C])=>{b&&C?d(C):b||f()},{immediate:!0}),Ki(f);function v(b){b.target.closest("button")||(o.value=!0,a.x=b.clientX-s.x,a.y=b.clientY-s.y,document.addEventListener("pointermove",m),document.addEventListener("pointerup",k))}function m(b){s.x=Math.max(0,b.clientX-a.x),s.y=Math.max(0,b.clientY-a.y)}function y(b){o.value=!0,a.x=b.clientX,a.y=b.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",O),document.addEventListener("pointerup",k)}function O(b){n.w=Math.max(320,a.startW+(b.clientX-a.x)),n.h=Math.max(300,a.startH+(b.clientY-a.y))}function k(){o.value=!1,document.removeEventListener("pointermove",m),document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",k)}return(b,C)=>e.visible?(p(),g("div",{key:0,class:"intro-pdf-viewer",style:Vt({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[r("div",{class:"viewer-titlebar",onPointerdown:v},[C[1]||(C[1]=r("span",{class:"viewer-title"},"Lesson Introduction",-1)),r("div",p$,[r("button",{class:"viewer-btn",onClick:h,title:"Open in new tab"},""),r("button",{class:"viewer-btn close",onClick:C[0]||(C[0]=R=>b.$emit("close")),title:"Close"},"")])],32),r("div",h$,[o.value?(p(),g("div",g$)):P("",!0),l.value?(p(),g("div",y$,"Loading PDF...")):c.value?(p(),g("div",b$,_(c.value),1)):u.value?(p(),g("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,_$)):P("",!0)]),r("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):P("",!0)}},S$=ue(w$,[["__scopeId","data-v-a97df645"]]),Ms="https://api.bridge-classroom.com/api",Fs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",$n=N([]),ws=N([]),Ta=N(null),_t=N(!1),Te=N(null);function ua(){async function e(l){_t.value=!0,Te.value=null;try{const c=await fetch(`${Ms}/assignments?student_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Fs}});if(!c.ok){const d=await c.text();return Te.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?$n.value=u.assignments:Te.value=u.error||"Failed to fetch assignments",u}catch(c){return console.error("Failed to fetch student assignments:",c),Te.value="Unable to connect to server",null}finally{_t.value=!1}}async function t(l){_t.value=!0,Te.value=null;try{const c=await fetch(`${Ms}/assignments?assigned_by=${encodeURIComponent(l)}`,{headers:{"x-api-key":Fs}});if(!c.ok){const d=await c.text();return Te.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?ws.value=u.assignments:Te.value=u.error||"Failed to fetch assignments",u}catch(c){return console.error("Failed to fetch teacher assignments:",c),Te.value="Unable to connect to server",null}finally{_t.value=!1}}async function s(l){_t.value=!0,Te.value=null;try{const c=await fetch(`${Ms}/assignments?classroom_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Fs}});if(!c.ok){const d=await c.text();return Te.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?u.assignments:(Te.value=u.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),Te.value="Unable to connect to server",[]}finally{_t.value=!1}}async function n(l){_t.value=!0,Te.value=null;try{const c=await fetch(`${Ms}/assignments/${encodeURIComponent(l)}`,{headers:{"x-api-key":Fs}});if(!c.ok){const d=await c.text();return Te.value=d||`Server error (${c.status})`,null}const u=await c.json();return u.success?Ta.value=u.assignment:Te.value=u.error||"Failed to fetch assignment",u}catch(c){return console.error("Failed to fetch assignment detail:",c),Te.value="Unable to connect to server",null}finally{_t.value=!1}}async function o({exercise_id:l,classroom_id:c,student_id:u,assigned_by:d,due_at:f,sort_order:h}){_t.value=!0,Te.value=null;try{const v=await fetch(`${Ms}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Fs},body:JSON.stringify({exercise_id:l,classroom_id:c||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:h??null})});if(!v.ok){const y=await v.text();return Te.value=y||`Server error (${v.status})`,{success:!1,error:Te.value}}const m=await v.json();return m.success?ws.value=[m.assignment,...ws.value]:Te.value=m.error||"Failed to create assignment",m}catch(v){return console.error("Failed to create assignment:",v),Te.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{_t.value=!1}}async function a(l){try{const c=await fetch(`${Ms}/assignments/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":Fs}});if(!c.ok){const d=await c.text();return Te.value=d||`Server error (${c.status})`,{success:!1,error:Te.value}}const u=await c.json();return u.success&&(ws.value=ws.value.filter(d=>d.id!==l),$n.value=$n.value.filter(d=>d.id!==l)),u}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}function i(){$n.value=[],ws.value=[],Ta.value=null,_t.value=!1,Te.value=null}return{studentAssignments:$n,teacherAssignments:ws,currentAssignment:Ta,loading:_t,error:Te,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,reset:i}}const C$={class:"collection-icon"},$$={class:"collection-name"},k$={class:"collection-desc"},A$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),g("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[r("span",C$,_(e.collection.icon),1),r("span",$$,_(e.collection.name),1),r("span",k$,_(e.collection.description),1)]))}},x$=ue(A$,[["__scopeId","data-v-747be5b1"]]),N$={class:"collection-grid"},T$={class:"collection-cards"},O$={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=to().COLLECTIONS;return(n,o)=>(p(),g("div",N$,[o[0]||(o[0]=r("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=r("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),r("div",T$,[(p(!0),g(q,null,ae(D(s),a=>(p(),Ae(x$,{key:a.id,collection:a,onClick:i=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))])]))}},Wr=ue(O$,[["__scopeId","data-v-66fee6e8"]]),I$={class:"casual-lobby"},E$={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(p(),g("div",I$,[de(Wr,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},D$=ue(E$,[["__scopeId","data-v-a78f70b6"]]),R$={class:"assignment-panel"},P$={key:0,class:"loading-state"},L$={key:1,class:"empty-state"},B$={key:2,class:"assignment-cards"},U$=["onClick"],M$={class:"card-header"},F$={class:"exercise-name"},j$={class:"card-meta"},H$={key:0,class:"meta-item"},K$={class:"progress-section"},V$={class:"progress-bar"},W$={class:"progress-label"},G$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(i){return i.total_boards?Math.round(i.attempted_boards/i.total_boards*100):0}function s(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0?"complete":i.due_at&&new Date(i.due_at)<new Date&&i.attempted_boards<i.total_boards?"overdue":i.attempted_boards>0?"in-progress":"new"}function n(i){const l=s(i);return l==="complete"?"Complete":l==="overdue"?"Overdue":l==="in-progress"?"In Progress":"New"}function o(i){if(!i.due_at)return null;const l=new Date(i.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(i){if(!i.due_at)return"";const l=new Date(i.due_at),u=Math.ceil((l-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(i,l)=>(p(),g("div",R$,[l[2]||(l[2]=r("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),g("div",P$,[...l[0]||(l[0]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),g("div",L$,[...l[1]||(l[1]=[r("p",{class:"empty-title"},"No assignments yet",-1),r("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),g("div",B$,[(p(!0),g(q,null,ae(e.assignments,c=>(p(),g("div",{key:c.id,class:ne(["assignment-card",s(c)]),onClick:u=>i.$emit("select-assignment",c)},[r("div",M$,[r("span",F$,_(c.exercise_name),1),r("span",{class:ne(["status-badge",s(c)])},_(n(c)),3)]),r("div",j$,[c.classroom_name?(p(),g("span",H$,_(c.classroom_name),1)):P("",!0),c.due_at?(p(),g("span",{key:1,class:ne(["meta-item",a(c)])},_(o(c)),3)):P("",!0)]),r("div",K$,[r("div",V$,[r("div",{class:ne(["progress-fill",s(c)]),style:Vt({width:t(c)+"%"})},null,6)]),r("span",W$,_(c.attempted_boards)+" / "+_(c.total_boards)+" boards ",1)])],10,U$))),128))]))]))}},z$=ue(G$,[["__scopeId","data-v-dc0b8e86"]]),J$={class:"student-lobby"},q$={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Me(),n=ua(),o=T(()=>n.studentAssignments.value.length>0),a=T(()=>n.loading.value);function i(l){console.log("Selected assignment:",l)}return ct(()=>{const l=s.currentUser.value;l&&n.fetchStudentAssignments(l.id)}),(l,c)=>(p(),g("div",J$,[o.value||a.value?(p(),Ae(z$,{key:0,assignments:D(n).studentAssignments.value,loading:a.value,onSelectAssignment:i},null,8,["assignments","loading"])):P("",!0),de(Wr,{onSelectCollection:c[0]||(c[0]=u=>l.$emit("select-collection",u))})]))}},Y$=ue(q$,[["__scopeId","data-v-de436049"]]),X$={class:"roster"},Q$={class:"roster-header"},Z$={class:"member-count"},ek={key:0,class:"roster-empty"},tk={key:1,class:"roster-table"},sk={class:"member-name"},nk={class:"member-email"},ok={class:"member-date"},ak={class:"member-action"},rk=["onClick","disabled"],lk={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=N(null);function o(i){try{return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return i}}function a(i){const l=`${i.first_name} ${i.last_name}`;confirm(`Remove ${l} from this classroom?`)&&(n.value=i.student_id,s("remove-member",i.student_id),setTimeout(()=>{n.value=null},2e3))}return(i,l)=>(p(),g("div",X$,[r("div",Q$,[l[0]||(l[0]=r("h4",null,"Class Roster",-1)),r("span",Z$,_(e.members.length)+" "+_(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),g("div",ek,[...l[1]||(l[1]=[r("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),g("table",tk,[l[2]||(l[2]=r("thead",null,[r("tr",null,[r("th",null,"Name"),r("th",null,"Email"),r("th",null,"Joined"),r("th")])],-1)),r("tbody",null,[(p(!0),g(q,null,ae(e.members,c=>(p(),g("tr",{key:c.student_id},[r("td",sk,_(c.first_name)+" "+_(c.last_name),1),r("td",nk,_(c.email),1),r("td",ok,_(o(c.joined_at)),1),r("td",ak,[r("button",{class:"remove-btn",onClick:u=>a(c),disabled:n.value===c.student_id},_(n.value===c.student_id?"Removing...":"Remove"),9,rk)])]))),128))])]))]))}},ik=ue(lk,[["__scopeId","data-v-ee901be3"]]),ck={class:"header-left"},uk={class:"classroom-name"},dk={class:"header-meta"},fk={class:"join-badge"},vk={class:"member-count"},mk={key:0,class:"stat-badge"},pk={key:1,class:"stat-badge completion"},hk={key:0,class:"mini-bars"},gk={class:"bar-label"},yk={class:"bar-track"},bk={class:"bar-count"},_k=["aria-label"],wk={key:0,class:"card-body"},Sk={key:0,class:"classroom-desc"},Ck={class:"invite-section"},$k={class:"invite-field"},kk=["value"],Ak={class:"email-section"},xk={class:"email-header"},Nk={class:"email-template"},Tk={class:"email-body"},Ok={key:1,class:"assignments-section"},Ik={class:"assignment-list"},Ek={class:"assignment-name"},Dk={key:0,class:"assignment-due"},Rk={class:"assignment-boards"},Pk={key:3,class:"loading-roster"},Lk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=ro(),a=ua(),i=N(null),l=N(!1),c=N(!1),u=N(!1),d=N([]),f=T(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);it(()=>s.expanded,async k=>{if(k&&!i.value){l.value=!0;const[b,C]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);b!=null&&b.success&&(i.value=b.classroom),d.value=C||[],l.value=!1}});function h(k){return k?new Date(k).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function v(k){return k.students_total?Math.round(k.students_completed/k.students_total*100)+"%":"0%"}async function m(){try{await navigator.clipboard.writeText(f.value),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function y(){const k=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(k),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function O(k){const b=await o.removeMember(s.classroom.id,k);b!=null&&b.success&&(i.value&&(i.value.members=i.value.members.filter(C=>C.student_id!==k)),n("member-removed"))}return(k,b)=>(p(),g("div",{class:ne(["classroom-card",{expanded:e.expanded}])},[r("div",{class:"card-header",onClick:b[0]||(b[0]=C=>k.$emit("toggle"))},[r("div",ck,[r("h3",uk,_(e.classroom.name),1),r("div",dk,[r("span",fk,"JOIN: "+_(e.classroom.join_code),1),r("span",vk,_(e.classroom.member_count)+" "+_(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),g("span",mk,_(e.classroom.open_assignment_count)+" "+_(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):P("",!0),e.classroom.avg_completion_pct>0?(p(),g("span",pk,_(e.classroom.avg_completion_pct)+"% avg",1)):P("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),g("div",hk,[(p(!0),g(q,null,ae(e.classroom.assignments,C=>(p(),g("div",{key:C.id,class:"mini-bar"},[r("span",gk,_(C.exercise_name),1),r("div",yk,[r("div",{class:"bar-fill",style:Vt({width:v(C)})},null,4)]),r("span",bk,_(C.students_completed)+"/"+_(C.students_total),1)]))),128))])):P("",!0)]),r("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[r("span",{class:ne(["chevron",{rotated:e.expanded}])},"",2)],8,_k)]),e.expanded?(p(),g("div",wk,[e.classroom.description?(p(),g("p",Sk,_(e.classroom.description),1)):P("",!0),r("div",Ck,[b[2]||(b[2]=r("h4",null,"Invite Link",-1)),b[3]||(b[3]=r("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),r("div",$k,[r("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:b[1]||(b[1]=C=>C.target.select())},null,8,kk),r("button",{class:"copy-btn",onClick:m},_(c.value?"Copied!":"Copy"),1)])]),r("div",Ak,[r("div",xk,[b[4]||(b[4]=r("h4",null,"Email Template",-1)),r("button",{class:"copy-btn copy-btn-small",onClick:y},_(u.value?"Copied!":"Copy"),1)]),r("div",Nk,[b[5]||(b[5]=r("p",null,[r("strong",null,"Subject:"),Os(" Join our Bridge Classroom for practice exercises")],-1)),r("div",Tk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+_(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(p(),g("div",Ok,[b[6]||(b[6]=r("h4",null,"Assignments",-1)),r("div",Ik,[(p(!0),g(q,null,ae(d.value,C=>(p(),g("div",{key:C.id,class:"assignment-row"},[r("span",Ek,_(C.exercise_name),1),C.due_at?(p(),g("span",Dk,"Due "+_(h(C.due_at)),1)):P("",!0),r("span",Rk,_(C.total_boards)+" boards",1)]))),128))])])):P("",!0),i.value?(p(),Ae(ik,{key:2,members:i.value.members,onRemoveMember:O},null,8,["members"])):l.value?(p(),g("div",Pk," Loading roster... ")):P("",!0)])):P("",!0)],2))}},Bk=ue(Lk,[["__scopeId","data-v-59d6a074"]]),Uk={class:"modal-content"},Mk={class:"step"},Fk={class:"form-group"},jk={class:"form-group"},Hk={class:"step-actions"},Kk=["disabled"],Vk={key:0,class:"error-text"},Wk={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Me(),o=ro(),a=N(""),i=N(""),l=N(!1),c=N(null);async function u(){if(!a.value.trim()||l.value)return;const d=n.currentUser.value;if(!d)return;l.value=!0,c.value=null;const f=await o.createClassroom(d.id,a.value.trim(),i.value.trim()||null);f.success?s("classroom-created",f.classroom):c.value=f.error||"Failed to create classroom",l.value=!1}return(d,f)=>(p(),g("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Dt(h=>d.$emit("close"),["self"]))},[r("div",Uk,[r("div",Mk,[f[7]||(f[7]=r("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=r("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),r("div",Fk,[f[4]||(f[4]=r("label",{for:"classroom-name"},"Classroom Name",-1)),Re(r("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=h=>a.value=h),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:pc(u,["enter"])},null,544),[[Nt,a.value]]),f[5]||(f[5]=r("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),r("div",jk,[f[6]||(f[6]=r("label",{for:"classroom-desc"},[Os("Description "),r("span",{class:"optional"},"(optional)")],-1)),Re(r("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=h=>i.value=h),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[Nt,i.value]])]),r("div",Hk,[r("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=h=>d.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!a.value.trim()||l.value,onClick:u},_(l.value?"Creating...":"Create Classroom"),9,Kk)]),c.value?(p(),g("p",Vk,_(c.value),1)):P("",!0)])])]))}},Gk=ue(Wk,[["__scopeId","data-v-c26a1ae6"]]),kn="https://api.bridge-classroom.com/api",An="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ss=N([]),Oa=N(null),Lt=N(!1),Ee=N(null);function zk(){async function e(i={}){Lt.value=!0,Ee.value=null;try{const l=new URLSearchParams;i.created_by&&l.set("created_by",i.created_by),i.curriculum_path&&l.set("curriculum_path",i.curriculum_path),i.visibility&&l.set("visibility",i.visibility);const c=l.toString(),u=`${kn}/exercises${c?"?"+c:""}`,d=await fetch(u,{headers:{"x-api-key":An}});if(!d.ok){const h=await d.text();return Ee.value=h||`Server error (${d.status})`,null}const f=await d.json();return f.success?Ss.value=f.exercises:Ee.value=f.error||"Failed to fetch exercises",f}catch(l){return console.error("Failed to fetch exercises:",l),Ee.value="Unable to connect to server",null}finally{Lt.value=!1}}async function t(i){Lt.value=!0,Ee.value=null;try{const l=await fetch(`${kn}/exercises/${encodeURIComponent(i)}`,{headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Ee.value=u||`Server error (${l.status})`,null}const c=await l.json();return c.success?Oa.value=c.exercise:Ee.value=c.error||"Failed to fetch exercise",c}catch(l){return console.error("Failed to fetch exercise detail:",l),Ee.value="Unable to connect to server",null}finally{Lt.value=!1}}async function s({name:i,description:l,created_by:c,curriculum_path:u,visibility:d,boards:f}){Lt.value=!0,Ee.value=null;try{const h=await fetch(`${kn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify({name:i,description:l||null,created_by:c||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!h.ok){const m=await h.text();return Ee.value=m||`Server error (${h.status})`,{success:!1,error:Ee.value}}const v=await h.json();return v.success?Ss.value=[v.exercise,...Ss.value]:Ee.value=v.error||"Failed to create exercise",v}catch(h){return console.error("Failed to create exercise:",h),Ee.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function n(i,l){Lt.value=!0,Ee.value=null;try{const c=await fetch(`${kn}/exercises/${encodeURIComponent(i)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":An},body:JSON.stringify(l)});if(!c.ok){const d=await c.text();return Ee.value=d||`Server error (${c.status})`,{success:!1,error:Ee.value}}const u=await c.json();return u.success||(Ee.value=u.error||"Failed to update exercise"),u}catch(c){return console.error("Failed to update exercise:",c),Ee.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Lt.value=!1}}async function o(i){try{const l=await fetch(`${kn}/exercises/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":An}});if(!l.ok){const u=await l.text();return Ee.value=u||`Server error (${l.status})`,{success:!1,error:Ee.value}}const c=await l.json();return c.success&&(Ss.value=Ss.value.filter(u=>u.id!==i)),c}catch(l){return console.error("Failed to delete exercise:",l),{success:!1,error:"Unable to connect to server"}}}function a(){Ss.value=[],Oa.value=null,Lt.value=!1,Ee.value=null}return{exercises:Ss,currentExercise:Oa,loading:Lt,error:Ee,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const Jk={class:"modal-content"},qk={class:"step"},Yk={class:"form-group"},Xk=["value"],Qk={key:0,class:"form-hint"},Zk={class:"form-group"},eA={class:"target-options"},tA={class:"radio-option"},sA={class:"radio-option"},nA={key:0,class:"form-group"},oA=["value"],aA={key:1,class:"form-group"},rA=["value"],lA={class:"form-group"},iA={class:"step-actions"},cA=["disabled"],uA={key:2,class:"error-text"},dA={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Me(),a=zk(),i=ua(),l=ro(),c=ia(),u=N(""),d=N("classroom"),f=N(s.preselectedClassroomId||""),h=N(""),v=N(""),m=N(!1),y=N(null),O=T(()=>a.exercises.value),k=T(()=>a.loading.value),b=T(()=>l.teacherClassrooms.value),C=T(()=>c.students.value),R=T(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!h.value));async function V(){if(!R.value||m.value)return;const ee=o.currentUser.value;if(!ee)return;m.value=!0,y.value=null;const K=await i.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?h.value:null,assigned_by:ee.id,due_at:v.value||null});K.success?n("assignment-created",K.assignment):y.value=K.error||"Failed to create assignment",m.value=!1}return ct(async()=>{a.exercises.value.length||await a.fetchExercises();const ee=o.currentUser.value;ee&&!l.teacherClassrooms.value.length&&await l.fetchTeacherClassrooms(ee.id)}),(ee,K)=>(p(),g("div",{class:"modal-overlay",onClick:K[7]||(K[7]=Dt(X=>ee.$emit("close"),["self"]))},[r("div",Jk,[r("div",qk,[K[18]||(K[18]=r("h2",null,"Create Assignment",-1)),K[19]||(K[19]=r("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),r("div",Yk,[K[9]||(K[9]=r("label",{for:"exercise-select"},"Exercise",-1)),Re(r("select",{id:"exercise-select","onUpdate:modelValue":K[0]||(K[0]=X=>u.value=X),class:"form-select"},[K[8]||(K[8]=r("option",{value:""},"Select an exercise...",-1)),(p(!0),g(q,null,ae(O.value,X=>(p(),g("option",{key:X.id,value:X.id},_(X.name)+" ("+_(X.board_count)+" boards)",9,Xk))),128))],512),[[Bn,u.value]]),k.value?(p(),g("p",Qk,"Loading exercises...")):P("",!0)]),r("div",Zk,[K[12]||(K[12]=r("label",null,"Assign to",-1)),r("div",eA,[r("label",tA,[Re(r("input",{type:"radio","onUpdate:modelValue":K[1]||(K[1]=X=>d.value=X),value:"classroom"},null,512),[[$l,d.value]]),K[10]||(K[10]=r("span",null,"Classroom",-1))]),r("label",sA,[Re(r("input",{type:"radio","onUpdate:modelValue":K[2]||(K[2]=X=>d.value=X),value:"student"},null,512),[[$l,d.value]]),K[11]||(K[11]=r("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(p(),g("div",nA,[K[14]||(K[14]=r("label",{for:"classroom-select"},"Classroom",-1)),Re(r("select",{id:"classroom-select","onUpdate:modelValue":K[3]||(K[3]=X=>f.value=X),class:"form-select"},[K[13]||(K[13]=r("option",{value:""},"Select a classroom...",-1)),(p(!0),g(q,null,ae(b.value,X=>(p(),g("option",{key:X.id,value:X.id},_(X.name)+" ("+_(X.member_count)+" students)",9,oA))),128))],512),[[Bn,f.value]])])):P("",!0),d.value==="student"?(p(),g("div",aA,[K[16]||(K[16]=r("label",{for:"student-select"},"Student",-1)),Re(r("select",{id:"student-select","onUpdate:modelValue":K[4]||(K[4]=X=>h.value=X),class:"form-select"},[K[15]||(K[15]=r("option",{value:""},"Select a student...",-1)),(p(!0),g(q,null,ae(C.value,X=>(p(),g("option",{key:X.id,value:X.id},_(X.first_name)+" "+_(X.last_name),9,rA))),128))],512),[[Bn,h.value]])])):P("",!0),r("div",lA,[K[17]||(K[17]=r("label",{for:"due-date"},[Os("Due Date "),r("span",{class:"optional"},"(optional)")],-1)),Re(r("input",{id:"due-date","onUpdate:modelValue":K[5]||(K[5]=X=>v.value=X),type:"date",class:"form-input"},null,512),[[Nt,v.value]])]),r("div",iA,[r("button",{class:"btn btn-secondary",onClick:K[6]||(K[6]=X=>ee.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!R.value||m.value,onClick:V},_(m.value?"Creating...":"Create Assignment"),9,cA)]),y.value?(p(),g("p",uA,_(y.value),1)):P("",!0)])])]))}},fA=ue(dA,[["__scopeId","data-v-5e97b847"]]),vA={class:"needs-attention"},mA={key:0,class:"empty-state"},pA={key:1,class:"attention-list"},hA={class:"item-icon"},gA={class:"item-text"},yA={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),i=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${i}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(p(),g("div",vA,[a[0]||(a[0]=r("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),g("div",pA,[(p(!0),g(q,null,ae(e.items,(i,l)=>(p(),g("div",{key:l,class:ne(["attention-item",i.type])},[r("span",hA,_(t(i.type)),1),r("span",gA,_(s(i)),1)],2))),128))])):(p(),g("div",mA," All caught up! No items need attention. "))]))}},bA=ue(yA,[["__scopeId","data-v-c39449f9"]]),_A={class:"recent-activity"},wA={key:0,class:"empty-state"},SA={key:1,class:"activity-list"},CA={class:"event-content"},$A={class:"event-text"},kA={class:"event-time"},AA={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),i=Math.floor(a/6e4);if(i<1)return"just now";if(i<60)return`${i}m ago`;const l=Math.floor(i/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(o,a)=>(p(),g("div",_A,[a[0]||(a[0]=r("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),g("div",SA,[(p(!0),g(q,null,ae(e.events,(i,l)=>(p(),g("div",{key:l,class:"activity-item"},[r("span",{class:ne(["event-icon",i.type])},_(t(i.type)),3),r("div",CA,[r("span",$A,_(s(i)),1),r("span",kA,_(n(i.timestamp)),1)])]))),128))])):(p(),g("div",wA," No recent activity. "))]))}},xA=ue(AA,[["__scopeId","data-v-5d7405f1"]]),NA={class:"teacher-lobby"},TA={class:"welcome-section"},OA={class:"welcome-title"},IA={class:"welcome-subtitle"},EA={class:"quick-actions"},DA=["href"],RA={key:0,class:"loading-state"},PA={key:1,class:"dashboard-grid"},LA={class:"left-column"},BA={key:0,class:"classrooms-section"},UA={class:"classroom-cards"},MA={key:1,class:"empty-state"},FA={class:"right-column"},jA={class:"collections-section"},HA={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin"],setup(e){const t=Me(),s=co(),n=N(!1),o=N(!1),a=N(null),i=T(()=>{const v=t.currentUser.value;return v?v.firstName:""}),l=T(()=>{const v=s.summaryStats.value;if(!v||v.classroomCount===0)return"Get started by creating your first classroom.";const m=[];return m.push(`${v.classroomCount} active ${v.classroomCount===1?"classroom":"classrooms"}`),v.openAssignmentCount>0&&m.push(`${v.openAssignmentCount} open ${v.openAssignmentCount===1?"assignment":"assignments"}`),m.join(", ")+"."}),c=T(()=>`${window.location.origin}${window.location.pathname}?mode=teacher`);function u(v){a.value=a.value===v?null:v}function d(v){n.value=!1,a.value=v.id,h()}function f(){o.value=!1,h()}function h(){const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id,!0)}return ct(()=>{const v=t.currentUser.value;v&&s.loadTeacherLobbyData(v.id)}),(v,m)=>(p(),g("div",NA,[r("div",TA,[r("h2",OA,"Welcome back, "+_(i.value),1),r("p",IA,_(l.value),1)]),r("div",EA,[r("button",{class:"action-btn create",onClick:m[0]||(m[0]=y=>n.value=!0)}," + New Classroom "),r("button",{class:"action-btn assign",onClick:m[1]||(m[1]=y=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),g("button",{key:0,class:"action-btn admin",onClick:m[2]||(m[2]=y=>v.$emit("show-admin"))}," Admin Panel ")):P("",!0),(p(),g("a",{key:1,href:c.value,class:"action-btn legacy"}," Legacy Dashboard ",8,DA))]),D(s).lobbyLoading.value&&!D(s).lobbyClassrooms.value.length?(p(),g("div",RA,[...m[6]||(m[6]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):(p(),g("div",PA,[r("div",LA,[D(s).lobbyClassrooms.value.length?(p(),g("div",BA,[m[7]||(m[7]=r("h3",{class:"section-title"},"My Classrooms",-1)),r("div",UA,[(p(!0),g(q,null,ae(D(s).lobbyClassrooms.value,y=>(p(),Ae(Bk,{key:y.id,classroom:y,expanded:a.value===y.id,onToggle:O=>u(y.id),onMemberRemoved:h},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),g("div",MA,[...m[8]||(m[8]=[r("p",{class:"empty-title"},"No classrooms yet",-1),r("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),r("div",FA,[de(bA,{items:D(s).needsAttention.value},null,8,["items"]),de(xA,{events:D(s).recentActivity.value},null,8,["events"])])])),r("div",jA,[m[9]||(m[9]=r("h3",{class:"section-title"},"Lesson Collections",-1)),de(Wr,{onSelectCollection:m[3]||(m[3]=y=>v.$emit("select-collection",y))})]),n.value?(p(),Ae(Gk,{key:2,onClose:m[4]||(m[4]=y=>n.value=!1),onClassroomCreated:d})):P("",!0),o.value?(p(),Ae(fA,{key:3,onClose:m[5]||(m[5]=y=>o.value=!1),onAssignmentCreated:f})):P("",!0)]))}},KA=ue(HA,[["__scopeId","data-v-3a3bc272"]]),$u="https://api.bridge-classroom.com/api",ku="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Au=N(null),xu=N([]),Nu=N(null),Tu=N(null),rr=N(!1),lr=N(null),Ia=N(null),VA=60*1e3;async function Ou(e=!1){if(!e&&Ia.value&&Date.now()-new Date(Ia.value).getTime()<VA)return{success:!0,cached:!0};rr.value=!0,lr.value=null;try{const t=await fetch(`${$u}/admin/stats`,{headers:{"x-api-key":ku}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Au.value=s.stats,xu.value=s.popular_lessons||[],Nu.value=s.database,Ia.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),lr.value=t.message,{success:!1,error:t.message}}finally{rr.value=!1}}async function Iu(){try{const e=await fetch(`${$u}/admin/health`,{headers:{"x-api-key":ku}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Tu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function WA(){await Promise.all([Ou(!0),Iu()])}function GA(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function zA(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Gr(){return{stats:Au,popularLessons:xu,database:Nu,health:Tu,loading:rr,error:lr,loadStats:Ou,loadHealth:Iu,refreshAll:WA,formatBytes:GA,formatUptime:zA}}const JA={class:"stats-row"},qA={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},YA={class:"stat-number"},XA={class:"stat-card",style:{"border-top-color":"#1565c0"}},QA={class:"stat-number"},ZA={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},ex={class:"stat-number"},tx={class:"stat-card",style:{"border-top-color":"#e65100"}},sx={class:"stat-number"},nx={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,i,l;return p(),g("div",JA,[r("div",qA,[r("div",YA,_(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=r("div",{class:"stat-label"},"Total Users",-1))]),r("div",XA,[r("div",QA,_(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=r("div",{class:"stat-label"},"Active (7d)",-1))]),r("div",ZA,[r("div",ex,_(t((i=e.stats)==null?void 0:i.observation_count_7d)),1),n[2]||(n[2]=r("div",{class:"stat-label"},"Observations (7d)",-1))]),r("div",tx,[r("div",sx,_(((l=e.stats)==null?void 0:l.active_today)??""),1),n[3]||(n[3]=r("div",{class:"stat-label"},"Active Today",-1))])])}}},ox=ue(nx,[["__scopeId","data-v-a14a2199"]]),ax={class:"popular-lessons"},rx={key:0,class:"empty-state"},lx={key:1,class:"table-wrap"},ix={class:"lessons-table"},cx={class:"lesson-name"},ux={class:"num-col"},dx={class:"num-col"},fx={class:"num-col"},vx={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),g("div",ax,[o[1]||(o[1]=r("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),g("div",lx,[r("table",ix,[o[0]||(o[0]=r("thead",null,[r("tr",null,[r("th",null,"Lesson"),r("th",{class:"num-col"},"Plays"),r("th",{class:"num-col"},"Users"),r("th",{class:"num-col"},"Accuracy")])],-1)),r("tbody",null,[(p(!0),g(q,null,ae(e.lessons.slice(0,15),a=>(p(),g("tr",{key:a.deal_subfolder},[r("td",cx,_(t(a.deal_subfolder)),1),r("td",ux,_(a.play_count.toLocaleString()),1),r("td",dx,_(a.unique_users),1),r("td",fx,[r("span",{class:ne(["accuracy-badge",s(a.accuracy_pct)])},_(a.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),g("div",rx,"No lesson data yet."))]))}},mx=ue(vx,[["__scopeId","data-v-079bd4f8"]]),px={class:"database-panel"},hx={key:0,class:"empty-state"},gx={class:"db-size"},yx={class:"tables-table"},bx={class:"table-name"},_x={class:"num-col"},wx={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Gr();return(s,n)=>(p(),g("div",px,[n[2]||(n[2]=r("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),g(q,{key:1},[r("div",gx,[n[0]||(n[0]=Os(" SQLite file: ",-1)),r("strong",null,_(D(t)(e.database.file_size_bytes)),1)]),r("table",yx,[n[1]||(n[1]=r("thead",null,[r("tr",null,[r("th",null,"Table"),r("th",{class:"num-col"},"Rows")])],-1)),r("tbody",null,[(p(!0),g(q,null,ae(e.database.tables,o=>(p(),g("tr",{key:o.name},[r("td",bx,_(o.name),1),r("td",_x,_(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),g("div",hx,"Loading..."))]))}},Sx=ue(wx,[["__scopeId","data-v-d5945aff"]]),Cx={class:"system-health"},$x={class:"health-header"},kx=["disabled"],Ax={key:0,class:"empty-state"},xx={key:1,class:"health-rows"},Nx={class:"health-row"},Tx={class:"health-value"},Ox={class:"health-row"},Ix={class:"health-value"},Ex={class:"health-row"},Dx={class:"health-value"},Rx={class:"health-row"},Px={class:"health-value"},Lx={class:"health-row"},Bx={class:"health-value"},Ux={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Gr();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(n,o)=>(p(),g("div",Cx,[r("div",$x,[o[1]||(o[1]=r("h3",{class:"panel-title"},"System Health",-1)),r("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},_(e.refreshing?"Refreshing...":"Refresh"),9,kx)]),e.health?(p(),g("div",xx,[r("div",Nx,[o[2]||(o[2]=r("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=r("span",{class:"health-label"},"API Server",-1)),r("span",Tx,"Up "+_(D(t)(e.health.uptime_seconds)),1)]),r("div",Ox,[r("span",{class:ne(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=r("span",{class:"health-label"},"Database",-1)),r("span",Ix,_(e.health.database_writable?"Writable":"Error"),1)]),r("div",Ex,[r("span",{class:ne(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=r("span",{class:"health-label"},"Last Observation",-1)),r("span",Dx,_(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),r("div",Rx,[o[6]||(o[6]=r("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=r("span",{class:"health-label"},"Disk",-1)),r("span",Px,_(e.health.disk_available_gb)+" GB / "+_(e.health.disk_total_gb)+" GB available",1)]),r("div",Lx,[o[8]||(o[8]=r("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=r("span",{class:"health-label"},"API Version",-1)),r("span",Bx,"v"+_(e.health.api_version),1)])])):(p(),g("div",Ax,"Loading..."))]))}},Mx=ue(Ux,[["__scopeId","data-v-0d4e96d5"]]),Fx={class:"admin-lobby"},jx={class:"admin-header"},Hx={key:0,class:"admin-subtitle"},Kx={key:0,class:"loading-state"},Vx={key:1,class:"error-state"},Wx={class:"content-grid"},Gx={__name:"AdminLobby",emits:["back"],setup(e){const t=Gr(),s=N(!1);async function n(){await Promise.all([t.loadStats(),t.loadHealth()])}async function o(){s.value=!0,await t.refreshAll(),s.value=!1}return ct(n),(a,i)=>(p(),g("div",Fx,[r("div",jx,[r("button",{class:"back-btn",onClick:i[0]||(i[0]=l=>a.$emit("back"))}," Back to Dashboard"),i[1]||(i[1]=r("h2",{class:"admin-title"},"Admin Dashboard",-1)),D(t).stats.value?(p(),g("p",Hx,_(D(t).stats.value.total_observations.toLocaleString())+" total observations across "+_(D(t).stats.value.total_users)+" users ",1)):P("",!0)]),D(t).loading.value&&!D(t).stats.value?(p(),g("div",Kx,[...i[2]||(i[2]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):D(t).error.value?(p(),g("div",Vx,[r("p",null,_(D(t).error.value),1),r("button",{class:"retry-btn",onClick:n},"Retry")])):D(t).stats.value?(p(),g(q,{key:2},[de(ox,{stats:D(t).stats.value},null,8,["stats"]),r("div",Wx,[de(mx,{lessons:D(t).popularLessons.value},null,8,["lessons"]),de(Sx,{database:D(t).database.value},null,8,["database"])]),de(Mx,{health:D(t).health.value,refreshing:s.value,onRefresh:o},null,8,["health","refreshing"])],64)):P("",!0)]))}},zx=ue(Gx,[["__scopeId","data-v-5aab4310"]]),Jx={class:"lobby-view"},qx={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Me(),s=ua(),n=N(!1),o=T(()=>{const l=t.currentUser.value;return(l==null?void 0:l.role)||"student"}),a=T(()=>s.studentAssignments.value.length>0),i=T(()=>{const l=t.currentUser.value;return Array.isArray(l==null?void 0:l.classrooms)&&l.classrooms.length>0});return ct(()=>{const l=t.currentUser.value;l&&o.value==="student"&&s.fetchStudentAssignments(l.id)}),(l,c)=>(p(),g("div",Jx,[n.value?(p(),Ae(zx,{key:0,onBack:c[0]||(c[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),Ae(KA,{key:1,"is-admin":o.value==="admin",onSelectCollection:c[1]||(c[1]=u=>l.$emit("select-collection",u)),onShowAdmin:c[2]||(c[2]=u=>n.value=!0)},null,8,["is-admin"])):a.value||i.value?(p(),Ae(Y$,{key:2,onSelectCollection:c[3]||(c[3]=u=>l.$emit("select-collection",u))})):(p(),Ae(D$,{key:3,onSelectCollection:c[4]||(c[4]=u=>l.$emit("select-collection",u)),onShowBecomeTeacher:c[5]||(c[5]=u=>l.$emit("show-become-teacher"))}))]))}},Yx=ue(qx,[["__scopeId","data-v-0f28018d"]]),Xx={class:"modal-content"},Qx={key:0,class:"step step-overview"},Zx={class:"step-actions"},e2={key:1,class:"step step-agreement"},t2={class:"agreement-checkbox"},s2={class:"step-actions"},n2=["disabled"],o2={key:0,class:"error-text"},a2={key:2,class:"step step-confirmation"},r2={class:"step-actions"},l2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Me(),o=N(1),a=N(!1),i=N(!1),l=N(null);async function c(){const u=n.currentUser.value;if(u){i.value=!0,l.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){l.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:h,privateKey:v}=await Um();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:h,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(h){console.warn("Failed to create viewer record:",h)}o.value=3}catch(d){console.error("Teacher activation failed:",d),l.value="Unable to connect to server. Please try again."}finally{i.value=!1}}}return(u,d)=>(p(),g("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Dt(f=>u.$emit("close"),["self"]))},[r("div",Xx,[o.value===1?(p(),g("div",Qx,[d[6]||(d[6]=Oo('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),r("div",Zx,[r("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),r("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(p(),g("div",e2,[d[8]||(d[8]=Oo('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),r("label",t2,[Re(r("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>a.value=f)},null,512),[[Zo,a.value]]),d[7]||(d[7]=r("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),r("div",s2,[r("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),r("button",{class:"btn btn-primary",disabled:!a.value||i.value,onClick:c},_(i.value?"Activating...":"Activate Teacher Account"),9,n2)]),l.value?(p(),g("p",o2,_(l.value),1)):P("",!0)])):o.value===3?(p(),g("div",a2,[d[9]||(d[9]=r("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=r("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=r("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=r("ol",{class:"next-steps"},[r("li",null,"Create your first classroom from the teacher dashboard"),r("li",null,"Share the invite link with your students"),r("li",null,"Browse exercises and assign them to your class")],-1)),r("div",r2,[r("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):P("",!0)])]))}},i2=ue(l2,[["__scopeId","data-v-56e5717d"]]),c2={},u2={class:"page-footer"};function d2(e,t){return p(),g("footer",u2,[...t[0]||(t[0]=[r("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),r("nav",{class:"footer-links"},[r("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),r("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const f2=ue(c2,[["render",d2],["__scopeId","data-v-1b649814"]]),v2={key:2,class:"app"},m2={class:"app-header"},p2={class:"header-right"},h2=["title"],g2={key:3,class:"stats"},y2={class:"correct"},b2={class:"wrong"},_2={class:"user-avatar-group"},w2=["title"],S2=["title"],C2={class:"app-main"},$2={key:3,class:"collection-view"},k2={key:4,class:"practice-layout"},A2={class:"practice-left"},x2={class:"practice-right"},N2={key:1,class:"commentary-panel"},T2=["innerHTML"],O2=["innerHTML"],I2=["innerHTML"],E2=["innerHTML"],D2={class:"commentary-controls"},R2={key:0,class:"bidding-box-wrapper"},P2={key:1,class:"card-choice-prompt"},L2=["innerHTML"],B2={key:3,class:"completion-controls"},U2={key:0,class:"registration-toast"},M2={__name:"MainLayout",setup(e){const t=ym(),s=to(),n=Me(),o=oa(),a=ru(),i=ia(),l=Np(),c=N(!1),u=N(!1),d=N(!1),f=N(!1),h=N(!1),v=N(null),m=N(""),y=N(null),O=N(null),k=N(null),b=N(!1),C=N(null),R=N(null),V=N(!1),ee=N(!1),K=N(null);function X(w,A=".current"){if(!w)return;const I=w.querySelector(A);I&&(w.scrollTop=I.offsetTop-w.offsetTop)}it(()=>l.currentStepIndex.value,()=>{Kn(()=>{X(y.value,".narrative-text.current")})}),it(()=>l.isComplete.value,w=>{w&&Kn(()=>{X(y.value,".narrative-text.current")})});function Y(){const w=new URLSearchParams(window.location.search);f.value=w.get("mode")==="teacher"}function ve(){f.value=!1;const w=new URL(window.location.href);w.searchParams.delete("mode"),window.history.replaceState({},"",w.toString())}const fe=T(()=>n.isAuthenticated.value),we=T(()=>{const w=n.currentUser.value;return w?`${w.firstName} ${w.lastName}`:""}),Le=T(()=>{const w=n.currentUser.value;return w?`${w.firstName.charAt(0)}${w.lastName.charAt(0)}`.toUpperCase():"?"}),He=T(()=>{const w=n.currentUser.value;return(w==null?void 0:w.role)||"student"}),Ge=T(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");ct(async()=>{if(Y(),f.value)return;s.initializeFromUrl(),n.initialize();const w=new URLSearchParams(window.location.search);w.get("recover")&&w.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const A=s.getCollectionFromUrl(),I=s.getLessonFromUrl();A&&(O.value=A,I&&await x(A,I)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),Qt().initialize(),await i.checkTeacherStatus())});async function ge(w){console.log("User ready:",w.firstName,w.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),ee.value=!0,setTimeout(()=>{ee.value=!1},4e3)),await a.initialize(),Qt().initialize(),await i.checkTeacherStatus();const I=sessionStorage.getItem("pendingJoinCode");if(I){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:I}});return}}function Z(){Qt().reset(),Pr().clearCache(),ps().reset(),i.reset(),n.currentUserId.value=null,c.value=!1,h.value=!1,v.value=null}async function me(){b.value=!1,await i.checkTeacherStatus()}const he=N([]),oe=N(0),j=T(()=>he.value[oe.value]||null),se=T(()=>{var L;const w=W(O.value),A=w!=null&&w.name?`${w.name} - `:"";if((L=k.value)!=null&&L.name)return A+k.value.name;if(!j.value)return"";const I=j.value.subfolder||j.value.category||"";return I?A+I:""});it(oe,()=>{j.value&&(l.loadDeal(j.value),s.setDealInUrl(j.value.boardNumber))},{flush:"sync"}),it(()=>l.observationStore.pendingCount.value,(w,A)=>{w>A&&a.triggerSync()}),it(()=>l.isComplete.value,w=>{w&&(C.value=null)});function ze({subfolder:w,name:A,category:I,content:L}){const H=Vl(L);if(H.length>0){const J=H.map(le=>({...le,subfolder:le.subfolder||w,category:le.category||I}));he.value=J,oe.value=0,l.loadDeal(J[0]),l.resetStats(),pn().saveLessonBoardNumbers(w,J.map(le=>le.boardNumber)),k.value={id:w,name:A,category:I},s.setLessonInUrl(w),V.value=!1,F()}else alert("No deals found in the lesson file")}const ut=T(()=>l.boardState.correctCount),vt=T(()=>l.boardState.wrongCount);function Ze(w){!l.makeBid(w)&&j.value&&(C.value=j.value.boardNumber)}function M({seat:w,suit:A,rank:I}){!l.makeCardChoice(A,I)&&j.value&&(C.value=j.value.boardNumber)}function Q(){l.clearCardFeedback(),l.goBack()}function z(){oe.value<he.value.length-1&&(C.value=null,oe.value++,l.loadDeal(he.value[oe.value]))}function te(w){w>=0&&w<he.value.length&&(C.value=null,oe.value=w,l.loadDeal(he.value[w]))}async function pe({subfolder:w,dealNumber:A}){var I;if(((I=k.value)==null?void 0:I.id)===w&&he.value.length>0){const L=he.value.findIndex(H=>H.boardNumber===A);if(L>=0){te(L);return}}for(const L of s.COLLECTIONS)try{const H=w.includes("/")?w.split("/").pop():w,J=`${L.baseUrl}/${H}.pbn`,re=await fetch(J);if(!re.ok)continue;const le=await re.text();O.value=L.id,s.setCollectionInUrl(L.id),ze({subfolder:w,name:w,category:"",content:le});const Oe=he.value.findIndex(Ne=>Ne.boardNumber===A);Oe>=0&&te(Oe);return}catch{}}function S(w){d.value=!1,h.value=!1,v.value=null,pe(w)}function $(w,A){h.value=!1,v.value=null,pe({subfolder:w,dealNumber:A||1})}function E(){k.value=null,s.setLessonInUrl(null),he.value=[],oe.value=0,l.resetStats(),V.value=!1,R.value=null,h.value=!1,v.value=null}function B(){O.value=null,k.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),he.value=[],oe.value=0,l.resetStats(),V.value=!1,R.value=null,h.value=!1,v.value=null}async function F(){if(R.value=null,!O.value||!k.value)return;const w=W(O.value);if(!w)return;const A=k.value.id,I=A.includes("/")?A.split("/").pop():A,L=`${w.baseUrl}/${I}_Intro.pdf`;try{(await fetch(L,{method:"HEAD"})).ok&&(R.value=L)}catch{}}function U(w){window.innerWidth<600?window.open(w,"_blank"):(K.value=w,V.value=!0)}function G(w){O.value=w,s.setCollectionInUrl(w)}function W(w){return s.COLLECTIONS.find(A=>A.id===w)}async function x(w,A){var L;const I=W(w);if(!I)return console.error("Collection not found:",w),!1;try{const H=await fetch(I.tocUrl);if(!H.ok)throw new Error(`Failed to load TOC: ${H.statusText}`);const J=await H.json();let re=null,le=null;for(const yt of J.categories||[]){const Ie=(L=yt.lessons)==null?void 0:L.find(Ke=>Ke.id===A);if(Ie){re=Ie,le=yt;break}}if(!re)return console.error("Lesson not found in TOC:",A),!1;const Oe=A.includes("/")?A.split("/").pop():A,Ne=`${I.baseUrl}/${Oe}.pbn`,Je=await fetch(Ne);if(!Je.ok)throw new Error(`Failed to load lesson: ${Je.statusText}`);const ot=await Je.text(),At=Vl(ot);if(At.length>0){const yt=At.map(xt=>({...xt,subfolder:xt.subfolder||A,category:xt.category||le.name}));he.value=yt;const Ie=s.getDealFromUrl(),Ke=Ie?yt.findIndex(xt=>xt.boardNumber===Ie):-1;return oe.value=Ke>=0?Ke:0,l.loadDeal(yt[oe.value]),l.resetStats(),k.value={id:A,name:re.name,category:le.name},F(),!0}return!1}catch(H){return console.error("Error loading lesson from URL:",H),!1}}return(w,A)=>{var I,L,H,J,re,le,Oe,Ne,Je,ot,At,yt,Ie,Ke,xt,hn;return f.value?(p(),Ae(TS,{key:0,onClose:ve})):fe.value?(p(),g("div",v2,[r("header",m2,[r("h1",null,_(he.value.length?se.value:Ge.value),1),r("div",p2,[de(i_),r("button",{class:"progress-btn",onClick:A[0]||(A[0]=$e=>u.value=!0),title:"View Progress"}," Progress "),r("button",{class:"accomplishments-btn",onClick:A[1]||(A[1]=$e=>d.value=!0),title:"View Accomplishments"}," Accomplishments "),D(i).isTeacher.value?(p(),g("button",{key:0,class:"teacher-btn",onClick:A[2]||(A[2]=$e=>{h.value=!0,v.value=null,m.value=""}),title:"View Students"}," Students ")):P("",!0),he.value.length&&O.value?(p(),g("button",{key:1,class:"lessons-btn",onClick:E,title:"Back to "+((I=W(O.value))==null?void 0:I.name)},_((L=W(O.value))==null?void 0:L.name),9,h2)):P("",!0),O.value?(p(),g("button",{key:2,class:"lobby-btn",onClick:B,title:"Return to lobby"}," Lobby ")):P("",!0),ut.value+vt.value>0?(p(),g("div",g2,[r("span",y2,_(ut.value),1),r("span",b2,_(vt.value),1)])):P("",!0),r("div",_2,[He.value!=="student"?(p(),g("button",{key:0,class:ne(["role-badge","role-"+He.value]),onClick:B,title:"Return to "+He.value+" lobby"},_(He.value),11,w2)):P("",!0),r("button",{class:"user-btn",onClick:A[3]||(A[3]=$e=>c.value=!0),title:we.value},_(Le.value),9,S2)])])]),r("main",C2,[de(Xb),h.value&&!v.value?(p(),Ae(sC,{key:0,onClose:A[4]||(A[4]=$e=>h.value=!1),onSelectStudent:A[5]||(A[5]=($e,gn)=>{v.value=$e,m.value=gn})})):h.value&&v.value?(p(),Ae(jC,{key:1,studentId:v.value,studentName:m.value,onBack:A[6]||(A[6]=$e=>v.value=null),onNavigateToLesson:$},null,8,["studentId","studentName"])):!he.value.length&&!O.value?(p(),Ae(Yx,{key:2,onSelectCollection:G,onShowBecomeTeacher:A[7]||(A[7]=$e=>b.value=!0)})):!he.value.length&&O.value?(p(),g("div",$2,[r("h2",null,_(((H=W(O.value))==null?void 0:H.name)||O.value),1),A[17]||(A[17]=r("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),de(m$,{visible:!0,inline:!0,collection:W(O.value),onLoad:ze},null,8,["collection"])])):(p(),g("div",k2,[r("div",A2,[he.value.length>1?(p(),Ae(pu,{key:0,boardNumbers:he.value.map($e=>$e.boardNumber),lessonSubfolder:((J=j.value)==null?void 0:J.subfolder)||((re=j.value)==null?void 0:re.category)||"",currentIndex:oe.value,forceRedBoard:C.value,introUrl:R.value,onGoto:te,onOpenIntro:U},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):P("",!0),de(Xg,{boardNumber:(le=j.value)==null?void 0:le.boardNumber,dealer:(Oe=j.value)==null?void 0:Oe.dealer,vulnerable:(Ne=j.value)==null?void 0:Ne.vulnerable,contract:(Je=j.value)==null?void 0:Je.contract,declarer:(ot=j.value)==null?void 0:ot.declarer,showContract:D(l).auctionState.auctionComplete||D(l).showOpeningLead.value||D(l).hasSteps.value&&!D(l).hasBidSteps.value,openingLead:D(l).showOpeningLead.value?(At=j.value)==null?void 0:At.openingLead:"",totalDeals:he.value.length,currentIndex:oe.value,dealBoardNumbers:he.value.map($e=>$e.boardNumber),onGoto:te},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),de(pg,{hands:D(l).hands.value,hiddenSeats:D(l).hiddenSeats.value,showHcp:D(l).showHcp.value,compact:!0,clickableSeat:D(l).hasCardChoice.value?D(l).studentSeat.value:null,playedCards:D(l).showcardsPlayedCards.value,onCardClick:M},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),r("div",x2,[D(l).showAuctionTable.value?(p(),Ae(Dg,{key:0,bids:D(l).hasBidSteps.value?D(l).auctionState.displayedBids:((yt=j.value)==null?void 0:yt.auction)||[],dealer:((Ie=j.value)==null?void 0:Ie.dealer)||"N",currentBidIndex:D(l).hasBidSteps.value?D(l).auctionState.currentBidIndex:-1,wrongBidIndex:D(l).auctionState.wrongBidIndex,correctBidIndex:D(l).auctionState.correctBidIndex,showTurnIndicator:D(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):P("",!0),de(ni,{visible:!!D(l).auctionState.wrongBid,type:"wrong",wrongBid:D(l).auctionState.wrongBid,correctBid:D(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),de(ni,{visible:!!D(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:D(l).cardChoiceState.wrongCard,correctCardCode:D(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),D(l).hasSteps.value?(p(),g("div",N2,[r("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:y},[(p(!0),g(q,null,ae(D(l).steps.value.slice(0,D(l).currentStepIndex.value),($e,gn)=>(p(),g(q,{key:"prev-"+gn},[gn>=D(l).commentaryStartIndex.value?(p(),g(q,{key:0},[r("span",{class:"narrative-text previous",innerHTML:D(Ks)(D(Sn)($e.text))},null,8,T2),$e.type==="bid"&&$e.explanationText?(p(),g("span",{key:0,class:ne(["narrative-text",gn===D(l).currentStepIndex.value-1&&D(l).isBidStep.value&&!D(l).bidAnswered.value?"current":"previous"]),innerHTML:D(Ks)(D(Sn)($e.explanationText))},null,10,O2)):P("",!0)],64)):P("",!0)],64))),128)),D(l).currentStep.value?(p(),g("span",{key:0,class:"narrative-text current",innerHTML:D(Ks)(D(Sn)(D(l).currentStep.value.text))},null,8,I2)):P("",!0),D(l).bidAnswered.value&&((Ke=D(l).currentStep.value)!=null&&Ke.explanationText)?(p(),g("span",{key:1,class:"narrative-text current",innerHTML:D(Ks)(D(Sn)(D(l).currentStep.value.explanationText))},null,8,E2)):P("",!0)],512),r("div",D2,[D(l).hasBidPrompt.value?(p(),g("div",R2,[de(xg,{lastBid:D(l).lastContractBid.value,canDouble:D(l).canDouble.value,canRedouble:D(l).canRedouble.value,onBid:Ze},null,8,["lastBid","canDouble","canRedouble"])])):D(l).hasCardChoice.value?(p(),g("div",P2," Click on the card you would choose ")):P("",!0),D(l).canGoBack.value?(p(),g("button",{key:2,class:"instruction-btn secondary",onClick:Q},"  Back ")):P("",!0),!D(l).isComplete.value&&(D(l).bidAnswered.value||!D(l).hasBidPrompt.value&&!D(l).hasCardChoice.value&&D(l).currentStep.value&&D(l).currentStep.value.type!=="end")?(p(),g("button",{key:3,class:"instruction-btn primary",onClick:A[8]||(A[8]=$e=>D(l).advance())},_(((xt=D(l).currentStep.value)==null?void 0:xt.type)==="rotate"?"Rotate":"Next")+"  ",1)):P("",!0),D(l).isComplete.value&&oe.value<he.value.length-1?(p(),g("button",{key:4,class:"next-deal-btn",onClick:z}," Next Deal  ")):P("",!0)])])):(hn=j.value)!=null&&hn.commentary?(p(),g("div",{key:2,class:"display-commentary",innerHTML:D(Ks)(D(Sn)(D(Tm)(j.value.commentary)))},null,8,L2)):P("",!0),!D(l).hasSteps.value&&D(l).isComplete.value&&oe.value<he.value.length-1?(p(),g("div",B2,[r("button",{class:"next-deal-btn",onClick:z}," Next Deal  ")])):P("",!0)])]))]),de(Fb,{visible:c.value,onClose:A[9]||(A[9]=$e=>c.value=!1),onSwitchUser:Z,onLogout:Z,onBecomeTeacher:A[10]||(A[10]=$e=>b.value=!0)},null,8,["visible"]),ee.value?(p(),g("div",U2," Account created  your data is encrypted and linked to your email for recovery. ")):P("",!0),u.value?(p(),g("div",{key:1,class:"modal-overlay",onClick:A[12]||(A[12]=Dt($e=>u.value=!1,["self"]))},[de(A_,{onClose:A[11]||(A[11]=$e=>u.value=!1)})])):P("",!0),d.value?(p(),g("div",{key:2,class:"modal-overlay",onClick:A[14]||(A[14]=Dt($e=>d.value=!1,["self"]))},[de(f1,{onClose:A[13]||(A[13]=$e=>d.value=!1),onNavigateToDeal:S})])):P("",!0),de(S$,{visible:V.value,url:K.value||"",onClose:A[15]||(A[15]=$e=>V.value=!1)},null,8,["visible","url"]),b.value?(p(),Ae(i2,{key:3,onClose:A[16]||(A[16]=$e=>b.value=!1),onActivated:me})):P("",!0),de(f2)])):(p(),Ae(ob,{key:1,onUserReady:ge}))}}},F2=()=>uv(()=>import("./JoinClassroomView-tU2fY_aR.js"),__vite__mapDeps([0,1])),j2=[{path:"/join/:joinCode",name:"join",component:F2},{path:"/:pathMatch(.*)*",name:"app",component:M2}],H2=gm({history:qv(),routes:j2}),Eu=sv(lv);Eu.use(H2);Eu.mount("#app");export{ue as _,r as a,de as b,g as c,P as d,Os as e,Oo as f,Me as g,ro as h,Md as i,Dc as j,ym as k,p as l,ct as o,N as r,_ as t,K2 as u,wd as w};
