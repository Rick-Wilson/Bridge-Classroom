const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-Bk65KxIS.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Se={},Ls=[],Dt=()=>{},Ul=()=>!1,Ao=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),jr=e=>e.startsWith("onUpdate:"),Je=Object.assign,Hr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},tu=Object.prototype.hasOwnProperty,_e=(e,t)=>tu.call(e,t),ae=Array.isArray,Us=e=>Mn(e)==="[object Map]",tn=e=>Mn(e)==="[object Set]",$a=e=>Mn(e)==="[object Date]",ie=e=>typeof e=="function",De=e=>typeof e=="string",kt=e=>typeof e=="symbol",Ce=e=>e!==null&&typeof e=="object",Ml=e=>(Ce(e)||ie(e))&&ie(e.then)&&ie(e.catch),Fl=Object.prototype.toString,Mn=e=>Fl.call(e),su=e=>Mn(e).slice(8,-1),jl=e=>Mn(e)==="[object Object]",Kr=e=>De(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gn=Fr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xo=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},nu=/-\w/g,yt=xo(e=>e.replace(nu,t=>t.slice(1).toUpperCase())),ou=/\B([A-Z])/g,is=xo(e=>e.replace(ou,"-$1").toLowerCase()),No=xo(e=>e.charAt(0).toUpperCase()+e.slice(1)),qo=xo(e=>e?`on${No(e)}`:""),os=(e,t)=>!Object.is(e,t),so=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Hl=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Oo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Aa;const To=()=>Aa||(Aa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cs(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=De(n)?iu(n):cs(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(De(e)||Ce(e))return e}const ru=/;(?![^(]*\))/g,au=/:([^]+)/,lu=/\/\*[^]*?\*\//g;function iu(e){const t={};return e.replace(lu,"").split(ru).forEach(s=>{if(s){const n=s.split(au);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function re(e){let t="";if(De(e))t=e;else if(ae(e))for(let s=0;s<e.length;s++){const n=re(e[s]);n&&(t+=n+" ")}else if(Ce(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const cu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uu=Fr(cu);function Kl(e){return!!e||e===""}function du(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Fn(e[n],t[n]);return s}function Fn(e,t){if(e===t)return!0;let s=$a(e),n=$a(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=kt(e),n=kt(t),s||n)return e===t;if(s=ae(e),n=ae(t),s||n)return s&&n?du(e,t):!1;if(s=Ce(e),n=Ce(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Fn(e[a],t[a]))return!1}}return String(e)===String(t)}function Vr(e,t){return e.findIndex(s=>Fn(s,t))}const Vl=e=>!!(e&&e.__v_isRef===!0),C=e=>De(e)?e:e==null?"":ae(e)||Ce(e)&&(e.toString===Fl||!ie(e.toString))?Vl(e)?C(e.value):JSON.stringify(e,Wl,2):String(e),Wl=(e,t)=>Vl(t)?Wl(e,t.value):Us(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[Xo(n,r)+" =>"]=o,s),{})}:tn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Xo(s))}:kt(t)?Xo(t):Ce(t)&&!ae(t)&&!jl(t)?String(t):t,Xo=(e,t="")=>{var s;return kt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ct;class fu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ct,!t&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ct;try{return ct=this,t()}finally{ct=s}}}on(){++this._on===1&&(this.prevScope=ct,ct=this)}off(){this._on>0&&--this._on===0&&(ct=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function vu(){return ct}let $e;const Qo=new WeakSet;class Gl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ct&&ct.active&&ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qo.has(this)&&(Qo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xa(this),Yl(this);const t=$e,s=St;$e=this,St=!0;try{return this.fn()}finally{ql(this),$e=t,St=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)zr(t);this.deps=this.depsTail=void 0,xa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){vr(this)&&this.run()}get dirty(){return vr(this)}}let zl=0,yn,bn;function Jl(e,t=!1){if(e.flags|=8,t){e.next=bn,bn=e;return}e.next=yn,yn=e}function Wr(){zl++}function Gr(){if(--zl>0)return;if(bn){let t=bn;for(bn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;yn;){let t=yn;for(yn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Yl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ql(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),zr(n),mu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function vr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Xl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Xl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===An)||(e.globalVersion=An,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!vr(e))))return;e.flags|=2;const t=e.dep,s=$e,n=St;$e=e,St=!0;try{Yl(e);const o=e.fn(e._value);(t.version===0||os(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{$e=s,St=n,ql(e),e.flags&=-3}}function zr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)zr(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function mu(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let St=!0;const Ql=[];function zt(){Ql.push(St),St=!1}function Jt(){const e=Ql.pop();St=e===void 0?!0:e}function xa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=$e;$e=void 0;try{t()}finally{$e=s}}}let An=0;class pu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!$e||!St||$e===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==$e)s=this.activeLink=new pu($e,this),$e.deps?(s.prevDep=$e.depsTail,$e.depsTail.nextDep=s,$e.depsTail=s):$e.deps=$e.depsTail=s,Zl(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=$e.depsTail,s.nextDep=void 0,$e.depsTail.nextDep=s,$e.depsTail=s,$e.deps===s&&($e.deps=n)}return s}trigger(t){this.version++,An++,this.notify(t)}notify(t){Wr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Gr()}}}function Zl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Zl(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const mr=new WeakMap,bs=Symbol(""),pr=Symbol(""),xn=Symbol("");function Qe(e,t,s){if(St&&$e){let n=mr.get(e);n||mr.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Jr),o.map=n,o.key=s),o.track()}}function Ht(e,t,s,n,o,r){const a=mr.get(e);if(!a){An++;return}const l=c=>{c&&c.trigger()};if(Wr(),t==="clear")a.forEach(l);else{const c=ae(e),u=c&&Kr(s);if(c&&s==="length"){const f=Number(n);a.forEach((d,p)=>{(p==="length"||p===xn||!kt(p)&&p>=f)&&l(d)})}else switch((s!==void 0||a.has(void 0))&&l(a.get(s)),u&&l(a.get(xn)),t){case"add":c?u&&l(a.get("length")):(l(a.get(bs)),Us(e)&&l(a.get(pr)));break;case"delete":c||(l(a.get(bs)),Us(e)&&l(a.get(pr)));break;case"set":Us(e)&&l(a.get(bs));break}}Gr()}function xs(e){const t=be(e);return t===e?t:(Qe(t,"iterate",xn),gt(e)?t:t.map($t))}function Io(e){return Qe(e=be(e),"iterate",xn),e}function Zt(e,t){return Yt(e)?Ks(_s(e)?$t(t):t):$t(t)}const hu={__proto__:null,[Symbol.iterator](){return Zo(this,Symbol.iterator,e=>Zt(this,e))},concat(...e){return xs(this).concat(...e.map(t=>ae(t)?xs(t):t))},entries(){return Zo(this,"entries",e=>(e[1]=Zt(this,e[1]),e))},every(e,t){return Mt(this,"every",e,t,void 0,arguments)},filter(e,t){return Mt(this,"filter",e,t,s=>s.map(n=>Zt(this,n)),arguments)},find(e,t){return Mt(this,"find",e,t,s=>Zt(this,s),arguments)},findIndex(e,t){return Mt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Mt(this,"findLast",e,t,s=>Zt(this,s),arguments)},findLastIndex(e,t){return Mt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Mt(this,"forEach",e,t,void 0,arguments)},includes(...e){return er(this,"includes",e)},indexOf(...e){return er(this,"indexOf",e)},join(e){return xs(this).join(e)},lastIndexOf(...e){return er(this,"lastIndexOf",e)},map(e,t){return Mt(this,"map",e,t,void 0,arguments)},pop(){return an(this,"pop")},push(...e){return an(this,"push",e)},reduce(e,...t){return Na(this,"reduce",e,t)},reduceRight(e,...t){return Na(this,"reduceRight",e,t)},shift(){return an(this,"shift")},some(e,t){return Mt(this,"some",e,t,void 0,arguments)},splice(...e){return an(this,"splice",e)},toReversed(){return xs(this).toReversed()},toSorted(e){return xs(this).toSorted(e)},toSpliced(...e){return xs(this).toSpliced(...e)},unshift(...e){return an(this,"unshift",e)},values(){return Zo(this,"values",e=>Zt(this,e))}};function Zo(e,t,s){const n=Io(e),o=n[t]();return n!==e&&!gt(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const gu=Array.prototype;function Mt(e,t,s,n,o,r){const a=Io(e),l=a!==e&&!gt(e),c=a[t];if(c!==gu[t]){const d=c.apply(e,r);return l?$t(d):d}let u=s;a!==e&&(l?u=function(d,p){return s.call(this,Zt(e,d),p,e)}:s.length>2&&(u=function(d,p){return s.call(this,d,p,e)}));const f=c.call(a,u,n);return l&&o?o(f):f}function Na(e,t,s,n){const o=Io(e);let r=s;return o!==e&&(gt(e)?s.length>3&&(r=function(a,l,c){return s.call(this,a,l,c,e)}):r=function(a,l,c){return s.call(this,a,Zt(e,l),c,e)}),o[t](r,...n)}function er(e,t,s){const n=be(e);Qe(n,"iterate",xn);const o=n[t](...s);return(o===-1||o===!1)&&Xr(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function an(e,t,s=[]){zt(),Wr();const n=be(e)[t].apply(e,s);return Gr(),Jt(),n}const yu=Fr("__proto__,__v_isRef,__isVue"),ei=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(kt));function bu(e){kt(e)||(e=String(e));const t=be(this);return Qe(t,"has",e),t.hasOwnProperty(e)}class ti{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Ou:ri:r?oi:ni).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=ae(t);if(!o){let c;if(a&&(c=hu[s]))return c;if(s==="hasOwnProperty")return bu}const l=Reflect.get(t,s,tt(t)?t:n);if((kt(s)?ei.has(s):yu(s))||(o||Qe(t,"get",s),r))return l;if(tt(l)){const c=a&&Kr(s)?l:l.value;return o&&Ce(c)?gr(c):c}return Ce(l)?o?gr(l):Pt(l):l}}class si extends ti{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const a=ae(t)&&Kr(s);if(!this._isShallow){const u=Yt(r);if(!gt(n)&&!Yt(n)&&(r=be(r),n=be(n)),!a&&tt(r)&&!tt(n))return u||(r.value=n),!0}const l=a?Number(s)<t.length:_e(t,s),c=Reflect.set(t,s,n,tt(t)?t:o);return t===be(o)&&(l?os(n,r)&&Ht(t,"set",s,n):Ht(t,"add",s,n)),c}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Ht(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!kt(s)||!ei.has(s))&&Qe(t,"has",s),n}ownKeys(t){return Qe(t,"iterate",ae(t)?"length":bs),Reflect.ownKeys(t)}}class _u extends ti{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const wu=new si,Su=new _u,Cu=new si(!0);const hr=e=>e,Yn=e=>Reflect.getPrototypeOf(e);function ku(e,t,s){return function(...n){const o=this.__v_raw,r=be(o),a=Us(r),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,u=o[e](...n),f=s?hr:t?Ks:$t;return!t&&Qe(r,"iterate",c?pr:bs),Je(Object.create(u),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:l?[f(d[0]),f(d[1])]:f(d),done:p}}})}}function qn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $u(e,t){const s={get(o){const r=this.__v_raw,a=be(r),l=be(o);e||(os(o,l)&&Qe(a,"get",o),Qe(a,"get",l));const{has:c}=Yn(a),u=t?hr:e?Ks:$t;if(c.call(a,o))return u(r.get(o));if(c.call(a,l))return u(r.get(l));r!==a&&r.get(o)},get size(){const o=this.__v_raw;return!e&&Qe(be(o),"iterate",bs),o.size},has(o){const r=this.__v_raw,a=be(r),l=be(o);return e||(os(o,l)&&Qe(a,"has",o),Qe(a,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const a=this,l=a.__v_raw,c=be(l),u=t?hr:e?Ks:$t;return!e&&Qe(c,"iterate",bs),l.forEach((f,d)=>o.call(r,u(f),u(d),a))}};return Je(s,e?{add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear")}:{add(o){!t&&!gt(o)&&!Yt(o)&&(o=be(o));const r=be(this);return Yn(r).has.call(r,o)||(r.add(o),Ht(r,"add",o,o)),this},set(o,r){!t&&!gt(r)&&!Yt(r)&&(r=be(r));const a=be(this),{has:l,get:c}=Yn(a);let u=l.call(a,o);u||(o=be(o),u=l.call(a,o));const f=c.call(a,o);return a.set(o,r),u?os(r,f)&&Ht(a,"set",o,r):Ht(a,"add",o,r),this},delete(o){const r=be(this),{has:a,get:l}=Yn(r);let c=a.call(r,o);c||(o=be(o),c=a.call(r,o)),l&&l.call(r,o);const u=r.delete(o);return c&&Ht(r,"delete",o,void 0),u},clear(){const o=be(this),r=o.size!==0,a=o.clear();return r&&Ht(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=ku(o,e,t)}),s}function Yr(e,t){const s=$u(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,r)}const Au={get:Yr(!1,!1)},xu={get:Yr(!1,!0)},Nu={get:Yr(!0,!1)};const ni=new WeakMap,oi=new WeakMap,ri=new WeakMap,Ou=new WeakMap;function Tu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Iu(e){return e.__v_skip||!Object.isExtensible(e)?0:Tu(su(e))}function Pt(e){return Yt(e)?e:qr(e,!1,wu,Au,ni)}function ai(e){return qr(e,!1,Cu,xu,oi)}function gr(e){return qr(e,!0,Su,Nu,ri)}function qr(e,t,s,n,o){if(!Ce(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Iu(e);if(r===0)return e;const a=o.get(e);if(a)return a;const l=new Proxy(e,r===2?n:s);return o.set(e,l),l}function _s(e){return Yt(e)?_s(e.__v_raw):!!(e&&e.__v_isReactive)}function Yt(e){return!!(e&&e.__v_isReadonly)}function gt(e){return!!(e&&e.__v_isShallow)}function Xr(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function Eu(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&Hl(e,"__v_skip",!0),e}const $t=e=>Ce(e)?Pt(e):e,Ks=e=>Ce(e)?gr(e):e;function tt(e){return e?e.__v_isRef===!0:!1}function E(e){return li(e,!1)}function Ru(e){return li(e,!0)}function li(e,t){return tt(e)?e:new Du(e,t)}class Du{constructor(t,s){this.dep=new Jr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:$t(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||gt(t)||Yt(t);t=n?t:be(t),os(t,s)&&(this._rawValue=t,this._value=n?t:$t(t),this.dep.trigger())}}function R(e){return tt(e)?e.value:e}const Pu={get:(e,t,s)=>t==="__v_raw"?e:R(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return tt(o)&&!tt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function ii(e){return _s(e)?e:new Proxy(e,Pu)}class Bu{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Jr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=An-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Jl(this,!0),!0}get value(){const t=this.dep.track();return Xl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Lu(e,t,s=!1){let n,o;return ie(e)?n=e:(n=e.get,o=e.set),new Bu(n,o,s)}const Xn={},lo=new WeakMap;let hs;function Uu(e,t=!1,s=hs){if(s){let n=lo.get(s);n||lo.set(s,n=[]),n.push(e)}}function Mu(e,t,s=Se){const{immediate:n,deep:o,once:r,scheduler:a,augmentJob:l,call:c}=s,u=D=>o?D:gt(D)||o===!1||o===0?Kt(D,1):Kt(D);let f,d,p,v,m=!1,y=!1;if(tt(e)?(d=()=>e.value,m=gt(e)):_s(e)?(d=()=>u(e),m=!0):ae(e)?(y=!0,m=e.some(D=>_s(D)||gt(D)),d=()=>e.map(D=>{if(tt(D))return D.value;if(_s(D))return u(D);if(ie(D))return c?c(D,2):D()})):ie(e)?t?d=c?()=>c(e,2):e:d=()=>{if(p){zt();try{p()}finally{Jt()}}const D=hs;hs=f;try{return c?c(e,3,[v]):e(v)}finally{hs=D}}:d=Dt,t&&o){const D=d,K=o===!0?1/0:o;d=()=>Kt(D(),K)}const O=vu(),A=()=>{f.stop(),O&&O.active&&Hr(O.effects,f)};if(r&&t){const D=t;t=(...K)=>{D(...K),A()}}let _=y?new Array(e.length).fill(Xn):Xn;const S=D=>{if(!(!(f.flags&1)||!f.dirty&&!D))if(t){const K=f.run();if(o||m||(y?K.some((ee,se)=>os(ee,_[se])):os(K,_))){p&&p();const ee=hs;hs=f;try{const se=[K,_===Xn?void 0:y&&_[0]===Xn?[]:_,v];_=K,c?c(t,3,se):t(...se)}finally{hs=ee}}}else f.run()};return l&&l(S),f=new Gl(d),f.scheduler=a?()=>a(S,!1):S,v=D=>Uu(D,!1,f),p=f.onStop=()=>{const D=lo.get(f);if(D){if(c)c(D,4);else for(const K of D)K();lo.delete(f)}},t?n?S(!0):_=f.run():a?a(S.bind(null,!0),!0):f.run(),A.pause=f.pause.bind(f),A.resume=f.resume.bind(f),A.stop=A,A}function Kt(e,t=1/0,s){if(t<=0||!Ce(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,tt(e))Kt(e.value,t,s);else if(ae(e))for(let n=0;n<e.length;n++)Kt(e[n],t,s);else if(tn(e)||Us(e))e.forEach(n=>{Kt(n,t,s)});else if(jl(e)){for(const n in e)Kt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Kt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jn(e,t,s,n){try{return n?e(...n):e()}catch(o){Eo(o,t,s)}}function Lt(e,t,s,n){if(ie(e)){const o=jn(e,t,s,n);return o&&Ml(o)&&o.catch(r=>{Eo(r,t,s)}),o}if(ae(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Lt(e[r],t,s,n));return o}}function Eo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Se;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const f=l.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,c,u)===!1)return}l=l.parent}if(r){zt(),jn(r,null,10,[e,c,u]),Jt();return}}Fu(e,s,o,n,a)}function Fu(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const rt=[];let Tt=-1;const Ms=[];let es=null,Ts=0;const ci=Promise.resolve();let io=null;function Nn(e){const t=io||ci;return e?t.then(this?e.bind(this):e):t}function ju(e){let t=Tt+1,s=rt.length;for(;t<s;){const n=t+s>>>1,o=rt[n],r=On(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function Qr(e){if(!(e.flags&1)){const t=On(e),s=rt[rt.length-1];!s||!(e.flags&2)&&t>=On(s)?rt.push(e):rt.splice(ju(t),0,e),e.flags|=1,ui()}}function ui(){io||(io=ci.then(fi))}function Hu(e){ae(e)?Ms.push(...e):es&&e.id===-1?es.splice(Ts+1,0,e):e.flags&1||(Ms.push(e),e.flags|=1),ui()}function Oa(e,t,s=Tt+1){for(;s<rt.length;s++){const n=rt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;rt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function di(e){if(Ms.length){const t=[...new Set(Ms)].sort((s,n)=>On(s)-On(n));if(Ms.length=0,es){es.push(...t);return}for(es=t,Ts=0;Ts<es.length;Ts++){const s=es[Ts];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}es=null,Ts=0}}const On=e=>e.id==null?e.flags&2?-1:1/0:e.id;function fi(e){try{for(Tt=0;Tt<rt.length;Tt++){const t=rt[Tt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),jn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Tt<rt.length;Tt++){const t=rt[Tt];t&&(t.flags&=-2)}Tt=-1,rt.length=0,di(),io=null,(rt.length||Ms.length)&&fi()}}let Ge=null,vi=null;function co(e){const t=Ge;return Ge=e,vi=e&&e.type.__scopeId||null,t}function Ku(e,t=Ge,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&vo(-1);const r=co(t);let a;try{a=e(...o)}finally{co(r),n._d&&vo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ze(e,t){if(Ge===null)return e;const s=Bo(Ge),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,l,c=Se]=t[o];r&&(ie(r)&&(r={mounted:r,updated:r}),r.deep&&Kt(a),n.push({dir:r,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function fs(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const l=o[a];r&&(l.oldValue=r[a].value);let c=l.dir[n];c&&(zt(),Lt(c,s,8,[e.el,l,e,t]),Jt())}}function no(e,t){if(et){let s=et.provides;const n=et.parent&&et.parent.provides;n===s&&(s=et.provides=Object.create(n)),s[e]=t}}function Ct(e,t,s=!1){const n=Vd();if(n||js){let o=js?js._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ie(t)?t.call(n&&n.proxy):t}}const Vu=Symbol.for("v-scx"),Wu=()=>Ct(Vu);function at(e,t,s){return mi(e,t,s)}function mi(e,t,s=Se){const{immediate:n,deep:o,flush:r,once:a}=s,l=Je({},s),c=t&&n||!t&&r!=="post";let u;if(Rn){if(r==="sync"){const v=Wu();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=Dt,v.resume=Dt,v.pause=Dt,v}}const f=et;l.call=(v,m,y)=>Lt(v,f,m,y);let d=!1;r==="post"?l.scheduler=v=>{dt(v,f&&f.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(v,m)=>{m?v():Qr(v)}),l.augmentJob=v=>{t&&(v.flags|=4),d&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const p=Mu(e,t,l);return Rn&&(u?u.push(p):c&&p()),p}function Gu(e,t,s){const n=this.proxy,o=De(e)?e.includes(".")?pi(n,e):()=>n[e]:e.bind(n,n);let r;ie(t)?r=t:(r=t.handler,s=t);const a=Hn(this),l=mi(o,r.bind(n),s);return a(),l}function pi(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const zu=Symbol("_vte"),Ju=e=>e.__isTeleport,Yu=Symbol("_leaveCb");function Zr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Zr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function hi(e,t){return ie(e)?Je({name:e.name},t,{setup:e}):e}function gi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const uo=new WeakMap;function _n(e,t,s,n,o=!1){if(ae(e)){e.forEach((m,y)=>_n(m,t&&(ae(t)?t[y]:t),s,n,o));return}if(Fs(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&_n(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Bo(n.component):n.el,a=o?null:r,{i:l,r:c}=e,u=t&&t.r,f=l.refs===Se?l.refs={}:l.refs,d=l.setupState,p=be(d),v=d===Se?Ul:m=>_e(p,m);if(u!=null&&u!==c){if(Ta(t),De(u))f[u]=null,v(u)&&(d[u]=null);else if(tt(u)){u.value=null;const m=t;m.k&&(f[m.k]=null)}}if(ie(c))jn(c,l,12,[a,f]);else{const m=De(c),y=tt(c);if(m||y){const O=()=>{if(e.f){const A=m?v(c)?d[c]:f[c]:c.value;if(o)ae(A)&&Hr(A,r);else if(ae(A))A.includes(r)||A.push(r);else if(m)f[c]=[r],v(c)&&(d[c]=f[c]);else{const _=[r];c.value=_,e.k&&(f[e.k]=_)}}else m?(f[c]=a,v(c)&&(d[c]=a)):y&&(c.value=a,e.k&&(f[e.k]=a))};if(a){const A=()=>{O(),uo.delete(e)};A.id=-1,uo.set(e,A),dt(A,s)}else Ta(e),O()}}}function Ta(e){const t=uo.get(e);t&&(t.flags|=8,uo.delete(e))}To().requestIdleCallback;To().cancelIdleCallback;const Fs=e=>!!e.type.__asyncLoader,yi=e=>e.type.__isKeepAlive;function qu(e,t){bi(e,"a",t)}function Xu(e,t){bi(e,"da",t)}function bi(e,t,s=et){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ro(t,n,s),s){let o=s.parent;for(;o&&o.parent;)yi(o.parent.vnode)&&Qu(n,t,s,o),o=o.parent}}function Qu(e,t,s,n){const o=Ro(t,e,n,!0);wi(()=>{Hr(n[t],o)},s)}function Ro(e,t,s=et,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...a)=>{zt();const l=Hn(s),c=Lt(t,s,e,a);return l(),Jt(),c});return n?o.unshift(r):o.push(r),r}}const Xt=e=>(t,s=et)=>{(!Rn||e==="sp")&&Ro(e,(...n)=>t(...n),s)},Zu=Xt("bm"),Nt=Xt("m"),ed=Xt("bu"),td=Xt("u"),_i=Xt("bum"),wi=Xt("um"),sd=Xt("sp"),nd=Xt("rtg"),od=Xt("rtc");function rd(e,t=et){Ro("ec",e,t)}const ad="components";function ld(e,t){return cd(ad,e,!0,t)||e}const id=Symbol.for("v-ndc");function cd(e,t,s=!0,n=!1){const o=Ge||et;if(o){const r=o.type;{const l=Yd(r,!1);if(l&&(l===t||l===yt(t)||l===No(yt(t))))return r}const a=Ia(o[e]||r[e],t)||Ia(o.appContext[e],t);return!a&&n?r:a}}function Ia(e,t){return e&&(e[t]||e[yt(t)]||e[No(yt(t))])}function ce(e,t,s,n){let o;const r=s,a=ae(e);if(a||De(e)){const l=a&&_s(e);let c=!1,u=!1;l&&(c=!gt(e),u=Yt(e),e=Io(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(c?u?Ks($t(e[f])):$t(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(Ce(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const f=l[c];o[c]=t(e[f],f,c,r)}}else o=[];return o}function ud(e,t,s={},n,o){if(Ge.ce||Ge.parent&&Fs(Ge.parent)&&Ge.parent.ce){const u=Object.keys(s).length>0;return s.name=t,h(),Oe(X,null,[pe("slot",s,n)],u?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),h();const a=r&&Si(r(s)),l=s.key||a&&a.key,c=Oe(X,{key:(l&&!kt(l)?l:`_${t}`)+(!a&&n?"_fb":"")},a||[],a&&e._===1?64:-2);return r&&r._c&&(r._d=!0),c}function Si(e){return e.some(t=>In(t)?!(t.type===qt||t.type===X&&!Si(t.children)):!0)?e:null}const yr=e=>e?ji(e)?Bo(e):yr(e.parent):null,wn=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yr(e.parent),$root:e=>yr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ki(e),$forceUpdate:e=>e.f||(e.f=()=>{Qr(e.update)}),$nextTick:e=>e.n||(e.n=Nn.bind(e.proxy)),$watch:e=>Gu.bind(e)}),tr=(e,t)=>e!==Se&&!e.__isScriptSetup&&_e(e,t),dd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:a,type:l,appContext:c}=e;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(tr(n,t))return a[t]=1,n[t];if(o!==Se&&_e(o,t))return a[t]=2,o[t];if(_e(r,t))return a[t]=3,r[t];if(s!==Se&&_e(s,t))return a[t]=4,s[t];br&&(a[t]=0)}}const u=wn[t];let f,d;if(u)return t==="$attrs"&&Qe(e.attrs,"get",""),u(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(s!==Se&&_e(s,t))return a[t]=4,s[t];if(d=c.config.globalProperties,_e(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return tr(o,t)?(o[t]=s,!0):n!==Se&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:a}},l){let c;return!!(s[l]||e!==Se&&l[0]!=="$"&&_e(e,l)||tr(t,l)||_e(r,l)||_e(n,l)||_e(wn,l)||_e(o.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ea(e){return ae(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let br=!0;function fd(e){const t=ki(e),s=e.proxy,n=e.ctx;br=!1,t.beforeCreate&&Ra(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:l,provide:c,inject:u,created:f,beforeMount:d,mounted:p,beforeUpdate:v,updated:m,activated:y,deactivated:O,beforeDestroy:A,beforeUnmount:_,destroyed:S,unmounted:D,render:K,renderTracked:ee,renderTriggered:se,errorCaptured:le,serverPrefetch:J,expose:de,inheritAttrs:ue,components:we,directives:Re,filters:Le}=t;if(u&&vd(u,n,null),a)for(const q in a){const fe=a[q];ie(fe)&&(n[q]=fe.bind(s))}if(o){const q=o.call(s,s);Ce(q)&&(e.data=Pt(q))}if(br=!0,r)for(const q in r){const fe=r[q],me=ie(fe)?fe.bind(s,s):ie(fe.get)?fe.get.bind(s,s):Dt,te=!ie(fe)&&ie(fe.set)?fe.set.bind(s):Dt,j=N({get:me,set:te});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>j.value,set:Z=>j.value=Z})}if(l)for(const q in l)Ci(l[q],n,s,q);if(c){const q=ie(c)?c.call(s):c;Reflect.ownKeys(q).forEach(fe=>{no(fe,q[fe])})}f&&Ra(f,e,"c");function ge(q,fe){ae(fe)?fe.forEach(me=>q(me.bind(s))):fe&&q(fe.bind(s))}if(ge(Zu,d),ge(Nt,p),ge(ed,v),ge(td,m),ge(qu,y),ge(Xu,O),ge(rd,le),ge(od,ee),ge(nd,se),ge(_i,_),ge(wi,D),ge(sd,J),ae(de))if(de.length){const q=e.exposed||(e.exposed={});de.forEach(fe=>{Object.defineProperty(q,fe,{get:()=>s[fe],set:me=>s[fe]=me,enumerable:!0})})}else e.exposed||(e.exposed={});K&&e.render===Dt&&(e.render=K),ue!=null&&(e.inheritAttrs=ue),we&&(e.components=we),Re&&(e.directives=Re),J&&gi(e)}function vd(e,t,s=Dt){ae(e)&&(e=_r(e));for(const n in e){const o=e[n];let r;Ce(o)?"default"in o?r=Ct(o.from||n,o.default,!0):r=Ct(o.from||n):r=Ct(o),tt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Ra(e,t,s){Lt(ae(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ci(e,t,s,n){let o=n.includes(".")?pi(s,n):()=>s[n];if(De(e)){const r=t[e];ie(r)&&at(o,r)}else if(ie(e))at(o,e.bind(s));else if(Ce(e))if(ae(e))e.forEach(r=>Ci(r,t,s,n));else{const r=ie(e.handler)?e.handler.bind(s):t[e.handler];ie(r)&&at(o,r,e)}}function ki(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,l=r.get(t);let c;return l?c=l:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(u=>fo(c,u,a,!0)),fo(c,t,a)),Ce(t)&&r.set(t,c),c}function fo(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&fo(e,r,s,!0),o&&o.forEach(a=>fo(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const l=md[a]||s&&s[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const md={data:Da,props:Pa,emits:Pa,methods:vn,computed:vn,beforeCreate:nt,created:nt,beforeMount:nt,mounted:nt,beforeUpdate:nt,updated:nt,beforeDestroy:nt,beforeUnmount:nt,destroyed:nt,unmounted:nt,activated:nt,deactivated:nt,errorCaptured:nt,serverPrefetch:nt,components:vn,directives:vn,watch:hd,provide:Da,inject:pd};function Da(e,t){return t?e?function(){return Je(ie(e)?e.call(this,this):e,ie(t)?t.call(this,this):t)}:t:e}function pd(e,t){return vn(_r(e),_r(t))}function _r(e){if(ae(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function nt(e,t){return e?[...new Set([].concat(e,t))]:t}function vn(e,t){return e?Je(Object.create(null),e,t):t}function Pa(e,t){return e?ae(e)&&ae(t)?[...new Set([...e,...t])]:Je(Object.create(null),Ea(e),Ea(t??{})):t}function hd(e,t){if(!e)return t;if(!t)return e;const s=Je(Object.create(null),e);for(const n in t)s[n]=nt(e[n],t[n]);return s}function $i(){return{app:null,config:{isNativeTag:Ul,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gd=0;function yd(e,t){return function(n,o=null){ie(n)||(n=Je({},n)),o!=null&&!Ce(o)&&(o=null);const r=$i(),a=new WeakSet,l=[];let c=!1;const u=r.app={_uid:gd++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:Xd,get config(){return r.config},set config(f){},use(f,...d){return a.has(f)||(f&&ie(f.install)?(a.add(f),f.install(u,...d)):ie(f)&&(a.add(f),f(u,...d))),u},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),u},component(f,d){return d?(r.components[f]=d,u):r.components[f]},directive(f,d){return d?(r.directives[f]=d,u):r.directives[f]},mount(f,d,p){if(!c){const v=u._ceVNode||pe(n,o);return v.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(v,f,p),c=!0,u._container=f,f.__vue_app__=u,Bo(v.component)}},onUnmount(f){l.push(f)},unmount(){c&&(Lt(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,d){return r.provides[f]=d,u},runWithContext(f){const d=js;js=u;try{return f()}finally{js=d}}};return u}}let js=null;const bd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${yt(t)}Modifiers`]||e[`${is(t)}Modifiers`];function _d(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Se;let o=s;const r=t.startsWith("update:"),a=r&&bd(n,t.slice(7));a&&(a.trim&&(o=s.map(f=>De(f)?f.trim():f)),a.number&&(o=s.map(Oo)));let l,c=n[l=qo(t)]||n[l=qo(yt(t))];!c&&r&&(c=n[l=qo(is(t))]),c&&Lt(c,e,6,o);const u=n[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Lt(u,e,6,o)}}const wd=new WeakMap;function Ai(e,t,s=!1){const n=s?wd:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let a={},l=!1;if(!ie(e)){const c=u=>{const f=Ai(u,t,!0);f&&(l=!0,Je(a,f))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(Ce(e)&&n.set(e,null),null):(ae(r)?r.forEach(c=>a[c]=null):Je(a,r),Ce(e)&&n.set(e,a),a)}function Do(e,t){return!e||!Ao(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,is(t))||_e(e,t))}function Ba(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:u,renderCache:f,props:d,data:p,setupState:v,ctx:m,inheritAttrs:y}=e,O=co(e);let A,_;try{if(s.shapeFlag&4){const D=o||n,K=D;A=It(u.call(K,D,f,d,v,p,m)),_=l}else{const D=t;A=It(D.length>1?D(d,{attrs:l,slots:a,emit:c}):D(d,null)),_=t.props?l:Sd(l)}}catch(D){Sn.length=0,Eo(D,e,1),A=pe(qt)}let S=A;if(_&&y!==!1){const D=Object.keys(_),{shapeFlag:K}=S;D.length&&K&7&&(r&&D.some(jr)&&(_=Cd(_,r)),S=Vs(S,_,!1,!0))}return s.dirs&&(S=Vs(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Zr(S,s.transition),A=S,co(O),A}const Sd=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ao(s))&&((t||(t={}))[s]=e[s]);return t},Cd=(e,t)=>{const s={};for(const n in e)(!jr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function kd(e,t,s){const{props:n,children:o,component:r}=e,{props:a,children:l,patchFlag:c}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?La(n,a,u):!!a;if(c&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const p=f[d];if(a[p]!==n[p]&&!Do(u,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?La(n,a,u):!0:!!a;return!1}function La(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Do(s,r))return!0}return!1}function $d({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const xi={},Ni=()=>Object.create(xi),Oi=e=>Object.getPrototypeOf(e)===xi;function Ad(e,t,s,n=!1){const o={},r=Ni();e.propsDefaults=Object.create(null),Ti(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);s?e.props=n?o:ai(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function xd(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,l=be(o),[c]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let p=f[d];if(Do(e.emitsOptions,p))continue;const v=t[p];if(c)if(_e(r,p))v!==r[p]&&(r[p]=v,u=!0);else{const m=yt(p);o[m]=wr(c,l,m,v,e,!1)}else v!==r[p]&&(r[p]=v,u=!0)}}}else{Ti(e,t,o,r)&&(u=!0);let f;for(const d in l)(!t||!_e(t,d)&&((f=is(d))===d||!_e(t,f)))&&(c?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=wr(c,l,d,void 0,e,!0)):delete o[d]);if(r!==l)for(const d in r)(!t||!_e(t,d))&&(delete r[d],u=!0)}u&&Ht(e.attrs,"set","")}function Ti(e,t,s,n){const[o,r]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(gn(c))continue;const u=t[c];let f;o&&_e(o,f=yt(c))?!r||!r.includes(f)?s[f]=u:(l||(l={}))[f]=u:Do(e.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,a=!0)}if(r){const c=be(s),u=l||Se;for(let f=0;f<r.length;f++){const d=r[f];s[d]=wr(o,c,d,u[d],e,!_e(u,d))}}return a}function wr(e,t,s,n,o,r){const a=e[s];if(a!=null){const l=_e(a,"default");if(l&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ie(c)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const f=Hn(o);n=u[s]=c.call(null,t),f()}}else n=c;o.ce&&o.ce._setProp(s,n)}a[0]&&(r&&!l?n=!1:a[1]&&(n===""||n===is(s))&&(n=!0))}return n}const Nd=new WeakMap;function Ii(e,t,s=!1){const n=s?Nd:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,a={},l=[];let c=!1;if(!ie(e)){const f=d=>{c=!0;const[p,v]=Ii(d,t,!0);Je(a,p),v&&l.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!c)return Ce(e)&&n.set(e,Ls),Ls;if(ae(r))for(let f=0;f<r.length;f++){const d=yt(r[f]);Ua(d)&&(a[d]=Se)}else if(r)for(const f in r){const d=yt(f);if(Ua(d)){const p=r[f],v=a[d]=ae(p)||ie(p)?{type:p}:Je({},p),m=v.type;let y=!1,O=!0;if(ae(m))for(let A=0;A<m.length;++A){const _=m[A],S=ie(_)&&_.name;if(S==="Boolean"){y=!0;break}else S==="String"&&(O=!1)}else y=ie(m)&&m.name==="Boolean";v[0]=y,v[1]=O,(y||_e(v,"default"))&&l.push(d)}}const u=[a,l];return Ce(e)&&n.set(e,u),u}function Ua(e){return e[0]!=="$"&&!gn(e)}const ea=e=>e==="_"||e==="_ctx"||e==="$stable",ta=e=>ae(e)?e.map(It):[It(e)],Od=(e,t,s)=>{if(t._n)return t;const n=Ku((...o)=>ta(t(...o)),s);return n._c=!1,n},Ei=(e,t,s)=>{const n=e._ctx;for(const o in e){if(ea(o))continue;const r=e[o];if(ie(r))t[o]=Od(o,r,n);else if(r!=null){const a=ta(r);t[o]=()=>a}}},Ri=(e,t)=>{const s=ta(t);e.slots.default=()=>s},Di=(e,t,s)=>{for(const n in t)(s||!ea(n))&&(e[n]=t[n])},Td=(e,t,s)=>{const n=e.slots=Ni();if(e.vnode.shapeFlag&32){const o=t._;o?(Di(n,t,s),s&&Hl(n,"_",o,!0)):Ei(t,n)}else t&&Ri(e,t)},Id=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,a=Se;if(n.shapeFlag&32){const l=t._;l?s&&l===1?r=!1:Di(o,t,s):(r=!t.$stable,Ei(t,o)),a=t}else t&&(Ri(e,t),a={default:1});if(r)for(const l in o)!ea(l)&&a[l]==null&&delete o[l]},dt=Bd;function Ed(e){return Rd(e)}function Rd(e,t){const s=To();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:a,createText:l,createComment:c,setText:u,setElementText:f,parentNode:d,nextSibling:p,setScopeId:v=Dt,insertStaticContent:m}=e,y=(w,k,I,L=null,F=null,U=null,W=void 0,V=null,x=!!k.dynamicChildren)=>{if(w===k)return;w&&!ln(w,k)&&(L=M(w),Z(w,F,U,!0),w=null),k.patchFlag===-2&&(x=!1,k.dynamicChildren=null);const{type:b,ref:$,shapeFlag:T}=k;switch(b){case Po:O(w,k,I,L);break;case qt:A(w,k,I,L);break;case oo:w==null&&_(k,I,L,W);break;case X:we(w,k,I,L,F,U,W,V,x);break;default:T&1?K(w,k,I,L,F,U,W,V,x):T&6?Re(w,k,I,L,F,U,W,V,x):(T&64||T&128)&&b.process(w,k,I,L,F,U,W,V,x,Q)}$!=null&&F?_n($,w&&w.ref,U,k||w,!k):$==null&&w&&w.ref!=null&&_n(w.ref,null,U,w,!0)},O=(w,k,I,L)=>{if(w==null)n(k.el=l(k.children),I,L);else{const F=k.el=w.el;k.children!==w.children&&u(F,k.children)}},A=(w,k,I,L)=>{w==null?n(k.el=c(k.children||""),I,L):k.el=w.el},_=(w,k,I,L)=>{[w.el,w.anchor]=m(w.children,k,I,L,w.el,w.anchor)},S=({el:w,anchor:k},I,L)=>{let F;for(;w&&w!==k;)F=p(w),n(w,I,L),w=F;n(k,I,L)},D=({el:w,anchor:k})=>{let I;for(;w&&w!==k;)I=p(w),o(w),w=I;o(k)},K=(w,k,I,L,F,U,W,V,x)=>{if(k.type==="svg"?W="svg":k.type==="math"&&(W="mathml"),w==null)ee(k,I,L,F,U,W,V,x);else{const b=w.el&&w.el._isVueCE?w.el:null;try{b&&b._beginPatch(),J(w,k,F,U,W,V,x)}finally{b&&b._endPatch()}}},ee=(w,k,I,L,F,U,W,V)=>{let x,b;const{props:$,shapeFlag:T,transition:P,dirs:H}=w;if(x=w.el=a(w.type,U,$&&$.is,$),T&8?f(x,w.children):T&16&&le(w.children,x,null,L,F,sr(w,U),W,V),H&&fs(w,null,L,"created"),se(x,w,w.scopeId,W,L),$){for(const ne in $)ne!=="value"&&!gn(ne)&&r(x,ne,null,$[ne],U,L);"value"in $&&r(x,"value",null,$.value,U),(b=$.onVnodeBeforeMount)&&Ot(b,L,w)}H&&fs(w,null,L,"beforeMount");const z=Dd(F,P);z&&P.beforeEnter(x),n(x,k,I),((b=$&&$.onVnodeMounted)||z||H)&&dt(()=>{b&&Ot(b,L,w),z&&P.enter(x),H&&fs(w,null,L,"mounted")},F)},se=(w,k,I,L,F)=>{if(I&&v(w,I),L)for(let U=0;U<L.length;U++)v(w,L[U]);if(F){let U=F.subTree;if(k===U||Ui(U.type)&&(U.ssContent===k||U.ssFallback===k)){const W=F.vnode;se(w,W,W.scopeId,W.slotScopeIds,F.parent)}}},le=(w,k,I,L,F,U,W,V,x=0)=>{for(let b=x;b<w.length;b++){const $=w[b]=V?ts(w[b]):It(w[b]);y(null,$,k,I,L,F,U,W,V)}},J=(w,k,I,L,F,U,W)=>{const V=k.el=w.el;let{patchFlag:x,dynamicChildren:b,dirs:$}=k;x|=w.patchFlag&16;const T=w.props||Se,P=k.props||Se;let H;if(I&&vs(I,!1),(H=P.onVnodeBeforeUpdate)&&Ot(H,I,k,w),$&&fs(k,w,I,"beforeUpdate"),I&&vs(I,!0),(T.innerHTML&&P.innerHTML==null||T.textContent&&P.textContent==null)&&f(V,""),b?de(w.dynamicChildren,b,V,I,L,sr(k,F),U):W||fe(w,k,V,null,I,L,sr(k,F),U,!1),x>0){if(x&16)ue(V,T,P,I,F);else if(x&2&&T.class!==P.class&&r(V,"class",null,P.class,F),x&4&&r(V,"style",T.style,P.style,F),x&8){const z=k.dynamicProps;for(let ne=0;ne<z.length;ne++){const oe=z[ne],Ne=T[oe],Ae=P[oe];(Ae!==Ne||oe==="value")&&r(V,oe,Ne,Ae,F,I)}}x&1&&w.children!==k.children&&f(V,k.children)}else!W&&b==null&&ue(V,T,P,I,F);((H=P.onVnodeUpdated)||$)&&dt(()=>{H&&Ot(H,I,k,w),$&&fs(k,w,I,"updated")},L)},de=(w,k,I,L,F,U,W)=>{for(let V=0;V<k.length;V++){const x=w[V],b=k[V],$=x.el&&(x.type===X||!ln(x,b)||x.shapeFlag&198)?d(x.el):I;y(x,b,$,null,L,F,U,W,!0)}},ue=(w,k,I,L,F)=>{if(k!==I){if(k!==Se)for(const U in k)!gn(U)&&!(U in I)&&r(w,U,k[U],null,F,L);for(const U in I){if(gn(U))continue;const W=I[U],V=k[U];W!==V&&U!=="value"&&r(w,U,V,W,F,L)}"value"in I&&r(w,"value",k.value,I.value,F)}},we=(w,k,I,L,F,U,W,V,x)=>{const b=k.el=w?w.el:l(""),$=k.anchor=w?w.anchor:l("");let{patchFlag:T,dynamicChildren:P,slotScopeIds:H}=k;H&&(V=V?V.concat(H):H),w==null?(n(b,I,L),n($,I,L),le(k.children||[],I,$,F,U,W,V,x)):T>0&&T&64&&P&&w.dynamicChildren&&w.dynamicChildren.length===P.length?(de(w.dynamicChildren,P,I,F,U,W,V),(k.key!=null||F&&k===F.subTree)&&Pi(w,k,!0)):fe(w,k,I,$,F,U,W,V,x)},Re=(w,k,I,L,F,U,W,V,x)=>{k.slotScopeIds=V,w==null?k.shapeFlag&512?F.ctx.activate(k,I,L,W,x):Le(k,I,L,F,U,W,x):Ke(w,k,x)},Le=(w,k,I,L,F,U,W)=>{const V=w.component=Kd(w,L,F);if(yi(w)&&(V.ctx.renderer=Q),Wd(V,!1,W),V.asyncDep){if(F&&F.registerDep(V,ge,W),!w.el){const x=V.subTree=pe(qt);A(null,x,k,I),w.placeholder=x.el}}else ge(V,w,k,I,F,U,W)},Ke=(w,k,I)=>{const L=k.component=w.component;if(kd(w,k,I))if(L.asyncDep&&!L.asyncResolved){q(L,k,I);return}else L.next=k,L.update();else k.el=w.el,L.vnode=k},ge=(w,k,I,L,F,U,W)=>{const V=()=>{if(w.isMounted){let{next:T,bu:P,u:H,parent:z,vnode:ne}=w;{const st=Bi(w);if(st){T&&(T.el=ne.el,q(w,T,W)),st.asyncDep.then(()=>{w.isUnmounted||V()});return}}let oe=T,Ne;vs(w,!1),T?(T.el=ne.el,q(w,T,W)):T=ne,P&&so(P),(Ne=T.props&&T.props.onVnodeBeforeUpdate)&&Ot(Ne,z,T,ne),vs(w,!0);const Ae=Ba(w),We=w.subTree;w.subTree=Ae,y(We,Ae,d(We.el),M(We),w,F,U),T.el=Ae.el,oe===null&&$d(w,Ae.el),H&&dt(H,F),(Ne=T.props&&T.props.onVnodeUpdated)&&dt(()=>Ot(Ne,z,T,ne),F)}else{let T;const{el:P,props:H}=k,{bm:z,m:ne,parent:oe,root:Ne,type:Ae}=w,We=Fs(k);vs(w,!1),z&&so(z),!We&&(T=H&&H.onVnodeBeforeMount)&&Ot(T,oe,k),vs(w,!0);{Ne.ce&&Ne.ce._def.shadowRoot!==!1&&Ne.ce._injectChildStyle(Ae);const st=w.subTree=Ba(w);y(null,st,I,L,w,F,U),k.el=st.el}if(ne&&dt(ne,F),!We&&(T=H&&H.onVnodeMounted)){const st=k;dt(()=>Ot(T,oe,st),F)}(k.shapeFlag&256||oe&&Fs(oe.vnode)&&oe.vnode.shapeFlag&256)&&w.a&&dt(w.a,F),w.isMounted=!0,k=I=L=null}};w.scope.on();const x=w.effect=new Gl(V);w.scope.off();const b=w.update=x.run.bind(x),$=w.job=x.runIfDirty.bind(x);$.i=w,$.id=w.uid,x.scheduler=()=>Qr($),vs(w,!0),b()},q=(w,k,I)=>{k.component=w;const L=w.vnode.props;w.vnode=k,w.next=null,xd(w,k.props,L,I),Id(w,k.children,I),zt(),Oa(w),Jt()},fe=(w,k,I,L,F,U,W,V,x=!1)=>{const b=w&&w.children,$=w?w.shapeFlag:0,T=k.children,{patchFlag:P,shapeFlag:H}=k;if(P>0){if(P&128){te(b,T,I,L,F,U,W,V,x);return}else if(P&256){me(b,T,I,L,F,U,W,V,x);return}}H&8?($&16&&qe(b,F,U),T!==b&&f(I,T)):$&16?H&16?te(b,T,I,L,F,U,W,V,x):qe(b,F,U,!0):($&8&&f(I,""),H&16&&le(T,I,L,F,U,W,V,x))},me=(w,k,I,L,F,U,W,V,x)=>{w=w||Ls,k=k||Ls;const b=w.length,$=k.length,T=Math.min(b,$);let P;for(P=0;P<T;P++){const H=k[P]=x?ts(k[P]):It(k[P]);y(w[P],H,I,null,F,U,W,V,x)}b>$?qe(w,F,U,!0,!1,T):le(k,I,L,F,U,W,V,x,T)},te=(w,k,I,L,F,U,W,V,x)=>{let b=0;const $=k.length;let T=w.length-1,P=$-1;for(;b<=T&&b<=P;){const H=w[b],z=k[b]=x?ts(k[b]):It(k[b]);if(ln(H,z))y(H,z,I,null,F,U,W,V,x);else break;b++}for(;b<=T&&b<=P;){const H=w[T],z=k[P]=x?ts(k[P]):It(k[P]);if(ln(H,z))y(H,z,I,null,F,U,W,V,x);else break;T--,P--}if(b>T){if(b<=P){const H=P+1,z=H<$?k[H].el:L;for(;b<=P;)y(null,k[b]=x?ts(k[b]):It(k[b]),I,z,F,U,W,V,x),b++}}else if(b>P)for(;b<=T;)Z(w[b],F,U,!0),b++;else{const H=b,z=b,ne=new Map;for(b=z;b<=P;b++){const Te=k[b]=x?ts(k[b]):It(k[b]);Te.key!=null&&ne.set(Te.key,b)}let oe,Ne=0;const Ae=P-z+1;let We=!1,st=0;const _t=new Array(Ae);for(b=0;b<Ae;b++)_t[b]=0;for(b=H;b<=T;b++){const Te=w[b];if(Ne>=Ae){Z(Te,F,U,!0);continue}let Ue;if(Te.key!=null)Ue=ne.get(Te.key);else for(oe=z;oe<=P;oe++)if(_t[oe-z]===0&&ln(Te,k[oe])){Ue=oe;break}Ue===void 0?Z(Te,F,U,!0):(_t[Ue-z]=b+1,Ue>=st?st=Ue:We=!0,y(Te,k[Ue],I,null,F,U,W,V,x),Ne++)}const pt=We?Pd(_t):Ls;for(oe=pt.length-1,b=Ae-1;b>=0;b--){const Te=z+b,Ue=k[Te],wt=k[Te+1],on=Te+1<$?wt.el||Li(wt):L;_t[b]===0?y(null,Ue,I,on,F,U,W,V,x):We&&(oe<0||b!==pt[oe]?j(Ue,I,on,2):oe--)}}},j=(w,k,I,L,F=null)=>{const{el:U,type:W,transition:V,children:x,shapeFlag:b}=w;if(b&6){j(w.component.subTree,k,I,L);return}if(b&128){w.suspense.move(k,I,L);return}if(b&64){W.move(w,k,I,Q);return}if(W===X){n(U,k,I);for(let T=0;T<x.length;T++)j(x[T],k,I,L);n(w.anchor,k,I);return}if(W===oo){S(w,k,I);return}if(L!==2&&b&1&&V)if(L===0)V.beforeEnter(U),n(U,k,I),dt(()=>V.enter(U),F);else{const{leave:T,delayLeave:P,afterLeave:H}=V,z=()=>{w.ctx.isUnmounted?o(U):n(U,k,I)},ne=()=>{U._isLeaving&&U[Yu](!0),T(U,()=>{z(),H&&H()})};P?P(U,z,ne):ne()}else n(U,k,I)},Z=(w,k,I,L=!1,F=!1)=>{const{type:U,props:W,ref:V,children:x,dynamicChildren:b,shapeFlag:$,patchFlag:T,dirs:P,cacheIndex:H}=w;if(T===-2&&(F=!1),V!=null&&(zt(),_n(V,null,I,w,!0),Jt()),H!=null&&(k.renderCache[H]=void 0),$&256){k.ctx.deactivate(w);return}const z=$&1&&P,ne=!Fs(w);let oe;if(ne&&(oe=W&&W.onVnodeBeforeUnmount)&&Ot(oe,k,w),$&6)ut(w.component,I,L);else{if($&128){w.suspense.unmount(I,L);return}z&&fs(w,null,k,"beforeUnmount"),$&64?w.type.remove(w,k,I,Q,L):b&&!b.hasOnce&&(U!==X||T>0&&T&64)?qe(b,k,I,!1,!0):(U===X&&T&384||!F&&$&16)&&qe(x,k,I),L&&Ve(w)}(ne&&(oe=W&&W.onVnodeUnmounted)||z)&&dt(()=>{oe&&Ot(oe,k,w),z&&fs(w,null,k,"unmounted")},I)},Ve=w=>{const{type:k,el:I,anchor:L,transition:F}=w;if(k===X){lt(I,L);return}if(k===oo){D(w);return}const U=()=>{o(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(w.shapeFlag&1&&F&&!F.persisted){const{leave:W,delayLeave:V}=F,x=()=>W(I,U);V?V(w.el,U,x):x()}else U()},lt=(w,k)=>{let I;for(;w!==k;)I=p(w),o(w),w=I;o(k)},ut=(w,k,I)=>{const{bum:L,scope:F,job:U,subTree:W,um:V,m:x,a:b}=w;Ma(x),Ma(b),L&&so(L),F.stop(),U&&(U.flags|=8,Z(W,w,k,I)),V&&dt(V,k),dt(()=>{w.isUnmounted=!0},k)},qe=(w,k,I,L=!1,F=!1,U=0)=>{for(let W=U;W<w.length;W++)Z(w[W],k,I,L,F)},M=w=>{if(w.shapeFlag&6)return M(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const k=p(w.anchor||w.el),I=k&&k[zu];return I?p(I):k};let Y=!1;const G=(w,k,I)=>{let L;w==null?k._vnode&&(Z(k._vnode,null,null,!0),L=k._vnode.component):y(k._vnode||null,w,k,null,null,null,I),k._vnode=w,Y||(Y=!0,Oa(L),di(),Y=!1)},Q={p:y,um:Z,m:j,r:Ve,mt:Le,mc:le,pc:fe,pbc:de,n:M,o:e};return{render:G,hydrate:void 0,createApp:yd(G)}}function sr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function vs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Pi(e,t,s=!1){const n=e.children,o=t.children;if(ae(n)&&ae(o))for(let r=0;r<n.length;r++){const a=n[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=ts(o[r]),l.el=a.el),!s&&l.patchFlag!==-2&&Pi(a,l)),l.type===Po&&(l.patchFlag!==-1?l.el=a.el:l.__elIndex=r+(e.type===X?1:0)),l.type===qt&&!l.el&&(l.el=a.el)}}function Pd(e){const t=e.slice(),s=[0];let n,o,r,a,l;const c=e.length;for(n=0;n<c;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(r=0,a=s.length-1;r<a;)l=r+a>>1,e[s[l]]<u?r=l+1:a=l;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,a=s[r-1];r-- >0;)s[r]=a,a=t[a];return s}function Bi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bi(t)}function Ma(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Li(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Li(t.subTree):null}const Ui=e=>e.__isSuspense;function Bd(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):Hu(e)}const X=Symbol.for("v-fgt"),Po=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),oo=Symbol.for("v-stc"),Sn=[];let mt=null;function h(e=!1){Sn.push(mt=e?null:[])}function Ld(){Sn.pop(),mt=Sn[Sn.length-1]||null}let Tn=1;function vo(e,t=!1){Tn+=e,e<0&&mt&&t&&(mt.hasOnce=!0)}function Mi(e){return e.dynamicChildren=Tn>0?mt||Ls:null,Ld(),Tn>0&&mt&&mt.push(e),e}function g(e,t,s,n,o,r){return Mi(i(e,t,s,n,o,r,!0))}function Oe(e,t,s,n,o){return Mi(pe(e,t,s,n,o,!0))}function In(e){return e?e.__v_isVNode===!0:!1}function ln(e,t){return e.type===t.type&&e.key===t.key}const Fi=({key:e})=>e??null,ro=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?De(e)||tt(e)||ie(e)?{i:Ge,r:e,k:t,f:!!s}:e:null);function i(e,t=null,s=null,n=0,o=null,r=e===X?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Fi(t),ref:t&&ro(t),scopeId:vi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ge};return l?(sa(c,s),r&128&&e.normalize(c)):s&&(c.shapeFlag|=De(s)?8:16),Tn>0&&!a&&mt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&mt.push(c),c}const pe=Ud;function Ud(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===id)&&(e=qt),In(e)){const l=Vs(e,t,!0);return s&&sa(l,s),Tn>0&&!r&&mt&&(l.shapeFlag&6?mt[mt.indexOf(e)]=l:mt.push(l)),l.patchFlag=-2,l}if(qd(e)&&(e=e.__vccOpts),t){t=Md(t);let{class:l,style:c}=t;l&&!De(l)&&(t.class=re(l)),Ce(c)&&(Xr(c)&&!ae(c)&&(c=Je({},c)),t.style=cs(c))}const a=De(e)?1:Ui(e)?128:Ju(e)?64:Ce(e)?4:ie(e)?2:0;return i(e,t,s,n,o,a,r,!0)}function Md(e){return e?Xr(e)||Oi(e)?Je({},e):e:null}function Vs(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:a,children:l,transition:c}=e,u=t?Fd(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Fi(u),ref:t&&t.ref?s&&r?ae(r)?r.concat(ro(t)):[r,ro(t)]:ro(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==X?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vs(e.ssContent),ssFallback:e.ssFallback&&Vs(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&Zr(f,c.clone(f)),f}function En(e=" ",t=0){return pe(Po,null,e,t)}function mo(e,t){const s=pe(oo,null,e);return s.staticCount=t,s}function B(e="",t=!1){return t?(h(),Oe(qt,null,e)):pe(qt,null,e)}function It(e){return e==null||typeof e=="boolean"?pe(qt):ae(e)?pe(X,null,e.slice()):In(e)?ts(e):pe(Po,null,String(e))}function ts(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vs(e)}function sa(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ae(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),sa(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Oi(t)?t._ctx=Ge:o===3&&Ge&&(Ge.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ie(t)?(t={default:t,_ctx:Ge},s=32):(t=String(t),n&64?(s=16,t=[En(t)]):s=8);e.children=t,e.shapeFlag|=s}function Fd(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=re([t.class,n.class]));else if(o==="style")t.style=cs([t.style,n.style]);else if(Ao(o)){const r=t[o],a=n[o];a&&r!==a&&!(ae(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=n[o])}return t}function Ot(e,t,s,n=null){Lt(e,t,7,[s,n])}const jd=$i();let Hd=0;function Kd(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||jd,r={uid:Hd++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ii(n,o),emitsOptions:Ai(n,o),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=_d.bind(null,r),e.ce&&e.ce(r),r}let et=null;const Vd=()=>et||Ge;let po,Sr;{const e=To(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(a=>a(r)):o[0](r)}};po=t("__VUE_INSTANCE_SETTERS__",s=>et=s),Sr=t("__VUE_SSR_SETTERS__",s=>Rn=s)}const Hn=e=>{const t=et;return po(e),e.scope.on(),()=>{e.scope.off(),po(t)}},Fa=()=>{et&&et.scope.off(),po(null)};function ji(e){return e.vnode.shapeFlag&4}let Rn=!1;function Wd(e,t=!1,s=!1){t&&Sr(t);const{props:n,children:o}=e.vnode,r=ji(e);Ad(e,n,r,t),Td(e,o,s||t);const a=r?Gd(e,t):void 0;return t&&Sr(!1),a}function Gd(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dd);const{setup:n}=s;if(n){zt();const o=e.setupContext=n.length>1?Jd(e):null,r=Hn(e),a=jn(n,e,0,[e.props,o]),l=Ml(a);if(Jt(),r(),(l||e.sp)&&!Fs(e)&&gi(e),l){if(a.then(Fa,Fa),t)return a.then(c=>{ja(e,c)}).catch(c=>{Eo(c,e,0)});e.asyncDep=a}else ja(e,a)}else Hi(e)}function ja(e,t,s){ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ce(t)&&(e.setupState=ii(t)),Hi(e)}function Hi(e,t,s){const n=e.type;e.render||(e.render=n.render||Dt);{const o=Hn(e);zt();try{fd(e)}finally{Jt(),o()}}}const zd={get(e,t){return Qe(e,"get",""),e[t]}};function Jd(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,zd),slots:e.slots,emit:e.emit,expose:t}}function Bo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ii(Eu(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in wn)return wn[s](e)},has(t,s){return s in t||s in wn}})):e.proxy}function Yd(e,t=!0){return ie(e)?e.displayName||e.name:e.name||t&&e.__name}function qd(e){return ie(e)&&"__vccOpts"in e}const N=(e,t)=>Lu(e,t,Rn);function Ki(e,t,s){try{vo(-1);const n=arguments.length;return n===2?Ce(t)&&!ae(t)?In(t)?pe(e,null,[t]):pe(e,t):pe(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&In(s)&&(s=[s]),pe(e,t,s))}finally{vo(1)}}const Xd="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cr;const Ha=typeof window<"u"&&window.trustedTypes;if(Ha)try{Cr=Ha.createPolicy("vue",{createHTML:e=>e})}catch{}const Vi=Cr?e=>Cr.createHTML(e):e=>e,Qd="http://www.w3.org/2000/svg",Zd="http://www.w3.org/1998/Math/MathML",jt=typeof document<"u"?document:null,Ka=jt&&jt.createElement("template"),ef={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?jt.createElementNS(Qd,e):t==="mathml"?jt.createElementNS(Zd,e):s?jt.createElement(e,{is:s}):jt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>jt.createTextNode(e),createComment:e=>jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const a=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Ka.innerHTML=Vi(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const l=Ka.content;if(n==="svg"||n==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},tf=Symbol("_vtc");function sf(e,t,s){const n=e[tf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Va=Symbol("_vod"),nf=Symbol("_vsh"),of=Symbol(""),rf=/(?:^|;)\s*display\s*:/;function af(e,t,s){const n=e.style,o=De(s);let r=!1;if(s&&!o){if(t)if(De(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();s[l]==null&&ao(n,l,"")}else for(const a in t)s[a]==null&&ao(n,a,"");for(const a in s)a==="display"&&(r=!0),ao(n,a,s[a])}else if(o){if(t!==s){const a=n[of];a&&(s+=";"+a),n.cssText=s,r=rf.test(s)}}else t&&e.removeAttribute("style");Va in e&&(e[Va]=r?n.display:"",e[nf]&&(n.display="none"))}const Wa=/\s*!important$/;function ao(e,t,s){if(ae(s))s.forEach(n=>ao(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=lf(e,t);Wa.test(s)?e.setProperty(is(n),s.replace(Wa,""),"important"):e[n]=s}}const Ga=["Webkit","Moz","ms"],nr={};function lf(e,t){const s=nr[t];if(s)return s;let n=yt(t);if(n!=="filter"&&n in e)return nr[t]=n;n=No(n);for(let o=0;o<Ga.length;o++){const r=Ga[o]+n;if(r in e)return nr[t]=r}return t}const za="http://www.w3.org/1999/xlink";function Ja(e,t,s,n,o,r=uu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(za,t.slice(6,t.length)):e.setAttributeNS(za,t,s):s==null||r&&!Kl(s)?e.removeAttribute(t):e.setAttribute(t,r?"":kt(s)?String(s):s)}function Ya(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Vi(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(l!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let a=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=Kl(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(o||t)}function ns(e,t,s,n){e.addEventListener(t,s,n)}function cf(e,t,s,n){e.removeEventListener(t,s,n)}const qa=Symbol("_vei");function uf(e,t,s,n,o=null){const r=e[qa]||(e[qa]={}),a=r[t];if(n&&a)a.value=n;else{const[l,c]=df(t);if(n){const u=r[t]=mf(n,o);ns(e,l,u,c)}else a&&(cf(e,l,a,c),r[t]=void 0)}}const Xa=/(?:Once|Passive|Capture)$/;function df(e){let t;if(Xa.test(e)){t={};let n;for(;n=e.match(Xa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):is(e.slice(2)),t]}let or=0;const ff=Promise.resolve(),vf=()=>or||(ff.then(()=>or=0),or=Date.now());function mf(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Lt(pf(n,s.value),t,5,[n])};return s.value=e,s.attached=vf(),s}function pf(e,t){if(ae(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Qa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hf=(e,t,s,n,o,r)=>{const a=o==="svg";t==="class"?sf(e,n,a):t==="style"?af(e,s,n):Ao(t)?jr(t)||uf(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gf(e,t,n,a))?(Ya(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ja(e,t,n,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!De(n))?Ya(e,yt(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ja(e,t,n,a))};function gf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Qa(t)&&ie(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Qa(t)&&De(s)?!1:t in e}const Ws=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?s=>so(t,s):t};function yf(e){e.target.composing=!0}function Za(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wt=Symbol("_assign");function el(e,t,s){return t&&(e=e.trim()),s&&(e=Oo(e)),e}const Rt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Wt]=Ws(o);const r=n||o.props&&o.props.type==="number";ns(e,t?"change":"input",a=>{a.target.composing||e[Wt](el(e.value,s,r))}),(s||r)&&ns(e,"change",()=>{e.value=el(e.value,s,r)}),t||(ns(e,"compositionstart",yf),ns(e,"compositionend",Za),ns(e,"change",Za))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},a){if(e[Wt]=Ws(a),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?Oo(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===c)||(e.value=c))}},Lo={deep:!0,created(e,t,s){e[Wt]=Ws(s),ns(e,"change",()=>{const n=e._modelValue,o=Dn(e),r=e.checked,a=e[Wt];if(ae(n)){const l=Vr(n,o),c=l!==-1;if(r&&!c)a(n.concat(o));else if(!r&&c){const u=[...n];u.splice(l,1),a(u)}}else if(tn(n)){const l=new Set(n);r?l.add(o):l.delete(o),a(l)}else a(Gi(e,r))})},mounted:tl,beforeUpdate(e,t,s){e[Wt]=Ws(s),tl(e,t,s)}};function tl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ae(t))o=Vr(t,n.props.value)>-1;else if(tn(t))o=t.has(n.props.value);else{if(t===s)return;o=Fn(t,Gi(e,!0))}e.checked!==o&&(e.checked=o)}const Wi={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=tn(t);ns(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?Oo(Dn(a)):Dn(a));e[Wt](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Nn(()=>{e._assigning=!1})}),e[Wt]=Ws(n)},mounted(e,{value:t}){sl(e,t)},beforeUpdate(e,t,s){e[Wt]=Ws(s)},updated(e,{value:t}){e._assigning||sl(e,t)}};function sl(e,t){const s=e.multiple,n=ae(t);if(!(s&&!n&&!tn(t))){for(let o=0,r=e.options.length;o<r;o++){const a=e.options[o],l=Dn(a);if(s)if(n){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(u=>String(u)===String(l)):a.selected=Vr(t,l)>-1}else a.selected=t.has(l);else if(Fn(Dn(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Dn(e){return"_value"in e?e._value:e.value}function Gi(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const bf=["ctrl","shift","alt","meta"],_f={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bf.some(s=>e[`${s}Key`]&&!t.includes(s))},Ut=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let a=0;a<t.length;a++){const l=_f[t[a]];if(l&&l(o,t))return}return e(o,...r)})},wf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zi=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const r=is(o.key);if(t.some(a=>a===r||wf[a]===r))return e(o)})},Sf=Je({patchProp:hf},ef);let nl;function Cf(){return nl||(nl=Ed(Sf))}const kf=(...e)=>{const t=Cf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Af(n);if(!o)return;const r=t._component;!ie(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=s(o,!1,$f(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function $f(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Af(e){return De(e)?document.querySelector(e):e}const he=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},xf={};function Nf(e,t){const s=ld("router-view");return h(),Oe(s)}const Of=he(xf,[["render",Nf]]),Tf="modulepreload",If=function(e){return"/"+e},ol={},Ef=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(s.map(c=>{if(c=If(c),c in ol)return;ol[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Tf,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((p,v)=>{d.addEventListener("load",p),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Is=typeof document<"u";function Ji(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ji(e.default)}const ye=Object.assign;function rr(e,t){const s={};for(const n in t){const o=t[n];s[n]=At(o)?o.map(e):e(o)}return s}const Cn=()=>{},At=Array.isArray;function rl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Yi=/#/g,Df=/&/g,Pf=/\//g,Bf=/=/g,Lf=/\?/g,qi=/\+/g,Uf=/%5B/g,Mf=/%5D/g,Xi=/%5E/g,Ff=/%60/g,Qi=/%7B/g,jf=/%7C/g,Zi=/%7D/g,Hf=/%20/g;function na(e){return e==null?"":encodeURI(""+e).replace(jf,"|").replace(Uf,"[").replace(Mf,"]")}function Kf(e){return na(e).replace(Qi,"{").replace(Zi,"}").replace(Xi,"^")}function kr(e){return na(e).replace(qi,"%2B").replace(Hf,"+").replace(Yi,"%23").replace(Df,"%26").replace(Ff,"`").replace(Qi,"{").replace(Zi,"}").replace(Xi,"^")}function Vf(e){return kr(e).replace(Bf,"%3D")}function Wf(e){return na(e).replace(Yi,"%23").replace(Lf,"%3F")}function Gf(e){return Wf(e).replace(Pf,"%2F")}function Pn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const zf=/\/$/,Jf=e=>e.replace(zf,"");function ar(e,t,s="/"){let n,o={},r="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(n=t.slice(0,c),r=t.slice(c,l>0?l:t.length),o=e(r.slice(1))),l>=0&&(n=n||t.slice(0,l),a=t.slice(l,t.length)),n=Qf(n??t,s),{fullPath:n+r+a,path:n,query:o,hash:Pn(a)}}function Yf(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function al(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function qf(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&Gs(t.matched[n],s.matched[o])&&ec(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Gs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ec(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Xf(e[s],t[s]))return!1;return!0}function Xf(e,t){return At(e)?ll(e,t):At(t)?ll(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function ll(e,t){return At(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Qf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let r=s.length-1,a,l;for(a=0;a<n.length;a++)if(l=n[a],l!==".")if(l==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const Qt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let $r=function(e){return e.pop="pop",e.push="push",e}({}),lr=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Zf(e){if(!e)if(Is){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jf(e)}const ev=/^[^#]+#/;function tv(e,t){return e.replace(ev,"#")+t}function sv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Uo=()=>({left:window.scrollX,top:window.scrollY});function nv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=sv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function il(e,t){return(history.state?history.state.position-t:-1)+e}const Ar=new Map;function ov(e,t){Ar.set(e,t)}function rv(e){const t=Ar.get(e);return Ar.delete(e),t}function av(e){return typeof e=="string"||e&&typeof e=="object"}function tc(e){return typeof e=="string"||typeof e=="symbol"}let Ie=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const sc=Symbol("");Ie.MATCHER_NOT_FOUND+"",Ie.NAVIGATION_GUARD_REDIRECT+"",Ie.NAVIGATION_ABORTED+"",Ie.NAVIGATION_CANCELLED+"",Ie.NAVIGATION_DUPLICATED+"";function zs(e,t){return ye(new Error,{type:e,[sc]:!0},t)}function Ft(e,t){return e instanceof Error&&sc in e&&(t==null||!!(e.type&t))}const lv=["params","query","hash"];function iv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of lv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function cv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(qi," "),r=o.indexOf("="),a=Pn(r<0?o:o.slice(0,r)),l=r<0?null:Pn(o.slice(r+1));if(a in t){let c=t[a];At(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function cl(e){let t="";for(let s in e){const n=e[s];if(s=Vf(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(At(n)?n.map(o=>o&&kr(o)):[n&&kr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function uv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=At(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const dv=Symbol(""),ul=Symbol(""),Mo=Symbol(""),oa=Symbol(""),xr=Symbol("");function cn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function ss(e,t,s,n,o,r=a=>a()){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const u=p=>{p===!1?c(zs(Ie.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?c(p):av(p)?c(zs(Ie.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(a&&n.enterCallbacks[o]===a&&typeof p=="function"&&a.push(p),l())},f=r(()=>e.call(n&&n.instances[o],t,s,u));let d=Promise.resolve(f);e.length<3&&(d=d.then(u)),d.catch(p=>c(p))})}function ir(e,t,s,n,o=r=>r()){const r=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(Ji(c)){const u=(c.__vccOpts||c)[t];u&&r.push(ss(u,s,n,a,l,o))}else{let u=c();r.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const d=Rf(f)?f.default:f;a.mods[l]=f,a.components[l]=d;const p=(d.__vccOpts||d)[t];return p&&ss(p,s,n,a,l,o)()}))}}return r}function fv(e,t){const s=[],n=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const l=t.matched[a];l&&(e.matched.find(u=>Gs(u,l))?n.push(l):s.push(l));const c=e.matched[a];c&&(t.matched.find(u=>Gs(u,c))||o.push(c))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let vv=()=>location.protocol+"//"+location.host;function nc(e,t){const{pathname:s,search:n,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),al(l,"")}return al(s,e)+n+o}function mv(e,t,s,n){let o=[],r=[],a=null;const l=({state:p})=>{const v=nc(e,location),m=s.value,y=t.value;let O=0;if(p){if(s.value=v,t.value=p,a&&a===m){a=null;return}O=y?p.position-y.position:0}else n(v);o.forEach(A=>{A(s.value,m,{delta:O,type:$r.pop,direction:O?O>0?lr.forward:lr.back:lr.unknown})})};function c(){a=s.value}function u(p){o.push(p);const v=()=>{const m=o.indexOf(p);m>-1&&o.splice(m,1)};return r.push(v),v}function f(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(ye({},p.state,{scroll:Uo()}),"")}}function d(){for(const p of r)p();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:u,destroy:d}}function dl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Uo():null}}function pv(e){const{history:t,location:s}=window,n={value:nc(e,s)},o={value:t.state};o.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,u,f){const d=e.indexOf("#"),p=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+c:vv()+e+c;try{t[f?"replaceState":"pushState"](u,"",p),o.value=u}catch(v){console.error(v),s[f?"replace":"assign"](p)}}function a(c,u){r(c,ye({},t.state,dl(o.value.back,c,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=c}function l(c,u){const f=ye({},o.value,t.state,{forward:c,scroll:Uo()});r(f.current,f,!0),r(c,ye({},dl(n.value,c,null),{position:f.position+1},u),!1),n.value=c}return{location:n,state:o,push:l,replace:a}}function hv(e){e=Zf(e);const t=pv(e),s=mv(e,t.state,t.location,t.replace);function n(r,a=!0){a||s.pauseListeners(),history.go(r)}const o=ye({location:"",base:e,go:n,createHref:tv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function gv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),hv(e)}let ys=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Be=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Be||{});const yv={type:ys.Static,value:""},bv=/[a-zA-Z0-9_]/;function _v(e){if(!e)return[[]];if(e==="/")return[[yv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=Be.Static,n=s;const o=[];let r;function a(){r&&o.push(r),r=[]}let l=0,c,u="",f="";function d(){u&&(s===Be.Static?r.push({type:ys.Static,value:u}):s===Be.Param||s===Be.ParamRegExp||s===Be.ParamRegExpEnd?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ys.Param,value:u,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&s!==Be.ParamRegExp){n=s,s=Be.EscapeNext;continue}switch(s){case Be.Static:c==="/"?(u&&d(),a()):c===":"?(d(),s=Be.Param):p();break;case Be.EscapeNext:p(),s=n;break;case Be.Param:c==="("?s=Be.ParamRegExp:bv.test(c)?p():(d(),s=Be.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Be.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:s=Be.ParamRegExpEnd:f+=c;break;case Be.ParamRegExpEnd:d(),s=Be.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,f="";break;default:t("Unknown state");break}}return s===Be.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),a(),o}const fl="[^/]+?",wv={sensitive:!1,strict:!1,start:!0,end:!0};var ot=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ot||{});const Sv=/[.+*?^${}()[\]/\\]/g;function Cv(e,t){const s=ye({},wv,t),n=[];let o=s.start?"^":"";const r=[];for(const u of e){const f=u.length?[]:[ot.Root];s.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const p=u[d];let v=ot.Segment+(s.sensitive?ot.BonusCaseSensitive:0);if(p.type===ys.Static)d||(o+="/"),o+=p.value.replace(Sv,"\\$&"),v+=ot.Static;else if(p.type===ys.Param){const{value:m,repeatable:y,optional:O,regexp:A}=p;r.push({name:m,repeatable:y,optional:O});const _=A||fl;if(_!==fl){v+=ot.BonusCustomRegExp;try{`${_}`}catch(D){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+D.message)}}let S=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(S=O&&u.length<2?`(?:/${S})`:"/"+S),O&&(S+="?"),o+=S,v+=ot.Dynamic,O&&(v+=ot.BonusOptional),y&&(v+=ot.BonusRepeatable),_===".*"&&(v+=ot.BonusWildcard)}f.push(v)}n.push(f)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=ot.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,s.sensitive?"":"i");function l(u){const f=u.match(a),d={};if(!f)return null;for(let p=1;p<f.length;p++){const v=f[p]||"",m=r[p-1];d[m.name]=v&&m.repeatable?v.split("/"):v}return d}function c(u){let f="",d=!1;for(const p of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const v of p)if(v.type===ys.Static)f+=v.value;else if(v.type===ys.Param){const{value:m,repeatable:y,optional:O}=v,A=m in u?u[m]:"";if(At(A)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=At(A)?A.join("/"):A;if(!_)if(O)p.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);f+=_}}return f||"/"}return{re:a,score:n,keys:r,parse:l,stringify:c}}function kv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===ot.Static+ot.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ot.Static+ot.Segment?1:-1:0}function oc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const r=kv(n[s],o[s]);if(r)return r;s++}if(Math.abs(o.length-n.length)===1){if(vl(n))return 1;if(vl(o))return-1}return o.length-n.length}function vl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const $v={strict:!1,end:!0,sensitive:!1};function Av(e,t,s){const n=Cv(_v(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function xv(e,t){const s=[],n=new Map;t=rl($v,t);function o(d){return n.get(d)}function r(d,p,v){const m=!v,y=pl(d);y.aliasOf=v&&v.record;const O=rl(t,d),A=[y];if("alias"in d){const D=typeof d.alias=="string"?[d.alias]:d.alias;for(const K of D)A.push(pl(ye({},y,{components:v?v.record.components:y.components,path:K,aliasOf:v?v.record:y})))}let _,S;for(const D of A){const{path:K}=D;if(p&&K[0]!=="/"){const ee=p.record.path,se=ee[ee.length-1]==="/"?"":"/";D.path=p.record.path+(K&&se+K)}if(_=Av(D,p,O),v?v.alias.push(_):(S=S||_,S!==_&&S.alias.push(_),m&&d.name&&!hl(_)&&a(d.name)),rc(_)&&c(_),y.children){const ee=y.children;for(let se=0;se<ee.length;se++)r(ee[se],_,v&&v.children[se])}v=v||_}return S?()=>{a(S)}:Cn}function a(d){if(tc(d)){const p=n.get(d);p&&(n.delete(d),s.splice(s.indexOf(p),1),p.children.forEach(a),p.alias.forEach(a))}else{const p=s.indexOf(d);p>-1&&(s.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function l(){return s}function c(d){const p=Tv(d,s);s.splice(p,0,d),d.record.name&&!hl(d)&&n.set(d.record.name,d)}function u(d,p){let v,m={},y,O;if("name"in d&&d.name){if(v=n.get(d.name),!v)throw zs(Ie.MATCHER_NOT_FOUND,{location:d});O=v.record.name,m=ye(ml(p.params,v.keys.filter(S=>!S.optional).concat(v.parent?v.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),d.params&&ml(d.params,v.keys.map(S=>S.name))),y=v.stringify(m)}else if(d.path!=null)y=d.path,v=s.find(S=>S.re.test(y)),v&&(m=v.parse(y),O=v.record.name);else{if(v=p.name?n.get(p.name):s.find(S=>S.re.test(p.path)),!v)throw zs(Ie.MATCHER_NOT_FOUND,{location:d,currentLocation:p});O=v.record.name,m=ye({},p.params,d.params),y=v.stringify(m)}const A=[];let _=v;for(;_;)A.unshift(_.record),_=_.parent;return{name:O,path:y,params:m,matched:A,meta:Ov(A)}}e.forEach(d=>r(d));function f(){s.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:f,getRoutes:l,getRecordMatcher:o}}function ml(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function pl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Nv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Nv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function hl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ov(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function Tv(e,t){let s=0,n=t.length;for(;s!==n;){const r=s+n>>1;oc(e,t[r])<0?n=r:s=r+1}const o=Iv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Iv(e){let t=e;for(;t=t.parent;)if(rc(t)&&oc(e,t)===0)return t}function rc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function gl(e){const t=Ct(Mo),s=Ct(oa),n=N(()=>{const c=R(e.to);return t.resolve(c)}),o=N(()=>{const{matched:c}=n.value,{length:u}=c,f=c[u-1],d=s.matched;if(!f||!d.length)return-1;const p=d.findIndex(Gs.bind(null,f));if(p>-1)return p;const v=yl(c[u-2]);return u>1&&yl(f)===v&&d[d.length-1].path!==v?d.findIndex(Gs.bind(null,c[u-2])):p}),r=N(()=>o.value>-1&&Bv(s.params,n.value.params)),a=N(()=>o.value>-1&&o.value===s.matched.length-1&&ec(s.params,n.value.params));function l(c={}){if(Pv(c)){const u=t[R(e.replace)?"replace":"push"](R(e.to)).catch(Cn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:N(()=>n.value.href),isActive:r,isExactActive:a,navigate:l}}function Ev(e){return e.length===1?e[0]:e}const Rv=hi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gl,setup(e,{slots:t}){const s=Pt(gl(e)),{options:n}=Ct(Mo),o=N(()=>({[bl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[bl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=t.default&&Ev(t.default(s));return e.custom?r:Ki("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},r)}}}),Dv=Rv;function Pv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Bv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!At(o)||o.length!==n.length||n.some((r,a)=>r.valueOf()!==o[a].valueOf()))return!1}return!0}function yl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bl=(e,t,s)=>e??t??s,Lv=hi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Ct(xr),o=N(()=>e.route||n.value),r=Ct(ul,0),a=N(()=>{let u=R(r);const{matched:f}=o.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),l=N(()=>o.value.matched[a.value]);no(ul,N(()=>a.value+1)),no(dv,l),no(xr,o);const c=E();return at(()=>[c.value,l.value,e.name],([u,f,d],[p,v,m])=>{f&&(f.instances[d]=u,v&&v!==f&&u&&u===p&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),u&&f&&(!v||!Gs(f,v)||!p)&&(f.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,f=e.name,d=l.value,p=d&&d.components[f];if(!p)return _l(s.default,{Component:p,route:u});const v=d.props[f],m=v?v===!0?u.params:typeof v=="function"?v(u):v:null,O=Ki(p,ye({},m,t,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(d.instances[f]=null)},ref:c}));return _l(s.default,{Component:O,route:u})||O}}});function _l(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Uv=Lv;function Mv(e){const t=xv(e.routes,e),s=e.parseQuery||cv,n=e.stringifyQuery||cl,o=e.history,r=cn(),a=cn(),l=cn(),c=Ru(Qt);let u=Qt;Is&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=rr.bind(null,M=>""+M),d=rr.bind(null,Gf),p=rr.bind(null,Pn);function v(M,Y){let G,Q;return tc(M)?(G=t.getRecordMatcher(M),Q=Y):Q=M,t.addRoute(Q,G)}function m(M){const Y=t.getRecordMatcher(M);Y&&t.removeRoute(Y)}function y(){return t.getRoutes().map(M=>M.record)}function O(M){return!!t.getRecordMatcher(M)}function A(M,Y){if(Y=ye({},Y||c.value),typeof M=="string"){const I=ar(s,M,Y.path),L=t.resolve({path:I.path},Y),F=o.createHref(I.fullPath);return ye(I,L,{params:p(L.params),hash:Pn(I.hash),redirectedFrom:void 0,href:F})}let G;if(M.path!=null)G=ye({},M,{path:ar(s,M.path,Y.path).path});else{const I=ye({},M.params);for(const L in I)I[L]==null&&delete I[L];G=ye({},M,{params:d(I)}),Y.params=d(Y.params)}const Q=t.resolve(G,Y),ve=M.hash||"";Q.params=f(p(Q.params));const w=Yf(n,ye({},M,{hash:Kf(ve),path:Q.path})),k=o.createHref(w);return ye({fullPath:w,hash:ve,query:n===cl?uv(M.query):M.query||{}},Q,{redirectedFrom:void 0,href:k})}function _(M){return typeof M=="string"?ar(s,M,c.value.path):ye({},M)}function S(M,Y){if(u!==M)return zs(Ie.NAVIGATION_CANCELLED,{from:Y,to:M})}function D(M){return se(M)}function K(M){return D(ye(_(M),{replace:!0}))}function ee(M,Y){const G=M.matched[M.matched.length-1];if(G&&G.redirect){const{redirect:Q}=G;let ve=typeof Q=="function"?Q(M,Y):Q;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=_(ve):{path:ve},ve.params={}),ye({query:M.query,hash:M.hash,params:ve.path!=null?{}:M.params},ve)}}function se(M,Y){const G=u=A(M),Q=c.value,ve=M.state,w=M.force,k=M.replace===!0,I=ee(G,Q);if(I)return se(ye(_(I),{state:typeof I=="object"?ye({},ve,I.state):ve,force:w,replace:k}),Y||G);const L=G;L.redirectedFrom=Y;let F;return!w&&qf(n,Q,G)&&(F=zs(Ie.NAVIGATION_DUPLICATED,{to:L,from:Q}),j(Q,Q,!0,!1)),(F?Promise.resolve(F):de(L,Q)).catch(U=>Ft(U)?Ft(U,Ie.NAVIGATION_GUARD_REDIRECT)?U:te(U):fe(U,L,Q)).then(U=>{if(U){if(Ft(U,Ie.NAVIGATION_GUARD_REDIRECT))return se(ye({replace:k},_(U.to),{state:typeof U.to=="object"?ye({},ve,U.to.state):ve,force:w}),Y||L)}else U=we(L,Q,!0,k,ve);return ue(L,Q,U),U})}function le(M,Y){const G=S(M,Y);return G?Promise.reject(G):Promise.resolve()}function J(M){const Y=lt.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(M):M()}function de(M,Y){let G;const[Q,ve,w]=fv(M,Y);G=ir(Q.reverse(),"beforeRouteLeave",M,Y);for(const I of Q)I.leaveGuards.forEach(L=>{G.push(ss(L,M,Y))});const k=le.bind(null,M,Y);return G.push(k),qe(G).then(()=>{G=[];for(const I of r.list())G.push(ss(I,M,Y));return G.push(k),qe(G)}).then(()=>{G=ir(ve,"beforeRouteUpdate",M,Y);for(const I of ve)I.updateGuards.forEach(L=>{G.push(ss(L,M,Y))});return G.push(k),qe(G)}).then(()=>{G=[];for(const I of w)if(I.beforeEnter)if(At(I.beforeEnter))for(const L of I.beforeEnter)G.push(ss(L,M,Y));else G.push(ss(I.beforeEnter,M,Y));return G.push(k),qe(G)}).then(()=>(M.matched.forEach(I=>I.enterCallbacks={}),G=ir(w,"beforeRouteEnter",M,Y,J),G.push(k),qe(G))).then(()=>{G=[];for(const I of a.list())G.push(ss(I,M,Y));return G.push(k),qe(G)}).catch(I=>Ft(I,Ie.NAVIGATION_CANCELLED)?I:Promise.reject(I))}function ue(M,Y,G){l.list().forEach(Q=>J(()=>Q(M,Y,G)))}function we(M,Y,G,Q,ve){const w=S(M,Y);if(w)return w;const k=Y===Qt,I=Is?history.state:{};G&&(Q||k?o.replace(M.fullPath,ye({scroll:k&&I&&I.scroll},ve)):o.push(M.fullPath,ve)),c.value=M,j(M,Y,G,k),te()}let Re;function Le(){Re||(Re=o.listen((M,Y,G)=>{if(!ut.listening)return;const Q=A(M),ve=ee(Q,ut.currentRoute.value);if(ve){se(ye(ve,{replace:!0,force:!0}),Q).catch(Cn);return}u=Q;const w=c.value;Is&&ov(il(w.fullPath,G.delta),Uo()),de(Q,w).catch(k=>Ft(k,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_CANCELLED)?k:Ft(k,Ie.NAVIGATION_GUARD_REDIRECT)?(se(ye(_(k.to),{force:!0}),Q).then(I=>{Ft(I,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_DUPLICATED)&&!G.delta&&G.type===$r.pop&&o.go(-1,!1)}).catch(Cn),Promise.reject()):(G.delta&&o.go(-G.delta,!1),fe(k,Q,w))).then(k=>{k=k||we(Q,w,!1),k&&(G.delta&&!Ft(k,Ie.NAVIGATION_CANCELLED)?o.go(-G.delta,!1):G.type===$r.pop&&Ft(k,Ie.NAVIGATION_ABORTED|Ie.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ue(Q,w,k)}).catch(Cn)}))}let Ke=cn(),ge=cn(),q;function fe(M,Y,G){te(M);const Q=ge.list();return Q.length?Q.forEach(ve=>ve(M,Y,G)):console.error(M),Promise.reject(M)}function me(){return q&&c.value!==Qt?Promise.resolve():new Promise((M,Y)=>{Ke.add([M,Y])})}function te(M){return q||(q=!M,Le(),Ke.list().forEach(([Y,G])=>M?G(M):Y()),Ke.reset()),M}function j(M,Y,G,Q){const{scrollBehavior:ve}=e;if(!Is||!ve)return Promise.resolve();const w=!G&&rv(il(M.fullPath,0))||(Q||!G)&&history.state&&history.state.scroll||null;return Nn().then(()=>ve(M,Y,w)).then(k=>k&&nv(k)).catch(k=>fe(k,M,Y))}const Z=M=>o.go(M);let Ve;const lt=new Set,ut={currentRoute:c,listening:!0,addRoute:v,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:O,getRoutes:y,resolve:A,options:e,push:D,replace:K,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:r.add,beforeResolve:a.add,afterEach:l.add,onError:ge.add,isReady:me,install(M){M.component("RouterLink",Dv),M.component("RouterView",Uv),M.config.globalProperties.$router=ut,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>R(c)}),Is&&!Ve&&c.value===Qt&&(Ve=!0,D(o.location).catch(Q=>{}));const Y={};for(const Q in Qt)Object.defineProperty(Y,Q,{get:()=>c.value[Q],enumerable:!0});M.provide(Mo,ut),M.provide(oa,ai(Y)),M.provide(xr,c);const G=M.unmount;lt.add(M),M.unmount=function(){lt.delete(M),lt.size<1&&(u=Qt,Re&&Re(),Re=null,c.value=Qt,Ve=!1,q=!1),G()}}};function qe(M){return M.reduce((Y,G)=>Y.then(()=>J(G)),Promise.resolve())}return ut}function Fv(){return Ct(Mo)}function Q$(e){return Ct(oa)}function wl(e){const t=[],s=e.split(`
`);let n=null,o=[],r=!1,a="";for(let l=0;l<s.length;l++){const c=s[l];if(c.startsWith("%"))continue;if(r){c.includes("}")?(a+=c.substring(0,c.indexOf("}")),o.push(a.trim()),a="",r=!1):a+=c+`
`;continue}if(c.includes("{")){const d=c.indexOf("{");if(c.includes("}")){const p=c.indexOf("}");o.push(c.substring(d+1,p).trim())}else a=c.substring(d+1)+`
`,r=!0;continue}const u=c.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const f=c.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,p]=f;if(d==="Board")n&&(n.commentary=kl(o),n.steps=Sl(o),n.auction=Cl(n.auction),t.push(n)),n=jv(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=Hv(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const d=c.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const p=Vv(d);n.auction.push(...p)}}}return n&&(n.commentary=kl(o),n.steps=Sl(o),n.auction=Cl(n.auction),t.push(n)),t}function Sl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let r="";for(let a=0;a<n.length;a++){const l=n[a],c=l.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(l),f=/^\[ROTATE\]$/i.test(l),d=l.match(/^\[choose-card\s+([^\]]+)\]$/i);if(c){const p=ra(c[1]).replace(/!/g,"").trim(),v=r.trim();r="";let m="";if(a+1<n.length){const A=n[a+1];A.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(m=A.trim(),a++)}const y=un(v,"bid"),O=un(m,"bid");o.push({...y,type:"bid",bid:p,explanationText:O.text,showSeatsAfter:O.showSeats})}else if(u||f){const p=u?"next":"rotate";r.trim()&&o.push(un(r.trim(),p)),r=""}else if(d){const p=d[1].trim();let v;if(p.toLowerCase().startsWith("any:")?v={cards:p.substring(4).split(",").map(y=>ho(y.trim())),anyOf:!0}:v={card:ho(p)},r.trim()){const m=un(r.trim(),"choose-card");m.chooseCard=v,o.push(m)}r=""}else r+=l}if(r.trim()){const a=un(r.trim(),"end");o.push(a)}return o}function un(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const S=[];_.includes("N")&&S.push("N"),_.includes("E")&&S.push("E"),_.includes("S")&&S.push("S"),_.includes("W")&&S.push("W"),S.length>0&&(s=S)}}const o=[],r=/\[PLAY\s+([^\]]+)\]/gi;let a;for(;(a=r.exec(e))!==null;)o.push(a[1]);const l=/\[RESET\]/i.test(e);let c=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const _=u[1].trim();_.toLowerCase().startsWith("any:")?c={cards:_.substring(4).split(",").map(D=>ho(D.trim())),anyOf:!0}:c={card:ho(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),p&&(f=!0);const v=/\[SHOW_LEAD\]/i.test(e),m=/\[clear-commentary\]/i.test(e);let y=null;const O=e.match(/\[showcards\s+([^\]]+)\]/i);if(O){const _=O[1].trim();y={};const S=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let D;for(;(D=S.exec(_))!==null;){const K=D[1].toUpperCase(),ee=D[2].split(",").map(se=>se.trim().toUpperCase());y[K]=ee}Object.keys(y).length===0&&(y=null)}let A=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:ra(A),type:t,showSeats:s,plays:o,reset:l,showAuction:f,showLead:v,clearCommentary:m,showcards:y,chooseCard:c}}function jv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function ho(e){return e.toUpperCase().replace("10","T")}function Hv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const r=s[0],a=r.indexOf(":");if(a!==-1){const l=r.charAt(0).toUpperCase();o=n.indexOf(l),s[0]=r.substring(a+1)}for(let l=0;l<4;l++){const c=(o+l)%4,u=n[c];t[u]=Kv(s[l])}return t}function Kv(e){const t=e.split(".");return t.length!==4?null:{spades:Qn(t[0]),hearts:Qn(t[1]),diamonds:Qn(t[2]),clubs:Qn(t[3])}}function Qn(e){return e?e.split(""):[]}function Cl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Vv(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>Wv(t))}function Wv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function kl(e){return e.length?ra(e.join(`

`)):""}function ra(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Gv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function Zn(e,t){return Gv(t)[e%4]}const aa={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},$l={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},ac=["spades","hearts","diamonds","clubs"];function cr(e){return e==="T"?"10":e}function la(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const r=aa[o],a=o==="H"||o==="D"?"red":"black";return{text:`${n}${r}`,html:`${n}<span class="${a}">${r}</span>`}}return{text:e,html:e}}function zv(e){return($l[e.toLowerCase()]||$l[e])==="red"?"suit-red":"suit-black"}function Jv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Nr(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Yv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of ac)for(const o of e[n]||[])s+=t[o]||0;return s}function qv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=aa[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function dn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Xv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Es(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Qv({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:r,studentBid:a,correct:l,attemptNumber:c,timeTakenMs:u,skillPath:f,assignment:d=null}){var y,O,A,_,S,D,K,ee,se,le,J;const p=((y=s.steps)==null?void 0:y.filter(de=>de.type==="bid").length)||1,v=s.studentSeat||"S",m=((O=s.hands)==null?void 0:O[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:((A=s.hands)==null?void 0:A.N)||((_=s.hands)==null?void 0:_.north)||"",east:((S=s.hands)==null?void 0:S.E)||((D=s.hands)==null?void 0:D.east)||"",south:((K=s.hands)==null?void 0:K.S)||((ee=s.hands)==null?void 0:ee.south)||"",west:((se=s.hands)==null?void 0:se.W)||((le=s.hands)==null?void 0:le.west)||""},full_auction:((J=s.auction)==null?void 0:J.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:p,auction_so_far:[...o],expected_bid:r,student_hand:m},result:{student_bid:a,correct:l,attempt_number:c,time_taken_ms:u},skill_path:f,assignment:d}}function lc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Zv(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function em(){return crypto.randomUUID()}function tm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Fo(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=r=>r.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function sm(e){const[t]=e.split("/");return t||"uncategorized"}function nm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const ic={name:"AES-GCM",length:256},ia={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function om(){const e=await crypto.subtle.generateKey(ic,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Ss(t)}async function cc(e){const t=Cs(e);return crypto.subtle.importKey("raw",t,ic,!0,["encrypt","decrypt"])}async function ca(e,t){const s=await cc(t),n=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(JSON.stringify(e)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{encrypted_data:Ss(a),iv:Ss(n)}}async function ua(e,t,s){const n=await cc(s),o=Cs(e),r=Cs(t),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,o),l=new TextDecoder;return JSON.parse(l.decode(a))}async function rm(e){const t=Cs(e);return crypto.subtle.importKey("spki",t,ia,!0,["encrypt"])}async function uc(e){const t=Cs(e);return crypto.subtle.importKey("pkcs8",t,ia,!0,["decrypt"])}async function am(){const e=await crypto.subtle.generateKey(ia,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Ss(t),privateKey:Ss(s)}}async function dc(e,t){const s=await rm(t),n=Cs(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Ss(o)}async function lm(e,t){const s=await uc(t),n=Cs(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Ss(o)}function im(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function cm(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function um(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await ca(t,e);return(await ua(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Ss(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Cs(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Or="bridgePractice",xe=E({}),Fe=E(null),ls=E(null),Bn=E(!1),jo=E(!1);function fc(){try{const e=localStorage.getItem(Or);if(e){const t=JSON.parse(e);xe.value=t.users||{},Fe.value=t.currentUserId||null,ls.value=t.adminViewerId||null}Bn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),Bn.value=!0}}function xt(){try{const e=localStorage.getItem(Or),t=e?JSON.parse(e):{};t.users=xe.value,t.currentUserId=Fe.value,ls.value&&(t.adminViewerId=ls.value),localStorage.setItem(Or,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function dm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:r}){const a=crypto.randomUUID(),l=new Date().toISOString(),c=await om();let u=null;if(r)try{const d=await fetch(`${r}/keys/admin`);if(d.ok){const p=await d.json();ls.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await dc(c,p.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:a,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:c,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:l,updatedAt:l};return xe.value[a]=f,Fe.value=a,xt(),jo.value=!0,f}function fm(e,t){if(!xe.value[e])return console.error("User not found:",e),null;const s=xe.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),xt(),s}function vm(e){if(!xe.value[e])return!1;if(delete xe.value[e],Fe.value===e){const t=Object.keys(xe.value);Fe.value=t.length>0?t[0]:null}return xt(),!0}function mm(e){return xe.value[e]?(Fe.value=e,xt(),!0):(console.error("User not found:",e),!1)}function pm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(xe.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function hm(e){const t=e.trim().toLowerCase();for(const s of Object.values(xe.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function gm(e){return xe.value[e]||null}function ym(){xe.value={},Fe.value=null,ls.value=null,jo.value=!1,xt(),Bn.value=!1}function bm(){Bn.value||fc()}async function _m(e){const t=cm(e);if(!t.valid)return{success:!1,error:t.error};if(!await um(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=xe.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Fe.value=e.user_id,xt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),r=o[0]||"Restored",a=o.slice(1).join(" ")||"User",l={id:e.user_id,firstName:r,lastName:a,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[l.id]=l,Fe.value=l.id,xt(),{success:!0,user:l}}function wm(){const e=xe.value[Fe.value];return!e||!e.secretKey?null:im(e)}function Sm(){jo.value=!1}function Cm(){return ls.value}function km(e){ls.value=e,xt()}async function $m(e){const t=xe.value[Fe.value];return!t||!t.secretKey?null:dc(t.secretKey,e)}async function Am(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function xm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Fe.value=r.id,xt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Nm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Fe.value=r.id,xt(),{success:!0,user:r}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}function He(){const e=N(()=>Fe.value&&xe.value[Fe.value]||null),t=N(()=>Object.values(xe.value)),s=N(()=>Object.keys(xe.value).length>0),n=N(()=>Object.keys(xe.value).length),o=N(()=>Fe.value!==null&&!!xe.value[Fe.value]);return{users:xe,currentUserId:Fe,adminViewerId:ls,initialized:Bn,showKeyBackupModal:jo,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:bm,loadFromStorage:fc,saveToStorage:xt,createUser:dm,updateUser:fm,deleteUser:vm,switchUser:mm,findUserByName:pm,findUserByEmail:hm,getUser:gm,clearUsers:ym,restoreFromBackup:_m,getKeyBackup:wm,dismissKeyBackupModal:Sm,getAdminViewerId:Cm,setAdminViewerId:km,createGrantForViewer:$m,requestRecovery:Am,claimRecovery:xm,claimRecoveryByCode:Nm}}const Tr="bridgePractice",Ye=E({}),Ee=E(null),bt=E(!1),Js=E(!1);function vc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),r=e.get("classrooms");if(!t||!s)return null;const a=s.split(",").map(c=>c.trim()).filter(Boolean),l=r?r.split(",")[0].trim():null;return{name:t,lessons:a,dueDate:n||null,teacherName:o||null,classroom:l}}function mc(){try{const e=localStorage.getItem(Tr);if(e){const t=JSON.parse(e);Ye.value=t.assignments||{},Ee.value=t.currentAssignmentId||null,Ee.value&&Ye.value[Ee.value]&&(bt.value=!0)}Js.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),Js.value=!0}}function ks(){try{const e=localStorage.getItem(Tr),t=e?JSON.parse(e):{};t.assignments=Ye.value,t.currentAssignmentId=Ee.value,localStorage.setItem(Tr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function pc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const r=Object.values(Ye.value).find(u=>u.name===e);if(r){const u=new Set(r.lessons);for(const f of n)u.add(f);return r.lessons=Array.from(u),o&&(r.dueDate=o),r.updatedAt=new Date().toISOString(),Ee.value=r.id,bt.value=!0,ks(),r}const a=crypto.randomUUID(),l=new Date().toISOString(),c={id:a,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:l,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:l,updatedAt:l};return Ye.value[a]=c,Ee.value=a,bt.value=!0,ks(),c}function Om(){if(Js.value)return;mc();const e=vc();e&&pc(e),Js.value=!0}function Tm(e){if(!bt.value||!Ee.value)return!1;const t=Ye.value[Ee.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Im(e){if(!Ee.value)return;const t=Ye.value[Ee.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),ks())}function Em(e){if(!Ee.value||!bt.value)return!1;const t=Ye.value[Ee.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,ks(),!0}function Rm(){if(!bt.value||!Ee.value)return null;const e=Ye.value[Ee.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Dm(){bt.value=!1}function Pm(){Ee.value&&Ye.value[Ee.value]&&(bt.value=!0)}function Bm(e){return Ye.value[e]||null}function Lm(){return Object.values(Ye.value)}function Um(e){return Ye.value[e]?(delete Ye.value[e],Ee.value===e&&(Ee.value=null,bt.value=!1),ks(),!0):!1}function Mm(){Ye.value={},Ee.value=null,bt.value=!1,Js.value=!1,ks()}function Ho(){const e=N(()=>Ee.value&&Ye.value[Ee.value]||null),t=N(()=>bt.value&&e.value!==null),s=N(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=N(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Ye,currentAssignmentId:Ee,inAssignmentMode:bt,initialized:Js,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Om,loadFromStorage:mc,saveToStorage:ks,createAssignment:pc,isLessonInAssignment:Tm,setTotalDeals:Im,recordDealCompletion:Em,getAssignmentTag:Rm,exitAssignmentMode:Dm,returnToAssignmentMode:Pm,getAssignment:Bm,getAllAssignments:Lm,deleteAssignment:Um,clearAssignments:Mm,parseAssignmentFromUrl:vc}}const Ir="bridgePractice",ze=E([]),Ys=E(null),qs=E(!1),ws=E({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function hc(){try{const e=localStorage.getItem(Ir);if(e){const t=JSON.parse(e);ze.value=t.pendingObservations||[]}qs.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),qs.value=!0}}function As(){try{const e=localStorage.getItem(Ir),t=e?JSON.parse(e):{};t.pendingObservations=ze.value,localStorage.setItem(Ir,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function gc(){qs.value||hc(),Ys.value||yc()}function yc(){Ys.value=em(),ws.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Fm({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:l}){var y,O;const c=He(),u=Ho();qs.value||gc();const f=c.currentUser.value;if(!f)return{success:!1,error:"No authenticated user"};let d=e.skillPath;if(!d){const A=e.subfolder||e.category||"Unknown";d=tm(A)}const p=u.getAssignmentTag(),v=Qv({userId:f.id,sessionId:Ys.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:l,skillPath:d,assignment:p}),m=Zv(v);if(!m.valid)return console.error("Invalid observation:",m.errors),{success:!1,error:m.errors.join(", ")};if(ws.value.totalObservations++,r?ws.value.correctCount++:ws.value.wrongCount++,f.dataConsent&&f.secretKey){const A=await jm(v,f);A.success||(console.warn("Failed to encrypt observation, storing unencrypted:",A.error),Al(v,((y=f.classrooms)==null?void 0:y[0])||null))}else Al(v,((O=f.classrooms)==null?void 0:O[0])||null);return{success:!0,observation:v}}async function jm(e,t){var s;try{const{encrypted_data:n,iv:o}=await ca(e,t.secretKey),r=((s=t.classrooms)==null?void 0:s[0])||null,a=lc(e,r);return ze.value.push({encrypted_data:n,iv:o,metadata:a,encrypted:!0,queuedAt:new Date().toISOString()}),As(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Al(e,t){const s=lc(e,t);ze.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),As()}async function Hm(){const t=He().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<ze.value.length;n++){const o=ze.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:r,iv:a}=await ca(o.observation,t.secretKey);ze.value[n]={encrypted_data:r,iv:a,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(r){console.error("Failed to encrypt observation:",r)}}return s>0&&As(),s}function Km(){return ze.value.length}function Vm(){return[...ze.value]}function Wm(e){ze.value=ze.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),As()}function Gm(){ze.value=[],As()}function zm(){return{...ws.value}}function Jm(){ze.value=[],Ys.value=null,ws.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},qs.value=!1,As()}function us(){const e=N(()=>ze.value.length),t=N(()=>ze.value.length>0),s=N(()=>ze.value.some(o=>!o.encrypted)),n=N(()=>Ys.value);return{pendingObservations:ze,sessionId:Ys,sessionStats:ws,initialized:qs,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:gc,startNewSession:yc,recordObservation:Fm,encryptPendingObservations:Hm,getPendingCount:Km,getPendingObservations:Vm,removeSyncedObservations:Wm,clearPendingObservations:Gm,getSessionStats:zm,reset:Jm,loadFromStorage:hc,saveToStorage:As}}function Ym(){const e=us(),t=E(null),s=E(0),n=E(!1),o=E(!1),r=Pt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),a=Pt({answered:{},wrongCard:null,correctCard:null}),l=Pt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),c=E({N:[],E:[],S:[],W:[]}),u=E(null),f=E(1),d=N(()=>{var x;return((x=t.value)==null?void 0:x.steps)||[]}),p=N(()=>d.value.length>0),v=N(()=>d.value[s.value]||null),m=N(()=>d.value.some(x=>x.type==="bid")),y=N(()=>{var x;return((x=v.value)==null?void 0:x.type)==="bid"}),O=N(()=>{var x;for(let b=s.value;b>=0;b--)if((x=d.value[b])!=null&&x.clearCommentary)return b;return 0}),A=N(()=>{var x;return((x=t.value)==null?void 0:x.studentSeat)||"S"}),_=N(()=>t.value?Zn(r.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),S=N(()=>_.value===A.value),D=N(()=>{var $,T;if(!y.value||!S.value||r.auctionComplete||o.value)return!1;const x=v.value;if(!(x!=null&&x.bid))return!1;const b=(T=($=t.value)==null?void 0:$.auction)==null?void 0:T[r.currentBidIndex];return b?V(x.bid)===V(b):!1}),K=N(()=>{for(let x=r.displayedBids.length-1;x>=0;x--){const b=r.displayedBids[x];if(b&&b!=="Pass"&&b!=="X"&&b!=="XX")return b}return null}),ee=N(()=>{if(!t.value||r.displayedBids.length===0)return!1;const x=r.displayedBids[r.displayedBids.length-1];if(x==="X"||x==="XX"||!K.value)return!1;let b=-1;for(let H=r.displayedBids.length-1;H>=0;H--){const z=r.displayedBids[H];if(z&&z!=="Pass"&&z!=="X"&&z!=="XX"){b=H;break}}if(b===-1)return!1;const $=Zn(b,t.value.auctionDealer||t.value.dealer),T=_.value;return(T==="N"||T==="S")&&($==="E"||$==="W")||(T==="E"||T==="W")&&($==="N"||$==="S")}),se=N(()=>{if(!t.value||r.displayedBids.length===0)return!1;for(let x=r.displayedBids.length-1;x>=0;x--){const b=r.displayedBids[x];if(b!=="Pass"){if(b==="XX")return!1;if(b==="X"){const $=Zn(x,t.value.auctionDealer||t.value.dealer),T=_.value;return!(T==="N"&&$==="S"||T==="S"&&$==="N"||T==="E"&&$==="W"||T==="W"&&$==="E")}return!1}}return!1}),le=N(()=>{const x=v.value;return x!=null&&x.chooseCard?!a.answered[s.value]:!1}),J=N(()=>{var x;return((x=v.value)==null?void 0:x.chooseCard)||null}),de=N(()=>{if(!t.value)return[];const x=["N","E","S","W"];if(!p.value)return[];let b=null;const $=d.value;for(let T=0;T<=s.value&&T<$.length;T++){const P=$[T];P!=null&&P.showSeats&&(b=P.showSeats),P!=null&&P.showSeatsAfter&&(T<s.value||T===s.value&&o.value)&&(b=P.showSeatsAfter)}return b?x.filter(T=>!b.includes(T)):x}),ue=N(()=>{if(!t.value||!p.value)return null;let x={};const b=d.value;for(let $=0;$<=s.value&&$<b.length;$++){const T=b[$];if(T!=null&&T.showcards)for(const[P,H]of Object.entries(T.showcards))x[P]=H;if(T!=null&&T.showSeats)for(const P of T.showSeats)delete x[P];if(T!=null&&T.showSeatsAfter&&($<s.value||$===s.value&&o.value))for(const P of T.showSeatsAfter)delete x[P]}return Object.keys(x).length>0?x:null}),we=N(()=>{if(!t.value||!p.value)return{};let x={},b=new Set;const $=d.value;for(let P=0;P<=s.value&&P<$.length;P++){const H=$[P];if(H!=null&&H.showcards)for(const[z,ne]of Object.entries(H.showcards))x[z]=ne;if(H!=null&&H.showSeats)for(const z of H.showSeats)b.add(z)}const T={};for(const[P,H]of Object.entries(x))b.has(P)&&(T[P]=H);return T}),Re=N(()=>{const x=ue.value;return x?Object.keys(x):[]}),Le=N(()=>{const x=de.value,b=Re.value;return b.length?x.filter($=>!b.includes($)):x});function Ke(x){const b={spades:[],hearts:[],diamonds:[],clubs:[]},$={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const T of x){const P=T[0].toUpperCase(),H=T.slice(1).toUpperCase(),z=$[P];z&&b[z].push(H)}return b}const ge=N(()=>{var $,T;if(!(($=t.value)!=null&&$.hands))return{};if((T=v.value)!=null&&T.reset)return t.value.hands;const x=ue.value,b={};for(const P of["N","E","S","W"]){if(x&&x[P]){b[P]=Ke(x[P]);continue}const H=t.value.hands[P];if(!H){b[P]=null;continue}b[P]={spades:[...H.spades||[]],hearts:[...H.hearts||[]],diamonds:[...H.diamonds||[]],clubs:[...H.clubs||[]]};for(const z of c.value[P]){const ne={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[z.suit];if(ne&&b[P][ne]){const oe=b[P][ne].indexOf(z.card);oe!==-1&&b[P][ne].splice(oe,1)}}}return b}),q=N(()=>!(m.value&&!r.auctionComplete)),fe=N(()=>{if(!p.value)return!0;let x=!0;const b=d.value;for(let $=0;$<=s.value&&$<b.length;$++){const T=b[$];(T==null?void 0:T.showAuction)!==null&&(T==null?void 0:T.showAuction)!==void 0&&(x=T.showAuction)}return x}),me=N(()=>{var b;if(!p.value)return!1;const x=d.value;for(let $=0;$<=s.value&&$<x.length;$++)if((b=x[$])!=null&&b.showLead)return!0;return!1}),te=N(()=>{var x;return(x=t.value)!=null&&x.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),j=N(()=>{if(!p.value||n.value)return!0;const x=v.value;return(x==null?void 0:x.type)==="end"&&!le.value}),Z=N(()=>p.value?!!(o.value||s.value>0||y.value&&r.currentBidIndex>0):!1);function Ve(){var b;c.value={N:[],E:[],S:[],W:[]};const x=d.value;for(let $=0;$<=s.value&&$<x.length;$++){const T=x[$];if((b=T==null?void 0:T.plays)!=null&&b.length)for(const P of T.plays){const H=P.split(/[,\s]+/);for(const z of H){if(!z)continue;const ne=z.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(ne){const oe=ne[1].toUpperCase(),Ne=ne[2].toUpperCase();let Ae=ne[3].toUpperCase();Ae==="10"&&(Ae="T"),c.value[oe].push({suit:Ne,card:Ae})}}}}}function lt(){if(!t.value)return;const x=t.value.auction||[],b=ut(s.value);if(b===-1){for(;r.currentBidIndex<x.length;)r.displayedBids.push(x[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0,u.value=null;return}const $=d.value[b],T=V($.bid);for(;r.currentBidIndex<x.length;){const P=Zn(r.currentBidIndex,t.value.auctionDealer||t.value.dealer),H=V(x[r.currentBidIndex]);if(P===A.value&&H===T){u.value=Date.now(),f.value=1;return}r.displayedBids.push(x[r.currentBidIndex]),r.currentBidIndex++}r.auctionComplete=!0,u.value=null}function ut(x){const b=d.value;for(let $=x;$<b.length;$++)if(b[$].type==="bid")return $;return-1}function qe(x){if(!t.value||r.auctionComplete||!y.value)return!1;const b=t.value.auction[r.currentBidIndex],$=V(x)===V(b),T=s.value;$?T in l.wrongStepIndices&&(delete l.wrongStepIndices[T],F(!0)):(F(!1),l.wrongStepIndices[T]=!0,l.boardHadWrong=!0);const P=r.currentBidIndex;r.displayedBids.push(t.value.auction[r.currentBidIndex]),r.currentBidIndex++,u.value=null,f.value=1,$?(r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1):(r.wrongBid=x,r.correctBid=b,r.wrongBidIndex=P);const H=s.value+1,z=d.value[H];return(z==null?void 0:z.type)==="bid"?(s.value=H,o.value=!1,lt()):(o.value=!0,M(),s.value>=d.value.length-1&&w()),$}function M(){var b;if(r.auctionComplete)return;if(ut(s.value+1)===-1){const $=((b=t.value)==null?void 0:b.auction)||[];for(;r.currentBidIndex<$.length;)r.displayedBids.push($[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0}}function Y(){r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1}function G(x,b){if(!t.value||!le.value)return!1;const $=J.value;if(!$)return!1;const T=(x+b).toUpperCase(),P=s.value;let H=!1,z="";return $.anyOf?(H=$.cards.includes(T),z=$.cards[0]):(H=T===$.card,z=$.card),H?P in l.wrongStepIndices&&(delete l.wrongStepIndices[P],F(!0)):(F(!1),l.wrongStepIndices[P]=!0,l.boardHadWrong=!0),a.answered[P]=!0,H?(a.wrongCard=null,a.correctCard=null):(a.wrongCard=T,a.correctCard=z),ve(),H}function Q(){a.wrongCard=null,a.correctCard=null}function ve(){var x;if(D.value||le.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,Ve(),((x=d.value[s.value])==null?void 0:x.type)==="bid"&&lt(),s.value>=d.value.length-1){const b=d.value[s.value];(b==null?void 0:b.type)!=="bid"&&(b==null?void 0:b.type)!=="choose-card"&&w()}return!0}return w(),!1}function w(){n.value=!0,k()}function k(){if(d.value.some(b=>b.type==="bid"||b.type==="choose-card"))if(l.boardHadWrong){l.wrongCount++;const b=Object.keys(l.wrongStepIndices).length===0;F(b)}else l.correctCount++,F(!0)}function I(){if(Y(),Q(),o.value)return o.value=!1,L(s.value),!0;if(s.value>0){const x=s.value-1,b=d.value[x];return a.answered[x]&&delete a.answered[x],(b==null?void 0:b.type)==="bid"&&L(x),s.value=x,n.value=!1,o.value=!1,Ve(),!0}return!1}function L(x){var H;const b=d.value[x];if(!b||b.type!=="bid")return;const $=V(b.bid),T=((H=t.value)==null?void 0:H.auction)||[];let P=0;for(let z=0;z<T.length;z++)if(V(T[z])===$){P=z;break}r.currentBidIndex=P,r.displayedBids=T.slice(0,P),r.auctionComplete=!1,u.value=Date.now(),f.value=1}async function F(x){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...r.displayedBids],expectedBid:"BOARD",studentBid:x?"PASS":"FAIL",correct:x,attemptNumber:1,timeTakenMs:0})}catch(b){console.error("Failed to record board observation:",b)}}function U(x){var b,$;t.value=x,s.value=0,n.value=!1,o.value=!1,r.displayedBids=[],r.currentBidIndex=0,r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1,r.auctionComplete=!1,a.answered={},a.wrongCard=null,a.correctCard=null,l.boardHadWrong=!1,l.wrongStepIndices={},c.value={N:[],E:[],S:[],W:[]},u.value=null,f.value=1,(b=x==null?void 0:x.steps)!=null&&b.length&&(Ve(),(($=x.steps[0])==null?void 0:$.type)==="bid"&&lt())}function W(){l.correctCount=0,l.wrongCount=0}function V(x){if(!x)return"";const $=x.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return $==="PASS"||$==="P"?"PASS":$==="X"||$==="DBL"||$==="DOUBLE"?"X":$==="XX"||$==="RDBL"||$==="REDOUBLE"?"XX":$.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:r,cardChoiceState:a,boardState:l,steps:d,hasSteps:p,currentStep:v,hasBidSteps:m,isBidStep:y,commentaryStartIndex:O,studentSeat:A,currentTurnSeat:_,isStudentTurn:S,hasBidPrompt:D,lastContractBid:K,canDouble:ee,canRedouble:se,canGoBack:Z,hasCardChoice:le,currentChooseCard:J,hiddenSeats:Le,hands:ge,showHcp:q,showcardsPlayedCards:we,isComplete:j,showAuctionTable:fe,showOpeningLead:me,openingLead:te,advance:ve,makeBid:qe,clearFeedback:Y,goBack:I,makeCardChoice:G,clearCardFeedback:Q,loadDeal:U,resetStats:W,observationStore:e}}const go="bridgePractice",bc="bridgePracticeUIPrefs",Xe=E({teacherName:null,availableClassrooms:[],configuredAt:null}),Xs=E({showLoadPbnOption:!1}),yo=E(!1);function _c(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function wc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(r=>({id:r.trim(),name:_c(r.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function qm(){return new URLSearchParams(window.location.search).get("collection")}function Xm(){return new URLSearchParams(window.location.search).get("lesson")}function Qm(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function Zm(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function ep(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function tp(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const sp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function Sc(){try{const e=localStorage.getItem(go);if(e){const t=JSON.parse(e);t.appConfig&&(Xe.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function np(){try{const e=localStorage.getItem(bc);if(e){const t=JSON.parse(e);Xs.value={...Xs.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function op(){try{localStorage.setItem(bc,JSON.stringify(Xs.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function rp(e,t){Xs.value[e]=t,op()}function da(){try{const e=localStorage.getItem(go),t=e?JSON.parse(e):{};t.appConfig=Xe.value,localStorage.setItem(go,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function Cc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function ap(){if(yo.value)return;Sc(),np();const{teacher:e,classrooms:t}=wc();(e||t.length>0)&&(e&&!Xe.value.teacherName&&(Xe.value.teacherName=e),t.length>0&&(Xe.value.availableClassrooms=Cc(Xe.value.availableClassrooms||[],t)),Xe.value.configuredAt||(Xe.value.configuredAt=new Date().toISOString()),da()),yo.value=!0}function lp(){try{const e=localStorage.getItem(go);return e?JSON.parse(e):null}catch{return null}}function ip(){Xe.value={teacherName:null,availableClassrooms:[],configuredAt:null},da(),yo.value=!1}function Kn(){const e=N(()=>Xe.value.availableClassrooms.length===0),t=N(()=>Xe.value.availableClassrooms.length>1),s=N(()=>Xe.value.availableClassrooms.length===1),n=N(()=>s.value?Xe.value.availableClassrooms[0]:null),o=N(()=>Xe.value.teacherName),r=N(()=>Xe.value.availableClassrooms),a=N(()=>Xs.value.showLoadPbnOption);return{appConfig:Xe,initialized:yo,uiPrefs:Xs,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:r,showLoadPbnOption:a,initializeFromUrl:ap,loadFromStorage:Sc,saveToStorage:da,clearConfig:ip,getStorageData:lp,getCollectionFromUrl:qm,setCollectionInUrl:Qm,getLessonFromUrl:Xm,setLessonInUrl:Zm,getDealFromUrl:ep,setDealInUrl:tp,setUIPref:rp,COLLECTIONS:sp,parseUrlParams:wc,classroomIdToName:_c,mergeClassrooms:Cc}}const cp="https://api.bridge-classroom.com/api",up="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",fa=E([]),je=E([]),bo=E(!1),_o=E(null),kn=E(null),wo=E(!1),dp=5*60*1e3;async function fp(e){const t=await fetch(`${cp}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":up}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function vp(e,t){try{return{...await ua(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function mp(){return us().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function kc(e=!1){const s=He().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=mp();if(!e&&kn.value&&Date.now()-new Date(kn.value).getTime()<dp&&je.value.length>0)return pp(n),{success:!0,cached:!0};bo.value=!0,_o.value=null;let o=[];try{const l=await fp(s.id);if(fa.value=l,s.secretKey&&l.length>0){const c=l.map(f=>vp(f,s.secretKey));o=(await Promise.all(c)).filter(f=>f!==null)}}catch(l){console.error("Failed to fetch from server (will use local data):",l),n.length===0&&(_o.value=l.message)}const r=new Set(o.map(l=>l.id)),a=n.filter(l=>!r.has(l.id));return je.value=[...o,...a],kn.value=new Date().toISOString(),bo.value=!1,{success:!0,count:je.value.length}}function pp(e){const t=new Set(je.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(je.value=[...je.value,...s])}async function hp(){if(wo.value)return;He().isAuthenticated.value&&await kc(),wo.value=!0}function gp(){fa.value=[],je.value=[],kn.value=null,wo.value=!1}function $c(){const e={};for(const t of je.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function xl(){const e={};for(const t of je.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Nl(){const e={};for(const t of je.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Ol(e=10){return[...je.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Tl(){const e=new Date().toISOString().split("T")[0];return je.value.filter(t=>t.timestamp.startsWith(e))}function Il(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return je.value.filter(n=>n.timestamp>=s)}function yp(){const e=$c(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,r=new Date(t[0]);for(let a=1;a<t.length;a++){const l=new Date(t[a]);if(Math.round((r-l)/(24*60*60*1e3))===1)o++,r=l;else break}return o}function va(){const e=N(()=>je.value.length),t=N(()=>je.value.filter(v=>v.correct).length),s=N(()=>je.value.filter(v=>!v.correct).length),n=N(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=N(()=>{const v=Tl(),m=v.filter(O=>O.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),r=N(()=>{const v=Il(),m=v.filter(O=>O.correct).length,y=v.length;return{total:y,correct:m,incorrect:y-m,accuracy:y>0?Math.round(m/y*100):0}}),a=N(()=>yp()),l=N(()=>xl()),c=N(()=>Nl()),u=N(()=>Ol(20)),f=N(()=>je.value.length>0),d=N(()=>bo.value),p=N(()=>_o.value!==null);return{observations:fa,decryptedObservations:je,loading:bo,error:_o,lastFetchedAt:kn,initialized:wo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:r,streak:a,skillStats:l,sessions:c,recentObservations:u,hasData:f,isLoading:d,hasError:p,initialize:hp,fetchProgress:kc,clearCache:gp,getObservationsByDate:$c,getStatsBySkill:xl,getSessions:Nl,getRecentObservations:Ol,getTodayObservations:Tl,getThisWeekObservations:Il}}const ma="bridgeTeacher",pa="bridgeTeacherSession",bp="https://api.bridge-classroom.com/api",_p="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Vn=E(!1),ha=E(null),$s=E(null),Ko=E(null),Bt=E(null),Er=E(!1),Ac=8*60*60*1e3;function wp(e){let t=e.trim();return t.includes("-----BEGIN")&&(t=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,"")),t}async function Sp(e){try{const t=await fetch(`${bp}/auth/teacher`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":_p},body:JSON.stringify({password:e})});return t.ok?{valid:!0}:t.status===401?{valid:!1,error:"Invalid password"}:{valid:!1,error:(await t.json().catch(()=>({}))).message||"Authentication failed"}}catch(t){return console.error("Password verification error:",t),{valid:!1,error:"Unable to connect to server"}}}async function xc(e){try{return{valid:!0,key:await uc(e)}}catch(t){return console.error("Private key validation error:",t),{valid:!1,error:"Invalid private key format"}}}function Cp(){try{const e=sessionStorage.getItem(pa);if(e){const t=JSON.parse(e);if(t.expiry&&new Date(t.expiry)>new Date)return Bt.value=t.expiry,$s.value=t.privateKeyBase64,Ko.value=t.viewerId||null,!0}}catch(e){console.error("Failed to load session:",e)}return!1}function ga(){try{const e={expiry:Bt.value,privateKeyBase64:$s.value,viewerId:Ko.value};sessionStorage.setItem(pa,JSON.stringify(e))}catch(e){console.error("Failed to save session:",e)}}function kp(){try{const e=localStorage.getItem(ma);if(e)return JSON.parse(e).encryptedKey||null}catch(e){console.error("Failed to load remembered key:",e)}return null}function $p(e){try{const t={encryptedKey:e};localStorage.setItem(ma,JSON.stringify(t))}catch(t){console.error("Failed to save remembered key:",t)}}function Ap(){localStorage.removeItem(ma)}async function xp(){if(!Er.value){if(Cp()&&$s.value){const e=await xc($s.value);e.valid&&(ha.value=e.key,Vn.value=!0)}Er.value=!0}}async function Np(e,t,s=!1){const n=await Sp(e);if(!n.valid)return{success:!1,error:n.error};const o=wp(t),r=await xc(o);return r.valid?(ha.value=r.key,$s.value=o,Bt.value=new Date(Date.now()+Ac).toISOString(),Vn.value=!0,ga(),s&&$p(o),{success:!0}):{success:!1,error:r.error}}function Op(){Vn.value=!1,ha.value=null,$s.value=null,Bt.value=null,sessionStorage.removeItem(pa)}function Tp(){return $s.value}function Ip(){return Ko.value}function Ep(e){Ko.value=e,ga()}function Rp(){return Bt.value?new Date(Bt.value)>new Date:!1}function Dp(){Vn.value&&(Bt.value=new Date(Date.now()+Ac).toISOString(),ga())}function ds(){const e=N(()=>Vn.value),t=N(()=>{if(!Bt.value)return 0;const n=new Date(Bt.value).getTime()-Date.now();return Math.max(0,n)}),s=N(()=>!!kp());return{isAuthenticated:e,sessionExpiry:Bt,initialized:Er,sessionTimeRemaining:t,hasRememberedKey:s,initialize:xp,login:Np,logout:Op,getPrivateKey:Tp,getViewerId:Ip,setViewerId:Ep,isSessionValid:Rp,extendSession:Dp,clearRememberedKey:Ap}}const Rr="https://api.bridge-classroom.com/api",Dr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Pr=E(!1),Ds=E(null),Vt=E(null),Ln=E([]),Qs=E([]),ya=E("lessons"),Vo=E(!0),sn=E(!1),Wn=E([]);function Pp(e){sn.value=!0,Wn.value=e}function Bp(){sn.value=!1,Wn.value=[]}function Gn(){return sn.value?Wn.value:Ln.value}async function Nc(){var o;const e=He(),t=ds(),s=e.currentUser.value;if(!s){Qs.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isAuthenticated.value)try{const r=((o=t.getViewerId)==null?void 0:o.call(t))||null;if(r){const a=await fetch(`${Rr}/grants?grantee_id=${r}`,{headers:{"x-api-key":Dr}});if(a.ok){const{grants:l}=await a.json(),c=await fetch(`${Rr}/users`,{headers:{"x-api-key":Dr}});if(c.ok){const{users:u}=await c.json(),f=new Set(l.map(d=>d.grantor_id));for(const d of u)f.has(d.id)&&d.id!==s.id&&n.push({id:d.id,name:`${d.first_name} ${d.last_name}`,email:d.email,isSelf:!1})}}}}catch(r){console.error("Failed to fetch accessible users:",r)}Qs.value=n}async function ba(e=!1){if(sn.value)return{success:!0};const t=He(),s=va(),n=t.currentUser.value;if(!n)return Ds.value="No authenticated user",{success:!1,error:Ds.value};Pr.value=!0,Ds.value=null;try{if(!Vt.value||Vt.value===n.id)Vt.value=n.id,await s.fetchProgress(e),Ln.value=s.decryptedObservations.value;else{const o=await fetch(`${Rr}/observations?user_id=${Vt.value}&limit=10000`,{headers:{"x-api-key":Dr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const r=await o.json();Ln.value=r.observations||[]}return{success:!0}}catch(o){return Ds.value=o.message,{success:!1,error:o.message}}finally{Pr.value=!1}}async function Lp(e){Vt.value=e,await ba(!0)}const Br=N(()=>{var n;const e=Gn(),t={};for(const o of e){const r=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[r]||(t[r]={lesson:r,displayName:Ic(r),total:0,correct:0,incorrect:0,observations:[]}),t[r].total++,o.correct?t[r].correct++:t[r].incorrect++,t[r].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,r)=>o.displayName.localeCompare(r.displayName)),s}),Lr=N(()=>{const e=Gn(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",r=sm(o),a=Fo(o);t[o]||(t[o]={skillPath:o,category:r,categoryName:nm(r).name,skillName:a.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const r=n.categoryName.localeCompare(o.categoryName);return r!==0?r:n.skillName.localeCompare(o.skillName)}),s}),Oc=N(()=>Vo.value?Br.value.filter(e=>e.total>0):Br.value),Tc=N(()=>Vo.value?Lr.value.filter(e=>e.total>0):Lr.value);function Ic(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Up=N(()=>ya.value==="lessons"?Oc.value:Tc.value),Mp=N(()=>Qs.value.length>1),Fp=N(()=>Qs.value.find(e=>e.id===Vt.value)||null),jp=N(()=>Gn().length>0),Hp=N(()=>Gn().length),Kp=N(()=>{const e=Gn();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Vp(){const t=He().currentUser.value;t&&(Vt.value=t.id,await Nc(),await ba())}function Wp(){Ln.value=[],Qs.value=[],Vt.value=null,ya.value="lessons",Vo.value=!0,Ds.value=null,sn.value=!1,Wn.value=[]}function Gt(){return{loading:Pr,error:Ds,selectedUserId:Vt,observations:Ln,accessibleUsers:Qs,activeTab:ya,onlyWithObservations:Vo,useTestData:sn,testObservations:Wn,enableTestMode:Pp,disableTestMode:Bp,lessonStats:Br,taxonStats:Lr,filteredLessonStats:Oc,filteredTaxonStats:Tc,currentStats:Up,canViewOtherUsers:Mp,selectedUser:Fp,hasData:jp,totalObservations:Hp,overallSuccessRate:Kp,initialize:Vp,loadAccomplishments:ba,selectUser:Lp,fetchAccessibleUsers:Nc,reset:Wp,formatLessonName:Ic}}const _a="https://api.bridge-classroom.com/api",Ec="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",vt=E("idle"),Rc=E(null),Rs=E(null),Ps=E(0),Bs=E(navigator.onLine),mn=E(!1),El=5,Gp=1e3,zp=6e4,Jp=5e3;let Hs=null;function Yp(e){const t=Math.min(Gp*Math.pow(2,e),zp);return t+Math.random()*t*.25}async function Dc(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${_a}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,error:`Server error: ${n.status} - ${r}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function Pc(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(r=>({encrypted_data:r.encrypted_data,iv:r.iv,metadata:r.metadata}))},n=await fetch(`${_a}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ec},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${r}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function zn(){var n,o;const e=He(),t=us();if(!navigator.onLine)return vt.value="offline",{success:!1,offline:!0};vt.value="syncing",Rs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const r=e.currentUser.value;if(r&&!r.serverRegistered){const c=await Dc(r);if(c.success)e.updateUser(r.id,{serverRegistered:!0}),mn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(c.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),vt.value="error",Rs.value="Account already exists. Please use recovery.",mn.value=!0,s;console.warn("User registration failed:",c.error),mn.value=!0,Rs.value=`Registration failed: ${c.error}`}}const a=await t.encryptPendingObservations();a>0&&console.log(`Encrypted ${a} observations`);let l=!1;if(r!=null&&r.dataConsent){const c=t.getPendingObservations();if(c.length>0){const u=await Pc(c);if(u.success&&u.synced>0){const f=c.filter(d=>d.encrypted).slice(0,u.synced).map(d=>{var p;return(p=d.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await Gt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(f)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(l=!0,Rs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return mn.value||l?vt.value="error":(vt.value="idle",Rc.value=new Date().toISOString(),Ps.value=0),s}catch(r){return console.error("Sync failed:",r),Rs.value=r.message,vt.value="error",s.success=!1,s}}function Ur(){Hs&&clearTimeout(Hs),Hs=setTimeout(async()=>{await zn()},Jp)}async function Bc(){return Hs&&(clearTimeout(Hs),Hs=null),await zn()}async function Lc(){if(Ps.value>=El){console.log("Max retries reached, giving up"),vt.value="error";return}const e=Yp(Ps.value);Ps.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Ps.value}/${El})`),setTimeout(async()=>{const t=await zn();!t.success&&t.offline!==!0&&Lc()},e)}function qp(){var l;const e=He(),t=us(),s=(l=e.currentUser)==null?void 0:l.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(c=>c.encrypted);if(o.length===0)return;const r={observations:o.map(c=>({encrypted_data:c.encrypted_data,iv:c.iv,metadata:c.metadata}))},a=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(`${_a}/observations?api_key=${Ec}`,a),console.log("Sent beacon with",o.length,"observations")}function Xp(){window.addEventListener("online",()=>{Bs.value=!0,console.log("Back online, triggering sync"),Bc()}),window.addEventListener("offline",()=>{Bs.value=!1,vt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Bs.value&&(console.log("Tab visible, triggering sync"),Ur())}),window.addEventListener("beforeunload",qp),setInterval(()=>{document.visibilityState==="visible"&&Bs.value&&Ur()},5*60*1e3)}async function Qp(){Xp(),navigator.onLine?await zn():vt.value="offline"}function Uc(){const e=N(()=>vt.value==="syncing"),t=N(()=>vt.value==="offline"||!Bs.value),s=N(()=>vt.value==="error"),n=N(()=>us().pendingCount.value>0);return{syncState:vt,lastSyncAt:Rc,lastError:Rs,retryCount:Ps,isOnline:Bs,registrationFailed:mn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:Qp,performSync:zn,triggerSync:Ur,forceSync:Bc,retrySync:Lc,registerUserWithServer:Dc,syncObservationsToServer:Pc}}const gs={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},ft={NONE:"none",SILVER:"silver",GOLD:"gold"},Zp=6;function eh(e){return e.slice(0,10)}function Mc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Fc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Rl=60*60*1e3;function jc(e){if(e.length===0)return gs.GREY;const t=e[e.length-1];if(!t.correct)return gs.RED;const s=Date.now()-Rl;if(e.some(l=>!l.correct&&new Date(l.timestamp).getTime()>s))return gs.YELLOW;const o=e.filter(l=>!l.correct).pop();if(!o)return gs.GREEN;const r=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-r<=Rl?gs.ORANGE:gs.GREEN}function Hc(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function Kc(e){if(e.length===0)return ft.NONE;const t=new Set;for(const a of e)t.add(eh(a.timestamp));const s=[...t].filter(a=>Hc(e,a)).sort();if(s.length<2)return ft.NONE;let n=1,o=1,r=s[0];for(let a=1;a<s.length;a++)Mc(r,s[a])>=Zp&&(o++,r=s[a],o>n&&(n=o));return n>=3?ft.GOLD:n>=2?ft.SILVER:ft.NONE}function th(e){const t=e.observations.value||[];let s=[];try{s=us().getPendingObservations().filter(l=>l.metadata).map(l=>{const c=l.metadata;return{id:c.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:c.timestamp||l.queuedAt,skill_path:c.skill_path,correct:c.correct,deal_subfolder:c.deal_subfolder,deal_number:c.deal_number,session_id:c.session_id,_local:!0}})}catch{}const n=new Set(t.map(r=>r.id)),o=s.filter(r=>!n.has(r.id));return[...t,...o]}function sh(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var r;return(o.deal_subfolder||((r=o.deal)==null?void 0:r.subfolder))===t});return s.map(o=>{const r=n.filter(l=>{var c;return(l.deal_number??((c=l.deal)==null?void 0:c.deal_number))===o}).sort((l,c)=>l.timestamp.localeCompare(c.timestamp)),a=Fc(r);return{boardNumber:o,status:jc(r),achievement:Kc(r),attemptCount:a.length,lastAttemptTime:r.length>0?r[r.length-1].timestamp:null}})}function nh(e){return!e||e.length===0?{achievement:ft.NONE}:e.every(n=>n.achievement===ft.GOLD)?{achievement:ft.GOLD}:e.every(n=>n.achievement===ft.SILVER||n.achievement===ft.GOLD)?{achievement:ft.SILVER}:{achievement:ft.NONE}}const Vc="bridgeLessonBoards",Un=E(oh()),ur=new Set;function oh(){try{const e=localStorage.getItem(Vc);return e?JSON.parse(e):{}}catch{return{}}}function rh(){try{localStorage.setItem(Vc,JSON.stringify(Un.value))}catch{}}function Wc(e,t){Un.value={...Un.value,[e]:t},rh()}function ah(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,r)=>o-r)}async function lh(e){const t=Kn(),s=e.filter(n=>!Un.value[n]&&!ur.has(n));if(s.length!==0){for(const n of s)ur.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const r=n.includes("/")?n.split("/").pop():n,a=`${o.baseUrl}/${r}.pbn`;try{const l=await fetch(a);if(!l.ok)continue;const c=await l.text(),u=ah(c);if(u.length>0){Wc(n,u);break}}catch{continue}}}finally{ur.delete(n)}}))}}function ih(e){var n,o;const t=Un.value,s={};for(const r of e){const a=r.deal_subfolder||((n=r.deal)==null?void 0:n.subfolder),l=r.deal_number??((o=r.deal)==null?void 0:o.deal_number);!a||l==null||(s[a]||(s[a]={boards:new Set,lastActivity:r.timestamp}),s[a].boards.add(l),r.timestamp>s[a].lastActivity&&(s[a].lastActivity=r.timestamp))}return Object.entries(s).map(([r,a])=>{const l=t[r];if(l)return{subfolder:r,boardNumbers:l,lastActivity:a.lastActivity};const c=Math.max(...a.boards),u=[];for(let f=1;f<=c;f++)u.push(f);return{subfolder:r,boardNumbers:u,lastActivity:a.lastActivity}})}function nn(){const e=Gt();function t(){return th(e)}return{STATUS:gs,ACHIEVEMENT:ft,getObservations:t,computeBoardMastery:sh,computeLessonAchievement:nh,extractLessonsFromObservations:ih,saveLessonBoardNumbers:Wc,fetchMissingBoardCounts:lh,groupIntoBoardAttempts:Fc,calculateCurrentStatus:jc,calculateAchievement:Kc,hasGreenDay:Hc,daysBetween:Mc}}const pn="https://api.bridge-classroom.com/api",hn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",So=E(!1),wa=E(null),Wo=E([]),rs=E({}),Co=E(!1),ko=E(null),Sa=E(!1),$o={},ch=2*60*1e3;async function uh(){var s;const e=He(),t=e.currentUser.value;if(!t||!t.email){So.value=!1;return}try{const n=await fetch(`${pn}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":hn}});if(!n.ok)return;const o=await n.json(),r=Array.isArray(o)?o[0]:null;if(!r)return;wa.value=r.id;const a=await fetch(`${pn}/grants?grantee_id=${r.id}`,{headers:{"x-api-key":hn}});if(!a.ok)return;const c=(await a.json()).grants||[],u=new Set(c.filter(m=>m.grantor_id!==t.id).map(m=>m.grantor_id));if(u.size===0)return;const f=await fetch(`${pn}/users`,{headers:{"x-api-key":hn}});if(!f.ok)return;const p=(await f.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(Wo.value=p.filter(m=>{var y;return u.has(m.id)&&m.id!==t.id&&((y=m.email)==null?void 0:y.toLowerCase())!==v}).sort((m,y)=>`${m.first_name} ${m.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),So.value=!0,Sa.value=!0,t.role!=="teacher"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${pn}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":hn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Gc(e){const t=rs.value[e],s=$o[e];if(t&&s&&Date.now()-s<ch)return t;try{const n=await fetch(`${pn}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":hn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=((await n.json()).observations||[]).map(a=>({id:a.id||a.observation_id,timestamp:a.timestamp,skill_path:a.skill_path,correct:a.correct,deal_subfolder:a.deal_subfolder,deal_number:a.deal_number}));return rs.value={...rs.value,[e]:r},$o[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function dh(){Co.value=!0,ko.value=null;try{await Promise.allSettled(Wo.value.map(s=>Gc(s.id)));const e=nn(),t=new Set;for(const s of Object.values(rs.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){ko.value=e.message,console.error("Failed to load student summaries:",e)}finally{Co.value=!1}}function fh(e){const t=rs.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=nn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const a of n){const l=s.computeBoardMastery(t,a.subfolder,a.boardNumbers);for(const c of l)o[c.status]=(o[c.status]||0)+1}let r=null;for(const a of t)(!r||a.timestamp>r)&&(r=a.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:r}}function vh(e,t=3){const s=rs.value[e]||[],n=Gt(),o={};for(const r of s){const a=r.deal_subfolder;a&&(!o[a]||r.timestamp>o[a])&&(o[a]=r.timestamp)}return Object.entries(o).sort(([,r],[,a])=>a.localeCompare(r)).slice(0,t).map(([r])=>n.formatLessonName(r))}function mh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),r=Math.floor(n/36e5),a=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:s.toLocaleDateString()}function ph(){So.value=!1,wa.value=null,Wo.value=[],rs.value={},Co.value=!1,ko.value=null,Sa.value=!1;for(const e of Object.keys($o))delete $o[e]}function Ca(){return{isTeacher:So,viewerId:wa,students:Wo,studentObservations:rs,loading:Co,error:ko,initialized:Sa,checkTeacherStatus:uh,fetchStudentObservations:Gc,loadAllStudentSummaries:dh,getStudentMasterySummary:fh,getStudentRecentLessons:vh,formatTimeSince:mh,reset:ph}}const hh={key:0,class:"minimal-hand"},gh={class:"seat-label-inline"},yh={class:"seat-label"},bh={key:0,class:"suits"},_h={key:0,class:"suit-row"},wh={key:0,class:"cards clickable-cards"},Sh=["onClick"],Ch={key:1,class:"cards"},kh={key:2,class:"cards"},$h={key:1,class:"hidden-hand"},Ah={key:2,class:"hcp"},xh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=ac,n=N(()=>Nr(t.seat)),o=N(()=>Yv(t.hand)),r=N(()=>t.hand?s.reduce((O,A)=>{var _;return O+(((_=t.hand[A])==null?void 0:_.length)||0)},0):0),a=N(()=>r.value>0&&r.value<5);function l(O){return t.hand&&t.hand[O]&&t.hand[O].length>0}function c(O){return aa[O]}function u(O){return zv(O)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d(O){return f[O]||O}function p(O){if(!t.hand||!t.hand[O])return"";const A=t.hand[O];return A.length===0?"":A.map(cr).join(" ")}const v=N(()=>t.playedCards&&t.playedCards.length>0),m=N(()=>{if(!t.playedCards)return null;const O=new Set;for(const A of t.playedCards){const _=A[0].toUpperCase(),S=A.slice(1).toUpperCase(),D={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];D&&O.add(`${D}:${S}`)}return O});function y(O,A){return m.value?m.value.has(`${O}:${A}`):!1}return(O,A)=>(h(),g("div",{class:re(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(h(),g("div",hh,[i("span",gh,C(e.seat),1),(h(!0),g(X,null,ce(R(s),_=>(h(),g("span",{key:_,class:re(["suit-symbol-inline",u(_)])},C(c(_)),3))),128))])):(h(),g(X,{key:1},[i("div",yh,C(n.value),1),!e.hidden&&e.hand?(h(),g("div",bh,[(h(!0),g(X,null,ce(R(s),_=>(h(),g(X,{key:_},[!a.value||l(_)?(h(),g("div",_h,[i("span",{class:re(["suit-symbol",u(_)])},C(c(_)),3),e.clickable?(h(),g("span",wh,[(h(!0),g(X,null,ce(e.hand[_],S=>(h(),g("span",{key:S,class:re(y(_,S)?"card-played":"card-clickable"),onClick:D=>!y(_,S)&&O.$emit("card-click",{suit:d(_),rank:S})},C(R(cr)(S)),11,Sh))),128))])):v.value?(h(),g("span",Ch,[(h(!0),g(X,null,ce(e.hand[_],S=>(h(),g("span",{key:S,class:re({"card-played":y(_,S)})},C(R(cr)(S)),3))),128))])):(h(),g("span",kh,C(p(_)),1))])):B("",!0)],64))),128))])):e.hidden?(h(),g("div",$h,[...A[0]||(A[0]=[i("div",{class:"card-back"},null,-1)])])):B("",!0),e.showHcp&&e.hand&&!e.hidden&&!a.value?(h(),g("div",Ah,C(o.value)+" HCP ",1)):B("",!0)],64))],2))}},eo=he(xh,[["__scopeId","data-v-128fc7ed"]]),Nh={class:"ns-column north-row"},Oh={key:0,class:"position north"},Th={key:0,class:"position west"},Ih={class:"center"},Eh={key:1,class:"position east"},Rh={class:"ns-column south-row"},Dh={key:0,class:"position south"},Ph={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,r,a;return h(),g("div",{class:re(["bridge-table",{compact:e.compact}])},[i("div",Nh,[!e.hiddenSeats.includes("N")&&e.hands.N?(h(),g("div",Oh,[pe(eo,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=l=>t.$emit("card-click",{seat:"N",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(h(),g("div",Th,[pe(eo,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=l=>t.$emit("card-click",{seat:"W",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),i("div",Ih,[ud(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(h(),g("div",Eh,[pe(eo,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(r=e.playedCards)==null?void 0:r.E,onCardClick:s[2]||(s[2]=l=>t.$emit("card-click",{seat:"E",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0),i("div",Rh,[!e.hiddenSeats.includes("S")&&e.hands.S?(h(),g("div",Dh,[pe(eo,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(a=e.playedCards)==null?void 0:a.S,onCardClick:s[3]||(s[3]=l=>t.$emit("card-click",{seat:"S",...l}))},null,8,["hand","showHcp","clickable","playedCards"])])):B("",!0)])],2)}}},Bh=he(Ph,[["__scopeId","data-v-ec6230a9"]]),Lh={class:"bidding-box"},Uh={class:"bid-section"},Mh={class:"levels"},Fh=["onClick"],jh={class:"strains"},Hh=["disabled","onClick"],Kh=["innerHTML"],Vh={class:"special-bids"},Wh=["disabled"],Gh=["disabled"],zh={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=E(1),r=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],a=N(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),l=N(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const v=p[1].toUpperCase();return d.indexOf(v==="N"?"NT":v)});function c(d){o.value=d}function u(d,p){if(!d)return!1;const m=["C","D","H","S","NT"].indexOf(p);return d>a.value||d===a.value&&m>l.value}function f(d,p){u(d,p)&&n("bid",`${d}${p}`)}return(d,p)=>(h(),g("div",Lh,[i("div",Uh,[i("div",Mh,[(h(),g(X,null,ce(7,v=>i("button",{key:v,class:re(["level-btn",{active:o.value===v}]),onClick:m=>c(v)},C(v),11,Fh)),64))]),i("div",jh,[(h(),g(X,null,ce(r,v=>i("button",{key:v.value,class:re(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:m=>f(o.value,v.value)},[i("span",{innerHTML:v.display},null,8,Kh)],10,Hh)),64))])]),i("div",Vh,[i("button",{class:"special-btn pass",onClick:p[0]||(p[0]=v=>d.$emit("bid","Pass"))}," Pass "),i("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=v=>d.$emit("bid","X"))}," Double ",8,Wh),i("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=v=>d.$emit("bid","XX"))}," Redouble ",8,Gh)])]))}},Jh=he(zh,[["__scopeId","data-v-38ccb98f"]]),Yh={class:"auction-table"},qh={class:"rounds"},Xh=["innerHTML"],Qh={key:1,class:"turn-indicator"},Zh={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=N(()=>["W","N","E","S"].indexOf(t.dealer)),n=N(()=>{const u=[],f=t.bids;let d=0,p=0;for(;d<f.length||p===0&&f.length>0;){const v=[null,null,null,null],m=p===0?s.value:0;for(let y=m;y<4&&d<f.length;y++)v[y]=f[d],d++;if(v.some(y=>y!==null)&&u.push(v),p++,p>20)break}if(t.currentBidIndex>=f.length){const v=u[u.length-1],m=v?v.filter(y=>y!==null).length:0;if(u.length===1&&s.value,m===4||u.length>1&&m===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,f){return u===0?f-s.value:4-s.value+(u-1)*4+f}function r(u,f){const d=o(u,f);return d===t.currentBidIndex&&d>=t.bids.length}function a(u,f){return t.wrongBidIndex<0?!1:o(u,f)===t.wrongBidIndex}function l(u,f){return t.correctBidIndex<0?!1:o(u,f)===t.correctBidIndex}function c(u){return la(u).html}return(u,f)=>(h(),g("div",Yh,[f[0]||(f[0]=mo('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),i("div",qh,[(h(!0),g(X,null,ce(n.value,(d,p)=>(h(),g("div",{key:p,class:"round"},[(h(!0),g(X,null,ce(d,(v,m)=>(h(),g("div",{key:m,class:re(["bid-cell",{"current-turn":r(p,m),"wrong-bid":a(p,m),"correct-bid":l(p,m)}])},[v?(h(),g("span",{key:0,innerHTML:c(v)},null,8,Xh)):e.showTurnIndicator&&r(p,m)?(h(),g("span",Qh,"?")):B("",!0)],2))),128))]))),128))])]))}},eg=he(Zh,[["__scopeId","data-v-ac265db8"]]),tg={class:"deal-info"},sg={class:"board-number"},ng={key:0,class:"board-popup"},og={class:"popup-list"},rg=["onClick"],ag={class:"info-row"},lg={class:"info-item"},ig={class:"value"},cg={class:"info-item"},ug={key:0,class:"contract-row"},dg={class:"info-item"},fg=["innerHTML"],vg={key:0,class:"label"},mg={key:0,class:"info-item"},pg=["innerHTML"],hg={key:1,class:"title"},gg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=E(!1);function r(p){n("goto",p),o.value=!1}const a=N(()=>Nr(s.dealer)),l=N(()=>Nr(s.declarer)),c=N(()=>Jv(s.vulnerable)),u=N(()=>{var v;const p=(v=s.vulnerable)==null?void 0:v.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),f=N(()=>s.contract?la(s.contract).html:""),d=N(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],v=s.openingLead.slice(1),m={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},O=m[p]||p;return`<span class="${y[p]||"black"}">${O}</span>${v==="T"?"10":v}`});return(p,v)=>(h(),g("div",tg,[i("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=m=>o.value=!0),onMouseleave:v[1]||(v[1]=m=>o.value=!1)},[i("div",sg,"Board "+C(e.boardNumber),1),o.value&&e.totalDeals>1?(h(),g("div",ng,[v[2]||(v[2]=i("div",{class:"popup-header"},"Select Board",-1)),i("div",og,[(h(!0),g(X,null,ce(e.totalDeals,m=>(h(),g("button",{key:m,class:re(["popup-item",{active:m-1===e.currentIndex}]),onClick:y=>r(m-1)}," Board "+C(e.dealBoardNumbers[m-1]||m),11,rg))),128))])])):B("",!0)],32),i("div",ag,[i("div",lg,[v[3]||(v[3]=i("span",{class:"label"},"Dealer:",-1)),i("span",ig,C(a.value),1)]),i("div",cg,[v[4]||(v[4]=i("span",{class:"label"},"Vul:",-1)),i("span",{class:re(["value",u.value])},C(c.value),3)])]),e.showContract&&e.contract?(h(),g("div",ug,[i("div",dg,[i("span",{class:"value contract",innerHTML:f.value},null,8,fg),e.declarer?(h(),g("span",vg,"by "+C(l.value),1)):B("",!0)]),e.openingLead?(h(),g("div",mg,[v[5]||(v[5]=i("span",{class:"label"},"OL:",-1)),i("span",{class:"value lead-card",innerHTML:d.value},null,8,pg)])):B("",!0)])):B("",!0),e.title?(h(),g("div",hg,C(e.title),1)):B("",!0)]))}},yg=he(gg,[["__scopeId","data-v-5a844c49"]]),bg={class:"feedback-header"},_g={key:0,class:"icon"},wg={key:1,class:"icon"},Sg={class:"title"},Cg={key:0,class:"feedback-content"},kg={class:"bid-comparison"},$g={class:"bid-item your-bid"},Ag=["innerHTML"],xg={class:"bid-item correct-bid"},Ng=["innerHTML"],Og={key:1,class:"feedback-content"},Tg={class:"bid-comparison"},Ig={class:"bid-item your-bid"},Eg=["innerHTML"],Rg={class:"bid-item correct-bid"},Dg=["innerHTML"],Pg=["innerHTML"],Bg={class:"actions"},Lg={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=N(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(r){return la(r).html}function o(r){return qv(r).html}return(r,a)=>e.visible?(h(),g("div",{key:0,class:re(["feedback-panel",e.type])},[i("div",bg,[e.type==="wrong"?(h(),g("span",_g,"")):e.type==="correct"?(h(),g("span",wg,"")):B("",!0),i("span",Sg,C(s.value),1)]),e.wrongBid?(h(),g("div",Cg,[i("div",kg,[i("div",$g,[a[1]||(a[1]=i("span",{class:"label"},"Your bid:",-1)),i("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Ag)]),i("div",xg,[a[2]||(a[2]=i("span",{class:"label"},"Correct bid:",-1)),i("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Ng)])])])):B("",!0),e.wrongCardCode?(h(),g("div",Og,[i("div",Tg,[i("div",Ig,[a[3]||(a[3]=i("span",{class:"label"},"Your card:",-1)),i("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Eg)]),i("div",Rg,[a[4]||(a[4]=i("span",{class:"label"},"Correct card:",-1)),i("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Dg)])])])):B("",!0),e.commentary?(h(),g("div",{key:2,class:"commentary",innerHTML:R(Es)(e.commentary)},null,8,Pg)):B("",!0),i("div",Bg,[e.showContinue?(h(),g("button",{key:0,class:"btn continue",onClick:a[0]||(a[0]=l=>r.$emit("continue"))}," Continue ")):B("",!0)])],2)):B("",!0)}},Dl=he(Lg,[["__scopeId","data-v-04368462"]]),Ug={class:"welcome-screen"},Mg={class:"welcome-card"},Fg={class:"welcome-header"},jg={key:0,class:"welcome-body"},Hg={class:"form-group"},Kg={key:0,class:"error-message"},Vg={class:"form-group"},Wg={key:0,class:"error-message"},Gg={class:"form-group"},zg={key:0,class:"error-message"},Jg={key:0,class:"form-group"},Yg={class:"checkbox-group"},qg=["value","checked","onChange"],Xg={key:1,class:"form-group"},Qg={class:"single-classroom"},Zg={class:"form-group consent-group"},ey={class:"checkbox-label consent-label"},ty={key:0,class:"consent-details"},sy=["disabled"],ny={key:0},oy={key:1},ry={key:1,class:"welcome-body returning"},ay={key:2,class:"welcome-body switcher"},ly={class:"user-list"},iy=["onClick"],cy={class:"user-name"},uy={key:0,class:"user-class"},dy={key:3,class:"welcome-body recovery-sent"},fy={class:"subtitle"},vy={class:"recovery-info"},my={class:"code-entry"},py=["disabled"],hy={key:0},gy={key:1},yy={key:0,class:"error-message"},by={key:4,class:"welcome-body recovery-claiming"},_y={class:"subtitle"},wy={key:0,class:"recovery-error-panel"},Sy={class:"error-message"},Cy={key:1,class:"loading-spinner"},ky={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=Kn(),o=He(),r="https://api.bridge-classroom.com/api",a=E("form"),l=E(""),c=E(""),u=E(""),f=E([]),d=E(!0),p=E({firstName:"",lastName:"",email:"",classrooms:""}),v=E(!1),m=E(!1),y=E(""),O=E(""),A=E(""),_=E(""),S=E("");Nt(async()=>{o.initialize(),n.initializeFromUrl();const te=new URLSearchParams(window.location.search),j=te.get("recover"),Z=te.get("user_id");if(j&&Z){await ue(Z,j),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?a.value="returning":o.hasUsers.value?a.value="switcher":a.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,K=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ee=N(()=>l.value.trim().length>0&&c.value.trim().length>0&&u.value.trim().length>0&&D.test(u.value.trim())),se=N(()=>o.currentUser.value?o.currentUser.value.firstName:""),le=N(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function J(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let te=!0;return l.value.trim()||(p.value.firstName="First name is required",te=!1),c.value.trim()||(p.value.lastName="Last name is required",te=!1),u.value.trim()?D.test(u.value.trim())||(p.value.email="Please enter a valid email address",te=!1):(p.value.email="Email is required",te=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",te=!1),te}async function de(){const te=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const j=await o.requestRecovery(te,r);return j.success?(O.value=te,_.value=j.message,a.value="recovery-sent",!1):j.message&&j.message.includes("No account found")?!0:(p.value.email=j.message||"Unable to verify email. Please try again.",!1)}catch(j){return console.error("Failed to check email on server:",j),K?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ue(te,j){a.value="recovery-claiming",m.value=!0,y.value="Recovering your account...",A.value="";try{const Z=await o.claimRecovery(te,j,r);Z.success&&Z.user?s("userReady",Z.user):(A.value=Z.error||"Recovery failed. Please try again.",a.value="form")}catch(Z){console.error("[Recovery] Exception:",Z),A.value="Unable to complete recovery. Please try again.",a.value="form"}finally{m.value=!1,y.value=""}}async function we(){if(S.value.trim().length===6){m.value=!0,y.value="Verifying code...",A.value="";try{const te=await o.claimRecoveryByCode(O.value.trim(),S.value.trim(),r);te.success&&te.user?s("userReady",te.user):A.value=te.error||"Invalid code. Please check and try again."}catch(te){console.error("Recovery code claim failed:",te),A.value="Unable to connect to server. Please try again."}finally{m.value=!1,y.value=""}}}async function Re(){if(!J())return;if(m.value=!0,y.value="Checking account...",!await de()){m.value=!1,y.value="";return}let j=[];n.hasSingleClassroom.value?j=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(j=[...f.value]),y.value="Creating your secure encryption key...";try{const Z=await o.createUser({firstName:l.value,lastName:c.value,email:u.value,classrooms:j,dataConsent:d.value,apiUrl:r});s("userReady",Z)}catch(Z){console.error("Failed to create user:",Z),p.value.email="Failed to create account. Please try again."}finally{m.value=!1,y.value=""}}function Le(){s("userReady",o.currentUser.value)}function Ke(){a.value="switcher"}function ge(te){o.switchUser(te),s("userReady",o.currentUser.value)}function q(){l.value="",c.value="",u.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},a.value="form"}function fe(){o.currentUser.value?a.value="returning":o.hasUsers.value&&(a.value="switcher")}function me(te){const j=f.value.indexOf(te);j===-1?f.value.push(te):f.value.splice(j,1)}return(te,j)=>(h(),g("div",Ug,[i("div",Mg,[i("div",Fg,[i("h1",null,C(le.value),1)]),a.value==="form"?(h(),g("div",jg,[j[16]||(j[16]=i("h2",null,"Welcome!",-1)),j[17]||(j[17]=i("p",{class:"subtitle"},"Please enter your name to get started.",-1)),i("form",{onSubmit:Ut(Re,["prevent"]),class:"user-form"},[i("div",Hg,[j[8]||(j[8]=i("label",{for:"firstName"},"First Name",-1)),Ze(i("input",{id:"firstName","onUpdate:modelValue":j[0]||(j[0]=Z=>l.value=Z),type:"text",placeholder:"Enter your first name",class:re({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[Rt,l.value]]),p.value.firstName?(h(),g("span",Kg,C(p.value.firstName),1)):B("",!0)]),i("div",Vg,[j[9]||(j[9]=i("label",{for:"lastName"},"Last Name",-1)),Ze(i("input",{id:"lastName","onUpdate:modelValue":j[1]||(j[1]=Z=>c.value=Z),type:"text",placeholder:"Enter your last name",class:re({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[Rt,c.value]]),p.value.lastName?(h(),g("span",Wg,C(p.value.lastName),1)):B("",!0)]),i("div",Gg,[j[10]||(j[10]=i("label",{for:"email"},"Email Address",-1)),Ze(i("input",{id:"email","onUpdate:modelValue":j[2]||(j[2]=Z=>u.value=Z),type:"email",placeholder:"Enter your email address",class:re({"has-error":p.value.email}),autocomplete:"email"},null,2),[[Rt,u.value]]),p.value.email?(h(),g("span",zg,C(p.value.email),1)):B("",!0),j[11]||(j[11]=i("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),R(n).hasMultipleClassrooms.value?(h(),g("div",Jg,[j[12]||(j[12]=i("label",null,"Select Your Class(es)",-1)),i("div",Yg,[(h(!0),g(X,null,ce(R(n).availableClassrooms.value,Z=>(h(),g("label",{key:Z.id,class:"checkbox-label"},[i("input",{type:"checkbox",value:Z.id,checked:f.value.includes(Z.id),onChange:Ve=>me(Z.id)},null,40,qg),i("span",null,C(Z.name),1)]))),128))])])):R(n).hasSingleClassroom.value?(h(),g("div",Xg,[j[13]||(j[13]=i("label",null,"Class",-1)),i("div",Qg,C(R(n).singleClassroom.value.name),1)])):B("",!0),i("div",Zg,[i("label",ey,[Ze(i("input",{type:"checkbox","onUpdate:modelValue":j[3]||(j[3]=Z=>d.value=Z)},null,512),[[Lo,d.value]]),j[14]||(j[14]=i("span",null," Preserve my practice history ",-1))]),i("button",{type:"button",class:"details-toggle",onClick:j[4]||(j[4]=Z=>v.value=!v.value)},C(v.value?"Hide details":"What data is preserved?"),1),v.value?(h(),g("div",ty,[...j[15]||(j[15]=[mo('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):B("",!0)]),i("button",{type:"submit",class:"submit-btn",disabled:!ee.value||m.value},[m.value?(h(),g("span",ny,C(y.value),1)):(h(),g("span",oy,"Start Practicing"))],8,sy)],32),R(o).hasUsers.value?(h(),g("button",{key:0,class:"back-link",onClick:fe}," Back to user selection ")):B("",!0)])):a.value==="returning"?(h(),g("div",ry,[i("h2",null,"Welcome back, "+C(se.value)+"!",1),j[18]||(j[18]=i("p",{class:"subtitle"},"Ready to continue practicing?",-1)),i("button",{class:"submit-btn",onClick:Le}," Continue "),i("button",{class:"switch-link",onClick:Ke}," Not "+C(se.value)+"? Switch user ",1)])):a.value==="switcher"?(h(),g("div",ay,[j[19]||(j[19]=i("h2",null,"Select User",-1)),j[20]||(j[20]=i("p",{class:"subtitle"},"Choose who's practicing today:",-1)),i("div",ly,[(h(!0),g(X,null,ce(R(o).allUsers.value,Z=>{var Ve;return h(),g("button",{key:Z.id,class:re(["user-item",{"is-current":Z.id===R(o).currentUserId.value}]),onClick:lt=>ge(Z.id)},[i("span",cy,C(Z.firstName)+" "+C(Z.lastName),1),(Ve=Z.classrooms)!=null&&Ve.length?(h(),g("span",uy,C(Z.classrooms.join(", ")),1)):B("",!0)],10,iy)}),128))]),i("button",{class:"add-user-btn",onClick:q}," + Add New User "),R(o).currentUser.value?(h(),g("button",{key:0,class:"back-link",onClick:fe}," Cancel ")):B("",!0)])):a.value==="recovery-sent"?(h(),g("div",dy,[j[25]||(j[25]=i("h2",null,"Check Your Email",-1)),i("p",fy,[j[21]||(j[21]=En(" We found an existing account for ",-1)),i("strong",null,C(O.value),1),j[22]||(j[22]=En(". ",-1))]),i("div",vy,[i("p",null,C(_.value),1),j[23]||(j[23]=i("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),i("div",my,[j[24]||(j[24]=i("label",{for:"recoveryCode"},"Recovery Code",-1)),Ze(i("input",{id:"recoveryCode","onUpdate:modelValue":j[5]||(j[5]=Z=>S.value=Z),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:zi(we,["enter"])},null,544),[[Rt,S.value]]),i("button",{class:"submit-btn",disabled:S.value.trim().length!==6||m.value,onClick:we},[m.value?(h(),g("span",hy,C(y.value),1)):(h(),g("span",gy,"Restore Account"))],8,py),A.value?(h(),g("span",yy,C(A.value),1)):B("",!0)]),i("button",{class:"back-link",onClick:j[6]||(j[6]=Z=>a.value="form")}," Use a different email ")])):a.value==="recovery-claiming"?(h(),g("div",by,[j[27]||(j[27]=i("h2",null,"Restoring Your Account",-1)),i("p",_y,C(y.value),1),A.value?(h(),g("div",wy,[i("p",Sy,C(A.value),1),i("button",{class:"back-link",onClick:j[7]||(j[7]=Z=>a.value="form")}," Try again ")])):(h(),g("div",Cy,[...j[26]||(j[26]=[i("div",{class:"spinner"},null,-1)])]))])):B("",!0)])]))}},$y=he(ky,[["__scopeId","data-v-4e48322f"]]),ms="https://api.bridge-classroom.com/api",Ns="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ps=E([]),Os=E(null),ht=E(!1),Pe=E(null);function Jn(){async function e(c){ht.value=!0,Pe.value=null;try{const f=await(await fetch(`${ms}/classrooms?teacher_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":Ns}})).json();return f.success?ps.value=f.classrooms:Pe.value=f.error||"Failed to fetch classrooms",f}catch(u){return console.error("Failed to fetch classrooms:",u),Pe.value="Unable to connect to server",null}finally{ht.value=!1}}async function t(c,u,f){ht.value=!0,Pe.value=null;try{const d=await fetch(`${ms}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ns},body:JSON.stringify({teacher_id:c,name:u,description:f||null})});if(!d.ok){const v=await d.text();return Pe.value=v||`Server error (${d.status})`,{success:!1,error:Pe.value}}const p=await d.json();return p.success?ps.value=[p.classroom,...ps.value]:Pe.value=p.error||"Failed to create classroom",p}catch(d){return console.error("Failed to create classroom:",d),Pe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{ht.value=!1}}async function s(c){ht.value=!0,Pe.value=null;try{const f=await(await fetch(`${ms}/classrooms/${encodeURIComponent(c)}`,{headers:{"x-api-key":Ns}})).json();return f.success?Os.value=f.classroom:Pe.value=f.error||"Failed to fetch classroom",f}catch(u){return console.error("Failed to fetch classroom detail:",u),Pe.value="Unable to connect to server",null}finally{ht.value=!1}}async function n(c,u){try{const d=await(await fetch(`${ms}/classrooms/${encodeURIComponent(c)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Ns}})).json();if(d.success&&Os.value){Os.value.members=Os.value.members.filter(v=>v.student_id!==u);const p=ps.value.findIndex(v=>v.id===c);p!==-1&&ps.value[p].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(c){ht.value=!0,Pe.value=null;try{const u=await fetch(`${ms}/join/${encodeURIComponent(c)}`);return u.status===404?(Pe.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Pe.value="Unable to connect to server",null}finally{ht.value=!1}}async function r(c,u,f){ht.value=!0,Pe.value=null;try{const p=await(await fetch(`${ms}/join/${encodeURIComponent(c)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ns},body:JSON.stringify({student_id:u,encrypted_grant_payload:f})})).json();return p.success||(Pe.value=p.error||"Failed to join classroom"),p}catch(d){return console.error("Failed to join classroom:",d),Pe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{ht.value=!1}}async function a(c,u){try{return await(await fetch(`${ms}/classrooms/${encodeURIComponent(c)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ns},body:JSON.stringify({student_id:u})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function l(){ps.value=[],Os.value=null,ht.value=!1,Pe.value=null}return{teacherClassrooms:ps,currentClassroom:Os,loading:ht,error:Pe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:r,leaveClassroom:a,reset:l}}const Ay={class:"settings-panel"},xy={class:"settings-body"},Ny={class:"settings-section"},Oy={class:"info-row"},Ty={class:"info-value"},Iy={class:"info-row"},Ey={class:"info-value"},Ry={class:"info-row"},Dy={class:"info-row"},Py={class:"info-value"},By={key:1,class:"edit-form"},Ly={class:"form-group"},Uy={class:"form-group"},My={class:"form-group"},Fy={class:"checkbox-label"},jy={key:0,class:"settings-section"},Hy={class:"assignment-list"},Ky={class:"assignment-header"},Vy={class:"assignment-name"},Wy={class:"assignment-progress"},Gy={class:"progress-bar"},zy={class:"assignment-meta"},Jy={key:0},Yy={class:"assignment-list"},qy={class:"assignment-header"},Xy={class:"assignment-name"},Qy={class:"assignment-meta"},Zy={key:1,class:"settings-section"},eb={class:"classroom-id"},tb=["disabled","onClick"],sb={class:"settings-section"},nb={class:"toggle-row"},ob={class:"toggle-label"},rb=["checked"],ab={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=He(),o=Kn(),r=Ho(),a=Jn(),l=E(!1),c=E(""),u=E(""),f=E(!0),d=N(()=>n.currentUser.value),p=N(()=>{var le;return!d.value||!((le=d.value.classrooms)!=null&&le.length)?"No classroom assigned":d.value.classrooms.map(J=>{const de=o.availableClassrooms.value.find(ue=>ue.id===J);return de?de.name:J}).join(", ")}),v=N(()=>r.getAllAssignments().filter(le=>le.completionPercent<100)),m=N(()=>r.getAllAssignments().filter(le=>le.completionPercent>=100));function y(){d.value&&(c.value=d.value.firstName,u.value=d.value.lastName,f.value=d.value.dataConsent,l.value=!0)}function O(){l.value=!1}function A(){d.value&&(n.updateUser(d.value.id,{firstName:c.value,lastName:u.value,dataConsent:f.value}),l.value=!1)}function _(){s("switchUser")}function S(){l.value=!1,s("close")}const D=E(null);async function K(le){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(D.value=le,(await a.leaveClassroom(le,d.value.id)).success){const de=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:de.filter(ue=>ue!==le)})}D.value=null}function ee(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function se(le){return le?new Date(le).toLocaleDateString():"N/A"}return(le,J)=>{var de,ue,we,Re,Le,Ke,ge;return e.visible?(h(),g("div",{key:0,class:"settings-overlay",onClick:Ut(S,["self"])},[i("div",Ay,[i("div",{class:"settings-header"},[J[5]||(J[5]=i("h2",null,"Settings",-1)),i("button",{class:"close-btn",onClick:S,"aria-label":"Close"},"  ")]),i("div",xy,[i("section",Ny,[J[12]||(J[12]=i("h3",null,"Your Profile",-1)),l.value?(h(),g("div",By,[i("div",Ly,[J[10]||(J[10]=i("label",{for:"editFirstName"},"First Name",-1)),Ze(i("input",{id:"editFirstName","onUpdate:modelValue":J[1]||(J[1]=q=>c.value=q),type:"text"},null,512),[[Rt,c.value]])]),i("div",Uy,[J[11]||(J[11]=i("label",{for:"editLastName"},"Last Name",-1)),Ze(i("input",{id:"editLastName","onUpdate:modelValue":J[2]||(J[2]=q=>u.value=q),type:"text"},null,512),[[Rt,u.value]])]),i("div",My,[i("label",Fy,[Ze(i("input",{type:"checkbox","onUpdate:modelValue":J[3]||(J[3]=q=>f.value=q)},null,512),[[Lo,f.value]]),i("span",null,"Share practice results with "+C(R(o).teacherName.value||"teacher"),1)])]),i("div",{class:"button-row"},[i("button",{class:"primary-btn",onClick:A}," Save Changes "),i("button",{class:"secondary-btn",onClick:O}," Cancel ")])])):(h(),g(X,{key:0},[i("div",Oy,[J[6]||(J[6]=i("span",{class:"info-label"},"Name",-1)),i("span",Ty,C((de=d.value)==null?void 0:de.firstName)+" "+C((ue=d.value)==null?void 0:ue.lastName),1)]),i("div",Iy,[J[7]||(J[7]=i("span",{class:"info-label"},"Class",-1)),i("span",Ey,C(p.value),1)]),i("div",Ry,[J[8]||(J[8]=i("span",{class:"info-label"},"Data Sharing",-1)),i("span",{class:re(["info-value",(we=d.value)!=null&&we.dataConsent?"enabled":"disabled"])},C((Re=d.value)!=null&&Re.dataConsent?"Enabled":"Disabled"),3)]),i("div",Dy,[J[9]||(J[9]=i("span",{class:"info-label"},"Member Since",-1)),i("span",Py,C(se((Le=d.value)==null?void 0:Le.createdAt)),1)]),i("div",{class:"button-row"},[i("button",{class:"secondary-btn",onClick:y}," Edit Profile "),i("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((Ke=d.value)==null?void 0:Ke.role)!=="teacher"&&((ge=d.value)==null?void 0:ge.role)!=="admin"?(h(),g("button",{key:0,class:"become-teacher-btn",onClick:J[0]||(J[0]=q=>{s("close"),s("become-teacher")})}," Become a Teacher ")):B("",!0)],64))]),v.value.length||m.value.length?(h(),g("section",jy,[J[16]||(J[16]=i("h3",null,"Assignments",-1)),v.value.length?(h(),g(X,{key:0},[J[13]||(J[13]=i("h4",null,"Active",-1)),i("div",Hy,[(h(!0),g(X,null,ce(v.value,q=>(h(),g("div",{key:q.id,class:"assignment-item"},[i("div",Ky,[i("span",Vy,C(q.name),1),i("span",Wy,C(q.completionPercent)+"%",1)]),i("div",Gy,[i("div",{class:"progress-fill",style:cs({width:`${q.completionPercent}%`})},null,4)]),i("div",zy,[q.dueDate?(h(),g("span",Jy," Due: "+C(se(q.dueDate)),1)):B("",!0),i("span",null,C(q.completedDeals)+"/"+C(q.totalDeals)+" deals ",1)])]))),128))])],64)):B("",!0),m.value.length?(h(),g(X,{key:1},[J[15]||(J[15]=i("h4",null,"Completed",-1)),i("div",Yy,[(h(!0),g(X,null,ce(m.value,q=>(h(),g("div",{key:q.id,class:"assignment-item completed"},[i("div",qy,[i("span",Xy,C(q.name),1),J[14]||(J[14]=i("span",{class:"assignment-check"},"",-1))]),i("div",Qy," Completed "+C(se(q.lastPracticedAt)),1)]))),128))])],64)):B("",!0)])):B("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(h(),g("section",Zy,[J[17]||(J[17]=i("h3",null,"My Classrooms",-1)),(h(!0),g(X,null,ce(d.value.classrooms,q=>(h(),g("div",{key:q,class:"classroom-row"},[i("span",eb,C(q),1),i("button",{class:"leave-btn",disabled:D.value===q,onClick:fe=>K(q)},C(D.value===q?"Leaving...":"Leave"),9,tb)]))),128))])):B("",!0),i("section",sb,[J[19]||(J[19]=i("h3",null,"Display Options",-1)),i("div",nb,[i("label",ob,[i("input",{type:"checkbox",checked:R(o).showLoadPbnOption.value,onChange:J[4]||(J[4]=q=>R(o).setUIPref("showLoadPbnOption",q.target.checked))},null,40,rb),J[18]||(J[18]=i("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),i("section",{class:"settings-section"},[J[20]||(J[20]=i("h3",null,"Data & Privacy",-1)),J[21]||(J[21]=i("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),i("button",{class:"remove-device-btn",onClick:ee}," Remove account from this device "),J[22]||(J[22]=i("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):B("",!0)}}},lb=he(ab,[["__scopeId","data-v-57179473"]]),ib={class:"banner-content"},cb={class:"assignment-info"},ub={class:"assignment-title"},db={class:"assignment-name"},fb={class:"assignment-meta"},vb={class:"progress-text"},mb={class:"progress-bar"},pb={key:0,class:"complete-badge"},hb={class:"return-text"},gb={__name:"AssignmentBanner",setup(e){const t=Ho(),s=N(()=>t.currentAssignment.value),n=N(()=>t.hasActiveAssignment.value),o=N(()=>t.assignmentProgress.value),r=N(()=>t.isAssignmentComplete.value),a=N(()=>t.inAssignmentMode.value),l=N(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),c=N(()=>l.value===null?null:l.value<0?"Overdue":l.value===0?"Due today":l.value===1?"Due tomorrow":`Due in ${l.value} days`),u=N(()=>l.value===null?"":l.value<0?"overdue":l.value<=1?"urgent":l.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(p,v)=>{var m,y;return n.value&&a.value?(h(),g("div",{key:0,class:re(["assignment-banner",{complete:r.value}])},[i("div",ib,[i("div",cb,[i("div",ub,[v[0]||(v[0]=i("span",{class:"assignment-label"},"Assignment:",-1)),i("span",db,C((m=s.value)==null?void 0:m.name),1)]),i("div",fb,[i("span",vb,C(o.value.completed)+" of "+C(o.value.total)+" deals ("+C(o.value.percent)+"%) ",1),c.value?(h(),g("span",{key:0,class:re(["due-text",u.value])},C(c.value),3)):B("",!0)])]),i("div",mb,[i("div",{class:re(["progress-fill",{complete:r.value}]),style:cs({width:`${o.value.percent}%`})},null,6)]),i("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),r.value?(h(),g("div",pb," Complete! ")):B("",!0)],2)):s.value&&!a.value?(h(),g("div",{key:1,class:"return-banner",onClick:d},[v[1]||(v[1]=i("span",{class:"return-icon"},"",-1)),i("span",hb," Return to assignment: "+C((y=s.value)==null?void 0:y.name)+" ("+C(o.value.percent)+"% complete) ",1)])):B("",!0)}}},yb=he(gb,[["__scopeId","data-v-a4095a6a"]]),bb={key:0,class:"status-content"},_b={key:1,class:"status-content offline"},wb={key:0,class:"badge"},Sb={key:2,class:"status-content error"},Cb={class:"status-text"},kb={key:0,class:"badge"},$b={key:3,class:"status-content pending"},Ab={class:"status-text"},xb={key:4,class:"status-content synced"},Nb={__name:"SyncStatus",setup(e){const t=Uc(),s=us(),n=N(()=>s.pendingCount.value),o=N(()=>t.registrationFailed.value?"Not registered":"Sync failed"),r=N(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function a(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function l(){t.retrySync()}return(c,u)=>(h(),g("div",{class:re(["sync-status",r.value]),onClick:a},[R(t).isSyncing.value?(h(),g("div",bb,[...u[0]||(u[0]=[i("span",{class:"spinner"},null,-1),i("span",{class:"status-text"},"Syncing...",-1)])])):R(t).isOffline.value?(h(),g("div",_b,[u[1]||(u[1]=i("span",{class:"icon"},"",-1)),u[2]||(u[2]=i("span",{class:"status-text"},"Offline",-1)),n.value>0?(h(),g("span",wb,C(n.value),1)):B("",!0)])):R(t).hasError.value?(h(),g("div",Sb,[u[3]||(u[3]=i("span",{class:"icon"},"",-1)),i("span",Cb,C(o.value),1),n.value>0?(h(),g("span",kb,C(n.value),1)):B("",!0),i("button",{class:"retry-btn",onClick:Ut(l,["stop"])},"Retry")])):n.value>0?(h(),g("div",$b,[u[4]||(u[4]=i("span",{class:"icon"},"",-1)),i("span",Ab,C(n.value)+" pending",1)])):(h(),g("div",xb,[...u[5]||(u[5]=[i("span",{class:"icon"},"",-1),i("span",{class:"status-text"},"Synced",-1)])]))],2))}},Ob=he(Nb,[["__scopeId","data-v-8457149a"]]),Tb={class:"progress-dashboard"},Ib={class:"dashboard-header"},Eb={key:0,class:"loading"},Rb={key:1,class:"error-state"},Db={key:2,class:"empty-state"},Pb={key:3,class:"dashboard-content"},Bb={class:"day-header"},Lb={class:"day-date"},Ub={class:"day-summary"},Mb={class:"day-lessons"},Fb={class:"day-lesson-name"},jb={class:"day-lesson-counts"},Hb={key:0,class:"count count-correct"},Kb={key:1,class:"count count-incorrect"},Vb={class:"observation-total"},Wb={class:"dashboard-actions"},Gb={__name:"ProgressDashboard",emits:["close"],setup(e,{emit:t}){const s=va(),n=Gt();Nt(async()=>{await s.fetchProgress()});async function o(){await s.fetchProgress(!0)}const r=N(()=>{const c=s.getObservationsByDate();return Object.keys(c).sort().reverse().slice(0,10).map(f=>{var y,O;const d=c[f],p={};for(const A of d){const _=A.deal_subfolder||((y=A.deal)==null?void 0:y.subfolder),S=A.deal_number??((O=A.deal)==null?void 0:O.deal_number);!_||S==null||(p[_]||(p[_]={}),p[_][S]||(p[_][S]=[]),p[_][S].push(A))}const v=Object.entries(p).map(([A,_])=>{let S=0,D=0;for(const K of Object.values(_))K.every(se=>se.correct)?S++:D++;return{subfolder:A,correctCount:S,incorrectCount:D}}).sort((A,_)=>a(A.subfolder).localeCompare(a(_.subfolder))),m=v.reduce((A,_)=>A+_.correctCount+_.incorrectCount,0);return{date:f,lessons:v,totalBoards:m}})});function a(c){return n.formatLessonName(c)}function l(c){const u=new Date(c+"T00:00:00"),f=new Date,d=new Date(f);d.setDate(d.getDate()-1);const p=f.toISOString().split("T")[0],v=d.toISOString().split("T")[0];return c===p?"Today":c===v?"Yesterday":u.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}return(c,u)=>(h(),g("div",Tb,[i("header",Ib,[u[3]||(u[3]=i("h2",null,"Your Progress",-1)),i("button",{class:"close-btn",onClick:u[0]||(u[0]=f=>c.$emit("close"))},"")]),R(s).isLoading.value?(h(),g("div",Eb,[...u[4]||(u[4]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading your progress...",-1)])])):R(s).hasError.value?(h(),g("div",Rb,[i("p",null,"Failed to load progress: "+C(R(s).error.value),1),i("button",{onClick:o},"Try Again")])):R(s).hasData.value?(h(),g("div",Pb,[(h(!0),g(X,null,ce(r.value,f=>(h(),g("div",{key:f.date,class:"day-card"},[i("div",Bb,[i("span",Lb,C(l(f.date)),1),i("span",Ub,C(f.totalBoards)+" board"+C(f.totalBoards!==1?"s":"")+" practiced",1)]),i("div",Mb,[(h(!0),g(X,null,ce(f.lessons,d=>(h(),g("div",{key:d.subfolder,class:"day-lesson-row"},[i("span",Fb,C(a(d.subfolder)),1),i("div",jb,[d.correctCount?(h(),g("span",Hb,C(d.correctCount),1)):B("",!0),d.incorrectCount?(h(),g("span",Kb,C(d.incorrectCount),1)):B("",!0)])]))),128))])]))),128)),i("div",Vb,C(R(s).totalObservations.value)+" observations",1),i("div",Wb,[i("button",{class:"secondary-btn",onClick:o}," Refresh Data "),i("button",{class:"primary-btn",onClick:u[2]||(u[2]=f=>c.$emit("close"))}," Continue Practicing ")])])):(h(),g("div",Db,[u[5]||(u[5]=i("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=i("p",null,"Complete some practice deals to see your progress here!",-1)),i("button",{class:"primary-btn",onClick:u[1]||(u[1]=f=>c.$emit("close"))},"Start Practicing")]))]))}},zb=he(Gb,[["__scopeId","data-v-c70ddcce"]]),Jb="test-user-mastery",Yb="test-classroom",qb="Negative_Double",Xb="competitive_bidding/negative_double";let Mr=0;function Me({boardNumber:e,correct:t,timestamp:s}){return Mr++,{id:`mastery-test-${Mr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Jb,skill_path:Xb,correct:t,deal_subfolder:qb,deal_number:e,classroom:Yb}}function it(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function to(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Qb(){Mr=0;const e=[];e.push(Me({boardNumber:2,correct:!0,timestamp:it(5)}),Me({boardNumber:2,correct:!1,timestamp:it(1)})),e.push(Me({boardNumber:3,correct:!1,timestamp:to(30)}),Me({boardNumber:3,correct:!0,timestamp:to(20)})),e.push(Me({boardNumber:4,correct:!1,timestamp:to(90)}),Me({boardNumber:4,correct:!0,timestamp:to(60)})),e.push(Me({boardNumber:5,correct:!1,timestamp:it(10)}),Me({boardNumber:5,correct:!0,timestamp:it(2)})),e.push(Me({boardNumber:6,correct:!0,timestamp:it(14)}),Me({boardNumber:6,correct:!0,timestamp:it(7)})),e.push(Me({boardNumber:7,correct:!0,timestamp:it(21)}),Me({boardNumber:7,correct:!0,timestamp:it(14)}),Me({boardNumber:7,correct:!0,timestamp:it(7)})),e.push(Me({boardNumber:8,correct:!0,timestamp:it(28)}),Me({boardNumber:8,correct:!0,timestamp:it(21)}),Me({boardNumber:8,correct:!0,timestamp:it(14)}),Me({boardNumber:8,correct:!1,timestamp:it(1)}));const t=[1,2,3,4,5].map(s=>({...Me({boardNumber:s,correct:!0,timestamp:it(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Zb=["onClick","title"],e_={key:0,class:"medal gold-medal"},t_={key:1,class:"medal silver-medal"},s_={class:"board-num"},n_={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=nn(),r=N(()=>{const l=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const c=l.find(u=>u.boardNumber===s.forceRedBoard);c&&(c.status="red")}return l});function a(l){const c={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${l.boardNumber}: ${c[l.status]}${u[l.achievement]}`}return(l,c)=>e.boardNumbers.length>0?(h(),g("div",{key:0,class:re(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(h(),g("button",{key:0,class:"intro-btn",onClick:c[0]||(c[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):B("",!0),(h(!0),g(X,null,ce(r.value,(u,f)=>(h(),g("div",{key:u.boardNumber,class:re(["board-indicator",[`status-${u.status}`,{active:f===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:d=>n("goto",f),title:a(u)},[u.achievement==="gold"?(h(),g("span",e_,"")):u.achievement==="silver"?(h(),g("span",t_,"")):B("",!0),i("span",s_,C(u.boardNumber),1)],10,Zb))),128))],2)):B("",!0)}},zc=he(n_,[["__scopeId","data-v-820a0f0c"]]),o_={class:"accomplishments-view"},r_={class:"view-header"},a_={key:0,class:"user-selector"},l_=["value"],i_=["value"],c_={key:1,class:"loading-state"},u_={key:2,class:"error-state"},d_={key:3,class:"empty-state"},f_={key:4,class:"view-content"},v_={class:"controls-row"},m_={class:"tabs"},p_={key:0,class:"tab-content"},h_={key:0,class:"no-data"},g_={key:1,class:"lesson-list"},y_={class:"lesson-header"},b_={class:"lesson-name"},__={key:1,class:"tab-content"},w_={key:0,class:"no-data"},S_={key:1,class:"taxon-list"},C_={class:"taxon-header"},k_={class:"taxon-category"},$_={class:"taxon-name"},A_={class:"taxon-counts"},x_={class:"taxon-stat correct"},N_={class:"taxon-stat incorrect"},O_={class:"taxon-stat total"},T_={class:"view-actions"},I_={key:5,class:"test-mode-banner"},E_={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=Gt(),o=nn(),a=new URLSearchParams(window.location.search).get("test");Nt(async()=>{a==="mastery"||a==="accomplishments"?n.enableTestMode(Qb()):await n.initialize()});async function l(){await n.loadAccomplishments(!0)}async function c(p){await n.selectUser(p)}function u(p,v){s("navigate-to-deal",{subfolder:p,dealNumber:v})}const f=N(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(m=>{const y=o.computeBoardMastery(p,m.subfolder,m.boardNumbers),O=o.computeLessonAchievement(y);return{...m,achievement:O.achievement}}).sort((m,y)=>d(m.subfolder).localeCompare(d(y.subfolder)))});at(f,p=>{o.fetchMissingBoardCounts(p.map(v=>v.subfolder))},{immediate:!0});function d(p){return n.formatLessonName(p)}return(p,v)=>(h(),g("div",o_,[i("header",r_,[v[6]||(v[6]=i("h2",null,"Accomplishments",-1)),i("button",{class:"close-btn",onClick:v[0]||(v[0]=m=>p.$emit("close"))},"")]),R(n).canViewOtherUsers.value?(h(),g("div",a_,[v[7]||(v[7]=i("label",{for:"user-select"},"Viewing:",-1)),i("select",{id:"user-select",value:R(n).selectedUserId.value,onChange:v[1]||(v[1]=m=>c(m.target.value))},[(h(!0),g(X,null,ce(R(n).accessibleUsers.value,m=>(h(),g("option",{key:m.id,value:m.id},C(m.name)+C(m.isSelf?" (You)":""),9,i_))),128))],40,l_)])):B("",!0),R(n).loading.value?(h(),g("div",c_,[...v[8]||(v[8]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading accomplishments...",-1)])])):R(n).error.value?(h(),g("div",u_,[i("p",null,"Failed to load: "+C(R(n).error.value),1),i("button",{onClick:l},"Try Again")])):R(n).hasData.value?(h(),g("div",f_,[i("div",v_,[i("div",m_,[i("button",{class:re(["tab-btn",{active:R(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=m=>R(n).activeTab.value="lessons")}," Lessons ",2),i("button",{class:re(["tab-btn",{active:R(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=m=>R(n).activeTab.value="taxons")}," Taxons ",2)])]),R(n).activeTab.value==="lessons"?(h(),g("div",p_,[f.value.length===0?(h(),g("div",h_," No lesson data available yet. ")):(h(),g("div",g_,[(h(!0),g(X,null,ce(f.value,m=>(h(),g("div",{key:m.subfolder,class:"lesson-row"},[i("div",y_,[i("span",b_,C(d(m.subfolder)),1),m.achievement!=="none"?(h(),g("span",{key:0,class:re(["achievement-badge",m.achievement])},"  "+C(m.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),pe(zc,{boardNumbers:m.boardNumbers,lessonSubfolder:m.subfolder,currentIndex:-1,alignLeft:!0,onGoto:y=>u(m.subfolder,m.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):B("",!0),R(n).activeTab.value==="taxons"?(h(),g("div",__,[R(n).filteredTaxonStats.value.length===0?(h(),g("div",w_," No skill data available yet. ")):(h(),g("div",S_,[(h(!0),g(X,null,ce(R(n).filteredTaxonStats.value,m=>(h(),g("div",{key:m.skillPath,class:"taxon-card"},[i("div",C_,[i("span",k_,C(m.categoryName),1),i("span",$_,C(m.skillName),1)]),i("div",A_,[i("span",x_,C(m.correct),1),i("span",N_,C(m.incorrect),1),i("span",O_,C(m.total)+" total",1)])]))),128))]))])):B("",!0),i("div",T_,[i("button",{class:"secondary-btn",onClick:l}," Refresh "),i("button",{class:"primary-btn",onClick:v[5]||(v[5]=m=>p.$emit("close"))}," Done ")])])):(h(),g("div",d_,[v[9]||(v[9]=i("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=i("p",null,"Complete some practice deals to see your accomplishments here!",-1)),i("button",{class:"primary-btn",onClick:v[2]||(v[2]=m=>p.$emit("close"))},"Start Practicing")])),R(n).useTestData.value?(h(),g("div",I_," Test Mode - Using Generated Data ")):B("",!0)]))}},R_=he(E_,[["__scopeId","data-v-38e59c14"]]),Go="https://api.bridge-classroom.com/api",zo="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",as=E([]),Et=E([]),Jc=E([]),Zs=E(!1),en=E(null),$n=E(null),Pl=E(!1),Yc=E(null),qc=E(null),D_=E({start:null,end:null}),P_=2*60*1e3;async function B_(){const e=await fetch(`${Go}/users`,{headers:{"x-api-key":zo}});if(!e.ok)throw new Error(`Failed to fetch students: ${e.status}`);return(await e.json()).users||[]}async function L_(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${Go}/observations${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":zo}});if(!n.ok)throw new Error(`Failed to fetch observations: ${n.status}`);return(await n.json()).observations||[]}async function U_(e={}){const t=new URLSearchParams;e.classroom&&t.append("classroom",e.classroom),e.userId&&t.append("user_id",e.userId),e.startDate&&t.append("start_date",e.startDate),e.endDate&&t.append("end_date",e.endDate),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const s=`${Go}/observations/metadata${t.toString()?"?"+t.toString():""}`,n=await fetch(s,{headers:{"x-api-key":zo}});if(!n.ok)throw new Error(`Failed to fetch observation metadata: ${n.status}`);return await n.json()}async function M_(e,t){try{return{...await ua(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}const dr=new Map;async function F_(e,t){var o;if(dr.has(e))return dr.get(e);const s=ds(),n=((o=s.getViewerId)==null?void 0:o.call(s))||null;if(!n)return console.error("No viewer ID available"),null;try{const r=await fetch(`${Go}/grants?grantee_id=${n}`,{headers:{"x-api-key":zo}});if(!r.ok)return console.error("Failed to fetch grants:",r.status),null;const{grants:a}=await r.json(),l=a.find(u=>u.grantor_id===e);if(!l)return console.warn("No grant found from student:",e),null;const c=await lm(l.encrypted_payload,t);return dr.set(e,c),c}catch(r){return console.error("Failed to get student secret key:",r),null}}async function Xc(e=!1){if(!ds().isAuthenticated.value)return{success:!1,error:"Not authenticated"};if(!e&&$n.value&&Date.now()-new Date($n.value).getTime()<P_)return{success:!0,cached:!0};Zs.value=!0,en.value=null;try{const[s,n]=await Promise.all([B_(),U_({limit:1e4})]);return as.value=s,Et.value=n.observations||[],$n.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load dashboard:",s),en.value=s.message,{success:!1,error:s.message}}finally{Zs.value=!1}}async function j_(e){var n;const t=ds();if(!t.isAuthenticated.value)return{success:!1,error:"Not authenticated"};const s=((n=t.getPrivateKey)==null?void 0:n.call(t))||null;if(!s)return{success:!1,error:"Private key not available"};Zs.value=!0,en.value=null;try{const o=await F_(e,s);if(!o)return{success:!1,error:"No sharing grant from this student or failed to decrypt"};const a=(await L_({userId:e,limit:1e3})).map(u=>M_(u,o));return{success:!0,observations:(await Promise.all(a)).filter(u=>u!==null)}}catch(o){return console.error("Failed to load student observations:",o),en.value=o.message,{success:!1,error:o.message}}finally{Zs.value=!1}}function Bl(){const e=new Map;for(const t of as.value){const s=t.classroom||"ad-hoc";e.has(s)||e.set(s,{id:s,name:Qc(s),studentCount:0}),e.get(s).studentCount++}return Array.from(e.values()).sort((t,s)=>t.name.localeCompare(s.name))}function Qc(e){return!e||e==="ad-hoc"?"Ad-hoc Users":e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function H_(e=null){return e?as.value.filter(t=>e==="ad-hoc"?!t.classroom:t.classroom===e):as.value}function K_(e){const t=Et.value.filter(u=>e==="ad-hoc"?!u.classroom:u.classroom===e),s=t.length,n=t.filter(u=>u.correct).length,o=new Set(t.map(u=>u.user_id)),r=new Date().toISOString().split("T")[0],a=t.filter(u=>{var f;return(f=u.timestamp)==null?void 0:f.startsWith(r)}),l=new Date(Date.now()-7*24*60*60*1e3).toISOString(),c=t.filter(u=>u.timestamp>=l);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,activeStudents:o.size,todayCount:a.length,weekCount:c.length}}function V_(e){var p;const t=Et.value.filter(v=>v.user_id===e),s=t.length,n=t.filter(v=>v.correct).length,o=new Date().toISOString().split("T")[0],r=t.filter(v=>{var m;return(m=v.timestamp)==null?void 0:m.startsWith(o)}),a=new Date(Date.now()-7*24*60*60*1e3).toISOString(),l=t.filter(v=>v.timestamp>=a),c={};for(const v of t){const m=v.skill_path||"unknown";c[m]||(c[m]={total:0,correct:0}),c[m].total++,v.correct&&c[m].correct++}for(const v in c){const m=c[v];m.accuracy=m.total>0?Math.round(m.correct/m.total*100):0;const y=Fo(v);m.name=y.name,m.category=y.category}const f=((p=[...t].sort((v,m)=>new Date(m.timestamp)-new Date(v.timestamp))[0])==null?void 0:p.timestamp)||null,d=W_(t);return{totalObservations:s,correctObservations:n,accuracy:s>0?Math.round(n/s*100):0,todayCount:r.length,todayCorrect:r.filter(v=>v.correct).length,weekCount:l.length,weekCorrect:l.filter(v=>v.correct).length,lastPractice:f,streak:d,skillStats:c}}function W_(e){const t=new Set(e.map(l=>{var c;return(c=l.timestamp)==null?void 0:c.split("T")[0]}).filter(Boolean)),s=Array.from(t).sort().reverse();if(s.length===0)return 0;const n=new Date().toISOString().split("T")[0],o=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(s[0]!==n&&s[0]!==o)return 0;let r=1,a=new Date(s[0]);for(let l=1;l<s.length;l++){const c=new Date(s[l]);if(Math.round((a-c)/(24*60*60*1e3))===1)r++,a=c;else break}return r}function G_(e,t=10){return Et.value.filter(s=>s.user_id===e&&!s.correct).sort((s,n)=>new Date(n.timestamp)-new Date(s.timestamp)).slice(0,t)}async function z_(){if(Pl.value)return;const e=ds();await e.initialize(),e.isAuthenticated.value&&await Xc(),Pl.value=!0}function J_(){as.value=[],Et.value=[],Jc.value=[],$n.value=null,Yc.value=null,qc.value=null}function Jo(){const e=N(()=>as.value.length),t=N(()=>Et.value.length),s=N(()=>{const l=Et.value.length;if(l===0)return 0;const c=Et.value.filter(u=>u.correct).length;return Math.round(c/l*100)}),n=N(()=>Bl()),o=N(()=>Zs.value),r=N(()=>en.value!==null),a=N(()=>as.value.length>0||Et.value.length>0);return{students:as,observations:Et,decryptedObservations:Jc,loading:Zs,error:en,lastFetchedAt:$n,selectedClassroom:Yc,selectedStudent:qc,dateRange:D_,totalStudents:e,totalObservations:t,overallAccuracy:s,classrooms:n,isLoading:o,hasError:r,hasData:a,initialize:z_,loadDashboard:Xc,loadStudentObservations:j_,getClassrooms:Bl,getStudentsByClassroom:H_,getClassroomStats:K_,getStudentStats:V_,getRecentErrors:G_,clearCache:J_,formatClassroomName:Qc}}const Y_={class:"teacher-login"},q_={class:"login-card"},X_={class:"form-group"},Q_={class:"form-group"},Z_={class:"key-options"},e1={key:1,class:"file-upload"},t1={for:"keyFile",class:"file-label"},s1={key:0},n1={key:1,class:"file-name"},o1={class:"form-group checkbox-group"},r1={class:"checkbox-label"},a1={key:0,class:"error-message"},l1=["disabled"],i1={key:0},c1={key:1},u1={class:"login-footer"},d1={__name:"TeacherLogin",emits:["authenticated","back"],setup(e,{emit:t}){const s=t,n=ds(),o=E(""),r=E(""),a=E("paste"),l=E(""),c=E(!1),u=E(!1),f=E("");function d(v){const m=v.target.files[0];if(!m)return;l.value=m.name;const y=new FileReader;y.onload=O=>{r.value=O.target.result},y.readAsText(m)}async function p(){if(f.value="",!o.value){f.value="Please enter the password";return}if(!r.value.trim()){f.value="Please provide your private key";return}u.value=!0;try{const v=await n.login(o.value,r.value.trim(),c.value);v.success?s("authenticated"):f.value=v.error||"Authentication failed"}catch(v){console.error("Login error:",v),f.value=v.message||"An unexpected error occurred"}finally{u.value=!1}}return(v,m)=>(h(),g("div",Y_,[i("div",q_,[m[9]||(m[9]=i("h1",null,"Teacher Dashboard",-1)),m[10]||(m[10]=i("p",{class:"subtitle"},"Enter your credentials to view student progress",-1)),i("form",{onSubmit:Ut(p,["prevent"]),class:"login-form"},[i("div",X_,[m[6]||(m[6]=i("label",{for:"password"},"Password",-1)),Ze(i("input",{id:"password",type:"password","onUpdate:modelValue":m[0]||(m[0]=y=>o.value=y),placeholder:"Enter teacher password",required:"",autocomplete:"current-password"},null,512),[[Rt,o.value]])]),i("div",Q_,[m[7]||(m[7]=i("label",null,"Private Key",-1)),i("div",Z_,[i("button",{type:"button",class:re(["key-option",{active:a.value==="paste"}]),onClick:m[1]||(m[1]=y=>a.value="paste")}," Paste Key ",2),i("button",{type:"button",class:re(["key-option",{active:a.value==="file"}]),onClick:m[2]||(m[2]=y=>a.value="file")}," Upload File ",2)]),a.value==="paste"?Ze((h(),g("textarea",{key:0,"onUpdate:modelValue":m[3]||(m[3]=y=>r.value=y),placeholder:"Paste your private key here (PEM format or base64)",rows:"6",class:"key-textarea"},null,512)),[[Rt,r.value]]):(h(),g("div",e1,[i("input",{type:"file",id:"keyFile",accept:".pem,.key,.txt",onChange:d,class:"file-input"},null,32),i("label",t1,[l.value?(h(),g("span",n1,C(l.value),1)):(h(),g("span",s1,"Choose key file..."))])]))]),i("div",o1,[i("label",r1,[Ze(i("input",{type:"checkbox","onUpdate:modelValue":m[4]||(m[4]=y=>c.value=y)},null,512),[[Lo,c.value]]),m[8]||(m[8]=i("span",null,"Remember my key on this device (encrypted)",-1))])]),f.value?(h(),g("div",a1,C(f.value),1)):B("",!0),i("button",{type:"submit",class:"login-btn",disabled:u.value},[u.value?(h(),g("span",i1,"Authenticating...")):(h(),g("span",c1,"Sign In"))],8,l1)],32),i("div",u1,[i("a",{href:"#",onClick:m[5]||(m[5]=Ut(y=>v.$emit("back"),["prevent"]))}," Back to Practice")])])]))}},f1=he(d1,[["__scopeId","data-v-18d7c371"]]),Zc="bridge-classroom-anon-mode",v1="BridgeClassroom-Anon",fr=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Ll=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function m1(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function p1(e,t){const s=`${v1}:${e} ${t}`,n=m1(s),o=Number(n%BigInt(fr.length)),r=Number(n/BigInt(fr.length)%BigInt(Ll.length));return{firstName:fr[o],lastName:Ll[r]}}const fn=E(localStorage.getItem(Zc)==="true");function Yo(){function e(){fn.value=!fn.value,localStorage.setItem(Zc,fn.value.toString())}function t(o){return fn.value?p1(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:r,lastName:a}=t(o);return`${r} ${a}`}function n(o){const{firstName:r,lastName:a}=t(o),l=(r==null?void 0:r.charAt(0))||"",c=(a==null?void 0:a.charAt(0))||"";return(l+c).toUpperCase()||"?"}return{isAnonymized:fn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const h1={class:"classroom-list"},g1={class:"dashboard-header"},y1={class:"header-left"},b1={key:0,class:"last-updated"},_1={class:"header-actions"},w1=["disabled"],S1={key:0,class:"loading"},C1={key:1,class:"error-state"},k1={key:2,class:"dashboard-content"},$1={class:"overall-stats"},A1={class:"stat-card"},x1={class:"stat-value"},N1={class:"stat-card"},O1={class:"stat-value"},T1={class:"stat-card accent"},I1={class:"stat-value"},E1={class:"stat-card"},R1={class:"stat-value"},D1={class:"classrooms-section"},P1={class:"classroom-grid"},B1=["onClick"],L1={class:"classroom-header"},U1={class:"student-count"},M1={class:"classroom-stats"},F1={class:"mini-stat"},j1={class:"value"},H1={class:"mini-stat"},K1={class:"mini-stat"},V1={class:"value"},W1={class:"classroom-activity"},G1={key:0,class:"activity-badge"},z1={key:1,class:"activity-badge week"},J1={key:0,class:"empty-state"},Y1={key:0,class:"recent-section"},q1={class:"recent-list"},X1=["onClick"],Q1={class:"student-avatar"},Z1={class:"student-info"},ew={class:"student-name"},tw={class:"student-classroom"},sw={class:"student-quick-stats"},nw={__name:"ClassroomList",emits:["selectClassroom","selectStudent","logout"],setup(e,{emit:t}){const s=t,n=Jo(),o=ds(),r=Yo();Nt(async()=>{await n.initialize()});async function a(){await n.loadDashboard(!0)}function l(){o.logout(),n.clearCache(),s("logout")}function c(v){return n.getClassroomStats(v)}function u(v){return n.getStudentStats(v).accuracy}const f=N(()=>n.students.value.map(m=>({...m,stats:n.getStudentStats(m.id)})).filter(m=>m.stats.lastPractice).sort((m,y)=>new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice)).slice(0,5));function d(v){const m=new Date(v),O=new Date-m,A=Math.floor(O/6e4);if(A<1)return"just now";if(A<60)return`${A}m ago`;const _=Math.floor(A/60);return _<24?`${_}h ago`:m.toLocaleDateString()}function p(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(h(),g("div",h1,[i("header",g1,[i("div",y1,[m[1]||(m[1]=i("h1",null,"Teacher Dashboard",-1)),R(n).lastFetchedAt.value?(h(),g("span",b1," Updated "+C(d(R(n).lastFetchedAt.value)),1)):B("",!0)]),i("div",_1,[i("button",{class:re(["anon-btn",{active:R(r).isAnonymized.value}]),onClick:m[0]||(m[0]=y=>R(r).toggleAnonymize())},C(R(r).isAnonymized.value?"Clear":"Anon"),3),i("button",{class:"refresh-btn",onClick:a,disabled:R(n).isLoading.value},C(R(n).isLoading.value?"Loading...":"Refresh"),9,w1),i("button",{class:"logout-btn",onClick:l},"Logout")])]),R(n).isLoading.value&&!R(n).hasData.value?(h(),g("div",S1,[...m[2]||(m[2]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading dashboard data...",-1)])])):R(n).hasError.value?(h(),g("div",C1,[i("p",null,"Failed to load dashboard: "+C(R(n).error.value),1),i("button",{onClick:a},"Try Again")])):(h(),g("div",k1,[i("section",$1,[i("div",A1,[i("div",x1,C(R(n).totalStudents.value),1),m[3]||(m[3]=i("div",{class:"stat-label"},"Total Students",-1))]),i("div",N1,[i("div",O1,C(R(n).totalObservations.value),1),m[4]||(m[4]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",T1,[i("div",I1,C(R(n).overallAccuracy.value)+"%",1),m[5]||(m[5]=i("div",{class:"stat-label"},"Overall Accuracy",-1))]),i("div",E1,[i("div",R1,C(R(n).classrooms.value.length),1),m[6]||(m[6]=i("div",{class:"stat-label"},"Classrooms",-1))])]),i("section",D1,[m[11]||(m[11]=i("h2",null,"Classrooms",-1)),i("div",P1,[(h(!0),g(X,null,ce(R(n).classrooms.value,y=>(h(),g("div",{key:y.id,class:"classroom-card",onClick:O=>v.$emit("selectClassroom",y.id)},[i("div",L1,[i("h3",null,C(y.name),1),i("span",U1,C(y.studentCount)+" students",1)]),i("div",M1,[i("div",F1,[i("span",j1,C(c(y.id).totalObservations),1),m[7]||(m[7]=i("span",{class:"label"},"bids",-1))]),i("div",H1,[i("span",{class:re(["value accuracy",p(c(y.id).accuracy)])},C(c(y.id).accuracy)+"% ",3),m[8]||(m[8]=i("span",{class:"label"},"accuracy",-1))]),i("div",K1,[i("span",V1,C(c(y.id).activeStudents),1),m[9]||(m[9]=i("span",{class:"label"},"active",-1))])]),i("div",W1,[c(y.id).todayCount>0?(h(),g("span",G1,C(c(y.id).todayCount)+" today ",1)):B("",!0),c(y.id).weekCount>0?(h(),g("span",z1,C(c(y.id).weekCount)+" this week ",1)):B("",!0)])],8,B1))),128))]),R(n).classrooms.value.length===0?(h(),g("div",J1,[...m[10]||(m[10]=[i("p",null,"No classrooms found. Students will appear here once they register.",-1)])])):B("",!0)]),f.value.length>0?(h(),g("section",Y1,[m[12]||(m[12]=i("h2",null,"Recently Active Students",-1)),i("div",q1,[(h(!0),g(X,null,ce(f.value,y=>(h(),g("div",{key:y.id,class:"recent-item",onClick:O=>v.$emit("selectStudent",y.id)},[i("div",Q1,C(R(r).displayInitials(y)),1),i("div",Z1,[i("span",ew,C(R(r).displayFullName(y)),1),i("span",tw,C(R(n).formatClassroomName(y.classroom)),1)]),i("div",sw,[i("span",{class:re(["accuracy",p(u(y.id))])},C(u(y.id))+"% ",3)])],8,X1))),128))])])):B("",!0)]))]))}},ow=he(nw,[["__scopeId","data-v-8c0b934b"]]),rw={class:"classroom-detail"},aw={class:"detail-header"},lw={class:"header-info"},iw={class:"student-count"},cw={class:"stats-summary"},uw={class:"stat-card"},dw={class:"stat-value"},fw={class:"stat-card accent"},vw={class:"stat-value"},mw={class:"stat-card"},pw={class:"stat-value"},hw={class:"stat-card"},gw={class:"stat-value"},yw={key:0,class:"skill-profile"},bw={class:"skill-bars"},_w={class:"skill-info"},ww={class:"skill-name"},Sw={class:"skill-count"},Cw={class:"skill-bar-container"},kw={class:"skill-accuracy"},$w={class:"students-section"},Aw={class:"section-header"},xw={class:"sort-controls"},Nw={class:"student-grid"},Ow=["onClick"],Tw={class:"student-header"},Iw={class:"student-avatar"},Ew={class:"student-name-container"},Rw={class:"student-name"},Dw={key:0,class:"last-active"},Pw={key:1,class:"last-active never"},Bw={class:"student-stats"},Lw={class:"stat"},Uw={class:"value"},Mw={class:"stat"},Fw={class:"stat"},jw={class:"value"},Hw={class:"student-activity"},Kw={key:0,class:"activity today"},Vw={key:1,class:"activity week"},Ww={key:0,class:"empty-state"},Gw={__name:"ClassroomDetail",props:{classroomId:{type:String,required:!0}},emits:["back","selectStudent"],setup(e){const t=e,s=Jo(),n=Yo(),o=E("name"),r=N(()=>s.formatClassroomName(t.classroomId)),a=N(()=>s.getStudentsByClassroom(t.classroomId).map(m=>({...m,stats:s.getStudentStats(m.id)}))),l=N(()=>s.getClassroomStats(t.classroomId)),c=N(()=>{const v={},m=s.observations.value.filter(y=>t.classroomId==="ad-hoc"?!y.classroom:y.classroom===t.classroomId);for(const y of m){const O=y.skill_path||"unknown";if(!v[O]){const A=Fo(O);v[O]={name:A.name,category:A.category,total:0,correct:0}}v[O].total++,y.correct&&v[O].correct++}for(const y in v){const O=v[y];O.accuracy=O.total>0?Math.round(O.correct/O.total*100):0}return v}),u=N(()=>{const v=Object.entries(c.value);return v.sort((m,y)=>y[1].total-m[1].total),Object.fromEntries(v.slice(0,8))}),f=N(()=>{const v=[...a.value];switch(o.value){case"accuracy":return v.sort((m,y)=>y.stats.accuracy-m.stats.accuracy);case"recent":return v.sort((m,y)=>m.stats.lastPractice?y.stats.lastPractice?new Date(y.stats.lastPractice)-new Date(m.stats.lastPractice):-1:1);case"total":return v.sort((m,y)=>y.stats.totalObservations-m.stats.totalObservations);case"name":default:return v.sort((m,y)=>{const O=n.displayFullName(m).toLowerCase(),A=n.displayFullName(y).toLowerCase();return O.localeCompare(A)})}});function d(v){if(!v)return"";const m=new Date(v),y=new Date,O=new Date(y);return O.setDate(O.getDate()-1),m.toDateString()===y.toDateString()?"Today":m.toDateString()===O.toDateString()?"Yesterday":m.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function p(v){return v>=80?"excellent":v>=60?"good":v>=40?"fair":"needs-work"}return(v,m)=>(h(),g("div",rw,[i("header",aw,[i("button",{class:"back-btn",onClick:m[0]||(m[0]=y=>v.$emit("back"))},"  Back to Classrooms "),i("div",lw,[i("h1",null,C(r.value),1),i("span",iw,C(a.value.length)+" students",1)])]),i("section",cw,[i("div",uw,[i("div",dw,C(l.value.totalObservations),1),m[2]||(m[2]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",fw,[i("div",vw,C(l.value.accuracy)+"%",1),m[3]||(m[3]=i("div",{class:"stat-label"},"Class Accuracy",-1))]),i("div",mw,[i("div",pw,C(l.value.activeStudents),1),m[4]||(m[4]=i("div",{class:"stat-label"},"Active Students",-1))]),i("div",hw,[i("div",gw,C(l.value.weekCount),1),m[5]||(m[5]=i("div",{class:"stat-label"},"This Week",-1))])]),Object.keys(c.value).length>0?(h(),g("section",yw,[m[6]||(m[6]=i("h2",null,"Class Skill Profile",-1)),i("div",bw,[(h(!0),g(X,null,ce(u.value,(y,O)=>(h(),g("div",{key:O,class:"skill-bar-row"},[i("div",_w,[i("span",ww,C(y.name),1),i("span",Sw,C(y.total)+" bids",1)]),i("div",Cw,[i("div",{class:re(["skill-bar",p(y.accuracy)]),style:cs({width:y.accuracy+"%"})},null,6),i("span",kw,C(y.accuracy)+"%",1)])]))),128))])])):B("",!0),i("section",$w,[i("div",Aw,[m[9]||(m[9]=i("h2",null,"Students",-1)),i("div",xw,[m[8]||(m[8]=i("label",null,"Sort by:",-1)),Ze(i("select",{"onUpdate:modelValue":m[1]||(m[1]=y=>o.value=y)},[...m[7]||(m[7]=[i("option",{value:"name"},"Name",-1),i("option",{value:"accuracy"},"Accuracy",-1),i("option",{value:"recent"},"Recently Active",-1),i("option",{value:"total"},"Total Bids",-1)])],512),[[Wi,o.value]])])]),i("div",Nw,[(h(!0),g(X,null,ce(f.value,y=>(h(),g("div",{key:y.id,class:"student-card",onClick:O=>v.$emit("selectStudent",y.id)},[i("div",Tw,[i("div",Iw,C(R(n).displayInitials(y)),1),i("div",Ew,[i("span",Rw,C(R(n).displayFullName(y)),1),y.stats.lastPractice?(h(),g("span",Dw," Last active: "+C(d(y.stats.lastPractice)),1)):(h(),g("span",Pw,"No practice yet"))])]),i("div",Bw,[i("div",Lw,[i("span",Uw,C(y.stats.totalObservations),1),m[10]||(m[10]=i("span",{class:"label"},"bids",-1))]),i("div",Mw,[i("span",{class:re(["value",p(y.stats.accuracy)])},C(y.stats.accuracy)+"% ",3),m[11]||(m[11]=i("span",{class:"label"},"accuracy",-1))]),i("div",Fw,[i("span",jw,C(y.stats.streak),1),m[12]||(m[12]=i("span",{class:"label"},"streak",-1))])]),i("div",Hw,[y.stats.todayCount>0?(h(),g("span",Kw,C(y.stats.todayCount)+" today ",1)):B("",!0),y.stats.weekCount>0?(h(),g("span",Vw,C(y.stats.weekCount)+" this week ",1)):B("",!0)])],8,Ow))),128))]),a.value.length===0?(h(),g("div",Ww,[...m[13]||(m[13]=[i("p",null,"No students in this classroom yet.",-1)])])):B("",!0)])]))}},zw=he(Gw,[["__scopeId","data-v-b7ee4d85"]]),Jw={class:"student-detail"},Yw={class:"detail-header"},qw={class:"header-content"},Xw={class:"student-avatar large"},Qw={class:"header-info"},Zw={class:"classroom"},eS={key:0,class:"last-active"},tS={key:0,class:"loading"},sS={key:1,class:"stats-overview"},nS={class:"stat-cards"},oS={class:"stat-card"},rS={class:"stat-value"},aS={class:"stat-card accent"},lS={class:"stat-value"},iS={class:"stat-card streak"},cS={class:"stat-value"},uS={class:"period-stats"},dS={class:"period"},fS={class:"period-numbers"},vS={class:"total"},mS={class:"correct"},pS={key:0,class:"accuracy"},hS={class:"period"},gS={class:"period-numbers"},yS={class:"total"},bS={class:"correct"},_S={key:0,class:"accuracy"},wS={key:2,class:"skill-section"},SS={class:"skill-list"},CS={class:"skill-info"},kS={class:"skill-name"},$S={class:"skill-category"},AS={class:"skill-bar-container"},xS={class:"skill-stats"},NS={class:"count"},OS={key:3,class:"errors-section"},TS={class:"error-list"},IS={class:"error-header"},ES={class:"error-skill"},RS={class:"error-date"},DS={key:0,class:"error-details"},PS={class:"bid-comparison"},BS={class:"bid wrong"},LS={class:"bid correct"},US={key:1,class:"error-context"},MS={key:4,class:"recommendations-section"},FS={class:"recommendation-list"},jS={class:"rec-skill"},HS={class:"rec-reason"},KS={class:"rec-stats"},VS={__name:"StudentDetail",props:{studentId:{type:String,required:!0}},emits:["back"],setup(e){const t=e,s=Jo(),n=Yo(),o=E(!1),r=N(()=>s.students.value.find(A=>A.id===t.studentId)),a=N(()=>r.value?n.displayFullName(r.value):"Unknown Student"),l=N(()=>r.value?n.displayInitials(r.value):"?"),c=N(()=>{var A;return s.formatClassroomName((A=r.value)==null?void 0:A.classroom)}),u=N(()=>s.getStudentStats(t.studentId)),f=N(()=>{const A=u.value.skillStats||{};return Object.entries(A).map(([_,S])=>({path:_,...S})).filter(_=>_.path!=="unknown"&&_.path!=="unknown/unknown").sort((_,S)=>S.total-_.total)}),d=N(()=>s.getRecentErrors(t.studentId,5)),p=N(()=>{const A=f.value,_=[];for(const S of A)S.total>=3&&S.accuracy<60&&_.push({skill:S.path,name:S.name,accuracy:S.accuracy,total:S.total,reason:S.accuracy<40?"Struggling with this skill":"Room for improvement"});return _.sort((S,D)=>S.accuracy-D.accuracy).slice(0,3)});Nt(async()=>{await v()}),at(()=>t.studentId,async()=>{await v()});async function v(){o.value=!0;try{}finally{o.value=!1}}function m(A){if(!A)return"";const _=new Date(A),S=new Date,D=new Date(S);return D.setDate(D.getDate()-1),_.toDateString()===S.toDateString()?"Today at "+_.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):_.toDateString()===D.toDateString()?"Yesterday":_.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function y(A){return A>=80?"excellent":A>=60?"good":A>=40?"fair":"needs-work"}function O(A){return!A||A==="unknown"?"General Practice":Fo(A).name}return(A,_)=>(h(),g("div",Jw,[i("header",Yw,[i("button",{class:"back-btn",onClick:_[0]||(_[0]=S=>A.$emit("back"))},"  Back "),i("div",qw,[i("div",Xw,C(l.value),1),i("div",Qw,[i("h1",null,C(a.value),1),i("span",Zw,C(c.value),1),u.value.lastPractice?(h(),g("span",eS," Last active: "+C(m(u.value.lastPractice)),1)):B("",!0)])])]),o.value?(h(),g("div",tS,[..._[1]||(_[1]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):(h(),g("section",sS,[i("div",nS,[i("div",oS,[i("div",rS,C(u.value.totalObservations),1),_[2]||(_[2]=i("div",{class:"stat-label"},"Total Bids",-1))]),i("div",aS,[i("div",lS,C(u.value.accuracy)+"%",1),_[3]||(_[3]=i("div",{class:"stat-label"},"Overall Accuracy",-1))]),i("div",iS,[i("div",cS,C(u.value.streak),1),_[4]||(_[4]=i("div",{class:"stat-label"},"Day Streak",-1))])]),i("div",uS,[i("div",dS,[_[5]||(_[5]=i("h4",null,"Today",-1)),i("div",fS,[i("span",vS,C(u.value.todayCount)+" bids",1),i("span",mS,C(u.value.todayCorrect)+" correct",1),u.value.todayCount>0?(h(),g("span",pS,C(Math.round(u.value.todayCorrect/u.value.todayCount*100))+"% ",1)):B("",!0)])]),i("div",hS,[_[6]||(_[6]=i("h4",null,"This Week",-1)),i("div",gS,[i("span",yS,C(u.value.weekCount)+" bids",1),i("span",bS,C(u.value.weekCorrect)+" correct",1),u.value.weekCount>0?(h(),g("span",_S,C(Math.round(u.value.weekCorrect/u.value.weekCount*100))+"% ",1)):B("",!0)])])])])),f.value.length>0?(h(),g("section",wS,[_[7]||(_[7]=i("h2",null,"Skill Breakdown",-1)),i("div",SS,[(h(!0),g(X,null,ce(f.value,S=>(h(),g("div",{key:S.path,class:"skill-row"},[i("div",CS,[i("span",kS,C(S.name),1),i("span",$S,C(S.category),1)]),i("div",AS,[i("div",{class:re(["skill-bar",y(S.accuracy)]),style:cs({width:S.accuracy+"%"})},null,6)]),i("div",xS,[i("span",{class:re(["accuracy",y(S.accuracy)])},C(S.accuracy)+"% ",3),i("span",NS,C(S.total)+" bids",1)])]))),128))])])):B("",!0),d.value.length>0?(h(),g("section",OS,[_[9]||(_[9]=i("h2",null,"Recent Errors",-1)),_[10]||(_[10]=i("p",{class:"section-description"},"These are the most recent incorrect bids that may need review.",-1)),i("div",TS,[(h(!0),g(X,null,ce(d.value,S=>(h(),g("div",{key:S.id,class:"error-card"},[i("div",IS,[i("span",ES,C(O(S.skill_path)),1),i("span",RS,C(m(S.timestamp)),1)]),S.student_bid||S.expected_bid?(h(),g("div",DS,[i("div",PS,[i("span",BS,C(S.student_bid||"?"),1),_[8]||(_[8]=i("span",{class:"arrow"},"",-1)),i("span",LS,C(S.expected_bid||"?"),1)])])):B("",!0),S.deal_subfolder?(h(),g("div",US," Deal #"+C(S.deal_number||"?")+" from "+C(S.deal_subfolder),1)):B("",!0)]))),128))])])):B("",!0),p.value.length>0?(h(),g("section",MS,[_[11]||(_[11]=i("h2",null,"Recommended Practice",-1)),i("div",FS,[(h(!0),g(X,null,ce(p.value,S=>(h(),g("div",{key:S.skill,class:"recommendation-card"},[i("div",jS,C(S.name),1),i("div",HS,C(S.reason),1),i("div",KS,[i("span",null,C(S.accuracy)+"% accuracy",1),i("span",null,C(S.total)+" attempts",1)])]))),128))])])):B("",!0)]))}},WS=he(VS,[["__scopeId","data-v-5f3f434e"]]),GS={class:"teacher-dashboard"},zS={__name:"TeacherDashboard",emits:["close"],setup(e){const t=ds(),s=Jo(),n=E("classrooms"),o=E(null),r=E(null),a=E(null);Nt(async()=>{await t.initialize()});function l(){n.value="classrooms",s.loadDashboard()}function c(){n.value="classrooms",o.value=null,r.value=null}function u(p){o.value=p,a.value="classrooms",n.value="classroom"}function f(p){r.value=p,a.value=n.value,n.value="student"}function d(){a.value==="classroom"?n.value="classroom":n.value="classrooms"}return(p,v)=>(h(),g("div",GS,[R(t).isAuthenticated.value?(h(),g(X,{key:1},[n.value==="classrooms"?(h(),Oe(ow,{key:0,onSelectClassroom:u,onSelectStudent:f,onLogout:c})):n.value==="classroom"?(h(),Oe(zw,{key:1,classroomId:o.value,onBack:v[1]||(v[1]=m=>n.value="classrooms"),onSelectStudent:f},null,8,["classroomId"])):n.value==="student"?(h(),Oe(WS,{key:2,studentId:r.value,onBack:d},null,8,["studentId"])):B("",!0)],64)):(h(),Oe(f1,{key:0,onAuthenticated:l,onBack:v[0]||(v[0]=m=>p.$emit("close"))}))]))}},JS=he(zS,[["__scopeId","data-v-50a55ca1"]]),YS={class:"teacher-student-list"},qS={class:"teacher-header"},XS={class:"header-actions"},QS=["value"],ZS={key:0,class:"loading-state"},e0={key:1,class:"error-state"},t0={key:2,class:"empty-state"},s0={key:3,class:"empty-state"},n0={key:4,class:"student-table-wrap"},o0={class:"student-table"},r0=["onClick"],a0={class:"col-name"},l0={class:"student-name-cell"},i0={class:"avatar"},c0={class:"col-mastery"},u0={class:"mastery-pills"},d0={key:0,class:"pill pill-green"},f0={key:1,class:"pill pill-orange"},v0={key:2,class:"pill pill-yellow"},m0={key:3,class:"pill pill-red"},p0={key:4,class:"no-data-label"},h0={class:"col-active"},g0={class:"col-lessons"},y0={class:"recent-lessons"},b0={key:0,class:"no-data-label"},_0={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=Ca(),n=Jn(),o=He(),r=Yo(),a=E("all"),l=E({});Nt(async()=>{await s.loadAllStudentSummaries(),await c()});async function c(){const A=o.currentUser.value;if(!A)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(A.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async S=>{const D=await n.fetchClassroomDetail(S.id);D!=null&&D.success&&(_[S.id]=new Set(D.classroom.members.map(K=>K.student_id)))})),l.value=_}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await c()}const f=N(()=>{const A=new Set;for(const _ of Object.values(l.value))for(const S of _)A.add(S);return A}),d=N(()=>{const A=s.students.value;if(a.value==="all")return A;if(a.value==="none")return A.filter(S=>!f.value.has(S.id));const _=l.value[a.value];return _?A.filter(S=>_.has(S.id)):A}),p=N(()=>[...d.value].sort((A,_)=>{var K,ee;const S=((K=v.value[A.id])==null?void 0:K.lastObservationTime)||"",D=((ee=v.value[_.id])==null?void 0:ee.lastObservationTime)||"";return D!==S?D.localeCompare(S):y(A).localeCompare(y(_))})),v=N(()=>{const A={};for(const _ of s.students.value)A[_.id]=s.getStudentMasterySummary(_.id);return A}),m=N(()=>{const A={};for(const _ of s.students.value)A[_.id]=s.getStudentRecentLessons(_.id);return A});function y(A){return r.displayFullName(A)}function O(A){return r.displayInitials(A)}return(A,_)=>(h(),g("div",YS,[i("header",qS,[_[5]||(_[5]=i("h2",null,"My Students",-1)),i("div",XS,[R(n).teacherClassrooms.value.length?Ze((h(),g("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=S=>a.value=S),class:"filter-select"},[_[3]||(_[3]=i("option",{value:"all"},"All Students",-1)),(h(!0),g(X,null,ce(R(n).teacherClassrooms.value,S=>(h(),g("option",{key:S.id,value:S.id},C(S.name),9,QS))),128)),_[4]||(_[4]=i("option",{value:"none"},"No Classroom",-1))],512)),[[Wi,a.value]]):B("",!0),i("button",{class:re(["anon-btn",{active:R(r).isAnonymized.value}]),onClick:_[1]||(_[1]=S=>R(r).toggleAnonymize())},C(R(r).isAnonymized.value?"Clear":"Anon"),3),i("button",{class:"secondary-btn",onClick:u},"Refresh"),i("button",{class:"secondary-btn",onClick:_[2]||(_[2]=S=>A.$emit("close"))},"Back")])]),R(s).loading.value?(h(),g("div",ZS,[..._[6]||(_[6]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):R(s).error.value?(h(),g("div",e0,[i("p",null,"Failed to load: "+C(R(s).error.value),1),i("button",{onClick:u},"Try Again")])):R(s).students.value.length===0?(h(),g("div",t0,[..._[7]||(_[7]=[i("h3",null,"No Students Yet",-1),i("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(h(),g("div",s0,[..._[8]||(_[8]=[i("h3",null,"No Matching Students",-1),i("p",null,"No students match the selected filter.",-1)])])):(h(),g("div",n0,[i("table",o0,[_[9]||(_[9]=i("thead",null,[i("tr",null,[i("th",{class:"col-name"},"Student"),i("th",{class:"col-mastery"},"Mastery"),i("th",{class:"col-active"},"Last Active"),i("th",{class:"col-lessons"},"Recent Lessons")])],-1)),i("tbody",null,[(h(!0),g(X,null,ce(p.value,S=>{var D,K,ee,se,le,J,de;return h(),g("tr",{key:S.id,class:"student-row",onClick:ue=>A.$emit("select-student",S.id,y(S))},[i("td",a0,[i("div",l0,[i("div",i0,C(O(S)),1),i("span",null,C(y(S)),1)])]),i("td",c0,[i("div",u0,[(D=v.value[S.id])!=null&&D.green?(h(),g("span",d0,C(v.value[S.id].green),1)):B("",!0),(K=v.value[S.id])!=null&&K.orange?(h(),g("span",f0,C(v.value[S.id].orange),1)):B("",!0),(ee=v.value[S.id])!=null&&ee.yellow?(h(),g("span",v0,C(v.value[S.id].yellow),1)):B("",!0),(se=v.value[S.id])!=null&&se.red?(h(),g("span",m0,C(v.value[S.id].red),1)):B("",!0),(le=v.value[S.id])!=null&&le.total?B("",!0):(h(),g("span",p0,"No data"))])]),i("td",h0,C(R(s).formatTimeSince((J=v.value[S.id])==null?void 0:J.lastObservationTime)),1),i("td",g0,[i("div",y0,[(h(!0),g(X,null,ce(m.value[S.id],(ue,we)=>(h(),g("span",{key:we,class:"lesson-tag"},C(ue),1))),128)),(de=m.value[S.id])!=null&&de.length?B("",!0):(h(),g("span",b0,"-"))])])],8,r0)}),128))])])]))]))}},w0=he(_0,[["__scopeId","data-v-dd6d8e66"]]),S0={class:"teacher-student-detail"},C0={class:"detail-header"},k0={class:"student-info"},$0={class:"avatar"},A0={class:"last-active"},x0={key:0,class:"loading-state"},N0={key:1,class:"detail-content"},O0={key:0,class:"stats-row"},T0={class:"stat stat-green"},I0={key:0,class:"stat stat-orange"},E0={key:1,class:"stat stat-yellow"},R0={key:2,class:"stat stat-red"},D0={key:3,class:"stat stat-grey"},P0={class:"mastery-section"},B0={key:0,class:"no-data"},L0={key:1,class:"lesson-list"},U0={class:"lesson-header"},M0=["onClick"],F0={class:"mastery-strip"},j0=["title","onClick"],H0={key:0,class:"medal gold-medal"},K0={key:1,class:"medal silver-medal"},V0={class:"board-num"},W0={class:"progress-section"},G0={key:0,class:"no-data"},z0={key:1},J0={class:"day-header"},Y0={class:"day-date"},q0={class:"day-summary"},X0={class:"day-lessons"},Q0=["onClick"],Z0={class:"day-lesson-counts"},eC={key:0,class:"count count-green"},tC={key:1,class:"count count-yellow"},sC={key:2,class:"count count-orange"},nC={key:3,class:"count count-red"},oC={class:"observation-total"},rC={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=Ca(),r=nn(),a=Gt(),l=E(!1),c=N(()=>s.studentName.split(" ").map(S=>S[0]||"").join("").toUpperCase());Nt(async()=>{o.studentObservations.value[s.studentId]||(l.value=!0,await o.fetchStudentObservations(s.studentId),l.value=!1)});const u=N(()=>o.studentObservations.value[s.studentId]||[]),f=N(()=>o.getStudentMasterySummary(s.studentId)),d=N(()=>o.formatTimeSince(f.value.lastObservationTime)),p=N(()=>{const _=u.value;return _.length===0?[]:r.extractLessonsFromObservations(_).map(D=>{const K=r.computeBoardMastery(_,D.subfolder,D.boardNumbers),ee=r.computeLessonAchievement(K);return{...D,boardMastery:K,achievement:ee.achievement}}).sort((D,K)=>m(D.subfolder).localeCompare(m(K.subfolder)))});at(p,_=>{r.fetchMissingBoardCounts(_.map(S=>S.subfolder))},{immediate:!0});const v=N(()=>{const _=u.value;if(_.length===0)return[];const S={};for(const K of _){const ee=y(K.timestamp);S[ee]||(S[ee]=[]),S[ee].push(K)}return Object.keys(S).sort().reverse().slice(0,10).map(K=>{const ee=S[K],se={};for(const de of ee){const ue=de.deal_subfolder,we=de.deal_number;!ue||we==null||(se[ue]||(se[ue]={}),se[ue][we]||(se[ue][we]=[]),se[ue][we].push(de))}const le=Object.entries(se).map(([de,ue])=>{const we={green:0,yellow:0,orange:0,red:0};for(const[Re,Le]of Object.entries(ue)){const Ke=_.filter(q=>q.deal_subfolder===de&&q.deal_number===Number(Re)).sort((q,fe)=>q.timestamp.localeCompare(fe.timestamp)),ge=r.calculateCurrentStatus(Ke);we[ge]!==void 0?we[ge]++:we.green++}return{subfolder:de,...we}}).sort((de,ue)=>m(de.subfolder).localeCompare(m(ue.subfolder))),J=le.reduce((de,ue)=>de+ue.green+ue.yellow+ue.orange+ue.red,0);return{date:K,lessons:le,totalBoards:J}})});function m(_){return a.formatLessonName(_)}function y(_){const S=new Date(_),D=S.getFullYear(),K=String(S.getMonth()+1).padStart(2,"0"),ee=String(S.getDate()).padStart(2,"0");return`${D}-${K}-${ee}`}function O(_){const S=new Date(_+"T00:00:00"),D=new Date,K=y(D),ee=new Date(D);ee.setDate(ee.getDate()-1);const se=y(ee);return _===K?"Today":_===se?"Yesterday":S.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function A(_){const S={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${_.boardNumber}: ${S[_.status]}`}return(_,S)=>(h(),g("div",S0,[i("header",C0,[i("button",{class:"back-btn",onClick:S[0]||(S[0]=D=>_.$emit("back"))}," Students"),i("div",k0,[i("div",$0,C(c.value),1),i("div",null,[i("h2",null,C(e.studentName),1),i("span",A0,"Last active: "+C(d.value),1)])])]),l.value?(h(),g("div",x0,[...S[1]||(S[1]=[i("div",{class:"spinner"},null,-1),i("p",null,"Loading student data...",-1)])])):(h(),g("div",N0,[f.value.total>0?(h(),g("div",O0,[i("div",T0,C(f.value.green)+" Green",1),f.value.orange?(h(),g("div",I0,C(f.value.orange)+" Orange",1)):B("",!0),f.value.yellow?(h(),g("div",E0,C(f.value.yellow)+" Yellow",1)):B("",!0),f.value.red?(h(),g("div",R0,C(f.value.red)+" Red",1)):B("",!0),f.value.grey?(h(),g("div",D0,C(f.value.grey)+" Grey",1)):B("",!0)])):B("",!0),i("section",P0,[S[2]||(S[2]=i("h3",null,"Lesson Mastery",-1)),p.value.length===0?(h(),g("div",B0," No lesson data available yet. ")):(h(),g("div",L0,[(h(!0),g(X,null,ce(p.value,D=>(h(),g("div",{key:D.subfolder,class:"lesson-row"},[i("div",U0,[i("button",{class:"lesson-name lesson-link",onClick:K=>n("navigate-to-lesson",D.subfolder)},C(m(D.subfolder)),9,M0),D.achievement!=="none"?(h(),g("span",{key:0,class:re(["achievement-badge",D.achievement])},"  "+C(D.achievement==="gold"?"Gold":"Silver"),3)):B("",!0)]),i("div",F0,[(h(!0),g(X,null,ce(D.boardMastery,K=>(h(),g("div",{key:K.boardNumber,class:re(["board-circle board-clickable","status-"+K.status]),title:A(K),onClick:ee=>n("navigate-to-lesson",D.subfolder,K.boardNumber)},[K.achievement==="gold"?(h(),g("span",H0,"")):K.achievement==="silver"?(h(),g("span",K0,"")):B("",!0),i("span",V0,C(K.boardNumber),1)],10,j0))),128))])]))),128))]))]),i("section",W0,[S[3]||(S[3]=i("h3",null,"Recent Activity",-1)),v.value.length===0?(h(),g("div",G0," No activity recorded yet. ")):(h(),g("div",z0,[(h(!0),g(X,null,ce(v.value,D=>(h(),g("div",{key:D.date,class:"day-card"},[i("div",J0,[i("span",Y0,C(O(D.date)),1),i("span",q0,C(D.totalBoards)+" board"+C(D.totalBoards!==1?"s":""),1)]),i("div",X0,[(h(!0),g(X,null,ce(D.lessons,K=>(h(),g("div",{key:K.subfolder,class:"day-lesson-row"},[i("button",{class:"day-lesson-name lesson-link",onClick:ee=>n("navigate-to-lesson",K.subfolder)},C(m(K.subfolder)),9,Q0),i("div",Z0,[K.green?(h(),g("span",eC,C(K.green),1)):B("",!0),K.yellow?(h(),g("span",tC,C(K.yellow),1)):B("",!0),K.orange?(h(),g("span",sC,C(K.orange),1)):B("",!0),K.red?(h(),g("span",nC,C(K.red),1)):B("",!0)])]))),128))])]))),128))]))]),i("div",oC,C(u.value.length)+" observations",1)]))]))}},aC=he(rC,[["__scopeId","data-v-356ee2ef"]]),lC={key:0,class:"lesson-browser-loading"},iC={key:1,class:"lesson-browser-error"},cC={class:"lesson-browser"},uC={class:"browser-header"},dC={class:"browser-content"},fC=["onClick"],vC={class:"expand-icon"},mC={class:"category-name"},pC={class:"category-count"},hC={key:0,class:"lesson-list"},gC=["onClick"],yC={class:"lesson-name"},bC={class:"lesson-description"},_C={key:0,class:"error-message"},wC={key:3,class:"lesson-browser-inline"},SC={class:"browser-content-inline"},CC=["onClick"],kC={class:"expand-icon"},$C={class:"category-name"},AC={class:"category-count"},xC={key:0,class:"lesson-list"},NC=["onClick"],OC={class:"lesson-name"},TC={class:"lesson-description"},IC={key:0,class:"error-message-inline"},EC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=E(null),r=E(null),a=E(!1),l=E([]),c=E(null),u=E(null);at(()=>[s.visible,s.collection],([m,y])=>{m&&y&&!o.value&&f()},{immediate:!0});async function f(){var m;if(!((m=s.collection)!=null&&m.tocUrl)){r.value="No collection specified";return}a.value=!0,r.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),r.value=`Could not load lesson catalog. ${y.message}`}finally{a.value=!1}}function d(m){const y=l.value.indexOf(m);y>=0?l.value.splice(y,1):l.value.push(m)}function p(m){return m.includes("/")?m.split("/").pop():m}async function v(m,y){var O;u.value=null,c.value=m.id;try{const A=((O=s.collection)==null?void 0:O.baseUrl)||"",_=p(m.id),S=`${A}/${_}.pbn`,D=await fetch(S);if(!D.ok)throw new Error(`Failed to load lesson: ${D.statusText}`);const K=await D.text();n("load",{subfolder:m.id,name:m.name,category:y.name,content:K}),s.inline||n("close")}catch(A){console.error("Error loading lesson:",A),u.value=`Could not load "${m.name}". The lesson may not be available yet.`}finally{c.value=null}}return(m,y)=>e.visible&&a.value?(h(),g("div",lC,[...y[2]||(y[2]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"Loading lessons...",-1)])])):e.visible&&r.value?(h(),g("div",iC,[i("p",null,C(r.value),1),i("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(h(),g("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Ut(O=>m.$emit("close"),["self"]))},[i("div",cC,[i("div",uC,[i("h2",null,C(o.value.name),1),i("button",{class:"close-btn",onClick:y[0]||(y[0]=O=>m.$emit("close"))},"")]),i("div",dC,[(h(!0),g(X,null,ce(o.value.categories,O=>(h(),g("div",{key:O.id,class:"category-section"},[i("button",{class:re(["category-header",{expanded:l.value.includes(O.id)}]),onClick:A=>d(O.id)},[i("span",vC,C(l.value.includes(O.id)?"":""),1),i("span",mC,C(O.name),1),i("span",pC,C(O.lessons.length)+" lessons",1)],10,fC),l.value.includes(O.id)?(h(),g("div",hC,[(h(!0),g(X,null,ce(O.lessons,A=>(h(),g("button",{key:A.id,class:re(["lesson-item",{loading:c.value===A.id}]),onClick:_=>v(A,O)},[i("span",yC,C(A.name),1),i("span",bC,C(A.description),1)],10,gC))),128))])):B("",!0)]))),128))]),u.value?(h(),g("div",_C,C(u.value),1)):B("",!0)])])):e.visible&&e.inline&&o.value?(h(),g("div",wC,[i("div",SC,[(h(!0),g(X,null,ce(o.value.categories,O=>(h(),g("div",{key:O.id,class:"category-section"},[i("button",{class:re(["category-header",{expanded:l.value.includes(O.id)}]),onClick:A=>d(O.id)},[i("span",kC,C(l.value.includes(O.id)?"":""),1),i("span",$C,C(O.name),1),i("span",AC,C(O.lessons.length)+" lessons",1)],10,CC),l.value.includes(O.id)?(h(),g("div",xC,[(h(!0),g(X,null,ce(O.lessons,A=>(h(),g("button",{key:A.id,class:re(["lesson-item",{loading:c.value===A.id}]),onClick:_=>v(A,O)},[i("span",OC,C(A.name),1),i("span",TC,C(A.description),1)],10,NC))),128))])):B("",!0)]))),128))]),u.value?(h(),g("div",IC,C(u.value),1)):B("",!0)])):B("",!0)}},RC=he(EC,[["__scopeId","data-v-384a9c63"]]),DC={class:"viewer-controls"},PC={class:"viewer-body"},BC={key:0,class:"interaction-overlay"},LC={key:1,class:"viewer-loading"},UC={key:2,class:"viewer-error"},MC=["src"],FC={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Pt({x:80,y:80}),n=Pt({w:550,h:700}),o=E(!1),r=Pt({x:0,y:0}),a=E(null),l=E(!1),c=E(null),u=N(()=>a.value?a.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){l.value=!0,c.value=null;try{const S=await fetch(_);if(!S.ok)throw new Error("Failed to load PDF");const D=await S.blob(),K=new Blob([D],{type:"application/pdf"});a.value=URL.createObjectURL(K)}catch(S){c.value="Could not load PDF",console.error("Failed to fetch intro PDF:",S)}finally{l.value=!1}}}function d(){a.value&&(URL.revokeObjectURL(a.value),a.value=null)}function p(){a.value&&window.open(a.value,"_blank")}at(()=>[t.visible,t.url],([_,S])=>{_&&S?f(S):_||d()},{immediate:!0}),_i(d);function v(_){_.target.closest("button")||(o.value=!0,r.x=_.clientX-s.x,r.y=_.clientY-s.y,document.addEventListener("pointermove",m),document.addEventListener("pointerup",A))}function m(_){s.x=Math.max(0,_.clientX-r.x),s.y=Math.max(0,_.clientY-r.y)}function y(_){o.value=!0,r.x=_.clientX,r.y=_.clientY,r.startW=n.w,r.startH=n.h,document.addEventListener("pointermove",O),document.addEventListener("pointerup",A)}function O(_){n.w=Math.max(320,r.startW+(_.clientX-r.x)),n.h=Math.max(300,r.startH+(_.clientY-r.y))}function A(){o.value=!1,document.removeEventListener("pointermove",m),document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",A)}return(_,S)=>e.visible?(h(),g("div",{key:0,class:"intro-pdf-viewer",style:cs({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[i("div",{class:"viewer-titlebar",onPointerdown:v},[S[1]||(S[1]=i("span",{class:"viewer-title"},"Lesson Introduction",-1)),i("div",DC,[i("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),i("button",{class:"viewer-btn close",onClick:S[0]||(S[0]=D=>_.$emit("close")),title:"Close"},"")])],32),i("div",PC,[o.value?(h(),g("div",BC)):B("",!0),l.value?(h(),g("div",LC,"Loading PDF...")):c.value?(h(),g("div",UC,C(c.value),1)):u.value?(h(),g("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,MC)):B("",!0)]),i("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):B("",!0)}},jC=he(FC,[["__scopeId","data-v-a97df645"]]),HC={class:"collection-icon"},KC={class:"collection-name"},VC={class:"collection-desc"},WC={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(h(),g("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[i("span",HC,C(e.collection.icon),1),i("span",KC,C(e.collection.name),1),i("span",VC,C(e.collection.description),1)]))}},GC=he(WC,[["__scopeId","data-v-747be5b1"]]),zC={class:"collection-grid"},JC={class:"collection-cards"},YC={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=Kn().COLLECTIONS;return(n,o)=>(h(),g("div",zC,[o[0]||(o[0]=i("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=i("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),i("div",JC,[(h(!0),g(X,null,ce(R(s),r=>(h(),Oe(GC,{key:r.id,collection:r,onClick:a=>n.$emit("select-collection",r.id)},null,8,["collection","onClick"]))),128))])]))}},ka=he(YC,[["__scopeId","data-v-66fee6e8"]]),qC={class:"casual-lobby"},XC={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(h(),g("div",qC,[pe(ka,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},QC=he(XC,[["__scopeId","data-v-a78f70b6"]]),ZC={class:"student-lobby"},ek={__name:"StudentLobby",emits:["select-collection"],setup(e){return(t,s)=>(h(),g("div",ZC,[pe(ka,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},tk=he(ek,[["__scopeId","data-v-21d67fed"]]),sk={class:"roster"},nk={class:"roster-header"},ok={class:"member-count"},rk={key:0,class:"roster-empty"},ak={key:1,class:"roster-table"},lk={class:"member-name"},ik={class:"member-email"},ck={class:"member-date"},uk={class:"member-action"},dk=["onClick","disabled"],fk={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=E(null);function o(a){try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return a}}function r(a){const l=`${a.first_name} ${a.last_name}`;confirm(`Remove ${l} from this classroom?`)&&(n.value=a.student_id,s("remove-member",a.student_id),setTimeout(()=>{n.value=null},2e3))}return(a,l)=>(h(),g("div",sk,[i("div",nk,[l[0]||(l[0]=i("h4",null,"Class Roster",-1)),i("span",ok,C(e.members.length)+" "+C(e.members.length===1?"student":"students"),1)]),e.members.length===0?(h(),g("div",rk,[...l[1]||(l[1]=[i("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(h(),g("table",ak,[l[2]||(l[2]=i("thead",null,[i("tr",null,[i("th",null,"Name"),i("th",null,"Email"),i("th",null,"Joined"),i("th")])],-1)),i("tbody",null,[(h(!0),g(X,null,ce(e.members,c=>(h(),g("tr",{key:c.student_id},[i("td",lk,C(c.first_name)+" "+C(c.last_name),1),i("td",ik,C(c.email),1),i("td",ck,C(o(c.joined_at)),1),i("td",uk,[i("button",{class:"remove-btn",onClick:u=>r(c),disabled:n.value===c.student_id},C(n.value===c.student_id?"Removing...":"Remove"),9,dk)])]))),128))])]))]))}},vk=he(fk,[["__scopeId","data-v-ee901be3"]]),mk={class:"header-left"},pk={class:"classroom-name"},hk={class:"header-meta"},gk={class:"join-badge"},yk={class:"member-count"},bk=["aria-label"],_k={key:0,class:"card-body"},wk={key:0,class:"classroom-desc"},Sk={class:"invite-section"},Ck={class:"invite-field"},kk=["value"],$k={class:"email-section"},Ak={class:"email-header"},xk={class:"email-template"},Nk={class:"email-body"},Ok={key:2,class:"loading-roster"},Tk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=Jn(),r=E(null),a=E(!1),l=E(!1),c=E(!1),u=N(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);at(()=>s.expanded,async v=>{if(v&&!r.value){a.value=!0;const m=await o.fetchClassroomDetail(s.classroom.id);m!=null&&m.success&&(r.value=m.classroom),a.value=!1}});async function f(){try{await navigator.clipboard.writeText(u.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function d(){const v=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${u.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(v),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function p(v){const m=await o.removeMember(s.classroom.id,v);m!=null&&m.success&&(r.value&&(r.value.members=r.value.members.filter(y=>y.student_id!==v)),n("member-removed"))}return(v,m)=>(h(),g("div",{class:re(["classroom-card",{expanded:e.expanded}])},[i("div",{class:"card-header",onClick:m[0]||(m[0]=y=>v.$emit("toggle"))},[i("div",mk,[i("h3",pk,C(e.classroom.name),1),i("div",hk,[i("span",gk,"JOIN: "+C(e.classroom.join_code),1),i("span",yk,C(e.classroom.member_count)+" "+C(e.classroom.member_count===1?"student":"students"),1)])]),i("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[i("span",{class:re(["chevron",{rotated:e.expanded}])},"",2)],8,bk)]),e.expanded?(h(),g("div",_k,[e.classroom.description?(h(),g("p",wk,C(e.classroom.description),1)):B("",!0),i("div",Sk,[m[2]||(m[2]=i("h4",null,"Invite Link",-1)),m[3]||(m[3]=i("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),i("div",Ck,[i("input",{type:"text",value:u.value,readonly:"",class:"invite-input",onClick:m[1]||(m[1]=y=>y.target.select())},null,8,kk),i("button",{class:"copy-btn",onClick:f},C(l.value?"Copied!":"Copy"),1)])]),i("div",$k,[i("div",Ak,[m[4]||(m[4]=i("h4",null,"Email Template",-1)),i("button",{class:"copy-btn copy-btn-small",onClick:d},C(c.value?"Copied!":"Copy"),1)]),i("div",xk,[m[5]||(m[5]=i("p",null,[i("strong",null,"Subject:"),En(" Join our Bridge Classroom for practice exercises")],-1)),i("div",Nk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+C(u.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),r.value?(h(),Oe(vk,{key:1,members:r.value.members,onRemoveMember:p},null,8,["members"])):a.value?(h(),g("div",Ok," Loading roster... ")):B("",!0)])):B("",!0)],2))}},Ik=he(Tk,[["__scopeId","data-v-13a39855"]]),Ek={class:"modal-content"},Rk={class:"step"},Dk={class:"form-group"},Pk={class:"form-group"},Bk={class:"step-actions"},Lk=["disabled"],Uk={key:0,class:"error-text"},Mk={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=He(),o=Jn(),r=E(""),a=E(""),l=E(!1),c=E(null);async function u(){if(!r.value.trim()||l.value)return;const f=n.currentUser.value;if(!f)return;l.value=!0,c.value=null;const d=await o.createClassroom(f.id,r.value.trim(),a.value.trim()||null);d.success?s("classroom-created",d.classroom):c.value=d.error||"Failed to create classroom",l.value=!1}return(f,d)=>(h(),g("div",{class:"modal-overlay",onClick:d[3]||(d[3]=Ut(p=>f.$emit("close"),["self"]))},[i("div",Ek,[i("div",Rk,[d[7]||(d[7]=i("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=i("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),i("div",Dk,[d[4]||(d[4]=i("label",{for:"classroom-name"},"Classroom Name",-1)),Ze(i("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=p=>r.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:zi(u,["enter"])},null,544),[[Rt,r.value]]),d[5]||(d[5]=i("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),i("div",Pk,[d[6]||(d[6]=i("label",{for:"classroom-desc"},[En("Description "),i("span",{class:"optional"},"(optional)")],-1)),Ze(i("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=p=>a.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[Rt,a.value]])]),i("div",Bk,[i("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=p=>f.$emit("close"))},"Cancel"),i("button",{class:"btn btn-primary",disabled:!r.value.trim()||l.value,onClick:u},C(l.value?"Creating...":"Create Classroom"),9,Lk)]),c.value?(h(),g("p",Uk,C(c.value),1)):B("",!0)])])]))}},Fk=he(Mk,[["__scopeId","data-v-c26a1ae6"]]),jk={class:"teacher-lobby"},Hk={class:"welcome-section"},Kk={class:"welcome-title"},Vk={class:"welcome-subtitle"},Wk={class:"quick-actions"},Gk=["href"],zk={key:0,class:"classrooms-section"},Jk={class:"classroom-cards"},Yk={key:1,class:"empty-state"},qk={class:"collections-section"},Xk={__name:"TeacherLobby",emits:["select-collection"],setup(e){const t=He(),s=Jn(),n=E(!1),o=E(null),r=N(()=>{const d=t.currentUser.value;return d?d.firstName:""}),a=N(()=>{const d=s.teacherClassrooms.value.length;return d===0?"Get started by creating your first classroom.":d===1?"You have 1 active classroom.":`You have ${d} active classrooms.`}),l=N(()=>`${window.location.origin}${window.location.pathname}?mode=teacher`);function c(d){o.value=o.value===d?null:d}function u(d){n.value=!1,o.value=d.id}function f(){const d=t.currentUser.value;d&&s.fetchTeacherClassrooms(d.id)}return Nt(()=>{const d=t.currentUser.value;d&&s.fetchTeacherClassrooms(d.id)}),(d,p)=>(h(),g("div",jk,[i("div",Hk,[i("h2",Kk,"Welcome back, "+C(r.value),1),i("p",Vk,C(a.value),1)]),i("div",Wk,[i("button",{class:"action-btn create",onClick:p[0]||(p[0]=v=>n.value=!0)}," + New Classroom "),(h(),g("a",{key:0,href:l.value,class:"action-btn legacy"}," Legacy Dashboard ",8,Gk))]),R(s).teacherClassrooms.value.length?(h(),g("div",zk,[p[3]||(p[3]=i("h3",{class:"section-title"},"My Classrooms",-1)),i("div",Jk,[(h(!0),g(X,null,ce(R(s).teacherClassrooms.value,v=>(h(),Oe(Ik,{key:v.id,classroom:v,expanded:o.value===v.id,onToggle:m=>c(v.id),onMemberRemoved:f},null,8,["classroom","expanded","onToggle"]))),128))])])):R(s).loading.value?B("",!0):(h(),g("div",Yk,[...p[4]||(p[4]=[i("p",{class:"empty-title"},"No classrooms yet",-1),i("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])])),i("div",qk,[p[5]||(p[5]=i("h3",{class:"section-title"},"Lesson Collections",-1)),pe(ka,{onSelectCollection:p[1]||(p[1]=v=>d.$emit("select-collection",v))})]),n.value?(h(),Oe(Fk,{key:2,onClose:p[2]||(p[2]=v=>n.value=!1),onClassroomCreated:u})):B("",!0)]))}},Qk=he(Xk,[["__scopeId","data-v-4b0a04c7"]]),Zk={},e$={class:"admin-lobby"};function t$(e,t){return h(),g("div",e$,[...t[0]||(t[0]=[i("div",{class:"admin-placeholder"},[i("h2",{class:"admin-title"},"Admin Dashboard"),i("p",{class:"admin-subtitle"},"System metrics and monitoring coming in Phase 4.")],-1)])])}const s$=he(Zk,[["render",t$],["__scopeId","data-v-bf30d2dc"]]),n$={class:"lobby-view"},o$={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=He(),s=N(()=>{const r=t.currentUser.value;return(r==null?void 0:r.role)||"student"}),n=N(()=>!1),o=N(()=>{const r=t.currentUser.value;return Array.isArray(r==null?void 0:r.classrooms)&&r.classrooms.length>0});return(r,a)=>(h(),g("div",n$,[s.value==="admin"?(h(),Oe(s$,{key:0})):s.value==="teacher"?(h(),Oe(Qk,{key:1,onSelectCollection:a[0]||(a[0]=l=>r.$emit("select-collection",l))})):n.value||o.value?(h(),Oe(tk,{key:2,onSelectCollection:a[1]||(a[1]=l=>r.$emit("select-collection",l))})):(h(),Oe(QC,{key:3,onSelectCollection:a[2]||(a[2]=l=>r.$emit("select-collection",l)),onShowBecomeTeacher:a[3]||(a[3]=l=>r.$emit("show-become-teacher"))}))]))}},r$=he(o$,[["__scopeId","data-v-b441d9af"]]),a$={class:"modal-content"},l$={key:0,class:"step step-overview"},i$={class:"step-actions"},c$={key:1,class:"step step-agreement"},u$={class:"agreement-checkbox"},d$={class:"step-actions"},f$=["disabled"],v$={key:0,class:"error-text"},m$={key:2,class:"step step-confirmation"},p$={class:"step-actions"},h$={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=He(),o=E(1),r=E(!1),a=E(!1),l=E(null);async function c(){const u=n.currentUser.value;if(u){a.value=!0,l.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!d.success){l.value=d.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:v}=await am();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(f){console.error("Teacher activation failed:",f),l.value="Unable to connect to server. Please try again."}finally{a.value=!1}}}return(u,f)=>(h(),g("div",{class:"modal-overlay",onClick:f[5]||(f[5]=Ut(d=>u.$emit("close"),["self"]))},[i("div",a$,[o.value===1?(h(),g("div",l$,[f[6]||(f[6]=mo('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),i("div",i$,[i("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>u.$emit("close"))},"Not Now"),i("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(h(),g("div",c$,[f[8]||(f[8]=mo('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),i("label",u$,[Ze(i("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>r.value=d)},null,512),[[Lo,r.value]]),f[7]||(f[7]=i("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),i("div",d$,[i("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),i("button",{class:"btn btn-primary",disabled:!r.value||a.value,onClick:c},C(a.value?"Activating...":"Activate Teacher Account"),9,f$)]),l.value?(h(),g("p",v$,C(l.value),1)):B("",!0)])):o.value===3?(h(),g("div",m$,[f[9]||(f[9]=i("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=i("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=i("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=i("ol",{class:"next-steps"},[i("li",null,"Create your first classroom from the teacher dashboard"),i("li",null,"Share the invite link with your students"),i("li",null,"Browse exercises and assign them to your class")],-1)),i("div",p$,[i("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>u.$emit("activated"))},"Go to Dashboard ")])])):B("",!0)])]))}},g$=he(h$,[["__scopeId","data-v-56e5717d"]]),y$={},b$={class:"page-footer"};function _$(e,t){return h(),g("footer",b$,[...t[0]||(t[0]=[i("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),i("nav",{class:"footer-links"},[i("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const w$=he(y$,[["render",_$],["__scopeId","data-v-1817839c"]]),S$={key:2,class:"app"},C$={class:"app-header"},k$={class:"header-right"},$$=["title"],A$={key:3,class:"stats"},x$={class:"correct"},N$={class:"wrong"},O$={class:"user-avatar-group"},T$=["title"],I$=["title"],E$={class:"app-main"},R$={key:3,class:"collection-view"},D$={key:4,class:"practice-layout"},P$={class:"practice-left"},B$={class:"practice-right"},L$={key:1,class:"commentary-panel"},U$=["innerHTML"],M$=["innerHTML"],F$=["innerHTML"],j$=["innerHTML"],H$={class:"commentary-controls"},K$={key:0,class:"bidding-box-wrapper"},V$={key:1,class:"card-choice-prompt"},W$=["innerHTML"],G$={key:3,class:"completion-controls"},z$={key:0,class:"registration-toast"},J$={__name:"MainLayout",setup(e){const t=Fv(),s=Kn(),n=He(),o=Ho(),r=Uc(),a=Ca(),l=Ym(),c=E(!1),u=E(!1),f=E(!1),d=E(!1),p=E(!1),v=E(null),m=E(""),y=E(null),O=E(null),A=E(null),_=E(!1),S=E(null),D=E(null),K=E(!1),ee=E(!1),se=E(null);function le(b,$=".current"){if(!b)return;const T=b.querySelector($);T&&(b.scrollTop=T.offsetTop-b.offsetTop)}at(()=>l.currentStepIndex.value,()=>{Nn(()=>{le(y.value,".narrative-text.current")})}),at(()=>l.isComplete.value,b=>{b&&Nn(()=>{le(y.value,".narrative-text.current")})});function J(){const b=new URLSearchParams(window.location.search);d.value=b.get("mode")==="teacher"}function de(){d.value=!1;const b=new URL(window.location.href);b.searchParams.delete("mode"),window.history.replaceState({},"",b.toString())}const ue=N(()=>n.isAuthenticated.value),we=N(()=>{const b=n.currentUser.value;return b?`${b.firstName} ${b.lastName}`:""}),Re=N(()=>{const b=n.currentUser.value;return b?`${b.firstName.charAt(0)}${b.lastName.charAt(0)}`.toUpperCase():"?"}),Le=N(()=>{const b=n.currentUser.value;return(b==null?void 0:b.role)||"student"}),Ke=N(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");Nt(async()=>{if(J(),d.value)return;s.initializeFromUrl(),n.initialize();const b=new URLSearchParams(window.location.search);b.get("recover")&&b.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const $=s.getCollectionFromUrl(),T=s.getLessonFromUrl();$&&(O.value=$,T&&await x($,T)),n.isAuthenticated.value&&(await r.initialize(),Gt().initialize(),await a.checkTeacherStatus())});async function ge(b){console.log("User ready:",b.firstName,b.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),ee.value=!0,setTimeout(()=>{ee.value=!1},4e3)),await r.initialize(),Gt().initialize(),await a.checkTeacherStatus();const T=sessionStorage.getItem("pendingJoinCode");if(T){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:T}});return}}function q(){Gt().reset(),va().clearCache(),us().reset(),a.reset(),n.currentUserId.value=null,c.value=!1,p.value=!1,v.value=null}async function fe(){_.value=!1,await a.checkTeacherStatus()}const me=E([]),te=E(0),j=N(()=>me.value[te.value]||null),Z=N(()=>{var P;const b=V(O.value),$=b!=null&&b.name?`${b.name} - `:"";if((P=A.value)!=null&&P.name)return $+A.value.name;if(!j.value)return"";const T=j.value.subfolder||j.value.category||"";return T?$+T:""});at(te,()=>{j.value&&(l.loadDeal(j.value),s.setDealInUrl(j.value.boardNumber))},{flush:"sync"}),at(()=>l.observationStore.pendingCount.value,(b,$)=>{b>$&&r.triggerSync()}),at(()=>l.isComplete.value,b=>{b&&(S.value=null)});function Ve({subfolder:b,name:$,category:T,content:P}){const H=wl(P);if(H.length>0){const z=H.map(oe=>({...oe,subfolder:oe.subfolder||b,category:oe.category||T}));me.value=z,te.value=0,l.loadDeal(z[0]),l.resetStats(),nn().saveLessonBoardNumbers(b,z.map(oe=>oe.boardNumber)),A.value={id:b,name:$,category:T},s.setLessonInUrl(b),K.value=!1,F()}else alert("No deals found in the lesson file")}const lt=N(()=>l.boardState.correctCount),ut=N(()=>l.boardState.wrongCount);function qe(b){!l.makeBid(b)&&j.value&&(S.value=j.value.boardNumber)}function M({seat:b,suit:$,rank:T}){!l.makeCardChoice($,T)&&j.value&&(S.value=j.value.boardNumber)}function Y(){l.clearCardFeedback(),l.goBack()}function G(){te.value<me.value.length-1&&(S.value=null,te.value++,l.loadDeal(me.value[te.value]))}function Q(b){b>=0&&b<me.value.length&&(S.value=null,te.value=b,l.loadDeal(me.value[b]))}async function ve({subfolder:b,dealNumber:$}){var T;if(((T=A.value)==null?void 0:T.id)===b&&me.value.length>0){const P=me.value.findIndex(H=>H.boardNumber===$);if(P>=0){Q(P);return}}for(const P of s.COLLECTIONS)try{const H=b.includes("/")?b.split("/").pop():b,z=`${P.baseUrl}/${H}.pbn`,ne=await fetch(z);if(!ne.ok)continue;const oe=await ne.text();O.value=P.id,s.setCollectionInUrl(P.id),Ve({subfolder:b,name:b,category:"",content:oe});const Ne=me.value.findIndex(Ae=>Ae.boardNumber===$);Ne>=0&&Q(Ne);return}catch{}}function w(b){f.value=!1,p.value=!1,v.value=null,ve(b)}function k(b,$){p.value=!1,v.value=null,ve({subfolder:b,dealNumber:$||1})}function I(){A.value=null,s.setLessonInUrl(null),me.value=[],te.value=0,l.resetStats(),K.value=!1,D.value=null,p.value=!1,v.value=null}function L(){O.value=null,A.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),me.value=[],te.value=0,l.resetStats(),K.value=!1,D.value=null,p.value=!1,v.value=null}async function F(){if(D.value=null,!O.value||!A.value)return;const b=V(O.value);if(!b)return;const $=A.value.id,T=$.includes("/")?$.split("/").pop():$,P=`${b.baseUrl}/${T}_Intro.pdf`;try{(await fetch(P,{method:"HEAD"})).ok&&(D.value=P)}catch{}}function U(b){window.innerWidth<600?window.open(b,"_blank"):(se.value=b,K.value=!0)}function W(b){O.value=b,s.setCollectionInUrl(b)}function V(b){return s.COLLECTIONS.find($=>$.id===b)}async function x(b,$){var P;const T=V(b);if(!T)return console.error("Collection not found:",b),!1;try{const H=await fetch(T.tocUrl);if(!H.ok)throw new Error(`Failed to load TOC: ${H.statusText}`);const z=await H.json();let ne=null,oe=null;for(const pt of z.categories||[]){const Te=(P=pt.lessons)==null?void 0:P.find(Ue=>Ue.id===$);if(Te){ne=Te,oe=pt;break}}if(!ne)return console.error("Lesson not found in TOC:",$),!1;const Ne=$.includes("/")?$.split("/").pop():$,Ae=`${T.baseUrl}/${Ne}.pbn`,We=await fetch(Ae);if(!We.ok)throw new Error(`Failed to load lesson: ${We.statusText}`);const st=await We.text(),_t=wl(st);if(_t.length>0){const pt=_t.map(wt=>({...wt,subfolder:wt.subfolder||$,category:wt.category||oe.name}));me.value=pt;const Te=s.getDealFromUrl(),Ue=Te?pt.findIndex(wt=>wt.boardNumber===Te):-1;return te.value=Ue>=0?Ue:0,l.loadDeal(pt[te.value]),l.resetStats(),A.value={id:$,name:ne.name,category:oe.name},F(),!0}return!1}catch(H){return console.error("Error loading lesson from URL:",H),!1}}return(b,$)=>{var T,P,H,z,ne,oe,Ne,Ae,We,st,_t,pt,Te,Ue,wt,on;return d.value?(h(),Oe(JS,{key:0,onClose:de})):ue.value?(h(),g("div",S$,[i("header",C$,[i("h1",null,C(me.value.length?Z.value:Ke.value),1),i("div",k$,[pe(Ob),i("button",{class:"progress-btn",onClick:$[0]||($[0]=ke=>u.value=!0),title:"View Progress"}," Progress "),i("button",{class:"accomplishments-btn",onClick:$[1]||($[1]=ke=>f.value=!0),title:"View Accomplishments"}," Accomplishments "),R(a).isTeacher.value?(h(),g("button",{key:0,class:"teacher-btn",onClick:$[2]||($[2]=ke=>{p.value=!0,v.value=null,m.value=""}),title:"View Students"}," Students ")):B("",!0),me.value.length&&O.value?(h(),g("button",{key:1,class:"lessons-btn",onClick:I,title:"Back to "+((T=V(O.value))==null?void 0:T.name)},C((P=V(O.value))==null?void 0:P.name),9,$$)):B("",!0),O.value?(h(),g("button",{key:2,class:"lobby-btn",onClick:L,title:"Return to lobby"}," Lobby ")):B("",!0),lt.value+ut.value>0?(h(),g("div",A$,[i("span",x$,C(lt.value),1),i("span",N$,C(ut.value),1)])):B("",!0),i("div",O$,[Le.value!=="student"?(h(),g("button",{key:0,class:re(["role-badge","role-"+Le.value]),onClick:L,title:"Return to "+Le.value+" lobby"},C(Le.value),11,T$)):B("",!0),i("button",{class:"user-btn",onClick:$[3]||($[3]=ke=>c.value=!0),title:we.value},C(Re.value),9,I$)])])]),i("main",E$,[pe(yb),p.value&&!v.value?(h(),Oe(w0,{key:0,onClose:$[4]||($[4]=ke=>p.value=!1),onSelectStudent:$[5]||($[5]=(ke,rn)=>{v.value=ke,m.value=rn})})):p.value&&v.value?(h(),Oe(aC,{key:1,studentId:v.value,studentName:m.value,onBack:$[6]||($[6]=ke=>v.value=null),onNavigateToLesson:k},null,8,["studentId","studentName"])):!me.value.length&&!O.value?(h(),Oe(r$,{key:2,onSelectCollection:W,onShowBecomeTeacher:$[7]||($[7]=ke=>_.value=!0)})):!me.value.length&&O.value?(h(),g("div",R$,[i("h2",null,C(((H=V(O.value))==null?void 0:H.name)||O.value),1),$[17]||($[17]=i("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),pe(RC,{visible:!0,inline:!0,collection:V(O.value),onLoad:Ve},null,8,["collection"])])):(h(),g("div",D$,[i("div",P$,[me.value.length>1?(h(),Oe(zc,{key:0,boardNumbers:me.value.map(ke=>ke.boardNumber),lessonSubfolder:((z=j.value)==null?void 0:z.subfolder)||((ne=j.value)==null?void 0:ne.category)||"",currentIndex:te.value,forceRedBoard:S.value,introUrl:D.value,onGoto:Q,onOpenIntro:U},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):B("",!0),pe(yg,{boardNumber:(oe=j.value)==null?void 0:oe.boardNumber,dealer:(Ne=j.value)==null?void 0:Ne.dealer,vulnerable:(Ae=j.value)==null?void 0:Ae.vulnerable,contract:(We=j.value)==null?void 0:We.contract,declarer:(st=j.value)==null?void 0:st.declarer,showContract:R(l).auctionState.auctionComplete||R(l).showOpeningLead.value||R(l).hasSteps.value&&!R(l).hasBidSteps.value,openingLead:R(l).showOpeningLead.value?(_t=j.value)==null?void 0:_t.openingLead:"",totalDeals:me.value.length,currentIndex:te.value,dealBoardNumbers:me.value.map(ke=>ke.boardNumber),onGoto:Q},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),pe(Bh,{hands:R(l).hands.value,hiddenSeats:R(l).hiddenSeats.value,showHcp:R(l).showHcp.value,compact:!0,clickableSeat:R(l).hasCardChoice.value?R(l).studentSeat.value:null,playedCards:R(l).showcardsPlayedCards.value,onCardClick:M},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),i("div",B$,[R(l).showAuctionTable.value?(h(),Oe(eg,{key:0,bids:R(l).hasBidSteps.value?R(l).auctionState.displayedBids:((pt=j.value)==null?void 0:pt.auction)||[],dealer:((Te=j.value)==null?void 0:Te.dealer)||"N",currentBidIndex:R(l).hasBidSteps.value?R(l).auctionState.currentBidIndex:-1,wrongBidIndex:R(l).auctionState.wrongBidIndex,correctBidIndex:R(l).auctionState.correctBidIndex,showTurnIndicator:R(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):B("",!0),pe(Dl,{visible:!!R(l).auctionState.wrongBid,type:"wrong",wrongBid:R(l).auctionState.wrongBid,correctBid:R(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),pe(Dl,{visible:!!R(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:R(l).cardChoiceState.wrongCard,correctCardCode:R(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),R(l).hasSteps.value?(h(),g("div",L$,[i("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:y},[(h(!0),g(X,null,ce(R(l).steps.value.slice(0,R(l).currentStepIndex.value),(ke,rn)=>(h(),g(X,{key:"prev-"+rn},[rn>=R(l).commentaryStartIndex.value?(h(),g(X,{key:0},[i("span",{class:"narrative-text previous",innerHTML:R(Es)(R(dn)(ke.text))},null,8,U$),ke.type==="bid"&&ke.explanationText?(h(),g("span",{key:0,class:re(["narrative-text",rn===R(l).currentStepIndex.value-1&&R(l).isBidStep.value&&!R(l).bidAnswered.value?"current":"previous"]),innerHTML:R(Es)(R(dn)(ke.explanationText))},null,10,M$)):B("",!0)],64)):B("",!0)],64))),128)),R(l).currentStep.value?(h(),g("span",{key:0,class:"narrative-text current",innerHTML:R(Es)(R(dn)(R(l).currentStep.value.text))},null,8,F$)):B("",!0),R(l).bidAnswered.value&&((Ue=R(l).currentStep.value)!=null&&Ue.explanationText)?(h(),g("span",{key:1,class:"narrative-text current",innerHTML:R(Es)(R(dn)(R(l).currentStep.value.explanationText))},null,8,j$)):B("",!0)],512),i("div",H$,[R(l).hasBidPrompt.value?(h(),g("div",K$,[pe(Jh,{lastBid:R(l).lastContractBid.value,canDouble:R(l).canDouble.value,canRedouble:R(l).canRedouble.value,onBid:qe},null,8,["lastBid","canDouble","canRedouble"])])):R(l).hasCardChoice.value?(h(),g("div",V$," Click on the card you would choose ")):B("",!0),R(l).canGoBack.value?(h(),g("button",{key:2,class:"instruction-btn secondary",onClick:Y},"  Back ")):B("",!0),!R(l).isComplete.value&&(R(l).bidAnswered.value||!R(l).hasBidPrompt.value&&!R(l).hasCardChoice.value&&R(l).currentStep.value&&R(l).currentStep.value.type!=="end")?(h(),g("button",{key:3,class:"instruction-btn primary",onClick:$[8]||($[8]=ke=>R(l).advance())},C(((wt=R(l).currentStep.value)==null?void 0:wt.type)==="rotate"?"Rotate":"Next")+"  ",1)):B("",!0),R(l).isComplete.value&&te.value<me.value.length-1?(h(),g("button",{key:4,class:"next-deal-btn",onClick:G}," Next Deal  ")):B("",!0)])])):(on=j.value)!=null&&on.commentary?(h(),g("div",{key:2,class:"display-commentary",innerHTML:R(Es)(R(dn)(R(Xv)(j.value.commentary)))},null,8,W$)):B("",!0),!R(l).hasSteps.value&&R(l).isComplete.value&&te.value<me.value.length-1?(h(),g("div",G$,[i("button",{class:"next-deal-btn",onClick:G}," Next Deal  ")])):B("",!0)])]))]),pe(lb,{visible:c.value,onClose:$[9]||($[9]=ke=>c.value=!1),onSwitchUser:q,onLogout:q,onBecomeTeacher:$[10]||($[10]=ke=>_.value=!0)},null,8,["visible"]),ee.value?(h(),g("div",z$," Account created  your data is encrypted and linked to your email for recovery. ")):B("",!0),u.value?(h(),g("div",{key:1,class:"modal-overlay",onClick:$[12]||($[12]=Ut(ke=>u.value=!1,["self"]))},[pe(zb,{onClose:$[11]||($[11]=ke=>u.value=!1)})])):B("",!0),f.value?(h(),g("div",{key:2,class:"modal-overlay",onClick:$[14]||($[14]=Ut(ke=>f.value=!1,["self"]))},[pe(R_,{onClose:$[13]||($[13]=ke=>f.value=!1),onNavigateToDeal:w})])):B("",!0),pe(jC,{visible:K.value,url:se.value||"",onClose:$[15]||($[15]=ke=>K.value=!1)},null,8,["visible","url"]),_.value?(h(),Oe(g$,{key:3,onClose:$[16]||($[16]=ke=>_.value=!1),onActivated:fe})):B("",!0),pe(w$)])):(h(),Oe($y,{key:1,onUserReady:ge}))}}},Y$=()=>Ef(()=>import("./JoinClassroomView-Bk65KxIS.js"),__vite__mapDeps([0,1])),q$=[{path:"/join/:joinCode",name:"join",component:Y$},{path:"/:pathMatch(.*)*",name:"app",component:J$}],X$=Mv({history:gv(),routes:q$}),eu=kf(Of);eu.use(X$);eu.mount("#app");export{he as _,i as a,pe as b,g as c,B as d,En as e,mo as f,He as g,Jn as h,ld as i,dc as j,Fv as k,h as l,Nt as o,E as r,C as t,Q$ as u,Ku as w};
