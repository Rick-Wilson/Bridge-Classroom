const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-CE8U24Dt.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ie={},nn=[],zt=()=>{},Ti=()=>!1,na=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Cr=e=>e.startsWith("onUpdate:"),at=Object.assign,$r=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ed=Object.prototype.hasOwnProperty,Oe=(e,t)=>ed.call(e,t),he=Array.isArray,on=e=>fo(e)==="[object Map]",_n=e=>fo(e)==="[object Set]",fl=e=>fo(e)==="[object Date]",Se=e=>typeof e=="function",Je=e=>typeof e=="string",Mt=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",Ni=e=>(Re(e)||Se(e))&&Se(e.then)&&Se(e.catch),Ei=Object.prototype.toString,fo=e=>Ei.call(e),td=e=>fo(e).slice(8,-1),Oi=e=>fo(e)==="[object Object]",kr=e=>Je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bn=Sr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oa=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},sd=/-\w/g,It=oa(e=>e.replace(sd,t=>t.slice(1).toUpperCase())),nd=/\B([A-Z])/g,Cs=oa(e=>e.replace(nd,"-$1").toLowerCase()),aa=oa(e=>e.charAt(0).toUpperCase()+e.slice(1)),_a=oa(e=>e?`on${aa(e)}`:""),gs=(e,t)=>!Object.is(e,t),Eo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Ii=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},ra=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let pl;const la=()=>pl||(pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function st(e){if(he(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Je(n)?ld(n):st(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Je(e)||Re(e))return e}const od=/;(?![^(]*\))/g,ad=/:([^]+)/,rd=/\/\*[^]*?\*\//g;function ld(e){const t={};return e.replace(rd,"").split(od).forEach(s=>{if(s){const n=s.split(ad);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(Je(e))t=e;else if(he(e))for(let s=0;s<e.length;s++){const n=ie(e[s]);n&&(t+=n+" ")}else if(Re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const id="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cd=Sr(id);function Ri(e){return!!e||e===""}function ud(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Us(e[n],t[n]);return s}function Us(e,t){if(e===t)return!0;let s=fl(e),n=fl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Mt(e),n=Mt(t),s||n)return e===t;if(s=he(e),n=he(t),s||n)return s&&n?ud(e,t):!1;if(s=Re(e),n=Re(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const r in e){const i=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(i&&!c||!i&&c||!Us(e[r],t[r]))return!1}}return String(e)===String(t)}function xr(e,t){return e.findIndex(s=>Us(s,t))}const Di=e=>!!(e&&e.__v_isRef===!0),b=e=>Je(e)?e:e==null?"":he(e)||Re(e)&&(e.toString===Ei||!Se(e.toString))?Di(e)?b(e.value):JSON.stringify(e,Pi,2):String(e),Pi=(e,t)=>Di(t)?Pi(e,t.value):on(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[wa(n,a)+" =>"]=o,s),{})}:_n(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>wa(s))}:Mt(t)?wa(t):Re(t)&&!he(t)&&!Oi(t)?String(t):t,wa=(e,t="")=>{var s;return Mt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class dd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!t&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=wt;try{return wt=this,t()}finally{wt=s}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function fd(){return wt}let Pe;const Sa=new WeakSet;class Li{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sa.has(this)&&(Sa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vl(this),Ui(this);const t=Pe,s=Pt;Pe=this,Pt=!0;try{return this.fn()}finally{Fi(this),Pe=t,Pt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Nr(t);this.deps=this.depsTail=void 0,vl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wa(this)&&this.run()}get dirty(){return Wa(this)}}let Bi=0,Mn,Un;function Mi(e,t=!1){if(e.flags|=8,t){e.next=Un,Un=e;return}e.next=Mn,Mn=e}function Ar(){Bi++}function Tr(){if(--Bi>0)return;if(Un){let t=Un;for(Un=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Mn;){let t=Mn;for(Mn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Ui(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Fi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Nr(n),pd(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Wa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ji(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ji(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xn)||(e.globalVersion=Xn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Wa(e))))return;e.flags|=2;const t=e.dep,s=Pe,n=Pt;Pe=e,Pt=!0;try{Ui(e);const o=e.fn(e._value);(t.version===0||gs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Pe=s,Pt=n,Fi(e),e.flags&=-3}}function Nr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)Nr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function pd(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Pt=!0;const Hi=[];function os(){Hi.push(Pt),Pt=!1}function as(){const e=Hi.pop();Pt=e===void 0?!0:e}function vl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Pe;Pe=void 0;try{t()}finally{Pe=s}}}let Xn=0;class vd{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Er{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pe||!Pt||Pe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Pe)s=this.activeLink=new vd(Pe,this),Pe.deps?(s.prevDep=Pe.depsTail,Pe.depsTail.nextDep=s,Pe.depsTail=s):Pe.deps=Pe.depsTail=s,Wi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Pe.depsTail,s.nextDep=void 0,Pe.depsTail.nextDep=s,Pe.depsTail=s,Pe.deps===s&&(Pe.deps=n)}return s}trigger(t){this.version++,Xn++,this.notify(t)}notify(t){Ar();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Tr()}}}function Wi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Wi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ka=new WeakMap,Ls=Symbol(""),Va=Symbol(""),Qn=Symbol("");function it(e,t,s){if(Pt&&Pe){let n=Ka.get(e);n||Ka.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Er),o.map=n,o.key=s),o.track()}}function Zt(e,t,s,n,o,a){const r=Ka.get(e);if(!r){Xn++;return}const i=c=>{c&&c.trigger()};if(Ar(),t==="clear")r.forEach(i);else{const c=he(e),u=c&&kr(s);if(c&&s==="length"){const f=Number(n);r.forEach((d,p)=>{(p==="length"||p===Qn||!Mt(p)&&p>=f)&&i(d)})}else switch((s!==void 0||r.has(void 0))&&i(r.get(s)),u&&i(r.get(Qn)),t){case"add":c?u&&i(r.get("length")):(i(r.get(Ls)),on(e)&&i(r.get(Va)));break;case"delete":c||(i(r.get(Ls)),on(e)&&i(r.get(Va)));break;case"set":on(e)&&i(r.get(Ls));break}}Tr()}function Ks(e){const t=Ee(e);return t===e?t:(it(t,"iterate",Qn),Et(e)?t:t.map(Ut))}function ia(e){return it(e=Ee(e),"iterate",Qn),e}function fs(e,t){return rs(e)?un(Bs(e)?Ut(t):t):Ut(t)}const md={__proto__:null,[Symbol.iterator](){return Ca(this,Symbol.iterator,e=>fs(this,e))},concat(...e){return Ks(this).concat(...e.map(t=>he(t)?Ks(t):t))},entries(){return Ca(this,"entries",e=>(e[1]=fs(this,e[1]),e))},every(e,t){return Yt(this,"every",e,t,void 0,arguments)},filter(e,t){return Yt(this,"filter",e,t,s=>s.map(n=>fs(this,n)),arguments)},find(e,t){return Yt(this,"find",e,t,s=>fs(this,s),arguments)},findIndex(e,t){return Yt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Yt(this,"findLast",e,t,s=>fs(this,s),arguments)},findLastIndex(e,t){return Yt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Yt(this,"forEach",e,t,void 0,arguments)},includes(...e){return $a(this,"includes",e)},indexOf(...e){return $a(this,"indexOf",e)},join(e){return Ks(this).join(e)},lastIndexOf(...e){return $a(this,"lastIndexOf",e)},map(e,t){return Yt(this,"map",e,t,void 0,arguments)},pop(){return kn(this,"pop")},push(...e){return kn(this,"push",e)},reduce(e,...t){return ml(this,"reduce",e,t)},reduceRight(e,...t){return ml(this,"reduceRight",e,t)},shift(){return kn(this,"shift")},some(e,t){return Yt(this,"some",e,t,void 0,arguments)},splice(...e){return kn(this,"splice",e)},toReversed(){return Ks(this).toReversed()},toSorted(e){return Ks(this).toSorted(e)},toSpliced(...e){return Ks(this).toSpliced(...e)},unshift(...e){return kn(this,"unshift",e)},values(){return Ca(this,"values",e=>fs(this,e))}};function Ca(e,t,s){const n=ia(e),o=n[t]();return n!==e&&!Et(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const hd=Array.prototype;function Yt(e,t,s,n,o,a){const r=ia(e),i=r!==e&&!Et(e),c=r[t];if(c!==hd[t]){const d=c.apply(e,a);return i?Ut(d):d}let u=s;r!==e&&(i?u=function(d,p){return s.call(this,fs(e,d),p,e)}:s.length>2&&(u=function(d,p){return s.call(this,d,p,e)}));const f=c.call(r,u,n);return i&&o?o(f):f}function ml(e,t,s,n){const o=ia(e);let a=s;return o!==e&&(Et(e)?s.length>3&&(a=function(r,i,c){return s.call(this,r,i,c,e)}):a=function(r,i,c){return s.call(this,r,fs(e,i),c,e)}),o[t](a,...n)}function $a(e,t,s){const n=Ee(e);it(n,"iterate",Qn);const o=n[t](...s);return(o===-1||o===!1)&&Rr(s[0])?(s[0]=Ee(s[0]),n[t](...s)):o}function kn(e,t,s=[]){os(),Ar();const n=Ee(e)[t].apply(e,s);return Tr(),as(),n}const gd=Sr("__proto__,__v_isRef,__isVue"),Ki=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function yd(e){Mt(e)||(e=String(e));const t=Ee(this);return it(t,"has",e),t.hasOwnProperty(e)}class Vi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?Td:Yi:a?Ji:zi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=he(t);if(!o){let c;if(r&&(c=md[s]))return c;if(s==="hasOwnProperty")return yd}const i=Reflect.get(t,s,ut(t)?t:n);if((Mt(s)?Ki.has(s):gd(s))||(o||it(t,"get",s),a))return i;if(ut(i)){const c=r&&kr(s)?i:i.value;return o&&Re(c)?za(c):c}return Re(i)?o?za(i):Lt(i):i}}class Gi extends Vi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const r=he(t)&&kr(s);if(!this._isShallow){const u=rs(a);if(!Et(n)&&!rs(n)&&(a=Ee(a),n=Ee(n)),!r&&ut(a)&&!ut(n))return u||(a.value=n),!0}const i=r?Number(s)<t.length:Oe(t,s),c=Reflect.set(t,s,n,ut(t)?t:o);return t===Ee(o)&&(i?gs(n,a)&&Zt(t,"set",s,n):Zt(t,"add",s,n)),c}deleteProperty(t,s){const n=Oe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Zt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Mt(s)||!Ki.has(s))&&it(t,"has",s),n}ownKeys(t){return it(t,"iterate",he(t)?"length":Ls),Reflect.ownKeys(t)}}class bd extends Vi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const _d=new Gi,wd=new bd,Sd=new Gi(!0);const Ga=e=>e,wo=e=>Reflect.getPrototypeOf(e);function Cd(e,t,s){return function(...n){const o=this.__v_raw,a=Ee(o),r=on(a),i=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,u=o[e](...n),f=s?Ga:t?un:Ut;return!t&&it(a,"iterate",c?Va:Ls),at(Object.create(u),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:i?[f(d[0]),f(d[1])]:f(d),done:p}}})}}function So(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $d(e,t){const s={get(o){const a=this.__v_raw,r=Ee(a),i=Ee(o);e||(gs(o,i)&&it(r,"get",o),it(r,"get",i));const{has:c}=wo(r),u=t?Ga:e?un:Ut;if(c.call(r,o))return u(a.get(o));if(c.call(r,i))return u(a.get(i));a!==r&&a.get(o)},get size(){const o=this.__v_raw;return!e&&it(Ee(o),"iterate",Ls),o.size},has(o){const a=this.__v_raw,r=Ee(a),i=Ee(o);return e||(gs(o,i)&&it(r,"has",o),it(r,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const r=this,i=r.__v_raw,c=Ee(i),u=t?Ga:e?un:Ut;return!e&&it(c,"iterate",Ls),i.forEach((f,d)=>o.call(a,u(f),u(d),r))}};return at(s,e?{add:So("add"),set:So("set"),delete:So("delete"),clear:So("clear")}:{add(o){!t&&!Et(o)&&!rs(o)&&(o=Ee(o));const a=Ee(this);return wo(a).has.call(a,o)||(a.add(o),Zt(a,"add",o,o)),this},set(o,a){!t&&!Et(a)&&!rs(a)&&(a=Ee(a));const r=Ee(this),{has:i,get:c}=wo(r);let u=i.call(r,o);u||(o=Ee(o),u=i.call(r,o));const f=c.call(r,o);return r.set(o,a),u?gs(a,f)&&Zt(r,"set",o,a):Zt(r,"add",o,a),this},delete(o){const a=Ee(this),{has:r,get:i}=wo(a);let c=r.call(a,o);c||(o=Ee(o),c=r.call(a,o)),i&&i.call(a,o);const u=a.delete(o);return c&&Zt(a,"delete",o,void 0),u},clear(){const o=Ee(this),a=o.size!==0,r=o.clear();return a&&Zt(o,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Cd(o,e,t)}),s}function Or(e,t){const s=$d(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Oe(s,o)&&o in n?s:n,o,a)}const kd={get:Or(!1,!1)},xd={get:Or(!1,!0)},Ad={get:Or(!0,!1)};const zi=new WeakMap,Ji=new WeakMap,Yi=new WeakMap,Td=new WeakMap;function Nd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ed(e){return e.__v_skip||!Object.isExtensible(e)?0:Nd(td(e))}function Lt(e){return rs(e)?e:Ir(e,!1,_d,kd,zi)}function qi(e){return Ir(e,!1,Sd,xd,Ji)}function za(e){return Ir(e,!0,wd,Ad,Yi)}function Ir(e,t,s,n,o){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Ed(e);if(a===0)return e;const r=o.get(e);if(r)return r;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Bs(e){return rs(e)?Bs(e.__v_raw):!!(e&&e.__v_isReactive)}function rs(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Rr(e){return e?!!e.__v_raw:!1}function Ee(e){const t=e&&e.__v_raw;return t?Ee(t):e}function Od(e){return!Oe(e,"__v_skip")&&Object.isExtensible(e)&&Ii(e,"__v_skip",!0),e}const Ut=e=>Re(e)?Lt(e):e,un=e=>Re(e)?za(e):e;function ut(e){return e?e.__v_isRef===!0:!1}function E(e){return Xi(e,!1)}function Id(e){return Xi(e,!0)}function Xi(e,t){return ut(e)?e:new Rd(e,t)}class Rd{constructor(t,s){this.dep=new Er,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Ee(t),this._value=s?t:Ut(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Et(t)||rs(t);t=n?t:Ee(t),gs(t,s)&&(this._rawValue=t,this._value=n?t:Ut(t),this.dep.trigger())}}function M(e){return ut(e)?e.value:e}const Dd={get:(e,t,s)=>t==="__v_raw"?e:M(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ut(o)&&!ut(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Qi(e){return Bs(e)?e:new Proxy(e,Dd)}class Pd{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Er(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return Mi(this,!0),!0}get value(){const t=this.dep.track();return ji(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ld(e,t,s=!1){let n,o;return Se(e)?n=e:(n=e.get,o=e.set),new Pd(n,o,s)}const Co={},Mo=new WeakMap;let Rs;function Bd(e,t=!1,s=Rs){if(s){let n=Mo.get(s);n||Mo.set(s,n=[]),n.push(e)}}function Md(e,t,s=Ie){const{immediate:n,deep:o,once:a,scheduler:r,augmentJob:i,call:c}=s,u=x=>o?x:Et(x)||o===!1||o===0?es(x,1):es(x);let f,d,p,h,g=!1,y=!1;if(ut(e)?(d=()=>e.value,g=Et(e)):Bs(e)?(d=()=>u(e),g=!0):he(e)?(y=!0,g=e.some(x=>Bs(x)||Et(x)),d=()=>e.map(x=>{if(ut(x))return x.value;if(Bs(x))return u(x);if(Se(x))return c?c(x,2):x()})):Se(e)?t?d=c?()=>c(e,2):e:d=()=>{if(p){os();try{p()}finally{as()}}const x=Rs;Rs=f;try{return c?c(e,3,[h]):e(h)}finally{Rs=x}}:d=zt,t&&o){const x=d,R=o===!0?1/0:o;d=()=>es(x(),R)}const $=fd(),C=()=>{f.stop(),$&&$.active&&$r($.effects,f)};if(a&&t){const x=t;t=(...R)=>{x(...R),C()}}let _=y?new Array(e.length).fill(Co):Co;const w=x=>{if(!(!(f.flags&1)||!f.dirty&&!x))if(t){const R=f.run();if(o||g||(y?R.some((L,B)=>gs(L,_[B])):gs(R,_))){p&&p();const L=Rs;Rs=f;try{const B=[R,_===Co?void 0:y&&_[0]===Co?[]:_,h];_=R,c?c(t,3,B):t(...B)}finally{Rs=L}}}else f.run()};return i&&i(w),f=new Li(d),f.scheduler=r?()=>r(w,!1):w,h=x=>Bd(x,!1,f),p=f.onStop=()=>{const x=Mo.get(f);if(x){if(c)c(x,4);else for(const R of x)R();Mo.delete(f)}},t?n?w(!0):_=f.run():r?r(w.bind(null,!0),!0):f.run(),C.pause=f.pause.bind(f),C.resume=f.resume.bind(f),C.stop=C,C}function es(e,t=1/0,s){if(t<=0||!Re(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ut(e))es(e.value,t,s);else if(he(e))for(let n=0;n<e.length;n++)es(e[n],t,s);else if(_n(e)||on(e))e.forEach(n=>{es(n,t,s)});else if(Oi(e)){for(const n in e)es(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&es(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function po(e,t,s,n){try{return n?e(...n):e()}catch(o){ca(o,t,s)}}function Jt(e,t,s,n){if(Se(e)){const o=po(e,t,s,n);return o&&Ni(o)&&o.catch(a=>{ca(a,t,s)}),o}if(he(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Jt(e[a],t,s,n));return o}}function ca(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Ie;if(t){let i=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,c,u)===!1)return}i=i.parent}if(a){os(),po(a,null,10,[e,c,u]),as();return}}Ud(e,s,o,n,r)}function Ud(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const gt=[];let Wt=-1;const an=[];let ps=null,zs=0;const Zi=Promise.resolve();let Uo=null;function Zn(e){const t=Uo||Zi;return e?t.then(this?e.bind(this):e):t}function Fd(e){let t=Wt+1,s=gt.length;for(;t<s;){const n=t+s>>>1,o=gt[n],a=eo(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Dr(e){if(!(e.flags&1)){const t=eo(e),s=gt[gt.length-1];!s||!(e.flags&2)&&t>=eo(s)?gt.push(e):gt.splice(Fd(t),0,e),e.flags|=1,ec()}}function ec(){Uo||(Uo=Zi.then(sc))}function jd(e){he(e)?an.push(...e):ps&&e.id===-1?ps.splice(zs+1,0,e):e.flags&1||(an.push(e),e.flags|=1),ec()}function hl(e,t,s=Wt+1){for(;s<gt.length;s++){const n=gt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;gt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function tc(e){if(an.length){const t=[...new Set(an)].sort((s,n)=>eo(s)-eo(n));if(an.length=0,ps){ps.push(...t);return}for(ps=t,zs=0;zs<ps.length;zs++){const s=ps[zs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ps=null,zs=0}}const eo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function sc(e){try{for(Wt=0;Wt<gt.length;Wt++){const t=gt[Wt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),po(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Wt<gt.length;Wt++){const t=gt[Wt];t&&(t.flags&=-2)}Wt=-1,gt.length=0,tc(),Uo=null,(gt.length||an.length)&&sc()}}let ot=null,nc=null;function Fo(e){const t=ot;return ot=e,nc=e&&e.type.__scopeId||null,t}function Hd(e,t=ot,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Wo(-1);const a=Fo(t);let r;try{r=e(...o)}finally{Fo(a),n._d&&Wo(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Fe(e,t){if(ot===null)return e;const s=pa(ot),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,r,i,c=Ie]=t[o];a&&(Se(a)&&(a={mounted:a,updated:a}),a.deep&&es(r),n.push({dir:a,instance:s,value:r,oldValue:void 0,arg:i,modifiers:c}))}return e}function $s(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let r=0;r<o.length;r++){const i=o[r];a&&(i.oldValue=a[r].value);let c=i.dir[n];c&&(os(),Jt(c,s,8,[e.el,i,e,t]),as())}}function Oo(e,t){if(ct){let s=ct.provides;const n=ct.parent&&ct.parent.provides;n===s&&(s=ct.provides=Object.create(n)),s[e]=t}}function Bt(e,t,s=!1){const n=Vf();if(n||ln){let o=ln?ln._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&Se(t)?t.call(n&&n.proxy):t}}const Wd=Symbol.for("v-scx"),Kd=()=>Bt(Wd);function yt(e,t,s){return oc(e,t,s)}function oc(e,t,s=Ie){const{immediate:n,deep:o,flush:a,once:r}=s,i=at({},s),c=t&&n||!t&&a!=="post";let u;if(oo){if(a==="sync"){const h=Kd();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=zt,h.resume=zt,h.pause=zt,h}}const f=ct;i.call=(h,g,y)=>Jt(h,f,g,y);let d=!1;a==="post"?i.scheduler=h=>{mt(h,f&&f.suspense)}:a!=="sync"&&(d=!0,i.scheduler=(h,g)=>{g?h():Dr(h)}),i.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const p=Md(e,t,i);return oo&&(u?u.push(p):c&&p()),p}function Vd(e,t,s){const n=this.proxy,o=Je(e)?e.includes(".")?ac(n,e):()=>n[e]:e.bind(n,n);let a;Se(t)?a=t:(a=t.handler,s=t);const r=vo(this),i=oc(o,a.bind(n),s);return r(),i}function ac(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const rc=Symbol("_vte"),Gd=e=>e.__isTeleport,Fn=e=>e&&(e.disabled||e.disabled===""),gl=e=>e&&(e.defer||e.defer===""),yl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,bl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ja=(e,t)=>{const s=e&&e.to;return Je(s)?t?t(s):null:s},lc={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,r,i,c,u){const{mc:f,pc:d,pbc:p,o:{insert:h,querySelector:g,createText:y,createComment:$}}=u,C=Fn(t.props);let{shapeFlag:_,children:w,dynamicChildren:x}=t;if(e==null){const R=t.el=y(""),L=t.anchor=y("");h(R,s,n),h(L,s,n);const B=(Y,fe)=>{_&16&&f(w,Y,fe,o,a,r,i,c)},Q=()=>{const Y=t.target=Ja(t.props,g),fe=ic(Y,t,y,h);Y&&(r!=="svg"&&yl(Y)?r="svg":r!=="mathml"&&bl(Y)&&(r="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(Y),C||(B(Y,fe),Io(t,!1)))};C&&(B(s,L),Io(t,!0)),gl(t.props)?(t.el.__isMounted=!1,mt(()=>{Q(),delete t.el.__isMounted},a)):Q()}else{if(gl(t.props)&&e.el.__isMounted===!1){mt(()=>{lc.process(e,t,s,n,o,a,r,i,c,u)},a);return}t.el=e.el,t.targetStart=e.targetStart;const R=t.anchor=e.anchor,L=t.target=e.target,B=t.targetAnchor=e.targetAnchor,Q=Fn(e.props),Y=Q?s:L,fe=Q?R:B;if(r==="svg"||yl(L)?r="svg":(r==="mathml"||bl(L))&&(r="mathml"),x?(p(e.dynamicChildren,x,Y,o,a,r,i),Fr(e,t,!0)):c||d(e,t,Y,fe,o,a,r,i,!1),C)Q?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):$o(t,s,R,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ve=t.target=Ja(t.props,g);ve&&$o(t,ve,null,u,0)}else Q&&$o(t,L,B,u,1);Io(t,C)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:r,children:i,anchor:c,targetStart:u,targetAnchor:f,target:d,props:p}=e;if(d&&(o(u),o(f)),a&&o(c),r&16){const h=a||!Fn(p);for(let g=0;g<i.length;g++){const y=i[g];n(y,t,s,h,!!y.dynamicChildren)}}},move:$o,hydrate:zd};function $o(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:r,anchor:i,shapeFlag:c,children:u,props:f}=e,d=a===2;if(d&&n(r,t,s),(!d||Fn(f))&&c&16)for(let p=0;p<u.length;p++)o(u[p],t,s,2);d&&n(i,t,s)}function zd(e,t,s,n,o,a,{o:{nextSibling:r,parentNode:i,querySelector:c,insert:u,createText:f}},d){function p(y,$,C,_){$.anchor=d(r(y),$,i(y),s,n,o,a),$.targetStart=C,$.targetAnchor=_}const h=t.target=Ja(t.props,c),g=Fn(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)p(e,t,y,y&&r(y));else{t.anchor=r(e);let $=y;for(;$;){if($&&$.nodeType===8){if($.data==="teleport start anchor")t.targetStart=$;else if($.data==="teleport anchor"){t.targetAnchor=$,h._lpa=t.targetAnchor&&r(t.targetAnchor);break}}$=r($)}t.targetAnchor||ic(h,t,f,u),d(y&&r(y),t,h,s,n,o,a)}Io(t,g)}else g&&t.shapeFlag&16&&p(e,t,e,r(e));return t.anchor&&r(t.anchor)}const Jd=lc;function Io(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function ic(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[rc]=a,e&&(n(o,e),n(a,e)),a}const Yd=Symbol("_leaveCb");function Pr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Pr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cc(e,t){return Se(e)?at({name:e.name},t,{setup:e}):e}function uc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const jo=new WeakMap;function jn(e,t,s,n,o=!1){if(he(e)){e.forEach((g,y)=>jn(g,t&&(he(t)?t[y]:t),s,n,o));return}if(rn(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&jn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?pa(n.component):n.el,r=o?null:a,{i,r:c}=e,u=t&&t.r,f=i.refs===Ie?i.refs={}:i.refs,d=i.setupState,p=Ee(d),h=d===Ie?Ti:g=>Oe(p,g);if(u!=null&&u!==c){if(_l(t),Je(u))f[u]=null,h(u)&&(d[u]=null);else if(ut(u)){u.value=null;const g=t;g.k&&(f[g.k]=null)}}if(Se(c))po(c,i,12,[r,f]);else{const g=Je(c),y=ut(c);if(g||y){const $=()=>{if(e.f){const C=g?h(c)?d[c]:f[c]:c.value;if(o)he(C)&&$r(C,a);else if(he(C))C.includes(a)||C.push(a);else if(g)f[c]=[a],h(c)&&(d[c]=f[c]);else{const _=[a];c.value=_,e.k&&(f[e.k]=_)}}else g?(f[c]=r,h(c)&&(d[c]=r)):y&&(c.value=r,e.k&&(f[e.k]=r))};if(r){const C=()=>{$(),jo.delete(e)};C.id=-1,jo.set(e,C),mt(C,s)}else _l(e),$()}}}function _l(e){const t=jo.get(e);t&&(t.flags|=8,jo.delete(e))}la().requestIdleCallback;la().cancelIdleCallback;const rn=e=>!!e.type.__asyncLoader,dc=e=>e.type.__isKeepAlive;function qd(e,t){fc(e,"a",t)}function Xd(e,t){fc(e,"da",t)}function fc(e,t,s=ct){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ua(t,n,s),s){let o=s.parent;for(;o&&o.parent;)dc(o.parent.vnode)&&Qd(n,t,s,o),o=o.parent}}function Qd(e,t,s,n){const o=ua(t,e,n,!0);Br(()=>{$r(n[t],o)},s)}function ua(e,t,s=ct,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...r)=>{os();const i=vo(s),c=Jt(t,s,e,r);return i(),as(),c});return n?o.unshift(a):o.push(a),a}}const is=e=>(t,s=ct)=>{(!oo||e==="sp")&&ua(e,(...n)=>t(...n),s)},Zd=is("bm"),bt=is("m"),ef=is("bu"),tf=is("u"),Lr=is("bum"),Br=is("um"),sf=is("sp"),nf=is("rtg"),of=is("rtc");function af(e,t=ct){ua("ec",e,t)}const rf="components";function lf(e,t){return uf(rf,e,!0,t)||e}const cf=Symbol.for("v-ndc");function uf(e,t,s=!0,n=!1){const o=ot||ct;if(o){const a=o.type;{const i=qf(a,!1);if(i&&(i===t||i===It(t)||i===aa(It(t))))return a}const r=wl(o[e]||a[e],t)||wl(o.appContext[e],t);return!r&&n?a:r}}function wl(e,t){return e&&(e[t]||e[It(t)]||e[aa(It(t))])}function ae(e,t,s,n){let o;const a=s,r=he(e);if(r||Je(e)){const i=r&&Bs(e);let c=!1,u=!1;i&&(c=!Et(e),u=rs(e),e=ia(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(c?u?un(Ut(e[f])):Ut(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(Re(e))if(e[Symbol.iterator])o=Array.from(e,(i,c)=>t(i,c,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let c=0,u=i.length;c<u;c++){const f=i[c];o[c]=t(e[f],f,c,a)}}else o=[];return o}function df(e,t,s={},n,o){if(ot.ce||ot.parent&&rn(ot.parent)&&ot.parent.ce){const u=Object.keys(s).length>0;return s.name=t,v(),Ue(ee,null,[ye("slot",s,n)],u?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),v();const r=a&&pc(a(s)),i=s.key||r&&r.key,c=Ue(ee,{key:(i&&!Mt(i)?i:`_${t}`)+(!r&&n?"_fb":"")},r||[],r&&e._===1?64:-2);return a&&a._c&&(a._d=!0),c}function pc(e){return e.some(t=>so(t)?!(t.type===ls||t.type===ee&&!pc(t.children)):!0)?e:null}const Ya=e=>e?Oc(e)?pa(e):Ya(e.parent):null,Hn=at(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ya(e.parent),$root:e=>Ya(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>mc(e),$forceUpdate:e=>e.f||(e.f=()=>{Dr(e.update)}),$nextTick:e=>e.n||(e.n=Zn.bind(e.proxy)),$watch:e=>Vd.bind(e)}),ka=(e,t)=>e!==Ie&&!e.__isScriptSetup&&Oe(e,t),ff={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:r,type:i,appContext:c}=e;if(t[0]!=="$"){const p=r[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ka(n,t))return r[t]=1,n[t];if(o!==Ie&&Oe(o,t))return r[t]=2,o[t];if(Oe(a,t))return r[t]=3,a[t];if(s!==Ie&&Oe(s,t))return r[t]=4,s[t];qa&&(r[t]=0)}}const u=Hn[t];let f,d;if(u)return t==="$attrs"&&it(e.attrs,"get",""),u(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==Ie&&Oe(s,t))return r[t]=4,s[t];if(d=c.config.globalProperties,Oe(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ka(o,t)?(o[t]=s,!0):n!==Ie&&Oe(n,t)?(n[t]=s,!0):Oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:r}},i){let c;return!!(s[i]||e!==Ie&&i[0]!=="$"&&Oe(e,i)||ka(t,i)||Oe(a,i)||Oe(n,i)||Oe(Hn,i)||Oe(o.config.globalProperties,i)||(c=r.__cssModules)&&c[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Oe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Sl(e){return he(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let qa=!0;function pf(e){const t=mc(e),s=e.proxy,n=e.ctx;qa=!1,t.beforeCreate&&Cl(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:r,watch:i,provide:c,inject:u,created:f,beforeMount:d,mounted:p,beforeUpdate:h,updated:g,activated:y,deactivated:$,beforeDestroy:C,beforeUnmount:_,destroyed:w,unmounted:x,render:R,renderTracked:L,renderTriggered:B,errorCaptured:Q,serverPrefetch:Y,expose:fe,inheritAttrs:ve,components:ue,directives:ge,filters:$e}=t;if(u&&vf(u,n,null),r)for(const V in r){const q=r[V];Se(q)&&(n[V]=q.bind(s))}if(o){const V=o.call(s,s);Re(V)&&(e.data=Lt(V))}if(qa=!0,a)for(const V in a){const q=a[V],U=Se(q)?q.bind(s,s):Se(q.get)?q.get.bind(s,s):zt,H=!Se(q)&&Se(q.set)?q.set.bind(s):zt,A=N({get:U,set:H});Object.defineProperty(n,V,{enumerable:!0,configurable:!0,get:()=>A.value,set:K=>A.value=K})}if(i)for(const V in i)vc(i[V],n,s,V);if(c){const V=Se(c)?c.call(s):c;Reflect.ownKeys(V).forEach(q=>{Oo(q,V[q])})}f&&Cl(f,e,"c");function pe(V,q){he(q)?q.forEach(U=>V(U.bind(s))):q&&V(q.bind(s))}if(pe(Zd,d),pe(bt,p),pe(ef,h),pe(tf,g),pe(qd,y),pe(Xd,$),pe(af,Q),pe(of,L),pe(nf,B),pe(Lr,_),pe(Br,x),pe(sf,Y),he(fe))if(fe.length){const V=e.exposed||(e.exposed={});fe.forEach(q=>{Object.defineProperty(V,q,{get:()=>s[q],set:U=>s[q]=U,enumerable:!0})})}else e.exposed||(e.exposed={});R&&e.render===zt&&(e.render=R),ve!=null&&(e.inheritAttrs=ve),ue&&(e.components=ue),ge&&(e.directives=ge),Y&&uc(e)}function vf(e,t,s=zt){he(e)&&(e=Xa(e));for(const n in e){const o=e[n];let a;Re(o)?"default"in o?a=Bt(o.from||n,o.default,!0):a=Bt(o.from||n):a=Bt(o),ut(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:r=>a.value=r}):t[n]=a}}function Cl(e,t,s){Jt(he(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function vc(e,t,s,n){let o=n.includes(".")?ac(s,n):()=>s[n];if(Je(e)){const a=t[e];Se(a)&&yt(o,a)}else if(Se(e))yt(o,e.bind(s));else if(Re(e))if(he(e))e.forEach(a=>vc(a,t,s,n));else{const a=Se(e.handler)?e.handler.bind(s):t[e.handler];Se(a)&&yt(o,a,e)}}function mc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:r}}=e.appContext,i=a.get(t);let c;return i?c=i:!o.length&&!s&&!n?c=t:(c={},o.length&&o.forEach(u=>Ho(c,u,r,!0)),Ho(c,t,r)),Re(t)&&a.set(t,c),c}function Ho(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&Ho(e,a,s,!0),o&&o.forEach(r=>Ho(e,r,s,!0));for(const r in t)if(!(n&&r==="expose")){const i=mf[r]||s&&s[r];e[r]=i?i(e[r],t[r]):t[r]}return e}const mf={data:$l,props:kl,emits:kl,methods:Pn,computed:Pn,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:Pn,directives:Pn,watch:gf,provide:$l,inject:hf};function $l(e,t){return t?e?function(){return at(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function hf(e,t){return Pn(Xa(e),Xa(t))}function Xa(e){if(he(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function vt(e,t){return e?[...new Set([].concat(e,t))]:t}function Pn(e,t){return e?at(Object.create(null),e,t):t}function kl(e,t){return e?he(e)&&he(t)?[...new Set([...e,...t])]:at(Object.create(null),Sl(e),Sl(t??{})):t}function gf(e,t){if(!e)return t;if(!t)return e;const s=at(Object.create(null),e);for(const n in t)s[n]=vt(e[n],t[n]);return s}function hc(){return{app:null,config:{isNativeTag:Ti,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yf=0;function bf(e,t){return function(n,o=null){Se(n)||(n=at({},n)),o!=null&&!Re(o)&&(o=null);const a=hc(),r=new WeakSet,i=[];let c=!1;const u=a.app={_uid:yf++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Qf,get config(){return a.config},set config(f){},use(f,...d){return r.has(f)||(f&&Se(f.install)?(r.add(f),f.install(u,...d)):Se(f)&&(r.add(f),f(u,...d))),u},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),u},component(f,d){return d?(a.components[f]=d,u):a.components[f]},directive(f,d){return d?(a.directives[f]=d,u):a.directives[f]},mount(f,d,p){if(!c){const h=u._ceVNode||ye(n,o);return h.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),e(h,f,p),c=!0,u._container=f,f.__vue_app__=u,pa(h.component)}},onUnmount(f){i.push(f)},unmount(){c&&(Jt(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,d){return a.provides[f]=d,u},runWithContext(f){const d=ln;ln=u;try{return f()}finally{ln=d}}};return u}}let ln=null;const _f=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${It(t)}Modifiers`]||e[`${Cs(t)}Modifiers`];function wf(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let o=s;const a=t.startsWith("update:"),r=a&&_f(n,t.slice(7));r&&(r.trim&&(o=s.map(f=>Je(f)?f.trim():f)),r.number&&(o=s.map(ra)));let i,c=n[i=_a(t)]||n[i=_a(It(t))];!c&&a&&(c=n[i=_a(Cs(t))]),c&&Jt(c,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Jt(u,e,6,o)}}const Sf=new WeakMap;function gc(e,t,s=!1){const n=s?Sf:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let r={},i=!1;if(!Se(e)){const c=u=>{const f=gc(u,t,!0);f&&(i=!0,at(r,f))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!i?(Re(e)&&n.set(e,null),null):(he(a)?a.forEach(c=>r[c]=null):at(r,a),Re(e)&&n.set(e,r),r)}function da(e,t){return!e||!na(t)?!1:(t=t.slice(2).replace(/Once$/,""),Oe(e,t[0].toLowerCase()+t.slice(1))||Oe(e,Cs(t))||Oe(e,t))}function xl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:r,attrs:i,emit:c,render:u,renderCache:f,props:d,data:p,setupState:h,ctx:g,inheritAttrs:y}=e,$=Fo(e);let C,_;try{if(s.shapeFlag&4){const x=o||n,R=x;C=Kt(u.call(R,x,f,d,h,p,g)),_=i}else{const x=t;C=Kt(x.length>1?x(d,{attrs:i,slots:r,emit:c}):x(d,null)),_=t.props?i:Cf(i)}}catch(x){Wn.length=0,ca(x,e,1),C=ye(ls)}let w=C;if(_&&y!==!1){const x=Object.keys(_),{shapeFlag:R}=w;x.length&&R&7&&(a&&x.some(Cr)&&(_=$f(_,a)),w=dn(w,_,!1,!0))}return s.dirs&&(w=dn(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&Pr(w,s.transition),C=w,Fo($),C}const Cf=e=>{let t;for(const s in e)(s==="class"||s==="style"||na(s))&&((t||(t={}))[s]=e[s]);return t},$f=(e,t)=>{const s={};for(const n in e)(!Cr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function kf(e,t,s){const{props:n,children:o,component:a}=e,{props:r,children:i,patchFlag:c}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Al(n,r,u):!!r;if(c&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const p=f[d];if(r[p]!==n[p]&&!da(u,p))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===r?!1:n?r?Al(n,r,u):!0:!!r;return!1}function Al(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!da(s,a))return!0}return!1}function xf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const yc={},bc=()=>Object.create(yc),_c=e=>Object.getPrototypeOf(e)===yc;function Af(e,t,s,n=!1){const o={},a=bc();e.propsDefaults=Object.create(null),wc(e,t,o,a);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:qi(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Tf(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:r}}=e,i=Ee(o),[c]=e.propsOptions;let u=!1;if((n||r>0)&&!(r&16)){if(r&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let p=f[d];if(da(e.emitsOptions,p))continue;const h=t[p];if(c)if(Oe(a,p))h!==a[p]&&(a[p]=h,u=!0);else{const g=It(p);o[g]=Qa(c,i,g,h,e,!1)}else h!==a[p]&&(a[p]=h,u=!0)}}}else{wc(e,t,o,a)&&(u=!0);let f;for(const d in i)(!t||!Oe(t,d)&&((f=Cs(d))===d||!Oe(t,f)))&&(c?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=Qa(c,i,d,void 0,e,!0)):delete o[d]);if(a!==i)for(const d in a)(!t||!Oe(t,d))&&(delete a[d],u=!0)}u&&Zt(e.attrs,"set","")}function wc(e,t,s,n){const[o,a]=e.propsOptions;let r=!1,i;if(t)for(let c in t){if(Bn(c))continue;const u=t[c];let f;o&&Oe(o,f=It(c))?!a||!a.includes(f)?s[f]=u:(i||(i={}))[f]=u:da(e.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,r=!0)}if(a){const c=Ee(s),u=i||Ie;for(let f=0;f<a.length;f++){const d=a[f];s[d]=Qa(o,c,d,u[d],e,!Oe(u,d))}}return r}function Qa(e,t,s,n,o,a){const r=e[s];if(r!=null){const i=Oe(r,"default");if(i&&n===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&Se(c)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const f=vo(o);n=u[s]=c.call(null,t),f()}}else n=c;o.ce&&o.ce._setProp(s,n)}r[0]&&(a&&!i?n=!1:r[1]&&(n===""||n===Cs(s))&&(n=!0))}return n}const Nf=new WeakMap;function Sc(e,t,s=!1){const n=s?Nf:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,r={},i=[];let c=!1;if(!Se(e)){const f=d=>{c=!0;const[p,h]=Sc(d,t,!0);at(r,p),h&&i.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!c)return Re(e)&&n.set(e,nn),nn;if(he(a))for(let f=0;f<a.length;f++){const d=It(a[f]);Tl(d)&&(r[d]=Ie)}else if(a)for(const f in a){const d=It(f);if(Tl(d)){const p=a[f],h=r[d]=he(p)||Se(p)?{type:p}:at({},p),g=h.type;let y=!1,$=!0;if(he(g))for(let C=0;C<g.length;++C){const _=g[C],w=Se(_)&&_.name;if(w==="Boolean"){y=!0;break}else w==="String"&&($=!1)}else y=Se(g)&&g.name==="Boolean";h[0]=y,h[1]=$,(y||Oe(h,"default"))&&i.push(d)}}const u=[r,i];return Re(e)&&n.set(e,u),u}function Tl(e){return e[0]!=="$"&&!Bn(e)}const Mr=e=>e==="_"||e==="_ctx"||e==="$stable",Ur=e=>he(e)?e.map(Kt):[Kt(e)],Ef=(e,t,s)=>{if(t._n)return t;const n=Hd((...o)=>Ur(t(...o)),s);return n._c=!1,n},Cc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Mr(o))continue;const a=e[o];if(Se(a))t[o]=Ef(o,a,n);else if(a!=null){const r=Ur(a);t[o]=()=>r}}},$c=(e,t)=>{const s=Ur(t);e.slots.default=()=>s},kc=(e,t,s)=>{for(const n in t)(s||!Mr(n))&&(e[n]=t[n])},Of=(e,t,s)=>{const n=e.slots=bc();if(e.vnode.shapeFlag&32){const o=t._;o?(kc(n,t,s),s&&Ii(n,"_",o,!0)):Cc(t,n)}else t&&$c(e,t)},If=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,r=Ie;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:kc(o,t,s):(a=!t.$stable,Cc(t,o)),r=t}else t&&($c(e,t),r={default:1});if(a)for(const i in o)!Mr(i)&&r[i]==null&&delete o[i]},mt=Bf;function Rf(e){return Df(e)}function Df(e,t){const s=la();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:r,createText:i,createComment:c,setText:u,setElementText:f,parentNode:d,nextSibling:p,setScopeId:h=zt,insertStaticContent:g}=e,y=(S,k,P,G=null,X=null,J=null,se=void 0,te=null,T=!!k.dynamicChildren)=>{if(S===k)return;S&&!xn(S,k)&&(G=z(S),K(S,X,J,!0),S=null),k.patchFlag===-2&&(T=!1,k.dynamicChildren=null);const{type:O,ref:F,shapeFlag:W}=k;switch(O){case fa:$(S,k,P,G);break;case ls:C(S,k,P,G);break;case Ro:S==null&&_(k,P,G,se);break;case ee:ue(S,k,P,G,X,J,se,te,T);break;default:W&1?R(S,k,P,G,X,J,se,te,T):W&6?ge(S,k,P,G,X,J,se,te,T):(W&64||W&128)&&O.process(S,k,P,G,X,J,se,te,T,de)}F!=null&&X?jn(F,S&&S.ref,J,k||S,!k):F==null&&S&&S.ref!=null&&jn(S.ref,null,J,S,!0)},$=(S,k,P,G)=>{if(S==null)n(k.el=i(k.children),P,G);else{const X=k.el=S.el;k.children!==S.children&&u(X,k.children)}},C=(S,k,P,G)=>{S==null?n(k.el=c(k.children||""),P,G):k.el=S.el},_=(S,k,P,G)=>{[S.el,S.anchor]=g(S.children,k,P,G,S.el,S.anchor)},w=({el:S,anchor:k},P,G)=>{let X;for(;S&&S!==k;)X=p(S),n(S,P,G),S=X;n(k,P,G)},x=({el:S,anchor:k})=>{let P;for(;S&&S!==k;)P=p(S),o(S),S=P;o(k)},R=(S,k,P,G,X,J,se,te,T)=>{if(k.type==="svg"?se="svg":k.type==="math"&&(se="mathml"),S==null)L(k,P,G,X,J,se,te,T);else{const O=S.el&&S.el._isVueCE?S.el:null;try{O&&O._beginPatch(),Y(S,k,X,J,se,te,T)}finally{O&&O._endPatch()}}},L=(S,k,P,G,X,J,se,te)=>{let T,O;const{props:F,shapeFlag:W,transition:I,dirs:D}=S;if(T=S.el=r(S.type,J,F&&F.is,F),W&8?f(T,S.children):W&16&&Q(S.children,T,null,G,X,xa(S,J),se,te),D&&$s(S,null,G,"created"),B(T,S,S.scopeId,se,G),F){for(const oe in F)oe!=="value"&&!Bn(oe)&&a(T,oe,null,F[oe],J,G);"value"in F&&a(T,"value",null,F.value,J),(O=F.onVnodeBeforeMount)&&jt(O,G,S)}D&&$s(S,null,G,"beforeMount");const Z=Pf(X,I);Z&&I.beforeEnter(T),n(T,k,P),((O=F&&F.onVnodeMounted)||Z||D)&&mt(()=>{O&&jt(O,G,S),Z&&I.enter(T),D&&$s(S,null,G,"mounted")},X)},B=(S,k,P,G,X)=>{if(P&&h(S,P),G)for(let J=0;J<G.length;J++)h(S,G[J]);if(X){let J=X.subTree;if(k===J||Tc(J.type)&&(J.ssContent===k||J.ssFallback===k)){const se=X.vnode;B(S,se,se.scopeId,se.slotScopeIds,X.parent)}}},Q=(S,k,P,G,X,J,se,te,T=0)=>{for(let O=T;O<S.length;O++){const F=S[O]=te?vs(S[O]):Kt(S[O]);y(null,F,k,P,G,X,J,se,te)}},Y=(S,k,P,G,X,J,se)=>{const te=k.el=S.el;let{patchFlag:T,dynamicChildren:O,dirs:F}=k;T|=S.patchFlag&16;const W=S.props||Ie,I=k.props||Ie;let D;if(P&&ks(P,!1),(D=I.onVnodeBeforeUpdate)&&jt(D,P,k,S),F&&$s(k,S,P,"beforeUpdate"),P&&ks(P,!0),(W.innerHTML&&I.innerHTML==null||W.textContent&&I.textContent==null)&&f(te,""),O?fe(S.dynamicChildren,O,te,P,G,xa(k,X),J):se||q(S,k,te,null,P,G,xa(k,X),J,!1),T>0){if(T&16)ve(te,W,I,P,X);else if(T&2&&W.class!==I.class&&a(te,"class",null,I.class,X),T&4&&a(te,"style",W.style,I.style,X),T&8){const Z=k.dynamicProps;for(let oe=0;oe<Z.length;oe++){const le=Z[oe],Ae=W[le],be=I[le];(be!==Ae||le==="value")&&a(te,le,Ae,be,X,P)}}T&1&&S.children!==k.children&&f(te,k.children)}else!se&&O==null&&ve(te,W,I,P,X);((D=I.onVnodeUpdated)||F)&&mt(()=>{D&&jt(D,P,k,S),F&&$s(k,S,P,"updated")},G)},fe=(S,k,P,G,X,J,se)=>{for(let te=0;te<k.length;te++){const T=S[te],O=k[te],F=T.el&&(T.type===ee||!xn(T,O)||T.shapeFlag&198)?d(T.el):P;y(T,O,F,null,G,X,J,se,!0)}},ve=(S,k,P,G,X)=>{if(k!==P){if(k!==Ie)for(const J in k)!Bn(J)&&!(J in P)&&a(S,J,k[J],null,X,G);for(const J in P){if(Bn(J))continue;const se=P[J],te=k[J];se!==te&&J!=="value"&&a(S,J,te,se,X,G)}"value"in P&&a(S,"value",k.value,P.value,X)}},ue=(S,k,P,G,X,J,se,te,T)=>{const O=k.el=S?S.el:i(""),F=k.anchor=S?S.anchor:i("");let{patchFlag:W,dynamicChildren:I,slotScopeIds:D}=k;D&&(te=te?te.concat(D):D),S==null?(n(O,P,G),n(F,P,G),Q(k.children||[],P,F,X,J,se,te,T)):W>0&&W&64&&I&&S.dynamicChildren&&S.dynamicChildren.length===I.length?(fe(S.dynamicChildren,I,P,X,J,se,te),(k.key!=null||X&&k===X.subTree)&&Fr(S,k,!0)):q(S,k,P,F,X,J,se,te,T)},ge=(S,k,P,G,X,J,se,te,T)=>{k.slotScopeIds=te,S==null?k.shapeFlag&512?X.ctx.activate(k,P,G,se,T):$e(k,P,G,X,J,se,T):me(S,k,T)},$e=(S,k,P,G,X,J,se)=>{const te=S.component=Kf(S,G,X);if(dc(S)&&(te.ctx.renderer=de),Gf(te,!1,se),te.asyncDep){if(X&&X.registerDep(te,pe,se),!S.el){const T=te.subTree=ye(ls);C(null,T,k,P),S.placeholder=T.el}}else pe(te,S,k,P,X,J,se)},me=(S,k,P)=>{const G=k.component=S.component;if(kf(S,k,P))if(G.asyncDep&&!G.asyncResolved){V(G,k,P);return}else G.next=k,G.update();else k.el=S.el,G.vnode=k},pe=(S,k,P,G,X,J,se)=>{const te=()=>{if(S.isMounted){let{next:W,bu:I,u:D,parent:Z,vnode:oe}=S;{const ze=xc(S);if(ze){W&&(W.el=oe.el,V(S,W,se)),ze.asyncDep.then(()=>{S.isUnmounted||te()});return}}let le=W,Ae;ks(S,!1),W?(W.el=oe.el,V(S,W,se)):W=oe,I&&Eo(I),(Ae=W.props&&W.props.onVnodeBeforeUpdate)&&jt(Ae,Z,W,oe),ks(S,!0);const be=xl(S),_e=S.subTree;S.subTree=be,y(_e,be,d(_e.el),z(_e),S,X,J),W.el=be.el,le===null&&xf(S,be.el),D&&mt(D,X),(Ae=W.props&&W.props.onVnodeUpdated)&&mt(()=>jt(Ae,Z,W,oe),X)}else{let W;const{el:I,props:D}=k,{bm:Z,m:oe,parent:le,root:Ae,type:be}=S,_e=rn(k);ks(S,!1),Z&&Eo(Z),!_e&&(W=D&&D.onVnodeBeforeMount)&&jt(W,le,k),ks(S,!0);{Ae.ce&&Ae.ce._def.shadowRoot!==!1&&Ae.ce._injectChildStyle(be);const ze=S.subTree=xl(S);y(null,ze,P,G,S,X,J),k.el=ze.el}if(oe&&mt(oe,X),!_e&&(W=D&&D.onVnodeMounted)){const ze=k;mt(()=>jt(W,le,ze),X)}(k.shapeFlag&256||le&&rn(le.vnode)&&le.vnode.shapeFlag&256)&&S.a&&mt(S.a,X),S.isMounted=!0,k=P=G=null}};S.scope.on();const T=S.effect=new Li(te);S.scope.off();const O=S.update=T.run.bind(T),F=S.job=T.runIfDirty.bind(T);F.i=S,F.id=S.uid,T.scheduler=()=>Dr(F),ks(S,!0),O()},V=(S,k,P)=>{k.component=S;const G=S.vnode.props;S.vnode=k,S.next=null,Tf(S,k.props,G,P),If(S,k.children,P),os(),hl(S),as()},q=(S,k,P,G,X,J,se,te,T=!1)=>{const O=S&&S.children,F=S?S.shapeFlag:0,W=k.children,{patchFlag:I,shapeFlag:D}=k;if(I>0){if(I&128){H(O,W,P,G,X,J,se,te,T);return}else if(I&256){U(O,W,P,G,X,J,se,te,T);return}}D&8?(F&16&&je(O,X,J),W!==O&&f(P,W)):F&16?D&16?H(O,W,P,G,X,J,se,te,T):je(O,X,J,!0):(F&8&&f(P,""),D&16&&Q(W,P,G,X,J,se,te,T))},U=(S,k,P,G,X,J,se,te,T)=>{S=S||nn,k=k||nn;const O=S.length,F=k.length,W=Math.min(O,F);let I;for(I=0;I<W;I++){const D=k[I]=T?vs(k[I]):Kt(k[I]);y(S[I],D,P,null,X,J,se,te,T)}O>F?je(S,X,J,!0,!1,W):Q(k,P,G,X,J,se,te,T,W)},H=(S,k,P,G,X,J,se,te,T)=>{let O=0;const F=k.length;let W=S.length-1,I=F-1;for(;O<=W&&O<=I;){const D=S[O],Z=k[O]=T?vs(k[O]):Kt(k[O]);if(xn(D,Z))y(D,Z,P,null,X,J,se,te,T);else break;O++}for(;O<=W&&O<=I;){const D=S[W],Z=k[I]=T?vs(k[I]):Kt(k[I]);if(xn(D,Z))y(D,Z,P,null,X,J,se,te,T);else break;W--,I--}if(O>W){if(O<=I){const D=I+1,Z=D<F?k[D].el:G;for(;O<=I;)y(null,k[O]=T?vs(k[O]):Kt(k[O]),P,Z,X,J,se,te,T),O++}}else if(O>I)for(;O<=W;)K(S[O],X,J,!0),O++;else{const D=O,Z=O,oe=new Map;for(O=Z;O<=I;O++){const Ye=k[O]=T?vs(k[O]):Kt(k[O]);Ye.key!=null&&oe.set(Ye.key,O)}let le,Ae=0;const be=I-Z+1;let _e=!1,ze=0;const dt=new Array(be);for(O=0;O<be;O++)dt[O]=0;for(O=D;O<=W;O++){const Ye=S[O];if(Ae>=be){K(Ye,X,J,!0);continue}let et;if(Ye.key!=null)et=oe.get(Ye.key);else for(le=Z;le<=I;le++)if(dt[le-Z]===0&&xn(Ye,k[le])){et=le;break}et===void 0?K(Ye,X,J,!0):(dt[et-Z]=O+1,et>=ze?ze=et:_e=!0,y(Ye,k[et],P,null,X,J,se,te,T),Ae++)}const ft=_e?Lf(dt):nn;for(le=ft.length-1,O=be-1;O>=0;O--){const Ye=Z+O,et=k[Ye],Be=k[Ye+1],Xe=Ye+1<F?Be.el||Ac(Be):G;dt[O]===0?y(null,et,P,Xe,X,J,se,te,T):_e&&(le<0||O!==ft[le]?A(et,P,Xe,2):le--)}}},A=(S,k,P,G,X=null)=>{const{el:J,type:se,transition:te,children:T,shapeFlag:O}=S;if(O&6){A(S.component.subTree,k,P,G);return}if(O&128){S.suspense.move(k,P,G);return}if(O&64){se.move(S,k,P,de);return}if(se===ee){n(J,k,P);for(let W=0;W<T.length;W++)A(T[W],k,P,G);n(S.anchor,k,P);return}if(se===Ro){w(S,k,P);return}if(G!==2&&O&1&&te)if(G===0)te.beforeEnter(J),n(J,k,P),mt(()=>te.enter(J),X);else{const{leave:W,delayLeave:I,afterLeave:D}=te,Z=()=>{S.ctx.isUnmounted?o(J):n(J,k,P)},oe=()=>{J._isLeaving&&J[Yd](!0),W(J,()=>{Z(),D&&D()})};I?I(J,Z,oe):oe()}else n(J,k,P)},K=(S,k,P,G=!1,X=!1)=>{const{type:J,props:se,ref:te,children:T,dynamicChildren:O,shapeFlag:F,patchFlag:W,dirs:I,cacheIndex:D}=S;if(W===-2&&(X=!1),te!=null&&(os(),jn(te,null,P,S,!0),as()),D!=null&&(k.renderCache[D]=void 0),F&256){k.ctx.deactivate(S);return}const Z=F&1&&I,oe=!rn(S);let le;if(oe&&(le=se&&se.onVnodeBeforeUnmount)&&jt(le,k,S),F&6)xe(S.component,P,G);else{if(F&128){S.suspense.unmount(P,G);return}Z&&$s(S,null,k,"beforeUnmount"),F&64?S.type.remove(S,k,P,de,G):O&&!O.hasOnce&&(J!==ee||W>0&&W&64)?je(O,k,P,!1,!0):(J===ee&&W&384||!X&&F&16)&&je(T,k,P),G&&ce(S)}(oe&&(le=se&&se.onVnodeUnmounted)||Z)&&mt(()=>{le&&jt(le,k,S),Z&&$s(S,null,k,"unmounted")},P)},ce=S=>{const{type:k,el:P,anchor:G,transition:X}=S;if(k===ee){Te(P,G);return}if(k===Ro){x(S);return}const J=()=>{o(P),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(S.shapeFlag&1&&X&&!X.persisted){const{leave:se,delayLeave:te}=X,T=()=>se(P,J);te?te(S.el,J,T):T()}else J()},Te=(S,k)=>{let P;for(;S!==k;)P=p(S),o(S),S=P;o(k)},xe=(S,k,P)=>{const{bum:G,scope:X,job:J,subTree:se,um:te,m:T,a:O}=S;Nl(T),Nl(O),G&&Eo(G),X.stop(),J&&(J.flags|=8,K(se,S,k,P)),te&&mt(te,k),mt(()=>{S.isUnmounted=!0},k)},je=(S,k,P,G=!1,X=!1,J=0)=>{for(let se=J;se<S.length;se++)K(S[se],k,P,G,X)},z=S=>{if(S.shapeFlag&6)return z(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const k=p(S.anchor||S.el),P=k&&k[rc];return P?p(P):k};let re=!1;const ne=(S,k,P)=>{let G;S==null?k._vnode&&(K(k._vnode,null,null,!0),G=k._vnode.component):y(k._vnode||null,S,k,null,null,null,P),k._vnode=S,re||(re=!0,hl(G),tc(),re=!1)},de={p:y,um:K,m:A,r:ce,mt:$e,mc:Q,pc:q,pbc:fe,n:z,o:e};return{render:ne,hydrate:void 0,createApp:bf(ne)}}function xa({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ks({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Pf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fr(e,t,s=!1){const n=e.children,o=t.children;if(he(n)&&he(o))for(let a=0;a<n.length;a++){const r=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=vs(o[a]),i.el=r.el),!s&&i.patchFlag!==-2&&Fr(r,i)),i.type===fa&&(i.patchFlag!==-1?i.el=r.el:i.__elIndex=a+(e.type===ee?1:0)),i.type===ls&&!i.el&&(i.el=r.el)}}function Lf(e){const t=e.slice(),s=[0];let n,o,a,r,i;const c=e.length;for(n=0;n<c;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(a=0,r=s.length-1;a<r;)i=a+r>>1,e[s[i]]<u?a=i+1:r=i;u<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,r=s[a-1];a-- >0;)s[a]=r,r=t[r];return s}function xc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:xc(t)}function Nl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Ac(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Ac(t.subTree):null}const Tc=e=>e.__isSuspense;function Bf(e,t){t&&t.pendingBranch?he(e)?t.effects.push(...e):t.effects.push(e):jd(e)}const ee=Symbol.for("v-fgt"),fa=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),Ro=Symbol.for("v-stc"),Wn=[];let At=null;function v(e=!1){Wn.push(At=e?null:[])}function Mf(){Wn.pop(),At=Wn[Wn.length-1]||null}let to=1;function Wo(e,t=!1){to+=e,e<0&&At&&t&&(At.hasOnce=!0)}function Nc(e){return e.dynamicChildren=to>0?At||nn:null,Mf(),to>0&&At&&At.push(e),e}function m(e,t,s,n,o,a){return Nc(l(e,t,s,n,o,a,!0))}function Ue(e,t,s,n,o){return Nc(ye(e,t,s,n,o,!0))}function so(e){return e?e.__v_isVNode===!0:!1}function xn(e,t){return e.type===t.type&&e.key===t.key}const Ec=({key:e})=>e??null,Do=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Je(e)||ut(e)||Se(e)?{i:ot,r:e,k:t,f:!!s}:e:null);function l(e,t=null,s=null,n=0,o=null,a=e===ee?0:1,r=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ec(t),ref:t&&Do(t),scopeId:nc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ot};return i?(jr(c,s),a&128&&e.normalize(c)):s&&(c.shapeFlag|=Je(s)?8:16),to>0&&!r&&At&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&At.push(c),c}const ye=Uf;function Uf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===cf)&&(e=ls),so(e)){const i=dn(e,t,!0);return s&&jr(i,s),to>0&&!a&&At&&(i.shapeFlag&6?At[At.indexOf(e)]=i:At.push(i)),i.patchFlag=-2,i}if(Xf(e)&&(e=e.__vccOpts),t){t=Ff(t);let{class:i,style:c}=t;i&&!Je(i)&&(t.class=ie(i)),Re(c)&&(Rr(c)&&!he(c)&&(c=at({},c)),t.style=st(c))}const r=Je(e)?1:Tc(e)?128:Gd(e)?64:Re(e)?4:Se(e)?2:0;return l(e,t,s,n,o,r,a,!0)}function Ff(e){return e?Rr(e)||_c(e)?at({},e):e:null}function dn(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:r,children:i,transition:c}=e,u=t?jf(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ec(u),ref:t&&t.ref?s&&a?he(a)?a.concat(Do(t)):[a,Do(t)]:Do(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ee?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dn(e.ssContent),ssFallback:e.ssFallback&&dn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&Pr(f,c.clone(f)),f}function ke(e=" ",t=0){return ye(fa,null,e,t)}function no(e,t){const s=ye(Ro,null,e);return s.staticCount=t,s}function j(e="",t=!1){return t?(v(),Ue(ls,null,e)):ye(ls,null,e)}function Kt(e){return e==null||typeof e=="boolean"?ye(ls):he(e)?ye(ee,null,e.slice()):so(e)?vs(e):ye(fa,null,String(e))}function vs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dn(e)}function jr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(he(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),jr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!_c(t)?t._ctx=ot:o===3&&ot&&(ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:ot},s=32):(t=String(t),n&64?(s=16,t=[ke(t)]):s=8);e.children=t,e.shapeFlag|=s}function jf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(o==="style")t.style=st([t.style,n.style]);else if(na(o)){const a=t[o],r=n[o];r&&a!==r&&!(he(a)&&a.includes(r))&&(t[o]=a?[].concat(a,r):r)}else o!==""&&(t[o]=n[o])}return t}function jt(e,t,s,n=null){Jt(e,t,7,[s,n])}const Hf=hc();let Wf=0;function Kf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Hf,a={uid:Wf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new dd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sc(n,o),emitsOptions:gc(n,o),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=wf.bind(null,a),e.ce&&e.ce(a),a}let ct=null;const Vf=()=>ct||ot;let Ko,Za;{const e=la(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(r=>r(a)):o[0](a)}};Ko=t("__VUE_INSTANCE_SETTERS__",s=>ct=s),Za=t("__VUE_SSR_SETTERS__",s=>oo=s)}const vo=e=>{const t=ct;return Ko(e),e.scope.on(),()=>{e.scope.off(),Ko(t)}},El=()=>{ct&&ct.scope.off(),Ko(null)};function Oc(e){return e.vnode.shapeFlag&4}let oo=!1;function Gf(e,t=!1,s=!1){t&&Za(t);const{props:n,children:o}=e.vnode,a=Oc(e);Af(e,n,a,t),Of(e,o,s||t);const r=a?zf(e,t):void 0;return t&&Za(!1),r}function zf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ff);const{setup:n}=s;if(n){os();const o=e.setupContext=n.length>1?Yf(e):null,a=vo(e),r=po(n,e,0,[e.props,o]),i=Ni(r);if(as(),a(),(i||e.sp)&&!rn(e)&&uc(e),i){if(r.then(El,El),t)return r.then(c=>{Ol(e,c)}).catch(c=>{ca(c,e,0)});e.asyncDep=r}else Ol(e,r)}else Ic(e)}function Ol(e,t,s){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=Qi(t)),Ic(e)}function Ic(e,t,s){const n=e.type;e.render||(e.render=n.render||zt);{const o=vo(e);os();try{pf(e)}finally{as(),o()}}}const Jf={get(e,t){return it(e,"get",""),e[t]}};function Yf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Jf),slots:e.slots,emit:e.emit,expose:t}}function pa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Qi(Od(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Hn)return Hn[s](e)},has(t,s){return s in t||s in Hn}})):e.proxy}function qf(e,t=!0){return Se(e)?e.displayName||e.name:e.name||t&&e.__name}function Xf(e){return Se(e)&&"__vccOpts"in e}const N=(e,t)=>Ld(e,t,oo);function Rc(e,t,s){try{Wo(-1);const n=arguments.length;return n===2?Re(t)&&!he(t)?so(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&so(s)&&(s=[s]),ye(e,t,s))}finally{Wo(1)}}const Qf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let er;const Il=typeof window<"u"&&window.trustedTypes;if(Il)try{er=Il.createPolicy("vue",{createHTML:e=>e})}catch{}const Dc=er?e=>er.createHTML(e):e=>e,Zf="http://www.w3.org/2000/svg",ep="http://www.w3.org/1998/Math/MathML",Qt=typeof document<"u"?document:null,Rl=Qt&&Qt.createElement("template"),tp={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Qt.createElementNS(Zf,e):t==="mathml"?Qt.createElementNS(ep,e):s?Qt.createElement(e,{is:s}):Qt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Qt.createTextNode(e),createComment:e=>Qt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const r=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{Rl.innerHTML=Dc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Rl.content;if(n==="svg"||n==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},sp=Symbol("_vtc");function np(e,t,s){const n=e[sp];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Vo=Symbol("_vod"),Pc=Symbol("_vsh"),op={name:"show",beforeMount(e,{value:t},{transition:s}){e[Vo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):An(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),An(e,!0),n.enter(e)):n.leave(e,()=>{An(e,!1)}):An(e,t))},beforeUnmount(e,{value:t}){An(e,t)}};function An(e,t){e.style.display=t?e[Vo]:"none",e[Pc]=!t}const ap=Symbol(""),rp=/(?:^|;)\s*display\s*:/;function lp(e,t,s){const n=e.style,o=Je(s);let a=!1;if(s&&!o){if(t)if(Je(t))for(const r of t.split(";")){const i=r.slice(0,r.indexOf(":")).trim();s[i]==null&&Po(n,i,"")}else for(const r in t)s[r]==null&&Po(n,r,"");for(const r in s)r==="display"&&(a=!0),Po(n,r,s[r])}else if(o){if(t!==s){const r=n[ap];r&&(s+=";"+r),n.cssText=s,a=rp.test(s)}}else t&&e.removeAttribute("style");Vo in e&&(e[Vo]=a?n.display:"",e[Pc]&&(n.display="none"))}const Dl=/\s*!important$/;function Po(e,t,s){if(he(s))s.forEach(n=>Po(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=ip(e,t);Dl.test(s)?e.setProperty(Cs(n),s.replace(Dl,""),"important"):e[n]=s}}const Pl=["Webkit","Moz","ms"],Aa={};function ip(e,t){const s=Aa[t];if(s)return s;let n=It(t);if(n!=="filter"&&n in e)return Aa[t]=n;n=aa(n);for(let o=0;o<Pl.length;o++){const a=Pl[o]+n;if(a in e)return Aa[t]=a}return t}const Ll="http://www.w3.org/1999/xlink";function Bl(e,t,s,n,o,a=cd(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Ll,t.slice(6,t.length)):e.setAttributeNS(Ll,t,s):s==null||a&&!Ri(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Mt(s)?String(s):s)}function Ml(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Dc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(i!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let r=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Ri(s):s==null&&i==="string"?(s="",r=!0):i==="number"&&(s=0,r=!0)}try{e[t]=s}catch{}r&&e.removeAttribute(o||t)}function ts(e,t,s,n){e.addEventListener(t,s,n)}function cp(e,t,s,n){e.removeEventListener(t,s,n)}const Ul=Symbol("_vei");function up(e,t,s,n,o=null){const a=e[Ul]||(e[Ul]={}),r=a[t];if(n&&r)r.value=n;else{const[i,c]=dp(t);if(n){const u=a[t]=vp(n,o);ts(e,i,u,c)}else r&&(cp(e,i,r,c),a[t]=void 0)}}const Fl=/(?:Once|Passive|Capture)$/;function dp(e){let t;if(Fl.test(e)){t={};let n;for(;n=e.match(Fl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cs(e.slice(2)),t]}let Ta=0;const fp=Promise.resolve(),pp=()=>Ta||(fp.then(()=>Ta=0),Ta=Date.now());function vp(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Jt(mp(n,s.value),t,5,[n])};return s.value=e,s.attached=pp(),s}function mp(e,t){if(he(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const jl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hp=(e,t,s,n,o,a)=>{const r=o==="svg";t==="class"?np(e,n,r):t==="style"?lp(e,s,n):na(t)?Cr(t)||up(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gp(e,t,n,r))?(Ml(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Bl(e,t,n,r,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Je(n))?Ml(e,It(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Bl(e,t,n,r))};function gp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&jl(t)&&Se(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return jl(t)&&Je(s)?!1:t in e}const ws=e=>{const t=e.props["onUpdate:modelValue"]||!1;return he(t)?s=>Eo(t,s):t};function yp(e){e.target.composing=!0}function Hl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function Wl(e,t,s){return t&&(e=e.trim()),s&&(e=ra(e)),e}const St={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ot]=ws(o);const a=n||o.props&&o.props.type==="number";ts(e,t?"change":"input",r=>{r.target.composing||e[Ot](Wl(e.value,s,a))}),(s||a)&&ts(e,"change",()=>{e.value=Wl(e.value,s,a)}),t||(ts(e,"compositionstart",yp),ts(e,"compositionend",Hl),ts(e,"change",Hl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},r){if(e[Ot]=ws(r),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?ra(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===c)||(e.value=c))}},Hr={deep:!0,created(e,t,s){e[Ot]=ws(s),ts(e,"change",()=>{const n=e._modelValue,o=fn(e),a=e.checked,r=e[Ot];if(he(n)){const i=xr(n,o),c=i!==-1;if(a&&!c)r(n.concat(o));else if(!a&&c){const u=[...n];u.splice(i,1),r(u)}}else if(_n(n)){const i=new Set(n);a?i.add(o):i.delete(o),r(i)}else r(Lc(e,a))})},mounted:Kl,beforeUpdate(e,t,s){e[Ot]=ws(s),Kl(e,t,s)}};function Kl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(he(t))o=xr(t,n.props.value)>-1;else if(_n(t))o=t.has(n.props.value);else{if(t===s)return;o=Us(t,Lc(e,!0))}e.checked!==o&&(e.checked=o)}const Vl={created(e,{value:t},s){e.checked=Us(t,s.props.value),e[Ot]=ws(s),ts(e,"change",()=>{e[Ot](fn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ot]=ws(n),t!==s&&(e.checked=Us(t,n.props.value))}},Kn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=_n(t);ts(e,"change",()=>{const a=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>s?ra(fn(r)):fn(r));e[Ot](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Zn(()=>{e._assigning=!1})}),e[Ot]=ws(n)},mounted(e,{value:t}){Gl(e,t)},beforeUpdate(e,t,s){e[Ot]=ws(s)},updated(e,{value:t}){e._assigning||Gl(e,t)}};function Gl(e,t){const s=e.multiple,n=he(t);if(!(s&&!n&&!_n(t))){for(let o=0,a=e.options.length;o<a;o++){const r=e.options[o],i=fn(r);if(s)if(n){const c=typeof i;c==="string"||c==="number"?r.selected=t.some(u=>String(u)===String(i)):r.selected=xr(t,i)>-1}else r.selected=t.has(i);else if(Us(fn(r),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function fn(e){return"_value"in e?e._value:e.value}function Lc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const bp=["ctrl","shift","alt","meta"],_p={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bp.some(s=>e[`${s}Key`]&&!t.includes(s))},Ct=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let r=0;r<t.length;r++){const i=_p[t[r]];if(i&&i(o,t))return}return e(o,...a)})},wp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Go=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=Cs(o.key);if(t.some(r=>r===a||wp[r]===a))return e(o)})},Sp=at({patchProp:hp},tp);let zl;function Cp(){return zl||(zl=Rf(Sp))}const $p=(...e)=>{const t=Cp().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=xp(n);if(!o)return;const a=t._component;!Se(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const r=s(o,!1,kp(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),r},t};function kp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function xp(e){return Je(e)?document.querySelector(e):e}const we=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Ap={};function Tp(e,t){const s=lf("router-view");return v(),Ue(s)}const Np=we(Ap,[["render",Tp]]),Ep="modulepreload",Op=function(e){return"/"+e},Jl={},Ip=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(s.map(c=>{if(c=Op(c),c in Jl)return;Jl[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Ep,u||(d.as="script"),d.crossOrigin="",d.href=c,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return o.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Js=typeof document<"u";function Bc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Bc(e.default)}const Ne=Object.assign;function Na(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ft(o)?o.map(e):e(o)}return s}const Vn=()=>{},Ft=Array.isArray;function Yl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Mc=/#/g,Dp=/&/g,Pp=/\//g,Lp=/=/g,Bp=/\?/g,Uc=/\+/g,Mp=/%5B/g,Up=/%5D/g,Fc=/%5E/g,Fp=/%60/g,jc=/%7B/g,jp=/%7C/g,Hc=/%7D/g,Hp=/%20/g;function Wr(e){return e==null?"":encodeURI(""+e).replace(jp,"|").replace(Mp,"[").replace(Up,"]")}function Wp(e){return Wr(e).replace(jc,"{").replace(Hc,"}").replace(Fc,"^")}function tr(e){return Wr(e).replace(Uc,"%2B").replace(Hp,"+").replace(Mc,"%23").replace(Dp,"%26").replace(Fp,"`").replace(jc,"{").replace(Hc,"}").replace(Fc,"^")}function Kp(e){return tr(e).replace(Lp,"%3D")}function Vp(e){return Wr(e).replace(Mc,"%23").replace(Bp,"%3F")}function Gp(e){return Vp(e).replace(Pp,"%2F")}function ao(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const zp=/\/$/,Jp=e=>e.replace(zp,"");function Ea(e,t,s="/"){let n,o={},a="",r="";const i=t.indexOf("#");let c=t.indexOf("?");return c=i>=0&&c>i?-1:c,c>=0&&(n=t.slice(0,c),a=t.slice(c,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),r=t.slice(i,t.length)),n=Qp(n??t,s),{fullPath:n+a+r,path:n,query:o,hash:ao(r)}}function Yp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ql(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function qp(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&pn(t.matched[n],s.matched[o])&&Wc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function pn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Wc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Xp(e[s],t[s]))return!1;return!0}function Xp(e,t){return Ft(e)?Xl(e,t):Ft(t)?Xl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Xl(e,t){return Ft(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Qp(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,r,i;for(r=0;r<n.length;r++)if(i=n[r],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(r).join("/")}const ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let sr=function(e){return e.pop="pop",e.push="push",e}({}),Oa=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function Zp(e){if(!e)if(Js){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jp(e)}const ev=/^[^#]+#/;function tv(e,t){return e.replace(ev,"#")+t}function sv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const va=()=>({left:window.scrollX,top:window.scrollY});function nv(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=sv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ql(e,t){return(history.state?history.state.position-t:-1)+e}const nr=new Map;function ov(e,t){nr.set(e,t)}function av(e){const t=nr.get(e);return nr.delete(e),t}function rv(e){return typeof e=="string"||e&&typeof e=="object"}function Kc(e){return typeof e=="string"||typeof e=="symbol"}let Ke=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Vc=Symbol("");Ke.MATCHER_NOT_FOUND+"",Ke.NAVIGATION_GUARD_REDIRECT+"",Ke.NAVIGATION_ABORTED+"",Ke.NAVIGATION_CANCELLED+"",Ke.NAVIGATION_DUPLICATED+"";function vn(e,t){return Ne(new Error,{type:e,[Vc]:!0},t)}function qt(e,t){return e instanceof Error&&Vc in e&&(t==null||!!(e.type&t))}const lv=["params","query","hash"];function iv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of lv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function cv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Uc," "),a=o.indexOf("="),r=ao(a<0?o:o.slice(0,a)),i=a<0?null:ao(o.slice(a+1));if(r in t){let c=t[r];Ft(c)||(c=t[r]=[c]),c.push(i)}else t[r]=i}return t}function Zl(e){let t="";for(let s in e){const n=e[s];if(s=Kp(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ft(n)?n.map(o=>o&&tr(o)):[n&&tr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function uv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ft(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const dv=Symbol(""),ei=Symbol(""),ma=Symbol(""),Kr=Symbol(""),or=Symbol("");function Tn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function ms(e,t,s,n,o,a=r=>r()){const r=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,c)=>{const u=p=>{p===!1?c(vn(Ke.NAVIGATION_ABORTED,{from:s,to:t})):p instanceof Error?c(p):rv(p)?c(vn(Ke.NAVIGATION_GUARD_REDIRECT,{from:t,to:p})):(r&&n.enterCallbacks[o]===r&&typeof p=="function"&&r.push(p),i())},f=a(()=>e.call(n&&n.instances[o],t,s,u));let d=Promise.resolve(f);e.length<3&&(d=d.then(u)),d.catch(p=>c(p))})}function Ia(e,t,s,n,o=a=>a()){const a=[];for(const r of e)for(const i in r.components){let c=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(Bc(c)){const u=(c.__vccOpts||c)[t];u&&a.push(ms(u,s,n,r,i,o))}else{let u=c();a.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${r.path}"`);const d=Rp(f)?f.default:f;r.mods[i]=f,r.components[i]=d;const p=(d.__vccOpts||d)[t];return p&&ms(p,s,n,r,i,o)()}))}}return a}function fv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let r=0;r<a;r++){const i=t.matched[r];i&&(e.matched.find(u=>pn(u,i))?n.push(i):s.push(i));const c=e.matched[r];c&&(t.matched.find(u=>pn(u,c))||o.push(c))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let pv=()=>location.protocol+"//"+location.host;function Gc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let r=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(r);return i[0]!=="/"&&(i="/"+i),ql(i,"")}return ql(s,e)+n+o}function vv(e,t,s,n){let o=[],a=[],r=null;const i=({state:p})=>{const h=Gc(e,location),g=s.value,y=t.value;let $=0;if(p){if(s.value=h,t.value=p,r&&r===g){r=null;return}$=y?p.position-y.position:0}else n(h);o.forEach(C=>{C(s.value,g,{delta:$,type:sr.pop,direction:$?$>0?Oa.forward:Oa.back:Oa.unknown})})};function c(){r=s.value}function u(p){o.push(p);const h=()=>{const g=o.indexOf(p);g>-1&&o.splice(g,1)};return a.push(h),h}function f(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Ne({},p.state,{scroll:va()}),"")}}function d(){for(const p of a)p();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:u,destroy:d}}function ti(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?va():null}}function mv(e){const{history:t,location:s}=window,n={value:Gc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(c,u,f){const d=e.indexOf("#"),p=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+c:pv()+e+c;try{t[f?"replaceState":"pushState"](u,"",p),o.value=u}catch(h){console.error(h),s[f?"replace":"assign"](p)}}function r(c,u){a(c,Ne({},t.state,ti(o.value.back,c,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=c}function i(c,u){const f=Ne({},o.value,t.state,{forward:c,scroll:va()});a(f.current,f,!0),a(c,Ne({},ti(n.value,c,null),{position:f.position+1},u),!1),n.value=c}return{location:n,state:o,push:i,replace:r}}function hv(e){e=Zp(e);const t=mv(e),s=vv(e,t.state,t.location,t.replace);function n(a,r=!0){r||s.pauseListeners(),history.go(a)}const o=Ne({location:"",base:e,go:n,createHref:tv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function gv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),hv(e)}let Ps=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ze=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ze||{});const yv={type:Ps.Static,value:""},bv=/[a-zA-Z0-9_]/;function _v(e){if(!e)return[[]];if(e==="/")return[[yv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${u}": ${h}`)}let s=Ze.Static,n=s;const o=[];let a;function r(){a&&o.push(a),a=[]}let i=0,c,u="",f="";function d(){u&&(s===Ze.Static?a.push({type:Ps.Static,value:u}):s===Ze.Param||s===Ze.ParamRegExp||s===Ze.ParamRegExpEnd?(a.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ps.Param,value:u,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;i<e.length;){if(c=e[i++],c==="\\"&&s!==Ze.ParamRegExp){n=s,s=Ze.EscapeNext;continue}switch(s){case Ze.Static:c==="/"?(u&&d(),r()):c===":"?(d(),s=Ze.Param):p();break;case Ze.EscapeNext:p(),s=n;break;case Ze.Param:c==="("?s=Ze.ParamRegExp:bv.test(c)?p():(d(),s=Ze.Static,c!=="*"&&c!=="?"&&c!=="+"&&i--);break;case Ze.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:s=Ze.ParamRegExpEnd:f+=c;break;case Ze.ParamRegExpEnd:d(),s=Ze.Static,c!=="*"&&c!=="?"&&c!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===Ze.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),d(),r(),o}const si="[^/]+?",wv={sensitive:!1,strict:!1,start:!0,end:!0};var ht=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ht||{});const Sv=/[.+*?^${}()[\]/\\]/g;function Cv(e,t){const s=Ne({},wv,t),n=[];let o=s.start?"^":"";const a=[];for(const u of e){const f=u.length?[]:[ht.Root];s.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const p=u[d];let h=ht.Segment+(s.sensitive?ht.BonusCaseSensitive:0);if(p.type===Ps.Static)d||(o+="/"),o+=p.value.replace(Sv,"\\$&"),h+=ht.Static;else if(p.type===Ps.Param){const{value:g,repeatable:y,optional:$,regexp:C}=p;a.push({name:g,repeatable:y,optional:$});const _=C||si;if(_!==si){h+=ht.BonusCustomRegExp;try{`${_}`}catch(x){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+x.message)}}let w=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=$&&u.length<2?`(?:/${w})`:"/"+w),$&&(w+="?"),o+=w,h+=ht.Dynamic,$&&(h+=ht.BonusOptional),y&&(h+=ht.BonusRepeatable),_===".*"&&(h+=ht.BonusWildcard)}f.push(h)}n.push(f)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=ht.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function i(u){const f=u.match(r),d={};if(!f)return null;for(let p=1;p<f.length;p++){const h=f[p]||"",g=a[p-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function c(u){let f="",d=!1;for(const p of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const h of p)if(h.type===Ps.Static)f+=h.value;else if(h.type===Ps.Param){const{value:g,repeatable:y,optional:$}=h,C=g in u?u[g]:"";if(Ft(C)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Ft(C)?C.join("/"):C;if(!_)if($)p.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=_}}return f||"/"}return{re:r,score:n,keys:a,parse:i,stringify:c}}function $v(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===ht.Static+ht.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===ht.Static+ht.Segment?1:-1:0}function zc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=$v(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(ni(n))return 1;if(ni(o))return-1}return o.length-n.length}function ni(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const kv={strict:!1,end:!0,sensitive:!1};function xv(e,t,s){const n=Cv(_v(e.path),s),o=Ne(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Av(e,t){const s=[],n=new Map;t=Yl(kv,t);function o(d){return n.get(d)}function a(d,p,h){const g=!h,y=ai(d);y.aliasOf=h&&h.record;const $=Yl(t,d),C=[y];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const R of x)C.push(ai(Ne({},y,{components:h?h.record.components:y.components,path:R,aliasOf:h?h.record:y})))}let _,w;for(const x of C){const{path:R}=x;if(p&&R[0]!=="/"){const L=p.record.path,B=L[L.length-1]==="/"?"":"/";x.path=p.record.path+(R&&B+R)}if(_=xv(x,p,$),h?h.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),g&&d.name&&!ri(_)&&r(d.name)),Jc(_)&&c(_),y.children){const L=y.children;for(let B=0;B<L.length;B++)a(L[B],_,h&&h.children[B])}h=h||_}return w?()=>{r(w)}:Vn}function r(d){if(Kc(d)){const p=n.get(d);p&&(n.delete(d),s.splice(s.indexOf(p),1),p.children.forEach(r),p.alias.forEach(r))}else{const p=s.indexOf(d);p>-1&&(s.splice(p,1),d.record.name&&n.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function i(){return s}function c(d){const p=Ev(d,s);s.splice(p,0,d),d.record.name&&!ri(d)&&n.set(d.record.name,d)}function u(d,p){let h,g={},y,$;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw vn(Ke.MATCHER_NOT_FOUND,{location:d});$=h.record.name,g=Ne(oi(p.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&oi(d.params,h.keys.map(w=>w.name))),y=h.stringify(g)}else if(d.path!=null)y=d.path,h=s.find(w=>w.re.test(y)),h&&(g=h.parse(y),$=h.record.name);else{if(h=p.name?n.get(p.name):s.find(w=>w.re.test(p.path)),!h)throw vn(Ke.MATCHER_NOT_FOUND,{location:d,currentLocation:p});$=h.record.name,g=Ne({},p.params,d.params),y=h.stringify(g)}const C=[];let _=h;for(;_;)C.unshift(_.record),_=_.parent;return{name:$,path:y,params:g,matched:C,meta:Nv(C)}}e.forEach(d=>a(d));function f(){s.length=0,n.clear()}return{addRoute:a,resolve:u,removeRoute:r,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function oi(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function ai(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Tv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Tv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function ri(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nv(e){return e.reduce((t,s)=>Ne(t,s.meta),{})}function Ev(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;zc(e,t[a])<0?n=a:s=a+1}const o=Ov(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Ov(e){let t=e;for(;t=t.parent;)if(Jc(t)&&zc(e,t)===0)return t}function Jc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function li(e){const t=Bt(ma),s=Bt(Kr),n=N(()=>{const c=M(e.to);return t.resolve(c)}),o=N(()=>{const{matched:c}=n.value,{length:u}=c,f=c[u-1],d=s.matched;if(!f||!d.length)return-1;const p=d.findIndex(pn.bind(null,f));if(p>-1)return p;const h=ii(c[u-2]);return u>1&&ii(f)===h&&d[d.length-1].path!==h?d.findIndex(pn.bind(null,c[u-2])):p}),a=N(()=>o.value>-1&&Lv(s.params,n.value.params)),r=N(()=>o.value>-1&&o.value===s.matched.length-1&&Wc(s.params,n.value.params));function i(c={}){if(Pv(c)){const u=t[M(e.replace)?"replace":"push"](M(e.to)).catch(Vn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:N(()=>n.value.href),isActive:a,isExactActive:r,navigate:i}}function Iv(e){return e.length===1?e[0]:e}const Rv=cc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:li,setup(e,{slots:t}){const s=Lt(li(e)),{options:n}=Bt(ma),o=N(()=>({[ci(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[ci(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&Iv(t.default(s));return e.custom?a:Rc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),Dv=Rv;function Pv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Lv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ft(o)||o.length!==n.length||n.some((a,r)=>a.valueOf()!==o[r].valueOf()))return!1}return!0}function ii(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ci=(e,t,s)=>e??t??s,Bv=cc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Bt(or),o=N(()=>e.route||n.value),a=Bt(ei,0),r=N(()=>{let u=M(a);const{matched:f}=o.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),i=N(()=>o.value.matched[r.value]);Oo(ei,N(()=>r.value+1)),Oo(dv,i),Oo(or,o);const c=E();return yt(()=>[c.value,i.value,e.name],([u,f,d],[p,h,g])=>{f&&(f.instances[d]=u,h&&h!==f&&u&&u===p&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),u&&f&&(!h||!pn(f,h)||!p)&&(f.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=o.value,f=e.name,d=i.value,p=d&&d.components[f];if(!p)return ui(s.default,{Component:p,route:u});const h=d.props[f],g=h?h===!0?u.params:typeof h=="function"?h(u):h:null,$=Rc(p,Ne({},g,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[f]=null)},ref:c}));return ui(s.default,{Component:$,route:u})||$}}});function ui(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Mv=Bv;function Uv(e){const t=Av(e.routes,e),s=e.parseQuery||cv,n=e.stringifyQuery||Zl,o=e.history,a=Tn(),r=Tn(),i=Tn(),c=Id(ds);let u=ds;Js&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Na.bind(null,z=>""+z),d=Na.bind(null,Gp),p=Na.bind(null,ao);function h(z,re){let ne,de;return Kc(z)?(ne=t.getRecordMatcher(z),de=re):de=z,t.addRoute(de,ne)}function g(z){const re=t.getRecordMatcher(z);re&&t.removeRoute(re)}function y(){return t.getRoutes().map(z=>z.record)}function $(z){return!!t.getRecordMatcher(z)}function C(z,re){if(re=Ne({},re||c.value),typeof z=="string"){const P=Ea(s,z,re.path),G=t.resolve({path:P.path},re),X=o.createHref(P.fullPath);return Ne(P,G,{params:p(G.params),hash:ao(P.hash),redirectedFrom:void 0,href:X})}let ne;if(z.path!=null)ne=Ne({},z,{path:Ea(s,z.path,re.path).path});else{const P=Ne({},z.params);for(const G in P)P[G]==null&&delete P[G];ne=Ne({},z,{params:d(P)}),re.params=d(re.params)}const de=t.resolve(ne,re),Ce=z.hash||"";de.params=f(p(de.params));const S=Yp(n,Ne({},z,{hash:Wp(Ce),path:de.path})),k=o.createHref(S);return Ne({fullPath:S,hash:Ce,query:n===Zl?uv(z.query):z.query||{}},de,{redirectedFrom:void 0,href:k})}function _(z){return typeof z=="string"?Ea(s,z,c.value.path):Ne({},z)}function w(z,re){if(u!==z)return vn(Ke.NAVIGATION_CANCELLED,{from:re,to:z})}function x(z){return B(z)}function R(z){return x(Ne(_(z),{replace:!0}))}function L(z,re){const ne=z.matched[z.matched.length-1];if(ne&&ne.redirect){const{redirect:de}=ne;let Ce=typeof de=="function"?de(z,re):de;return typeof Ce=="string"&&(Ce=Ce.includes("?")||Ce.includes("#")?Ce=_(Ce):{path:Ce},Ce.params={}),Ne({query:z.query,hash:z.hash,params:Ce.path!=null?{}:z.params},Ce)}}function B(z,re){const ne=u=C(z),de=c.value,Ce=z.state,S=z.force,k=z.replace===!0,P=L(ne,de);if(P)return B(Ne(_(P),{state:typeof P=="object"?Ne({},Ce,P.state):Ce,force:S,replace:k}),re||ne);const G=ne;G.redirectedFrom=re;let X;return!S&&qp(n,de,ne)&&(X=vn(Ke.NAVIGATION_DUPLICATED,{to:G,from:de}),A(de,de,!0,!1)),(X?Promise.resolve(X):fe(G,de)).catch(J=>qt(J)?qt(J,Ke.NAVIGATION_GUARD_REDIRECT)?J:H(J):q(J,G,de)).then(J=>{if(J){if(qt(J,Ke.NAVIGATION_GUARD_REDIRECT))return B(Ne({replace:k},_(J.to),{state:typeof J.to=="object"?Ne({},Ce,J.to.state):Ce,force:S}),re||G)}else J=ue(G,de,!0,k,Ce);return ve(G,de,J),J})}function Q(z,re){const ne=w(z,re);return ne?Promise.reject(ne):Promise.resolve()}function Y(z){const re=Te.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(z):z()}function fe(z,re){let ne;const[de,Ce,S]=fv(z,re);ne=Ia(de.reverse(),"beforeRouteLeave",z,re);for(const P of de)P.leaveGuards.forEach(G=>{ne.push(ms(G,z,re))});const k=Q.bind(null,z,re);return ne.push(k),je(ne).then(()=>{ne=[];for(const P of a.list())ne.push(ms(P,z,re));return ne.push(k),je(ne)}).then(()=>{ne=Ia(Ce,"beforeRouteUpdate",z,re);for(const P of Ce)P.updateGuards.forEach(G=>{ne.push(ms(G,z,re))});return ne.push(k),je(ne)}).then(()=>{ne=[];for(const P of S)if(P.beforeEnter)if(Ft(P.beforeEnter))for(const G of P.beforeEnter)ne.push(ms(G,z,re));else ne.push(ms(P.beforeEnter,z,re));return ne.push(k),je(ne)}).then(()=>(z.matched.forEach(P=>P.enterCallbacks={}),ne=Ia(S,"beforeRouteEnter",z,re,Y),ne.push(k),je(ne))).then(()=>{ne=[];for(const P of r.list())ne.push(ms(P,z,re));return ne.push(k),je(ne)}).catch(P=>qt(P,Ke.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function ve(z,re,ne){i.list().forEach(de=>Y(()=>de(z,re,ne)))}function ue(z,re,ne,de,Ce){const S=w(z,re);if(S)return S;const k=re===ds,P=Js?history.state:{};ne&&(de||k?o.replace(z.fullPath,Ne({scroll:k&&P&&P.scroll},Ce)):o.push(z.fullPath,Ce)),c.value=z,A(z,re,ne,k),H()}let ge;function $e(){ge||(ge=o.listen((z,re,ne)=>{if(!xe.listening)return;const de=C(z),Ce=L(de,xe.currentRoute.value);if(Ce){B(Ne(Ce,{replace:!0,force:!0}),de).catch(Vn);return}u=de;const S=c.value;Js&&ov(Ql(S.fullPath,ne.delta),va()),fe(de,S).catch(k=>qt(k,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_CANCELLED)?k:qt(k,Ke.NAVIGATION_GUARD_REDIRECT)?(B(Ne(_(k.to),{force:!0}),de).then(P=>{qt(P,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&!ne.delta&&ne.type===sr.pop&&o.go(-1,!1)}).catch(Vn),Promise.reject()):(ne.delta&&o.go(-ne.delta,!1),q(k,de,S))).then(k=>{k=k||ue(de,S,!1),k&&(ne.delta&&!qt(k,Ke.NAVIGATION_CANCELLED)?o.go(-ne.delta,!1):ne.type===sr.pop&&qt(k,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),ve(de,S,k)}).catch(Vn)}))}let me=Tn(),pe=Tn(),V;function q(z,re,ne){H(z);const de=pe.list();return de.length?de.forEach(Ce=>Ce(z,re,ne)):console.error(z),Promise.reject(z)}function U(){return V&&c.value!==ds?Promise.resolve():new Promise((z,re)=>{me.add([z,re])})}function H(z){return V||(V=!z,$e(),me.list().forEach(([re,ne])=>z?ne(z):re()),me.reset()),z}function A(z,re,ne,de){const{scrollBehavior:Ce}=e;if(!Js||!Ce)return Promise.resolve();const S=!ne&&av(Ql(z.fullPath,0))||(de||!ne)&&history.state&&history.state.scroll||null;return Zn().then(()=>Ce(z,re,S)).then(k=>k&&nv(k)).catch(k=>q(k,z,re))}const K=z=>o.go(z);let ce;const Te=new Set,xe={currentRoute:c,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:y,resolve:C,options:e,push:x,replace:R,go:K,back:()=>K(-1),forward:()=>K(1),beforeEach:a.add,beforeResolve:r.add,afterEach:i.add,onError:pe.add,isReady:U,install(z){z.component("RouterLink",Dv),z.component("RouterView",Mv),z.config.globalProperties.$router=xe,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>M(c)}),Js&&!ce&&c.value===ds&&(ce=!0,x(o.location).catch(de=>{}));const re={};for(const de in ds)Object.defineProperty(re,de,{get:()=>c.value[de],enumerable:!0});z.provide(ma,xe),z.provide(Kr,qi(re)),z.provide(or,c);const ne=z.unmount;Te.add(z),z.unmount=function(){Te.delete(z),Te.size<1&&(u=ds,ge&&ge(),ge=null,c.value=ds,ce=!1,V=!1),ne()}}};function je(z){return z.reduce((re,ne)=>re.then(()=>Y(ne)),Promise.resolve())}return xe}function Fv(){return Bt(ma)}function IT(e){return Bt(Kr)}function ko(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,r="";for(let i=0;i<s.length;i++){const c=s[i];if(c.startsWith("%"))continue;if(a){c.includes("}")?(r+=c.substring(0,c.indexOf("}")),o.push(r.trim()),r="",a=!1):r+=c+`
`;continue}if(c.includes("{")){const d=c.indexOf("{");if(c.includes("}")){const p=c.indexOf("}");o.push(c.substring(d+1,p).trim())}else r=c.substring(d+1)+`
`,a=!0;continue}const u=c.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const f=c.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,p]=f;if(d==="Board")n&&(n.commentary=pi(o),n.steps=di(o),n.auction=fi(n.auction),t.push(n)),n=jv(),n.boardNumber=parseInt(p,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=p;break;case"Vulnerable":n.vulnerable=p;break;case"Contract":n.contract=p;break;case"Declarer":n.declarer=p;break;case"Student":n.studentSeat=p;break;case"Deal":n.hands=Hv(p);break;case"Auction":n.auctionDealer=p;break;case"Result":n.result=p;break;case"Event":n.event=p;break;case"SkillPath":n.skillPath=p;break;case"Category":n.category=p;break;case"Difficulty":n.difficulty=p;break}continue}if(n&&n.auctionDealer){const d=c.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const p=Kv(d);n.auction.push(...p)}}}return n&&(n.commentary=pi(o),n.steps=di(o),n.auction=fi(n.auction),t.push(n)),t}function di(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let r=0;r<n.length;r++){const i=n[r],c=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(c){const p=Vr(c[1]).replace(/!/g,"").trim(),h=a.trim();a="";let g="";if(r+1<n.length){const C=n[r+1];C.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=C.trim(),r++)}const y=Nn(h,"bid"),$=Nn(g,"bid");o.push({...y,type:"bid",bid:p,explanationText:$.text,showSeatsAfter:$.showSeats})}else if(u||f){const p=u?"next":"rotate";a.trim()&&o.push(Nn(a.trim(),p)),a=""}else if(d){const p=d[1].trim();let h;if(p.toLowerCase().startsWith("any:")?h={cards:p.substring(4).split(",").map(y=>zo(y.trim())),anyOf:!0}:h={card:zo(p)},a.trim()){const g=Nn(a.trim(),"choose-card");g.chooseCard=h,o.push(g)}a=""}else a+=i}if(a.trim()){const r=Nn(a.trim(),"end");o.push(r)}return o}function Nn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const w=[];_.includes("N")&&w.push("N"),_.includes("E")&&w.push("E"),_.includes("S")&&w.push("S"),_.includes("W")&&w.push("W"),w.length>0&&(s=w)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let r;for(;(r=a.exec(e))!==null;)o.push(r[1]);const i=/\[RESET\]/i.test(e);let c=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const _=u[1].trim();_.toLowerCase().startsWith("any:")?c={cards:_.substring(4).split(",").map(x=>zo(x.trim())),anyOf:!0}:c={card:zo(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),p=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),p&&(f=!0);const h=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const $=e.match(/\[showcards\s+([^\]]+)\]/i);if($){const _=$[1].trim();y={};const w=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let x;for(;(x=w.exec(_))!==null;){const R=x[1].toUpperCase(),L=x[2].split(",").map(B=>B.trim().toUpperCase());y[R]=L}Object.keys(y).length===0&&(y=null)}let C=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Vr(C),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:h,clearCommentary:g,showcards:y,chooseCard:c}}function jv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function zo(e){return e.toUpperCase().replace("10","T")}function Hv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],r=a.indexOf(":");if(r!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(r+1)}for(let i=0;i<4;i++){const c=(o+i)%4,u=n[c];t[u]=Wv(s[i])}return t}function Wv(e){const t=e.split(".");return t.length!==4?null:{spades:xo(t[0]),hearts:xo(t[1]),diamonds:xo(t[2]),clubs:xo(t[3])}}function xo(e){return e?e.split(""):[]}function fi(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Kv(e){const t=e.split(/\s+/).filter(n=>n.length>0).filter(n=>!/^=\d+=?$/.test(n)),s=[];for(const n of t)n.toUpperCase()==="AP"?s.push("Pass","Pass","Pass"):s.push(Vv(n));return s}function Vv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function pi(e){return e.length?Vr(e.join(`

`)):""}function Vr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Gv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function Ao(e,t){return Gv(t)[e%4]}const Gr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},vi={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Yc=["spades","hearts","diamonds","clubs"];function Ra(e){return e==="T"?"10":e}function zr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Gr[o],r=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${r}">${a}</span>`}}return{text:e,html:e}}function zv(e){return(vi[e.toLowerCase()]||vi[e])==="red"?"suit-red":"suit-black"}function Jv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function ar(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Yv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Yc)for(const o of e[n]||[])s+=t[o]||0;return s}function qv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Gr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function En(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Xv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ys(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Qv({observationId:e=null,userId:t,sessionId:s,deal:n,promptIndex:o,auctionSoFar:a,expectedBid:r,studentBid:i,correct:c,attemptNumber:u,timeTakenMs:f,skillPath:d,assignment:p=null,prompts:h=null,boardResult:g=null}){var _,w,x,R,L,B,Q,Y,fe,ve,ue;const y=((_=n.steps)==null?void 0:_.filter(ge=>ge.type==="bid").length)||1,$=n.studentSeat||"S",C=((w=n.hands)==null?void 0:w[$.toLowerCase()])||"";return{observation_id:e||crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:t,session_id:s,deal:{subfolder:n.subfolder||n.category||"Unknown",filename:n.filename||null,deal_number:n.boardNumber||n.dealNumber||null,kind:n.kind||null,dealer:n.dealer||"N",vulnerability:n.vulnerable||"None",student_seat:$,hands:{north:((x=n.hands)==null?void 0:x.N)||((R=n.hands)==null?void 0:R.north)||"",east:((L=n.hands)==null?void 0:L.E)||((B=n.hands)==null?void 0:B.east)||"",south:((Q=n.hands)==null?void 0:Q.S)||((Y=n.hands)==null?void 0:Y.south)||"",west:((fe=n.hands)==null?void 0:fe.W)||((ve=n.hands)==null?void 0:ve.west)||""},full_auction:((ue=n.auction)==null?void 0:ue.join(" "))||"",contract:n.contract||null,declarer:n.declarer||null,lead:n.lead||null},bid_prompt:{prompt_index:o,total_prompts:y,auction_so_far:[...a],expected_bid:r,student_hand:C},result:{student_bid:i,correct:c,attempt_number:u,time_taken_ms:f},skill_path:d,board_result:g,assignment:p,prompts:h||[]}}function qc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,board_result:e.board_result||null,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function Zv(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function em(){return crypto.randomUUID()}function tm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Xc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function sm(e){const[t]=e.split("/");return t||"uncategorized"}function nm(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Qc={name:"AES-GCM",length:256},Jr={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function om(){const e=await crypto.subtle.generateKey(Qc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Fs(t)}async function Zc(e){const t=js(e);return crypto.subtle.importKey("raw",t,Qc,!0,["encrypt","decrypt"])}async function Yr(e,t){const s=await Zc(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:Fs(r),iv:Fs(n)}}async function qr(e,t,s){const n=await Zc(s),o=js(e),a=js(t),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(r))}async function am(e){const t=js(e);return crypto.subtle.importKey("spki",t,Jr,!0,["encrypt"])}async function rm(e){const t=js(e);return crypto.subtle.importKey("pkcs8",t,Jr,!0,["decrypt"])}async function lm(){const e=await crypto.subtle.generateKey(Jr,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Fs(t),privateKey:Fs(s)}}async function eu(e,t){const s=await am(t),n=js(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Fs(o)}async function im(e,t){const s=await rm(t),n=js(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Fs(o)}function cm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function um(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function dm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Yr(t,e);return(await qr(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Fs(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function js(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const rr="bridgePractice",Le=E({}),qe=E(null),Ss=E(null),ro=E(!1),ha=E(!1);function tu(){try{const e=localStorage.getItem(rr);if(e){const t=JSON.parse(e);Le.value=t.users||{},qe.value=t.currentUserId||null,Ss.value=t.adminViewerId||null}ro.value=!0}catch(e){console.error("Failed to load user store from storage:",e),ro.value=!0}}function Rt(){try{const e=localStorage.getItem(rr),t=e?JSON.parse(e):{};t.users=Le.value,t.currentUserId=qe.value,Ss.value&&(t.adminViewerId=Ss.value),localStorage.setItem(rr,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function fm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const r=crypto.randomUUID(),i=new Date().toISOString(),c=await om();let u=null;if(a)try{const d=await fetch(`${a}/keys/admin`);if(d.ok){const p=await d.json();Ss.value=p.viewer_id,u={grantee_id:p.viewer_id,encrypted_payload:await eu(c,p.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:r,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:c,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return Le.value[r]=f,qe.value=r,Rt(),ha.value=!0,f}function pm(e,t){if(!Le.value[e])return console.error("User not found:",e),null;const s=Le.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Rt(),s}function vm(e){if(!Le.value[e])return!1;if(delete Le.value[e],qe.value===e){const t=Object.keys(Le.value);qe.value=t.length>0?t[0]:null}return Rt(),!0}function mm(e){return Le.value[e]?(qe.value=e,Rt(),!0):(console.error("User not found:",e),!1)}function hm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Le.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function gm(e){const t=e.trim().toLowerCase();for(const s of Object.values(Le.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function ym(e){return Le.value[e]||null}function bm(){Le.value={},qe.value=null,Ss.value=null,ha.value=!1,Rt(),ro.value=!1}function _m(){ro.value||tu()}async function wm(e){const t=um(e);if(!t.valid)return{success:!1,error:t.error};if(!await dm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Le.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),qe.value=e.user_id,Rt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",r=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:r,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[i.id]=i,qe.value=i.id,Rt(),{success:!0,user:i}}function Sm(){const e=Le.value[qe.value];return!e||!e.secretKey?null:cm(e)}function Cm(){ha.value=!1}function $m(){return Ss.value}function km(e){Ss.value=e,Rt()}async function xm(e){const t=Le.value[qe.value];return!t||!t.secretKey?null:eu(t.secretKey,e)}async function Am(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Tm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[a.id]=a,qe.value=a.id,Rt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Nm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Le.value[a.id]=a,qe.value=a.id,Rt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Em(){if(!qe.value)return;const e=Le.value[qe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),a&&Rt()}catch{}}function He(){const e=N(()=>qe.value&&Le.value[qe.value]||null),t=N(()=>Object.values(Le.value)),s=N(()=>Object.keys(Le.value).length>0),n=N(()=>Object.keys(Le.value).length),o=N(()=>qe.value!==null&&!!Le.value[qe.value]);return{users:Le,currentUserId:qe,adminViewerId:Ss,initialized:ro,showKeyBackupModal:ha,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:_m,loadFromStorage:tu,saveToStorage:Rt,createUser:fm,updateUser:pm,deleteUser:vm,switchUser:mm,findUserByName:hm,findUserByEmail:gm,getUser:ym,clearUsers:bm,restoreFromBackup:wm,getKeyBackup:Sm,dismissKeyBackupModal:Cm,getAdminViewerId:$m,setAdminViewerId:km,createGrantForViewer:xm,requestRecovery:Am,claimRecovery:Tm,claimRecoveryByCode:Nm,syncRole:Em}}const lr="bridgePractice",rt=E({}),Ge=E(null),Dt=E(!1),mn=E(!1);function su(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const r=s.split(",").map(c=>c.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:r,dueDate:n||null,teacherName:o||null,classroom:i}}function nu(){try{const e=localStorage.getItem(lr);if(e){const t=JSON.parse(e);rt.value=t.assignments||{},Ge.value=t.currentAssignmentId||null,Ge.value&&rt.value[Ge.value]&&(Dt.value=!0)}mn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),mn.value=!0}}function Hs(){try{const e=localStorage.getItem(lr),t=e?JSON.parse(e):{};t.assignments=rt.value,t.currentAssignmentId=Ge.value,localStorage.setItem(lr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function ou({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(rt.value).find(u=>u.name===e);if(a){const u=new Set(a.lessons);for(const f of n)u.add(f);return a.lessons=Array.from(u),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Ge.value=a.id,Dt.value=!0,Hs(),a}const r=crypto.randomUUID(),i=new Date().toISOString(),c={id:r,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return rt.value[r]=c,Ge.value=r,Dt.value=!0,Hs(),c}function Om(){if(mn.value)return;nu();const e=su();e&&ou(e),mn.value=!0}function Im(e){if(!Dt.value||!Ge.value)return!1;const t=rt.value[Ge.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Rm(e){if(!Ge.value)return;const t=rt.value[Ge.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Hs())}function Dm(e){if(!Ge.value||!Dt.value)return!1;const t=rt.value[Ge.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Hs(),!0}function Pm(){if(!Dt.value||!Ge.value)return null;const e=rt.value[Ge.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Lm(){Dt.value=!1}function Bm(){Ge.value&&rt.value[Ge.value]&&(Dt.value=!0)}function Mm(e){return rt.value[e]||null}function Um(){return Object.values(rt.value)}function Fm(e){return rt.value[e]?(delete rt.value[e],Ge.value===e&&(Ge.value=null,Dt.value=!1),Hs(),!0):!1}function jm(){rt.value={},Ge.value=null,Dt.value=!1,mn.value=!1,Hs()}function ga(){const e=N(()=>Ge.value&&rt.value[Ge.value]||null),t=N(()=>Dt.value&&e.value!==null),s=N(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=N(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:rt,currentAssignmentId:Ge,inAssignmentMode:Dt,initialized:mn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Om,loadFromStorage:nu,saveToStorage:Hs,createAssignment:ou,isLessonInAssignment:Im,setTotalDeals:Rm,recordDealCompletion:Dm,getAssignmentTag:Pm,exitAssignmentMode:Lm,returnToAssignmentMode:Bm,getAssignment:Mm,getAllAssignments:Um,deleteAssignment:Fm,clearAssignments:jm,parseAssignmentFromUrl:su}}const ir="bridgePractice",Ve=E([]),hn=E(null),gn=E(!1),Ms=E({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function au(){try{const e=localStorage.getItem(ir);if(e){const t=JSON.parse(e);Ve.value=t.pendingObservations||[]}gn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),gn.value=!0}}function Ws(){try{const e=localStorage.getItem(ir),t=e?JSON.parse(e):{};t.pendingObservations=Ve.value,localStorage.setItem(ir,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function ru(){gn.value||au(),hn.value||lu()}function lu(){hn.value=em(),Ms.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Hm({observationId:e=null,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:r,attemptNumber:i,timeTakenMs:c,prompts:u,boardResult:f=null}){var w,x;const d=He(),p=ga();gn.value||ru();const h=d.currentUser.value;if(!h)return{success:!1,error:"No authenticated user"};let g=t.skillPath;if(!g){const R=t.subfolder||t.category||"Unknown";g=tm(R)}const y=p.getAssignmentTag(),$=e&&Ve.value.some(R=>{var L;return((L=R.metadata)==null?void 0:L.observation_id)===e}),C=Qv({observationId:e,userId:h.id,sessionId:hn.value,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:r,attemptNumber:i,timeTakenMs:c,skillPath:g,assignment:y,prompts:u,boardResult:f}),_=Zv(C);if(!_.valid)return console.error("Invalid observation:",_.errors),{success:!1,error:_.errors.join(", ")};if($||(Ms.value.totalObservations++,r?Ms.value.correctCount++:Ms.value.wrongCount++),h.dataConsent&&h.secretKey){const R=await Wm(C,h);R.success||(console.warn("Failed to encrypt observation, storing unencrypted:",R.error),mi(C,((w=h.classrooms)==null?void 0:w[0])||null))}else mi(C,((x=h.classrooms)==null?void 0:x[0])||null);return{success:!0,observation:C}}async function Wm(e,t){var s;try{const{encrypted_data:n,iv:o}=await Yr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,r=qc(e,a),i={encrypted_data:n,iv:o,metadata:r,encrypted:!0,queuedAt:new Date().toISOString()},c=Ve.value.findIndex(u=>{var f;return((f=u.metadata)==null?void 0:f.observation_id)===r.observation_id});return c!==-1?Ve.value[c]=i:Ve.value.push(i),Ws(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function mi(e,t){const s=qc(e,t),n={observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()},o=Ve.value.findIndex(a=>{var r;return((r=a.metadata)==null?void 0:r.observation_id)===s.observation_id});o!==-1?Ve.value[o]=n:Ve.value.push(n),Ws()}async function Km(){const t=He().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Ve.value.length;n++){const o=Ve.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:r}=await Yr(o.observation,t.secretKey);Ve.value[n]={encrypted_data:a,iv:r,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ws(),s}function Vm(){return Ve.value.length}function Gm(){return[...Ve.value]}function zm(e){Ve.value=Ve.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ws()}function Jm(){Ve.value=[],Ws()}function Ym(){return{...Ms.value}}function qm(){Ve.value=[],hn.value=null,Ms.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},gn.value=!1,Ws()}function cs(){const e=N(()=>Ve.value.length),t=N(()=>Ve.value.length>0),s=N(()=>Ve.value.some(o=>!o.encrypted)),n=N(()=>hn.value);return{pendingObservations:Ve,sessionId:hn,sessionStats:Ms,initialized:gn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:ru,startNewSession:lu,recordObservation:Hm,encryptPendingObservations:Km,getPendingCount:Vm,getPendingObservations:Gm,removeSyncedObservations:zm,clearPendingObservations:Jm,getSessionStats:Ym,reset:qm,loadFromStorage:au,saveToStorage:Ws}}function Xm(){const e=cs(),t=E(null),s=E(0),n=E(!1),o=E(!1),a=Lt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),r=Lt({answered:{},wrongCard:null,correctCard:null}),i=Lt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{},promptHistory:[],observationId:null}),c=E({N:[],E:[],S:[],W:[]}),u=E(null),f=E(1),d=N(()=>{var T;return((T=t.value)==null?void 0:T.steps)||[]}),p=N(()=>d.value.length>0),h=N(()=>d.value[s.value]||null),g=N(()=>d.value.some(T=>T.type==="bid")),y=N(()=>{var T;return((T=h.value)==null?void 0:T.type)==="bid"}),$=N(()=>{var T;for(let O=s.value;O>=0;O--)if((T=d.value[O])!=null&&T.clearCommentary)return O;return 0}),C=N(()=>{var T;return((T=t.value)==null?void 0:T.studentSeat)||"S"}),_=N(()=>t.value?Ao(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),w=N(()=>_.value===C.value),x=N(()=>{var F,W;if(!y.value||!w.value||a.auctionComplete||o.value)return!1;const T=h.value;if(!(T!=null&&T.bid))return!1;const O=(W=(F=t.value)==null?void 0:F.auction)==null?void 0:W[a.currentBidIndex];return O?te(T.bid)===te(O):!1}),R=N(()=>{for(let T=a.displayedBids.length-1;T>=0;T--){const O=a.displayedBids[T];if(O&&O!=="Pass"&&O!=="X"&&O!=="XX")return O}return null}),L=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;const T=a.displayedBids[a.displayedBids.length-1];if(T==="X"||T==="XX"||!R.value)return!1;let O=-1;for(let D=a.displayedBids.length-1;D>=0;D--){const Z=a.displayedBids[D];if(Z&&Z!=="Pass"&&Z!=="X"&&Z!=="XX"){O=D;break}}if(O===-1)return!1;const F=Ao(O,t.value.auctionDealer||t.value.dealer),W=_.value;return(W==="N"||W==="S")&&(F==="E"||F==="W")||(W==="E"||W==="W")&&(F==="N"||F==="S")}),B=N(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let T=a.displayedBids.length-1;T>=0;T--){const O=a.displayedBids[T];if(O!=="Pass"){if(O==="XX")return!1;if(O==="X"){const F=Ao(T,t.value.auctionDealer||t.value.dealer),W=_.value;return!(W==="N"&&F==="S"||W==="S"&&F==="N"||W==="E"&&F==="W"||W==="W"&&F==="E")}return!1}}return!1}),Q=N(()=>{const T=h.value;return T!=null&&T.chooseCard?!r.answered[s.value]:!1}),Y=N(()=>{var T;return((T=h.value)==null?void 0:T.chooseCard)||null}),fe=N(()=>{if(!t.value)return[];const T=["N","E","S","W"];if(!p.value)return[];let O=null;const F=d.value;for(let W=0;W<=s.value&&W<F.length;W++){const I=F[W];I!=null&&I.showSeats&&(O=I.showSeats),I!=null&&I.showSeatsAfter&&(W<s.value||W===s.value&&o.value)&&(O=I.showSeatsAfter)}return O?T.filter(W=>!O.includes(W)):T}),ve=N(()=>{if(!t.value||!p.value)return null;let T={};const O=d.value;for(let F=0;F<=s.value&&F<O.length;F++){const W=O[F];if(W!=null&&W.showcards)for(const[I,D]of Object.entries(W.showcards))T[I]=D;if(W!=null&&W.showSeats)for(const I of W.showSeats)delete T[I];if(W!=null&&W.showSeatsAfter&&(F<s.value||F===s.value&&o.value))for(const I of W.showSeatsAfter)delete T[I]}return Object.keys(T).length>0?T:null}),ue=N(()=>{if(!t.value||!p.value)return{};let T={},O=new Set;const F=d.value;for(let I=0;I<=s.value&&I<F.length;I++){const D=F[I];if(D!=null&&D.showcards)for(const[Z,oe]of Object.entries(D.showcards))T[Z]=oe;if(D!=null&&D.showSeats)for(const Z of D.showSeats)O.add(Z)}const W={};for(const[I,D]of Object.entries(T))O.has(I)&&(W[I]=D);return W}),ge=N(()=>{const T=ve.value;return T?Object.keys(T):[]}),$e=N(()=>{const T=fe.value,O=ge.value;return O.length?T.filter(F=>!O.includes(F)):T});function me(T){const O={spades:[],hearts:[],diamonds:[],clubs:[]},F={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const W of T){const I=W[0].toUpperCase(),D=W.slice(1).toUpperCase(),Z=F[I];Z&&O[Z].push(D)}return O}const pe=N(()=>{var F,W;if(!((F=t.value)!=null&&F.hands))return{};if((W=h.value)!=null&&W.reset)return t.value.hands;const T=ve.value,O={};for(const I of["N","E","S","W"]){if(T&&T[I]){O[I]=me(T[I]);continue}const D=t.value.hands[I];if(!D){O[I]=null;continue}O[I]={spades:[...D.spades||[]],hearts:[...D.hearts||[]],diamonds:[...D.diamonds||[]],clubs:[...D.clubs||[]]};for(const Z of c.value[I]){const oe={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[Z.suit];if(oe&&O[I][oe]){const le=O[I][oe].indexOf(Z.card);le!==-1&&O[I][oe].splice(le,1)}}}return O}),V=N(()=>!(g.value&&!a.auctionComplete)),q=N(()=>{if(!p.value)return!0;let T=!0;const O=d.value;for(let F=0;F<=s.value&&F<O.length;F++){const W=O[F];(W==null?void 0:W.showAuction)!==null&&(W==null?void 0:W.showAuction)!==void 0&&(T=W.showAuction)}return T}),U=N(()=>{var O;if(!p.value)return!1;const T=d.value;for(let F=0;F<=s.value&&F<T.length;F++)if((O=T[F])!=null&&O.showLead)return!0;return!1}),H=N(()=>{var T;return(T=t.value)!=null&&T.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),A=N(()=>{if(!p.value||n.value)return!0;const T=h.value;return(T==null?void 0:T.type)==="end"&&!Q.value}),K=N(()=>p.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function ce(){var O;c.value={N:[],E:[],S:[],W:[]};const T=d.value;for(let F=0;F<=s.value&&F<T.length;F++){const W=T[F];if((O=W==null?void 0:W.plays)!=null&&O.length)for(const I of W.plays){const D=I.split(/[,\s]+/);for(const Z of D){if(!Z)continue;const oe=Z.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(oe){const le=oe[1].toUpperCase(),Ae=oe[2].toUpperCase();let be=oe[3].toUpperCase();be==="10"&&(be="T"),c.value[le].push({suit:Ae,card:be})}}}}}function Te(){if(!t.value)return;const T=t.value.auction||[],O=xe(s.value);if(O===-1){for(;a.currentBidIndex<T.length;)a.displayedBids.push(T[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,u.value=null;return}const F=d.value[O],W=te(F.bid);for(;a.currentBidIndex<T.length;){const I=Ao(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),D=te(T[a.currentBidIndex]);if(I===C.value&&D===W){u.value=Date.now(),f.value=1;return}a.displayedBids.push(T[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,u.value=null}function xe(T){const O=d.value;for(let F=T;F<O.length;F++)if(O[F].type==="bid")return F;return-1}function je(T){if(!t.value||a.auctionComplete||!y.value)return!1;const O=t.value.auction[a.currentBidIndex],F=te(T)===te(O),W=s.value;F?W in i.wrongStepIndices&&delete i.wrongStepIndices[W]:(i.wrongStepIndices[W]=!0,i.boardHadWrong=!0);const I=d.value.slice(0,W+1).filter(Ae=>Ae.type==="bid").length-1,D=u.value?Date.now()-u.value:0;i.promptHistory.push({type:"bid",prompt_index:I,auction_so_far:[...a.displayedBids],expected_bid:O,student_bid:T,correct:F,time_ms:D}),F||X(!1);const Z=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,u.value=null,f.value=1,F?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=T,a.correctBid=O,a.wrongBidIndex=Z);const oe=s.value+1,le=d.value[oe];return(le==null?void 0:le.type)==="bid"?(s.value=oe,o.value=!1,Te()):(o.value=!0,z(),s.value>=d.value.length-1&&S()),F}function z(){var O;if(a.auctionComplete)return;if(xe(s.value+1)===-1){const F=((O=t.value)==null?void 0:O.auction)||[];for(;a.currentBidIndex<F.length;)a.displayedBids.push(F[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function re(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function ne(T,O){if(!t.value||!Q.value)return!1;const F=Y.value;if(!F)return!1;const W=(T+O).toUpperCase(),I=s.value;let D=!1,Z="";F.anyOf?(D=F.cards.includes(W),Z=F.cards[0]):(D=W===F.card,Z=F.card),D?I in i.wrongStepIndices&&delete i.wrongStepIndices[I]:(i.wrongStepIndices[I]=!0,i.boardHadWrong=!0);const oe=u.value?Date.now()-u.value:0;return i.promptHistory.push({type:"card",expected_card:Z,student_card:W,correct:D,time_ms:oe}),u.value=null,D||X(!1),r.answered[I]=!0,D?(r.wrongCard=null,r.correctCard=null):(r.wrongCard=W,r.correctCard=Z),Ce(),D}function de(){r.wrongCard=null,r.correctCard=null}function Ce(){var T,O;if(x.value||Q.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,ce(),((T=d.value[s.value])==null?void 0:T.type)==="bid"&&Te(),((O=d.value[s.value])==null?void 0:O.type)==="choose-card"&&(u.value=Date.now()),s.value>=d.value.length-1){const F=d.value[s.value];(F==null?void 0:F.type)!=="bid"&&(F==null?void 0:F.type)!=="choose-card"&&S()}return!0}return S(),!1}function S(){n.value=!0,k()}function k(){if(!d.value.some(W=>W.type==="bid"||W.type==="choose-card"))return;i.boardHadWrong?i.wrongCount++:i.correctCount++;const O=Object.keys(i.wrongStepIndices).length===0,F=!i.boardHadWrong||O;X(F)}function P(){if(re(),de(),o.value)return o.value=!1,G(s.value),!0;if(s.value>0){const T=s.value-1,O=d.value[T];return r.answered[T]&&delete r.answered[T],(O==null?void 0:O.type)==="bid"&&G(T),s.value=T,n.value=!1,o.value=!1,ce(),!0}return!1}function G(T){var D;const O=d.value[T];if(!O||O.type!=="bid")return;const F=te(O.bid),W=((D=t.value)==null?void 0:D.auction)||[];let I=0;for(let Z=0;Z<W.length;Z++)if(te(W[Z])===F){I=Z;break}a.currentBidIndex=I,a.displayedBids=W.slice(0,I),a.auctionComplete=!1,u.value=Date.now(),f.value=1}async function X(T){if(!t.value)return;const O=T?i.boardHadWrong?"corrected":"correct":"failed";try{await e.recordObservation({observationId:i.observationId,deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:T?"PASS":"FAIL",correct:T,attemptNumber:1,timeTakenMs:0,prompts:[...i.promptHistory],boardResult:O})}catch(F){console.error("Failed to record board observation:",F)}}function J(T){var O,F;t.value=T,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,r.answered={},r.wrongCard=null,r.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},i.promptHistory=[],i.observationId=crypto.randomUUID(),c.value={N:[],E:[],S:[],W:[]},u.value=null,f.value=1,(O=T==null?void 0:T.steps)!=null&&O.length&&(ce(),((F=T.steps[0])==null?void 0:F.type)==="bid"&&Te())}function se(){i.correctCount=0,i.wrongCount=0}function te(T){if(!T)return"";const F=T.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return F==="PASS"||F==="P"?"PASS":F==="X"||F==="DBL"||F==="DOUBLE"?"X":F==="XX"||F==="RDBL"||F==="REDOUBLE"?"XX":F.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:r,boardState:i,steps:d,hasSteps:p,currentStep:h,hasBidSteps:g,isBidStep:y,commentaryStartIndex:$,studentSeat:C,currentTurnSeat:_,isStudentTurn:w,hasBidPrompt:x,lastContractBid:R,canDouble:L,canRedouble:B,canGoBack:K,hasCardChoice:Q,currentChooseCard:Y,hiddenSeats:$e,hands:pe,showHcp:V,showcardsPlayedCards:ue,isComplete:A,showAuctionTable:q,showOpeningLead:U,openingLead:H,advance:Ce,makeBid:je,clearFeedback:re,goBack:P,makeCardChoice:ne,clearCardFeedback:de,loadDeal:J,resetStats:se,observationStore:e}}const Jo="bridgePractice",iu="bridgePracticeUIPrefs",lt=E({teacherName:null,availableClassrooms:[],configuredAt:null}),yn=E({showLoadPbnOption:!1}),Yo=E(!1);function cu(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function uu(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:cu(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Qm(){return new URLSearchParams(window.location.search).get("collection")}function Zm(){return new URLSearchParams(window.location.search).get("lesson")}function eh(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function th(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function sh(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function nh(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const oh=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function du(){try{const e=localStorage.getItem(Jo);if(e){const t=JSON.parse(e);t.appConfig&&(lt.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function ah(){try{const e=localStorage.getItem(iu);if(e){const t=JSON.parse(e);yn.value={...yn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function rh(){try{localStorage.setItem(iu,JSON.stringify(yn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function lh(e,t){yn.value[e]=t,rh()}function Xr(){try{const e=localStorage.getItem(Jo),t=e?JSON.parse(e):{};t.appConfig=lt.value,localStorage.setItem(Jo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function fu(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function ih(){if(Yo.value)return;du(),ah();const{teacher:e,classrooms:t}=uu();(e||t.length>0)&&(e&&!lt.value.teacherName&&(lt.value.teacherName=e),t.length>0&&(lt.value.availableClassrooms=fu(lt.value.availableClassrooms||[],t)),lt.value.configuredAt||(lt.value.configuredAt=new Date().toISOString()),Xr()),Yo.value=!0}function ch(){try{const e=localStorage.getItem(Jo);return e?JSON.parse(e):null}catch{return null}}function uh(){lt.value={teacherName:null,availableClassrooms:[],configuredAt:null},Xr(),Yo.value=!1}function mo(){const e=N(()=>lt.value.availableClassrooms.length===0),t=N(()=>lt.value.availableClassrooms.length>1),s=N(()=>lt.value.availableClassrooms.length===1),n=N(()=>s.value?lt.value.availableClassrooms[0]:null),o=N(()=>lt.value.teacherName),a=N(()=>lt.value.availableClassrooms),r=N(()=>yn.value.showLoadPbnOption);return{appConfig:lt,initialized:Yo,uiPrefs:yn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:r,initializeFromUrl:ih,loadFromStorage:du,saveToStorage:Xr,clearConfig:uh,getStorageData:ch,getCollectionFromUrl:Qm,setCollectionInUrl:eh,getLessonFromUrl:Zm,setLessonInUrl:th,getDealFromUrl:sh,setDealInUrl:nh,setUIPref:lh,COLLECTIONS:oh,parseUrlParams:uu,classroomIdToName:cu,mergeClassrooms:fu}}const dh="https://api.bridge-classroom.com/api",fh="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Qr=E([]),nt=E([]),qo=E(!1),Xo=E(null),Gn=E(null),Qo=E(!1),ph=5*60*1e3;async function vh(e){const t=await fetch(`${dh}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":fh}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function mh(e,t){try{return{...await qr(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function hh(){return cs().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function pu(e=!1){const s=He().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=hh();if(!e&&Gn.value&&Date.now()-new Date(Gn.value).getTime()<ph&&nt.value.length>0)return gh(n),{success:!0,cached:!0};qo.value=!0,Xo.value=null;let o=[];try{const i=await vh(s.id);if(Qr.value=i,s.secretKey&&i.length>0){const c=i.map(f=>mh(f,s.secretKey));o=(await Promise.all(c)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Xo.value=i.message)}const a=new Set(o.map(i=>i.id)),r=n.filter(i=>!a.has(i.id));return nt.value=[...o,...r],Gn.value=new Date().toISOString(),qo.value=!1,{success:!0,count:nt.value.length}}function gh(e){const t=new Set(nt.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(nt.value=[...nt.value,...s])}async function yh(){if(Qo.value)return;He().isAuthenticated.value&&await pu(),Qo.value=!0}function bh(){Qr.value=[],nt.value=[],Gn.value=null,Qo.value=!1}function vu(){const e={};for(const t of nt.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function hi(){const e={};for(const t of nt.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function gi(){const e={};for(const t of nt.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function yi(e=10){return[...nt.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function bi(){const e=new Date().toISOString().split("T")[0];return nt.value.filter(t=>t.timestamp.startsWith(e))}function _i(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return nt.value.filter(n=>n.timestamp>=s)}function _h(){const e=vu(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let r=1;r<t.length;r++){const i=new Date(t[r]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Zr(){const e=N(()=>nt.value.length),t=N(()=>nt.value.filter(h=>h.correct).length),s=N(()=>nt.value.filter(h=>!h.correct).length),n=N(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=N(()=>{const h=bi(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=N(()=>{const h=_i(),g=h.filter($=>$.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),r=N(()=>_h()),i=N(()=>hi()),c=N(()=>gi()),u=N(()=>yi(20)),f=N(()=>nt.value.length>0),d=N(()=>qo.value),p=N(()=>Xo.value!==null);return{observations:Qr,decryptedObservations:nt,loading:qo,error:Xo,lastFetchedAt:Gn,initialized:Qo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:r,skillStats:i,sessions:c,recentObservations:u,hasData:f,isLoading:d,hasError:p,initialize:yh,fetchProgress:pu,clearCache:bh,getObservationsByDate:vu,getStatsBySkill:hi,getSessions:gi,getRecentObservations:yi,getTodayObservations:bi,getThisWeekObservations:_i}}const Ds={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},kt={NONE:"none",SILVER:"silver",GOLD:"gold"},wh=6;function Sh(e){return e.slice(0,10)}function mu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function hu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const wi=60*60*1e3;function gu(e){if(e.length===0)return Ds.GREY;const t=e[e.length-1];if(!t.correct)return Ds.RED;const s=Date.now()-wi;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return Ds.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return Ds.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=wi?Ds.ORANGE:Ds.GREEN}function yu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function bu(e){if(e.length===0)return kt.NONE;const t=new Set;for(const r of e)t.add(Sh(r.timestamp));const s=[...t].filter(r=>yu(e,r)).sort();if(s.length<2)return kt.NONE;let n=1,o=1,a=s[0];for(let r=1;r<s.length;r++)mu(a,s[r])>=wh&&(o++,a=s[r],o>n&&(n=o));return n>=3?kt.GOLD:n>=2?kt.SILVER:kt.NONE}function Ch(e){const t=e.observations.value||[];let s=[];try{s=cs().getPendingObservations().filter(i=>i.metadata).map(i=>{const c=i.metadata;return{id:c.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:c.timestamp||i.queuedAt,skill_path:c.skill_path,correct:c.correct,deal_subfolder:c.deal_subfolder,deal_number:c.deal_number,session_id:c.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function $h(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var c;return(i.deal_number??((c=i.deal)==null?void 0:c.deal_number))===o}).sort((i,c)=>i.timestamp.localeCompare(c.timestamp)),r=hu(a);return{boardNumber:o,status:gu(a),achievement:bu(a),attemptCount:r.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function kh(e){return!e||e.length===0?{achievement:kt.NONE}:e.every(n=>n.achievement===kt.GOLD)?{achievement:kt.GOLD}:e.every(n=>n.achievement===kt.SILVER||n.achievement===kt.GOLD)?{achievement:kt.SILVER}:{achievement:kt.NONE}}const _u="bridgeLessonBoards",lo=E(xh()),Da=new Set;function xh(){try{const e=localStorage.getItem(_u);return e?JSON.parse(e):{}}catch{return{}}}function Ah(){try{localStorage.setItem(_u,JSON.stringify(lo.value))}catch{}}function wu(e,t){lo.value={...lo.value,[e]:t},Ah()}function Th(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Nh(e){const t=mo(),s=e.filter(n=>!lo.value[n]&&!Da.has(n));if(s.length!==0){for(const n of s)Da.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,r=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(r);if(!i.ok)continue;const c=await i.text(),u=Th(c);if(u.length>0){wu(n,u);break}}catch{continue}}}finally{Da.delete(n)}}))}}function Eh(e){var n,o;const t=lo.value,s={};for(const a of e){const r=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!r||i==null||(s[r]||(s[r]={boards:new Set,lastActivity:a.timestamp}),s[r].boards.add(i),a.timestamp>s[r].lastActivity&&(s[r].lastActivity=a.timestamp))}return Object.entries(s).map(([a,r])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:r.lastActivity};const c=Math.max(...r.boards),u=[];for(let f=1;f<=c;f++)u.push(f);return{subfolder:a,boardNumbers:u,lastActivity:r.lastActivity}})}function ys(){const e=_s();function t(){return Ch(e)}return{STATUS:Ds,ACHIEVEMENT:kt,getObservations:t,computeBoardMastery:$h,computeLessonAchievement:kh,extractLessonsFromObservations:Eh,saveLessonBoardNumbers:wu,fetchMissingBoardCounts:Nh,groupIntoBoardAttempts:hu,calculateCurrentStatus:gu,calculateAchievement:bu,hasGreenDay:yu,daysBetween:mu}}const Xs="https://api.bridge-classroom.com/api",Qs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Zo=E(!1),io=E(null),ya=E([]),bs=E({}),co=E({}),ea=E(!1),ta=E(null),el=E(!1),sa={},Oh=2*60*1e3,zn={};let Lo=null;async function Ih(){var s;const e=He(),t=e.currentUser.value;if(!t||!t.email){Zo.value=!1;return}try{const n=await fetch(`${Xs}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Qs}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;io.value=a.id;const r=await fetch(`${Xs}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Qs}});if(!r.ok)return;const c=(await r.json()).grants||[],u=new Set(c.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(u.size===0)return;const f=await fetch(`${Xs}/users`,{headers:{"x-api-key":Qs}});if(!f.ok)return;const p=(await f.json()).users||[],h=(s=t.email)==null?void 0:s.toLowerCase();if(ya.value=p.filter(g=>{var y;return u.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==h}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Zo.value=!0,el.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Xs}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Qs},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Su(e){const t=bs.value[e],s=sa[e];if(t&&s&&Date.now()-s<Oh)return t;try{const n=await fetch(`${Xs}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Qs}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=(await n.json()).observations||[],r=a.map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number}));return co.value={...co.value,[e]:a},bs.value={...bs.value,[e]:r},sa[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Rh(){ea.value=!0,ta.value=null;try{await Promise.allSettled(ya.value.map(s=>Su(s.id)));const e=ys(),t=new Set;for(const s of Object.values(bs.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){ta.value=e.message,console.error("Failed to load student summaries:",e)}finally{ea.value=!1}}function Dh(e){const t=bs.value[e]||[];if(t.length===0)return{green:0,blue:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=ys(),n=s.extractLessonsFromObservations(t),o={green:0,blue:0,orange:0,yellow:0,red:0,grey:0};for(const r of n){const i=s.computeBoardMastery(t,r.subfolder,r.boardNumbers);for(const c of i)o[c.status]=(o[c.status]||0)+1}let a=null;for(const r of t)(!a||r.timestamp>a)&&(a=r.timestamp);return{...o,total:o.green+o.blue+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Ph(e,t=3){const s=bs.value[e]||[],n=_s(),o={};for(const a of s){const r=a.deal_subfolder;r&&(!o[r]||a.timestamp>o[r])&&(o[r]=a.timestamp)}return Object.entries(o).sort(([,a],[,r])=>r.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function Lh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),r=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:r<7?`${r}d ago`:s.toLocaleDateString()}function Bh(){try{const s=JSON.parse(sessionStorage.getItem("bridgeTeacherSession")||"null");if(s!=null&&s.privateKeyBase64&&(!s.expiry||new Date(s.expiry)>=new Date))return s.privateKeyBase64}catch{}const t=He().currentUser.value;return t!=null&&t.viewerPrivateKey?(sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:t.viewerPrivateKey,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()})),t.viewerPrivateKey):null}async function Cu(e){if(zn[e])return zn[e];const t=Bh();if(!t)return null;if(!Lo&&io.value)try{const n=await fetch(`${Xs}/grants?grantee_id=${io.value}`,{headers:{"x-api-key":Qs}});n.ok&&(Lo=(await n.json()).grants||[])}catch{return null}const s=(Lo||[]).find(n=>n.grantor_id===e);if(!s)return null;try{const n=await im(s.encrypted_payload,t);return zn[e]=n,n}catch(n){return console.error(`Failed to decrypt grant for student ${e}:`,n),null}}async function $u(e,t){if(!t.encrypted_data||!t.iv)return null;const s=await Cu(e);if(!s)return null;try{return{...await qr(t.encrypted_data,t.iv,s),id:t.id,timestamp:t.timestamp,skill_path:t.skill_path,correct:t.correct,deal_subfolder:t.deal_subfolder,deal_number:t.deal_number}}catch(n){return console.error("Failed to decrypt observation:",t.id,n),null}}async function Mh(e,t,s,n){const a=(co.value[e]||[]).find(r=>{const i=new Date(r.timestamp).getTime();return Math.abs(i-t)<1e3&&r.deal_number===s&&r.correct===n});return a?$u(e,a):null}function Uh(){Zo.value=!1,io.value=null,ya.value=[],bs.value={},co.value={},ea.value=!1,ta.value=null,el.value=!1,Lo=null;for(const e of Object.keys(zn))delete zn[e];for(const e of Object.keys(sa))delete sa[e]}function wn(){return{isTeacher:Zo,viewerId:io,students:ya,studentObservations:bs,loading:ea,error:ta,initialized:el,checkTeacherStatus:Ih,fetchStudentObservations:Su,loadAllStudentSummaries:Rh,getStudentMasterySummary:Dh,getStudentRecentLessons:Ph,formatTimeSince:Lh,findAndDecryptObservation:Mh,decryptStudentObservation:$u,getStudentKey:Cu,studentRawObservations:co,reset:Uh}}const cr="https://api.bridge-classroom.com/api",ur="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",dr=E(!1),Zs=E(null),ss=E(null),uo=E([]),bn=E([]),tl=E("lessons"),ba=E(!0),Sn=E(!1),ho=E([]);function Fh(e){Sn.value=!0,ho.value=e}function jh(){Sn.value=!1,ho.value=[]}function go(){return Sn.value?ho.value:uo.value}async function ku(){const e=He(),t=wn(),s=e.currentUser.value;if(!s){bn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${cr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":ur}});if(o.ok){const{grants:a}=await o.json(),r=await fetch(`${cr}/users`,{headers:{"x-api-key":ur}});if(r.ok){const{users:i}=await r.json(),c=new Set(a.map(u=>u.grantor_id));for(const u of i)c.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}bn.value=n}async function sl(e=!1){if(Sn.value)return{success:!0};const t=He(),s=Zr(),n=t.currentUser.value;if(!n)return Zs.value="No authenticated user",{success:!1,error:Zs.value};dr.value=!0,Zs.value=null;try{if(!ss.value||ss.value===n.id)ss.value=n.id,await s.fetchProgress(e),uo.value=s.decryptedObservations.value;else{const o=await fetch(`${cr}/observations?user_id=${ss.value}&limit=10000`,{headers:{"x-api-key":ur}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();uo.value=a.observations||[]}return{success:!0}}catch(o){return Zs.value=o.message,{success:!1,error:o.message}}finally{dr.value=!1}}async function Hh(e){ss.value=e,await sl(!0)}const fr=N(()=>{var n;const e=go(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:Tu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),pr=N(()=>{const e=go(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=sm(o),r=Xc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:nm(a).name,skillName:r.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),xu=N(()=>ba.value?fr.value.filter(e=>e.total>0):fr.value),Au=N(()=>ba.value?pr.value.filter(e=>e.total>0):pr.value);function Tu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Wh=N(()=>tl.value==="lessons"?xu.value:Au.value),Kh=N(()=>bn.value.length>1),Vh=N(()=>bn.value.find(e=>e.id===ss.value)||null),Gh=N(()=>go().length>0),zh=N(()=>go().length),Jh=N(()=>{const e=go();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Yh(){const t=He().currentUser.value;t&&(ss.value=t.id,await ku(),await sl())}function qh(){uo.value=[],bn.value=[],ss.value=null,tl.value="lessons",ba.value=!0,Zs.value=null,Sn.value=!1,ho.value=[]}function _s(){return{loading:dr,error:Zs,selectedUserId:ss,observations:uo,accessibleUsers:bn,activeTab:tl,onlyWithObservations:ba,useTestData:Sn,testObservations:ho,enableTestMode:Fh,disableTestMode:jh,lessonStats:fr,taxonStats:pr,filteredLessonStats:xu,filteredTaxonStats:Au,currentStats:Wh,canViewOtherUsers:Kh,selectedUser:Vh,hasData:Gh,totalObservations:zh,overallSuccessRate:Jh,initialize:Yh,loadAccomplishments:sl,selectUser:Hh,fetchAccessibleUsers:ku,reset:qh,formatLessonName:Tu}}const Xh="https://api.bridge-classroom.com/api",Qh="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Vt=Lt({}),vr=E(!1),Zh=60*60*1e3;async function eg(e,t=null,s=!1){var o,a;if(!e)return[];const n=`${e}::${t||"__all__"}`;if(!s&&Vt[n]&&Date.now()-Vt[n].fetchedAt<3e4)return Vt[n].boards;vr.value=!0;try{let r=`${Xh}/board-status?user_id=${encodeURIComponent(e)}`;t&&(r+=`&deal_subfolder=${encodeURIComponent(t)}`);const i=await fetch(r,{headers:{"x-api-key":Qh}});if(!i.ok)return console.error("Failed to fetch board status:",i.status),((o=Vt[n])==null?void 0:o.boards)||[];const u=(await i.json()).boards||[];return Vt[n]={boards:u,fetchedAt:Date.now()},u}catch(r){return console.error("Failed to fetch board status:",r),((a=Vt[n])==null?void 0:a.boards)||[]}finally{vr.value=!1}}function tg(e=null,t=null){if(!e){for(const n in Vt)delete Vt[n];return}const s=`${e}::`;for(const n in Vt)n.startsWith(s)&&(!t||n===`${e}::${t}`||n===`${e}::__all__`)&&delete Vt[n]}function Nu(e,t){switch(e){case"failed":return"red";case"corrected":return t&&Date.now()-new Date(t).getTime()<Zh?"yellow":"orange";case"fresh_correct":return"blue";case"clean_correct":return"green";case"not_attempted":default:return"grey"}}function sg(e,t){const s={};for(const n of e)s[n.deal_number]=n;return t.map(n=>{const o=s[n];return o?{boardNumber:n,status:Nu(o.status,o.last_observation_at),achievement:o.achievement||"none",lastObservationAt:o.last_observation_at}:{boardNumber:n,status:"grey",achievement:"none",lastObservationAt:null}})}function ng(e,t){try{const n=cs().getPendingObservations();for(const o of n){if(!o.metadata||o.metadata.deal_subfolder!==t)continue;const a=o.metadata.deal_number,r=e.find(c=>c.boardNumber===a);if(!r)continue;const i=o.metadata.board_result;i==="failed"?r.status="red":i==="corrected"?r.status="yellow":i==="correct"?r.status="green":r.status=o.metadata.correct?"green":"red"}}catch{}}function nl(){return{loading:vr,fetchBoardStatus:eg,invalidateCache:tg,getDisplayColor:Nu,buildBoardMastery:sg,mergeLocalPending:ng}}const og="https://api.bridge-classroom.com/api",ag=5e3,mr=20;let hs=[],Jn=null;function Gt(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),hs.push(n),hs.length>=mr?Yn():Jn||(Jn=setTimeout(Yn,ag))}async function Yn(){if(Jn&&(clearTimeout(Jn),Jn=null),hs.length===0)return;const e=hs.splice(0);try{await fetch(`${og}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{hs.unshift(...e),hs.length>mr*2&&(hs=hs.slice(-mr))}}const ol="https://api.bridge-classroom.com/api",Eu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",xt=E("idle"),Ou=E(null),qs=E(null),en=E(0),tn=E(navigator.onLine),Ln=E(!1),Si=5,rg=1e3,lg=6e4,ig=5e3;let cn=null;function cg(e){const t=Math.min(rg*Math.pow(2,e),lg);return t+Math.random()*t*.25}async function Iu(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${ol}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return Gt("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return Gt("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function Ru(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${ol}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Eu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function yo(){var n,o;const e=He(),t=cs();if(!navigator.onLine)return xt.value="offline",{success:!1,offline:!0};xt.value="syncing",qs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const c=await Iu(a);if(c.success)e.updateUser(a.id,{serverRegistered:!0}),Ln.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(c.error==="email_exists")return Gt("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),xt.value="error",qs.value="Account already exists. Please use recovery.",Ln.value=!0,s;Gt("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,c.error),Ln.value=!0,qs.value=`Registration failed: ${c.error}`}}const r=await t.encryptPendingObservations();r>0&&console.log(`Encrypted ${r} observations`);let i=!1;if(a!=null&&a.dataConsent){const c=t.getPendingObservations();if(c.length>0){const u=await Ru(c);if(u.success&&u.synced>0){const f=c.filter(d=>d.encrypted).slice(0,u.synced).map(d=>{var p;return(p=d.metadata)==null?void 0:p.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await _s().loadAccomplishments(!0)}catch{}try{nl().invalidateCache(a==null?void 0:a.id)}catch{}t.removeSyncedObservations(f)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,qs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return Ln.value||i?xt.value="error":(xt.value="idle",Ou.value=new Date().toISOString(),en.value=0),s}catch(a){return console.error("Sync failed:",a),qs.value=a.message,xt.value="error",s.success=!1,s}}function hr(){cn&&clearTimeout(cn),cn=setTimeout(async()=>{await yo()},ig)}async function Du(){return cn&&(clearTimeout(cn),cn=null),await yo()}async function Pu(){if(en.value>=Si){console.log("Max retries reached, giving up"),xt.value="error";return}const e=cg(en.value);en.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${en.value}/${Si})`),setTimeout(async()=>{const t=await yo();!t.success&&t.offline!==!0&&Pu()},e)}function ug(){var i;const e=He(),t=cs(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(c=>c.encrypted);if(o.length===0)return;const a={observations:o.map(c=>({encrypted_data:c.encrypted_data,iv:c.iv,metadata:c.metadata}))},r=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${ol}/observations?api_key=${Eu}`,r),console.log("Sent beacon with",o.length,"observations")}function dg(){window.addEventListener("online",()=>{tn.value=!0,console.log("Back online, triggering sync"),Du()}),window.addEventListener("offline",()=>{tn.value=!1,xt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&tn.value&&(console.log("Tab visible, triggering sync"),hr())}),window.addEventListener("beforeunload",ug),setInterval(()=>{document.visibilityState==="visible"&&tn.value&&hr()},5*60*1e3)}async function fg(){dg(),navigator.onLine?await yo():xt.value="offline"}function Lu(){const e=N(()=>xt.value==="syncing"),t=N(()=>xt.value==="offline"||!tn.value),s=N(()=>xt.value==="error"),n=N(()=>cs().pendingCount.value>0);return{syncState:xt,lastSyncAt:Ou,lastError:qs,retryCount:en,isOnline:tn,registrationFailed:Ln,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:fg,performSync:yo,triggerSync:hr,forceSync:Du,retrySync:Pu,registerUserWithServer:Iu,syncObservationsToServer:Ru}}const al="https://api.bridge-classroom.com/api",Bu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ns=E(null),gr=E(!1),bo=E(null);async function pg(){gr.value=!0;try{const e=await fetch(`${al}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=ns.value;ns.value=t.announcement||null,ns.value&&(!s||s.id!==ns.value.id)&&(bo.value=null)}catch{}finally{gr.value=!1}}async function vg(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${al}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Bu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return ns.value=a.announcement||null,bo.value=null,a}async function mg(){const e=await fetch(`${al}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Bu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);ns.value=null,bo.value=null}function hg(){ns.value&&(bo.value=ns.value.id)}function rl(){return{announcement:ns,loading:gr,dismissed:bo,loadAnnouncement:pg,setAnnouncement:vg,clearAnnouncement:mg,dismiss:hg}}const xs="https://api.bridge-classroom.com/api",As="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",On=E([]),Ts=E([]),Pa=E(null),Tt=E(!1),Me=E(null);function Cn(){async function e(c){Tt.value=!0,Me.value=null;try{const u=await fetch(`${xs}/assignments?student_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":As}});if(!u.ok){const d=await u.text();return Me.value=d||`Server error (${u.status})`,null}const f=await u.json();if(f.success){const d=new Map;for(const p of f.assignments){const h=d.get(p.exercise_id);(!h||p.attempted_boards>h.attempted_boards)&&d.set(p.exercise_id,p)}On.value=Array.from(d.values())}else Me.value=f.error||"Failed to fetch assignments";return f}catch(u){return console.error("Failed to fetch student assignments:",u),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function t(c){Tt.value=!0,Me.value=null;try{const u=await fetch(`${xs}/assignments?assigned_by=${encodeURIComponent(c)}`,{headers:{"x-api-key":As}});if(!u.ok){const d=await u.text();return Me.value=d||`Server error (${u.status})`,null}const f=await u.json();return f.success?Ts.value=f.assignments:Me.value=f.error||"Failed to fetch assignments",f}catch(u){return console.error("Failed to fetch teacher assignments:",u),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function s(c){Tt.value=!0,Me.value=null;try{const u=await fetch(`${xs}/assignments?classroom_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":As}});if(!u.ok){const d=await u.text();return Me.value=d||`Server error (${u.status})`,null}const f=await u.json();return f.success?f.assignments:(Me.value=f.error||"Failed to fetch assignments",[])}catch(u){return console.error("Failed to fetch classroom assignments:",u),Me.value="Unable to connect to server",[]}finally{Tt.value=!1}}async function n(c){Tt.value=!0,Me.value=null;try{const u=await fetch(`${xs}/assignments/${encodeURIComponent(c)}`,{headers:{"x-api-key":As}});if(!u.ok){const d=await u.text();return Me.value=d||`Server error (${u.status})`,null}const f=await u.json();return f.success?Pa.value=f.assignment:Me.value=f.error||"Failed to fetch assignment",f}catch(u){return console.error("Failed to fetch assignment detail:",u),Me.value="Unable to connect to server",null}finally{Tt.value=!1}}async function o({exercise_id:c,classroom_id:u,student_id:f,assigned_by:d,due_at:p,sort_order:h}){Tt.value=!0,Me.value=null;try{const g=await fetch(`${xs}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":As},body:JSON.stringify({exercise_id:c,classroom_id:u||null,student_id:f||null,assigned_by:d,due_at:p||null,sort_order:h??null})});if(!g.ok){const $=await g.text();return Me.value=$||`Server error (${g.status})`,{success:!1,error:Me.value}}const y=await g.json();return y.success?Ts.value=[y.assignment,...Ts.value]:Me.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),Me.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Tt.value=!1}}async function a(c){try{const u=await fetch(`${xs}/assignments/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":As}});if(!u.ok){const d=await u.text();return Me.value=d||`Server error (${u.status})`,{success:!1,error:Me.value}}const f=await u.json();return f.success&&(Ts.value=Ts.value.filter(d=>d.id!==c),On.value=On.value.filter(d=>d.id!==c)),f}catch(u){return console.error("Failed to delete assignment:",u),{success:!1,error:"Unable to connect to server"}}}async function r(c){try{const u=await fetch(`${xs}/exercises/${encodeURIComponent(c)}`,{headers:{"x-api-key":As}});if(!u.ok)return null;const f=await u.json();return f.success?f.exercise.boards:null}catch(u){return console.error("Failed to fetch exercise boards:",u),null}}function i(){On.value=[],Ts.value=[],Pa.value=null,Tt.value=!1,Me.value=null}return{studentAssignments:On,teacherAssignments:Ts,currentAssignment:Pa,loading:Tt,error:Me,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:r,reset:i}}const gg={key:0,class:"minimal-hand"},yg={class:"seat-label-inline"},bg={class:"seat-label"},_g={key:0,class:"suits"},wg={key:0,class:"suit-row"},Sg={key:0,class:"cards clickable-cards"},Cg=["onClick"],$g={key:1,class:"cards"},kg={key:2,class:"cards"},xg={key:1,class:"hidden-hand"},Ag={key:2,class:"hcp"},Tg={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Yc,n=N(()=>ar(t.seat)),o=N(()=>Yv(t.hand)),a=N(()=>t.hand?s.reduce(($,C)=>{var _;return $+(((_=t.hand[C])==null?void 0:_.length)||0)},0):0),r=N(()=>a.value>0&&a.value<5);function i($){return t.hand&&t.hand[$]&&t.hand[$].length>0}function c($){return Gr[$]}function u($){return zv($)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d($){return f[$]||$}function p($){if(!t.hand||!t.hand[$])return"";const C=t.hand[$];return C.length===0?"":C.map(Ra).join(" ")}const h=N(()=>t.playedCards&&t.playedCards.length>0),g=N(()=>{if(!t.playedCards)return null;const $=new Set;for(const C of t.playedCards){const _=C[0].toUpperCase(),w=C.slice(1).toUpperCase(),x={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];x&&$.add(`${x}:${w}`)}return $});function y($,C){return g.value?g.value.has(`${$}:${C}`):!1}return($,C)=>(v(),m("div",{class:ie(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(v(),m("div",gg,[l("span",yg,b(e.seat),1),(v(!0),m(ee,null,ae(M(s),_=>(v(),m("span",{key:_,class:ie(["suit-symbol-inline",u(_)])},b(c(_)),3))),128))])):(v(),m(ee,{key:1},[l("div",bg,b(n.value),1),!e.hidden&&e.hand?(v(),m("div",_g,[(v(!0),m(ee,null,ae(M(s),_=>(v(),m(ee,{key:_},[!r.value||i(_)?(v(),m("div",wg,[l("span",{class:ie(["suit-symbol",u(_)])},b(c(_)),3),e.clickable?(v(),m("span",Sg,[(v(!0),m(ee,null,ae(e.hand[_],w=>(v(),m("span",{key:w,class:ie(y(_,w)?"card-played":"card-clickable"),onClick:x=>!y(_,w)&&$.$emit("card-click",{suit:d(_),rank:w})},b(M(Ra)(w)),11,Cg))),128))])):h.value?(v(),m("span",$g,[(v(!0),m(ee,null,ae(e.hand[_],w=>(v(),m("span",{key:w,class:ie({"card-played":y(_,w)})},b(M(Ra)(w)),3))),128))])):(v(),m("span",kg,b(p(_)),1))])):j("",!0)],64))),128))])):e.hidden?(v(),m("div",xg,[...C[0]||(C[0]=[l("div",{class:"card-back"},null,-1)])])):j("",!0),e.showHcp&&e.hand&&!e.hidden&&!r.value?(v(),m("div",Ag,b(o.value)+" HCP ",1)):j("",!0)],64))],2))}},To=we(Tg,[["__scopeId","data-v-128fc7ed"]]),Ng={class:"ns-column north-row"},Eg={key:0,class:"position north"},Og={key:0,class:"position west"},Ig={class:"center"},Rg={key:1,class:"position east"},Dg={class:"ns-column south-row"},Pg={key:0,class:"position south"},Lg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,r;return v(),m("div",{class:ie(["bridge-table",{compact:e.compact}])},[l("div",Ng,[!e.hiddenSeats.includes("N")&&e.hands.N?(v(),m("div",Eg,[ye(To,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(v(),m("div",Og,[ye(To,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0),l("div",Ig,[df(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(v(),m("div",Rg,[ye(To,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0),l("div",Dg,[!e.hiddenSeats.includes("S")&&e.hands.S?(v(),m("div",Pg,[ye(To,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(r=e.playedCards)==null?void 0:r.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0)])],2)}}},Bg=we(Lg,[["__scopeId","data-v-ec6230a9"]]),Mg={class:"bidding-box"},Ug={class:"bid-section"},Fg={class:"levels"},jg=["onClick"],Hg={class:"strains"},Wg=["disabled","onClick"],Kg=["innerHTML"],Vg={class:"special-bids"},Gg=["disabled"],zg=["disabled"],Jg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=E(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],r=N(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=N(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],p=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!p)return-1;const h=p[1].toUpperCase();return d.indexOf(h==="N"?"NT":h)});function c(d){o.value=d}function u(d,p){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(p);return d>r.value||d===r.value&&g>i.value}function f(d,p){u(d,p)&&n("bid",`${d}${p}`)}return(d,p)=>(v(),m("div",Mg,[l("div",Ug,[l("div",Fg,[(v(),m(ee,null,ae(7,h=>l("button",{key:h,class:ie(["level-btn",{active:o.value===h}]),onClick:g=>c(h)},b(h),11,jg)),64))]),l("div",Hg,[(v(),m(ee,null,ae(a,h=>l("button",{key:h.value,class:ie(["strain-btn",[h.colorClass,{disabled:!u(o.value,h.value)}]]),disabled:!u(o.value,h.value),onClick:g=>f(o.value,h.value)},[l("span",{innerHTML:h.display},null,8,Kg)],10,Wg)),64))])]),l("div",Vg,[l("button",{class:"special-btn pass",onClick:p[0]||(p[0]=h=>d.$emit("bid","Pass"))}," Pass "),l("button",{class:"special-btn double",disabled:!e.canDouble,onClick:p[1]||(p[1]=h=>d.$emit("bid","X"))}," Double ",8,Gg),l("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:p[2]||(p[2]=h=>d.$emit("bid","XX"))}," Redouble ",8,zg)])]))}},Yg=we(Jg,[["__scopeId","data-v-38ccb98f"]]),qg={class:"auction-table"},Xg={class:"rounds"},Qg=["innerHTML"],Zg={key:1,class:"turn-indicator"},ey={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=N(()=>["W","N","E","S"].indexOf(t.dealer)),n=N(()=>{const u=[],f=t.bids;let d=0,p=0;for(;d<f.length||p===0&&f.length>0;){const h=[null,null,null,null],g=p===0?s.value:0;for(let y=g;y<4&&d<f.length;y++)h[y]=f[d],d++;if(h.some(y=>y!==null)&&u.push(h),p++,p>20)break}if(t.currentBidIndex>=f.length){const h=u[u.length-1],g=h?h.filter(y=>y!==null).length:0;if(u.length===1&&s.value,g===4||u.length>1&&g===4){const y=[null,null,null,null];u.push(y)}}return u});function o(u,f){return u===0?f-s.value:4-s.value+(u-1)*4+f}function a(u,f){const d=o(u,f);return d===t.currentBidIndex&&d>=t.bids.length}function r(u,f){return t.wrongBidIndex<0?!1:o(u,f)===t.wrongBidIndex}function i(u,f){return t.correctBidIndex<0?!1:o(u,f)===t.correctBidIndex}function c(u){return zr(u).html}return(u,f)=>(v(),m("div",qg,[f[0]||(f[0]=no('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),l("div",Xg,[(v(!0),m(ee,null,ae(n.value,(d,p)=>(v(),m("div",{key:p,class:"round"},[(v(!0),m(ee,null,ae(d,(h,g)=>(v(),m("div",{key:g,class:ie(["bid-cell",{"current-turn":a(p,g),"wrong-bid":r(p,g),"correct-bid":i(p,g)}])},[h?(v(),m("span",{key:0,innerHTML:c(h)},null,8,Qg)):e.showTurnIndicator&&a(p,g)?(v(),m("span",Zg,"?")):j("",!0)],2))),128))]))),128))])]))}},ty=we(ey,[["__scopeId","data-v-ac265db8"]]),sy={class:"deal-info"},ny={class:"board-number"},oy={key:0,class:"board-popup"},ay={class:"popup-list"},ry=["onClick"],ly={class:"info-row"},iy={class:"info-item"},cy={class:"value"},uy={class:"info-item"},dy={key:0,class:"contract-row"},fy={class:"info-item"},py=["innerHTML"],vy={key:0,class:"label"},my={key:0,class:"info-item"},hy=["innerHTML"],gy={key:1,class:"title"},yy={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=E(!1);function a(p){n("goto",p),o.value=!1}const r=N(()=>ar(s.dealer)),i=N(()=>ar(s.declarer)),c=N(()=>Jv(s.vulnerable)),u=N(()=>{var h;const p=(h=s.vulnerable)==null?void 0:h.toUpperCase();return p==="BOTH"||p==="ALL"?"vul-both":p==="NS"||p==="EW"?"vul-partial":"vul-none"}),f=N(()=>s.contract?zr(s.contract).html:""),d=N(()=>{if(!s.openingLead)return"";const p=s.openingLead[0],h=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},$=g[p]||p;return`<span class="${y[p]||"black"}">${$}</span>${h==="T"?"10":h}`});return(p,h)=>(v(),m("div",sy,[l("div",{class:"board-selector",onMouseenter:h[0]||(h[0]=g=>o.value=!0),onMouseleave:h[1]||(h[1]=g=>o.value=!1)},[l("div",ny,"Board "+b(e.boardNumber),1),o.value&&e.totalDeals>1?(v(),m("div",oy,[h[2]||(h[2]=l("div",{class:"popup-header"},"Select Board",-1)),l("div",ay,[(v(!0),m(ee,null,ae(e.totalDeals,g=>(v(),m("button",{key:g,class:ie(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+b(e.dealBoardNumbers[g-1]||g),11,ry))),128))])])):j("",!0)],32),l("div",ly,[l("div",iy,[h[3]||(h[3]=l("span",{class:"label"},"Dealer:",-1)),l("span",cy,b(r.value),1)]),l("div",uy,[h[4]||(h[4]=l("span",{class:"label"},"Vul:",-1)),l("span",{class:ie(["value",u.value])},b(c.value),3)])]),e.showContract&&e.contract?(v(),m("div",dy,[l("div",fy,[l("span",{class:"value contract",innerHTML:f.value},null,8,py),e.declarer?(v(),m("span",vy,"by "+b(i.value),1)):j("",!0)]),e.openingLead?(v(),m("div",my,[h[5]||(h[5]=l("span",{class:"label"},"OL:",-1)),l("span",{class:"value lead-card",innerHTML:d.value},null,8,hy)])):j("",!0)])):j("",!0),e.title?(v(),m("div",gy,b(e.title),1)):j("",!0)]))}},by=we(yy,[["__scopeId","data-v-5a844c49"]]),_y={class:"feedback-header"},wy={key:0,class:"icon"},Sy={key:1,class:"icon"},Cy={class:"title"},$y={key:0,class:"feedback-content"},ky={class:"bid-comparison"},xy={class:"bid-item your-bid"},Ay=["innerHTML"],Ty={class:"bid-item correct-bid"},Ny=["innerHTML"],Ey={key:1,class:"feedback-content"},Oy={class:"bid-comparison"},Iy={class:"bid-item your-bid"},Ry=["innerHTML"],Dy={class:"bid-item correct-bid"},Py=["innerHTML"],Ly=["innerHTML"],By={class:"actions"},My={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=N(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return zr(a).html}function o(a){return qv(a).html}return(a,r)=>e.visible?(v(),m("div",{key:0,class:ie(["feedback-panel",e.type])},[l("div",_y,[e.type==="wrong"?(v(),m("span",wy,"")):e.type==="correct"?(v(),m("span",Sy,"")):j("",!0),l("span",Cy,b(s.value),1)]),e.wrongBid?(v(),m("div",$y,[l("div",ky,[l("div",xy,[r[1]||(r[1]=l("span",{class:"label"},"Your bid:",-1)),l("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Ay)]),l("div",Ty,[r[2]||(r[2]=l("span",{class:"label"},"Correct bid:",-1)),l("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Ny)])])])):j("",!0),e.wrongCardCode?(v(),m("div",Ey,[l("div",Oy,[l("div",Iy,[r[3]||(r[3]=l("span",{class:"label"},"Your card:",-1)),l("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Ry)]),l("div",Dy,[r[4]||(r[4]=l("span",{class:"label"},"Correct card:",-1)),l("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Py)])])])):j("",!0),e.commentary?(v(),m("div",{key:2,class:"commentary",innerHTML:M(Ys)(e.commentary)},null,8,Ly)):j("",!0),l("div",By,[e.showContinue?(v(),m("button",{key:0,class:"btn continue",onClick:r[0]||(r[0]=i=>a.$emit("continue"))}," Continue ")):j("",!0)])],2)):j("",!0)}},Ci=we(My,[["__scopeId","data-v-04368462"]]),Uy={class:"welcome-screen"},Fy={class:"welcome-card"},jy={class:"welcome-header"},Hy={key:0,class:"welcome-body"},Wy={class:"form-group"},Ky={key:0,class:"error-message"},Vy={class:"form-group"},Gy={key:0,class:"error-message"},zy={class:"form-group"},Jy={key:0,class:"error-message"},Yy={key:0,class:"form-group"},qy={class:"checkbox-group"},Xy=["value","checked","onChange"],Qy={key:1,class:"form-group"},Zy={class:"single-classroom"},eb={class:"form-group consent-group"},tb={class:"checkbox-label consent-label"},sb={key:0,class:"consent-details"},nb=["disabled"],ob={key:0},ab={key:1},rb={key:1,class:"welcome-body returning"},lb={key:2,class:"welcome-body switcher"},ib={class:"user-list"},cb=["onClick"],ub={class:"user-name"},db={key:0,class:"user-class"},fb={key:3,class:"welcome-body recovery-sent"},pb={class:"subtitle"},vb={class:"recovery-info"},mb={class:"code-entry"},hb=["disabled"],gb={key:0},yb={key:1},bb={key:0,class:"error-message"},_b={key:4,class:"welcome-body recovery-claiming"},wb={class:"subtitle"},Sb={key:0,class:"recovery-error-panel"},Cb={class:"error-message"},$b={key:1,class:"loading-spinner"},kb={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=mo(),o=He(),a="https://api.bridge-classroom.com/api",r=E("form"),i=E(""),c=E(""),u=E(""),f=E([]),d=E(!0),p=E({firstName:"",lastName:"",email:"",classrooms:""}),h=E(!1),g=E(!1),y=E(""),$=E(""),C=E(""),_=E(""),w=E("");bt(async()=>{o.initialize(),n.initializeFromUrl();const H=new URLSearchParams(window.location.search),A=H.get("recover"),K=H.get("user_id");if(A&&K){await ve(K,A),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?r.value="returning":o.hasUsers.value?r.value="switcher":r.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const x=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,R=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),L=N(()=>i.value.trim().length>0&&c.value.trim().length>0&&u.value.trim().length>0&&x.test(u.value.trim())),B=N(()=>o.currentUser.value?o.currentUser.value.firstName:""),Q=N(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function Y(){p.value={firstName:"",lastName:"",email:"",classrooms:""};let H=!0;return i.value.trim()||(p.value.firstName="First name is required",H=!1),c.value.trim()||(p.value.lastName="Last name is required",H=!1),u.value.trim()?x.test(u.value.trim())||(p.value.email="Please enter a valid email address",H=!1):(p.value.email="Email is required",H=!1),o.findUserByEmail(u.value)&&(p.value.email="This email is already registered on this device.",H=!1),H}async function fe(){const H=u.value.trim().toLowerCase();if(!navigator.onLine)return Gt("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const A=await o.requestRecovery(H,a);return A.success?($.value=H,_.value=A.message,r.value="recovery-sent",!1):A.message&&A.message.includes("No account found")?!0:(Gt("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${H}`,A.message),await Yn(),p.value.email=A.message||"Unable to verify email. Please try again.",!1)}catch(A){return Gt("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${H}`,A),await Yn(),R?p.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":p.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function ve(H,A){r.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",C.value="";try{const K=await o.claimRecovery(H,A,a);K.success&&K.user?s("userReady",K.user):(C.value=K.error||"Recovery failed. Please try again.",r.value="form")}catch(K){Gt("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${H}`,K),C.value="Unable to complete recovery. Please try again.",r.value="form"}finally{g.value=!1,y.value=""}}async function ue(){if(w.value.trim().length===6){g.value=!0,y.value="Verifying code...",C.value="";try{const H=await o.claimRecoveryByCode($.value.trim(),w.value.trim(),a);H.success&&H.user?s("userReady",H.user):C.value=H.error||"Invalid code. Please check and try again."}catch(H){Gt("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${$.value.trim()}`,H),C.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function ge(){if(!Y())return;if(g.value=!0,y.value="Checking account...",!await fe()){g.value=!1,y.value="";return}let A=[];n.hasSingleClassroom.value?A=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(A=[...f.value]),y.value="Creating your secure encryption key...";try{const K=await o.createUser({firstName:i.value,lastName:c.value,email:u.value,classrooms:A,dataConsent:d.value,apiUrl:a});s("userReady",K)}catch(K){const ce=K instanceof Error?K.message:String(K);Gt("registration_create_user_failed",`handleSubmit  createUser threw for ${u.value.trim()}`,K),await Yn(),p.value.email=`Failed to create account: ${ce}. Please try again.`}finally{g.value=!1,y.value=""}}function $e(){s("userReady",o.currentUser.value)}function me(){r.value="switcher"}function pe(H){o.switchUser(H),s("userReady",o.currentUser.value)}function V(){i.value="",c.value="",u.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,p.value={firstName:"",lastName:"",email:"",classrooms:""},r.value="form"}function q(){o.currentUser.value?r.value="returning":o.hasUsers.value&&(r.value="switcher")}function U(H){const A=f.value.indexOf(H);A===-1?f.value.push(H):f.value.splice(A,1)}return(H,A)=>(v(),m("div",Uy,[l("div",Fy,[l("div",jy,[l("h1",null,b(Q.value),1)]),r.value==="form"?(v(),m("div",Hy,[A[16]||(A[16]=l("h2",null,"Welcome!",-1)),A[17]||(A[17]=l("p",{class:"subtitle"},"Please enter your name to get started.",-1)),l("form",{onSubmit:Ct(ge,["prevent"]),class:"user-form"},[l("div",Wy,[A[8]||(A[8]=l("label",{for:"firstName"},"First Name",-1)),Fe(l("input",{id:"firstName","onUpdate:modelValue":A[0]||(A[0]=K=>i.value=K),type:"text",placeholder:"Enter your first name",class:ie({"has-error":p.value.firstName}),autocomplete:"given-name"},null,2),[[St,i.value]]),p.value.firstName?(v(),m("span",Ky,b(p.value.firstName),1)):j("",!0)]),l("div",Vy,[A[9]||(A[9]=l("label",{for:"lastName"},"Last Name",-1)),Fe(l("input",{id:"lastName","onUpdate:modelValue":A[1]||(A[1]=K=>c.value=K),type:"text",placeholder:"Enter your last name",class:ie({"has-error":p.value.lastName}),autocomplete:"family-name"},null,2),[[St,c.value]]),p.value.lastName?(v(),m("span",Gy,b(p.value.lastName),1)):j("",!0)]),l("div",zy,[A[10]||(A[10]=l("label",{for:"email"},"Email Address",-1)),Fe(l("input",{id:"email","onUpdate:modelValue":A[2]||(A[2]=K=>u.value=K),type:"email",placeholder:"Enter your email address",class:ie({"has-error":p.value.email}),autocomplete:"email"},null,2),[[St,u.value]]),p.value.email?(v(),m("span",Jy,b(p.value.email),1)):j("",!0),A[11]||(A[11]=l("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),M(n).hasMultipleClassrooms.value?(v(),m("div",Yy,[A[12]||(A[12]=l("label",null,"Select Your Class(es)",-1)),l("div",qy,[(v(!0),m(ee,null,ae(M(n).availableClassrooms.value,K=>(v(),m("label",{key:K.id,class:"checkbox-label"},[l("input",{type:"checkbox",value:K.id,checked:f.value.includes(K.id),onChange:ce=>U(K.id)},null,40,Xy),l("span",null,b(K.name),1)]))),128))])])):M(n).hasSingleClassroom.value?(v(),m("div",Qy,[A[13]||(A[13]=l("label",null,"Class",-1)),l("div",Zy,b(M(n).singleClassroom.value.name),1)])):j("",!0),l("div",eb,[l("label",tb,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=K=>d.value=K)},null,512),[[Hr,d.value]]),A[14]||(A[14]=l("span",null," Preserve my practice history ",-1))]),l("button",{type:"button",class:"details-toggle",onClick:A[4]||(A[4]=K=>h.value=!h.value)},b(h.value?"Hide details":"What data is preserved?"),1),h.value?(v(),m("div",sb,[...A[15]||(A[15]=[no('<p data-v-903ed78e>Your practice history is saved online so you can track your progress over time.</p><p data-v-903ed78e><strong data-v-903ed78e>How it works:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Your data is encrypted with your personal key</li><li data-v-903ed78e>Only you and people you authorize can view it</li><li data-v-903ed78e>The site administrator can also access your data</li></ul><p data-v-903ed78e><strong data-v-903ed78e>What&#39;s preserved:</strong></p><ul data-v-903ed78e><li data-v-903ed78e>Which hands you practiced</li><li data-v-903ed78e>Your bidding choices (correct and incorrect)</li><li data-v-903ed78e>When you practiced</li></ul><p class="consent-note" data-v-903ed78e>You can change this setting anytime in Settings.</p>',6)])])):j("",!0)]),l("button",{type:"submit",class:"submit-btn",disabled:!L.value||g.value},[g.value?(v(),m("span",ob,b(y.value),1)):(v(),m("span",ab,"Start Practicing"))],8,nb)],32),M(o).hasUsers.value?(v(),m("button",{key:0,class:"back-link",onClick:q}," Back to user selection ")):j("",!0)])):r.value==="returning"?(v(),m("div",rb,[l("h2",null,"Welcome back, "+b(B.value)+"!",1),A[18]||(A[18]=l("p",{class:"subtitle"},"Ready to continue practicing?",-1)),l("button",{class:"submit-btn",onClick:$e}," Continue "),l("button",{class:"switch-link",onClick:me}," Not "+b(B.value)+"? Switch user ",1)])):r.value==="switcher"?(v(),m("div",lb,[A[19]||(A[19]=l("h2",null,"Select User",-1)),A[20]||(A[20]=l("p",{class:"subtitle"},"Choose who's practicing today:",-1)),l("div",ib,[(v(!0),m(ee,null,ae(M(o).allUsers.value,K=>{var ce;return v(),m("button",{key:K.id,class:ie(["user-item",{"is-current":K.id===M(o).currentUserId.value}]),onClick:Te=>pe(K.id)},[l("span",ub,b(K.firstName)+" "+b(K.lastName),1),(ce=K.classrooms)!=null&&ce.length?(v(),m("span",db,b(K.classrooms.join(", ")),1)):j("",!0)],10,cb)}),128))]),l("button",{class:"add-user-btn",onClick:V}," + Add New User "),M(o).currentUser.value?(v(),m("button",{key:0,class:"back-link",onClick:q}," Cancel ")):j("",!0)])):r.value==="recovery-sent"?(v(),m("div",fb,[A[25]||(A[25]=l("h2",null,"Check Your Email",-1)),l("p",pb,[A[21]||(A[21]=ke(" We found an existing account for ",-1)),l("strong",null,b($.value),1),A[22]||(A[22]=ke(". ",-1))]),l("div",vb,[l("p",null,b(_.value),1),A[23]||(A[23]=l("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),l("div",mb,[A[24]||(A[24]=l("label",{for:"recoveryCode"},"Recovery Code",-1)),Fe(l("input",{id:"recoveryCode","onUpdate:modelValue":A[5]||(A[5]=K=>w.value=K),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Go(ue,["enter"])},null,544),[[St,w.value]]),l("button",{class:"submit-btn",disabled:w.value.trim().length!==6||g.value,onClick:ue},[g.value?(v(),m("span",gb,b(y.value),1)):(v(),m("span",yb,"Restore Account"))],8,hb),C.value?(v(),m("span",bb,b(C.value),1)):j("",!0)]),l("button",{class:"back-link",onClick:A[6]||(A[6]=K=>r.value="form")}," Use a different email ")])):r.value==="recovery-claiming"?(v(),m("div",_b,[A[27]||(A[27]=l("h2",null,"Restoring Your Account",-1)),l("p",wb,b(y.value),1),C.value?(v(),m("div",Sb,[l("p",Cb,b(C.value),1),l("button",{class:"back-link",onClick:A[7]||(A[7]=K=>r.value="form")}," Try again ")])):(v(),m("div",$b,[...A[26]||(A[26]=[l("div",{class:"spinner"},null,-1)])]))])):j("",!0)])]))}},xb=we(kb,[["__scopeId","data-v-903ed78e"]]),Ns="https://api.bridge-classroom.com/api",Vs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Es=E([]),Gs=E(null),Nt=E(!1),Qe=E(null);function _o(){async function e(c){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ns}/classrooms?teacher_id=${encodeURIComponent(c)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Es.value=f.classrooms:Qe.value=f.error||"Failed to fetch classrooms",f}catch(u){return console.error("Failed to fetch classrooms:",u),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function t(c,u,f){Nt.value=!0,Qe.value=null;try{const d=await fetch(`${Ns}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({teacher_id:c,name:u,description:f||null})});if(!d.ok){const h=await d.text();return Qe.value=h||`Server error (${d.status})`,{success:!1,error:Qe.value}}const p=await d.json();return p.success?Es.value=[p.classroom,...Es.value]:Qe.value=p.error||"Failed to create classroom",p}catch(d){return console.error("Failed to create classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function s(c){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ns}/classrooms/${encodeURIComponent(c)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Gs.value=f.classroom:Qe.value=f.error||"Failed to fetch classroom",f}catch(u){return console.error("Failed to fetch classroom detail:",u),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function n(c,u){try{const d=await(await fetch(`${Ns}/classrooms/${encodeURIComponent(c)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Vs}})).json();if(d.success&&Gs.value){Gs.value.members=Gs.value.members.filter(h=>h.student_id!==u);const p=Es.value.findIndex(h=>h.id===c);p!==-1&&Es.value[p].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(c){Nt.value=!0,Qe.value=null;try{const u=await fetch(`${Ns}/join/${encodeURIComponent(c)}`);return u.status===404?(Qe.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function a(c,u,f){Nt.value=!0,Qe.value=null;try{const p=await(await fetch(`${Ns}/join/${encodeURIComponent(c)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:u,encrypted_grant_payload:f})})).json();return p.success||(Qe.value=p.error||"Failed to join classroom"),p}catch(d){return console.error("Failed to join classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function r(c,u){try{return await(await fetch(`${Ns}/classrooms/${encodeURIComponent(c)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:u})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){Es.value=[],Gs.value=null,Nt.value=!1,Qe.value=null}return{teacherClassrooms:Es,currentClassroom:Gs,loading:Nt,error:Qe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:r,reset:i}}const Ab={class:"settings-panel"},Tb={class:"settings-body"},Nb={class:"settings-section"},Eb={class:"info-row"},Ob={class:"info-value"},Ib={class:"info-row"},Rb={class:"info-value"},Db={class:"info-row"},Pb={class:"info-row"},Lb={class:"info-value"},Bb={key:1,class:"edit-form"},Mb={class:"form-group"},Ub={class:"form-group"},Fb={class:"form-group"},jb={class:"checkbox-label"},Hb={key:0,class:"settings-section"},Wb={class:"assignment-list"},Kb={class:"assignment-header"},Vb={class:"assignment-name"},Gb={class:"assignment-progress"},zb={class:"progress-bar"},Jb={class:"assignment-meta"},Yb={key:0},qb={class:"assignment-list"},Xb={class:"assignment-header"},Qb={class:"assignment-name"},Zb={class:"assignment-meta"},e_={key:1,class:"settings-section"},t_={class:"classroom-id"},s_=["disabled","onClick"],n_={class:"settings-section"},o_={class:"toggle-row"},a_={class:"toggle-label"},r_=["checked"],l_={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=He(),o=mo(),a=ga(),r=_o(),i=E(!1),c=E(""),u=E(""),f=E(!0),d=N(()=>n.currentUser.value),p=N(()=>{var Q;return!d.value||!((Q=d.value.classrooms)!=null&&Q.length)?"No classroom assigned":d.value.classrooms.map(Y=>{const fe=o.availableClassrooms.value.find(ve=>ve.id===Y);return fe?fe.name:Y}).join(", ")}),h=N(()=>a.getAllAssignments().filter(Q=>Q.completionPercent<100)),g=N(()=>a.getAllAssignments().filter(Q=>Q.completionPercent>=100));function y(){d.value&&(c.value=d.value.firstName,u.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function $(){i.value=!1}function C(){d.value&&(n.updateUser(d.value.id,{firstName:c.value,lastName:u.value,dataConsent:f.value}),i.value=!1)}function _(){s("switchUser")}function w(){i.value=!1,s("close")}const x=E(null);async function R(Q){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(x.value=Q,(await r.leaveClassroom(Q,d.value.id)).success){const fe=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:fe.filter(ve=>ve!==Q)})}x.value=null}function L(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function B(Q){return Q?new Date(Q).toLocaleDateString():"N/A"}return(Q,Y)=>{var fe,ve,ue,ge,$e,me,pe;return e.visible?(v(),m("div",{key:0,class:"settings-overlay",onClick:Ct(w,["self"])},[l("div",Ab,[l("div",{class:"settings-header"},[Y[5]||(Y[5]=l("h2",null,"Settings",-1)),l("button",{class:"close-btn",onClick:w,"aria-label":"Close"},"  ")]),l("div",Tb,[l("section",Nb,[Y[12]||(Y[12]=l("h3",null,"Your Profile",-1)),i.value?(v(),m("div",Bb,[l("div",Mb,[Y[10]||(Y[10]=l("label",{for:"editFirstName"},"First Name",-1)),Fe(l("input",{id:"editFirstName","onUpdate:modelValue":Y[1]||(Y[1]=V=>c.value=V),type:"text"},null,512),[[St,c.value]])]),l("div",Ub,[Y[11]||(Y[11]=l("label",{for:"editLastName"},"Last Name",-1)),Fe(l("input",{id:"editLastName","onUpdate:modelValue":Y[2]||(Y[2]=V=>u.value=V),type:"text"},null,512),[[St,u.value]])]),l("div",Fb,[l("label",jb,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=V=>f.value=V)},null,512),[[Hr,f.value]]),l("span",null,"Share practice results with "+b(M(o).teacherName.value||"teacher"),1)])]),l("div",{class:"button-row"},[l("button",{class:"primary-btn",onClick:C}," Save Changes "),l("button",{class:"secondary-btn",onClick:$}," Cancel ")])])):(v(),m(ee,{key:0},[l("div",Eb,[Y[6]||(Y[6]=l("span",{class:"info-label"},"Name",-1)),l("span",Ob,b((fe=d.value)==null?void 0:fe.firstName)+" "+b((ve=d.value)==null?void 0:ve.lastName),1)]),l("div",Ib,[Y[7]||(Y[7]=l("span",{class:"info-label"},"Class",-1)),l("span",Rb,b(p.value),1)]),l("div",Db,[Y[8]||(Y[8]=l("span",{class:"info-label"},"Data Sharing",-1)),l("span",{class:ie(["info-value",(ue=d.value)!=null&&ue.dataConsent?"enabled":"disabled"])},b((ge=d.value)!=null&&ge.dataConsent?"Enabled":"Disabled"),3)]),l("div",Pb,[Y[9]||(Y[9]=l("span",{class:"info-label"},"Member Since",-1)),l("span",Lb,b(B(($e=d.value)==null?void 0:$e.createdAt)),1)]),l("div",{class:"button-row"},[l("button",{class:"secondary-btn",onClick:y}," Edit Profile "),l("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((me=d.value)==null?void 0:me.role)!=="teacher"&&((pe=d.value)==null?void 0:pe.role)!=="admin"?(v(),m("button",{key:0,class:"become-teacher-btn",onClick:Y[0]||(Y[0]=V=>{s("close"),s("become-teacher")})}," Become a Teacher ")):j("",!0)],64))]),h.value.length||g.value.length?(v(),m("section",Hb,[Y[16]||(Y[16]=l("h3",null,"Assignments",-1)),h.value.length?(v(),m(ee,{key:0},[Y[13]||(Y[13]=l("h4",null,"Active",-1)),l("div",Wb,[(v(!0),m(ee,null,ae(h.value,V=>(v(),m("div",{key:V.id,class:"assignment-item"},[l("div",Kb,[l("span",Vb,b(V.name),1),l("span",Gb,b(V.completionPercent)+"%",1)]),l("div",zb,[l("div",{class:"progress-fill",style:st({width:`${V.completionPercent}%`})},null,4)]),l("div",Jb,[V.dueDate?(v(),m("span",Yb," Due: "+b(B(V.dueDate)),1)):j("",!0),l("span",null,b(V.completedDeals)+"/"+b(V.totalDeals)+" deals ",1)])]))),128))])],64)):j("",!0),g.value.length?(v(),m(ee,{key:1},[Y[15]||(Y[15]=l("h4",null,"Completed",-1)),l("div",qb,[(v(!0),m(ee,null,ae(g.value,V=>(v(),m("div",{key:V.id,class:"assignment-item completed"},[l("div",Xb,[l("span",Qb,b(V.name),1),Y[14]||(Y[14]=l("span",{class:"assignment-check"},"",-1))]),l("div",Zb," Completed "+b(B(V.lastPracticedAt)),1)]))),128))])],64)):j("",!0)])):j("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(v(),m("section",e_,[Y[17]||(Y[17]=l("h3",null,"My Classrooms",-1)),(v(!0),m(ee,null,ae(d.value.classrooms,V=>(v(),m("div",{key:V,class:"classroom-row"},[l("span",t_,b(V),1),l("button",{class:"leave-btn",disabled:x.value===V,onClick:q=>R(V)},b(x.value===V?"Leaving...":"Leave"),9,s_)]))),128))])):j("",!0),l("section",n_,[Y[19]||(Y[19]=l("h3",null,"Display Options",-1)),l("div",o_,[l("label",a_,[l("input",{type:"checkbox",checked:M(o).showLoadPbnOption.value,onChange:Y[4]||(Y[4]=V=>M(o).setUIPref("showLoadPbnOption",V.target.checked))},null,40,r_),Y[18]||(Y[18]=l("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),l("section",{class:"settings-section"},[Y[20]||(Y[20]=l("h3",null,"Data & Privacy",-1)),Y[21]||(Y[21]=l("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),l("button",{class:"remove-device-btn",onClick:L}," Remove account from this device "),Y[22]||(Y[22]=l("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):j("",!0)}}},i_=we(l_,[["__scopeId","data-v-57179473"]]),c_={class:"banner-content"},u_={class:"assignment-info"},d_={class:"assignment-title"},f_={class:"assignment-name"},p_={class:"assignment-meta"},v_={class:"progress-text"},m_={class:"progress-bar"},h_={key:0,class:"complete-badge"},g_={class:"return-text"},y_={__name:"AssignmentBanner",setup(e){const t=ga(),s=N(()=>t.currentAssignment.value),n=N(()=>t.hasActiveAssignment.value),o=N(()=>t.assignmentProgress.value),a=N(()=>t.isAssignmentComplete.value),r=N(()=>t.inAssignmentMode.value),i=N(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const p=new Date(s.value.dueDate);return Math.ceil((p-new Date)/(1e3*60*60*24))}),c=N(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=N(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(p,h)=>{var g,y;return n.value&&r.value?(v(),m("div",{key:0,class:ie(["assignment-banner",{complete:a.value}])},[l("div",c_,[l("div",u_,[l("div",d_,[h[0]||(h[0]=l("span",{class:"assignment-label"},"Assignment:",-1)),l("span",f_,b((g=s.value)==null?void 0:g.name),1)]),l("div",p_,[l("span",v_,b(o.value.completed)+" of "+b(o.value.total)+" deals ("+b(o.value.percent)+"%) ",1),c.value?(v(),m("span",{key:0,class:ie(["due-text",u.value])},b(c.value),3)):j("",!0)])]),l("div",m_,[l("div",{class:ie(["progress-fill",{complete:a.value}]),style:st({width:`${o.value.percent}%`})},null,6)]),l("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(v(),m("div",h_," Complete! ")):j("",!0)],2)):s.value&&!r.value?(v(),m("div",{key:1,class:"return-banner",onClick:d},[h[1]||(h[1]=l("span",{class:"return-icon"},"",-1)),l("span",g_," Return to assignment: "+b((y=s.value)==null?void 0:y.name)+" ("+b(o.value.percent)+"% complete) ",1)])):j("",!0)}}},b_=we(y_,[["__scopeId","data-v-a4095a6a"]]),__=["innerHTML"],w_={__name:"AnnouncementBanner",setup(e){const t=rl(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(r,i)=>{const c=s[i.toLowerCase()];return c?`<span class="ann-circle" style="background:${c.bg};color:${c.fg}"></span>`:r})}return(o,a)=>M(t).announcement.value&&M(t).dismissed.value!==M(t).announcement.value.id?(v(),m("div",{key:0,class:ie(["announcement-banner",M(t).announcement.value.type])},[l("span",{class:"announcement-text",innerHTML:n(M(t).announcement.value.message)},null,8,__),l("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=r=>M(t).dismiss()),title:"Dismiss"},"")],2)):j("",!0)}},S_=we(w_,[["__scopeId","data-v-4b12409b"]]),C_={key:0,class:"status-content"},$_={key:1,class:"status-content offline"},k_={key:0,class:"badge"},x_={key:2,class:"status-content error"},A_={class:"status-text"},T_={key:0,class:"badge"},N_={key:3,class:"status-content pending"},E_={class:"status-text"},O_={key:4,class:"status-content synced"},I_={__name:"SyncStatus",setup(e){const t=Lu(),s=cs(),n=N(()=>s.pendingCount.value),o=N(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=N(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function r(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(c,u)=>(v(),m("div",{class:ie(["sync-status",a.value]),onClick:r},[M(t).isSyncing.value?(v(),m("div",C_,[...u[0]||(u[0]=[l("span",{class:"spinner"},null,-1),l("span",{class:"status-text"},"Syncing...",-1)])])):M(t).isOffline.value?(v(),m("div",$_,[u[1]||(u[1]=l("span",{class:"icon"},"",-1)),u[2]||(u[2]=l("span",{class:"status-text"},"Offline",-1)),n.value>0?(v(),m("span",k_,b(n.value),1)):j("",!0)])):M(t).hasError.value?(v(),m("div",x_,[u[3]||(u[3]=l("span",{class:"icon"},"",-1)),l("span",A_,b(o.value),1),n.value>0?(v(),m("span",T_,b(n.value),1)):j("",!0),l("button",{class:"retry-btn",onClick:Ct(i,["stop"])},"Retry")])):n.value>0?(v(),m("div",N_,[u[4]||(u[4]=l("span",{class:"icon"},"",-1)),l("span",E_,b(n.value)+" pending",1)])):(v(),m("div",O_,[...u[5]||(u[5]=[l("span",{class:"icon"},"",-1),l("span",{class:"status-text"},"Synced",-1)])]))],2))}},R_=we(I_,[["__scopeId","data-v-8457149a"]]),Mu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function D_(e){return Mu.find(t=>t.path===e)||null}Mu.reduce((e,t)=>e+t.dealCount,0);const qn=36e5;function $i(e){if(!e||e.length===0)return"untried";const t=[...e].sort((f,d)=>f.ts-d.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(f=>!f.correct&&n.ts-f.ts<qn),r=t.slice(-5),i=r.filter(f=>f.correct).length,c=r.length-i;return a&&i/r.length>=.8&&c<=1?"mastered":r.filter(f=>f.correct?!t.filter(p=>p.ts<f.ts).reverse().find(p=>!p.correct&&f.ts-p.ts<qn):!1).length>=1?"progressing":"struggling"}function P_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const r=a.deal_number;n[a.skill_path][r]||(n[a.skill_path][r]=[]),n[a.skill_path][r].push({correct:a.correct,ts:new Date(a.timestamp)})}),Object.entries(n).map(([a,r])=>{var x,R;const i=Object.keys(r).map(Number).sort((L,B)=>L-B);let c=0,u=0,f=0;i.forEach(L=>{const B=$i(r[L]);B==="mastered"?c++:B==="progressing"?u++:f++});const d=i.length,p=[];i.forEach(L=>{r[L].forEach(B=>p.push({...B,dealNum:L}))}),p.sort((L,B)=>L.ts-B.ts);const h=2*qn,g=i.map(L=>{var $e;const B=r[L].slice().sort((me,pe)=>me.ts-pe.ts),Q=$i(B),Y=(($e=B[B.length-1])==null?void 0:$e.correct)??!1,fe=B.map((me,pe)=>{if(me.correct){const V=B.slice(0,pe).reverse().find(q=>!q.correct&&me.ts-q.ts<qn);return{ts:me.ts,y:V?.75:1,correct:!0}}else{const V=B.slice(pe+1).find(q=>q.correct&&q.ts-me.ts<qn);return{ts:me.ts,y:V?.5:0,correct:!1}}}),ve=5*60*1e3,ue=fe.map(me=>({...me,vts:me.ts.getTime(),rawTs:me.ts.getTime()}));let ge=0;for(;ge<ue.length;){let me=ge;for(;me+1<ue.length&&ue[me+1].vts-ue[me].vts<ve;)me++;if(me>ge){const pe=ue[me].vts-ue[ge].vts,V=Math.max(pe,h),q=pe>0?V/pe:1,U=ue[ge].vts;for(let H=ge;H<=me;H++)ue[H].vts=U+(ue[H].vts-U)*q}ge=me+1}return{dealNum:L,status:Q,lastCorrect:Y,points:ue}}),y=g.flatMap(L=>L.points.map(B=>B.rawTs)),$=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-$||1;g.forEach(L=>{L.points=L.points.map(B=>({...B,x:(B.rawTs-$)/_}))});const w=(()=>{const L=Object.values(r);if(L.length===0)return 0;const B=L.reduce((Y,fe)=>{const ve=fe.slice(-5);return Y+ve.filter(ue=>ue.correct).length},0),Q=L.reduce((Y,fe)=>Y+Math.min(fe.length,5),0);return Q>0?Math.round(B/Q*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:d,mastered:c,progressing:u,struggling:f,totalBoards:t[a]??d,totalAttempts:p.length,recentRate:w,boardLines:g,firstActivity:(x=p[0])==null?void 0:x.ts,lastActivity:(R=p[p.length-1])==null?void 0:R.ts}}).sort((a,r)=>(r.lastActivity||0)-(a.lastActivity||0))}function L_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=D_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const r=Xc(o);n[o]=r.name}}return{lessonTotals:s,lessonNames:n}}const sn={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function Uu(e){return e>=.9?"#10b981":e>=.6?"#3b82f6":e>=.4?"#f59e0b":"#f43f5e"}const B_={key:0,class:"sparkline-empty"},M_=["width","height"],U_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],F_=["d","stroke"],j_=["cx","cy","r","fill"],H_=5,W_=2.5,K_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=N(()=>t.width-n.l-n.r),a=N(()=>t.height-n.t-n.b),r=N(()=>{const d=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),p=Math.min(...d),h=Math.max(...d);return{min:p,max:h,span:h-p||1}});function i(d){return n.t+(1-d)*a.value}function c(d,p){const h=p>=.9?1:p>0?.5:0;return{px:n.l+(d-r.value.min)/r.value.span*o.value,py:n.t+(1-h)*a.value,yMapped:h}}const u=N(()=>t.boardLines.map(d=>{const p=sn[d.status]||"#6b7280",h=d.points.filter(y=>y.y!==.75).map(y=>c(y.x,y.y)),g=h.length>=2?h.map((y,$)=>`${$===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:p,pts:h,pathD:g}})),f=N(()=>{const d=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...c(y.x,y.y),y:y.y}))),p=new Array(d.length).fill(!1),h=[];return d.forEach((g,y)=>{if(p[y])return;const $=[g];p[y]=!0,d.forEach((x,R)=>{if(p[R])return;const L=x.px-g.px,B=x.py-g.py;Math.sqrt(L*L+B*B)<H_&&($.push(x),p[R]=!0)});const C=$.reduce((x,R)=>x+R.px,0)/$.length,_=$.reduce((x,R)=>x+R.py,0)/$.length,w=$.sort((x,R)=>R.yMapped-x.yMapped)[0].yMapped;h.push({px:C,py:_,y:w,n:$.length})}),h});return(d,p)=>!e.boardLines||e.boardLines.length===0?(v(),m("div",B_," No data ")):(v(),m("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(v(),m(ee,null,ae(s,h=>l("line",{key:h,x1:n.l,y1:i(h),x2:n.l+o.value,y2:i(h),stroke:h===.5?"#d1d5db":"#e5e7eb","stroke-width":h===.5?1:.5,"stroke-dasharray":h===.5?"3,3":"none"},null,8,U_)),64)),(v(!0),m(ee,null,ae(u.value,(h,g)=>Fe((v(),m("path",{key:"line-"+g,d:h.pathD,fill:"none",stroke:h.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,F_)),[[op,h.pts.length>=2]])),128)),(v(!0),m(ee,null,ae(f.value,(h,g)=>(v(),m("circle",{key:"bubble-"+g,cx:h.px,cy:h.py,r:W_*Math.sqrt(h.n),fill:M(Uu)(h.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,j_))),128))],8,M_))}},V_=we(K_,[["__scopeId","data-v-a14e2bb7"]]),G_={class:"details-header"},z_={class:"details-title"},J_={class:"details-subtitle"},Y_=["viewBox","height"],q_=["x","y","fill"],X_=["y","width","height","fill","fill-opacity"],Q_=["x","y","fill"],Z_=["x1","y1","x2","y2","stroke-dasharray"],e1=["x","y"],t1=["cx","cy","fill","onClick"],s1={key:0,class:"details-activity"},n1={class:"stats-row"},o1={class:"stat-value"},a1={class:"stat-label"},r1=["viewBox"],l1=["x","y","width","height"],i1={class:"activity-dates"},c1={class:"details-legend"},La=7,ki=.3,Ba=110,Os=560,Xt=28,Ma=40,xi=36e5,$t=864e5,u1={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close","dot-click"],setup(e,{emit:t}){const s=e,n=t,o={t:16,r:20,b:40,l:Ba},a=N(()=>{const w=new Set(s.lesson.boardLines.map(R=>R.dealNum)),x=s.lesson.totalBoards??Math.max(...w);return Array.from({length:x},(R,L)=>L+1)}),r=N(()=>a.value.length*Xt),i=N(()=>Os+o.l+o.r),c=N(()=>r.value+o.t+o.b),u=N(()=>new Set(s.lesson.boardLines.map(w=>w.dealNum)));function f(w){return u.value.has(w)}function d(w){const x=s.lesson.boardLines.find(R=>R.dealNum===w);return x?sn[x.status]||"#6b7280":"#d1d5db"}const p=N(()=>{const w=s.rawData.filter(V=>V.skill_path===s.lesson.path),x=a.value,R=w.map(V=>{const q=new Date(V.timestamp).getTime(),U=V.deal_number,H=x.indexOf(U);return{rawTs:q,dealNum:U,boardIdx:H,correct:V.correct,y:V.correct?1:0}});if(R.forEach(V=>{const q=R.filter(H=>H.dealNum===V.dealNum).sort((H,A)=>H.rawTs-A.rawTs),U=q.findIndex(H=>H.rawTs===V.rawTs&&H.correct===V.correct);if(V.correct){const H=q.slice(0,U).reverse().find(A=>!A.correct&&V.rawTs-A.rawTs<xi);V.y=H?.75:1}else{const H=q.slice(U+1).find(A=>A.correct&&A.rawTs-V.rawTs<xi);V.y=H?.5:0}}),R.length===0)return[];const L=R.map(V=>V.rawTs),B=Math.min(...L),Q=Math.max(...L),Y=Math.floor(B/$t)*$t,ve=(Math.floor(Q/$t)+1)*$t-1-Y||1,ue=V=>o.l+(V.rawTs-Y)/ve*Os,ge=V=>o.t+V*Xt+Xt/2,$e=La*2*(1-ki),me=La*2*(1-ki),pe=R.map(V=>({...V,px:ue(V),py:ge(V.boardIdx)}));return x.forEach(V=>{const q=pe.filter(H=>H.dealNum===V),U={};q.forEach(H=>{const A=H.rawTs;U[A]||(U[A]=[]),U[A].push(H)}),Object.values(U).forEach(H=>{if(H.length<2)return;const A=H[0].py;H.forEach((K,ce)=>{K.py=A+(ce-(H.length-1)/2)*me})})}),x.forEach(V=>{const q=pe.filter(A=>A.dealNum===V).sort((A,K)=>A.px-K.px),U=[];let H=0;for(;H<q.length;){let A=H;for(;A+1<q.length&&q[A+1].px-q[H].px<$e;)A++;U.push({start:H,end:A}),H=A+1}U.forEach((A,K)=>{const ce=A.end-A.start+1;if(ce===1)return;const Te=(ce-1)*$e;let xe;K===0?xe=q[A.start].px:K===U.length-1?xe=q[A.end].px-Te:xe=(q[A.start].px+q[A.end].px)/2-Te/2;for(let je=0;je<ce;je++)q[A.start+je].px=xe+je*$e})}),pe}),h=N(()=>[...p.value].sort((w,x)=>w.y-x.y)),g=N(()=>{const w=p.value;if(w.length===0)return[];const x=w.map(ve=>ve.rawTs),R=Math.min(...x),L=Math.max(...x),B=Math.floor(R/$t)*$t,Y=(Math.floor(L/$t)+1)*$t-1-B||1,fe=5;return Array.from({length:fe},(ve,ue)=>{const ge=ue/(fe-1),$e=new Date(B+ge*Y);return{x:o.l+ge*Os,label:$e.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+$e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),y=N(()=>{const w=p.value;if(w.length===0)return null;const x={};w.forEach(ue=>{const ge=Math.floor(ue.rawTs/$t);x[ge]=(x[ge]||0)+1});const R=Object.keys(x).map(Number).sort();if(R.length===0)return null;const L=R[0],B=R[R.length-1],Q=B-L+1,Y=Math.max(...Object.values(x)),fe=Math.max(2,Os/Q-1);return{bars:R.map(ue=>({dayKey:ue,x:(ue-L)/Q*Os,h:x[ue]/Y*Ma,w:fe,count:x[ue],dateLabel:new Date(ue*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Os,firstLabel:new Date(L*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(B*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),$=N(()=>{const w=p.value,x={};return w.forEach(R=>{const L=Math.floor(R.rawTs/$t);x[L]=!0}),[{label:"Days active",value:Object.keys(x).length},{label:"Boards tried",value:s.lesson.tried},{label:"Observations",value:w.length}]}),C=[{color:"#10b981",label:"Clean correct"},{color:"#3b82f6",label:"Recent correct (after fail within 1 hr)"},{color:"#f59e0b",label:"Corrected (errors fixed within board)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function _(w){return new Date(w).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(w,x)=>(v(),m("div",{class:"details-overlay",onClick:x[2]||(x[2]=Ct(R=>w.$emit("close"),["self"]))},[l("div",{class:"details-panel",onClick:x[1]||(x[1]=Ct(()=>{},["stop"]))},[l("div",G_,[l("div",null,[l("h2",z_,b(e.lesson.name),1),l("p",J_,b(e.lesson.tried)+" boards  "+b(e.lesson.totalAttempts)+" attempts ",1)]),l("button",{class:"details-close-btn",onClick:x[0]||(x[0]=R=>w.$emit("close"))}," close")]),(v(),m("svg",{viewBox:`0 0 ${i.value} ${c.value}`,width:"100%",height:c.value,class:"details-chart"},[(v(!0),m(ee,null,ae(a.value,(R,L)=>(v(),m("rect",{key:"bg-"+R,x:o.l,y:o.t+L*Xt,width:Os,height:Xt,fill:L%2===0?"#ffffff":"#f9fafb"},null,8,q_))),128)),(v(!0),m(ee,null,ae(a.value,(R,L)=>(v(),m("g",{key:"label-"+R},[l("rect",{x:2,y:o.t+L*Xt+3,width:Ba-14,height:Xt-6,rx:"3",fill:d(R),"fill-opacity":f(R)?.12:.05},null,8,X_),l("text",{x:Ba-16,y:o.t+L*Xt+Xt/2+4,"text-anchor":"end","font-size":"13",fill:d(R),"font-family":"monospace"}," Board "+b(R)+b(f(R)?"":" "),9,Q_)]))),128)),(v(!0),m(ee,null,ae(g.value,(R,L)=>(v(),m("line",{key:"grid-"+L,x1:R.x,y1:o.t,x2:R.x,y2:o.t+r.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":L===0||L===g.value.length-1?"none":"3,4"},null,8,Z_))),128)),(v(!0),m(ee,null,ae(g.value,(R,L)=>(v(),m("text",{key:"tick-"+L,x:R.x,y:o.t+r.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},b(R.label),9,e1))),128)),(v(!0),m(ee,null,ae(h.value,(R,L)=>(v(),m("circle",{key:"dot-"+L,cx:R.px,cy:R.py,r:La,fill:M(Uu)(R.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92",class:"obs-dot",onClick:Ct(B=>n("dot-click",{rawTs:R.rawTs,dealNum:R.dealNum,correct:R.correct,event:B}),["stop"])},[l("title",null,"Board "+b(R.dealNum)+"  "+b(R.correct?"Correct":"Incorrect")+"  "+b(_(R.rawTs)),1)],8,t1))),128))],8,Y_)),y.value?(v(),m("div",s1,[l("div",n1,[(v(!0),m(ee,null,ae($.value,R=>(v(),m("div",{class:"stat-item",key:R.label},[l("div",o1,b(R.value),1),l("div",a1,b(R.label),1)]))),128))]),(v(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.barW} ${Ma}`,class:"activity-chart"},[(v(!0),m(ee,null,ae(y.value.bars,R=>(v(),m("rect",{key:R.dayKey,x:R.x,y:Ma-R.h,width:R.w,height:R.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[l("title",null,b(R.dateLabel)+": "+b(R.count)+" observations",1)],8,l1))),128))],8,r1)),l("div",i1,[l("span",null,b(y.value.firstLabel),1),l("span",null,b(y.value.lastLabel),1)])])):j("",!0),l("div",c1,[(v(),m(ee,null,ae(C,R=>l("span",{key:R.label,class:"legend-item"},[l("span",{class:"legend-dot",style:st({backgroundColor:R.color})},null,4),ke(" "+b(R.label),1)])),64))])])]))}},d1=we(u1,[["__scopeId","data-v-0bda6ee1"]]),f1={class:"obs-header-left"},p1={class:"obs-id"},v1={class:"obs-header-right"},m1={class:"timestamp"},h1={class:"obs-body"},g1={class:"obs-col"},y1={class:"card"},b1={class:"hands-grid"},_1={class:"deal-meta-top"},w1={class:"meta-row"},S1={class:"meta-value"},C1={class:"meta-row"},$1={class:"meta-value"},k1={class:"meta-row"},x1={class:"meta-value"},A1={class:"meta-row"},T1={class:"meta-value"},N1={class:"compass-north"},E1={class:"seat-label"},O1={key:0,class:"you-tag"},I1={class:"cards"},R1={key:1,class:"hidden-hand"},D1={class:"seat-label"},P1={key:0,class:"you-tag"},L1={class:"cards"},B1={key:1,class:"hidden-hand"},M1={class:"seat-label"},U1={key:0,class:"you-tag"},F1={class:"cards"},j1={key:1,class:"hidden-hand"},H1={class:"deal-meta-bottom"},W1={class:"meta-row"},K1={class:"meta-contract"},V1={class:"compass-south"},G1={class:"seat-label"},z1={key:0,class:"you-tag"},J1={class:"cards"},Y1={key:1,class:"hidden-hand"},q1={class:"obs-col"},X1={class:"card"},Q1={class:"auction-header"},Z1={key:0,class:"split-cell"},e0={class:"pill-expected"},t0={key:1,class:"split-cell"},s0={class:"pill-expected"},n0={key:0,class:"pill-student"},o0={key:2,class:"auction-bid"},a0={key:0,class:"prompts-list"},r0={class:"prompt-num"},l0={key:0,class:"prompt-detail"},i0={class:"pill-expected-sm"},c0={class:"pill-student-sm"},u0={key:1,class:"prompt-ok"},d0={key:1,class:"prompt-detail"},f0={class:"pill-expected-sm"},p0={class:"pill-student-sm"},v0={key:1,class:"prompt-ok"},m0={key:2,class:"prompt-time"},h0={key:1,class:"prompt-meta"},g0={class:"prompt-meta-auction"},y0={key:2,class:"auction-legend"},b0={key:0,class:"legend-item"},_0={key:3,class:"auction-legend"},w0={key:0,class:"legend-item"},S0={class:"card"},C0={class:"info-grid"},$0={class:"info-item"},k0={class:"info-value"},x0={class:"info-item"},A0={class:"info-value"},T0={class:"info-item full-width"},N0={class:"info-item"},E0={class:"info-value"},O0={class:"info-item"},I0={class:"info-value"},R0={class:"info-item full-width"},D0={class:"info-value mono"},P0={__name:"ObservationViewer",props:{obs:{type:Object,required:!0},initialX:{type:Number,default:100},initialY:{type:Number,default:100},zIndex:{type:Number,default:3e3}},emits:["close","focus"],setup(e,{emit:t}){const s=e,n=t,o=E(s.initialX),a=E(s.initialY);let r=!1,i=0,c=0;function u(q){r=!0,i=q.clientX-o.value,c=q.clientY-a.value,document.addEventListener("mousemove",f),document.addEventListener("mouseup",d),n("focus")}function f(q){r&&(o.value=q.clientX-i,a.value=q.clientY-c)}function d(){r=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)}Lr(()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)});const p=N(()=>s.obs.deal||{}),h=N(()=>s.obs.bid_prompt||{}),g=N(()=>s.obs.result||{}),y=N(()=>g.value.correct),$=N(()=>p.value.hands||{}),C=N(()=>p.value.student_seat),_=N(()=>h.value.prompt_index===-1||h.value.expected_bid==="BOARD"),w=N(()=>s.obs.prompts||[]),x=N(()=>w.value.length>0),R=N(()=>{if(!x.value)return{};const q=ue.indexOf(p.value.dealer),U={};for(const A of w.value){if(A.type!=="bid"||!A.auction_so_far)continue;const K=q+A.auction_so_far.length;U[K]||(U[K]=[]),U[K].push(A)}const H={};for(const[A,K]of Object.entries(U)){const ce=K.find(xe=>!xe.correct);if(!ce)continue;const Te=K.some(xe=>xe.correct);H[A]={expected:ce.expected_bid,student:ce.student_bid,correct:!1,corrected:Te}}return H}),L=N(()=>{const q=w.value,U=new Map;for(const Te of q){const xe=Te.type==="bid"?`bid-${Te.prompt_index}`:`card-${q.indexOf(Te)}`;U.has(xe)||U.set(xe,[]),U.get(xe).push(Te)}let H=U.size,A=0,K=0;for(const Te of U.values()){const xe=Te.some(z=>!z.correct),je=Te.some(z=>z.correct);xe&&(A++,je&&K++)}const ce=q.reduce((Te,xe)=>Te+(xe.time_ms||0),0);return{total:H,wrong:A,corrected:K,totalTime:ce}}),B=N(()=>h.value.expected_bid),Q=N(()=>g.value.student_bid),Y=N(()=>h.value.auction_so_far||[]),fe=N(()=>((s.obs.observation_id||s.obs.id||"")+"").slice(0,8)+""),ve=N(()=>s.obs.timestamp?new Date(s.obs.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),ue=["W","N","E","S"],ge=N(()=>{const q=p.value.full_auction,U=(typeof q=="string"?q:Array.isArray(q)?q.join(" "):"").split(" ").filter(Boolean),H=ue.indexOf(p.value.dealer);return[...Array(Math.max(0,H)).fill(null),...U]}),$e=N(()=>ue.indexOf(p.value.dealer)+Y.value.length),me=N(()=>{const q=[];for(let U=0;U<ge.value.length;U+=4)q.push(ge.value.slice(U,U+4));return q});function pe(q){return!q||q<=0?"":q<1e3?q+"ms":(q/1e3).toFixed(1)+"s"}function V(q){if(!q)return null;if(typeof q=="object"&&q.spades!==void 0)return[{suit:"",cards:(q.spades||[]).join(""),color:"black"},{suit:"",cards:(q.hearts||[]).join(""),color:"red"},{suit:"",cards:(q.diamonds||[]).join(""),color:"red"},{suit:"",cards:(q.clubs||[]).join(""),color:"black"}];if(typeof q!="string")return null;const U=q.split(".");if(U.length<4)return null;const[H,A,K,ce]=U;return[{suit:"",cards:H,color:"black"},{suit:"",cards:A,color:"red"},{suit:"",cards:K,color:"red"},{suit:"",cards:ce,color:"black"}]}return(q,U)=>(v(),m("div",{class:"obs-viewer",style:st({left:o.value+"px",top:a.value+"px",zIndex:e.zIndex}),onMousedown:U[1]||(U[1]=H=>q.$emit("focus"))},[l("div",{class:"obs-header",onMousedown:Ct(u,["prevent"])},[l("div",f1,[U[2]||(U[2]=l("span",{class:"suit-icon"},"",-1)),U[3]||(U[3]=l("span",{class:"obs-title"},"Observation Detail",-1)),l("span",p1,b(fe.value),1)]),l("div",v1,[l("span",m1,b(ve.value),1),l("span",{class:ie(["result-badge",y.value?"correct":"incorrect"])},b(y.value?" Correct":" Incorrect"),3),l("button",{class:"close-btn",onClick:U[0]||(U[0]=H=>q.$emit("close")),title:"Close"},"")])],32),l("div",h1,[l("div",g1,[l("div",y1,[U[16]||(U[16]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),ke(" Hands")],-1)),l("div",b1,[l("div",_1,[l("div",w1,[U[4]||(U[4]=l("span",{class:"meta-label"},"Lesson",-1)),l("span",S1,b(p.value.subfolder),1)]),l("div",C1,[U[5]||(U[5]=l("span",{class:"meta-label"},"Deal",-1)),l("span",$1,"#"+b(p.value.deal_number),1)]),l("div",k1,[U[6]||(U[6]=l("span",{class:"meta-label"},"Dealer",-1)),l("span",x1,b(p.value.dealer),1)]),l("div",A1,[U[7]||(U[7]=l("span",{class:"meta-label"},"Vul",-1)),l("span",T1,b(p.value.vulnerability),1)])]),l("div",N1,[l("div",{class:ie(["hand-cell",{student:C.value==="N"}])},[l("div",E1,[U[8]||(U[8]=ke("N ",-1)),C.value==="N"?(v(),m("span",O1,"YOU")):j("",!0)]),V($.value.north)?(v(!0),m(ee,{key:0},ae(V($.value.north),H=>(v(),m("div",{key:H.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",H.color])},b(H.suit),3),l("span",I1,b(H.cards||""),1)]))),128)):(v(),m("span",R1,"Hidden"))],2)]),U[13]||(U[13]=l("div",null,null,-1)),l("div",{class:ie(["hand-cell",{student:C.value==="W"}])},[l("div",D1,[U[9]||(U[9]=ke("W ",-1)),C.value==="W"?(v(),m("span",P1,"YOU")):j("",!0)]),V($.value.west)?(v(!0),m(ee,{key:0},ae(V($.value.west),H=>(v(),m("div",{key:H.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",H.color])},b(H.suit),3),l("span",L1,b(H.cards||""),1)]))),128)):(v(),m("span",B1,"Hidden"))],2),U[14]||(U[14]=no('<div class="compass-center" data-v-930ba1ed><div class="compass-rose" data-v-930ba1ed><span class="cr-n" data-v-930ba1ed>N</span><span class="cr-w" data-v-930ba1ed>W</span><span class="cr-e" data-v-930ba1ed>E</span><span class="cr-s" data-v-930ba1ed>S</span></div></div>',1)),l("div",{class:ie(["hand-cell",{student:C.value==="E"}])},[l("div",M1,[U[10]||(U[10]=ke("E ",-1)),C.value==="E"?(v(),m("span",U1,"YOU")):j("",!0)]),V($.value.east)?(v(!0),m(ee,{key:0},ae(V($.value.east),H=>(v(),m("div",{key:H.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",H.color])},b(H.suit),3),l("span",F1,b(H.cards||""),1)]))),128)):(v(),m("span",j1,"Hidden"))],2),l("div",H1,[l("div",W1,[U[11]||(U[11]=l("span",{class:"meta-label"},"Contract",-1)),l("span",K1,b(p.value.contract)+" by "+b(p.value.declarer),1)])]),l("div",V1,[l("div",{class:ie(["hand-cell",{student:C.value==="S"}])},[l("div",G1,[U[12]||(U[12]=ke("S ",-1)),C.value==="S"?(v(),m("span",z1,"YOU")):j("",!0)]),V($.value.south)?(v(!0),m(ee,{key:0},ae(V($.value.south),H=>(v(),m("div",{key:H.suit,class:"holding-row"},[l("span",{class:ie(["suit-pip",H.color])},b(H.suit),3),l("span",J1,b(H.cards||""),1)]))),128)):(v(),m("span",Y1,"Hidden"))],2)]),U[15]||(U[15]=l("div",null,null,-1))])])]),l("div",q1,[l("div",X1,[U[28]||(U[28]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),ke(" Auction")],-1)),l("div",Q1,[(v(),m(ee,null,ae(["W","N","E","S"],H=>l("span",{key:H,class:"auction-dir"},b(H),1)),64))]),(v(!0),m(ee,null,ae(me.value,(H,A)=>(v(),m("div",{key:A,class:"auction-row"},[(v(!0),m(ee,null,ae(H,(K,ce)=>(v(),m(ee,{key:ce},[x.value&&R.value[A*4+ce]?(v(),m("div",Z1,[l("span",e0,b(R.value[A*4+ce].expected),1),l("span",{class:ie(R.value[A*4+ce].corrected?"pill-corrected":"pill-student")},b(R.value[A*4+ce].student),3)])):!_.value&&!x.value&&A*4+ce===$e.value?(v(),m("div",t0,[l("span",s0,b(B.value),1),y.value?j("",!0):(v(),m("span",n0,b(Q.value),1))])):(v(),m("span",o0,b(K||""),1))],64))),128))]))),128)),x.value?(v(),m("div",a0,[(v(!0),m(ee,null,ae(w.value,(H,A)=>(v(),m("div",{key:A,class:ie(["prompt-row",H.correct?"prompt-correct":"prompt-wrong"])},[l("span",r0,"#"+b(A+1),1),H.type==="bid"?(v(),m("span",l0,[U[18]||(U[18]=ke(" Expected ",-1)),l("span",i0,b(H.expected_bid),1),H.correct?(v(),m("span",u0,"")):(v(),m(ee,{key:0},[U[17]||(U[17]=ke(" got ",-1)),l("span",c0,b(H.student_bid),1)],64))])):H.type==="card"?(v(),m("span",d0,[U[20]||(U[20]=ke(" Expected ",-1)),l("span",f0,b(H.expected_card),1),H.correct?(v(),m("span",v0,"")):(v(),m(ee,{key:0},[U[19]||(U[19]=ke(" got ",-1)),l("span",p0,b(H.student_card),1)],64))])):j("",!0),H.time_ms>0?(v(),m("span",m0,b(pe(H.time_ms)),1)):j("",!0)],2))),128))])):_.value?(v(),m("div",h0,[U[21]||(U[21]=l("span",{class:"prompt-meta-label"},"Board summary",-1)),U[22]||(U[22]=l("span",{class:"prompt-meta-sep"},"",-1)),l("span",g0,b(y.value?"All prompts answered correctly":"Student made errors on this board"),1)])):j("",!0),!_.value&&!x.value?(v(),m("div",y0,[U[24]||(U[24]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot green"}),ke(" Expected")],-1)),y.value?j("",!0):(v(),m("span",b0,[...U[23]||(U[23]=[l("span",{class:"legend-dot red"},null,-1),ke(" Student bid",-1)])])),U[25]||(U[25]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot gray"}),ke(" After this point")],-1))])):x.value?(v(),m("div",_0,[U[27]||(U[27]=l("span",{class:"legend-item"},[l("span",{class:"legend-dot green"}),ke(" Expected")],-1)),w.value.some(H=>!H.correct)?(v(),m("span",w0,[...U[26]||(U[26]=[l("span",{class:"legend-dot red"},null,-1),ke(" Student response",-1)])])):j("",!0)])):j("",!0)]),l("div",S0,[U[35]||(U[35]=l("div",{class:"card-title"},[l("span",{class:"suit-icon-sm"},""),ke(" Result & Meta")],-1)),l("div",C0,[x.value?(v(),m(ee,{key:0},[l("div",$0,[U[29]||(U[29]=l("span",{class:"info-label"},"Prompts",-1)),l("span",k0,b(L.value.total),1)]),l("div",x0,[U[30]||(U[30]=l("span",{class:"info-label"},"Total Time",-1)),l("span",A0,b(L.value.totalTime>0?pe(L.value.totalTime):"n/a"),1)]),l("div",T0,[U[31]||(U[31]=l("span",{class:"info-label"},"Result",-1)),l("span",{class:"info-value",style:st({color:L.value.wrong===0?"var(--green)":"var(--red)"})},b(L.value.wrong===0?"All correct":`${L.value.wrong} error${L.value.wrong>1?"s":""}`)+b(L.value.corrected>0?`, ${L.value.corrected} fixed`:""),5)])],64)):(v(),m(ee,{key:1},[l("div",N0,[U[32]||(U[32]=l("span",{class:"info-label"},"Attempt #",-1)),l("span",E0,b(g.value.attempt_number),1)]),l("div",O0,[U[33]||(U[33]=l("span",{class:"info-label"},"Time Taken",-1)),l("span",I0,b(g.value.time_taken_ms===0?"n/a":g.value.time_taken_ms+" ms"),1)])],64)),l("div",R0,[U[34]||(U[34]=l("span",{class:"info-label"},"Skill Path",-1)),l("span",D0,b(e.obs.skill_path),1)])])])])])],36))}},L0=we(P0,[["__scopeId","data-v-930ba1ed"]]),B0=30,M0={__name:"ObservationPopupManager",setup(e,{expose:t}){const s=E([]);let n=0,o=3e3;function a(u,f){const d=s.value.length*B0,p=f?Math.min(f.clientX+20+d,window.innerWidth-700):60+d,h=f?Math.min(f.clientY-40+d,window.innerHeight-400):60+d;o++,s.value.push({id:n++,obs:u,x:Math.max(10,p),y:Math.max(10,h),zIndex:o})}function r(u){s.value=s.value.filter(f=>f.id!==u)}function i(u){o++;const f=s.value.find(d=>d.id===u);f&&(f.zIndex=o)}function c(){s.value=[]}return t({openObservation:a,closeAll:c}),(u,f)=>(v(),Ue(Jd,{to:"body"},[(v(!0),m(ee,null,ae(s.value,d=>(v(),Ue(L0,{key:d.id,obs:d.obs,"initial-x":d.x,"initial-y":d.y,"z-index":d.zIndex,onClose:p=>r(d.id),onFocus:p=>i(d.id)},null,8,["obs","initial-x","initial-y","z-index","onClose","onFocus"]))),128))]))}},U0={class:"student-progress-panel"},F0={key:0,class:"sp-empty"},j0={class:"sp-header"},H0={class:"sp-header-row"},W0={key:0,class:"sp-name-badge"},K0={class:"sp-meta"},V0={key:0,class:"sp-activity-chart"},G0={class:"sp-activity-header"},z0={class:"sp-activity-meta"},J0={class:"sp-activity-body"},Y0={class:"sp-activity-svg-wrap"},q0=["viewBox"],X0=["x"],Q0=["x","y"],Z0=["x1","x2","y2"],ew=["x","y","width","height","fill"],tw=["x","y"],sw=["x","y"],nw={class:"sp-activity-legend"},ow={class:"sp-legend"},aw={class:"sp-grid"},rw=["onClick"],lw={class:"sp-card-header"},iw={class:"sp-card-info"},cw={class:"sp-card-name"},uw={class:"sp-card-meta"},dw={class:"sp-card-rate"},fw={class:"sp-card-sparkline"},pw={class:"sp-mastery"},vw={class:"sp-mastery-track"},mw=["title"],hw={class:"sp-mastery-legend"},gw={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""},studentId:{type:String,default:""}},setup(e){const t=e,s=E(null),n=E(null),o=wn(),a=N(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:$,lessonNames:C}=L_(t.observations);return P_(t.observations,$,C)}),r=N(()=>a.value.reduce(($,C)=>$+C.tried,0)),i=N(()=>a.value.reduce(($,C)=>$+C.totalAttempts,0)),c=[{color:"#10b981",label:"Clean correct"},{color:"#3b82f6",label:"Recent correct (after fail within 1 hr)"},{color:"#f59e0b",label:"Corrected (errors fixed within board)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function u($){return`hsl(${Math.round($*360/a.value.length)}, 65%, 55%)`}function f($){return $>=75?"#10b981":$>=50?"#f59e0b":"#f43f5e"}function d($){return $?$.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function p($){if(!$.firstActivity||!$.lastActivity)return null;const C=$.lastActivity-$.firstActivity,_=C/6e4,w=C/36e5,x=C/864e5;return _<90?`${Math.round(_)} min`:w<48?`${Math.round(w)} hr`:x<14?`${Math.round(x)} days`:`${Math.round(x/7)} wks`}async function h({rawTs:$,dealNum:C,correct:_,event:w}){if(n.value)if(t.studentId){const x=await o.findAndDecryptObservation(t.studentId,$,C,_);x?n.value.openObservation(x,w):console.warn("Observation decryption failed  teacher private key may be missing")}else{const x=t.observations.find(R=>{const L=new Date(R.timestamp).getTime();return Math.abs(L-$)<1e3&&R.deal_number===C&&R.correct===_});x&&n.value.openObservation(x,w)}}function g($){const C=Math.max(0,($.totalBoards||0)-$.tried),_=[{count:$.mastered,color:sn.mastered,label:"Mastered"},{count:$.progressing,color:sn.progressing,label:"Progressing"},{count:$.struggling,color:sn.struggling,label:"Struggling"},{count:C,color:sn.untried,label:"Untried"}].filter(x=>x.count>0),w=_.reduce((x,R)=>x+R.count,0);return _.forEach(x=>{x.pct=`${(x.count/w*100).toFixed(1)}%`}),_}const y=N(()=>{if(a.value.length===0)return null;const $=864e5,C=28,_=700,w=120,x=new Set,R=a.value.map($e=>{const me={};return $e.boardLines.forEach(pe=>{pe.points.forEach(V=>{const q=Math.floor((V.rawTs??0)/$);q>0&&(me[q]=(me[q]||0)+1,x.add(q))})}),me});if(x.size===0)return null;const L=[...x].sort(),B=L[0],Q=L[L.length-1],Y=Q-B+1,fe=L.map($e=>R.reduce((me,pe)=>me+(pe[$e]||0),0)),ve=Math.max(...fe),ue=Math.max(1,_/Y*.75);return{days:L.map($e=>{const me=C+($e-B)/Y*_;let pe=w;const V=[];return a.value.forEach((q,U)=>{const H=R[U][$e]||0;if(!H)return;const A=H/ve*w;pe-=A,V.push({y:pe,h:A,count:H,color:u(U),name:q.name})}),{dayKey:$e,x:me,segments:V,dateLabel:new Date($e*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:ve,barW:ue,barH:w,chartW:_,svgW:C+_,yAxisW:C,firstLabel:new Date(B*$).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(Q*$).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return($,C)=>(v(),m("div",U0,[a.value.length===0?(v(),m("div",F0,[...C[1]||(C[1]=[l("p",null,"No practice data to display yet.",-1)])])):(v(),m(ee,{key:1},[l("div",j0,[l("div",H0,[e.studentName?(v(),m("span",W0,b(e.studentName),1)):j("",!0),l("span",K0,b(a.value.length)+" lesson"+b(a.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),y.value?(v(),m("div",V0,[l("div",G0,[C[2]||(C[2]=ke(" Daily practice activity ",-1)),l("span",z0,b(r.value)+" boards  "+b(i.value)+" observations ",1)]),l("div",J0,[l("div",Y0,[(v(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.svgW} ${y.value.barH+26}`,style:st({display:"block",height:y.value.barH+26+"px"})},[l("text",{x:y.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.maxCount),9,X0),l("text",{x:y.value.yAxisW-3,y:y.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,Q0),l("line",{x1:y.value.yAxisW,y1:"0",x2:y.value.yAxisW,y2:y.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,Z0),(v(!0),m(ee,null,ae(y.value.days,_=>(v(),m("g",{key:_.dayKey},[(v(!0),m(ee,null,ae(_.segments,(w,x)=>(v(),m("rect",{key:x,x:_.x,y:w.y,width:y.value.barW,height:w.h,fill:w.color,opacity:"0.85",rx:"1"},[l("title",null,b(w.name)+": "+b(w.count)+" on "+b(_.dateLabel),1)],8,ew))),128))]))),128)),l("text",{x:y.value.yAxisW,y:y.value.barH+18,"font-size":"10",fill:"#6b7280"},b(y.value.firstLabel),9,tw),l("text",{x:y.value.yAxisW+y.value.chartW,y:y.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.lastLabel),9,sw)],12,q0))]),l("div",nw,[(v(!0),m(ee,null,ae(a.value,(_,w)=>(v(),m("span",{key:_.path,class:"sp-activity-legend-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:u(w)})},null,4),ke(" "+b(_.name),1)]))),128))])])])):j("",!0),l("div",ow,[(v(),m(ee,null,ae(c,_=>l("span",{key:_.label,class:"sp-legend-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:_.color})},null,4),ke(" "+b(_.label),1)])),64)),C[3]||(C[3]=l("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),l("div",aw,[(v(!0),m(ee,null,ae(a.value,_=>(v(),m("div",{key:_.path,class:"sp-lesson-card",onClick:w=>s.value=_},[l("div",lw,[l("div",iw,[l("div",cw,b(_.name),1),l("div",uw,b(_.tried)+" boards  "+b(_.totalAttempts)+" attempts  last "+b(d(_.lastActivity))+b(p(_)?`  span ${p(_)}`:""),1)]),l("div",dw,[l("div",{class:"sp-rate-value",style:st({color:f(_.recentRate)})},b(_.recentRate)+"% ",5),C[4]||(C[4]=l("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),l("div",fw,[ye(V_,{boardLines:_.boardLines,width:280,height:70},null,8,["boardLines"])]),l("div",pw,[l("div",vw,[(v(!0),m(ee,null,ae(g(_),w=>(v(),m("div",{key:w.label,class:"sp-mastery-segment",style:st({width:w.pct,backgroundColor:w.color}),title:`${w.label}: ${w.count}`},null,12,mw))),128))]),l("div",hw,[(v(!0),m(ee,null,ae(g(_),w=>(v(),m("span",{key:w.label,class:"sp-mastery-item"},[l("span",{class:"sp-legend-dot",style:st({backgroundColor:w.color})},null,4),ke(" "+b(w.count)+" "+b(w.label),1)]))),128))])]),C[5]||(C[5]=l("div",{class:"sp-card-hint"},"details ",-1))],8,rw))),128))])],64)),s.value?(v(),Ue(d1,{key:2,lesson:s.value,rawData:e.observations,onClose:C[0]||(C[0]=_=>s.value=null),onDotClick:h},null,8,["lesson","rawData"])):j("",!0),ye(M0,{ref_key:"popupManager",ref:n},null,512)]))}},Fu=we(gw,[["__scopeId","data-v-e7531eab"]]),yw={class:"progress-dashboard"},bw={class:"dashboard-header"},_w={key:0,class:"loading"},ww={key:1,class:"error-state"},Sw={key:2,class:"empty-state"},Cw={key:3,class:"dashboard-content"},$w={class:"dashboard-actions"},kw={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Zr(),s=He(),n=N(()=>t.decryptedObservations.value),o=N(()=>n.value.length>0),a=N(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});bt(async()=>{await t.fetchProgress()});async function r(){await t.fetchProgress(!0)}return(i,c)=>(v(),m("div",yw,[l("header",bw,[c[3]||(c[3]=l("h2",null,"Student Progress",-1)),l("button",{class:"close-btn",onClick:c[0]||(c[0]=u=>i.$emit("close"))},"")]),M(t).isLoading.value?(v(),m("div",_w,[...c[4]||(c[4]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading your progress...",-1)])])):M(t).hasError.value?(v(),m("div",ww,[l("p",null,"Failed to load progress: "+b(M(t).error.value),1),l("button",{onClick:r},"Try Again")])):o.value?(v(),m("div",Cw,[ye(Fu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),l("div",$w,[l("button",{class:"secondary-btn",onClick:r},"Refresh Data"),l("button",{class:"primary-btn",onClick:c[2]||(c[2]=u=>i.$emit("close"))},"Continue Practicing")])])):(v(),m("div",Sw,[c[5]||(c[5]=l("h3",null,"No Practice Data Yet",-1)),c[6]||(c[6]=l("p",null,"Complete some practice deals to see your progress here!",-1)),l("button",{class:"primary-btn",onClick:c[1]||(c[1]=u=>i.$emit("close"))},"Start Practicing")]))]))}},xw=we(kw,[["__scopeId","data-v-286a38c8"]]),Aw="test-user-mastery",Tw="test-classroom",Nw="Negative_Double",Ew="competitive_bidding/negative_double";let yr=0;function tt({boardNumber:e,correct:t,timestamp:s}){return yr++,{id:`mastery-test-${yr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Aw,skill_path:Ew,correct:t,deal_subfolder:Nw,deal_number:e,classroom:Tw}}function _t(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function No(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Ow(){yr=0;const e=[];e.push(tt({boardNumber:2,correct:!0,timestamp:_t(5)}),tt({boardNumber:2,correct:!1,timestamp:_t(1)})),e.push(tt({boardNumber:3,correct:!1,timestamp:No(30)}),tt({boardNumber:3,correct:!0,timestamp:No(20)})),e.push(tt({boardNumber:4,correct:!1,timestamp:No(90)}),tt({boardNumber:4,correct:!0,timestamp:No(60)})),e.push(tt({boardNumber:5,correct:!1,timestamp:_t(10)}),tt({boardNumber:5,correct:!0,timestamp:_t(2)})),e.push(tt({boardNumber:6,correct:!0,timestamp:_t(14)}),tt({boardNumber:6,correct:!0,timestamp:_t(7)})),e.push(tt({boardNumber:7,correct:!0,timestamp:_t(21)}),tt({boardNumber:7,correct:!0,timestamp:_t(14)}),tt({boardNumber:7,correct:!0,timestamp:_t(7)})),e.push(tt({boardNumber:8,correct:!0,timestamp:_t(28)}),tt({boardNumber:8,correct:!0,timestamp:_t(21)}),tt({boardNumber:8,correct:!0,timestamp:_t(14)}),tt({boardNumber:8,correct:!1,timestamp:_t(1)}));const t=[1,2,3,4,5].map(s=>({...tt({boardNumber:s,correct:!0,timestamp:_t(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Iw=["onClick","title"],Rw={key:0,class:"medal gold-medal"},Dw={key:1,class:"medal silver-medal"},Pw={class:"board-num"},Lw={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceBoardStatus:{type:Object,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1},userId:{type:String,default:null}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=nl(),a=ys(),r=He(),i=E([]),c=E(!1);async function u(){var h;const p=s.userId||((h=r.currentUser.value)==null?void 0:h.id);if(!(!p||!s.lessonSubfolder))try{const g=await o.fetchBoardStatus(p,s.lessonSubfolder);g.length>0&&(i.value=g,c.value=!0)}catch{}}bt(u),yt(()=>s.lessonSubfolder,u);const f=N(()=>{let p;if(c.value&&i.value.length>0?(p=o.buildBoardMastery(i.value,s.boardNumbers),o.mergeLocalPending(p,s.lessonSubfolder)):p=a.computeBoardMastery(a.getObservations(),s.lessonSubfolder,s.boardNumbers),s.forceBoardStatus){const h=p.find(g=>g.boardNumber===s.forceBoardStatus.board);h&&(h.status=s.forceBoardStatus.status)}return p});function d(p){const h={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"},g={none:"",silver:" | Silver star",gold:" | Gold star"};return`Board ${p.boardNumber}: ${h[p.status]||p.status}${g[p.achievement]||""}`}return(p,h)=>e.boardNumbers.length>0?(v(),m("div",{key:0,class:ie(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(v(),m("button",{key:0,class:"intro-btn",onClick:h[0]||(h[0]=g=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):j("",!0),(v(!0),m(ee,null,ae(f.value,(g,y)=>(v(),m("div",{key:g.boardNumber,class:ie(["board-indicator",[`status-${g.status}`,{active:y===e.currentIndex},{"has-medal":g.achievement!=="none"},{"medal-gold":g.achievement==="gold"},{"medal-silver":g.achievement==="silver"}]]),onClick:$=>n("goto",y),title:d(g)},[g.achievement==="gold"?(v(),m("span",Rw,"")):g.achievement==="silver"?(v(),m("span",Dw,"")):j("",!0),l("span",Pw,b(g.boardNumber),1)],10,Iw))),128))],2)):j("",!0)}},ju=we(Lw,[["__scopeId","data-v-63f4f85b"]]),Bw={class:"accomplishments-view"},Mw={class:"view-header"},Uw={key:0,class:"user-selector"},Fw=["value"],jw=["value"],Hw={key:1,class:"loading-state"},Ww={key:2,class:"error-state"},Kw={key:3,class:"empty-state"},Vw={key:4,class:"view-content"},Gw={class:"controls-row"},zw={class:"tabs"},Jw={key:0,class:"tab-content"},Yw={key:0,class:"no-data"},qw={key:1,class:"lesson-list"},Xw={class:"lesson-header"},Qw={class:"lesson-name"},Zw={key:1,class:"tab-content"},eS={key:0,class:"no-data"},tS={key:1,class:"taxon-list"},sS={class:"taxon-header"},nS={class:"taxon-category"},oS={class:"taxon-name"},aS={class:"taxon-counts"},rS={class:"taxon-stat correct"},lS={class:"taxon-stat incorrect"},iS={class:"taxon-stat total"},cS={class:"view-actions"},uS={key:5,class:"test-mode-banner"},dS={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=_s(),o=ys(),r=new URLSearchParams(window.location.search).get("test");bt(async()=>{r==="mastery"||r==="accomplishments"?n.enableTestMode(Ow()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function c(p){await n.selectUser(p)}function u(p,h){s("navigate-to-deal",{subfolder:p,dealNumber:h})}const f=N(()=>{const p=o.getObservations();return o.extractLessonsFromObservations(p).map(g=>{const y=o.computeBoardMastery(p,g.subfolder,g.boardNumbers),$=o.computeLessonAchievement(y);return{...g,achievement:$.achievement}}).sort((g,y)=>d(g.subfolder).localeCompare(d(y.subfolder)))});yt(f,p=>{o.fetchMissingBoardCounts(p.map(h=>h.subfolder))},{immediate:!0});function d(p){return n.formatLessonName(p)}return(p,h)=>(v(),m("div",Bw,[l("header",Mw,[h[6]||(h[6]=l("h2",null,"Accomplishments",-1)),l("button",{class:"close-btn",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"")]),M(n).canViewOtherUsers.value?(v(),m("div",Uw,[h[7]||(h[7]=l("label",{for:"user-select"},"Viewing:",-1)),l("select",{id:"user-select",value:M(n).selectedUserId.value,onChange:h[1]||(h[1]=g=>c(g.target.value))},[(v(!0),m(ee,null,ae(M(n).accessibleUsers.value,g=>(v(),m("option",{key:g.id,value:g.id},b(g.name)+b(g.isSelf?" (You)":""),9,jw))),128))],40,Fw)])):j("",!0),M(n).loading.value?(v(),m("div",Hw,[...h[8]||(h[8]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading accomplishments...",-1)])])):M(n).error.value?(v(),m("div",Ww,[l("p",null,"Failed to load: "+b(M(n).error.value),1),l("button",{onClick:i},"Try Again")])):M(n).hasData.value?(v(),m("div",Vw,[l("div",Gw,[l("div",zw,[l("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="lessons"}]),onClick:h[3]||(h[3]=g=>M(n).activeTab.value="lessons")}," Lessons ",2),l("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="taxons"}]),onClick:h[4]||(h[4]=g=>M(n).activeTab.value="taxons")}," Taxons ",2)])]),M(n).activeTab.value==="lessons"?(v(),m("div",Jw,[f.value.length===0?(v(),m("div",Yw," No lesson data available yet. ")):(v(),m("div",qw,[(v(!0),m(ee,null,ae(f.value,g=>(v(),m("div",{key:g.subfolder,class:"lesson-row"},[l("div",Xw,[l("span",Qw,b(d(g.subfolder)),1),g.achievement!=="none"?(v(),m("span",{key:0,class:ie(["achievement-badge",g.achievement])},"  "+b(g.achievement==="gold"?"Gold":"Silver"),3)):j("",!0)]),ye(ju,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,userId:M(n).selectedUserId.value,onGoto:y=>u(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","userId","onGoto"])]))),128))]))])):j("",!0),M(n).activeTab.value==="taxons"?(v(),m("div",Zw,[M(n).filteredTaxonStats.value.length===0?(v(),m("div",eS," No skill data available yet. ")):(v(),m("div",tS,[(v(!0),m(ee,null,ae(M(n).filteredTaxonStats.value,g=>(v(),m("div",{key:g.skillPath,class:"taxon-card"},[l("div",sS,[l("span",nS,b(g.categoryName),1),l("span",oS,b(g.skillName),1)]),l("div",aS,[l("span",rS,b(g.correct),1),l("span",lS,b(g.incorrect),1),l("span",iS,b(g.total)+" total",1)])]))),128))]))])):j("",!0),l("div",cS,[l("button",{class:"secondary-btn",onClick:i}," Refresh "),l("button",{class:"primary-btn",onClick:h[5]||(h[5]=g=>p.$emit("close"))}," Done ")])])):(v(),m("div",Kw,[h[9]||(h[9]=l("h3",null,"No Practice Data Yet",-1)),h[10]||(h[10]=l("p",null,"Complete some practice deals to see your accomplishments here!",-1)),l("button",{class:"primary-btn",onClick:h[2]||(h[2]=g=>p.$emit("close"))},"Start Practicing")])),M(n).useTestData.value?(v(),m("div",uS," Test Mode - Using Generated Data ")):j("",!0)]))}},fS=we(dS,[["__scopeId","data-v-b2e1ca98"]]),Hu="bridge-classroom-anon-mode",pS="BridgeClassroom-Anon",Ua=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Ai=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function vS(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function mS(e,t){const s=`${pS}:${e} ${t}`,n=vS(s),o=Number(n%BigInt(Ua.length)),a=Number(n/BigInt(Ua.length)%BigInt(Ai.length));return{firstName:Ua[o],lastName:Ai[a]}}const In=E(localStorage.getItem(Hu)==="true");function hS(){function e(){In.value=!In.value,localStorage.setItem(Hu,In.value.toString())}function t(o){return In.value?mS(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:r}=t(o);return`${a} ${r}`}function n(o){const{firstName:a,lastName:r}=t(o),i=(a==null?void 0:a.charAt(0))||"",c=(r==null?void 0:r.charAt(0))||"";return(i+c).toUpperCase()||"?"}return{isAnonymized:In,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const gS={class:"teacher-student-list"},yS={class:"teacher-header"},bS={class:"header-actions"},_S=["value"],wS={key:0,class:"loading-state"},SS={key:1,class:"error-state"},CS={key:2,class:"empty-state"},$S={key:3,class:"empty-state"},kS={key:4,class:"student-table-wrap"},xS={class:"student-table"},AS=["onClick"],TS={class:"col-name"},NS={class:"student-name-cell"},ES={class:"avatar"},OS={class:"col-mastery"},IS={class:"mastery-pills"},RS={key:0,class:"pill pill-green"},DS={key:1,class:"pill pill-orange"},PS={key:2,class:"pill pill-yellow"},LS={key:3,class:"pill pill-red"},BS={key:4,class:"no-data-label"},MS={class:"col-active"},US={class:"col-lessons"},FS={class:"recent-lessons"},jS={key:0,class:"no-data-label"},HS={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=wn(),n=_o(),o=He(),a=hS(),r=E("all"),i=E({});bt(async()=>{await s.loadAllStudentSummaries(),await c()});async function c(){const C=o.currentUser.value;if(!C)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms(C.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async w=>{const x=await n.fetchClassroomDetail(w.id);x!=null&&x.success&&(_[w.id]=new Set(x.classroom.members.map(R=>R.student_id)))})),i.value=_}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await c()}const f=N(()=>{const C=new Set;for(const _ of Object.values(i.value))for(const w of _)C.add(w);return C}),d=N(()=>{const C=s.students.value;if(r.value==="all")return C;if(r.value==="none")return C.filter(w=>!f.value.has(w.id));const _=i.value[r.value];return _?C.filter(w=>_.has(w.id)):C}),p=N(()=>[...d.value].sort((C,_)=>{var R,L;const w=((R=h.value[C.id])==null?void 0:R.lastObservationTime)||"",x=((L=h.value[_.id])==null?void 0:L.lastObservationTime)||"";return x!==w?x.localeCompare(w):y(C).localeCompare(y(_))})),h=N(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentMasterySummary(_.id);return C}),g=N(()=>{const C={};for(const _ of s.students.value)C[_.id]=s.getStudentRecentLessons(_.id);return C});function y(C){return a.displayFullName(C)}function $(C){return a.displayInitials(C)}return(C,_)=>(v(),m("div",gS,[l("header",yS,[_[5]||(_[5]=l("h2",null,"My Students",-1)),l("div",bS,[M(n).teacherClassrooms.value.length?Fe((v(),m("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=w=>r.value=w),class:"filter-select"},[_[3]||(_[3]=l("option",{value:"all"},"All Students",-1)),(v(!0),m(ee,null,ae(M(n).teacherClassrooms.value,w=>(v(),m("option",{key:w.id,value:w.id},b(w.name),9,_S))),128)),_[4]||(_[4]=l("option",{value:"none"},"No Classroom",-1))],512)),[[Kn,r.value]]):j("",!0),l("button",{class:ie(["anon-btn",{active:M(a).isAnonymized.value}]),onClick:_[1]||(_[1]=w=>M(a).toggleAnonymize())},b(M(a).isAnonymized.value?"Clear":"Anon"),3),l("button",{class:"secondary-btn",onClick:u},"Refresh"),l("button",{class:"secondary-btn",onClick:_[2]||(_[2]=w=>C.$emit("close"))},"Back")])]),M(s).loading.value?(v(),m("div",wS,[..._[6]||(_[6]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading student data...",-1)])])):M(s).error.value?(v(),m("div",SS,[l("p",null,"Failed to load: "+b(M(s).error.value),1),l("button",{onClick:u},"Try Again")])):M(s).students.value.length===0?(v(),m("div",CS,[..._[7]||(_[7]=[l("h3",null,"No Students Yet",-1),l("p",null,"Students will appear here once they register and grant you access.",-1)])])):p.value.length===0?(v(),m("div",$S,[..._[8]||(_[8]=[l("h3",null,"No Matching Students",-1),l("p",null,"No students match the selected filter.",-1)])])):(v(),m("div",kS,[l("table",xS,[_[9]||(_[9]=l("thead",null,[l("tr",null,[l("th",{class:"col-name"},"Student"),l("th",{class:"col-mastery"},"Mastery"),l("th",{class:"col-active"},"Last Active"),l("th",{class:"col-lessons"},"Recent Lessons")])],-1)),l("tbody",null,[(v(!0),m(ee,null,ae(p.value,w=>{var x,R,L,B,Q,Y,fe;return v(),m("tr",{key:w.id,class:"student-row",onClick:ve=>C.$emit("select-student",w.id,y(w))},[l("td",TS,[l("div",NS,[l("div",ES,b($(w)),1),l("span",null,b(y(w)),1)])]),l("td",OS,[l("div",IS,[(x=h.value[w.id])!=null&&x.green?(v(),m("span",RS,b(h.value[w.id].green),1)):j("",!0),(R=h.value[w.id])!=null&&R.orange?(v(),m("span",DS,b(h.value[w.id].orange),1)):j("",!0),(L=h.value[w.id])!=null&&L.yellow?(v(),m("span",PS,b(h.value[w.id].yellow),1)):j("",!0),(B=h.value[w.id])!=null&&B.red?(v(),m("span",LS,b(h.value[w.id].red),1)):j("",!0),(Q=h.value[w.id])!=null&&Q.total?j("",!0):(v(),m("span",BS,"No data"))])]),l("td",MS,b(M(s).formatTimeSince((Y=h.value[w.id])==null?void 0:Y.lastObservationTime)),1),l("td",US,[l("div",FS,[(v(!0),m(ee,null,ae(g.value[w.id],(ve,ue)=>(v(),m("span",{key:ue,class:"lesson-tag"},b(ve),1))),128)),(fe=g.value[w.id])!=null&&fe.length?j("",!0):(v(),m("span",jS,"-"))])])],8,AS)}),128))])])]))]))}},WS=we(HS,[["__scopeId","data-v-dd6d8e66"]]),KS={class:"teacher-student-detail"},VS={class:"detail-header"},GS={class:"student-info"},zS={class:"avatar"},JS={class:"last-active"},YS={key:0,class:"loading-state"},qS={key:1,class:"detail-content"},XS={class:"tab-bar"},QS=["onClick"],ZS={key:0,class:"tab-content"},eC={key:1,class:"tab-content"},tC={key:0,class:"stats-row"},sC={class:"stat stat-green"},nC={key:0,class:"stat stat-blue"},oC={key:1,class:"stat stat-orange"},aC={key:2,class:"stat stat-yellow"},rC={key:3,class:"stat stat-red"},lC={key:4,class:"stat stat-grey"},iC={key:1,class:"no-data"},cC={key:2,class:"lesson-list"},uC={class:"lesson-header"},dC=["onClick"],fC={class:"mastery-strip"},pC=["title","onClick"],vC={key:0,class:"medal gold-medal"},mC={key:1,class:"medal silver-medal"},hC={class:"board-num"},gC={class:"observation-total"},yC={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=wn(),a=ys(),r=nl(),i=_s(),c=E(!1),u=E("progress"),f=E([]),d=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],p=N(()=>s.studentName.split(" ").map(x=>x[0]||"").join("").toUpperCase());bt(async()=>{o.studentObservations.value[s.studentId]||(c.value=!0,await o.fetchStudentObservations(s.studentId),c.value=!1);try{f.value=await r.fetchBoardStatus(s.studentId)}catch{}});const h=N(()=>o.studentObservations.value[s.studentId]||[]),g=N(()=>o.getStudentMasterySummary(s.studentId)),y=N(()=>o.formatTimeSince(g.value.lastObservationTime)),$=N(()=>{const w=h.value;if(w.length===0&&f.value.length===0)return[];const x=a.extractLessonsFromObservations(w),R={};for(const L of f.value)R[L.deal_subfolder]||(R[L.deal_subfolder]=[]),R[L.deal_subfolder].push(L);for(const L in R)if(!x.find(B=>B.subfolder===L)){const B=R[L].map(Q=>Q.deal_number).sort((Q,Y)=>Q-Y);x.push({subfolder:L,boardNumbers:B,lastActivity:null})}return x.map(L=>{let B;const Q=R[L.subfolder];Q&&Q.length>0?B=r.buildBoardMastery(Q,L.boardNumbers):B=a.computeBoardMastery(w,L.subfolder,L.boardNumbers);const Y=a.computeLessonAchievement(B);return{...L,boardMastery:B,achievement:Y.achievement}}).sort((L,B)=>C(L.subfolder).localeCompare(C(B.subfolder)))});yt($,w=>{a.fetchMissingBoardCounts(w.map(x=>x.subfolder))},{immediate:!0});function C(w){return i.formatLessonName(w)}function _(w){const x={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"};return`Board ${w.boardNumber}: ${x[w.status]||w.status}`}return(w,x)=>(v(),m("div",KS,[l("header",VS,[l("button",{class:"back-btn",onClick:x[0]||(x[0]=R=>w.$emit("back"))}," Students"),l("div",GS,[l("div",zS,b(p.value),1),l("div",null,[l("h2",null,b(e.studentName),1),l("span",JS,"Last active: "+b(y.value),1)])])]),c.value?(v(),m("div",YS,[...x[1]||(x[1]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading student data...",-1)])])):(v(),m("div",qS,[l("div",XS,[(v(),m(ee,null,ae(d,R=>l("button",{key:R.id,class:ie(["tab-btn",{active:u.value===R.id}]),onClick:L=>u.value=R.id},b(R.label),11,QS)),64))]),u.value==="progress"?(v(),m("div",ZS,[ye(Fu,{observations:h.value,studentName:s.studentName,studentId:s.studentId},null,8,["observations","studentName","studentId"])])):u.value==="mastery"?(v(),m("div",eC,[g.value.total>0?(v(),m("div",tC,[l("div",sC,b(g.value.green)+" Green",1),g.value.blue?(v(),m("div",nC,b(g.value.blue)+" Blue",1)):j("",!0),g.value.orange?(v(),m("div",oC,b(g.value.orange)+" Orange",1)):j("",!0),g.value.yellow?(v(),m("div",aC,b(g.value.yellow)+" Yellow",1)):j("",!0),g.value.red?(v(),m("div",rC,b(g.value.red)+" Red",1)):j("",!0),g.value.grey?(v(),m("div",lC,b(g.value.grey)+" Grey",1)):j("",!0)])):j("",!0),$.value.length===0?(v(),m("div",iC," No lesson data available yet. ")):(v(),m("div",cC,[(v(!0),m(ee,null,ae($.value,R=>(v(),m("div",{key:R.subfolder,class:"lesson-row"},[l("div",uC,[l("button",{class:"lesson-name lesson-link",onClick:L=>n("navigate-to-lesson",R.subfolder)},b(C(R.subfolder)),9,dC),R.achievement!=="none"?(v(),m("span",{key:0,class:ie(["achievement-badge",R.achievement])},"  "+b(R.achievement==="gold"?"Gold":"Silver"),3)):j("",!0)]),l("div",fC,[(v(!0),m(ee,null,ae(R.boardMastery,L=>(v(),m("div",{key:L.boardNumber,class:ie(["board-circle board-clickable","status-"+L.status]),title:_(L),onClick:B=>n("navigate-to-lesson",R.subfolder,L.boardNumber)},[L.achievement==="gold"?(v(),m("span",vC,"")):L.achievement==="silver"?(v(),m("span",mC,"")):j("",!0),l("span",hC,b(L.boardNumber),1)],10,pC))),128))])]))),128))]))])):j("",!0),l("div",gC,b(h.value.length)+" observations",1)]))]))}},bC=we(yC,[["__scopeId","data-v-62d6827c"]]),_C={key:0,class:"lesson-browser-loading"},wC={key:1,class:"lesson-browser-error"},SC={class:"lesson-browser"},CC={class:"browser-header"},$C={class:"browser-content"},kC=["onClick"],xC={class:"expand-icon"},AC={class:"category-name"},TC={class:"category-count"},NC={key:0,class:"lesson-list"},EC=["onClick"],OC={class:"lesson-name"},IC={class:"lesson-description"},RC={key:0,class:"error-message"},DC={key:3,class:"lesson-browser-inline"},PC={class:"browser-content-inline"},LC=["onClick"],BC={class:"expand-icon"},MC={class:"category-name"},UC={class:"category-count"},FC={key:0,class:"lesson-list"},jC=["onClick"],HC={class:"lesson-name"},WC={class:"lesson-description"},KC={key:0,class:"error-message-inline"},VC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=E(null),a=E(null),r=E(!1),i=E([]),c=E(null),u=E(null);yt(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}r.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{r.value=!1}}function d(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function p(g){return g.includes("/")?g.split("/").pop():g}async function h(g,y){var $;u.value=null,c.value=g.id;try{const C=(($=s.collection)==null?void 0:$.baseUrl)||"",_=p(g.id),w=`${C}/${_}.pbn`,x=await fetch(w);if(!x.ok)throw new Error(`Failed to load lesson: ${x.statusText}`);const R=await x.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:R}),s.inline||n("close")}catch(C){console.error("Error loading lesson:",C),u.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{c.value=null}}return(g,y)=>e.visible&&r.value?(v(),m("div",_C,[...y[2]||(y[2]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(v(),m("div",wC,[l("p",null,b(a.value),1),l("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(v(),m("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=Ct($=>g.$emit("close"),["self"]))},[l("div",SC,[l("div",CC,[l("h2",null,b(o.value.name),1),l("button",{class:"close-btn",onClick:y[0]||(y[0]=$=>g.$emit("close"))},"")]),l("div",$C,[(v(!0),m(ee,null,ae(o.value.categories,$=>(v(),m("div",{key:$.id,class:"category-section"},[l("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:C=>d($.id)},[l("span",xC,b(i.value.includes($.id)?"":""),1),l("span",AC,b($.name),1),l("span",TC,b($.lessons.length)+" lessons",1)],10,kC),i.value.includes($.id)?(v(),m("div",NC,[(v(!0),m(ee,null,ae($.lessons,C=>(v(),m("button",{key:C.id,class:ie(["lesson-item",{loading:c.value===C.id}]),onClick:_=>h(C,$)},[l("span",OC,b(C.name),1),l("span",IC,b(C.description),1)],10,EC))),128))])):j("",!0)]))),128))]),u.value?(v(),m("div",RC,b(u.value),1)):j("",!0)])])):e.visible&&e.inline&&o.value?(v(),m("div",DC,[l("div",PC,[(v(!0),m(ee,null,ae(o.value.categories,$=>(v(),m("div",{key:$.id,class:"category-section"},[l("button",{class:ie(["category-header",{expanded:i.value.includes($.id)}]),onClick:C=>d($.id)},[l("span",BC,b(i.value.includes($.id)?"":""),1),l("span",MC,b($.name),1),l("span",UC,b($.lessons.length)+" lessons",1)],10,LC),i.value.includes($.id)?(v(),m("div",FC,[(v(!0),m(ee,null,ae($.lessons,C=>(v(),m("button",{key:C.id,class:ie(["lesson-item",{loading:c.value===C.id}]),onClick:_=>h(C,$)},[l("span",HC,b(C.name),1),l("span",WC,b(C.description),1)],10,jC))),128))])):j("",!0)]))),128))]),u.value?(v(),m("div",KC,b(u.value),1)):j("",!0)])):j("",!0)}},GC=we(VC,[["__scopeId","data-v-384a9c63"]]),zC={class:"viewer-controls"},JC={class:"viewer-body"},YC={key:0,class:"interaction-overlay"},qC={key:1,class:"viewer-loading"},XC={key:2,class:"viewer-error"},QC=["src"],ZC={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Lt({x:80,y:80}),n=Lt({w:550,h:700}),o=E(!1),a=Lt({x:0,y:0}),r=E(null),i=E(!1),c=E(null),u=N(()=>r.value?r.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){i.value=!0,c.value=null;try{const w=await fetch(_);if(!w.ok)throw new Error("Failed to load PDF");const x=await w.blob(),R=new Blob([x],{type:"application/pdf"});r.value=URL.createObjectURL(R)}catch(w){c.value="Could not load PDF",console.error("Failed to fetch intro PDF:",w)}finally{i.value=!1}}}function d(){r.value&&(URL.revokeObjectURL(r.value),r.value=null)}function p(){r.value&&window.open(r.value,"_blank")}yt(()=>[t.visible,t.url],([_,w])=>{_&&w?f(w):_||d()},{immediate:!0}),Lr(d);function h(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",C))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",$),document.addEventListener("pointerup",C)}function $(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function C(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",C)}return(_,w)=>e.visible?(v(),m("div",{key:0,class:"intro-pdf-viewer",style:st({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[l("div",{class:"viewer-titlebar",onPointerdown:h},[w[1]||(w[1]=l("span",{class:"viewer-title"},"Lesson Introduction",-1)),l("div",zC,[l("button",{class:"viewer-btn",onClick:p,title:"Open in new tab"},""),l("button",{class:"viewer-btn close",onClick:w[0]||(w[0]=x=>_.$emit("close")),title:"Close"},"")])],32),l("div",JC,[o.value?(v(),m("div",YC)):j("",!0),i.value?(v(),m("div",qC,"Loading PDF...")):c.value?(v(),m("div",XC,b(c.value),1)):u.value?(v(),m("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,QC)):j("",!0)]),l("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):j("",!0)}},e$=we(ZC,[["__scopeId","data-v-a97df645"]]),t$={class:"collection-icon"},s$={class:"collection-name"},n$={class:"collection-desc"},o$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(v(),m("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[l("span",t$,b(e.collection.icon),1),l("span",s$,b(e.collection.name),1),l("span",n$,b(e.collection.description),1)]))}},a$=we(o$,[["__scopeId","data-v-747be5b1"]]),r$={class:"collection-grid"},l$={class:"collection-cards"},i$={key:0,class:"load-file-section"},c$={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=mo(),s=t.COLLECTIONS;return(n,o)=>(v(),m("div",r$,[o[2]||(o[2]=l("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=l("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),l("div",l$,[(v(!0),m(ee,null,ae(M(s),a=>(v(),Ue(a$,{key:a.id,collection:a,onClick:r=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),M(t).showLoadPbnOption.value?(v(),m("div",i$,[o[1]||(o[1]=l("p",null,"Or load your own PBN file:",-1)),l("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):j("",!0)]))}},ll=we(c$,[["__scopeId","data-v-35b62d22"]]),u$={class:"casual-lobby"},d$={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(v(),m("div",u$,[ye(ll,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},f$=we(d$,[["__scopeId","data-v-1ce1f7d7"]]),p$={class:"assignment-panel"},v$={key:0,class:"loading-state"},m$={key:1,class:"empty-state"},h$={key:2,class:"assignment-cards"},g$=["onClick"],y$={class:"card-header"},b$={class:"exercise-name"},_$={class:"card-meta"},w$={key:0,class:"meta-item"},S$={class:"progress-section"},C$={class:"progress-bar"},$$={class:"progress-label"},k$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(r){return r.total_boards?Math.round(r.attempted_boards/r.total_boards*100):0}function s(r){return r.attempted_boards>=r.total_boards&&r.total_boards>0?"complete":r.due_at&&new Date(r.due_at)<new Date&&r.attempted_boards<r.total_boards?"overdue":r.attempted_boards>0?"in-progress":"new"}function n(r){const i=s(r);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(r){if(!r.due_at)return null;const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function a(r){if(!r.due_at)return"";const i=new Date(r.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(r,i)=>(v(),m("div",p$,[i[2]||(i[2]=l("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(v(),m("div",v$,[...i[0]||(i[0]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(v(),m("div",m$,[...i[1]||(i[1]=[l("p",{class:"empty-title"},"No assignments yet",-1),l("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(v(),m("div",h$,[(v(!0),m(ee,null,ae(e.assignments,c=>(v(),m("div",{key:c.id,class:ie(["assignment-card",s(c)]),onClick:u=>r.$emit("select-assignment",c)},[l("div",y$,[l("span",b$,b(c.exercise_name),1),l("span",{class:ie(["status-badge",s(c)])},b(n(c)),3)]),l("div",_$,[c.classroom_name?(v(),m("span",w$,b(c.classroom_name),1)):j("",!0),c.due_at?(v(),m("span",{key:1,class:ie(["meta-item",a(c)])},b(o(c)),3)):j("",!0)]),l("div",S$,[l("div",C$,[l("div",{class:ie(["progress-fill",s(c)]),style:st({width:t(c)+"%"})},null,6)]),l("span",$$,b(c.attempted_boards)+" / "+b(c.total_boards)+" boards ",1)])],10,g$))),128))]))]))}},x$=we(k$,[["__scopeId","data-v-dc0b8e86"]]),A$={class:"student-lobby"},T$={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=He(),o=Cn(),a=N(()=>o.studentAssignments.value.length>0),r=N(()=>o.loading.value);function i(c){s("select-assignment",c)}return bt(()=>{const c=n.currentUser.value;c&&o.fetchStudentAssignments(c.id)}),(c,u)=>(v(),m("div",A$,[a.value||r.value?(v(),Ue(x$,{key:0,assignments:M(o).studentAssignments.value,loading:r.value,onSelectAssignment:i},null,8,["assignments","loading"])):j("",!0),ye(ll,{onSelectCollection:u[0]||(u[0]=f=>c.$emit("select-collection",f)),onLoadFile:u[1]||(u[1]=f=>c.$emit("load-file",f))})]))}},N$=we(T$,[["__scopeId","data-v-3310fc38"]]),Wu="https://api.bridge-classroom.com/api",Ku="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Bo=E([]),il=E([]),cl=E([]),br=E(!1),Fa=E(null),E$=2*60*1e3;async function O$(e,t=!1){if(!t&&Fa.value&&Date.now()-new Date(Fa.value).getTime()<E$)return{success:!0,cached:!0};br.value=!0;try{const s=await fetch(`${Wu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Ku}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Bo.value=n.classrooms||[],il.value=n.needs_attention||[],cl.value=n.recent_activity||[],Fa.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{br.value=!1}}async function I$(e,t){try{const s=await fetch(`${Wu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ku},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?il.value=[]:t==="activity"&&(cl.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function R$(){const e=N(()=>({classroomCount:Bo.value.length,openAssignmentCount:Bo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Bo,needsAttention:il,recentActivity:cl,lobbyLoading:br,summaryStats:e,loadTeacherLobbyData:O$,clearPanel:I$}}const D$={class:"roster"},P$={class:"roster-header"},L$={class:"member-count"},B$={key:0,class:"roster-empty"},M$={key:1,class:"roster-table"},U$={class:"member-name"},F$={class:"member-email"},j$={class:"member-date"},H$={class:"member-action"},W$=["onClick","disabled"],K$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=E(null);function o(r){try{return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return r}}function a(r){const i=`${r.first_name} ${r.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=r.student_id,s("remove-member",r.student_id),setTimeout(()=>{n.value=null},2e3))}return(r,i)=>(v(),m("div",D$,[l("div",P$,[i[0]||(i[0]=l("h4",null,"Class Roster",-1)),l("span",L$,b(e.members.length)+" "+b(e.members.length===1?"student":"students"),1)]),e.members.length===0?(v(),m("div",B$,[...i[1]||(i[1]=[l("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(v(),m("table",M$,[i[2]||(i[2]=l("thead",null,[l("tr",null,[l("th",null,"Name"),l("th",null,"Email"),l("th",null,"Joined"),l("th")])],-1)),l("tbody",null,[(v(!0),m(ee,null,ae(e.members,c=>(v(),m("tr",{key:c.student_id},[l("td",U$,b(c.first_name)+" "+b(c.last_name),1),l("td",F$,b(c.email),1),l("td",j$,b(o(c.joined_at)),1),l("td",H$,[l("button",{class:"remove-btn",onClick:u=>a(c),disabled:n.value===c.student_id},b(n.value===c.student_id?"Removing...":"Remove"),9,W$)])]))),128))])]))]))}},V$=we(K$,[["__scopeId","data-v-ee901be3"]]),G$={class:"header-left"},z$={class:"classroom-name"},J$={class:"header-meta"},Y$={class:"join-badge"},q$={class:"member-count"},X$={key:0,class:"stat-badge"},Q$={key:1,class:"stat-badge completion"},Z$={key:0,class:"mini-bars"},ek={class:"bar-label"},tk={class:"bar-track"},sk={class:"bar-count"},nk=["aria-label"],ok={key:0,class:"card-body"},ak={key:0,class:"classroom-desc"},rk={class:"invite-section"},lk={class:"invite-field"},ik=["value"],ck={class:"email-section"},uk={class:"email-header"},dk={class:"email-template"},fk={class:"email-body"},pk={key:1,class:"assignments-section"},vk={class:"assignment-list"},mk=["onClick"],hk={class:"assignment-name"},gk={key:0,class:"assignment-due"},yk={class:"assignment-boards"},bk={key:3,class:"loading-roster"},_k={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed","view-assignment"],setup(e,{emit:t}){const s=e,n=t,o=_o(),a=Cn(),r=E(null),i=E(!1),c=E(!1),u=E(!1),f=E([]),d=N(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);yt(()=>s.expanded,async C=>{if(C&&!r.value){i.value=!0;const[_,w]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(r.value=_.classroom),f.value=w||[],i.value=!1}});function p(C){return C?new Date(C).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function h(C){return C.students_total?Math.round(C.students_completed/C.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function y(){const C=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText(C),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function $(C){const _=await o.removeMember(s.classroom.id,C);_!=null&&_.success&&(r.value&&(r.value.members=r.value.members.filter(w=>w.student_id!==C)),n("member-removed"))}return(C,_)=>(v(),m("div",{class:ie(["classroom-card",{expanded:e.expanded}])},[l("div",{class:"card-header",onClick:_[0]||(_[0]=w=>C.$emit("toggle"))},[l("div",G$,[l("h3",z$,b(e.classroom.name),1),l("div",J$,[l("span",Y$,"JOIN: "+b(e.classroom.join_code),1),l("span",q$,b(e.classroom.member_count)+" "+b(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(v(),m("span",X$,b(e.classroom.open_assignment_count)+" "+b(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):j("",!0),e.classroom.avg_completion_pct>0?(v(),m("span",Q$,b(e.classroom.avg_completion_pct)+"% avg",1)):j("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(v(),m("div",Z$,[(v(!0),m(ee,null,ae(e.classroom.assignments,w=>(v(),m("div",{key:w.id,class:"mini-bar"},[l("span",ek,b(w.exercise_name),1),l("div",tk,[l("div",{class:"bar-fill",style:st({width:h(w)})},null,4)]),l("span",sk,b(w.students_completed)+"/"+b(w.students_total),1)]))),128))])):j("",!0)]),l("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[l("span",{class:ie(["chevron",{rotated:e.expanded}])},"",2)],8,nk)]),e.expanded?(v(),m("div",ok,[e.classroom.description?(v(),m("p",ak,b(e.classroom.description),1)):j("",!0),l("div",rk,[_[2]||(_[2]=l("h4",null,"Invite Link",-1)),_[3]||(_[3]=l("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),l("div",lk,[l("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=w=>w.target.select())},null,8,ik),l("button",{class:"copy-btn",onClick:g},b(c.value?"Copied!":"Copy"),1)])]),l("div",ck,[l("div",uk,[_[4]||(_[4]=l("h4",null,"Email Template",-1)),l("button",{class:"copy-btn copy-btn-small",onClick:y},b(u.value?"Copied!":"Copy"),1)]),l("div",dk,[_[5]||(_[5]=l("p",null,[l("strong",null,"Subject:"),ke(" Join our Bridge Classroom for practice exercises")],-1)),l("div",fk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+b(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(v(),m("div",pk,[_[7]||(_[7]=l("h4",null,"Assignments",-1)),l("div",vk,[(v(!0),m(ee,null,ae(f.value,w=>(v(),m("div",{key:w.id,class:"assignment-row clickable",onClick:x=>n("view-assignment",w.id)},[l("span",hk,b(w.exercise_name),1),w.due_at?(v(),m("span",gk,"Due "+b(p(w.due_at)),1)):j("",!0),l("span",yk,b(w.total_boards)+" boards",1),_[6]||(_[6]=l("span",{class:"view-arrow"},"",-1))],8,mk))),128))])])):j("",!0),r.value?(v(),Ue(V$,{key:2,members:r.value.members,onRemoveMember:$},null,8,["members"])):i.value?(v(),m("div",bk," Loading roster... ")):j("",!0)])):j("",!0)],2))}},wk=we(_k,[["__scopeId","data-v-3dc8e5a5"]]),Sk={class:"modal-content"},Ck={class:"step"},$k={class:"form-group"},kk={class:"form-group"},xk={class:"step-actions"},Ak=["disabled"],Tk={key:0,class:"error-text"},Nk={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=He(),o=_o(),a=E(""),r=E(""),i=E(!1),c=E(null);async function u(){if(!a.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,c.value=null;const d=await o.createClassroom(f.id,a.value.trim(),r.value.trim()||null);d.success?s("classroom-created",d.classroom):c.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(v(),m("div",{class:"modal-overlay",onClick:d[3]||(d[3]=Ct(p=>f.$emit("close"),["self"]))},[l("div",Sk,[l("div",Ck,[d[7]||(d[7]=l("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=l("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),l("div",$k,[d[4]||(d[4]=l("label",{for:"classroom-name"},"Classroom Name",-1)),Fe(l("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Go(u,["enter"])},null,544),[[St,a.value]]),d[5]||(d[5]=l("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),l("div",kk,[d[6]||(d[6]=l("label",{for:"classroom-desc"},[ke("Description "),l("span",{class:"optional"},"(optional)")],-1)),Fe(l("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=p=>r.value=p),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[St,r.value]])]),l("div",xk,[l("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=p=>f.$emit("close"))},"Cancel"),l("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:u},b(i.value?"Creating...":"Create Classroom"),9,Ak)]),c.value?(v(),m("p",Tk,b(c.value),1)):j("",!0)])])]))}},Ek=we(Nk,[["__scopeId","data-v-c26a1ae6"]]),Rn="https://api.bridge-classroom.com/api",Dn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Is=E([]),ja=E(null),Ht=E(!1),We=E(null);function Ok(){async function e(r={}){Ht.value=!0,We.value=null;try{const i=new URLSearchParams;r.created_by&&i.set("created_by",r.created_by),r.curriculum_path&&i.set("curriculum_path",r.curriculum_path),r.visibility&&i.set("visibility",r.visibility);const c=i.toString(),u=`${Rn}/exercises${c?"?"+c:""}`,f=await fetch(u,{headers:{"x-api-key":Dn}});if(!f.ok){const p=await f.text();return We.value=p||`Server error (${f.status})`,null}const d=await f.json();return d.success?Is.value=d.exercises:We.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),We.value="Unable to connect to server",null}finally{Ht.value=!1}}async function t(r){Ht.value=!0,We.value=null;try{const i=await fetch(`${Rn}/exercises/${encodeURIComponent(r)}`,{headers:{"x-api-key":Dn}});if(!i.ok){const u=await i.text();return We.value=u||`Server error (${i.status})`,null}const c=await i.json();return c.success?ja.value=c.exercise:We.value=c.error||"Failed to fetch exercise",c}catch(i){return console.error("Failed to fetch exercise detail:",i),We.value="Unable to connect to server",null}finally{Ht.value=!1}}async function s({name:r,description:i,created_by:c,curriculum_path:u,visibility:f,boards:d}){Ht.value=!0,We.value=null;try{const p=await fetch(`${Rn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Dn},body:JSON.stringify({name:r,description:i||null,created_by:c||null,curriculum_path:u||null,visibility:f||"public",boards:d})});if(!p.ok){const g=await p.text();return We.value=g||`Server error (${p.status})`,{success:!1,error:We.value}}const h=await p.json();return h.success?Is.value=[h.exercise,...Is.value]:We.value=h.error||"Failed to create exercise",h}catch(p){return console.error("Failed to create exercise:",p),We.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ht.value=!1}}async function n(r,i){Ht.value=!0,We.value=null;try{const c=await fetch(`${Rn}/exercises/${encodeURIComponent(r)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Dn},body:JSON.stringify(i)});if(!c.ok){const f=await c.text();return We.value=f||`Server error (${c.status})`,{success:!1,error:We.value}}const u=await c.json();return u.success||(We.value=u.error||"Failed to update exercise"),u}catch(c){return console.error("Failed to update exercise:",c),We.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ht.value=!1}}async function o(r){try{const i=await fetch(`${Rn}/exercises/${encodeURIComponent(r)}`,{method:"DELETE",headers:{"x-api-key":Dn}});if(!i.ok){const u=await i.text();return We.value=u||`Server error (${i.status})`,{success:!1,error:We.value}}const c=await i.json();return c.success&&(Is.value=Is.value.filter(u=>u.id!==r)),c}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Is.value=[],ja.value=null,Ht.value=!1,We.value=null}return{exercises:Is,currentExercise:ja,loading:Ht,error:We,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const Ik={class:"modal-content"},Rk={class:"step"},Dk={class:"form-group"},Pk=["value"],Lk={key:0,class:"form-hint"},Bk={class:"form-group"},Mk={class:"target-options"},Uk={class:"radio-option"},Fk={class:"radio-option"},jk={key:0,class:"form-group"},Hk=["value"],Wk={key:1,class:"form-group"},Kk=["value"],Vk={class:"form-group"},Gk={class:"step-actions"},zk=["disabled"],Jk={key:2,class:"error-text"},Yk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=He(),a=Ok(),r=Cn(),i=_o(),c=wn(),u=E(""),f=E("classroom"),d=E(s.preselectedClassroomId||""),p=E(""),h=E(""),g=E(!1),y=E(null),$=N(()=>a.exercises.value),C=N(()=>a.loading.value),_=N(()=>i.teacherClassrooms.value),w=N(()=>c.students.value),x=N(()=>!(!u.value||f.value==="classroom"&&!d.value||f.value==="student"&&!p.value));async function R(){if(!x.value||g.value)return;const L=o.currentUser.value;if(!L)return;g.value=!0,y.value=null;const B=await r.createAssignment({exercise_id:u.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?p.value:null,assigned_by:L.id,due_at:h.value||null});B.success?n("assignment-created",B.assignment):y.value=B.error||"Failed to create assignment",g.value=!1}return bt(async()=>{a.exercises.value.length||await a.fetchExercises();const L=o.currentUser.value;L&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(L.id)}),(L,B)=>(v(),m("div",{class:"modal-overlay",onClick:B[7]||(B[7]=Ct(Q=>L.$emit("close"),["self"]))},[l("div",Ik,[l("div",Rk,[B[18]||(B[18]=l("h2",null,"Create Assignment",-1)),B[19]||(B[19]=l("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),l("div",Dk,[B[9]||(B[9]=l("label",{for:"exercise-select"},"Exercise",-1)),Fe(l("select",{id:"exercise-select","onUpdate:modelValue":B[0]||(B[0]=Q=>u.value=Q),class:"form-select"},[B[8]||(B[8]=l("option",{value:""},"Select an exercise...",-1)),(v(!0),m(ee,null,ae($.value,Q=>(v(),m("option",{key:Q.id,value:Q.id},b(Q.name)+" ("+b(Q.board_count)+" boards)",9,Pk))),128))],512),[[Kn,u.value]]),C.value?(v(),m("p",Lk,"Loading exercises...")):j("",!0)]),l("div",Bk,[B[12]||(B[12]=l("label",null,"Assign to",-1)),l("div",Mk,[l("label",Uk,[Fe(l("input",{type:"radio","onUpdate:modelValue":B[1]||(B[1]=Q=>f.value=Q),value:"classroom"},null,512),[[Vl,f.value]]),B[10]||(B[10]=l("span",null,"Classroom",-1))]),l("label",Fk,[Fe(l("input",{type:"radio","onUpdate:modelValue":B[2]||(B[2]=Q=>f.value=Q),value:"student"},null,512),[[Vl,f.value]]),B[11]||(B[11]=l("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(v(),m("div",jk,[B[14]||(B[14]=l("label",{for:"classroom-select"},"Classroom",-1)),Fe(l("select",{id:"classroom-select","onUpdate:modelValue":B[3]||(B[3]=Q=>d.value=Q),class:"form-select"},[B[13]||(B[13]=l("option",{value:""},"Select a classroom...",-1)),(v(!0),m(ee,null,ae(_.value,Q=>(v(),m("option",{key:Q.id,value:Q.id},b(Q.name)+" ("+b(Q.member_count)+" students)",9,Hk))),128))],512),[[Kn,d.value]])])):j("",!0),f.value==="student"?(v(),m("div",Wk,[B[16]||(B[16]=l("label",{for:"student-select"},"Student",-1)),Fe(l("select",{id:"student-select","onUpdate:modelValue":B[4]||(B[4]=Q=>p.value=Q),class:"form-select"},[B[15]||(B[15]=l("option",{value:""},"Select a student...",-1)),(v(!0),m(ee,null,ae(w.value,Q=>(v(),m("option",{key:Q.id,value:Q.id},b(Q.first_name)+" "+b(Q.last_name),9,Kk))),128))],512),[[Kn,p.value]])])):j("",!0),l("div",Vk,[B[17]||(B[17]=l("label",{for:"due-date"},[ke("Due Date "),l("span",{class:"optional"},"(optional)")],-1)),Fe(l("input",{id:"due-date","onUpdate:modelValue":B[5]||(B[5]=Q=>h.value=Q),type:"date",class:"form-input"},null,512),[[St,h.value]])]),l("div",Gk,[l("button",{class:"btn btn-secondary",onClick:B[6]||(B[6]=Q=>L.$emit("close"))},"Cancel"),l("button",{class:"btn btn-primary",disabled:!x.value||g.value,onClick:R},b(g.value?"Creating...":"Create Assignment"),9,zk)]),y.value?(v(),m("p",Jk,b(y.value),1)):j("",!0)])])]))}},qk=we(Yk,[["__scopeId","data-v-5e97b847"]]),Xk={class:"modal-content"},Qk={class:"modal-body"},Zk={key:0,class:"loading-state"},ex={key:1,class:"error-state"},tx={class:"error-text"},sx={class:"modal-header"},nx={class:"assignment-meta"},ox={class:"meta-item"},ax={key:0,class:"meta-item"},rx={key:1,class:"meta-item"},lx={key:0,class:"progress-table-wrapper"},ix={class:"progress-table"},cx={class:"col-name"},ux={class:"col-progress"},dx={class:"progress-cell"},fx={class:"progress-bar-track"},px={class:"progress-label"},vx={class:"col-correct"},mx={key:1,class:"empty-state"},hx={key:2,class:"summary-row"},gx={key:0},yx={__name:"AssignmentDetailModal",props:{assignmentId:{type:String,required:!0}},emits:["close"],setup(e){const t=e,s=Cn(),n=E(!0),o=E(null),a=N(()=>s.currentAssignment.value),r=N(()=>{var C;const p=(C=a.value)==null?void 0:C.student_progress;if(!p||p.length===0)return null;const h=p.length,g=p.filter(_=>_.attempted_boards>=_.total_boards).length,y=p.filter(_=>_.attempted_boards>0);let $=null;if(y.length>0){const _=y.reduce((w,x)=>w+x.correct_boards/x.attempted_boards*100,0);$=Math.round(_/y.length)}return{total:h,completed:g,avgAccuracy:$}});function i(p){return p?new Date(p).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function c(p){return p.total_boards?Math.round(p.attempted_boards/p.total_boards*100)+"%":"0%"}function u(p){return p.attempted_boards>=p.total_boards?"complete":p.attempted_boards>0?"partial":""}function f(p){return p.attempted_boards===0?"":Math.round(p.correct_boards/p.attempted_boards*100)+"%"}function d(p){if(p.attempted_boards===0)return"";const h=p.correct_boards/p.attempted_boards*100;return h>=80?"accuracy-high":h>=50?"accuracy-mid":"accuracy-low"}return bt(async()=>{const p=await s.fetchAssignmentDetail(t.assignmentId);p!=null&&p.success||(o.value=s.error.value||"Failed to load assignment details"),n.value=!1}),(p,h)=>(v(),m("div",{class:"modal-overlay",onClick:h[2]||(h[2]=Ct(g=>p.$emit("close"),["self"]))},[l("div",Xk,[l("div",Qk,[n.value?(v(),m("div",Zk,[...h[3]||(h[3]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading assignment details...",-1)])])):o.value?(v(),m("div",ex,[l("p",tx,b(o.value),1),l("button",{class:"btn btn-secondary",onClick:h[0]||(h[0]=g=>p.$emit("close"))},"Close")])):a.value?(v(),m(ee,{key:2},[l("div",sx,[l("h2",null,b(a.value.exercise_name),1),l("button",{class:"close-btn",onClick:h[1]||(h[1]=g=>p.$emit("close")),"aria-label":"Close"},"")]),l("div",nx,[l("span",ox,b(a.value.total_boards)+" "+b(a.value.total_boards===1?"board":"boards"),1),a.value.due_at?(v(),m("span",ax,"Due "+b(i(a.value.due_at)),1)):j("",!0),a.value.classroom_name?(v(),m("span",rx,b(a.value.classroom_name),1)):j("",!0)]),a.value.student_progress&&a.value.student_progress.length?(v(),m("div",lx,[l("table",ix,[h[4]||(h[4]=l("thead",null,[l("tr",null,[l("th",{class:"col-name"},"Student"),l("th",{class:"col-progress"},"Progress"),l("th",{class:"col-correct"},"Correct"),l("th",{class:"col-accuracy"},"Accuracy")])],-1)),l("tbody",null,[(v(!0),m(ee,null,ae(a.value.student_progress,g=>(v(),m("tr",{key:g.student_id},[l("td",cx,b(g.first_name)+" "+b(g.last_name),1),l("td",ux,[l("div",dx,[l("div",fx,[l("div",{class:ie(["progress-bar-fill",u(g)]),style:st({width:c(g)})},null,6)]),l("span",px,b(g.attempted_boards)+"/"+b(g.total_boards),1)])]),l("td",vx,b(g.correct_boards)+"/"+b(g.total_boards),1),l("td",{class:ie(["col-accuracy",d(g)])},b(f(g)),3)]))),128))])])])):(v(),m("div",mx,[...h[5]||(h[5]=[l("p",null,"No students assigned yet.",-1)])])),r.value?(v(),m("div",hx,[l("span",null,b(r.value.completed)+"/"+b(r.value.total)+" students completed",1),r.value.avgAccuracy!==null?(v(),m("span",gx,b(r.value.avgAccuracy)+"% avg accuracy",1)):j("",!0)])):j("",!0)],64)):j("",!0)])])]))}},bx=we(yx,[["__scopeId","data-v-d654f00a"]]),_x={class:"needs-attention"},wx={class:"panel-header"},Sx={key:0,class:"empty-state"},Cx={key:1,class:"attention-list"},$x={class:"item-icon"},kx={class:"item-text"},xx={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),r=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${r}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(v(),m("div",_x,[l("div",wx,[a[1]||(a[1]=l("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(v(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):j("",!0)]),e.items.length?(v(),m("div",Cx,[(v(!0),m(ee,null,ae(e.items,(r,i)=>(v(),m("div",{key:i,class:ie(["attention-item",r.type])},[l("span",$x,b(t(r.type)),1),l("span",kx,b(s(r)),1)],2))),128))])):(v(),m("div",Sx," All caught up! No items need attention. "))]))}},Ax=we(xx,[["__scopeId","data-v-65e8ba1f"]]),Tx={class:"recent-activity"},Nx={class:"panel-header"},Ex={key:0,class:"empty-state"},Ox={key:1,class:"activity-list"},Ix={class:"event-content"},Rx={class:"event-text"},Dx={class:"event-time"},Px={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),r=Math.floor(a/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const i=Math.floor(r/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(v(),m("div",Tx,[l("div",Nx,[a[1]||(a[1]=l("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(v(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=r=>o.$emit("clear"))},"Clear")):j("",!0)]),e.events.length?(v(),m("div",Ox,[(v(!0),m(ee,null,ae(e.events,(r,i)=>(v(),m("div",{key:i,class:"activity-item"},[l("span",{class:ie(["event-icon",r.type])},b(t(r.type)),3),l("div",Ix,[l("span",Rx,b(s(r)),1),l("span",Dx,b(n(r.timestamp)),1)])]))),128))])):(v(),m("div",Ex," No recent activity. "))]))}},Lx=we(Px,[["__scopeId","data-v-39e672f5"]]),Bx={class:"teacher-lobby"},Mx={class:"welcome-section"},Ux={class:"welcome-title"},Fx={class:"welcome-subtitle"},jx={class:"quick-actions"},Hx={key:0,class:"loading-state"},Wx={key:1,class:"dashboard-grid"},Kx={class:"left-column"},Vx={key:0,class:"classrooms-section"},Gx={class:"classroom-cards"},zx={key:1,class:"empty-state"},Jx={class:"right-column"},Yx={class:"collections-section"},qx={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=He(),s=R$(),n=E(!1),o=E(!1),a=E(null),r=E(null),i=N(()=>{const g=t.currentUser.value;return g?g.firstName:""}),c=N(()=>{const g=s.summaryStats.value;if(!g||g.classroomCount===0)return"Get started by creating your first classroom.";const y=[];return y.push(`${g.classroomCount} active ${g.classroomCount===1?"classroom":"classrooms"}`),g.openAssignmentCount>0&&y.push(`${g.openAssignmentCount} open ${g.openAssignmentCount===1?"assignment":"assignments"}`),y.join(", ")+"."});function u(g){r.value=r.value===g?null:g}function f(g){n.value=!1,r.value=g.id,h()}function d(){o.value=!1,h()}function p(g){const y=t.currentUser.value;y&&s.clearPanel(y.id,g)}function h(){const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id,!0)}return bt(()=>{const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id)}),(g,y)=>(v(),m("div",Bx,[l("div",Mx,[l("h2",Ux,"Welcome back, "+b(i.value),1),l("p",Fx,b(c.value),1)]),l("div",jx,[l("button",{class:"action-btn create",onClick:y[0]||(y[0]=$=>n.value=!0)}," + New Classroom "),l("button",{class:"action-btn assign",onClick:y[1]||(y[1]=$=>o.value=!0)}," + New Assignment "),e.isAdmin?(v(),m("button",{key:0,class:"action-btn admin",onClick:y[2]||(y[2]=$=>g.$emit("show-admin"))}," Admin Panel ")):j("",!0)]),M(s).lobbyLoading.value&&!M(s).lobbyClassrooms.value.length?(v(),m("div",Hx,[...y[11]||(y[11]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading dashboard...",-1)])])):(v(),m("div",Wx,[l("div",Kx,[M(s).lobbyClassrooms.value.length?(v(),m("div",Vx,[y[12]||(y[12]=l("h3",{class:"section-title"},"My Classrooms",-1)),l("div",Gx,[(v(!0),m(ee,null,ae(M(s).lobbyClassrooms.value,$=>(v(),Ue(wk,{key:$.id,classroom:$,expanded:r.value===$.id,onToggle:C=>u($.id),onMemberRemoved:h,onViewAssignment:y[3]||(y[3]=C=>a.value=C)},null,8,["classroom","expanded","onToggle"]))),128))])])):(v(),m("div",zx,[...y[13]||(y[13]=[l("p",{class:"empty-title"},"No classrooms yet",-1),l("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),l("div",Jx,[ye(Ax,{items:M(s).needsAttention.value,onClear:y[4]||(y[4]=$=>p("attention"))},null,8,["items"]),ye(Lx,{events:M(s).recentActivity.value,onClear:y[5]||(y[5]=$=>p("activity"))},null,8,["events"])])])),l("div",Yx,[y[14]||(y[14]=l("h3",{class:"section-title"},"Lesson Collections",-1)),ye(ll,{onSelectCollection:y[6]||(y[6]=$=>g.$emit("select-collection",$)),onLoadFile:y[7]||(y[7]=$=>g.$emit("load-file",$))})]),n.value?(v(),Ue(Ek,{key:2,onClose:y[8]||(y[8]=$=>n.value=!1),onClassroomCreated:f})):j("",!0),o.value?(v(),Ue(qk,{key:3,onClose:y[9]||(y[9]=$=>o.value=!1),onAssignmentCreated:d})):j("",!0),a.value?(v(),Ue(bx,{key:4,"assignment-id":a.value,onClose:y[10]||(y[10]=$=>a.value=null)},null,8,["assignment-id"])):j("",!0)]))}},Xx=we(qx,[["__scopeId","data-v-364209cc"]]),Vu="https://api.bridge-classroom.com/api",Gu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",zu=E(null),Ju=E([]),Yu=E(null),qu=E(null),_r=E(!1),wr=E(null),Ha=E(null),Qx=60*1e3;async function Xu(e=!1){if(!e&&Ha.value&&Date.now()-new Date(Ha.value).getTime()<Qx)return{success:!0,cached:!0};_r.value=!0,wr.value=null;try{const t=await fetch(`${Vu}/admin/stats`,{headers:{"x-api-key":Gu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return zu.value=s.stats,Ju.value=s.popular_lessons||[],Yu.value=s.database,Ha.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),wr.value=t.message,{success:!1,error:t.message}}finally{_r.value=!1}}async function Qu(){try{const e=await fetch(`${Vu}/admin/health`,{headers:{"x-api-key":Gu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return qu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function Zx(){await Promise.all([Xu(!0),Qu()])}function eA(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function tA(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function ul(){return{stats:zu,popularLessons:Ju,database:Yu,health:qu,loading:_r,error:wr,loadStats:Xu,loadHealth:Qu,refreshAll:Zx,formatBytes:eA,formatUptime:tA}}const sA={class:"stats-row"},nA={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},oA={class:"stat-number"},aA={class:"stat-card",style:{"border-top-color":"#1565c0"}},rA={class:"stat-number"},lA={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},iA={class:"stat-number"},cA={class:"stat-card",style:{"border-top-color":"#e65100"}},uA={class:"stat-number"},dA={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,r,i;return v(),m("div",sA,[l("div",nA,[l("div",oA,b(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=l("div",{class:"stat-label"},"Total Users",-1))]),l("div",aA,[l("div",rA,b(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=l("div",{class:"stat-label"},"Active (7d)",-1))]),l("div",lA,[l("div",iA,b(t((r=e.stats)==null?void 0:r.observation_count_7d)),1),n[2]||(n[2]=l("div",{class:"stat-label"},"Observations (7d)",-1))]),l("div",cA,[l("div",uA,b(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=l("div",{class:"stat-label"},"Active Today",-1))])])}}},fA=we(dA,[["__scopeId","data-v-a14a2199"]]),pA={class:"popular-lessons"},vA={key:0,class:"empty-state"},mA={key:1,class:"table-wrap"},hA={class:"lessons-table"},gA={class:"lesson-name"},yA={class:"num-col"},bA={class:"num-col"},_A={class:"num-col"},wA={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(v(),m("div",pA,[o[1]||(o[1]=l("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(v(),m("div",mA,[l("table",hA,[o[0]||(o[0]=l("thead",null,[l("tr",null,[l("th",null,"Lesson"),l("th",{class:"num-col"},"Plays"),l("th",{class:"num-col"},"Users"),l("th",{class:"num-col"},"Accuracy")])],-1)),l("tbody",null,[(v(!0),m(ee,null,ae(e.lessons.slice(0,15),a=>(v(),m("tr",{key:a.deal_subfolder},[l("td",gA,b(t(a.deal_subfolder)),1),l("td",yA,b(a.play_count.toLocaleString()),1),l("td",bA,b(a.unique_users),1),l("td",_A,[l("span",{class:ie(["accuracy-badge",s(a.accuracy_pct)])},b(a.accuracy_pct)+"% ",3)])]))),128))])])])):(v(),m("div",vA,"No lesson data yet."))]))}},SA=we(wA,[["__scopeId","data-v-079bd4f8"]]),CA={class:"database-panel"},$A={key:0,class:"empty-state"},kA={class:"db-size"},xA={class:"tables-table"},AA={class:"table-name"},TA={class:"num-col"},NA={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=ul();return(s,n)=>(v(),m("div",CA,[n[2]||(n[2]=l("h3",{class:"panel-title"},"Database",-1)),e.database?(v(),m(ee,{key:1},[l("div",kA,[n[0]||(n[0]=ke(" SQLite file: ",-1)),l("strong",null,b(M(t)(e.database.file_size_bytes)),1)]),l("table",xA,[n[1]||(n[1]=l("thead",null,[l("tr",null,[l("th",null,"Table"),l("th",{class:"num-col"},"Rows")])],-1)),l("tbody",null,[(v(!0),m(ee,null,ae(e.database.tables,o=>(v(),m("tr",{key:o.name},[l("td",AA,b(o.name),1),l("td",TA,b(o.row_count.toLocaleString()),1)]))),128))])])],64)):(v(),m("div",$A,"Loading..."))]))}},EA=we(NA,[["__scopeId","data-v-d5945aff"]]),OA={class:"system-health"},IA={class:"health-header"},RA=["disabled"],DA={key:0,class:"empty-state"},PA={key:1,class:"health-rows"},LA={class:"health-row"},BA={class:"health-value"},MA={class:"health-row"},UA={class:"health-value"},FA={class:"health-row"},jA={class:"health-value"},HA={class:"health-row"},WA={class:"health-value"},KA={class:"health-row"},VA={class:"health-value"},GA={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=ul();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const r=Math.floor(a/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}return(n,o)=>(v(),m("div",OA,[l("div",IA,[o[1]||(o[1]=l("h3",{class:"panel-title"},"System Health",-1)),l("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},b(e.refreshing?"Refreshing...":"Refresh"),9,RA)]),e.health?(v(),m("div",PA,[l("div",LA,[o[2]||(o[2]=l("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=l("span",{class:"health-label"},"API Server",-1)),l("span",BA,"Up "+b(M(t)(e.health.uptime_seconds)),1)]),l("div",MA,[l("span",{class:ie(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=l("span",{class:"health-label"},"Database",-1)),l("span",UA,b(e.health.database_writable?"Writable":"Error"),1)]),l("div",FA,[l("span",{class:ie(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=l("span",{class:"health-label"},"Last Observation",-1)),l("span",jA,b(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),l("div",HA,[o[6]||(o[6]=l("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=l("span",{class:"health-label"},"Disk",-1)),l("span",WA,b(e.health.disk_available_gb)+" GB / "+b(e.health.disk_total_gb)+" GB available",1)]),l("div",KA,[o[8]||(o[8]=l("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=l("span",{class:"health-label"},"API Version",-1)),l("span",VA,"v"+b(e.health.api_version),1)])])):(v(),m("div",DA,"Loading..."))]))}},zA=we(GA,[["__scopeId","data-v-0d4e96d5"]]),JA={class:"admin-lobby"},YA={class:"admin-header"},qA={key:0,class:"admin-subtitle"},XA={key:0,class:"loading-state"},QA={key:1,class:"error-state"},ZA={class:"announcement-section"},e2={class:"announcement-info"},t2=["innerHTML"],s2={key:0,class:"announcement-expires"},n2={key:1,class:"announcement-expires"},o2={class:"announcement-actions"},a2=["disabled"],r2={key:1,class:"announcement-form"},l2={class:"form-row"},i2=["disabled"],c2={class:"content-grid"},u2={class:"name-correction-section"},d2={class:"search-row"},f2=["disabled"],p2={key:0,class:"search-results"},v2=["onClick"],m2={class:"result-name"},h2={class:"result-email"},g2={key:0,class:"corrected-badge"},y2={key:1,class:"no-results"},b2={key:2,class:"edit-form"},_2={class:"edit-row"},w2={class:"edit-field"},S2={class:"edit-field"},C2=["disabled"],$2={key:0,class:"save-feedback success"},k2={key:1,class:"save-feedback error"},x2={class:"decrypt-section"},A2={class:"decrypt-actions"},T2=["disabled"],N2={key:0,class:"decrypt-progress"},E2={key:0},O2={key:0},I2={key:1},R2={key:1},D2={key:2,class:"decrypt-hint"},P2={__name:"AdminLobby",emits:["back"],setup(e){const t=ul(),s=rl(),n=E(!1),o=E(""),a=E("info"),r=E(""),i=E(!1),c=E(!1),u=E(!1);function f(){const A=s.announcement.value;if(A){if(o.value=A.message,a.value=A.type,A.expires_at){const K=new Date(A.expires_at);r.value=new Date(K.getTime()-K.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else r.value="";u.value=!0}}function d(){u.value=!1,o.value="",a.value="info",r.value=""}async function p(){if(o.value.trim()){i.value=!0;try{const A=r.value?new Date(r.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,A),o.value="",a.value="info",r.value="",u.value=!1}catch(A){console.error("Failed to publish announcement:",A)}finally{i.value=!1}}}async function h(){c.value=!0;try{await s.clearAnnouncement()}catch(A){console.error("Failed to clear announcement:",A)}finally{c.value=!1}}function g(A){return A?new Date(A).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function $(A){return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(ce,Te)=>{const xe=y[Te.toLowerCase()];return xe?`<span class="ann-circle" style="background:${xe.bg};color:${xe.fg}"></span>`:ce})}const C="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",w=E(""),x=E([]),R=E(!1),L=E(!1),B=E(null),Q=E(""),Y=E(""),fe=E(!1),ve=E(!1),ue=E("");async function ge(){if(w.value.trim()){L.value=!0,R.value=!1,x.value=[],B.value=null,ve.value=!1,ue.value="";try{const A=await fetch(`${C}/admin/users/search?q=${encodeURIComponent(w.value.trim())}`,{headers:{"x-api-key":_}});if(!A.ok)throw new Error(`Search failed: ${A.status}`);const K=await A.json();x.value=K.users||[]}catch(A){console.error("User search failed:",A)}finally{L.value=!1,R.value=!0}}}function $e(A){B.value=A,Q.value=A.first_name,Y.value=A.last_name,ve.value=!1,ue.value=""}async function me(){if(!(!B.value||!Q.value.trim()||!Y.value.trim())){fe.value=!0,ve.value=!1,ue.value="";try{const A=await fetch(`${C}/admin/users/${encodeURIComponent(B.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:Q.value.trim(),last_name:Y.value.trim()})});if(!A.ok)throw new Error(`Save failed: ${A.status}`);const K=await A.json();K.success&&(ve.value=!0,B.value.first_name=K.user.first_name,B.value.last_name=K.user.last_name,B.value.name_corrected_at=K.user.name_corrected_at)}catch(A){ue.value=A.message}finally{fe.value=!1}}}const pe=E(!1),V=E(null);async function q(){pe.value=!0,V.value=null;try{const A=await fetch(`${C}/admin/decrypt-observations`,{method:"POST",headers:{"x-api-key":_}});if(!A.ok){const K=await A.text();V.value={success:!1,error:`HTTP ${A.status}: ${K}`};return}V.value=await A.json()}catch(A){V.value={success:!1,error:A.message}}finally{pe.value=!1}}async function U(){await Promise.all([t.loadStats(),t.loadHealth()])}async function H(){n.value=!0,await t.refreshAll(),n.value=!1}return bt(U),(A,K)=>(v(),m("div",JA,[l("div",YA,[l("button",{class:"back-btn",onClick:K[0]||(K[0]=ce=>A.$emit("back"))}," Back to Dashboard"),K[7]||(K[7]=l("h2",{class:"admin-title"},"Admin Dashboard",-1)),M(t).stats.value?(v(),m("p",qA,b(M(t).stats.value.total_observations.toLocaleString())+" total observations across "+b(M(t).stats.value.total_users)+" users ",1)):j("",!0)]),M(t).loading.value&&!M(t).stats.value?(v(),m("div",XA,[...K[8]||(K[8]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading dashboard...",-1)])])):M(t).error.value?(v(),m("div",QA,[l("p",null,b(M(t).error.value),1),l("button",{class:"retry-btn",onClick:U},"Retry")])):M(t).stats.value?(v(),m(ee,{key:2},[l("div",ZA,[K[10]||(K[10]=l("h3",{class:"section-title"},"Site Announcement",-1)),M(s).announcement.value&&!u.value?(v(),m("div",{key:0,class:ie(["current-announcement",M(s).announcement.value.type])},[l("div",e2,[l("span",{class:ie(["announcement-type-badge",M(s).announcement.value.type])},b(M(s).announcement.value.type),3),l("span",{class:"announcement-message",innerHTML:$(M(s).announcement.value.message)},null,8,t2),M(s).announcement.value.expires_at?(v(),m("span",s2," Expires: "+b(g(M(s).announcement.value.expires_at)),1)):(v(),m("span",n2,"No expiration"))]),l("div",o2,[l("button",{class:"edit-btn",onClick:f},"Edit"),l("button",{class:"clear-btn",onClick:h,disabled:c.value},b(c.value?"Clearing...":"Clear"),9,a2)])],2)):u.value||!M(s).announcement.value?(v(),m("div",r2,[Fe(l("input",{"onUpdate:modelValue":K[1]||(K[1]=ce=>o.value=ce),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Go(p,["enter"])},null,544),[[St,o.value]]),l("div",l2,[Fe(l("select",{"onUpdate:modelValue":K[2]||(K[2]=ce=>a.value=ce),class:"type-select"},[...K[9]||(K[9]=[l("option",{value:"info"},"Info",-1),l("option",{value:"warning"},"Warning",-1),l("option",{value:"urgent"},"Urgent",-1)])],512),[[Kn,a.value]]),Fe(l("input",{"onUpdate:modelValue":K[3]||(K[3]=ce=>r.value=ce),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[St,r.value]]),u.value?(v(),m("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):j("",!0),l("button",{class:"publish-btn",onClick:p,disabled:!o.value.trim()||i.value},b(i.value?"Publishing...":u.value?"Update":"Publish"),9,i2)])])):j("",!0)]),ye(fA,{stats:M(t).stats.value},null,8,["stats"]),l("div",c2,[ye(SA,{lessons:M(t).popularLessons.value},null,8,["lessons"]),ye(EA,{database:M(t).database.value},null,8,["database"])]),ye(zA,{health:M(t).health.value,refreshing:n.value,onRefresh:H},null,8,["health","refreshing"]),l("div",u2,[K[13]||(K[13]=l("h3",{class:"section-title"},"Correct User Name",-1)),l("div",d2,[Fe(l("input",{"onUpdate:modelValue":K[4]||(K[4]=ce=>w.value=ce),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Go(ge,["enter"])},null,544),[[St,w.value]]),l("button",{class:"search-btn",onClick:ge,disabled:L.value||!w.value.trim()},b(L.value?"Searching...":"Search"),9,f2)]),x.value.length?(v(),m("div",p2,[(v(!0),m(ee,null,ae(x.value,ce=>(v(),m("div",{key:ce.id,class:ie(["search-result-item",{selected:B.value&&B.value.id===ce.id}]),onClick:Te=>$e(ce)},[l("span",m2,b(ce.first_name)+" "+b(ce.last_name),1),l("span",h2,b(ce.email),1),ce.name_corrected_at?(v(),m("span",g2,"corrected")):j("",!0)],10,v2))),128))])):j("",!0),R.value&&!x.value.length?(v(),m("div",y2,' No users found for "'+b(w.value)+'" ',1)):j("",!0),B.value?(v(),m("div",b2,[l("div",_2,[l("div",w2,[K[11]||(K[11]=l("label",null,"First Name",-1)),Fe(l("input",{"onUpdate:modelValue":K[5]||(K[5]=ce=>Q.value=ce),type:"text",class:"edit-input"},null,512),[[St,Q.value]])]),l("div",S2,[K[12]||(K[12]=l("label",null,"Last Name",-1)),Fe(l("input",{"onUpdate:modelValue":K[6]||(K[6]=ce=>Y.value=ce),type:"text",class:"edit-input"},null,512),[[St,Y.value]])]),l("button",{class:"save-btn",onClick:me,disabled:fe.value||!Q.value.trim()||!Y.value.trim()},b(fe.value?"Saving...":"Save"),9,C2)]),ve.value?(v(),m("p",$2,"Name corrected successfully.")):j("",!0),ue.value?(v(),m("p",k2,b(ue.value),1)):j("",!0)])):j("",!0)]),l("div",x2,[K[19]||(K[19]=l("h3",{class:"section-title"},"Observation Decryption",-1)),K[20]||(K[20]=l("p",{class:"decrypt-description"},[ke(" Decrypt all observations using RECOVERY_SECRET and populate the "),l("code",null,"observations_decrypted"),ke(" table for inspection and backfill. ")],-1)),l("div",A2,[l("button",{class:"decrypt-btn",onClick:q,disabled:pe.value},b(pe.value?"Decrypting...":"Decrypt All Observations"),9,T2)]),pe.value?(v(),m("div",N2,[...K[14]||(K[14]=[l("div",{class:"spinner"},null,-1),l("p",null,"Processing observations (this may take a minute)...",-1)])])):j("",!0),V.value?(v(),m("div",{key:1,class:ie(["decrypt-result",{error:!V.value.success}])},[V.value.success?(v(),m("p",E2,[K[15]||(K[15]=ke(" Decrypted ",-1)),l("strong",null,b(V.value.observations_decrypted.toLocaleString()),1),K[16]||(K[16]=ke(" observations from ",-1)),l("strong",null,b(V.value.users_processed),1),K[17]||(K[17]=ke(" users. ",-1)),V.value.users_skipped?(v(),m("span",O2," ("+b(V.value.users_skipped)+" users skipped  no recovery key)",1)):j("",!0),V.value.errors?(v(),m("span",I2," | "+b(V.value.errors)+" errors",1)):j("",!0)])):(v(),m("p",R2,"Decryption failed: "+b(V.value.error),1)),V.value.success?(v(),m("p",D2,[...K[18]||(K[18]=[ke(" Results in ",-1),l("code",null,"observations_decrypted",-1),ke(" table. Query via SQLite to inspect. ",-1)])])):j("",!0)],2)):j("",!0)])],64)):j("",!0)]))}},L2=we(P2,[["__scopeId","data-v-a782c5e0"]]),B2={class:"lobby-view"},M2={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=He(),s=Cn(),n=E(!1),o=N(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=N(()=>s.studentAssignments.value.length>0),r=N(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return bt(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,c)=>(v(),m("div",B2,[n.value?(v(),Ue(L2,{key:0,onBack:c[0]||(c[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(v(),Ue(Xx,{key:1,"is-admin":o.value==="admin",onSelectCollection:c[1]||(c[1]=u=>i.$emit("select-collection",u)),onShowAdmin:c[2]||(c[2]=u=>n.value=!0),onLoadFile:c[3]||(c[3]=u=>i.$emit("load-file",u))},null,8,["is-admin"])):a.value||r.value?(v(),Ue(N$,{key:2,onSelectCollection:c[4]||(c[4]=u=>i.$emit("select-collection",u)),onSelectAssignment:c[5]||(c[5]=u=>i.$emit("select-assignment",u)),onLoadFile:c[6]||(c[6]=u=>i.$emit("load-file",u))})):(v(),Ue(f$,{key:3,onSelectCollection:c[7]||(c[7]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:c[8]||(c[8]=u=>i.$emit("show-become-teacher")),onLoadFile:c[9]||(c[9]=u=>i.$emit("load-file",u))}))]))}},U2=we(M2,[["__scopeId","data-v-d84f343d"]]),F2={class:"modal-content"},j2={key:0,class:"step step-overview"},H2={class:"step-actions"},W2={key:1,class:"step step-agreement"},K2={class:"agreement-checkbox"},V2={class:"step-actions"},G2=["disabled"],z2={key:0,class:"error-text"},J2={key:2,class:"step step-confirmation"},Y2={class:"step-actions"},q2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=He(),o=E(1),a=E(!1),r=E(!1),i=E(null);async function c(){const u=n.currentUser.value;if(u){r.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:p,privateKey:h}=await lm();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:p,private_key:h,role:"teacher"})}),n.updateUser(u.id,{viewerPrivateKey:h}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:h,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(p){console.warn("Failed to create viewer record:",p)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{r.value=!1}}}return(u,f)=>(v(),m("div",{class:"modal-overlay",onClick:f[5]||(f[5]=Ct(d=>u.$emit("close"),["self"]))},[l("div",F2,[o.value===1?(v(),m("div",j2,[f[6]||(f[6]=no('<h2 data-v-8bdcc044>Become a Teacher</h2><p class="step-desc" data-v-8bdcc044>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-8bdcc044><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Create Classrooms</strong><p data-v-8bdcc044>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Assign Exercises</strong><p data-v-8bdcc044>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Track Progress</strong><p data-v-8bdcc044>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-8bdcc044><strong data-v-8bdcc044>Still a Student Too</strong><p data-v-8bdcc044>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),l("div",H2,[l("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>u.$emit("close"))},"Not Now"),l("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(v(),m("div",W2,[f[8]||(f[8]=no('<h2 data-v-8bdcc044>Teacher Agreement</h2><p class="step-desc" data-v-8bdcc044>Please review and accept the terms below.</p><div class="terms-scroll" data-v-8bdcc044><h4 data-v-8bdcc044>Service Availability</h4><p data-v-8bdcc044>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-8bdcc044>Data &amp; Storage</h4><p data-v-8bdcc044>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-8bdcc044>Student Data &amp; Privacy</h4><p data-v-8bdcc044>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-8bdcc044><li data-v-8bdcc044>Use student data for educational purposes only</li><li data-v-8bdcc044>Not share student data publicly or with unauthorized parties</li><li data-v-8bdcc044>Respect that students can revoke your access at any time</li></ul><h4 data-v-8bdcc044>Your Responsibilities</h4><p data-v-8bdcc044>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-8bdcc044>No Warranty</h4><p data-v-8bdcc044>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-8bdcc044>Open Source</h4><p data-v-8bdcc044>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),l("label",K2,[Fe(l("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d)},null,512),[[Hr,a.value]]),f[7]||(f[7]=l("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),l("div",V2,[l("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),l("button",{class:"btn btn-primary",disabled:!a.value||r.value,onClick:c},b(r.value?"Activating...":"Activate Teacher Account"),9,G2)]),i.value?(v(),m("p",z2,b(i.value),1)):j("",!0)])):o.value===3?(v(),m("div",J2,[f[9]||(f[9]=l("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=l("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=l("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=l("ol",{class:"next-steps"},[l("li",null,"Create your first classroom from the teacher dashboard"),l("li",null,"Share the invite link with your students"),l("li",null,"Browse exercises and assign them to your class")],-1)),l("div",Y2,[l("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>u.$emit("activated"))},"Go to Dashboard ")])])):j("",!0)])]))}},X2=we(q2,[["__scopeId","data-v-8bdcc044"]]),Q2={},Z2={class:"page-footer"};function eT(e,t){return v(),m("footer",Z2,[...t[0]||(t[0]=[l("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),l("nav",{class:"footer-links"},[l("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),l("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const tT=we(Q2,[["render",eT],["__scopeId","data-v-1b649814"]]),sT={key:1,class:"app"},nT={class:"app-header"},oT={class:"header-right"},aT=["title"],rT={key:3,class:"stats"},lT={class:"correct"},iT={class:"wrong"},cT={class:"user-avatar-group"},uT=["title"],dT=["title"],fT={class:"app-main"},pT={key:3,class:"collection-view"},vT={key:4,class:"practice-layout"},mT={class:"practice-left"},hT={class:"practice-right"},gT={key:1,class:"commentary-panel"},yT=["innerHTML"],bT=["innerHTML"],_T=["innerHTML"],wT=["innerHTML"],ST={class:"commentary-controls"},CT={key:0,class:"bidding-box-wrapper"},$T={key:1,class:"card-choice-prompt"},kT=["innerHTML"],xT={key:3,class:"completion-controls"},AT={key:0,class:"registration-toast"},TT={__name:"MainLayout",setup(e){const t=Fv(),s=mo(),n=He(),o=ga(),a=Lu(),r=wn(),i=rl(),c=Cn(),u=Xm(),f=E(!1),d=E(!1),p=E(!1),h=E(!1),g=E(null),y=E(""),$=E(null),C=E(null),_=E(null),w=E(!1),x=E(null),R=E(null),L=E(!1),B=E(!1),Q=E(null);function Y(I,D=".current"){if(!I)return;const Z=I.querySelector(D);Z&&(I.scrollTop=Z.offsetTop-I.offsetTop)}yt(()=>u.currentStepIndex.value,()=>{Zn(()=>{Y($.value,".narrative-text.current")})}),yt(()=>u.isComplete.value,I=>{I&&Zn(()=>{Y($.value,".narrative-text.current")})});const fe=N(()=>n.isAuthenticated.value),ve=N(()=>{const I=n.currentUser.value;return I?`${I.firstName} ${I.lastName}`:""}),ue=N(()=>{const I=n.currentUser.value;return I?`${I.firstName.charAt(0)}${I.lastName.charAt(0)}`.toUpperCase():"?"}),ge=N(()=>{const I=n.currentUser.value;return(I==null?void 0:I.role)||"student"}),$e=N(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let me=null;bt(()=>{i.loadAnnouncement(),me=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),Br(()=>{me&&clearInterval(me)}),bt(async()=>{s.initializeFromUrl(),n.initialize();const I=new URLSearchParams(window.location.search);I.get("recover")&&I.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),u.observationStore.initialize();const D=s.getCollectionFromUrl(),Z=s.getLessonFromUrl();D&&(C.value=D,Z&&await W(D,Z)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),_s().initialize(),await r.checkTeacherStatus())});async function pe(I){console.log("User ready:",I.firstName,I.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),B.value=!0,setTimeout(()=>{B.value=!1},4e3)),await a.initialize(),_s().initialize(),await r.checkTeacherStatus();const Z=sessionStorage.getItem("pendingJoinCode");if(Z){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:Z}});return}}function V(){_s().reset(),Zr().clearCache(),cs().reset(),r.reset(),U.value=[],H.value=0,C.value=null,_.value=null,u.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,f.value=!1,h.value=!1,g.value=null}async function q(){w.value=!1,await r.checkTeacherStatus()}const U=E([]),H=E(0),A=N(()=>U.value[H.value]||null),K=N(()=>{var oe;const I=F(C.value),D=I!=null&&I.name?`${I.name} - `:"";if((oe=_.value)!=null&&oe.name)return D+_.value.name;if(!A.value)return"";const Z=A.value.subfolder||A.value.category||"";return Z?D+Z:""});yt(H,()=>{A.value&&(u.loadDeal(A.value),s.setDealInUrl(A.value.boardNumber))},{flush:"sync"}),yt(()=>u.observationStore.pendingCount.value,(I,D)=>{I>D&&a.triggerSync()}),yt(()=>u.isComplete.value,I=>{I&&(x.value=null)});async function ce(I){const D=I.target.files[0];if(D)try{const Z=await D.text(),oe=ko(Z);if(oe.length>0){const le=D.name.replace(/\.pbn$/i,""),Ae=oe.map(_e=>({..._e,subfolder:_e.subfolder||le,category:_e.category||le}));U.value=Ae,H.value=0,u.loadDeal(Ae[0]),u.resetStats(),ys().saveLessonBoardNumbers(le,Ae.map(_e=>_e.boardNumber)),_.value={id:le,name:le,category:le}}else alert("No deals found in the PBN file")}catch(Z){console.error("Error loading PBN file:",Z),alert("Error loading PBN file: "+Z.message)}}function Te({subfolder:I,name:D,category:Z,content:oe}){const le=ko(oe);if(le.length>0){const Ae=le.map(_e=>({..._e,subfolder:_e.subfolder||I,category:_e.category||Z}));U.value=Ae,H.value=0,u.loadDeal(Ae[0]),u.resetStats(),ys().saveLessonBoardNumbers(I,Ae.map(_e=>_e.boardNumber)),_.value={id:I,name:D,category:Z},s.setLessonInUrl(I),L.value=!1,se()}else alert("No deals found in the lesson file")}const xe=N(()=>u.boardState.correctCount),je=N(()=>u.boardState.wrongCount);function z(I){const D=u.makeBid(I);A.value&&ne(D)}function re({seat:I,suit:D,rank:Z}){const oe=u.makeCardChoice(D,Z);A.value&&ne(oe)}function ne(I){const D=A.value.boardNumber;if(!I)x.value={board:D,status:"red"};else if(u.boardState.boardHadWrong){const Z=Object.keys(u.boardState.wrongStepIndices).length===0;x.value={board:D,status:Z?"yellow":"red"}}}function de(){u.clearCardFeedback(),u.goBack()}function Ce(){H.value<U.value.length-1&&(x.value=null,H.value++,u.loadDeal(U.value[H.value]))}function S(I){I>=0&&I<U.value.length&&(x.value=null,H.value=I,u.loadDeal(U.value[I]))}async function k({subfolder:I,dealNumber:D}){var Z;if(((Z=_.value)==null?void 0:Z.id)===I&&U.value.length>0){const oe=U.value.findIndex(le=>le.boardNumber===D);if(oe>=0){S(oe);return}}for(const oe of s.COLLECTIONS)try{const le=I.includes("/")?I.split("/").pop():I,Ae=`${oe.baseUrl}/${le}.pbn`,be=await fetch(Ae);if(!be.ok)continue;const _e=await be.text();C.value=oe.id,s.setCollectionInUrl(oe.id),Te({subfolder:I,name:I,category:"",content:_e});const ze=U.value.findIndex(dt=>dt.boardNumber===D);ze>=0&&S(ze);return}catch{}}function P(I){p.value=!1,h.value=!1,g.value=null,k(I)}function G(I,D){h.value=!1,g.value=null,k({subfolder:I,dealNumber:D||1})}function X(){_.value=null,s.setLessonInUrl(null),U.value=[],H.value=0,u.resetStats(),L.value=!1,R.value=null,h.value=!1,g.value=null}function J(){C.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),U.value=[],H.value=0,u.resetStats(),L.value=!1,R.value=null,h.value=!1,g.value=null}async function se(){if(R.value=null,!C.value||!_.value)return;const I=F(C.value);if(!I)return;const D=_.value.id,Z=D.includes("/")?D.split("/").pop():D,oe=`${I.baseUrl}/${Z}_Intro.pdf`;try{(await fetch(oe,{method:"HEAD"})).ok&&(R.value=oe)}catch{}}function te(I){window.innerWidth<600?window.open(I,"_blank"):(Q.value=I,L.value=!0)}function T(I){C.value=I,s.setCollectionInUrl(I)}async function O(I){const D=await c.fetchExerciseBoards(I.exercise_id);if(!D||D.length===0){alert("Could not load exercise boards.");return}const Z=be=>`${be.collection_id||""}|${be.deal_subfolder}`,oe=new Map;for(const be of D){const _e=Z(be);oe.has(_e)||oe.set(_e,[]),oe.get(_e).push(be)}const le=[];for(const[,be]of oe){const _e=be[0].deal_subfolder,ze=be[0].collection_id,dt=_e.includes("/")?_e.split("/").pop():_e;let ft=null;if(ze){const Be=F(ze);if(Be)try{const Xe=`${Be.baseUrl}/${dt}.pbn`,pt=await fetch(Xe);pt.ok&&(ft=await pt.text())}catch{}}if(!ft)for(const Be of s.COLLECTIONS)try{const Xe=`${Be.baseUrl}/${dt}.pbn`,pt=await fetch(Xe);if(pt.ok){ft=await pt.text();break}}catch{}if(!ft){console.warn(`Could not load PBN for subfolder: ${_e}`);continue}const Ye=ko(ft),et=new Set(be.map(Be=>Be.deal_number));for(const Be of Ye)if(et.has(Be.boardNumber)){const Xe=be.find(pt=>pt.deal_number===Be.boardNumber);le.push({...Be,subfolder:Be.subfolder||_e,category:Be.category||_e,_sortOrder:(Xe==null?void 0:Xe.sort_order)??999})}}if(le.length===0){alert("Could not find any of the assigned boards.");return}le.sort((be,_e)=>be._sortOrder-_e._sortOrder),U.value=le,H.value=0,u.loadDeal(le[0]),u.resetStats(),ys().saveLessonBoardNumbers(I.exercise_name,le.map(be=>be.boardNumber)),_.value={id:I.exercise_name,name:I.exercise_name,category:"Assignment"}}function F(I){return s.COLLECTIONS.find(D=>D.id===I)}async function W(I,D){var oe;const Z=F(I);if(!Z)return console.error("Collection not found:",I),!1;try{const le=await fetch(Z.tocUrl);if(!le.ok)throw new Error(`Failed to load TOC: ${le.statusText}`);const Ae=await le.json();let be=null,_e=null;for(const Be of Ae.categories||[]){const Xe=(oe=Be.lessons)==null?void 0:oe.find(pt=>pt.id===D);if(Xe){be=Xe,_e=Be;break}}if(!be)return console.error("Lesson not found in TOC:",D),!1;const ze=D.includes("/")?D.split("/").pop():D,dt=`${Z.baseUrl}/${ze}.pbn`,ft=await fetch(dt);if(!ft.ok)throw new Error(`Failed to load lesson: ${ft.statusText}`);const Ye=await ft.text(),et=ko(Ye);if(et.length>0){const Be=et.map(us=>({...us,subfolder:us.subfolder||D,category:us.category||_e.name}));U.value=Be;const Xe=s.getDealFromUrl(),pt=Xe?Be.findIndex(us=>us.boardNumber===Xe):-1;return H.value=pt>=0?pt:0,u.loadDeal(Be[H.value]),u.resetStats(),_.value={id:D,name:be.name,category:_e.name},se(),!0}return!1}catch(le){return console.error("Error loading lesson from URL:",le),!1}}return(I,D)=>{var Z,oe,le,Ae,be,_e,ze,dt,ft,Ye,et,Be,Xe,pt,us,dl;return fe.value?(v(),m("div",sT,[l("header",nT,[l("h1",null,b(U.value.length?K.value:$e.value),1),l("div",oT,[ye(R_),l("button",{class:"progress-btn",onClick:D[0]||(D[0]=De=>d.value=!0),title:"View Progress"}," Progress "),l("button",{class:"accomplishments-btn",onClick:D[1]||(D[1]=De=>p.value=!0),title:"View Accomplishments"}," Accomplishments "),M(r).isTeacher.value?(v(),m("button",{key:0,class:"teacher-btn",onClick:D[2]||(D[2]=De=>{h.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):j("",!0),U.value.length&&C.value?(v(),m("button",{key:1,class:"lessons-btn",onClick:X,title:"Back to "+((Z=F(C.value))==null?void 0:Z.name)},b((oe=F(C.value))==null?void 0:oe.name),9,aT)):j("",!0),C.value||U.value.length?(v(),m("button",{key:2,class:"lobby-btn",onClick:J,title:"Return to lobby"}," Lobby ")):j("",!0),xe.value+je.value>0?(v(),m("div",rT,[l("span",lT,b(xe.value),1),l("span",iT,b(je.value),1)])):j("",!0),l("div",cT,[ge.value!=="student"?(v(),m("button",{key:0,class:ie(["role-badge","role-"+ge.value]),onClick:J,title:"Return to "+ge.value+" lobby"},b(ge.value),11,uT)):j("",!0),l("button",{class:"user-btn",onClick:D[3]||(D[3]=De=>f.value=!0),title:ve.value},b(ue.value),9,dT)])])]),l("main",fT,[ye(S_),ye(b_),h.value&&!g.value?(v(),Ue(WS,{key:0,onClose:D[4]||(D[4]=De=>h.value=!1),onSelectStudent:D[5]||(D[5]=(De,$n)=>{g.value=De,y.value=$n})})):h.value&&g.value?(v(),Ue(bC,{key:1,studentId:g.value,studentName:y.value,onBack:D[6]||(D[6]=De=>g.value=null),onNavigateToLesson:G},null,8,["studentId","studentName"])):!U.value.length&&!C.value?(v(),Ue(U2,{key:2,onSelectCollection:T,onSelectAssignment:O,onShowBecomeTeacher:D[7]||(D[7]=De=>w.value=!0),onLoadFile:ce})):!U.value.length&&C.value?(v(),m("div",pT,[l("h2",null,b(((le=F(C.value))==null?void 0:le.name)||C.value),1),D[17]||(D[17]=l("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ye(GC,{visible:!0,inline:!0,collection:F(C.value),onLoad:Te},null,8,["collection"])])):(v(),m("div",vT,[l("div",mT,[U.value.length>1?(v(),Ue(ju,{key:0,boardNumbers:U.value.map(De=>De.boardNumber),lessonSubfolder:((Ae=A.value)==null?void 0:Ae.subfolder)||((be=A.value)==null?void 0:be.category)||"",currentIndex:H.value,forceBoardStatus:x.value,introUrl:R.value,onGoto:S,onOpenIntro:te},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceBoardStatus","introUrl"])):j("",!0),ye(by,{boardNumber:(_e=A.value)==null?void 0:_e.boardNumber,dealer:(ze=A.value)==null?void 0:ze.dealer,vulnerable:(dt=A.value)==null?void 0:dt.vulnerable,contract:(ft=A.value)==null?void 0:ft.contract,declarer:(Ye=A.value)==null?void 0:Ye.declarer,showContract:M(u).auctionState.auctionComplete||M(u).showOpeningLead.value||M(u).hasSteps.value&&!M(u).hasBidSteps.value,openingLead:M(u).showOpeningLead.value?(et=A.value)==null?void 0:et.openingLead:"",totalDeals:U.value.length,currentIndex:H.value,dealBoardNumbers:U.value.map(De=>De.boardNumber),onGoto:S},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ye(Bg,{hands:M(u).hands.value,hiddenSeats:M(u).hiddenSeats.value,showHcp:M(u).showHcp.value,compact:!0,clickableSeat:M(u).hasCardChoice.value?M(u).studentSeat.value:null,playedCards:M(u).showcardsPlayedCards.value,onCardClick:re},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),l("div",hT,[M(u).showAuctionTable.value?(v(),Ue(ty,{key:0,bids:M(u).hasBidSteps.value?M(u).auctionState.displayedBids:((Be=A.value)==null?void 0:Be.auction)||[],dealer:((Xe=A.value)==null?void 0:Xe.dealer)||"N",currentBidIndex:M(u).hasBidSteps.value?M(u).auctionState.currentBidIndex:-1,wrongBidIndex:M(u).auctionState.wrongBidIndex,correctBidIndex:M(u).auctionState.correctBidIndex,showTurnIndicator:M(u).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):j("",!0),ye(Ci,{visible:!!M(u).auctionState.wrongBid,type:"wrong",wrongBid:M(u).auctionState.wrongBid,correctBid:M(u).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ye(Ci,{visible:!!M(u).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:M(u).cardChoiceState.wrongCard,correctCardCode:M(u).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),M(u).hasSteps.value?(v(),m("div",gT,[l("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:$},[(v(!0),m(ee,null,ae(M(u).steps.value.slice(0,M(u).currentStepIndex.value),(De,$n)=>(v(),m(ee,{key:"prev-"+$n},[$n>=M(u).commentaryStartIndex.value?(v(),m(ee,{key:0},[l("span",{class:"narrative-text previous",innerHTML:M(Ys)(M(En)(De.text))},null,8,yT),De.type==="bid"&&De.explanationText?(v(),m("span",{key:0,class:ie(["narrative-text",$n===M(u).currentStepIndex.value-1&&M(u).isBidStep.value&&!M(u).bidAnswered.value?"current":"previous"]),innerHTML:M(Ys)(M(En)(De.explanationText))},null,10,bT)):j("",!0)],64)):j("",!0)],64))),128)),M(u).currentStep.value?(v(),m("span",{key:0,class:"narrative-text current",innerHTML:M(Ys)(M(En)(M(u).currentStep.value.text))},null,8,_T)):j("",!0),M(u).bidAnswered.value&&((pt=M(u).currentStep.value)!=null&&pt.explanationText)?(v(),m("span",{key:1,class:"narrative-text current",innerHTML:M(Ys)(M(En)(M(u).currentStep.value.explanationText))},null,8,wT)):j("",!0)],512),l("div",ST,[M(u).hasBidPrompt.value?(v(),m("div",CT,[ye(Yg,{lastBid:M(u).lastContractBid.value,canDouble:M(u).canDouble.value,canRedouble:M(u).canRedouble.value,onBid:z},null,8,["lastBid","canDouble","canRedouble"])])):M(u).hasCardChoice.value?(v(),m("div",$T," Click on the card you would choose ")):j("",!0),M(u).canGoBack.value?(v(),m("button",{key:2,class:"instruction-btn secondary",onClick:de},"  Back ")):j("",!0),!M(u).isComplete.value&&(M(u).bidAnswered.value||!M(u).hasBidPrompt.value&&!M(u).hasCardChoice.value&&M(u).currentStep.value&&M(u).currentStep.value.type!=="end")?(v(),m("button",{key:3,class:"instruction-btn primary",onClick:D[8]||(D[8]=De=>M(u).advance())},b(((us=M(u).currentStep.value)==null?void 0:us.type)==="rotate"?"Rotate":"Next")+"  ",1)):j("",!0),M(u).isComplete.value&&H.value<U.value.length-1?(v(),m("button",{key:4,class:"next-deal-btn",onClick:Ce}," Next Deal  ")):j("",!0)])])):(dl=A.value)!=null&&dl.commentary?(v(),m("div",{key:2,class:"display-commentary",innerHTML:M(Ys)(M(En)(M(Xv)(A.value.commentary)))},null,8,kT)):j("",!0),!M(u).hasSteps.value&&M(u).isComplete.value&&H.value<U.value.length-1?(v(),m("div",xT,[l("button",{class:"next-deal-btn",onClick:Ce}," Next Deal  ")])):j("",!0)])]))]),ye(i_,{visible:f.value,onClose:D[9]||(D[9]=De=>f.value=!1),onSwitchUser:V,onLogout:V,onBecomeTeacher:D[10]||(D[10]=De=>w.value=!0)},null,8,["visible"]),B.value?(v(),m("div",AT," Account created  your data is encrypted and linked to your email for recovery. ")):j("",!0),d.value?(v(),m("div",{key:1,class:"modal-overlay",onClick:D[12]||(D[12]=Ct(De=>d.value=!1,["self"]))},[ye(xw,{onClose:D[11]||(D[11]=De=>d.value=!1)})])):j("",!0),p.value?(v(),m("div",{key:2,class:"modal-overlay",onClick:D[14]||(D[14]=Ct(De=>p.value=!1,["self"]))},[ye(fS,{onClose:D[13]||(D[13]=De=>p.value=!1),onNavigateToDeal:P})])):j("",!0),ye(e$,{visible:L.value,url:Q.value||"",onClose:D[15]||(D[15]=De=>L.value=!1)},null,8,["visible","url"]),w.value?(v(),Ue(X2,{key:3,onClose:D[16]||(D[16]=De=>w.value=!1),onActivated:q})):j("",!0),ye(tT)])):(v(),Ue(xb,{key:0,onUserReady:pe}))}}},NT=()=>Ip(()=>import("./JoinClassroomView-CE8U24Dt.js"),__vite__mapDeps([0,1])),ET=[{path:"/join/:joinCode",name:"join",component:NT},{path:"/:pathMatch(.*)*",name:"app",component:TT}],OT=Uv({history:gv(),routes:ET});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const Zu=$p(Np);Zu.use(OT);Zu.mount("#app");export{we as _,l as a,ye as b,m as c,j as d,ke as e,no as f,He as g,_o as h,lf as i,eu as j,Fv as k,v as l,bt as o,E as r,b as t,IT as u,Hd as w};
