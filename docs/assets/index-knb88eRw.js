const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-CO6i9Xn_.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ce={},js=[],Bt=()=>{},Hl=()=>!1,Io=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),zr=e=>e.startsWith("onUpdate:"),qe=Object.assign,Jr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},lu=Object.prototype.hasOwnProperty,_e=(e,t)=>lu.call(e,t),le=Array.isArray,Hs=e=>Kn(e)==="[object Map]",on=e=>Kn(e)==="[object Set]",Oa=e=>Kn(e)==="[object Date]",ue=e=>typeof e=="function",Ue=e=>typeof e=="string",Ot=e=>typeof e=="symbol",$e=e=>e!==null&&typeof e=="object",Vl=e=>($e(e)||ue(e))&&ue(e.then)&&ue(e.catch),Kl=Object.prototype.toString,Kn=e=>Kl.call(e),iu=e=>Kn(e).slice(8,-1),Wl=e=>Kn(e)==="[object Object]",Yr=e=>Ue(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cn=Gr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ro=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},cu=/-\w/g,Ct=Ro(e=>e.replace(cu,t=>t.slice(1).toUpperCase())),uu=/\B([A-Z])/g,us=Ro(e=>e.replace(uu,"-$1").toLowerCase()),Po=Ro(e=>e.charAt(0).toUpperCase()+e.slice(1)),qo=Ro(e=>e?`on${Po(e)}`:""),as=(e,t)=>!Object.is(e,t),lo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Gl=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},Do=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ea;const Lo=()=>Ea||(Ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ds(e){if(le(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ue(n)?vu(n):ds(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(Ue(e)||$e(e))return e}const du=/;(?![^(]*\))/g,fu=/:([^]+)/,mu=/\/\*[^]*?\*\//g;function vu(e){const t={};return e.replace(mu,"").split(du).forEach(s=>{if(s){const n=s.split(fu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ae(e){let t="";if(Ue(e))t=e;else if(le(e))for(let s=0;s<e.length;s++){const n=ae(e[s]);n&&(t+=n+" ")}else if($e(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const pu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hu=Gr(pu);function zl(e){return!!e||e===""}function gu(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=ks(e[n],t[n]);return s}function ks(e,t){if(e===t)return!0;let s=Oa(e),n=Oa(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Ot(e),n=Ot(t),s||n)return e===t;if(s=le(e),n=le(t),s||n)return s&&n?gu(e,t):!1;if(s=$e(e),n=$e(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!ks(e[a],t[a]))return!1}}return String(e)===String(t)}function qr(e,t){return e.findIndex(s=>ks(s,t))}const Jl=e=>!!(e&&e.__v_isRef===!0),C=e=>Ue(e)?e:e==null?"":le(e)||$e(e)&&(e.toString===Kl||!ue(e.toString))?Jl(e)?C(e.value):JSON.stringify(e,Yl,2):String(e),Yl=(e,t)=>Jl(t)?Yl(e,t.value):Hs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[Xo(n,r)+" =>"]=o,s),{})}:on(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Xo(s))}:Ot(t)?Xo(t):$e(t)&&!le(t)&&!Wl(t)?String(t):t,Xo=(e,t="")=>{var s;return Ot(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class yu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!t&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=dt;try{return dt=this,t()}finally{dt=s}}}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function bu(){return dt}let ke;const Qo=new WeakSet;class ql{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qo.has(this)&&(Qo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ql(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ia(this),Zl(this);const t=ke,s=Nt;ke=this,Nt=!0;try{return this.fn()}finally{ei(this),ke=t,Nt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Zr(t);this.deps=this.depsTail=void 0,Ia(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hr(this)&&this.run()}get dirty(){return hr(this)}}let Xl=0,$n,kn;function Ql(e,t=!1){if(e.flags|=8,t){e.next=kn,kn=e;return}e.next=$n,$n=e}function Xr(){Xl++}function Qr(){if(--Xl>0)return;if(kn){let t=kn;for(kn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;$n;){let t=$n;for($n=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Zl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ei(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Zr(n),_u(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function hr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ti(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ti(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===In)||(e.globalVersion=In,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!hr(e))))return;e.flags|=2;const t=e.dep,s=ke,n=Nt;ke=e,Nt=!0;try{Zl(e);const o=e.fn(e._value);(t.version===0||as(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ke=s,Nt=n,ei(e),e.flags&=-3}}function Zr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)Zr(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function _u(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Nt=!0;const si=[];function Yt(){si.push(Nt),Nt=!1}function qt(){const e=si.pop();Nt=e===void 0?!0:e}function Ia(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ke;ke=void 0;try{t()}finally{ke=s}}}let In=0;class wu{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ea{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ke||!Nt||ke===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ke)s=this.activeLink=new wu(ke,this),ke.deps?(s.prevDep=ke.depsTail,ke.depsTail.nextDep=s,ke.depsTail=s):ke.deps=ke.depsTail=s,ni(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ke.depsTail,s.nextDep=void 0,ke.depsTail.nextDep=s,ke.depsTail=s,ke.deps===s&&(ke.deps=n)}return s}trigger(t){this.version++,In++,this.notify(t)}notify(t){Xr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Qr()}}}function ni(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)ni(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const gr=new WeakMap,Ss=Symbol(""),yr=Symbol(""),Rn=Symbol("");function tt(e,t,s){if(Nt&&ke){let n=gr.get(e);n||gr.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new ea),o.map=n,o.key=s),o.track()}}function Vt(e,t,s,n,o,r){const a=gr.get(e);if(!a){In++;return}const i=l=>{l&&l.trigger()};if(Xr(),t==="clear")a.forEach(i);else{const l=le(e),u=l&&Yr(s);if(l&&s==="length"){const d=Number(n);a.forEach((f,m)=>{(m==="length"||m===Rn||!Ot(m)&&m>=d)&&i(f)})}else switch((s!==void 0||a.has(void 0))&&i(a.get(s)),u&&i(a.get(Rn)),t){case"add":l?u&&i(a.get("length")):(i(a.get(Ss)),Hs(e)&&i(a.get(yr)));break;case"delete":l||(i(a.get(Ss)),Hs(e)&&i(a.get(yr)));break;case"set":Hs(e)&&i(a.get(Ss));break}}Qr()}function Ts(e){const t=be(e);return t===e?t:(tt(t,"iterate",Rn),wt(e)?t:t.map(Et))}function Bo(e){return tt(e=be(e),"iterate",Rn),e}function ss(e,t){return Xt(e)?zs(Cs(e)?Et(t):t):Et(t)}const Su={__proto__:null,[Symbol.iterator](){return Zo(this,Symbol.iterator,e=>ss(this,e))},concat(...e){return Ts(this).concat(...e.map(t=>le(t)?Ts(t):t))},entries(){return Zo(this,"entries",e=>(e[1]=ss(this,e[1]),e))},every(e,t){return Ft(this,"every",e,t,void 0,arguments)},filter(e,t){return Ft(this,"filter",e,t,s=>s.map(n=>ss(this,n)),arguments)},find(e,t){return Ft(this,"find",e,t,s=>ss(this,s),arguments)},findIndex(e,t){return Ft(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ft(this,"findLast",e,t,s=>ss(this,s),arguments)},findLastIndex(e,t){return Ft(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ft(this,"forEach",e,t,void 0,arguments)},includes(...e){return er(this,"includes",e)},indexOf(...e){return er(this,"indexOf",e)},join(e){return Ts(this).join(e)},lastIndexOf(...e){return er(this,"lastIndexOf",e)},map(e,t){return Ft(this,"map",e,t,void 0,arguments)},pop(){return un(this,"pop")},push(...e){return un(this,"push",e)},reduce(e,...t){return Ra(this,"reduce",e,t)},reduceRight(e,...t){return Ra(this,"reduceRight",e,t)},shift(){return un(this,"shift")},some(e,t){return Ft(this,"some",e,t,void 0,arguments)},splice(...e){return un(this,"splice",e)},toReversed(){return Ts(this).toReversed()},toSorted(e){return Ts(this).toSorted(e)},toSpliced(...e){return Ts(this).toSpliced(...e)},unshift(...e){return un(this,"unshift",e)},values(){return Zo(this,"values",e=>ss(this,e))}};function Zo(e,t,s){const n=Bo(e),o=n[t]();return n!==e&&!wt(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const Cu=Array.prototype;function Ft(e,t,s,n,o,r){const a=Bo(e),i=a!==e&&!wt(e),l=a[t];if(l!==Cu[t]){const f=l.apply(e,r);return i?Et(f):f}let u=s;a!==e&&(i?u=function(f,m){return s.call(this,ss(e,f),m,e)}:s.length>2&&(u=function(f,m){return s.call(this,f,m,e)}));const d=l.call(a,u,n);return i&&o?o(d):d}function Ra(e,t,s,n){const o=Bo(e);let r=s;return o!==e&&(wt(e)?s.length>3&&(r=function(a,i,l){return s.call(this,a,i,l,e)}):r=function(a,i,l){return s.call(this,a,ss(e,i),l,e)}),o[t](r,...n)}function er(e,t,s){const n=be(e);tt(n,"iterate",Rn);const o=n[t](...s);return(o===-1||o===!1)&&na(s[0])?(s[0]=be(s[0]),n[t](...s)):o}function un(e,t,s=[]){Yt(),Xr();const n=be(e)[t].apply(e,s);return Qr(),qt(),n}const $u=Gr("__proto__,__v_isRef,__isVue"),oi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ot));function ku(e){Ot(e)||(e=String(e));const t=be(this);return tt(t,"has",e),t.hasOwnProperty(e)}class ri{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?Du:ci:r?ii:li).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=le(t);if(!o){let l;if(a&&(l=Su[s]))return l;if(s==="hasOwnProperty")return ku}const i=Reflect.get(t,s,nt(t)?t:n);if((Ot(s)?oi.has(s):$u(s))||(o||tt(t,"get",s),r))return i;if(nt(i)){const l=a&&Yr(s)?i:i.value;return o&&$e(l)?_r(l):l}return $e(i)?o?_r(i):Ut(i):i}}class ai extends ri{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];const a=le(t)&&Yr(s);if(!this._isShallow){const u=Xt(r);if(!wt(n)&&!Xt(n)&&(r=be(r),n=be(n)),!a&&nt(r)&&!nt(n))return u||(r.value=n),!0}const i=a?Number(s)<t.length:_e(t,s),l=Reflect.set(t,s,n,nt(t)?t:o);return t===be(o)&&(i?as(n,r)&&Vt(t,"set",s,n):Vt(t,"add",s,n)),l}deleteProperty(t,s){const n=_e(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Vt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Ot(s)||!oi.has(s))&&tt(t,"has",s),n}ownKeys(t){return tt(t,"iterate",le(t)?"length":Ss),Reflect.ownKeys(t)}}class xu extends ri{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Au=new ai,Nu=new xu,Tu=new ai(!0);const br=e=>e,eo=e=>Reflect.getPrototypeOf(e);function Ou(e,t,s){return function(...n){const o=this.__v_raw,r=be(o),a=Hs(r),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=o[e](...n),d=s?br:t?zs:Et;return!t&&tt(r,"iterate",l?yr:Ss),qe(Object.create(u),{next(){const{value:f,done:m}=u.next();return m?{value:f,done:m}:{value:i?[d(f[0]),d(f[1])]:d(f),done:m}}})}}function to(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Eu(e,t){const s={get(o){const r=this.__v_raw,a=be(r),i=be(o);e||(as(o,i)&&tt(a,"get",o),tt(a,"get",i));const{has:l}=eo(a),u=t?br:e?zs:Et;if(l.call(a,o))return u(r.get(o));if(l.call(a,i))return u(r.get(i));r!==a&&r.get(o)},get size(){const o=this.__v_raw;return!e&&tt(be(o),"iterate",Ss),o.size},has(o){const r=this.__v_raw,a=be(r),i=be(o);return e||(as(o,i)&&tt(a,"has",o),tt(a,"has",i)),o===i?r.has(o):r.has(o)||r.has(i)},forEach(o,r){const a=this,i=a.__v_raw,l=be(i),u=t?br:e?zs:Et;return!e&&tt(l,"iterate",Ss),i.forEach((d,f)=>o.call(r,u(d),u(f),a))}};return qe(s,e?{add:to("add"),set:to("set"),delete:to("delete"),clear:to("clear")}:{add(o){!t&&!wt(o)&&!Xt(o)&&(o=be(o));const r=be(this);return eo(r).has.call(r,o)||(r.add(o),Vt(r,"add",o,o)),this},set(o,r){!t&&!wt(r)&&!Xt(r)&&(r=be(r));const a=be(this),{has:i,get:l}=eo(a);let u=i.call(a,o);u||(o=be(o),u=i.call(a,o));const d=l.call(a,o);return a.set(o,r),u?as(r,d)&&Vt(a,"set",o,r):Vt(a,"add",o,r),this},delete(o){const r=be(this),{has:a,get:i}=eo(r);let l=a.call(r,o);l||(o=be(o),l=a.call(r,o)),i&&i.call(r,o);const u=r.delete(o);return l&&Vt(r,"delete",o,void 0),u},clear(){const o=be(this),r=o.size!==0,a=o.clear();return r&&Vt(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=Ou(o,e,t)}),s}function ta(e,t){const s=Eu(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(_e(s,o)&&o in n?s:n,o,r)}const Iu={get:ta(!1,!1)},Ru={get:ta(!1,!0)},Pu={get:ta(!0,!1)};const li=new WeakMap,ii=new WeakMap,ci=new WeakMap,Du=new WeakMap;function Lu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bu(e){return e.__v_skip||!Object.isExtensible(e)?0:Lu(iu(e))}function Ut(e){return Xt(e)?e:sa(e,!1,Au,Iu,li)}function ui(e){return sa(e,!1,Tu,Ru,ii)}function _r(e){return sa(e,!0,Nu,Pu,ci)}function sa(e,t,s,n,o){if(!$e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Bu(e);if(r===0)return e;const a=o.get(e);if(a)return a;const i=new Proxy(e,r===2?n:s);return o.set(e,i),i}function Cs(e){return Xt(e)?Cs(e.__v_raw):!!(e&&e.__v_isReactive)}function Xt(e){return!!(e&&e.__v_isReadonly)}function wt(e){return!!(e&&e.__v_isShallow)}function na(e){return e?!!e.__v_raw:!1}function be(e){const t=e&&e.__v_raw;return t?be(t):e}function Uu(e){return!_e(e,"__v_skip")&&Object.isExtensible(e)&&Gl(e,"__v_skip",!0),e}const Et=e=>$e(e)?Ut(e):e,zs=e=>$e(e)?_r(e):e;function nt(e){return e?e.__v_isRef===!0:!1}function N(e){return di(e,!1)}function Mu(e){return di(e,!0)}function di(e,t){return nt(e)?e:new Fu(e,t)}class Fu{constructor(t,s){this.dep=new ea,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:be(t),this._value=s?t:Et(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||wt(t)||Xt(t);t=n?t:be(t),as(t,s)&&(this._rawValue=t,this._value=n?t:Et(t),this.dep.trigger())}}function R(e){return nt(e)?e.value:e}const ju={get:(e,t,s)=>t==="__v_raw"?e:R(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return nt(o)&&!nt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function fi(e){return Cs(e)?e:new Proxy(e,ju)}class Hu{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new ea(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=In-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Ql(this,!0),!0}get value(){const t=this.dep.track();return ti(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vu(e,t,s=!1){let n,o;return ue(e)?n=e:(n=e.get,o=e.set),new Hu(n,o,s)}const so={},vo=new WeakMap;let bs;function Ku(e,t=!1,s=bs){if(s){let n=vo.get(s);n||vo.set(s,n=[]),n.push(e)}}function Wu(e,t,s=Ce){const{immediate:n,deep:o,once:r,scheduler:a,augmentJob:i,call:l}=s,u=P=>o?P:wt(P)||o===!1||o===0?Kt(P,1):Kt(P);let d,f,m,v,b=!1,x=!1;if(nt(e)?(f=()=>e.value,b=wt(e)):Cs(e)?(f=()=>u(e),b=!0):le(e)?(x=!0,b=e.some(P=>Cs(P)||wt(P)),f=()=>e.map(P=>{if(nt(P))return P.value;if(Cs(P))return u(P);if(ue(P))return l?l(P,2):P()})):ue(e)?t?f=l?()=>l(e,2):e:f=()=>{if(m){Yt();try{m()}finally{qt()}}const P=bs;bs=d;try{return l?l(e,3,[v]):e(v)}finally{bs=P}}:f=Bt,t&&o){const P=f,H=o===!0?1/0:o;f=()=>Kt(P(),H)}const E=bu(),$=()=>{d.stop(),E&&E.active&&Jr(E.effects,d)};if(r&&t){const P=t;t=(...H)=>{P(...H),$()}}let w=x?new Array(e.length).fill(so):so;const k=P=>{if(!(!(d.flags&1)||!d.dirty&&!P))if(t){const H=d.run();if(o||b||(x?H.some((ee,j)=>as(ee,w[j])):as(H,w))){m&&m();const ee=bs;bs=d;try{const j=[H,w===so?void 0:x&&w[0]===so?[]:w,v];w=H,l?l(t,3,j):t(...j)}finally{bs=ee}}}else d.run()};return i&&i(k),d=new ql(f),d.scheduler=a?()=>a(k,!1):k,v=P=>Ku(P,!1,d),m=d.onStop=()=>{const P=vo.get(d);if(P){if(l)l(P,4);else for(const H of P)H();vo.delete(d)}},t?n?k(!0):w=d.run():a?a(k.bind(null,!0),!0):d.run(),$.pause=d.pause.bind(d),$.resume=d.resume.bind(d),$.stop=$,$}function Kt(e,t=1/0,s){if(t<=0||!$e(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,nt(e))Kt(e.value,t,s);else if(le(e))for(let n=0;n<e.length;n++)Kt(e[n],t,s);else if(on(e)||Hs(e))e.forEach(n=>{Kt(n,t,s)});else if(Wl(e)){for(const n in e)Kt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Kt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wn(e,t,s,n){try{return n?e(...n):e()}catch(o){Uo(o,t,s)}}function Mt(e,t,s,n){if(ue(e)){const o=Wn(e,t,s,n);return o&&Vl(o)&&o.catch(r=>{Uo(r,t,s)}),o}if(le(e)){const o=[];for(let r=0;r<e.length;r++)o.push(Mt(e[r],t,s,n));return o}}function Uo(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ce;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const d=i.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,l,u)===!1)return}i=i.parent}if(r){Yt(),Wn(r,null,10,[e,l,u]),qt();return}}Gu(e,s,o,n,a)}function Gu(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const it=[];let Dt=-1;const Vs=[];let ns=null,Ps=0;const mi=Promise.resolve();let po=null;function Pn(e){const t=po||mi;return e?t.then(this?e.bind(this):e):t}function zu(e){let t=Dt+1,s=it.length;for(;t<s;){const n=t+s>>>1,o=it[n],r=Dn(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function oa(e){if(!(e.flags&1)){const t=Dn(e),s=it[it.length-1];!s||!(e.flags&2)&&t>=Dn(s)?it.push(e):it.splice(zu(t),0,e),e.flags|=1,vi()}}function vi(){po||(po=mi.then(hi))}function Ju(e){le(e)?Vs.push(...e):ns&&e.id===-1?ns.splice(Ps+1,0,e):e.flags&1||(Vs.push(e),e.flags|=1),vi()}function Pa(e,t,s=Dt+1){for(;s<it.length;s++){const n=it[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;it.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function pi(e){if(Vs.length){const t=[...new Set(Vs)].sort((s,n)=>Dn(s)-Dn(n));if(Vs.length=0,ns){ns.push(...t);return}for(ns=t,Ps=0;Ps<ns.length;Ps++){const s=ns[Ps];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ns=null,Ps=0}}const Dn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function hi(e){try{for(Dt=0;Dt<it.length;Dt++){const t=it[Dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dt<it.length;Dt++){const t=it[Dt];t&&(t.flags&=-2)}Dt=-1,it.length=0,pi(),po=null,(it.length||Vs.length)&&hi()}}let Je=null,gi=null;function ho(e){const t=Je;return Je=e,gi=e&&e.type.__scopeId||null,t}function Yu(e,t=Je,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&bo(-1);const r=ho(t);let a;try{a=e(...o)}finally{ho(r),n._d&&bo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Le(e,t){if(Je===null)return e;const s=Ho(Je),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,i,l=Ce]=t[o];r&&(ue(r)&&(r={mounted:r,updated:r}),r.deep&&Kt(a),n.push({dir:r,instance:s,value:a,oldValue:void 0,arg:i,modifiers:l}))}return e}function ms(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const i=o[a];r&&(i.oldValue=r[a].value);let l=i.dir[n];l&&(Yt(),Mt(l,s,8,[e.el,i,e,t]),qt())}}function io(e,t){if(st){let s=st.provides;const n=st.parent&&st.parent.provides;n===s&&(s=st.provides=Object.create(n)),s[e]=t}}function Tt(e,t,s=!1){const n=qd();if(n||Ws){let o=Ws?Ws._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ue(t)?t.call(n&&n.proxy):t}}const qu=Symbol.for("v-scx"),Xu=()=>Tt(qu);function ft(e,t,s){return yi(e,t,s)}function yi(e,t,s=Ce){const{immediate:n,deep:o,flush:r,once:a}=s,i=qe({},s),l=t&&n||!t&&r!=="post";let u;if(Un){if(r==="sync"){const v=Xu();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=Bt,v.resume=Bt,v.pause=Bt,v}}const d=st;i.call=(v,b,x)=>Mt(v,d,b,x);let f=!1;r==="post"?i.scheduler=v=>{mt(v,d&&d.suspense)}:r!=="sync"&&(f=!0,i.scheduler=(v,b)=>{b?v():oa(v)}),i.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const m=Wu(e,t,i);return Un&&(u?u.push(m):l&&m()),m}function Qu(e,t,s){const n=this.proxy,o=Ue(e)?e.includes(".")?bi(n,e):()=>n[e]:e.bind(n,n);let r;ue(t)?r=t:(r=t.handler,s=t);const a=Gn(this),i=yi(o,r.bind(n),s);return a(),i}function bi(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const Zu=Symbol("_vte"),ed=e=>e.__isTeleport,td=Symbol("_leaveCb");function ra(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ra(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function _i(e,t){return ue(e)?qe({name:e.name},t,{setup:e}):e}function wi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const go=new WeakMap;function xn(e,t,s,n,o=!1){if(le(e)){e.forEach((b,x)=>xn(b,t&&(le(t)?t[x]:t),s,n,o));return}if(Ks(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xn(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?Ho(n.component):n.el,a=o?null:r,{i,r:l}=e,u=t&&t.r,d=i.refs===Ce?i.refs={}:i.refs,f=i.setupState,m=be(f),v=f===Ce?Hl:b=>_e(m,b);if(u!=null&&u!==l){if(Da(t),Ue(u))d[u]=null,v(u)&&(f[u]=null);else if(nt(u)){u.value=null;const b=t;b.k&&(d[b.k]=null)}}if(ue(l))Wn(l,i,12,[a,d]);else{const b=Ue(l),x=nt(l);if(b||x){const E=()=>{if(e.f){const $=b?v(l)?f[l]:d[l]:l.value;if(o)le($)&&Jr($,r);else if(le($))$.includes(r)||$.push(r);else if(b)d[l]=[r],v(l)&&(f[l]=d[l]);else{const w=[r];l.value=w,e.k&&(d[e.k]=w)}}else b?(d[l]=a,v(l)&&(f[l]=a)):x&&(l.value=a,e.k&&(d[e.k]=a))};if(a){const $=()=>{E(),go.delete(e)};$.id=-1,go.set(e,$),mt($,s)}else Da(e),E()}}}function Da(e){const t=go.get(e);t&&(t.flags|=8,go.delete(e))}Lo().requestIdleCallback;Lo().cancelIdleCallback;const Ks=e=>!!e.type.__asyncLoader,Si=e=>e.type.__isKeepAlive;function sd(e,t){Ci(e,"a",t)}function nd(e,t){Ci(e,"da",t)}function Ci(e,t,s=st){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Mo(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Si(o.parent.vnode)&&od(n,t,s,o),o=o.parent}}function od(e,t,s,n){const o=Mo(t,e,n,!0);aa(()=>{Jr(n[t],o)},s)}function Mo(e,t,s=st,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Yt();const i=Gn(s),l=Mt(t,s,e,a);return i(),qt(),l});return n?o.unshift(r):o.push(r),r}}const es=e=>(t,s=st)=>{(!Un||e==="sp")&&Mo(e,(...n)=>t(...n),s)},rd=es("bm"),gt=es("m"),ad=es("bu"),ld=es("u"),$i=es("bum"),aa=es("um"),id=es("sp"),cd=es("rtg"),ud=es("rtc");function dd(e,t=st){Mo("ec",e,t)}const fd="components";function md(e,t){return pd(fd,e,!0,t)||e}const vd=Symbol.for("v-ndc");function pd(e,t,s=!0,n=!1){const o=Je||st;if(o){const r=o.type;{const i=tf(r,!1);if(i&&(i===t||i===Ct(t)||i===Po(Ct(t))))return r}const a=La(o[e]||r[e],t)||La(o.appContext[e],t);return!a&&n?r:a}}function La(e,t){return e&&(e[t]||e[Ct(t)]||e[Po(Ct(t))])}function ie(e,t,s,n){let o;const r=s,a=le(e);if(a||Ue(e)){const i=a&&Cs(e);let l=!1,u=!1;i&&(l=!wt(e),u=Xt(e),e=Bo(e)),o=new Array(e.length);for(let d=0,f=e.length;d<f;d++)o[d]=t(l?u?zs(Et(e[d])):Et(e[d]):e[d],d,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r)}else if($e(e))if(e[Symbol.iterator])o=Array.from(e,(i,l)=>t(i,l,void 0,r));else{const i=Object.keys(e);o=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const d=i[l];o[l]=t(e[d],d,l,r)}}else o=[];return o}function hd(e,t,s={},n,o){if(Je.ce||Je.parent&&Ks(Je.parent)&&Je.parent.ce){const u=Object.keys(s).length>0;return s.name=t,p(),De(Z,null,[ce("slot",s,n)],u?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),p();const a=r&&ki(r(s)),i=s.key||a&&a.key,l=De(Z,{key:(i&&!Ot(i)?i:`_${t}`)+(!a&&n?"_fb":"")},a||[],a&&e._===1?64:-2);return r&&r._c&&(r._d=!0),l}function ki(e){return e.some(t=>Bn(t)?!(t.type===Qt||t.type===Z&&!ki(t.children)):!0)?e:null}const wr=e=>e?Ki(e)?Ho(e):wr(e.parent):null,An=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wr(e.parent),$root:e=>wr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ai(e),$forceUpdate:e=>e.f||(e.f=()=>{oa(e.update)}),$nextTick:e=>e.n||(e.n=Pn.bind(e.proxy)),$watch:e=>Qu.bind(e)}),tr=(e,t)=>e!==Ce&&!e.__isScriptSetup&&_e(e,t),gd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:a,type:i,appContext:l}=e;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(tr(n,t))return a[t]=1,n[t];if(o!==Ce&&_e(o,t))return a[t]=2,o[t];if(_e(r,t))return a[t]=3,r[t];if(s!==Ce&&_e(s,t))return a[t]=4,s[t];Sr&&(a[t]=0)}}const u=An[t];let d,f;if(u)return t==="$attrs"&&tt(e.attrs,"get",""),u(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(s!==Ce&&_e(s,t))return a[t]=4,s[t];if(f=l.config.globalProperties,_e(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return tr(o,t)?(o[t]=s,!0):n!==Ce&&_e(n,t)?(n[t]=s,!0):_e(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:r,type:a}},i){let l;return!!(s[i]||e!==Ce&&i[0]!=="$"&&_e(e,i)||tr(t,i)||_e(r,i)||_e(n,i)||_e(An,i)||_e(o.config.globalProperties,i)||(l=a.__cssModules)&&l[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:_e(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ba(e){return le(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Sr=!0;function yd(e){const t=Ai(e),s=e.proxy,n=e.ctx;Sr=!1,t.beforeCreate&&Ua(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:i,provide:l,inject:u,created:d,beforeMount:f,mounted:m,beforeUpdate:v,updated:b,activated:x,deactivated:E,beforeDestroy:$,beforeUnmount:w,destroyed:k,unmounted:P,render:H,renderTracked:ee,renderTriggered:j,errorCaptured:q,serverPrefetch:Y,expose:me,inheritAttrs:fe,components:he,directives:Re,filters:We}=t;if(u&&bd(u,n,null),a)for(const Q in a){const se=a[Q];ue(se)&&(n[Q]=se.bind(s))}if(o){const Q=o.call(s,s);$e(Q)&&(e.data=Ut(Q))}if(Sr=!0,r)for(const Q in r){const se=r[Q],we=ue(se)?se.bind(s,s):ue(se.get)?se.get.bind(s,s):Bt,te=!ue(se)&&ue(se.set)?se.set.bind(s):Bt,K=I({get:we,set:te});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>K.value,set:ne=>K.value=ne})}if(i)for(const Q in i)xi(i[Q],n,s,Q);if(l){const Q=ue(l)?l.call(s):l;Reflect.ownKeys(Q).forEach(se=>{io(se,Q[se])})}d&&Ua(d,e,"c");function ge(Q,se){le(se)?se.forEach(we=>Q(we.bind(s))):se&&Q(se.bind(s))}if(ge(rd,f),ge(gt,m),ge(ad,v),ge(ld,b),ge(sd,x),ge(nd,E),ge(dd,q),ge(ud,ee),ge(cd,j),ge($i,w),ge(aa,P),ge(id,Y),le(me))if(me.length){const Q=e.exposed||(e.exposed={});me.forEach(se=>{Object.defineProperty(Q,se,{get:()=>s[se],set:we=>s[se]=we,enumerable:!0})})}else e.exposed||(e.exposed={});H&&e.render===Bt&&(e.render=H),fe!=null&&(e.inheritAttrs=fe),he&&(e.components=he),Re&&(e.directives=Re),Y&&wi(e)}function bd(e,t,s=Bt){le(e)&&(e=Cr(e));for(const n in e){const o=e[n];let r;$e(o)?"default"in o?r=Tt(o.from||n,o.default,!0):r=Tt(o.from||n):r=Tt(o),nt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[n]=r}}function Ua(e,t,s){Mt(le(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function xi(e,t,s,n){let o=n.includes(".")?bi(s,n):()=>s[n];if(Ue(e)){const r=t[e];ue(r)&&ft(o,r)}else if(ue(e))ft(o,e.bind(s));else if($e(e))if(le(e))e.forEach(r=>xi(r,t,s,n));else{const r=ue(e.handler)?e.handler.bind(s):t[e.handler];ue(r)&&ft(o,r,e)}}function Ai(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let l;return i?l=i:!o.length&&!s&&!n?l=t:(l={},o.length&&o.forEach(u=>yo(l,u,a,!0)),yo(l,t,a)),$e(t)&&r.set(t,l),l}function yo(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&yo(e,r,s,!0),o&&o.forEach(a=>yo(e,a,s,!0));for(const a in t)if(!(n&&a==="expose")){const i=_d[a]||s&&s[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const _d={data:Ma,props:Fa,emits:Fa,methods:bn,computed:bn,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:bn,directives:bn,watch:Sd,provide:Ma,inject:wd};function Ma(e,t){return t?e?function(){return qe(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function wd(e,t){return bn(Cr(e),Cr(t))}function Cr(e){if(le(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function bn(e,t){return e?qe(Object.create(null),e,t):t}function Fa(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:qe(Object.create(null),Ba(e),Ba(t??{})):t}function Sd(e,t){if(!e)return t;if(!t)return e;const s=qe(Object.create(null),e);for(const n in t)s[n]=at(e[n],t[n]);return s}function Ni(){return{app:null,config:{isNativeTag:Hl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cd=0;function $d(e,t){return function(n,o=null){ue(n)||(n=qe({},n)),o!=null&&!$e(o)&&(o=null);const r=Ni(),a=new WeakSet,i=[];let l=!1;const u=r.app={_uid:Cd++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:nf,get config(){return r.config},set config(d){},use(d,...f){return a.has(d)||(d&&ue(d.install)?(a.add(d),d.install(u,...f)):ue(d)&&(a.add(d),d(u,...f))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,f){return f?(r.components[d]=f,u):r.components[d]},directive(d,f){return f?(r.directives[d]=f,u):r.directives[d]},mount(d,f,m){if(!l){const v=u._ceVNode||ce(n,o);return v.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),e(v,d,m),l=!0,u._container=d,d.__vue_app__=u,Ho(v.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Mt(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return r.provides[d]=f,u},runWithContext(d){const f=Ws;Ws=u;try{return d()}finally{Ws=f}}};return u}}let Ws=null;const kd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ct(t)}Modifiers`]||e[`${us(t)}Modifiers`];function xd(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Ce;let o=s;const r=t.startsWith("update:"),a=r&&kd(n,t.slice(7));a&&(a.trim&&(o=s.map(d=>Ue(d)?d.trim():d)),a.number&&(o=s.map(Do)));let i,l=n[i=qo(t)]||n[i=qo(Ct(t))];!l&&r&&(l=n[i=qo(us(t))]),l&&Mt(l,e,6,o);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Mt(u,e,6,o)}}const Ad=new WeakMap;function Ti(e,t,s=!1){const n=s?Ad:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let a={},i=!1;if(!ue(e)){const l=u=>{const d=Ti(u,t,!0);d&&(i=!0,qe(a,d))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!i?($e(e)&&n.set(e,null),null):(le(r)?r.forEach(l=>a[l]=null):qe(a,r),$e(e)&&n.set(e,a),a)}function Fo(e,t){return!e||!Io(t)?!1:(t=t.slice(2).replace(/Once$/,""),_e(e,t[0].toLowerCase()+t.slice(1))||_e(e,us(t))||_e(e,t))}function ja(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:a,attrs:i,emit:l,render:u,renderCache:d,props:f,data:m,setupState:v,ctx:b,inheritAttrs:x}=e,E=ho(e);let $,w;try{if(s.shapeFlag&4){const P=o||n,H=P;$=Lt(u.call(H,P,d,f,v,m,b)),w=i}else{const P=t;$=Lt(P.length>1?P(f,{attrs:i,slots:a,emit:l}):P(f,null)),w=t.props?i:Nd(i)}}catch(P){Nn.length=0,Uo(P,e,1),$=ce(Qt)}let k=$;if(w&&x!==!1){const P=Object.keys(w),{shapeFlag:H}=k;P.length&&H&7&&(r&&P.some(zr)&&(w=Td(w,r)),k=Js(k,w,!1,!0))}return s.dirs&&(k=Js(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(s.dirs):s.dirs),s.transition&&ra(k,s.transition),$=k,ho(E),$}const Nd=e=>{let t;for(const s in e)(s==="class"||s==="style"||Io(s))&&((t||(t={}))[s]=e[s]);return t},Td=(e,t)=>{const s={};for(const n in e)(!zr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Od(e,t,s){const{props:n,children:o,component:r}=e,{props:a,children:i,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Ha(n,a,u):!!a;if(l&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const m=d[f];if(a[m]!==n[m]&&!Fo(u,m))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===a?!1:n?a?Ha(n,a,u):!0:!!a;return!1}function Ha(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Fo(s,r))return!0}return!1}function Ed({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Oi={},Ei=()=>Object.create(Oi),Ii=e=>Object.getPrototypeOf(e)===Oi;function Id(e,t,s,n=!1){const o={},r=Ei();e.propsDefaults=Object.create(null),Ri(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);s?e.props=n?o:ui(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Rd(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,i=be(o),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let m=d[f];if(Fo(e.emitsOptions,m))continue;const v=t[m];if(l)if(_e(r,m))v!==r[m]&&(r[m]=v,u=!0);else{const b=Ct(m);o[b]=$r(l,i,b,v,e,!1)}else v!==r[m]&&(r[m]=v,u=!0)}}}else{Ri(e,t,o,r)&&(u=!0);let d;for(const f in i)(!t||!_e(t,f)&&((d=us(f))===f||!_e(t,d)))&&(l?s&&(s[f]!==void 0||s[d]!==void 0)&&(o[f]=$r(l,i,f,void 0,e,!0)):delete o[f]);if(r!==i)for(const f in r)(!t||!_e(t,f))&&(delete r[f],u=!0)}u&&Vt(e.attrs,"set","")}function Ri(e,t,s,n){const[o,r]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(Cn(l))continue;const u=t[l];let d;o&&_e(o,d=Ct(l))?!r||!r.includes(d)?s[d]=u:(i||(i={}))[d]=u:Fo(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(r){const l=be(s),u=i||Ce;for(let d=0;d<r.length;d++){const f=r[d];s[f]=$r(o,l,f,u[f],e,!_e(u,f))}}return a}function $r(e,t,s,n,o,r){const a=e[s];if(a!=null){const i=_e(a,"default");if(i&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ue(l)){const{propsDefaults:u}=o;if(s in u)n=u[s];else{const d=Gn(o);n=u[s]=l.call(null,t),d()}}else n=l;o.ce&&o.ce._setProp(s,n)}a[0]&&(r&&!i?n=!1:a[1]&&(n===""||n===us(s))&&(n=!0))}return n}const Pd=new WeakMap;function Pi(e,t,s=!1){const n=s?Pd:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,a={},i=[];let l=!1;if(!ue(e)){const d=f=>{l=!0;const[m,v]=Pi(f,t,!0);qe(a,m),v&&i.push(...v)};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!l)return $e(e)&&n.set(e,js),js;if(le(r))for(let d=0;d<r.length;d++){const f=Ct(r[d]);Va(f)&&(a[f]=Ce)}else if(r)for(const d in r){const f=Ct(d);if(Va(f)){const m=r[d],v=a[f]=le(m)||ue(m)?{type:m}:qe({},m),b=v.type;let x=!1,E=!0;if(le(b))for(let $=0;$<b.length;++$){const w=b[$],k=ue(w)&&w.name;if(k==="Boolean"){x=!0;break}else k==="String"&&(E=!1)}else x=ue(b)&&b.name==="Boolean";v[0]=x,v[1]=E,(x||_e(v,"default"))&&i.push(f)}}const u=[a,i];return $e(e)&&n.set(e,u),u}function Va(e){return e[0]!=="$"&&!Cn(e)}const la=e=>e==="_"||e==="_ctx"||e==="$stable",ia=e=>le(e)?e.map(Lt):[Lt(e)],Dd=(e,t,s)=>{if(t._n)return t;const n=Yu((...o)=>ia(t(...o)),s);return n._c=!1,n},Di=(e,t,s)=>{const n=e._ctx;for(const o in e){if(la(o))continue;const r=e[o];if(ue(r))t[o]=Dd(o,r,n);else if(r!=null){const a=ia(r);t[o]=()=>a}}},Li=(e,t)=>{const s=ia(t);e.slots.default=()=>s},Bi=(e,t,s)=>{for(const n in t)(s||!la(n))&&(e[n]=t[n])},Ld=(e,t,s)=>{const n=e.slots=Ei();if(e.vnode.shapeFlag&32){const o=t._;o?(Bi(n,t,s),s&&Gl(n,"_",o,!0)):Di(t,n)}else t&&Li(e,t)},Bd=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,a=Ce;if(n.shapeFlag&32){const i=t._;i?s&&i===1?r=!1:Bi(o,t,s):(r=!t.$stable,Di(t,o)),a=t}else t&&(Li(e,t),a={default:1});if(r)for(const i in o)!la(i)&&a[i]==null&&delete o[i]},mt=Hd;function Ud(e){return Md(e)}function Md(e,t){const s=Lo();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:a,createText:i,createComment:l,setText:u,setElementText:d,parentNode:f,nextSibling:m,setScopeId:v=Bt,insertStaticContent:b}=e,x=(_,S,A,B=null,F=null,U=null,G=void 0,W=null,g=!!S.dynamicChildren)=>{if(_===S)return;_&&!dn(_,S)&&(B=M(_),ne(_,F,U,!0),_=null),S.patchFlag===-2&&(g=!1,S.dynamicChildren=null);const{type:y,ref:T,shapeFlag:O}=S;switch(y){case jo:E(_,S,A,B);break;case Qt:$(_,S,A,B);break;case co:_==null&&w(S,A,B,G);break;case Z:he(_,S,A,B,F,U,G,W,g);break;default:O&1?H(_,S,A,B,F,U,G,W,g):O&6?Re(_,S,A,B,F,U,G,W,g):(O&64||O&128)&&y.process(_,S,A,B,F,U,G,W,g,oe)}T!=null&&F?xn(T,_&&_.ref,U,S||_,!S):T==null&&_&&_.ref!=null&&xn(_.ref,null,U,_,!0)},E=(_,S,A,B)=>{if(_==null)n(S.el=i(S.children),A,B);else{const F=S.el=_.el;S.children!==_.children&&u(F,S.children)}},$=(_,S,A,B)=>{_==null?n(S.el=l(S.children||""),A,B):S.el=_.el},w=(_,S,A,B)=>{[_.el,_.anchor]=b(_.children,S,A,B,_.el,_.anchor)},k=({el:_,anchor:S},A,B)=>{let F;for(;_&&_!==S;)F=m(_),n(_,A,B),_=F;n(S,A,B)},P=({el:_,anchor:S})=>{let A;for(;_&&_!==S;)A=m(_),o(_),_=A;o(S)},H=(_,S,A,B,F,U,G,W,g)=>{if(S.type==="svg"?G="svg":S.type==="math"&&(G="mathml"),_==null)ee(S,A,B,F,U,G,W,g);else{const y=_.el&&_.el._isVueCE?_.el:null;try{y&&y._beginPatch(),Y(_,S,F,U,G,W,g)}finally{y&&y._endPatch()}}},ee=(_,S,A,B,F,U,G,W)=>{let g,y;const{props:T,shapeFlag:O,transition:D,dirs:V}=_;if(g=_.el=a(_.type,U,T&&T.is,T),O&8?d(g,_.children):O&16&&q(_.children,g,null,B,F,sr(_,U),G,W),V&&ms(_,null,B,"created"),j(g,_,_.scopeId,G,B),T){for(const re in T)re!=="value"&&!Cn(re)&&r(g,re,null,T[re],U,B);"value"in T&&r(g,"value",null,T.value,U),(y=T.onVnodeBeforeMount)&&Rt(y,B,_)}V&&ms(_,null,B,"beforeMount");const J=Fd(F,D);J&&D.beforeEnter(g),n(g,S,A),((y=T&&T.onVnodeMounted)||J||V)&&mt(()=>{y&&Rt(y,B,_),J&&D.enter(g),V&&ms(_,null,B,"mounted")},F)},j=(_,S,A,B,F)=>{if(A&&v(_,A),B)for(let U=0;U<B.length;U++)v(_,B[U]);if(F){let U=F.subTree;if(S===U||ji(U.type)&&(U.ssContent===S||U.ssFallback===S)){const G=F.vnode;j(_,G,G.scopeId,G.slotScopeIds,F.parent)}}},q=(_,S,A,B,F,U,G,W,g=0)=>{for(let y=g;y<_.length;y++){const T=_[y]=W?os(_[y]):Lt(_[y]);x(null,T,S,A,B,F,U,G,W)}},Y=(_,S,A,B,F,U,G)=>{const W=S.el=_.el;let{patchFlag:g,dynamicChildren:y,dirs:T}=S;g|=_.patchFlag&16;const O=_.props||Ce,D=S.props||Ce;let V;if(A&&vs(A,!1),(V=D.onVnodeBeforeUpdate)&&Rt(V,A,S,_),T&&ms(S,_,A,"beforeUpdate"),A&&vs(A,!0),(O.innerHTML&&D.innerHTML==null||O.textContent&&D.textContent==null)&&d(W,""),y?me(_.dynamicChildren,y,W,A,B,sr(S,F),U):G||se(_,S,W,null,A,B,sr(S,F),U,!1),g>0){if(g&16)fe(W,O,D,A,F);else if(g&2&&O.class!==D.class&&r(W,"class",null,D.class,F),g&4&&r(W,"style",O.style,D.style,F),g&8){const J=S.dynamicProps;for(let re=0;re<J.length;re++){const de=J[re],Te=O[de],Ae=D[de];(Ae!==Te||de==="value")&&r(W,de,Te,Ae,F,A)}}g&1&&_.children!==S.children&&d(W,S.children)}else!G&&y==null&&fe(W,O,D,A,F);((V=D.onVnodeUpdated)||T)&&mt(()=>{V&&Rt(V,A,S,_),T&&ms(S,_,A,"updated")},B)},me=(_,S,A,B,F,U,G)=>{for(let W=0;W<S.length;W++){const g=_[W],y=S[W],T=g.el&&(g.type===Z||!dn(g,y)||g.shapeFlag&198)?f(g.el):A;x(g,y,T,null,B,F,U,G,!0)}},fe=(_,S,A,B,F)=>{if(S!==A){if(S!==Ce)for(const U in S)!Cn(U)&&!(U in A)&&r(_,U,S[U],null,F,B);for(const U in A){if(Cn(U))continue;const G=A[U],W=S[U];G!==W&&U!=="value"&&r(_,U,W,G,F,B)}"value"in A&&r(_,"value",S.value,A.value,F)}},he=(_,S,A,B,F,U,G,W,g)=>{const y=S.el=_?_.el:i(""),T=S.anchor=_?_.anchor:i("");let{patchFlag:O,dynamicChildren:D,slotScopeIds:V}=S;V&&(W=W?W.concat(V):V),_==null?(n(y,A,B),n(T,A,B),q(S.children||[],A,T,F,U,G,W,g)):O>0&&O&64&&D&&_.dynamicChildren&&_.dynamicChildren.length===D.length?(me(_.dynamicChildren,D,A,F,U,G,W),(S.key!=null||F&&S===F.subTree)&&Ui(_,S,!0)):se(_,S,A,T,F,U,G,W,g)},Re=(_,S,A,B,F,U,G,W,g)=>{S.slotScopeIds=W,_==null?S.shapeFlag&512?F.ctx.activate(S,A,B,G,g):We(S,A,B,F,U,G,g):Ge(_,S,g)},We=(_,S,A,B,F,U,G)=>{const W=_.component=Yd(_,B,F);if(Si(_)&&(W.ctx.renderer=oe),Xd(W,!1,G),W.asyncDep){if(F&&F.registerDep(W,ge,G),!_.el){const g=W.subTree=ce(Qt);$(null,g,S,A),_.placeholder=g.el}}else ge(W,_,S,A,F,U,G)},Ge=(_,S,A)=>{const B=S.component=_.component;if(Od(_,S,A))if(B.asyncDep&&!B.asyncResolved){Q(B,S,A);return}else B.next=S,B.update();else S.el=_.el,B.vnode=S},ge=(_,S,A,B,F,U,G)=>{const W=()=>{if(_.isMounted){let{next:O,bu:D,u:V,parent:J,vnode:re}=_;{const Ze=Mi(_);if(Ze){O&&(O.el=re.el,Q(_,O,G)),Ze.asyncDep.then(()=>{_.isUnmounted||W()});return}}let de=O,Te;vs(_,!1),O?(O.el=re.el,Q(_,O,G)):O=re,D&&lo(D),(Te=O.props&&O.props.onVnodeBeforeUpdate)&&Rt(Te,J,O,re),vs(_,!0);const Ae=ja(_),ot=_.subTree;_.subTree=Ae,x(ot,Ae,f(ot.el),M(ot),_,F,U),O.el=Ae.el,de===null&&Ed(_,Ae.el),V&&mt(V,F),(Te=O.props&&O.props.onVnodeUpdated)&&mt(()=>Rt(Te,J,O,re),F)}else{let O;const{el:D,props:V}=S,{bm:J,m:re,parent:de,root:Te,type:Ae}=_,ot=Ks(S);vs(_,!1),J&&lo(J),!ot&&(O=V&&V.onVnodeBeforeMount)&&Rt(O,de,S),vs(_,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(Ae);const Ze=_.subTree=ja(_);x(null,Ze,A,B,_,F,U),S.el=Ze.el}if(re&&mt(re,F),!ot&&(O=V&&V.onVnodeMounted)){const Ze=S;mt(()=>Rt(O,de,Ze),F)}(S.shapeFlag&256||de&&Ks(de.vnode)&&de.vnode.shapeFlag&256)&&_.a&&mt(_.a,F),_.isMounted=!0,S=A=B=null}};_.scope.on();const g=_.effect=new ql(W);_.scope.off();const y=_.update=g.run.bind(g),T=_.job=g.runIfDirty.bind(g);T.i=_,T.id=_.uid,g.scheduler=()=>oa(T),vs(_,!0),y()},Q=(_,S,A)=>{S.component=_;const B=_.vnode.props;_.vnode=S,_.next=null,Rd(_,S.props,B,A),Bd(_,S.children,A),Yt(),Pa(_),qt()},se=(_,S,A,B,F,U,G,W,g=!1)=>{const y=_&&_.children,T=_?_.shapeFlag:0,O=S.children,{patchFlag:D,shapeFlag:V}=S;if(D>0){if(D&128){te(y,O,A,B,F,U,G,W,g);return}else if(D&256){we(y,O,A,B,F,U,G,W,g);return}}V&8?(T&16&&Qe(y,F,U),O!==y&&d(A,O)):T&16?V&16?te(y,O,A,B,F,U,G,W,g):Qe(y,F,U,!0):(T&8&&d(A,""),V&16&&q(O,A,B,F,U,G,W,g))},we=(_,S,A,B,F,U,G,W,g)=>{_=_||js,S=S||js;const y=_.length,T=S.length,O=Math.min(y,T);let D;for(D=0;D<O;D++){const V=S[D]=g?os(S[D]):Lt(S[D]);x(_[D],V,A,null,F,U,G,W,g)}y>T?Qe(_,F,U,!0,!1,O):q(S,A,B,F,U,G,W,g,O)},te=(_,S,A,B,F,U,G,W,g)=>{let y=0;const T=S.length;let O=_.length-1,D=T-1;for(;y<=O&&y<=D;){const V=_[y],J=S[y]=g?os(S[y]):Lt(S[y]);if(dn(V,J))x(V,J,A,null,F,U,G,W,g);else break;y++}for(;y<=O&&y<=D;){const V=_[O],J=S[D]=g?os(S[D]):Lt(S[D]);if(dn(V,J))x(V,J,A,null,F,U,G,W,g);else break;O--,D--}if(y>O){if(y<=D){const V=D+1,J=V<T?S[V].el:B;for(;y<=D;)x(null,S[y]=g?os(S[y]):Lt(S[y]),A,J,F,U,G,W,g),y++}}else if(y>D)for(;y<=O;)ne(_[y],F,U,!0),y++;else{const V=y,J=y,re=new Map;for(y=J;y<=D;y++){const Pe=S[y]=g?os(S[y]):Lt(S[y]);Pe.key!=null&&re.set(Pe.key,y)}let de,Te=0;const Ae=D-J+1;let ot=!1,Ze=0;const rt=new Array(Ae);for(y=0;y<Ae;y++)rt[y]=0;for(y=V;y<=O;y++){const Pe=_[y];if(Te>=Ae){ne(Pe,F,U,!0);continue}let Fe;if(Pe.key!=null)Fe=re.get(Pe.key);else for(de=J;de<=D;de++)if(rt[de-J]===0&&dn(Pe,S[de])){Fe=de;break}Fe===void 0?ne(Pe,F,U,!0):(rt[Fe-J]=y+1,Fe>=Ze?Ze=Fe:ot=!0,x(Pe,S[Fe],A,null,F,U,G,W,g),Te++)}const xt=ot?jd(rt):js;for(de=xt.length-1,y=Ae-1;y>=0;y--){const Pe=J+y,Fe=S[Pe],ln=S[Pe+1],Se=Pe+1<T?ln.el||Fi(ln):B;rt[y]===0?x(null,Fe,A,Se,F,U,G,W,g):ot&&(de<0||y!==xt[de]?K(Fe,A,Se,2):de--)}}},K=(_,S,A,B,F=null)=>{const{el:U,type:G,transition:W,children:g,shapeFlag:y}=_;if(y&6){K(_.component.subTree,S,A,B);return}if(y&128){_.suspense.move(S,A,B);return}if(y&64){G.move(_,S,A,oe);return}if(G===Z){n(U,S,A);for(let O=0;O<g.length;O++)K(g[O],S,A,B);n(_.anchor,S,A);return}if(G===co){k(_,S,A);return}if(B!==2&&y&1&&W)if(B===0)W.beforeEnter(U),n(U,S,A),mt(()=>W.enter(U),F);else{const{leave:O,delayLeave:D,afterLeave:V}=W,J=()=>{_.ctx.isUnmounted?o(U):n(U,S,A)},re=()=>{U._isLeaving&&U[td](!0),O(U,()=>{J(),V&&V()})};D?D(U,J,re):re()}else n(U,S,A)},ne=(_,S,A,B=!1,F=!1)=>{const{type:U,props:G,ref:W,children:g,dynamicChildren:y,shapeFlag:T,patchFlag:O,dirs:D,cacheIndex:V}=_;if(O===-2&&(F=!1),W!=null&&(Yt(),xn(W,null,A,_,!0),qt()),V!=null&&(S.renderCache[V]=void 0),T&256){S.ctx.deactivate(_);return}const J=T&1&&D,re=!Ks(_);let de;if(re&&(de=G&&G.onVnodeBeforeUnmount)&&Rt(de,S,_),T&6)yt(_.component,A,B);else{if(T&128){_.suspense.unmount(A,B);return}J&&ms(_,null,S,"beforeUnmount"),T&64?_.type.remove(_,S,A,oe,B):y&&!y.hasOnce&&(U!==Z||O>0&&O&64)?Qe(y,S,A,!1,!0):(U===Z&&O&384||!F&&T&16)&&Qe(g,S,A),B&&ze(_)}(re&&(de=G&&G.onVnodeUnmounted)||J)&&mt(()=>{de&&Rt(de,S,_),J&&ms(_,null,S,"unmounted")},A)},ze=_=>{const{type:S,el:A,anchor:B,transition:F}=_;if(S===Z){ct(A,B);return}if(S===co){P(_);return}const U=()=>{o(A),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(_.shapeFlag&1&&F&&!F.persisted){const{leave:G,delayLeave:W}=F,g=()=>G(A,U);W?W(_.el,U,g):g()}else U()},ct=(_,S)=>{let A;for(;_!==S;)A=m(_),o(_),_=A;o(S)},yt=(_,S,A)=>{const{bum:B,scope:F,job:U,subTree:G,um:W,m:g,a:y}=_;Ka(g),Ka(y),B&&lo(B),F.stop(),U&&(U.flags|=8,ne(G,_,S,A)),W&&mt(W,S),mt(()=>{_.isUnmounted=!0},S)},Qe=(_,S,A,B=!1,F=!1,U=0)=>{for(let G=U;G<_.length;G++)ne(_[G],S,A,B,F)},M=_=>{if(_.shapeFlag&6)return M(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const S=m(_.anchor||_.el),A=S&&S[Zu];return A?m(A):S};let X=!1;const z=(_,S,A)=>{let B;_==null?S._vnode&&(ne(S._vnode,null,null,!0),B=S._vnode.component):x(S._vnode||null,_,S,null,null,null,A),S._vnode=_,X||(X=!0,Pa(B),pi(),X=!1)},oe={p:x,um:ne,m:K,r:ze,mt:We,mc:q,pc:se,pbc:me,n:M,o:e};return{render:z,hydrate:void 0,createApp:$d(z)}}function sr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function vs({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Fd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ui(e,t,s=!1){const n=e.children,o=t.children;if(le(n)&&le(o))for(let r=0;r<n.length;r++){const a=n[r];let i=o[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[r]=os(o[r]),i.el=a.el),!s&&i.patchFlag!==-2&&Ui(a,i)),i.type===jo&&(i.patchFlag!==-1?i.el=a.el:i.__elIndex=r+(e.type===Z?1:0)),i.type===Qt&&!i.el&&(i.el=a.el)}}function jd(e){const t=e.slice(),s=[0];let n,o,r,a,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(o=s[s.length-1],e[o]<u){t[n]=o,s.push(n);continue}for(r=0,a=s.length-1;r<a;)i=r+a>>1,e[s[i]]<u?r=i+1:a=i;u<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,a=s[r-1];r-- >0;)s[r]=a,a=t[a];return s}function Mi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Mi(t)}function Ka(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Fi(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Fi(t.subTree):null}const ji=e=>e.__isSuspense;function Hd(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):Ju(e)}const Z=Symbol.for("v-fgt"),jo=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),co=Symbol.for("v-stc"),Nn=[];let ht=null;function p(e=!1){Nn.push(ht=e?null:[])}function Vd(){Nn.pop(),ht=Nn[Nn.length-1]||null}let Ln=1;function bo(e,t=!1){Ln+=e,e<0&&ht&&t&&(ht.hasOnce=!0)}function Hi(e){return e.dynamicChildren=Ln>0?ht||js:null,Vd(),Ln>0&&ht&&ht.push(e),e}function h(e,t,s,n,o,r){return Hi(c(e,t,s,n,o,r,!0))}function De(e,t,s,n,o){return Hi(ce(e,t,s,n,o,!0))}function Bn(e){return e?e.__v_isVNode===!0:!1}function dn(e,t){return e.type===t.type&&e.key===t.key}const Vi=({key:e})=>e??null,uo=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ue(e)||nt(e)||ue(e)?{i:Je,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,n=0,o=null,r=e===Z?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vi(t),ref:t&&uo(t),scopeId:gi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Je};return i?(ca(l,s),r&128&&e.normalize(l)):s&&(l.shapeFlag|=Ue(s)?8:16),Ln>0&&!a&&ht&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ht.push(l),l}const ce=Kd;function Kd(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===vd)&&(e=Qt),Bn(e)){const i=Js(e,t,!0);return s&&ca(i,s),Ln>0&&!r&&ht&&(i.shapeFlag&6?ht[ht.indexOf(e)]=i:ht.push(i)),i.patchFlag=-2,i}if(sf(e)&&(e=e.__vccOpts),t){t=Wd(t);let{class:i,style:l}=t;i&&!Ue(i)&&(t.class=ae(i)),$e(l)&&(na(l)&&!le(l)&&(l=qe({},l)),t.style=ds(l))}const a=Ue(e)?1:ji(e)?128:ed(e)?64:$e(e)?4:ue(e)?2:0;return c(e,t,s,n,o,a,r,!0)}function Wd(e){return e?na(e)||Ii(e)?qe({},e):e:null}function Js(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:a,children:i,transition:l}=e,u=t?Gd(o||{},t):o,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Vi(u),ref:t&&t.ref?s&&r?le(r)?r.concat(uo(t)):[r,uo(t)]:uo(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Z?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Js(e.ssContent),ssFallback:e.ssFallback&&Js(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&ra(d,l.clone(d)),d}function xs(e=" ",t=0){return ce(jo,null,e,t)}function _o(e,t){const s=ce(co,null,e);return s.staticCount=t,s}function L(e="",t=!1){return t?(p(),De(Qt,null,e)):ce(Qt,null,e)}function Lt(e){return e==null||typeof e=="boolean"?ce(Qt):le(e)?ce(Z,null,e.slice()):Bn(e)?os(e):ce(jo,null,String(e))}function os(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Js(e)}function ca(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(le(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),ca(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Ii(t)?t._ctx=Je:o===3&&Je&&(Je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:Je},s=32):(t=String(t),n&64?(s=16,t=[xs(t)]):s=8);e.children=t,e.shapeFlag|=s}function Gd(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ae([t.class,n.class]));else if(o==="style")t.style=ds([t.style,n.style]);else if(Io(o)){const r=t[o],a=n[o];a&&r!==a&&!(le(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=n[o])}return t}function Rt(e,t,s,n=null){Mt(e,t,7,[s,n])}const zd=Ni();let Jd=0;function Yd(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||zd,r={uid:Jd++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pi(n,o),emitsOptions:Ti(n,o),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:n.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=xd.bind(null,r),e.ce&&e.ce(r),r}let st=null;const qd=()=>st||Je;let wo,kr;{const e=Lo(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(a=>a(r)):o[0](r)}};wo=t("__VUE_INSTANCE_SETTERS__",s=>st=s),kr=t("__VUE_SSR_SETTERS__",s=>Un=s)}const Gn=e=>{const t=st;return wo(e),e.scope.on(),()=>{e.scope.off(),wo(t)}},Wa=()=>{st&&st.scope.off(),wo(null)};function Ki(e){return e.vnode.shapeFlag&4}let Un=!1;function Xd(e,t=!1,s=!1){t&&kr(t);const{props:n,children:o}=e.vnode,r=Ki(e);Id(e,n,r,t),Ld(e,o,s||t);const a=r?Qd(e,t):void 0;return t&&kr(!1),a}function Qd(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gd);const{setup:n}=s;if(n){Yt();const o=e.setupContext=n.length>1?ef(e):null,r=Gn(e),a=Wn(n,e,0,[e.props,o]),i=Vl(a);if(qt(),r(),(i||e.sp)&&!Ks(e)&&wi(e),i){if(a.then(Wa,Wa),t)return a.then(l=>{Ga(e,l)}).catch(l=>{Uo(l,e,0)});e.asyncDep=a}else Ga(e,a)}else Wi(e)}function Ga(e,t,s){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$e(t)&&(e.setupState=fi(t)),Wi(e)}function Wi(e,t,s){const n=e.type;e.render||(e.render=n.render||Bt);{const o=Gn(e);Yt();try{yd(e)}finally{qt(),o()}}}const Zd={get(e,t){return tt(e,"get",""),e[t]}};function ef(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Zd),slots:e.slots,emit:e.emit,expose:t}}function Ho(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(fi(Uu(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in An)return An[s](e)},has(t,s){return s in t||s in An}})):e.proxy}function tf(e,t=!0){return ue(e)?e.displayName||e.name:e.name||t&&e.__name}function sf(e){return ue(e)&&"__vccOpts"in e}const I=(e,t)=>Vu(e,t,Un);function Gi(e,t,s){try{bo(-1);const n=arguments.length;return n===2?$e(t)&&!le(t)?Bn(t)?ce(e,null,[t]):ce(e,t):ce(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Bn(s)&&(s=[s]),ce(e,t,s))}finally{bo(1)}}const nf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xr;const za=typeof window<"u"&&window.trustedTypes;if(za)try{xr=za.createPolicy("vue",{createHTML:e=>e})}catch{}const zi=xr?e=>xr.createHTML(e):e=>e,of="http://www.w3.org/2000/svg",rf="http://www.w3.org/1998/Math/MathML",Ht=typeof document<"u"?document:null,Ja=Ht&&Ht.createElement("template"),af={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Ht.createElementNS(of,e):t==="mathml"?Ht.createElementNS(rf,e):s?Ht.createElement(e,{is:s}):Ht.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Ht.createTextNode(e),createComment:e=>Ht.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ht.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const a=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Ja.innerHTML=zi(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Ja.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},lf=Symbol("_vtc");function cf(e,t,s){const n=e[lf];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Ya=Symbol("_vod"),uf=Symbol("_vsh"),df=Symbol(""),ff=/(?:^|;)\s*display\s*:/;function mf(e,t,s){const n=e.style,o=Ue(s);let r=!1;if(s&&!o){if(t)if(Ue(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();s[i]==null&&fo(n,i,"")}else for(const a in t)s[a]==null&&fo(n,a,"");for(const a in s)a==="display"&&(r=!0),fo(n,a,s[a])}else if(o){if(t!==s){const a=n[df];a&&(s+=";"+a),n.cssText=s,r=ff.test(s)}}else t&&e.removeAttribute("style");Ya in e&&(e[Ya]=r?n.display:"",e[uf]&&(n.display="none"))}const qa=/\s*!important$/;function fo(e,t,s){if(le(s))s.forEach(n=>fo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=vf(e,t);qa.test(s)?e.setProperty(us(n),s.replace(qa,""),"important"):e[n]=s}}const Xa=["Webkit","Moz","ms"],nr={};function vf(e,t){const s=nr[t];if(s)return s;let n=Ct(t);if(n!=="filter"&&n in e)return nr[t]=n;n=Po(n);for(let o=0;o<Xa.length;o++){const r=Xa[o]+n;if(r in e)return nr[t]=r}return t}const Qa="http://www.w3.org/1999/xlink";function Za(e,t,s,n,o,r=hu(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Qa,t.slice(6,t.length)):e.setAttributeNS(Qa,t,s):s==null||r&&!zl(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Ot(s)?String(s):s)}function el(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?zi(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(i!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let a=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=zl(s):s==null&&i==="string"?(s="",a=!0):i==="number"&&(s=0,a=!0)}try{e[t]=s}catch{}a&&e.removeAttribute(o||t)}function Wt(e,t,s,n){e.addEventListener(t,s,n)}function pf(e,t,s,n){e.removeEventListener(t,s,n)}const tl=Symbol("_vei");function hf(e,t,s,n,o=null){const r=e[tl]||(e[tl]={}),a=r[t];if(n&&a)a.value=n;else{const[i,l]=gf(t);if(n){const u=r[t]=_f(n,o);Wt(e,i,u,l)}else a&&(pf(e,i,a,l),r[t]=void 0)}}const sl=/(?:Once|Passive|Capture)$/;function gf(e){let t;if(sl.test(e)){t={};let n;for(;n=e.match(sl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):us(e.slice(2)),t]}let or=0;const yf=Promise.resolve(),bf=()=>or||(yf.then(()=>or=0),or=Date.now());function _f(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Mt(wf(n,s.value),t,5,[n])};return s.value=e,s.attached=bf(),s}function wf(e,t){if(le(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const nl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Sf=(e,t,s,n,o,r)=>{const a=o==="svg";t==="class"?cf(e,n,a):t==="style"?mf(e,s,n):Io(t)?zr(t)||hf(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Cf(e,t,n,a))?(el(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Za(e,t,n,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ue(n))?el(e,Ct(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Za(e,t,n,a))};function Cf(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&nl(t)&&ue(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return nl(t)&&Ue(s)?!1:t in e}const is=e=>{const t=e.props["onUpdate:modelValue"]||!1;return le(t)?s=>lo(t,s):t};function $f(e){e.target.composing=!0}function ol(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const St=Symbol("_assign");function rl(e,t,s){return t&&(e=e.trim()),s&&(e=Do(e)),e}const At={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[St]=is(o);const r=n||o.props&&o.props.type==="number";Wt(e,t?"change":"input",a=>{a.target.composing||e[St](rl(e.value,s,r))}),(s||r)&&Wt(e,"change",()=>{e.value=rl(e.value,s,r)}),t||(Wt(e,"compositionstart",$f),Wt(e,"compositionend",ol),Wt(e,"change",ol))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},a){if(e[St]=is(a),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?Do(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===l)||(e.value=l))}},ua={deep:!0,created(e,t,s){e[St]=is(s),Wt(e,"change",()=>{const n=e._modelValue,o=Ys(e),r=e.checked,a=e[St];if(le(n)){const i=qr(n,o),l=i!==-1;if(r&&!l)a(n.concat(o));else if(!r&&l){const u=[...n];u.splice(i,1),a(u)}}else if(on(n)){const i=new Set(n);r?i.add(o):i.delete(o),a(i)}else a(Ji(e,r))})},mounted:al,beforeUpdate(e,t,s){e[St]=is(s),al(e,t,s)}};function al(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(le(t))o=qr(t,n.props.value)>-1;else if(on(t))o=t.has(n.props.value);else{if(t===s)return;o=ks(t,Ji(e,!0))}e.checked!==o&&(e.checked=o)}const ll={created(e,{value:t},s){e.checked=ks(t,s.props.value),e[St]=is(s),Wt(e,"change",()=>{e[St](Ys(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[St]=is(n),t!==s&&(e.checked=ks(t,n.props.value))}},Tn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=on(t);Wt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>s?Do(Ys(a)):Ys(a));e[St](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Pn(()=>{e._assigning=!1})}),e[St]=is(n)},mounted(e,{value:t}){il(e,t)},beforeUpdate(e,t,s){e[St]=is(s)},updated(e,{value:t}){e._assigning||il(e,t)}};function il(e,t){const s=e.multiple,n=le(t);if(!(s&&!n&&!on(t))){for(let o=0,r=e.options.length;o<r;o++){const a=e.options[o],i=Ys(a);if(s)if(n){const l=typeof i;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(i)):a.selected=qr(t,i)>-1}else a.selected=t.has(i);else if(ks(Ys(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ys(e){return"_value"in e?e._value:e.value}function Ji(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const kf=["ctrl","shift","alt","meta"],xf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>kf.some(s=>e[`${s}Key`]&&!t.includes(s))},Zt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let a=0;a<t.length;a++){const i=xf[t[a]];if(i&&i(o,t))return}return e(o,...r)})},Af={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},da=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const r=us(o.key);if(t.some(a=>a===r||Af[a]===r))return e(o)})},Nf=qe({patchProp:Sf},af);let cl;function Tf(){return cl||(cl=Ud(Nf))}const Of=(...e)=>{const t=Tf().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=If(n);if(!o)return;const r=t._component;!ue(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=s(o,!1,Ef(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function Ef(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function If(e){return Ue(e)?document.querySelector(e):e}const pe=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Rf={};function Pf(e,t){const s=md("router-view");return p(),De(s)}const Df=pe(Rf,[["render",Pf]]),Lf="modulepreload",Bf=function(e){return"/"+e},ul={},Uf=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(s.map(l=>{if(l=Bf(l),l in ul)return;ul[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Lf,u||(f.as="script"),f.crossOrigin="",f.href=l,i&&f.setAttribute("nonce",i),document.head.appendChild(f),u)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&r(i.reason);return t().catch(r)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Ds=typeof document<"u";function Yi(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Mf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Yi(e.default)}const ye=Object.assign;function rr(e,t){const s={};for(const n in t){const o=t[n];s[n]=It(o)?o.map(e):e(o)}return s}const On=()=>{},It=Array.isArray;function dl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const qi=/#/g,Ff=/&/g,jf=/\//g,Hf=/=/g,Vf=/\?/g,Xi=/\+/g,Kf=/%5B/g,Wf=/%5D/g,Qi=/%5E/g,Gf=/%60/g,Zi=/%7B/g,zf=/%7C/g,ec=/%7D/g,Jf=/%20/g;function fa(e){return e==null?"":encodeURI(""+e).replace(zf,"|").replace(Kf,"[").replace(Wf,"]")}function Yf(e){return fa(e).replace(Zi,"{").replace(ec,"}").replace(Qi,"^")}function Ar(e){return fa(e).replace(Xi,"%2B").replace(Jf,"+").replace(qi,"%23").replace(Ff,"%26").replace(Gf,"`").replace(Zi,"{").replace(ec,"}").replace(Qi,"^")}function qf(e){return Ar(e).replace(Hf,"%3D")}function Xf(e){return fa(e).replace(qi,"%23").replace(Vf,"%3F")}function Qf(e){return Xf(e).replace(jf,"%2F")}function Mn(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Zf=/\/$/,em=e=>e.replace(Zf,"");function ar(e,t,s="/"){let n,o={},r="",a="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(n=t.slice(0,l),r=t.slice(l,i>0?i:t.length),o=e(r.slice(1))),i>=0&&(n=n||t.slice(0,i),a=t.slice(i,t.length)),n=om(n??t,s),{fullPath:n+r+a,path:n,query:o,hash:Mn(a)}}function tm(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function fl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function sm(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&qs(t.matched[n],s.matched[o])&&tc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function qs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function tc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!nm(e[s],t[s]))return!1;return!0}function nm(e,t){return It(e)?ml(e,t):It(t)?ml(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function ml(e,t){return It(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function om(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let r=s.length-1,a,i;for(a=0;a<n.length;a++)if(i=n[a],i!==".")if(i==="..")r>1&&r--;else break;return s.slice(0,r).join("/")+"/"+n.slice(a).join("/")}const ts={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Nr=function(e){return e.pop="pop",e.push="push",e}({}),lr=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function rm(e){if(!e)if(Ds){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),em(e)}const am=/^[^#]+#/;function lm(e,t){return e.replace(am,"#")+t}function im(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const Vo=()=>({left:window.scrollX,top:window.scrollY});function cm(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=im(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function vl(e,t){return(history.state?history.state.position-t:-1)+e}const Tr=new Map;function um(e,t){Tr.set(e,t)}function dm(e){const t=Tr.get(e);return Tr.delete(e),t}function fm(e){return typeof e=="string"||e&&typeof e=="object"}function sc(e){return typeof e=="string"||typeof e=="symbol"}let Ee=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const nc=Symbol("");Ee.MATCHER_NOT_FOUND+"",Ee.NAVIGATION_GUARD_REDIRECT+"",Ee.NAVIGATION_ABORTED+"",Ee.NAVIGATION_CANCELLED+"",Ee.NAVIGATION_DUPLICATED+"";function Xs(e,t){return ye(new Error,{type:e,[nc]:!0},t)}function jt(e,t){return e instanceof Error&&nc in e&&(t==null||!!(e.type&t))}const mm=["params","query","hash"];function vm(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of mm)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function pm(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Xi," "),r=o.indexOf("="),a=Mn(r<0?o:o.slice(0,r)),i=r<0?null:Mn(o.slice(r+1));if(a in t){let l=t[a];It(l)||(l=t[a]=[l]),l.push(i)}else t[a]=i}return t}function pl(e){let t="";for(let s in e){const n=e[s];if(s=qf(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(It(n)?n.map(o=>o&&Ar(o)):[n&&Ar(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function hm(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=It(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const gm=Symbol(""),hl=Symbol(""),Ko=Symbol(""),ma=Symbol(""),Or=Symbol("");function fn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function rs(e,t,s,n,o,r=a=>a()){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,l)=>{const u=m=>{m===!1?l(Xs(Ee.NAVIGATION_ABORTED,{from:s,to:t})):m instanceof Error?l(m):fm(m)?l(Xs(Ee.NAVIGATION_GUARD_REDIRECT,{from:t,to:m})):(a&&n.enterCallbacks[o]===a&&typeof m=="function"&&a.push(m),i())},d=r(()=>e.call(n&&n.instances[o],t,s,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(m=>l(m))})}function ir(e,t,s,n,o=r=>r()){const r=[];for(const a of e)for(const i in a.components){let l=a.components[i];if(!(t!=="beforeRouteEnter"&&!a.instances[i]))if(Yi(l)){const u=(l.__vccOpts||l)[t];u&&r.push(rs(u,s,n,a,i,o))}else{let u=l();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const f=Mf(d)?d.default:d;a.mods[i]=d,a.components[i]=f;const m=(f.__vccOpts||f)[t];return m&&rs(m,s,n,a,i,o)()}))}}return r}function ym(e,t){const s=[],n=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(u=>qs(u,i))?n.push(i):s.push(i));const l=e.matched[a];l&&(t.matched.find(u=>qs(u,l))||o.push(l))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let bm=()=>location.protocol+"//"+location.host;function oc(e,t){const{pathname:s,search:n,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,i=o.slice(a);return i[0]!=="/"&&(i="/"+i),fl(i,"")}return fl(s,e)+n+o}function _m(e,t,s,n){let o=[],r=[],a=null;const i=({state:m})=>{const v=oc(e,location),b=s.value,x=t.value;let E=0;if(m){if(s.value=v,t.value=m,a&&a===b){a=null;return}E=x?m.position-x.position:0}else n(v);o.forEach($=>{$(s.value,b,{delta:E,type:Nr.pop,direction:E?E>0?lr.forward:lr.back:lr.unknown})})};function l(){a=s.value}function u(m){o.push(m);const v=()=>{const b=o.indexOf(m);b>-1&&o.splice(b,1)};return r.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(ye({},m.state,{scroll:Vo()}),"")}}function f(){for(const m of r)m();r=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:f}}function gl(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?Vo():null}}function wm(e){const{history:t,location:s}=window,n={value:oc(e,s)},o={value:t.state};o.value||r(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,d){const f=e.indexOf("#"),m=f>-1?(s.host&&document.querySelector("base")?e:e.slice(f))+l:bm()+e+l;try{t[d?"replaceState":"pushState"](u,"",m),o.value=u}catch(v){console.error(v),s[d?"replace":"assign"](m)}}function a(l,u){r(l,ye({},t.state,gl(o.value.back,l,o.value.forward,!0),u,{position:o.value.position}),!0),n.value=l}function i(l,u){const d=ye({},o.value,t.state,{forward:l,scroll:Vo()});r(d.current,d,!0),r(l,ye({},gl(n.value,l,null),{position:d.position+1},u),!1),n.value=l}return{location:n,state:o,push:i,replace:a}}function Sm(e){e=rm(e);const t=wm(e),s=_m(e,t.state,t.location,t.replace);function n(r,a=!0){a||s.pauseListeners(),history.go(r)}const o=ye({location:"",base:e,go:n,createHref:lm.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Cm(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Sm(e)}let ws=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var He=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(He||{});const $m={type:ws.Static,value:""},km=/[a-zA-Z0-9_]/;function xm(e){if(!e)return[[]];if(e==="/")return[[$m]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${s})/"${u}": ${v}`)}let s=He.Static,n=s;const o=[];let r;function a(){r&&o.push(r),r=[]}let i=0,l,u="",d="";function f(){u&&(s===He.Static?r.push({type:ws.Static,value:u}):s===He.Param||s===He.ParamRegExp||s===He.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:ws.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&s!==He.ParamRegExp){n=s,s=He.EscapeNext;continue}switch(s){case He.Static:l==="/"?(u&&f(),a()):l===":"?(f(),s=He.Param):m();break;case He.EscapeNext:m(),s=n;break;case He.Param:l==="("?s=He.ParamRegExp:km.test(l)?m():(f(),s=He.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case He.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:s=He.ParamRegExpEnd:d+=l;break;case He.ParamRegExpEnd:f(),s=He.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,d="";break;default:t("Unknown state");break}}return s===He.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),o}const yl="[^/]+?",Am={sensitive:!1,strict:!1,start:!0,end:!0};var lt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(lt||{});const Nm=/[.+*?^${}()[\]/\\]/g;function Tm(e,t){const s=ye({},Am,t),n=[];let o=s.start?"^":"";const r=[];for(const u of e){const d=u.length?[]:[lt.Root];s.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const m=u[f];let v=lt.Segment+(s.sensitive?lt.BonusCaseSensitive:0);if(m.type===ws.Static)f||(o+="/"),o+=m.value.replace(Nm,"\\$&"),v+=lt.Static;else if(m.type===ws.Param){const{value:b,repeatable:x,optional:E,regexp:$}=m;r.push({name:b,repeatable:x,optional:E});const w=$||yl;if(w!==yl){v+=lt.BonusCustomRegExp;try{`${w}`}catch(P){throw new Error(`Invalid custom RegExp for param "${b}" (${w}): `+P.message)}}let k=x?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;f||(k=E&&u.length<2?`(?:/${k})`:"/"+k),E&&(k+="?"),o+=k,v+=lt.Dynamic,E&&(v+=lt.BonusOptional),x&&(v+=lt.BonusRepeatable),w===".*"&&(v+=lt.BonusWildcard)}d.push(v)}n.push(d)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=lt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,s.sensitive?"":"i");function i(u){const d=u.match(a),f={};if(!d)return null;for(let m=1;m<d.length;m++){const v=d[m]||"",b=r[m-1];f[b.name]=v&&b.repeatable?v.split("/"):v}return f}function l(u){let d="",f=!1;for(const m of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of m)if(v.type===ws.Static)d+=v.value;else if(v.type===ws.Param){const{value:b,repeatable:x,optional:E}=v,$=b in u?u[b]:"";if(It($)&&!x)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const w=It($)?$.join("/"):$;if(!w)if(E)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);d+=w}}return d||"/"}return{re:a,score:n,keys:r,parse:i,stringify:l}}function Om(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===lt.Static+lt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===lt.Static+lt.Segment?1:-1:0}function rc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const r=Om(n[s],o[s]);if(r)return r;s++}if(Math.abs(o.length-n.length)===1){if(bl(n))return 1;if(bl(o))return-1}return o.length-n.length}function bl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Em={strict:!1,end:!0,sensitive:!1};function Im(e,t,s){const n=Tm(xm(e.path),s),o=ye(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Rm(e,t){const s=[],n=new Map;t=dl(Em,t);function o(f){return n.get(f)}function r(f,m,v){const b=!v,x=wl(f);x.aliasOf=v&&v.record;const E=dl(t,f),$=[x];if("alias"in f){const P=typeof f.alias=="string"?[f.alias]:f.alias;for(const H of P)$.push(wl(ye({},x,{components:v?v.record.components:x.components,path:H,aliasOf:v?v.record:x})))}let w,k;for(const P of $){const{path:H}=P;if(m&&H[0]!=="/"){const ee=m.record.path,j=ee[ee.length-1]==="/"?"":"/";P.path=m.record.path+(H&&j+H)}if(w=Im(P,m,E),v?v.alias.push(w):(k=k||w,k!==w&&k.alias.push(w),b&&f.name&&!Sl(w)&&a(f.name)),ac(w)&&l(w),x.children){const ee=x.children;for(let j=0;j<ee.length;j++)r(ee[j],w,v&&v.children[j])}v=v||w}return k?()=>{a(k)}:On}function a(f){if(sc(f)){const m=n.get(f);m&&(n.delete(f),s.splice(s.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=s.indexOf(f);m>-1&&(s.splice(m,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function i(){return s}function l(f){const m=Lm(f,s);s.splice(m,0,f),f.record.name&&!Sl(f)&&n.set(f.record.name,f)}function u(f,m){let v,b={},x,E;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw Xs(Ee.MATCHER_NOT_FOUND,{location:f});E=v.record.name,b=ye(_l(m.params,v.keys.filter(k=>!k.optional).concat(v.parent?v.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),f.params&&_l(f.params,v.keys.map(k=>k.name))),x=v.stringify(b)}else if(f.path!=null)x=f.path,v=s.find(k=>k.re.test(x)),v&&(b=v.parse(x),E=v.record.name);else{if(v=m.name?n.get(m.name):s.find(k=>k.re.test(m.path)),!v)throw Xs(Ee.MATCHER_NOT_FOUND,{location:f,currentLocation:m});E=v.record.name,b=ye({},m.params,f.params),x=v.stringify(b)}const $=[];let w=v;for(;w;)$.unshift(w.record),w=w.parent;return{name:E,path:x,params:b,matched:$,meta:Dm($)}}e.forEach(f=>r(f));function d(){s.length=0,n.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:d,getRoutes:i,getRecordMatcher:o}}function _l(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function wl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Pm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Pm(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Sl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Dm(e){return e.reduce((t,s)=>ye(t,s.meta),{})}function Lm(e,t){let s=0,n=t.length;for(;s!==n;){const r=s+n>>1;rc(e,t[r])<0?n=r:s=r+1}const o=Bm(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Bm(e){let t=e;for(;t=t.parent;)if(ac(t)&&rc(e,t)===0)return t}function ac({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Cl(e){const t=Tt(Ko),s=Tt(ma),n=I(()=>{const l=R(e.to);return t.resolve(l)}),o=I(()=>{const{matched:l}=n.value,{length:u}=l,d=l[u-1],f=s.matched;if(!d||!f.length)return-1;const m=f.findIndex(qs.bind(null,d));if(m>-1)return m;const v=$l(l[u-2]);return u>1&&$l(d)===v&&f[f.length-1].path!==v?f.findIndex(qs.bind(null,l[u-2])):m}),r=I(()=>o.value>-1&&Hm(s.params,n.value.params)),a=I(()=>o.value>-1&&o.value===s.matched.length-1&&tc(s.params,n.value.params));function i(l={}){if(jm(l)){const u=t[R(e.replace)?"replace":"push"](R(e.to)).catch(On);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:I(()=>n.value.href),isActive:r,isExactActive:a,navigate:i}}function Um(e){return e.length===1?e[0]:e}const Mm=_i({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Cl,setup(e,{slots:t}){const s=Ut(Cl(e)),{options:n}=Tt(Ko),o=I(()=>({[kl(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[kl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const r=t.default&&Um(t.default(s));return e.custom?r:Gi("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},r)}}}),Fm=Mm;function jm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Hm(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!It(o)||o.length!==n.length||n.some((r,a)=>r.valueOf()!==o[a].valueOf()))return!1}return!0}function $l(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const kl=(e,t,s)=>e??t??s,Vm=_i({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Tt(Or),o=I(()=>e.route||n.value),r=Tt(hl,0),a=I(()=>{let u=R(r);const{matched:d}=o.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),i=I(()=>o.value.matched[a.value]);io(hl,I(()=>a.value+1)),io(gm,i),io(Or,o);const l=N();return ft(()=>[l.value,i.value,e.name],([u,d,f],[m,v,b])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===m&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!qs(d,v)||!m)&&(d.enterCallbacks[f]||[]).forEach(x=>x(u))},{flush:"post"}),()=>{const u=o.value,d=e.name,f=i.value,m=f&&f.components[d];if(!m)return xl(s.default,{Component:m,route:u});const v=f.props[d],b=v?v===!0?u.params:typeof v=="function"?v(u):v:null,E=Gi(m,ye({},b,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(f.instances[d]=null)},ref:l}));return xl(s.default,{Component:E,route:u})||E}}});function xl(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Km=Vm;function Wm(e){const t=Rm(e.routes,e),s=e.parseQuery||pm,n=e.stringifyQuery||pl,o=e.history,r=fn(),a=fn(),i=fn(),l=Mu(ts);let u=ts;Ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=rr.bind(null,M=>""+M),f=rr.bind(null,Qf),m=rr.bind(null,Mn);function v(M,X){let z,oe;return sc(M)?(z=t.getRecordMatcher(M),oe=X):oe=M,t.addRoute(oe,z)}function b(M){const X=t.getRecordMatcher(M);X&&t.removeRoute(X)}function x(){return t.getRoutes().map(M=>M.record)}function E(M){return!!t.getRecordMatcher(M)}function $(M,X){if(X=ye({},X||l.value),typeof M=="string"){const A=ar(s,M,X.path),B=t.resolve({path:A.path},X),F=o.createHref(A.fullPath);return ye(A,B,{params:m(B.params),hash:Mn(A.hash),redirectedFrom:void 0,href:F})}let z;if(M.path!=null)z=ye({},M,{path:ar(s,M.path,X.path).path});else{const A=ye({},M.params);for(const B in A)A[B]==null&&delete A[B];z=ye({},M,{params:f(A)}),X.params=f(X.params)}const oe=t.resolve(z,X),ve=M.hash||"";oe.params=d(m(oe.params));const _=tm(n,ye({},M,{hash:Yf(ve),path:oe.path})),S=o.createHref(_);return ye({fullPath:_,hash:ve,query:n===pl?hm(M.query):M.query||{}},oe,{redirectedFrom:void 0,href:S})}function w(M){return typeof M=="string"?ar(s,M,l.value.path):ye({},M)}function k(M,X){if(u!==M)return Xs(Ee.NAVIGATION_CANCELLED,{from:X,to:M})}function P(M){return j(M)}function H(M){return P(ye(w(M),{replace:!0}))}function ee(M,X){const z=M.matched[M.matched.length-1];if(z&&z.redirect){const{redirect:oe}=z;let ve=typeof oe=="function"?oe(M,X):oe;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=w(ve):{path:ve},ve.params={}),ye({query:M.query,hash:M.hash,params:ve.path!=null?{}:M.params},ve)}}function j(M,X){const z=u=$(M),oe=l.value,ve=M.state,_=M.force,S=M.replace===!0,A=ee(z,oe);if(A)return j(ye(w(A),{state:typeof A=="object"?ye({},ve,A.state):ve,force:_,replace:S}),X||z);const B=z;B.redirectedFrom=X;let F;return!_&&sm(n,oe,z)&&(F=Xs(Ee.NAVIGATION_DUPLICATED,{to:B,from:oe}),K(oe,oe,!0,!1)),(F?Promise.resolve(F):me(B,oe)).catch(U=>jt(U)?jt(U,Ee.NAVIGATION_GUARD_REDIRECT)?U:te(U):se(U,B,oe)).then(U=>{if(U){if(jt(U,Ee.NAVIGATION_GUARD_REDIRECT))return j(ye({replace:S},w(U.to),{state:typeof U.to=="object"?ye({},ve,U.to.state):ve,force:_}),X||B)}else U=he(B,oe,!0,S,ve);return fe(B,oe,U),U})}function q(M,X){const z=k(M,X);return z?Promise.reject(z):Promise.resolve()}function Y(M){const X=ct.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(M):M()}function me(M,X){let z;const[oe,ve,_]=ym(M,X);z=ir(oe.reverse(),"beforeRouteLeave",M,X);for(const A of oe)A.leaveGuards.forEach(B=>{z.push(rs(B,M,X))});const S=q.bind(null,M,X);return z.push(S),Qe(z).then(()=>{z=[];for(const A of r.list())z.push(rs(A,M,X));return z.push(S),Qe(z)}).then(()=>{z=ir(ve,"beforeRouteUpdate",M,X);for(const A of ve)A.updateGuards.forEach(B=>{z.push(rs(B,M,X))});return z.push(S),Qe(z)}).then(()=>{z=[];for(const A of _)if(A.beforeEnter)if(It(A.beforeEnter))for(const B of A.beforeEnter)z.push(rs(B,M,X));else z.push(rs(A.beforeEnter,M,X));return z.push(S),Qe(z)}).then(()=>(M.matched.forEach(A=>A.enterCallbacks={}),z=ir(_,"beforeRouteEnter",M,X,Y),z.push(S),Qe(z))).then(()=>{z=[];for(const A of a.list())z.push(rs(A,M,X));return z.push(S),Qe(z)}).catch(A=>jt(A,Ee.NAVIGATION_CANCELLED)?A:Promise.reject(A))}function fe(M,X,z){i.list().forEach(oe=>Y(()=>oe(M,X,z)))}function he(M,X,z,oe,ve){const _=k(M,X);if(_)return _;const S=X===ts,A=Ds?history.state:{};z&&(oe||S?o.replace(M.fullPath,ye({scroll:S&&A&&A.scroll},ve)):o.push(M.fullPath,ve)),l.value=M,K(M,X,z,S),te()}let Re;function We(){Re||(Re=o.listen((M,X,z)=>{if(!yt.listening)return;const oe=$(M),ve=ee(oe,yt.currentRoute.value);if(ve){j(ye(ve,{replace:!0,force:!0}),oe).catch(On);return}u=oe;const _=l.value;Ds&&um(vl(_.fullPath,z.delta),Vo()),me(oe,_).catch(S=>jt(S,Ee.NAVIGATION_ABORTED|Ee.NAVIGATION_CANCELLED)?S:jt(S,Ee.NAVIGATION_GUARD_REDIRECT)?(j(ye(w(S.to),{force:!0}),oe).then(A=>{jt(A,Ee.NAVIGATION_ABORTED|Ee.NAVIGATION_DUPLICATED)&&!z.delta&&z.type===Nr.pop&&o.go(-1,!1)}).catch(On),Promise.reject()):(z.delta&&o.go(-z.delta,!1),se(S,oe,_))).then(S=>{S=S||he(oe,_,!1),S&&(z.delta&&!jt(S,Ee.NAVIGATION_CANCELLED)?o.go(-z.delta,!1):z.type===Nr.pop&&jt(S,Ee.NAVIGATION_ABORTED|Ee.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),fe(oe,_,S)}).catch(On)}))}let Ge=fn(),ge=fn(),Q;function se(M,X,z){te(M);const oe=ge.list();return oe.length?oe.forEach(ve=>ve(M,X,z)):console.error(M),Promise.reject(M)}function we(){return Q&&l.value!==ts?Promise.resolve():new Promise((M,X)=>{Ge.add([M,X])})}function te(M){return Q||(Q=!M,We(),Ge.list().forEach(([X,z])=>M?z(M):X()),Ge.reset()),M}function K(M,X,z,oe){const{scrollBehavior:ve}=e;if(!Ds||!ve)return Promise.resolve();const _=!z&&dm(vl(M.fullPath,0))||(oe||!z)&&history.state&&history.state.scroll||null;return Pn().then(()=>ve(M,X,_)).then(S=>S&&cm(S)).catch(S=>se(S,M,X))}const ne=M=>o.go(M);let ze;const ct=new Set,yt={currentRoute:l,listening:!0,addRoute:v,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:x,resolve:$,options:e,push:P,replace:H,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:ge.add,isReady:we,install(M){M.component("RouterLink",Fm),M.component("RouterView",Km),M.config.globalProperties.$router=yt,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>R(l)}),Ds&&!ze&&l.value===ts&&(ze=!0,P(o.location).catch(oe=>{}));const X={};for(const oe in ts)Object.defineProperty(X,oe,{get:()=>l.value[oe],enumerable:!0});M.provide(Ko,yt),M.provide(ma,ui(X)),M.provide(Or,l);const z=M.unmount;ct.add(M),M.unmount=function(){ct.delete(M),ct.size<1&&(u=ts,Re&&Re(),Re=null,l.value=ts,ze=!1,Q=!1),z()}}};function Qe(M){return M.reduce((X,z)=>X.then(()=>Y(z)),Promise.resolve())}return yt}function Gm(){return Tt(Ko)}function ik(e){return Tt(ma)}function Al(e){const t=[],s=e.split(`
`);let n=null,o=[],r=!1,a="";for(let i=0;i<s.length;i++){const l=s[i];if(l.startsWith("%"))continue;if(r){l.includes("}")?(a+=l.substring(0,l.indexOf("}")),o.push(a.trim()),a="",r=!1):a+=l+`
`;continue}if(l.includes("{")){const f=l.indexOf("{");if(l.includes("}")){const m=l.indexOf("}");o.push(l.substring(f+1,m).trim())}else a=l.substring(f+1)+`
`,r=!0;continue}const u=l.match(/\[Play\s+"([NESW])"\](\w+)/);if(u&&n){n.openingLeader=u[1],n.openingLead=u[2];continue}const d=l.match(/\[(\w+)\s+"([^"]*)"\]/);if(d){const[,f,m]=d;if(f==="Board")n&&(n.commentary=Ol(o),n.steps=Nl(o),n.auction=Tl(n.auction),t.push(n)),n=zm(),n.boardNumber=parseInt(m,10),o=[];else if(n)switch(f){case"Dealer":n.dealer=m;break;case"Vulnerable":n.vulnerable=m;break;case"Contract":n.contract=m;break;case"Declarer":n.declarer=m;break;case"Student":n.studentSeat=m;break;case"Deal":n.hands=Jm(m);break;case"Auction":n.auctionDealer=m;break;case"Result":n.result=m;break;case"Event":n.event=m;break;case"SkillPath":n.skillPath=m;break;case"Category":n.category=m;break;case"Difficulty":n.difficulty=m;break}continue}if(n&&n.auctionDealer){const f=l.trim();if(f&&!f.startsWith("[")&&!f.startsWith("{")){const m=qm(f);n.auction.push(...m)}}}return n&&(n.commentary=Ol(o),n.steps=Nl(o),n.auction=Tl(n.auction),t.push(n)),t}function Nl(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let r="";for(let a=0;a<n.length;a++){const i=n[a],l=i.match(/^\[BID\s+([^\]]+)\]$/i),u=/^\[NEXT\]$/i.test(i),d=/^\[ROTATE\]$/i.test(i),f=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(l){const m=va(l[1]).replace(/!/g,"").trim(),v=r.trim();r="";let b="";if(a+1<n.length){const $=n[a+1];$.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(b=$.trim(),a++)}const x=mn(v,"bid"),E=mn(b,"bid");o.push({...x,type:"bid",bid:m,explanationText:E.text,showSeatsAfter:E.showSeats})}else if(u||d){const m=u?"next":"rotate";r.trim()&&o.push(mn(r.trim(),m)),r=""}else if(f){const m=f[1].trim();let v;if(m.toLowerCase().startsWith("any:")?v={cards:m.substring(4).split(",").map(x=>So(x.trim())),anyOf:!0}:v={card:So(m)},r.trim()){const b=mn(r.trim(),"choose-card");b.chooseCard=v,o.push(b)}r=""}else r+=i}if(r.trim()){const a=mn(r.trim(),"end");o.push(a)}return o}function mn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const w=n[1].toUpperCase().trim();if(w==="ALL")s=["N","E","S","W"];else{const k=[];w.includes("N")&&k.push("N"),w.includes("E")&&k.push("E"),w.includes("S")&&k.push("S"),w.includes("W")&&k.push("W"),k.length>0&&(s=k)}}const o=[],r=/\[PLAY\s+([^\]]+)\]/gi;let a;for(;(a=r.exec(e))!==null;)o.push(a[1]);const i=/\[RESET\]/i.test(e);let l=null;const u=e.match(/\[choose-card\s+([^\]]+)\]/i);if(u){const w=u[1].trim();w.toLowerCase().startsWith("any:")?l={cards:w.substring(4).split(",").map(P=>So(P.trim())),anyOf:!0}:l={card:So(w)}}let d=null;const f=/\[AUCTION\s+off\]/i.test(e),m=/\[AUCTION\s+on\]/i.test(e);f&&(d=!1),m&&(d=!0);const v=/\[SHOW_LEAD\]/i.test(e),b=/\[clear-commentary\]/i.test(e);let x=null;const E=e.match(/\[showcards\s+([^\]]+)\]/i);if(E){const w=E[1].trim();x={};const k=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let P;for(;(P=k.exec(w))!==null;){const H=P[1].toUpperCase(),ee=P[2].split(",").map(j=>j.trim().toUpperCase());x[H]=ee}Object.keys(x).length===0&&(x=null)}let $=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:va($),type:t,showSeats:s,plays:o,reset:i,showAuction:d,showLead:v,clearCommentary:b,showcards:x,chooseCard:l}}function zm(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function So(e){return e.toUpperCase().replace("10","T")}function Jm(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const r=s[0],a=r.indexOf(":");if(a!==-1){const i=r.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=r.substring(a+1)}for(let i=0;i<4;i++){const l=(o+i)%4,u=n[l];t[u]=Ym(s[i])}return t}function Ym(e){const t=e.split(".");return t.length!==4?null:{spades:no(t[0]),hearts:no(t[1]),diamonds:no(t[2]),clubs:no(t[3])}}function no(e){return e?e.split(""):[]}function Tl(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function qm(e){return e.split(/\s+/).filter(t=>t.length>0).filter(t=>!/^=\d+=?$/.test(t)).map(t=>Xm(t))}function Xm(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function Ol(e){return e.length?va(e.join(`

`)):""}function va(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Qm(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function oo(e,t){return Qm(t)[e%4]}const pa={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},El={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},lc=["spades","hearts","diamonds","clubs"];function cr(e){return e==="T"?"10":e}function ha(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const r=pa[o],a=o==="H"||o==="D"?"red":"black";return{text:`${n}${r}`,html:`${n}<span class="${a}">${r}</span>`}}return{text:e,html:e}}function Zm(e){return(El[e.toLowerCase()]||El[e])==="red"?"suit-red":"suit-black"}function ev(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function Er(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function tv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of lc)for(const o of e[n]||[])s+=t[o]||0;return s}function sv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=pa[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function vn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function nv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ls(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function ov({userId:e,sessionId:t,deal:s,promptIndex:n,auctionSoFar:o,expectedBid:r,studentBid:a,correct:i,attemptNumber:l,timeTakenMs:u,skillPath:d,assignment:f=null}){var x,E,$,w,k,P,H,ee,j,q,Y;const m=((x=s.steps)==null?void 0:x.filter(me=>me.type==="bid").length)||1,v=s.studentSeat||"S",b=((E=s.hands)==null?void 0:E[v.toLowerCase()])||"";return{observation_id:crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:e,session_id:t,deal:{subfolder:s.subfolder||s.category||"Unknown",filename:s.filename||null,deal_number:s.boardNumber||s.dealNumber||null,kind:s.kind||null,dealer:s.dealer||"N",vulnerability:s.vulnerable||"None",student_seat:v,hands:{north:(($=s.hands)==null?void 0:$.N)||((w=s.hands)==null?void 0:w.north)||"",east:((k=s.hands)==null?void 0:k.E)||((P=s.hands)==null?void 0:P.east)||"",south:((H=s.hands)==null?void 0:H.S)||((ee=s.hands)==null?void 0:ee.south)||"",west:((j=s.hands)==null?void 0:j.W)||((q=s.hands)==null?void 0:q.west)||""},full_auction:((Y=s.auction)==null?void 0:Y.join(" "))||"",contract:s.contract||null,declarer:s.declarer||null,lead:s.lead||null},bid_prompt:{prompt_index:n,total_prompts:m,auction_so_far:[...o],expected_bid:r,student_hand:b},result:{student_bid:a,correct:i,attempt_number:l,time_taken_ms:u},skill_path:d,assignment:f}}function ic(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function rv(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function av(){return crypto.randomUUID()}function lv(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function iv(e){const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=r=>r.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function cv(e){const[t]=e.split("/");return t||"uncategorized"}function uv(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const cc={name:"AES-GCM",length:256},uc={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function dv(){const e=await crypto.subtle.generateKey(cc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Qs(t)}async function dc(e){const t=Fn(e);return crypto.subtle.importKey("raw",t,cc,!0,["encrypt","decrypt"])}async function ga(e,t){const s=await dc(t),n=crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(JSON.stringify(e)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{encrypted_data:Qs(a),iv:Qs(n)}}async function fc(e,t,s){const n=await dc(s),o=Fn(e),r=Fn(t),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,o),i=new TextDecoder;return JSON.parse(i.decode(a))}async function fv(e){const t=Fn(e);return crypto.subtle.importKey("spki",t,uc,!0,["encrypt"])}async function mv(){const e=await crypto.subtle.generateKey(uc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Qs(t),privateKey:Qs(s)}}async function mc(e,t){const s=await fv(t),n=Fn(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Qs(o)}function vv(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function pv(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function hv(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await ga(t,e);return(await fc(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Qs(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Fn(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const Ir="bridgePractice",xe=N({}),Be=N(null),cs=N(null),jn=N(!1),Wo=N(!1);function vc(){try{const e=localStorage.getItem(Ir);if(e){const t=JSON.parse(e);xe.value=t.users||{},Be.value=t.currentUserId||null,cs.value=t.adminViewerId||null}jn.value=!0}catch(e){console.error("Failed to load user store from storage:",e),jn.value=!0}}function $t(){try{const e=localStorage.getItem(Ir),t=e?JSON.parse(e):{};t.users=xe.value,t.currentUserId=Be.value,cs.value&&(t.adminViewerId=cs.value),localStorage.setItem(Ir,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function gv({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:r}){const a=crypto.randomUUID(),i=new Date().toISOString(),l=await dv();let u=null;if(r)try{const f=await fetch(`${r}/keys/admin`);if(f.ok){const m=await f.json();cs.value=m.viewer_id,u={grantee_id:m.viewer_id,encrypted_payload:await mc(l,m.public_key)}}}catch(f){console.warn("Failed to create admin sharing grant:",f)}const d={id:a,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:l,role:"student",serverRegistered:!1,adminGrantPayload:u,createdAt:i,updatedAt:i};return xe.value[a]=d,Be.value=a,$t(),Wo.value=!0,d}function yv(e,t){if(!xe.value[e])return console.error("User not found:",e),null;const s=xe.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),$t(),s}function bv(e){if(!xe.value[e])return!1;if(delete xe.value[e],Be.value===e){const t=Object.keys(xe.value);Be.value=t.length>0?t[0]:null}return $t(),!0}function _v(e){return xe.value[e]?(Be.value=e,$t(),!0):(console.error("User not found:",e),!1)}function wv(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(xe.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function Sv(e){const t=e.trim().toLowerCase();for(const s of Object.values(xe.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function Cv(e){return xe.value[e]||null}function $v(){xe.value={},Be.value=null,cs.value=null,Wo.value=!1,$t(),jn.value=!1}function kv(){jn.value||vc()}async function xv(e){const t=pv(e);if(!t.valid)return{success:!1,error:t.error};if(!await hv(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=xe.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),Be.value=e.user_id,$t(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),r=o[0]||"Restored",a=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:r,lastName:a,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[i.id]=i,Be.value=i.id,$t(),{success:!0,user:i}}function Av(){const e=xe.value[Be.value];return!e||!e.secretKey?null:vv(e)}function Nv(){Wo.value=!1}function Tv(){return cs.value}function Ov(e){cs.value=e,$t()}async function Ev(e){const t=xe.value[Be.value];return!t||!t.secretKey?null:mc(t.secretKey,e)}async function Iv(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Rv(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Be.value=r.id,$t(),{success:!0,user:r}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Pv(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const r={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return xe.value[r.id]=r,Be.value=r.id,$t(),{success:!0,user:r}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Dv(){if(!Be.value)return;const e=xe.value[Be.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();o.success&&o.user&&o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,$t())}catch{}}function Me(){const e=I(()=>Be.value&&xe.value[Be.value]||null),t=I(()=>Object.values(xe.value)),s=I(()=>Object.keys(xe.value).length>0),n=I(()=>Object.keys(xe.value).length),o=I(()=>Be.value!==null&&!!xe.value[Be.value]);return{users:xe,currentUserId:Be,adminViewerId:cs,initialized:jn,showKeyBackupModal:Wo,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:kv,loadFromStorage:vc,saveToStorage:$t,createUser:gv,updateUser:yv,deleteUser:bv,switchUser:_v,findUserByName:wv,findUserByEmail:Sv,getUser:Cv,clearUsers:$v,restoreFromBackup:xv,getKeyBackup:Av,dismissKeyBackupModal:Nv,getAdminViewerId:Tv,setAdminViewerId:Ov,createGrantForViewer:Ev,requestRecovery:Iv,claimRecovery:Rv,claimRecoveryByCode:Pv,syncRole:Dv}}const Rr="bridgePractice",Xe=N({}),Ie=N(null),kt=N(!1),Zs=N(!1);function pc(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),r=e.get("classrooms");if(!t||!s)return null;const a=s.split(",").map(l=>l.trim()).filter(Boolean),i=r?r.split(",")[0].trim():null;return{name:t,lessons:a,dueDate:n||null,teacherName:o||null,classroom:i}}function hc(){try{const e=localStorage.getItem(Rr);if(e){const t=JSON.parse(e);Xe.value=t.assignments||{},Ie.value=t.currentAssignmentId||null,Ie.value&&Xe.value[Ie.value]&&(kt.value=!0)}Zs.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),Zs.value=!0}}function As(){try{const e=localStorage.getItem(Rr),t=e?JSON.parse(e):{};t.assignments=Xe.value,t.currentAssignmentId=Ie.value,localStorage.setItem(Rr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function gc({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const r=Object.values(Xe.value).find(u=>u.name===e);if(r){const u=new Set(r.lessons);for(const d of n)u.add(d);return r.lessons=Array.from(u),o&&(r.dueDate=o),r.updatedAt=new Date().toISOString(),Ie.value=r.id,kt.value=!0,As(),r}const a=crypto.randomUUID(),i=new Date().toISOString(),l={id:a,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return Xe.value[a]=l,Ie.value=a,kt.value=!0,As(),l}function Lv(){if(Zs.value)return;hc();const e=pc();e&&gc(e),Zs.value=!0}function Bv(e){if(!kt.value||!Ie.value)return!1;const t=Xe.value[Ie.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Uv(e){if(!Ie.value)return;const t=Xe.value[Ie.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),As())}function Mv(e){if(!Ie.value||!kt.value)return!1;const t=Xe.value[Ie.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,As(),!0}function Fv(){if(!kt.value||!Ie.value)return null;const e=Xe.value[Ie.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function jv(){kt.value=!1}function Hv(){Ie.value&&Xe.value[Ie.value]&&(kt.value=!0)}function Vv(e){return Xe.value[e]||null}function Kv(){return Object.values(Xe.value)}function Wv(e){return Xe.value[e]?(delete Xe.value[e],Ie.value===e&&(Ie.value=null,kt.value=!1),As(),!0):!1}function Gv(){Xe.value={},Ie.value=null,kt.value=!1,Zs.value=!1,As()}function Go(){const e=I(()=>Ie.value&&Xe.value[Ie.value]||null),t=I(()=>kt.value&&e.value!==null),s=I(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=I(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:Xe,currentAssignmentId:Ie,inAssignmentMode:kt,initialized:Zs,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Lv,loadFromStorage:hc,saveToStorage:As,createAssignment:gc,isLessonInAssignment:Bv,setTotalDeals:Uv,recordDealCompletion:Mv,getAssignmentTag:Fv,exitAssignmentMode:jv,returnToAssignmentMode:Hv,getAssignment:Vv,getAllAssignments:Kv,deleteAssignment:Wv,clearAssignments:Gv,parseAssignmentFromUrl:pc}}const Pr="bridgePractice",Ye=N([]),en=N(null),tn=N(!1),$s=N({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function yc(){try{const e=localStorage.getItem(Pr);if(e){const t=JSON.parse(e);Ye.value=t.pendingObservations||[]}tn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),tn.value=!0}}function Ns(){try{const e=localStorage.getItem(Pr),t=e?JSON.parse(e):{};t.pendingObservations=Ye.value,localStorage.setItem(Pr,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function bc(){tn.value||yc(),en.value||_c()}function _c(){en.value=av(),$s.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function zv({deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:i}){var x,E;const l=Me(),u=Go();tn.value||bc();const d=l.currentUser.value;if(!d)return{success:!1,error:"No authenticated user"};let f=e.skillPath;if(!f){const $=e.subfolder||e.category||"Unknown";f=lv($)}const m=u.getAssignmentTag(),v=ov({userId:d.id,sessionId:en.value,deal:e,promptIndex:t,auctionSoFar:s,expectedBid:n,studentBid:o,correct:r,attemptNumber:a,timeTakenMs:i,skillPath:f,assignment:m}),b=rv(v);if(!b.valid)return console.error("Invalid observation:",b.errors),{success:!1,error:b.errors.join(", ")};if($s.value.totalObservations++,r?$s.value.correctCount++:$s.value.wrongCount++,d.dataConsent&&d.secretKey){const $=await Jv(v,d);$.success||(console.warn("Failed to encrypt observation, storing unencrypted:",$.error),Il(v,((x=d.classrooms)==null?void 0:x[0])||null))}else Il(v,((E=d.classrooms)==null?void 0:E[0])||null);return{success:!0,observation:v}}async function Jv(e,t){var s;try{const{encrypted_data:n,iv:o}=await ga(e,t.secretKey),r=((s=t.classrooms)==null?void 0:s[0])||null,a=ic(e,r);return Ye.value.push({encrypted_data:n,iv:o,metadata:a,encrypted:!0,queuedAt:new Date().toISOString()}),Ns(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function Il(e,t){const s=ic(e,t);Ye.value.push({observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()}),Ns()}async function Yv(){const t=Me().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Ye.value.length;n++){const o=Ye.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:r,iv:a}=await ga(o.observation,t.secretKey);Ye.value[n]={encrypted_data:r,iv:a,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(r){console.error("Failed to encrypt observation:",r)}}return s>0&&Ns(),s}function qv(){return Ye.value.length}function Xv(){return[...Ye.value]}function Qv(e){Ye.value=Ye.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ns()}function Zv(){Ye.value=[],Ns()}function ep(){return{...$s.value}}function tp(){Ye.value=[],en.value=null,$s.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},tn.value=!1,Ns()}function fs(){const e=I(()=>Ye.value.length),t=I(()=>Ye.value.length>0),s=I(()=>Ye.value.some(o=>!o.encrypted)),n=I(()=>en.value);return{pendingObservations:Ye,sessionId:en,sessionStats:$s,initialized:tn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:bc,startNewSession:_c,recordObservation:zv,encryptPendingObservations:Yv,getPendingCount:qv,getPendingObservations:Xv,removeSyncedObservations:Qv,clearPendingObservations:Zv,getSessionStats:ep,reset:tp,loadFromStorage:yc,saveToStorage:Ns}}function sp(){const e=fs(),t=N(null),s=N(0),n=N(!1),o=N(!1),r=Ut({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),a=Ut({answered:{},wrongCard:null,correctCard:null}),i=Ut({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{}}),l=N({N:[],E:[],S:[],W:[]}),u=N(null),d=N(1),f=I(()=>{var g;return((g=t.value)==null?void 0:g.steps)||[]}),m=I(()=>f.value.length>0),v=I(()=>f.value[s.value]||null),b=I(()=>f.value.some(g=>g.type==="bid")),x=I(()=>{var g;return((g=v.value)==null?void 0:g.type)==="bid"}),E=I(()=>{var g;for(let y=s.value;y>=0;y--)if((g=f.value[y])!=null&&g.clearCommentary)return y;return 0}),$=I(()=>{var g;return((g=t.value)==null?void 0:g.studentSeat)||"S"}),w=I(()=>t.value?oo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),k=I(()=>w.value===$.value),P=I(()=>{var T,O;if(!x.value||!k.value||r.auctionComplete||o.value)return!1;const g=v.value;if(!(g!=null&&g.bid))return!1;const y=(O=(T=t.value)==null?void 0:T.auction)==null?void 0:O[r.currentBidIndex];return y?W(g.bid)===W(y):!1}),H=I(()=>{for(let g=r.displayedBids.length-1;g>=0;g--){const y=r.displayedBids[g];if(y&&y!=="Pass"&&y!=="X"&&y!=="XX")return y}return null}),ee=I(()=>{if(!t.value||r.displayedBids.length===0)return!1;const g=r.displayedBids[r.displayedBids.length-1];if(g==="X"||g==="XX"||!H.value)return!1;let y=-1;for(let V=r.displayedBids.length-1;V>=0;V--){const J=r.displayedBids[V];if(J&&J!=="Pass"&&J!=="X"&&J!=="XX"){y=V;break}}if(y===-1)return!1;const T=oo(y,t.value.auctionDealer||t.value.dealer),O=w.value;return(O==="N"||O==="S")&&(T==="E"||T==="W")||(O==="E"||O==="W")&&(T==="N"||T==="S")}),j=I(()=>{if(!t.value||r.displayedBids.length===0)return!1;for(let g=r.displayedBids.length-1;g>=0;g--){const y=r.displayedBids[g];if(y!=="Pass"){if(y==="XX")return!1;if(y==="X"){const T=oo(g,t.value.auctionDealer||t.value.dealer),O=w.value;return!(O==="N"&&T==="S"||O==="S"&&T==="N"||O==="E"&&T==="W"||O==="W"&&T==="E")}return!1}}return!1}),q=I(()=>{const g=v.value;return g!=null&&g.chooseCard?!a.answered[s.value]:!1}),Y=I(()=>{var g;return((g=v.value)==null?void 0:g.chooseCard)||null}),me=I(()=>{if(!t.value)return[];const g=["N","E","S","W"];if(!m.value)return[];let y=null;const T=f.value;for(let O=0;O<=s.value&&O<T.length;O++){const D=T[O];D!=null&&D.showSeats&&(y=D.showSeats),D!=null&&D.showSeatsAfter&&(O<s.value||O===s.value&&o.value)&&(y=D.showSeatsAfter)}return y?g.filter(O=>!y.includes(O)):g}),fe=I(()=>{if(!t.value||!m.value)return null;let g={};const y=f.value;for(let T=0;T<=s.value&&T<y.length;T++){const O=y[T];if(O!=null&&O.showcards)for(const[D,V]of Object.entries(O.showcards))g[D]=V;if(O!=null&&O.showSeats)for(const D of O.showSeats)delete g[D];if(O!=null&&O.showSeatsAfter&&(T<s.value||T===s.value&&o.value))for(const D of O.showSeatsAfter)delete g[D]}return Object.keys(g).length>0?g:null}),he=I(()=>{if(!t.value||!m.value)return{};let g={},y=new Set;const T=f.value;for(let D=0;D<=s.value&&D<T.length;D++){const V=T[D];if(V!=null&&V.showcards)for(const[J,re]of Object.entries(V.showcards))g[J]=re;if(V!=null&&V.showSeats)for(const J of V.showSeats)y.add(J)}const O={};for(const[D,V]of Object.entries(g))y.has(D)&&(O[D]=V);return O}),Re=I(()=>{const g=fe.value;return g?Object.keys(g):[]}),We=I(()=>{const g=me.value,y=Re.value;return y.length?g.filter(T=>!y.includes(T)):g});function Ge(g){const y={spades:[],hearts:[],diamonds:[],clubs:[]},T={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const O of g){const D=O[0].toUpperCase(),V=O.slice(1).toUpperCase(),J=T[D];J&&y[J].push(V)}return y}const ge=I(()=>{var T,O;if(!((T=t.value)!=null&&T.hands))return{};if((O=v.value)!=null&&O.reset)return t.value.hands;const g=fe.value,y={};for(const D of["N","E","S","W"]){if(g&&g[D]){y[D]=Ge(g[D]);continue}const V=t.value.hands[D];if(!V){y[D]=null;continue}y[D]={spades:[...V.spades||[]],hearts:[...V.hearts||[]],diamonds:[...V.diamonds||[]],clubs:[...V.clubs||[]]};for(const J of l.value[D]){const re={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[J.suit];if(re&&y[D][re]){const de=y[D][re].indexOf(J.card);de!==-1&&y[D][re].splice(de,1)}}}return y}),Q=I(()=>!(b.value&&!r.auctionComplete)),se=I(()=>{if(!m.value)return!0;let g=!0;const y=f.value;for(let T=0;T<=s.value&&T<y.length;T++){const O=y[T];(O==null?void 0:O.showAuction)!==null&&(O==null?void 0:O.showAuction)!==void 0&&(g=O.showAuction)}return g}),we=I(()=>{var y;if(!m.value)return!1;const g=f.value;for(let T=0;T<=s.value&&T<g.length;T++)if((y=g[T])!=null&&y.showLead)return!0;return!1}),te=I(()=>{var g;return(g=t.value)!=null&&g.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),K=I(()=>{if(!m.value||n.value)return!0;const g=v.value;return(g==null?void 0:g.type)==="end"&&!q.value}),ne=I(()=>m.value?!!(o.value||s.value>0||x.value&&r.currentBidIndex>0):!1);function ze(){var y;l.value={N:[],E:[],S:[],W:[]};const g=f.value;for(let T=0;T<=s.value&&T<g.length;T++){const O=g[T];if((y=O==null?void 0:O.plays)!=null&&y.length)for(const D of O.plays){const V=D.split(/[,\s]+/);for(const J of V){if(!J)continue;const re=J.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(re){const de=re[1].toUpperCase(),Te=re[2].toUpperCase();let Ae=re[3].toUpperCase();Ae==="10"&&(Ae="T"),l.value[de].push({suit:Te,card:Ae})}}}}}function ct(){if(!t.value)return;const g=t.value.auction||[],y=yt(s.value);if(y===-1){for(;r.currentBidIndex<g.length;)r.displayedBids.push(g[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0,u.value=null;return}const T=f.value[y],O=W(T.bid);for(;r.currentBidIndex<g.length;){const D=oo(r.currentBidIndex,t.value.auctionDealer||t.value.dealer),V=W(g[r.currentBidIndex]);if(D===$.value&&V===O){u.value=Date.now(),d.value=1;return}r.displayedBids.push(g[r.currentBidIndex]),r.currentBidIndex++}r.auctionComplete=!0,u.value=null}function yt(g){const y=f.value;for(let T=g;T<y.length;T++)if(y[T].type==="bid")return T;return-1}function Qe(g){if(!t.value||r.auctionComplete||!x.value)return!1;const y=t.value.auction[r.currentBidIndex],T=W(g)===W(y),O=s.value;T?O in i.wrongStepIndices&&(delete i.wrongStepIndices[O],F(!0)):(F(!1),i.wrongStepIndices[O]=!0,i.boardHadWrong=!0);const D=r.currentBidIndex;r.displayedBids.push(t.value.auction[r.currentBidIndex]),r.currentBidIndex++,u.value=null,d.value=1,T?(r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1):(r.wrongBid=g,r.correctBid=y,r.wrongBidIndex=D);const V=s.value+1,J=f.value[V];return(J==null?void 0:J.type)==="bid"?(s.value=V,o.value=!1,ct()):(o.value=!0,M(),s.value>=f.value.length-1&&_()),T}function M(){var y;if(r.auctionComplete)return;if(yt(s.value+1)===-1){const T=((y=t.value)==null?void 0:y.auction)||[];for(;r.currentBidIndex<T.length;)r.displayedBids.push(T[r.currentBidIndex]),r.currentBidIndex++;r.auctionComplete=!0}}function X(){r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1}function z(g,y){if(!t.value||!q.value)return!1;const T=Y.value;if(!T)return!1;const O=(g+y).toUpperCase(),D=s.value;let V=!1,J="";return T.anyOf?(V=T.cards.includes(O),J=T.cards[0]):(V=O===T.card,J=T.card),V?D in i.wrongStepIndices&&(delete i.wrongStepIndices[D],F(!0)):(F(!1),i.wrongStepIndices[D]=!0,i.boardHadWrong=!0),a.answered[D]=!0,V?(a.wrongCard=null,a.correctCard=null):(a.wrongCard=O,a.correctCard=J),ve(),V}function oe(){a.wrongCard=null,a.correctCard=null}function ve(){var g;if(P.value||q.value)return!1;if(o.value&&(o.value=!1),s.value<f.value.length-1){if(s.value++,ze(),((g=f.value[s.value])==null?void 0:g.type)==="bid"&&ct(),s.value>=f.value.length-1){const y=f.value[s.value];(y==null?void 0:y.type)!=="bid"&&(y==null?void 0:y.type)!=="choose-card"&&_()}return!0}return _(),!1}function _(){n.value=!0,S()}function S(){if(f.value.some(y=>y.type==="bid"||y.type==="choose-card"))if(i.boardHadWrong){i.wrongCount++;const y=Object.keys(i.wrongStepIndices).length===0;F(y)}else i.correctCount++,F(!0)}function A(){if(X(),oe(),o.value)return o.value=!1,B(s.value),!0;if(s.value>0){const g=s.value-1,y=f.value[g];return a.answered[g]&&delete a.answered[g],(y==null?void 0:y.type)==="bid"&&B(g),s.value=g,n.value=!1,o.value=!1,ze(),!0}return!1}function B(g){var V;const y=f.value[g];if(!y||y.type!=="bid")return;const T=W(y.bid),O=((V=t.value)==null?void 0:V.auction)||[];let D=0;for(let J=0;J<O.length;J++)if(W(O[J])===T){D=J;break}r.currentBidIndex=D,r.displayedBids=O.slice(0,D),r.auctionComplete=!1,u.value=Date.now(),d.value=1}async function F(g){if(t.value)try{await e.recordObservation({deal:t.value,promptIndex:-1,auctionSoFar:[...r.displayedBids],expectedBid:"BOARD",studentBid:g?"PASS":"FAIL",correct:g,attemptNumber:1,timeTakenMs:0})}catch(y){console.error("Failed to record board observation:",y)}}function U(g){var y,T;t.value=g,s.value=0,n.value=!1,o.value=!1,r.displayedBids=[],r.currentBidIndex=0,r.wrongBid=null,r.correctBid=null,r.wrongBidIndex=-1,r.correctBidIndex=-1,r.auctionComplete=!1,a.answered={},a.wrongCard=null,a.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},l.value={N:[],E:[],S:[],W:[]},u.value=null,d.value=1,(y=g==null?void 0:g.steps)!=null&&y.length&&(ze(),((T=g.steps[0])==null?void 0:T.type)==="bid"&&ct())}function G(){i.correctCount=0,i.wrongCount=0}function W(g){if(!g)return"";const T=g.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return T==="PASS"||T==="P"?"PASS":T==="X"||T==="DBL"||T==="DOUBLE"?"X":T==="XX"||T==="RDBL"||T==="REDOUBLE"?"XX":T.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:r,cardChoiceState:a,boardState:i,steps:f,hasSteps:m,currentStep:v,hasBidSteps:b,isBidStep:x,commentaryStartIndex:E,studentSeat:$,currentTurnSeat:w,isStudentTurn:k,hasBidPrompt:P,lastContractBid:H,canDouble:ee,canRedouble:j,canGoBack:ne,hasCardChoice:q,currentChooseCard:Y,hiddenSeats:We,hands:ge,showHcp:Q,showcardsPlayedCards:he,isComplete:K,showAuctionTable:se,showOpeningLead:we,openingLead:te,advance:ve,makeBid:Qe,clearFeedback:X,goBack:A,makeCardChoice:z,clearCardFeedback:oe,loadDeal:U,resetStats:G,observationStore:e}}const Co="bridgePractice",wc="bridgePracticeUIPrefs",et=N({teacherName:null,availableClassrooms:[],configuredAt:null}),sn=N({showLoadPbnOption:!1}),$o=N(!1);function Sc(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function Cc(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(r=>({id:r.trim(),name:Sc(r.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function np(){return new URLSearchParams(window.location.search).get("collection")}function op(){return new URLSearchParams(window.location.search).get("lesson")}function rp(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function ap(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function lp(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function ip(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const cp=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function $c(){try{const e=localStorage.getItem(Co);if(e){const t=JSON.parse(e);t.appConfig&&(et.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function up(){try{const e=localStorage.getItem(wc);if(e){const t=JSON.parse(e);sn.value={...sn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function dp(){try{localStorage.setItem(wc,JSON.stringify(sn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function fp(e,t){sn.value[e]=t,dp()}function ya(){try{const e=localStorage.getItem(Co),t=e?JSON.parse(e):{};t.appConfig=et.value,localStorage.setItem(Co,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function kc(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function mp(){if($o.value)return;$c(),up();const{teacher:e,classrooms:t}=Cc();(e||t.length>0)&&(e&&!et.value.teacherName&&(et.value.teacherName=e),t.length>0&&(et.value.availableClassrooms=kc(et.value.availableClassrooms||[],t)),et.value.configuredAt||(et.value.configuredAt=new Date().toISOString()),ya()),$o.value=!0}function vp(){try{const e=localStorage.getItem(Co);return e?JSON.parse(e):null}catch{return null}}function pp(){et.value={teacherName:null,availableClassrooms:[],configuredAt:null},ya(),$o.value=!1}function zn(){const e=I(()=>et.value.availableClassrooms.length===0),t=I(()=>et.value.availableClassrooms.length>1),s=I(()=>et.value.availableClassrooms.length===1),n=I(()=>s.value?et.value.availableClassrooms[0]:null),o=I(()=>et.value.teacherName),r=I(()=>et.value.availableClassrooms),a=I(()=>sn.value.showLoadPbnOption);return{appConfig:et,initialized:$o,uiPrefs:sn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:r,showLoadPbnOption:a,initializeFromUrl:mp,loadFromStorage:$c,saveToStorage:ya,clearConfig:pp,getStorageData:vp,getCollectionFromUrl:np,setCollectionInUrl:rp,getLessonFromUrl:op,setLessonInUrl:ap,getDealFromUrl:lp,setDealInUrl:ip,setUIPref:fp,COLLECTIONS:cp,parseUrlParams:Cc,classroomIdToName:Sc,mergeClassrooms:kc}}const hp="https://api.bridge-classroom.com/api",gp="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ba=N([]),Ke=N([]),ko=N(!1),xo=N(null),En=N(null),Ao=N(!1),yp=5*60*1e3;async function bp(e){const t=await fetch(`${hp}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":gp}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function _p(e,t){try{return{...await fc(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function wp(){return fs().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,session_id:n.session_id,_local:!0,_pending:!0}})}async function xc(e=!1){const s=Me().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=wp();if(!e&&En.value&&Date.now()-new Date(En.value).getTime()<yp&&Ke.value.length>0)return Sp(n),{success:!0,cached:!0};ko.value=!0,xo.value=null;let o=[];try{const i=await bp(s.id);if(ba.value=i,s.secretKey&&i.length>0){const l=i.map(d=>_p(d,s.secretKey));o=(await Promise.all(l)).filter(d=>d!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(xo.value=i.message)}const r=new Set(o.map(i=>i.id)),a=n.filter(i=>!r.has(i.id));return Ke.value=[...o,...a],En.value=new Date().toISOString(),ko.value=!1,{success:!0,count:Ke.value.length}}function Sp(e){const t=new Set(Ke.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(Ke.value=[...Ke.value,...s])}async function Cp(){if(Ao.value)return;Me().isAuthenticated.value&&await xc(),Ao.value=!0}function $p(){ba.value=[],Ke.value=[],En.value=null,Ao.value=!1}function Ac(){const e={};for(const t of Ke.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function Rl(){const e={};for(const t of Ke.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function Pl(){const e={};for(const t of Ke.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function Dl(e=10){return[...Ke.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function Ll(){const e=new Date().toISOString().split("T")[0];return Ke.value.filter(t=>t.timestamp.startsWith(e))}function Bl(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return Ke.value.filter(n=>n.timestamp>=s)}function kp(){const e=Ac(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,r=new Date(t[0]);for(let a=1;a<t.length;a++){const i=new Date(t[a]);if(Math.round((r-i)/(24*60*60*1e3))===1)o++,r=i;else break}return o}function _a(){const e=I(()=>Ke.value.length),t=I(()=>Ke.value.filter(v=>v.correct).length),s=I(()=>Ke.value.filter(v=>!v.correct).length),n=I(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=I(()=>{const v=Ll(),b=v.filter(E=>E.correct).length,x=v.length;return{total:x,correct:b,incorrect:x-b,accuracy:x>0?Math.round(b/x*100):0}}),r=I(()=>{const v=Bl(),b=v.filter(E=>E.correct).length,x=v.length;return{total:x,correct:b,incorrect:x-b,accuracy:x>0?Math.round(b/x*100):0}}),a=I(()=>kp()),i=I(()=>Rl()),l=I(()=>Pl()),u=I(()=>Dl(20)),d=I(()=>Ke.value.length>0),f=I(()=>ko.value),m=I(()=>xo.value!==null);return{observations:ba,decryptedObservations:Ke,loading:ko,error:xo,lastFetchedAt:En,initialized:Ao,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:r,streak:a,skillStats:i,sessions:l,recentObservations:u,hasData:d,isLoading:f,hasError:m,initialize:Cp,fetchProgress:xc,clearCache:$p,getObservationsByDate:Ac,getStatsBySkill:Rl,getSessions:Pl,getRecentObservations:Dl,getTodayObservations:Ll,getThisWeekObservations:Bl}}const _s={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},vt={NONE:"none",SILVER:"silver",GOLD:"gold"},xp=6;function Ap(e){return e.slice(0,10)}function Nc(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function Tc(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Ul=60*60*1e3;function Oc(e){if(e.length===0)return _s.GREY;const t=e[e.length-1];if(!t.correct)return _s.RED;const s=Date.now()-Ul;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return _s.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return _s.GREEN;const r=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-r<=Ul?_s.ORANGE:_s.GREEN}function Ec(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function Ic(e){if(e.length===0)return vt.NONE;const t=new Set;for(const a of e)t.add(Ap(a.timestamp));const s=[...t].filter(a=>Ec(e,a)).sort();if(s.length<2)return vt.NONE;let n=1,o=1,r=s[0];for(let a=1;a<s.length;a++)Nc(r,s[a])>=xp&&(o++,r=s[a],o>n&&(n=o));return n>=3?vt.GOLD:n>=2?vt.SILVER:vt.NONE}function Np(e){const t=e.observations.value||[];let s=[];try{s=fs().getPendingObservations().filter(i=>i.metadata).map(i=>{const l=i.metadata;return{id:l.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:l.timestamp||i.queuedAt,skill_path:l.skill_path,correct:l.correct,deal_subfolder:l.deal_subfolder,deal_number:l.deal_number,session_id:l.session_id,_local:!0}})}catch{}const n=new Set(t.map(r=>r.id)),o=s.filter(r=>!n.has(r.id));return[...t,...o]}function Tp(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var r;return(o.deal_subfolder||((r=o.deal)==null?void 0:r.subfolder))===t});return s.map(o=>{const r=n.filter(i=>{var l;return(i.deal_number??((l=i.deal)==null?void 0:l.deal_number))===o}).sort((i,l)=>i.timestamp.localeCompare(l.timestamp)),a=Tc(r);return{boardNumber:o,status:Oc(r),achievement:Ic(r),attemptCount:a.length,lastAttemptTime:r.length>0?r[r.length-1].timestamp:null}})}function Op(e){return!e||e.length===0?{achievement:vt.NONE}:e.every(n=>n.achievement===vt.GOLD)?{achievement:vt.GOLD}:e.every(n=>n.achievement===vt.SILVER||n.achievement===vt.GOLD)?{achievement:vt.SILVER}:{achievement:vt.NONE}}const Rc="bridgeLessonBoards",Hn=N(Ep()),ur=new Set;function Ep(){try{const e=localStorage.getItem(Rc);return e?JSON.parse(e):{}}catch{return{}}}function Ip(){try{localStorage.setItem(Rc,JSON.stringify(Hn.value))}catch{}}function Pc(e,t){Hn.value={...Hn.value,[e]:t},Ip()}function Rp(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,r)=>o-r)}async function Pp(e){const t=zn(),s=e.filter(n=>!Hn.value[n]&&!ur.has(n));if(s.length!==0){for(const n of s)ur.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const r=n.includes("/")?n.split("/").pop():n,a=`${o.baseUrl}/${r}.pbn`;try{const i=await fetch(a);if(!i.ok)continue;const l=await i.text(),u=Rp(l);if(u.length>0){Pc(n,u);break}}catch{continue}}}finally{ur.delete(n)}}))}}function Dp(e){var n,o;const t=Hn.value,s={};for(const r of e){const a=r.deal_subfolder||((n=r.deal)==null?void 0:n.subfolder),i=r.deal_number??((o=r.deal)==null?void 0:o.deal_number);!a||i==null||(s[a]||(s[a]={boards:new Set,lastActivity:r.timestamp}),s[a].boards.add(i),r.timestamp>s[a].lastActivity&&(s[a].lastActivity=r.timestamp))}return Object.entries(s).map(([r,a])=>{const i=t[r];if(i)return{subfolder:r,boardNumbers:i,lastActivity:a.lastActivity};const l=Math.max(...a.boards),u=[];for(let d=1;d<=l;d++)u.push(d);return{subfolder:r,boardNumbers:u,lastActivity:a.lastActivity}})}function rn(){const e=Jt();function t(){return Np(e)}return{STATUS:_s,ACHIEVEMENT:vt,getObservations:t,computeBoardMastery:Tp,computeLessonAchievement:Op,extractLessonsFromObservations:Dp,saveLessonBoardNumbers:Pc,fetchMissingBoardCounts:Pp,groupIntoBoardAttempts:Tc,calculateCurrentStatus:Oc,calculateAchievement:Ic,hasGreenDay:Ec,daysBetween:Nc}}const _n="https://api.bridge-classroom.com/api",wn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",No=N(!1),wa=N(null),zo=N([]),ls=N({}),To=N(!1),Oo=N(null),Sa=N(!1),Eo={},Lp=2*60*1e3;async function Bp(){var s;const e=Me(),t=e.currentUser.value;if(!t||!t.email){No.value=!1;return}try{const n=await fetch(`${_n}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":wn}});if(!n.ok)return;const o=await n.json(),r=Array.isArray(o)?o[0]:null;if(!r)return;wa.value=r.id;const a=await fetch(`${_n}/grants?grantee_id=${r.id}`,{headers:{"x-api-key":wn}});if(!a.ok)return;const l=(await a.json()).grants||[],u=new Set(l.filter(b=>b.grantor_id!==t.id).map(b=>b.grantor_id));if(u.size===0)return;const d=await fetch(`${_n}/users`,{headers:{"x-api-key":wn}});if(!d.ok)return;const m=(await d.json()).users||[],v=(s=t.email)==null?void 0:s.toLowerCase();if(zo.value=m.filter(b=>{var x;return u.has(b.id)&&b.id!==t.id&&((x=b.email)==null?void 0:x.toLowerCase())!==v}).sort((b,x)=>`${b.first_name} ${b.last_name}`.localeCompare(`${x.first_name} ${x.last_name}`)),No.value=!0,Sa.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${_n}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":wn},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Dc(e){const t=ls.value[e],s=Eo[e];if(t&&s&&Date.now()-s<Lp)return t;try{const n=await fetch(`${_n}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":wn}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=((await n.json()).observations||[]).map(a=>({id:a.id||a.observation_id,timestamp:a.timestamp,skill_path:a.skill_path,correct:a.correct,deal_subfolder:a.deal_subfolder,deal_number:a.deal_number}));return ls.value={...ls.value,[e]:r},Eo[e]=Date.now(),r}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Up(){To.value=!0,Oo.value=null;try{await Promise.allSettled(zo.value.map(s=>Dc(s.id)));const e=rn(),t=new Set;for(const s of Object.values(ls.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){Oo.value=e.message,console.error("Failed to load student summaries:",e)}finally{To.value=!1}}function Mp(e){const t=ls.value[e]||[];if(t.length===0)return{green:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=rn(),n=s.extractLessonsFromObservations(t),o={green:0,orange:0,yellow:0,red:0,grey:0};for(const a of n){const i=s.computeBoardMastery(t,a.subfolder,a.boardNumbers);for(const l of i)o[l.status]=(o[l.status]||0)+1}let r=null;for(const a of t)(!r||a.timestamp>r)&&(r=a.timestamp);return{...o,total:o.green+o.orange+o.yellow+o.red+o.grey,lastObservationTime:r}}function Fp(e,t=3){const s=ls.value[e]||[],n=Jt(),o={};for(const r of s){const a=r.deal_subfolder;a&&(!o[a]||r.timestamp>o[a])&&(o[a]=r.timestamp)}return Object.entries(o).sort(([,r],[,a])=>a.localeCompare(r)).slice(0,t).map(([r])=>n.formatLessonName(r))}function jp(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),r=Math.floor(n/36e5),a=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:s.toLocaleDateString()}function Hp(){No.value=!1,wa.value=null,zo.value=[],ls.value={},To.value=!1,Oo.value=null,Sa.value=!1;for(const e of Object.keys(Eo))delete Eo[e]}function Jn(){return{isTeacher:No,viewerId:wa,students:zo,studentObservations:ls,loading:To,error:Oo,initialized:Sa,checkTeacherStatus:Bp,fetchStudentObservations:Dc,loadAllStudentSummaries:Up,getStudentMasterySummary:Mp,getStudentRecentLessons:Fp,formatTimeSince:jp,reset:Hp}}const Dr="https://api.bridge-classroom.com/api",Lr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Br=N(!1),Us=N(null),Gt=N(null),Vn=N([]),nn=N([]),Ca=N("lessons"),Jo=N(!0),an=N(!1),Yn=N([]);function Vp(e){an.value=!0,Yn.value=e}function Kp(){an.value=!1,Yn.value=[]}function qn(){return an.value?Yn.value:Vn.value}async function Lc(){const e=Me(),t=Jn(),s=e.currentUser.value;if(!s){nn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${Dr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":Lr}});if(o.ok){const{grants:r}=await o.json(),a=await fetch(`${Dr}/users`,{headers:{"x-api-key":Lr}});if(a.ok){const{users:i}=await a.json(),l=new Set(r.map(u=>u.grantor_id));for(const u of i)l.has(u.id)&&u.id!==s.id&&n.push({id:u.id,name:`${u.first_name} ${u.last_name}`,email:u.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}nn.value=n}async function $a(e=!1){if(an.value)return{success:!0};const t=Me(),s=_a(),n=t.currentUser.value;if(!n)return Us.value="No authenticated user",{success:!1,error:Us.value};Br.value=!0,Us.value=null;try{if(!Gt.value||Gt.value===n.id)Gt.value=n.id,await s.fetchProgress(e),Vn.value=s.decryptedObservations.value;else{const o=await fetch(`${Dr}/observations?user_id=${Gt.value}&limit=10000`,{headers:{"x-api-key":Lr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const r=await o.json();Vn.value=r.observations||[]}return{success:!0}}catch(o){return Us.value=o.message,{success:!1,error:o.message}}finally{Br.value=!1}}async function Wp(e){Gt.value=e,await $a(!0)}const Ur=I(()=>{var n;const e=qn(),t={};for(const o of e){const r=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[r]||(t[r]={lesson:r,displayName:Mc(r),total:0,correct:0,incorrect:0,observations:[]}),t[r].total++,o.correct?t[r].correct++:t[r].incorrect++,t[r].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,r)=>o.displayName.localeCompare(r.displayName)),s}),Mr=I(()=>{const e=qn(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",r=cv(o),a=iv(o);t[o]||(t[o]={skillPath:o,category:r,categoryName:uv(r).name,skillName:a.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const r=n.categoryName.localeCompare(o.categoryName);return r!==0?r:n.skillName.localeCompare(o.skillName)}),s}),Bc=I(()=>Jo.value?Ur.value.filter(e=>e.total>0):Ur.value),Uc=I(()=>Jo.value?Mr.value.filter(e=>e.total>0):Mr.value);function Mc(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Gp=I(()=>Ca.value==="lessons"?Bc.value:Uc.value),zp=I(()=>nn.value.length>1),Jp=I(()=>nn.value.find(e=>e.id===Gt.value)||null),Yp=I(()=>qn().length>0),qp=I(()=>qn().length),Xp=I(()=>{const e=qn();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Qp(){const t=Me().currentUser.value;t&&(Gt.value=t.id,await Lc(),await $a())}function Zp(){Vn.value=[],nn.value=[],Gt.value=null,Ca.value="lessons",Jo.value=!0,Us.value=null,an.value=!1,Yn.value=[]}function Jt(){return{loading:Br,error:Us,selectedUserId:Gt,observations:Vn,accessibleUsers:nn,activeTab:Ca,onlyWithObservations:Jo,useTestData:an,testObservations:Yn,enableTestMode:Vp,disableTestMode:Kp,lessonStats:Ur,taxonStats:Mr,filteredLessonStats:Bc,filteredTaxonStats:Uc,currentStats:Gp,canViewOtherUsers:zp,selectedUser:Jp,hasData:Yp,totalObservations:qp,overallSuccessRate:Xp,initialize:Qp,loadAccomplishments:$a,selectUser:Wp,fetchAccessibleUsers:Lc,reset:Zp,formatLessonName:Mc}}const ka="https://api.bridge-classroom.com/api",Fc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",pt=N("idle"),jc=N(null),Bs=N(null),Ms=N(0),Fs=N(navigator.onLine),Sn=N(!1),Ml=5,eh=1e3,th=6e4,sh=5e3;let Gs=null;function nh(e){const t=Math.min(eh*Math.pow(2,e),th);return t+Math.random()*t*.25}async function Hc(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${ka}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,error:`Server error: ${n.status} - ${r}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return console.error("Failed to register user with server:",s),{success:!1,error:s.message}}}async function Vc(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(r=>({encrypted_data:r.encrypted_data,iv:r.iv,metadata:r.metadata}))},n=await fetch(`${ka}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Fc},body:JSON.stringify(s)});if(!n.ok){const r=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${r}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function Xn(){var n,o;const e=Me(),t=fs();if(!navigator.onLine)return pt.value="offline",{success:!1,offline:!0};pt.value="syncing",Bs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const r=e.currentUser.value;if(r&&!r.serverRegistered){const l=await Hc(r);if(l.success)e.updateUser(r.id,{serverRegistered:!0}),Sn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(l.error==="email_exists")return console.warn("Email already registered - user needs to recover account"),pt.value="error",Bs.value="Account already exists. Please use recovery.",Sn.value=!0,s;console.warn("User registration failed:",l.error),Sn.value=!0,Bs.value=`Registration failed: ${l.error}`}}const a=await t.encryptPendingObservations();a>0&&console.log(`Encrypted ${a} observations`);let i=!1;if(r!=null&&r.dataConsent){const l=t.getPendingObservations();if(l.length>0){const u=await Vc(l);if(u.success&&u.synced>0){const d=l.filter(f=>f.encrypted).slice(0,u.synced).map(f=>{var m;return(m=f.metadata)==null?void 0:m.observation_id});s.observationsSynced=u.synced,console.log(`Synced ${u.synced} observations`);try{await Jt().loadAccomplishments(!0)}catch{}t.removeSyncedObservations(d)}u.success?((o=u.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",u.errors):(i=!0,Bs.value=((n=u.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",u.errors))}}return Sn.value||i?pt.value="error":(pt.value="idle",jc.value=new Date().toISOString(),Ms.value=0),s}catch(r){return console.error("Sync failed:",r),Bs.value=r.message,pt.value="error",s.success=!1,s}}function Fr(){Gs&&clearTimeout(Gs),Gs=setTimeout(async()=>{await Xn()},sh)}async function Kc(){return Gs&&(clearTimeout(Gs),Gs=null),await Xn()}async function Wc(){if(Ms.value>=Ml){console.log("Max retries reached, giving up"),pt.value="error";return}const e=nh(Ms.value);Ms.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Ms.value}/${Ml})`),setTimeout(async()=>{const t=await Xn();!t.success&&t.offline!==!0&&Wc()},e)}function oh(){var i;const e=Me(),t=fs(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(l=>l.encrypted);if(o.length===0)return;const r={observations:o.map(l=>({encrypted_data:l.encrypted_data,iv:l.iv,metadata:l.metadata}))},a=new Blob([JSON.stringify(r)],{type:"application/json"});navigator.sendBeacon(`${ka}/observations?api_key=${Fc}`,a),console.log("Sent beacon with",o.length,"observations")}function rh(){window.addEventListener("online",()=>{Fs.value=!0,console.log("Back online, triggering sync"),Kc()}),window.addEventListener("offline",()=>{Fs.value=!1,pt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&Fs.value&&(console.log("Tab visible, triggering sync"),Fr())}),window.addEventListener("beforeunload",oh),setInterval(()=>{document.visibilityState==="visible"&&Fs.value&&Fr()},5*60*1e3)}async function ah(){rh(),navigator.onLine?await Xn():pt.value="offline"}function Gc(){const e=I(()=>pt.value==="syncing"),t=I(()=>pt.value==="offline"||!Fs.value),s=I(()=>pt.value==="error"),n=I(()=>fs().pendingCount.value>0);return{syncState:pt,lastSyncAt:jc,lastError:Bs,retryCount:Ms,isOnline:Fs,registrationFailed:Sn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:ah,performSync:Xn,triggerSync:Fr,forceSync:Kc,retrySync:Wc,registerUserWithServer:Hc,syncObservationsToServer:Vc}}const xa="https://api.bridge-classroom.com/api",zc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",zt=N(null),jr=N(!1),Qn=N(null);async function lh(){jr.value=!0;try{const e=await fetch(`${xa}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=zt.value;zt.value=t.announcement||null,zt.value&&(!s||s.id!==zt.value.id)&&(Qn.value=null)}catch{}finally{jr.value=!1}}async function ih(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${xa}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":zc},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const r=await o.json();return zt.value=r.announcement||null,Qn.value=null,r}async function ch(){const e=await fetch(`${xa}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":zc}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);zt.value=null,Qn.value=null}function uh(){zt.value&&(Qn.value=zt.value.id)}function Aa(){return{announcement:zt,loading:jr,dismissed:Qn,loadAnnouncement:lh,setAnnouncement:ih,clearAnnouncement:ch,dismiss:uh}}const dh={key:0,class:"minimal-hand"},fh={class:"seat-label-inline"},mh={class:"seat-label"},vh={key:0,class:"suits"},ph={key:0,class:"suit-row"},hh={key:0,class:"cards clickable-cards"},gh=["onClick"],yh={key:1,class:"cards"},bh={key:2,class:"cards"},_h={key:1,class:"hidden-hand"},wh={key:2,class:"hcp"},Sh={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=lc,n=I(()=>Er(t.seat)),o=I(()=>tv(t.hand)),r=I(()=>t.hand?s.reduce((E,$)=>{var w;return E+(((w=t.hand[$])==null?void 0:w.length)||0)},0):0),a=I(()=>r.value>0&&r.value<5);function i(E){return t.hand&&t.hand[E]&&t.hand[E].length>0}function l(E){return pa[E]}function u(E){return Zm(E)}const d={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function f(E){return d[E]||E}function m(E){if(!t.hand||!t.hand[E])return"";const $=t.hand[E];return $.length===0?"":$.map(cr).join(" ")}const v=I(()=>t.playedCards&&t.playedCards.length>0),b=I(()=>{if(!t.playedCards)return null;const E=new Set;for(const $ of t.playedCards){const w=$[0].toUpperCase(),k=$.slice(1).toUpperCase(),P={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[w];P&&E.add(`${P}:${k}`)}return E});function x(E,$){return b.value?b.value.has(`${E}:${$}`):!1}return(E,$)=>(p(),h("div",{class:ae(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),h("div",dh,[c("span",fh,C(e.seat),1),(p(!0),h(Z,null,ie(R(s),w=>(p(),h("span",{key:w,class:ae(["suit-symbol-inline",u(w)])},C(l(w)),3))),128))])):(p(),h(Z,{key:1},[c("div",mh,C(n.value),1),!e.hidden&&e.hand?(p(),h("div",vh,[(p(!0),h(Z,null,ie(R(s),w=>(p(),h(Z,{key:w},[!a.value||i(w)?(p(),h("div",ph,[c("span",{class:ae(["suit-symbol",u(w)])},C(l(w)),3),e.clickable?(p(),h("span",hh,[(p(!0),h(Z,null,ie(e.hand[w],k=>(p(),h("span",{key:k,class:ae(x(w,k)?"card-played":"card-clickable"),onClick:P=>!x(w,k)&&E.$emit("card-click",{suit:f(w),rank:k})},C(R(cr)(k)),11,gh))),128))])):v.value?(p(),h("span",yh,[(p(!0),h(Z,null,ie(e.hand[w],k=>(p(),h("span",{key:k,class:ae({"card-played":x(w,k)})},C(R(cr)(k)),3))),128))])):(p(),h("span",bh,C(m(w)),1))])):L("",!0)],64))),128))])):e.hidden?(p(),h("div",_h,[...$[0]||($[0]=[c("div",{class:"card-back"},null,-1)])])):L("",!0),e.showHcp&&e.hand&&!e.hidden&&!a.value?(p(),h("div",wh,C(o.value)+" HCP ",1)):L("",!0)],64))],2))}},ro=pe(Sh,[["__scopeId","data-v-128fc7ed"]]),Ch={class:"ns-column north-row"},$h={key:0,class:"position north"},kh={key:0,class:"position west"},xh={class:"center"},Ah={key:1,class:"position east"},Nh={class:"ns-column south-row"},Th={key:0,class:"position south"},Oh={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,r,a;return p(),h("div",{class:ae(["bridge-table",{compact:e.compact}])},[c("div",Ch,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),h("div",$h,[ce(ro,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):L("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),h("div",kh,[ce(ro,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):L("",!0),c("div",xh,[hd(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),h("div",Ah,[ce(ro,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(r=e.playedCards)==null?void 0:r.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):L("",!0),c("div",Nh,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),h("div",Th,[ce(ro,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(a=e.playedCards)==null?void 0:a.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):L("",!0)])],2)}}},Eh=pe(Oh,[["__scopeId","data-v-ec6230a9"]]),Ih={class:"bidding-box"},Rh={class:"bid-section"},Ph={class:"levels"},Dh=["onClick"],Lh={class:"strains"},Bh=["disabled","onClick"],Uh=["innerHTML"],Mh={class:"special-bids"},Fh=["disabled"],jh=["disabled"],Hh={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=N(1),r=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],a=I(()=>{if(!s.lastBid)return 0;const f=s.lastBid.match(/^(\d)/);return f?parseInt(f[1],10):0}),i=I(()=>{if(!s.lastBid)return-1;const f=["C","D","H","S","NT","N"],m=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!m)return-1;const v=m[1].toUpperCase();return f.indexOf(v==="N"?"NT":v)});function l(f){o.value=f}function u(f,m){if(!f)return!1;const b=["C","D","H","S","NT"].indexOf(m);return f>a.value||f===a.value&&b>i.value}function d(f,m){u(f,m)&&n("bid",`${f}${m}`)}return(f,m)=>(p(),h("div",Ih,[c("div",Rh,[c("div",Ph,[(p(),h(Z,null,ie(7,v=>c("button",{key:v,class:ae(["level-btn",{active:o.value===v}]),onClick:b=>l(v)},C(v),11,Dh)),64))]),c("div",Lh,[(p(),h(Z,null,ie(r,v=>c("button",{key:v.value,class:ae(["strain-btn",[v.colorClass,{disabled:!u(o.value,v.value)}]]),disabled:!u(o.value,v.value),onClick:b=>d(o.value,v.value)},[c("span",{innerHTML:v.display},null,8,Uh)],10,Bh)),64))])]),c("div",Mh,[c("button",{class:"special-btn pass",onClick:m[0]||(m[0]=v=>f.$emit("bid","Pass"))}," Pass "),c("button",{class:"special-btn double",disabled:!e.canDouble,onClick:m[1]||(m[1]=v=>f.$emit("bid","X"))}," Double ",8,Fh),c("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:m[2]||(m[2]=v=>f.$emit("bid","XX"))}," Redouble ",8,jh)])]))}},Vh=pe(Hh,[["__scopeId","data-v-38ccb98f"]]),Kh={class:"auction-table"},Wh={class:"rounds"},Gh=["innerHTML"],zh={key:1,class:"turn-indicator"},Jh={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=I(()=>["W","N","E","S"].indexOf(t.dealer)),n=I(()=>{const u=[],d=t.bids;let f=0,m=0;for(;f<d.length||m===0&&d.length>0;){const v=[null,null,null,null],b=m===0?s.value:0;for(let x=b;x<4&&f<d.length;x++)v[x]=d[f],f++;if(v.some(x=>x!==null)&&u.push(v),m++,m>20)break}if(t.currentBidIndex>=d.length){const v=u[u.length-1],b=v?v.filter(x=>x!==null).length:0;if(u.length===1&&s.value,b===4||u.length>1&&b===4){const x=[null,null,null,null];u.push(x)}}return u});function o(u,d){return u===0?d-s.value:4-s.value+(u-1)*4+d}function r(u,d){const f=o(u,d);return f===t.currentBidIndex&&f>=t.bids.length}function a(u,d){return t.wrongBidIndex<0?!1:o(u,d)===t.wrongBidIndex}function i(u,d){return t.correctBidIndex<0?!1:o(u,d)===t.correctBidIndex}function l(u){return ha(u).html}return(u,d)=>(p(),h("div",Kh,[d[0]||(d[0]=_o('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),c("div",Wh,[(p(!0),h(Z,null,ie(n.value,(f,m)=>(p(),h("div",{key:m,class:"round"},[(p(!0),h(Z,null,ie(f,(v,b)=>(p(),h("div",{key:b,class:ae(["bid-cell",{"current-turn":r(m,b),"wrong-bid":a(m,b),"correct-bid":i(m,b)}])},[v?(p(),h("span",{key:0,innerHTML:l(v)},null,8,Gh)):e.showTurnIndicator&&r(m,b)?(p(),h("span",zh,"?")):L("",!0)],2))),128))]))),128))])]))}},Yh=pe(Jh,[["__scopeId","data-v-ac265db8"]]),qh={class:"deal-info"},Xh={class:"board-number"},Qh={key:0,class:"board-popup"},Zh={class:"popup-list"},eg=["onClick"],tg={class:"info-row"},sg={class:"info-item"},ng={class:"value"},og={class:"info-item"},rg={key:0,class:"contract-row"},ag={class:"info-item"},lg=["innerHTML"],ig={key:0,class:"label"},cg={key:0,class:"info-item"},ug=["innerHTML"],dg={key:1,class:"title"},fg={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=N(!1);function r(m){n("goto",m),o.value=!1}const a=I(()=>Er(s.dealer)),i=I(()=>Er(s.declarer)),l=I(()=>ev(s.vulnerable)),u=I(()=>{var v;const m=(v=s.vulnerable)==null?void 0:v.toUpperCase();return m==="BOTH"||m==="ALL"?"vul-both":m==="NS"||m==="EW"?"vul-partial":"vul-none"}),d=I(()=>s.contract?ha(s.contract).html:""),f=I(()=>{if(!s.openingLead)return"";const m=s.openingLead[0],v=s.openingLead.slice(1),b={S:"",H:"",D:"",C:""},x={S:"black",H:"red",D:"red",C:"black"},E=b[m]||m;return`<span class="${x[m]||"black"}">${E}</span>${v==="T"?"10":v}`});return(m,v)=>(p(),h("div",qh,[c("div",{class:"board-selector",onMouseenter:v[0]||(v[0]=b=>o.value=!0),onMouseleave:v[1]||(v[1]=b=>o.value=!1)},[c("div",Xh,"Board "+C(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),h("div",Qh,[v[2]||(v[2]=c("div",{class:"popup-header"},"Select Board",-1)),c("div",Zh,[(p(!0),h(Z,null,ie(e.totalDeals,b=>(p(),h("button",{key:b,class:ae(["popup-item",{active:b-1===e.currentIndex}]),onClick:x=>r(b-1)}," Board "+C(e.dealBoardNumbers[b-1]||b),11,eg))),128))])])):L("",!0)],32),c("div",tg,[c("div",sg,[v[3]||(v[3]=c("span",{class:"label"},"Dealer:",-1)),c("span",ng,C(a.value),1)]),c("div",og,[v[4]||(v[4]=c("span",{class:"label"},"Vul:",-1)),c("span",{class:ae(["value",u.value])},C(l.value),3)])]),e.showContract&&e.contract?(p(),h("div",rg,[c("div",ag,[c("span",{class:"value contract",innerHTML:d.value},null,8,lg),e.declarer?(p(),h("span",ig,"by "+C(i.value),1)):L("",!0)]),e.openingLead?(p(),h("div",cg,[v[5]||(v[5]=c("span",{class:"label"},"OL:",-1)),c("span",{class:"value lead-card",innerHTML:f.value},null,8,ug)])):L("",!0)])):L("",!0),e.title?(p(),h("div",dg,C(e.title),1)):L("",!0)]))}},mg=pe(fg,[["__scopeId","data-v-5a844c49"]]),vg={class:"feedback-header"},pg={key:0,class:"icon"},hg={key:1,class:"icon"},gg={class:"title"},yg={key:0,class:"feedback-content"},bg={class:"bid-comparison"},_g={class:"bid-item your-bid"},wg=["innerHTML"],Sg={class:"bid-item correct-bid"},Cg=["innerHTML"],$g={key:1,class:"feedback-content"},kg={class:"bid-comparison"},xg={class:"bid-item your-bid"},Ag=["innerHTML"],Ng={class:"bid-item correct-bid"},Tg=["innerHTML"],Og=["innerHTML"],Eg={class:"actions"},Ig={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=I(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(r){return ha(r).html}function o(r){return sv(r).html}return(r,a)=>e.visible?(p(),h("div",{key:0,class:ae(["feedback-panel",e.type])},[c("div",vg,[e.type==="wrong"?(p(),h("span",pg,"")):e.type==="correct"?(p(),h("span",hg,"")):L("",!0),c("span",gg,C(s.value),1)]),e.wrongBid?(p(),h("div",yg,[c("div",bg,[c("div",_g,[a[1]||(a[1]=c("span",{class:"label"},"Your bid:",-1)),c("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,wg)]),c("div",Sg,[a[2]||(a[2]=c("span",{class:"label"},"Correct bid:",-1)),c("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Cg)])])])):L("",!0),e.wrongCardCode?(p(),h("div",$g,[c("div",kg,[c("div",xg,[a[3]||(a[3]=c("span",{class:"label"},"Your card:",-1)),c("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Ag)]),c("div",Ng,[a[4]||(a[4]=c("span",{class:"label"},"Correct card:",-1)),c("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Tg)])])])):L("",!0),e.commentary?(p(),h("div",{key:2,class:"commentary",innerHTML:R(Ls)(e.commentary)},null,8,Og)):L("",!0),c("div",Eg,[e.showContinue?(p(),h("button",{key:0,class:"btn continue",onClick:a[0]||(a[0]=i=>r.$emit("continue"))}," Continue ")):L("",!0)])],2)):L("",!0)}},Fl=pe(Ig,[["__scopeId","data-v-04368462"]]),Rg={class:"welcome-screen"},Pg={class:"welcome-card"},Dg={class:"welcome-header"},Lg={key:0,class:"welcome-body"},Bg={class:"form-group"},Ug={key:0,class:"error-message"},Mg={class:"form-group"},Fg={key:0,class:"error-message"},jg={class:"form-group"},Hg={key:0,class:"error-message"},Vg={key:0,class:"form-group"},Kg={class:"checkbox-group"},Wg=["value","checked","onChange"],Gg={key:1,class:"form-group"},zg={class:"single-classroom"},Jg={class:"form-group consent-group"},Yg={class:"checkbox-label consent-label"},qg={key:0,class:"consent-details"},Xg=["disabled"],Qg={key:0},Zg={key:1},ey={key:1,class:"welcome-body returning"},ty={key:2,class:"welcome-body switcher"},sy={class:"user-list"},ny=["onClick"],oy={class:"user-name"},ry={key:0,class:"user-class"},ay={key:3,class:"welcome-body recovery-sent"},ly={class:"subtitle"},iy={class:"recovery-info"},cy={class:"code-entry"},uy=["disabled"],dy={key:0},fy={key:1},my={key:0,class:"error-message"},vy={key:4,class:"welcome-body recovery-claiming"},py={class:"subtitle"},hy={key:0,class:"recovery-error-panel"},gy={class:"error-message"},yy={key:1,class:"loading-spinner"},by={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=zn(),o=Me(),r="https://api.bridge-classroom.com/api",a=N("form"),i=N(""),l=N(""),u=N(""),d=N([]),f=N(!0),m=N({firstName:"",lastName:"",email:"",classrooms:""}),v=N(!1),b=N(!1),x=N(""),E=N(""),$=N(""),w=N(""),k=N("");gt(async()=>{o.initialize(),n.initializeFromUrl();const te=new URLSearchParams(window.location.search),K=te.get("recover"),ne=te.get("user_id");if(K&&ne){await fe(ne,K),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?a.value="returning":o.hasUsers.value?a.value="switcher":a.value="form",n.hasSingleClassroom.value&&(d.value=[n.singleClassroom.value.id])});const P=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,H=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ee=I(()=>i.value.trim().length>0&&l.value.trim().length>0&&u.value.trim().length>0&&P.test(u.value.trim())),j=I(()=>o.currentUser.value?o.currentUser.value.firstName:""),q=I(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function Y(){m.value={firstName:"",lastName:"",email:"",classrooms:""};let te=!0;return i.value.trim()||(m.value.firstName="First name is required",te=!1),l.value.trim()||(m.value.lastName="Last name is required",te=!1),u.value.trim()?P.test(u.value.trim())||(m.value.email="Please enter a valid email address",te=!1):(m.value.email="Email is required",te=!1),o.findUserByEmail(u.value)&&(m.value.email="This email is already registered on this device.",te=!1),te}async function me(){const te=u.value.trim().toLowerCase();if(!navigator.onLine)return console.log("[DEBUG] Offline - skipping server check"),!0;try{const K=await o.requestRecovery(te,r);return K.success?(E.value=te,w.value=K.message,a.value="recovery-sent",!1):K.message&&K.message.includes("No account found")?!0:(m.value.email=K.message||"Unable to verify email. Please try again.",!1)}catch(K){return console.error("Failed to check email on server:",K),H?m.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":m.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function fe(te,K){a.value="recovery-claiming",b.value=!0,x.value="Recovering your account...",$.value="";try{const ne=await o.claimRecovery(te,K,r);ne.success&&ne.user?s("userReady",ne.user):($.value=ne.error||"Recovery failed. Please try again.",a.value="form")}catch(ne){console.error("[Recovery] Exception:",ne),$.value="Unable to complete recovery. Please try again.",a.value="form"}finally{b.value=!1,x.value=""}}async function he(){if(k.value.trim().length===6){b.value=!0,x.value="Verifying code...",$.value="";try{const te=await o.claimRecoveryByCode(E.value.trim(),k.value.trim(),r);te.success&&te.user?s("userReady",te.user):$.value=te.error||"Invalid code. Please check and try again."}catch(te){console.error("Recovery code claim failed:",te),$.value="Unable to connect to server. Please try again."}finally{b.value=!1,x.value=""}}}async function Re(){if(!Y())return;if(b.value=!0,x.value="Checking account...",!await me()){b.value=!1,x.value="";return}let K=[];n.hasSingleClassroom.value?K=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(K=[...d.value]),x.value="Creating your secure encryption key...";try{const ne=await o.createUser({firstName:i.value,lastName:l.value,email:u.value,classrooms:K,dataConsent:f.value,apiUrl:r});s("userReady",ne)}catch(ne){console.error("Failed to create user:",ne),m.value.email="Failed to create account. Please try again."}finally{b.value=!1,x.value=""}}function We(){s("userReady",o.currentUser.value)}function Ge(){a.value="switcher"}function ge(te){o.switchUser(te),s("userReady",o.currentUser.value)}function Q(){i.value="",l.value="",u.value="",d.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],f.value=!0,m.value={firstName:"",lastName:"",email:"",classrooms:""},a.value="form"}function se(){o.currentUser.value?a.value="returning":o.hasUsers.value&&(a.value="switcher")}function we(te){const K=d.value.indexOf(te);K===-1?d.value.push(te):d.value.splice(K,1)}return(te,K)=>(p(),h("div",Rg,[c("div",Pg,[c("div",Dg,[c("h1",null,C(q.value),1)]),a.value==="form"?(p(),h("div",Lg,[K[16]||(K[16]=c("h2",null,"Welcome!",-1)),K[17]||(K[17]=c("p",{class:"subtitle"},"Please enter your name to get started.",-1)),c("form",{onSubmit:Zt(Re,["prevent"]),class:"user-form"},[c("div",Bg,[K[8]||(K[8]=c("label",{for:"firstName"},"First Name",-1)),Le(c("input",{id:"firstName","onUpdate:modelValue":K[0]||(K[0]=ne=>i.value=ne),type:"text",placeholder:"Enter your first name",class:ae({"has-error":m.value.firstName}),autocomplete:"given-name"},null,2),[[At,i.value]]),m.value.firstName?(p(),h("span",Ug,C(m.value.firstName),1)):L("",!0)]),c("div",Mg,[K[9]||(K[9]=c("label",{for:"lastName"},"Last Name",-1)),Le(c("input",{id:"lastName","onUpdate:modelValue":K[1]||(K[1]=ne=>l.value=ne),type:"text",placeholder:"Enter your last name",class:ae({"has-error":m.value.lastName}),autocomplete:"family-name"},null,2),[[At,l.value]]),m.value.lastName?(p(),h("span",Fg,C(m.value.lastName),1)):L("",!0)]),c("div",jg,[K[10]||(K[10]=c("label",{for:"email"},"Email Address",-1)),Le(c("input",{id:"email","onUpdate:modelValue":K[2]||(K[2]=ne=>u.value=ne),type:"email",placeholder:"Enter your email address",class:ae({"has-error":m.value.email}),autocomplete:"email"},null,2),[[At,u.value]]),m.value.email?(p(),h("span",Hg,C(m.value.email),1)):L("",!0),K[11]||(K[11]=c("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),R(n).hasMultipleClassrooms.value?(p(),h("div",Vg,[K[12]||(K[12]=c("label",null,"Select Your Class(es)",-1)),c("div",Kg,[(p(!0),h(Z,null,ie(R(n).availableClassrooms.value,ne=>(p(),h("label",{key:ne.id,class:"checkbox-label"},[c("input",{type:"checkbox",value:ne.id,checked:d.value.includes(ne.id),onChange:ze=>we(ne.id)},null,40,Wg),c("span",null,C(ne.name),1)]))),128))])])):R(n).hasSingleClassroom.value?(p(),h("div",Gg,[K[13]||(K[13]=c("label",null,"Class",-1)),c("div",zg,C(R(n).singleClassroom.value.name),1)])):L("",!0),c("div",Jg,[c("label",Yg,[Le(c("input",{type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=ne=>f.value=ne)},null,512),[[ua,f.value]]),K[14]||(K[14]=c("span",null," Preserve my practice history ",-1))]),c("button",{type:"button",class:"details-toggle",onClick:K[4]||(K[4]=ne=>v.value=!v.value)},C(v.value?"Hide details":"What data is preserved?"),1),v.value?(p(),h("div",qg,[...K[15]||(K[15]=[_o('<p data-v-4e48322f>Your practice history is saved online so you can track your progress over time.</p><p data-v-4e48322f><strong data-v-4e48322f>How it works:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Your data is encrypted with your personal key</li><li data-v-4e48322f>Only you and people you authorize can view it</li><li data-v-4e48322f>The site administrator can also access your data</li></ul><p data-v-4e48322f><strong data-v-4e48322f>What&#39;s preserved:</strong></p><ul data-v-4e48322f><li data-v-4e48322f>Which hands you practiced</li><li data-v-4e48322f>Your bidding choices (correct and incorrect)</li><li data-v-4e48322f>When you practiced</li></ul><p class="consent-note" data-v-4e48322f>You can change this setting anytime in Settings.</p>',6)])])):L("",!0)]),c("button",{type:"submit",class:"submit-btn",disabled:!ee.value||b.value},[b.value?(p(),h("span",Qg,C(x.value),1)):(p(),h("span",Zg,"Start Practicing"))],8,Xg)],32),R(o).hasUsers.value?(p(),h("button",{key:0,class:"back-link",onClick:se}," Back to user selection ")):L("",!0)])):a.value==="returning"?(p(),h("div",ey,[c("h2",null,"Welcome back, "+C(j.value)+"!",1),K[18]||(K[18]=c("p",{class:"subtitle"},"Ready to continue practicing?",-1)),c("button",{class:"submit-btn",onClick:We}," Continue "),c("button",{class:"switch-link",onClick:Ge}," Not "+C(j.value)+"? Switch user ",1)])):a.value==="switcher"?(p(),h("div",ty,[K[19]||(K[19]=c("h2",null,"Select User",-1)),K[20]||(K[20]=c("p",{class:"subtitle"},"Choose who's practicing today:",-1)),c("div",sy,[(p(!0),h(Z,null,ie(R(o).allUsers.value,ne=>{var ze;return p(),h("button",{key:ne.id,class:ae(["user-item",{"is-current":ne.id===R(o).currentUserId.value}]),onClick:ct=>ge(ne.id)},[c("span",oy,C(ne.firstName)+" "+C(ne.lastName),1),(ze=ne.classrooms)!=null&&ze.length?(p(),h("span",ry,C(ne.classrooms.join(", ")),1)):L("",!0)],10,ny)}),128))]),c("button",{class:"add-user-btn",onClick:Q}," + Add New User "),R(o).currentUser.value?(p(),h("button",{key:0,class:"back-link",onClick:se}," Cancel ")):L("",!0)])):a.value==="recovery-sent"?(p(),h("div",ay,[K[25]||(K[25]=c("h2",null,"Check Your Email",-1)),c("p",ly,[K[21]||(K[21]=xs(" We found an existing account for ",-1)),c("strong",null,C(E.value),1),K[22]||(K[22]=xs(". ",-1))]),c("div",iy,[c("p",null,C(w.value),1),K[23]||(K[23]=c("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),c("div",cy,[K[24]||(K[24]=c("label",{for:"recoveryCode"},"Recovery Code",-1)),Le(c("input",{id:"recoveryCode","onUpdate:modelValue":K[5]||(K[5]=ne=>k.value=ne),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:da(he,["enter"])},null,544),[[At,k.value]]),c("button",{class:"submit-btn",disabled:k.value.trim().length!==6||b.value,onClick:he},[b.value?(p(),h("span",dy,C(x.value),1)):(p(),h("span",fy,"Restore Account"))],8,uy),$.value?(p(),h("span",my,C($.value),1)):L("",!0)]),c("button",{class:"back-link",onClick:K[6]||(K[6]=ne=>a.value="form")}," Use a different email ")])):a.value==="recovery-claiming"?(p(),h("div",vy,[K[27]||(K[27]=c("h2",null,"Restoring Your Account",-1)),c("p",py,C(x.value),1),$.value?(p(),h("div",hy,[c("p",gy,C($.value),1),c("button",{class:"back-link",onClick:K[7]||(K[7]=ne=>a.value="form")}," Try again ")])):(p(),h("div",yy,[...K[26]||(K[26]=[c("div",{class:"spinner"},null,-1)])]))])):L("",!0)])]))}},_y=pe(by,[["__scopeId","data-v-4e48322f"]]),ps="https://api.bridge-classroom.com/api",Os="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",hs=N([]),Es=N(null),bt=N(!1),je=N(null);function Zn(){async function e(l){bt.value=!0,je.value=null;try{const d=await(await fetch(`${ps}/classrooms?teacher_id=${encodeURIComponent(l)}`,{headers:{"x-api-key":Os}})).json();return d.success?hs.value=d.classrooms:je.value=d.error||"Failed to fetch classrooms",d}catch(u){return console.error("Failed to fetch classrooms:",u),je.value="Unable to connect to server",null}finally{bt.value=!1}}async function t(l,u,d){bt.value=!0,je.value=null;try{const f=await fetch(`${ps}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Os},body:JSON.stringify({teacher_id:l,name:u,description:d||null})});if(!f.ok){const v=await f.text();return je.value=v||`Server error (${f.status})`,{success:!1,error:je.value}}const m=await f.json();return m.success?hs.value=[m.classroom,...hs.value]:je.value=m.error||"Failed to create classroom",m}catch(f){return console.error("Failed to create classroom:",f),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function s(l){bt.value=!0,je.value=null;try{const d=await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}`,{headers:{"x-api-key":Os}})).json();return d.success?Es.value=d.classroom:je.value=d.error||"Failed to fetch classroom",d}catch(u){return console.error("Failed to fetch classroom detail:",u),je.value="Unable to connect to server",null}finally{bt.value=!1}}async function n(l,u){try{const f=await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}/members/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":Os}})).json();if(f.success&&Es.value){Es.value.members=Es.value.members.filter(v=>v.student_id!==u);const m=hs.value.findIndex(v=>v.id===l);m!==-1&&hs.value[m].member_count--}return f}catch(d){return console.error("Failed to remove member:",d),{success:!1,error:"Unable to connect to server"}}}async function o(l){bt.value=!0,je.value=null;try{const u=await fetch(`${ps}/join/${encodeURIComponent(l)}`);return u.status===404?(je.value="Classroom not found",null):await u.json()}catch(u){return console.error("Failed to fetch join info:",u),je.value="Unable to connect to server",null}finally{bt.value=!1}}async function r(l,u,d){bt.value=!0,je.value=null;try{const m=await(await fetch(`${ps}/join/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Os},body:JSON.stringify({student_id:u,encrypted_grant_payload:d})})).json();return m.success||(je.value=m.error||"Failed to join classroom"),m}catch(f){return console.error("Failed to join classroom:",f),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{bt.value=!1}}async function a(l,u){try{return await(await fetch(`${ps}/classrooms/${encodeURIComponent(l)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Os},body:JSON.stringify({student_id:u})})).json()}catch(d){return console.error("Failed to leave classroom:",d),{success:!1,error:"Unable to connect to server"}}}function i(){hs.value=[],Es.value=null,bt.value=!1,je.value=null}return{teacherClassrooms:hs,currentClassroom:Es,loading:bt,error:je,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:r,leaveClassroom:a,reset:i}}const wy={class:"settings-panel"},Sy={class:"settings-body"},Cy={class:"settings-section"},$y={class:"info-row"},ky={class:"info-value"},xy={class:"info-row"},Ay={class:"info-value"},Ny={class:"info-row"},Ty={class:"info-row"},Oy={class:"info-value"},Ey={key:1,class:"edit-form"},Iy={class:"form-group"},Ry={class:"form-group"},Py={class:"form-group"},Dy={class:"checkbox-label"},Ly={key:0,class:"settings-section"},By={class:"assignment-list"},Uy={class:"assignment-header"},My={class:"assignment-name"},Fy={class:"assignment-progress"},jy={class:"progress-bar"},Hy={class:"assignment-meta"},Vy={key:0},Ky={class:"assignment-list"},Wy={class:"assignment-header"},Gy={class:"assignment-name"},zy={class:"assignment-meta"},Jy={key:1,class:"settings-section"},Yy={class:"classroom-id"},qy=["disabled","onClick"],Xy={class:"settings-section"},Qy={class:"toggle-row"},Zy={class:"toggle-label"},eb=["checked"],tb={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Me(),o=zn(),r=Go(),a=Zn(),i=N(!1),l=N(""),u=N(""),d=N(!0),f=I(()=>n.currentUser.value),m=I(()=>{var q;return!f.value||!((q=f.value.classrooms)!=null&&q.length)?"No classroom assigned":f.value.classrooms.map(Y=>{const me=o.availableClassrooms.value.find(fe=>fe.id===Y);return me?me.name:Y}).join(", ")}),v=I(()=>r.getAllAssignments().filter(q=>q.completionPercent<100)),b=I(()=>r.getAllAssignments().filter(q=>q.completionPercent>=100));function x(){f.value&&(l.value=f.value.firstName,u.value=f.value.lastName,d.value=f.value.dataConsent,i.value=!0)}function E(){i.value=!1}function $(){f.value&&(n.updateUser(f.value.id,{firstName:l.value,lastName:u.value,dataConsent:d.value}),i.value=!1)}function w(){s("switchUser")}function k(){i.value=!1,s("close")}const P=N(null);async function H(q){if(!f.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(P.value=q,(await a.leaveClassroom(q,f.value.id)).success){const me=f.value.classrooms||[];n.updateUser(f.value.id,{classrooms:me.filter(fe=>fe!==q)})}P.value=null}function ee(){f.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(f.value.id),o.clearConfig(),s("close"),s("logout"))}function j(q){return q?new Date(q).toLocaleDateString():"N/A"}return(q,Y)=>{var me,fe,he,Re,We,Ge,ge;return e.visible?(p(),h("div",{key:0,class:"settings-overlay",onClick:Zt(k,["self"])},[c("div",wy,[c("div",{class:"settings-header"},[Y[5]||(Y[5]=c("h2",null,"Settings",-1)),c("button",{class:"close-btn",onClick:k,"aria-label":"Close"},"  ")]),c("div",Sy,[c("section",Cy,[Y[12]||(Y[12]=c("h3",null,"Your Profile",-1)),i.value?(p(),h("div",Ey,[c("div",Iy,[Y[10]||(Y[10]=c("label",{for:"editFirstName"},"First Name",-1)),Le(c("input",{id:"editFirstName","onUpdate:modelValue":Y[1]||(Y[1]=Q=>l.value=Q),type:"text"},null,512),[[At,l.value]])]),c("div",Ry,[Y[11]||(Y[11]=c("label",{for:"editLastName"},"Last Name",-1)),Le(c("input",{id:"editLastName","onUpdate:modelValue":Y[2]||(Y[2]=Q=>u.value=Q),type:"text"},null,512),[[At,u.value]])]),c("div",Py,[c("label",Dy,[Le(c("input",{type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=Q=>d.value=Q)},null,512),[[ua,d.value]]),c("span",null,"Share practice results with "+C(R(o).teacherName.value||"teacher"),1)])]),c("div",{class:"button-row"},[c("button",{class:"primary-btn",onClick:$}," Save Changes "),c("button",{class:"secondary-btn",onClick:E}," Cancel ")])])):(p(),h(Z,{key:0},[c("div",$y,[Y[6]||(Y[6]=c("span",{class:"info-label"},"Name",-1)),c("span",ky,C((me=f.value)==null?void 0:me.firstName)+" "+C((fe=f.value)==null?void 0:fe.lastName),1)]),c("div",xy,[Y[7]||(Y[7]=c("span",{class:"info-label"},"Class",-1)),c("span",Ay,C(m.value),1)]),c("div",Ny,[Y[8]||(Y[8]=c("span",{class:"info-label"},"Data Sharing",-1)),c("span",{class:ae(["info-value",(he=f.value)!=null&&he.dataConsent?"enabled":"disabled"])},C((Re=f.value)!=null&&Re.dataConsent?"Enabled":"Disabled"),3)]),c("div",Ty,[Y[9]||(Y[9]=c("span",{class:"info-label"},"Member Since",-1)),c("span",Oy,C(j((We=f.value)==null?void 0:We.createdAt)),1)]),c("div",{class:"button-row"},[c("button",{class:"secondary-btn",onClick:x}," Edit Profile "),c("button",{class:"secondary-btn",onClick:w}," Switch User ")]),((Ge=f.value)==null?void 0:Ge.role)!=="teacher"&&((ge=f.value)==null?void 0:ge.role)!=="admin"?(p(),h("button",{key:0,class:"become-teacher-btn",onClick:Y[0]||(Y[0]=Q=>{s("close"),s("become-teacher")})}," Become a Teacher ")):L("",!0)],64))]),v.value.length||b.value.length?(p(),h("section",Ly,[Y[16]||(Y[16]=c("h3",null,"Assignments",-1)),v.value.length?(p(),h(Z,{key:0},[Y[13]||(Y[13]=c("h4",null,"Active",-1)),c("div",By,[(p(!0),h(Z,null,ie(v.value,Q=>(p(),h("div",{key:Q.id,class:"assignment-item"},[c("div",Uy,[c("span",My,C(Q.name),1),c("span",Fy,C(Q.completionPercent)+"%",1)]),c("div",jy,[c("div",{class:"progress-fill",style:ds({width:`${Q.completionPercent}%`})},null,4)]),c("div",Hy,[Q.dueDate?(p(),h("span",Vy," Due: "+C(j(Q.dueDate)),1)):L("",!0),c("span",null,C(Q.completedDeals)+"/"+C(Q.totalDeals)+" deals ",1)])]))),128))])],64)):L("",!0),b.value.length?(p(),h(Z,{key:1},[Y[15]||(Y[15]=c("h4",null,"Completed",-1)),c("div",Ky,[(p(!0),h(Z,null,ie(b.value,Q=>(p(),h("div",{key:Q.id,class:"assignment-item completed"},[c("div",Wy,[c("span",Gy,C(Q.name),1),Y[14]||(Y[14]=c("span",{class:"assignment-check"},"",-1))]),c("div",zy," Completed "+C(j(Q.lastPracticedAt)),1)]))),128))])],64)):L("",!0)])):L("",!0),f.value&&f.value.classrooms&&f.value.classrooms.length?(p(),h("section",Jy,[Y[17]||(Y[17]=c("h3",null,"My Classrooms",-1)),(p(!0),h(Z,null,ie(f.value.classrooms,Q=>(p(),h("div",{key:Q,class:"classroom-row"},[c("span",Yy,C(Q),1),c("button",{class:"leave-btn",disabled:P.value===Q,onClick:se=>H(Q)},C(P.value===Q?"Leaving...":"Leave"),9,qy)]))),128))])):L("",!0),c("section",Xy,[Y[19]||(Y[19]=c("h3",null,"Display Options",-1)),c("div",Qy,[c("label",Zy,[c("input",{type:"checkbox",checked:R(o).showLoadPbnOption.value,onChange:Y[4]||(Y[4]=Q=>R(o).setUIPref("showLoadPbnOption",Q.target.checked))},null,40,eb),Y[18]||(Y[18]=c("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),c("section",{class:"settings-section"},[Y[20]||(Y[20]=c("h3",null,"Data & Privacy",-1)),Y[21]||(Y[21]=c("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),c("button",{class:"remove-device-btn",onClick:ee}," Remove account from this device "),Y[22]||(Y[22]=c("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):L("",!0)}}},sb=pe(tb,[["__scopeId","data-v-57179473"]]),nb={class:"banner-content"},ob={class:"assignment-info"},rb={class:"assignment-title"},ab={class:"assignment-name"},lb={class:"assignment-meta"},ib={class:"progress-text"},cb={class:"progress-bar"},ub={key:0,class:"complete-badge"},db={class:"return-text"},fb={__name:"AssignmentBanner",setup(e){const t=Go(),s=I(()=>t.currentAssignment.value),n=I(()=>t.hasActiveAssignment.value),o=I(()=>t.assignmentProgress.value),r=I(()=>t.isAssignmentComplete.value),a=I(()=>t.inAssignmentMode.value),i=I(()=>{var x;if(!((x=s.value)!=null&&x.dueDate))return null;const m=new Date(s.value.dueDate);return Math.ceil((m-new Date)/(1e3*60*60*24))}),l=I(()=>i.value===null?null:i.value<0?"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),u=I(()=>i.value===null?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function d(){t.exitAssignmentMode()}function f(){t.returnToAssignmentMode()}return(m,v)=>{var b,x;return n.value&&a.value?(p(),h("div",{key:0,class:ae(["assignment-banner",{complete:r.value}])},[c("div",nb,[c("div",ob,[c("div",rb,[v[0]||(v[0]=c("span",{class:"assignment-label"},"Assignment:",-1)),c("span",ab,C((b=s.value)==null?void 0:b.name),1)]),c("div",lb,[c("span",ib,C(o.value.completed)+" of "+C(o.value.total)+" deals ("+C(o.value.percent)+"%) ",1),l.value?(p(),h("span",{key:0,class:ae(["due-text",u.value])},C(l.value),3)):L("",!0)])]),c("div",cb,[c("div",{class:ae(["progress-fill",{complete:r.value}]),style:ds({width:`${o.value.percent}%`})},null,6)]),c("button",{class:"exit-btn",onClick:d,title:"Practice freely without assignment tracking"}," Free Practice ")]),r.value?(p(),h("div",ub," Complete! ")):L("",!0)],2)):s.value&&!a.value?(p(),h("div",{key:1,class:"return-banner",onClick:f},[v[1]||(v[1]=c("span",{class:"return-icon"},"",-1)),c("span",db," Return to assignment: "+C((x=s.value)==null?void 0:x.name)+" ("+C(o.value.percent)+"% complete) ",1)])):L("",!0)}}},mb=pe(fb,[["__scopeId","data-v-a4095a6a"]]),vb=["innerHTML"],pb={__name:"AnnouncementBanner",setup(e){const t=Aa(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(a,i)=>{const l=s[i.toLowerCase()];return l?`<span class="ann-circle" style="background:${l.bg};color:${l.fg}"></span>`:a})}return(o,r)=>R(t).announcement.value&&R(t).dismissed.value!==R(t).announcement.value.id?(p(),h("div",{key:0,class:ae(["announcement-banner",R(t).announcement.value.type])},[c("span",{class:"announcement-text",innerHTML:n(R(t).announcement.value.message)},null,8,vb),c("button",{class:"dismiss-btn",onClick:r[0]||(r[0]=a=>R(t).dismiss()),title:"Dismiss"},"")],2)):L("",!0)}},hb=pe(pb,[["__scopeId","data-v-4b12409b"]]),gb={key:0,class:"status-content"},yb={key:1,class:"status-content offline"},bb={key:0,class:"badge"},_b={key:2,class:"status-content error"},wb={class:"status-text"},Sb={key:0,class:"badge"},Cb={key:3,class:"status-content pending"},$b={class:"status-text"},kb={key:4,class:"status-content synced"},xb={__name:"SyncStatus",setup(e){const t=Gc(),s=fs(),n=I(()=>s.pendingCount.value),o=I(()=>t.registrationFailed.value?"Not registered":"Sync failed"),r=I(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function a(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(l,u)=>(p(),h("div",{class:ae(["sync-status",r.value]),onClick:a},[R(t).isSyncing.value?(p(),h("div",gb,[...u[0]||(u[0]=[c("span",{class:"spinner"},null,-1),c("span",{class:"status-text"},"Syncing...",-1)])])):R(t).isOffline.value?(p(),h("div",yb,[u[1]||(u[1]=c("span",{class:"icon"},"",-1)),u[2]||(u[2]=c("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),h("span",bb,C(n.value),1)):L("",!0)])):R(t).hasError.value?(p(),h("div",_b,[u[3]||(u[3]=c("span",{class:"icon"},"",-1)),c("span",wb,C(o.value),1),n.value>0?(p(),h("span",Sb,C(n.value),1)):L("",!0),c("button",{class:"retry-btn",onClick:Zt(i,["stop"])},"Retry")])):n.value>0?(p(),h("div",Cb,[u[4]||(u[4]=c("span",{class:"icon"},"",-1)),c("span",$b,C(n.value)+" pending",1)])):(p(),h("div",kb,[...u[5]||(u[5]=[c("span",{class:"icon"},"",-1),c("span",{class:"status-text"},"Synced",-1)])]))],2))}},Ab=pe(xb,[["__scopeId","data-v-8457149a"]]),Nb={class:"progress-dashboard"},Tb={class:"dashboard-header"},Ob={key:0,class:"loading"},Eb={key:1,class:"error-state"},Ib={key:2,class:"empty-state"},Rb={key:3,class:"dashboard-content"},Pb={class:"day-header"},Db={class:"day-date"},Lb={class:"day-summary"},Bb={class:"day-lessons"},Ub={class:"day-lesson-name"},Mb={class:"day-lesson-counts"},Fb={key:0,class:"count count-correct"},jb={key:1,class:"count count-incorrect"},Hb={class:"observation-total"},Vb={class:"dashboard-actions"},Kb={__name:"ProgressDashboard",emits:["close"],setup(e,{emit:t}){const s=_a(),n=Jt();gt(async()=>{await s.fetchProgress()});async function o(){await s.fetchProgress(!0)}const r=I(()=>{const l=s.getObservationsByDate();return Object.keys(l).sort().reverse().slice(0,10).map(d=>{var x,E;const f=l[d],m={};for(const $ of f){const w=$.deal_subfolder||((x=$.deal)==null?void 0:x.subfolder),k=$.deal_number??((E=$.deal)==null?void 0:E.deal_number);!w||k==null||(m[w]||(m[w]={}),m[w][k]||(m[w][k]=[]),m[w][k].push($))}const v=Object.entries(m).map(([$,w])=>{let k=0,P=0;for(const H of Object.values(w))H.every(j=>j.correct)?k++:P++;return{subfolder:$,correctCount:k,incorrectCount:P}}).sort(($,w)=>a($.subfolder).localeCompare(a(w.subfolder))),b=v.reduce(($,w)=>$+w.correctCount+w.incorrectCount,0);return{date:d,lessons:v,totalBoards:b}})});function a(l){return n.formatLessonName(l)}function i(l){const u=new Date(l+"T00:00:00"),d=new Date,f=new Date(d);f.setDate(f.getDate()-1);const m=d.toISOString().split("T")[0],v=f.toISOString().split("T")[0];return l===m?"Today":l===v?"Yesterday":u.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}return(l,u)=>(p(),h("div",Nb,[c("header",Tb,[u[3]||(u[3]=c("h2",null,"Your Progress",-1)),c("button",{class:"close-btn",onClick:u[0]||(u[0]=d=>l.$emit("close"))},"")]),R(s).isLoading.value?(p(),h("div",Ob,[...u[4]||(u[4]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading your progress...",-1)])])):R(s).hasError.value?(p(),h("div",Eb,[c("p",null,"Failed to load progress: "+C(R(s).error.value),1),c("button",{onClick:o},"Try Again")])):R(s).hasData.value?(p(),h("div",Rb,[(p(!0),h(Z,null,ie(r.value,d=>(p(),h("div",{key:d.date,class:"day-card"},[c("div",Pb,[c("span",Db,C(i(d.date)),1),c("span",Lb,C(d.totalBoards)+" board"+C(d.totalBoards!==1?"s":"")+" practiced",1)]),c("div",Bb,[(p(!0),h(Z,null,ie(d.lessons,f=>(p(),h("div",{key:f.subfolder,class:"day-lesson-row"},[c("span",Ub,C(a(f.subfolder)),1),c("div",Mb,[f.correctCount?(p(),h("span",Fb,C(f.correctCount),1)):L("",!0),f.incorrectCount?(p(),h("span",jb,C(f.incorrectCount),1)):L("",!0)])]))),128))])]))),128)),c("div",Hb,C(R(s).totalObservations.value)+" observations",1),c("div",Vb,[c("button",{class:"secondary-btn",onClick:o}," Refresh Data "),c("button",{class:"primary-btn",onClick:u[2]||(u[2]=d=>l.$emit("close"))}," Continue Practicing ")])])):(p(),h("div",Ib,[u[5]||(u[5]=c("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=c("p",null,"Complete some practice deals to see your progress here!",-1)),c("button",{class:"primary-btn",onClick:u[1]||(u[1]=d=>l.$emit("close"))},"Start Practicing")]))]))}},Wb=pe(Kb,[["__scopeId","data-v-c70ddcce"]]),Gb="test-user-mastery",zb="test-classroom",Jb="Negative_Double",Yb="competitive_bidding/negative_double";let Hr=0;function Ve({boardNumber:e,correct:t,timestamp:s}){return Hr++,{id:`mastery-test-${Hr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Gb,skill_path:Yb,correct:t,deal_subfolder:Jb,deal_number:e,classroom:zb}}function ut(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function ao(e){return new Date(Date.now()-e*60*1e3).toISOString()}function qb(){Hr=0;const e=[];e.push(Ve({boardNumber:2,correct:!0,timestamp:ut(5)}),Ve({boardNumber:2,correct:!1,timestamp:ut(1)})),e.push(Ve({boardNumber:3,correct:!1,timestamp:ao(30)}),Ve({boardNumber:3,correct:!0,timestamp:ao(20)})),e.push(Ve({boardNumber:4,correct:!1,timestamp:ao(90)}),Ve({boardNumber:4,correct:!0,timestamp:ao(60)})),e.push(Ve({boardNumber:5,correct:!1,timestamp:ut(10)}),Ve({boardNumber:5,correct:!0,timestamp:ut(2)})),e.push(Ve({boardNumber:6,correct:!0,timestamp:ut(14)}),Ve({boardNumber:6,correct:!0,timestamp:ut(7)})),e.push(Ve({boardNumber:7,correct:!0,timestamp:ut(21)}),Ve({boardNumber:7,correct:!0,timestamp:ut(14)}),Ve({boardNumber:7,correct:!0,timestamp:ut(7)})),e.push(Ve({boardNumber:8,correct:!0,timestamp:ut(28)}),Ve({boardNumber:8,correct:!0,timestamp:ut(21)}),Ve({boardNumber:8,correct:!0,timestamp:ut(14)}),Ve({boardNumber:8,correct:!1,timestamp:ut(1)}));const t=[1,2,3,4,5].map(s=>({...Ve({boardNumber:s,correct:!0,timestamp:ut(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Xb=["onClick","title"],Qb={key:0,class:"medal gold-medal"},Zb={key:1,class:"medal silver-medal"},e_={class:"board-num"},t_={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceRedBoard:{type:Number,default:null},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=rn(),r=I(()=>{const i=o.computeBoardMastery(o.getObservations(),s.lessonSubfolder,s.boardNumbers);if(s.forceRedBoard!=null){const l=i.find(u=>u.boardNumber===s.forceRedBoard);l&&(l.status="red")}return i});function a(i){const l={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"},u={none:"",silver:" | Silver accomplishment",gold:" | Gold accomplishment"};return`Board ${i.boardNumber}: ${l[i.status]}${u[i.achievement]}`}return(i,l)=>e.boardNumbers.length>0?(p(),h("div",{key:0,class:ae(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),h("button",{key:0,class:"intro-btn",onClick:l[0]||(l[0]=u=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):L("",!0),(p(!0),h(Z,null,ie(r.value,(u,d)=>(p(),h("div",{key:u.boardNumber,class:ae(["board-indicator",[`status-${u.status}`,{active:d===e.currentIndex},{"has-medal":u.achievement!=="none"},{"medal-gold":u.achievement==="gold"},{"medal-silver":u.achievement==="silver"}]]),onClick:f=>n("goto",d),title:a(u)},[u.achievement==="gold"?(p(),h("span",Qb,"")):u.achievement==="silver"?(p(),h("span",Zb,"")):L("",!0),c("span",e_,C(u.boardNumber),1)],10,Xb))),128))],2)):L("",!0)}},Jc=pe(t_,[["__scopeId","data-v-820a0f0c"]]),s_={class:"accomplishments-view"},n_={class:"view-header"},o_={key:0,class:"user-selector"},r_=["value"],a_=["value"],l_={key:1,class:"loading-state"},i_={key:2,class:"error-state"},c_={key:3,class:"empty-state"},u_={key:4,class:"view-content"},d_={class:"controls-row"},f_={class:"tabs"},m_={key:0,class:"tab-content"},v_={key:0,class:"no-data"},p_={key:1,class:"lesson-list"},h_={class:"lesson-header"},g_={class:"lesson-name"},y_={key:1,class:"tab-content"},b_={key:0,class:"no-data"},__={key:1,class:"taxon-list"},w_={class:"taxon-header"},S_={class:"taxon-category"},C_={class:"taxon-name"},$_={class:"taxon-counts"},k_={class:"taxon-stat correct"},x_={class:"taxon-stat incorrect"},A_={class:"taxon-stat total"},N_={class:"view-actions"},T_={key:5,class:"test-mode-banner"},O_={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=Jt(),o=rn(),a=new URLSearchParams(window.location.search).get("test");gt(async()=>{a==="mastery"||a==="accomplishments"?n.enableTestMode(qb()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function l(m){await n.selectUser(m)}function u(m,v){s("navigate-to-deal",{subfolder:m,dealNumber:v})}const d=I(()=>{const m=o.getObservations();return o.extractLessonsFromObservations(m).map(b=>{const x=o.computeBoardMastery(m,b.subfolder,b.boardNumbers),E=o.computeLessonAchievement(x);return{...b,achievement:E.achievement}}).sort((b,x)=>f(b.subfolder).localeCompare(f(x.subfolder)))});ft(d,m=>{o.fetchMissingBoardCounts(m.map(v=>v.subfolder))},{immediate:!0});function f(m){return n.formatLessonName(m)}return(m,v)=>(p(),h("div",s_,[c("header",n_,[v[6]||(v[6]=c("h2",null,"Accomplishments",-1)),c("button",{class:"close-btn",onClick:v[0]||(v[0]=b=>m.$emit("close"))},"")]),R(n).canViewOtherUsers.value?(p(),h("div",o_,[v[7]||(v[7]=c("label",{for:"user-select"},"Viewing:",-1)),c("select",{id:"user-select",value:R(n).selectedUserId.value,onChange:v[1]||(v[1]=b=>l(b.target.value))},[(p(!0),h(Z,null,ie(R(n).accessibleUsers.value,b=>(p(),h("option",{key:b.id,value:b.id},C(b.name)+C(b.isSelf?" (You)":""),9,a_))),128))],40,r_)])):L("",!0),R(n).loading.value?(p(),h("div",l_,[...v[8]||(v[8]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading accomplishments...",-1)])])):R(n).error.value?(p(),h("div",i_,[c("p",null,"Failed to load: "+C(R(n).error.value),1),c("button",{onClick:i},"Try Again")])):R(n).hasData.value?(p(),h("div",u_,[c("div",d_,[c("div",f_,[c("button",{class:ae(["tab-btn",{active:R(n).activeTab.value==="lessons"}]),onClick:v[3]||(v[3]=b=>R(n).activeTab.value="lessons")}," Lessons ",2),c("button",{class:ae(["tab-btn",{active:R(n).activeTab.value==="taxons"}]),onClick:v[4]||(v[4]=b=>R(n).activeTab.value="taxons")}," Taxons ",2)])]),R(n).activeTab.value==="lessons"?(p(),h("div",m_,[d.value.length===0?(p(),h("div",v_," No lesson data available yet. ")):(p(),h("div",p_,[(p(!0),h(Z,null,ie(d.value,b=>(p(),h("div",{key:b.subfolder,class:"lesson-row"},[c("div",h_,[c("span",g_,C(f(b.subfolder)),1),b.achievement!=="none"?(p(),h("span",{key:0,class:ae(["achievement-badge",b.achievement])},"  "+C(b.achievement==="gold"?"Gold":"Silver"),3)):L("",!0)]),ce(Jc,{boardNumbers:b.boardNumbers,lessonSubfolder:b.subfolder,currentIndex:-1,alignLeft:!0,onGoto:x=>u(b.subfolder,b.boardNumbers[x])},null,8,["boardNumbers","lessonSubfolder","onGoto"])]))),128))]))])):L("",!0),R(n).activeTab.value==="taxons"?(p(),h("div",y_,[R(n).filteredTaxonStats.value.length===0?(p(),h("div",b_," No skill data available yet. ")):(p(),h("div",__,[(p(!0),h(Z,null,ie(R(n).filteredTaxonStats.value,b=>(p(),h("div",{key:b.skillPath,class:"taxon-card"},[c("div",w_,[c("span",S_,C(b.categoryName),1),c("span",C_,C(b.skillName),1)]),c("div",$_,[c("span",k_,C(b.correct),1),c("span",x_,C(b.incorrect),1),c("span",A_,C(b.total)+" total",1)])]))),128))]))])):L("",!0),c("div",N_,[c("button",{class:"secondary-btn",onClick:i}," Refresh "),c("button",{class:"primary-btn",onClick:v[5]||(v[5]=b=>m.$emit("close"))}," Done ")])])):(p(),h("div",c_,[v[9]||(v[9]=c("h3",null,"No Practice Data Yet",-1)),v[10]||(v[10]=c("p",null,"Complete some practice deals to see your accomplishments here!",-1)),c("button",{class:"primary-btn",onClick:v[2]||(v[2]=b=>m.$emit("close"))},"Start Practicing")])),R(n).useTestData.value?(p(),h("div",T_," Test Mode - Using Generated Data ")):L("",!0)]))}},E_=pe(O_,[["__scopeId","data-v-38e59c14"]]),Yc="bridge-classroom-anon-mode",I_="BridgeClassroom-Anon",dr=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],jl=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function R_(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function P_(e,t){const s=`${I_}:${e} ${t}`,n=R_(s),o=Number(n%BigInt(dr.length)),r=Number(n/BigInt(dr.length)%BigInt(jl.length));return{firstName:dr[o],lastName:jl[r]}}const pn=N(localStorage.getItem(Yc)==="true");function D_(){function e(){pn.value=!pn.value,localStorage.setItem(Yc,pn.value.toString())}function t(o){return pn.value?P_(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:r,lastName:a}=t(o);return`${r} ${a}`}function n(o){const{firstName:r,lastName:a}=t(o),i=(r==null?void 0:r.charAt(0))||"",l=(a==null?void 0:a.charAt(0))||"";return(i+l).toUpperCase()||"?"}return{isAnonymized:pn,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const L_={class:"teacher-student-list"},B_={class:"teacher-header"},U_={class:"header-actions"},M_=["value"],F_={key:0,class:"loading-state"},j_={key:1,class:"error-state"},H_={key:2,class:"empty-state"},V_={key:3,class:"empty-state"},K_={key:4,class:"student-table-wrap"},W_={class:"student-table"},G_=["onClick"],z_={class:"col-name"},J_={class:"student-name-cell"},Y_={class:"avatar"},q_={class:"col-mastery"},X_={class:"mastery-pills"},Q_={key:0,class:"pill pill-green"},Z_={key:1,class:"pill pill-orange"},e1={key:2,class:"pill pill-yellow"},t1={key:3,class:"pill pill-red"},s1={key:4,class:"no-data-label"},n1={class:"col-active"},o1={class:"col-lessons"},r1={class:"recent-lessons"},a1={key:0,class:"no-data-label"},l1={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=Jn(),n=Zn(),o=Me(),r=D_(),a=N("all"),i=N({});gt(async()=>{await s.loadAllStudentSummaries(),await l()});async function l(){const $=o.currentUser.value;if(!$)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms($.id);const w={};await Promise.all(n.teacherClassrooms.value.map(async k=>{const P=await n.fetchClassroomDetail(k.id);P!=null&&P.success&&(w[k.id]=new Set(P.classroom.members.map(H=>H.student_id)))})),i.value=w}async function u(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await l()}const d=I(()=>{const $=new Set;for(const w of Object.values(i.value))for(const k of w)$.add(k);return $}),f=I(()=>{const $=s.students.value;if(a.value==="all")return $;if(a.value==="none")return $.filter(k=>!d.value.has(k.id));const w=i.value[a.value];return w?$.filter(k=>w.has(k.id)):$}),m=I(()=>[...f.value].sort(($,w)=>{var H,ee;const k=((H=v.value[$.id])==null?void 0:H.lastObservationTime)||"",P=((ee=v.value[w.id])==null?void 0:ee.lastObservationTime)||"";return P!==k?P.localeCompare(k):x($).localeCompare(x(w))})),v=I(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentMasterySummary(w.id);return $}),b=I(()=>{const $={};for(const w of s.students.value)$[w.id]=s.getStudentRecentLessons(w.id);return $});function x($){return r.displayFullName($)}function E($){return r.displayInitials($)}return($,w)=>(p(),h("div",L_,[c("header",B_,[w[5]||(w[5]=c("h2",null,"My Students",-1)),c("div",U_,[R(n).teacherClassrooms.value.length?Le((p(),h("select",{key:0,"onUpdate:modelValue":w[0]||(w[0]=k=>a.value=k),class:"filter-select"},[w[3]||(w[3]=c("option",{value:"all"},"All Students",-1)),(p(!0),h(Z,null,ie(R(n).teacherClassrooms.value,k=>(p(),h("option",{key:k.id,value:k.id},C(k.name),9,M_))),128)),w[4]||(w[4]=c("option",{value:"none"},"No Classroom",-1))],512)),[[Tn,a.value]]):L("",!0),c("button",{class:ae(["anon-btn",{active:R(r).isAnonymized.value}]),onClick:w[1]||(w[1]=k=>R(r).toggleAnonymize())},C(R(r).isAnonymized.value?"Clear":"Anon"),3),c("button",{class:"secondary-btn",onClick:u},"Refresh"),c("button",{class:"secondary-btn",onClick:w[2]||(w[2]=k=>$.$emit("close"))},"Back")])]),R(s).loading.value?(p(),h("div",F_,[...w[6]||(w[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):R(s).error.value?(p(),h("div",j_,[c("p",null,"Failed to load: "+C(R(s).error.value),1),c("button",{onClick:u},"Try Again")])):R(s).students.value.length===0?(p(),h("div",H_,[...w[7]||(w[7]=[c("h3",null,"No Students Yet",-1),c("p",null,"Students will appear here once they register and grant you access.",-1)])])):m.value.length===0?(p(),h("div",V_,[...w[8]||(w[8]=[c("h3",null,"No Matching Students",-1),c("p",null,"No students match the selected filter.",-1)])])):(p(),h("div",K_,[c("table",W_,[w[9]||(w[9]=c("thead",null,[c("tr",null,[c("th",{class:"col-name"},"Student"),c("th",{class:"col-mastery"},"Mastery"),c("th",{class:"col-active"},"Last Active"),c("th",{class:"col-lessons"},"Recent Lessons")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(m.value,k=>{var P,H,ee,j,q,Y,me;return p(),h("tr",{key:k.id,class:"student-row",onClick:fe=>$.$emit("select-student",k.id,x(k))},[c("td",z_,[c("div",J_,[c("div",Y_,C(E(k)),1),c("span",null,C(x(k)),1)])]),c("td",q_,[c("div",X_,[(P=v.value[k.id])!=null&&P.green?(p(),h("span",Q_,C(v.value[k.id].green),1)):L("",!0),(H=v.value[k.id])!=null&&H.orange?(p(),h("span",Z_,C(v.value[k.id].orange),1)):L("",!0),(ee=v.value[k.id])!=null&&ee.yellow?(p(),h("span",e1,C(v.value[k.id].yellow),1)):L("",!0),(j=v.value[k.id])!=null&&j.red?(p(),h("span",t1,C(v.value[k.id].red),1)):L("",!0),(q=v.value[k.id])!=null&&q.total?L("",!0):(p(),h("span",s1,"No data"))])]),c("td",n1,C(R(s).formatTimeSince((Y=v.value[k.id])==null?void 0:Y.lastObservationTime)),1),c("td",o1,[c("div",r1,[(p(!0),h(Z,null,ie(b.value[k.id],(fe,he)=>(p(),h("span",{key:he,class:"lesson-tag"},C(fe),1))),128)),(me=b.value[k.id])!=null&&me.length?L("",!0):(p(),h("span",a1,"-"))])])],8,G_)}),128))])])]))]))}},i1=pe(l1,[["__scopeId","data-v-dd6d8e66"]]),c1={class:"teacher-student-detail"},u1={class:"detail-header"},d1={class:"student-info"},f1={class:"avatar"},m1={class:"last-active"},v1={key:0,class:"loading-state"},p1={key:1,class:"detail-content"},h1={key:0,class:"stats-row"},g1={class:"stat stat-green"},y1={key:0,class:"stat stat-orange"},b1={key:1,class:"stat stat-yellow"},_1={key:2,class:"stat stat-red"},w1={key:3,class:"stat stat-grey"},S1={class:"mastery-section"},C1={key:0,class:"no-data"},$1={key:1,class:"lesson-list"},k1={class:"lesson-header"},x1=["onClick"],A1={class:"mastery-strip"},N1=["title","onClick"],T1={key:0,class:"medal gold-medal"},O1={key:1,class:"medal silver-medal"},E1={class:"board-num"},I1={class:"progress-section"},R1={key:0,class:"no-data"},P1={key:1},D1={class:"day-header"},L1={class:"day-date"},B1={class:"day-summary"},U1={class:"day-lessons"},M1=["onClick"],F1={class:"day-lesson-counts"},j1={key:0,class:"count count-green"},H1={key:1,class:"count count-yellow"},V1={key:2,class:"count count-orange"},K1={key:3,class:"count count-red"},W1={class:"observation-total"},G1={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=Jn(),r=rn(),a=Jt(),i=N(!1),l=I(()=>s.studentName.split(" ").map(k=>k[0]||"").join("").toUpperCase());gt(async()=>{o.studentObservations.value[s.studentId]||(i.value=!0,await o.fetchStudentObservations(s.studentId),i.value=!1)});const u=I(()=>o.studentObservations.value[s.studentId]||[]),d=I(()=>o.getStudentMasterySummary(s.studentId)),f=I(()=>o.formatTimeSince(d.value.lastObservationTime)),m=I(()=>{const w=u.value;return w.length===0?[]:r.extractLessonsFromObservations(w).map(P=>{const H=r.computeBoardMastery(w,P.subfolder,P.boardNumbers),ee=r.computeLessonAchievement(H);return{...P,boardMastery:H,achievement:ee.achievement}}).sort((P,H)=>b(P.subfolder).localeCompare(b(H.subfolder)))});ft(m,w=>{r.fetchMissingBoardCounts(w.map(k=>k.subfolder))},{immediate:!0});const v=I(()=>{const w=u.value;if(w.length===0)return[];const k={};for(const H of w){const ee=x(H.timestamp);k[ee]||(k[ee]=[]),k[ee].push(H)}return Object.keys(k).sort().reverse().slice(0,10).map(H=>{const ee=k[H],j={};for(const me of ee){const fe=me.deal_subfolder,he=me.deal_number;!fe||he==null||(j[fe]||(j[fe]={}),j[fe][he]||(j[fe][he]=[]),j[fe][he].push(me))}const q=Object.entries(j).map(([me,fe])=>{const he={green:0,yellow:0,orange:0,red:0};for(const[Re,We]of Object.entries(fe)){const Ge=w.filter(Q=>Q.deal_subfolder===me&&Q.deal_number===Number(Re)).sort((Q,se)=>Q.timestamp.localeCompare(se.timestamp)),ge=r.calculateCurrentStatus(Ge);he[ge]!==void 0?he[ge]++:he.green++}return{subfolder:me,...he}}).sort((me,fe)=>b(me.subfolder).localeCompare(b(fe.subfolder))),Y=q.reduce((me,fe)=>me+fe.green+fe.yellow+fe.orange+fe.red,0);return{date:H,lessons:q,totalBoards:Y}})});function b(w){return a.formatLessonName(w)}function x(w){const k=new Date(w),P=k.getFullYear(),H=String(k.getMonth()+1).padStart(2,"0"),ee=String(k.getDate()).padStart(2,"0");return`${P}-${H}-${ee}`}function E(w){const k=new Date(w+"T00:00:00"),P=new Date,H=x(P),ee=new Date(P);ee.setDate(ee.getDate()-1);const j=x(ee);return w===H?"Today":w===j?"Yesterday":k.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function $(w){const k={grey:"Not attempted",red:"Incorrect",yellow:"Corrected today",orange:"Ready to retry",green:"Correct"};return`Board ${w.boardNumber}: ${k[w.status]}`}return(w,k)=>(p(),h("div",c1,[c("header",u1,[c("button",{class:"back-btn",onClick:k[0]||(k[0]=P=>w.$emit("back"))}," Students"),c("div",d1,[c("div",f1,C(l.value),1),c("div",null,[c("h2",null,C(e.studentName),1),c("span",m1,"Last active: "+C(f.value),1)])])]),i.value?(p(),h("div",v1,[...k[1]||(k[1]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading student data...",-1)])])):(p(),h("div",p1,[d.value.total>0?(p(),h("div",h1,[c("div",g1,C(d.value.green)+" Green",1),d.value.orange?(p(),h("div",y1,C(d.value.orange)+" Orange",1)):L("",!0),d.value.yellow?(p(),h("div",b1,C(d.value.yellow)+" Yellow",1)):L("",!0),d.value.red?(p(),h("div",_1,C(d.value.red)+" Red",1)):L("",!0),d.value.grey?(p(),h("div",w1,C(d.value.grey)+" Grey",1)):L("",!0)])):L("",!0),c("section",S1,[k[2]||(k[2]=c("h3",null,"Lesson Mastery",-1)),m.value.length===0?(p(),h("div",C1," No lesson data available yet. ")):(p(),h("div",$1,[(p(!0),h(Z,null,ie(m.value,P=>(p(),h("div",{key:P.subfolder,class:"lesson-row"},[c("div",k1,[c("button",{class:"lesson-name lesson-link",onClick:H=>n("navigate-to-lesson",P.subfolder)},C(b(P.subfolder)),9,x1),P.achievement!=="none"?(p(),h("span",{key:0,class:ae(["achievement-badge",P.achievement])},"  "+C(P.achievement==="gold"?"Gold":"Silver"),3)):L("",!0)]),c("div",A1,[(p(!0),h(Z,null,ie(P.boardMastery,H=>(p(),h("div",{key:H.boardNumber,class:ae(["board-circle board-clickable","status-"+H.status]),title:$(H),onClick:ee=>n("navigate-to-lesson",P.subfolder,H.boardNumber)},[H.achievement==="gold"?(p(),h("span",T1,"")):H.achievement==="silver"?(p(),h("span",O1,"")):L("",!0),c("span",E1,C(H.boardNumber),1)],10,N1))),128))])]))),128))]))]),c("section",I1,[k[3]||(k[3]=c("h3",null,"Recent Activity",-1)),v.value.length===0?(p(),h("div",R1," No activity recorded yet. ")):(p(),h("div",P1,[(p(!0),h(Z,null,ie(v.value,P=>(p(),h("div",{key:P.date,class:"day-card"},[c("div",D1,[c("span",L1,C(E(P.date)),1),c("span",B1,C(P.totalBoards)+" board"+C(P.totalBoards!==1?"s":""),1)]),c("div",U1,[(p(!0),h(Z,null,ie(P.lessons,H=>(p(),h("div",{key:H.subfolder,class:"day-lesson-row"},[c("button",{class:"day-lesson-name lesson-link",onClick:ee=>n("navigate-to-lesson",H.subfolder)},C(b(H.subfolder)),9,M1),c("div",F1,[H.green?(p(),h("span",j1,C(H.green),1)):L("",!0),H.yellow?(p(),h("span",H1,C(H.yellow),1)):L("",!0),H.orange?(p(),h("span",V1,C(H.orange),1)):L("",!0),H.red?(p(),h("span",K1,C(H.red),1)):L("",!0)])]))),128))])]))),128))]))]),c("div",W1,C(u.value.length)+" observations",1)]))]))}},z1=pe(G1,[["__scopeId","data-v-356ee2ef"]]),J1={key:0,class:"lesson-browser-loading"},Y1={key:1,class:"lesson-browser-error"},q1={class:"lesson-browser"},X1={class:"browser-header"},Q1={class:"browser-content"},Z1=["onClick"],ew={class:"expand-icon"},tw={class:"category-name"},sw={class:"category-count"},nw={key:0,class:"lesson-list"},ow=["onClick"],rw={class:"lesson-name"},aw={class:"lesson-description"},lw={key:0,class:"error-message"},iw={key:3,class:"lesson-browser-inline"},cw={class:"browser-content-inline"},uw=["onClick"],dw={class:"expand-icon"},fw={class:"category-name"},mw={class:"category-count"},vw={key:0,class:"lesson-list"},pw=["onClick"],hw={class:"lesson-name"},gw={class:"lesson-description"},yw={key:0,class:"error-message-inline"},bw={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=N(null),r=N(null),a=N(!1),i=N([]),l=N(null),u=N(null);ft(()=>[s.visible,s.collection],([b,x])=>{b&&x&&!o.value&&d()},{immediate:!0});async function d(){var b;if(!((b=s.collection)!=null&&b.tocUrl)){r.value="No collection specified";return}a.value=!0,r.value=null;try{const x=await fetch(s.collection.tocUrl);if(!x.ok)throw new Error(`Failed to load: ${x.statusText}`);o.value=await x.json()}catch(x){console.error("Error fetching TOC:",x),r.value=`Could not load lesson catalog. ${x.message}`}finally{a.value=!1}}function f(b){const x=i.value.indexOf(b);x>=0?i.value.splice(x,1):i.value.push(b)}function m(b){return b.includes("/")?b.split("/").pop():b}async function v(b,x){var E;u.value=null,l.value=b.id;try{const $=((E=s.collection)==null?void 0:E.baseUrl)||"",w=m(b.id),k=`${$}/${w}.pbn`,P=await fetch(k);if(!P.ok)throw new Error(`Failed to load lesson: ${P.statusText}`);const H=await P.text();n("load",{subfolder:b.id,name:b.name,category:x.name,content:H}),s.inline||n("close")}catch($){console.error("Error loading lesson:",$),u.value=`Could not load "${b.name}". The lesson may not be available yet.`}finally{l.value=null}}return(b,x)=>e.visible&&a.value?(p(),h("div",J1,[...x[2]||(x[2]=[c("div",{class:"loading-spinner"},null,-1),c("p",null,"Loading lessons...",-1)])])):e.visible&&r.value?(p(),h("div",Y1,[c("p",null,C(r.value),1),c("button",{onClick:d,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:x[1]||(x[1]=Zt(E=>b.$emit("close"),["self"]))},[c("div",q1,[c("div",X1,[c("h2",null,C(o.value.name),1),c("button",{class:"close-btn",onClick:x[0]||(x[0]=E=>b.$emit("close"))},"")]),c("div",Q1,[(p(!0),h(Z,null,ie(o.value.categories,E=>(p(),h("div",{key:E.id,class:"category-section"},[c("button",{class:ae(["category-header",{expanded:i.value.includes(E.id)}]),onClick:$=>f(E.id)},[c("span",ew,C(i.value.includes(E.id)?"":""),1),c("span",tw,C(E.name),1),c("span",sw,C(E.lessons.length)+" lessons",1)],10,Z1),i.value.includes(E.id)?(p(),h("div",nw,[(p(!0),h(Z,null,ie(E.lessons,$=>(p(),h("button",{key:$.id,class:ae(["lesson-item",{loading:l.value===$.id}]),onClick:w=>v($,E)},[c("span",rw,C($.name),1),c("span",aw,C($.description),1)],10,ow))),128))])):L("",!0)]))),128))]),u.value?(p(),h("div",lw,C(u.value),1)):L("",!0)])])):e.visible&&e.inline&&o.value?(p(),h("div",iw,[c("div",cw,[(p(!0),h(Z,null,ie(o.value.categories,E=>(p(),h("div",{key:E.id,class:"category-section"},[c("button",{class:ae(["category-header",{expanded:i.value.includes(E.id)}]),onClick:$=>f(E.id)},[c("span",dw,C(i.value.includes(E.id)?"":""),1),c("span",fw,C(E.name),1),c("span",mw,C(E.lessons.length)+" lessons",1)],10,uw),i.value.includes(E.id)?(p(),h("div",vw,[(p(!0),h(Z,null,ie(E.lessons,$=>(p(),h("button",{key:$.id,class:ae(["lesson-item",{loading:l.value===$.id}]),onClick:w=>v($,E)},[c("span",hw,C($.name),1),c("span",gw,C($.description),1)],10,pw))),128))])):L("",!0)]))),128))]),u.value?(p(),h("div",yw,C(u.value),1)):L("",!0)])):L("",!0)}},_w=pe(bw,[["__scopeId","data-v-384a9c63"]]),ww={class:"viewer-controls"},Sw={class:"viewer-body"},Cw={key:0,class:"interaction-overlay"},$w={key:1,class:"viewer-loading"},kw={key:2,class:"viewer-error"},xw=["src"],Aw={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Ut({x:80,y:80}),n=Ut({w:550,h:700}),o=N(!1),r=Ut({x:0,y:0}),a=N(null),i=N(!1),l=N(null),u=I(()=>a.value?a.value+"#navpanes=0&toolbar=0":null);async function d(w){if(f(),!!w){i.value=!0,l.value=null;try{const k=await fetch(w);if(!k.ok)throw new Error("Failed to load PDF");const P=await k.blob(),H=new Blob([P],{type:"application/pdf"});a.value=URL.createObjectURL(H)}catch(k){l.value="Could not load PDF",console.error("Failed to fetch intro PDF:",k)}finally{i.value=!1}}}function f(){a.value&&(URL.revokeObjectURL(a.value),a.value=null)}function m(){a.value&&window.open(a.value,"_blank")}ft(()=>[t.visible,t.url],([w,k])=>{w&&k?d(k):w||f()},{immediate:!0}),$i(f);function v(w){w.target.closest("button")||(o.value=!0,r.x=w.clientX-s.x,r.y=w.clientY-s.y,document.addEventListener("pointermove",b),document.addEventListener("pointerup",$))}function b(w){s.x=Math.max(0,w.clientX-r.x),s.y=Math.max(0,w.clientY-r.y)}function x(w){o.value=!0,r.x=w.clientX,r.y=w.clientY,r.startW=n.w,r.startH=n.h,document.addEventListener("pointermove",E),document.addEventListener("pointerup",$)}function E(w){n.w=Math.max(320,r.startW+(w.clientX-r.x)),n.h=Math.max(300,r.startH+(w.clientY-r.y))}function $(){o.value=!1,document.removeEventListener("pointermove",b),document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",$)}return(w,k)=>e.visible?(p(),h("div",{key:0,class:"intro-pdf-viewer",style:ds({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[c("div",{class:"viewer-titlebar",onPointerdown:v},[k[1]||(k[1]=c("span",{class:"viewer-title"},"Lesson Introduction",-1)),c("div",ww,[c("button",{class:"viewer-btn",onClick:m,title:"Open in new tab"},""),c("button",{class:"viewer-btn close",onClick:k[0]||(k[0]=P=>w.$emit("close")),title:"Close"},"")])],32),c("div",Sw,[o.value?(p(),h("div",Cw)):L("",!0),i.value?(p(),h("div",$w,"Loading PDF...")):l.value?(p(),h("div",kw,C(l.value),1)):u.value?(p(),h("iframe",{key:3,src:u.value,class:"viewer-iframe"},null,8,xw)):L("",!0)]),c("div",{class:"resize-handle",onPointerdown:x},"",32)],4)):L("",!0)}},Nw=pe(Aw,[["__scopeId","data-v-a97df645"]]),Is="https://api.bridge-classroom.com/api",Rs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",hn=N([]),gs=N([]),fr=N(null),_t=N(!1),Ne=N(null);function Yo(){async function e(i){_t.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?student_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const d=await l.text();return Ne.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?hn.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch student assignments:",l),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function t(i){_t.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?assigned_by=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const d=await l.text();return Ne.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?gs.value=u.assignments:Ne.value=u.error||"Failed to fetch assignments",u}catch(l){return console.error("Failed to fetch teacher assignments:",l),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function s(i){_t.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments?classroom_id=${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const d=await l.text();return Ne.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?u.assignments:(Ne.value=u.error||"Failed to fetch assignments",[])}catch(l){return console.error("Failed to fetch classroom assignments:",l),Ne.value="Unable to connect to server",[]}finally{_t.value=!1}}async function n(i){_t.value=!0,Ne.value=null;try{const l=await fetch(`${Is}/assignments/${encodeURIComponent(i)}`,{headers:{"x-api-key":Rs}});if(!l.ok){const d=await l.text();return Ne.value=d||`Server error (${l.status})`,null}const u=await l.json();return u.success?fr.value=u.assignment:Ne.value=u.error||"Failed to fetch assignment",u}catch(l){return console.error("Failed to fetch assignment detail:",l),Ne.value="Unable to connect to server",null}finally{_t.value=!1}}async function o({exercise_id:i,classroom_id:l,student_id:u,assigned_by:d,due_at:f,sort_order:m}){_t.value=!0,Ne.value=null;try{const v=await fetch(`${Is}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Rs},body:JSON.stringify({exercise_id:i,classroom_id:l||null,student_id:u||null,assigned_by:d,due_at:f||null,sort_order:m??null})});if(!v.ok){const x=await v.text();return Ne.value=x||`Server error (${v.status})`,{success:!1,error:Ne.value}}const b=await v.json();return b.success?gs.value=[b.assignment,...gs.value]:Ne.value=b.error||"Failed to create assignment",b}catch(v){return console.error("Failed to create assignment:",v),Ne.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{_t.value=!1}}async function r(i){try{const l=await fetch(`${Is}/assignments/${encodeURIComponent(i)}`,{method:"DELETE",headers:{"x-api-key":Rs}});if(!l.ok){const d=await l.text();return Ne.value=d||`Server error (${l.status})`,{success:!1,error:Ne.value}}const u=await l.json();return u.success&&(gs.value=gs.value.filter(d=>d.id!==i),hn.value=hn.value.filter(d=>d.id!==i)),u}catch(l){return console.error("Failed to delete assignment:",l),{success:!1,error:"Unable to connect to server"}}}function a(){hn.value=[],gs.value=[],fr.value=null,_t.value=!1,Ne.value=null}return{studentAssignments:hn,teacherAssignments:gs,currentAssignment:fr,loading:_t,error:Ne,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:r,reset:a}}const Tw={class:"collection-icon"},Ow={class:"collection-name"},Ew={class:"collection-desc"},Iw={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),h("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[c("span",Tw,C(e.collection.icon),1),c("span",Ow,C(e.collection.name),1),c("span",Ew,C(e.collection.description),1)]))}},Rw=pe(Iw,[["__scopeId","data-v-747be5b1"]]),Pw={class:"collection-grid"},Dw={class:"collection-cards"},Lw={__name:"CollectionGrid",emits:["select-collection"],setup(e){const s=zn().COLLECTIONS;return(n,o)=>(p(),h("div",Pw,[o[0]||(o[0]=c("h2",{class:"grid-title"},"Lesson Collections",-1)),o[1]||(o[1]=c("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),c("div",Dw,[(p(!0),h(Z,null,ie(R(s),r=>(p(),De(Rw,{key:r.id,collection:r,onClick:a=>n.$emit("select-collection",r.id)},null,8,["collection","onClick"]))),128))])]))}},Na=pe(Lw,[["__scopeId","data-v-66fee6e8"]]),Bw={class:"casual-lobby"},Uw={__name:"CasualLobby",emits:["select-collection","show-become-teacher"],setup(e){return(t,s)=>(p(),h("div",Bw,[ce(Na,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n))})]))}},Mw=pe(Uw,[["__scopeId","data-v-a78f70b6"]]),Fw={class:"assignment-panel"},jw={key:0,class:"loading-state"},Hw={key:1,class:"empty-state"},Vw={key:2,class:"assignment-cards"},Kw=["onClick"],Ww={class:"card-header"},Gw={class:"exercise-name"},zw={class:"card-meta"},Jw={key:0,class:"meta-item"},Yw={class:"progress-section"},qw={class:"progress-bar"},Xw={class:"progress-label"},Qw={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(a){return a.total_boards?Math.round(a.attempted_boards/a.total_boards*100):0}function s(a){return a.attempted_boards>=a.total_boards&&a.total_boards>0?"complete":a.due_at&&new Date(a.due_at)<new Date&&a.attempted_boards<a.total_boards?"overdue":a.attempted_boards>0?"in-progress":"new"}function n(a){const i=s(a);return i==="complete"?"Complete":i==="overdue"?"Overdue":i==="in-progress"?"In Progress":"New"}function o(a){if(!a.due_at)return null;const i=new Date(a.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"Overdue":u===0?"Due today":u===1?"Due tomorrow":`Due in ${u} days`}function r(a){if(!a.due_at)return"";const i=new Date(a.due_at),u=Math.ceil((i-new Date)/(1e3*60*60*24));return u<0?"overdue":u<=1?"urgent":u<=3?"soon":""}return(a,i)=>(p(),h("div",Fw,[i[2]||(i[2]=c("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),h("div",jw,[...i[0]||(i[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),h("div",Hw,[...i[1]||(i[1]=[c("p",{class:"empty-title"},"No assignments yet",-1),c("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),h("div",Vw,[(p(!0),h(Z,null,ie(e.assignments,l=>(p(),h("div",{key:l.id,class:ae(["assignment-card",s(l)]),onClick:u=>a.$emit("select-assignment",l)},[c("div",Ww,[c("span",Gw,C(l.exercise_name),1),c("span",{class:ae(["status-badge",s(l)])},C(n(l)),3)]),c("div",zw,[l.classroom_name?(p(),h("span",Jw,C(l.classroom_name),1)):L("",!0),l.due_at?(p(),h("span",{key:1,class:ae(["meta-item",r(l)])},C(o(l)),3)):L("",!0)]),c("div",Yw,[c("div",qw,[c("div",{class:ae(["progress-fill",s(l)]),style:ds({width:t(l)+"%"})},null,6)]),c("span",Xw,C(l.attempted_boards)+" / "+C(l.total_boards)+" boards ",1)])],10,Kw))),128))]))]))}},Zw=pe(Qw,[["__scopeId","data-v-dc0b8e86"]]),e0={class:"student-lobby"},t0={__name:"StudentLobby",emits:["select-collection"],setup(e,{emit:t}){const s=Me(),n=Yo(),o=I(()=>n.studentAssignments.value.length>0),r=I(()=>n.loading.value);function a(i){console.log("Selected assignment:",i)}return gt(()=>{const i=s.currentUser.value;i&&n.fetchStudentAssignments(i.id)}),(i,l)=>(p(),h("div",e0,[o.value||r.value?(p(),De(Zw,{key:0,assignments:R(n).studentAssignments.value,loading:r.value,onSelectAssignment:a},null,8,["assignments","loading"])):L("",!0),ce(Na,{onSelectCollection:l[0]||(l[0]=u=>i.$emit("select-collection",u))})]))}},s0=pe(t0,[["__scopeId","data-v-de436049"]]),n0="https://api.bridge-classroom.com/api",o0="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",mo=N([]),qc=N([]),Xc=N([]),Vr=N(!1),mr=N(null),r0=2*60*1e3;async function a0(e,t=!1){if(!t&&mr.value&&Date.now()-new Date(mr.value).getTime()<r0)return{success:!0,cached:!0};Vr.value=!0;try{const s=await fetch(`${n0}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":o0}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return mo.value=n.classrooms||[],qc.value=n.needs_attention||[],Xc.value=n.recent_activity||[],mr.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{Vr.value=!1}}function l0(){const e=I(()=>({classroomCount:mo.value.length,openAssignmentCount:mo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:mo,needsAttention:qc,recentActivity:Xc,lobbyLoading:Vr,summaryStats:e,loadTeacherLobbyData:a0}}const i0={class:"roster"},c0={class:"roster-header"},u0={class:"member-count"},d0={key:0,class:"roster-empty"},f0={key:1,class:"roster-table"},m0={class:"member-name"},v0={class:"member-email"},p0={class:"member-date"},h0={class:"member-action"},g0=["onClick","disabled"],y0={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=N(null);function o(a){try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return a}}function r(a){const i=`${a.first_name} ${a.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=a.student_id,s("remove-member",a.student_id),setTimeout(()=>{n.value=null},2e3))}return(a,i)=>(p(),h("div",i0,[c("div",c0,[i[0]||(i[0]=c("h4",null,"Class Roster",-1)),c("span",u0,C(e.members.length)+" "+C(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),h("div",d0,[...i[1]||(i[1]=[c("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),h("table",f0,[i[2]||(i[2]=c("thead",null,[c("tr",null,[c("th",null,"Name"),c("th",null,"Email"),c("th",null,"Joined"),c("th")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.members,l=>(p(),h("tr",{key:l.student_id},[c("td",m0,C(l.first_name)+" "+C(l.last_name),1),c("td",v0,C(l.email),1),c("td",p0,C(o(l.joined_at)),1),c("td",h0,[c("button",{class:"remove-btn",onClick:u=>r(l),disabled:n.value===l.student_id},C(n.value===l.student_id?"Removing...":"Remove"),9,g0)])]))),128))])]))]))}},b0=pe(y0,[["__scopeId","data-v-ee901be3"]]),_0={class:"header-left"},w0={class:"classroom-name"},S0={class:"header-meta"},C0={class:"join-badge"},$0={class:"member-count"},k0={key:0,class:"stat-badge"},x0={key:1,class:"stat-badge completion"},A0={key:0,class:"mini-bars"},N0={class:"bar-label"},T0={class:"bar-track"},O0={class:"bar-count"},E0=["aria-label"],I0={key:0,class:"card-body"},R0={key:0,class:"classroom-desc"},P0={class:"invite-section"},D0={class:"invite-field"},L0=["value"],B0={class:"email-section"},U0={class:"email-header"},M0={class:"email-template"},F0={class:"email-body"},j0={key:1,class:"assignments-section"},H0={class:"assignment-list"},V0={class:"assignment-name"},K0={key:0,class:"assignment-due"},W0={class:"assignment-boards"},G0={key:3,class:"loading-roster"},z0={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed"],setup(e,{emit:t}){const s=e,n=t,o=Zn(),r=Yo(),a=N(null),i=N(!1),l=N(!1),u=N(!1),d=N([]),f=I(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ft(()=>s.expanded,async $=>{if($&&!a.value){i.value=!0;const[w,k]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),r.fetchClassroomAssignments(s.classroom.id)]);w!=null&&w.success&&(a.value=w.classroom),d.value=k||[],i.value=!1}});function m($){return $?new Date($).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function v($){return $.students_total?Math.round($.students_completed/$.students_total*100)+"%":"0%"}async function b(){try{await navigator.clipboard.writeText(f.value),l.value=!0,setTimeout(()=>{l.value=!1},2e3)}catch{}}async function x(){const $=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${f.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText($),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function E($){const w=await o.removeMember(s.classroom.id,$);w!=null&&w.success&&(a.value&&(a.value.members=a.value.members.filter(k=>k.student_id!==$)),n("member-removed"))}return($,w)=>(p(),h("div",{class:ae(["classroom-card",{expanded:e.expanded}])},[c("div",{class:"card-header",onClick:w[0]||(w[0]=k=>$.$emit("toggle"))},[c("div",_0,[c("h3",w0,C(e.classroom.name),1),c("div",S0,[c("span",C0,"JOIN: "+C(e.classroom.join_code),1),c("span",$0,C(e.classroom.member_count)+" "+C(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),h("span",k0,C(e.classroom.open_assignment_count)+" "+C(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):L("",!0),e.classroom.avg_completion_pct>0?(p(),h("span",x0,C(e.classroom.avg_completion_pct)+"% avg",1)):L("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),h("div",A0,[(p(!0),h(Z,null,ie(e.classroom.assignments,k=>(p(),h("div",{key:k.id,class:"mini-bar"},[c("span",N0,C(k.exercise_name),1),c("div",T0,[c("div",{class:"bar-fill",style:ds({width:v(k)})},null,4)]),c("span",O0,C(k.students_completed)+"/"+C(k.students_total),1)]))),128))])):L("",!0)]),c("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[c("span",{class:ae(["chevron",{rotated:e.expanded}])},"",2)],8,E0)]),e.expanded?(p(),h("div",I0,[e.classroom.description?(p(),h("p",R0,C(e.classroom.description),1)):L("",!0),c("div",P0,[w[2]||(w[2]=c("h4",null,"Invite Link",-1)),w[3]||(w[3]=c("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),c("div",D0,[c("input",{type:"text",value:f.value,readonly:"",class:"invite-input",onClick:w[1]||(w[1]=k=>k.target.select())},null,8,L0),c("button",{class:"copy-btn",onClick:b},C(l.value?"Copied!":"Copy"),1)])]),c("div",B0,[c("div",U0,[w[4]||(w[4]=c("h4",null,"Email Template",-1)),c("button",{class:"copy-btn copy-btn-small",onClick:x},C(u.value?"Copied!":"Copy"),1)]),c("div",M0,[w[5]||(w[5]=c("p",null,[c("strong",null,"Subject:"),xs(" Join our Bridge Classroom for practice exercises")],-1)),c("div",F0," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+C(f.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),d.value.length?(p(),h("div",j0,[w[6]||(w[6]=c("h4",null,"Assignments",-1)),c("div",H0,[(p(!0),h(Z,null,ie(d.value,k=>(p(),h("div",{key:k.id,class:"assignment-row"},[c("span",V0,C(k.exercise_name),1),k.due_at?(p(),h("span",K0,"Due "+C(m(k.due_at)),1)):L("",!0),c("span",W0,C(k.total_boards)+" boards",1)]))),128))])])):L("",!0),a.value?(p(),De(b0,{key:2,members:a.value.members,onRemoveMember:E},null,8,["members"])):i.value?(p(),h("div",G0," Loading roster... ")):L("",!0)])):L("",!0)],2))}},J0=pe(z0,[["__scopeId","data-v-59d6a074"]]),Y0={class:"modal-content"},q0={class:"step"},X0={class:"form-group"},Q0={class:"form-group"},Z0={class:"step-actions"},eS=["disabled"],tS={key:0,class:"error-text"},sS={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Me(),o=Zn(),r=N(""),a=N(""),i=N(!1),l=N(null);async function u(){if(!r.value.trim()||i.value)return;const d=n.currentUser.value;if(!d)return;i.value=!0,l.value=null;const f=await o.createClassroom(d.id,r.value.trim(),a.value.trim()||null);f.success?s("classroom-created",f.classroom):l.value=f.error||"Failed to create classroom",i.value=!1}return(d,f)=>(p(),h("div",{class:"modal-overlay",onClick:f[3]||(f[3]=Zt(m=>d.$emit("close"),["self"]))},[c("div",Y0,[c("div",q0,[f[7]||(f[7]=c("h2",null,"Create a Classroom",-1)),f[8]||(f[8]=c("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),c("div",X0,[f[4]||(f[4]=c("label",{for:"classroom-name"},"Classroom Name",-1)),Le(c("input",{id:"classroom-name","onUpdate:modelValue":f[0]||(f[0]=m=>r.value=m),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:da(u,["enter"])},null,544),[[At,r.value]]),f[5]||(f[5]=c("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),c("div",Q0,[f[6]||(f[6]=c("label",{for:"classroom-desc"},[xs("Description "),c("span",{class:"optional"},"(optional)")],-1)),Le(c("textarea",{id:"classroom-desc","onUpdate:modelValue":f[1]||(f[1]=m=>a.value=m),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[At,a.value]])]),c("div",Z0,[c("button",{class:"btn btn-secondary",onClick:f[2]||(f[2]=m=>d.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!r.value.trim()||i.value,onClick:u},C(i.value?"Creating...":"Create Classroom"),9,eS)]),l.value?(p(),h("p",tS,C(l.value),1)):L("",!0)])])]))}},nS=pe(sS,[["__scopeId","data-v-c26a1ae6"]]),gn="https://api.bridge-classroom.com/api",yn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ys=N([]),vr=N(null),Pt=N(!1),Oe=N(null);function oS(){async function e(a={}){Pt.value=!0,Oe.value=null;try{const i=new URLSearchParams;a.created_by&&i.set("created_by",a.created_by),a.curriculum_path&&i.set("curriculum_path",a.curriculum_path),a.visibility&&i.set("visibility",a.visibility);const l=i.toString(),u=`${gn}/exercises${l?"?"+l:""}`,d=await fetch(u,{headers:{"x-api-key":yn}});if(!d.ok){const m=await d.text();return Oe.value=m||`Server error (${d.status})`,null}const f=await d.json();return f.success?ys.value=f.exercises:Oe.value=f.error||"Failed to fetch exercises",f}catch(i){return console.error("Failed to fetch exercises:",i),Oe.value="Unable to connect to server",null}finally{Pt.value=!1}}async function t(a){Pt.value=!0,Oe.value=null;try{const i=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{headers:{"x-api-key":yn}});if(!i.ok){const u=await i.text();return Oe.value=u||`Server error (${i.status})`,null}const l=await i.json();return l.success?vr.value=l.exercise:Oe.value=l.error||"Failed to fetch exercise",l}catch(i){return console.error("Failed to fetch exercise detail:",i),Oe.value="Unable to connect to server",null}finally{Pt.value=!1}}async function s({name:a,description:i,created_by:l,curriculum_path:u,visibility:d,boards:f}){Pt.value=!0,Oe.value=null;try{const m=await fetch(`${gn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":yn},body:JSON.stringify({name:a,description:i||null,created_by:l||null,curriculum_path:u||null,visibility:d||"public",boards:f})});if(!m.ok){const b=await m.text();return Oe.value=b||`Server error (${m.status})`,{success:!1,error:Oe.value}}const v=await m.json();return v.success?ys.value=[v.exercise,...ys.value]:Oe.value=v.error||"Failed to create exercise",v}catch(m){return console.error("Failed to create exercise:",m),Oe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Pt.value=!1}}async function n(a,i){Pt.value=!0,Oe.value=null;try{const l=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":yn},body:JSON.stringify(i)});if(!l.ok){const d=await l.text();return Oe.value=d||`Server error (${l.status})`,{success:!1,error:Oe.value}}const u=await l.json();return u.success||(Oe.value=u.error||"Failed to update exercise"),u}catch(l){return console.error("Failed to update exercise:",l),Oe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Pt.value=!1}}async function o(a){try{const i=await fetch(`${gn}/exercises/${encodeURIComponent(a)}`,{method:"DELETE",headers:{"x-api-key":yn}});if(!i.ok){const u=await i.text();return Oe.value=u||`Server error (${i.status})`,{success:!1,error:Oe.value}}const l=await i.json();return l.success&&(ys.value=ys.value.filter(u=>u.id!==a)),l}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function r(){ys.value=[],vr.value=null,Pt.value=!1,Oe.value=null}return{exercises:ys,currentExercise:vr,loading:Pt,error:Oe,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:r}}const rS={class:"modal-content"},aS={class:"step"},lS={class:"form-group"},iS=["value"],cS={key:0,class:"form-hint"},uS={class:"form-group"},dS={class:"target-options"},fS={class:"radio-option"},mS={class:"radio-option"},vS={key:0,class:"form-group"},pS=["value"],hS={key:1,class:"form-group"},gS=["value"],yS={class:"form-group"},bS={class:"step-actions"},_S=["disabled"],wS={key:2,class:"error-text"},SS={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Me(),r=oS(),a=Yo(),i=Zn(),l=Jn(),u=N(""),d=N("classroom"),f=N(s.preselectedClassroomId||""),m=N(""),v=N(""),b=N(!1),x=N(null),E=I(()=>r.exercises.value),$=I(()=>r.loading.value),w=I(()=>i.teacherClassrooms.value),k=I(()=>l.students.value),P=I(()=>!(!u.value||d.value==="classroom"&&!f.value||d.value==="student"&&!m.value));async function H(){if(!P.value||b.value)return;const ee=o.currentUser.value;if(!ee)return;b.value=!0,x.value=null;const j=await a.createAssignment({exercise_id:u.value,classroom_id:d.value==="classroom"?f.value:null,student_id:d.value==="student"?m.value:null,assigned_by:ee.id,due_at:v.value||null});j.success?n("assignment-created",j.assignment):x.value=j.error||"Failed to create assignment",b.value=!1}return gt(async()=>{r.exercises.value.length||await r.fetchExercises();const ee=o.currentUser.value;ee&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(ee.id)}),(ee,j)=>(p(),h("div",{class:"modal-overlay",onClick:j[7]||(j[7]=Zt(q=>ee.$emit("close"),["self"]))},[c("div",rS,[c("div",aS,[j[18]||(j[18]=c("h2",null,"Create Assignment",-1)),j[19]||(j[19]=c("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),c("div",lS,[j[9]||(j[9]=c("label",{for:"exercise-select"},"Exercise",-1)),Le(c("select",{id:"exercise-select","onUpdate:modelValue":j[0]||(j[0]=q=>u.value=q),class:"form-select"},[j[8]||(j[8]=c("option",{value:""},"Select an exercise...",-1)),(p(!0),h(Z,null,ie(E.value,q=>(p(),h("option",{key:q.id,value:q.id},C(q.name)+" ("+C(q.board_count)+" boards)",9,iS))),128))],512),[[Tn,u.value]]),$.value?(p(),h("p",cS,"Loading exercises...")):L("",!0)]),c("div",uS,[j[12]||(j[12]=c("label",null,"Assign to",-1)),c("div",dS,[c("label",fS,[Le(c("input",{type:"radio","onUpdate:modelValue":j[1]||(j[1]=q=>d.value=q),value:"classroom"},null,512),[[ll,d.value]]),j[10]||(j[10]=c("span",null,"Classroom",-1))]),c("label",mS,[Le(c("input",{type:"radio","onUpdate:modelValue":j[2]||(j[2]=q=>d.value=q),value:"student"},null,512),[[ll,d.value]]),j[11]||(j[11]=c("span",null,"Individual Student",-1))])])]),d.value==="classroom"?(p(),h("div",vS,[j[14]||(j[14]=c("label",{for:"classroom-select"},"Classroom",-1)),Le(c("select",{id:"classroom-select","onUpdate:modelValue":j[3]||(j[3]=q=>f.value=q),class:"form-select"},[j[13]||(j[13]=c("option",{value:""},"Select a classroom...",-1)),(p(!0),h(Z,null,ie(w.value,q=>(p(),h("option",{key:q.id,value:q.id},C(q.name)+" ("+C(q.member_count)+" students)",9,pS))),128))],512),[[Tn,f.value]])])):L("",!0),d.value==="student"?(p(),h("div",hS,[j[16]||(j[16]=c("label",{for:"student-select"},"Student",-1)),Le(c("select",{id:"student-select","onUpdate:modelValue":j[4]||(j[4]=q=>m.value=q),class:"form-select"},[j[15]||(j[15]=c("option",{value:""},"Select a student...",-1)),(p(!0),h(Z,null,ie(k.value,q=>(p(),h("option",{key:q.id,value:q.id},C(q.first_name)+" "+C(q.last_name),9,gS))),128))],512),[[Tn,m.value]])])):L("",!0),c("div",yS,[j[17]||(j[17]=c("label",{for:"due-date"},[xs("Due Date "),c("span",{class:"optional"},"(optional)")],-1)),Le(c("input",{id:"due-date","onUpdate:modelValue":j[5]||(j[5]=q=>v.value=q),type:"date",class:"form-input"},null,512),[[At,v.value]])]),c("div",bS,[c("button",{class:"btn btn-secondary",onClick:j[6]||(j[6]=q=>ee.$emit("close"))},"Cancel"),c("button",{class:"btn btn-primary",disabled:!P.value||b.value,onClick:H},C(b.value?"Creating...":"Create Assignment"),9,_S)]),x.value?(p(),h("p",wS,C(x.value),1)):L("",!0)])])]))}},CS=pe(SS,[["__scopeId","data-v-5e97b847"]]),$S={class:"needs-attention"},kS={key:0,class:"empty-state"},xS={key:1,class:"attention-list"},AS={class:"item-icon"},NS={class:"item-text"},TS={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const r=n(o.due_at),a=r<=1?"tomorrow":`in ${r} days`;return`${o.exercise_name} due ${a}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const r=new Date(o)-Date.now();return Math.max(0,Math.ceil(r/(1e3*60*60*24)))}return(o,r)=>(p(),h("div",$S,[r[0]||(r[0]=c("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),h("div",xS,[(p(!0),h(Z,null,ie(e.items,(a,i)=>(p(),h("div",{key:i,class:ae(["attention-item",a.type])},[c("span",AS,C(t(a.type)),1),c("span",NS,C(s(a)),1)],2))),128))])):(p(),h("div",kS," All caught up! No items need attention. "))]))}},OS=pe(TS,[["__scopeId","data-v-c39449f9"]]),ES={class:"recent-activity"},IS={key:0,class:"empty-state"},RS={key:1,class:"activity-list"},PS={class:"event-content"},DS={class:"event-text"},LS={class:"event-time"},BS={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const r=Date.now()-new Date(o).getTime(),a=Math.floor(r/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const i=Math.floor(a/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,r)=>(p(),h("div",ES,[r[0]||(r[0]=c("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),h("div",RS,[(p(!0),h(Z,null,ie(e.events,(a,i)=>(p(),h("div",{key:i,class:"activity-item"},[c("span",{class:ae(["event-icon",a.type])},C(t(a.type)),3),c("div",PS,[c("span",DS,C(s(a)),1),c("span",LS,C(n(a.timestamp)),1)])]))),128))])):(p(),h("div",IS," No recent activity. "))]))}},US=pe(BS,[["__scopeId","data-v-5d7405f1"]]),MS={class:"teacher-lobby"},FS={class:"welcome-section"},jS={class:"welcome-title"},HS={class:"welcome-subtitle"},VS={class:"quick-actions"},KS={key:0,class:"loading-state"},WS={key:1,class:"dashboard-grid"},GS={class:"left-column"},zS={key:0,class:"classrooms-section"},JS={class:"classroom-cards"},YS={key:1,class:"empty-state"},qS={class:"right-column"},XS={class:"collections-section"},QS={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin"],setup(e){const t=Me(),s=l0(),n=N(!1),o=N(!1),r=N(null),a=I(()=>{const m=t.currentUser.value;return m?m.firstName:""}),i=I(()=>{const m=s.summaryStats.value;if(!m||m.classroomCount===0)return"Get started by creating your first classroom.";const v=[];return v.push(`${m.classroomCount} active ${m.classroomCount===1?"classroom":"classrooms"}`),m.openAssignmentCount>0&&v.push(`${m.openAssignmentCount} open ${m.openAssignmentCount===1?"assignment":"assignments"}`),v.join(", ")+"."});function l(m){r.value=r.value===m?null:m}function u(m){n.value=!1,r.value=m.id,f()}function d(){o.value=!1,f()}function f(){const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id,!0)}return gt(()=>{const m=t.currentUser.value;m&&s.loadTeacherLobbyData(m.id)}),(m,v)=>(p(),h("div",MS,[c("div",FS,[c("h2",jS,"Welcome back, "+C(a.value),1),c("p",HS,C(i.value),1)]),c("div",VS,[c("button",{class:"action-btn create",onClick:v[0]||(v[0]=b=>n.value=!0)}," + New Classroom "),c("button",{class:"action-btn assign",onClick:v[1]||(v[1]=b=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),h("button",{key:0,class:"action-btn admin",onClick:v[2]||(v[2]=b=>m.$emit("show-admin"))}," Admin Panel ")):L("",!0)]),R(s).lobbyLoading.value&&!R(s).lobbyClassrooms.value.length?(p(),h("div",KS,[...v[6]||(v[6]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):(p(),h("div",WS,[c("div",GS,[R(s).lobbyClassrooms.value.length?(p(),h("div",zS,[v[7]||(v[7]=c("h3",{class:"section-title"},"My Classrooms",-1)),c("div",JS,[(p(!0),h(Z,null,ie(R(s).lobbyClassrooms.value,b=>(p(),De(J0,{key:b.id,classroom:b,expanded:r.value===b.id,onToggle:x=>l(b.id),onMemberRemoved:f},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),h("div",YS,[...v[8]||(v[8]=[c("p",{class:"empty-title"},"No classrooms yet",-1),c("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),c("div",qS,[ce(OS,{items:R(s).needsAttention.value},null,8,["items"]),ce(US,{events:R(s).recentActivity.value},null,8,["events"])])])),c("div",XS,[v[9]||(v[9]=c("h3",{class:"section-title"},"Lesson Collections",-1)),ce(Na,{onSelectCollection:v[3]||(v[3]=b=>m.$emit("select-collection",b))})]),n.value?(p(),De(nS,{key:2,onClose:v[4]||(v[4]=b=>n.value=!1),onClassroomCreated:u})):L("",!0),o.value?(p(),De(CS,{key:3,onClose:v[5]||(v[5]=b=>o.value=!1),onAssignmentCreated:d})):L("",!0)]))}},ZS=pe(QS,[["__scopeId","data-v-f3760795"]]),Qc="https://api.bridge-classroom.com/api",Zc="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",eu=N(null),tu=N([]),su=N(null),nu=N(null),Kr=N(!1),Wr=N(null),pr=N(null),eC=60*1e3;async function ou(e=!1){if(!e&&pr.value&&Date.now()-new Date(pr.value).getTime()<eC)return{success:!0,cached:!0};Kr.value=!0,Wr.value=null;try{const t=await fetch(`${Qc}/admin/stats`,{headers:{"x-api-key":Zc}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return eu.value=s.stats,tu.value=s.popular_lessons||[],su.value=s.database,pr.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),Wr.value=t.message,{success:!1,error:t.message}}finally{Kr.value=!1}}async function ru(){try{const e=await fetch(`${Qc}/admin/health`,{headers:{"x-api-key":Zc}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return nu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function tC(){await Promise.all([ou(!0),ru()])}function sC(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function nC(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function Ta(){return{stats:eu,popularLessons:tu,database:su,health:nu,loading:Kr,error:Wr,loadStats:ou,loadHealth:ru,refreshAll:tC,formatBytes:sC,formatUptime:nC}}const oC={class:"stats-row"},rC={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},aC={class:"stat-number"},lC={class:"stat-card",style:{"border-top-color":"#1565c0"}},iC={class:"stat-number"},cC={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},uC={class:"stat-number"},dC={class:"stat-card",style:{"border-top-color":"#e65100"}},fC={class:"stat-number"},mC={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,r,a,i;return p(),h("div",oC,[c("div",rC,[c("div",aC,C(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=c("div",{class:"stat-label"},"Total Users",-1))]),c("div",lC,[c("div",iC,C(((r=e.stats)==null?void 0:r.active_7d)??""),1),n[1]||(n[1]=c("div",{class:"stat-label"},"Active (7d)",-1))]),c("div",cC,[c("div",uC,C(t((a=e.stats)==null?void 0:a.observation_count_7d)),1),n[2]||(n[2]=c("div",{class:"stat-label"},"Observations (7d)",-1))]),c("div",dC,[c("div",fC,C(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=c("div",{class:"stat-label"},"Active Today",-1))])])}}},vC=pe(mC,[["__scopeId","data-v-a14a2199"]]),pC={class:"popular-lessons"},hC={key:0,class:"empty-state"},gC={key:1,class:"table-wrap"},yC={class:"lessons-table"},bC={class:"lesson-name"},_C={class:"num-col"},wC={class:"num-col"},SC={class:"num-col"},CC={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),h("div",pC,[o[1]||(o[1]=c("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),h("div",gC,[c("table",yC,[o[0]||(o[0]=c("thead",null,[c("tr",null,[c("th",null,"Lesson"),c("th",{class:"num-col"},"Plays"),c("th",{class:"num-col"},"Users"),c("th",{class:"num-col"},"Accuracy")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.lessons.slice(0,15),r=>(p(),h("tr",{key:r.deal_subfolder},[c("td",bC,C(t(r.deal_subfolder)),1),c("td",_C,C(r.play_count.toLocaleString()),1),c("td",wC,C(r.unique_users),1),c("td",SC,[c("span",{class:ae(["accuracy-badge",s(r.accuracy_pct)])},C(r.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),h("div",hC,"No lesson data yet."))]))}},$C=pe(CC,[["__scopeId","data-v-079bd4f8"]]),kC={class:"database-panel"},xC={key:0,class:"empty-state"},AC={class:"db-size"},NC={class:"tables-table"},TC={class:"table-name"},OC={class:"num-col"},EC={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=Ta();return(s,n)=>(p(),h("div",kC,[n[2]||(n[2]=c("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),h(Z,{key:1},[c("div",AC,[n[0]||(n[0]=xs(" SQLite file: ",-1)),c("strong",null,C(R(t)(e.database.file_size_bytes)),1)]),c("table",NC,[n[1]||(n[1]=c("thead",null,[c("tr",null,[c("th",null,"Table"),c("th",{class:"num-col"},"Rows")])],-1)),c("tbody",null,[(p(!0),h(Z,null,ie(e.database.tables,o=>(p(),h("tr",{key:o.name},[c("td",TC,C(o.name),1),c("td",OC,C(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),h("div",xC,"Loading..."))]))}},IC=pe(EC,[["__scopeId","data-v-d5945aff"]]),RC={class:"system-health"},PC={class:"health-header"},DC=["disabled"],LC={key:0,class:"empty-state"},BC={key:1,class:"health-rows"},UC={class:"health-row"},MC={class:"health-value"},FC={class:"health-row"},jC={class:"health-value"},HC={class:"health-row"},VC={class:"health-value"},KC={class:"health-row"},WC={class:"health-value"},GC={class:"health-row"},zC={class:"health-value"},JC={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=Ta();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),r=Math.floor(o/6e4);if(r<1)return"just now";if(r<60)return`${r}m ago`;const a=Math.floor(r/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}return(n,o)=>(p(),h("div",RC,[c("div",PC,[o[1]||(o[1]=c("h3",{class:"panel-title"},"System Health",-1)),c("button",{class:"refresh-btn",onClick:o[0]||(o[0]=r=>n.$emit("refresh")),disabled:e.refreshing},C(e.refreshing?"Refreshing...":"Refresh"),9,DC)]),e.health?(p(),h("div",BC,[c("div",UC,[o[2]||(o[2]=c("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=c("span",{class:"health-label"},"API Server",-1)),c("span",MC,"Up "+C(R(t)(e.health.uptime_seconds)),1)]),c("div",FC,[c("span",{class:ae(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=c("span",{class:"health-label"},"Database",-1)),c("span",jC,C(e.health.database_writable?"Writable":"Error"),1)]),c("div",HC,[c("span",{class:ae(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=c("span",{class:"health-label"},"Last Observation",-1)),c("span",VC,C(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),c("div",KC,[o[6]||(o[6]=c("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=c("span",{class:"health-label"},"Disk",-1)),c("span",WC,C(e.health.disk_available_gb)+" GB / "+C(e.health.disk_total_gb)+" GB available",1)]),c("div",GC,[o[8]||(o[8]=c("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=c("span",{class:"health-label"},"API Version",-1)),c("span",zC,"v"+C(e.health.api_version),1)])])):(p(),h("div",LC,"Loading..."))]))}},YC=pe(JC,[["__scopeId","data-v-0d4e96d5"]]),qC={class:"admin-lobby"},XC={class:"admin-header"},QC={key:0,class:"admin-subtitle"},ZC={key:0,class:"loading-state"},e$={key:1,class:"error-state"},t$={class:"announcement-section"},s$={class:"announcement-info"},n$=["innerHTML"],o$={key:0,class:"announcement-expires"},r$={key:1,class:"announcement-expires"},a$=["disabled"],l$={key:1,class:"announcement-form"},i$={class:"form-row"},c$=["disabled"],u$={class:"content-grid"},d$={__name:"AdminLobby",emits:["back"],setup(e){const t=Ta(),s=Aa(),n=N(!1),o=N(""),r=N("info"),a=N(""),i=N(!1),l=N(!1);async function u(){if(o.value.trim()){i.value=!0;try{const E=a.value?new Date(a.value).toISOString():null;await s.setAnnouncement(o.value.trim(),r.value,E),o.value="",r.value="info",a.value=""}catch(E){console.error("Failed to publish announcement:",E)}finally{i.value=!1}}}async function d(){l.value=!0;try{await s.clearAnnouncement()}catch(E){console.error("Failed to clear announcement:",E)}finally{l.value=!1}}function f(E){return E?new Date(E).toLocaleString():""}const m={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function v(E){return E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(w,k)=>{const P=m[k.toLowerCase()];return P?`<span class="ann-circle" style="background:${P.bg};color:${P.fg}"></span>`:w})}async function b(){await Promise.all([t.loadStats(),t.loadHealth()])}async function x(){n.value=!0,await t.refreshAll(),n.value=!1}return gt(b),(E,$)=>(p(),h("div",qC,[c("div",XC,[c("button",{class:"back-btn",onClick:$[0]||($[0]=w=>E.$emit("back"))}," Back to Dashboard"),$[4]||($[4]=c("h2",{class:"admin-title"},"Admin Dashboard",-1)),R(t).stats.value?(p(),h("p",QC,C(R(t).stats.value.total_observations.toLocaleString())+" total observations across "+C(R(t).stats.value.total_users)+" users ",1)):L("",!0)]),R(t).loading.value&&!R(t).stats.value?(p(),h("div",ZC,[...$[5]||($[5]=[c("div",{class:"spinner"},null,-1),c("p",null,"Loading dashboard...",-1)])])):R(t).error.value?(p(),h("div",e$,[c("p",null,C(R(t).error.value),1),c("button",{class:"retry-btn",onClick:b},"Retry")])):R(t).stats.value?(p(),h(Z,{key:2},[c("div",t$,[$[7]||($[7]=c("h3",{class:"section-title"},"Site Announcement",-1)),R(s).announcement.value?(p(),h("div",{key:0,class:ae(["current-announcement",R(s).announcement.value.type])},[c("div",s$,[c("span",{class:ae(["announcement-type-badge",R(s).announcement.value.type])},C(R(s).announcement.value.type),3),c("span",{class:"announcement-message",innerHTML:v(R(s).announcement.value.message)},null,8,n$),R(s).announcement.value.expires_at?(p(),h("span",o$," Expires: "+C(f(R(s).announcement.value.expires_at)),1)):(p(),h("span",r$,"No expiration"))]),c("button",{class:"clear-btn",onClick:d,disabled:l.value},C(l.value?"Clearing...":"Clear"),9,a$)],2)):(p(),h("div",l$,[Le(c("input",{"onUpdate:modelValue":$[1]||($[1]=w=>o.value=w),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:da(u,["enter"])},null,544),[[At,o.value]]),c("div",i$,[Le(c("select",{"onUpdate:modelValue":$[2]||($[2]=w=>r.value=w),class:"type-select"},[...$[6]||($[6]=[c("option",{value:"info"},"Info",-1),c("option",{value:"warning"},"Warning",-1),c("option",{value:"urgent"},"Urgent",-1)])],512),[[Tn,r.value]]),Le(c("input",{"onUpdate:modelValue":$[3]||($[3]=w=>a.value=w),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[At,a.value]]),c("button",{class:"publish-btn",onClick:u,disabled:!o.value.trim()||i.value},C(i.value?"Publishing...":"Publish"),9,c$)])]))]),ce(vC,{stats:R(t).stats.value},null,8,["stats"]),c("div",u$,[ce($C,{lessons:R(t).popularLessons.value},null,8,["lessons"]),ce(IC,{database:R(t).database.value},null,8,["database"])]),ce(YC,{health:R(t).health.value,refreshing:n.value,onRefresh:x},null,8,["health","refreshing"])],64)):L("",!0)]))}},f$=pe(d$,[["__scopeId","data-v-ad49e23d"]]),m$={class:"lobby-view"},v$={__name:"LobbyView",emits:["select-collection","show-become-teacher"],setup(e){const t=Me(),s=Yo(),n=N(!1),o=I(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),r=I(()=>s.studentAssignments.value.length>0),a=I(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return gt(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,l)=>(p(),h("div",m$,[n.value?(p(),De(f$,{key:0,onBack:l[0]||(l[0]=u=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),De(ZS,{key:1,"is-admin":o.value==="admin",onSelectCollection:l[1]||(l[1]=u=>i.$emit("select-collection",u)),onShowAdmin:l[2]||(l[2]=u=>n.value=!0)},null,8,["is-admin"])):r.value||a.value?(p(),De(s0,{key:2,onSelectCollection:l[3]||(l[3]=u=>i.$emit("select-collection",u))})):(p(),De(Mw,{key:3,onSelectCollection:l[4]||(l[4]=u=>i.$emit("select-collection",u)),onShowBecomeTeacher:l[5]||(l[5]=u=>i.$emit("show-become-teacher"))}))]))}},p$=pe(v$,[["__scopeId","data-v-0f28018d"]]),h$={class:"modal-content"},g$={key:0,class:"step step-overview"},y$={class:"step-actions"},b$={key:1,class:"step step-agreement"},_$={class:"agreement-checkbox"},w$={class:"step-actions"},S$=["disabled"],C$={key:0,class:"error-text"},$$={key:2,class:"step step-confirmation"},k$={class:"step-actions"},x$={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Me(),o=N(1),r=N(!1),a=N(!1),i=N(null);async function l(){const u=n.currentUser.value;if(u){a.value=!0,i.value=null;try{const f=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:u.id,action:"become_teacher"})})).json();if(!f.success){i.value=f.error||"Failed to upgrade account";return}n.updateUser(u.id,{role:"teacher"});try{const{publicKey:m,privateKey:v}=await mv();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${u.firstName} ${u.lastName}`,email:u.email,public_key:m,role:"teacher"})}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:v,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(m){console.warn("Failed to create viewer record:",m)}o.value=3}catch(d){console.error("Teacher activation failed:",d),i.value="Unable to connect to server. Please try again."}finally{a.value=!1}}}return(u,d)=>(p(),h("div",{class:"modal-overlay",onClick:d[5]||(d[5]=Zt(f=>u.$emit("close"),["self"]))},[c("div",h$,[o.value===1?(p(),h("div",g$,[d[6]||(d[6]=_o('<h2 data-v-56e5717d>Become a Teacher</h2><p class="step-desc" data-v-56e5717d>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-56e5717d><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Create Classrooms</strong><p data-v-56e5717d>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Assign Exercises</strong><p data-v-56e5717d>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-56e5717d><span class="capability-icon" data-v-56e5717d></span><div data-v-56e5717d><strong data-v-56e5717d>Track Progress</strong><p data-v-56e5717d>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-56e5717d><strong data-v-56e5717d>Still a Student Too</strong><p data-v-56e5717d>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),c("div",y$,[c("button",{class:"btn btn-secondary",onClick:d[0]||(d[0]=f=>u.$emit("close"))},"Not Now"),c("button",{class:"btn btn-primary",onClick:d[1]||(d[1]=f=>o.value=2)},"Continue ")])])):o.value===2?(p(),h("div",b$,[d[8]||(d[8]=_o('<h2 data-v-56e5717d>Teacher Agreement</h2><p class="step-desc" data-v-56e5717d>Please review and accept the terms below.</p><div class="terms-scroll" data-v-56e5717d><h4 data-v-56e5717d>Service Availability</h4><p data-v-56e5717d>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-56e5717d>Data &amp; Storage</h4><p data-v-56e5717d>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-56e5717d>Student Data &amp; Privacy</h4><p data-v-56e5717d>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-56e5717d><li data-v-56e5717d>Use student data for educational purposes only</li><li data-v-56e5717d>Not share student data publicly or with unauthorized parties</li><li data-v-56e5717d>Respect that students can revoke your access at any time</li></ul><h4 data-v-56e5717d>Your Responsibilities</h4><p data-v-56e5717d>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-56e5717d>No Warranty</h4><p data-v-56e5717d>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-56e5717d>Open Source</h4><p data-v-56e5717d>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),c("label",_$,[Le(c("input",{type:"checkbox","onUpdate:modelValue":d[2]||(d[2]=f=>r.value=f)},null,512),[[ua,r.value]]),d[7]||(d[7]=c("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),c("div",w$,[c("button",{class:"btn btn-secondary",onClick:d[3]||(d[3]=f=>o.value=1)}," Back"),c("button",{class:"btn btn-primary",disabled:!r.value||a.value,onClick:l},C(a.value?"Activating...":"Activate Teacher Account"),9,S$)]),i.value?(p(),h("p",C$,C(i.value),1)):L("",!0)])):o.value===3?(p(),h("div",$$,[d[9]||(d[9]=c("div",{class:"success-icon"},"",-1)),d[10]||(d[10]=c("h2",null,"You're a Teacher!",-1)),d[11]||(d[11]=c("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),d[12]||(d[12]=c("ol",{class:"next-steps"},[c("li",null,"Create your first classroom from the teacher dashboard"),c("li",null,"Share the invite link with your students"),c("li",null,"Browse exercises and assign them to your class")],-1)),c("div",k$,[c("button",{class:"btn btn-primary",onClick:d[4]||(d[4]=f=>u.$emit("activated"))},"Go to Dashboard ")])])):L("",!0)])]))}},A$=pe(x$,[["__scopeId","data-v-56e5717d"]]),N$={},T$={class:"page-footer"};function O$(e,t){return p(),h("footer",T$,[...t[0]||(t[0]=[c("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),c("nav",{class:"footer-links"},[c("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),c("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const E$=pe(N$,[["render",O$],["__scopeId","data-v-1b649814"]]),I$={key:1,class:"app"},R$={class:"app-header"},P$={class:"header-right"},D$=["title"],L$={key:3,class:"stats"},B$={class:"correct"},U$={class:"wrong"},M$={class:"user-avatar-group"},F$=["title"],j$=["title"],H$={class:"app-main"},V$={key:3,class:"collection-view"},K$={key:4,class:"practice-layout"},W$={class:"practice-left"},G$={class:"practice-right"},z$={key:1,class:"commentary-panel"},J$=["innerHTML"],Y$=["innerHTML"],q$=["innerHTML"],X$=["innerHTML"],Q$={class:"commentary-controls"},Z$={key:0,class:"bidding-box-wrapper"},ek={key:1,class:"card-choice-prompt"},tk=["innerHTML"],sk={key:3,class:"completion-controls"},nk={key:0,class:"registration-toast"},ok={__name:"MainLayout",setup(e){const t=Gm(),s=zn(),n=Me(),o=Go(),r=Gc(),a=Jn(),i=Aa(),l=sp(),u=N(!1),d=N(!1),f=N(!1),m=N(!1),v=N(null),b=N(""),x=N(null),E=N(null),$=N(null),w=N(!1),k=N(null),P=N(null),H=N(!1),ee=N(!1),j=N(null);function q(g,y=".current"){if(!g)return;const T=g.querySelector(y);T&&(g.scrollTop=T.offsetTop-g.offsetTop)}ft(()=>l.currentStepIndex.value,()=>{Pn(()=>{q(x.value,".narrative-text.current")})}),ft(()=>l.isComplete.value,g=>{g&&Pn(()=>{q(x.value,".narrative-text.current")})});const Y=I(()=>n.isAuthenticated.value),me=I(()=>{const g=n.currentUser.value;return g?`${g.firstName} ${g.lastName}`:""}),fe=I(()=>{const g=n.currentUser.value;return g?`${g.firstName.charAt(0)}${g.lastName.charAt(0)}`.toUpperCase():"?"}),he=I(()=>{const g=n.currentUser.value;return(g==null?void 0:g.role)||"student"}),Re=I(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let We=null;gt(()=>{i.loadAnnouncement(),We=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),aa(()=>{We&&clearInterval(We)}),gt(async()=>{s.initializeFromUrl(),n.initialize();const g=new URLSearchParams(window.location.search);g.get("recover")&&g.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),l.observationStore.initialize();const y=s.getCollectionFromUrl(),T=s.getLessonFromUrl();y&&(E.value=y,T&&await W(y,T)),n.isAuthenticated.value&&(await r.initialize(),await n.syncRole(),Jt().initialize(),await a.checkTeacherStatus())});async function Ge(g){console.log("User ready:",g.firstName,g.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),ee.value=!0,setTimeout(()=>{ee.value=!1},4e3)),await r.initialize(),Jt().initialize(),await a.checkTeacherStatus();const T=sessionStorage.getItem("pendingJoinCode");if(T){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:T}});return}}function ge(){Jt().reset(),_a().clearCache(),fs().reset(),a.reset(),n.currentUserId.value=null,u.value=!1,m.value=!1,v.value=null}async function Q(){w.value=!1,await a.checkTeacherStatus()}const se=N([]),we=N(0),te=I(()=>se.value[we.value]||null),K=I(()=>{var O;const g=G(E.value),y=g!=null&&g.name?`${g.name} - `:"";if((O=$.value)!=null&&O.name)return y+$.value.name;if(!te.value)return"";const T=te.value.subfolder||te.value.category||"";return T?y+T:""});ft(we,()=>{te.value&&(l.loadDeal(te.value),s.setDealInUrl(te.value.boardNumber))},{flush:"sync"}),ft(()=>l.observationStore.pendingCount.value,(g,y)=>{g>y&&r.triggerSync()}),ft(()=>l.isComplete.value,g=>{g&&(k.value=null)});function ne({subfolder:g,name:y,category:T,content:O}){const D=Al(O);if(D.length>0){const V=D.map(re=>({...re,subfolder:re.subfolder||g,category:re.category||T}));se.value=V,we.value=0,l.loadDeal(V[0]),l.resetStats(),rn().saveLessonBoardNumbers(g,V.map(re=>re.boardNumber)),$.value={id:g,name:y,category:T},s.setLessonInUrl(g),H.value=!1,B()}else alert("No deals found in the lesson file")}const ze=I(()=>l.boardState.correctCount),ct=I(()=>l.boardState.wrongCount);function yt(g){!l.makeBid(g)&&te.value&&(k.value=te.value.boardNumber)}function Qe({seat:g,suit:y,rank:T}){!l.makeCardChoice(y,T)&&te.value&&(k.value=te.value.boardNumber)}function M(){l.clearCardFeedback(),l.goBack()}function X(){we.value<se.value.length-1&&(k.value=null,we.value++,l.loadDeal(se.value[we.value]))}function z(g){g>=0&&g<se.value.length&&(k.value=null,we.value=g,l.loadDeal(se.value[g]))}async function oe({subfolder:g,dealNumber:y}){var T;if(((T=$.value)==null?void 0:T.id)===g&&se.value.length>0){const O=se.value.findIndex(D=>D.boardNumber===y);if(O>=0){z(O);return}}for(const O of s.COLLECTIONS)try{const D=g.includes("/")?g.split("/").pop():g,V=`${O.baseUrl}/${D}.pbn`,J=await fetch(V);if(!J.ok)continue;const re=await J.text();E.value=O.id,s.setCollectionInUrl(O.id),ne({subfolder:g,name:g,category:"",content:re});const de=se.value.findIndex(Te=>Te.boardNumber===y);de>=0&&z(de);return}catch{}}function ve(g){f.value=!1,m.value=!1,v.value=null,oe(g)}function _(g,y){m.value=!1,v.value=null,oe({subfolder:g,dealNumber:y||1})}function S(){$.value=null,s.setLessonInUrl(null),se.value=[],we.value=0,l.resetStats(),H.value=!1,P.value=null,m.value=!1,v.value=null}function A(){E.value=null,$.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),se.value=[],we.value=0,l.resetStats(),H.value=!1,P.value=null,m.value=!1,v.value=null}async function B(){if(P.value=null,!E.value||!$.value)return;const g=G(E.value);if(!g)return;const y=$.value.id,T=y.includes("/")?y.split("/").pop():y,O=`${g.baseUrl}/${T}_Intro.pdf`;try{(await fetch(O,{method:"HEAD"})).ok&&(P.value=O)}catch{}}function F(g){window.innerWidth<600?window.open(g,"_blank"):(j.value=g,H.value=!0)}function U(g){E.value=g,s.setCollectionInUrl(g)}function G(g){return s.COLLECTIONS.find(y=>y.id===g)}async function W(g,y){var O;const T=G(g);if(!T)return console.error("Collection not found:",g),!1;try{const D=await fetch(T.tocUrl);if(!D.ok)throw new Error(`Failed to load TOC: ${D.statusText}`);const V=await D.json();let J=null,re=null;for(const rt of V.categories||[]){const xt=(O=rt.lessons)==null?void 0:O.find(Pe=>Pe.id===y);if(xt){J=xt,re=rt;break}}if(!J)return console.error("Lesson not found in TOC:",y),!1;const de=y.includes("/")?y.split("/").pop():y,Te=`${T.baseUrl}/${de}.pbn`,Ae=await fetch(Te);if(!Ae.ok)throw new Error(`Failed to load lesson: ${Ae.statusText}`);const ot=await Ae.text(),Ze=Al(ot);if(Ze.length>0){const rt=Ze.map(Fe=>({...Fe,subfolder:Fe.subfolder||y,category:Fe.category||re.name}));se.value=rt;const xt=s.getDealFromUrl(),Pe=xt?rt.findIndex(Fe=>Fe.boardNumber===xt):-1;return we.value=Pe>=0?Pe:0,l.loadDeal(rt[we.value]),l.resetStats(),$.value={id:y,name:J.name,category:re.name},B(),!0}return!1}catch(D){return console.error("Error loading lesson from URL:",D),!1}}return(g,y)=>{var T,O,D,V,J,re,de,Te,Ae,ot,Ze,rt,xt,Pe,Fe,ln;return Y.value?(p(),h("div",I$,[c("header",R$,[c("h1",null,C(se.value.length?K.value:Re.value),1),c("div",P$,[ce(Ab),c("button",{class:"progress-btn",onClick:y[0]||(y[0]=Se=>d.value=!0),title:"View Progress"}," Progress "),c("button",{class:"accomplishments-btn",onClick:y[1]||(y[1]=Se=>f.value=!0),title:"View Accomplishments"}," Accomplishments "),R(a).isTeacher.value?(p(),h("button",{key:0,class:"teacher-btn",onClick:y[2]||(y[2]=Se=>{m.value=!0,v.value=null,b.value=""}),title:"View Students"}," Students ")):L("",!0),se.value.length&&E.value?(p(),h("button",{key:1,class:"lessons-btn",onClick:S,title:"Back to "+((T=G(E.value))==null?void 0:T.name)},C((O=G(E.value))==null?void 0:O.name),9,D$)):L("",!0),E.value?(p(),h("button",{key:2,class:"lobby-btn",onClick:A,title:"Return to lobby"}," Lobby ")):L("",!0),ze.value+ct.value>0?(p(),h("div",L$,[c("span",B$,C(ze.value),1),c("span",U$,C(ct.value),1)])):L("",!0),c("div",M$,[he.value!=="student"?(p(),h("button",{key:0,class:ae(["role-badge","role-"+he.value]),onClick:A,title:"Return to "+he.value+" lobby"},C(he.value),11,F$)):L("",!0),c("button",{class:"user-btn",onClick:y[3]||(y[3]=Se=>u.value=!0),title:me.value},C(fe.value),9,j$)])])]),c("main",H$,[ce(hb),ce(mb),m.value&&!v.value?(p(),De(i1,{key:0,onClose:y[4]||(y[4]=Se=>m.value=!1),onSelectStudent:y[5]||(y[5]=(Se,cn)=>{v.value=Se,b.value=cn})})):m.value&&v.value?(p(),De(z1,{key:1,studentId:v.value,studentName:b.value,onBack:y[6]||(y[6]=Se=>v.value=null),onNavigateToLesson:_},null,8,["studentId","studentName"])):!se.value.length&&!E.value?(p(),De(p$,{key:2,onSelectCollection:U,onShowBecomeTeacher:y[7]||(y[7]=Se=>w.value=!0)})):!se.value.length&&E.value?(p(),h("div",V$,[c("h2",null,C(((D=G(E.value))==null?void 0:D.name)||E.value),1),y[17]||(y[17]=c("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ce(_w,{visible:!0,inline:!0,collection:G(E.value),onLoad:ne},null,8,["collection"])])):(p(),h("div",K$,[c("div",W$,[se.value.length>1?(p(),De(Jc,{key:0,boardNumbers:se.value.map(Se=>Se.boardNumber),lessonSubfolder:((V=te.value)==null?void 0:V.subfolder)||((J=te.value)==null?void 0:J.category)||"",currentIndex:we.value,forceRedBoard:k.value,introUrl:P.value,onGoto:z,onOpenIntro:F},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceRedBoard","introUrl"])):L("",!0),ce(mg,{boardNumber:(re=te.value)==null?void 0:re.boardNumber,dealer:(de=te.value)==null?void 0:de.dealer,vulnerable:(Te=te.value)==null?void 0:Te.vulnerable,contract:(Ae=te.value)==null?void 0:Ae.contract,declarer:(ot=te.value)==null?void 0:ot.declarer,showContract:R(l).auctionState.auctionComplete||R(l).showOpeningLead.value||R(l).hasSteps.value&&!R(l).hasBidSteps.value,openingLead:R(l).showOpeningLead.value?(Ze=te.value)==null?void 0:Ze.openingLead:"",totalDeals:se.value.length,currentIndex:we.value,dealBoardNumbers:se.value.map(Se=>Se.boardNumber),onGoto:z},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ce(Eh,{hands:R(l).hands.value,hiddenSeats:R(l).hiddenSeats.value,showHcp:R(l).showHcp.value,compact:!0,clickableSeat:R(l).hasCardChoice.value?R(l).studentSeat.value:null,playedCards:R(l).showcardsPlayedCards.value,onCardClick:Qe},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),c("div",G$,[R(l).showAuctionTable.value?(p(),De(Yh,{key:0,bids:R(l).hasBidSteps.value?R(l).auctionState.displayedBids:((rt=te.value)==null?void 0:rt.auction)||[],dealer:((xt=te.value)==null?void 0:xt.dealer)||"N",currentBidIndex:R(l).hasBidSteps.value?R(l).auctionState.currentBidIndex:-1,wrongBidIndex:R(l).auctionState.wrongBidIndex,correctBidIndex:R(l).auctionState.correctBidIndex,showTurnIndicator:R(l).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):L("",!0),ce(Fl,{visible:!!R(l).auctionState.wrongBid,type:"wrong",wrongBid:R(l).auctionState.wrongBid,correctBid:R(l).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ce(Fl,{visible:!!R(l).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:R(l).cardChoiceState.wrongCard,correctCardCode:R(l).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),R(l).hasSteps.value?(p(),h("div",z$,[c("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:x},[(p(!0),h(Z,null,ie(R(l).steps.value.slice(0,R(l).currentStepIndex.value),(Se,cn)=>(p(),h(Z,{key:"prev-"+cn},[cn>=R(l).commentaryStartIndex.value?(p(),h(Z,{key:0},[c("span",{class:"narrative-text previous",innerHTML:R(Ls)(R(vn)(Se.text))},null,8,J$),Se.type==="bid"&&Se.explanationText?(p(),h("span",{key:0,class:ae(["narrative-text",cn===R(l).currentStepIndex.value-1&&R(l).isBidStep.value&&!R(l).bidAnswered.value?"current":"previous"]),innerHTML:R(Ls)(R(vn)(Se.explanationText))},null,10,Y$)):L("",!0)],64)):L("",!0)],64))),128)),R(l).currentStep.value?(p(),h("span",{key:0,class:"narrative-text current",innerHTML:R(Ls)(R(vn)(R(l).currentStep.value.text))},null,8,q$)):L("",!0),R(l).bidAnswered.value&&((Pe=R(l).currentStep.value)!=null&&Pe.explanationText)?(p(),h("span",{key:1,class:"narrative-text current",innerHTML:R(Ls)(R(vn)(R(l).currentStep.value.explanationText))},null,8,X$)):L("",!0)],512),c("div",Q$,[R(l).hasBidPrompt.value?(p(),h("div",Z$,[ce(Vh,{lastBid:R(l).lastContractBid.value,canDouble:R(l).canDouble.value,canRedouble:R(l).canRedouble.value,onBid:yt},null,8,["lastBid","canDouble","canRedouble"])])):R(l).hasCardChoice.value?(p(),h("div",ek," Click on the card you would choose ")):L("",!0),R(l).canGoBack.value?(p(),h("button",{key:2,class:"instruction-btn secondary",onClick:M},"  Back ")):L("",!0),!R(l).isComplete.value&&(R(l).bidAnswered.value||!R(l).hasBidPrompt.value&&!R(l).hasCardChoice.value&&R(l).currentStep.value&&R(l).currentStep.value.type!=="end")?(p(),h("button",{key:3,class:"instruction-btn primary",onClick:y[8]||(y[8]=Se=>R(l).advance())},C(((Fe=R(l).currentStep.value)==null?void 0:Fe.type)==="rotate"?"Rotate":"Next")+"  ",1)):L("",!0),R(l).isComplete.value&&we.value<se.value.length-1?(p(),h("button",{key:4,class:"next-deal-btn",onClick:X}," Next Deal  ")):L("",!0)])])):(ln=te.value)!=null&&ln.commentary?(p(),h("div",{key:2,class:"display-commentary",innerHTML:R(Ls)(R(vn)(R(nv)(te.value.commentary)))},null,8,tk)):L("",!0),!R(l).hasSteps.value&&R(l).isComplete.value&&we.value<se.value.length-1?(p(),h("div",sk,[c("button",{class:"next-deal-btn",onClick:X}," Next Deal  ")])):L("",!0)])]))]),ce(sb,{visible:u.value,onClose:y[9]||(y[9]=Se=>u.value=!1),onSwitchUser:ge,onLogout:ge,onBecomeTeacher:y[10]||(y[10]=Se=>w.value=!0)},null,8,["visible"]),ee.value?(p(),h("div",nk," Account created  your data is encrypted and linked to your email for recovery. ")):L("",!0),d.value?(p(),h("div",{key:1,class:"modal-overlay",onClick:y[12]||(y[12]=Zt(Se=>d.value=!1,["self"]))},[ce(Wb,{onClose:y[11]||(y[11]=Se=>d.value=!1)})])):L("",!0),f.value?(p(),h("div",{key:2,class:"modal-overlay",onClick:y[14]||(y[14]=Zt(Se=>f.value=!1,["self"]))},[ce(E_,{onClose:y[13]||(y[13]=Se=>f.value=!1),onNavigateToDeal:ve})])):L("",!0),ce(Nw,{visible:H.value,url:j.value||"",onClose:y[15]||(y[15]=Se=>H.value=!1)},null,8,["visible","url"]),w.value?(p(),De(A$,{key:3,onClose:y[16]||(y[16]=Se=>w.value=!1),onActivated:Q})):L("",!0),ce(E$)])):(p(),De(_y,{key:0,onUserReady:Ge}))}}},rk=()=>Uf(()=>import("./JoinClassroomView-CO6i9Xn_.js"),__vite__mapDeps([0,1])),ak=[{path:"/join/:joinCode",name:"join",component:rk},{path:"/:pathMatch(.*)*",name:"app",component:ok}],lk=Wm({history:Cm(),routes:ak}),au=Of(Df);au.use(lk);au.mount("#app");export{pe as _,c as a,ce as b,h as c,L as d,xs as e,_o as f,Me as g,Zn as h,md as i,mc as j,Gm as k,p as l,gt as o,N as r,C as t,ik as u,Yu as w};
