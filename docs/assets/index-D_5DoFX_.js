const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-B7ZjSB01.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Sr(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Pe={},sn=[],zt=()=>{},Ni=()=>!1,na=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Cr=e=>e.startsWith("onUpdate:"),rt=Object.assign,$r=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},td=Object.prototype.hasOwnProperty,Ie=(e,t)=>td.call(e,t),he=Array.isArray,nn=e=>uo(e)==="[object Map]",bn=e=>uo(e)==="[object Set]",fl=e=>uo(e)==="[object Date]",Ce=e=>typeof e=="function",Je=e=>typeof e=="string",Mt=e=>typeof e=="symbol",De=e=>e!==null&&typeof e=="object",Ei=e=>(De(e)||Ce(e))&&Ce(e.then)&&Ce(e.catch),Oi=Object.prototype.toString,uo=e=>Oi.call(e),sd=e=>uo(e).slice(8,-1),Ii=e=>uo(e)==="[object Object]",kr=e=>Je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ln=Sr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oa=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},nd=/-\w/g,It=oa(e=>e.replace(nd,t=>t.slice(1).toUpperCase())),od=/\B([A-Z])/g,Ss=oa(e=>e.replace(od,"-$1").toLowerCase()),aa=oa(e=>e.charAt(0).toUpperCase()+e.slice(1)),_a=oa(e=>e?`on${aa(e)}`:""),hs=(e,t)=>!Object.is(e,t),No=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Pi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},ra=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let pl;const la=()=>pl||(pl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function st(e){if(he(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Je(n)?id(n):st(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Je(e)||De(e))return e}const ad=/;(?![^(]*\))/g,rd=/:([^]+)/,ld=/\/\*[^]*?\*\//g;function id(e){const t={};return e.replace(ld,"").split(ad).forEach(s=>{if(s){const n=s.split(rd);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ce(e){let t="";if(Je(e))t=e;else if(he(e))for(let s=0;s<e.length;s++){const n=ce(e[s]);n&&(t+=n+" ")}else if(De(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const cd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ud=Sr(cd);function Di(e){return!!e||e===""}function dd(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Ms(e[n],t[n]);return s}function Ms(e,t){if(e===t)return!0;let s=fl(e),n=fl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Mt(e),n=Mt(t),s||n)return e===t;if(s=he(e),n=he(t),s||n)return s&&n?dd(e,t):!1;if(s=De(e),n=De(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const l in e){const i=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(i&&!u||!i&&u||!Ms(e[l],t[l]))return!1}}return String(e)===String(t)}function xr(e,t){return e.findIndex(s=>Ms(s,t))}const Ri=e=>!!(e&&e.__v_isRef===!0),b=e=>Je(e)?e:e==null?"":he(e)||De(e)&&(e.toString===Oi||!Ce(e.toString))?Ri(e)?b(e.value):JSON.stringify(e,Li,2):String(e),Li=(e,t)=>Ri(t)?Li(e,t.value):nn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[wa(n,a)+" =>"]=o,s),{})}:bn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>wa(s))}:Mt(t)?wa(t):De(t)&&!he(t)&&!Ii(t)?String(t):t,wa=(e,t="")=>{var s;return Mt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let St;class fd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=St,!t&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=St;try{return St=this,t()}finally{St=s}}}on(){++this._on===1&&(this.prevScope=St,St=this)}off(){this._on>0&&--this._on===0&&(St=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function pd(){return St}let Le;const Sa=new WeakSet;class Bi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,St&&St.active&&St.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sa.has(this)&&(Sa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ui(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vl(this),Fi(this);const t=Le,s=Rt;Le=this,Rt=!0;try{return this.fn()}finally{ji(this),Le=t,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Nr(t);this.deps=this.depsTail=void 0,vl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wa(this)&&this.run()}get dirty(){return Wa(this)}}let Mi=0,Bn,Mn;function Ui(e,t=!1){if(e.flags|=8,t){e.next=Mn,Mn=e;return}e.next=Bn,Bn=e}function Ar(){Mi++}function Tr(){if(--Mi>0)return;if(Mn){let t=Mn;for(Mn=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Bn;){let t=Bn;for(Bn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Fi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ji(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Nr(n),vd(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Wa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Hi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Hi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===qn)||(e.globalVersion=qn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Wa(e))))return;e.flags|=2;const t=e.dep,s=Le,n=Rt;Le=e,Rt=!0;try{Fi(e);const o=e.fn(e._value);(t.version===0||hs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Le=s,Rt=n,ji(e),e.flags&=-3}}function Nr(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)Nr(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function vd(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Rt=!0;const Wi=[];function os(){Wi.push(Rt),Rt=!1}function as(){const e=Wi.pop();Rt=e===void 0?!0:e}function vl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Le;Le=void 0;try{t()}finally{Le=s}}}let qn=0;class md{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Er{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Le||!Rt||Le===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Le)s=this.activeLink=new md(Le,this),Le.deps?(s.prevDep=Le.depsTail,Le.depsTail.nextDep=s,Le.depsTail=s):Le.deps=Le.depsTail=s,Ki(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Le.depsTail,s.nextDep=void 0,Le.depsTail.nextDep=s,Le.depsTail=s,Le.deps===s&&(Le.deps=n)}return s}trigger(t){this.version++,qn++,this.notify(t)}notify(t){Ar();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Tr()}}}function Ki(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ki(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ka=new WeakMap,Rs=Symbol(""),Va=Symbol(""),Xn=Symbol("");function ct(e,t,s){if(Rt&&Le){let n=Ka.get(e);n||Ka.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Er),o.map=n,o.key=s),o.track()}}function Zt(e,t,s,n,o,a){const l=Ka.get(e);if(!l){qn++;return}const i=u=>{u&&u.trigger()};if(Ar(),t==="clear")l.forEach(i);else{const u=he(e),c=u&&kr(s);if(u&&s==="length"){const f=Number(n);l.forEach((d,v)=>{(v==="length"||v===Xn||!Mt(v)&&v>=f)&&i(d)})}else switch((s!==void 0||l.has(void 0))&&i(l.get(s)),c&&i(l.get(Xn)),t){case"add":u?c&&i(l.get("length")):(i(l.get(Rs)),nn(e)&&i(l.get(Va)));break;case"delete":u||(i(l.get(Rs)),nn(e)&&i(l.get(Va)));break;case"set":nn(e)&&i(l.get(Rs));break}}Tr()}function Ws(e){const t=Oe(e);return t===e?t:(ct(t,"iterate",Xn),Et(e)?t:t.map(Ut))}function ia(e){return ct(e=Oe(e),"iterate",Xn),e}function fs(e,t){return rs(e)?cn(Ls(e)?Ut(t):t):Ut(t)}const hd={__proto__:null,[Symbol.iterator](){return Ca(this,Symbol.iterator,e=>fs(this,e))},concat(...e){return Ws(this).concat(...e.map(t=>he(t)?Ws(t):t))},entries(){return Ca(this,"entries",e=>(e[1]=fs(this,e[1]),e))},every(e,t){return Yt(this,"every",e,t,void 0,arguments)},filter(e,t){return Yt(this,"filter",e,t,s=>s.map(n=>fs(this,n)),arguments)},find(e,t){return Yt(this,"find",e,t,s=>fs(this,s),arguments)},findIndex(e,t){return Yt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Yt(this,"findLast",e,t,s=>fs(this,s),arguments)},findLastIndex(e,t){return Yt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Yt(this,"forEach",e,t,void 0,arguments)},includes(...e){return $a(this,"includes",e)},indexOf(...e){return $a(this,"indexOf",e)},join(e){return Ws(this).join(e)},lastIndexOf(...e){return $a(this,"lastIndexOf",e)},map(e,t){return Yt(this,"map",e,t,void 0,arguments)},pop(){return $n(this,"pop")},push(...e){return $n(this,"push",e)},reduce(e,...t){return ml(this,"reduce",e,t)},reduceRight(e,...t){return ml(this,"reduceRight",e,t)},shift(){return $n(this,"shift")},some(e,t){return Yt(this,"some",e,t,void 0,arguments)},splice(...e){return $n(this,"splice",e)},toReversed(){return Ws(this).toReversed()},toSorted(e){return Ws(this).toSorted(e)},toSpliced(...e){return Ws(this).toSpliced(...e)},unshift(...e){return $n(this,"unshift",e)},values(){return Ca(this,"values",e=>fs(this,e))}};function Ca(e,t,s){const n=ia(e),o=n[t]();return n!==e&&!Et(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const gd=Array.prototype;function Yt(e,t,s,n,o,a){const l=ia(e),i=l!==e&&!Et(e),u=l[t];if(u!==gd[t]){const d=u.apply(e,a);return i?Ut(d):d}let c=s;l!==e&&(i?c=function(d,v){return s.call(this,fs(e,d),v,e)}:s.length>2&&(c=function(d,v){return s.call(this,d,v,e)}));const f=u.call(l,c,n);return i&&o?o(f):f}function ml(e,t,s,n){const o=ia(e);let a=s;return o!==e&&(Et(e)?s.length>3&&(a=function(l,i,u){return s.call(this,l,i,u,e)}):a=function(l,i,u){return s.call(this,l,fs(e,i),u,e)}),o[t](a,...n)}function $a(e,t,s){const n=Oe(e);ct(n,"iterate",Xn);const o=n[t](...s);return(o===-1||o===!1)&&Pr(s[0])?(s[0]=Oe(s[0]),n[t](...s)):o}function $n(e,t,s=[]){os(),Ar();const n=Oe(e)[t].apply(e,s);return Tr(),as(),n}const yd=Sr("__proto__,__v_isRef,__isVue"),Vi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function bd(e){Mt(e)||(e=String(e));const t=Oe(this);return ct(t,"has",e),t.hasOwnProperty(e)}class Gi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?Nd:qi:a?Yi:Ji).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=he(t);if(!o){let u;if(l&&(u=hd[s]))return u;if(s==="hasOwnProperty")return bd}const i=Reflect.get(t,s,ft(t)?t:n);if((Mt(s)?Vi.has(s):yd(s))||(o||ct(t,"get",s),a))return i;if(ft(i)){const u=l&&kr(s)?i:i.value;return o&&De(u)?za(u):u}return De(i)?o?za(i):Lt(i):i}}class zi extends Gi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const l=he(t)&&kr(s);if(!this._isShallow){const c=rs(a);if(!Et(n)&&!rs(n)&&(a=Oe(a),n=Oe(n)),!l&&ft(a)&&!ft(n))return c||(a.value=n),!0}const i=l?Number(s)<t.length:Ie(t,s),u=Reflect.set(t,s,n,ft(t)?t:o);return t===Oe(o)&&(i?hs(n,a)&&Zt(t,"set",s,n):Zt(t,"add",s,n)),u}deleteProperty(t,s){const n=Ie(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Zt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Mt(s)||!Vi.has(s))&&ct(t,"has",s),n}ownKeys(t){return ct(t,"iterate",he(t)?"length":Rs),Reflect.ownKeys(t)}}class _d extends Gi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const wd=new zi,Sd=new _d,Cd=new zi(!0);const Ga=e=>e,_o=e=>Reflect.getPrototypeOf(e);function $d(e,t,s){return function(...n){const o=this.__v_raw,a=Oe(o),l=nn(a),i=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,c=o[e](...n),f=s?Ga:t?cn:Ut;return!t&&ct(a,"iterate",u?Va:Rs),rt(Object.create(c),{next(){const{value:d,done:v}=c.next();return v?{value:d,done:v}:{value:i?[f(d[0]),f(d[1])]:f(d),done:v}}})}}function wo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kd(e,t){const s={get(o){const a=this.__v_raw,l=Oe(a),i=Oe(o);e||(hs(o,i)&&ct(l,"get",o),ct(l,"get",i));const{has:u}=_o(l),c=t?Ga:e?cn:Ut;if(u.call(l,o))return c(a.get(o));if(u.call(l,i))return c(a.get(i));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!e&&ct(Oe(o),"iterate",Rs),o.size},has(o){const a=this.__v_raw,l=Oe(a),i=Oe(o);return e||(hs(o,i)&&ct(l,"has",o),ct(l,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const l=this,i=l.__v_raw,u=Oe(i),c=t?Ga:e?cn:Ut;return!e&&ct(u,"iterate",Rs),i.forEach((f,d)=>o.call(a,c(f),c(d),l))}};return rt(s,e?{add:wo("add"),set:wo("set"),delete:wo("delete"),clear:wo("clear")}:{add(o){!t&&!Et(o)&&!rs(o)&&(o=Oe(o));const a=Oe(this);return _o(a).has.call(a,o)||(a.add(o),Zt(a,"add",o,o)),this},set(o,a){!t&&!Et(a)&&!rs(a)&&(a=Oe(a));const l=Oe(this),{has:i,get:u}=_o(l);let c=i.call(l,o);c||(o=Oe(o),c=i.call(l,o));const f=u.call(l,o);return l.set(o,a),c?hs(a,f)&&Zt(l,"set",o,a):Zt(l,"add",o,a),this},delete(o){const a=Oe(this),{has:l,get:i}=_o(a);let u=l.call(a,o);u||(o=Oe(o),u=l.call(a,o)),i&&i.call(a,o);const c=a.delete(o);return u&&Zt(a,"delete",o,void 0),c},clear(){const o=Oe(this),a=o.size!==0,l=o.clear();return a&&Zt(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=$d(o,e,t)}),s}function Or(e,t){const s=kd(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Ie(s,o)&&o in n?s:n,o,a)}const xd={get:Or(!1,!1)},Ad={get:Or(!1,!0)},Td={get:Or(!0,!1)};const Ji=new WeakMap,Yi=new WeakMap,qi=new WeakMap,Nd=new WeakMap;function Ed(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Od(e){return e.__v_skip||!Object.isExtensible(e)?0:Ed(sd(e))}function Lt(e){return rs(e)?e:Ir(e,!1,wd,xd,Ji)}function Xi(e){return Ir(e,!1,Cd,Ad,Yi)}function za(e){return Ir(e,!0,Sd,Td,qi)}function Ir(e,t,s,n,o){if(!De(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Od(e);if(a===0)return e;const l=o.get(e);if(l)return l;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Ls(e){return rs(e)?Ls(e.__v_raw):!!(e&&e.__v_isReactive)}function rs(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Pr(e){return e?!!e.__v_raw:!1}function Oe(e){const t=e&&e.__v_raw;return t?Oe(t):e}function Id(e){return!Ie(e,"__v_skip")&&Object.isExtensible(e)&&Pi(e,"__v_skip",!0),e}const Ut=e=>De(e)?Lt(e):e,cn=e=>De(e)?za(e):e;function ft(e){return e?e.__v_isRef===!0:!1}function O(e){return Qi(e,!1)}function Pd(e){return Qi(e,!0)}function Qi(e,t){return ft(e)?e:new Dd(e,t)}class Dd{constructor(t,s){this.dep=new Er,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Oe(t),this._value=s?t:Ut(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Et(t)||rs(t);t=n?t:Oe(t),hs(t,s)&&(this._rawValue=t,this._value=n?t:Ut(t),this.dep.trigger())}}function U(e){return ft(e)?e.value:e}const Rd={get:(e,t,s)=>t==="__v_raw"?e:U(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ft(o)&&!ft(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Zi(e){return Ls(e)?e:new Proxy(e,Rd)}class Ld{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Er(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Le!==this)return Ui(this,!0),!0}get value(){const t=this.dep.track();return Hi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Bd(e,t,s=!1){let n,o;return Ce(e)?n=e:(n=e.get,o=e.set),new Ld(n,o,s)}const So={},Bo=new WeakMap;let Is;function Md(e,t=!1,s=Is){if(s){let n=Bo.get(s);n||Bo.set(s,n=[]),n.push(e)}}function Ud(e,t,s=Pe){const{immediate:n,deep:o,once:a,scheduler:l,augmentJob:i,call:u}=s,c=T=>o?T:Et(T)||o===!1||o===0?es(T,1):es(T);let f,d,v,h,g=!1,y=!1;if(ft(e)?(d=()=>e.value,g=Et(e)):Ls(e)?(d=()=>c(e),g=!0):he(e)?(y=!0,g=e.some(T=>Ls(T)||Et(T)),d=()=>e.map(T=>{if(ft(T))return T.value;if(Ls(T))return c(T);if(Ce(T))return u?u(T,2):T()})):Ce(e)?t?d=u?()=>u(e,2):e:d=()=>{if(v){os();try{v()}finally{as()}}const T=Is;Is=f;try{return u?u(e,3,[h]):e(h)}finally{Is=T}}:d=zt,t&&o){const T=d,D=o===!0?1/0:o;d=()=>es(T(),D)}const k=pd(),$=()=>{f.stop(),k&&k.active&&$r(k.effects,f)};if(a&&t){const T=t;t=(...D)=>{T(...D),$()}}let _=y?new Array(e.length).fill(So):So;const w=T=>{if(!(!(f.flags&1)||!f.dirty&&!T))if(t){const D=f.run();if(o||g||(y?D.some((B,M)=>hs(B,_[M])):hs(D,_))){v&&v();const B=Is;Is=f;try{const M=[D,_===So?void 0:y&&_[0]===So?[]:_,h];_=D,u?u(t,3,M):t(...M)}finally{Is=B}}}else f.run()};return i&&i(w),f=new Bi(d),f.scheduler=l?()=>l(w,!1):w,h=T=>Md(T,!1,f),v=f.onStop=()=>{const T=Bo.get(f);if(T){if(u)u(T,4);else for(const D of T)D();Bo.delete(f)}},t?n?w(!0):_=f.run():l?l(w.bind(null,!0),!0):f.run(),$.pause=f.pause.bind(f),$.resume=f.resume.bind(f),$.stop=$,$}function es(e,t=1/0,s){if(t<=0||!De(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,ft(e))es(e.value,t,s);else if(he(e))for(let n=0;n<e.length;n++)es(e[n],t,s);else if(bn(e)||nn(e))e.forEach(n=>{es(n,t,s)});else if(Ii(e)){for(const n in e)es(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&es(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fo(e,t,s,n){try{return n?e(...n):e()}catch(o){ca(o,t,s)}}function Jt(e,t,s,n){if(Ce(e)){const o=fo(e,t,s,n);return o&&Ei(o)&&o.catch(a=>{ca(a,t,s)}),o}if(he(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Jt(e[a],t,s,n));return o}}function ca(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Pe;if(t){let i=t.parent;const u=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,u,c)===!1)return}i=i.parent}if(a){os(),fo(a,null,10,[e,u,c]),as();return}}Fd(e,s,o,n,l)}function Fd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const bt=[];let Wt=-1;const on=[];let ps=null,Gs=0;const ec=Promise.resolve();let Mo=null;function Qn(e){const t=Mo||ec;return e?t.then(this?e.bind(this):e):t}function jd(e){let t=Wt+1,s=bt.length;for(;t<s;){const n=t+s>>>1,o=bt[n],a=Zn(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Dr(e){if(!(e.flags&1)){const t=Zn(e),s=bt[bt.length-1];!s||!(e.flags&2)&&t>=Zn(s)?bt.push(e):bt.splice(jd(t),0,e),e.flags|=1,tc()}}function tc(){Mo||(Mo=ec.then(nc))}function Hd(e){he(e)?on.push(...e):ps&&e.id===-1?ps.splice(Gs+1,0,e):e.flags&1||(on.push(e),e.flags|=1),tc()}function hl(e,t,s=Wt+1){for(;s<bt.length;s++){const n=bt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;bt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function sc(e){if(on.length){const t=[...new Set(on)].sort((s,n)=>Zn(s)-Zn(n));if(on.length=0,ps){ps.push(...t);return}for(ps=t,Gs=0;Gs<ps.length;Gs++){const s=ps[Gs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ps=null,Gs=0}}const Zn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function nc(e){try{for(Wt=0;Wt<bt.length;Wt++){const t=bt[Wt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),fo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Wt<bt.length;Wt++){const t=bt[Wt];t&&(t.flags&=-2)}Wt=-1,bt.length=0,sc(),Mo=null,(bt.length||on.length)&&nc()}}let at=null,oc=null;function Uo(e){const t=at;return at=e,oc=e&&e.type.__scopeId||null,t}function Wd(e,t=at,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Ho(-1);const a=Uo(t);let l;try{l=e(...o)}finally{Uo(a),n._d&&Ho(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function je(e,t){if(at===null)return e;const s=pa(at),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,i,u=Pe]=t[o];a&&(Ce(a)&&(a={mounted:a,updated:a}),a.deep&&es(l),n.push({dir:a,instance:s,value:l,oldValue:void 0,arg:i,modifiers:u}))}return e}function Cs(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let l=0;l<o.length;l++){const i=o[l];a&&(i.oldValue=a[l].value);let u=i.dir[n];u&&(os(),Jt(u,s,8,[e.el,i,e,t]),as())}}function Eo(e,t){if(dt){let s=dt.provides;const n=dt.parent&&dt.parent.provides;n===s&&(s=dt.provides=Object.create(n)),s[e]=t}}function Bt(e,t,s=!1){const n=Gf();if(n||rn){let o=rn?rn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&Ce(t)?t.call(n&&n.proxy):t}}const Kd=Symbol.for("v-scx"),Vd=()=>Bt(Kd);function ut(e,t,s){return ac(e,t,s)}function ac(e,t,s=Pe){const{immediate:n,deep:o,flush:a,once:l}=s,i=rt({},s),u=t&&n||!t&&a!=="post";let c;if(no){if(a==="sync"){const h=Vd();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=zt,h.resume=zt,h.pause=zt,h}}const f=dt;i.call=(h,g,y)=>Jt(h,f,g,y);let d=!1;a==="post"?i.scheduler=h=>{gt(h,f&&f.suspense)}:a!=="sync"&&(d=!0,i.scheduler=(h,g)=>{g?h():Dr(h)}),i.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const v=Ud(e,t,i);return no&&(c?c.push(v):u&&v()),v}function Gd(e,t,s){const n=this.proxy,o=Je(e)?e.includes(".")?rc(n,e):()=>n[e]:e.bind(n,n);let a;Ce(t)?a=t:(a=t.handler,s=t);const l=po(this),i=ac(o,a.bind(n),s);return l(),i}function rc(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const lc=Symbol("_vte"),zd=e=>e.__isTeleport,Un=e=>e&&(e.disabled||e.disabled===""),gl=e=>e&&(e.defer||e.defer===""),yl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,bl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ja=(e,t)=>{const s=e&&e.to;return Je(s)?t?t(s):null:s},ic={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,l,i,u,c){const{mc:f,pc:d,pbc:v,o:{insert:h,querySelector:g,createText:y,createComment:k}}=c,$=Un(t.props);let{shapeFlag:_,children:w,dynamicChildren:T}=t;if(e==null){const D=t.el=y(""),B=t.anchor=y("");h(D,s,n),h(B,s,n);const M=(K,fe)=>{_&16&&f(w,K,fe,o,a,l,i,u)},z=()=>{const K=t.target=Ja(t.props,g),fe=cc(K,t,y,h);K&&(l!=="svg"&&yl(K)?l="svg":l!=="mathml"&&bl(K)&&(l="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(K),$||(M(K,fe),Oo(t,!1)))};$&&(M(s,B),Oo(t,!0)),gl(t.props)?(t.el.__isMounted=!1,gt(()=>{z(),delete t.el.__isMounted},a)):z()}else{if(gl(t.props)&&e.el.__isMounted===!1){gt(()=>{ic.process(e,t,s,n,o,a,l,i,u,c)},a);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,B=t.target=e.target,M=t.targetAnchor=e.targetAnchor,z=Un(e.props),K=z?s:B,fe=z?D:M;if(l==="svg"||yl(B)?l="svg":(l==="mathml"||bl(B))&&(l="mathml"),T?(v(e.dynamicChildren,T,K,o,a,l,i),Fr(e,t,!0)):u||d(e,t,K,fe,o,a,l,i,!1),$)z?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Co(t,s,D,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const me=t.target=Ja(t.props,g);me&&Co(t,me,null,c,0)}else z&&Co(t,B,M,c,1);Oo(t,$)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:l,children:i,anchor:u,targetStart:c,targetAnchor:f,target:d,props:v}=e;if(d&&(o(c),o(f)),a&&o(u),l&16){const h=a||!Un(v);for(let g=0;g<i.length;g++){const y=i[g];n(y,t,s,h,!!y.dynamicChildren)}}},move:Co,hydrate:Jd};function Co(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:l,anchor:i,shapeFlag:u,children:c,props:f}=e,d=a===2;if(d&&n(l,t,s),(!d||Un(f))&&u&16)for(let v=0;v<c.length;v++)o(c[v],t,s,2);d&&n(i,t,s)}function Jd(e,t,s,n,o,a,{o:{nextSibling:l,parentNode:i,querySelector:u,insert:c,createText:f}},d){function v(y,k,$,_){k.anchor=d(l(y),k,i(y),s,n,o,a),k.targetStart=$,k.targetAnchor=_}const h=t.target=Ja(t.props,u),g=Un(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)v(e,t,y,y&&l(y));else{t.anchor=l(e);let k=y;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,h._lpa=t.targetAnchor&&l(t.targetAnchor);break}}k=l(k)}t.targetAnchor||cc(h,t,f,c),d(y&&l(y),t,h,s,n,o,a)}Oo(t,g)}else g&&t.shapeFlag&16&&v(e,t,e,l(e));return t.anchor&&l(t.anchor)}const Yd=ic;function Oo(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function cc(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[lc]=a,e&&(n(o,e),n(a,e)),a}const qd=Symbol("_leaveCb");function Rr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function uc(e,t){return Ce(e)?rt({name:e.name},t,{setup:e}):e}function dc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Fo=new WeakMap;function Fn(e,t,s,n,o=!1){if(he(e)){e.forEach((g,y)=>Fn(g,t&&(he(t)?t[y]:t),s,n,o));return}if(an(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Fn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?pa(n.component):n.el,l=o?null:a,{i,r:u}=e,c=t&&t.r,f=i.refs===Pe?i.refs={}:i.refs,d=i.setupState,v=Oe(d),h=d===Pe?Ni:g=>Ie(v,g);if(c!=null&&c!==u){if(_l(t),Je(c))f[c]=null,h(c)&&(d[c]=null);else if(ft(c)){c.value=null;const g=t;g.k&&(f[g.k]=null)}}if(Ce(u))fo(u,i,12,[l,f]);else{const g=Je(u),y=ft(u);if(g||y){const k=()=>{if(e.f){const $=g?h(u)?d[u]:f[u]:u.value;if(o)he($)&&$r($,a);else if(he($))$.includes(a)||$.push(a);else if(g)f[u]=[a],h(u)&&(d[u]=f[u]);else{const _=[a];u.value=_,e.k&&(f[e.k]=_)}}else g?(f[u]=l,h(u)&&(d[u]=l)):y&&(u.value=l,e.k&&(f[e.k]=l))};if(l){const $=()=>{k(),Fo.delete(e)};$.id=-1,Fo.set(e,$),gt($,s)}else _l(e),k()}}}function _l(e){const t=Fo.get(e);t&&(t.flags|=8,Fo.delete(e))}la().requestIdleCallback;la().cancelIdleCallback;const an=e=>!!e.type.__asyncLoader,fc=e=>e.type.__isKeepAlive;function Xd(e,t){pc(e,"a",t)}function Qd(e,t){pc(e,"da",t)}function pc(e,t,s=dt){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ua(t,n,s),s){let o=s.parent;for(;o&&o.parent;)fc(o.parent.vnode)&&Zd(n,t,s,o),o=o.parent}}function Zd(e,t,s,n){const o=ua(t,e,n,!0);Br(()=>{$r(n[t],o)},s)}function ua(e,t,s=dt,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{os();const i=po(s),u=Jt(t,s,e,l);return i(),as(),u});return n?o.unshift(a):o.push(a),a}}const is=e=>(t,s=dt)=>{(!no||e==="sp")&&ua(e,(...n)=>t(...n),s)},ef=is("bm"),_t=is("m"),tf=is("bu"),sf=is("u"),Lr=is("bum"),Br=is("um"),nf=is("sp"),of=is("rtg"),af=is("rtc");function rf(e,t=dt){ua("ec",e,t)}const lf="components";function cf(e,t){return df(lf,e,!0,t)||e}const uf=Symbol.for("v-ndc");function df(e,t,s=!0,n=!1){const o=at||dt;if(o){const a=o.type;{const i=Xf(a,!1);if(i&&(i===t||i===It(t)||i===aa(It(t))))return a}const l=wl(o[e]||a[e],t)||wl(o.appContext[e],t);return!l&&n?a:l}}function wl(e,t){return e&&(e[t]||e[It(t)]||e[aa(It(t))])}function ie(e,t,s,n){let o;const a=s,l=he(e);if(l||Je(e)){const i=l&&Ls(e);let u=!1,c=!1;i&&(u=!Et(e),c=rs(e),e=ia(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(u?c?cn(Ut(e[f])):Ut(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(De(e))if(e[Symbol.iterator])o=Array.from(e,(i,u)=>t(i,u,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let u=0,c=i.length;u<c;u++){const f=i[u];o[u]=t(e[f],f,u,a)}}else o=[];return o}function ff(e,t,s={},n,o){if(at.ce||at.parent&&an(at.parent)&&at.parent.ce){const c=Object.keys(s).length>0;return s.name=t,p(),Fe(X,null,[ge("slot",s,n)],c?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),p();const l=a&&vc(a(s)),i=s.key||l&&l.key,u=Fe(X,{key:(i&&!Mt(i)?i:`_${t}`)+(!l&&n?"_fb":"")},l||[],l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),u}function vc(e){return e.some(t=>to(t)?!(t.type===ls||t.type===X&&!vc(t.children)):!0)?e:null}const Ya=e=>e?Ic(e)?pa(e):Ya(e.parent):null,jn=rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ya(e.parent),$root:e=>Ya(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>hc(e),$forceUpdate:e=>e.f||(e.f=()=>{Dr(e.update)}),$nextTick:e=>e.n||(e.n=Qn.bind(e.proxy)),$watch:e=>Gd.bind(e)}),ka=(e,t)=>e!==Pe&&!e.__isScriptSetup&&Ie(e,t),pf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:l,type:i,appContext:u}=e;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(ka(n,t))return l[t]=1,n[t];if(o!==Pe&&Ie(o,t))return l[t]=2,o[t];if(Ie(a,t))return l[t]=3,a[t];if(s!==Pe&&Ie(s,t))return l[t]=4,s[t];qa&&(l[t]=0)}}const c=jn[t];let f,d;if(c)return t==="$attrs"&&ct(e.attrs,"get",""),c(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==Pe&&Ie(s,t))return l[t]=4,s[t];if(d=u.config.globalProperties,Ie(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return ka(o,t)?(o[t]=s,!0):n!==Pe&&Ie(n,t)?(n[t]=s,!0):Ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:l}},i){let u;return!!(s[i]||e!==Pe&&i[0]!=="$"&&Ie(e,i)||ka(t,i)||Ie(a,i)||Ie(n,i)||Ie(jn,i)||Ie(o.config.globalProperties,i)||(u=l.__cssModules)&&u[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Ie(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Sl(e){return he(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let qa=!0;function vf(e){const t=hc(e),s=e.proxy,n=e.ctx;qa=!1,t.beforeCreate&&Cl(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:i,provide:u,inject:c,created:f,beforeMount:d,mounted:v,beforeUpdate:h,updated:g,activated:y,deactivated:k,beforeDestroy:$,beforeUnmount:_,destroyed:w,unmounted:T,render:D,renderTracked:B,renderTriggered:M,errorCaptured:z,serverPrefetch:K,expose:fe,inheritAttrs:me,components:pe,directives:ye,filters:Ae}=t;if(c&&mf(c,n,null),l)for(const Z in l){const ee=l[Z];Ce(ee)&&(n[Z]=ee.bind(s))}if(o){const Z=o.call(s,s);De(Z)&&(e.data=Lt(Z))}if(qa=!0,a)for(const Z in a){const ee=a[Z],ne=Ce(ee)?ee.bind(s,s):Ce(ee.get)?ee.get.bind(s,s):zt,Q=!Ce(ee)&&Ce(ee.set)?ee.set.bind(s):zt,x=E({get:ne,set:Q});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>x.value,set:C=>x.value=C})}if(i)for(const Z in i)mc(i[Z],n,s,Z);if(u){const Z=Ce(u)?u.call(s):u;Reflect.ownKeys(Z).forEach(ee=>{Eo(ee,Z[ee])})}f&&Cl(f,e,"c");function ve(Z,ee){he(ee)?ee.forEach(ne=>Z(ne.bind(s))):ee&&Z(ee.bind(s))}if(ve(ef,d),ve(_t,v),ve(tf,h),ve(sf,g),ve(Xd,y),ve(Qd,k),ve(rf,z),ve(af,B),ve(of,M),ve(Lr,_),ve(Br,T),ve(nf,K),he(fe))if(fe.length){const Z=e.exposed||(e.exposed={});fe.forEach(ee=>{Object.defineProperty(Z,ee,{get:()=>s[ee],set:ne=>s[ee]=ne,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===zt&&(e.render=D),me!=null&&(e.inheritAttrs=me),pe&&(e.components=pe),ye&&(e.directives=ye),K&&dc(e)}function mf(e,t,s=zt){he(e)&&(e=Xa(e));for(const n in e){const o=e[n];let a;De(o)?"default"in o?a=Bt(o.from||n,o.default,!0):a=Bt(o.from||n):a=Bt(o),ft(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[n]=a}}function Cl(e,t,s){Jt(he(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function mc(e,t,s,n){let o=n.includes(".")?rc(s,n):()=>s[n];if(Je(e)){const a=t[e];Ce(a)&&ut(o,a)}else if(Ce(e))ut(o,e.bind(s));else if(De(e))if(he(e))e.forEach(a=>mc(a,t,s,n));else{const a=Ce(e.handler)?e.handler.bind(s):t[e.handler];Ce(a)&&ut(o,a,e)}}function hc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,i=a.get(t);let u;return i?u=i:!o.length&&!s&&!n?u=t:(u={},o.length&&o.forEach(c=>jo(u,c,l,!0)),jo(u,t,l)),De(t)&&a.set(t,u),u}function jo(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&jo(e,a,s,!0),o&&o.forEach(l=>jo(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const i=hf[l]||s&&s[l];e[l]=i?i(e[l],t[l]):t[l]}return e}const hf={data:$l,props:kl,emits:kl,methods:Dn,computed:Dn,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Dn,directives:Dn,watch:yf,provide:$l,inject:gf};function $l(e,t){return t?e?function(){return rt(Ce(e)?e.call(this,this):e,Ce(t)?t.call(this,this):t)}:t:e}function gf(e,t){return Dn(Xa(e),Xa(t))}function Xa(e){if(he(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ht(e,t){return e?[...new Set([].concat(e,t))]:t}function Dn(e,t){return e?rt(Object.create(null),e,t):t}function kl(e,t){return e?he(e)&&he(t)?[...new Set([...e,...t])]:rt(Object.create(null),Sl(e),Sl(t??{})):t}function yf(e,t){if(!e)return t;if(!t)return e;const s=rt(Object.create(null),e);for(const n in t)s[n]=ht(e[n],t[n]);return s}function gc(){return{app:null,config:{isNativeTag:Ni,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bf=0;function _f(e,t){return function(n,o=null){Ce(n)||(n=rt({},n)),o!=null&&!De(o)&&(o=null);const a=gc(),l=new WeakSet,i=[];let u=!1;const c=a.app={_uid:bf++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Zf,get config(){return a.config},set config(f){},use(f,...d){return l.has(f)||(f&&Ce(f.install)?(l.add(f),f.install(c,...d)):Ce(f)&&(l.add(f),f(c,...d))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,d){return d?(a.components[f]=d,c):a.components[f]},directive(f,d){return d?(a.directives[f]=d,c):a.directives[f]},mount(f,d,v){if(!u){const h=c._ceVNode||ge(n,o);return h.appContext=a,v===!0?v="svg":v===!1&&(v=void 0),e(h,f,v),u=!0,c._container=f,f.__vue_app__=c,pa(h.component)}},onUnmount(f){i.push(f)},unmount(){u&&(Jt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,d){return a.provides[f]=d,c},runWithContext(f){const d=rn;rn=c;try{return f()}finally{rn=d}}};return c}}let rn=null;const wf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${It(t)}Modifiers`]||e[`${Ss(t)}Modifiers`];function Sf(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Pe;let o=s;const a=t.startsWith("update:"),l=a&&wf(n,t.slice(7));l&&(l.trim&&(o=s.map(f=>Je(f)?f.trim():f)),l.number&&(o=s.map(ra)));let i,u=n[i=_a(t)]||n[i=_a(It(t))];!u&&a&&(u=n[i=_a(Ss(t))]),u&&Jt(u,e,6,o);const c=n[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Jt(c,e,6,o)}}const Cf=new WeakMap;function yc(e,t,s=!1){const n=s?Cf:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let l={},i=!1;if(!Ce(e)){const u=c=>{const f=yc(c,t,!0);f&&(i=!0,rt(l,f))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!i?(De(e)&&n.set(e,null),null):(he(a)?a.forEach(u=>l[u]=null):rt(l,a),De(e)&&n.set(e,l),l)}function da(e,t){return!e||!na(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ie(e,t[0].toLowerCase()+t.slice(1))||Ie(e,Ss(t))||Ie(e,t))}function xl(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:l,attrs:i,emit:u,render:c,renderCache:f,props:d,data:v,setupState:h,ctx:g,inheritAttrs:y}=e,k=Uo(e);let $,_;try{if(s.shapeFlag&4){const T=o||n,D=T;$=Kt(c.call(D,T,f,d,h,v,g)),_=i}else{const T=t;$=Kt(T.length>1?T(d,{attrs:i,slots:l,emit:u}):T(d,null)),_=t.props?i:$f(i)}}catch(T){Hn.length=0,ca(T,e,1),$=ge(ls)}let w=$;if(_&&y!==!1){const T=Object.keys(_),{shapeFlag:D}=w;T.length&&D&7&&(a&&T.some(Cr)&&(_=kf(_,a)),w=un(w,_,!1,!0))}return s.dirs&&(w=un(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&Rr(w,s.transition),$=w,Uo(k),$}const $f=e=>{let t;for(const s in e)(s==="class"||s==="style"||na(s))&&((t||(t={}))[s]=e[s]);return t},kf=(e,t)=>{const s={};for(const n in e)(!Cr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function xf(e,t,s){const{props:n,children:o,component:a}=e,{props:l,children:i,patchFlag:u}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?Al(n,l,c):!!l;if(u&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const v=f[d];if(l[v]!==n[v]&&!da(c,v))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===l?!1:n?l?Al(n,l,c):!0:!!l;return!1}function Al(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!da(s,a))return!0}return!1}function Af({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const bc={},_c=()=>Object.create(bc),wc=e=>Object.getPrototypeOf(e)===bc;function Tf(e,t,s,n=!1){const o={},a=_c();e.propsDefaults=Object.create(null),Sc(e,t,o,a);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:Xi(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Nf(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,i=Oe(o),[u]=e.propsOptions;let c=!1;if((n||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let v=f[d];if(da(e.emitsOptions,v))continue;const h=t[v];if(u)if(Ie(a,v))h!==a[v]&&(a[v]=h,c=!0);else{const g=It(v);o[g]=Qa(u,i,g,h,e,!1)}else h!==a[v]&&(a[v]=h,c=!0)}}}else{Sc(e,t,o,a)&&(c=!0);let f;for(const d in i)(!t||!Ie(t,d)&&((f=Ss(d))===d||!Ie(t,f)))&&(u?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=Qa(u,i,d,void 0,e,!0)):delete o[d]);if(a!==i)for(const d in a)(!t||!Ie(t,d))&&(delete a[d],c=!0)}c&&Zt(e.attrs,"set","")}function Sc(e,t,s,n){const[o,a]=e.propsOptions;let l=!1,i;if(t)for(let u in t){if(Ln(u))continue;const c=t[u];let f;o&&Ie(o,f=It(u))?!a||!a.includes(f)?s[f]=c:(i||(i={}))[f]=c:da(e.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,l=!0)}if(a){const u=Oe(s),c=i||Pe;for(let f=0;f<a.length;f++){const d=a[f];s[d]=Qa(o,u,d,c[d],e,!Ie(c,d))}}return l}function Qa(e,t,s,n,o,a){const l=e[s];if(l!=null){const i=Ie(l,"default");if(i&&n===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Ce(u)){const{propsDefaults:c}=o;if(s in c)n=c[s];else{const f=po(o);n=c[s]=u.call(null,t),f()}}else n=u;o.ce&&o.ce._setProp(s,n)}l[0]&&(a&&!i?n=!1:l[1]&&(n===""||n===Ss(s))&&(n=!0))}return n}const Ef=new WeakMap;function Cc(e,t,s=!1){const n=s?Ef:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,l={},i=[];let u=!1;if(!Ce(e)){const f=d=>{u=!0;const[v,h]=Cc(d,t,!0);rt(l,v),h&&i.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!u)return De(e)&&n.set(e,sn),sn;if(he(a))for(let f=0;f<a.length;f++){const d=It(a[f]);Tl(d)&&(l[d]=Pe)}else if(a)for(const f in a){const d=It(f);if(Tl(d)){const v=a[f],h=l[d]=he(v)||Ce(v)?{type:v}:rt({},v),g=h.type;let y=!1,k=!0;if(he(g))for(let $=0;$<g.length;++$){const _=g[$],w=Ce(_)&&_.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(k=!1)}else y=Ce(g)&&g.name==="Boolean";h[0]=y,h[1]=k,(y||Ie(h,"default"))&&i.push(d)}}const c=[l,i];return De(e)&&n.set(e,c),c}function Tl(e){return e[0]!=="$"&&!Ln(e)}const Mr=e=>e==="_"||e==="_ctx"||e==="$stable",Ur=e=>he(e)?e.map(Kt):[Kt(e)],Of=(e,t,s)=>{if(t._n)return t;const n=Wd((...o)=>Ur(t(...o)),s);return n._c=!1,n},$c=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Mr(o))continue;const a=e[o];if(Ce(a))t[o]=Of(o,a,n);else if(a!=null){const l=Ur(a);t[o]=()=>l}}},kc=(e,t)=>{const s=Ur(t);e.slots.default=()=>s},xc=(e,t,s)=>{for(const n in t)(s||!Mr(n))&&(e[n]=t[n])},If=(e,t,s)=>{const n=e.slots=_c();if(e.vnode.shapeFlag&32){const o=t._;o?(xc(n,t,s),s&&Pi(n,"_",o,!0)):$c(t,n)}else t&&kc(e,t)},Pf=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,l=Pe;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:xc(o,t,s):(a=!t.$stable,$c(t,o)),l=t}else t&&(kc(e,t),l={default:1});if(a)for(const i in o)!Mr(i)&&l[i]==null&&delete o[i]},gt=Mf;function Df(e){return Rf(e)}function Rf(e,t){const s=la();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:l,createText:i,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:v,setScopeId:h=zt,insertStaticContent:g}=e,y=(S,A,L,V=null,J=null,G=null,ae=void 0,te=null,N=!!A.dynamicChildren)=>{if(S===A)return;S&&!kn(S,A)&&(V=W(S),C(S,J,G,!0),S=null),A.patchFlag===-2&&(N=!1,A.dynamicChildren=null);const{type:I,ref:F,shapeFlag:H}=A;switch(I){case fa:k(S,A,L,V);break;case ls:$(S,A,L,V);break;case Io:S==null&&_(A,L,V,ae);break;case X:pe(S,A,L,V,J,G,ae,te,N);break;default:H&1?D(S,A,L,V,J,G,ae,te,N):H&6?ye(S,A,L,V,J,G,ae,te,N):(H&64||H&128)&&I.process(S,A,L,V,J,G,ae,te,N,ue)}F!=null&&J?Fn(F,S&&S.ref,G,A||S,!A):F==null&&S&&S.ref!=null&&Fn(S.ref,null,G,S,!0)},k=(S,A,L,V)=>{if(S==null)n(A.el=i(A.children),L,V);else{const J=A.el=S.el;A.children!==S.children&&c(J,A.children)}},$=(S,A,L,V)=>{S==null?n(A.el=u(A.children||""),L,V):A.el=S.el},_=(S,A,L,V)=>{[S.el,S.anchor]=g(S.children,A,L,V,S.el,S.anchor)},w=({el:S,anchor:A},L,V)=>{let J;for(;S&&S!==A;)J=v(S),n(S,L,V),S=J;n(A,L,V)},T=({el:S,anchor:A})=>{let L;for(;S&&S!==A;)L=v(S),o(S),S=L;o(A)},D=(S,A,L,V,J,G,ae,te,N)=>{if(A.type==="svg"?ae="svg":A.type==="math"&&(ae="mathml"),S==null)B(A,L,V,J,G,ae,te,N);else{const I=S.el&&S.el._isVueCE?S.el:null;try{I&&I._beginPatch(),K(S,A,J,G,ae,te,N)}finally{I&&I._endPatch()}}},B=(S,A,L,V,J,G,ae,te)=>{let N,I;const{props:F,shapeFlag:H,transition:P,dirs:R}=S;if(N=S.el=l(S.type,G,F&&F.is,F),H&8?f(N,S.children):H&16&&z(S.children,N,null,V,J,xa(S,G),ae,te),R&&Cs(S,null,V,"created"),M(N,S,S.scopeId,ae,V),F){for(const re in F)re!=="value"&&!Ln(re)&&a(N,re,null,F[re],G,V);"value"in F&&a(N,"value",null,F.value,G),(I=F.onVnodeBeforeMount)&&jt(I,V,S)}R&&Cs(S,null,V,"beforeMount");const Y=Lf(J,P);Y&&P.beforeEnter(N),n(N,A,L),((I=F&&F.onVnodeMounted)||Y||R)&&gt(()=>{I&&jt(I,V,S),Y&&P.enter(N),R&&Cs(S,null,V,"mounted")},J)},M=(S,A,L,V,J)=>{if(L&&h(S,L),V)for(let G=0;G<V.length;G++)h(S,V[G]);if(J){let G=J.subTree;if(A===G||Nc(G.type)&&(G.ssContent===A||G.ssFallback===A)){const ae=J.vnode;M(S,ae,ae.scopeId,ae.slotScopeIds,J.parent)}}},z=(S,A,L,V,J,G,ae,te,N=0)=>{for(let I=N;I<S.length;I++){const F=S[I]=te?vs(S[I]):Kt(S[I]);y(null,F,A,L,V,J,G,ae,te)}},K=(S,A,L,V,J,G,ae)=>{const te=A.el=S.el;let{patchFlag:N,dynamicChildren:I,dirs:F}=A;N|=S.patchFlag&16;const H=S.props||Pe,P=A.props||Pe;let R;if(L&&$s(L,!1),(R=P.onVnodeBeforeUpdate)&&jt(R,L,A,S),F&&Cs(A,S,L,"beforeUpdate"),L&&$s(L,!0),(H.innerHTML&&P.innerHTML==null||H.textContent&&P.textContent==null)&&f(te,""),I?fe(S.dynamicChildren,I,te,L,V,xa(A,J),G):ae||ee(S,A,te,null,L,V,xa(A,J),G,!1),N>0){if(N&16)me(te,H,P,L,J);else if(N&2&&H.class!==P.class&&a(te,"class",null,P.class,J),N&4&&a(te,"style",H.style,P.style,J),N&8){const Y=A.dynamicProps;for(let re=0;re<Y.length;re++){const le=Y[re],Ne=H[le],_e=P[le];(_e!==Ne||le==="value")&&a(te,le,Ne,_e,J,L)}}N&1&&S.children!==A.children&&f(te,A.children)}else!ae&&I==null&&me(te,H,P,L,J);((R=P.onVnodeUpdated)||F)&&gt(()=>{R&&jt(R,L,A,S),F&&Cs(A,S,L,"updated")},V)},fe=(S,A,L,V,J,G,ae)=>{for(let te=0;te<A.length;te++){const N=S[te],I=A[te],F=N.el&&(N.type===X||!kn(N,I)||N.shapeFlag&198)?d(N.el):L;y(N,I,F,null,V,J,G,ae,!0)}},me=(S,A,L,V,J)=>{if(A!==L){if(A!==Pe)for(const G in A)!Ln(G)&&!(G in L)&&a(S,G,A[G],null,J,V);for(const G in L){if(Ln(G))continue;const ae=L[G],te=A[G];ae!==te&&G!=="value"&&a(S,G,te,ae,J,V)}"value"in L&&a(S,"value",A.value,L.value,J)}},pe=(S,A,L,V,J,G,ae,te,N)=>{const I=A.el=S?S.el:i(""),F=A.anchor=S?S.anchor:i("");let{patchFlag:H,dynamicChildren:P,slotScopeIds:R}=A;R&&(te=te?te.concat(R):R),S==null?(n(I,L,V),n(F,L,V),z(A.children||[],L,F,J,G,ae,te,N)):H>0&&H&64&&P&&S.dynamicChildren&&S.dynamicChildren.length===P.length?(fe(S.dynamicChildren,P,L,J,G,ae,te),(A.key!=null||J&&A===J.subTree)&&Fr(S,A,!0)):ee(S,A,L,F,J,G,ae,te,N)},ye=(S,A,L,V,J,G,ae,te,N)=>{A.slotScopeIds=te,S==null?A.shapeFlag&512?J.ctx.activate(A,L,V,ae,N):Ae(A,L,V,J,G,ae,N):de(S,A,N)},Ae=(S,A,L,V,J,G,ae)=>{const te=S.component=Vf(S,V,J);if(fc(S)&&(te.ctx.renderer=ue),zf(te,!1,ae),te.asyncDep){if(J&&J.registerDep(te,ve,ae),!S.el){const N=te.subTree=ge(ls);$(null,N,A,L),S.placeholder=N.el}}else ve(te,S,A,L,J,G,ae)},de=(S,A,L)=>{const V=A.component=S.component;if(xf(S,A,L))if(V.asyncDep&&!V.asyncResolved){Z(V,A,L);return}else V.next=A,V.update();else A.el=S.el,V.vnode=A},ve=(S,A,L,V,J,G,ae)=>{const te=()=>{if(S.isMounted){let{next:H,bu:P,u:R,parent:Y,vnode:re}=S;{const ze=Ac(S);if(ze){H&&(H.el=re.el,Z(S,H,ae)),ze.asyncDep.then(()=>{S.isUnmounted||te()});return}}let le=H,Ne;$s(S,!1),H?(H.el=re.el,Z(S,H,ae)):H=re,P&&No(P),(Ne=H.props&&H.props.onVnodeBeforeUpdate)&&jt(Ne,Y,H,re),$s(S,!0);const _e=xl(S),we=S.subTree;S.subTree=_e,y(we,_e,d(we.el),W(we),S,J,G),H.el=_e.el,le===null&&Af(S,_e.el),R&&gt(R,J),(Ne=H.props&&H.props.onVnodeUpdated)&&gt(()=>jt(Ne,Y,H,re),J)}else{let H;const{el:P,props:R}=A,{bm:Y,m:re,parent:le,root:Ne,type:_e}=S,we=an(A);$s(S,!1),Y&&No(Y),!we&&(H=R&&R.onVnodeBeforeMount)&&jt(H,le,A),$s(S,!0);{Ne.ce&&Ne.ce._def.shadowRoot!==!1&&Ne.ce._injectChildStyle(_e);const ze=S.subTree=xl(S);y(null,ze,L,V,S,J,G),A.el=ze.el}if(re&&gt(re,J),!we&&(H=R&&R.onVnodeMounted)){const ze=A;gt(()=>jt(H,le,ze),J)}(A.shapeFlag&256||le&&an(le.vnode)&&le.vnode.shapeFlag&256)&&S.a&&gt(S.a,J),S.isMounted=!0,A=L=V=null}};S.scope.on();const N=S.effect=new Bi(te);S.scope.off();const I=S.update=N.run.bind(N),F=S.job=N.runIfDirty.bind(N);F.i=S,F.id=S.uid,N.scheduler=()=>Dr(F),$s(S,!0),I()},Z=(S,A,L)=>{A.component=S;const V=S.vnode.props;S.vnode=A,S.next=null,Nf(S,A.props,V,L),Pf(S,A.children,L),os(),hl(S),as()},ee=(S,A,L,V,J,G,ae,te,N=!1)=>{const I=S&&S.children,F=S?S.shapeFlag:0,H=A.children,{patchFlag:P,shapeFlag:R}=A;if(P>0){if(P&128){Q(I,H,L,V,J,G,ae,te,N);return}else if(P&256){ne(I,H,L,V,J,G,ae,te,N);return}}R&8?(F&16&&$e(I,J,G),H!==I&&f(L,H)):F&16?R&16?Q(I,H,L,V,J,G,ae,te,N):$e(I,J,G,!0):(F&8&&f(L,""),R&16&&z(H,L,V,J,G,ae,te,N))},ne=(S,A,L,V,J,G,ae,te,N)=>{S=S||sn,A=A||sn;const I=S.length,F=A.length,H=Math.min(I,F);let P;for(P=0;P<H;P++){const R=A[P]=N?vs(A[P]):Kt(A[P]);y(S[P],R,L,null,J,G,ae,te,N)}I>F?$e(S,J,G,!0,!1,H):z(A,L,V,J,G,ae,te,N,H)},Q=(S,A,L,V,J,G,ae,te,N)=>{let I=0;const F=A.length;let H=S.length-1,P=F-1;for(;I<=H&&I<=P;){const R=S[I],Y=A[I]=N?vs(A[I]):Kt(A[I]);if(kn(R,Y))y(R,Y,L,null,J,G,ae,te,N);else break;I++}for(;I<=H&&I<=P;){const R=S[H],Y=A[P]=N?vs(A[P]):Kt(A[P]);if(kn(R,Y))y(R,Y,L,null,J,G,ae,te,N);else break;H--,P--}if(I>H){if(I<=P){const R=P+1,Y=R<F?A[R].el:V;for(;I<=P;)y(null,A[I]=N?vs(A[I]):Kt(A[I]),L,Y,J,G,ae,te,N),I++}}else if(I>P)for(;I<=H;)C(S[I],J,G,!0),I++;else{const R=I,Y=I,re=new Map;for(I=Y;I<=P;I++){const Ye=A[I]=N?vs(A[I]):Kt(A[I]);Ye.key!=null&&re.set(Ye.key,I)}let le,Ne=0;const _e=P-Y+1;let we=!1,ze=0;const pt=new Array(_e);for(I=0;I<_e;I++)pt[I]=0;for(I=R;I<=H;I++){const Ye=S[I];if(Ne>=_e){C(Ye,J,G,!0);continue}let et;if(Ye.key!=null)et=re.get(Ye.key);else for(le=Y;le<=P;le++)if(pt[le-Y]===0&&kn(Ye,A[le])){et=le;break}et===void 0?C(Ye,J,G,!0):(pt[et-Y]=I+1,et>=ze?ze=et:we=!0,y(Ye,A[et],L,null,J,G,ae,te,N),Ne++)}const vt=we?Bf(pt):sn;for(le=vt.length-1,I=_e-1;I>=0;I--){const Ye=Y+I,et=A[Ye],Me=A[Ye+1],Xe=Ye+1<F?Me.el||Tc(Me):V;pt[I]===0?y(null,et,L,Xe,J,G,ae,te,N):we&&(le<0||I!==vt[le]?x(et,L,Xe,2):le--)}}},x=(S,A,L,V,J=null)=>{const{el:G,type:ae,transition:te,children:N,shapeFlag:I}=S;if(I&6){x(S.component.subTree,A,L,V);return}if(I&128){S.suspense.move(A,L,V);return}if(I&64){ae.move(S,A,L,ue);return}if(ae===X){n(G,A,L);for(let H=0;H<N.length;H++)x(N[H],A,L,V);n(S.anchor,A,L);return}if(ae===Io){w(S,A,L);return}if(V!==2&&I&1&&te)if(V===0)te.beforeEnter(G),n(G,A,L),gt(()=>te.enter(G),J);else{const{leave:H,delayLeave:P,afterLeave:R}=te,Y=()=>{S.ctx.isUnmounted?o(G):n(G,A,L)},re=()=>{G._isLeaving&&G[qd](!0),H(G,()=>{Y(),R&&R()})};P?P(G,Y,re):re()}else n(G,A,L)},C=(S,A,L,V=!1,J=!1)=>{const{type:G,props:ae,ref:te,children:N,dynamicChildren:I,shapeFlag:F,patchFlag:H,dirs:P,cacheIndex:R}=S;if(H===-2&&(J=!1),te!=null&&(os(),Fn(te,null,L,S,!0),as()),R!=null&&(A.renderCache[R]=void 0),F&256){A.ctx.deactivate(S);return}const Y=F&1&&P,re=!an(S);let le;if(re&&(le=ae&&ae.onVnodeBeforeUnmount)&&jt(le,A,S),F&6)xe(S.component,L,V);else{if(F&128){S.suspense.unmount(L,V);return}Y&&Cs(S,null,A,"beforeUnmount"),F&64?S.type.remove(S,A,L,ue,V):I&&!I.hasOnce&&(G!==X||H>0&&H&64)?$e(I,A,L,!1,!0):(G===X&&H&384||!J&&F&16)&&$e(N,A,L),V&&q(S)}(re&&(le=ae&&ae.onVnodeUnmounted)||Y)&&gt(()=>{le&&jt(le,A,S),Y&&Cs(S,null,A,"unmounted")},L)},q=S=>{const{type:A,el:L,anchor:V,transition:J}=S;if(A===X){be(L,V);return}if(A===Io){T(S);return}const G=()=>{o(L),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(S.shapeFlag&1&&J&&!J.persisted){const{leave:ae,delayLeave:te}=J,N=()=>ae(L,G);te?te(S.el,G,N):N()}else G()},be=(S,A)=>{let L;for(;S!==A;)L=v(S),o(S),S=L;o(A)},xe=(S,A,L)=>{const{bum:V,scope:J,job:G,subTree:ae,um:te,m:N,a:I}=S;Nl(N),Nl(I),V&&No(V),J.stop(),G&&(G.flags|=8,C(ae,S,A,L)),te&&gt(te,A),gt(()=>{S.isUnmounted=!0},A)},$e=(S,A,L,V=!1,J=!1,G=0)=>{for(let ae=G;ae<S.length;ae++)C(S[ae],A,L,V,J)},W=S=>{if(S.shapeFlag&6)return W(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const A=v(S.anchor||S.el),L=A&&A[lc];return L?v(L):A};let se=!1;const oe=(S,A,L)=>{let V;S==null?A._vnode&&(C(A._vnode,null,null,!0),V=A._vnode.component):y(A._vnode||null,S,A,null,null,null,L),A._vnode=S,se||(se=!0,hl(V),sc(),se=!1)},ue={p:y,um:C,m:x,r:q,mt:Ae,mc:z,pc:ee,pbc:fe,n:W,o:e};return{render:oe,hydrate:void 0,createApp:_f(oe)}}function xa({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function $s({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Lf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fr(e,t,s=!1){const n=e.children,o=t.children;if(he(n)&&he(o))for(let a=0;a<n.length;a++){const l=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=vs(o[a]),i.el=l.el),!s&&i.patchFlag!==-2&&Fr(l,i)),i.type===fa&&(i.patchFlag!==-1?i.el=l.el:i.__elIndex=a+(e.type===X?1:0)),i.type===ls&&!i.el&&(i.el=l.el)}}function Bf(e){const t=e.slice(),s=[0];let n,o,a,l,i;const u=e.length;for(n=0;n<u;n++){const c=e[n];if(c!==0){if(o=s[s.length-1],e[o]<c){t[n]=o,s.push(n);continue}for(a=0,l=s.length-1;a<l;)i=a+l>>1,e[s[i]]<c?a=i+1:l=i;c<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function Ac(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ac(t)}function Nl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Tc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Tc(t.subTree):null}const Nc=e=>e.__isSuspense;function Mf(e,t){t&&t.pendingBranch?he(e)?t.effects.push(...e):t.effects.push(e):Hd(e)}const X=Symbol.for("v-fgt"),fa=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),Io=Symbol.for("v-stc"),Hn=[];let At=null;function p(e=!1){Hn.push(At=e?null:[])}function Uf(){Hn.pop(),At=Hn[Hn.length-1]||null}let eo=1;function Ho(e,t=!1){eo+=e,e<0&&At&&t&&(At.hasOnce=!0)}function Ec(e){return e.dynamicChildren=eo>0?At||sn:null,Uf(),eo>0&&At&&At.push(e),e}function m(e,t,s,n,o,a){return Ec(r(e,t,s,n,o,a,!0))}function Fe(e,t,s,n,o){return Ec(ge(e,t,s,n,o,!0))}function to(e){return e?e.__v_isVNode===!0:!1}function kn(e,t){return e.type===t.type&&e.key===t.key}const Oc=({key:e})=>e??null,Po=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Je(e)||ft(e)||Ce(e)?{i:at,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===X?0:1,l=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Oc(t),ref:t&&Po(t),scopeId:oc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:at};return i?(jr(u,s),a&128&&e.normalize(u)):s&&(u.shapeFlag|=Je(s)?8:16),eo>0&&!l&&At&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&At.push(u),u}const ge=Ff;function Ff(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===uf)&&(e=ls),to(e)){const i=un(e,t,!0);return s&&jr(i,s),eo>0&&!a&&At&&(i.shapeFlag&6?At[At.indexOf(e)]=i:At.push(i)),i.patchFlag=-2,i}if(Qf(e)&&(e=e.__vccOpts),t){t=jf(t);let{class:i,style:u}=t;i&&!Je(i)&&(t.class=ce(i)),De(u)&&(Pr(u)&&!he(u)&&(u=rt({},u)),t.style=st(u))}const l=Je(e)?1:Nc(e)?128:zd(e)?64:De(e)?4:Ce(e)?2:0;return r(e,t,s,n,o,l,a,!0)}function jf(e){return e?Pr(e)||wc(e)?rt({},e):e:null}function un(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:l,children:i,transition:u}=e,c=t?Hf(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Oc(c),ref:t&&t.ref?s&&a?he(a)?a.concat(Po(t)):[a,Po(t)]:Po(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==X?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&un(e.ssContent),ssFallback:e.ssFallback&&un(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Rr(f,u.clone(f)),f}function Te(e=" ",t=0){return ge(fa,null,e,t)}function so(e,t){const s=ge(Io,null,e);return s.staticCount=t,s}function j(e="",t=!1){return t?(p(),Fe(ls,null,e)):ge(ls,null,e)}function Kt(e){return e==null||typeof e=="boolean"?ge(ls):he(e)?ge(X,null,e.slice()):to(e)?vs(e):ge(fa,null,String(e))}function vs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:un(e)}function jr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(he(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),jr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!wc(t)?t._ctx=at:o===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ce(t)?(t={default:t,_ctx:at},s=32):(t=String(t),n&64?(s=16,t=[Te(t)]):s=8);e.children=t,e.shapeFlag|=s}function Hf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ce([t.class,n.class]));else if(o==="style")t.style=st([t.style,n.style]);else if(na(o)){const a=t[o],l=n[o];l&&a!==l&&!(he(a)&&a.includes(l))&&(t[o]=a?[].concat(a,l):l)}else o!==""&&(t[o]=n[o])}return t}function jt(e,t,s,n=null){Jt(e,t,7,[s,n])}const Wf=gc();let Kf=0;function Vf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Wf,a={uid:Kf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cc(n,o),emitsOptions:yc(n,o),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:n.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Sf.bind(null,a),e.ce&&e.ce(a),a}let dt=null;const Gf=()=>dt||at;let Wo,Za;{const e=la(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};Wo=t("__VUE_INSTANCE_SETTERS__",s=>dt=s),Za=t("__VUE_SSR_SETTERS__",s=>no=s)}const po=e=>{const t=dt;return Wo(e),e.scope.on(),()=>{e.scope.off(),Wo(t)}},El=()=>{dt&&dt.scope.off(),Wo(null)};function Ic(e){return e.vnode.shapeFlag&4}let no=!1;function zf(e,t=!1,s=!1){t&&Za(t);const{props:n,children:o}=e.vnode,a=Ic(e);Tf(e,n,a,t),If(e,o,s||t);const l=a?Jf(e,t):void 0;return t&&Za(!1),l}function Jf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,pf);const{setup:n}=s;if(n){os();const o=e.setupContext=n.length>1?qf(e):null,a=po(e),l=fo(n,e,0,[e.props,o]),i=Ei(l);if(as(),a(),(i||e.sp)&&!an(e)&&dc(e),i){if(l.then(El,El),t)return l.then(u=>{Ol(e,u)}).catch(u=>{ca(u,e,0)});e.asyncDep=l}else Ol(e,l)}else Pc(e)}function Ol(e,t,s){Ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:De(t)&&(e.setupState=Zi(t)),Pc(e)}function Pc(e,t,s){const n=e.type;e.render||(e.render=n.render||zt);{const o=po(e);os();try{vf(e)}finally{as(),o()}}}const Yf={get(e,t){return ct(e,"get",""),e[t]}};function qf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Yf),slots:e.slots,emit:e.emit,expose:t}}function pa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zi(Id(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in jn)return jn[s](e)},has(t,s){return s in t||s in jn}})):e.proxy}function Xf(e,t=!0){return Ce(e)?e.displayName||e.name:e.name||t&&e.__name}function Qf(e){return Ce(e)&&"__vccOpts"in e}const E=(e,t)=>Bd(e,t,no);function Dc(e,t,s){try{Ho(-1);const n=arguments.length;return n===2?De(t)&&!he(t)?to(t)?ge(e,null,[t]):ge(e,t):ge(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&to(s)&&(s=[s]),ge(e,t,s))}finally{Ho(1)}}const Zf="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let er;const Il=typeof window<"u"&&window.trustedTypes;if(Il)try{er=Il.createPolicy("vue",{createHTML:e=>e})}catch{}const Rc=er?e=>er.createHTML(e):e=>e,ep="http://www.w3.org/2000/svg",tp="http://www.w3.org/1998/Math/MathML",Qt=typeof document<"u"?document:null,Pl=Qt&&Qt.createElement("template"),sp={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Qt.createElementNS(ep,e):t==="mathml"?Qt.createElementNS(tp,e):s?Qt.createElement(e,{is:s}):Qt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Qt.createTextNode(e),createComment:e=>Qt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const l=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{Pl.innerHTML=Rc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Pl.content;if(n==="svg"||n==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},np=Symbol("_vtc");function op(e,t,s){const n=e[np];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Ko=Symbol("_vod"),Lc=Symbol("_vsh"),ap={name:"show",beforeMount(e,{value:t},{transition:s}){e[Ko]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):xn(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),xn(e,!0),n.enter(e)):n.leave(e,()=>{xn(e,!1)}):xn(e,t))},beforeUnmount(e,{value:t}){xn(e,t)}};function xn(e,t){e.style.display=t?e[Ko]:"none",e[Lc]=!t}const rp=Symbol(""),lp=/(?:^|;)\s*display\s*:/;function ip(e,t,s){const n=e.style,o=Je(s);let a=!1;if(s&&!o){if(t)if(Je(t))for(const l of t.split(";")){const i=l.slice(0,l.indexOf(":")).trim();s[i]==null&&Do(n,i,"")}else for(const l in t)s[l]==null&&Do(n,l,"");for(const l in s)l==="display"&&(a=!0),Do(n,l,s[l])}else if(o){if(t!==s){const l=n[rp];l&&(s+=";"+l),n.cssText=s,a=lp.test(s)}}else t&&e.removeAttribute("style");Ko in e&&(e[Ko]=a?n.display:"",e[Lc]&&(n.display="none"))}const Dl=/\s*!important$/;function Do(e,t,s){if(he(s))s.forEach(n=>Do(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=cp(e,t);Dl.test(s)?e.setProperty(Ss(n),s.replace(Dl,""),"important"):e[n]=s}}const Rl=["Webkit","Moz","ms"],Aa={};function cp(e,t){const s=Aa[t];if(s)return s;let n=It(t);if(n!=="filter"&&n in e)return Aa[t]=n;n=aa(n);for(let o=0;o<Rl.length;o++){const a=Rl[o]+n;if(a in e)return Aa[t]=a}return t}const Ll="http://www.w3.org/1999/xlink";function Bl(e,t,s,n,o,a=ud(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Ll,t.slice(6,t.length)):e.setAttributeNS(Ll,t,s):s==null||a&&!Di(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Mt(s)?String(s):s)}function Ml(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Rc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(i!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Di(s):s==null&&i==="string"?(s="",l=!0):i==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function ts(e,t,s,n){e.addEventListener(t,s,n)}function up(e,t,s,n){e.removeEventListener(t,s,n)}const Ul=Symbol("_vei");function dp(e,t,s,n,o=null){const a=e[Ul]||(e[Ul]={}),l=a[t];if(n&&l)l.value=n;else{const[i,u]=fp(t);if(n){const c=a[t]=mp(n,o);ts(e,i,c,u)}else l&&(up(e,i,l,u),a[t]=void 0)}}const Fl=/(?:Once|Passive|Capture)$/;function fp(e){let t;if(Fl.test(e)){t={};let n;for(;n=e.match(Fl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ss(e.slice(2)),t]}let Ta=0;const pp=Promise.resolve(),vp=()=>Ta||(pp.then(()=>Ta=0),Ta=Date.now());function mp(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Jt(hp(n,s.value),t,5,[n])};return s.value=e,s.attached=vp(),s}function hp(e,t){if(he(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const jl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gp=(e,t,s,n,o,a)=>{const l=o==="svg";t==="class"?op(e,n,l):t==="style"?ip(e,s,n):na(t)?Cr(t)||dp(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yp(e,t,n,l))?(Ml(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Bl(e,t,n,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Je(n))?Ml(e,It(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Bl(e,t,n,l))};function yp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&jl(t)&&Ce(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return jl(t)&&Je(s)?!1:t in e}const _s=e=>{const t=e.props["onUpdate:modelValue"]||!1;return he(t)?s=>No(t,s):t};function bp(e){e.target.composing=!0}function Hl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function Wl(e,t,s){return t&&(e=e.trim()),s&&(e=ra(e)),e}const Ct={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ot]=_s(o);const a=n||o.props&&o.props.type==="number";ts(e,t?"change":"input",l=>{l.target.composing||e[Ot](Wl(e.value,s,a))}),(s||a)&&ts(e,"change",()=>{e.value=Wl(e.value,s,a)}),t||(ts(e,"compositionstart",bp),ts(e,"compositionend",Hl),ts(e,"change",Hl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},l){if(e[Ot]=_s(l),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?ra(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===u)||(e.value=u))}},Hr={deep:!0,created(e,t,s){e[Ot]=_s(s),ts(e,"change",()=>{const n=e._modelValue,o=dn(e),a=e.checked,l=e[Ot];if(he(n)){const i=xr(n,o),u=i!==-1;if(a&&!u)l(n.concat(o));else if(!a&&u){const c=[...n];c.splice(i,1),l(c)}}else if(bn(n)){const i=new Set(n);a?i.add(o):i.delete(o),l(i)}else l(Bc(e,a))})},mounted:Kl,beforeUpdate(e,t,s){e[Ot]=_s(s),Kl(e,t,s)}};function Kl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(he(t))o=xr(t,n.props.value)>-1;else if(bn(t))o=t.has(n.props.value);else{if(t===s)return;o=Ms(t,Bc(e,!0))}e.checked!==o&&(e.checked=o)}const Vl={created(e,{value:t},s){e.checked=Ms(t,s.props.value),e[Ot]=_s(s),ts(e,"change",()=>{e[Ot](dn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ot]=_s(n),t!==s&&(e.checked=Ms(t,n.props.value))}},Wn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=bn(t);ts(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?ra(dn(l)):dn(l));e[Ot](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Qn(()=>{e._assigning=!1})}),e[Ot]=_s(n)},mounted(e,{value:t}){Gl(e,t)},beforeUpdate(e,t,s){e[Ot]=_s(s)},updated(e,{value:t}){e._assigning||Gl(e,t)}};function Gl(e,t){const s=e.multiple,n=he(t);if(!(s&&!n&&!bn(t))){for(let o=0,a=e.options.length;o<a;o++){const l=e.options[o],i=dn(l);if(s)if(n){const u=typeof i;u==="string"||u==="number"?l.selected=t.some(c=>String(c)===String(i)):l.selected=xr(t,i)>-1}else l.selected=t.has(i);else if(Ms(dn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function dn(e){return"_value"in e?e._value:e.value}function Bc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const _p=["ctrl","shift","alt","meta"],wp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>_p.some(s=>e[`${s}Key`]&&!t.includes(s))},nt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let l=0;l<t.length;l++){const i=wp[t[l]];if(i&&i(o,t))return}return e(o,...a)})},Sp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vo=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=Ss(o.key);if(t.some(l=>l===a||Sp[l]===a))return e(o)})},Cp=rt({patchProp:gp},sp);let zl;function $p(){return zl||(zl=Df(Cp))}const kp=(...e)=>{const t=$p().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Ap(n);if(!o)return;const a=t._component;!Ce(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,xp(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function xp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ap(e){return Je(e)?document.querySelector(e):e}const Se=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Tp={};function Np(e,t){const s=cf("router-view");return p(),Fe(s)}const Ep=Se(Tp,[["render",Np]]),Op="modulepreload",Ip=function(e){return"/"+e},Jl={},Pp=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),i=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(s.map(u=>{if(u=Ip(u),u in Jl)return;Jl[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Op,c||(d.as="script"),d.crossOrigin="",d.href=u,i&&d.setAttribute("nonce",i),document.head.appendChild(d),c)return new Promise((v,h)=>{d.addEventListener("load",v),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return o.then(l=>{for(const i of l||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const zs=typeof document<"u";function Mc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Dp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Mc(e.default)}const Ee=Object.assign;function Na(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ft(o)?o.map(e):e(o)}return s}const Kn=()=>{},Ft=Array.isArray;function Yl(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Uc=/#/g,Rp=/&/g,Lp=/\//g,Bp=/=/g,Mp=/\?/g,Fc=/\+/g,Up=/%5B/g,Fp=/%5D/g,jc=/%5E/g,jp=/%60/g,Hc=/%7B/g,Hp=/%7C/g,Wc=/%7D/g,Wp=/%20/g;function Wr(e){return e==null?"":encodeURI(""+e).replace(Hp,"|").replace(Up,"[").replace(Fp,"]")}function Kp(e){return Wr(e).replace(Hc,"{").replace(Wc,"}").replace(jc,"^")}function tr(e){return Wr(e).replace(Fc,"%2B").replace(Wp,"+").replace(Uc,"%23").replace(Rp,"%26").replace(jp,"`").replace(Hc,"{").replace(Wc,"}").replace(jc,"^")}function Vp(e){return tr(e).replace(Bp,"%3D")}function Gp(e){return Wr(e).replace(Uc,"%23").replace(Mp,"%3F")}function zp(e){return Gp(e).replace(Lp,"%2F")}function oo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Jp=/\/$/,Yp=e=>e.replace(Jp,"");function Ea(e,t,s="/"){let n,o={},a="",l="";const i=t.indexOf("#");let u=t.indexOf("?");return u=i>=0&&u>i?-1:u,u>=0&&(n=t.slice(0,u),a=t.slice(u,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),l=t.slice(i,t.length)),n=Zp(n??t,s),{fullPath:n+a+l,path:n,query:o,hash:oo(l)}}function qp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ql(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Xp(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&fn(t.matched[n],s.matched[o])&&Kc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function fn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Kc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Qp(e[s],t[s]))return!1;return!0}function Qp(e,t){return Ft(e)?Xl(e,t):Ft(t)?Xl(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Xl(e,t){return Ft(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Zp(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,l,i;for(l=0;l<n.length;l++)if(i=n[l],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(l).join("/")}const ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let sr=function(e){return e.pop="pop",e.push="push",e}({}),Oa=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function ev(e){if(!e)if(zs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Yp(e)}const tv=/^[^#]+#/;function sv(e,t){return e.replace(tv,"#")+t}function nv(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const va=()=>({left:window.scrollX,top:window.scrollY});function ov(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=nv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ql(e,t){return(history.state?history.state.position-t:-1)+e}const nr=new Map;function av(e,t){nr.set(e,t)}function rv(e){const t=nr.get(e);return nr.delete(e),t}function lv(e){return typeof e=="string"||e&&typeof e=="object"}function Vc(e){return typeof e=="string"||typeof e=="symbol"}let Ke=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Gc=Symbol("");Ke.MATCHER_NOT_FOUND+"",Ke.NAVIGATION_GUARD_REDIRECT+"",Ke.NAVIGATION_ABORTED+"",Ke.NAVIGATION_CANCELLED+"",Ke.NAVIGATION_DUPLICATED+"";function pn(e,t){return Ee(new Error,{type:e,[Gc]:!0},t)}function qt(e,t){return e instanceof Error&&Gc in e&&(t==null||!!(e.type&t))}const iv=["params","query","hash"];function cv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of iv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function uv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(Fc," "),a=o.indexOf("="),l=oo(a<0?o:o.slice(0,a)),i=a<0?null:oo(o.slice(a+1));if(l in t){let u=t[l];Ft(u)||(u=t[l]=[u]),u.push(i)}else t[l]=i}return t}function Zl(e){let t="";for(let s in e){const n=e[s];if(s=Vp(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ft(n)?n.map(o=>o&&tr(o)):[n&&tr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function dv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ft(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const fv=Symbol(""),ei=Symbol(""),ma=Symbol(""),Kr=Symbol(""),or=Symbol("");function An(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function ms(e,t,s,n,o,a=l=>l()){const l=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,u)=>{const c=v=>{v===!1?u(pn(Ke.NAVIGATION_ABORTED,{from:s,to:t})):v instanceof Error?u(v):lv(v)?u(pn(Ke.NAVIGATION_GUARD_REDIRECT,{from:t,to:v})):(l&&n.enterCallbacks[o]===l&&typeof v=="function"&&l.push(v),i())},f=a(()=>e.call(n&&n.instances[o],t,s,c));let d=Promise.resolve(f);e.length<3&&(d=d.then(c)),d.catch(v=>u(v))})}function Ia(e,t,s,n,o=a=>a()){const a=[];for(const l of e)for(const i in l.components){let u=l.components[i];if(!(t!=="beforeRouteEnter"&&!l.instances[i]))if(Mc(u)){const c=(u.__vccOpts||u)[t];c&&a.push(ms(c,s,n,l,i,o))}else{let c=u();a.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${l.path}"`);const d=Dp(f)?f.default:f;l.mods[i]=f,l.components[i]=d;const v=(d.__vccOpts||d)[t];return v&&ms(v,s,n,l,i,o)()}))}}return a}function pv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let l=0;l<a;l++){const i=t.matched[l];i&&(e.matched.find(c=>fn(c,i))?n.push(i):s.push(i));const u=e.matched[l];u&&(t.matched.find(c=>fn(c,u))||o.push(u))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let vv=()=>location.protocol+"//"+location.host;function zc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let l=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(l);return i[0]!=="/"&&(i="/"+i),ql(i,"")}return ql(s,e)+n+o}function mv(e,t,s,n){let o=[],a=[],l=null;const i=({state:v})=>{const h=zc(e,location),g=s.value,y=t.value;let k=0;if(v){if(s.value=h,t.value=v,l&&l===g){l=null;return}k=y?v.position-y.position:0}else n(h);o.forEach($=>{$(s.value,g,{delta:k,type:sr.pop,direction:k?k>0?Oa.forward:Oa.back:Oa.unknown})})};function u(){l=s.value}function c(v){o.push(v);const h=()=>{const g=o.indexOf(v);g>-1&&o.splice(g,1)};return a.push(h),h}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(Ee({},v.state,{scroll:va()}),"")}}function d(){for(const v of a)v();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:u,listen:c,destroy:d}}function ti(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?va():null}}function hv(e){const{history:t,location:s}=window,n={value:zc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(u,c,f){const d=e.indexOf("#"),v=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+u:vv()+e+u;try{t[f?"replaceState":"pushState"](c,"",v),o.value=c}catch(h){console.error(h),s[f?"replace":"assign"](v)}}function l(u,c){a(u,Ee({},t.state,ti(o.value.back,u,o.value.forward,!0),c,{position:o.value.position}),!0),n.value=u}function i(u,c){const f=Ee({},o.value,t.state,{forward:u,scroll:va()});a(f.current,f,!0),a(u,Ee({},ti(n.value,u,null),{position:f.position+1},c),!1),n.value=u}return{location:n,state:o,push:i,replace:l}}function gv(e){e=ev(e);const t=hv(e),s=mv(e,t.state,t.location,t.replace);function n(a,l=!0){l||s.pauseListeners(),history.go(a)}const o=Ee({location:"",base:e,go:n,createHref:sv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function yv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),gv(e)}let Ds=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ze=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ze||{});const bv={type:Ds.Static,value:""},_v=/[a-zA-Z0-9_]/;function wv(e){if(!e)return[[]];if(e==="/")return[[bv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${c}": ${h}`)}let s=Ze.Static,n=s;const o=[];let a;function l(){a&&o.push(a),a=[]}let i=0,u,c="",f="";function d(){c&&(s===Ze.Static?a.push({type:Ds.Static,value:c}):s===Ze.Param||s===Ze.ParamRegExp||s===Ze.ParamRegExpEnd?(a.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Ds.Param,value:c,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function v(){c+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&s!==Ze.ParamRegExp){n=s,s=Ze.EscapeNext;continue}switch(s){case Ze.Static:u==="/"?(c&&d(),l()):u===":"?(d(),s=Ze.Param):v();break;case Ze.EscapeNext:v(),s=n;break;case Ze.Param:u==="("?s=Ze.ParamRegExp:_v.test(u)?v():(d(),s=Ze.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case Ze.ParamRegExp:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:s=Ze.ParamRegExpEnd:f+=u;break;case Ze.ParamRegExpEnd:d(),s=Ze.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===Ze.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),l(),o}const si="[^/]+?",Sv={sensitive:!1,strict:!1,start:!0,end:!0};var yt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(yt||{});const Cv=/[.+*?^${}()[\]/\\]/g;function $v(e,t){const s=Ee({},Sv,t),n=[];let o=s.start?"^":"";const a=[];for(const c of e){const f=c.length?[]:[yt.Root];s.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const v=c[d];let h=yt.Segment+(s.sensitive?yt.BonusCaseSensitive:0);if(v.type===Ds.Static)d||(o+="/"),o+=v.value.replace(Cv,"\\$&"),h+=yt.Static;else if(v.type===Ds.Param){const{value:g,repeatable:y,optional:k,regexp:$}=v;a.push({name:g,repeatable:y,optional:k});const _=$||si;if(_!==si){h+=yt.BonusCustomRegExp;try{`${_}`}catch(T){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+T.message)}}let w=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=k&&c.length<2?`(?:/${w})`:"/"+w),k&&(w+="?"),o+=w,h+=yt.Dynamic,k&&(h+=yt.BonusOptional),y&&(h+=yt.BonusRepeatable),_===".*"&&(h+=yt.BonusWildcard)}f.push(h)}n.push(f)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=yt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,s.sensitive?"":"i");function i(c){const f=c.match(l),d={};if(!f)return null;for(let v=1;v<f.length;v++){const h=f[v]||"",g=a[v-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function u(c){let f="",d=!1;for(const v of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const h of v)if(h.type===Ds.Static)f+=h.value;else if(h.type===Ds.Param){const{value:g,repeatable:y,optional:k}=h,$=g in c?c[g]:"";if(Ft($)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Ft($)?$.join("/"):$;if(!_)if(k)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=_}}return f||"/"}return{re:l,score:n,keys:a,parse:i,stringify:u}}function kv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===yt.Static+yt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===yt.Static+yt.Segment?1:-1:0}function Jc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=kv(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(ni(n))return 1;if(ni(o))return-1}return o.length-n.length}function ni(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xv={strict:!1,end:!0,sensitive:!1};function Av(e,t,s){const n=$v(wv(e.path),s),o=Ee(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Tv(e,t){const s=[],n=new Map;t=Yl(xv,t);function o(d){return n.get(d)}function a(d,v,h){const g=!h,y=ai(d);y.aliasOf=h&&h.record;const k=Yl(t,d),$=[y];if("alias"in d){const T=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of T)$.push(ai(Ee({},y,{components:h?h.record.components:y.components,path:D,aliasOf:h?h.record:y})))}let _,w;for(const T of $){const{path:D}=T;if(v&&D[0]!=="/"){const B=v.record.path,M=B[B.length-1]==="/"?"":"/";T.path=v.record.path+(D&&M+D)}if(_=Av(T,v,k),h?h.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),g&&d.name&&!ri(_)&&l(d.name)),Yc(_)&&u(_),y.children){const B=y.children;for(let M=0;M<B.length;M++)a(B[M],_,h&&h.children[M])}h=h||_}return w?()=>{l(w)}:Kn}function l(d){if(Vc(d)){const v=n.get(d);v&&(n.delete(d),s.splice(s.indexOf(v),1),v.children.forEach(l),v.alias.forEach(l))}else{const v=s.indexOf(d);v>-1&&(s.splice(v,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function i(){return s}function u(d){const v=Ov(d,s);s.splice(v,0,d),d.record.name&&!ri(d)&&n.set(d.record.name,d)}function c(d,v){let h,g={},y,k;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw pn(Ke.MATCHER_NOT_FOUND,{location:d});k=h.record.name,g=Ee(oi(v.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&oi(d.params,h.keys.map(w=>w.name))),y=h.stringify(g)}else if(d.path!=null)y=d.path,h=s.find(w=>w.re.test(y)),h&&(g=h.parse(y),k=h.record.name);else{if(h=v.name?n.get(v.name):s.find(w=>w.re.test(v.path)),!h)throw pn(Ke.MATCHER_NOT_FOUND,{location:d,currentLocation:v});k=h.record.name,g=Ee({},v.params,d.params),y=h.stringify(g)}const $=[];let _=h;for(;_;)$.unshift(_.record),_=_.parent;return{name:k,path:y,params:g,matched:$,meta:Ev($)}}e.forEach(d=>a(d));function f(){s.length=0,n.clear()}return{addRoute:a,resolve:c,removeRoute:l,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function oi(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function ai(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Nv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Nv(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function ri(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ev(e){return e.reduce((t,s)=>Ee(t,s.meta),{})}function Ov(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Jc(e,t[a])<0?n=a:s=a+1}const o=Iv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Iv(e){let t=e;for(;t=t.parent;)if(Yc(t)&&Jc(e,t)===0)return t}function Yc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function li(e){const t=Bt(ma),s=Bt(Kr),n=E(()=>{const u=U(e.to);return t.resolve(u)}),o=E(()=>{const{matched:u}=n.value,{length:c}=u,f=u[c-1],d=s.matched;if(!f||!d.length)return-1;const v=d.findIndex(fn.bind(null,f));if(v>-1)return v;const h=ii(u[c-2]);return c>1&&ii(f)===h&&d[d.length-1].path!==h?d.findIndex(fn.bind(null,u[c-2])):v}),a=E(()=>o.value>-1&&Bv(s.params,n.value.params)),l=E(()=>o.value>-1&&o.value===s.matched.length-1&&Kc(s.params,n.value.params));function i(u={}){if(Lv(u)){const c=t[U(e.replace)?"replace":"push"](U(e.to)).catch(Kn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:E(()=>n.value.href),isActive:a,isExactActive:l,navigate:i}}function Pv(e){return e.length===1?e[0]:e}const Dv=uc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:li,setup(e,{slots:t}){const s=Lt(li(e)),{options:n}=Bt(ma),o=E(()=>({[ci(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[ci(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&Pv(t.default(s));return e.custom?a:Dc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),Rv=Dv;function Lv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Bv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ft(o)||o.length!==n.length||n.some((a,l)=>a.valueOf()!==o[l].valueOf()))return!1}return!0}function ii(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ci=(e,t,s)=>e??t??s,Mv=uc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Bt(or),o=E(()=>e.route||n.value),a=Bt(ei,0),l=E(()=>{let c=U(a);const{matched:f}=o.value;let d;for(;(d=f[c])&&!d.components;)c++;return c}),i=E(()=>o.value.matched[l.value]);Eo(ei,E(()=>l.value+1)),Eo(fv,i),Eo(or,o);const u=O();return ut(()=>[u.value,i.value,e.name],([c,f,d],[v,h,g])=>{f&&(f.instances[d]=c,h&&h!==f&&c&&c===v&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),c&&f&&(!h||!fn(f,h)||!v)&&(f.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=o.value,f=e.name,d=i.value,v=d&&d.components[f];if(!v)return ui(s.default,{Component:v,route:c});const h=d.props[f],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,k=Dc(v,Ee({},g,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(d.instances[f]=null)},ref:u}));return ui(s.default,{Component:k,route:c})||k}}});function ui(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Uv=Mv;function Fv(e){const t=Tv(e.routes,e),s=e.parseQuery||uv,n=e.stringifyQuery||Zl,o=e.history,a=An(),l=An(),i=An(),u=Pd(ds);let c=ds;zs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Na.bind(null,W=>""+W),d=Na.bind(null,zp),v=Na.bind(null,oo);function h(W,se){let oe,ue;return Vc(W)?(oe=t.getRecordMatcher(W),ue=se):ue=W,t.addRoute(ue,oe)}function g(W){const se=t.getRecordMatcher(W);se&&t.removeRoute(se)}function y(){return t.getRoutes().map(W=>W.record)}function k(W){return!!t.getRecordMatcher(W)}function $(W,se){if(se=Ee({},se||u.value),typeof W=="string"){const L=Ea(s,W,se.path),V=t.resolve({path:L.path},se),J=o.createHref(L.fullPath);return Ee(L,V,{params:v(V.params),hash:oo(L.hash),redirectedFrom:void 0,href:J})}let oe;if(W.path!=null)oe=Ee({},W,{path:Ea(s,W.path,se.path).path});else{const L=Ee({},W.params);for(const V in L)L[V]==null&&delete L[V];oe=Ee({},W,{params:d(L)}),se.params=d(se.params)}const ue=t.resolve(oe,se),ke=W.hash||"";ue.params=f(v(ue.params));const S=qp(n,Ee({},W,{hash:Kp(ke),path:ue.path})),A=o.createHref(S);return Ee({fullPath:S,hash:ke,query:n===Zl?dv(W.query):W.query||{}},ue,{redirectedFrom:void 0,href:A})}function _(W){return typeof W=="string"?Ea(s,W,u.value.path):Ee({},W)}function w(W,se){if(c!==W)return pn(Ke.NAVIGATION_CANCELLED,{from:se,to:W})}function T(W){return M(W)}function D(W){return T(Ee(_(W),{replace:!0}))}function B(W,se){const oe=W.matched[W.matched.length-1];if(oe&&oe.redirect){const{redirect:ue}=oe;let ke=typeof ue=="function"?ue(W,se):ue;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=_(ke):{path:ke},ke.params={}),Ee({query:W.query,hash:W.hash,params:ke.path!=null?{}:W.params},ke)}}function M(W,se){const oe=c=$(W),ue=u.value,ke=W.state,S=W.force,A=W.replace===!0,L=B(oe,ue);if(L)return M(Ee(_(L),{state:typeof L=="object"?Ee({},ke,L.state):ke,force:S,replace:A}),se||oe);const V=oe;V.redirectedFrom=se;let J;return!S&&Xp(n,ue,oe)&&(J=pn(Ke.NAVIGATION_DUPLICATED,{to:V,from:ue}),x(ue,ue,!0,!1)),(J?Promise.resolve(J):fe(V,ue)).catch(G=>qt(G)?qt(G,Ke.NAVIGATION_GUARD_REDIRECT)?G:Q(G):ee(G,V,ue)).then(G=>{if(G){if(qt(G,Ke.NAVIGATION_GUARD_REDIRECT))return M(Ee({replace:A},_(G.to),{state:typeof G.to=="object"?Ee({},ke,G.to.state):ke,force:S}),se||V)}else G=pe(V,ue,!0,A,ke);return me(V,ue,G),G})}function z(W,se){const oe=w(W,se);return oe?Promise.reject(oe):Promise.resolve()}function K(W){const se=be.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(W):W()}function fe(W,se){let oe;const[ue,ke,S]=pv(W,se);oe=Ia(ue.reverse(),"beforeRouteLeave",W,se);for(const L of ue)L.leaveGuards.forEach(V=>{oe.push(ms(V,W,se))});const A=z.bind(null,W,se);return oe.push(A),$e(oe).then(()=>{oe=[];for(const L of a.list())oe.push(ms(L,W,se));return oe.push(A),$e(oe)}).then(()=>{oe=Ia(ke,"beforeRouteUpdate",W,se);for(const L of ke)L.updateGuards.forEach(V=>{oe.push(ms(V,W,se))});return oe.push(A),$e(oe)}).then(()=>{oe=[];for(const L of S)if(L.beforeEnter)if(Ft(L.beforeEnter))for(const V of L.beforeEnter)oe.push(ms(V,W,se));else oe.push(ms(L.beforeEnter,W,se));return oe.push(A),$e(oe)}).then(()=>(W.matched.forEach(L=>L.enterCallbacks={}),oe=Ia(S,"beforeRouteEnter",W,se,K),oe.push(A),$e(oe))).then(()=>{oe=[];for(const L of l.list())oe.push(ms(L,W,se));return oe.push(A),$e(oe)}).catch(L=>qt(L,Ke.NAVIGATION_CANCELLED)?L:Promise.reject(L))}function me(W,se,oe){i.list().forEach(ue=>K(()=>ue(W,se,oe)))}function pe(W,se,oe,ue,ke){const S=w(W,se);if(S)return S;const A=se===ds,L=zs?history.state:{};oe&&(ue||A?o.replace(W.fullPath,Ee({scroll:A&&L&&L.scroll},ke)):o.push(W.fullPath,ke)),u.value=W,x(W,se,oe,A),Q()}let ye;function Ae(){ye||(ye=o.listen((W,se,oe)=>{if(!xe.listening)return;const ue=$(W),ke=B(ue,xe.currentRoute.value);if(ke){M(Ee(ke,{replace:!0,force:!0}),ue).catch(Kn);return}c=ue;const S=u.value;zs&&av(Ql(S.fullPath,oe.delta),va()),fe(ue,S).catch(A=>qt(A,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_CANCELLED)?A:qt(A,Ke.NAVIGATION_GUARD_REDIRECT)?(M(Ee(_(A.to),{force:!0}),ue).then(L=>{qt(L,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&!oe.delta&&oe.type===sr.pop&&o.go(-1,!1)}).catch(Kn),Promise.reject()):(oe.delta&&o.go(-oe.delta,!1),ee(A,ue,S))).then(A=>{A=A||pe(ue,S,!1),A&&(oe.delta&&!qt(A,Ke.NAVIGATION_CANCELLED)?o.go(-oe.delta,!1):oe.type===sr.pop&&qt(A,Ke.NAVIGATION_ABORTED|Ke.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),me(ue,S,A)}).catch(Kn)}))}let de=An(),ve=An(),Z;function ee(W,se,oe){Q(W);const ue=ve.list();return ue.length?ue.forEach(ke=>ke(W,se,oe)):console.error(W),Promise.reject(W)}function ne(){return Z&&u.value!==ds?Promise.resolve():new Promise((W,se)=>{de.add([W,se])})}function Q(W){return Z||(Z=!W,Ae(),de.list().forEach(([se,oe])=>W?oe(W):se()),de.reset()),W}function x(W,se,oe,ue){const{scrollBehavior:ke}=e;if(!zs||!ke)return Promise.resolve();const S=!oe&&rv(Ql(W.fullPath,0))||(ue||!oe)&&history.state&&history.state.scroll||null;return Qn().then(()=>ke(W,se,S)).then(A=>A&&ov(A)).catch(A=>ee(A,W,se))}const C=W=>o.go(W);let q;const be=new Set,xe={currentRoute:u,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:k,getRoutes:y,resolve:$,options:e,push:T,replace:D,go:C,back:()=>C(-1),forward:()=>C(1),beforeEach:a.add,beforeResolve:l.add,afterEach:i.add,onError:ve.add,isReady:ne,install(W){W.component("RouterLink",Rv),W.component("RouterView",Uv),W.config.globalProperties.$router=xe,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>U(u)}),zs&&!q&&u.value===ds&&(q=!0,T(o.location).catch(ue=>{}));const se={};for(const ue in ds)Object.defineProperty(se,ue,{get:()=>u.value[ue],enumerable:!0});W.provide(ma,xe),W.provide(Kr,Xi(se)),W.provide(or,u);const oe=W.unmount;be.add(W),W.unmount=function(){be.delete(W),be.size<1&&(c=ds,ye&&ye(),ye=null,u.value=ds,q=!1,Z=!1),oe()}}};function $e(W){return W.reduce((se,oe)=>se.then(()=>K(oe)),Promise.resolve())}return xe}function jv(){return Bt(ma)}function PT(e){return Bt(Kr)}function $o(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,l="";for(let i=0;i<s.length;i++){const u=s[i];if(u.startsWith("%"))continue;if(a){u.includes("}")?(l+=u.substring(0,u.indexOf("}")),o.push(l.trim()),l="",a=!1):l+=u+`
`;continue}if(u.includes("{")){const d=u.indexOf("{");if(u.includes("}")){const v=u.indexOf("}");o.push(u.substring(d+1,v).trim())}else l=u.substring(d+1)+`
`,a=!0;continue}const c=u.match(/\[Play\s+"([NESW])"\](\w+)/);if(c&&n){n.openingLeader=c[1],n.openingLead=c[2];continue}const f=u.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,v]=f;if(d==="Board")n&&(n.commentary=pi(o),n.steps=di(o),n.auction=fi(n.auction),t.push(n)),n=Hv(),n.boardNumber=parseInt(v,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=v;break;case"Vulnerable":n.vulnerable=v;break;case"Contract":n.contract=v;break;case"Declarer":n.declarer=v;break;case"Student":n.studentSeat=v;break;case"Deal":n.hands=Wv(v);break;case"Auction":n.auctionDealer=v;break;case"Result":n.result=v;break;case"Event":n.event=v;break;case"SkillPath":n.skillPath=v;break;case"Category":n.category=v;break;case"Difficulty":n.difficulty=v;break}continue}if(n&&n.auctionDealer){const d=u.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const v=Vv(d);n.auction.push(...v)}}}return n&&(n.commentary=pi(o),n.steps=di(o),n.auction=fi(n.auction),t.push(n)),t}function di(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let l=0;l<n.length;l++){const i=n[l],u=i.match(/^\[BID\s+([^\]]+)\]$/i),c=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(u){const v=Vr(u[1]).replace(/!/g,"").trim(),h=a.trim();a="";let g="";if(l+1<n.length){const $=n[l+1];$.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=$.trim(),l++)}const y=Tn(h,"bid"),k=Tn(g,"bid");o.push({...y,type:"bid",bid:v,explanationText:k.text,showSeatsAfter:k.showSeats})}else if(c||f){const v=c?"next":"rotate";a.trim()&&o.push(Tn(a.trim(),v)),a=""}else if(d){const v=d[1].trim();let h;if(v.toLowerCase().startsWith("any:")?h={cards:v.substring(4).split(",").map(y=>Go(y.trim())),anyOf:!0}:h={card:Go(v)},a.trim()){const g=Tn(a.trim(),"choose-card");g.chooseCard=h,o.push(g)}a=""}else a+=i}if(a.trim()){const l=Tn(a.trim(),"end");o.push(l)}return o}function Tn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const w=[];_.includes("N")&&w.push("N"),_.includes("E")&&w.push("E"),_.includes("S")&&w.push("S"),_.includes("W")&&w.push("W"),w.length>0&&(s=w)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let l;for(;(l=a.exec(e))!==null;)o.push(l[1]);const i=/\[RESET\]/i.test(e);let u=null;const c=e.match(/\[choose-card\s+([^\]]+)\]/i);if(c){const _=c[1].trim();_.toLowerCase().startsWith("any:")?u={cards:_.substring(4).split(",").map(T=>Go(T.trim())),anyOf:!0}:u={card:Go(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),v=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),v&&(f=!0);const h=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const k=e.match(/\[showcards\s+([^\]]+)\]/i);if(k){const _=k[1].trim();y={};const w=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let T;for(;(T=w.exec(_))!==null;){const D=T[1].toUpperCase(),B=T[2].split(",").map(M=>M.trim().toUpperCase());y[D]=B}Object.keys(y).length===0&&(y=null)}let $=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:Vr($),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:h,clearCommentary:g,showcards:y,chooseCard:u}}function Hv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function Go(e){return e.toUpperCase().replace("10","T")}function Wv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],l=a.indexOf(":");if(l!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(l+1)}for(let i=0;i<4;i++){const u=(o+i)%4,c=n[u];t[c]=Kv(s[i])}return t}function Kv(e){const t=e.split(".");return t.length!==4?null:{spades:ko(t[0]),hearts:ko(t[1]),diamonds:ko(t[2]),clubs:ko(t[3])}}function ko(e){return e?e.split(""):[]}function fi(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Vv(e){const t=e.split(/\s+/).filter(n=>n.length>0).filter(n=>!/^=\d+=?$/.test(n)),s=[];for(const n of t)n.toUpperCase()==="AP"?s.push("Pass","Pass","Pass"):s.push(Gv(n));return s}function Gv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function pi(e){return e.length?Vr(e.join(`

`)):""}function Vr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function zv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function xo(e,t){return zv(t)[e%4]}const Gr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},vi={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},qc=["spades","hearts","diamonds","clubs"];function Pa(e){return e==="T"?"10":e}function zr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Gr[o],l=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${l}">${a}</span>`}}return{text:e,html:e}}function Jv(e){return(vi[e.toLowerCase()]||vi[e])==="red"?"suit-red":"suit-black"}function Yv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function ar(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function qv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of qc)for(const o of e[n]||[])s+=t[o]||0;return s}function Xv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Gr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function Nn(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Qv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Js(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function Zv({observationId:e=null,userId:t,sessionId:s,deal:n,promptIndex:o,auctionSoFar:a,expectedBid:l,studentBid:i,correct:u,attemptNumber:c,timeTakenMs:f,skillPath:d,assignment:v=null,prompts:h=null,boardResult:g=null}){var _,w,T,D,B,M,z,K,fe,me,pe;const y=((_=n.steps)==null?void 0:_.filter(ye=>ye.type==="bid").length)||1,k=n.studentSeat||"S",$=((w=n.hands)==null?void 0:w[k.toLowerCase()])||"";return{observation_id:e||crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:t,session_id:s,deal:{subfolder:n.subfolder||n.category||"Unknown",filename:n.filename||null,deal_number:n.boardNumber||n.dealNumber||null,kind:n.kind||null,dealer:n.dealer||"N",vulnerability:n.vulnerable||"None",student_seat:k,hands:{north:((T=n.hands)==null?void 0:T.N)||((D=n.hands)==null?void 0:D.north)||"",east:((B=n.hands)==null?void 0:B.E)||((M=n.hands)==null?void 0:M.east)||"",south:((z=n.hands)==null?void 0:z.S)||((K=n.hands)==null?void 0:K.south)||"",west:((fe=n.hands)==null?void 0:fe.W)||((me=n.hands)==null?void 0:me.west)||""},full_auction:((pe=n.auction)==null?void 0:pe.join(" "))||"",contract:n.contract||null,declarer:n.declarer||null,lead:n.lead||null},bid_prompt:{prompt_index:o,total_prompts:y,auction_so_far:[...a],expected_bid:l,student_hand:$},result:{student_bid:i,correct:u,attempt_number:c,time_taken_ms:f},skill_path:d,board_result:g,assignment:v,prompts:h||[]}}function Xc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,board_result:e.board_result||null,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function em(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function tm(){return crypto.randomUUID()}function sm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Qc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function nm(e){const[t]=e.split("/");return t||"uncategorized"}function om(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const Zc={name:"AES-GCM",length:256},Jr={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function am(){const e=await crypto.subtle.generateKey(Zc,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Us(t)}async function eu(e){const t=Fs(e);return crypto.subtle.importKey("raw",t,Zc,!0,["encrypt","decrypt"])}async function Yr(e,t){const s=await eu(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:Us(l),iv:Us(n)}}async function qr(e,t,s){const n=await eu(s),o=Fs(e),a=Fs(t),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(l))}async function rm(e){const t=Fs(e);return crypto.subtle.importKey("spki",t,Jr,!0,["encrypt"])}async function lm(e){const t=Fs(e);return crypto.subtle.importKey("pkcs8",t,Jr,!0,["decrypt"])}async function im(){const e=await crypto.subtle.generateKey(Jr,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Us(t),privateKey:Us(s)}}async function tu(e,t){const s=await rm(t),n=Fs(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Us(o)}async function cm(e,t){const s=await lm(t),n=Fs(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Us(o)}function um(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function dm(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function fm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Yr(t,e);return(await qr(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Us(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function Fs(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const rr="bridgePractice",Be=O({}),qe=O(null),ws=O(null),ao=O(!1),ha=O(!1);function su(){try{const e=localStorage.getItem(rr);if(e){const t=JSON.parse(e);Be.value=t.users||{},qe.value=t.currentUserId||null,ws.value=t.adminViewerId||null}ao.value=!0}catch(e){console.error("Failed to load user store from storage:",e),ao.value=!0}}function Pt(){try{const e=localStorage.getItem(rr),t=e?JSON.parse(e):{};t.users=Be.value,t.currentUserId=qe.value,ws.value&&(t.adminViewerId=ws.value),localStorage.setItem(rr,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function pm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const l=crypto.randomUUID(),i=new Date().toISOString(),u=await am();let c=null;if(a)try{const d=await fetch(`${a}/keys/admin`);if(d.ok){const v=await d.json();ws.value=v.viewer_id,c={grantee_id:v.viewer_id,encrypted_payload:await tu(u,v.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:l,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:u,role:"student",serverRegistered:!1,adminGrantPayload:c,createdAt:i,updatedAt:i};return Be.value[l]=f,qe.value=l,Pt(),ha.value=!0,f}function vm(e,t){if(!Be.value[e])return console.error("User not found:",e),null;const s=Be.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Pt(),s}function mm(e){if(!Be.value[e])return!1;if(delete Be.value[e],qe.value===e){const t=Object.keys(Be.value);qe.value=t.length>0?t[0]:null}return Pt(),!0}function hm(e){return Be.value[e]?(qe.value=e,Pt(),!0):(console.error("User not found:",e),!1)}function gm(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Be.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function ym(e){const t=e.trim().toLowerCase();for(const s of Object.values(Be.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function bm(e){return Be.value[e]||null}function _m(){Be.value={},qe.value=null,ws.value=null,ha.value=!1,Pt(),ao.value=!1}function wm(){ao.value||su()}async function Sm(e){const t=dm(e);if(!t.valid)return{success:!1,error:t.error};if(!await fm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Be.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),qe.value=e.user_id,Pt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",l=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:l,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Be.value[i.id]=i,qe.value=i.id,Pt(),{success:!0,user:i}}function Cm(){const e=Be.value[qe.value];return!e||!e.secretKey?null:um(e)}function $m(){ha.value=!1}function km(){return ws.value}function xm(e){ws.value=e,Pt()}async function Am(e){const t=Be.value[qe.value];return!t||!t.secretKey?null:tu(t.secretKey,e)}async function Tm(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Nm(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Be.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Em(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Be.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Om(){if(!qe.value)return;const e=Be.value[qe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;if(o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),Array.isArray(o.classrooms)){const l=e.classrooms||[],i=o.classrooms;JSON.stringify(l.sort())!==JSON.stringify(i.sort())&&(e.classrooms=i,a=!0)}o.viewer_private_key&&!e.viewerPrivateKey&&(e.viewerPrivateKey=o.viewer_private_key,a=!0),a&&Pt()}catch{}}function He(){const e=E(()=>qe.value&&Be.value[qe.value]||null),t=E(()=>Object.values(Be.value)),s=E(()=>Object.keys(Be.value).length>0),n=E(()=>Object.keys(Be.value).length),o=E(()=>qe.value!==null&&!!Be.value[qe.value]);return{users:Be,currentUserId:qe,adminViewerId:ws,initialized:ao,showKeyBackupModal:ha,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:wm,loadFromStorage:su,saveToStorage:Pt,createUser:pm,updateUser:vm,deleteUser:mm,switchUser:hm,findUserByName:gm,findUserByEmail:ym,getUser:bm,clearUsers:_m,restoreFromBackup:Sm,getKeyBackup:Cm,dismissKeyBackupModal:$m,getAdminViewerId:km,setAdminViewerId:xm,createGrantForViewer:Am,requestRecovery:Tm,claimRecovery:Nm,claimRecoveryByCode:Em,syncRole:Om}}const lr="bridgePractice",lt=O({}),Ge=O(null),Dt=O(!1),vn=O(!1);function nu(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const l=s.split(",").map(u=>u.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:l,dueDate:n||null,teacherName:o||null,classroom:i}}function ou(){try{const e=localStorage.getItem(lr);if(e){const t=JSON.parse(e);lt.value=t.assignments||{},Ge.value=t.currentAssignmentId||null,Ge.value&&lt.value[Ge.value]&&(Dt.value=!0)}vn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),vn.value=!0}}function js(){try{const e=localStorage.getItem(lr),t=e?JSON.parse(e):{};t.assignments=lt.value,t.currentAssignmentId=Ge.value,localStorage.setItem(lr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function au({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(lt.value).find(c=>c.name===e);if(a){const c=new Set(a.lessons);for(const f of n)c.add(f);return a.lessons=Array.from(c),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Ge.value=a.id,Dt.value=!0,js(),a}const l=crypto.randomUUID(),i=new Date().toISOString(),u={id:l,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return lt.value[l]=u,Ge.value=l,Dt.value=!0,js(),u}function Im(){if(vn.value)return;ou();const e=nu();e&&au(e),vn.value=!0}function Pm(e){if(!Dt.value||!Ge.value)return!1;const t=lt.value[Ge.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Dm(e){if(!Ge.value)return;const t=lt.value[Ge.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),js())}function Rm(e){if(!Ge.value||!Dt.value)return!1;const t=lt.value[Ge.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,js(),!0}function Lm(){if(!Dt.value||!Ge.value)return null;const e=lt.value[Ge.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Bm(){Dt.value=!1}function Mm(){Ge.value&&lt.value[Ge.value]&&(Dt.value=!0)}function Um(e){return lt.value[e]||null}function Fm(){return Object.values(lt.value)}function jm(e){return lt.value[e]?(delete lt.value[e],Ge.value===e&&(Ge.value=null,Dt.value=!1),js(),!0):!1}function Hm(){lt.value={},Ge.value=null,Dt.value=!1,vn.value=!1,js()}function ga(){const e=E(()=>Ge.value&&lt.value[Ge.value]||null),t=E(()=>Dt.value&&e.value!==null),s=E(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=E(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:lt,currentAssignmentId:Ge,inAssignmentMode:Dt,initialized:vn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Im,loadFromStorage:ou,saveToStorage:js,createAssignment:au,isLessonInAssignment:Pm,setTotalDeals:Dm,recordDealCompletion:Rm,getAssignmentTag:Lm,exitAssignmentMode:Bm,returnToAssignmentMode:Mm,getAssignment:Um,getAllAssignments:Fm,deleteAssignment:jm,clearAssignments:Hm,parseAssignmentFromUrl:nu}}const ir="bridgePractice",Ve=O([]),mn=O(null),hn=O(!1),Bs=O({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function ru(){try{const e=localStorage.getItem(ir);if(e){const t=JSON.parse(e);Ve.value=t.pendingObservations||[]}hn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),hn.value=!0}}function Hs(){try{const e=localStorage.getItem(ir),t=e?JSON.parse(e):{};t.pendingObservations=Ve.value,localStorage.setItem(ir,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function lu(){hn.value||ru(),mn.value||iu()}function iu(){mn.value=tm(),Bs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Wm({observationId:e=null,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,prompts:c,boardResult:f=null}){var w,T;const d=He(),v=ga();hn.value||lu();const h=d.currentUser.value;if(!h)return{success:!1,error:"No authenticated user"};let g=t.skillPath;if(!g){const D=t.subfolder||t.category||"Unknown";g=sm(D)}const y=v.getAssignmentTag(),k=e&&Ve.value.some(D=>{var B;return((B=D.metadata)==null?void 0:B.observation_id)===e}),$=Zv({observationId:e,userId:h.id,sessionId:mn.value,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,skillPath:g,assignment:y,prompts:c,boardResult:f}),_=em($);if(!_.valid)return console.error("Invalid observation:",_.errors),{success:!1,error:_.errors.join(", ")};if(k||(Bs.value.totalObservations++,l?Bs.value.correctCount++:Bs.value.wrongCount++),h.dataConsent&&h.secretKey){const D=await Km($,h);D.success||(console.warn("Failed to encrypt observation, storing unencrypted:",D.error),mi($,((w=h.classrooms)==null?void 0:w[0])||null))}else mi($,((T=h.classrooms)==null?void 0:T[0])||null);return{success:!0,observation:$}}async function Km(e,t){var s;try{const{encrypted_data:n,iv:o}=await Yr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,l=Xc(e,a),i={encrypted_data:n,iv:o,metadata:l,encrypted:!0,queuedAt:new Date().toISOString()},u=Ve.value.findIndex(c=>{var f;return((f=c.metadata)==null?void 0:f.observation_id)===l.observation_id});return u!==-1?Ve.value[u]=i:Ve.value.push(i),Hs(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function mi(e,t){const s=Xc(e,t),n={observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()},o=Ve.value.findIndex(a=>{var l;return((l=a.metadata)==null?void 0:l.observation_id)===s.observation_id});o!==-1?Ve.value[o]=n:Ve.value.push(n),Hs()}async function Vm(){const t=He().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<Ve.value.length;n++){const o=Ve.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:l}=await Yr(o.observation,t.secretKey);Ve.value[n]={encrypted_data:a,iv:l,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Hs(),s}function Gm(){return Ve.value.length}function zm(){return[...Ve.value]}function Jm(e){Ve.value=Ve.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Hs()}function Ym(){Ve.value=[],Hs()}function qm(){return{...Bs.value}}function Xm(){Ve.value=[],mn.value=null,Bs.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},hn.value=!1,Hs()}function cs(){const e=E(()=>Ve.value.length),t=E(()=>Ve.value.length>0),s=E(()=>Ve.value.some(o=>!o.encrypted)),n=E(()=>mn.value);return{pendingObservations:Ve,sessionId:mn,sessionStats:Bs,initialized:hn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:lu,startNewSession:iu,recordObservation:Wm,encryptPendingObservations:Vm,getPendingCount:Gm,getPendingObservations:zm,removeSyncedObservations:Jm,clearPendingObservations:Ym,getSessionStats:qm,reset:Xm,loadFromStorage:ru,saveToStorage:Hs}}function Qm(){const e=cs(),t=O(null),s=O(0),n=O(!1),o=O(!1),a=Lt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),l=Lt({answered:{},wrongCard:null,correctCard:null}),i=Lt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{},promptHistory:[],observationId:null}),u=O({N:[],E:[],S:[],W:[]}),c=O(null),f=O(1),d=E(()=>{var N;return((N=t.value)==null?void 0:N.steps)||[]}),v=E(()=>d.value.length>0),h=E(()=>d.value[s.value]||null),g=E(()=>d.value.some(N=>N.type==="bid")),y=E(()=>{var N;return((N=h.value)==null?void 0:N.type)==="bid"}),k=E(()=>{var N;for(let I=s.value;I>=0;I--)if((N=d.value[I])!=null&&N.clearCommentary)return I;return 0}),$=E(()=>{var N;return((N=t.value)==null?void 0:N.studentSeat)||"S"}),_=E(()=>t.value?xo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),w=E(()=>_.value===$.value),T=E(()=>{var F,H;if(!y.value||!w.value||a.auctionComplete||o.value)return!1;const N=h.value;if(!(N!=null&&N.bid))return!1;const I=(H=(F=t.value)==null?void 0:F.auction)==null?void 0:H[a.currentBidIndex];return I?te(N.bid)===te(I):!1}),D=E(()=>{for(let N=a.displayedBids.length-1;N>=0;N--){const I=a.displayedBids[N];if(I&&I!=="Pass"&&I!=="X"&&I!=="XX")return I}return null}),B=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;const N=a.displayedBids[a.displayedBids.length-1];if(N==="X"||N==="XX"||!D.value)return!1;let I=-1;for(let R=a.displayedBids.length-1;R>=0;R--){const Y=a.displayedBids[R];if(Y&&Y!=="Pass"&&Y!=="X"&&Y!=="XX"){I=R;break}}if(I===-1)return!1;const F=xo(I,t.value.auctionDealer||t.value.dealer),H=_.value;return(H==="N"||H==="S")&&(F==="E"||F==="W")||(H==="E"||H==="W")&&(F==="N"||F==="S")}),M=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let N=a.displayedBids.length-1;N>=0;N--){const I=a.displayedBids[N];if(I!=="Pass"){if(I==="XX")return!1;if(I==="X"){const F=xo(N,t.value.auctionDealer||t.value.dealer),H=_.value;return!(H==="N"&&F==="S"||H==="S"&&F==="N"||H==="E"&&F==="W"||H==="W"&&F==="E")}return!1}}return!1}),z=E(()=>{const N=h.value;return N!=null&&N.chooseCard?!l.answered[s.value]:!1}),K=E(()=>{var N;return((N=h.value)==null?void 0:N.chooseCard)||null}),fe=E(()=>{if(!t.value)return[];const N=["N","E","S","W"];if(!v.value)return[];let I=null;const F=d.value;for(let H=0;H<=s.value&&H<F.length;H++){const P=F[H];P!=null&&P.showSeats&&(I=P.showSeats),P!=null&&P.showSeatsAfter&&(H<s.value||H===s.value&&o.value)&&(I=P.showSeatsAfter)}return I?N.filter(H=>!I.includes(H)):N}),me=E(()=>{if(!t.value||!v.value)return null;let N={};const I=d.value;for(let F=0;F<=s.value&&F<I.length;F++){const H=I[F];if(H!=null&&H.showcards)for(const[P,R]of Object.entries(H.showcards))N[P]=R;if(H!=null&&H.showSeats)for(const P of H.showSeats)delete N[P];if(H!=null&&H.showSeatsAfter&&(F<s.value||F===s.value&&o.value))for(const P of H.showSeatsAfter)delete N[P]}return Object.keys(N).length>0?N:null}),pe=E(()=>{if(!t.value||!v.value)return{};let N={},I=new Set;const F=d.value;for(let P=0;P<=s.value&&P<F.length;P++){const R=F[P];if(R!=null&&R.showcards)for(const[Y,re]of Object.entries(R.showcards))N[Y]=re;if(R!=null&&R.showSeats)for(const Y of R.showSeats)I.add(Y)}const H={};for(const[P,R]of Object.entries(N))I.has(P)&&(H[P]=R);return H}),ye=E(()=>{const N=me.value;return N?Object.keys(N):[]}),Ae=E(()=>{const N=fe.value,I=ye.value;return I.length?N.filter(F=>!I.includes(F)):N});function de(N){const I={spades:[],hearts:[],diamonds:[],clubs:[]},F={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const H of N){const P=H[0].toUpperCase(),R=H.slice(1).toUpperCase(),Y=F[P];Y&&I[Y].push(R)}return I}const ve=E(()=>{var F,H;if(!((F=t.value)!=null&&F.hands))return{};if((H=h.value)!=null&&H.reset)return t.value.hands;const N=me.value,I={};for(const P of["N","E","S","W"]){if(N&&N[P]){I[P]=de(N[P]);continue}const R=t.value.hands[P];if(!R){I[P]=null;continue}I[P]={spades:[...R.spades||[]],hearts:[...R.hearts||[]],diamonds:[...R.diamonds||[]],clubs:[...R.clubs||[]]};for(const Y of u.value[P]){const re={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[Y.suit];if(re&&I[P][re]){const le=I[P][re].indexOf(Y.card);le!==-1&&I[P][re].splice(le,1)}}}return I}),Z=E(()=>!(g.value&&!a.auctionComplete)),ee=E(()=>{if(!v.value)return!0;let N=!0;const I=d.value;for(let F=0;F<=s.value&&F<I.length;F++){const H=I[F];(H==null?void 0:H.showAuction)!==null&&(H==null?void 0:H.showAuction)!==void 0&&(N=H.showAuction)}return N}),ne=E(()=>{var I;if(!v.value)return!1;const N=d.value;for(let F=0;F<=s.value&&F<N.length;F++)if((I=N[F])!=null&&I.showLead)return!0;return!1}),Q=E(()=>{var N;return(N=t.value)!=null&&N.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),x=E(()=>{if(!v.value||n.value)return!0;const N=h.value;return(N==null?void 0:N.type)==="end"&&!z.value}),C=E(()=>v.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function q(){var I;u.value={N:[],E:[],S:[],W:[]};const N=d.value;for(let F=0;F<=s.value&&F<N.length;F++){const H=N[F];if((I=H==null?void 0:H.plays)!=null&&I.length)for(const P of H.plays){const R=P.split(/[,\s]+/);for(const Y of R){if(!Y)continue;const re=Y.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(re){const le=re[1].toUpperCase(),Ne=re[2].toUpperCase();let _e=re[3].toUpperCase();_e==="10"&&(_e="T"),u.value[le].push({suit:Ne,card:_e})}}}}}function be(){if(!t.value)return;const N=t.value.auction||[],I=xe(s.value);if(I===-1){for(;a.currentBidIndex<N.length;)a.displayedBids.push(N[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,c.value=null;return}const F=d.value[I],H=te(F.bid);for(;a.currentBidIndex<N.length;){const P=xo(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),R=te(N[a.currentBidIndex]);if(P===$.value&&R===H){c.value=Date.now(),f.value=1;return}a.displayedBids.push(N[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,c.value=null}function xe(N){const I=d.value;for(let F=N;F<I.length;F++)if(I[F].type==="bid")return F;return-1}function $e(N){if(!t.value||a.auctionComplete||!y.value)return!1;const I=t.value.auction[a.currentBidIndex],F=te(N)===te(I),H=s.value;F?H in i.wrongStepIndices&&delete i.wrongStepIndices[H]:(i.wrongStepIndices[H]=!0,i.boardHadWrong=!0);const P=d.value.slice(0,H+1).filter(Ne=>Ne.type==="bid").length-1,R=c.value?Date.now()-c.value:0;i.promptHistory.push({type:"bid",prompt_index:P,auction_so_far:[...a.displayedBids],expected_bid:I,student_bid:N,correct:F,time_ms:R}),F||J(!1);const Y=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,c.value=null,f.value=1,F?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=N,a.correctBid=I,a.wrongBidIndex=Y);const re=s.value+1,le=d.value[re];return(le==null?void 0:le.type)==="bid"?(s.value=re,o.value=!1,be()):(o.value=!0,W(),s.value>=d.value.length-1&&S()),F}function W(){var I;if(a.auctionComplete)return;if(xe(s.value+1)===-1){const F=((I=t.value)==null?void 0:I.auction)||[];for(;a.currentBidIndex<F.length;)a.displayedBids.push(F[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function se(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function oe(N,I){if(!t.value||!z.value)return!1;const F=K.value;if(!F)return!1;const H=(N+I).toUpperCase(),P=s.value;let R=!1,Y="";F.anyOf?(R=F.cards.includes(H),Y=F.cards[0]):(R=H===F.card,Y=F.card),R?P in i.wrongStepIndices&&delete i.wrongStepIndices[P]:(i.wrongStepIndices[P]=!0,i.boardHadWrong=!0);const re=c.value?Date.now()-c.value:0;return i.promptHistory.push({type:"card",expected_card:Y,student_card:H,correct:R,time_ms:re}),c.value=null,R||J(!1),l.answered[P]=!0,R?(l.wrongCard=null,l.correctCard=null):(l.wrongCard=H,l.correctCard=Y),ke(),R}function ue(){l.wrongCard=null,l.correctCard=null}function ke(){var N,I;if(T.value||z.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,q(),((N=d.value[s.value])==null?void 0:N.type)==="bid"&&be(),((I=d.value[s.value])==null?void 0:I.type)==="choose-card"&&(c.value=Date.now()),s.value>=d.value.length-1){const F=d.value[s.value];(F==null?void 0:F.type)!=="bid"&&(F==null?void 0:F.type)!=="choose-card"&&S()}return!0}return S(),!1}function S(){n.value=!0,A()}function A(){if(!d.value.some(H=>H.type==="bid"||H.type==="choose-card"))return;i.boardHadWrong?i.wrongCount++:i.correctCount++;const I=Object.keys(i.wrongStepIndices).length===0,F=!i.boardHadWrong||I;J(F)}function L(){if(se(),ue(),o.value)return o.value=!1,V(s.value),!0;if(s.value>0){const N=s.value-1,I=d.value[N];return l.answered[N]&&delete l.answered[N],(I==null?void 0:I.type)==="bid"&&V(N),s.value=N,n.value=!1,o.value=!1,q(),!0}return y.value&&a.currentBidIndex>0?(V(0),n.value=!1,o.value=!1,!0):!1}function V(N){var R;const I=d.value[N];if(!I||I.type!=="bid")return;const F=te(I.bid),H=((R=t.value)==null?void 0:R.auction)||[];let P=0;for(let Y=0;Y<H.length;Y++)if(te(H[Y])===F){P=Y;break}a.currentBidIndex=P,a.displayedBids=H.slice(0,P),a.auctionComplete=!1,c.value=Date.now(),f.value=1}async function J(N){if(!t.value)return;const I=N?i.boardHadWrong?"corrected":"correct":"failed";try{await e.recordObservation({observationId:i.observationId,deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:N?"PASS":"FAIL",correct:N,attemptNumber:1,timeTakenMs:0,prompts:[...i.promptHistory],boardResult:I})}catch(F){console.error("Failed to record board observation:",F)}}function G(N){var I,F;t.value=N,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,l.answered={},l.wrongCard=null,l.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},i.promptHistory=[],i.observationId=crypto.randomUUID(),u.value={N:[],E:[],S:[],W:[]},c.value=null,f.value=1,(I=N==null?void 0:N.steps)!=null&&I.length&&(q(),((F=N.steps[0])==null?void 0:F.type)==="bid"&&be())}function ae(){i.correctCount=0,i.wrongCount=0}function te(N){if(!N)return"";const F=N.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return F==="PASS"||F==="P"?"PASS":F==="X"||F==="DBL"||F==="DOUBLE"?"X":F==="XX"||F==="RDBL"||F==="REDOUBLE"?"XX":F.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:l,boardState:i,steps:d,hasSteps:v,currentStep:h,hasBidSteps:g,isBidStep:y,commentaryStartIndex:k,studentSeat:$,currentTurnSeat:_,isStudentTurn:w,hasBidPrompt:T,lastContractBid:D,canDouble:B,canRedouble:M,canGoBack:C,hasCardChoice:z,currentChooseCard:K,hiddenSeats:Ae,hands:ve,showHcp:Z,showcardsPlayedCards:pe,isComplete:x,showAuctionTable:ee,showOpeningLead:ne,openingLead:Q,advance:ke,makeBid:$e,clearFeedback:se,goBack:L,makeCardChoice:oe,clearCardFeedback:ue,loadDeal:G,resetStats:ae,observationStore:e}}const zo="bridgePractice",cu="bridgePracticeUIPrefs",it=O({teacherName:null,availableClassrooms:[],configuredAt:null}),gn=O({showLoadPbnOption:!1}),Jo=O(!1);function uu(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function du(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:uu(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function Zm(){return new URLSearchParams(window.location.search).get("collection")}function eh(){return new URLSearchParams(window.location.search).get("lesson")}function th(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function sh(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function nh(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function oh(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const ah=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function fu(){try{const e=localStorage.getItem(zo);if(e){const t=JSON.parse(e);t.appConfig&&(it.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function rh(){try{const e=localStorage.getItem(cu);if(e){const t=JSON.parse(e);gn.value={...gn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function lh(){try{localStorage.setItem(cu,JSON.stringify(gn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function ih(e,t){gn.value[e]=t,lh()}function Xr(){try{const e=localStorage.getItem(zo),t=e?JSON.parse(e):{};t.appConfig=it.value,localStorage.setItem(zo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function pu(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function ch(){if(Jo.value)return;fu(),rh();const{teacher:e,classrooms:t}=du();(e||t.length>0)&&(e&&!it.value.teacherName&&(it.value.teacherName=e),t.length>0&&(it.value.availableClassrooms=pu(it.value.availableClassrooms||[],t)),it.value.configuredAt||(it.value.configuredAt=new Date().toISOString()),Xr()),Jo.value=!0}function uh(){try{const e=localStorage.getItem(zo);return e?JSON.parse(e):null}catch{return null}}function dh(){it.value={teacherName:null,availableClassrooms:[],configuredAt:null},Xr(),Jo.value=!1}function vo(){const e=E(()=>it.value.availableClassrooms.length===0),t=E(()=>it.value.availableClassrooms.length>1),s=E(()=>it.value.availableClassrooms.length===1),n=E(()=>s.value?it.value.availableClassrooms[0]:null),o=E(()=>it.value.teacherName),a=E(()=>it.value.availableClassrooms),l=E(()=>gn.value.showLoadPbnOption);return{appConfig:it,initialized:Jo,uiPrefs:gn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:l,initializeFromUrl:ch,loadFromStorage:fu,saveToStorage:Xr,clearConfig:dh,getStorageData:uh,getCollectionFromUrl:Zm,setCollectionInUrl:th,getLessonFromUrl:eh,setLessonInUrl:sh,getDealFromUrl:nh,setDealInUrl:oh,setUIPref:ih,COLLECTIONS:ah,parseUrlParams:du,classroomIdToName:uu,mergeClassrooms:pu}}const fh="https://api.bridge-classroom.com/api",ph="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Qr=O([]),ot=O([]),Yo=O(!1),qo=O(null),Vn=O(null),Xo=O(!1),vh=5*60*1e3;async function mh(e){const t=await fetch(`${fh}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":ph}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function hh(e,t){try{return{...await qr(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number,board_result:e.board_result}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function gh(){return cs().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,board_result:n.board_result,session_id:n.session_id,_local:!0,_pending:!0}})}async function vu(e=!1){const s=He().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=gh();if(!e&&Vn.value&&Date.now()-new Date(Vn.value).getTime()<vh&&ot.value.length>0)return yh(n),{success:!0,cached:!0};Yo.value=!0,qo.value=null;let o=[];try{const i=await mh(s.id);if(Qr.value=i,s.secretKey&&i.length>0){const u=i.map(f=>hh(f,s.secretKey));o=(await Promise.all(u)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(qo.value=i.message)}const a=new Set(o.map(i=>i.id)),l=n.filter(i=>!a.has(i.id));return ot.value=[...o,...l],Vn.value=new Date().toISOString(),Yo.value=!1,{success:!0,count:ot.value.length}}function yh(e){const t=new Set(ot.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(ot.value=[...ot.value,...s])}async function bh(){if(Xo.value)return;He().isAuthenticated.value&&await vu(),Xo.value=!0}function _h(){Qr.value=[],ot.value=[],Vn.value=null,Xo.value=!1}function mu(){const e={};for(const t of ot.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function hi(){const e={};for(const t of ot.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function gi(){const e={};for(const t of ot.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function yi(e=10){return[...ot.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function bi(){const e=new Date().toISOString().split("T")[0];return ot.value.filter(t=>t.timestamp.startsWith(e))}function _i(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return ot.value.filter(n=>n.timestamp>=s)}function wh(){const e=mu(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let l=1;l<t.length;l++){const i=new Date(t[l]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function Zr(){const e=E(()=>ot.value.length),t=E(()=>ot.value.filter(h=>h.correct).length),s=E(()=>ot.value.filter(h=>!h.correct).length),n=E(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=E(()=>{const h=bi(),g=h.filter(k=>k.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=E(()=>{const h=_i(),g=h.filter(k=>k.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),l=E(()=>wh()),i=E(()=>hi()),u=E(()=>gi()),c=E(()=>yi(20)),f=E(()=>ot.value.length>0),d=E(()=>Yo.value),v=E(()=>qo.value!==null);return{observations:Qr,decryptedObservations:ot,loading:Yo,error:qo,lastFetchedAt:Vn,initialized:Xo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:l,skillStats:i,sessions:u,recentObservations:c,hasData:f,isLoading:d,hasError:v,initialize:bh,fetchProgress:vu,clearCache:_h,getObservationsByDate:mu,getStatsBySkill:hi,getSessions:gi,getRecentObservations:yi,getTodayObservations:bi,getThisWeekObservations:_i}}const Ps={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},kt={NONE:"none",SILVER:"silver",GOLD:"gold"},Sh=6;function Ch(e){return e.slice(0,10)}function hu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function gu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const wi=60*60*1e3;function yu(e){if(e.length===0)return Ps.GREY;const t=e[e.length-1];if(!t.correct)return Ps.RED;const s=Date.now()-wi;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return Ps.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return Ps.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=wi?Ps.ORANGE:Ps.GREEN}function bu(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function _u(e){if(e.length===0)return kt.NONE;const t=new Set;for(const l of e)t.add(Ch(l.timestamp));const s=[...t].filter(l=>bu(e,l)).sort();if(s.length<2)return kt.NONE;let n=1,o=1,a=s[0];for(let l=1;l<s.length;l++)hu(a,s[l])>=Sh&&(o++,a=s[l],o>n&&(n=o));return n>=3?kt.GOLD:n>=2?kt.SILVER:kt.NONE}function $h(e){const t=e.observations.value||[];let s=[];try{s=cs().getPendingObservations().filter(i=>i.metadata).map(i=>{const u=i.metadata;return{id:u.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:u.timestamp||i.queuedAt,skill_path:u.skill_path,correct:u.correct,deal_subfolder:u.deal_subfolder,deal_number:u.deal_number,session_id:u.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function kh(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var u;return(i.deal_number??((u=i.deal)==null?void 0:u.deal_number))===o}).sort((i,u)=>i.timestamp.localeCompare(u.timestamp)),l=gu(a);return{boardNumber:o,status:yu(a),achievement:_u(a),attemptCount:l.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function xh(e){return!e||e.length===0?{achievement:kt.NONE}:e.every(n=>n.achievement===kt.GOLD)?{achievement:kt.GOLD}:e.every(n=>n.achievement===kt.SILVER||n.achievement===kt.GOLD)?{achievement:kt.SILVER}:{achievement:kt.NONE}}const wu="bridgeLessonBoards",ro=O(Ah()),Da=new Set;function Ah(){try{const e=localStorage.getItem(wu);return e?JSON.parse(e):{}}catch{return{}}}function Th(){try{localStorage.setItem(wu,JSON.stringify(ro.value))}catch{}}function Su(e,t){ro.value={...ro.value,[e]:t},Th()}function Nh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Eh(e){const t=vo(),s=e.filter(n=>!ro.value[n]&&!Da.has(n));if(s.length!==0){for(const n of s)Da.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,l=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(l);if(!i.ok)continue;const u=await i.text(),c=Nh(u);if(c.length>0){Su(n,c);break}}catch{continue}}}finally{Da.delete(n)}}))}}function Oh(e){var n,o;const t=ro.value,s={};for(const a of e){const l=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!l||i==null||(s[l]||(s[l]={boards:new Set,lastActivity:a.timestamp}),s[l].boards.add(i),a.timestamp>s[l].lastActivity&&(s[l].lastActivity=a.timestamp))}return Object.entries(s).map(([a,l])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:l.lastActivity};const u=Math.max(...l.boards),c=[];for(let f=1;f<=u;f++)c.push(f);return{subfolder:a,boardNumbers:c,lastActivity:l.lastActivity}})}function gs(){const e=bs();function t(){return $h(e)}return{STATUS:Ps,ACHIEVEMENT:kt,getObservations:t,computeBoardMastery:kh,computeLessonAchievement:xh,extractLessonsFromObservations:Oh,saveLessonBoardNumbers:Su,fetchMissingBoardCounts:Eh,groupIntoBoardAttempts:gu,calculateCurrentStatus:yu,calculateAchievement:_u,hasGreenDay:bu,daysBetween:hu}}const qs="https://api.bridge-classroom.com/api",Xs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Qo=O(!1),lo=O(null),ya=O([]),ys=O({}),io=O({}),Zo=O(!1),ea=O(null),el=O(!1),ta={},Ih=2*60*1e3,Gn={};let Ro=null;async function Ph(){var s;const e=He(),t=e.currentUser.value;if(!t||!t.email){Qo.value=!1;return}try{const n=await fetch(`${qs}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Xs}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;lo.value=a.id;const l=await fetch(`${qs}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Xs}});if(!l.ok)return;const u=(await l.json()).grants||[],c=new Set(u.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(c.size===0)return;const f=await fetch(`${qs}/users`,{headers:{"x-api-key":Xs}});if(!f.ok)return;const v=(await f.json()).users||[],h=(s=t.email)==null?void 0:s.toLowerCase();if(ya.value=v.filter(g=>{var y;return c.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==h}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Qo.value=!0,el.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${qs}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Xs},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function Cu(e){const t=ys.value[e],s=ta[e];if(t&&s&&Date.now()-s<Ih)return t;try{const n=await fetch(`${qs}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Xs}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=(await n.json()).observations||[],l=a.map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number,board_result:i.board_result}));return io.value={...io.value,[e]:a},ys.value={...ys.value,[e]:l},ta[e]=Date.now(),l}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Dh(){Zo.value=!0,ea.value=null;try{await Promise.allSettled(ya.value.map(s=>Cu(s.id)));const e=gs(),t=new Set;for(const s of Object.values(ys.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){ea.value=e.message,console.error("Failed to load student summaries:",e)}finally{Zo.value=!1}}function Rh(e){const t=ys.value[e]||[];if(t.length===0)return{green:0,blue:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=gs(),n=s.extractLessonsFromObservations(t),o={green:0,blue:0,orange:0,yellow:0,red:0,grey:0};for(const l of n){const i=s.computeBoardMastery(t,l.subfolder,l.boardNumbers);for(const u of i)o[u.status]=(o[u.status]||0)+1}let a=null;for(const l of t)(!a||l.timestamp>a)&&(a=l.timestamp);return{...o,total:o.green+o.blue+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Lh(e,t=3){const s=ys.value[e]||[],n=bs(),o={};for(const a of s){const l=a.deal_subfolder;l&&(!o[l]||a.timestamp>o[l])&&(o[l]=a.timestamp)}return Object.entries(o).sort(([,a],[,l])=>l.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function Bh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),l=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:s.toLocaleDateString()}function Mh(){try{const s=JSON.parse(sessionStorage.getItem("bridgeTeacherSession")||"null");if(s!=null&&s.privateKeyBase64&&(!s.expiry||new Date(s.expiry)>=new Date))return s.privateKeyBase64}catch{}const t=He().currentUser.value;return t!=null&&t.viewerPrivateKey?(sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:t.viewerPrivateKey,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()})),t.viewerPrivateKey):null}async function $u(e){if(Gn[e])return Gn[e];const t=Mh();if(!t)return null;if(!Ro&&lo.value)try{const n=await fetch(`${qs}/grants?grantee_id=${lo.value}`,{headers:{"x-api-key":Xs}});n.ok&&(Ro=(await n.json()).grants||[])}catch{return null}const s=(Ro||[]).find(n=>n.grantor_id===e);if(!s)return null;try{const n=await cm(s.encrypted_payload,t);return Gn[e]=n,n}catch(n){return console.error(`Failed to decrypt grant for student ${e}:`,n),null}}async function ku(e,t){if(!t.encrypted_data||!t.iv)return null;const s=await $u(e);if(!s)return null;try{return{...await qr(t.encrypted_data,t.iv,s),id:t.id,timestamp:t.timestamp,skill_path:t.skill_path,correct:t.correct,deal_subfolder:t.deal_subfolder,deal_number:t.deal_number,board_result:t.board_result}}catch(n){return console.error("Failed to decrypt observation:",t.id,n),null}}async function Uh(e,t,s,n){const a=(io.value[e]||[]).find(l=>{const i=new Date(l.timestamp).getTime();return Math.abs(i-t)<1e3&&l.deal_number===s&&l.correct===n});return a?ku(e,a):null}function Fh(){Qo.value=!1,lo.value=null,ya.value=[],ys.value={},io.value={},Zo.value=!1,ea.value=null,el.value=!1,Ro=null;for(const e of Object.keys(Gn))delete Gn[e];for(const e of Object.keys(ta))delete ta[e]}function _n(){return{isTeacher:Qo,viewerId:lo,students:ya,studentObservations:ys,loading:Zo,error:ea,initialized:el,checkTeacherStatus:Ph,fetchStudentObservations:Cu,loadAllStudentSummaries:Dh,getStudentMasterySummary:Rh,getStudentRecentLessons:Lh,formatTimeSince:Bh,findAndDecryptObservation:Uh,decryptStudentObservation:ku,getStudentKey:$u,studentRawObservations:io,reset:Fh}}const cr="https://api.bridge-classroom.com/api",ur="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",dr=O(!1),Qs=O(null),ss=O(null),co=O([]),yn=O([]),tl=O("lessons"),ba=O(!0),wn=O(!1),mo=O([]);function jh(e){wn.value=!0,mo.value=e}function Hh(){wn.value=!1,mo.value=[]}function ho(){return wn.value?mo.value:co.value}async function xu(){const e=He(),t=_n(),s=e.currentUser.value;if(!s){yn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${cr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":ur}});if(o.ok){const{grants:a}=await o.json(),l=await fetch(`${cr}/users`,{headers:{"x-api-key":ur}});if(l.ok){const{users:i}=await l.json(),u=new Set(a.map(c=>c.grantor_id));for(const c of i)u.has(c.id)&&c.id!==s.id&&n.push({id:c.id,name:`${c.first_name} ${c.last_name}`,email:c.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}yn.value=n}async function sl(e=!1){if(wn.value)return{success:!0};const t=He(),s=Zr(),n=t.currentUser.value;if(!n)return Qs.value="No authenticated user",{success:!1,error:Qs.value};dr.value=!0,Qs.value=null;try{if(!ss.value||ss.value===n.id)ss.value=n.id,await s.fetchProgress(e),co.value=s.decryptedObservations.value;else{const o=await fetch(`${cr}/observations?user_id=${ss.value}&limit=10000`,{headers:{"x-api-key":ur}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();co.value=a.observations||[]}return{success:!0}}catch(o){return Qs.value=o.message,{success:!1,error:o.message}}finally{dr.value=!1}}async function Wh(e){ss.value=e,await sl(!0)}const fr=E(()=>{var n;const e=ho(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:Nu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),pr=E(()=>{const e=ho(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=nm(o),l=Qc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:om(a).name,skillName:l.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Au=E(()=>ba.value?fr.value.filter(e=>e.total>0):fr.value),Tu=E(()=>ba.value?pr.value.filter(e=>e.total>0):pr.value);function Nu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Kh=E(()=>tl.value==="lessons"?Au.value:Tu.value),Vh=E(()=>yn.value.length>1),Gh=E(()=>yn.value.find(e=>e.id===ss.value)||null),zh=E(()=>ho().length>0),Jh=E(()=>ho().length),Yh=E(()=>{const e=ho();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function qh(){const t=He().currentUser.value;t&&(ss.value=t.id,await xu(),await sl())}function Xh(){co.value=[],yn.value=[],ss.value=null,tl.value="lessons",ba.value=!0,Qs.value=null,wn.value=!1,mo.value=[]}function bs(){return{loading:dr,error:Qs,selectedUserId:ss,observations:co,accessibleUsers:yn,activeTab:tl,onlyWithObservations:ba,useTestData:wn,testObservations:mo,enableTestMode:jh,disableTestMode:Hh,lessonStats:fr,taxonStats:pr,filteredLessonStats:Au,filteredTaxonStats:Tu,currentStats:Kh,canViewOtherUsers:Vh,selectedUser:Gh,hasData:zh,totalObservations:Jh,overallSuccessRate:Yh,initialize:qh,loadAccomplishments:sl,selectUser:Wh,fetchAccessibleUsers:xu,reset:Xh,formatLessonName:Nu}}const Qh="https://api.bridge-classroom.com/api",Zh="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Vt=Lt({}),vr=O(!1),mr=O(0),eg=60*60*1e3;async function tg(e,t=null,s=!1){var o,a;if(!e)return[];const n=`${e}::${t||"__all__"}`;if(!s&&Vt[n]&&Date.now()-Vt[n].fetchedAt<3e4)return Vt[n].boards;vr.value=!0;try{let l=`${Qh}/board-status?user_id=${encodeURIComponent(e)}`;t&&(l+=`&deal_subfolder=${encodeURIComponent(t)}`);const i=await fetch(l,{headers:{"x-api-key":Zh}});if(!i.ok)return console.error("Failed to fetch board status:",i.status),((o=Vt[n])==null?void 0:o.boards)||[];const c=(await i.json()).boards||[];return Vt[n]={boards:c,fetchedAt:Date.now()},c}catch(l){return console.error("Failed to fetch board status:",l),((a=Vt[n])==null?void 0:a.boards)||[]}finally{vr.value=!1}}function sg(e=null,t=null){if(!e){for(const n in Vt)delete Vt[n];mr.value++;return}const s=`${e}::`;for(const n in Vt)n.startsWith(s)&&(!t||n===`${e}::${t}`||n===`${e}::__all__`)&&delete Vt[n];mr.value++}function Eu(e,t){switch(e){case"failed":return"red";case"corrected":return t&&Date.now()-new Date(t).getTime()<eg?"yellow":"orange";case"fresh_correct":return"orange";case"clean_correct":return"green";case"not_attempted":default:return"grey"}}function ng(e,t){const s={};for(const n of e)s[n.deal_number]=n;return t.map(n=>{const o=s[n];return o?{boardNumber:n,status:Eu(o.status,o.last_observation_at),achievement:o.achievement||"none",lastObservationAt:o.last_observation_at}:{boardNumber:n,status:"grey",achievement:"none",lastObservationAt:null}})}function og(e,t){try{const n=cs().getPendingObservations();for(const o of n){if(!o.metadata||o.metadata.deal_subfolder!==t)continue;const a=o.metadata.deal_number,l=e.find(u=>u.boardNumber===a);if(!l)continue;const i=o.metadata.board_result;i==="failed"?l.status="red":i==="corrected"?l.status="yellow":i==="correct"?l.status="green":l.status=o.metadata.correct?"green":"red"}}catch{}}function nl(){return{loading:vr,cacheVersion:mr,fetchBoardStatus:tg,invalidateCache:sg,getDisplayColor:Eu,buildBoardMastery:ng,mergeLocalPending:og}}const Si="https://api.bridge-classroom.com/api",ag=5e3,rg=20;let sa=[],zn=null;function Gt(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),sa.push(n),sa.length>=rg?Jn():zn||(zn=setTimeout(Jn,ag))}async function Jn(){if(zn&&(clearTimeout(zn),zn=null),sa.length===0)return;const e=sa.splice(0);try{await fetch(`${Si}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{for(const t of e)try{const s=new URLSearchParams({event:t.event,context:t.context||"",error:t.error||"",browser:t.user_agent||navigator.userAgent,timestamp:t.timestamp||""});fetch(`${Si}/diagnostics?${s}`).catch(()=>{})}catch{}}}const ol="https://api.bridge-classroom.com/api",Ou="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",xt=O("idle"),Iu=O(null),Ys=O(null),Zs=O(0),en=O(navigator.onLine),Rn=O(!1),Ci=5,lg=1e3,ig=6e4,cg=5e3;let ln=null;function ug(e){const t=Math.min(lg*Math.pow(2,e),ig);return t+Math.random()*t*.25}async function Pu(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${ol}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return Gt("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return Gt("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function Du(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${ol}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ou},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function go(){var n,o;const e=He(),t=cs();if(!navigator.onLine)return xt.value="offline",{success:!1,offline:!0};xt.value="syncing",Ys.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const u=await Pu(a);if(u.success)e.updateUser(a.id,{serverRegistered:!0}),Rn.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(u.error==="email_exists")return Gt("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),xt.value="error",Ys.value="Account already exists. Please use recovery.",Rn.value=!0,s;Gt("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,u.error),Rn.value=!0,Ys.value=`Registration failed: ${u.error}`}}const l=await t.encryptPendingObservations();l>0&&console.log(`Encrypted ${l} observations`);let i=!1;if(a!=null&&a.dataConsent){const u=t.getPendingObservations();if(u.length>0){const c=await Du(u);if(c.success&&c.synced>0){const f=u.filter(d=>d.encrypted).slice(0,c.synced).map(d=>{var v;return(v=d.metadata)==null?void 0:v.observation_id});s.observationsSynced=c.synced,console.log(`Synced ${c.synced} observations`);try{await bs().loadAccomplishments(!0)}catch{}try{nl().invalidateCache(a==null?void 0:a.id)}catch{}t.removeSyncedObservations(f)}c.success?((o=c.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",c.errors):(i=!0,Ys.value=((n=c.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",c.errors))}}return Rn.value||i?xt.value="error":(xt.value="idle",Iu.value=new Date().toISOString(),Zs.value=0),s}catch(a){return console.error("Sync failed:",a),Ys.value=a.message,xt.value="error",s.success=!1,s}}function hr(){ln&&clearTimeout(ln),ln=setTimeout(async()=>{await go()},cg)}async function Ru(){return ln&&(clearTimeout(ln),ln=null),await go()}async function Lu(){if(Zs.value>=Ci){console.log("Max retries reached, giving up"),xt.value="error";return}const e=ug(Zs.value);Zs.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${Zs.value}/${Ci})`),setTimeout(async()=>{const t=await go();!t.success&&t.offline!==!0&&Lu()},e)}function dg(){var i;const e=He(),t=cs(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(u=>u.encrypted);if(o.length===0)return;const a={observations:o.map(u=>({encrypted_data:u.encrypted_data,iv:u.iv,metadata:u.metadata}))},l=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${ol}/observations?api_key=${Ou}`,l),console.log("Sent beacon with",o.length,"observations")}function fg(){window.addEventListener("online",()=>{en.value=!0,console.log("Back online, triggering sync"),Ru()}),window.addEventListener("offline",()=>{en.value=!1,xt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&en.value&&(console.log("Tab visible, triggering sync"),hr())}),window.addEventListener("beforeunload",dg),setInterval(()=>{document.visibilityState==="visible"&&en.value&&hr()},5*60*1e3)}async function pg(){fg(),navigator.onLine?await go():xt.value="offline"}function Bu(){const e=E(()=>xt.value==="syncing"),t=E(()=>xt.value==="offline"||!en.value),s=E(()=>xt.value==="error"),n=E(()=>cs().pendingCount.value>0);return{syncState:xt,lastSyncAt:Iu,lastError:Ys,retryCount:Zs,isOnline:en,registrationFailed:Rn,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:pg,performSync:go,triggerSync:hr,forceSync:Ru,retrySync:Lu,registerUserWithServer:Pu,syncObservationsToServer:Du}}const al="https://api.bridge-classroom.com/api",Mu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",ns=O(null),gr=O(!1),yo=O(null);async function vg(){gr.value=!0;try{const e=await fetch(`${al}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=ns.value;ns.value=t.announcement||null,ns.value&&(!s||s.id!==ns.value.id)&&(yo.value=null)}catch{}finally{gr.value=!1}}async function mg(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${al}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Mu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return ns.value=a.announcement||null,yo.value=null,a}async function hg(){const e=await fetch(`${al}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Mu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);ns.value=null,yo.value=null}function gg(){ns.value&&(yo.value=ns.value.id)}function rl(){return{announcement:ns,loading:gr,dismissed:yo,loadAnnouncement:vg,setAnnouncement:mg,clearAnnouncement:hg,dismiss:gg}}const ks="https://api.bridge-classroom.com/api",xs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",En=O([]),As=O([]),Ra=O(null),Tt=O(!1),Ue=O(null);function Sn(){async function e(u){Tt.value=!0,Ue.value=null;try{const c=await fetch(`${ks}/assignments?student_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Ue.value=d||`Server error (${c.status})`,null}const f=await c.json();if(f.success){const d=new Map;for(const v of f.assignments){const h=d.get(v.exercise_id);(!h||v.attempted_boards>h.attempted_boards)&&d.set(v.exercise_id,v)}En.value=Array.from(d.values())}else Ue.value=f.error||"Failed to fetch assignments";return f}catch(c){return console.error("Failed to fetch student assignments:",c),Ue.value="Unable to connect to server",null}finally{Tt.value=!1}}async function t(u){Tt.value=!0,Ue.value=null;try{const c=await fetch(`${ks}/assignments?assigned_by=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Ue.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?As.value=f.assignments:Ue.value=f.error||"Failed to fetch assignments",f}catch(c){return console.error("Failed to fetch teacher assignments:",c),Ue.value="Unable to connect to server",null}finally{Tt.value=!1}}async function s(u){Tt.value=!0,Ue.value=null;try{const c=await fetch(`${ks}/assignments?classroom_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Ue.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?f.assignments:(Ue.value=f.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),Ue.value="Unable to connect to server",[]}finally{Tt.value=!1}}async function n(u){Tt.value=!0,Ue.value=null;try{const c=await fetch(`${ks}/assignments/${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Ue.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Ra.value=f.assignment:Ue.value=f.error||"Failed to fetch assignment",f}catch(c){return console.error("Failed to fetch assignment detail:",c),Ue.value="Unable to connect to server",null}finally{Tt.value=!1}}async function o({exercise_id:u,classroom_id:c,student_id:f,assigned_by:d,due_at:v,sort_order:h}){Tt.value=!0,Ue.value=null;try{const g=await fetch(`${ks}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":xs},body:JSON.stringify({exercise_id:u,classroom_id:c||null,student_id:f||null,assigned_by:d,due_at:v||null,sort_order:h??null})});if(!g.ok){const k=await g.text();return Ue.value=k||`Server error (${g.status})`,{success:!1,error:Ue.value}}const y=await g.json();return y.success?As.value=[y.assignment,...As.value]:Ue.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),Ue.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Tt.value=!1}}async function a(u){try{const c=await fetch(`${ks}/assignments/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":xs}});if(!c.ok){const d=await c.text();return Ue.value=d||`Server error (${c.status})`,{success:!1,error:Ue.value}}const f=await c.json();return f.success&&(As.value=As.value.filter(d=>d.id!==u),En.value=En.value.filter(d=>d.id!==u)),f}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}async function l(u){try{const c=await fetch(`${ks}/exercises/${encodeURIComponent(u)}`,{headers:{"x-api-key":xs}});if(!c.ok)return null;const f=await c.json();return f.success?f.exercise.boards:null}catch(c){return console.error("Failed to fetch exercise boards:",c),null}}function i(){En.value=[],As.value=[],Ra.value=null,Tt.value=!1,Ue.value=null}return{studentAssignments:En,teacherAssignments:As,currentAssignment:Ra,loading:Tt,error:Ue,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:l,reset:i}}const yg={key:0,class:"minimal-hand"},bg={class:"seat-label-inline"},_g={class:"seat-label"},wg={key:0,class:"suits"},Sg={key:0,class:"suit-row"},Cg={key:0,class:"cards clickable-cards"},$g=["onClick"],kg={key:1,class:"cards"},xg={key:2,class:"cards"},Ag={key:1,class:"hidden-hand"},Tg={key:2,class:"hcp"},Ng={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=qc,n=E(()=>ar(t.seat)),o=E(()=>qv(t.hand)),a=E(()=>t.hand?s.reduce((k,$)=>{var _;return k+(((_=t.hand[$])==null?void 0:_.length)||0)},0):0),l=E(()=>a.value>0&&a.value<5);function i(k){return t.hand&&t.hand[k]&&t.hand[k].length>0}function u(k){return Gr[k]}function c(k){return Jv(k)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d(k){return f[k]||k}function v(k){if(!t.hand||!t.hand[k])return"";const $=t.hand[k];return $.length===0?"":$.map(Pa).join(" ")}const h=E(()=>t.playedCards&&t.playedCards.length>0),g=E(()=>{if(!t.playedCards)return null;const k=new Set;for(const $ of t.playedCards){const _=$[0].toUpperCase(),w=$.slice(1).toUpperCase(),T={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];T&&k.add(`${T}:${w}`)}return k});function y(k,$){return g.value?g.value.has(`${k}:${$}`):!1}return(k,$)=>(p(),m("div",{class:ce(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),m("div",yg,[r("span",bg,b(e.seat),1),(p(!0),m(X,null,ie(U(s),_=>(p(),m("span",{key:_,class:ce(["suit-symbol-inline",c(_)])},b(u(_)),3))),128))])):(p(),m(X,{key:1},[r("div",_g,b(n.value),1),!e.hidden&&e.hand?(p(),m("div",wg,[(p(!0),m(X,null,ie(U(s),_=>(p(),m(X,{key:_},[!l.value||i(_)?(p(),m("div",Sg,[r("span",{class:ce(["suit-symbol",c(_)])},b(u(_)),3),e.clickable?(p(),m("span",Cg,[(p(!0),m(X,null,ie(e.hand[_],w=>(p(),m("span",{key:w,class:ce(y(_,w)?"card-played":"card-clickable"),onClick:T=>!y(_,w)&&k.$emit("card-click",{suit:d(_),rank:w})},b(U(Pa)(w)),11,$g))),128))])):h.value?(p(),m("span",kg,[(p(!0),m(X,null,ie(e.hand[_],w=>(p(),m("span",{key:w,class:ce({"card-played":y(_,w)})},b(U(Pa)(w)),3))),128))])):(p(),m("span",xg,b(v(_)),1))])):j("",!0)],64))),128))])):e.hidden?(p(),m("div",Ag,[...$[0]||($[0]=[r("div",{class:"card-back"},null,-1)])])):j("",!0),e.showHcp&&e.hand&&!e.hidden&&!l.value?(p(),m("div",Tg,b(o.value)+" HCP ",1)):j("",!0)],64))],2))}},Ao=Se(Ng,[["__scopeId","data-v-128fc7ed"]]),Eg={class:"ns-column north-row"},Og={key:0,class:"position north"},Ig={key:0,class:"position west"},Pg={class:"center"},Dg={key:1,class:"position east"},Rg={class:"ns-column south-row"},Lg={key:0,class:"position south"},Bg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,l;return p(),m("div",{class:ce(["bridge-table",{compact:e.compact}])},[r("div",Eg,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),m("div",Og,[ge(Ao,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),m("div",Ig,[ge(Ao,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0),r("div",Pg,[ff(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),m("div",Dg,[ge(Ao,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0),r("div",Rg,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),m("div",Lg,[ge(Ao,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(l=e.playedCards)==null?void 0:l.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):j("",!0)])],2)}}},Mg=Se(Bg,[["__scopeId","data-v-ec6230a9"]]),Ug={class:"bidding-box"},Fg={class:"bid-section"},jg={class:"levels"},Hg=["onClick"],Wg={class:"strains"},Kg=["disabled","onClick"],Vg=["innerHTML"],Gg={class:"special-bids"},zg=["disabled"],Jg=["disabled"],Yg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=O(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],l=E(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=E(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],v=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!v)return-1;const h=v[1].toUpperCase();return d.indexOf(h==="N"?"NT":h)});function u(d){o.value=d}function c(d,v){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(v);return d>l.value||d===l.value&&g>i.value}function f(d,v){c(d,v)&&n("bid",`${d}${v}`)}return(d,v)=>(p(),m("div",Ug,[r("div",Fg,[r("div",jg,[(p(),m(X,null,ie(7,h=>r("button",{key:h,class:ce(["level-btn",{active:o.value===h}]),onClick:g=>u(h)},b(h),11,Hg)),64))]),r("div",Wg,[(p(),m(X,null,ie(a,h=>r("button",{key:h.value,class:ce(["strain-btn",[h.colorClass,{disabled:!c(o.value,h.value)}]]),disabled:!c(o.value,h.value),onClick:g=>f(o.value,h.value)},[r("span",{innerHTML:h.display},null,8,Vg)],10,Kg)),64))])]),r("div",Gg,[r("button",{class:"special-btn pass",onClick:v[0]||(v[0]=h=>d.$emit("bid","Pass"))}," Pass "),r("button",{class:"special-btn double",disabled:!e.canDouble,onClick:v[1]||(v[1]=h=>d.$emit("bid","X"))}," Double ",8,zg),r("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:v[2]||(v[2]=h=>d.$emit("bid","XX"))}," Redouble ",8,Jg)])]))}},qg=Se(Yg,[["__scopeId","data-v-38ccb98f"]]),Xg={class:"auction-table"},Qg={class:"rounds"},Zg=["innerHTML"],ey={key:1,class:"turn-indicator"},ty={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=E(()=>["W","N","E","S"].indexOf(t.dealer)),n=E(()=>{const c=[],f=t.bids;let d=0,v=0;for(;d<f.length||v===0&&f.length>0;){const h=[null,null,null,null],g=v===0?s.value:0;for(let y=g;y<4&&d<f.length;y++)h[y]=f[d],d++;if(h.some(y=>y!==null)&&c.push(h),v++,v>20)break}if(t.currentBidIndex>=f.length){const h=c[c.length-1],g=h?h.filter(y=>y!==null).length:0;if(c.length===1&&s.value,g===4||c.length>1&&g===4){const y=[null,null,null,null];c.push(y)}}return c});function o(c,f){return c===0?f-s.value:4-s.value+(c-1)*4+f}function a(c,f){const d=o(c,f);return d===t.currentBidIndex&&d>=t.bids.length}function l(c,f){return t.wrongBidIndex<0?!1:o(c,f)===t.wrongBidIndex}function i(c,f){return t.correctBidIndex<0?!1:o(c,f)===t.correctBidIndex}function u(c){return zr(c).html}return(c,f)=>(p(),m("div",Xg,[f[0]||(f[0]=so('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),r("div",Qg,[(p(!0),m(X,null,ie(n.value,(d,v)=>(p(),m("div",{key:v,class:"round"},[(p(!0),m(X,null,ie(d,(h,g)=>(p(),m("div",{key:g,class:ce(["bid-cell",{"current-turn":a(v,g),"wrong-bid":l(v,g),"correct-bid":i(v,g)}])},[h?(p(),m("span",{key:0,innerHTML:u(h)},null,8,Zg)):e.showTurnIndicator&&a(v,g)?(p(),m("span",ey,"?")):j("",!0)],2))),128))]))),128))])]))}},sy=Se(ty,[["__scopeId","data-v-ac265db8"]]),ny={class:"deal-info"},oy={class:"board-number"},ay={key:0,class:"board-popup"},ry={class:"popup-list"},ly=["onClick"],iy={class:"info-row"},cy={class:"info-item"},uy={class:"value"},dy={class:"info-item"},fy={key:0,class:"contract-row"},py={class:"info-item"},vy=["innerHTML"],my={key:0,class:"label"},hy={key:0,class:"info-item"},gy=["innerHTML"],yy={key:1,class:"title"},by={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=O(!1);function a(v){n("goto",v),o.value=!1}const l=E(()=>ar(s.dealer)),i=E(()=>ar(s.declarer)),u=E(()=>Yv(s.vulnerable)),c=E(()=>{var h;const v=(h=s.vulnerable)==null?void 0:h.toUpperCase();return v==="BOTH"||v==="ALL"?"vul-both":v==="NS"||v==="EW"?"vul-partial":"vul-none"}),f=E(()=>s.contract?zr(s.contract).html:""),d=E(()=>{if(!s.openingLead)return"";const v=s.openingLead[0],h=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},k=g[v]||v;return`<span class="${y[v]||"black"}">${k}</span>${h==="T"?"10":h}`});return(v,h)=>(p(),m("div",ny,[r("div",{class:"board-selector",onMouseenter:h[0]||(h[0]=g=>o.value=!0),onMouseleave:h[1]||(h[1]=g=>o.value=!1)},[r("div",oy,"Board "+b(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),m("div",ay,[h[2]||(h[2]=r("div",{class:"popup-header"},"Select Board",-1)),r("div",ry,[(p(!0),m(X,null,ie(e.totalDeals,g=>(p(),m("button",{key:g,class:ce(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+b(e.dealBoardNumbers[g-1]||g),11,ly))),128))])])):j("",!0)],32),r("div",iy,[r("div",cy,[h[3]||(h[3]=r("span",{class:"label"},"Dealer:",-1)),r("span",uy,b(l.value),1)]),r("div",dy,[h[4]||(h[4]=r("span",{class:"label"},"Vul:",-1)),r("span",{class:ce(["value",c.value])},b(u.value),3)])]),e.showContract&&e.contract?(p(),m("div",fy,[r("div",py,[r("span",{class:"value contract",innerHTML:f.value},null,8,vy),e.declarer?(p(),m("span",my,"by "+b(i.value),1)):j("",!0)]),e.openingLead?(p(),m("div",hy,[h[5]||(h[5]=r("span",{class:"label"},"OL:",-1)),r("span",{class:"value lead-card",innerHTML:d.value},null,8,gy)])):j("",!0)])):j("",!0),e.title?(p(),m("div",yy,b(e.title),1)):j("",!0)]))}},_y=Se(by,[["__scopeId","data-v-5a844c49"]]),wy={class:"feedback-header"},Sy={key:0,class:"icon"},Cy={key:1,class:"icon"},$y={class:"title"},ky={key:0,class:"feedback-content"},xy={class:"bid-comparison"},Ay={class:"bid-item your-bid"},Ty=["innerHTML"],Ny={class:"bid-item correct-bid"},Ey=["innerHTML"],Oy={key:1,class:"feedback-content"},Iy={class:"bid-comparison"},Py={class:"bid-item your-bid"},Dy=["innerHTML"],Ry={class:"bid-item correct-bid"},Ly=["innerHTML"],By=["innerHTML"],My={class:"actions"},Uy={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=E(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return zr(a).html}function o(a){return Xv(a).html}return(a,l)=>e.visible?(p(),m("div",{key:0,class:ce(["feedback-panel",e.type])},[r("div",wy,[e.type==="wrong"?(p(),m("span",Sy,"")):e.type==="correct"?(p(),m("span",Cy,"")):j("",!0),r("span",$y,b(s.value),1)]),e.wrongBid?(p(),m("div",ky,[r("div",xy,[r("div",Ay,[l[1]||(l[1]=r("span",{class:"label"},"Your bid:",-1)),r("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Ty)]),r("div",Ny,[l[2]||(l[2]=r("span",{class:"label"},"Correct bid:",-1)),r("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Ey)])])])):j("",!0),e.wrongCardCode?(p(),m("div",Oy,[r("div",Iy,[r("div",Py,[l[3]||(l[3]=r("span",{class:"label"},"Your card:",-1)),r("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Dy)]),r("div",Ry,[l[4]||(l[4]=r("span",{class:"label"},"Correct card:",-1)),r("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,Ly)])])])):j("",!0),e.commentary?(p(),m("div",{key:2,class:"commentary",innerHTML:U(Js)(e.commentary)},null,8,By)):j("",!0),r("div",My,[e.showContinue?(p(),m("button",{key:0,class:"btn continue",onClick:l[0]||(l[0]=i=>a.$emit("continue"))}," Continue ")):j("",!0)])],2)):j("",!0)}},$i=Se(Uy,[["__scopeId","data-v-04368462"]]),Fy={class:"welcome-screen"},jy={class:"welcome-card"},Hy={class:"welcome-header"},Wy={key:0,class:"welcome-body"},Ky={class:"form-group"},Vy={key:0,class:"error-message"},Gy={class:"form-group"},zy={key:0,class:"error-message"},Jy={class:"form-group"},Yy={key:0,class:"error-message"},qy={key:0,class:"form-group"},Xy={class:"checkbox-group"},Qy=["value","checked","onChange"],Zy={key:1,class:"form-group"},eb={class:"single-classroom"},tb={class:"form-group consent-group"},sb={class:"checkbox-label consent-label"},nb={key:0,class:"consent-details"},ob=["disabled"],ab={key:0},rb={key:1},lb={key:1,class:"welcome-body returning"},ib={key:2,class:"welcome-body switcher"},cb={class:"user-list"},ub=["onClick"],db={class:"user-name"},fb={key:3,class:"welcome-body recovery-sent"},pb={class:"subtitle"},vb={class:"recovery-info"},mb={class:"code-entry"},hb=["disabled"],gb={key:0},yb={key:1},bb={key:0,class:"error-message"},_b={key:4,class:"welcome-body recovery-claiming"},wb={class:"subtitle"},Sb={key:0,class:"recovery-error-panel"},Cb={class:"error-message"},$b={key:1,class:"loading-spinner"},kb={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=vo(),o=He(),a="https://api.bridge-classroom.com/api",l=O("form"),i=O(""),u=O(""),c=O(""),f=O([]),d=O(!0),v=O({firstName:"",lastName:"",email:"",classrooms:""}),h=O(!1),g=O(!1),y=O(""),k=O(""),$=O(""),_=O(""),w=O("");_t(async()=>{o.initialize(),n.initializeFromUrl();const Q=new URLSearchParams(window.location.search),x=Q.get("recover"),C=Q.get("user_id");if(x&&C){await me(C,x),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?l.value="returning":o.hasUsers.value?l.value="switcher":l.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const T=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),B=E(()=>i.value.trim().length>0&&u.value.trim().length>0&&c.value.trim().length>0&&T.test(c.value.trim())),M=E(()=>o.currentUser.value?o.currentUser.value.firstName:""),z=E(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function K(){v.value={firstName:"",lastName:"",email:"",classrooms:""};let Q=!0;return i.value.trim()||(v.value.firstName="First name is required",Q=!1),u.value.trim()||(v.value.lastName="Last name is required",Q=!1),c.value.trim()?T.test(c.value.trim())||(v.value.email="Please enter a valid email address",Q=!1):(v.value.email="Email is required",Q=!1),o.findUserByEmail(c.value)&&(v.value.email="This email is already registered on this device.",Q=!1),Q}async function fe(){const Q=c.value.trim().toLowerCase();if(!navigator.onLine)return Gt("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const x=await o.requestRecovery(Q,a);return x.success?(k.value=Q,_.value=x.message,l.value="recovery-sent",!1):x.message&&x.message.includes("No account found")?!0:(Gt("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${Q}`,x.message),await Jn(),v.value.email=x.message||"Unable to verify email. Please try again.",!1)}catch(x){return Gt("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${Q}`,x),await Jn(),D?v.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":v.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function me(Q,x){l.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",$.value="";try{const C=await o.claimRecovery(Q,x,a);C.success&&C.user?s("userReady",C.user):($.value=C.error||"Recovery failed. Please try again.",l.value="form")}catch(C){Gt("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${Q}`,C),$.value="Unable to complete recovery. Please try again.",l.value="form"}finally{g.value=!1,y.value=""}}async function pe(){if(w.value.trim().length===6){g.value=!0,y.value="Verifying code...",$.value="";try{const Q=await o.claimRecoveryByCode(k.value.trim(),w.value.trim(),a);Q.success&&Q.user?s("userReady",Q.user):$.value=Q.error||"Invalid code. Please check and try again."}catch(Q){Gt("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${k.value.trim()}`,Q),$.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function ye(){if(!K())return;if(g.value=!0,y.value="Checking account...",!await fe()){g.value=!1,y.value="";return}let x=[];n.hasSingleClassroom.value?x=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(x=[...f.value]),y.value="Creating your secure encryption key...";try{const C=await o.createUser({firstName:i.value,lastName:u.value,email:c.value,classrooms:x,dataConsent:d.value,apiUrl:a});s("userReady",C)}catch(C){const q=C instanceof Error?C.message:String(C);Gt("registration_create_user_failed",`handleSubmit  createUser threw for ${c.value.trim()}`,C),await Jn(),v.value.email=`Failed to create account: ${q}. Please try again.`}finally{g.value=!1,y.value=""}}function Ae(){s("userReady",o.currentUser.value)}function de(){l.value="switcher"}function ve(Q){o.switchUser(Q),s("userReady",o.currentUser.value)}function Z(){i.value="",u.value="",c.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,v.value={firstName:"",lastName:"",email:"",classrooms:""},l.value="form"}function ee(){o.currentUser.value?l.value="returning":o.hasUsers.value&&(l.value="switcher")}function ne(Q){const x=f.value.indexOf(Q);x===-1?f.value.push(Q):f.value.splice(x,1)}return(Q,x)=>(p(),m("div",Fy,[r("div",jy,[r("div",Hy,[r("h1",null,b(z.value),1)]),l.value==="form"?(p(),m("div",Wy,[x[16]||(x[16]=r("h2",null,"Welcome!",-1)),x[17]||(x[17]=r("p",{class:"subtitle"},"Please enter your name to get started.",-1)),r("form",{onSubmit:nt(ye,["prevent"]),class:"user-form"},[r("div",Ky,[x[8]||(x[8]=r("label",{for:"firstName"},"First Name",-1)),je(r("input",{id:"firstName","onUpdate:modelValue":x[0]||(x[0]=C=>i.value=C),type:"text",placeholder:"Enter your first name",class:ce({"has-error":v.value.firstName}),autocomplete:"given-name"},null,2),[[Ct,i.value]]),v.value.firstName?(p(),m("span",Vy,b(v.value.firstName),1)):j("",!0)]),r("div",Gy,[x[9]||(x[9]=r("label",{for:"lastName"},"Last Name",-1)),je(r("input",{id:"lastName","onUpdate:modelValue":x[1]||(x[1]=C=>u.value=C),type:"text",placeholder:"Enter your last name",class:ce({"has-error":v.value.lastName}),autocomplete:"family-name"},null,2),[[Ct,u.value]]),v.value.lastName?(p(),m("span",zy,b(v.value.lastName),1)):j("",!0)]),r("div",Jy,[x[10]||(x[10]=r("label",{for:"email"},"Email Address",-1)),je(r("input",{id:"email","onUpdate:modelValue":x[2]||(x[2]=C=>c.value=C),type:"email",placeholder:"Enter your email address",class:ce({"has-error":v.value.email}),autocomplete:"email"},null,2),[[Ct,c.value]]),v.value.email?(p(),m("span",Yy,b(v.value.email),1)):j("",!0),x[11]||(x[11]=r("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),U(n).hasMultipleClassrooms.value?(p(),m("div",qy,[x[12]||(x[12]=r("label",null,"Select Your Class(es)",-1)),r("div",Xy,[(p(!0),m(X,null,ie(U(n).availableClassrooms.value,C=>(p(),m("label",{key:C.id,class:"checkbox-label"},[r("input",{type:"checkbox",value:C.id,checked:f.value.includes(C.id),onChange:q=>ne(C.id)},null,40,Qy),r("span",null,b(C.name),1)]))),128))])])):U(n).hasSingleClassroom.value?(p(),m("div",Zy,[x[13]||(x[13]=r("label",null,"Class",-1)),r("div",eb,b(U(n).singleClassroom.value.name),1)])):j("",!0),r("div",tb,[r("label",sb,[je(r("input",{type:"checkbox","onUpdate:modelValue":x[3]||(x[3]=C=>d.value=C)},null,512),[[Hr,d.value]]),x[14]||(x[14]=r("span",null," Preserve my practice history ",-1))]),r("button",{type:"button",class:"details-toggle",onClick:x[4]||(x[4]=C=>h.value=!h.value)},b(h.value?"Hide details":"What data is preserved?"),1),h.value?(p(),m("div",nb,[...x[15]||(x[15]=[so('<p data-v-cded279f>Your practice history is saved online so you can track your progress over time.</p><p data-v-cded279f><strong data-v-cded279f>How it works:</strong></p><ul data-v-cded279f><li data-v-cded279f>Your data is encrypted with your personal key</li><li data-v-cded279f>Only you and people you authorize can view it</li><li data-v-cded279f>The site administrator can also access your data</li></ul><p data-v-cded279f><strong data-v-cded279f>What&#39;s preserved:</strong></p><ul data-v-cded279f><li data-v-cded279f>Which hands you practiced</li><li data-v-cded279f>Your bidding choices (correct and incorrect)</li><li data-v-cded279f>When you practiced</li></ul><p class="consent-note" data-v-cded279f>You can change this setting anytime in Settings.</p>',6)])])):j("",!0)]),r("button",{type:"submit",class:"submit-btn",disabled:!B.value||g.value},[g.value?(p(),m("span",ab,b(y.value),1)):(p(),m("span",rb,"Start Practicing"))],8,ob)],32),U(o).hasUsers.value?(p(),m("button",{key:0,class:"back-link",onClick:ee}," Back to user selection ")):j("",!0)])):l.value==="returning"?(p(),m("div",lb,[r("h2",null,"Welcome back, "+b(M.value)+"!",1),x[18]||(x[18]=r("p",{class:"subtitle"},"Ready to continue practicing?",-1)),r("button",{class:"submit-btn",onClick:Ae}," Continue "),r("button",{class:"switch-link",onClick:de}," Not "+b(M.value)+"? Switch user ",1)])):l.value==="switcher"?(p(),m("div",ib,[x[19]||(x[19]=r("h2",null,"Select User",-1)),x[20]||(x[20]=r("p",{class:"subtitle"},"Choose who's practicing today:",-1)),r("div",cb,[(p(!0),m(X,null,ie(U(o).allUsers.value,C=>(p(),m("button",{key:C.id,class:ce(["user-item",{"is-current":C.id===U(o).currentUserId.value}]),onClick:q=>ve(C.id)},[r("span",db,b(C.firstName)+" "+b(C.lastName),1)],10,ub))),128))]),r("button",{class:"add-user-btn",onClick:Z}," + Add New User "),U(o).currentUser.value?(p(),m("button",{key:0,class:"back-link",onClick:ee}," Cancel ")):j("",!0)])):l.value==="recovery-sent"?(p(),m("div",fb,[x[25]||(x[25]=r("h2",null,"Check Your Email",-1)),r("p",pb,[x[21]||(x[21]=Te(" We found an existing account for ",-1)),r("strong",null,b(k.value),1),x[22]||(x[22]=Te(". ",-1))]),r("div",vb,[r("p",null,b(_.value),1),x[23]||(x[23]=r("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),r("div",mb,[x[24]||(x[24]=r("label",{for:"recoveryCode"},"Recovery Code",-1)),je(r("input",{id:"recoveryCode","onUpdate:modelValue":x[5]||(x[5]=C=>w.value=C),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Vo(pe,["enter"])},null,544),[[Ct,w.value]]),r("button",{class:"submit-btn",disabled:w.value.trim().length!==6||g.value,onClick:pe},[g.value?(p(),m("span",gb,b(y.value),1)):(p(),m("span",yb,"Restore Account"))],8,hb),$.value?(p(),m("span",bb,b($.value),1)):j("",!0)]),r("button",{class:"back-link",onClick:x[6]||(x[6]=C=>l.value="form")}," Use a different email ")])):l.value==="recovery-claiming"?(p(),m("div",_b,[x[27]||(x[27]=r("h2",null,"Restoring Your Account",-1)),r("p",wb,b(y.value),1),$.value?(p(),m("div",Sb,[r("p",Cb,b($.value),1),r("button",{class:"back-link",onClick:x[7]||(x[7]=C=>l.value="form")}," Try again ")])):(p(),m("div",$b,[...x[26]||(x[26]=[r("div",{class:"spinner"},null,-1)])]))])):j("",!0)])]))}},xb=Se(kb,[["__scopeId","data-v-cded279f"]]),Ts="https://api.bridge-classroom.com/api",Ks="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ns=O([]),Vs=O(null),Nt=O(!1),Qe=O(null);function bo(){async function e(u){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ts}/classrooms?teacher_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Ks}})).json();return f.success?Ns.value=f.classrooms:Qe.value=f.error||"Failed to fetch classrooms",f}catch(c){return console.error("Failed to fetch classrooms:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function t(u,c,f){Nt.value=!0,Qe.value=null;try{const d=await fetch(`${Ts}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ks},body:JSON.stringify({teacher_id:u,name:c,description:f||null})});if(!d.ok){const h=await d.text();return Qe.value=h||`Server error (${d.status})`,{success:!1,error:Qe.value}}const v=await d.json();return v.success?Ns.value=[v.classroom,...Ns.value]:Qe.value=v.error||"Failed to create classroom",v}catch(d){return console.error("Failed to create classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function s(u){Nt.value=!0,Qe.value=null;try{const f=await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}`,{headers:{"x-api-key":Ks}})).json();return f.success?Vs.value=f.classroom:Qe.value=f.error||"Failed to fetch classroom",f}catch(c){return console.error("Failed to fetch classroom detail:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function n(u,c){try{const d=await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}/members/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":Ks}})).json();if(d.success&&Vs.value){Vs.value.members=Vs.value.members.filter(h=>h.student_id!==c);const v=Ns.value.findIndex(h=>h.id===u);v!==-1&&Ns.value[v].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(u){Nt.value=!0,Qe.value=null;try{const c=await fetch(`${Ts}/join/${encodeURIComponent(u)}`);return c.status===404?(Qe.value="Classroom not found",null):await c.json()}catch(c){return console.error("Failed to fetch join info:",c),Qe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function a(u,c,f){Nt.value=!0,Qe.value=null;try{const v=await(await fetch(`${Ts}/join/${encodeURIComponent(u)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ks},body:JSON.stringify({student_id:c,encrypted_grant_payload:f})})).json();return v.success||(Qe.value=v.error||"Failed to join classroom"),v}catch(d){return console.error("Failed to join classroom:",d),Qe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function l(u,c){try{return await(await fetch(`${Ts}/classrooms/${encodeURIComponent(u)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Ks},body:JSON.stringify({student_id:c})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){Ns.value=[],Vs.value=null,Nt.value=!1,Qe.value=null}return{teacherClassrooms:Ns,currentClassroom:Vs,loading:Nt,error:Qe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:l,reset:i}}const Ab={class:"settings-panel"},Tb={class:"settings-body"},Nb={class:"settings-section"},Eb={class:"info-row"},Ob={class:"info-value"},Ib={class:"info-row"},Pb={class:"info-value"},Db={class:"info-row"},Rb={class:"info-row"},Lb={class:"info-value"},Bb={key:1,class:"edit-form"},Mb={class:"form-group"},Ub={class:"form-group"},Fb={class:"form-group"},jb={class:"checkbox-label"},Hb={key:0,class:"settings-section"},Wb={class:"assignment-list"},Kb={class:"assignment-header"},Vb={class:"assignment-name"},Gb={class:"assignment-progress"},zb={class:"progress-bar"},Jb={class:"assignment-meta"},Yb={key:0},qb={class:"assignment-list"},Xb={class:"assignment-header"},Qb={class:"assignment-name"},Zb={class:"assignment-meta"},e_={key:1,class:"settings-section"},t_={class:"classroom-id"},s_=["disabled","onClick"],n_={class:"settings-section"},o_={class:"toggle-row"},a_={class:"toggle-label"},r_=["checked"],l_={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=He(),o=vo(),a=ga(),l=bo(),i=O(!1),u=O(""),c=O(""),f=O(!0),d=E(()=>n.currentUser.value),v=E(()=>{var z;return!d.value||!((z=d.value.classrooms)!=null&&z.length)?"No classroom assigned":d.value.classrooms.map(K=>{const fe=o.availableClassrooms.value.find(me=>me.id===K);return fe?fe.name:K}).join(", ")}),h=E(()=>a.getAllAssignments().filter(z=>z.completionPercent<100)),g=E(()=>a.getAllAssignments().filter(z=>z.completionPercent>=100));function y(){d.value&&(u.value=d.value.firstName,c.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function k(){i.value=!1}function $(){d.value&&(n.updateUser(d.value.id,{firstName:u.value,lastName:c.value,dataConsent:f.value}),i.value=!1)}function _(){s("switchUser")}function w(){i.value=!1,s("close")}const T=O(null);async function D(z){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(T.value=z,(await l.leaveClassroom(z,d.value.id)).success){const fe=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:fe.filter(me=>me!==z)})}T.value=null}function B(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function M(z){return z?new Date(z).toLocaleDateString():"N/A"}return(z,K)=>{var fe,me,pe,ye,Ae,de,ve;return e.visible?(p(),m("div",{key:0,class:"settings-overlay",onClick:nt(w,["self"])},[r("div",Ab,[r("div",{class:"settings-header"},[K[5]||(K[5]=r("h2",null,"Settings",-1)),r("button",{class:"close-btn",onClick:w,"aria-label":"Close"},"  ")]),r("div",Tb,[r("section",Nb,[K[12]||(K[12]=r("h3",null,"Your Profile",-1)),i.value?(p(),m("div",Bb,[r("div",Mb,[K[10]||(K[10]=r("label",{for:"editFirstName"},"First Name",-1)),je(r("input",{id:"editFirstName","onUpdate:modelValue":K[1]||(K[1]=Z=>u.value=Z),type:"text"},null,512),[[Ct,u.value]])]),r("div",Ub,[K[11]||(K[11]=r("label",{for:"editLastName"},"Last Name",-1)),je(r("input",{id:"editLastName","onUpdate:modelValue":K[2]||(K[2]=Z=>c.value=Z),type:"text"},null,512),[[Ct,c.value]])]),r("div",Fb,[r("label",jb,[je(r("input",{type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=Z=>f.value=Z)},null,512),[[Hr,f.value]]),r("span",null,"Share practice results with "+b(U(o).teacherName.value||"teacher"),1)])]),r("div",{class:"button-row"},[r("button",{class:"primary-btn",onClick:$}," Save Changes "),r("button",{class:"secondary-btn",onClick:k}," Cancel ")])])):(p(),m(X,{key:0},[r("div",Eb,[K[6]||(K[6]=r("span",{class:"info-label"},"Name",-1)),r("span",Ob,b((fe=d.value)==null?void 0:fe.firstName)+" "+b((me=d.value)==null?void 0:me.lastName),1)]),r("div",Ib,[K[7]||(K[7]=r("span",{class:"info-label"},"Class",-1)),r("span",Pb,b(v.value),1)]),r("div",Db,[K[8]||(K[8]=r("span",{class:"info-label"},"Data Sharing",-1)),r("span",{class:ce(["info-value",(pe=d.value)!=null&&pe.dataConsent?"enabled":"disabled"])},b((ye=d.value)!=null&&ye.dataConsent?"Enabled":"Disabled"),3)]),r("div",Rb,[K[9]||(K[9]=r("span",{class:"info-label"},"Member Since",-1)),r("span",Lb,b(M((Ae=d.value)==null?void 0:Ae.createdAt)),1)]),r("div",{class:"button-row"},[r("button",{class:"secondary-btn",onClick:y}," Edit Profile "),r("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((de=d.value)==null?void 0:de.role)!=="teacher"&&((ve=d.value)==null?void 0:ve.role)!=="admin"?(p(),m("button",{key:0,class:"become-teacher-btn",onClick:K[0]||(K[0]=Z=>{s("close"),s("become-teacher")})}," Become a Teacher ")):j("",!0)],64))]),h.value.length||g.value.length?(p(),m("section",Hb,[K[16]||(K[16]=r("h3",null,"Assignments",-1)),h.value.length?(p(),m(X,{key:0},[K[13]||(K[13]=r("h4",null,"Active",-1)),r("div",Wb,[(p(!0),m(X,null,ie(h.value,Z=>(p(),m("div",{key:Z.id,class:"assignment-item"},[r("div",Kb,[r("span",Vb,b(Z.name),1),r("span",Gb,b(Z.completionPercent)+"%",1)]),r("div",zb,[r("div",{class:"progress-fill",style:st({width:`${Z.completionPercent}%`})},null,4)]),r("div",Jb,[Z.dueDate?(p(),m("span",Yb," Due: "+b(M(Z.dueDate)),1)):j("",!0),r("span",null,b(Z.completedDeals)+"/"+b(Z.totalDeals)+" deals ",1)])]))),128))])],64)):j("",!0),g.value.length?(p(),m(X,{key:1},[K[15]||(K[15]=r("h4",null,"Completed",-1)),r("div",qb,[(p(!0),m(X,null,ie(g.value,Z=>(p(),m("div",{key:Z.id,class:"assignment-item completed"},[r("div",Xb,[r("span",Qb,b(Z.name),1),K[14]||(K[14]=r("span",{class:"assignment-check"},"",-1))]),r("div",Zb," Completed "+b(M(Z.lastPracticedAt)),1)]))),128))])],64)):j("",!0)])):j("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(p(),m("section",e_,[K[17]||(K[17]=r("h3",null,"My Classrooms",-1)),(p(!0),m(X,null,ie(d.value.classrooms,Z=>(p(),m("div",{key:Z,class:"classroom-row"},[r("span",t_,b(Z),1),r("button",{class:"leave-btn",disabled:T.value===Z,onClick:ee=>D(Z)},b(T.value===Z?"Leaving...":"Leave"),9,s_)]))),128))])):j("",!0),r("section",n_,[K[19]||(K[19]=r("h3",null,"Display Options",-1)),r("div",o_,[r("label",a_,[r("input",{type:"checkbox",checked:U(o).showLoadPbnOption.value,onChange:K[4]||(K[4]=Z=>U(o).setUIPref("showLoadPbnOption",Z.target.checked))},null,40,r_),K[18]||(K[18]=r("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),r("section",{class:"settings-section"},[K[20]||(K[20]=r("h3",null,"Data & Privacy",-1)),K[21]||(K[21]=r("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),r("button",{class:"remove-device-btn",onClick:B}," Remove account from this device "),K[22]||(K[22]=r("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):j("",!0)}}},i_=Se(l_,[["__scopeId","data-v-57179473"]]),c_={class:"banner-content"},u_={class:"assignment-info"},d_={class:"assignment-title"},f_={class:"assignment-name"},p_={class:"assignment-meta"},v_={class:"progress-text"},m_={class:"progress-bar"},h_={key:0,class:"complete-badge"},g_={class:"return-text"},y_={__name:"AssignmentBanner",setup(e){const t=ga(),s=E(()=>t.currentAssignment.value),n=E(()=>t.hasActiveAssignment.value),o=E(()=>t.assignmentProgress.value),a=E(()=>t.isAssignmentComplete.value),l=E(()=>t.inAssignmentMode.value),i=E(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const v=new Date(s.value.dueDate);return Math.ceil((v-new Date)/(1e3*60*60*24))}),u=E(()=>i.value===null?null:i.value<0?a.value?"Completed":"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),c=E(()=>i.value===null||a.value?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(v,h)=>{var g,y;return n.value&&l.value?(p(),m("div",{key:0,class:ce(["assignment-banner",{complete:a.value}])},[r("div",c_,[r("div",u_,[r("div",d_,[h[0]||(h[0]=r("span",{class:"assignment-label"},"Assignment:",-1)),r("span",f_,b((g=s.value)==null?void 0:g.name),1)]),r("div",p_,[r("span",v_,b(o.value.completed)+" of "+b(o.value.total)+" deals ("+b(o.value.percent)+"%) ",1),u.value?(p(),m("span",{key:0,class:ce(["due-text",c.value])},b(u.value),3)):j("",!0)])]),r("div",m_,[r("div",{class:ce(["progress-fill",{complete:a.value}]),style:st({width:`${o.value.percent}%`})},null,6)]),r("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(p(),m("div",h_," Complete! ")):j("",!0)],2)):s.value&&!l.value?(p(),m("div",{key:1,class:"return-banner",onClick:d},[h[1]||(h[1]=r("span",{class:"return-icon"},"",-1)),r("span",g_," Return to assignment: "+b((y=s.value)==null?void 0:y.name)+" ("+b(o.value.percent)+"% complete) ",1)])):j("",!0)}}},b_=Se(y_,[["__scopeId","data-v-ee6492bc"]]),__=["innerHTML"],w_={__name:"AnnouncementBanner",setup(e){const t=rl(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(l,i)=>{const u=s[i.toLowerCase()];return u?`<span class="ann-circle" style="background:${u.bg};color:${u.fg}"></span>`:l})}return(o,a)=>U(t).announcement.value&&U(t).dismissed.value!==U(t).announcement.value.id?(p(),m("div",{key:0,class:ce(["announcement-banner",U(t).announcement.value.type])},[r("span",{class:"announcement-text",innerHTML:n(U(t).announcement.value.message)},null,8,__),r("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=l=>U(t).dismiss()),title:"Dismiss"},"")],2)):j("",!0)}},S_=Se(w_,[["__scopeId","data-v-4b12409b"]]),C_={key:0,class:"status-content"},$_={key:1,class:"status-content offline"},k_={key:0,class:"badge"},x_={key:2,class:"status-content error"},A_={class:"status-text"},T_={key:0,class:"badge"},N_={key:3,class:"status-content pending"},E_={class:"status-text"},O_={key:4,class:"status-content synced"},I_={__name:"SyncStatus",setup(e){const t=Bu(),s=cs(),n=E(()=>s.pendingCount.value),o=E(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=E(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function l(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(u,c)=>(p(),m("div",{class:ce(["sync-status",a.value]),onClick:l},[U(t).isSyncing.value?(p(),m("div",C_,[...c[0]||(c[0]=[r("span",{class:"spinner"},null,-1),r("span",{class:"status-text"},"Syncing...",-1)])])):U(t).isOffline.value?(p(),m("div",$_,[c[1]||(c[1]=r("span",{class:"icon"},"",-1)),c[2]||(c[2]=r("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),m("span",k_,b(n.value),1)):j("",!0)])):U(t).hasError.value?(p(),m("div",x_,[c[3]||(c[3]=r("span",{class:"icon"},"",-1)),r("span",A_,b(o.value),1),n.value>0?(p(),m("span",T_,b(n.value),1)):j("",!0),r("button",{class:"retry-btn",onClick:nt(i,["stop"])},"Retry")])):n.value>0?(p(),m("div",N_,[c[4]||(c[4]=r("span",{class:"icon"},"",-1)),r("span",E_,b(n.value)+" pending",1)])):(p(),m("div",O_,[...c[5]||(c[5]=[r("span",{class:"icon"},"",-1),r("span",{class:"status-text"},"Synced",-1)])]))],2))}},P_=Se(I_,[["__scopeId","data-v-8457149a"]]),Uu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function D_(e){return Uu.find(t=>t.path===e)||null}Uu.reduce((e,t)=>e+t.dealCount,0);const Yn=36e5;function ki(e){if(!e||e.length===0)return"untried";const t=[...e].sort((f,d)=>f.ts-d.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(f=>!f.correct&&n.ts-f.ts<Yn),l=t.slice(-5),i=l.filter(f=>f.correct).length,u=l.length-i;return a&&i/l.length>=.8&&u<=1?"mastered":l.filter(f=>f.correct?!t.filter(v=>v.ts<f.ts).reverse().find(v=>!v.correct&&f.ts-v.ts<Yn):!1).length>=1?"progressing":"struggling"}function R_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const l=a.deal_number;n[a.skill_path][l]||(n[a.skill_path][l]=[]),n[a.skill_path][l].push({correct:a.correct,ts:new Date(a.timestamp),board_result:a.board_result})}),Object.entries(n).map(([a,l])=>{var T,D;const i=Object.keys(l).map(Number).sort((B,M)=>B-M);let u=0,c=0,f=0;i.forEach(B=>{const M=ki(l[B]);M==="mastered"?u++:M==="progressing"?c++:f++});const d=i.length,v=[];i.forEach(B=>{l[B].forEach(M=>v.push({...M,dealNum:B}))}),v.sort((B,M)=>B.ts-M.ts);const h=2*Yn,g=i.map(B=>{var Ae;const M=l[B].slice().sort((de,ve)=>de.ts-ve.ts),z=ki(M),K=((Ae=M[M.length-1])==null?void 0:Ae.correct)??!1,fe=M.map((de,ve)=>{if(de.board_result==="corrected")return{ts:de.ts,y:.5,correct:de.correct};if(de.board_result==="failed")return{ts:de.ts,y:0,correct:!1};if(de.correct){const Z=M.slice(0,ve).reverse().find(ee=>(ee.board_result?ee.board_result!=="correct":!ee.correct)&&de.ts-ee.ts<Yn);return{ts:de.ts,y:Z?.75:1,correct:!0}}else{const Z=M.slice(ve+1).find(ee=>ee.correct&&ee.ts-de.ts<Yn);return{ts:de.ts,y:Z?.5:0,correct:!1}}}),me=5*60*1e3,pe=fe.map(de=>({...de,vts:de.ts.getTime(),rawTs:de.ts.getTime()}));let ye=0;for(;ye<pe.length;){let de=ye;for(;de+1<pe.length&&pe[de+1].vts-pe[de].vts<me;)de++;if(de>ye){const ve=pe[de].vts-pe[ye].vts,Z=Math.max(ve,h),ee=ve>0?Z/ve:1,ne=pe[ye].vts;for(let Q=ye;Q<=de;Q++)pe[Q].vts=ne+(pe[Q].vts-ne)*ee}ye=de+1}return{dealNum:B,status:z,lastCorrect:K,points:pe}}),y=g.flatMap(B=>B.points.map(M=>M.rawTs)),k=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-k||1;g.forEach(B=>{B.points=B.points.map(M=>({...M,x:(M.rawTs-k)/_}))});const w=(()=>{const B=Object.values(l);if(B.length===0)return 0;const M=B.reduce((K,fe)=>{const me=fe.slice(-5);return K+me.filter(pe=>pe.correct).length},0),z=B.reduce((K,fe)=>K+Math.min(fe.length,5),0);return z>0?Math.round(M/z*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:d,mastered:u,progressing:c,struggling:f,totalBoards:t[a]??d,totalAttempts:v.length,recentRate:w,boardLines:g,firstActivity:(T=v[0])==null?void 0:T.ts,lastActivity:(D=v[v.length-1])==null?void 0:D.ts}}).sort((a,l)=>(l.lastActivity||0)-(a.lastActivity||0))}function L_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=D_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const l=Qc(o);n[o]=l.name}}return{lessonTotals:s,lessonNames:n}}const tn={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function Fu(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const B_={key:0,class:"sparkline-empty"},M_=["width","height"],U_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],F_=["d","stroke"],j_=["cx","cy","r","fill"],H_=5,W_=2.5,K_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=E(()=>t.width-n.l-n.r),a=E(()=>t.height-n.t-n.b),l=E(()=>{const d=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),v=Math.min(...d),h=Math.max(...d);return{min:v,max:h,span:h-v||1}});function i(d){return n.t+(1-d)*a.value}function u(d,v){const h=v>=.9?1:v>0?.5:0;return{px:n.l+(d-l.value.min)/l.value.span*o.value,py:n.t+(1-h)*a.value,yMapped:h}}const c=E(()=>t.boardLines.map(d=>{const v=tn[d.status]||"#6b7280",h=d.points.filter(y=>y.y!==.75).map(y=>u(y.x,y.y)),g=h.length>=2?h.map((y,k)=>`${k===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:v,pts:h,pathD:g}})),f=E(()=>{const d=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...u(y.x,y.y),y:y.y}))),v=new Array(d.length).fill(!1),h=[];return d.forEach((g,y)=>{if(v[y])return;const k=[g];v[y]=!0,d.forEach((T,D)=>{if(v[D])return;const B=T.px-g.px,M=T.py-g.py;Math.sqrt(B*B+M*M)<H_&&(k.push(T),v[D]=!0)});const $=k.reduce((T,D)=>T+D.px,0)/k.length,_=k.reduce((T,D)=>T+D.py,0)/k.length,w=k.sort((T,D)=>D.yMapped-T.yMapped)[0].yMapped;h.push({px:$,py:_,y:w,n:k.length})}),h});return(d,v)=>!e.boardLines||e.boardLines.length===0?(p(),m("div",B_," No data ")):(p(),m("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(p(),m(X,null,ie(s,h=>r("line",{key:h,x1:n.l,y1:i(h),x2:n.l+o.value,y2:i(h),stroke:h===.5?"#d1d5db":"#e5e7eb","stroke-width":h===.5?1:.5,"stroke-dasharray":h===.5?"3,3":"none"},null,8,U_)),64)),(p(!0),m(X,null,ie(c.value,(h,g)=>je((p(),m("path",{key:"line-"+g,d:h.pathD,fill:"none",stroke:h.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,F_)),[[ap,h.pts.length>=2]])),128)),(p(!0),m(X,null,ie(f.value,(h,g)=>(p(),m("circle",{key:"bubble-"+g,cx:h.px,cy:h.py,r:W_*Math.sqrt(h.n),fill:U(Fu)(h.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,j_))),128))],8,M_))}},V_=Se(K_,[["__scopeId","data-v-a14e2bb7"]]),G_={class:"details-header"},z_={class:"details-title"},J_={class:"details-subtitle"},Y_=["viewBox","height"],q_=["x","y","fill"],X_=["y","width","height","fill","fill-opacity"],Q_=["x","y","fill"],Z_=["x1","y1","x2","y2","stroke-dasharray"],e1=["x","y"],t1=["cx","cy","fill","onClick"],s1={key:0,class:"details-activity"},n1={class:"stats-row"},o1={class:"stat-value"},a1={class:"stat-label"},r1=["viewBox"],l1=["x","y","width","height"],i1={class:"activity-dates"},c1={class:"details-legend"},La=7,xi=.3,Ba=110,Es=560,Xt=28,Ma=40,Ai=36e5,$t=864e5,u1={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close","dot-click"],setup(e,{emit:t}){const s=e,n=t,o={t:16,r:20,b:40,l:Ba},a=E(()=>{const w=new Set(s.lesson.boardLines.map(D=>D.dealNum)),T=s.lesson.totalBoards??Math.max(...w);return Array.from({length:T},(D,B)=>B+1)}),l=E(()=>a.value.length*Xt),i=E(()=>Es+o.l+o.r),u=E(()=>l.value+o.t+o.b),c=E(()=>new Set(s.lesson.boardLines.map(w=>w.dealNum)));function f(w){return c.value.has(w)}function d(w){const T=s.lesson.boardLines.find(D=>D.dealNum===w);return T?tn[T.status]||"#6b7280":"#d1d5db"}const v=E(()=>{const w=s.rawData.filter(ee=>ee.skill_path===s.lesson.path),T=a.value,D=w.map(ee=>{const ne=new Date(ee.timestamp).getTime(),Q=ee.deal_number,x=T.indexOf(Q);return{rawTs:ne,dealNum:Q,boardIdx:x,correct:ee.correct,board_result:ee.board_result,y:ee.correct?1:0}}),B={};D.forEach(ee=>{B[ee.dealNum]||(B[ee.dealNum]=[]),B[ee.dealNum].push(ee)});for(const ee of Object.values(B))ee.sort((ne,Q)=>ne.rawTs-Q.rawTs),ee.forEach((ne,Q)=>{if(ne.board_result==="corrected"){ne.y=.5;return}if(ne.board_result==="failed"){ne.y=0;return}if(ne.correct){const x=ee.slice(0,Q).reverse().find(C=>(C.board_result?C.board_result!=="correct":!C.correct)&&ne.rawTs-C.rawTs<Ai);ne.y=x?.75:1}else{const x=ee.slice(Q+1).find(C=>C.correct&&C.rawTs-ne.rawTs<Ai);ne.y=x?.5:0}});if(D.length===0)return[];const M=D.map(ee=>ee.rawTs),z=Math.min(...M),K=Math.max(...M),fe=Math.floor(z/$t)*$t,pe=(Math.floor(K/$t)+1)*$t-1-fe||1,ye=ee=>o.l+(ee.rawTs-fe)/pe*Es,Ae=ee=>o.t+ee*Xt+Xt/2,de=La*2*(1-xi),ve=La*2*(1-xi),Z=D.map(ee=>({...ee,px:ye(ee),py:Ae(ee.boardIdx)}));return T.forEach(ee=>{const ne=Z.filter(x=>x.dealNum===ee),Q={};ne.forEach(x=>{const C=x.rawTs;Q[C]||(Q[C]=[]),Q[C].push(x)}),Object.values(Q).forEach(x=>{if(x.length<2)return;const C=x[0].py;x.forEach((q,be)=>{q.py=C+(be-(x.length-1)/2)*ve})})}),T.forEach(ee=>{const ne=Z.filter(C=>C.dealNum===ee).sort((C,q)=>C.px-q.px),Q=[];let x=0;for(;x<ne.length;){let C=x;for(;C+1<ne.length&&ne[C+1].px-ne[x].px<de;)C++;Q.push({start:x,end:C}),x=C+1}Q.forEach((C,q)=>{const be=C.end-C.start+1;if(be===1)return;const xe=(be-1)*de;let $e;q===0?$e=ne[C.start].px:q===Q.length-1?$e=ne[C.end].px-xe:$e=(ne[C.start].px+ne[C.end].px)/2-xe/2;for(let W=0;W<be;W++)ne[C.start+W].px=$e+W*de})}),Z}),h=E(()=>[...v.value].sort((w,T)=>w.y-T.y)),g=E(()=>{const w=v.value;if(w.length===0)return[];const T=w.map(me=>me.rawTs),D=Math.min(...T),B=Math.max(...T),M=Math.floor(D/$t)*$t,K=(Math.floor(B/$t)+1)*$t-1-M||1,fe=5;return Array.from({length:fe},(me,pe)=>{const ye=pe/(fe-1),Ae=new Date(M+ye*K);return{x:o.l+ye*Es,label:Ae.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+Ae.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),y=E(()=>{const w=v.value;if(w.length===0)return null;const T={};w.forEach(pe=>{const ye=Math.floor(pe.rawTs/$t);T[ye]=(T[ye]||0)+1});const D=Object.keys(T).map(Number).sort();if(D.length===0)return null;const B=D[0],M=D[D.length-1],z=M-B+1,K=Math.max(...Object.values(T)),fe=Math.max(2,Es/z-1);return{bars:D.map(pe=>({dayKey:pe,x:(pe-B)/z*Es,h:T[pe]/K*Ma,w:fe,count:T[pe],dateLabel:new Date(pe*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Es,firstLabel:new Date(B*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(M*$t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),k=E(()=>{const w=v.value,T={};return w.forEach(D=>{const B=Math.floor(D.rawTs/$t);T[B]=!0}),[{label:"Days active",value:Object.keys(T).length},{label:"Boards tried",value:s.lesson.tried},{label:"Observations",value:w.length}]}),$=[{color:"#10b981",label:"Clean correct"},{color:"#3b82f6",label:"Recent correct (after fail within 1 hr)"},{color:"#f59e0b",label:"Corrected (errors fixed within board)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function _(w){return new Date(w).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(w,T)=>(p(),m("div",{class:"details-overlay",onClick:T[2]||(T[2]=nt(D=>w.$emit("close"),["self"]))},[r("div",{class:"details-panel",onClick:T[1]||(T[1]=nt(()=>{},["stop"]))},[r("div",G_,[r("div",null,[r("h2",z_,b(e.lesson.name),1),r("p",J_,b(e.lesson.tried)+" boards  "+b(e.lesson.totalAttempts)+" attempts ",1)]),r("button",{class:"details-close-btn",onClick:T[0]||(T[0]=D=>w.$emit("close"))}," close")]),(p(),m("svg",{viewBox:`0 0 ${i.value} ${u.value}`,width:"100%",height:u.value,class:"details-chart"},[(p(!0),m(X,null,ie(a.value,(D,B)=>(p(),m("rect",{key:"bg-"+D,x:o.l,y:o.t+B*Xt,width:Es,height:Xt,fill:B%2===0?"#ffffff":"#f9fafb"},null,8,q_))),128)),(p(!0),m(X,null,ie(a.value,(D,B)=>(p(),m("g",{key:"label-"+D},[r("rect",{x:2,y:o.t+B*Xt+3,width:Ba-14,height:Xt-6,rx:"3",fill:d(D),"fill-opacity":f(D)?.12:.05},null,8,X_),r("text",{x:Ba-16,y:o.t+B*Xt+Xt/2+4,"text-anchor":"end","font-size":"13",fill:d(D),"font-family":"monospace"}," Board "+b(D)+b(f(D)?"":" "),9,Q_)]))),128)),(p(!0),m(X,null,ie(g.value,(D,B)=>(p(),m("line",{key:"grid-"+B,x1:D.x,y1:o.t,x2:D.x,y2:o.t+l.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":B===0||B===g.value.length-1?"none":"3,4"},null,8,Z_))),128)),(p(!0),m(X,null,ie(g.value,(D,B)=>(p(),m("text",{key:"tick-"+B,x:D.x,y:o.t+l.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},b(D.label),9,e1))),128)),(p(!0),m(X,null,ie(h.value,(D,B)=>(p(),m("circle",{key:"dot-"+B,cx:D.px,cy:D.py,r:La,fill:U(Fu)(D.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92",class:"obs-dot",onClick:nt(M=>n("dot-click",{rawTs:D.rawTs,dealNum:D.dealNum,correct:D.correct,event:M}),["stop"])},[r("title",null,"Board "+b(D.dealNum)+"  "+b(D.correct?"Correct":"Incorrect")+"  "+b(_(D.rawTs)),1)],8,t1))),128))],8,Y_)),y.value?(p(),m("div",s1,[r("div",n1,[(p(!0),m(X,null,ie(k.value,D=>(p(),m("div",{class:"stat-item",key:D.label},[r("div",o1,b(D.value),1),r("div",a1,b(D.label),1)]))),128))]),(p(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.barW} ${Ma}`,class:"activity-chart"},[(p(!0),m(X,null,ie(y.value.bars,D=>(p(),m("rect",{key:D.dayKey,x:D.x,y:Ma-D.h,width:D.w,height:D.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[r("title",null,b(D.dateLabel)+": "+b(D.count)+" observations",1)],8,l1))),128))],8,r1)),r("div",i1,[r("span",null,b(y.value.firstLabel),1),r("span",null,b(y.value.lastLabel),1)])])):j("",!0),r("div",c1,[(p(),m(X,null,ie($,D=>r("span",{key:D.label,class:"legend-item"},[r("span",{class:"legend-dot",style:st({backgroundColor:D.color})},null,4),Te(" "+b(D.label),1)])),64))])])]))}},d1=Se(u1,[["__scopeId","data-v-2176fcbb"]]),f1={class:"obs-header"},p1={class:"obs-header-left"},v1={class:"obs-id"},m1={class:"obs-header-right"},h1={class:"timestamp"},g1={class:"obs-body"},y1={class:"obs-col"},b1={class:"card"},_1={class:"hands-grid"},w1={class:"deal-meta-top"},S1={class:"meta-row"},C1={class:"meta-value"},$1={class:"meta-row"},k1={class:"meta-value"},x1={class:"meta-row"},A1={class:"meta-value"},T1={class:"meta-row"},N1={class:"meta-value"},E1={class:"compass-north"},O1={class:"seat-label"},I1={key:0,class:"you-tag"},P1={class:"cards"},D1={key:1,class:"hidden-hand"},R1={class:"seat-label"},L1={key:0,class:"you-tag"},B1={class:"cards"},M1={key:1,class:"hidden-hand"},U1={class:"seat-label"},F1={key:0,class:"you-tag"},j1={class:"cards"},H1={key:1,class:"hidden-hand"},W1={class:"deal-meta-bottom"},K1={class:"meta-row"},V1={class:"meta-contract"},G1={class:"compass-south"},z1={class:"seat-label"},J1={key:0,class:"you-tag"},Y1={class:"cards"},q1={key:1,class:"hidden-hand"},X1={class:"obs-col"},Q1={class:"card"},Z1={class:"auction-header"},e0={key:0,class:"split-cell"},t0={class:"pill-expected"},s0={key:1,class:"split-cell"},n0={class:"pill-expected"},o0={key:0,class:"pill-student"},a0={key:2,class:"auction-bid"},r0={key:0,class:"prompts-list"},l0={class:"prompt-num"},i0={key:0,class:"prompt-detail"},c0={class:"pill-expected-sm"},u0={class:"pill-student-sm"},d0={key:1,class:"prompt-ok"},f0={key:1,class:"prompt-detail"},p0={class:"pill-expected-sm"},v0={class:"pill-student-sm"},m0={key:1,class:"prompt-ok"},h0={key:2,class:"prompt-time"},g0={key:1,class:"prompt-meta"},y0={class:"prompt-meta-auction"},b0={key:2,class:"auction-legend"},_0={key:0,class:"legend-item"},w0={key:3,class:"auction-legend"},S0={key:0,class:"legend-item"},C0={class:"card"},$0={class:"info-grid"},k0={class:"info-item"},x0={class:"info-value"},A0={class:"info-item"},T0={class:"info-value"},N0={class:"info-item full-width"},E0={class:"info-item"},O0={class:"info-value"},I0={class:"info-item"},P0={class:"info-value"},D0={class:"info-item full-width"},R0={class:"info-value mono"},L0={__name:"ObservationViewer",props:{obs:{type:Object,required:!0},initialX:{type:Number,default:100},initialY:{type:Number,default:100},zIndex:{type:Number,default:3e3}},emits:["close","focus"],setup(e,{emit:t}){const s=e,n=t,o=O(s.initialX),a=O(s.initialY),l=O(window.innerWidth<=680);let i=!1,u=0,c=0;function f(x){return x.touches&&x.touches.length>0?{x:x.touches[0].clientX,y:x.touches[0].clientY}:{x:x.clientX,y:x.clientY}}function d(x){if(l.value){x.stopPropagation();return}i=!0;const{x:C,y:q}=f(x);u=C-o.value,c=q-a.value,document.addEventListener("mousemove",v),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("touchend",h),n("focus")}function v(x){if(!i)return;x.preventDefault();const{x:C,y:q}=f(x);o.value=C-u,a.value=q-c}function h(){i=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)}Lr(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)});const g=E(()=>s.obs.deal||{}),y=E(()=>s.obs.bid_prompt||{}),k=E(()=>s.obs.result||{}),$=E(()=>k.value.correct),_=E(()=>g.value.hands||{}),w=E(()=>g.value.student_seat),T=E(()=>y.value.prompt_index===-1||y.value.expected_bid==="BOARD"),D=E(()=>s.obs.prompts||[]),B=E(()=>D.value.length>0),M=E(()=>B.value&&K.value.corrected>0||s.obs.board_result==="corrected"),z=E(()=>{if(!B.value)return{};const x=de.indexOf(g.value.dealer),C={};for(const be of D.value){if(be.type!=="bid"||!be.auction_so_far)continue;const xe=x+be.auction_so_far.length;C[xe]||(C[xe]=[]),C[xe].push(be)}const q={};for(const[be,xe]of Object.entries(C)){const $e=xe.find(se=>!se.correct);if(!$e)continue;const W=xe.some(se=>se.correct);q[be]={expected:$e.expected_bid,student:$e.student_bid,correct:!1,corrected:W}}return q}),K=E(()=>{const x=D.value,C=new Map;for(const W of x){const se=W.type==="bid"?`bid-${W.prompt_index}`:`card-${x.indexOf(W)}`;C.has(se)||C.set(se,[]),C.get(se).push(W)}let q=C.size,be=0,xe=0;for(const W of C.values()){const se=W.some(ue=>!ue.correct),oe=W.some(ue=>ue.correct);se&&(be++,oe&&xe++)}const $e=x.reduce((W,se)=>W+(se.time_ms||0),0);return{total:q,wrong:be,corrected:xe,totalTime:$e}}),fe=E(()=>y.value.expected_bid),me=E(()=>k.value.student_bid),pe=E(()=>y.value.auction_so_far||[]),ye=E(()=>((s.obs.observation_id||s.obs.id||"")+"").slice(0,8)+""),Ae=E(()=>s.obs.timestamp?new Date(s.obs.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),de=["W","N","E","S"],ve=E(()=>{const x=g.value.full_auction,C=(typeof x=="string"?x:Array.isArray(x)?x.join(" "):"").split(" ").filter(Boolean),q=[];for(const xe of C){const $e=xe.toUpperCase();$e==="AP"||$e==="ALL"?q.push("Pass","Pass","Pass"):q.push(xe)}const be=de.indexOf(g.value.dealer);return[...Array(Math.max(0,be)).fill(null),...q]}),Z=E(()=>de.indexOf(g.value.dealer)+pe.value.length),ee=E(()=>{const x=[];for(let C=0;C<ve.value.length;C+=4)x.push(ve.value.slice(C,C+4));return x});function ne(x){return!x||x<=0?"":x<1e3?x+"ms":(x/1e3).toFixed(1)+"s"}function Q(x){if(!x)return null;if(typeof x=="object"&&x.spades!==void 0)return[{suit:"",cards:(x.spades||[]).join(""),color:"black"},{suit:"",cards:(x.hearts||[]).join(""),color:"red"},{suit:"",cards:(x.diamonds||[]).join(""),color:"red"},{suit:"",cards:(x.clubs||[]).join(""),color:"black"}];if(typeof x!="string")return null;const C=x.split(".");if(C.length<4)return null;const[q,be,xe,$e]=C;return[{suit:"",cards:q,color:"black"},{suit:"",cards:be,color:"red"},{suit:"",cards:xe,color:"red"},{suit:"",cards:$e,color:"black"}]}return(x,C)=>(p(),m("div",{class:ce(["obs-viewer",{"obs-viewer--mobile":l.value}]),style:st(l.value?{zIndex:e.zIndex}:{left:o.value+"px",top:a.value+"px",zIndex:e.zIndex}),onMousedown:nt(d,["prevent"]),onTouchstart:nt(d,["prevent"])},[r("div",f1,[r("div",p1,[C[3]||(C[3]=r("span",{class:"suit-icon"},"",-1)),C[4]||(C[4]=r("span",{class:"obs-title"},"Observation Detail",-1)),r("span",v1,b(ye.value),1)]),r("div",m1,[r("span",h1,b(Ae.value),1),r("span",{class:ce(["result-badge",M.value?"corrected":$.value?"correct":"incorrect"])},b(M.value?" Corrected":$.value?" Correct":" Incorrect"),3),r("button",{class:"close-btn",onClick:C[0]||(C[0]=nt(q=>x.$emit("close"),["stop"])),onTouchstart:C[1]||(C[1]=nt(()=>{},["stop"])),onTouchend:C[2]||(C[2]=nt(q=>x.$emit("close"),["stop","prevent"])),title:"Close"},"",32)])]),r("div",g1,[r("div",y1,[r("div",b1,[C[17]||(C[17]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Te(" Hands")],-1)),r("div",_1,[r("div",w1,[r("div",S1,[C[5]||(C[5]=r("span",{class:"meta-label"},"Lesson",-1)),r("span",C1,b(g.value.subfolder),1)]),r("div",$1,[C[6]||(C[6]=r("span",{class:"meta-label"},"Deal",-1)),r("span",k1,"#"+b(g.value.deal_number),1)]),r("div",x1,[C[7]||(C[7]=r("span",{class:"meta-label"},"Dealer",-1)),r("span",A1,b(g.value.dealer),1)]),r("div",T1,[C[8]||(C[8]=r("span",{class:"meta-label"},"Vul",-1)),r("span",N1,b(g.value.vulnerability),1)])]),r("div",E1,[r("div",{class:ce(["hand-cell",{student:w.value==="N"}])},[r("div",O1,[C[9]||(C[9]=Te("N ",-1)),w.value==="N"?(p(),m("span",I1,"YOU")):j("",!0)]),Q(_.value.north)?(p(!0),m(X,{key:0},ie(Q(_.value.north),q=>(p(),m("div",{key:q.suit,class:"holding-row"},[r("span",{class:ce(["suit-pip",q.color])},b(q.suit),3),r("span",P1,b(q.cards||""),1)]))),128)):(p(),m("span",D1,"Hidden"))],2)]),C[14]||(C[14]=r("div",null,null,-1)),r("div",{class:ce(["hand-cell",{student:w.value==="W"}])},[r("div",R1,[C[10]||(C[10]=Te("W ",-1)),w.value==="W"?(p(),m("span",L1,"YOU")):j("",!0)]),Q(_.value.west)?(p(!0),m(X,{key:0},ie(Q(_.value.west),q=>(p(),m("div",{key:q.suit,class:"holding-row"},[r("span",{class:ce(["suit-pip",q.color])},b(q.suit),3),r("span",B1,b(q.cards||""),1)]))),128)):(p(),m("span",M1,"Hidden"))],2),C[15]||(C[15]=so('<div class="compass-center" data-v-274941c4><div class="compass-rose" data-v-274941c4><span class="cr-n" data-v-274941c4>N</span><span class="cr-w" data-v-274941c4>W</span><span class="cr-e" data-v-274941c4>E</span><span class="cr-s" data-v-274941c4>S</span></div></div>',1)),r("div",{class:ce(["hand-cell",{student:w.value==="E"}])},[r("div",U1,[C[11]||(C[11]=Te("E ",-1)),w.value==="E"?(p(),m("span",F1,"YOU")):j("",!0)]),Q(_.value.east)?(p(!0),m(X,{key:0},ie(Q(_.value.east),q=>(p(),m("div",{key:q.suit,class:"holding-row"},[r("span",{class:ce(["suit-pip",q.color])},b(q.suit),3),r("span",j1,b(q.cards||""),1)]))),128)):(p(),m("span",H1,"Hidden"))],2),r("div",W1,[r("div",K1,[C[12]||(C[12]=r("span",{class:"meta-label"},"Contract",-1)),r("span",V1,b(g.value.contract)+" by "+b(g.value.declarer),1)])]),r("div",G1,[r("div",{class:ce(["hand-cell",{student:w.value==="S"}])},[r("div",z1,[C[13]||(C[13]=Te("S ",-1)),w.value==="S"?(p(),m("span",J1,"YOU")):j("",!0)]),Q(_.value.south)?(p(!0),m(X,{key:0},ie(Q(_.value.south),q=>(p(),m("div",{key:q.suit,class:"holding-row"},[r("span",{class:ce(["suit-pip",q.color])},b(q.suit),3),r("span",Y1,b(q.cards||""),1)]))),128)):(p(),m("span",q1,"Hidden"))],2)]),C[16]||(C[16]=r("div",null,null,-1))])])]),r("div",X1,[r("div",Q1,[C[29]||(C[29]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Te(" Auction")],-1)),r("div",Z1,[(p(),m(X,null,ie(["W","N","E","S"],q=>r("span",{key:q,class:"auction-dir"},b(q),1)),64))]),(p(!0),m(X,null,ie(ee.value,(q,be)=>(p(),m("div",{key:be,class:"auction-row"},[(p(!0),m(X,null,ie(q,(xe,$e)=>(p(),m(X,{key:$e},[B.value&&z.value[be*4+$e]?(p(),m("div",e0,[r("span",t0,b(z.value[be*4+$e].expected),1),r("span",{class:ce(z.value[be*4+$e].corrected?"pill-corrected":"pill-student")},b(z.value[be*4+$e].student),3)])):!T.value&&!B.value&&be*4+$e===Z.value?(p(),m("div",s0,[r("span",n0,b(fe.value),1),$.value?j("",!0):(p(),m("span",o0,b(me.value),1))])):(p(),m("span",a0,b(xe||""),1))],64))),128))]))),128)),B.value?(p(),m("div",r0,[(p(!0),m(X,null,ie(D.value,(q,be)=>(p(),m("div",{key:be,class:ce(["prompt-row",q.correct?"prompt-correct":"prompt-wrong"])},[r("span",l0,"#"+b(be+1),1),q.type==="bid"?(p(),m("span",i0,[C[19]||(C[19]=Te(" Expected ",-1)),r("span",c0,b(q.expected_bid),1),q.correct?(p(),m("span",d0,"")):(p(),m(X,{key:0},[C[18]||(C[18]=Te(" got ",-1)),r("span",u0,b(q.student_bid),1)],64))])):q.type==="card"?(p(),m("span",f0,[C[21]||(C[21]=Te(" Expected ",-1)),r("span",p0,b(q.expected_card),1),q.correct?(p(),m("span",m0,"")):(p(),m(X,{key:0},[C[20]||(C[20]=Te(" got ",-1)),r("span",v0,b(q.student_card),1)],64))])):j("",!0),q.time_ms>0?(p(),m("span",h0,b(ne(q.time_ms)),1)):j("",!0)],2))),128))])):T.value?(p(),m("div",g0,[C[22]||(C[22]=r("span",{class:"prompt-meta-label"},"Board summary",-1)),C[23]||(C[23]=r("span",{class:"prompt-meta-sep"},"",-1)),r("span",y0,b($.value?"All prompts answered correctly":"Student made errors on this board"),1)])):j("",!0),!T.value&&!B.value?(p(),m("div",b0,[C[25]||(C[25]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Te(" Expected")],-1)),$.value?j("",!0):(p(),m("span",_0,[...C[24]||(C[24]=[r("span",{class:"legend-dot red"},null,-1),Te(" Student bid",-1)])])),C[26]||(C[26]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot gray"}),Te(" After this point")],-1))])):B.value?(p(),m("div",w0,[C[28]||(C[28]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Te(" Expected")],-1)),D.value.some(q=>!q.correct)?(p(),m("span",S0,[...C[27]||(C[27]=[r("span",{class:"legend-dot red"},null,-1),Te(" Student response",-1)])])):j("",!0)])):j("",!0)]),r("div",C0,[C[36]||(C[36]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Te(" Result & Meta")],-1)),r("div",$0,[B.value?(p(),m(X,{key:0},[r("div",k0,[C[30]||(C[30]=r("span",{class:"info-label"},"Prompts",-1)),r("span",x0,b(K.value.total),1)]),r("div",A0,[C[31]||(C[31]=r("span",{class:"info-label"},"Total Time",-1)),r("span",T0,b(K.value.totalTime>0?ne(K.value.totalTime):"n/a"),1)]),r("div",N0,[C[32]||(C[32]=r("span",{class:"info-label"},"Result",-1)),r("span",{class:"info-value",style:st({color:K.value.wrong===0?"var(--green)":"var(--red)"})},b(K.value.wrong===0?"All correct":`${K.value.wrong} error${K.value.wrong>1?"s":""}`)+b(K.value.corrected>0?`, ${K.value.corrected} fixed`:""),5)])],64)):(p(),m(X,{key:1},[r("div",E0,[C[33]||(C[33]=r("span",{class:"info-label"},"Attempt #",-1)),r("span",O0,b(k.value.attempt_number),1)]),r("div",I0,[C[34]||(C[34]=r("span",{class:"info-label"},"Time Taken",-1)),r("span",P0,b(k.value.time_taken_ms===0?"n/a":k.value.time_taken_ms+" ms"),1)])],64)),r("div",D0,[C[35]||(C[35]=r("span",{class:"info-label"},"Skill Path",-1)),r("span",R0,b(e.obs.skill_path),1)])])])])])],38))}},B0=Se(L0,[["__scopeId","data-v-274941c4"]]),M0=30,U0={__name:"ObservationPopupManager",setup(e,{expose:t}){const s=O([]);let n=0,o=3e3;function a(c,f){const d=s.value.length*M0,v=f?Math.min(f.clientX+20+d,window.innerWidth-700):60+d,h=f?Math.min(f.clientY-40+d,window.innerHeight-400):60+d;o++,s.value.push({id:n++,obs:c,x:Math.max(10,v),y:Math.max(10,h),zIndex:o})}function l(c){s.value=s.value.filter(f=>f.id!==c)}function i(c){o++;const f=s.value.find(d=>d.id===c);f&&(f.zIndex=o)}function u(){s.value=[]}return t({openObservation:a,closeAll:u}),(c,f)=>(p(),Fe(Yd,{to:"body"},[(p(!0),m(X,null,ie(s.value,d=>(p(),Fe(B0,{key:d.id,obs:d.obs,"initial-x":d.x,"initial-y":d.y,"z-index":d.zIndex,onClose:v=>l(d.id),onFocus:v=>i(d.id)},null,8,["obs","initial-x","initial-y","z-index","onClose","onFocus"]))),128))]))}},F0={class:"student-progress-panel"},j0={key:0,class:"sp-empty"},H0={class:"sp-header"},W0={class:"sp-header-row"},K0={key:0,class:"sp-name-badge"},V0={class:"sp-meta"},G0={key:0,class:"sp-activity-chart"},z0={class:"sp-activity-header"},J0={class:"sp-activity-meta"},Y0={class:"sp-activity-body"},q0={class:"sp-activity-svg-wrap"},X0=["viewBox"],Q0=["x"],Z0=["x","y"],ew=["x1","x2","y2"],tw=["x","y","width","height","fill"],sw=["x","y"],nw=["x","y"],ow={class:"sp-activity-legend"},aw={class:"sp-legend"},rw={class:"sp-grid"},lw=["onClick"],iw={class:"sp-card-header"},cw={class:"sp-card-info"},uw={class:"sp-card-name"},dw={class:"sp-card-meta"},fw={class:"sp-card-rate"},pw={class:"sp-card-sparkline"},vw={class:"sp-mastery"},mw={class:"sp-mastery-track"},hw=["title"],gw={class:"sp-mastery-legend"},yw={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""},studentId:{type:String,default:""}},setup(e){const t=e,s=O(null),n=O(null),o=_n(),a=E(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:k,lessonNames:$}=L_(t.observations);return R_(t.observations,k,$)}),l=E(()=>a.value.reduce((k,$)=>k+$.tried,0)),i=E(()=>a.value.reduce((k,$)=>k+$.totalAttempts,0)),u=[{color:"#10b981",label:"Clean correct"},{color:"#f59e0b",label:"Corrected (errors fixed)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function c(k){return`hsl(${Math.round(k*360/a.value.length)}, 65%, 55%)`}function f(k){return k>=75?"#10b981":k>=50?"#f59e0b":"#f43f5e"}function d(k){return k?k.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function v(k){if(!k.firstActivity||!k.lastActivity)return null;const $=k.lastActivity-k.firstActivity,_=$/6e4,w=$/36e5,T=$/864e5;return _<90?`${Math.round(_)} min`:w<48?`${Math.round(w)} hr`:T<14?`${Math.round(T)} days`:`${Math.round(T/7)} wks`}async function h({rawTs:k,dealNum:$,correct:_,event:w}){if(n.value)if(t.studentId){const T=await o.findAndDecryptObservation(t.studentId,k,$,_);T?n.value.openObservation(T,w):console.warn("Observation decryption failed  teacher private key may be missing")}else{const T=t.observations.find(D=>{const B=new Date(D.timestamp).getTime();return Math.abs(B-k)<1e3&&D.deal_number===$&&D.correct===_});T&&n.value.openObservation(T,w)}}function g(k){const $=Math.max(0,(k.totalBoards||0)-k.tried),_=[{count:k.mastered,color:tn.mastered,label:"Mastered"},{count:k.progressing,color:tn.progressing,label:"Progressing"},{count:k.struggling,color:tn.struggling,label:"Struggling"},{count:$,color:tn.untried,label:"Untried"}].filter(T=>T.count>0),w=_.reduce((T,D)=>T+D.count,0);return _.forEach(T=>{T.pct=`${(T.count/w*100).toFixed(1)}%`}),_}const y=E(()=>{if(a.value.length===0)return null;const k=864e5,$=28,_=700,w=120,T=new Set,D=a.value.map(Ae=>{const de={};return Ae.boardLines.forEach(ve=>{ve.points.forEach(Z=>{const ee=Math.floor((Z.rawTs??0)/k);ee>0&&(de[ee]=(de[ee]||0)+1,T.add(ee))})}),de});if(T.size===0)return null;const B=[...T].sort(),M=B[0],z=B[B.length-1],K=z-M+1,fe=B.map(Ae=>D.reduce((de,ve)=>de+(ve[Ae]||0),0)),me=Math.max(...fe),pe=Math.max(1,_/K*.75);return{days:B.map(Ae=>{const de=$+(Ae-M)/K*_;let ve=w;const Z=[];return a.value.forEach((ee,ne)=>{const Q=D[ne][Ae]||0;if(!Q)return;const x=Q/me*w;ve-=x,Z.push({y:ve,h:x,count:Q,color:c(ne),name:ee.name})}),{dayKey:Ae,x:de,segments:Z,dateLabel:new Date(Ae*k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:me,barW:pe,barH:w,chartW:_,svgW:$+_,yAxisW:$,firstLabel:new Date(M*k).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(z*k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(k,$)=>(p(),m("div",F0,[a.value.length===0?(p(),m("div",j0,[...$[1]||($[1]=[r("p",null,"No practice data to display yet.",-1)])])):(p(),m(X,{key:1},[r("div",H0,[r("div",W0,[e.studentName?(p(),m("span",K0,b(e.studentName),1)):j("",!0),r("span",V0,b(a.value.length)+" lesson"+b(a.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),y.value?(p(),m("div",G0,[r("div",z0,[$[2]||($[2]=Te(" Daily practice activity ",-1)),r("span",J0,b(l.value)+" boards  "+b(i.value)+" observations ",1)]),r("div",Y0,[r("div",q0,[(p(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.svgW} ${y.value.barH+26}`,style:st({display:"block",height:y.value.barH+26+"px"})},[r("text",{x:y.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.maxCount),9,Q0),r("text",{x:y.value.yAxisW-3,y:y.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,Z0),r("line",{x1:y.value.yAxisW,y1:"0",x2:y.value.yAxisW,y2:y.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,ew),(p(!0),m(X,null,ie(y.value.days,_=>(p(),m("g",{key:_.dayKey},[(p(!0),m(X,null,ie(_.segments,(w,T)=>(p(),m("rect",{key:T,x:_.x,y:w.y,width:y.value.barW,height:w.h,fill:w.color,opacity:"0.85",rx:"1"},[r("title",null,b(w.name)+": "+b(w.count)+" on "+b(_.dateLabel),1)],8,tw))),128))]))),128)),r("text",{x:y.value.yAxisW,y:y.value.barH+18,"font-size":"10",fill:"#6b7280"},b(y.value.firstLabel),9,sw),r("text",{x:y.value.yAxisW+y.value.chartW,y:y.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.lastLabel),9,nw)],12,X0))]),r("div",ow,[(p(!0),m(X,null,ie(a.value,(_,w)=>(p(),m("span",{key:_.path,class:"sp-activity-legend-item"},[r("span",{class:"sp-legend-dot",style:st({backgroundColor:c(w)})},null,4),Te(" "+b(_.name),1)]))),128))])])])):j("",!0),r("div",aw,[(p(),m(X,null,ie(u,_=>r("span",{key:_.label,class:"sp-legend-item"},[r("span",{class:"sp-legend-dot",style:st({backgroundColor:_.color})},null,4),Te(" "+b(_.label),1)])),64)),$[3]||($[3]=r("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),r("div",rw,[(p(!0),m(X,null,ie(a.value,_=>(p(),m("div",{key:_.path,class:"sp-lesson-card",onClick:w=>s.value=_},[r("div",iw,[r("div",cw,[r("div",uw,b(_.name),1),r("div",dw,b(_.tried)+" boards  "+b(_.totalAttempts)+" attempts  last "+b(d(_.lastActivity))+b(v(_)?`  span ${v(_)}`:""),1)]),r("div",fw,[r("div",{class:"sp-rate-value",style:st({color:f(_.recentRate)})},b(_.recentRate)+"% ",5),$[4]||($[4]=r("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),r("div",pw,[ge(V_,{boardLines:_.boardLines,width:280,height:70},null,8,["boardLines"])]),r("div",vw,[r("div",mw,[(p(!0),m(X,null,ie(g(_),w=>(p(),m("div",{key:w.label,class:"sp-mastery-segment",style:st({width:w.pct,backgroundColor:w.color}),title:`${w.label}: ${w.count}`},null,12,hw))),128))]),r("div",gw,[(p(!0),m(X,null,ie(g(_),w=>(p(),m("span",{key:w.label,class:"sp-mastery-item"},[r("span",{class:"sp-legend-dot",style:st({backgroundColor:w.color})},null,4),Te(" "+b(w.count)+" "+b(w.label),1)]))),128))])]),$[5]||($[5]=r("div",{class:"sp-card-hint"},"details ",-1))],8,lw))),128))])],64)),s.value?(p(),Fe(d1,{key:2,lesson:s.value,rawData:e.observations,onClose:$[0]||($[0]=_=>s.value=null),onDotClick:h},null,8,["lesson","rawData"])):j("",!0),ge(U0,{ref_key:"popupManager",ref:n},null,512)]))}},ju=Se(yw,[["__scopeId","data-v-81e679f8"]]),bw={class:"progress-dashboard"},_w={class:"dashboard-header"},ww={key:0,class:"loading"},Sw={key:1,class:"error-state"},Cw={key:2,class:"empty-state"},$w={key:3,class:"dashboard-content"},kw={class:"dashboard-actions"},xw={__name:"ProgressDashboard",emits:["close"],setup(e){const t=Zr(),s=He(),n=E(()=>t.decryptedObservations.value),o=E(()=>n.value.length>0),a=E(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});_t(async()=>{await t.fetchProgress()});async function l(){await t.fetchProgress(!0)}return(i,u)=>(p(),m("div",bw,[r("header",_w,[u[3]||(u[3]=r("h2",null,"Student Progress",-1)),r("button",{class:"close-btn",onClick:u[0]||(u[0]=c=>i.$emit("close"))},"")]),U(t).isLoading.value?(p(),m("div",ww,[...u[4]||(u[4]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading your progress...",-1)])])):U(t).hasError.value?(p(),m("div",Sw,[r("p",null,"Failed to load progress: "+b(U(t).error.value),1),r("button",{onClick:l},"Try Again")])):o.value?(p(),m("div",$w,[ge(ju,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),r("div",kw,[r("button",{class:"secondary-btn",onClick:l},"Refresh Data"),r("button",{class:"primary-btn",onClick:u[2]||(u[2]=c=>i.$emit("close"))},"Continue Practicing")])])):(p(),m("div",Cw,[u[5]||(u[5]=r("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=r("p",null,"Complete some practice deals to see your progress here!",-1)),r("button",{class:"primary-btn",onClick:u[1]||(u[1]=c=>i.$emit("close"))},"Start Practicing")]))]))}},Aw=Se(xw,[["__scopeId","data-v-286a38c8"]]),Tw="test-user-mastery",Nw="test-classroom",Ew="Negative_Double",Ow="competitive_bidding/negative_double";let yr=0;function tt({boardNumber:e,correct:t,timestamp:s}){return yr++,{id:`mastery-test-${yr}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Tw,skill_path:Ow,correct:t,deal_subfolder:Ew,deal_number:e,classroom:Nw}}function wt(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function To(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Iw(){yr=0;const e=[];e.push(tt({boardNumber:2,correct:!0,timestamp:wt(5)}),tt({boardNumber:2,correct:!1,timestamp:wt(1)})),e.push(tt({boardNumber:3,correct:!1,timestamp:To(30)}),tt({boardNumber:3,correct:!0,timestamp:To(20)})),e.push(tt({boardNumber:4,correct:!1,timestamp:To(90)}),tt({boardNumber:4,correct:!0,timestamp:To(60)})),e.push(tt({boardNumber:5,correct:!1,timestamp:wt(10)}),tt({boardNumber:5,correct:!0,timestamp:wt(2)})),e.push(tt({boardNumber:6,correct:!0,timestamp:wt(14)}),tt({boardNumber:6,correct:!0,timestamp:wt(7)})),e.push(tt({boardNumber:7,correct:!0,timestamp:wt(21)}),tt({boardNumber:7,correct:!0,timestamp:wt(14)}),tt({boardNumber:7,correct:!0,timestamp:wt(7)})),e.push(tt({boardNumber:8,correct:!0,timestamp:wt(28)}),tt({boardNumber:8,correct:!0,timestamp:wt(21)}),tt({boardNumber:8,correct:!0,timestamp:wt(14)}),tt({boardNumber:8,correct:!1,timestamp:wt(1)}));const t=[1,2,3,4,5].map(s=>({...tt({boardNumber:s,correct:!0,timestamp:wt(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Pw=["onClick","title"],Dw={key:0,class:"medal gold-medal"},Rw={key:1,class:"medal silver-medal"},Lw={class:"board-num"},Bw={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceBoardStatus:{type:Object,default:()=>({})},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1},userId:{type:String,default:null}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=nl(),a=gs(),l=He(),i=O([]),u=O(!1);async function c(){var h;const v=s.userId||((h=l.currentUser.value)==null?void 0:h.id);if(!(!v||!s.lessonSubfolder))try{const g=await o.fetchBoardStatus(v,s.lessonSubfolder);g.length>0&&(i.value=g,u.value=!0)}catch{}}_t(c),ut(()=>s.lessonSubfolder,c),ut(()=>o.cacheVersion.value,c);const f=E(()=>{let v;if(u.value&&i.value.length>0?(v=o.buildBoardMastery(i.value,s.boardNumbers),o.mergeLocalPending(v,s.lessonSubfolder)):v=a.computeBoardMastery(a.getObservations(),s.lessonSubfolder,s.boardNumbers),s.forceBoardStatus)for(const[h,g]of Object.entries(s.forceBoardStatus)){const y=v.find(k=>k.boardNumber===Number(h));y&&(y.status=g)}return v});function d(v){const h={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"},g={none:"",silver:" | Silver star",gold:" | Gold star"};return`Board ${v.boardNumber}: ${h[v.status]||v.status}${g[v.achievement]||""}`}return(v,h)=>e.boardNumbers.length>0?(p(),m("div",{key:0,class:ce(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),m("button",{key:0,class:"intro-btn",onClick:h[0]||(h[0]=g=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):j("",!0),(p(!0),m(X,null,ie(f.value,(g,y)=>(p(),m("div",{key:g.boardNumber,class:ce(["board-indicator",[`status-${g.status}`,{active:y===e.currentIndex},{"has-medal":g.achievement!=="none"},{"medal-gold":g.achievement==="gold"},{"medal-silver":g.achievement==="silver"}]]),onClick:k=>n("goto",y),title:d(g)},[g.achievement==="gold"?(p(),m("span",Dw,"")):g.achievement==="silver"?(p(),m("span",Rw,"")):j("",!0),r("span",Lw,b(g.boardNumber),1)],10,Pw))),128))],2)):j("",!0)}},Hu=Se(Bw,[["__scopeId","data-v-6dba945a"]]),Mw={class:"accomplishments-view"},Uw={class:"view-header"},Fw={key:0,class:"user-selector"},jw=["value"],Hw=["value"],Ww={key:1,class:"loading-state"},Kw={key:2,class:"error-state"},Vw={key:3,class:"empty-state"},Gw={key:4,class:"view-content"},zw={class:"controls-row"},Jw={class:"tabs"},Yw={key:0,class:"tab-content"},qw={key:0,class:"no-data"},Xw={key:1,class:"lesson-list"},Qw={class:"lesson-header"},Zw={class:"lesson-name"},eS={key:1,class:"tab-content"},tS={key:0,class:"no-data"},sS={key:1,class:"taxon-list"},nS={class:"taxon-header"},oS={class:"taxon-category"},aS={class:"taxon-name"},rS={class:"taxon-counts"},lS={class:"taxon-stat correct"},iS={class:"taxon-stat incorrect"},cS={class:"taxon-stat total"},uS={class:"view-actions"},dS={key:5,class:"test-mode-banner"},fS={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=bs(),o=gs(),l=new URLSearchParams(window.location.search).get("test");_t(async()=>{l==="mastery"||l==="accomplishments"?n.enableTestMode(Iw()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function u(v){await n.selectUser(v)}function c(v,h){s("navigate-to-deal",{subfolder:v,dealNumber:h})}const f=E(()=>{const v=o.getObservations();return o.extractLessonsFromObservations(v).map(g=>{const y=o.computeBoardMastery(v,g.subfolder,g.boardNumbers),k=o.computeLessonAchievement(y);return{...g,achievement:k.achievement}}).sort((g,y)=>d(g.subfolder).localeCompare(d(y.subfolder)))});ut(f,v=>{o.fetchMissingBoardCounts(v.map(h=>h.subfolder))},{immediate:!0});function d(v){return n.formatLessonName(v)}return(v,h)=>(p(),m("div",Mw,[r("header",Uw,[h[6]||(h[6]=r("h2",null,"Accomplishments",-1)),r("button",{class:"close-btn",onClick:h[0]||(h[0]=g=>v.$emit("close"))},"")]),U(n).canViewOtherUsers.value?(p(),m("div",Fw,[h[7]||(h[7]=r("label",{for:"user-select"},"Viewing:",-1)),r("select",{id:"user-select",value:U(n).selectedUserId.value,onChange:h[1]||(h[1]=g=>u(g.target.value))},[(p(!0),m(X,null,ie(U(n).accessibleUsers.value,g=>(p(),m("option",{key:g.id,value:g.id},b(g.name)+b(g.isSelf?" (You)":""),9,Hw))),128))],40,jw)])):j("",!0),U(n).loading.value?(p(),m("div",Ww,[...h[8]||(h[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading accomplishments...",-1)])])):U(n).error.value?(p(),m("div",Kw,[r("p",null,"Failed to load: "+b(U(n).error.value),1),r("button",{onClick:i},"Try Again")])):U(n).hasData.value?(p(),m("div",Gw,[r("div",zw,[r("div",Jw,[r("button",{class:ce(["tab-btn",{active:U(n).activeTab.value==="lessons"}]),onClick:h[3]||(h[3]=g=>U(n).activeTab.value="lessons")}," Lessons ",2),r("button",{class:ce(["tab-btn",{active:U(n).activeTab.value==="taxons"}]),onClick:h[4]||(h[4]=g=>U(n).activeTab.value="taxons")}," Taxons ",2)])]),U(n).activeTab.value==="lessons"?(p(),m("div",Yw,[f.value.length===0?(p(),m("div",qw," No lesson data available yet. ")):(p(),m("div",Xw,[(p(!0),m(X,null,ie(f.value,g=>(p(),m("div",{key:g.subfolder,class:"lesson-row"},[r("div",Qw,[r("span",Zw,b(d(g.subfolder)),1),g.achievement!=="none"?(p(),m("span",{key:0,class:ce(["achievement-badge",g.achievement])},"  "+b(g.achievement==="gold"?"Gold":"Silver"),3)):j("",!0)]),ge(Hu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,userId:U(n).selectedUserId.value,onGoto:y=>c(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","userId","onGoto"])]))),128))]))])):j("",!0),U(n).activeTab.value==="taxons"?(p(),m("div",eS,[U(n).filteredTaxonStats.value.length===0?(p(),m("div",tS," No skill data available yet. ")):(p(),m("div",sS,[(p(!0),m(X,null,ie(U(n).filteredTaxonStats.value,g=>(p(),m("div",{key:g.skillPath,class:"taxon-card"},[r("div",nS,[r("span",oS,b(g.categoryName),1),r("span",aS,b(g.skillName),1)]),r("div",rS,[r("span",lS,b(g.correct),1),r("span",iS,b(g.incorrect),1),r("span",cS,b(g.total)+" total",1)])]))),128))]))])):j("",!0),r("div",uS,[r("button",{class:"secondary-btn",onClick:i}," Refresh "),r("button",{class:"primary-btn",onClick:h[5]||(h[5]=g=>v.$emit("close"))}," Done ")])])):(p(),m("div",Vw,[h[9]||(h[9]=r("h3",null,"No Practice Data Yet",-1)),h[10]||(h[10]=r("p",null,"Complete some practice deals to see your accomplishments here!",-1)),r("button",{class:"primary-btn",onClick:h[2]||(h[2]=g=>v.$emit("close"))},"Start Practicing")])),U(n).useTestData.value?(p(),m("div",dS," Test Mode - Using Generated Data ")):j("",!0)]))}},pS=Se(fS,[["__scopeId","data-v-b2e1ca98"]]),Wu="bridge-classroom-anon-mode",vS="BridgeClassroom-Anon",Ua=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Ti=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function mS(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function hS(e,t){const s=`${vS}:${e} ${t}`,n=mS(s),o=Number(n%BigInt(Ua.length)),a=Number(n/BigInt(Ua.length)%BigInt(Ti.length));return{firstName:Ua[o],lastName:Ti[a]}}const On=O(localStorage.getItem(Wu)==="true");function gS(){function e(){On.value=!On.value,localStorage.setItem(Wu,On.value.toString())}function t(o){return On.value?hS(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:l}=t(o);return`${a} ${l}`}function n(o){const{firstName:a,lastName:l}=t(o),i=(a==null?void 0:a.charAt(0))||"",u=(l==null?void 0:l.charAt(0))||"";return(i+u).toUpperCase()||"?"}return{isAnonymized:On,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const yS={class:"teacher-student-list"},bS={class:"teacher-header"},_S={class:"header-actions"},wS=["value"],SS={key:0,class:"loading-state"},CS={key:1,class:"error-state"},$S={key:2,class:"empty-state"},kS={key:3,class:"empty-state"},xS={key:4,class:"student-table-wrap"},AS={class:"student-table"},TS=["onClick"],NS={class:"col-name"},ES={class:"student-name-cell"},OS={class:"avatar"},IS={class:"col-mastery"},PS={class:"mastery-pills"},DS={key:0,class:"pill pill-green"},RS={key:1,class:"pill pill-orange"},LS={key:2,class:"pill pill-yellow"},BS={key:3,class:"pill pill-red"},MS={key:4,class:"no-data-label"},US={class:"col-active"},FS={class:"col-lessons"},jS={class:"recent-lessons"},HS={key:0,class:"no-data-label"},WS={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=_n(),n=bo(),o=He(),a=gS(),l=O("all"),i=O({});_t(async()=>{await s.loadAllStudentSummaries(),await u()});async function u(){const $=o.currentUser.value;if(!$)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms($.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async w=>{const T=await n.fetchClassroomDetail(w.id);T!=null&&T.success&&(_[w.id]=new Set(T.classroom.members.map(D=>D.student_id)))})),i.value=_}async function c(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await u()}const f=E(()=>{const $=new Set;for(const _ of Object.values(i.value))for(const w of _)$.add(w);return $}),d=E(()=>{const $=s.students.value;if(l.value==="all")return $;if(l.value==="none")return $.filter(w=>!f.value.has(w.id));const _=i.value[l.value];return _?$.filter(w=>_.has(w.id)):$}),v=E(()=>[...d.value].sort(($,_)=>{var D,B;const w=((D=h.value[$.id])==null?void 0:D.lastObservationTime)||"",T=((B=h.value[_.id])==null?void 0:B.lastObservationTime)||"";return T!==w?T.localeCompare(w):y($).localeCompare(y(_))})),h=E(()=>{const $={};for(const _ of s.students.value)$[_.id]=s.getStudentMasterySummary(_.id);return $}),g=E(()=>{const $={};for(const _ of s.students.value)$[_.id]=s.getStudentRecentLessons(_.id);return $});function y($){return a.displayFullName($)}function k($){return a.displayInitials($)}return($,_)=>(p(),m("div",yS,[r("header",bS,[_[5]||(_[5]=r("h2",null,"My Students",-1)),r("div",_S,[U(n).teacherClassrooms.value.length?je((p(),m("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=w=>l.value=w),class:"filter-select"},[_[3]||(_[3]=r("option",{value:"all"},"All Students",-1)),(p(!0),m(X,null,ie(U(n).teacherClassrooms.value,w=>(p(),m("option",{key:w.id,value:w.id},b(w.name),9,wS))),128)),_[4]||(_[4]=r("option",{value:"none"},"No Classroom",-1))],512)),[[Wn,l.value]]):j("",!0),r("button",{class:ce(["anon-btn",{active:U(a).isAnonymized.value}]),onClick:_[1]||(_[1]=w=>U(a).toggleAnonymize())},b(U(a).isAnonymized.value?"Clear":"Anon"),3),r("button",{class:"secondary-btn",onClick:c},"Refresh"),r("button",{class:"secondary-btn",onClick:_[2]||(_[2]=w=>$.$emit("close"))},"Back")])]),U(s).loading.value?(p(),m("div",SS,[..._[6]||(_[6]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):U(s).error.value?(p(),m("div",CS,[r("p",null,"Failed to load: "+b(U(s).error.value),1),r("button",{onClick:c},"Try Again")])):U(s).students.value.length===0?(p(),m("div",$S,[..._[7]||(_[7]=[r("h3",null,"No Students Yet",-1),r("p",null,"Students will appear here once they register and grant you access.",-1)])])):v.value.length===0?(p(),m("div",kS,[..._[8]||(_[8]=[r("h3",null,"No Matching Students",-1),r("p",null,"No students match the selected filter.",-1)])])):(p(),m("div",xS,[r("table",AS,[_[9]||(_[9]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-mastery"},"Mastery"),r("th",{class:"col-active"},"Last Active"),r("th",{class:"col-lessons"},"Recent Lessons")])],-1)),r("tbody",null,[(p(!0),m(X,null,ie(v.value,w=>{var T,D,B,M,z,K,fe;return p(),m("tr",{key:w.id,class:"student-row",onClick:me=>$.$emit("select-student",w.id,y(w))},[r("td",NS,[r("div",ES,[r("div",OS,b(k(w)),1),r("span",null,b(y(w)),1)])]),r("td",IS,[r("div",PS,[(T=h.value[w.id])!=null&&T.green?(p(),m("span",DS,b(h.value[w.id].green),1)):j("",!0),(D=h.value[w.id])!=null&&D.orange?(p(),m("span",RS,b(h.value[w.id].orange),1)):j("",!0),(B=h.value[w.id])!=null&&B.yellow?(p(),m("span",LS,b(h.value[w.id].yellow),1)):j("",!0),(M=h.value[w.id])!=null&&M.red?(p(),m("span",BS,b(h.value[w.id].red),1)):j("",!0),(z=h.value[w.id])!=null&&z.total?j("",!0):(p(),m("span",MS,"No data"))])]),r("td",US,b(U(s).formatTimeSince((K=h.value[w.id])==null?void 0:K.lastObservationTime)),1),r("td",FS,[r("div",jS,[(p(!0),m(X,null,ie(g.value[w.id],(me,pe)=>(p(),m("span",{key:pe,class:"lesson-tag"},b(me),1))),128)),(fe=g.value[w.id])!=null&&fe.length?j("",!0):(p(),m("span",HS,"-"))])])],8,TS)}),128))])])]))]))}},KS=Se(WS,[["__scopeId","data-v-dd6d8e66"]]),VS={class:"teacher-student-detail"},GS={class:"detail-header"},zS={class:"student-info"},JS={class:"avatar"},YS={class:"last-active"},qS={key:0,class:"loading-state"},XS={key:1,class:"detail-content"},QS={class:"tab-bar"},ZS=["onClick"],eC={key:0,class:"tab-content"},tC={key:1,class:"tab-content"},sC={key:0,class:"stats-row"},nC={class:"stat stat-green"},oC={key:0,class:"stat stat-blue"},aC={key:1,class:"stat stat-orange"},rC={key:2,class:"stat stat-yellow"},lC={key:3,class:"stat stat-red"},iC={key:4,class:"stat stat-grey"},cC={key:1,class:"no-data"},uC={key:2,class:"lesson-list"},dC={class:"lesson-header"},fC=["onClick"],pC={class:"mastery-strip"},vC=["title","onClick"],mC={key:0,class:"medal gold-medal"},hC={key:1,class:"medal silver-medal"},gC={class:"board-num"},yC={class:"observation-total"},bC={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=_n(),a=gs(),l=nl(),i=bs(),u=O(!1),c=O("progress"),f=O([]),d=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],v=E(()=>s.studentName.split(" ").map(T=>T[0]||"").join("").toUpperCase());_t(async()=>{o.studentObservations.value[s.studentId]||(u.value=!0,await o.fetchStudentObservations(s.studentId),u.value=!1);try{f.value=await l.fetchBoardStatus(s.studentId)}catch{}});const h=E(()=>o.studentObservations.value[s.studentId]||[]),g=E(()=>o.getStudentMasterySummary(s.studentId)),y=E(()=>o.formatTimeSince(g.value.lastObservationTime)),k=E(()=>{const w=h.value;if(w.length===0&&f.value.length===0)return[];const T=a.extractLessonsFromObservations(w),D={};for(const B of f.value)D[B.deal_subfolder]||(D[B.deal_subfolder]=[]),D[B.deal_subfolder].push(B);for(const B in D)if(!T.find(M=>M.subfolder===B)){const M=D[B].map(z=>z.deal_number).sort((z,K)=>z-K);T.push({subfolder:B,boardNumbers:M,lastActivity:null})}return T.map(B=>{let M;const z=D[B.subfolder];z&&z.length>0?M=l.buildBoardMastery(z,B.boardNumbers):M=a.computeBoardMastery(w,B.subfolder,B.boardNumbers);const K=a.computeLessonAchievement(M);return{...B,boardMastery:M,achievement:K.achievement}}).sort((B,M)=>$(B.subfolder).localeCompare($(M.subfolder)))});ut(k,w=>{a.fetchMissingBoardCounts(w.map(T=>T.subfolder))},{immediate:!0});function $(w){return i.formatLessonName(w)}function _(w){const T={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"};return`Board ${w.boardNumber}: ${T[w.status]||w.status}`}return(w,T)=>(p(),m("div",VS,[r("header",GS,[r("button",{class:"back-btn",onClick:T[0]||(T[0]=D=>w.$emit("back"))}," Students"),r("div",zS,[r("div",JS,b(v.value),1),r("div",null,[r("h2",null,b(e.studentName),1),r("span",YS,"Last active: "+b(y.value),1)])])]),u.value?(p(),m("div",qS,[...T[1]||(T[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):(p(),m("div",XS,[r("div",QS,[(p(),m(X,null,ie(d,D=>r("button",{key:D.id,class:ce(["tab-btn",{active:c.value===D.id}]),onClick:B=>c.value=D.id},b(D.label),11,ZS)),64))]),c.value==="progress"?(p(),m("div",eC,[ge(ju,{observations:h.value,studentName:s.studentName,studentId:s.studentId},null,8,["observations","studentName","studentId"])])):c.value==="mastery"?(p(),m("div",tC,[g.value.total>0?(p(),m("div",sC,[r("div",nC,b(g.value.green)+" Green",1),g.value.blue?(p(),m("div",oC,b(g.value.blue)+" Blue",1)):j("",!0),g.value.orange?(p(),m("div",aC,b(g.value.orange)+" Orange",1)):j("",!0),g.value.yellow?(p(),m("div",rC,b(g.value.yellow)+" Yellow",1)):j("",!0),g.value.red?(p(),m("div",lC,b(g.value.red)+" Red",1)):j("",!0),g.value.grey?(p(),m("div",iC,b(g.value.grey)+" Grey",1)):j("",!0)])):j("",!0),k.value.length===0?(p(),m("div",cC," No lesson data available yet. ")):(p(),m("div",uC,[(p(!0),m(X,null,ie(k.value,D=>(p(),m("div",{key:D.subfolder,class:"lesson-row"},[r("div",dC,[r("button",{class:"lesson-name lesson-link",onClick:B=>n("navigate-to-lesson",D.subfolder)},b($(D.subfolder)),9,fC),D.achievement!=="none"?(p(),m("span",{key:0,class:ce(["achievement-badge",D.achievement])},"  "+b(D.achievement==="gold"?"Gold":"Silver"),3)):j("",!0)]),r("div",pC,[(p(!0),m(X,null,ie(D.boardMastery,B=>(p(),m("div",{key:B.boardNumber,class:ce(["board-circle board-clickable","status-"+B.status]),title:_(B),onClick:M=>n("navigate-to-lesson",D.subfolder,B.boardNumber)},[B.achievement==="gold"?(p(),m("span",mC,"")):B.achievement==="silver"?(p(),m("span",hC,"")):j("",!0),r("span",gC,b(B.boardNumber),1)],10,vC))),128))])]))),128))]))])):j("",!0),r("div",yC,b(h.value.length)+" observations",1)]))]))}},_C=Se(bC,[["__scopeId","data-v-62d6827c"]]),wC={key:0,class:"lesson-browser-loading"},SC={key:1,class:"lesson-browser-error"},CC={class:"lesson-browser"},$C={class:"browser-header"},kC={class:"browser-content"},xC=["onClick"],AC={class:"expand-icon"},TC={class:"category-name"},NC={class:"category-count"},EC={key:0,class:"lesson-list"},OC=["onClick"],IC={class:"lesson-name"},PC={class:"lesson-description"},DC={key:0,class:"error-message"},RC={key:3,class:"lesson-browser-inline"},LC={class:"browser-content-inline"},BC=["onClick"],MC={class:"expand-icon"},UC={class:"category-name"},FC={class:"category-count"},jC={key:0,class:"lesson-list"},HC=["onClick"],WC={class:"lesson-name"},KC={class:"lesson-description"},VC={key:0,class:"error-message-inline"},GC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=O(null),a=O(null),l=O(!1),i=O([]),u=O(null),c=O(null);ut(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}l.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{l.value=!1}}function d(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function v(g){return g.includes("/")?g.split("/").pop():g}async function h(g,y){var k;c.value=null,u.value=g.id;try{const $=((k=s.collection)==null?void 0:k.baseUrl)||"",_=v(g.id),w=`${$}/${_}.pbn`,T=await fetch(w);if(!T.ok)throw new Error(`Failed to load lesson: ${T.statusText}`);const D=await T.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:D}),s.inline||n("close")}catch($){console.error("Error loading lesson:",$),c.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{u.value=null}}return(g,y)=>e.visible&&l.value?(p(),m("div",wC,[...y[2]||(y[2]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(p(),m("div",SC,[r("p",null,b(a.value),1),r("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),m("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=nt(k=>g.$emit("close"),["self"]))},[r("div",CC,[r("div",$C,[r("h2",null,b(o.value.name),1),r("button",{class:"close-btn",onClick:y[0]||(y[0]=k=>g.$emit("close"))},"")]),r("div",kC,[(p(!0),m(X,null,ie(o.value.categories,k=>(p(),m("div",{key:k.id,class:"category-section"},[r("button",{class:ce(["category-header",{expanded:i.value.includes(k.id)}]),onClick:$=>d(k.id)},[r("span",AC,b(i.value.includes(k.id)?"":""),1),r("span",TC,b(k.name),1),r("span",NC,b(k.lessons.length)+" lessons",1)],10,xC),i.value.includes(k.id)?(p(),m("div",EC,[(p(!0),m(X,null,ie(k.lessons,$=>(p(),m("button",{key:$.id,class:ce(["lesson-item",{loading:u.value===$.id}]),onClick:_=>h($,k)},[r("span",IC,b($.name),1),r("span",PC,b($.description),1)],10,OC))),128))])):j("",!0)]))),128))]),c.value?(p(),m("div",DC,b(c.value),1)):j("",!0)])])):e.visible&&e.inline&&o.value?(p(),m("div",RC,[r("div",LC,[(p(!0),m(X,null,ie(o.value.categories,k=>(p(),m("div",{key:k.id,class:"category-section"},[r("button",{class:ce(["category-header",{expanded:i.value.includes(k.id)}]),onClick:$=>d(k.id)},[r("span",MC,b(i.value.includes(k.id)?"":""),1),r("span",UC,b(k.name),1),r("span",FC,b(k.lessons.length)+" lessons",1)],10,BC),i.value.includes(k.id)?(p(),m("div",jC,[(p(!0),m(X,null,ie(k.lessons,$=>(p(),m("button",{key:$.id,class:ce(["lesson-item",{loading:u.value===$.id}]),onClick:_=>h($,k)},[r("span",WC,b($.name),1),r("span",KC,b($.description),1)],10,HC))),128))])):j("",!0)]))),128))]),c.value?(p(),m("div",VC,b(c.value),1)):j("",!0)])):j("",!0)}},zC=Se(GC,[["__scopeId","data-v-384a9c63"]]),JC={class:"viewer-controls"},YC={class:"viewer-body"},qC={key:0,class:"interaction-overlay"},XC={key:1,class:"viewer-loading"},QC={key:2,class:"viewer-error"},ZC=["src"],e$={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Lt({x:80,y:80}),n=Lt({w:550,h:700}),o=O(!1),a=Lt({x:0,y:0}),l=O(null),i=O(!1),u=O(null),c=E(()=>l.value?l.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){i.value=!0,u.value=null;try{const w=await fetch(_);if(!w.ok)throw new Error("Failed to load PDF");const T=await w.blob(),D=new Blob([T],{type:"application/pdf"});l.value=URL.createObjectURL(D)}catch(w){u.value="Could not load PDF",console.error("Failed to fetch intro PDF:",w)}finally{i.value=!1}}}function d(){l.value&&(URL.revokeObjectURL(l.value),l.value=null)}function v(){l.value&&window.open(l.value,"_blank")}ut(()=>[t.visible,t.url],([_,w])=>{_&&w?f(w):_||d()},{immediate:!0}),Lr(d);function h(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",$))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",k),document.addEventListener("pointerup",$)}function k(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function $(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",$)}return(_,w)=>e.visible?(p(),m("div",{key:0,class:"intro-pdf-viewer",style:st({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[r("div",{class:"viewer-titlebar",onPointerdown:h},[w[1]||(w[1]=r("span",{class:"viewer-title"},"Lesson Introduction",-1)),r("div",JC,[r("button",{class:"viewer-btn",onClick:v,title:"Open in new tab"},""),r("button",{class:"viewer-btn close",onClick:w[0]||(w[0]=T=>_.$emit("close")),title:"Close"},"")])],32),r("div",YC,[o.value?(p(),m("div",qC)):j("",!0),i.value?(p(),m("div",XC,"Loading PDF...")):u.value?(p(),m("div",QC,b(u.value),1)):c.value?(p(),m("iframe",{key:3,src:c.value,class:"viewer-iframe"},null,8,ZC)):j("",!0)]),r("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):j("",!0)}},t$=Se(e$,[["__scopeId","data-v-a97df645"]]),s$={class:"collection-icon"},n$={class:"collection-name"},o$={class:"collection-desc"},a$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),m("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[r("span",s$,b(e.collection.icon),1),r("span",n$,b(e.collection.name),1),r("span",o$,b(e.collection.description),1)]))}},r$=Se(a$,[["__scopeId","data-v-747be5b1"]]),l$={class:"collection-grid"},i$={class:"collection-cards"},c$={key:0,class:"load-file-section"},u$={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=vo(),s=t.COLLECTIONS;return(n,o)=>(p(),m("div",l$,[o[2]||(o[2]=r("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=r("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),r("div",i$,[(p(!0),m(X,null,ie(U(s),a=>(p(),Fe(r$,{key:a.id,collection:a,onClick:l=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),U(t).showLoadPbnOption.value?(p(),m("div",c$,[o[1]||(o[1]=r("p",null,"Or load your own PBN file:",-1)),r("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):j("",!0)]))}},ll=Se(u$,[["__scopeId","data-v-35b62d22"]]),d$={class:"casual-lobby"},f$={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(p(),m("div",d$,[ge(ll,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},p$=Se(f$,[["__scopeId","data-v-1ce1f7d7"]]),v$={class:"assignment-panel"},m$={key:0,class:"loading-state"},h$={key:1,class:"empty-state"},g$={key:2,class:"assignment-cards"},y$=["onClick"],b$={class:"card-header"},_$={class:"exercise-name"},w$={class:"card-meta"},S$={key:0,class:"meta-item"},C$={class:"progress-section"},$$={class:"progress-bar"},k$={class:"progress-label"},x$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(i){return i.total_boards?Math.round(i.attempted_boards/i.total_boards*100):0}function s(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0?"complete":i.due_at&&new Date(i.due_at)<new Date&&i.attempted_boards<i.total_boards?"overdue":i.attempted_boards>0?"in-progress":"new"}function n(i){const u=s(i);return u==="complete"?"Complete":u==="overdue"?"Overdue":u==="in-progress"?"In Progress":"New"}function o(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0}function a(i){if(!i.due_at)return null;const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?o(i)?"Completed":"Overdue":f===0?"Due today":f===1?"Due tomorrow":`Due in ${f} days`}function l(i){if(!i.due_at||o(i))return"";const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?"overdue":f<=1?"urgent":f<=3?"soon":""}return(i,u)=>(p(),m("div",v$,[u[2]||(u[2]=r("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),m("div",m$,[...u[0]||(u[0]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),m("div",h$,[...u[1]||(u[1]=[r("p",{class:"empty-title"},"No assignments yet",-1),r("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),m("div",g$,[(p(!0),m(X,null,ie(e.assignments,c=>(p(),m("div",{key:c.id,class:ce(["assignment-card",s(c)]),onClick:f=>i.$emit("select-assignment",c)},[r("div",b$,[r("span",_$,b(c.exercise_name),1),r("span",{class:ce(["status-badge",s(c)])},b(n(c)),3)]),r("div",w$,[c.classroom_name?(p(),m("span",S$,b(c.classroom_name),1)):j("",!0),c.due_at?(p(),m("span",{key:1,class:ce(["meta-item",l(c)])},b(a(c)),3)):j("",!0)]),r("div",C$,[r("div",$$,[r("div",{class:ce(["progress-fill",s(c)]),style:st({width:t(c)+"%"})},null,6)]),r("span",k$,b(c.attempted_boards)+" / "+b(c.total_boards)+" boards ",1)])],10,y$))),128))]))]))}},A$=Se(x$,[["__scopeId","data-v-af7a8941"]]),T$={class:"student-lobby"},N$={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=He(),o=Sn(),a=E(()=>o.studentAssignments.value.length>0),l=E(()=>o.loading.value);function i(u){s("select-assignment",u)}return _t(()=>{const u=n.currentUser.value;u&&o.fetchStudentAssignments(u.id)}),(u,c)=>(p(),m("div",T$,[a.value||l.value?(p(),Fe(A$,{key:0,assignments:U(o).studentAssignments.value,loading:l.value,onSelectAssignment:i},null,8,["assignments","loading"])):j("",!0),ge(ll,{onSelectCollection:c[0]||(c[0]=f=>u.$emit("select-collection",f)),onLoadFile:c[1]||(c[1]=f=>u.$emit("load-file",f))})]))}},E$=Se(N$,[["__scopeId","data-v-3310fc38"]]),Ku="https://api.bridge-classroom.com/api",Vu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Lo=O([]),il=O([]),cl=O([]),br=O(!1),Fa=O(null),O$=2*60*1e3;async function I$(e,t=!1){if(!t&&Fa.value&&Date.now()-new Date(Fa.value).getTime()<O$)return{success:!0,cached:!0};br.value=!0;try{const s=await fetch(`${Ku}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Vu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Lo.value=n.classrooms||[],il.value=n.needs_attention||[],cl.value=n.recent_activity||[],Fa.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{br.value=!1}}async function P$(e,t){try{const s=await fetch(`${Ku}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?il.value=[]:t==="activity"&&(cl.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function D$(){const e=E(()=>({classroomCount:Lo.value.length,openAssignmentCount:Lo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Lo,needsAttention:il,recentActivity:cl,lobbyLoading:br,summaryStats:e,loadTeacherLobbyData:I$,clearPanel:P$}}const R$={class:"roster"},L$={class:"roster-header"},B$={class:"member-count"},M$={key:0,class:"roster-empty"},U$={key:1,class:"roster-table"},F$={class:"member-name"},j$={class:"member-email"},H$={class:"member-date"},W$={class:"member-action"},K$=["onClick","disabled"],V$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=O(null);function o(l){try{return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return l}}function a(l){const i=`${l.first_name} ${l.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=l.student_id,s("remove-member",l.student_id),setTimeout(()=>{n.value=null},2e3))}return(l,i)=>(p(),m("div",R$,[r("div",L$,[i[0]||(i[0]=r("h4",null,"Class Roster",-1)),r("span",B$,b(e.members.length)+" "+b(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),m("div",M$,[...i[1]||(i[1]=[r("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),m("table",U$,[i[2]||(i[2]=r("thead",null,[r("tr",null,[r("th",null,"Name"),r("th",null,"Email"),r("th",null,"Joined"),r("th")])],-1)),r("tbody",null,[(p(!0),m(X,null,ie(e.members,u=>(p(),m("tr",{key:u.student_id},[r("td",F$,b(u.first_name)+" "+b(u.last_name),1),r("td",j$,b(u.email),1),r("td",H$,b(o(u.joined_at)),1),r("td",W$,[r("button",{class:"remove-btn",onClick:c=>a(u),disabled:n.value===u.student_id},b(n.value===u.student_id?"Removing...":"Remove"),9,K$)])]))),128))])]))]))}},G$=Se(V$,[["__scopeId","data-v-ee901be3"]]),z$={class:"header-left"},J$={class:"classroom-name"},Y$={class:"header-meta"},q$={class:"join-badge"},X$={class:"member-count"},Q$={key:0,class:"stat-badge"},Z$={key:1,class:"stat-badge completion"},ek={key:0,class:"mini-bars"},tk={class:"bar-label"},sk={class:"bar-track"},nk={class:"bar-count"},ok=["aria-label"],ak={key:0,class:"card-body"},rk={key:0,class:"classroom-desc"},lk={class:"invite-section"},ik={class:"invite-field"},ck=["value"],uk={class:"email-section"},dk={class:"email-header"},fk={class:"email-template"},pk={class:"email-body"},vk={key:1,class:"assignments-section"},mk={class:"assignment-list"},hk=["onClick"],gk={class:"assignment-name"},yk={key:0,class:"assignment-due"},bk={class:"assignment-boards"},_k={key:3,class:"loading-roster"},wk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed","view-assignment"],setup(e,{emit:t}){const s=e,n=t,o=bo(),a=Sn(),l=O(null),i=O(!1),u=O(!1),c=O(!1),f=O([]),d=E(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ut(()=>s.expanded,async $=>{if($&&!l.value){i.value=!0;const[_,w]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(l.value=_.classroom),f.value=w||[],i.value=!1}});function v($){return $?new Date($).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function h($){return $.students_total?Math.round($.students_completed/$.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function y(){const $=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText($),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function k($){const _=await o.removeMember(s.classroom.id,$);_!=null&&_.success&&(l.value&&(l.value.members=l.value.members.filter(w=>w.student_id!==$)),n("member-removed"))}return($,_)=>(p(),m("div",{class:ce(["classroom-card",{expanded:e.expanded}])},[r("div",{class:"card-header",onClick:_[0]||(_[0]=w=>$.$emit("toggle"))},[r("div",z$,[r("h3",J$,b(e.classroom.name),1),r("div",Y$,[r("span",q$,"JOIN: "+b(e.classroom.join_code),1),r("span",X$,b(e.classroom.member_count)+" "+b(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),m("span",Q$,b(e.classroom.open_assignment_count)+" "+b(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):j("",!0),e.classroom.avg_completion_pct>0?(p(),m("span",Z$,b(e.classroom.avg_completion_pct)+"% avg",1)):j("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),m("div",ek,[(p(!0),m(X,null,ie(e.classroom.assignments,w=>(p(),m("div",{key:w.id,class:"mini-bar"},[r("span",tk,b(w.exercise_name),1),r("div",sk,[r("div",{class:"bar-fill",style:st({width:h(w)})},null,4)]),r("span",nk,b(w.students_completed)+"/"+b(w.students_total),1)]))),128))])):j("",!0)]),r("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[r("span",{class:ce(["chevron",{rotated:e.expanded}])},"",2)],8,ok)]),e.expanded?(p(),m("div",ak,[e.classroom.description?(p(),m("p",rk,b(e.classroom.description),1)):j("",!0),r("div",lk,[_[2]||(_[2]=r("h4",null,"Invite Link",-1)),_[3]||(_[3]=r("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),r("div",ik,[r("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=w=>w.target.select())},null,8,ck),r("button",{class:"copy-btn",onClick:g},b(u.value?"Copied!":"Copy"),1)])]),r("div",uk,[r("div",dk,[_[4]||(_[4]=r("h4",null,"Email Template",-1)),r("button",{class:"copy-btn copy-btn-small",onClick:y},b(c.value?"Copied!":"Copy"),1)]),r("div",fk,[_[5]||(_[5]=r("p",null,[r("strong",null,"Subject:"),Te(" Join our Bridge Classroom for practice exercises")],-1)),r("div",pk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+b(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(p(),m("div",vk,[_[7]||(_[7]=r("h4",null,"Assignments",-1)),r("div",mk,[(p(!0),m(X,null,ie(f.value,w=>(p(),m("div",{key:w.id,class:"assignment-row clickable",onClick:T=>n("view-assignment",w.id)},[r("span",gk,b(w.exercise_name),1),w.due_at?(p(),m("span",yk,"Due "+b(v(w.due_at)),1)):j("",!0),r("span",bk,b(w.total_boards)+" boards",1),_[6]||(_[6]=r("span",{class:"view-arrow"},"",-1))],8,hk))),128))])])):j("",!0),l.value?(p(),Fe(G$,{key:2,members:l.value.members,onRemoveMember:k},null,8,["members"])):i.value?(p(),m("div",_k," Loading roster... ")):j("",!0)])):j("",!0)],2))}},Sk=Se(wk,[["__scopeId","data-v-3dc8e5a5"]]),Ck={class:"modal-content"},$k={class:"step"},kk={class:"form-group"},xk={class:"form-group"},Ak={class:"step-actions"},Tk=["disabled"],Nk={key:0,class:"error-text"},Ek={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=He(),o=bo(),a=O(""),l=O(""),i=O(!1),u=O(null);async function c(){if(!a.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,u.value=null;const d=await o.createClassroom(f.id,a.value.trim(),l.value.trim()||null);d.success?s("classroom-created",d.classroom):u.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(p(),m("div",{class:"modal-overlay",onClick:d[3]||(d[3]=nt(v=>f.$emit("close"),["self"]))},[r("div",Ck,[r("div",$k,[d[7]||(d[7]=r("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=r("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),r("div",kk,[d[4]||(d[4]=r("label",{for:"classroom-name"},"Classroom Name",-1)),je(r("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=v=>a.value=v),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Vo(c,["enter"])},null,544),[[Ct,a.value]]),d[5]||(d[5]=r("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),r("div",xk,[d[6]||(d[6]=r("label",{for:"classroom-desc"},[Te("Description "),r("span",{class:"optional"},"(optional)")],-1)),je(r("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=v=>l.value=v),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[Ct,l.value]])]),r("div",Ak,[r("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=v=>f.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:c},b(i.value?"Creating...":"Create Classroom"),9,Tk)]),u.value?(p(),m("p",Nk,b(u.value),1)):j("",!0)])])]))}},Ok=Se(Ek,[["__scopeId","data-v-c26a1ae6"]]),In="https://api.bridge-classroom.com/api",Pn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Os=O([]),ja=O(null),Ht=O(!1),We=O(null);function Ik(){async function e(l={}){Ht.value=!0,We.value=null;try{const i=new URLSearchParams;l.created_by&&i.set("created_by",l.created_by),l.curriculum_path&&i.set("curriculum_path",l.curriculum_path),l.visibility&&i.set("visibility",l.visibility);const u=i.toString(),c=`${In}/exercises${u?"?"+u:""}`,f=await fetch(c,{headers:{"x-api-key":Pn}});if(!f.ok){const v=await f.text();return We.value=v||`Server error (${f.status})`,null}const d=await f.json();return d.success?Os.value=d.exercises:We.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),We.value="Unable to connect to server",null}finally{Ht.value=!1}}async function t(l){Ht.value=!0,We.value=null;try{const i=await fetch(`${In}/exercises/${encodeURIComponent(l)}`,{headers:{"x-api-key":Pn}});if(!i.ok){const c=await i.text();return We.value=c||`Server error (${i.status})`,null}const u=await i.json();return u.success?ja.value=u.exercise:We.value=u.error||"Failed to fetch exercise",u}catch(i){return console.error("Failed to fetch exercise detail:",i),We.value="Unable to connect to server",null}finally{Ht.value=!1}}async function s({name:l,description:i,created_by:u,curriculum_path:c,visibility:f,boards:d}){Ht.value=!0,We.value=null;try{const v=await fetch(`${In}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Pn},body:JSON.stringify({name:l,description:i||null,created_by:u||null,curriculum_path:c||null,visibility:f||"public",boards:d})});if(!v.ok){const g=await v.text();return We.value=g||`Server error (${v.status})`,{success:!1,error:We.value}}const h=await v.json();return h.success?Os.value=[h.exercise,...Os.value]:We.value=h.error||"Failed to create exercise",h}catch(v){return console.error("Failed to create exercise:",v),We.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ht.value=!1}}async function n(l,i){Ht.value=!0,We.value=null;try{const u=await fetch(`${In}/exercises/${encodeURIComponent(l)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Pn},body:JSON.stringify(i)});if(!u.ok){const f=await u.text();return We.value=f||`Server error (${u.status})`,{success:!1,error:We.value}}const c=await u.json();return c.success||(We.value=c.error||"Failed to update exercise"),c}catch(u){return console.error("Failed to update exercise:",u),We.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Ht.value=!1}}async function o(l){try{const i=await fetch(`${In}/exercises/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":Pn}});if(!i.ok){const c=await i.text();return We.value=c||`Server error (${i.status})`,{success:!1,error:We.value}}const u=await i.json();return u.success&&(Os.value=Os.value.filter(c=>c.id!==l)),u}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Os.value=[],ja.value=null,Ht.value=!1,We.value=null}return{exercises:Os,currentExercise:ja,loading:Ht,error:We,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const Pk={class:"modal-content"},Dk={class:"step"},Rk={class:"form-group"},Lk=["value"],Bk={key:0,class:"form-hint"},Mk={class:"form-group"},Uk={class:"target-options"},Fk={class:"radio-option"},jk={class:"radio-option"},Hk={key:0,class:"form-group"},Wk=["value"],Kk={key:1,class:"form-group"},Vk=["value"],Gk={class:"form-group"},zk={class:"step-actions"},Jk=["disabled"],Yk={key:2,class:"error-text"},qk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=He(),a=Ik(),l=Sn(),i=bo(),u=_n(),c=O(""),f=O("classroom"),d=O(s.preselectedClassroomId||""),v=O(""),h=O(""),g=O(!1),y=O(null),k=E(()=>a.exercises.value),$=E(()=>a.loading.value),_=E(()=>i.teacherClassrooms.value),w=E(()=>u.students.value),T=E(()=>!(!c.value||f.value==="classroom"&&!d.value||f.value==="student"&&!v.value));async function D(){if(!T.value||g.value)return;const B=o.currentUser.value;if(!B)return;g.value=!0,y.value=null;const M=await l.createAssignment({exercise_id:c.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?v.value:null,assigned_by:B.id,due_at:h.value||null});M.success?n("assignment-created",M.assignment):y.value=M.error||"Failed to create assignment",g.value=!1}return _t(async()=>{a.exercises.value.length||await a.fetchExercises();const B=o.currentUser.value;B&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(B.id)}),(B,M)=>(p(),m("div",{class:"modal-overlay",onClick:M[7]||(M[7]=nt(z=>B.$emit("close"),["self"]))},[r("div",Pk,[r("div",Dk,[M[18]||(M[18]=r("h2",null,"Create Assignment",-1)),M[19]||(M[19]=r("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),r("div",Rk,[M[9]||(M[9]=r("label",{for:"exercise-select"},"Exercise",-1)),je(r("select",{id:"exercise-select","onUpdate:modelValue":M[0]||(M[0]=z=>c.value=z),class:"form-select"},[M[8]||(M[8]=r("option",{value:""},"Select an exercise...",-1)),(p(!0),m(X,null,ie(k.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.name)+" ("+b(z.board_count)+" boards)",9,Lk))),128))],512),[[Wn,c.value]]),$.value?(p(),m("p",Bk,"Loading exercises...")):j("",!0)]),r("div",Mk,[M[12]||(M[12]=r("label",null,"Assign to",-1)),r("div",Uk,[r("label",Fk,[je(r("input",{type:"radio","onUpdate:modelValue":M[1]||(M[1]=z=>f.value=z),value:"classroom"},null,512),[[Vl,f.value]]),M[10]||(M[10]=r("span",null,"Classroom",-1))]),r("label",jk,[je(r("input",{type:"radio","onUpdate:modelValue":M[2]||(M[2]=z=>f.value=z),value:"student"},null,512),[[Vl,f.value]]),M[11]||(M[11]=r("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(p(),m("div",Hk,[M[14]||(M[14]=r("label",{for:"classroom-select"},"Classroom",-1)),je(r("select",{id:"classroom-select","onUpdate:modelValue":M[3]||(M[3]=z=>d.value=z),class:"form-select"},[M[13]||(M[13]=r("option",{value:""},"Select a classroom...",-1)),(p(!0),m(X,null,ie(_.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.name)+" ("+b(z.member_count)+" students)",9,Wk))),128))],512),[[Wn,d.value]])])):j("",!0),f.value==="student"?(p(),m("div",Kk,[M[16]||(M[16]=r("label",{for:"student-select"},"Student",-1)),je(r("select",{id:"student-select","onUpdate:modelValue":M[4]||(M[4]=z=>v.value=z),class:"form-select"},[M[15]||(M[15]=r("option",{value:""},"Select a student...",-1)),(p(!0),m(X,null,ie(w.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.first_name)+" "+b(z.last_name),9,Vk))),128))],512),[[Wn,v.value]])])):j("",!0),r("div",Gk,[M[17]||(M[17]=r("label",{for:"due-date"},[Te("Due Date "),r("span",{class:"optional"},"(optional)")],-1)),je(r("input",{id:"due-date","onUpdate:modelValue":M[5]||(M[5]=z=>h.value=z),type:"date",class:"form-input"},null,512),[[Ct,h.value]])]),r("div",zk,[r("button",{class:"btn btn-secondary",onClick:M[6]||(M[6]=z=>B.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!T.value||g.value,onClick:D},b(g.value?"Creating...":"Create Assignment"),9,Jk)]),y.value?(p(),m("p",Yk,b(y.value),1)):j("",!0)])])]))}},Xk=Se(qk,[["__scopeId","data-v-5e97b847"]]),Qk={class:"modal-content"},Zk={class:"modal-body"},ex={key:0,class:"loading-state"},tx={key:1,class:"error-state"},sx={class:"error-text"},nx={class:"modal-header"},ox={class:"assignment-meta"},ax={class:"meta-item"},rx={key:0,class:"meta-item"},lx={key:1,class:"meta-item"},ix={key:0,class:"progress-table-wrapper"},cx={class:"progress-table"},ux={class:"col-name"},dx={class:"col-progress"},fx={class:"progress-cell"},px={class:"progress-bar-track"},vx={class:"progress-label"},mx={class:"col-correct"},hx={key:1,class:"empty-state"},gx={key:2,class:"summary-row"},yx={key:0},bx={__name:"AssignmentDetailModal",props:{assignmentId:{type:String,required:!0}},emits:["close"],setup(e){const t=e,s=Sn(),n=O(!0),o=O(null),a=E(()=>s.currentAssignment.value),l=E(()=>{var $;const v=($=a.value)==null?void 0:$.student_progress;if(!v||v.length===0)return null;const h=v.length,g=v.filter(_=>_.attempted_boards>=_.total_boards).length,y=v.filter(_=>_.attempted_boards>0);let k=null;if(y.length>0){const _=y.reduce((w,T)=>w+T.correct_boards/T.attempted_boards*100,0);k=Math.round(_/y.length)}return{total:h,completed:g,avgAccuracy:k}});function i(v){return v?new Date(v).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function u(v){return v.total_boards?Math.round(v.attempted_boards/v.total_boards*100)+"%":"0%"}function c(v){return v.attempted_boards>=v.total_boards?"complete":v.attempted_boards>0?"partial":""}function f(v){return v.attempted_boards===0?"":Math.round(v.correct_boards/v.attempted_boards*100)+"%"}function d(v){if(v.attempted_boards===0)return"";const h=v.correct_boards/v.attempted_boards*100;return h>=80?"accuracy-high":h>=50?"accuracy-mid":"accuracy-low"}return _t(async()=>{const v=await s.fetchAssignmentDetail(t.assignmentId);v!=null&&v.success||(o.value=s.error.value||"Failed to load assignment details"),n.value=!1}),(v,h)=>(p(),m("div",{class:"modal-overlay",onClick:h[2]||(h[2]=nt(g=>v.$emit("close"),["self"]))},[r("div",Qk,[r("div",Zk,[n.value?(p(),m("div",ex,[...h[3]||(h[3]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignment details...",-1)])])):o.value?(p(),m("div",tx,[r("p",sx,b(o.value),1),r("button",{class:"btn btn-secondary",onClick:h[0]||(h[0]=g=>v.$emit("close"))},"Close")])):a.value?(p(),m(X,{key:2},[r("div",nx,[r("h2",null,b(a.value.exercise_name),1),r("button",{class:"close-btn",onClick:h[1]||(h[1]=g=>v.$emit("close")),"aria-label":"Close"},"")]),r("div",ox,[r("span",ax,b(a.value.total_boards)+" "+b(a.value.total_boards===1?"board":"boards"),1),a.value.due_at?(p(),m("span",rx,"Due "+b(i(a.value.due_at)),1)):j("",!0),a.value.classroom_name?(p(),m("span",lx,b(a.value.classroom_name),1)):j("",!0)]),a.value.student_progress&&a.value.student_progress.length?(p(),m("div",ix,[r("table",cx,[h[4]||(h[4]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-progress"},"Progress"),r("th",{class:"col-correct"},"Correct"),r("th",{class:"col-accuracy"},"Accuracy")])],-1)),r("tbody",null,[(p(!0),m(X,null,ie(a.value.student_progress,g=>(p(),m("tr",{key:g.student_id},[r("td",ux,b(g.first_name)+" "+b(g.last_name),1),r("td",dx,[r("div",fx,[r("div",px,[r("div",{class:ce(["progress-bar-fill",c(g)]),style:st({width:u(g)})},null,6)]),r("span",vx,b(g.attempted_boards)+"/"+b(g.total_boards),1)])]),r("td",mx,b(g.correct_boards)+"/"+b(g.total_boards),1),r("td",{class:ce(["col-accuracy",d(g)])},b(f(g)),3)]))),128))])])])):(p(),m("div",hx,[...h[5]||(h[5]=[r("p",null,"No students assigned yet.",-1)])])),l.value?(p(),m("div",gx,[r("span",null,b(l.value.completed)+"/"+b(l.value.total)+" students completed",1),l.value.avgAccuracy!==null?(p(),m("span",yx,b(l.value.avgAccuracy)+"% avg accuracy",1)):j("",!0)])):j("",!0)],64)):j("",!0)])])]))}},_x=Se(bx,[["__scopeId","data-v-d654f00a"]]),wx={class:"needs-attention"},Sx={class:"panel-header"},Cx={key:0,class:"empty-state"},$x={key:1,class:"attention-list"},kx={class:"item-icon"},xx={class:"item-text"},Ax={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),l=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${l}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(p(),m("div",wx,[r("div",Sx,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):j("",!0)]),e.items.length?(p(),m("div",$x,[(p(!0),m(X,null,ie(e.items,(l,i)=>(p(),m("div",{key:i,class:ce(["attention-item",l.type])},[r("span",kx,b(t(l.type)),1),r("span",xx,b(s(l)),1)],2))),128))])):(p(),m("div",Cx," All caught up! No items need attention. "))]))}},Tx=Se(Ax,[["__scopeId","data-v-65e8ba1f"]]),Nx={class:"recent-activity"},Ex={class:"panel-header"},Ox={key:0,class:"empty-state"},Ix={key:1,class:"activity-list"},Px={class:"event-content"},Dx={class:"event-text"},Rx={class:"event-time"},Lx={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),l=Math.floor(a/6e4);if(l<1)return"just now";if(l<60)return`${l}m ago`;const i=Math.floor(l/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(p(),m("div",Nx,[r("div",Ex,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):j("",!0)]),e.events.length?(p(),m("div",Ix,[(p(!0),m(X,null,ie(e.events,(l,i)=>(p(),m("div",{key:i,class:"activity-item"},[r("span",{class:ce(["event-icon",l.type])},b(t(l.type)),3),r("div",Px,[r("span",Dx,b(s(l)),1),r("span",Rx,b(n(l.timestamp)),1)])]))),128))])):(p(),m("div",Ox," No recent activity. "))]))}},Bx=Se(Lx,[["__scopeId","data-v-39e672f5"]]),Mx={class:"teacher-lobby"},Ux={class:"welcome-section"},Fx={class:"welcome-title"},jx={class:"welcome-subtitle"},Hx={class:"quick-actions"},Wx={key:0,class:"loading-state"},Kx={key:1,class:"dashboard-grid"},Vx={class:"left-column"},Gx={key:0,class:"classrooms-section"},zx={class:"classroom-cards"},Jx={key:1,class:"empty-state"},Yx={class:"right-column"},qx={class:"collections-section"},Xx={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=He(),s=D$(),n=O(!1),o=O(!1),a=O(null),l=O(null),i=E(()=>{const g=t.currentUser.value;return g?g.firstName:""}),u=E(()=>{const g=s.summaryStats.value;if(!g||g.classroomCount===0)return"Get started by creating your first classroom.";const y=[];return y.push(`${g.classroomCount} active ${g.classroomCount===1?"classroom":"classrooms"}`),g.openAssignmentCount>0&&y.push(`${g.openAssignmentCount} open ${g.openAssignmentCount===1?"assignment":"assignments"}`),y.join(", ")+"."});function c(g){l.value=l.value===g?null:g}function f(g){n.value=!1,l.value=g.id,h()}function d(){o.value=!1,h()}function v(g){const y=t.currentUser.value;y&&s.clearPanel(y.id,g)}function h(){const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id,!0)}return _t(()=>{const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id)}),(g,y)=>(p(),m("div",Mx,[r("div",Ux,[r("h2",Fx,"Welcome back, "+b(i.value),1),r("p",jx,b(u.value),1)]),r("div",Hx,[r("button",{class:"action-btn create",onClick:y[0]||(y[0]=k=>n.value=!0)}," + New Classroom "),r("button",{class:"action-btn assign",onClick:y[1]||(y[1]=k=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),m("button",{key:0,class:"action-btn admin",onClick:y[2]||(y[2]=k=>g.$emit("show-admin"))}," Admin Panel ")):j("",!0)]),U(s).lobbyLoading.value&&!U(s).lobbyClassrooms.value.length?(p(),m("div",Wx,[...y[11]||(y[11]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):(p(),m("div",Kx,[r("div",Vx,[U(s).lobbyClassrooms.value.length?(p(),m("div",Gx,[y[12]||(y[12]=r("h3",{class:"section-title"},"My Classrooms",-1)),r("div",zx,[(p(!0),m(X,null,ie(U(s).lobbyClassrooms.value,k=>(p(),Fe(Sk,{key:k.id,classroom:k,expanded:l.value===k.id,onToggle:$=>c(k.id),onMemberRemoved:h,onViewAssignment:y[3]||(y[3]=$=>a.value=$)},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),m("div",Jx,[...y[13]||(y[13]=[r("p",{class:"empty-title"},"No classrooms yet",-1),r("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),r("div",Yx,[ge(Tx,{items:U(s).needsAttention.value,onClear:y[4]||(y[4]=k=>v("attention"))},null,8,["items"]),ge(Bx,{events:U(s).recentActivity.value,onClear:y[5]||(y[5]=k=>v("activity"))},null,8,["events"])])])),r("div",qx,[y[14]||(y[14]=r("h3",{class:"section-title"},"Lesson Collections",-1)),ge(ll,{onSelectCollection:y[6]||(y[6]=k=>g.$emit("select-collection",k)),onLoadFile:y[7]||(y[7]=k=>g.$emit("load-file",k))})]),n.value?(p(),Fe(Ok,{key:2,onClose:y[8]||(y[8]=k=>n.value=!1),onClassroomCreated:f})):j("",!0),o.value?(p(),Fe(Xk,{key:3,onClose:y[9]||(y[9]=k=>o.value=!1),onAssignmentCreated:d})):j("",!0),a.value?(p(),Fe(_x,{key:4,"assignment-id":a.value,onClose:y[10]||(y[10]=k=>a.value=null)},null,8,["assignment-id"])):j("",!0)]))}},Qx=Se(Xx,[["__scopeId","data-v-364209cc"]]),Gu="https://api.bridge-classroom.com/api",zu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Ju=O(null),Yu=O([]),qu=O(null),Xu=O(null),_r=O(!1),wr=O(null),Ha=O(null),Zx=60*1e3;async function Qu(e=!1){if(!e&&Ha.value&&Date.now()-new Date(Ha.value).getTime()<Zx)return{success:!0,cached:!0};_r.value=!0,wr.value=null;try{const t=await fetch(`${Gu}/admin/stats`,{headers:{"x-api-key":zu}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Ju.value=s.stats,Yu.value=s.popular_lessons||[],qu.value=s.database,Ha.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),wr.value=t.message,{success:!1,error:t.message}}finally{_r.value=!1}}async function Zu(){try{const e=await fetch(`${Gu}/admin/health`,{headers:{"x-api-key":zu}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Xu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function eA(){await Promise.all([Qu(!0),Zu()])}function tA(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function sA(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function ul(){return{stats:Ju,popularLessons:Yu,database:qu,health:Xu,loading:_r,error:wr,loadStats:Qu,loadHealth:Zu,refreshAll:eA,formatBytes:tA,formatUptime:sA}}const nA={class:"stats-row"},oA={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},aA={class:"stat-number"},rA={class:"stat-card",style:{"border-top-color":"#1565c0"}},lA={class:"stat-number"},iA={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},cA={class:"stat-number"},uA={class:"stat-card",style:{"border-top-color":"#e65100"}},dA={class:"stat-number"},fA={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,l,i;return p(),m("div",nA,[r("div",oA,[r("div",aA,b(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=r("div",{class:"stat-label"},"Total Users",-1))]),r("div",rA,[r("div",lA,b(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=r("div",{class:"stat-label"},"Active (7d)",-1))]),r("div",iA,[r("div",cA,b(t((l=e.stats)==null?void 0:l.observation_count_7d)),1),n[2]||(n[2]=r("div",{class:"stat-label"},"Observations (7d)",-1))]),r("div",uA,[r("div",dA,b(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=r("div",{class:"stat-label"},"Active Today",-1))])])}}},pA=Se(fA,[["__scopeId","data-v-a14a2199"]]),vA={class:"popular-lessons"},mA={key:0,class:"empty-state"},hA={key:1,class:"table-wrap"},gA={class:"lessons-table"},yA={class:"lesson-name"},bA={class:"num-col"},_A={class:"num-col"},wA={class:"num-col"},SA={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),m("div",vA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),m("div",hA,[r("table",gA,[o[0]||(o[0]=r("thead",null,[r("tr",null,[r("th",null,"Lesson"),r("th",{class:"num-col"},"Plays"),r("th",{class:"num-col"},"Users"),r("th",{class:"num-col"},"Accuracy")])],-1)),r("tbody",null,[(p(!0),m(X,null,ie(e.lessons.slice(0,15),a=>(p(),m("tr",{key:a.deal_subfolder},[r("td",yA,b(t(a.deal_subfolder)),1),r("td",bA,b(a.play_count.toLocaleString()),1),r("td",_A,b(a.unique_users),1),r("td",wA,[r("span",{class:ce(["accuracy-badge",s(a.accuracy_pct)])},b(a.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),m("div",mA,"No lesson data yet."))]))}},CA=Se(SA,[["__scopeId","data-v-079bd4f8"]]),$A={class:"database-panel"},kA={key:0,class:"empty-state"},xA={class:"db-size"},AA={class:"tables-table"},TA={class:"table-name"},NA={class:"num-col"},EA={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=ul();return(s,n)=>(p(),m("div",$A,[n[2]||(n[2]=r("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),m(X,{key:1},[r("div",xA,[n[0]||(n[0]=Te(" SQLite file: ",-1)),r("strong",null,b(U(t)(e.database.file_size_bytes)),1)]),r("table",AA,[n[1]||(n[1]=r("thead",null,[r("tr",null,[r("th",null,"Table"),r("th",{class:"num-col"},"Rows")])],-1)),r("tbody",null,[(p(!0),m(X,null,ie(e.database.tables,o=>(p(),m("tr",{key:o.name},[r("td",TA,b(o.name),1),r("td",NA,b(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),m("div",kA,"Loading..."))]))}},OA=Se(EA,[["__scopeId","data-v-d5945aff"]]),IA={class:"system-health"},PA={class:"health-header"},DA=["disabled"],RA={key:0,class:"empty-state"},LA={key:1,class:"health-rows"},BA={class:"health-row"},MA={class:"health-value"},UA={class:"health-row"},FA={class:"health-value"},jA={class:"health-row"},HA={class:"health-value"},WA={class:"health-row"},KA={class:"health-value"},VA={class:"health-row"},GA={class:"health-value"},zA={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=ul();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(n,o)=>(p(),m("div",IA,[r("div",PA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"System Health",-1)),r("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},b(e.refreshing?"Refreshing...":"Refresh"),9,DA)]),e.health?(p(),m("div",LA,[r("div",BA,[o[2]||(o[2]=r("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=r("span",{class:"health-label"},"API Server",-1)),r("span",MA,"Up "+b(U(t)(e.health.uptime_seconds)),1)]),r("div",UA,[r("span",{class:ce(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=r("span",{class:"health-label"},"Database",-1)),r("span",FA,b(e.health.database_writable?"Writable":"Error"),1)]),r("div",jA,[r("span",{class:ce(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=r("span",{class:"health-label"},"Last Observation",-1)),r("span",HA,b(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),r("div",WA,[o[6]||(o[6]=r("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=r("span",{class:"health-label"},"Disk",-1)),r("span",KA,b(e.health.disk_available_gb)+" GB / "+b(e.health.disk_total_gb)+" GB available",1)]),r("div",VA,[o[8]||(o[8]=r("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=r("span",{class:"health-label"},"API Version",-1)),r("span",GA,"v"+b(e.health.api_version),1)])])):(p(),m("div",RA,"Loading..."))]))}},JA=Se(zA,[["__scopeId","data-v-0d4e96d5"]]),YA={class:"admin-lobby"},qA={class:"admin-header"},XA={key:0,class:"admin-subtitle"},QA={key:0,class:"loading-state"},ZA={key:1,class:"error-state"},e2={class:"announcement-section"},t2={class:"announcement-info"},s2=["innerHTML"],n2={key:0,class:"announcement-expires"},o2={key:1,class:"announcement-expires"},a2={class:"announcement-actions"},r2=["disabled"],l2={key:1,class:"announcement-form"},i2={class:"form-row"},c2=["disabled"],u2={class:"content-grid"},d2={class:"name-correction-section"},f2={class:"search-row"},p2=["disabled"],v2={key:0,class:"search-results"},m2=["onClick"],h2={class:"result-name"},g2={class:"result-email"},y2={key:0,class:"corrected-badge"},b2={key:1,class:"no-results"},_2={key:2,class:"edit-form"},w2={class:"edit-row"},S2={class:"edit-field"},C2={class:"edit-field"},$2=["disabled"],k2={key:0,class:"save-feedback success"},x2={key:1,class:"save-feedback error"},A2={class:"decrypt-section"},T2={class:"decrypt-actions"},N2=["disabled"],E2={key:0,class:"decrypt-progress"},O2={key:0},I2={key:0},P2={key:1},D2={key:1},R2={key:2,class:"decrypt-hint"},L2={__name:"AdminLobby",emits:["back"],setup(e){const t=ul(),s=rl(),n=O(!1),o=O(""),a=O("info"),l=O(""),i=O(!1),u=O(!1),c=O(!1);function f(){const x=s.announcement.value;if(x){if(o.value=x.message,a.value=x.type,x.expires_at){const C=new Date(x.expires_at);l.value=new Date(C.getTime()-C.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else l.value="";c.value=!0}}function d(){c.value=!1,o.value="",a.value="info",l.value=""}async function v(){if(o.value.trim()){i.value=!0;try{const x=l.value?new Date(l.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,x),o.value="",a.value="info",l.value="",c.value=!1}catch(x){console.error("Failed to publish announcement:",x)}finally{i.value=!1}}}async function h(){u.value=!0;try{await s.clearAnnouncement()}catch(x){console.error("Failed to clear announcement:",x)}finally{u.value=!1}}function g(x){return x?new Date(x).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function k(x){return x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(q,be)=>{const xe=y[be.toLowerCase()];return xe?`<span class="ann-circle" style="background:${xe.bg};color:${xe.fg}"></span>`:q})}const $="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",w=O(""),T=O([]),D=O(!1),B=O(!1),M=O(null),z=O(""),K=O(""),fe=O(!1),me=O(!1),pe=O("");async function ye(){if(w.value.trim()){B.value=!0,D.value=!1,T.value=[],M.value=null,me.value=!1,pe.value="";try{const x=await fetch(`${$}/admin/users/search?q=${encodeURIComponent(w.value.trim())}`,{headers:{"x-api-key":_}});if(!x.ok)throw new Error(`Search failed: ${x.status}`);const C=await x.json();T.value=C.users||[]}catch(x){console.error("User search failed:",x)}finally{B.value=!1,D.value=!0}}}function Ae(x){M.value=x,z.value=x.first_name,K.value=x.last_name,me.value=!1,pe.value=""}async function de(){if(!(!M.value||!z.value.trim()||!K.value.trim())){fe.value=!0,me.value=!1,pe.value="";try{const x=await fetch(`${$}/admin/users/${encodeURIComponent(M.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:z.value.trim(),last_name:K.value.trim()})});if(!x.ok)throw new Error(`Save failed: ${x.status}`);const C=await x.json();C.success&&(me.value=!0,M.value.first_name=C.user.first_name,M.value.last_name=C.user.last_name,M.value.name_corrected_at=C.user.name_corrected_at)}catch(x){pe.value=x.message}finally{fe.value=!1}}}const ve=O(!1),Z=O(null);async function ee(){ve.value=!0,Z.value=null;try{const x=await fetch(`${$}/admin/decrypt-observations`,{method:"POST",headers:{"x-api-key":_}});if(!x.ok){const C=await x.text();Z.value={success:!1,error:`HTTP ${x.status}: ${C}`};return}Z.value=await x.json()}catch(x){Z.value={success:!1,error:x.message}}finally{ve.value=!1}}async function ne(){await Promise.all([t.loadStats(),t.loadHealth()])}async function Q(){n.value=!0,await t.refreshAll(),n.value=!1}return _t(ne),(x,C)=>(p(),m("div",YA,[r("div",qA,[r("button",{class:"back-btn",onClick:C[0]||(C[0]=q=>x.$emit("back"))}," Back to Dashboard"),C[7]||(C[7]=r("h2",{class:"admin-title"},"Admin Dashboard",-1)),U(t).stats.value?(p(),m("p",XA,b(U(t).stats.value.total_observations.toLocaleString())+" total observations across "+b(U(t).stats.value.total_users)+" users ",1)):j("",!0)]),U(t).loading.value&&!U(t).stats.value?(p(),m("div",QA,[...C[8]||(C[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):U(t).error.value?(p(),m("div",ZA,[r("p",null,b(U(t).error.value),1),r("button",{class:"retry-btn",onClick:ne},"Retry")])):U(t).stats.value?(p(),m(X,{key:2},[r("div",e2,[C[10]||(C[10]=r("h3",{class:"section-title"},"Site Announcement",-1)),U(s).announcement.value&&!c.value?(p(),m("div",{key:0,class:ce(["current-announcement",U(s).announcement.value.type])},[r("div",t2,[r("span",{class:ce(["announcement-type-badge",U(s).announcement.value.type])},b(U(s).announcement.value.type),3),r("span",{class:"announcement-message",innerHTML:k(U(s).announcement.value.message)},null,8,s2),U(s).announcement.value.expires_at?(p(),m("span",n2," Expires: "+b(g(U(s).announcement.value.expires_at)),1)):(p(),m("span",o2,"No expiration"))]),r("div",a2,[r("button",{class:"edit-btn",onClick:f},"Edit"),r("button",{class:"clear-btn",onClick:h,disabled:u.value},b(u.value?"Clearing...":"Clear"),9,r2)])],2)):c.value||!U(s).announcement.value?(p(),m("div",l2,[je(r("input",{"onUpdate:modelValue":C[1]||(C[1]=q=>o.value=q),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Vo(v,["enter"])},null,544),[[Ct,o.value]]),r("div",i2,[je(r("select",{"onUpdate:modelValue":C[2]||(C[2]=q=>a.value=q),class:"type-select"},[...C[9]||(C[9]=[r("option",{value:"info"},"Info",-1),r("option",{value:"warning"},"Warning",-1),r("option",{value:"urgent"},"Urgent",-1)])],512),[[Wn,a.value]]),je(r("input",{"onUpdate:modelValue":C[3]||(C[3]=q=>l.value=q),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[Ct,l.value]]),c.value?(p(),m("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):j("",!0),r("button",{class:"publish-btn",onClick:v,disabled:!o.value.trim()||i.value},b(i.value?"Publishing...":c.value?"Update":"Publish"),9,c2)])])):j("",!0)]),ge(pA,{stats:U(t).stats.value},null,8,["stats"]),r("div",u2,[ge(CA,{lessons:U(t).popularLessons.value},null,8,["lessons"]),ge(OA,{database:U(t).database.value},null,8,["database"])]),ge(JA,{health:U(t).health.value,refreshing:n.value,onRefresh:Q},null,8,["health","refreshing"]),r("div",d2,[C[13]||(C[13]=r("h3",{class:"section-title"},"Correct User Name",-1)),r("div",f2,[je(r("input",{"onUpdate:modelValue":C[4]||(C[4]=q=>w.value=q),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Vo(ye,["enter"])},null,544),[[Ct,w.value]]),r("button",{class:"search-btn",onClick:ye,disabled:B.value||!w.value.trim()},b(B.value?"Searching...":"Search"),9,p2)]),T.value.length?(p(),m("div",v2,[(p(!0),m(X,null,ie(T.value,q=>(p(),m("div",{key:q.id,class:ce(["search-result-item",{selected:M.value&&M.value.id===q.id}]),onClick:be=>Ae(q)},[r("span",h2,b(q.first_name)+" "+b(q.last_name),1),r("span",g2,b(q.email),1),q.name_corrected_at?(p(),m("span",y2,"corrected")):j("",!0)],10,m2))),128))])):j("",!0),D.value&&!T.value.length?(p(),m("div",b2,' No users found for "'+b(w.value)+'" ',1)):j("",!0),M.value?(p(),m("div",_2,[r("div",w2,[r("div",S2,[C[11]||(C[11]=r("label",null,"First Name",-1)),je(r("input",{"onUpdate:modelValue":C[5]||(C[5]=q=>z.value=q),type:"text",class:"edit-input"},null,512),[[Ct,z.value]])]),r("div",C2,[C[12]||(C[12]=r("label",null,"Last Name",-1)),je(r("input",{"onUpdate:modelValue":C[6]||(C[6]=q=>K.value=q),type:"text",class:"edit-input"},null,512),[[Ct,K.value]])]),r("button",{class:"save-btn",onClick:de,disabled:fe.value||!z.value.trim()||!K.value.trim()},b(fe.value?"Saving...":"Save"),9,$2)]),me.value?(p(),m("p",k2,"Name corrected successfully.")):j("",!0),pe.value?(p(),m("p",x2,b(pe.value),1)):j("",!0)])):j("",!0)]),r("div",A2,[C[19]||(C[19]=r("h3",{class:"section-title"},"Observation Decryption",-1)),C[20]||(C[20]=r("p",{class:"decrypt-description"},[Te(" Decrypt all observations using RECOVERY_SECRET and populate the "),r("code",null,"observations_decrypted"),Te(" table for inspection and backfill. ")],-1)),r("div",T2,[r("button",{class:"decrypt-btn",onClick:ee,disabled:ve.value},b(ve.value?"Decrypting...":"Decrypt All Observations"),9,N2)]),ve.value?(p(),m("div",E2,[...C[14]||(C[14]=[r("div",{class:"spinner"},null,-1),r("p",null,"Processing observations (this may take a minute)...",-1)])])):j("",!0),Z.value?(p(),m("div",{key:1,class:ce(["decrypt-result",{error:!Z.value.success}])},[Z.value.success?(p(),m("p",O2,[C[15]||(C[15]=Te(" Decrypted ",-1)),r("strong",null,b(Z.value.observations_decrypted.toLocaleString()),1),C[16]||(C[16]=Te(" observations from ",-1)),r("strong",null,b(Z.value.users_processed),1),C[17]||(C[17]=Te(" users. ",-1)),Z.value.users_skipped?(p(),m("span",I2," ("+b(Z.value.users_skipped)+" users skipped  no recovery key)",1)):j("",!0),Z.value.errors?(p(),m("span",P2," | "+b(Z.value.errors)+" errors",1)):j("",!0)])):(p(),m("p",D2,"Decryption failed: "+b(Z.value.error),1)),Z.value.success?(p(),m("p",R2,[...C[18]||(C[18]=[Te(" Results in ",-1),r("code",null,"observations_decrypted",-1),Te(" table. Query via SQLite to inspect. ",-1)])])):j("",!0)],2)):j("",!0)])],64)):j("",!0)]))}},B2=Se(L2,[["__scopeId","data-v-a782c5e0"]]),M2={class:"lobby-view"},U2={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=He(),s=Sn(),n=O(!1),o=E(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=E(()=>s.studentAssignments.value.length>0),l=E(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return _t(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,u)=>(p(),m("div",M2,[n.value?(p(),Fe(B2,{key:0,onBack:u[0]||(u[0]=c=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),Fe(Qx,{key:1,"is-admin":o.value==="admin",onSelectCollection:u[1]||(u[1]=c=>i.$emit("select-collection",c)),onShowAdmin:u[2]||(u[2]=c=>n.value=!0),onLoadFile:u[3]||(u[3]=c=>i.$emit("load-file",c))},null,8,["is-admin"])):a.value||l.value?(p(),Fe(E$,{key:2,onSelectCollection:u[4]||(u[4]=c=>i.$emit("select-collection",c)),onSelectAssignment:u[5]||(u[5]=c=>i.$emit("select-assignment",c)),onLoadFile:u[6]||(u[6]=c=>i.$emit("load-file",c))})):(p(),Fe(p$,{key:3,onSelectCollection:u[7]||(u[7]=c=>i.$emit("select-collection",c)),onShowBecomeTeacher:u[8]||(u[8]=c=>i.$emit("show-become-teacher")),onLoadFile:u[9]||(u[9]=c=>i.$emit("load-file",c))}))]))}},F2=Se(U2,[["__scopeId","data-v-d84f343d"]]),j2={class:"modal-content"},H2={key:0,class:"step step-overview"},W2={class:"step-actions"},K2={key:1,class:"step step-agreement"},V2={class:"agreement-checkbox"},G2={class:"step-actions"},z2=["disabled"],J2={key:0,class:"error-text"},Y2={key:2,class:"step step-confirmation"},q2={class:"step-actions"},X2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=He(),o=O(1),a=O(!1),l=O(!1),i=O(null);async function u(){const c=n.currentUser.value;if(c){l.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:c.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(c.id,{role:"teacher"});try{const{publicKey:v,privateKey:h}=await im();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${c.firstName} ${c.lastName}`,email:c.email,public_key:v,private_key:h,role:"teacher"})}),n.updateUser(c.id,{viewerPrivateKey:h}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:h,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(v){console.warn("Failed to create viewer record:",v)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{l.value=!1}}}return(c,f)=>(p(),m("div",{class:"modal-overlay",onClick:f[5]||(f[5]=nt(d=>c.$emit("close"),["self"]))},[r("div",j2,[o.value===1?(p(),m("div",H2,[f[6]||(f[6]=so('<h2 data-v-8bdcc044>Become a Teacher</h2><p class="step-desc" data-v-8bdcc044>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-8bdcc044><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Create Classrooms</strong><p data-v-8bdcc044>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Assign Exercises</strong><p data-v-8bdcc044>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Track Progress</strong><p data-v-8bdcc044>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-8bdcc044><strong data-v-8bdcc044>Still a Student Too</strong><p data-v-8bdcc044>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),r("div",W2,[r("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>c.$emit("close"))},"Not Now"),r("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(p(),m("div",K2,[f[8]||(f[8]=so('<h2 data-v-8bdcc044>Teacher Agreement</h2><p class="step-desc" data-v-8bdcc044>Please review and accept the terms below.</p><div class="terms-scroll" data-v-8bdcc044><h4 data-v-8bdcc044>Service Availability</h4><p data-v-8bdcc044>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-8bdcc044>Data &amp; Storage</h4><p data-v-8bdcc044>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-8bdcc044>Student Data &amp; Privacy</h4><p data-v-8bdcc044>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-8bdcc044><li data-v-8bdcc044>Use student data for educational purposes only</li><li data-v-8bdcc044>Not share student data publicly or with unauthorized parties</li><li data-v-8bdcc044>Respect that students can revoke your access at any time</li></ul><h4 data-v-8bdcc044>Your Responsibilities</h4><p data-v-8bdcc044>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-8bdcc044>No Warranty</h4><p data-v-8bdcc044>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-8bdcc044>Open Source</h4><p data-v-8bdcc044>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),r("label",V2,[je(r("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d)},null,512),[[Hr,a.value]]),f[7]||(f[7]=r("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),r("div",G2,[r("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),r("button",{class:"btn btn-primary",disabled:!a.value||l.value,onClick:u},b(l.value?"Activating...":"Activate Teacher Account"),9,z2)]),i.value?(p(),m("p",J2,b(i.value),1)):j("",!0)])):o.value===3?(p(),m("div",Y2,[f[9]||(f[9]=r("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=r("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=r("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=r("ol",{class:"next-steps"},[r("li",null,"Create your first classroom from the teacher dashboard"),r("li",null,"Share the invite link with your students"),r("li",null,"Browse exercises and assign them to your class")],-1)),r("div",q2,[r("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>c.$emit("activated"))},"Go to Dashboard ")])])):j("",!0)])]))}},Q2=Se(X2,[["__scopeId","data-v-8bdcc044"]]),Z2={},eT={class:"page-footer"};function tT(e,t){return p(),m("footer",eT,[...t[0]||(t[0]=[r("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),r("nav",{class:"footer-links"},[r("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),r("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const sT=Se(Z2,[["render",tT],["__scopeId","data-v-1b649814"]]),nT={key:1,class:"app"},oT={class:"app-header"},aT={class:"header-right"},rT=["title"],lT={key:3,class:"stats"},iT={class:"correct"},cT={class:"wrong"},uT={class:"user-avatar-group"},dT=["title"],fT=["title"],pT={class:"app-main"},vT={key:3,class:"collection-view"},mT={key:4,class:"practice-layout"},hT={class:"practice-left"},gT={class:"practice-right"},yT={key:1,class:"commentary-panel"},bT=["innerHTML"],_T=["innerHTML"],wT=["innerHTML"],ST=["innerHTML"],CT={class:"commentary-controls"},$T={key:0,class:"bidding-box-wrapper"},kT={key:1,class:"card-choice-prompt"},xT=["innerHTML"],AT={key:3,class:"completion-controls"},TT={key:0,class:"registration-toast"},NT={__name:"MainLayout",setup(e){const t=jv(),s=vo(),n=He(),o=ga(),a=Bu(),l=_n(),i=rl(),u=Sn(),c=Qm(),f=O(!1),d=O(!1),v=O(!1),h=O(!1),g=O(null),y=O(""),k=O(null),$=O(null),_=O(null),w=O(!1),T=O({}),D=O(null),B=O(!1),M=O(!1),z=O(null);function K(P,R=".current"){if(!P)return;const Y=P.querySelector(R);Y&&(P.scrollTop=Y.offsetTop-P.offsetTop)}ut(()=>c.currentStepIndex.value,()=>{Qn(()=>{K(k.value,".narrative-text.current")})}),ut(()=>c.isComplete.value,P=>{P&&Qn(()=>{K(k.value,".narrative-text.current")})});const fe=E(()=>n.isAuthenticated.value),me=E(()=>{const P=n.currentUser.value;return P?`${P.firstName} ${P.lastName}`:""}),pe=E(()=>{const P=n.currentUser.value;return P?`${P.firstName.charAt(0)}${P.lastName.charAt(0)}`.toUpperCase():"?"}),ye=E(()=>{const P=n.currentUser.value;return(P==null?void 0:P.role)||"student"}),Ae=E(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let de=null;_t(()=>{i.loadAnnouncement(),de=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),Br(()=>{de&&clearInterval(de)}),_t(async()=>{s.initializeFromUrl(),n.initialize();const P=new URLSearchParams(window.location.search);P.get("recover")&&P.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),c.observationStore.initialize();const R=s.getCollectionFromUrl(),Y=s.getLessonFromUrl();R&&($.value=R,Y&&await H(R,Y)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),bs().initialize(),await l.checkTeacherStatus())});async function ve(P){console.log("User ready:",P.firstName,P.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),M.value=!0,setTimeout(()=>{M.value=!1},4e3)),await a.initialize(),bs().initialize(),await l.checkTeacherStatus();const Y=sessionStorage.getItem("pendingJoinCode");if(Y){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:Y}});return}}function Z(){bs().reset(),Zr().clearCache(),cs().reset(),l.reset(),ne.value=[],Q.value=0,$.value=null,_.value=null,c.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,f.value=!1,h.value=!1,g.value=null}async function ee(){w.value=!1,await l.checkTeacherStatus()}const ne=O([]),Q=O(0),x=E(()=>ne.value[Q.value]||null),C=E(()=>{var re;const P=F($.value),R=P!=null&&P.name?`${P.name} - `:"";if((re=_.value)!=null&&re.name)return R+_.value.name;if(!x.value)return"";const Y=x.value.subfolder||x.value.category||"";return Y?R+Y:""});ut(Q,()=>{x.value&&(c.loadDeal(x.value),s.setDealInUrl(x.value.boardNumber))},{flush:"sync"}),ut(()=>c.observationStore.pendingCount.value,(P,R)=>{P>R&&a.triggerSync()}),ut(()=>c.isComplete.value,P=>{if(P&&x.value){const R=x.value.boardNumber,Y=c.boardState.boardHadWrong,re=Y&&Object.keys(c.boardState.wrongStepIndices).length===0,le=Y?re?"yellow":"red":"green";T.value={...T.value,[R]:le}}});async function q(P){const R=P.target.files[0];if(R)try{const Y=await R.text(),re=$o(Y);if(re.length>0){const le=R.name.replace(/\.pbn$/i,""),Ne=re.map(we=>({...we,subfolder:we.subfolder||le,category:we.category||le}));ne.value=Ne,Q.value=0,c.loadDeal(Ne[0]),c.resetStats(),gs().saveLessonBoardNumbers(le,Ne.map(we=>we.boardNumber)),_.value={id:le,name:le,category:le}}else alert("No deals found in the PBN file")}catch(Y){console.error("Error loading PBN file:",Y),alert("Error loading PBN file: "+Y.message)}}function be({subfolder:P,name:R,category:Y,content:re}){const le=$o(re);if(le.length>0){const Ne=le.map(we=>({...we,subfolder:we.subfolder||P,category:we.category||Y}));ne.value=Ne,Q.value=0,c.loadDeal(Ne[0]),c.resetStats(),gs().saveLessonBoardNumbers(P,Ne.map(we=>we.boardNumber)),_.value={id:P,name:R,category:Y},s.setLessonInUrl(P),B.value=!1,ae()}else alert("No deals found in the lesson file")}const xe=E(()=>c.boardState.correctCount),$e=E(()=>c.boardState.wrongCount);function W(P){const R=c.makeBid(P);x.value&&oe(R)}function se({seat:P,suit:R,rank:Y}){const re=c.makeCardChoice(R,Y);x.value&&oe(re)}function oe(P){const R=x.value.boardNumber;if(!P)T.value={...T.value,[R]:"red"};else if(c.boardState.boardHadWrong){const Y=Object.keys(c.boardState.wrongStepIndices).length===0;T.value={...T.value,[R]:Y?"yellow":"red"}}}function ue(){c.clearCardFeedback(),c.goBack()}function ke(){Q.value<ne.value.length-1&&(Q.value++,c.loadDeal(ne.value[Q.value]))}function S(P){P>=0&&P<ne.value.length&&(Q.value=P,c.loadDeal(ne.value[P]))}async function A({subfolder:P,dealNumber:R}){var Y;if(((Y=_.value)==null?void 0:Y.id)===P&&ne.value.length>0){const re=ne.value.findIndex(le=>le.boardNumber===R);if(re>=0){S(re);return}}for(const re of s.COLLECTIONS)try{const le=P.includes("/")?P.split("/").pop():P,Ne=`${re.baseUrl}/${le}.pbn`,_e=await fetch(Ne);if(!_e.ok)continue;const we=await _e.text();$.value=re.id,s.setCollectionInUrl(re.id),be({subfolder:P,name:P,category:"",content:we});const ze=ne.value.findIndex(pt=>pt.boardNumber===R);ze>=0&&S(ze);return}catch{}}function L(P){v.value=!1,h.value=!1,g.value=null,A(P)}function V(P,R){h.value=!1,g.value=null,A({subfolder:P,dealNumber:R||1})}function J(){_.value=null,s.setLessonInUrl(null),ne.value=[],Q.value=0,c.resetStats(),B.value=!1,D.value=null,h.value=!1,g.value=null}function G(){$.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),ne.value=[],Q.value=0,c.resetStats(),B.value=!1,D.value=null,h.value=!1,g.value=null}async function ae(){if(D.value=null,!$.value||!_.value)return;const P=F($.value);if(!P)return;const R=_.value.id,Y=R.includes("/")?R.split("/").pop():R,re=`${P.baseUrl}/${Y}_Intro.pdf`;try{(await fetch(re,{method:"HEAD"})).ok&&(D.value=re)}catch{}}function te(P){window.innerWidth<600?window.open(P,"_blank"):(z.value=P,B.value=!0)}function N(P){$.value=P,s.setCollectionInUrl(P)}async function I(P){const R=await u.fetchExerciseBoards(P.exercise_id);if(!R||R.length===0){alert("Could not load exercise boards.");return}const Y=_e=>`${_e.collection_id||""}|${_e.deal_subfolder}`,re=new Map;for(const _e of R){const we=Y(_e);re.has(we)||re.set(we,[]),re.get(we).push(_e)}const le=[];for(const[,_e]of re){const we=_e[0].deal_subfolder,ze=_e[0].collection_id,pt=we.includes("/")?we.split("/").pop():we;let vt=null;if(ze){const Me=F(ze);if(Me)try{const Xe=`${Me.baseUrl}/${pt}.pbn`,mt=await fetch(Xe);mt.ok&&(vt=await mt.text())}catch{}}if(!vt)for(const Me of s.COLLECTIONS)try{const Xe=`${Me.baseUrl}/${pt}.pbn`,mt=await fetch(Xe);if(mt.ok){vt=await mt.text();break}}catch{}if(!vt){console.warn(`Could not load PBN for subfolder: ${we}`);continue}const Ye=$o(vt),et=new Set(_e.map(Me=>Me.deal_number));for(const Me of Ye)if(et.has(Me.boardNumber)){const Xe=_e.find(mt=>mt.deal_number===Me.boardNumber);le.push({...Me,subfolder:Me.subfolder||we,category:Me.category||we,_sortOrder:(Xe==null?void 0:Xe.sort_order)??999})}}if(le.length===0){alert("Could not find any of the assigned boards.");return}le.sort((_e,we)=>_e._sortOrder-we._sortOrder),ne.value=le,Q.value=0,c.loadDeal(le[0]),c.resetStats(),gs().saveLessonBoardNumbers(P.exercise_name,le.map(_e=>_e.boardNumber)),_.value={id:P.exercise_name,name:P.exercise_name,category:"Assignment"}}function F(P){return s.COLLECTIONS.find(R=>R.id===P)}async function H(P,R){var re;const Y=F(P);if(!Y)return console.error("Collection not found:",P),!1;try{const le=await fetch(Y.tocUrl);if(!le.ok)throw new Error(`Failed to load TOC: ${le.statusText}`);const Ne=await le.json();let _e=null,we=null;for(const Me of Ne.categories||[]){const Xe=(re=Me.lessons)==null?void 0:re.find(mt=>mt.id===R);if(Xe){_e=Xe,we=Me;break}}if(!_e)return console.error("Lesson not found in TOC:",R),!1;const ze=R.includes("/")?R.split("/").pop():R,pt=`${Y.baseUrl}/${ze}.pbn`,vt=await fetch(pt);if(!vt.ok)throw new Error(`Failed to load lesson: ${vt.statusText}`);const Ye=await vt.text(),et=$o(Ye);if(et.length>0){const Me=et.map(us=>({...us,subfolder:us.subfolder||R,category:us.category||we.name}));ne.value=Me;const Xe=s.getDealFromUrl(),mt=Xe?Me.findIndex(us=>us.boardNumber===Xe):-1;return Q.value=mt>=0?mt:0,c.loadDeal(Me[Q.value]),c.resetStats(),_.value={id:R,name:_e.name,category:we.name},ae(),!0}return!1}catch(le){return console.error("Error loading lesson from URL:",le),!1}}return(P,R)=>{var Y,re,le,Ne,_e,we,ze,pt,vt,Ye,et,Me,Xe,mt,us,dl;return fe.value?(p(),m("div",nT,[r("header",oT,[r("h1",null,b(ne.value.length?C.value:Ae.value),1),r("div",aT,[ge(P_),r("button",{class:"progress-btn",onClick:R[0]||(R[0]=Re=>d.value=!0),title:"View Progress"}," Progress "),r("button",{class:"accomplishments-btn",onClick:R[1]||(R[1]=Re=>v.value=!0),title:"View Accomplishments"}," Accomplishments "),U(l).isTeacher.value?(p(),m("button",{key:0,class:"teacher-btn",onClick:R[2]||(R[2]=Re=>{h.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):j("",!0),ne.value.length&&$.value?(p(),m("button",{key:1,class:"lessons-btn",onClick:J,title:"Back to "+((Y=F($.value))==null?void 0:Y.name)},b((re=F($.value))==null?void 0:re.name),9,rT)):j("",!0),$.value||ne.value.length?(p(),m("button",{key:2,class:"lobby-btn",onClick:G,title:"Return to lobby"}," Lobby ")):j("",!0),xe.value+$e.value>0?(p(),m("div",lT,[r("span",iT,b(xe.value),1),r("span",cT,b($e.value),1)])):j("",!0),r("div",uT,[ye.value!=="student"?(p(),m("button",{key:0,class:ce(["role-badge","role-"+ye.value]),onClick:G,title:"Return to "+ye.value+" lobby"},b(ye.value),11,dT)):j("",!0),r("button",{class:"user-btn",onClick:R[3]||(R[3]=Re=>f.value=!0),title:me.value},b(pe.value),9,fT)])])]),r("main",pT,[ge(S_),ge(b_),h.value&&!g.value?(p(),Fe(KS,{key:0,onClose:R[4]||(R[4]=Re=>h.value=!1),onSelectStudent:R[5]||(R[5]=(Re,Cn)=>{g.value=Re,y.value=Cn})})):h.value&&g.value?(p(),Fe(_C,{key:1,studentId:g.value,studentName:y.value,onBack:R[6]||(R[6]=Re=>g.value=null),onNavigateToLesson:V},null,8,["studentId","studentName"])):!ne.value.length&&!$.value?(p(),Fe(F2,{key:2,onSelectCollection:N,onSelectAssignment:I,onShowBecomeTeacher:R[7]||(R[7]=Re=>w.value=!0),onLoadFile:q})):!ne.value.length&&$.value?(p(),m("div",vT,[r("h2",null,b(((le=F($.value))==null?void 0:le.name)||$.value),1),R[17]||(R[17]=r("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ge(zC,{visible:!0,inline:!0,collection:F($.value),onLoad:be},null,8,["collection"])])):(p(),m("div",mT,[r("div",hT,[ne.value.length>1?(p(),Fe(Hu,{key:0,boardNumbers:ne.value.map(Re=>Re.boardNumber),lessonSubfolder:((Ne=x.value)==null?void 0:Ne.subfolder)||((_e=x.value)==null?void 0:_e.category)||"",currentIndex:Q.value,forceBoardStatus:T.value,introUrl:D.value,onGoto:S,onOpenIntro:te},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceBoardStatus","introUrl"])):j("",!0),ge(_y,{boardNumber:(we=x.value)==null?void 0:we.boardNumber,dealer:(ze=x.value)==null?void 0:ze.dealer,vulnerable:(pt=x.value)==null?void 0:pt.vulnerable,contract:(vt=x.value)==null?void 0:vt.contract,declarer:(Ye=x.value)==null?void 0:Ye.declarer,showContract:U(c).auctionState.auctionComplete||U(c).showOpeningLead.value||U(c).hasSteps.value&&!U(c).hasBidSteps.value,openingLead:U(c).showOpeningLead.value?(et=x.value)==null?void 0:et.openingLead:"",totalDeals:ne.value.length,currentIndex:Q.value,dealBoardNumbers:ne.value.map(Re=>Re.boardNumber),onGoto:S},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ge(Mg,{hands:U(c).hands.value,hiddenSeats:U(c).hiddenSeats.value,showHcp:U(c).showHcp.value,compact:!0,clickableSeat:U(c).hasCardChoice.value?U(c).studentSeat.value:null,playedCards:U(c).showcardsPlayedCards.value,onCardClick:se},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),r("div",gT,[U(c).showAuctionTable.value?(p(),Fe(sy,{key:0,bids:U(c).hasBidSteps.value?U(c).auctionState.displayedBids:((Me=x.value)==null?void 0:Me.auction)||[],dealer:((Xe=x.value)==null?void 0:Xe.dealer)||"N",currentBidIndex:U(c).hasBidSteps.value?U(c).auctionState.currentBidIndex:-1,wrongBidIndex:U(c).auctionState.wrongBidIndex,correctBidIndex:U(c).auctionState.correctBidIndex,showTurnIndicator:U(c).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):j("",!0),ge($i,{visible:!!U(c).auctionState.wrongBid,type:"wrong",wrongBid:U(c).auctionState.wrongBid,correctBid:U(c).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ge($i,{visible:!!U(c).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:U(c).cardChoiceState.wrongCard,correctCardCode:U(c).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),U(c).hasSteps.value?(p(),m("div",yT,[r("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:k},[(p(!0),m(X,null,ie(U(c).steps.value.slice(0,U(c).currentStepIndex.value),(Re,Cn)=>(p(),m(X,{key:"prev-"+Cn},[Cn>=U(c).commentaryStartIndex.value?(p(),m(X,{key:0},[r("span",{class:"narrative-text previous",innerHTML:U(Js)(U(Nn)(Re.text))},null,8,bT),Re.type==="bid"&&Re.explanationText?(p(),m("span",{key:0,class:ce(["narrative-text",Cn===U(c).currentStepIndex.value-1&&U(c).isBidStep.value&&!U(c).bidAnswered.value?"current":"previous"]),innerHTML:U(Js)(U(Nn)(Re.explanationText))},null,10,_T)):j("",!0)],64)):j("",!0)],64))),128)),U(c).currentStep.value?(p(),m("span",{key:0,class:"narrative-text current",innerHTML:U(Js)(U(Nn)(U(c).currentStep.value.text))},null,8,wT)):j("",!0),U(c).bidAnswered.value&&((mt=U(c).currentStep.value)!=null&&mt.explanationText)?(p(),m("span",{key:1,class:"narrative-text current",innerHTML:U(Js)(U(Nn)(U(c).currentStep.value.explanationText))},null,8,ST)):j("",!0)],512),r("div",CT,[U(c).hasBidPrompt.value?(p(),m("div",$T,[ge(qg,{lastBid:U(c).lastContractBid.value,canDouble:U(c).canDouble.value,canRedouble:U(c).canRedouble.value,onBid:W},null,8,["lastBid","canDouble","canRedouble"])])):U(c).hasCardChoice.value?(p(),m("div",kT," Click on the card you would choose ")):j("",!0),U(c).canGoBack.value?(p(),m("button",{key:2,class:"instruction-btn secondary",onClick:ue},"  Back ")):j("",!0),!U(c).isComplete.value&&(U(c).bidAnswered.value||!U(c).hasBidPrompt.value&&!U(c).hasCardChoice.value&&U(c).currentStep.value&&U(c).currentStep.value.type!=="end")?(p(),m("button",{key:3,class:"instruction-btn primary",onClick:R[8]||(R[8]=Re=>U(c).advance())},b(((us=U(c).currentStep.value)==null?void 0:us.type)==="rotate"?"Rotate":"Next")+"  ",1)):j("",!0),U(c).isComplete.value&&Q.value<ne.value.length-1?(p(),m("button",{key:4,class:"next-deal-btn",onClick:ke}," Next Deal  ")):j("",!0)])])):(dl=x.value)!=null&&dl.commentary?(p(),m("div",{key:2,class:"display-commentary",innerHTML:U(Js)(U(Nn)(U(Qv)(x.value.commentary)))},null,8,xT)):j("",!0),!U(c).hasSteps.value&&U(c).isComplete.value&&Q.value<ne.value.length-1?(p(),m("div",AT,[r("button",{class:"next-deal-btn",onClick:ke}," Next Deal  ")])):j("",!0)])]))]),ge(i_,{visible:f.value,onClose:R[9]||(R[9]=Re=>f.value=!1),onSwitchUser:Z,onLogout:Z,onBecomeTeacher:R[10]||(R[10]=Re=>w.value=!0)},null,8,["visible"]),M.value?(p(),m("div",TT," Account created  your data is encrypted and linked to your email for recovery. ")):j("",!0),d.value?(p(),m("div",{key:1,class:"modal-overlay",onClick:R[12]||(R[12]=nt(Re=>d.value=!1,["self"]))},[ge(Aw,{onClose:R[11]||(R[11]=Re=>d.value=!1)})])):j("",!0),v.value?(p(),m("div",{key:2,class:"modal-overlay",onClick:R[14]||(R[14]=nt(Re=>v.value=!1,["self"]))},[ge(pS,{onClose:R[13]||(R[13]=Re=>v.value=!1),onNavigateToDeal:L})])):j("",!0),ge(t$,{visible:B.value,url:z.value||"",onClose:R[15]||(R[15]=Re=>B.value=!1)},null,8,["visible","url"]),w.value?(p(),Fe(Q2,{key:3,onClose:R[16]||(R[16]=Re=>w.value=!1),onActivated:ee})):j("",!0),ge(sT)])):(p(),Fe(xb,{key:0,onUserReady:ve}))}}},ET=()=>Pp(()=>import("./JoinClassroomView-B7ZjSB01.js"),__vite__mapDeps([0,1])),OT=[{path:"/join/:joinCode",name:"join",component:ET},{path:"/:pathMatch(.*)*",name:"app",component:NT}],IT=Fv({history:yv(),routes:OT});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const ed=kp(Ep);ed.use(IT);ed.mount("#app");export{Se as _,r as a,ge as b,m as c,j as d,Te as e,so as f,He as g,bo as h,cf as i,tu as j,jv as k,p as l,_t as o,O as r,b as t,PT as u,Wd as w};
