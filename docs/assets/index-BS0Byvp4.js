const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoinClassroomView-BgYf0HNN.js","assets/JoinClassroomView-D90zTq1t.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $r(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const De={},nn=[],Jt=()=>{},Ei=()=>!1,oa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),kr=e=>e.startsWith("onUpdate:"),rt=Object.assign,xr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},sd=Object.prototype.hasOwnProperty,Pe=(e,t)=>sd.call(e,t),ge=Array.isArray,on=e=>fo(e)==="[object Map]",_n=e=>fo(e)==="[object Set]",pl=e=>fo(e)==="[object Date]",Ce=e=>typeof e=="function",Ye=e=>typeof e=="string",Mt=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",Oi=e=>(Re(e)||Ce(e))&&Ce(e.then)&&Ce(e.catch),Ii=Object.prototype.toString,fo=e=>Ii.call(e),nd=e=>fo(e).slice(8,-1),Pi=e=>fo(e)==="[object Object]",Ar=e=>Ye(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bn=$r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aa=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},od=/-\w/g,It=aa(e=>e.replace(od,t=>t.slice(1).toUpperCase())),ad=/\B([A-Z])/g,Cs=aa(e=>e.replace(ad,"-$1").toLowerCase()),ra=aa(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sa=aa(e=>e?`on${ra(e)}`:""),gs=(e,t)=>!Object.is(e,t),Eo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Di=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},la=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let vl;const ia=()=>vl||(vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function et(e){if(ge(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ye(n)?cd(n):et(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Ye(e)||Re(e))return e}const rd=/;(?![^(]*\))/g,ld=/:([^]+)/,id=/\/\*[^]*?\*\//g;function cd(e){const t={};return e.replace(id,"").split(rd).forEach(s=>{if(s){const n=s.split(ld);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(Ye(e))t=e;else if(ge(e))for(let s=0;s<e.length;s++){const n=ie(e[s]);n&&(t+=n+" ")}else if(Re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ud="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dd=$r(ud);function Ri(e){return!!e||e===""}function fd(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=Us(e[n],t[n]);return s}function Us(e,t){if(e===t)return!0;let s=pl(e),n=pl(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Mt(e),n=Mt(t),s||n)return e===t;if(s=ge(e),n=ge(t),s||n)return s&&n?fd(e,t):!1;if(s=Re(e),n=Re(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const l in e){const i=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(i&&!u||!i&&u||!Us(e[l],t[l]))return!1}}return String(e)===String(t)}function Tr(e,t){return e.findIndex(s=>Us(s,t))}const Li=e=>!!(e&&e.__v_isRef===!0),b=e=>Ye(e)?e:e==null?"":ge(e)||Re(e)&&(e.toString===Ii||!Ce(e.toString))?Li(e)?b(e.value):JSON.stringify(e,Bi,2):String(e),Bi=(e,t)=>Li(t)?Bi(e,t.value):on(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[Ca(n,a)+" =>"]=o,s),{})}:_n(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Ca(s))}:Mt(t)?Ca(t):Re(t)&&!ge(t)&&!Pi(t)?String(t):t,Ca=(e,t="")=>{var s;return Mt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class pd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!t&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=wt;try{return wt=this,t()}finally{wt=s}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function vd(){return wt}let Me;const $a=new WeakSet;class Mi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$a.has(this)&&($a.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ml(this),ji(this);const t=Me,s=Rt;Me=this,Rt=!0;try{return this.fn()}finally{Hi(this),Me=t,Rt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Or(t);this.deps=this.depsTail=void 0,ml(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$a.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Va(this)&&this.run()}get dirty(){return Va(this)}}let Ui=0,Mn,Un;function Fi(e,t=!1){if(e.flags|=8,t){e.next=Un,Un=e;return}e.next=Mn,Mn=e}function Nr(){Ui++}function Er(){if(--Ui>0)return;if(Un){let t=Un;for(Un=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Mn;){let t=Mn;for(Mn=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function ji(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Hi(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),Or(n),md(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Va(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xn)||(e.globalVersion=Xn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Va(e))))return;e.flags|=2;const t=e.dep,s=Me,n=Rt;Me=e,Rt=!0;try{ji(e);const o=e.fn(e._value);(t.version===0||gs(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Me=s,Rt=n,Hi(e),e.flags&=-3}}function Or(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)Or(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function md(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Rt=!0;const Ki=[];function as(){Ki.push(Rt),Rt=!1}function rs(){const e=Ki.pop();Rt=e===void 0?!0:e}function ml(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Me;Me=void 0;try{t()}finally{Me=s}}}let Xn=0;class hd{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ir{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Me||!Rt||Me===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Me)s=this.activeLink=new hd(Me,this),Me.deps?(s.prevDep=Me.depsTail,Me.depsTail.nextDep=s,Me.depsTail=s):Me.deps=Me.depsTail=s,Vi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Me.depsTail,s.nextDep=void 0,Me.depsTail.nextDep=s,Me.depsTail=s,Me.deps===s&&(Me.deps=n)}return s}trigger(t){this.version++,Xn++,this.notify(t)}notify(t){Nr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Er()}}}function Vi(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Vi(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ga=new WeakMap,Ls=Symbol(""),za=Symbol(""),Qn=Symbol("");function dt(e,t,s){if(Rt&&Me){let n=Ga.get(e);n||Ga.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new Ir),o.map=n,o.key=s),o.track()}}function es(e,t,s,n,o,a){const l=Ga.get(e);if(!l){Xn++;return}const i=u=>{u&&u.trigger()};if(Nr(),t==="clear")l.forEach(i);else{const u=ge(e),c=u&&Ar(s);if(u&&s==="length"){const f=Number(n);l.forEach((d,v)=>{(v==="length"||v===Qn||!Mt(v)&&v>=f)&&i(d)})}else switch((s!==void 0||l.has(void 0))&&i(l.get(s)),c&&i(l.get(Qn)),t){case"add":u?c&&i(l.get("length")):(i(l.get(Ls)),on(e)&&i(l.get(za)));break;case"delete":u||(i(l.get(Ls)),on(e)&&i(l.get(za)));break;case"set":on(e)&&i(l.get(Ls));break}}Er()}function Ks(e){const t=Ie(e);return t===e?t:(dt(t,"iterate",Qn),Et(e)?t:t.map(Ut))}function ca(e){return dt(e=Ie(e),"iterate",Qn),e}function ps(e,t){return ls(e)?un(Bs(e)?Ut(t):t):Ut(t)}const gd={__proto__:null,[Symbol.iterator](){return ka(this,Symbol.iterator,e=>ps(this,e))},concat(...e){return Ks(this).concat(...e.map(t=>ge(t)?Ks(t):t))},entries(){return ka(this,"entries",e=>(e[1]=ps(this,e[1]),e))},every(e,t){return qt(this,"every",e,t,void 0,arguments)},filter(e,t){return qt(this,"filter",e,t,s=>s.map(n=>ps(this,n)),arguments)},find(e,t){return qt(this,"find",e,t,s=>ps(this,s),arguments)},findIndex(e,t){return qt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qt(this,"findLast",e,t,s=>ps(this,s),arguments)},findLastIndex(e,t){return qt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qt(this,"forEach",e,t,void 0,arguments)},includes(...e){return xa(this,"includes",e)},indexOf(...e){return xa(this,"indexOf",e)},join(e){return Ks(this).join(e)},lastIndexOf(...e){return xa(this,"lastIndexOf",e)},map(e,t){return qt(this,"map",e,t,void 0,arguments)},pop(){return kn(this,"pop")},push(...e){return kn(this,"push",e)},reduce(e,...t){return hl(this,"reduce",e,t)},reduceRight(e,...t){return hl(this,"reduceRight",e,t)},shift(){return kn(this,"shift")},some(e,t){return qt(this,"some",e,t,void 0,arguments)},splice(...e){return kn(this,"splice",e)},toReversed(){return Ks(this).toReversed()},toSorted(e){return Ks(this).toSorted(e)},toSpliced(...e){return Ks(this).toSpliced(...e)},unshift(...e){return kn(this,"unshift",e)},values(){return ka(this,"values",e=>ps(this,e))}};function ka(e,t,s){const n=ca(e),o=n[t]();return n!==e&&!Et(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const yd=Array.prototype;function qt(e,t,s,n,o,a){const l=ca(e),i=l!==e&&!Et(e),u=l[t];if(u!==yd[t]){const d=u.apply(e,a);return i?Ut(d):d}let c=s;l!==e&&(i?c=function(d,v){return s.call(this,ps(e,d),v,e)}:s.length>2&&(c=function(d,v){return s.call(this,d,v,e)}));const f=u.call(l,c,n);return i&&o?o(f):f}function hl(e,t,s,n){const o=ca(e);let a=s;return o!==e&&(Et(e)?s.length>3&&(a=function(l,i,u){return s.call(this,l,i,u,e)}):a=function(l,i,u){return s.call(this,l,ps(e,i),u,e)}),o[t](a,...n)}function xa(e,t,s){const n=Ie(e);dt(n,"iterate",Qn);const o=n[t](...s);return(o===-1||o===!1)&&Rr(s[0])?(s[0]=Ie(s[0]),n[t](...s)):o}function kn(e,t,s=[]){as(),Nr();const n=Ie(e)[t].apply(e,s);return Er(),rs(),n}const bd=$r("__proto__,__v_isRef,__isVue"),Gi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function _d(e){Mt(e)||(e=String(e));const t=Ie(this);return dt(t,"has",e),t.hasOwnProperty(e)}class zi{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?Ed:Xi:a?qi:Yi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=ge(t);if(!o){let u;if(l&&(u=gd[s]))return u;if(s==="hasOwnProperty")return _d}const i=Reflect.get(t,s,pt(t)?t:n);if((Mt(s)?Gi.has(s):bd(s))||(o||dt(t,"get",s),a))return i;if(pt(i)){const u=l&&Ar(s)?i:i.value;return o&&Re(u)?Ya(u):u}return Re(i)?o?Ya(i):Lt(i):i}}class Ji extends zi{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];const l=ge(t)&&Ar(s);if(!this._isShallow){const c=ls(a);if(!Et(n)&&!ls(n)&&(a=Ie(a),n=Ie(n)),!l&&pt(a)&&!pt(n))return c||(a.value=n),!0}const i=l?Number(s)<t.length:Pe(t,s),u=Reflect.set(t,s,n,pt(t)?t:o);return t===Ie(o)&&(i?gs(n,a)&&es(t,"set",s,n):es(t,"add",s,n)),u}deleteProperty(t,s){const n=Pe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&es(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Mt(s)||!Gi.has(s))&&dt(t,"has",s),n}ownKeys(t){return dt(t,"iterate",ge(t)?"length":Ls),Reflect.ownKeys(t)}}class wd extends zi{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Sd=new Ji,Cd=new wd,$d=new Ji(!0);const Ja=e=>e,wo=e=>Reflect.getPrototypeOf(e);function kd(e,t,s){return function(...n){const o=this.__v_raw,a=Ie(o),l=on(a),i=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,c=o[e](...n),f=s?Ja:t?un:Ut;return!t&&dt(a,"iterate",u?za:Ls),rt(Object.create(c),{next(){const{value:d,done:v}=c.next();return v?{value:d,done:v}:{value:i?[f(d[0]),f(d[1])]:f(d),done:v}}})}}function So(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function xd(e,t){const s={get(o){const a=this.__v_raw,l=Ie(a),i=Ie(o);e||(gs(o,i)&&dt(l,"get",o),dt(l,"get",i));const{has:u}=wo(l),c=t?Ja:e?un:Ut;if(u.call(l,o))return c(a.get(o));if(u.call(l,i))return c(a.get(i));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!e&&dt(Ie(o),"iterate",Ls),o.size},has(o){const a=this.__v_raw,l=Ie(a),i=Ie(o);return e||(gs(o,i)&&dt(l,"has",o),dt(l,"has",i)),o===i?a.has(o):a.has(o)||a.has(i)},forEach(o,a){const l=this,i=l.__v_raw,u=Ie(i),c=t?Ja:e?un:Ut;return!e&&dt(u,"iterate",Ls),i.forEach((f,d)=>o.call(a,c(f),c(d),l))}};return rt(s,e?{add:So("add"),set:So("set"),delete:So("delete"),clear:So("clear")}:{add(o){!t&&!Et(o)&&!ls(o)&&(o=Ie(o));const a=Ie(this);return wo(a).has.call(a,o)||(a.add(o),es(a,"add",o,o)),this},set(o,a){!t&&!Et(a)&&!ls(a)&&(a=Ie(a));const l=Ie(this),{has:i,get:u}=wo(l);let c=i.call(l,o);c||(o=Ie(o),c=i.call(l,o));const f=u.call(l,o);return l.set(o,a),c?gs(a,f)&&es(l,"set",o,a):es(l,"add",o,a),this},delete(o){const a=Ie(this),{has:l,get:i}=wo(a);let u=l.call(a,o);u||(o=Ie(o),u=l.call(a,o)),i&&i.call(a,o);const c=a.delete(o);return u&&es(a,"delete",o,void 0),c},clear(){const o=Ie(this),a=o.size!==0,l=o.clear();return a&&es(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=kd(o,e,t)}),s}function Pr(e,t){const s=xd(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Pe(s,o)&&o in n?s:n,o,a)}const Ad={get:Pr(!1,!1)},Td={get:Pr(!1,!0)},Nd={get:Pr(!0,!1)};const Yi=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Ed=new WeakMap;function Od(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Id(e){return e.__v_skip||!Object.isExtensible(e)?0:Od(nd(e))}function Lt(e){return ls(e)?e:Dr(e,!1,Sd,Ad,Yi)}function Qi(e){return Dr(e,!1,$d,Td,qi)}function Ya(e){return Dr(e,!0,Cd,Nd,Xi)}function Dr(e,t,s,n,o){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Id(e);if(a===0)return e;const l=o.get(e);if(l)return l;const i=new Proxy(e,a===2?n:s);return o.set(e,i),i}function Bs(e){return ls(e)?Bs(e.__v_raw):!!(e&&e.__v_isReactive)}function ls(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Rr(e){return e?!!e.__v_raw:!1}function Ie(e){const t=e&&e.__v_raw;return t?Ie(t):e}function Pd(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&Di(e,"__v_skip",!0),e}const Ut=e=>Re(e)?Lt(e):e,un=e=>Re(e)?Ya(e):e;function pt(e){return e?e.__v_isRef===!0:!1}function O(e){return Zi(e,!1)}function Dd(e){return Zi(e,!0)}function Zi(e,t){return pt(e)?e:new Rd(e,t)}class Rd{constructor(t,s){this.dep=new Ir,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Ie(t),this._value=s?t:Ut(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Et(t)||ls(t);t=n?t:Ie(t),gs(t,s)&&(this._rawValue=t,this._value=n?t:Ut(t),this.dep.trigger())}}function M(e){return pt(e)?e.value:e}const Ld={get:(e,t,s)=>t==="__v_raw"?e:M(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return pt(o)&&!pt(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function ec(e){return Bs(e)?e:new Proxy(e,Ld)}class Bd{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ir(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return Fi(this,!0),!0}get value(){const t=this.dep.track();return Wi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Md(e,t,s=!1){let n,o;return Ce(e)?n=e:(n=e.get,o=e.set),new Bd(n,o,s)}const Co={},Mo=new WeakMap;let Ps;function Ud(e,t=!1,s=Ps){if(s){let n=Mo.get(s);n||Mo.set(s,n=[]),n.push(e)}}function Fd(e,t,s=De){const{immediate:n,deep:o,once:a,scheduler:l,augmentJob:i,call:u}=s,c=T=>o?T:Et(T)||o===!1||o===0?ts(T,1):ts(T);let f,d,v,h,g=!1,y=!1;if(pt(e)?(d=()=>e.value,g=Et(e)):Bs(e)?(d=()=>c(e),g=!0):ge(e)?(y=!0,g=e.some(T=>Bs(T)||Et(T)),d=()=>e.map(T=>{if(pt(T))return T.value;if(Bs(T))return c(T);if(Ce(T))return u?u(T,2):T()})):Ce(e)?t?d=u?()=>u(e,2):e:d=()=>{if(v){as();try{v()}finally{rs()}}const T=Ps;Ps=f;try{return u?u(e,3,[h]):e(h)}finally{Ps=T}}:d=Jt,t&&o){const T=d,P=o===!0?1/0:o;d=()=>ts(T(),P)}const k=vd(),$=()=>{f.stop(),k&&k.active&&xr(k.effects,f)};if(a&&t){const T=t;t=(...P)=>{T(...P),$()}}let _=y?new Array(e.length).fill(Co):Co;const S=T=>{if(!(!(f.flags&1)||!f.dirty&&!T))if(t){const P=f.run();if(o||g||(y?P.some((B,L)=>gs(B,_[L])):gs(P,_))){v&&v();const B=Ps;Ps=f;try{const L=[P,_===Co?void 0:y&&_[0]===Co?[]:_,h];_=P,u?u(t,3,L):t(...L)}finally{Ps=B}}}else f.run()};return i&&i(S),f=new Mi(d),f.scheduler=l?()=>l(S,!1):S,h=T=>Ud(T,!1,f),v=f.onStop=()=>{const T=Mo.get(f);if(T){if(u)u(T,4);else for(const P of T)P();Mo.delete(f)}},t?n?S(!0):_=f.run():l?l(S.bind(null,!0),!0):f.run(),$.pause=f.pause.bind(f),$.resume=f.resume.bind(f),$.stop=$,$}function ts(e,t=1/0,s){if(t<=0||!Re(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,pt(e))ts(e.value,t,s);else if(ge(e))for(let n=0;n<e.length;n++)ts(e[n],t,s);else if(_n(e)||on(e))e.forEach(n=>{ts(n,t,s)});else if(Pi(e)){for(const n in e)ts(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ts(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function po(e,t,s,n){try{return n?e(...n):e()}catch(o){ua(o,t,s)}}function Yt(e,t,s,n){if(Ce(e)){const o=po(e,t,s,n);return o&&Oi(o)&&o.catch(a=>{ua(a,t,s)}),o}if(ge(e)){const o=[];for(let a=0;a<e.length;a++)o.push(Yt(e[a],t,s,n));return o}}function ua(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||De;if(t){let i=t.parent;const u=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const f=i.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,u,c)===!1)return}i=i.parent}if(a){as(),po(a,null,10,[e,u,c]),rs();return}}jd(e,s,o,n,l)}function jd(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const yt=[];let Kt=-1;const an=[];let vs=null,zs=0;const tc=Promise.resolve();let Uo=null;function Zn(e){const t=Uo||tc;return e?t.then(this?e.bind(this):e):t}function Hd(e){let t=Kt+1,s=yt.length;for(;t<s;){const n=t+s>>>1,o=yt[n],a=eo(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function Lr(e){if(!(e.flags&1)){const t=eo(e),s=yt[yt.length-1];!s||!(e.flags&2)&&t>=eo(s)?yt.push(e):yt.splice(Hd(t),0,e),e.flags|=1,sc()}}function sc(){Uo||(Uo=tc.then(oc))}function Wd(e){ge(e)?an.push(...e):vs&&e.id===-1?vs.splice(zs+1,0,e):e.flags&1||(an.push(e),e.flags|=1),sc()}function gl(e,t,s=Kt+1){for(;s<yt.length;s++){const n=yt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;yt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function nc(e){if(an.length){const t=[...new Set(an)].sort((s,n)=>eo(s)-eo(n));if(an.length=0,vs){vs.push(...t);return}for(vs=t,zs=0;zs<vs.length;zs++){const s=vs[zs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}vs=null,zs=0}}const eo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function oc(e){try{for(Kt=0;Kt<yt.length;Kt++){const t=yt[Kt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),po(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kt<yt.length;Kt++){const t=yt[Kt];t&&(t.flags&=-2)}Kt=-1,yt.length=0,nc(),Uo=null,(yt.length||an.length)&&oc()}}let at=null,ac=null;function Fo(e){const t=at;return at=e,ac=e&&e.type.__scopeId||null,t}function Kd(e,t=at,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&Wo(-1);const a=Fo(t);let l;try{l=e(...o)}finally{Fo(a),n._d&&Wo(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function We(e,t){if(at===null)return e;const s=va(at),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,i,u=De]=t[o];a&&(Ce(a)&&(a={mounted:a,updated:a}),a.deep&&ts(l),n.push({dir:a,instance:s,value:l,oldValue:void 0,arg:i,modifiers:u}))}return e}function $s(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let l=0;l<o.length;l++){const i=o[l];a&&(i.oldValue=a[l].value);let u=i.dir[n];u&&(as(),Yt(u,s,8,[e.el,i,e,t]),rs())}}function Oo(e,t){if(ft){let s=ft.provides;const n=ft.parent&&ft.parent.provides;n===s&&(s=ft.provides=Object.create(n)),s[e]=t}}function Bt(e,t,s=!1){const n=zf();if(n||ln){let o=ln?ln._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&Ce(t)?t.call(n&&n.proxy):t}}const Vd=Symbol.for("v-scx"),Gd=()=>Bt(Vd);function ot(e,t,s){return rc(e,t,s)}function rc(e,t,s=De){const{immediate:n,deep:o,flush:a,once:l}=s,i=rt({},s),u=t&&n||!t&&a!=="post";let c;if(oo){if(a==="sync"){const h=Gd();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=Jt,h.resume=Jt,h.pause=Jt,h}}const f=ft;i.call=(h,g,y)=>Yt(h,f,g,y);let d=!1;a==="post"?i.scheduler=h=>{ht(h,f&&f.suspense)}:a!=="sync"&&(d=!0,i.scheduler=(h,g)=>{g?h():Lr(h)}),i.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,f&&(h.id=f.uid,h.i=f))};const v=Fd(e,t,i);return oo&&(c?c.push(v):u&&v()),v}function zd(e,t,s){const n=this.proxy,o=Ye(e)?e.includes(".")?lc(n,e):()=>n[e]:e.bind(n,n);let a;Ce(t)?a=t:(a=t.handler,s=t);const l=vo(this),i=rc(o,a.bind(n),s);return l(),i}function lc(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const ic=Symbol("_vte"),Jd=e=>e.__isTeleport,Fn=e=>e&&(e.disabled||e.disabled===""),yl=e=>e&&(e.defer||e.defer===""),bl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,_l=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,qa=(e,t)=>{const s=e&&e.to;return Ye(s)?t?t(s):null:s},cc={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,l,i,u,c){const{mc:f,pc:d,pbc:v,o:{insert:h,querySelector:g,createText:y,createComment:k}}=c,$=Fn(t.props);let{shapeFlag:_,children:S,dynamicChildren:T}=t;if(e==null){const P=t.el=y(""),B=t.anchor=y("");h(P,s,n),h(B,s,n);const L=(K,ue)=>{_&16&&f(S,K,ue,o,a,l,i,u)},z=()=>{const K=t.target=qa(t.props,g),ue=uc(K,t,y,h);K&&(l!=="svg"&&bl(K)?l="svg":l!=="mathml"&&_l(K)&&(l="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(K),$||(L(K,ue),Io(t,!1)))};$&&(L(s,B),Io(t,!0)),yl(t.props)?(t.el.__isMounted=!1,ht(()=>{z(),delete t.el.__isMounted},a)):z()}else{if(yl(t.props)&&e.el.__isMounted===!1){ht(()=>{cc.process(e,t,s,n,o,a,l,i,u,c)},a);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,B=t.target=e.target,L=t.targetAnchor=e.targetAnchor,z=Fn(e.props),K=z?s:B,ue=z?P:L;if(l==="svg"||bl(B)?l="svg":(l==="mathml"||_l(B))&&(l="mathml"),T?(v(e.dynamicChildren,T,K,o,a,l,i),Hr(e,t,!0)):u||d(e,t,K,ue,o,a,l,i,!1),$)z?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):$o(t,s,P,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const me=t.target=qa(t.props,g);me&&$o(t,me,null,c,0)}else z&&$o(t,B,L,c,1);Io(t,$)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:l,children:i,anchor:u,targetStart:c,targetAnchor:f,target:d,props:v}=e;if(d&&(o(c),o(f)),a&&o(u),l&16){const h=a||!Fn(v);for(let g=0;g<i.length;g++){const y=i[g];n(y,t,s,h,!!y.dynamicChildren)}}},move:$o,hydrate:Yd};function $o(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:l,anchor:i,shapeFlag:u,children:c,props:f}=e,d=a===2;if(d&&n(l,t,s),(!d||Fn(f))&&u&16)for(let v=0;v<c.length;v++)o(c[v],t,s,2);d&&n(i,t,s)}function Yd(e,t,s,n,o,a,{o:{nextSibling:l,parentNode:i,querySelector:u,insert:c,createText:f}},d){function v(y,k,$,_){k.anchor=d(l(y),k,i(y),s,n,o,a),k.targetStart=$,k.targetAnchor=_}const h=t.target=qa(t.props,u),g=Fn(t.props);if(h){const y=h._lpa||h.firstChild;if(t.shapeFlag&16)if(g)v(e,t,y,y&&l(y));else{t.anchor=l(e);let k=y;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")t.targetStart=k;else if(k.data==="teleport anchor"){t.targetAnchor=k,h._lpa=t.targetAnchor&&l(t.targetAnchor);break}}k=l(k)}t.targetAnchor||uc(h,t,f,c),d(y&&l(y),t,h,s,n,o,a)}Io(t,g)}else g&&t.shapeFlag&16&&v(e,t,e,l(e));return t.anchor&&l(t.anchor)}const qd=cc;function Io(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function uc(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[ic]=a,e&&(n(o,e),n(a,e)),a}const Xd=Symbol("_leaveCb");function Br(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Br(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function dc(e,t){return Ce(e)?rt({name:e.name},t,{setup:e}):e}function fc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const jo=new WeakMap;function jn(e,t,s,n,o=!1){if(ge(e)){e.forEach((g,y)=>jn(g,t&&(ge(t)?t[y]:t),s,n,o));return}if(rn(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&jn(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?va(n.component):n.el,l=o?null:a,{i,r:u}=e,c=t&&t.r,f=i.refs===De?i.refs={}:i.refs,d=i.setupState,v=Ie(d),h=d===De?Ei:g=>Pe(v,g);if(c!=null&&c!==u){if(wl(t),Ye(c))f[c]=null,h(c)&&(d[c]=null);else if(pt(c)){c.value=null;const g=t;g.k&&(f[g.k]=null)}}if(Ce(u))po(u,i,12,[l,f]);else{const g=Ye(u),y=pt(u);if(g||y){const k=()=>{if(e.f){const $=g?h(u)?d[u]:f[u]:u.value;if(o)ge($)&&xr($,a);else if(ge($))$.includes(a)||$.push(a);else if(g)f[u]=[a],h(u)&&(d[u]=f[u]);else{const _=[a];u.value=_,e.k&&(f[e.k]=_)}}else g?(f[u]=l,h(u)&&(d[u]=l)):y&&(u.value=l,e.k&&(f[e.k]=l))};if(l){const $=()=>{k(),jo.delete(e)};$.id=-1,jo.set(e,$),ht($,s)}else wl(e),k()}}}function wl(e){const t=jo.get(e);t&&(t.flags|=8,jo.delete(e))}ia().requestIdleCallback;ia().cancelIdleCallback;const rn=e=>!!e.type.__asyncLoader,pc=e=>e.type.__isKeepAlive;function Qd(e,t){vc(e,"a",t)}function Zd(e,t){vc(e,"da",t)}function vc(e,t,s=ft){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(da(t,n,s),s){let o=s.parent;for(;o&&o.parent;)pc(o.parent.vnode)&&ef(n,t,s,o),o=o.parent}}function ef(e,t,s,n){const o=da(t,e,n,!0);Ur(()=>{xr(n[t],o)},s)}function da(e,t,s=ft,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{as();const i=vo(s),u=Yt(t,s,e,l);return i(),rs(),u});return n?o.unshift(a):o.push(a),a}}const cs=e=>(t,s=ft)=>{(!oo||e==="sp")&&da(e,(...n)=>t(...n),s)},tf=cs("bm"),bt=cs("m"),sf=cs("bu"),nf=cs("u"),Mr=cs("bum"),Ur=cs("um"),of=cs("sp"),af=cs("rtg"),rf=cs("rtc");function lf(e,t=ft){da("ec",e,t)}const cf="components";function uf(e,t){return ff(cf,e,!0,t)||e}const df=Symbol.for("v-ndc");function ff(e,t,s=!0,n=!1){const o=at||ft;if(o){const a=o.type;{const i=Qf(a,!1);if(i&&(i===t||i===It(t)||i===ra(It(t))))return a}const l=Sl(o[e]||a[e],t)||Sl(o.appContext[e],t);return!l&&n?a:l}}function Sl(e,t){return e&&(e[t]||e[It(t)]||e[ra(It(t))])}function le(e,t,s,n){let o;const a=s,l=ge(e);if(l||Ye(e)){const i=l&&Bs(e);let u=!1,c=!1;i&&(u=!Et(e),c=ls(e),e=ca(e)),o=new Array(e.length);for(let f=0,d=e.length;f<d;f++)o[f]=t(u?c?un(Ut(e[f])):Ut(e[f]):e[f],f,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,a)}else if(Re(e))if(e[Symbol.iterator])o=Array.from(e,(i,u)=>t(i,u,void 0,a));else{const i=Object.keys(e);o=new Array(i.length);for(let u=0,c=i.length;u<c;u++){const f=i[u];o[u]=t(e[f],f,u,a)}}else o=[];return o}function pf(e,t,s={},n,o){if(at.ce||at.parent&&rn(at.parent)&&at.parent.ce){const c=Object.keys(s).length>0;return s.name=t,p(),He(Q,null,[ye("slot",s,n)],c?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),p();const l=a&&mc(a(s)),i=s.key||l&&l.key,u=He(Q,{key:(i&&!Mt(i)?i:`_${t}`)+(!l&&n?"_fb":"")},l||[],l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),u}function mc(e){return e.some(t=>so(t)?!(t.type===is||t.type===Q&&!mc(t.children)):!0)?e:null}const Xa=e=>e?Pc(e)?va(e):Xa(e.parent):null,Hn=rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xa(e.parent),$root:e=>Xa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gc(e),$forceUpdate:e=>e.f||(e.f=()=>{Lr(e.update)}),$nextTick:e=>e.n||(e.n=Zn.bind(e.proxy)),$watch:e=>zd.bind(e)}),Aa=(e,t)=>e!==De&&!e.__isScriptSetup&&Pe(e,t),vf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:l,type:i,appContext:u}=e;if(t[0]!=="$"){const v=l[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(Aa(n,t))return l[t]=1,n[t];if(o!==De&&Pe(o,t))return l[t]=2,o[t];if(Pe(a,t))return l[t]=3,a[t];if(s!==De&&Pe(s,t))return l[t]=4,s[t];Qa&&(l[t]=0)}}const c=Hn[t];let f,d;if(c)return t==="$attrs"&&dt(e.attrs,"get",""),c(e);if((f=i.__cssModules)&&(f=f[t]))return f;if(s!==De&&Pe(s,t))return l[t]=4,s[t];if(d=u.config.globalProperties,Pe(d,t))return d[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return Aa(o,t)?(o[t]=s,!0):n!==De&&Pe(n,t)?(n[t]=s,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,props:a,type:l}},i){let u;return!!(s[i]||e!==De&&i[0]!=="$"&&Pe(e,i)||Aa(t,i)||Pe(a,i)||Pe(n,i)||Pe(Hn,i)||Pe(o.config.globalProperties,i)||(u=l.__cssModules)&&u[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Pe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Cl(e){return ge(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Qa=!0;function mf(e){const t=gc(e),s=e.proxy,n=e.ctx;Qa=!1,t.beforeCreate&&$l(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:i,provide:u,inject:c,created:f,beforeMount:d,mounted:v,beforeUpdate:h,updated:g,activated:y,deactivated:k,beforeDestroy:$,beforeUnmount:_,destroyed:S,unmounted:T,render:P,renderTracked:B,renderTriggered:L,errorCaptured:z,serverPrefetch:K,expose:ue,inheritAttrs:me,components:fe,directives:Se,filters:xe}=t;if(c&&hf(c,n,null),l)for(const Z in l){const ee=l[Z];Ce(ee)&&(n[Z]=ee.bind(s))}if(o){const Z=o.call(s,s);Re(Z)&&(e.data=Lt(Z))}if(Qa=!0,a)for(const Z in a){const ee=a[Z],ve=Ce(ee)?ee.bind(s,s):Ce(ee.get)?ee.get.bind(s,s):Jt,q=!Ce(ee)&&Ce(ee.set)?ee.set.bind(s):Jt,A=E({get:ve,set:q});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>A.value,set:w=>A.value=w})}if(i)for(const Z in i)hc(i[Z],n,s,Z);if(u){const Z=Ce(u)?u.call(s):u;Reflect.ownKeys(Z).forEach(ee=>{Oo(ee,Z[ee])})}f&&$l(f,e,"c");function pe(Z,ee){ge(ee)?ee.forEach(ve=>Z(ve.bind(s))):ee&&Z(ee.bind(s))}if(pe(tf,d),pe(bt,v),pe(sf,h),pe(nf,g),pe(Qd,y),pe(Zd,k),pe(lf,z),pe(rf,B),pe(af,L),pe(Mr,_),pe(Ur,T),pe(of,K),ge(ue))if(ue.length){const Z=e.exposed||(e.exposed={});ue.forEach(ee=>{Object.defineProperty(Z,ee,{get:()=>s[ee],set:ve=>s[ee]=ve,enumerable:!0})})}else e.exposed||(e.exposed={});P&&e.render===Jt&&(e.render=P),me!=null&&(e.inheritAttrs=me),fe&&(e.components=fe),Se&&(e.directives=Se),K&&fc(e)}function hf(e,t,s=Jt){ge(e)&&(e=Za(e));for(const n in e){const o=e[n];let a;Re(o)?"default"in o?a=Bt(o.from||n,o.default,!0):a=Bt(o.from||n):a=Bt(o),pt(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[n]=a}}function $l(e,t,s){Yt(ge(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function hc(e,t,s,n){let o=n.includes(".")?lc(s,n):()=>s[n];if(Ye(e)){const a=t[e];Ce(a)&&ot(o,a)}else if(Ce(e))ot(o,e.bind(s));else if(Re(e))if(ge(e))e.forEach(a=>hc(a,t,s,n));else{const a=Ce(e.handler)?e.handler.bind(s):t[e.handler];Ce(a)&&ot(o,a,e)}}function gc(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,i=a.get(t);let u;return i?u=i:!o.length&&!s&&!n?u=t:(u={},o.length&&o.forEach(c=>Ho(u,c,l,!0)),Ho(u,t,l)),Re(t)&&a.set(t,u),u}function Ho(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&Ho(e,a,s,!0),o&&o.forEach(l=>Ho(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const i=gf[l]||s&&s[l];e[l]=i?i(e[l],t[l]):t[l]}return e}const gf={data:kl,props:xl,emits:xl,methods:Rn,computed:Rn,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:Rn,directives:Rn,watch:bf,provide:kl,inject:yf};function kl(e,t){return t?e?function(){return rt(Ce(e)?e.call(this,this):e,Ce(t)?t.call(this,this):t)}:t:e}function yf(e,t){return Rn(Za(e),Za(t))}function Za(e){if(ge(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function mt(e,t){return e?[...new Set([].concat(e,t))]:t}function Rn(e,t){return e?rt(Object.create(null),e,t):t}function xl(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:rt(Object.create(null),Cl(e),Cl(t??{})):t}function bf(e,t){if(!e)return t;if(!t)return e;const s=rt(Object.create(null),e);for(const n in t)s[n]=mt(e[n],t[n]);return s}function yc(){return{app:null,config:{isNativeTag:Ei,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _f=0;function wf(e,t){return function(n,o=null){Ce(n)||(n=rt({},n)),o!=null&&!Re(o)&&(o=null);const a=yc(),l=new WeakSet,i=[];let u=!1;const c=a.app={_uid:_f++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:ep,get config(){return a.config},set config(f){},use(f,...d){return l.has(f)||(f&&Ce(f.install)?(l.add(f),f.install(c,...d)):Ce(f)&&(l.add(f),f(c,...d))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,d){return d?(a.components[f]=d,c):a.components[f]},directive(f,d){return d?(a.directives[f]=d,c):a.directives[f]},mount(f,d,v){if(!u){const h=c._ceVNode||ye(n,o);return h.appContext=a,v===!0?v="svg":v===!1&&(v=void 0),e(h,f,v),u=!0,c._container=f,f.__vue_app__=c,va(h.component)}},onUnmount(f){i.push(f)},unmount(){u&&(Yt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,d){return a.provides[f]=d,c},runWithContext(f){const d=ln;ln=c;try{return f()}finally{ln=d}}};return c}}let ln=null;const Sf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${It(t)}Modifiers`]||e[`${Cs(t)}Modifiers`];function Cf(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||De;let o=s;const a=t.startsWith("update:"),l=a&&Sf(n,t.slice(7));l&&(l.trim&&(o=s.map(f=>Ye(f)?f.trim():f)),l.number&&(o=s.map(la)));let i,u=n[i=Sa(t)]||n[i=Sa(It(t))];!u&&a&&(u=n[i=Sa(Cs(t))]),u&&Yt(u,e,6,o);const c=n[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Yt(c,e,6,o)}}const $f=new WeakMap;function bc(e,t,s=!1){const n=s?$f:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let l={},i=!1;if(!Ce(e)){const u=c=>{const f=bc(c,t,!0);f&&(i=!0,rt(l,f))};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!a&&!i?(Re(e)&&n.set(e,null),null):(ge(a)?a.forEach(u=>l[u]=null):rt(l,a),Re(e)&&n.set(e,l),l)}function fa(e,t){return!e||!oa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,Cs(t))||Pe(e,t))}function Al(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:l,attrs:i,emit:u,render:c,renderCache:f,props:d,data:v,setupState:h,ctx:g,inheritAttrs:y}=e,k=Fo(e);let $,_;try{if(s.shapeFlag&4){const T=o||n,P=T;$=Vt(c.call(P,T,f,d,h,v,g)),_=i}else{const T=t;$=Vt(T.length>1?T(d,{attrs:i,slots:l,emit:u}):T(d,null)),_=t.props?i:kf(i)}}catch(T){Wn.length=0,ua(T,e,1),$=ye(is)}let S=$;if(_&&y!==!1){const T=Object.keys(_),{shapeFlag:P}=S;T.length&&P&7&&(a&&T.some(kr)&&(_=xf(_,a)),S=dn(S,_,!1,!0))}return s.dirs&&(S=dn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Br(S,s.transition),$=S,Fo(k),$}const kf=e=>{let t;for(const s in e)(s==="class"||s==="style"||oa(s))&&((t||(t={}))[s]=e[s]);return t},xf=(e,t)=>{const s={};for(const n in e)(!kr(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Af(e,t,s){const{props:n,children:o,component:a}=e,{props:l,children:i,patchFlag:u}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&u>=0){if(u&1024)return!0;if(u&16)return n?Tl(n,l,c):!!l;if(u&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const v=f[d];if(l[v]!==n[v]&&!fa(c,v))return!0}}}else return(o||i)&&(!i||!i.$stable)?!0:n===l?!1:n?l?Tl(n,l,c):!0:!!l;return!1}function Tl(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!fa(s,a))return!0}return!1}function Tf({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const _c={},wc=()=>Object.create(_c),Sc=e=>Object.getPrototypeOf(e)===_c;function Nf(e,t,s,n=!1){const o={},a=wc();e.propsDefaults=Object.create(null),Cc(e,t,o,a);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:Qi(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Ef(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,i=Ie(o),[u]=e.propsOptions;let c=!1;if((n||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let v=f[d];if(fa(e.emitsOptions,v))continue;const h=t[v];if(u)if(Pe(a,v))h!==a[v]&&(a[v]=h,c=!0);else{const g=It(v);o[g]=er(u,i,g,h,e,!1)}else h!==a[v]&&(a[v]=h,c=!0)}}}else{Cc(e,t,o,a)&&(c=!0);let f;for(const d in i)(!t||!Pe(t,d)&&((f=Cs(d))===d||!Pe(t,f)))&&(u?s&&(s[d]!==void 0||s[f]!==void 0)&&(o[d]=er(u,i,d,void 0,e,!0)):delete o[d]);if(a!==i)for(const d in a)(!t||!Pe(t,d))&&(delete a[d],c=!0)}c&&es(e.attrs,"set","")}function Cc(e,t,s,n){const[o,a]=e.propsOptions;let l=!1,i;if(t)for(let u in t){if(Bn(u))continue;const c=t[u];let f;o&&Pe(o,f=It(u))?!a||!a.includes(f)?s[f]=c:(i||(i={}))[f]=c:fa(e.emitsOptions,u)||(!(u in n)||c!==n[u])&&(n[u]=c,l=!0)}if(a){const u=Ie(s),c=i||De;for(let f=0;f<a.length;f++){const d=a[f];s[d]=er(o,u,d,c[d],e,!Pe(c,d))}}return l}function er(e,t,s,n,o,a){const l=e[s];if(l!=null){const i=Pe(l,"default");if(i&&n===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Ce(u)){const{propsDefaults:c}=o;if(s in c)n=c[s];else{const f=vo(o);n=c[s]=u.call(null,t),f()}}else n=u;o.ce&&o.ce._setProp(s,n)}l[0]&&(a&&!i?n=!1:l[1]&&(n===""||n===Cs(s))&&(n=!0))}return n}const Of=new WeakMap;function $c(e,t,s=!1){const n=s?Of:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,l={},i=[];let u=!1;if(!Ce(e)){const f=d=>{u=!0;const[v,h]=$c(d,t,!0);rt(l,v),h&&i.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!u)return Re(e)&&n.set(e,nn),nn;if(ge(a))for(let f=0;f<a.length;f++){const d=It(a[f]);Nl(d)&&(l[d]=De)}else if(a)for(const f in a){const d=It(f);if(Nl(d)){const v=a[f],h=l[d]=ge(v)||Ce(v)?{type:v}:rt({},v),g=h.type;let y=!1,k=!0;if(ge(g))for(let $=0;$<g.length;++$){const _=g[$],S=Ce(_)&&_.name;if(S==="Boolean"){y=!0;break}else S==="String"&&(k=!1)}else y=Ce(g)&&g.name==="Boolean";h[0]=y,h[1]=k,(y||Pe(h,"default"))&&i.push(d)}}const c=[l,i];return Re(e)&&n.set(e,c),c}function Nl(e){return e[0]!=="$"&&!Bn(e)}const Fr=e=>e==="_"||e==="_ctx"||e==="$stable",jr=e=>ge(e)?e.map(Vt):[Vt(e)],If=(e,t,s)=>{if(t._n)return t;const n=Kd((...o)=>jr(t(...o)),s);return n._c=!1,n},kc=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Fr(o))continue;const a=e[o];if(Ce(a))t[o]=If(o,a,n);else if(a!=null){const l=jr(a);t[o]=()=>l}}},xc=(e,t)=>{const s=jr(t);e.slots.default=()=>s},Ac=(e,t,s)=>{for(const n in t)(s||!Fr(n))&&(e[n]=t[n])},Pf=(e,t,s)=>{const n=e.slots=wc();if(e.vnode.shapeFlag&32){const o=t._;o?(Ac(n,t,s),s&&Di(n,"_",o,!0)):kc(t,n)}else t&&xc(e,t)},Df=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,l=De;if(n.shapeFlag&32){const i=t._;i?s&&i===1?a=!1:Ac(o,t,s):(a=!t.$stable,kc(t,o)),l=t}else t&&(xc(e,t),l={default:1});if(a)for(const i in o)!Fr(i)&&l[i]==null&&delete o[i]},ht=Uf;function Rf(e){return Lf(e)}function Lf(e,t){const s=ia();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:l,createText:i,createComment:u,setText:c,setElementText:f,parentNode:d,nextSibling:v,setScopeId:h=Jt,insertStaticContent:g}=e,y=(C,x,R,V=null,J=null,G=null,oe=void 0,te=null,N=!!x.dynamicChildren)=>{if(C===x)return;C&&!xn(C,x)&&(V=W(C),w(C,J,G,!0),C=null),x.patchFlag===-2&&(N=!1,x.dynamicChildren=null);const{type:I,ref:H,shapeFlag:U}=x;switch(I){case pa:k(C,x,R,V);break;case is:$(C,x,R,V);break;case Po:C==null&&_(x,R,V,oe);break;case Q:fe(C,x,R,V,J,G,oe,te,N);break;default:U&1?P(C,x,R,V,J,G,oe,te,N):U&6?Se(C,x,R,V,J,G,oe,te,N):(U&64||U&128)&&I.process(C,x,R,V,J,G,oe,te,N,ce)}H!=null&&J?jn(H,C&&C.ref,G,x||C,!x):H==null&&C&&C.ref!=null&&jn(C.ref,null,G,C,!0)},k=(C,x,R,V)=>{if(C==null)n(x.el=i(x.children),R,V);else{const J=x.el=C.el;x.children!==C.children&&c(J,x.children)}},$=(C,x,R,V)=>{C==null?n(x.el=u(x.children||""),R,V):x.el=C.el},_=(C,x,R,V)=>{[C.el,C.anchor]=g(C.children,x,R,V,C.el,C.anchor)},S=({el:C,anchor:x},R,V)=>{let J;for(;C&&C!==x;)J=v(C),n(C,R,V),C=J;n(x,R,V)},T=({el:C,anchor:x})=>{let R;for(;C&&C!==x;)R=v(C),o(C),C=R;o(x)},P=(C,x,R,V,J,G,oe,te,N)=>{if(x.type==="svg"?oe="svg":x.type==="math"&&(oe="mathml"),C==null)B(x,R,V,J,G,oe,te,N);else{const I=C.el&&C.el._isVueCE?C.el:null;try{I&&I._beginPatch(),K(C,x,J,G,oe,te,N)}finally{I&&I._endPatch()}}},B=(C,x,R,V,J,G,oe,te)=>{let N,I;const{props:H,shapeFlag:U,transition:Y,dirs:D}=C;if(N=C.el=l(C.type,G,H&&H.is,H),U&8?f(N,C.children):U&16&&z(C.children,N,null,V,J,Ta(C,G),oe,te),D&&$s(C,null,V,"created"),L(N,C,C.scopeId,oe,V),H){for(const se in H)se!=="value"&&!Bn(se)&&a(N,se,null,H[se],G,V);"value"in H&&a(N,"value",null,H.value,G),(I=H.onVnodeBeforeMount)&&Ht(I,V,C)}D&&$s(C,null,V,"beforeMount");const j=Bf(J,Y);j&&Y.beforeEnter(N),n(N,x,R),((I=H&&H.onVnodeMounted)||j||D)&&ht(()=>{I&&Ht(I,V,C),j&&Y.enter(N),D&&$s(C,null,V,"mounted")},J)},L=(C,x,R,V,J)=>{if(R&&h(C,R),V)for(let G=0;G<V.length;G++)h(C,V[G]);if(J){let G=J.subTree;if(x===G||Ec(G.type)&&(G.ssContent===x||G.ssFallback===x)){const oe=J.vnode;L(C,oe,oe.scopeId,oe.slotScopeIds,J.parent)}}},z=(C,x,R,V,J,G,oe,te,N=0)=>{for(let I=N;I<C.length;I++){const H=C[I]=te?ms(C[I]):Vt(C[I]);y(null,H,x,R,V,J,G,oe,te)}},K=(C,x,R,V,J,G,oe)=>{const te=x.el=C.el;let{patchFlag:N,dynamicChildren:I,dirs:H}=x;N|=C.patchFlag&16;const U=C.props||De,Y=x.props||De;let D;if(R&&ks(R,!1),(D=Y.onVnodeBeforeUpdate)&&Ht(D,R,x,C),H&&$s(x,C,R,"beforeUpdate"),R&&ks(R,!0),(U.innerHTML&&Y.innerHTML==null||U.textContent&&Y.textContent==null)&&f(te,""),I?ue(C.dynamicChildren,I,te,R,V,Ta(x,J),G):oe||ee(C,x,te,null,R,V,Ta(x,J),G,!1),N>0){if(N&16)me(te,U,Y,R,J);else if(N&2&&U.class!==Y.class&&a(te,"class",null,Y.class,J),N&4&&a(te,"style",U.style,Y.style,J),N&8){const j=x.dynamicProps;for(let se=0;se<j.length;se++){const re=j[se],he=U[re],Ee=Y[re];(Ee!==he||re==="value")&&a(te,re,he,Ee,J,R)}}N&1&&C.children!==x.children&&f(te,x.children)}else!oe&&I==null&&me(te,U,Y,R,J);((D=Y.onVnodeUpdated)||H)&&ht(()=>{D&&Ht(D,R,x,C),H&&$s(x,C,R,"updated")},V)},ue=(C,x,R,V,J,G,oe)=>{for(let te=0;te<x.length;te++){const N=C[te],I=x[te],H=N.el&&(N.type===Q||!xn(N,I)||N.shapeFlag&198)?d(N.el):R;y(N,I,H,null,V,J,G,oe,!0)}},me=(C,x,R,V,J)=>{if(x!==R){if(x!==De)for(const G in x)!Bn(G)&&!(G in R)&&a(C,G,x[G],null,J,V);for(const G in R){if(Bn(G))continue;const oe=R[G],te=x[G];oe!==te&&G!=="value"&&a(C,G,te,oe,J,V)}"value"in R&&a(C,"value",x.value,R.value,J)}},fe=(C,x,R,V,J,G,oe,te,N)=>{const I=x.el=C?C.el:i(""),H=x.anchor=C?C.anchor:i("");let{patchFlag:U,dynamicChildren:Y,slotScopeIds:D}=x;D&&(te=te?te.concat(D):D),C==null?(n(I,R,V),n(H,R,V),z(x.children||[],R,H,J,G,oe,te,N)):U>0&&U&64&&Y&&C.dynamicChildren&&C.dynamicChildren.length===Y.length?(ue(C.dynamicChildren,Y,R,J,G,oe,te),(x.key!=null||J&&x===J.subTree)&&Hr(C,x,!0)):ee(C,x,R,H,J,G,oe,te,N)},Se=(C,x,R,V,J,G,oe,te,N)=>{x.slotScopeIds=te,C==null?x.shapeFlag&512?J.ctx.activate(x,R,V,oe,N):xe(x,R,V,J,G,oe,N):de(C,x,N)},xe=(C,x,R,V,J,G,oe)=>{const te=C.component=Gf(C,V,J);if(pc(C)&&(te.ctx.renderer=ce),Jf(te,!1,oe),te.asyncDep){if(J&&J.registerDep(te,pe,oe),!C.el){const N=te.subTree=ye(is);$(null,N,x,R),C.placeholder=N.el}}else pe(te,C,x,R,J,G,oe)},de=(C,x,R)=>{const V=x.component=C.component;if(Af(C,x,R))if(V.asyncDep&&!V.asyncResolved){Z(V,x,R);return}else V.next=x,V.update();else x.el=C.el,V.vnode=x},pe=(C,x,R,V,J,G,oe)=>{const te=()=>{if(C.isMounted){let{next:U,bu:Y,u:D,parent:j,vnode:se}=C;{const _e=Tc(C);if(_e){U&&(U.el=se.el,Z(C,U,oe)),_e.asyncDep.then(()=>{C.isUnmounted||te()});return}}let re=U,he;ks(C,!1),U?(U.el=se.el,Z(C,U,oe)):U=se,Y&&Eo(Y),(he=U.props&&U.props.onVnodeBeforeUpdate)&&Ht(he,j,U,se),ks(C,!0);const Ee=Al(C),Te=C.subTree;C.subTree=Ee,y(Te,Ee,d(Te.el),W(Te),C,J,G),U.el=Ee.el,re===null&&Tf(C,Ee.el),D&&ht(D,J),(he=U.props&&U.props.onVnodeUpdated)&&ht(()=>Ht(he,j,U,se),J)}else{let U;const{el:Y,props:D}=x,{bm:j,m:se,parent:re,root:he,type:Ee}=C,Te=rn(x);ks(C,!1),j&&Eo(j),!Te&&(U=D&&D.onVnodeBeforeMount)&&Ht(U,re,x),ks(C,!0);{he.ce&&he.ce._def.shadowRoot!==!1&&he.ce._injectChildStyle(Ee);const _e=C.subTree=Al(C);y(null,_e,R,V,C,J,G),x.el=_e.el}if(se&&ht(se,J),!Te&&(U=D&&D.onVnodeMounted)){const _e=x;ht(()=>Ht(U,re,_e),J)}(x.shapeFlag&256||re&&rn(re.vnode)&&re.vnode.shapeFlag&256)&&C.a&&ht(C.a,J),C.isMounted=!0,x=R=V=null}};C.scope.on();const N=C.effect=new Mi(te);C.scope.off();const I=C.update=N.run.bind(N),H=C.job=N.runIfDirty.bind(N);H.i=C,H.id=C.uid,N.scheduler=()=>Lr(H),ks(C,!0),I()},Z=(C,x,R)=>{x.component=C;const V=C.vnode.props;C.vnode=x,C.next=null,Ef(C,x.props,V,R),Df(C,x.children,R),as(),gl(C),rs()},ee=(C,x,R,V,J,G,oe,te,N=!1)=>{const I=C&&C.children,H=C?C.shapeFlag:0,U=x.children,{patchFlag:Y,shapeFlag:D}=x;if(Y>0){if(Y&128){q(I,U,R,V,J,G,oe,te,N);return}else if(Y&256){ve(I,U,R,V,J,G,oe,te,N);return}}D&8?(H&16&&$e(I,J,G),U!==I&&f(R,U)):H&16?D&16?q(I,U,R,V,J,G,oe,te,N):$e(I,J,G,!0):(H&8&&f(R,""),D&16&&z(U,R,V,J,G,oe,te,N))},ve=(C,x,R,V,J,G,oe,te,N)=>{C=C||nn,x=x||nn;const I=C.length,H=x.length,U=Math.min(I,H);let Y;for(Y=0;Y<U;Y++){const D=x[Y]=N?ms(x[Y]):Vt(x[Y]);y(C[Y],D,R,null,J,G,oe,te,N)}I>H?$e(C,J,G,!0,!1,U):z(x,R,V,J,G,oe,te,N,U)},q=(C,x,R,V,J,G,oe,te,N)=>{let I=0;const H=x.length;let U=C.length-1,Y=H-1;for(;I<=U&&I<=Y;){const D=C[I],j=x[I]=N?ms(x[I]):Vt(x[I]);if(xn(D,j))y(D,j,R,null,J,G,oe,te,N);else break;I++}for(;I<=U&&I<=Y;){const D=C[U],j=x[Y]=N?ms(x[Y]):Vt(x[Y]);if(xn(D,j))y(D,j,R,null,J,G,oe,te,N);else break;U--,Y--}if(I>U){if(I<=Y){const D=Y+1,j=D<H?x[D].el:V;for(;I<=Y;)y(null,x[I]=N?ms(x[I]):Vt(x[I]),R,j,J,G,oe,te,N),I++}}else if(I>Y)for(;I<=U;)w(C[I],J,G,!0),I++;else{const D=I,j=I,se=new Map;for(I=j;I<=Y;I++){const Le=x[I]=N?ms(x[I]):Vt(x[I]);Le.key!=null&&se.set(Le.key,I)}let re,he=0;const Ee=Y-j+1;let Te=!1,_e=0;const it=new Array(Ee);for(I=0;I<Ee;I++)it[I]=0;for(I=D;I<=U;I++){const Le=C[I];if(he>=Ee){w(Le,J,G,!0);continue}let nt;if(Le.key!=null)nt=se.get(Le.key);else for(re=j;re<=Y;re++)if(it[re-j]===0&&xn(Le,x[re])){nt=re;break}nt===void 0?w(Le,J,G,!0):(it[nt-j]=I+1,nt>=_e?_e=nt:Te=!0,y(Le,x[nt],R,null,J,G,oe,te,N),he++)}const At=Te?Mf(it):nn;for(re=At.length-1,I=Ee-1;I>=0;I--){const Le=j+I,nt=x[Le],jt=x[Le+1],Fe=Le+1<H?jt.el||Nc(jt):V;it[I]===0?y(null,nt,R,Fe,J,G,oe,te,N):Te&&(re<0||I!==At[re]?A(nt,R,Fe,2):re--)}}},A=(C,x,R,V,J=null)=>{const{el:G,type:oe,transition:te,children:N,shapeFlag:I}=C;if(I&6){A(C.component.subTree,x,R,V);return}if(I&128){C.suspense.move(x,R,V);return}if(I&64){oe.move(C,x,R,ce);return}if(oe===Q){n(G,x,R);for(let U=0;U<N.length;U++)A(N[U],x,R,V);n(C.anchor,x,R);return}if(oe===Po){S(C,x,R);return}if(V!==2&&I&1&&te)if(V===0)te.beforeEnter(G),n(G,x,R),ht(()=>te.enter(G),J);else{const{leave:U,delayLeave:Y,afterLeave:D}=te,j=()=>{C.ctx.isUnmounted?o(G):n(G,x,R)},se=()=>{G._isLeaving&&G[Xd](!0),U(G,()=>{j(),D&&D()})};Y?Y(G,j,se):se()}else n(G,x,R)},w=(C,x,R,V=!1,J=!1)=>{const{type:G,props:oe,ref:te,children:N,dynamicChildren:I,shapeFlag:H,patchFlag:U,dirs:Y,cacheIndex:D}=C;if(U===-2&&(J=!1),te!=null&&(as(),jn(te,null,R,C,!0),rs()),D!=null&&(x.renderCache[D]=void 0),H&256){x.ctx.deactivate(C);return}const j=H&1&&Y,se=!rn(C);let re;if(se&&(re=oe&&oe.onVnodeBeforeUnmount)&&Ht(re,x,C),H&6)Ae(C.component,R,V);else{if(H&128){C.suspense.unmount(R,V);return}j&&$s(C,null,x,"beforeUnmount"),H&64?C.type.remove(C,x,R,ce,V):I&&!I.hasOnce&&(G!==Q||U>0&&U&64)?$e(I,x,R,!1,!0):(G===Q&&U&384||!J&&H&16)&&$e(N,x,R),V&&X(C)}(se&&(re=oe&&oe.onVnodeUnmounted)||j)&&ht(()=>{re&&Ht(re,x,C),j&&$s(C,null,x,"unmounted")},R)},X=C=>{const{type:x,el:R,anchor:V,transition:J}=C;if(x===Q){be(R,V);return}if(x===Po){T(C);return}const G=()=>{o(R),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(C.shapeFlag&1&&J&&!J.persisted){const{leave:oe,delayLeave:te}=J,N=()=>oe(R,G);te?te(C.el,G,N):N()}else G()},be=(C,x)=>{let R;for(;C!==x;)R=v(C),o(C),C=R;o(x)},Ae=(C,x,R)=>{const{bum:V,scope:J,job:G,subTree:oe,um:te,m:N,a:I}=C;El(N),El(I),V&&Eo(V),J.stop(),G&&(G.flags|=8,w(oe,C,x,R)),te&&ht(te,x),ht(()=>{C.isUnmounted=!0},x)},$e=(C,x,R,V=!1,J=!1,G=0)=>{for(let oe=G;oe<C.length;oe++)w(C[oe],x,R,V,J)},W=C=>{if(C.shapeFlag&6)return W(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const x=v(C.anchor||C.el),R=x&&x[ic];return R?v(R):x};let ne=!1;const ae=(C,x,R)=>{let V;C==null?x._vnode&&(w(x._vnode,null,null,!0),V=x._vnode.component):y(x._vnode||null,C,x,null,null,null,R),x._vnode=C,ne||(ne=!0,gl(V),nc(),ne=!1)},ce={p:y,um:w,m:A,r:X,mt:xe,mc:z,pc:ee,pbc:ue,n:W,o:e};return{render:ae,hydrate:void 0,createApp:wf(ae)}}function Ta({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function ks({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Bf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Hr(e,t,s=!1){const n=e.children,o=t.children;if(ge(n)&&ge(o))for(let a=0;a<n.length;a++){const l=n[a];let i=o[a];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=o[a]=ms(o[a]),i.el=l.el),!s&&i.patchFlag!==-2&&Hr(l,i)),i.type===pa&&(i.patchFlag!==-1?i.el=l.el:i.__elIndex=a+(e.type===Q?1:0)),i.type===is&&!i.el&&(i.el=l.el)}}function Mf(e){const t=e.slice(),s=[0];let n,o,a,l,i;const u=e.length;for(n=0;n<u;n++){const c=e[n];if(c!==0){if(o=s[s.length-1],e[o]<c){t[n]=o,s.push(n);continue}for(a=0,l=s.length-1;a<l;)i=a+l>>1,e[s[i]]<c?a=i+1:l=i;c<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function Tc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Tc(t)}function El(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Nc(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Nc(t.subTree):null}const Ec=e=>e.__isSuspense;function Uf(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):Wd(e)}const Q=Symbol.for("v-fgt"),pa=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),Po=Symbol.for("v-stc"),Wn=[];let xt=null;function p(e=!1){Wn.push(xt=e?null:[])}function Ff(){Wn.pop(),xt=Wn[Wn.length-1]||null}let to=1;function Wo(e,t=!1){to+=e,e<0&&xt&&t&&(xt.hasOnce=!0)}function Oc(e){return e.dynamicChildren=to>0?xt||nn:null,Ff(),to>0&&xt&&xt.push(e),e}function m(e,t,s,n,o,a){return Oc(r(e,t,s,n,o,a,!0))}function He(e,t,s,n,o){return Oc(ye(e,t,s,n,o,!0))}function so(e){return e?e.__v_isVNode===!0:!1}function xn(e,t){return e.type===t.type&&e.key===t.key}const Ic=({key:e})=>e??null,Do=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ye(e)||pt(e)||Ce(e)?{i:at,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===Q?0:1,l=!1,i=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ic(t),ref:t&&Do(t),scopeId:ac,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:at};return i?(Wr(u,s),a&128&&e.normalize(u)):s&&(u.shapeFlag|=Ye(s)?8:16),to>0&&!l&&xt&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&xt.push(u),u}const ye=jf;function jf(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===df)&&(e=is),so(e)){const i=dn(e,t,!0);return s&&Wr(i,s),to>0&&!a&&xt&&(i.shapeFlag&6?xt[xt.indexOf(e)]=i:xt.push(i)),i.patchFlag=-2,i}if(Zf(e)&&(e=e.__vccOpts),t){t=Hf(t);let{class:i,style:u}=t;i&&!Ye(i)&&(t.class=ie(i)),Re(u)&&(Rr(u)&&!ge(u)&&(u=rt({},u)),t.style=et(u))}const l=Ye(e)?1:Ec(e)?128:Jd(e)?64:Re(e)?4:Ce(e)?2:0;return r(e,t,s,n,o,l,a,!0)}function Hf(e){return e?Rr(e)||Sc(e)?rt({},e):e:null}function dn(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:l,children:i,transition:u}=e,c=t?Wf(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ic(c),ref:t&&t.ref?s&&a?ge(a)?a.concat(Do(t)):[a,Do(t)]:Do(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Q?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dn(e.ssContent),ssFallback:e.ssFallback&&dn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Br(f,u.clone(f)),f}function Ne(e=" ",t=0){return ye(pa,null,e,t)}function no(e,t){const s=ye(Po,null,e);return s.staticCount=t,s}function F(e="",t=!1){return t?(p(),He(is,null,e)):ye(is,null,e)}function Vt(e){return e==null||typeof e=="boolean"?ye(is):ge(e)?ye(Q,null,e.slice()):so(e)?ms(e):ye(pa,null,String(e))}function ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dn(e)}function Wr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ge(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Wr(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!Sc(t)?t._ctx=at:o===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ce(t)?(t={default:t,_ctx:at},s=32):(t=String(t),n&64?(s=16,t=[Ne(t)]):s=8);e.children=t,e.shapeFlag|=s}function Wf(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(o==="style")t.style=et([t.style,n.style]);else if(oa(o)){const a=t[o],l=n[o];l&&a!==l&&!(ge(a)&&a.includes(l))&&(t[o]=a?[].concat(a,l):l)}else o!==""&&(t[o]=n[o])}return t}function Ht(e,t,s,n=null){Yt(e,t,7,[s,n])}const Kf=yc();let Vf=0;function Gf(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Kf,a={uid:Vf++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$c(n,o),emitsOptions:bc(n,o),emit:null,emitted:null,propsDefaults:De,inheritAttrs:n.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Cf.bind(null,a),e.ce&&e.ce(a),a}let ft=null;const zf=()=>ft||at;let Ko,tr;{const e=ia(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};Ko=t("__VUE_INSTANCE_SETTERS__",s=>ft=s),tr=t("__VUE_SSR_SETTERS__",s=>oo=s)}const vo=e=>{const t=ft;return Ko(e),e.scope.on(),()=>{e.scope.off(),Ko(t)}},Ol=()=>{ft&&ft.scope.off(),Ko(null)};function Pc(e){return e.vnode.shapeFlag&4}let oo=!1;function Jf(e,t=!1,s=!1){t&&tr(t);const{props:n,children:o}=e.vnode,a=Pc(e);Nf(e,n,a,t),Pf(e,o,s||t);const l=a?Yf(e,t):void 0;return t&&tr(!1),l}function Yf(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,vf);const{setup:n}=s;if(n){as();const o=e.setupContext=n.length>1?Xf(e):null,a=vo(e),l=po(n,e,0,[e.props,o]),i=Oi(l);if(rs(),a(),(i||e.sp)&&!rn(e)&&fc(e),i){if(l.then(Ol,Ol),t)return l.then(u=>{Il(e,u)}).catch(u=>{ua(u,e,0)});e.asyncDep=l}else Il(e,l)}else Dc(e)}function Il(e,t,s){Ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=ec(t)),Dc(e)}function Dc(e,t,s){const n=e.type;e.render||(e.render=n.render||Jt);{const o=vo(e);as();try{mf(e)}finally{rs(),o()}}}const qf={get(e,t){return dt(e,"get",""),e[t]}};function Xf(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,qf),slots:e.slots,emit:e.emit,expose:t}}function va(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ec(Pd(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Hn)return Hn[s](e)},has(t,s){return s in t||s in Hn}})):e.proxy}function Qf(e,t=!0){return Ce(e)?e.displayName||e.name:e.name||t&&e.__name}function Zf(e){return Ce(e)&&"__vccOpts"in e}const E=(e,t)=>Md(e,t,oo);function Rc(e,t,s){try{Wo(-1);const n=arguments.length;return n===2?Re(t)&&!ge(t)?so(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&so(s)&&(s=[s]),ye(e,t,s))}finally{Wo(1)}}const ep="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sr;const Pl=typeof window<"u"&&window.trustedTypes;if(Pl)try{sr=Pl.createPolicy("vue",{createHTML:e=>e})}catch{}const Lc=sr?e=>sr.createHTML(e):e=>e,tp="http://www.w3.org/2000/svg",sp="http://www.w3.org/1998/Math/MathML",Zt=typeof document<"u"?document:null,Dl=Zt&&Zt.createElement("template"),np={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Zt.createElementNS(tp,e):t==="mathml"?Zt.createElementNS(sp,e):s?Zt.createElement(e,{is:s}):Zt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Zt.createTextNode(e),createComment:e=>Zt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const l=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{Dl.innerHTML=Lc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=Dl.content;if(n==="svg"||n==="mathml"){const u=i.firstChild;for(;u.firstChild;)i.appendChild(u.firstChild);i.removeChild(u)}t.insertBefore(i,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},op=Symbol("_vtc");function ap(e,t,s){const n=e[op];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Vo=Symbol("_vod"),Bc=Symbol("_vsh"),rp={name:"show",beforeMount(e,{value:t},{transition:s}){e[Vo]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):An(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),An(e,!0),n.enter(e)):n.leave(e,()=>{An(e,!1)}):An(e,t))},beforeUnmount(e,{value:t}){An(e,t)}};function An(e,t){e.style.display=t?e[Vo]:"none",e[Bc]=!t}const lp=Symbol(""),ip=/(?:^|;)\s*display\s*:/;function cp(e,t,s){const n=e.style,o=Ye(s);let a=!1;if(s&&!o){if(t)if(Ye(t))for(const l of t.split(";")){const i=l.slice(0,l.indexOf(":")).trim();s[i]==null&&Ro(n,i,"")}else for(const l in t)s[l]==null&&Ro(n,l,"");for(const l in s)l==="display"&&(a=!0),Ro(n,l,s[l])}else if(o){if(t!==s){const l=n[lp];l&&(s+=";"+l),n.cssText=s,a=ip.test(s)}}else t&&e.removeAttribute("style");Vo in e&&(e[Vo]=a?n.display:"",e[Bc]&&(n.display="none"))}const Rl=/\s*!important$/;function Ro(e,t,s){if(ge(s))s.forEach(n=>Ro(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=up(e,t);Rl.test(s)?e.setProperty(Cs(n),s.replace(Rl,""),"important"):e[n]=s}}const Ll=["Webkit","Moz","ms"],Na={};function up(e,t){const s=Na[t];if(s)return s;let n=It(t);if(n!=="filter"&&n in e)return Na[t]=n;n=ra(n);for(let o=0;o<Ll.length;o++){const a=Ll[o]+n;if(a in e)return Na[t]=a}return t}const Bl="http://www.w3.org/1999/xlink";function Ml(e,t,s,n,o,a=dd(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Bl,t.slice(6,t.length)):e.setAttributeNS(Bl,t,s):s==null||a&&!Ri(s)?e.removeAttribute(t):e.setAttribute(t,a?"":Mt(s)?String(s):s)}function Ul(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Lc(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const i=a==="OPTION"?e.getAttribute("value")||"":e.value,u=s==null?e.type==="checkbox"?"on":"":String(s);(i!==u||!("_value"in e))&&(e.value=u),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Ri(s):s==null&&i==="string"?(s="",l=!0):i==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function ss(e,t,s,n){e.addEventListener(t,s,n)}function dp(e,t,s,n){e.removeEventListener(t,s,n)}const Fl=Symbol("_vei");function fp(e,t,s,n,o=null){const a=e[Fl]||(e[Fl]={}),l=a[t];if(n&&l)l.value=n;else{const[i,u]=pp(t);if(n){const c=a[t]=hp(n,o);ss(e,i,c,u)}else l&&(dp(e,i,l,u),a[t]=void 0)}}const jl=/(?:Once|Passive|Capture)$/;function pp(e){let t;if(jl.test(e)){t={};let n;for(;n=e.match(jl);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cs(e.slice(2)),t]}let Ea=0;const vp=Promise.resolve(),mp=()=>Ea||(vp.then(()=>Ea=0),Ea=Date.now());function hp(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Yt(gp(n,s.value),t,5,[n])};return s.value=e,s.attached=mp(),s}function gp(e,t){if(ge(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Hl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,yp=(e,t,s,n,o,a)=>{const l=o==="svg";t==="class"?ap(e,n,l):t==="style"?cp(e,s,n):oa(t)?kr(t)||fp(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bp(e,t,n,l))?(Ul(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ml(e,t,n,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ye(n))?Ul(e,It(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ml(e,t,n,l))};function bp(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Hl(t)&&Ce(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Hl(t)&&Ye(s)?!1:t in e}const ws=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?s=>Eo(t,s):t};function _p(e){e.target.composing=!0}function Wl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ot=Symbol("_assign");function Kl(e,t,s){return t&&(e=e.trim()),s&&(e=la(e)),e}const St={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[Ot]=ws(o);const a=n||o.props&&o.props.type==="number";ss(e,t?"change":"input",l=>{l.target.composing||e[Ot](Kl(e.value,s,a))}),(s||a)&&ss(e,"change",()=>{e.value=Kl(e.value,s,a)}),t||(ss(e,"compositionstart",_p),ss(e,"compositionend",Wl),ss(e,"change",Wl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},l){if(e[Ot]=ws(l),e.composing)return;const i=(a||e.type==="number")&&!/^0\d/.test(e.value)?la(e.value):e.value,u=t??"";i!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===u)||(e.value=u))}},Kr={deep:!0,created(e,t,s){e[Ot]=ws(s),ss(e,"change",()=>{const n=e._modelValue,o=fn(e),a=e.checked,l=e[Ot];if(ge(n)){const i=Tr(n,o),u=i!==-1;if(a&&!u)l(n.concat(o));else if(!a&&u){const c=[...n];c.splice(i,1),l(c)}}else if(_n(n)){const i=new Set(n);a?i.add(o):i.delete(o),l(i)}else l(Mc(e,a))})},mounted:Vl,beforeUpdate(e,t,s){e[Ot]=ws(s),Vl(e,t,s)}};function Vl(e,{value:t,oldValue:s},n){e._modelValue=t;let o;if(ge(t))o=Tr(t,n.props.value)>-1;else if(_n(t))o=t.has(n.props.value);else{if(t===s)return;o=Us(t,Mc(e,!0))}e.checked!==o&&(e.checked=o)}const Gl={created(e,{value:t},s){e.checked=Us(t,s.props.value),e[Ot]=ws(s),ss(e,"change",()=>{e[Ot](fn(e))})},beforeUpdate(e,{value:t,oldValue:s},n){e[Ot]=ws(n),t!==s&&(e.checked=Us(t,n.props.value))}},Kn={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=_n(t);ss(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?la(fn(l)):fn(l));e[Ot](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Zn(()=>{e._assigning=!1})}),e[Ot]=ws(n)},mounted(e,{value:t}){zl(e,t)},beforeUpdate(e,t,s){e[Ot]=ws(s)},updated(e,{value:t}){e._assigning||zl(e,t)}};function zl(e,t){const s=e.multiple,n=ge(t);if(!(s&&!n&&!_n(t))){for(let o=0,a=e.options.length;o<a;o++){const l=e.options[o],i=fn(l);if(s)if(n){const u=typeof i;u==="string"||u==="number"?l.selected=t.some(c=>String(c)===String(i)):l.selected=Tr(t,i)>-1}else l.selected=t.has(i);else if(Us(fn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function fn(e){return"_value"in e?e._value:e.value}function Mc(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const wp=["ctrl","shift","alt","meta"],Sp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wp.some(s=>e[`${s}Key`]&&!t.includes(s))},tt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let l=0;l<t.length;l++){const i=Sp[t[l]];if(i&&i(o,t))return}return e(o,...a)})},Cp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Go=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=o=>{if(!("key"in o))return;const a=Cs(o.key);if(t.some(l=>l===a||Cp[l]===a))return e(o)})},$p=rt({patchProp:yp},np);let Jl;function kp(){return Jl||(Jl=Rf($p))}const xp=(...e)=>{const t=kp().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=Tp(n);if(!o)return;const a=t._component;!Ce(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,Ap(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function Ap(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tp(e){return Ye(e)?document.querySelector(e):e}const we=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Np={};function Ep(e,t){const s=uf("router-view");return p(),He(s)}const Op=we(Np,[["render",Ep]]),Ip="modulepreload",Pp=function(e){return"/"+e},Yl={},Dp=function(t,s,n){let o=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),i=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(s.map(u=>{if(u=Pp(u),u in Yl)return;Yl[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ip,c||(d.as="script"),d.crossOrigin="",d.href=u,i&&d.setAttribute("nonce",i),document.head.appendChild(d),c)return new Promise((v,h)=>{d.addEventListener("load",v),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return o.then(l=>{for(const i of l||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Js=typeof document<"u";function Uc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Rp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Uc(e.default)}const Oe=Object.assign;function Oa(e,t){const s={};for(const n in t){const o=t[n];s[n]=Ft(o)?o.map(e):e(o)}return s}const Vn=()=>{},Ft=Array.isArray;function ql(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Fc=/#/g,Lp=/&/g,Bp=/\//g,Mp=/=/g,Up=/\?/g,jc=/\+/g,Fp=/%5B/g,jp=/%5D/g,Hc=/%5E/g,Hp=/%60/g,Wc=/%7B/g,Wp=/%7C/g,Kc=/%7D/g,Kp=/%20/g;function Vr(e){return e==null?"":encodeURI(""+e).replace(Wp,"|").replace(Fp,"[").replace(jp,"]")}function Vp(e){return Vr(e).replace(Wc,"{").replace(Kc,"}").replace(Hc,"^")}function nr(e){return Vr(e).replace(jc,"%2B").replace(Kp,"+").replace(Fc,"%23").replace(Lp,"%26").replace(Hp,"`").replace(Wc,"{").replace(Kc,"}").replace(Hc,"^")}function Gp(e){return nr(e).replace(Mp,"%3D")}function zp(e){return Vr(e).replace(Fc,"%23").replace(Up,"%3F")}function Jp(e){return zp(e).replace(Bp,"%2F")}function ao(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Yp=/\/$/,qp=e=>e.replace(Yp,"");function Ia(e,t,s="/"){let n,o={},a="",l="";const i=t.indexOf("#");let u=t.indexOf("?");return u=i>=0&&u>i?-1:u,u>=0&&(n=t.slice(0,u),a=t.slice(u,i>0?i:t.length),o=e(a.slice(1))),i>=0&&(n=n||t.slice(0,i),l=t.slice(i,t.length)),n=ev(n??t,s),{fullPath:n+a+l,path:n,query:o,hash:ao(l)}}function Xp(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Xl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Qp(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&pn(t.matched[n],s.matched[o])&&Vc(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function pn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Vc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var s in e)if(!Zp(e[s],t[s]))return!1;return!0}function Zp(e,t){return Ft(e)?Ql(e,t):Ft(t)?Ql(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Ql(e,t){return Ft(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function ev(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let a=s.length-1,l,i;for(l=0;l<n.length;l++)if(i=n[l],i!==".")if(i==="..")a>1&&a--;else break;return s.slice(0,a).join("/")+"/"+n.slice(l).join("/")}const fs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let or=function(e){return e.pop="pop",e.push="push",e}({}),Pa=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function tv(e){if(!e)if(Js){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qp(e)}const sv=/^[^#]+#/;function nv(e,t){return e.replace(sv,"#")+t}function ov(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const ma=()=>({left:window.scrollX,top:window.scrollY});function av(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=ov(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Zl(e,t){return(history.state?history.state.position-t:-1)+e}const ar=new Map;function rv(e,t){ar.set(e,t)}function lv(e){const t=ar.get(e);return ar.delete(e),t}function iv(e){return typeof e=="string"||e&&typeof e=="object"}function Gc(e){return typeof e=="string"||typeof e=="symbol"}let Ge=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const zc=Symbol("");Ge.MATCHER_NOT_FOUND+"",Ge.NAVIGATION_GUARD_REDIRECT+"",Ge.NAVIGATION_ABORTED+"",Ge.NAVIGATION_CANCELLED+"",Ge.NAVIGATION_DUPLICATED+"";function vn(e,t){return Oe(new Error,{type:e,[zc]:!0},t)}function Xt(e,t){return e instanceof Error&&zc in e&&(t==null||!!(e.type&t))}const cv=["params","query","hash"];function uv(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of cv)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function dv(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const o=s[n].replace(jc," "),a=o.indexOf("="),l=ao(a<0?o:o.slice(0,a)),i=a<0?null:ao(o.slice(a+1));if(l in t){let u=t[l];Ft(u)||(u=t[l]=[u]),u.push(i)}else t[l]=i}return t}function ei(e){let t="";for(let s in e){const n=e[s];if(s=Gp(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ft(n)?n.map(o=>o&&nr(o)):[n&&nr(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function fv(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ft(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const pv=Symbol(""),ti=Symbol(""),ha=Symbol(""),Gr=Symbol(""),rr=Symbol("");function Tn(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function hs(e,t,s,n,o,a=l=>l()){const l=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((i,u)=>{const c=v=>{v===!1?u(vn(Ge.NAVIGATION_ABORTED,{from:s,to:t})):v instanceof Error?u(v):iv(v)?u(vn(Ge.NAVIGATION_GUARD_REDIRECT,{from:t,to:v})):(l&&n.enterCallbacks[o]===l&&typeof v=="function"&&l.push(v),i())},f=a(()=>e.call(n&&n.instances[o],t,s,c));let d=Promise.resolve(f);e.length<3&&(d=d.then(c)),d.catch(v=>u(v))})}function Da(e,t,s,n,o=a=>a()){const a=[];for(const l of e)for(const i in l.components){let u=l.components[i];if(!(t!=="beforeRouteEnter"&&!l.instances[i]))if(Uc(u)){const c=(u.__vccOpts||u)[t];c&&a.push(hs(c,s,n,l,i,o))}else{let c=u();a.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${i}" at "${l.path}"`);const d=Rp(f)?f.default:f;l.mods[i]=f,l.components[i]=d;const v=(d.__vccOpts||d)[t];return v&&hs(v,s,n,l,i,o)()}))}}return a}function vv(e,t){const s=[],n=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let l=0;l<a;l++){const i=t.matched[l];i&&(e.matched.find(c=>pn(c,i))?n.push(i):s.push(i));const u=e.matched[l];u&&(t.matched.find(c=>pn(c,u))||o.push(u))}return[s,n,o]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mv=()=>location.protocol+"//"+location.host;function Jc(e,t){const{pathname:s,search:n,hash:o}=t,a=e.indexOf("#");if(a>-1){let l=o.includes(e.slice(a))?e.slice(a).length:1,i=o.slice(l);return i[0]!=="/"&&(i="/"+i),Xl(i,"")}return Xl(s,e)+n+o}function hv(e,t,s,n){let o=[],a=[],l=null;const i=({state:v})=>{const h=Jc(e,location),g=s.value,y=t.value;let k=0;if(v){if(s.value=h,t.value=v,l&&l===g){l=null;return}k=y?v.position-y.position:0}else n(h);o.forEach($=>{$(s.value,g,{delta:k,type:or.pop,direction:k?k>0?Pa.forward:Pa.back:Pa.unknown})})};function u(){l=s.value}function c(v){o.push(v);const h=()=>{const g=o.indexOf(v);g>-1&&o.splice(g,1)};return a.push(h),h}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(Oe({},v.state,{scroll:ma()}),"")}}function d(){for(const v of a)v();a=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:u,listen:c,destroy:d}}function si(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?ma():null}}function gv(e){const{history:t,location:s}=window,n={value:Jc(e,s)},o={value:t.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(u,c,f){const d=e.indexOf("#"),v=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+u:mv()+e+u;try{t[f?"replaceState":"pushState"](c,"",v),o.value=c}catch(h){console.error(h),s[f?"replace":"assign"](v)}}function l(u,c){a(u,Oe({},t.state,si(o.value.back,u,o.value.forward,!0),c,{position:o.value.position}),!0),n.value=u}function i(u,c){const f=Oe({},o.value,t.state,{forward:u,scroll:ma()});a(f.current,f,!0),a(u,Oe({},si(n.value,u,null),{position:f.position+1},c),!1),n.value=u}return{location:n,state:o,push:i,replace:l}}function yv(e){e=tv(e);const t=gv(e),s=hv(e,t.state,t.location,t.replace);function n(a,l=!0){l||s.pauseListeners(),history.go(a)}const o=Oe({location:"",base:e,go:n,createHref:nv.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function bv(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),yv(e)}let Rs=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Qe=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Qe||{});const _v={type:Rs.Static,value:""},wv=/[a-zA-Z0-9_]/;function Sv(e){if(!e)return[[]];if(e==="/")return[[_v]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${c}": ${h}`)}let s=Qe.Static,n=s;const o=[];let a;function l(){a&&o.push(a),a=[]}let i=0,u,c="",f="";function d(){c&&(s===Qe.Static?a.push({type:Rs.Static,value:c}):s===Qe.Param||s===Qe.ParamRegExp||s===Qe.ParamRegExpEnd?(a.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Rs.Param,value:c,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),c="")}function v(){c+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&s!==Qe.ParamRegExp){n=s,s=Qe.EscapeNext;continue}switch(s){case Qe.Static:u==="/"?(c&&d(),l()):u===":"?(d(),s=Qe.Param):v();break;case Qe.EscapeNext:v(),s=n;break;case Qe.Param:u==="("?s=Qe.ParamRegExp:wv.test(u)?v():(d(),s=Qe.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case Qe.ParamRegExp:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:s=Qe.ParamRegExpEnd:f+=u;break;case Qe.ParamRegExpEnd:d(),s=Qe.Static,u!=="*"&&u!=="?"&&u!=="+"&&i--,f="";break;default:t("Unknown state");break}}return s===Qe.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),l(),o}const ni="[^/]+?",Cv={sensitive:!1,strict:!1,start:!0,end:!0};var gt=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(gt||{});const $v=/[.+*?^${}()[\]/\\]/g;function kv(e,t){const s=Oe({},Cv,t),n=[];let o=s.start?"^":"";const a=[];for(const c of e){const f=c.length?[]:[gt.Root];s.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const v=c[d];let h=gt.Segment+(s.sensitive?gt.BonusCaseSensitive:0);if(v.type===Rs.Static)d||(o+="/"),o+=v.value.replace($v,"\\$&"),h+=gt.Static;else if(v.type===Rs.Param){const{value:g,repeatable:y,optional:k,regexp:$}=v;a.push({name:g,repeatable:y,optional:k});const _=$||ni;if(_!==ni){h+=gt.BonusCustomRegExp;try{`${_}`}catch(T){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+T.message)}}let S=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(S=k&&c.length<2?`(?:/${S})`:"/"+S),k&&(S+="?"),o+=S,h+=gt.Dynamic,k&&(h+=gt.BonusOptional),y&&(h+=gt.BonusRepeatable),_===".*"&&(h+=gt.BonusWildcard)}f.push(h)}n.push(f)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=gt.BonusStrict}s.strict||(o+="/?"),s.end?o+="$":s.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,s.sensitive?"":"i");function i(c){const f=c.match(l),d={};if(!f)return null;for(let v=1;v<f.length;v++){const h=f[v]||"",g=a[v-1];d[g.name]=h&&g.repeatable?h.split("/"):h}return d}function u(c){let f="",d=!1;for(const v of e){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const h of v)if(h.type===Rs.Static)f+=h.value;else if(h.type===Rs.Param){const{value:g,repeatable:y,optional:k}=h,$=g in c?c[g]:"";if(Ft($)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=Ft($)?$.join("/"):$;if(!_)if(k)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);f+=_}}return f||"/"}return{re:l,score:n,keys:a,parse:i,stringify:u}}function xv(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===gt.Static+gt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===gt.Static+gt.Segment?1:-1:0}function Yc(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const a=xv(n[s],o[s]);if(a)return a;s++}if(Math.abs(o.length-n.length)===1){if(oi(n))return 1;if(oi(o))return-1}return o.length-n.length}function oi(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Av={strict:!1,end:!0,sensitive:!1};function Tv(e,t,s){const n=kv(Sv(e.path),s),o=Oe(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Nv(e,t){const s=[],n=new Map;t=ql(Av,t);function o(d){return n.get(d)}function a(d,v,h){const g=!h,y=ri(d);y.aliasOf=h&&h.record;const k=ql(t,d),$=[y];if("alias"in d){const T=typeof d.alias=="string"?[d.alias]:d.alias;for(const P of T)$.push(ri(Oe({},y,{components:h?h.record.components:y.components,path:P,aliasOf:h?h.record:y})))}let _,S;for(const T of $){const{path:P}=T;if(v&&P[0]!=="/"){const B=v.record.path,L=B[B.length-1]==="/"?"":"/";T.path=v.record.path+(P&&L+P)}if(_=Tv(T,v,k),h?h.alias.push(_):(S=S||_,S!==_&&S.alias.push(_),g&&d.name&&!li(_)&&l(d.name)),qc(_)&&u(_),y.children){const B=y.children;for(let L=0;L<B.length;L++)a(B[L],_,h&&h.children[L])}h=h||_}return S?()=>{l(S)}:Vn}function l(d){if(Gc(d)){const v=n.get(d);v&&(n.delete(d),s.splice(s.indexOf(v),1),v.children.forEach(l),v.alias.forEach(l))}else{const v=s.indexOf(d);v>-1&&(s.splice(v,1),d.record.name&&n.delete(d.record.name),d.children.forEach(l),d.alias.forEach(l))}}function i(){return s}function u(d){const v=Iv(d,s);s.splice(v,0,d),d.record.name&&!li(d)&&n.set(d.record.name,d)}function c(d,v){let h,g={},y,k;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw vn(Ge.MATCHER_NOT_FOUND,{location:d});k=h.record.name,g=Oe(ai(v.params,h.keys.filter(S=>!S.optional).concat(h.parent?h.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),d.params&&ai(d.params,h.keys.map(S=>S.name))),y=h.stringify(g)}else if(d.path!=null)y=d.path,h=s.find(S=>S.re.test(y)),h&&(g=h.parse(y),k=h.record.name);else{if(h=v.name?n.get(v.name):s.find(S=>S.re.test(v.path)),!h)throw vn(Ge.MATCHER_NOT_FOUND,{location:d,currentLocation:v});k=h.record.name,g=Oe({},v.params,d.params),y=h.stringify(g)}const $=[];let _=h;for(;_;)$.unshift(_.record),_=_.parent;return{name:k,path:y,params:g,matched:$,meta:Ov($)}}e.forEach(d=>a(d));function f(){s.length=0,n.clear()}return{addRoute:a,resolve:c,removeRoute:l,clearRoutes:f,getRoutes:i,getRecordMatcher:o}}function ai(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function ri(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ev(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ev(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function li(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Ov(e){return e.reduce((t,s)=>Oe(t,s.meta),{})}function Iv(e,t){let s=0,n=t.length;for(;s!==n;){const a=s+n>>1;Yc(e,t[a])<0?n=a:s=a+1}const o=Pv(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function Pv(e){let t=e;for(;t=t.parent;)if(qc(t)&&Yc(e,t)===0)return t}function qc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ii(e){const t=Bt(ha),s=Bt(Gr),n=E(()=>{const u=M(e.to);return t.resolve(u)}),o=E(()=>{const{matched:u}=n.value,{length:c}=u,f=u[c-1],d=s.matched;if(!f||!d.length)return-1;const v=d.findIndex(pn.bind(null,f));if(v>-1)return v;const h=ci(u[c-2]);return c>1&&ci(f)===h&&d[d.length-1].path!==h?d.findIndex(pn.bind(null,u[c-2])):v}),a=E(()=>o.value>-1&&Mv(s.params,n.value.params)),l=E(()=>o.value>-1&&o.value===s.matched.length-1&&Vc(s.params,n.value.params));function i(u={}){if(Bv(u)){const c=t[M(e.replace)?"replace":"push"](M(e.to)).catch(Vn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:E(()=>n.value.href),isActive:a,isExactActive:l,navigate:i}}function Dv(e){return e.length===1?e[0]:e}const Rv=dc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ii,setup(e,{slots:t}){const s=Lt(ii(e)),{options:n}=Bt(ha),o=E(()=>({[ui(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[ui(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const a=t.default&&Dv(t.default(s));return e.custom?a:Rc("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},a)}}}),Lv=Rv;function Bv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Mv(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!Ft(o)||o.length!==n.length||n.some((a,l)=>a.valueOf()!==o[l].valueOf()))return!1}return!0}function ci(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ui=(e,t,s)=>e??t??s,Uv=dc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Bt(rr),o=E(()=>e.route||n.value),a=Bt(ti,0),l=E(()=>{let c=M(a);const{matched:f}=o.value;let d;for(;(d=f[c])&&!d.components;)c++;return c}),i=E(()=>o.value.matched[l.value]);Oo(ti,E(()=>l.value+1)),Oo(pv,i),Oo(rr,o);const u=O();return ot(()=>[u.value,i.value,e.name],([c,f,d],[v,h,g])=>{f&&(f.instances[d]=c,h&&h!==f&&c&&c===v&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),c&&f&&(!h||!pn(f,h)||!v)&&(f.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=o.value,f=e.name,d=i.value,v=d&&d.components[f];if(!v)return di(s.default,{Component:v,route:c});const h=d.props[f],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,k=Rc(v,Oe({},g,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(d.instances[f]=null)},ref:u}));return di(s.default,{Component:k,route:c})||k}}});function di(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Fv=Uv;function jv(e){const t=Nv(e.routes,e),s=e.parseQuery||dv,n=e.stringifyQuery||ei,o=e.history,a=Tn(),l=Tn(),i=Tn(),u=Dd(fs);let c=fs;Js&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Oa.bind(null,W=>""+W),d=Oa.bind(null,Jp),v=Oa.bind(null,ao);function h(W,ne){let ae,ce;return Gc(W)?(ae=t.getRecordMatcher(W),ce=ne):ce=W,t.addRoute(ce,ae)}function g(W){const ne=t.getRecordMatcher(W);ne&&t.removeRoute(ne)}function y(){return t.getRoutes().map(W=>W.record)}function k(W){return!!t.getRecordMatcher(W)}function $(W,ne){if(ne=Oe({},ne||u.value),typeof W=="string"){const R=Ia(s,W,ne.path),V=t.resolve({path:R.path},ne),J=o.createHref(R.fullPath);return Oe(R,V,{params:v(V.params),hash:ao(R.hash),redirectedFrom:void 0,href:J})}let ae;if(W.path!=null)ae=Oe({},W,{path:Ia(s,W.path,ne.path).path});else{const R=Oe({},W.params);for(const V in R)R[V]==null&&delete R[V];ae=Oe({},W,{params:d(R)}),ne.params=d(ne.params)}const ce=t.resolve(ae,ne),ke=W.hash||"";ce.params=f(v(ce.params));const C=Xp(n,Oe({},W,{hash:Vp(ke),path:ce.path})),x=o.createHref(C);return Oe({fullPath:C,hash:ke,query:n===ei?fv(W.query):W.query||{}},ce,{redirectedFrom:void 0,href:x})}function _(W){return typeof W=="string"?Ia(s,W,u.value.path):Oe({},W)}function S(W,ne){if(c!==W)return vn(Ge.NAVIGATION_CANCELLED,{from:ne,to:W})}function T(W){return L(W)}function P(W){return T(Oe(_(W),{replace:!0}))}function B(W,ne){const ae=W.matched[W.matched.length-1];if(ae&&ae.redirect){const{redirect:ce}=ae;let ke=typeof ce=="function"?ce(W,ne):ce;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=_(ke):{path:ke},ke.params={}),Oe({query:W.query,hash:W.hash,params:ke.path!=null?{}:W.params},ke)}}function L(W,ne){const ae=c=$(W),ce=u.value,ke=W.state,C=W.force,x=W.replace===!0,R=B(ae,ce);if(R)return L(Oe(_(R),{state:typeof R=="object"?Oe({},ke,R.state):ke,force:C,replace:x}),ne||ae);const V=ae;V.redirectedFrom=ne;let J;return!C&&Qp(n,ce,ae)&&(J=vn(Ge.NAVIGATION_DUPLICATED,{to:V,from:ce}),A(ce,ce,!0,!1)),(J?Promise.resolve(J):ue(V,ce)).catch(G=>Xt(G)?Xt(G,Ge.NAVIGATION_GUARD_REDIRECT)?G:q(G):ee(G,V,ce)).then(G=>{if(G){if(Xt(G,Ge.NAVIGATION_GUARD_REDIRECT))return L(Oe({replace:x},_(G.to),{state:typeof G.to=="object"?Oe({},ke,G.to.state):ke,force:C}),ne||V)}else G=fe(V,ce,!0,x,ke);return me(V,ce,G),G})}function z(W,ne){const ae=S(W,ne);return ae?Promise.reject(ae):Promise.resolve()}function K(W){const ne=be.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(W):W()}function ue(W,ne){let ae;const[ce,ke,C]=vv(W,ne);ae=Da(ce.reverse(),"beforeRouteLeave",W,ne);for(const R of ce)R.leaveGuards.forEach(V=>{ae.push(hs(V,W,ne))});const x=z.bind(null,W,ne);return ae.push(x),$e(ae).then(()=>{ae=[];for(const R of a.list())ae.push(hs(R,W,ne));return ae.push(x),$e(ae)}).then(()=>{ae=Da(ke,"beforeRouteUpdate",W,ne);for(const R of ke)R.updateGuards.forEach(V=>{ae.push(hs(V,W,ne))});return ae.push(x),$e(ae)}).then(()=>{ae=[];for(const R of C)if(R.beforeEnter)if(Ft(R.beforeEnter))for(const V of R.beforeEnter)ae.push(hs(V,W,ne));else ae.push(hs(R.beforeEnter,W,ne));return ae.push(x),$e(ae)}).then(()=>(W.matched.forEach(R=>R.enterCallbacks={}),ae=Da(C,"beforeRouteEnter",W,ne,K),ae.push(x),$e(ae))).then(()=>{ae=[];for(const R of l.list())ae.push(hs(R,W,ne));return ae.push(x),$e(ae)}).catch(R=>Xt(R,Ge.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function me(W,ne,ae){i.list().forEach(ce=>K(()=>ce(W,ne,ae)))}function fe(W,ne,ae,ce,ke){const C=S(W,ne);if(C)return C;const x=ne===fs,R=Js?history.state:{};ae&&(ce||x?o.replace(W.fullPath,Oe({scroll:x&&R&&R.scroll},ke)):o.push(W.fullPath,ke)),u.value=W,A(W,ne,ae,x),q()}let Se;function xe(){Se||(Se=o.listen((W,ne,ae)=>{if(!Ae.listening)return;const ce=$(W),ke=B(ce,Ae.currentRoute.value);if(ke){L(Oe(ke,{replace:!0,force:!0}),ce).catch(Vn);return}c=ce;const C=u.value;Js&&rv(Zl(C.fullPath,ae.delta),ma()),ue(ce,C).catch(x=>Xt(x,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_CANCELLED)?x:Xt(x,Ge.NAVIGATION_GUARD_REDIRECT)?(L(Oe(_(x.to),{force:!0}),ce).then(R=>{Xt(R,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&!ae.delta&&ae.type===or.pop&&o.go(-1,!1)}).catch(Vn),Promise.reject()):(ae.delta&&o.go(-ae.delta,!1),ee(x,ce,C))).then(x=>{x=x||fe(ce,C,!1),x&&(ae.delta&&!Xt(x,Ge.NAVIGATION_CANCELLED)?o.go(-ae.delta,!1):ae.type===or.pop&&Xt(x,Ge.NAVIGATION_ABORTED|Ge.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),me(ce,C,x)}).catch(Vn)}))}let de=Tn(),pe=Tn(),Z;function ee(W,ne,ae){q(W);const ce=pe.list();return ce.length?ce.forEach(ke=>ke(W,ne,ae)):console.error(W),Promise.reject(W)}function ve(){return Z&&u.value!==fs?Promise.resolve():new Promise((W,ne)=>{de.add([W,ne])})}function q(W){return Z||(Z=!W,xe(),de.list().forEach(([ne,ae])=>W?ae(W):ne()),de.reset()),W}function A(W,ne,ae,ce){const{scrollBehavior:ke}=e;if(!Js||!ke)return Promise.resolve();const C=!ae&&lv(Zl(W.fullPath,0))||(ce||!ae)&&history.state&&history.state.scroll||null;return Zn().then(()=>ke(W,ne,C)).then(x=>x&&av(x)).catch(x=>ee(x,W,ne))}const w=W=>o.go(W);let X;const be=new Set,Ae={currentRoute:u,listening:!0,addRoute:h,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:k,getRoutes:y,resolve:$,options:e,push:T,replace:P,go:w,back:()=>w(-1),forward:()=>w(1),beforeEach:a.add,beforeResolve:l.add,afterEach:i.add,onError:pe.add,isReady:ve,install(W){W.component("RouterLink",Lv),W.component("RouterView",Fv),W.config.globalProperties.$router=Ae,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>M(u)}),Js&&!X&&u.value===fs&&(X=!0,T(o.location).catch(ce=>{}));const ne={};for(const ce in fs)Object.defineProperty(ne,ce,{get:()=>u.value[ce],enumerable:!0});W.provide(ha,Ae),W.provide(Gr,Qi(ne)),W.provide(rr,u);const ae=W.unmount;be.add(W),W.unmount=function(){be.delete(W),be.size<1&&(c=fs,Se&&Se(),Se=null,u.value=fs,X=!1,Z=!1),ae()}}};function $e(W){return W.reduce((ne,ae)=>ne.then(()=>K(ae)),Promise.resolve())}return Ae}function Hv(){return Bt(ha)}function DT(e){return Bt(Gr)}function ko(e){const t=[],s=e.split(`
`);let n=null,o=[],a=!1,l="";for(let i=0;i<s.length;i++){const u=s[i];if(u.startsWith("%"))continue;if(a){u.includes("}")?(l+=u.substring(0,u.indexOf("}")),o.push(l.trim()),l="",a=!1):l+=u+`
`;continue}if(u.includes("{")){const d=u.indexOf("{");if(u.includes("}")){const v=u.indexOf("}");o.push(u.substring(d+1,v).trim())}else l=u.substring(d+1)+`
`,a=!0;continue}const c=u.match(/\[Play\s+"([NESW])"\](\w+)/);if(c&&n){n.openingLeader=c[1],n.openingLead=c[2];continue}const f=u.match(/\[(\w+)\s+"([^"]*)"\]/);if(f){const[,d,v]=f;if(d==="Board")n&&(n.commentary=vi(o),n.steps=fi(o),n.auction=pi(n.auction),t.push(n)),n=Wv(),n.boardNumber=parseInt(v,10),o=[];else if(n)switch(d){case"Dealer":n.dealer=v;break;case"Vulnerable":n.vulnerable=v;break;case"Contract":n.contract=v;break;case"Declarer":n.declarer=v;break;case"Student":n.studentSeat=v;break;case"Deal":n.hands=Kv(v);break;case"Auction":n.auctionDealer=v;break;case"Result":n.result=v;break;case"Event":n.event=v;break;case"SkillPath":n.skillPath=v;break;case"Category":n.category=v;break;case"Difficulty":n.difficulty=v;break}continue}if(n&&n.auctionDealer){const d=u.trim();if(d&&!d.startsWith("[")&&!d.startsWith("{")){const v=Gv(d);n.auction.push(...v)}}}return n&&(n.commentary=vi(o),n.steps=fi(o),n.auction=pi(n.auction),t.push(n)),t}function fi(e){if(!e.length)return[];const t=e.join(`

`),s=/(\[BID\s+[^\]]+\]|\[NEXT\]|\[ROTATE\]|\[choose-card\s+[^\]]+\])/gi,n=t.split(s);if(n.length===1)return[];const o=[];let a="";for(let l=0;l<n.length;l++){const i=n[l],u=i.match(/^\[BID\s+([^\]]+)\]$/i),c=/^\[NEXT\]$/i.test(i),f=/^\[ROTATE\]$/i.test(i),d=i.match(/^\[choose-card\s+([^\]]+)\]$/i);if(u){const v=zr(u[1]).replace(/!/g,"").trim(),h=a.trim();a="";let g="";if(l+1<n.length){const $=n[l+1];$.match(/^\[(?:BID|NEXT|ROTATE|choose-card)\b/i)||(g=$.trim(),l++)}const y=Nn(h,"bid"),k=Nn(g,"bid");o.push({...y,type:"bid",bid:v,explanationText:k.text,showSeatsAfter:k.showSeats})}else if(c||f){const v=c?"next":"rotate";a.trim()&&o.push(Nn(a.trim(),v)),a=""}else if(d){const v=d[1].trim();let h;if(v.toLowerCase().startsWith("any:")?h={cards:v.substring(4).split(",").map(y=>zo(y.trim())),anyOf:!0}:h={card:zo(v)},a.trim()){const g=Nn(a.trim(),"choose-card");g.chooseCard=h,o.push(g)}a=""}else a+=i}if(a.trim()){const l=Nn(a.trim(),"end");o.push(l)}return o}function Nn(e,t){let s=null;const n=e.match(/\[SHOW\s+([^\]]+)\]/i);if(n){const _=n[1].toUpperCase().trim();if(_==="ALL")s=["N","E","S","W"];else{const S=[];_.includes("N")&&S.push("N"),_.includes("E")&&S.push("E"),_.includes("S")&&S.push("S"),_.includes("W")&&S.push("W"),S.length>0&&(s=S)}}const o=[],a=/\[PLAY\s+([^\]]+)\]/gi;let l;for(;(l=a.exec(e))!==null;)o.push(l[1]);const i=/\[RESET\]/i.test(e);let u=null;const c=e.match(/\[choose-card\s+([^\]]+)\]/i);if(c){const _=c[1].trim();_.toLowerCase().startsWith("any:")?u={cards:_.substring(4).split(",").map(T=>zo(T.trim())),anyOf:!0}:u={card:zo(_)}}let f=null;const d=/\[AUCTION\s+off\]/i.test(e),v=/\[AUCTION\s+on\]/i.test(e);d&&(f=!1),v&&(f=!0);const h=/\[SHOW_LEAD\]/i.test(e),g=/\[clear-commentary\]/i.test(e);let y=null;const k=e.match(/\[showcards\s+([^\]]+)\]/i);if(k){const _=k[1].trim();y={};const S=/([NESW]):([^,\s]+(?:,[^,\s]+)*)/gi;let T;for(;(T=S.exec(_))!==null;){const P=T[1].toUpperCase(),B=T[2].split(",").map(L=>L.trim().toUpperCase());y[P]=B}Object.keys(y).length===0&&(y=null)}let $=e.replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[RESET\]/gi,"").replace(/\[AUCTION\s+(?:on|off)\]/gi,"").replace(/\[SHOW_LEAD\]/gi,"").replace(/\[showcards\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\[clear-commentary\]/gi,"").replace(/^[A-Z][a-zA-Z-]*(?:\s+[A-Z][a-zA-Z-]*)?\s+\d+\s*$/gim,"").trim();return{text:zr($),type:t,showSeats:s,plays:o,reset:i,showAuction:f,showLead:h,clearCommentary:g,showcards:y,chooseCard:u}}function Wv(){return{boardNumber:0,dealer:"N",vulnerable:"None",contract:"",declarer:"",studentSeat:"S",hands:{N:null,E:null,S:null,W:null},auction:[],auctionDealer:"",result:"",commentary:"",steps:[],openingLeader:null,openingLead:null,event:"",skillPath:null,category:null,difficulty:null}}function zo(e){return e.toUpperCase().replace("10","T")}function Kv(e){const t={N:null,E:null,S:null,W:null},s=e.split(" ");if(s.length!==4)return t;const n=["W","N","E","S"];let o=0;const a=s[0],l=a.indexOf(":");if(l!==-1){const i=a.charAt(0).toUpperCase();o=n.indexOf(i),s[0]=a.substring(l+1)}for(let i=0;i<4;i++){const u=(o+i)%4,c=n[u];t[c]=Vv(s[i])}return t}function Vv(e){const t=e.split(".");return t.length!==4?null:{spades:xo(t[0]),hearts:xo(t[1]),diamonds:xo(t[2]),clubs:xo(t[3])}}function xo(e){return e?e.split(""):[]}function pi(e){let t=-1;for(let s=0;s<e.length;s++)e[s]!=="Pass"&&(t=s);return t===-1?e.slice(0,4):e.slice(0,t+4)}function Gv(e){const t=e.split(/\s+/).filter(n=>n.length>0).filter(n=>!/^=\d+=?$/.test(n)),s=[];for(const n of t)n.toUpperCase()==="AP"?s.push("Pass","Pass","Pass"):s.push(zv(n));return s}function zv(e){const t=e.replace(/!/g,"").toUpperCase();return t==="PASS"||t==="P"?"Pass":t==="X"||t==="DBL"||t==="DOUBLE"?"X":t==="XX"||t==="RDBL"||t==="REDOUBLE"?"XX":t}function vi(e){return e.length?zr(e.join(`

`)):""}function zr(e){return e.replace(/\\S/g,"").replace(/\\H/g,"").replace(/\\D/g,"").replace(/\\C/g,"").replace(/\\s/g,"").replace(/\\h/g,"").replace(/\\d/g,"").replace(/\\c/g,"")}function Jv(e){const t=["N","E","S","W"],s=t.indexOf(e);return[...t.slice(s),...t.slice(0,s)]}function Ao(e,t){return Jv(t)[e%4]}const Jr={spades:"",hearts:"",diamonds:"",clubs:"",S:"",H:"",D:"",C:""},mi={spades:"black",hearts:"red",diamonds:"red",clubs:"black"},Xc=["spades","hearts","diamonds","clubs"];function Ra(e){return e==="T"?"10":e}function Yr(e){if(!e)return{text:"",html:""};const t=e.toUpperCase();if(t==="PASS"||t==="P")return{text:"Pass",html:"Pass"};if(t==="X")return{text:"X",html:'<span class="double">X</span>'};if(t==="XX")return{text:"XX",html:'<span class="redouble">XX</span>'};const s=e.match(/^(\d)(C|D|H|S|NT?)$/i);if(s){const n=s[1],o=s[2].toUpperCase();if(o==="NT"||o==="N")return{text:`${n}NT`,html:`${n}NT`};const a=Jr[o],l=o==="H"||o==="D"?"red":"black";return{text:`${n}${a}`,html:`${n}<span class="${l}">${a}</span>`}}return{text:e,html:e}}function Yv(e){return(mi[e.toLowerCase()]||mi[e])==="red"?"suit-red":"suit-black"}function qv(e){if(!e)return"None";const t=e.toUpperCase();return t==="NONE"||t==="-"||t==="LOVE"?"None":t==="NS"||t==="N-S"?"N-S Vul":t==="EW"||t==="E-W"?"E-W Vul":t==="BOTH"||t==="ALL"?"Both Vul":e}function lr(e){return{N:"North",E:"East",S:"South",W:"West"}[e]||e}function Xv(e){if(!e)return 0;const t={A:4,K:3,Q:2,J:1};let s=0;for(const n of Xc)for(const o of e[n]||[])s+=t[o]||0;return s}function Qv(e){if(!e)return{text:"",html:""};const t=e[0].toUpperCase();let s=e.slice(1).toUpperCase();s==="T"&&(s="10");const n=Jr[t]||t,o=t==="H"||t==="D"?"suit-red":"suit-black";return{text:`${n}${s}`,html:`<span class="${o}">${n}</span>${s}`}}function En(e){return e?e.replace(/(\s*\n\s*){2,}/g,`

`).split(`

`).map(n=>n.replace(/\s*\n\s*/g," ").replace(/\s+/g," ").trim()).filter(n=>n.length>0).join(`

`):""}function Zv(e){return e?e.replace(/\[BID\s+[^\]]*\]/gi,"").replace(/\[NEXT\]/gi,"").replace(/\[ROTATE\]/gi,"").replace(/\[PLAY\s+[^\]]*\]/gi,"").replace(/\[SHOW\s+[^\]]*\]/gi,"").replace(/\[choose-card\s+[^\]]*\]/gi,"").replace(/\n{3,}/g,`

`).trim():""}function Ys(e){return e?e.replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-black"></span>').replace(//g,'<span class="suit-red"></span>').replace(//g,'<span class="suit-red"></span>'):""}function em({observationId:e=null,userId:t,sessionId:s,deal:n,promptIndex:o,auctionSoFar:a,expectedBid:l,studentBid:i,correct:u,attemptNumber:c,timeTakenMs:f,skillPath:d,assignment:v=null,prompts:h=null,boardResult:g=null}){var _,S,T,P,B,L,z,K,ue,me,fe;const y=((_=n.steps)==null?void 0:_.filter(Se=>Se.type==="bid").length)||1,k=n.studentSeat||"S",$=((S=n.hands)==null?void 0:S[k.toLowerCase()])||"";return{observation_id:e||crypto.randomUUID(),timestamp:new Date().toISOString(),user_id:t,session_id:s,deal:{subfolder:n.subfolder||n.category||"Unknown",filename:n.filename||null,deal_number:n.boardNumber||n.dealNumber||null,kind:n.kind||null,dealer:n.dealer||"N",vulnerability:n.vulnerable||"None",student_seat:k,hands:{north:((T=n.hands)==null?void 0:T.N)||((P=n.hands)==null?void 0:P.north)||"",east:((B=n.hands)==null?void 0:B.E)||((L=n.hands)==null?void 0:L.east)||"",south:((z=n.hands)==null?void 0:z.S)||((K=n.hands)==null?void 0:K.south)||"",west:((ue=n.hands)==null?void 0:ue.W)||((me=n.hands)==null?void 0:me.west)||""},full_auction:((fe=n.auction)==null?void 0:fe.join(" "))||"",contract:n.contract||null,declarer:n.declarer||null,lead:n.lead||null},bid_prompt:{prompt_index:o,total_prompts:y,auction_so_far:[...a],expected_bid:l,student_hand:$},result:{student_bid:i,correct:u,attempt_number:c,time_taken_ms:f},skill_path:d,board_result:g,assignment:v,prompts:h||[]}}function Qc(e,t){return{observation_id:e.observation_id,user_id:e.user_id,session_id:e.session_id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.result.correct,board_result:e.board_result||null,classroom:t||null,deal_subfolder:e.deal.subfolder,deal_number:e.deal.deal_number}}function tm(e){const t=[];return e?(e.observation_id||t.push("Missing observation_id"),e.timestamp||t.push("Missing timestamp"),e.user_id||t.push("Missing user_id"),e.session_id||t.push("Missing session_id"),e.deal?(e.deal.dealer||t.push("Missing deal.dealer"),e.deal.student_seat||t.push("Missing deal.student_seat"),e.deal.hands||t.push("Missing deal.hands")):t.push("Missing deal object"),e.bid_prompt?(e.bid_prompt.prompt_index===void 0&&t.push("Missing bid_prompt.prompt_index"),e.bid_prompt.prompt_index!==-1&&!e.bid_prompt.expected_bid&&t.push("Missing bid_prompt.expected_bid")):t.push("Missing bid_prompt object"),e.result?e.result.correct===void 0&&t.push("Missing result.correct"):t.push("Missing result object"),e.skill_path||t.push("Missing skill_path"),{valid:t.length===0,errors:t}):{valid:!1,errors:["Observation is null or undefined"]}}function sm(){return crypto.randomUUID()}function nm(e){return`uncategorized/${e.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"unknown"}`}function Zc(e){if(!e)return{path:"uncategorized/unknown",name:"Unknown",category:"Uncategorized"};const t=e.split("/"),s=t[0]||"uncategorized",n=t[t.length-1]||"unknown",o=a=>a.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return{path:e,name:o(n),category:o(s)}}function om(e){const[t]=e.split("/");return t||"uncategorized"}function am(e){if(!e)return{id:"uncategorized",name:"Uncategorized"};const t=e.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");return{id:e,name:t}}const eu={name:"AES-GCM",length:256},qr={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"};async function rm(){const e=await crypto.subtle.generateKey(eu,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("raw",e);return Fs(t)}async function tu(e){const t=js(e);return crypto.subtle.importKey("raw",t,eu,!0,["encrypt","decrypt"])}async function Xr(e,t){const s=await tu(t),n=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(e)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,a);return{encrypted_data:Fs(l),iv:Fs(n)}}async function Qr(e,t,s){const n=await tu(s),o=js(e),a=js(t),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},n,o),i=new TextDecoder;return JSON.parse(i.decode(l))}async function lm(e){const t=js(e);return crypto.subtle.importKey("spki",t,qr,!0,["encrypt"])}async function im(e){const t=js(e);return crypto.subtle.importKey("pkcs8",t,qr,!0,["decrypt"])}async function cm(){const e=await crypto.subtle.generateKey(qr,!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),s=await crypto.subtle.exportKey("pkcs8",e.privateKey);return{publicKey:Fs(t),privateKey:Fs(s)}}async function su(e,t){const s=await lm(t),n=js(e),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},s,n);return Fs(o)}async function um(e,t){const s=await im(t),n=js(e),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},s,n);return Fs(o)}function dm(e){return{bridge_practice_backup:!0,version:"2.0",user_id:e.id,name:`${e.firstName} ${e.lastName}`,email:e.email,secret_key:e.secretKey,created:new Date().toISOString().split("T")[0],note:"Keep this file safe. Import it to restore your practice history on a new device."}}function fm(e){if(!e||typeof e!="object")return{valid:!1,error:"Invalid backup file format"};if(!e.bridge_practice_backup)return{valid:!1,error:"Not a Bridge Practice backup file"};if(e.version==="2.0"){if(!e.secret_key)return{valid:!1,error:"Backup file is missing secret key"}}else if(e.version==="1.0"||!e.version)return{valid:!1,error:"Legacy backup format (v1.0) is no longer supported. Please re-register."};return e.user_id?{valid:!0}:{valid:!1,error:"Backup file is missing user ID"}}async function pm(e){try{const t={test:"validation",timestamp:Date.now()},{encrypted_data:s,iv:n}=await Xr(t,e);return(await Qr(s,n,e)).test==="validation"}catch(t){return console.error("Key validation failed:",t),!1}}function Fs(e){const t=new Uint8Array(e);let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t[n]);return btoa(s)}function js(e){const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}const ir="bridgePractice",Ue=O({}),qe=O(null),Ss=O(null),ro=O(!1),ga=O(!1);function nu(){try{const e=localStorage.getItem(ir);if(e){const t=JSON.parse(e);Ue.value=t.users||{},qe.value=t.currentUserId||null,Ss.value=t.adminViewerId||null}ro.value=!0}catch(e){console.error("Failed to load user store from storage:",e),ro.value=!0}}function Pt(){try{const e=localStorage.getItem(ir),t=e?JSON.parse(e):{};t.users=Ue.value,t.currentUserId=qe.value,Ss.value&&(t.adminViewerId=Ss.value),localStorage.setItem(ir,JSON.stringify(t))}catch(e){console.error("Failed to save user store to storage:",e)}}async function vm({firstName:e,lastName:t,email:s,classrooms:n=[],dataConsent:o=!0,apiUrl:a}){const l=crypto.randomUUID(),i=new Date().toISOString(),u=await rm();let c=null;if(a)try{const d=await fetch(`${a}/keys/admin`);if(d.ok){const v=await d.json();Ss.value=v.viewer_id,c={grantee_id:v.viewer_id,encrypted_payload:await su(u,v.public_key)}}}catch(d){console.warn("Failed to create admin sharing grant:",d)}const f={id:l,firstName:e.trim(),lastName:t.trim(),email:s.trim().toLowerCase(),classrooms:n,dataConsent:o,secretKey:u,role:"student",serverRegistered:!1,adminGrantPayload:c,createdAt:i,updatedAt:i};return Ue.value[l]=f,qe.value=l,Pt(),ga.value=!0,f}function mm(e,t){if(!Ue.value[e])return console.error("User not found:",e),null;const s=Ue.value[e];return t.firstName!==void 0&&(s.firstName=t.firstName.trim()),t.lastName!==void 0&&(s.lastName=t.lastName.trim()),t.email!==void 0&&(s.email=t.email.trim().toLowerCase()),t.classrooms!==void 0&&(s.classrooms=t.classrooms),t.dataConsent!==void 0&&(s.dataConsent=t.dataConsent),t.serverRegistered!==void 0&&(s.serverRegistered=t.serverRegistered),t.role!==void 0&&(s.role=t.role),s.updatedAt=new Date().toISOString(),Pt(),s}function hm(e){if(!Ue.value[e])return!1;if(delete Ue.value[e],qe.value===e){const t=Object.keys(Ue.value);qe.value=t.length>0?t[0]:null}return Pt(),!0}function gm(e){return Ue.value[e]?(qe.value=e,Pt(),!0):(console.error("User not found:",e),!1)}function ym(e,t){const s=e.trim().toLowerCase(),n=t.trim().toLowerCase();for(const o of Object.values(Ue.value))if(o.firstName.toLowerCase()===s&&o.lastName.toLowerCase()===n)return o;return null}function bm(e){const t=e.trim().toLowerCase();for(const s of Object.values(Ue.value))if(s.email&&s.email.toLowerCase()===t)return s;return null}function _m(e){return Ue.value[e]||null}function wm(){Ue.value={},qe.value=null,Ss.value=null,ga.value=!1,Pt(),ro.value=!1}function Sm(){ro.value||nu()}async function Cm(e){const t=fm(e);if(!t.valid)return{success:!1,error:t.error};if(!await pm(e.secret_key))return{success:!1,error:"The secret key in this backup file is invalid or corrupted"};const n=Ue.value[e.user_id];if(n)return n.secretKey=e.secret_key,n.updatedAt=new Date().toISOString(),qe.value=e.user_id,Pt(),{success:!0,user:n};const o=(e.name||"Restored User").split(" "),a=o[0]||"Restored",l=o.slice(1).join(" ")||"User",i={id:e.user_id,firstName:a,lastName:l,email:e.email||"",classrooms:[],dataConsent:!0,secretKey:e.secret_key,serverRegistered:!1,restoredFromBackup:!0,createdAt:e.created||new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[i.id]=i,qe.value=i.id,Pt(),{success:!0,user:i}}function $m(){const e=Ue.value[qe.value];return!e||!e.secretKey?null:dm(e)}function km(){ga.value=!1}function xm(){return Ss.value}function Am(e){Ss.value=e,Pt()}async function Tm(e){const t=Ue.value[qe.value];return!t||!t.secretKey?null:su(t.secretKey,e)}async function Nm(e,t){try{const s=await fetch(`${t}/recovery/request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(s.status===404)return{success:!1,message:"No account found with this email address."};const n=await s.text();if(!n)return{success:!1,message:"No account found with this email address."};try{return JSON.parse(n)}catch(o){return console.error("Failed to parse recovery response:",o),{success:!1,message:"No account found with this email address."}}}catch(s){return console.error("Recovery request failed:",s),{success:!1,message:"Unable to connect to server. Please try again."}}}async function Em(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,token:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Recovery failed"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Om(e,t,s){try{const o=await(await fetch(`${s}/recovery/claim-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})})).json();if(!o.success||!o.user)return{success:!1,error:o.error||"Invalid code"};const a={id:o.user.id,firstName:o.user.first_name,lastName:o.user.last_name,email:o.user.email,classrooms:o.user.classroom?[o.user.classroom]:[],dataConsent:!0,secretKey:o.user.secret_key,role:o.user.role||"student",viewerPrivateKey:o.user.viewer_private_key||null,serverRegistered:!0,recoveredAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return Ue.value[a.id]=a,qe.value=a.id,Pt(),{success:!0,user:a}}catch(n){return console.error("Recovery claim by code failed:",n),{success:!1,error:"Unable to connect to server. Please try again."}}}async function Im(){if(!qe.value)return;const e=Ue.value[qe.value];if(!e)return;const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568";try{const n=await fetch(`${t}/users/${encodeURIComponent(e.id)}`,{headers:{"x-api-key":s}});if(!n.ok)return;const o=await n.json();if(!o.success||!o.user)return;let a=!1;if(o.user.role&&o.user.role!==e.role&&(e.role=o.user.role,a=!0),o.user.name_corrected_at&&o.user.name_corrected_at!==e.nameCorrectedAt&&(e.firstName=o.user.first_name,e.lastName=o.user.last_name,e.nameCorrectedAt=o.user.name_corrected_at,a=!0),Array.isArray(o.classrooms)){const l=e.classrooms||[],i=o.classrooms;JSON.stringify(l.sort())!==JSON.stringify(i.sort())&&(e.classrooms=i,a=!0)}o.viewer_private_key&&!e.viewerPrivateKey&&(e.viewerPrivateKey=o.viewer_private_key,a=!0),a&&Pt()}catch{}}function Ke(){const e=E(()=>qe.value&&Ue.value[qe.value]||null),t=E(()=>Object.values(Ue.value)),s=E(()=>Object.keys(Ue.value).length>0),n=E(()=>Object.keys(Ue.value).length),o=E(()=>qe.value!==null&&!!Ue.value[qe.value]);return{users:Ue,currentUserId:qe,adminViewerId:Ss,initialized:ro,showKeyBackupModal:ga,currentUser:e,allUsers:t,hasUsers:s,userCount:n,isAuthenticated:o,initialize:Sm,loadFromStorage:nu,saveToStorage:Pt,createUser:vm,updateUser:mm,deleteUser:hm,switchUser:gm,findUserByName:ym,findUserByEmail:bm,getUser:_m,clearUsers:wm,restoreFromBackup:Cm,getKeyBackup:$m,dismissKeyBackupModal:km,getAdminViewerId:xm,setAdminViewerId:Am,createGrantForViewer:Tm,requestRecovery:Nm,claimRecovery:Em,claimRecoveryByCode:Om,syncRole:Im}}const cr="bridgePractice",lt=O({}),Je=O(null),Dt=O(!1),mn=O(!1);function ou(){const e=new URLSearchParams(window.location.search),t=e.get("assignment"),s=e.get("lessons"),n=e.get("due"),o=e.get("teacher"),a=e.get("classrooms");if(!t||!s)return null;const l=s.split(",").map(u=>u.trim()).filter(Boolean),i=a?a.split(",")[0].trim():null;return{name:t,lessons:l,dueDate:n||null,teacherName:o||null,classroom:i}}function au(){try{const e=localStorage.getItem(cr);if(e){const t=JSON.parse(e);lt.value=t.assignments||{},Je.value=t.currentAssignmentId||null,Je.value&&lt.value[Je.value]&&(Dt.value=!0)}mn.value=!0}catch(e){console.error("Failed to load assignment store from storage:",e),mn.value=!0}}function Hs(){try{const e=localStorage.getItem(cr),t=e?JSON.parse(e):{};t.assignments=lt.value,t.currentAssignmentId=Je.value,localStorage.setItem(cr,JSON.stringify(t))}catch(e){console.error("Failed to save assignment store to storage:",e)}}function ru({name:e,teacherName:t,classroom:s,lessons:n,dueDate:o}){const a=Object.values(lt.value).find(c=>c.name===e);if(a){const c=new Set(a.lessons);for(const f of n)c.add(f);return a.lessons=Array.from(c),o&&(a.dueDate=o),a.updatedAt=new Date().toISOString(),Je.value=a.id,Dt.value=!0,Hs(),a}const l=crypto.randomUUID(),i=new Date().toISOString(),u={id:l,name:e,teacherName:t,classroom:s,lessons:n,assignedAt:i,dueDate:o,totalDeals:0,completedDeals:0,completedDealIds:[],completionPercent:0,startedAt:null,lastPracticedAt:null,createdAt:i,updatedAt:i};return lt.value[l]=u,Je.value=l,Dt.value=!0,Hs(),u}function Pm(){if(mn.value)return;au();const e=ou();e&&ru(e),mn.value=!0}function Dm(e){if(!Dt.value||!Je.value)return!1;const t=lt.value[Je.value];return t?t.lessons.some(s=>s.toLowerCase()===e.toLowerCase()):!1}function Rm(e){if(!Je.value)return;const t=lt.value[Je.value];t&&(t.totalDeals=e,t.completionPercent=e>0?Math.round(t.completedDeals/e*100):0,t.updatedAt=new Date().toISOString(),Hs())}function Lm(e){if(!Je.value||!Dt.value)return!1;const t=lt.value[Je.value];if(!t||t.completedDealIds.includes(e))return!1;t.completedDealIds.push(e),t.completedDeals=t.completedDealIds.length,t.completionPercent=t.totalDeals>0?Math.round(t.completedDeals/t.totalDeals*100):0;const s=new Date().toISOString();return t.startedAt||(t.startedAt=s),t.lastPracticedAt=s,t.updatedAt=s,Hs(),!0}function Bm(){if(!Dt.value||!Je.value)return null;const e=lt.value[Je.value];return e?{id:e.id,name:e.name,teacherName:e.teacherName,assignedAt:e.assignedAt}:null}function Mm(){Dt.value=!1}function Um(){Je.value&&lt.value[Je.value]&&(Dt.value=!0)}function Fm(e){return lt.value[e]||null}function jm(){return Object.values(lt.value)}function Hm(e){return lt.value[e]?(delete lt.value[e],Je.value===e&&(Je.value=null,Dt.value=!1),Hs(),!0):!1}function Wm(){lt.value={},Je.value=null,Dt.value=!1,mn.value=!1,Hs()}function ya(){const e=E(()=>Je.value&&lt.value[Je.value]||null),t=E(()=>Dt.value&&e.value!==null),s=E(()=>{const o=e.value;return o?{completed:o.completedDeals,total:o.totalDeals,percent:o.completionPercent}:{completed:0,total:0,percent:0}}),n=E(()=>{const o=e.value;return o?o.completedDeals>=o.totalDeals&&o.totalDeals>0:!1});return{assignments:lt,currentAssignmentId:Je,inAssignmentMode:Dt,initialized:mn,currentAssignment:e,hasActiveAssignment:t,assignmentProgress:s,isAssignmentComplete:n,initializeFromUrl:Pm,loadFromStorage:au,saveToStorage:Hs,createAssignment:ru,isLessonInAssignment:Dm,setTotalDeals:Rm,recordDealCompletion:Lm,getAssignmentTag:Bm,exitAssignmentMode:Mm,returnToAssignmentMode:Um,getAssignment:Fm,getAllAssignments:jm,deleteAssignment:Hm,clearAssignments:Wm,parseAssignmentFromUrl:ou}}const ur="bridgePractice",ze=O([]),hn=O(null),gn=O(!1),Ms=O({totalObservations:0,correctCount:0,wrongCount:0,startedAt:null});function lu(){try{const e=localStorage.getItem(ur);if(e){const t=JSON.parse(e);ze.value=t.pendingObservations||[]}gn.value=!0}catch(e){console.error("Failed to load observation store from storage:",e),gn.value=!0}}function Ws(){try{const e=localStorage.getItem(ur),t=e?JSON.parse(e):{};t.pendingObservations=ze.value,localStorage.setItem(ur,JSON.stringify(t))}catch(e){console.error("Failed to save observation store to storage:",e)}}function iu(){gn.value||lu(),hn.value||cu()}function cu(){hn.value=sm(),Ms.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:new Date().toISOString()}}async function Km({observationId:e=null,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,prompts:c,boardResult:f=null}){var S,T;const d=Ke(),v=ya();gn.value||iu();const h=d.currentUser.value;if(!h)return{success:!1,error:"No authenticated user"};let g=t.skillPath;if(!g){const P=t.subfolder||t.category||"Unknown";g=nm(P)}const y=v.getAssignmentTag(),k=e&&ze.value.some(P=>{var B;return((B=P.metadata)==null?void 0:B.observation_id)===e}),$=em({observationId:e,userId:h.id,sessionId:hn.value,deal:t,promptIndex:s,auctionSoFar:n,expectedBid:o,studentBid:a,correct:l,attemptNumber:i,timeTakenMs:u,skillPath:g,assignment:y,prompts:c,boardResult:f}),_=tm($);if(!_.valid)return console.error("Invalid observation:",_.errors),{success:!1,error:_.errors.join(", ")};if(k||(Ms.value.totalObservations++,l?Ms.value.correctCount++:Ms.value.wrongCount++),h.dataConsent&&h.secretKey){const P=await Vm($,h);P.success||(console.warn("Failed to encrypt observation, storing unencrypted:",P.error),hi($,((S=h.classrooms)==null?void 0:S[0])||null))}else hi($,((T=h.classrooms)==null?void 0:T[0])||null);return{success:!0,observation:$}}async function Vm(e,t){var s;try{const{encrypted_data:n,iv:o}=await Xr(e,t.secretKey),a=((s=t.classrooms)==null?void 0:s[0])||null,l=Qc(e,a),i={encrypted_data:n,iv:o,metadata:l,encrypted:!0,queuedAt:new Date().toISOString()},u=ze.value.findIndex(c=>{var f;return((f=c.metadata)==null?void 0:f.observation_id)===l.observation_id});return u!==-1?ze.value[u]=i:ze.value.push(i),Ws(),{success:!0}}catch(n){return console.error("Failed to encrypt observation:",n),{success:!1,error:n.message}}}function hi(e,t){const s=Qc(e,t),n={observation:e,metadata:s,encrypted:!1,queuedAt:new Date().toISOString()},o=ze.value.findIndex(a=>{var l;return((l=a.metadata)==null?void 0:l.observation_id)===s.observation_id});o!==-1?ze.value[o]=n:ze.value.push(n),Ws()}async function Gm(){const t=Ke().currentUser.value;if(!(t!=null&&t.secretKey))return 0;let s=0;for(let n=0;n<ze.value.length;n++){const o=ze.value[n];if(!o.encrypted&&o.observation)try{const{encrypted_data:a,iv:l}=await Xr(o.observation,t.secretKey);ze.value[n]={encrypted_data:a,iv:l,metadata:o.metadata,encrypted:!0,queuedAt:o.queuedAt,encryptedAt:new Date().toISOString()},s++}catch(a){console.error("Failed to encrypt observation:",a)}}return s>0&&Ws(),s}function zm(){return ze.value.length}function Jm(){return[...ze.value]}function Ym(e){ze.value=ze.value.filter(t=>{var s;return!e.includes((s=t.metadata)==null?void 0:s.observation_id)}),Ws()}function qm(){ze.value=[],Ws()}function Xm(){return{...Ms.value}}function Qm(){ze.value=[],hn.value=null,Ms.value={totalObservations:0,correctCount:0,wrongCount:0,startedAt:null},gn.value=!1,Ws()}function us(){const e=E(()=>ze.value.length),t=E(()=>ze.value.length>0),s=E(()=>ze.value.some(o=>!o.encrypted)),n=E(()=>hn.value);return{pendingObservations:ze,sessionId:hn,sessionStats:Ms,initialized:gn,pendingCount:e,hasPendingObservations:t,hasUnencryptedObservations:s,currentSessionId:n,initialize:iu,startNewSession:cu,recordObservation:Km,encryptPendingObservations:Gm,getPendingCount:zm,getPendingObservations:Jm,removeSyncedObservations:Ym,clearPendingObservations:qm,getSessionStats:Xm,reset:Qm,loadFromStorage:lu,saveToStorage:Ws}}function Zm(){const e=us(),t=O(null),s=O(0),n=O(!1),o=O(!1),a=Lt({displayedBids:[],currentBidIndex:0,wrongBid:null,correctBid:null,wrongBidIndex:-1,correctBidIndex:-1,auctionComplete:!1}),l=Lt({answered:{},wrongCard:null,correctCard:null}),i=Lt({boardHadWrong:!1,correctCount:0,wrongCount:0,wrongStepIndices:{},promptHistory:[],observationId:null}),u=O({N:[],E:[],S:[],W:[]}),c=O(null),f=O(1),d=E(()=>{var N;return((N=t.value)==null?void 0:N.steps)||[]}),v=E(()=>d.value.length>0),h=E(()=>d.value[s.value]||null),g=E(()=>d.value.some(N=>N.type==="bid")),y=E(()=>{var N;return((N=h.value)==null?void 0:N.type)==="bid"}),k=E(()=>{var N;for(let I=s.value;I>=0;I--)if((N=d.value[I])!=null&&N.clearCommentary)return I;return 0}),$=E(()=>{var N;return((N=t.value)==null?void 0:N.studentSeat)||"S"}),_=E(()=>t.value?Ao(a.currentBidIndex,t.value.auctionDealer||t.value.dealer):null),S=E(()=>_.value===$.value),T=E(()=>{var H,U;if(!y.value||!S.value||a.auctionComplete||o.value)return!1;const N=h.value;if(!(N!=null&&N.bid))return!1;const I=(U=(H=t.value)==null?void 0:H.auction)==null?void 0:U[a.currentBidIndex];return I?te(N.bid)===te(I):!1}),P=E(()=>{for(let N=a.displayedBids.length-1;N>=0;N--){const I=a.displayedBids[N];if(I&&I!=="Pass"&&I!=="X"&&I!=="XX")return I}return null}),B=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;const N=a.displayedBids[a.displayedBids.length-1];if(N==="X"||N==="XX"||!P.value)return!1;let I=-1;for(let D=a.displayedBids.length-1;D>=0;D--){const j=a.displayedBids[D];if(j&&j!=="Pass"&&j!=="X"&&j!=="XX"){I=D;break}}if(I===-1)return!1;const H=Ao(I,t.value.auctionDealer||t.value.dealer),U=_.value;return(U==="N"||U==="S")&&(H==="E"||H==="W")||(U==="E"||U==="W")&&(H==="N"||H==="S")}),L=E(()=>{if(!t.value||a.displayedBids.length===0)return!1;for(let N=a.displayedBids.length-1;N>=0;N--){const I=a.displayedBids[N];if(I!=="Pass"){if(I==="XX")return!1;if(I==="X"){const H=Ao(N,t.value.auctionDealer||t.value.dealer),U=_.value;return!(U==="N"&&H==="S"||U==="S"&&H==="N"||U==="E"&&H==="W"||U==="W"&&H==="E")}return!1}}return!1}),z=E(()=>{const N=h.value;return N!=null&&N.chooseCard?!l.answered[s.value]:!1}),K=E(()=>{var N;return((N=h.value)==null?void 0:N.chooseCard)||null}),ue=E(()=>{if(!t.value)return[];const N=["N","E","S","W"];if(!v.value)return[];let I=null;const H=d.value;for(let U=0;U<=s.value&&U<H.length;U++){const Y=H[U];Y!=null&&Y.showSeats&&(I=Y.showSeats),Y!=null&&Y.showSeatsAfter&&(U<s.value||U===s.value&&o.value)&&(I=Y.showSeatsAfter)}return I?N.filter(U=>!I.includes(U)):N}),me=E(()=>{if(!t.value||!v.value)return null;let N={};const I=d.value;for(let H=0;H<=s.value&&H<I.length;H++){const U=I[H];if(U!=null&&U.showcards)for(const[Y,D]of Object.entries(U.showcards))N[Y]=D;if(U!=null&&U.showSeats)for(const Y of U.showSeats)delete N[Y];if(U!=null&&U.showSeatsAfter&&(H<s.value||H===s.value&&o.value))for(const Y of U.showSeatsAfter)delete N[Y]}return Object.keys(N).length>0?N:null}),fe=E(()=>{if(!t.value||!v.value)return{};let N={},I=new Set;const H=d.value;for(let Y=0;Y<=s.value&&Y<H.length;Y++){const D=H[Y];if(D!=null&&D.showcards)for(const[j,se]of Object.entries(D.showcards))N[j]=se;if(D!=null&&D.showSeats)for(const j of D.showSeats)I.add(j)}const U={};for(const[Y,D]of Object.entries(N))I.has(Y)&&(U[Y]=D);return U}),Se=E(()=>{const N=me.value;return N?Object.keys(N):[]}),xe=E(()=>{const N=ue.value,I=Se.value;return I.length?N.filter(H=>!I.includes(H)):N});function de(N){const I={spades:[],hearts:[],diamonds:[],clubs:[]},H={S:"spades",H:"hearts",D:"diamonds",C:"clubs"};for(const U of N){const Y=U[0].toUpperCase(),D=U.slice(1).toUpperCase(),j=H[Y];j&&I[j].push(D)}return I}const pe=E(()=>{var H,U;if(!((H=t.value)!=null&&H.hands))return{};if((U=h.value)!=null&&U.reset)return t.value.hands;const N=me.value,I={};for(const Y of["N","E","S","W"]){if(N&&N[Y]){I[Y]=de(N[Y]);continue}const D=t.value.hands[Y];if(!D){I[Y]=null;continue}I[Y]={spades:[...D.spades||[]],hearts:[...D.hearts||[]],diamonds:[...D.diamonds||[]],clubs:[...D.clubs||[]]};for(const j of u.value[Y]){const se={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[j.suit];if(se&&I[Y][se]){const re=I[Y][se].indexOf(j.card);re!==-1&&I[Y][se].splice(re,1)}}}return I}),Z=E(()=>!(g.value&&!a.auctionComplete)),ee=E(()=>{if(!v.value)return!0;let N=!0;const I=d.value;for(let H=0;H<=s.value&&H<I.length;H++){const U=I[H];(U==null?void 0:U.showAuction)!==null&&(U==null?void 0:U.showAuction)!==void 0&&(N=U.showAuction)}return N}),ve=E(()=>{var I;if(!v.value)return!1;const N=d.value;for(let H=0;H<=s.value&&H<N.length;H++)if((I=N[H])!=null&&I.showLead)return!0;return!1}),q=E(()=>{var N;return(N=t.value)!=null&&N.openingLead?{leader:t.value.openingLeader,card:t.value.openingLead}:null}),A=E(()=>{if(!v.value||n.value)return!0;const N=h.value;return(N==null?void 0:N.type)==="end"&&!z.value}),w=E(()=>v.value?!!(o.value||s.value>0||y.value&&a.currentBidIndex>0):!1);function X(){var I;u.value={N:[],E:[],S:[],W:[]};const N=d.value;for(let H=0;H<=s.value&&H<N.length;H++){const U=N[H];if((I=U==null?void 0:U.plays)!=null&&I.length)for(const Y of U.plays){const D=Y.split(/[,\s]+/);for(const j of D){if(!j)continue;const se=j.trim().match(/^([NESW]):([SHDC])(.+)$/i);if(se){const re=se[1].toUpperCase(),he=se[2].toUpperCase();let Ee=se[3].toUpperCase();Ee==="10"&&(Ee="T"),u.value[re].push({suit:he,card:Ee})}}}}}function be(){if(!t.value)return;const N=t.value.auction||[],I=Ae(s.value);if(I===-1){for(;a.currentBidIndex<N.length;)a.displayedBids.push(N[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0,c.value=null;return}const H=d.value[I],U=te(H.bid);for(;a.currentBidIndex<N.length;){const Y=Ao(a.currentBidIndex,t.value.auctionDealer||t.value.dealer),D=te(N[a.currentBidIndex]);if(Y===$.value&&D===U){c.value=Date.now(),f.value=1;return}a.displayedBids.push(N[a.currentBidIndex]),a.currentBidIndex++}a.auctionComplete=!0,c.value=null}function Ae(N){const I=d.value;for(let H=N;H<I.length;H++)if(I[H].type==="bid")return H;return-1}function $e(N){if(!t.value||a.auctionComplete||!y.value)return!1;const I=t.value.auction[a.currentBidIndex],H=te(N)===te(I),U=s.value;H?U in i.wrongStepIndices&&delete i.wrongStepIndices[U]:(i.wrongStepIndices[U]=!0,i.boardHadWrong=!0);const Y=d.value.slice(0,U+1).filter(he=>he.type==="bid").length-1,D=c.value?Date.now()-c.value:0;i.promptHistory.push({type:"bid",prompt_index:Y,auction_so_far:[...a.displayedBids],expected_bid:I,student_bid:N,correct:H,time_ms:D}),H||J(!1);const j=a.currentBidIndex;a.displayedBids.push(t.value.auction[a.currentBidIndex]),a.currentBidIndex++,c.value=null,f.value=1,H?(a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1):(a.wrongBid=N,a.correctBid=I,a.wrongBidIndex=j);const se=s.value+1,re=d.value[se];return(re==null?void 0:re.type)==="bid"?(s.value=se,o.value=!1,be()):(o.value=!0,W(),s.value>=d.value.length-1&&C()),H}function W(){var I;if(a.auctionComplete)return;if(Ae(s.value+1)===-1){const H=((I=t.value)==null?void 0:I.auction)||[];for(;a.currentBidIndex<H.length;)a.displayedBids.push(H[a.currentBidIndex]),a.currentBidIndex++;a.auctionComplete=!0}}function ne(){a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1}function ae(N,I){if(!t.value||!z.value)return!1;const H=K.value;if(!H)return!1;const U=(N+I).toUpperCase(),Y=s.value;let D=!1,j="";H.anyOf?(D=H.cards.includes(U),j=H.cards[0]):(D=U===H.card,j=H.card),D?Y in i.wrongStepIndices&&delete i.wrongStepIndices[Y]:(i.wrongStepIndices[Y]=!0,i.boardHadWrong=!0);const se=c.value?Date.now()-c.value:0;return i.promptHistory.push({type:"card",expected_card:j,student_card:U,correct:D,time_ms:se}),c.value=null,D||J(!1),l.answered[Y]=!0,D?(l.wrongCard=null,l.correctCard=null):(l.wrongCard=U,l.correctCard=j),ke(),D}function ce(){l.wrongCard=null,l.correctCard=null}function ke(){var N,I;if(T.value||z.value)return!1;if(o.value&&(o.value=!1),s.value<d.value.length-1){if(s.value++,X(),((N=d.value[s.value])==null?void 0:N.type)==="bid"&&be(),((I=d.value[s.value])==null?void 0:I.type)==="choose-card"&&(c.value=Date.now()),s.value>=d.value.length-1){const H=d.value[s.value];(H==null?void 0:H.type)!=="bid"&&(H==null?void 0:H.type)!=="choose-card"&&C()}return!0}return C(),!1}function C(){n.value=!0,x()}function x(){if(!d.value.some(U=>U.type==="bid"||U.type==="choose-card"))return;i.boardHadWrong?i.wrongCount++:i.correctCount++;const I=Object.keys(i.wrongStepIndices).length===0,H=!i.boardHadWrong||I;J(H)}function R(){if(ne(),ce(),o.value)return o.value=!1,V(s.value),!0;if(s.value>0){const N=s.value-1,I=d.value[N];return l.answered[N]&&delete l.answered[N],(I==null?void 0:I.type)==="bid"&&V(N),s.value=N,n.value=!1,o.value=!1,X(),!0}return y.value&&a.currentBidIndex>0?(V(0),n.value=!1,o.value=!1,!0):!1}function V(N){var D;const I=d.value[N];if(!I||I.type!=="bid")return;const H=te(I.bid),U=((D=t.value)==null?void 0:D.auction)||[];let Y=0;for(let j=0;j<U.length;j++)if(te(U[j])===H){Y=j;break}a.currentBidIndex=Y,a.displayedBids=U.slice(0,Y),a.auctionComplete=!1,c.value=Date.now(),f.value=1}async function J(N){if(!t.value)return;const I=N?i.boardHadWrong?"corrected":"correct":"failed";try{await e.recordObservation({observationId:i.observationId,deal:t.value,promptIndex:-1,auctionSoFar:[...a.displayedBids],expectedBid:"BOARD",studentBid:N?"PASS":"FAIL",correct:N,attemptNumber:1,timeTakenMs:0,prompts:[...i.promptHistory],boardResult:I})}catch(H){console.error("Failed to record board observation:",H)}}function G(N){var I,H;t.value=N,s.value=0,n.value=!1,o.value=!1,a.displayedBids=[],a.currentBidIndex=0,a.wrongBid=null,a.correctBid=null,a.wrongBidIndex=-1,a.correctBidIndex=-1,a.auctionComplete=!1,l.answered={},l.wrongCard=null,l.correctCard=null,i.boardHadWrong=!1,i.wrongStepIndices={},i.promptHistory=[],i.observationId=crypto.randomUUID(),u.value={N:[],E:[],S:[],W:[]},c.value=null,f.value=1,(I=N==null?void 0:N.steps)!=null&&I.length&&(X(),((H=N.steps[0])==null?void 0:H.type)==="bid"&&be())}function oe(){i.correctCount=0,i.wrongCount=0}function te(N){if(!N)return"";const H=N.replace(/!/g,"").replace(//g,"S").replace(//g,"H").replace(//g,"D").replace(//g,"C").toUpperCase();return H==="PASS"||H==="P"?"PASS":H==="X"||H==="DBL"||H==="DOUBLE"?"X":H==="XX"||H==="RDBL"||H==="REDOUBLE"?"XX":H.replace(/(\d)N$/,"$1NT")}return{currentDeal:t,currentStepIndex:s,bidAnswered:o,auctionState:a,cardChoiceState:l,boardState:i,steps:d,hasSteps:v,currentStep:h,hasBidSteps:g,isBidStep:y,commentaryStartIndex:k,studentSeat:$,currentTurnSeat:_,isStudentTurn:S,hasBidPrompt:T,lastContractBid:P,canDouble:B,canRedouble:L,canGoBack:w,hasCardChoice:z,currentChooseCard:K,hiddenSeats:xe,hands:pe,showHcp:Z,showcardsPlayedCards:fe,isComplete:A,showAuctionTable:ee,showOpeningLead:ve,openingLead:q,advance:ke,makeBid:$e,clearFeedback:ne,goBack:R,makeCardChoice:ae,clearCardFeedback:ce,loadDeal:G,resetStats:oe,observationStore:e}}const Jo="bridgePractice",uu="bridgePracticeUIPrefs",ut=O({teacherName:null,availableClassrooms:[],configuredAt:null}),yn=O({showLoadPbnOption:!1}),Yo=O(!1);function du(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function fu(){const e=new URLSearchParams(window.location.search),t=e.get("teacher"),s=e.get("classrooms"),n=e.get("collection"),o=s?s.split(",").map(a=>({id:a.trim(),name:du(a.trim())})):[];return{teacher:t,classrooms:o,collection:n}}function eh(){return new URLSearchParams(window.location.search).get("collection")}function th(){return new URLSearchParams(window.location.search).get("lesson")}function sh(e){const t=new URL(window.location.href);e?t.searchParams.set("collection",e):t.searchParams.delete("collection"),window.history.pushState({},"",t.toString())}function nh(e){const t=new URL(window.location.href);e?t.searchParams.set("lesson",e):(t.searchParams.delete("lesson"),t.searchParams.delete("deal")),window.history.pushState({},"",t.toString())}function oh(){const t=new URLSearchParams(window.location.search).get("deal");return t?parseInt(t,10):null}function ah(e){const t=new URL(window.location.href);e&&e>1?t.searchParams.set("deal",e):t.searchParams.delete("deal"),window.history.replaceState({},"",t.toString())}const rh=[{id:"baker-bridge",name:"Baker Bridge",description:"Classic bridge lessons covering bidding conventions and play",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Baker-Bridge/main/Package"},{id:"andrew-rowberg",name:"Rowberg Collection",description:"Precision with transfer positive responses to strong 1 opening bids",icon:"",tocUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons/toc.json",baseUrl:"https://raw.githubusercontent.com/Rick-Wilson/Bridge-Lessons-by-Andrew-Rowberg/main/Lock-Step%20Lessons"}];function pu(){try{const e=localStorage.getItem(Jo);if(e){const t=JSON.parse(e);t.appConfig&&(ut.value=t.appConfig)}}catch(e){console.error("Failed to load app config from storage:",e)}}function lh(){try{const e=localStorage.getItem(uu);if(e){const t=JSON.parse(e);yn.value={...yn.value,...t}}}catch(e){console.error("Failed to load UI prefs from storage:",e)}}function ih(){try{localStorage.setItem(uu,JSON.stringify(yn.value))}catch(e){console.error("Failed to save UI prefs to storage:",e)}}function ch(e,t){yn.value[e]=t,ih()}function Zr(){try{const e=localStorage.getItem(Jo),t=e?JSON.parse(e):{};t.appConfig=ut.value,localStorage.setItem(Jo,JSON.stringify(t))}catch(e){console.error("Failed to save app config to storage:",e)}}function vu(e,t){const s=new Set(e.map(o=>o.id)),n=[...e];for(const o of t)s.has(o.id)||n.push(o);return n}function uh(){if(Yo.value)return;pu(),lh();const{teacher:e,classrooms:t}=fu();(e||t.length>0)&&(e&&!ut.value.teacherName&&(ut.value.teacherName=e),t.length>0&&(ut.value.availableClassrooms=vu(ut.value.availableClassrooms||[],t)),ut.value.configuredAt||(ut.value.configuredAt=new Date().toISOString()),Zr()),Yo.value=!0}function dh(){try{const e=localStorage.getItem(Jo);return e?JSON.parse(e):null}catch{return null}}function fh(){ut.value={teacherName:null,availableClassrooms:[],configuredAt:null},Zr(),Yo.value=!1}function mo(){const e=E(()=>ut.value.availableClassrooms.length===0),t=E(()=>ut.value.availableClassrooms.length>1),s=E(()=>ut.value.availableClassrooms.length===1),n=E(()=>s.value?ut.value.availableClassrooms[0]:null),o=E(()=>ut.value.teacherName),a=E(()=>ut.value.availableClassrooms),l=E(()=>yn.value.showLoadPbnOption);return{appConfig:ut,initialized:Yo,uiPrefs:yn,isAdHoc:e,hasMultipleClassrooms:t,hasSingleClassroom:s,singleClassroom:n,teacherName:o,availableClassrooms:a,showLoadPbnOption:l,initializeFromUrl:uh,loadFromStorage:pu,saveToStorage:Zr,clearConfig:fh,getStorageData:dh,getCollectionFromUrl:eh,setCollectionInUrl:sh,getLessonFromUrl:th,setLessonInUrl:nh,getDealFromUrl:oh,setDealInUrl:ah,setUIPref:ch,COLLECTIONS:rh,parseUrlParams:fu,classroomIdToName:du,mergeClassrooms:vu}}const ph="https://api.bridge-classroom.com/api",vh="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",el=O([]),st=O([]),qo=O(!1),Xo=O(null),Gn=O(null),Qo=O(!1),mh=5*60*1e3;async function hh(e){const t=await fetch(`${ph}/observations?user_id=${e}&limit=10000`,{headers:{"x-api-key":vh}});if(!t.ok)throw new Error(`Server error: ${t.status}`);return(await t.json()).observations||[]}async function gh(e,t){try{return{...await Qr(e.encrypted_data,e.iv,t),id:e.id,timestamp:e.timestamp,skill_path:e.skill_path,correct:e.correct,classroom:e.classroom,deal_subfolder:e.deal_subfolder,deal_number:e.deal_number,board_result:e.board_result}}catch(s){return console.error("Failed to decrypt observation:",e.id,s),null}}function yh(){return us().getPendingObservations().map(s=>{const n=s.metadata||{};return{id:n.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:n.timestamp||s.queuedAt,skill_path:n.skill_path,correct:n.correct,classroom:n.classroom,deal_subfolder:n.deal_subfolder,deal_number:n.deal_number,board_result:n.board_result,session_id:n.session_id,_local:!0,_pending:!0}})}async function mu(e=!1){const s=Ke().currentUser.value;if(!s)return{success:!1,error:"No authenticated user"};const n=yh();if(!e&&Gn.value&&Date.now()-new Date(Gn.value).getTime()<mh&&st.value.length>0)return bh(n),{success:!0,cached:!0};qo.value=!0,Xo.value=null;let o=[];try{const i=await hh(s.id);if(el.value=i,s.secretKey&&i.length>0){const u=i.map(f=>gh(f,s.secretKey));o=(await Promise.all(u)).filter(f=>f!==null)}}catch(i){console.error("Failed to fetch from server (will use local data):",i),n.length===0&&(Xo.value=i.message)}const a=new Set(o.map(i=>i.id)),l=n.filter(i=>!a.has(i.id));return st.value=[...o,...l],Gn.value=new Date().toISOString(),qo.value=!1,{success:!0,count:st.value.length}}function bh(e){const t=new Set(st.value.map(n=>n.id)),s=e.filter(n=>!t.has(n.id));s.length>0&&(st.value=[...st.value,...s])}async function _h(){if(Qo.value)return;Ke().isAuthenticated.value&&await mu(),Qo.value=!0}function wh(){el.value=[],st.value=[],Gn.value=null,Qo.value=!1}function hu(){const e={};for(const t of st.value){const s=t.timestamp.split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}return e}function gi(){const e={};for(const t of st.value){const s=t.skill_path||"unknown";e[s]||(e[s]={total:0,correct:0,incorrect:0}),e[s].total++,t.correct?e[s].correct++:e[s].incorrect++}for(const t in e){const s=e[t];s.accuracy=s.total>0?Math.round(s.correct/s.total*100):0}return e}function yi(){const e={};for(const t of st.value){const s=t.session_id||"unknown";e[s]||(e[s]={id:s,observations:[],startTime:t.timestamp,endTime:t.timestamp,correct:0,incorrect:0});const n=e[s];n.observations.push(t),t.timestamp<n.startTime&&(n.startTime=t.timestamp),t.timestamp>n.endTime&&(n.endTime=t.timestamp),t.correct?n.correct++:n.incorrect++}return Object.values(e).map(t=>({...t,total:t.correct+t.incorrect,accuracy:t.correct+t.incorrect>0?Math.round(t.correct/(t.correct+t.incorrect)*100):0})).sort((t,s)=>new Date(s.startTime)-new Date(t.startTime))}function bi(e=10){return[...st.value].sort((t,s)=>new Date(s.timestamp)-new Date(t.timestamp)).slice(0,e)}function _i(){const e=new Date().toISOString().split("T")[0];return st.value.filter(t=>t.timestamp.startsWith(e))}function wi(){const e=new Date,s=new Date(e.getTime()-7*24*60*60*1e3).toISOString();return st.value.filter(n=>n.timestamp>=s)}function Sh(){const e=hu(),t=Object.keys(e).sort().reverse();if(t.length===0)return 0;const s=new Date().toISOString().split("T")[0],n=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0];if(t[0]!==s&&t[0]!==n)return 0;let o=1,a=new Date(t[0]);for(let l=1;l<t.length;l++){const i=new Date(t[l]);if(Math.round((a-i)/(24*60*60*1e3))===1)o++,a=i;else break}return o}function tl(){const e=E(()=>st.value.length),t=E(()=>st.value.filter(h=>h.correct).length),s=E(()=>st.value.filter(h=>!h.correct).length),n=E(()=>e.value===0?0:Math.round(t.value/e.value*100)),o=E(()=>{const h=_i(),g=h.filter(k=>k.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),a=E(()=>{const h=wi(),g=h.filter(k=>k.correct).length,y=h.length;return{total:y,correct:g,incorrect:y-g,accuracy:y>0?Math.round(g/y*100):0}}),l=E(()=>Sh()),i=E(()=>gi()),u=E(()=>yi()),c=E(()=>bi(20)),f=E(()=>st.value.length>0),d=E(()=>qo.value),v=E(()=>Xo.value!==null);return{observations:el,decryptedObservations:st,loading:qo,error:Xo,lastFetchedAt:Gn,initialized:Qo,totalObservations:e,totalCorrect:t,totalIncorrect:s,overallAccuracy:n,todayStats:o,weekStats:a,streak:l,skillStats:i,sessions:u,recentObservations:c,hasData:f,isLoading:d,hasError:v,initialize:_h,fetchProgress:mu,clearCache:wh,getObservationsByDate:hu,getStatsBySkill:gi,getSessions:yi,getRecentObservations:bi,getTodayObservations:_i,getThisWeekObservations:wi}}const Ds={GREY:"grey",RED:"red",YELLOW:"yellow",ORANGE:"orange",GREEN:"green"},$t={NONE:"none",SILVER:"silver",GOLD:"gold"},Ch=6;function $h(e){return e.slice(0,10)}function gu(e,t){const s=new Date(e+"T00:00:00Z"),n=new Date(t+"T00:00:00Z");return Math.round(Math.abs(n-s)/864e5)}function yu(e){if(e.length===0)return[];const t={};for(const s of e){const n=s.session_id||s.id||"unknown";t[n]||(t[n]={observations:[],latestTimestamp:s.timestamp}),t[n].observations.push(s),s.timestamp>t[n].latestTimestamp&&(t[n].latestTimestamp=s.timestamp)}return Object.values(t).map(s=>({timestamp:s.latestTimestamp,correct:s.observations.every(n=>n.correct),sessionId:s.observations[0].session_id||s.observations[0].id})).sort((s,n)=>s.timestamp.localeCompare(n.timestamp))}const Si=60*60*1e3;function bu(e){if(e.length===0)return Ds.GREY;const t=e[e.length-1];if(!t.correct)return Ds.RED;const s=Date.now()-Si;if(e.some(i=>!i.correct&&new Date(i.timestamp).getTime()>s))return Ds.YELLOW;const o=e.filter(i=>!i.correct).pop();if(!o)return Ds.GREEN;const a=new Date(o.timestamp).getTime();return new Date(t.timestamp).getTime()-a<=Si?Ds.ORANGE:Ds.GREEN}function _u(e,t){const s=e.filter(n=>n.timestamp.startsWith(t));return s.length===0?!1:s.every(n=>n.correct)}function wu(e){if(e.length===0)return $t.NONE;const t=new Set;for(const l of e)t.add($h(l.timestamp));const s=[...t].filter(l=>_u(e,l)).sort();if(s.length<2)return $t.NONE;let n=1,o=1,a=s[0];for(let l=1;l<s.length;l++)gu(a,s[l])>=Ch&&(o++,a=s[l],o>n&&(n=o));return n>=3?$t.GOLD:n>=2?$t.SILVER:$t.NONE}function kh(e){const t=e.observations.value||[];let s=[];try{s=us().getPendingObservations().filter(i=>i.metadata).map(i=>{const u=i.metadata;return{id:u.observation_id||"local-"+Math.random().toString(36).slice(2),timestamp:u.timestamp||i.queuedAt,skill_path:u.skill_path,correct:u.correct,deal_subfolder:u.deal_subfolder,deal_number:u.deal_number,session_id:u.session_id,_local:!0}})}catch{}const n=new Set(t.map(a=>a.id)),o=s.filter(a=>!n.has(a.id));return[...t,...o]}function xh(e,t,s){if(!t||!s||s.length===0)return[];const n=e.filter(o=>{var a;return(o.deal_subfolder||((a=o.deal)==null?void 0:a.subfolder))===t});return s.map(o=>{const a=n.filter(i=>{var u;return(i.deal_number??((u=i.deal)==null?void 0:u.deal_number))===o}).sort((i,u)=>i.timestamp.localeCompare(u.timestamp)),l=yu(a);return{boardNumber:o,status:bu(a),achievement:wu(a),attemptCount:l.length,lastAttemptTime:a.length>0?a[a.length-1].timestamp:null}})}function Ah(e){return!e||e.length===0?{achievement:$t.NONE}:e.every(n=>n.achievement===$t.GOLD)?{achievement:$t.GOLD}:e.every(n=>n.achievement===$t.SILVER||n.achievement===$t.GOLD)?{achievement:$t.SILVER}:{achievement:$t.NONE}}const Su="bridgeLessonBoards",lo=O(Th()),La=new Set;function Th(){try{const e=localStorage.getItem(Su);return e?JSON.parse(e):{}}catch{return{}}}function Nh(){try{localStorage.setItem(Su,JSON.stringify(lo.value))}catch{}}function Cu(e,t){lo.value={...lo.value,[e]:t},Nh()}function Eh(e){const t=[],s=/\[Board\s+"?(\d+)"?\]/g;let n;for(;(n=s.exec(e))!==null;)t.push(parseInt(n[1],10));return t.sort((o,a)=>o-a)}async function Oh(e){const t=mo(),s=e.filter(n=>!lo.value[n]&&!La.has(n));if(s.length!==0){for(const n of s)La.add(n);await Promise.all(s.map(async n=>{try{for(const o of t.COLLECTIONS){const a=n.includes("/")?n.split("/").pop():n,l=`${o.baseUrl}/${a}.pbn`;try{const i=await fetch(l);if(!i.ok)continue;const u=await i.text(),c=Eh(u);if(c.length>0){Cu(n,c);break}}catch{continue}}}finally{La.delete(n)}}))}}function Ih(e){var n,o;const t=lo.value,s={};for(const a of e){const l=a.deal_subfolder||((n=a.deal)==null?void 0:n.subfolder),i=a.deal_number??((o=a.deal)==null?void 0:o.deal_number);!l||i==null||(s[l]||(s[l]={boards:new Set,lastActivity:a.timestamp}),s[l].boards.add(i),a.timestamp>s[l].lastActivity&&(s[l].lastActivity=a.timestamp))}return Object.entries(s).map(([a,l])=>{const i=t[a];if(i)return{subfolder:a,boardNumbers:i,lastActivity:l.lastActivity};const u=Math.max(...l.boards),c=[];for(let f=1;f<=u;f++)c.push(f);return{subfolder:a,boardNumbers:c,lastActivity:l.lastActivity}})}function ys(){const e=_s();function t(){return kh(e)}return{STATUS:Ds,ACHIEVEMENT:$t,getObservations:t,computeBoardMastery:xh,computeLessonAchievement:Ah,extractLessonsFromObservations:Ih,saveLessonBoardNumbers:Cu,fetchMissingBoardCounts:Oh,groupIntoBoardAttempts:yu,calculateCurrentStatus:bu,calculateAchievement:wu,hasGreenDay:_u,daysBetween:gu}}const Xs="https://api.bridge-classroom.com/api",Qs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Zo=O(!1),io=O(null),ba=O([]),bs=O({}),co=O({}),ea=O(!1),ta=O(null),sl=O(!1),sa={},Ph=2*60*1e3,zn={};let Lo=null;async function Dh(){var s;const e=Ke(),t=e.currentUser.value;if(!t||!t.email){Zo.value=!1;return}try{const n=await fetch(`${Xs}/viewers?email=${encodeURIComponent(t.email)}`,{headers:{"x-api-key":Qs}});if(!n.ok)return;const o=await n.json(),a=Array.isArray(o)?o[0]:null;if(!a)return;io.value=a.id;const l=await fetch(`${Xs}/grants?grantee_id=${a.id}`,{headers:{"x-api-key":Qs}});if(!l.ok)return;const u=(await l.json()).grants||[],c=new Set(u.filter(g=>g.grantor_id!==t.id).map(g=>g.grantor_id));if(c.size===0)return;const f=await fetch(`${Xs}/users`,{headers:{"x-api-key":Qs}});if(!f.ok)return;const v=(await f.json()).users||[],h=(s=t.email)==null?void 0:s.toLowerCase();if(ba.value=v.filter(g=>{var y;return c.has(g.id)&&g.id!==t.id&&((y=g.email)==null?void 0:y.toLowerCase())!==h}).sort((g,y)=>`${g.first_name} ${g.last_name}`.localeCompare(`${y.first_name} ${y.last_name}`)),Zo.value=!0,sl.value=!0,t.role==="student"){e.updateUser(t.id,{role:"teacher"});try{await fetch(`${Xs}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":Qs},body:JSON.stringify({user_id:t.id,action:"become_teacher"})})}catch{}}}catch(n){console.error("Failed to check teacher status:",n)}}async function $u(e){const t=bs.value[e],s=sa[e];if(t&&s&&Date.now()-s<Ph)return t;try{const n=await fetch(`${Xs}/observations?user_id=${encodeURIComponent(e)}&limit=10000`,{headers:{"x-api-key":Qs}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const a=(await n.json()).observations||[],l=a.map(i=>({id:i.id||i.observation_id,timestamp:i.timestamp,skill_path:i.skill_path,correct:i.correct,deal_subfolder:i.deal_subfolder,deal_number:i.deal_number,board_result:i.board_result}));return co.value={...co.value,[e]:a},bs.value={...bs.value,[e]:l},sa[e]=Date.now(),l}catch(n){return console.error(`Failed to fetch observations for ${e}:`,n),[]}}async function Rh(){ea.value=!0,ta.value=null;try{await Promise.allSettled(ba.value.map(s=>$u(s.id)));const e=ys(),t=new Set;for(const s of Object.values(bs.value))for(const n of s)n.deal_subfolder&&t.add(n.deal_subfolder);t.size>0&&e.fetchMissingBoardCounts([...t])}catch(e){ta.value=e.message,console.error("Failed to load student summaries:",e)}finally{ea.value=!1}}function Lh(e){const t=bs.value[e]||[];if(t.length===0)return{green:0,blue:0,orange:0,yellow:0,red:0,grey:0,total:0,lastObservationTime:null};const s=ys(),n=s.extractLessonsFromObservations(t),o={green:0,blue:0,orange:0,yellow:0,red:0,grey:0};for(const l of n){const i=s.computeBoardMastery(t,l.subfolder,l.boardNumbers);for(const u of i)o[u.status]=(o[u.status]||0)+1}let a=null;for(const l of t)(!a||l.timestamp>a)&&(a=l.timestamp);return{...o,total:o.green+o.blue+o.orange+o.yellow+o.red+o.grey,lastObservationTime:a}}function Bh(e,t=3){const s=bs.value[e]||[],n=_s(),o={};for(const a of s){const l=a.deal_subfolder;l&&(!o[l]||a.timestamp>o[l])&&(o[l]=a.timestamp)}return Object.entries(o).sort(([,a],[,l])=>l.localeCompare(a)).slice(0,t).map(([a])=>n.formatLessonName(a))}function Mh(e){if(!e)return"Never";const t=new Date,s=new Date(e),n=t-s,o=Math.floor(n/6e4),a=Math.floor(n/36e5),l=Math.floor(n/864e5);return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:s.toLocaleDateString()}function Uh(){try{const s=JSON.parse(sessionStorage.getItem("bridgeTeacherSession")||"null");if(s!=null&&s.privateKeyBase64&&(!s.expiry||new Date(s.expiry)>=new Date))return s.privateKeyBase64}catch{}const t=Ke().currentUser.value;return t!=null&&t.viewerPrivateKey?(sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:t.viewerPrivateKey,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()})),t.viewerPrivateKey):null}async function ku(e){if(zn[e])return zn[e];const t=Uh();if(!t)return null;if(!Lo&&io.value)try{const n=await fetch(`${Xs}/grants?grantee_id=${io.value}`,{headers:{"x-api-key":Qs}});n.ok&&(Lo=(await n.json()).grants||[])}catch{return null}const s=(Lo||[]).find(n=>n.grantor_id===e);if(!s)return null;try{const n=await um(s.encrypted_payload,t);return zn[e]=n,n}catch(n){return console.error(`Failed to decrypt grant for student ${e}:`,n),null}}async function xu(e,t){if(!t.encrypted_data||!t.iv)return null;const s=await ku(e);if(!s)return null;try{return{...await Qr(t.encrypted_data,t.iv,s),id:t.id,timestamp:t.timestamp,skill_path:t.skill_path,correct:t.correct,deal_subfolder:t.deal_subfolder,deal_number:t.deal_number,board_result:t.board_result}}catch(n){return console.error("Failed to decrypt observation:",t.id,n),null}}async function Fh(e,t,s,n){const a=(co.value[e]||[]).find(l=>{const i=new Date(l.timestamp).getTime();return Math.abs(i-t)<1e3&&l.deal_number===s&&l.correct===n});return a?xu(e,a):null}function jh(){Zo.value=!1,io.value=null,ba.value=[],bs.value={},co.value={},ea.value=!1,ta.value=null,sl.value=!1,Lo=null;for(const e of Object.keys(zn))delete zn[e];for(const e of Object.keys(sa))delete sa[e]}function wn(){return{isTeacher:Zo,viewerId:io,students:ba,studentObservations:bs,loading:ea,error:ta,initialized:sl,checkTeacherStatus:Dh,fetchStudentObservations:$u,loadAllStudentSummaries:Rh,getStudentMasterySummary:Lh,getStudentRecentLessons:Bh,formatTimeSince:Mh,findAndDecryptObservation:Fh,decryptStudentObservation:xu,getStudentKey:ku,studentRawObservations:co,reset:jh}}const dr="https://api.bridge-classroom.com/api",fr="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",pr=O(!1),Zs=O(null),ns=O(null),uo=O([]),bn=O([]),nl=O("lessons"),_a=O(!0),Sn=O(!1),ho=O([]);function Hh(e){Sn.value=!0,ho.value=e}function Wh(){Sn.value=!1,ho.value=[]}function go(){return Sn.value?ho.value:uo.value}async function Au(){const e=Ke(),t=wn(),s=e.currentUser.value;if(!s){bn.value=[];return}const n=[{id:s.id,name:`${s.firstName} ${s.lastName}`,email:s.email,isSelf:!0}];if(t.isTeacher.value&&t.viewerId.value)try{const o=await fetch(`${dr}/grants?grantee_id=${t.viewerId.value}`,{headers:{"x-api-key":fr}});if(o.ok){const{grants:a}=await o.json(),l=await fetch(`${dr}/users`,{headers:{"x-api-key":fr}});if(l.ok){const{users:i}=await l.json(),u=new Set(a.map(c=>c.grantor_id));for(const c of i)u.has(c.id)&&c.id!==s.id&&n.push({id:c.id,name:`${c.first_name} ${c.last_name}`,email:c.email,isSelf:!1})}}}catch(o){console.error("Failed to fetch accessible users:",o)}bn.value=n}async function ol(e=!1){if(Sn.value)return{success:!0};const t=Ke(),s=tl(),n=t.currentUser.value;if(!n)return Zs.value="No authenticated user",{success:!1,error:Zs.value};pr.value=!0,Zs.value=null;try{if(!ns.value||ns.value===n.id)ns.value=n.id,await s.fetchProgress(e),uo.value=s.decryptedObservations.value;else{const o=await fetch(`${dr}/observations?user_id=${ns.value}&limit=10000`,{headers:{"x-api-key":fr}});if(!o.ok)throw new Error(`Failed to fetch observations: ${o.status}`);const a=await o.json();uo.value=a.observations||[]}return{success:!0}}catch(o){return Zs.value=o.message,{success:!1,error:o.message}}finally{pr.value=!1}}async function Kh(e){ns.value=e,await ol(!0)}const vr=E(()=>{var n;const e=go(),t={};for(const o of e){const a=o.deal_subfolder||((n=o.deal)==null?void 0:n.subfolder)||"Unknown";t[a]||(t[a]={lesson:a,displayName:Eu(a),total:0,correct:0,incorrect:0,observations:[]}),t[a].total++,o.correct?t[a].correct++:t[a].incorrect++,t[a].observations.push(o)}const s=Object.values(t).map(o=>({...o,successRate:o.total>0?Math.round(o.correct/o.total*100):0}));return s.sort((o,a)=>o.displayName.localeCompare(a.displayName)),s}),mr=E(()=>{const e=go(),t={};for(const n of e){const o=n.skill_path||"uncategorized/unknown",a=om(o),l=Zc(o);t[o]||(t[o]={skillPath:o,category:a,categoryName:am(a).name,skillName:l.name,total:0,correct:0,incorrect:0,observations:[]}),t[o].total++,n.correct?t[o].correct++:t[o].incorrect++,t[o].observations.push(n)}const s=Object.values(t).map(n=>({...n,successRate:n.total>0?Math.round(n.correct/n.total*100):0}));return s.sort((n,o)=>{const a=n.categoryName.localeCompare(o.categoryName);return a!==0?a:n.skillName.localeCompare(o.skillName)}),s}),Tu=E(()=>_a.value?vr.value.filter(e=>e.total>0):vr.value),Nu=E(()=>_a.value?mr.value.filter(e=>e.total>0):mr.value);function Eu(e){return e?e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([a-zA-Z])/g,"$1 $2").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"Unknown"}const Vh=E(()=>nl.value==="lessons"?Tu.value:Nu.value),Gh=E(()=>bn.value.length>1),zh=E(()=>bn.value.find(e=>e.id===ns.value)||null),Jh=E(()=>go().length>0),Yh=E(()=>go().length),qh=E(()=>{const e=go();if(e.length===0)return 0;const t=e.filter(s=>s.correct).length;return Math.round(t/e.length*100)});async function Xh(){const t=Ke().currentUser.value;t&&(ns.value=t.id,await Au(),await ol())}function Qh(){uo.value=[],bn.value=[],ns.value=null,nl.value="lessons",_a.value=!0,Zs.value=null,Sn.value=!1,ho.value=[]}function _s(){return{loading:pr,error:Zs,selectedUserId:ns,observations:uo,accessibleUsers:bn,activeTab:nl,onlyWithObservations:_a,useTestData:Sn,testObservations:ho,enableTestMode:Hh,disableTestMode:Wh,lessonStats:vr,taxonStats:mr,filteredLessonStats:Tu,filteredTaxonStats:Nu,currentStats:Vh,canViewOtherUsers:Gh,selectedUser:zh,hasData:Jh,totalObservations:Yh,overallSuccessRate:qh,initialize:Xh,loadAccomplishments:ol,selectUser:Kh,fetchAccessibleUsers:Au,reset:Qh,formatLessonName:Eu}}const Zh="https://api.bridge-classroom.com/api",eg="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Gt=Lt({}),hr=O(!1),gr=O(0),tg=60*60*1e3;async function sg(e,t=null,s=!1){var o,a;if(!e)return[];const n=`${e}::${t||"__all__"}`;if(!s&&Gt[n]&&Date.now()-Gt[n].fetchedAt<3e4)return Gt[n].boards;hr.value=!0;try{let l=`${Zh}/board-status?user_id=${encodeURIComponent(e)}`;t&&(l+=`&deal_subfolder=${encodeURIComponent(t)}`);const i=await fetch(l,{headers:{"x-api-key":eg}});if(!i.ok)return console.error("Failed to fetch board status:",i.status),((o=Gt[n])==null?void 0:o.boards)||[];const c=(await i.json()).boards||[];return Gt[n]={boards:c,fetchedAt:Date.now()},c}catch(l){return console.error("Failed to fetch board status:",l),((a=Gt[n])==null?void 0:a.boards)||[]}finally{hr.value=!1}}function ng(e=null,t=null){if(!e){for(const n in Gt)delete Gt[n];gr.value++;return}const s=`${e}::`;for(const n in Gt)n.startsWith(s)&&(!t||n===`${e}::${t}`||n===`${e}::__all__`)&&delete Gt[n];gr.value++}function Ou(e,t){switch(e){case"failed":return"red";case"corrected":return t&&Date.now()-new Date(t).getTime()<tg?"yellow":"orange";case"fresh_correct":return"orange";case"clean_correct":return"green";case"not_attempted":default:return"grey"}}function og(e,t){const s={};for(const n of e)s[n.deal_number]=n;return t.map(n=>{const o=s[n];return o?{boardNumber:n,status:Ou(o.status,o.last_observation_at),achievement:o.achievement||"none",lastObservationAt:o.last_observation_at}:{boardNumber:n,status:"grey",achievement:"none",lastObservationAt:null}})}function ag(e,t){try{const n=us().getPendingObservations();for(const o of n){if(!o.metadata||o.metadata.deal_subfolder!==t)continue;const a=o.metadata.deal_number,l=e.find(u=>u.boardNumber===a);if(!l)continue;const i=o.metadata.board_result;i==="failed"?l.status="red":i==="corrected"?l.status="yellow":i==="correct"?l.status="green":l.status=o.metadata.correct?"green":"red"}}catch{}}function wa(){return{loading:hr,cacheVersion:gr,fetchBoardStatus:sg,invalidateCache:ng,getDisplayColor:Ou,buildBoardMastery:og,mergeLocalPending:ag}}const Ci="https://api.bridge-classroom.com/api",rg=5e3,lg=20;let na=[],Jn=null;function zt(e,t,s=null){const n={event:e,context:t,error:s instanceof Error?`${s.name}: ${s.message}`:s?String(s):null,user_agent:navigator.userAgent,timestamp:new Date().toISOString()};console.warn(`[diagnostic] ${e}:`,t,s||""),na.push(n),na.length>=lg?Yn():Jn||(Jn=setTimeout(Yn,rg))}async function Yn(){if(Jn&&(clearTimeout(Jn),Jn=null),na.length===0)return;const e=na.splice(0);try{await fetch(`${Ci}/diagnostics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch{for(const t of e)try{const s=new URLSearchParams({event:t.event,context:t.context||"",error:t.error||"",browser:t.user_agent||navigator.userAgent,timestamp:t.timestamp||""});fetch(`${Ci}/diagnostics?${s}`).catch(()=>{})}catch{}}}const al="https://api.bridge-classroom.com/api",Iu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",kt=O("idle"),Pu=O(null),qs=O(null),en=O(0),tn=O(navigator.onLine),Ln=O(!1),$i=5,ig=1e3,cg=6e4,ug=5e3;let cn=null;function dg(e){const t=Math.min(ig*Math.pow(2,e),cg);return t+Math.random()*t*.25}async function Du(e){var t;try{const s={user_id:e.id,first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",classroom:((t=e.classrooms)==null?void 0:t[0])||null,data_consent:e.dataConsent??!0};e.adminGrantPayload&&(s.admin_grant=e.adminGrantPayload),e.secretKey&&(s.secret_key=e.secretKey);const n=await fetch(`${al}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return zt("server_registration_http_error",`registerUserWithServer  HTTP ${n.status} for user ${e.id} (${e.email})`,a),{success:!1,error:`Server error: ${n.status} - ${a}`}}const o=await n.json();return o.existing_user?{success:!1,error:"email_exists",existingUserId:o.user_id}:{success:o.success,userId:o.user_id}}catch(s){return zt("server_registration_failed",`registerUserWithServer  fetch threw for user ${e.id} (${e.email})`,s),{success:!1,error:s.message}}}async function Ru(e){if(e.length===0)return{success:!0,synced:0,errors:[]};const t=e.filter(s=>s.encrypted);if(t.length===0)return{success:!0,synced:0,errors:[]};try{const s={observations:t.map(a=>({encrypted_data:a.encrypted_data,iv:a.iv,metadata:a.metadata}))},n=await fetch(`${al}/observations`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Iu},body:JSON.stringify(s)});if(!n.ok){const a=await n.text();return{success:!1,errors:[`Server error: ${n.status} - ${a}`]}}const o=await n.json();return{success:!0,synced:o.stored,errors:o.errors||[]}}catch(s){return console.error("Failed to sync observations:",s),{success:!1,errors:[s.message]}}}async function yo(){var n,o;const e=Ke(),t=us();if(!navigator.onLine)return kt.value="offline",{success:!1,offline:!0};kt.value="syncing",qs.value=null;const s={success:!0,userRegistered:!1,observationsSynced:0};try{const a=e.currentUser.value;if(a&&!a.serverRegistered){const u=await Du(a);if(u.success)e.updateUser(a.id,{serverRegistered:!0}),Ln.value=!1,s.userRegistered=!0,console.log("User registered with server");else{if(u.error==="email_exists")return zt("server_registration_email_exists",`performSync  email already registered for user ${a.id} (${a.email})`),kt.value="error",qs.value="Account already exists. Please use recovery.",Ln.value=!0,s;zt("server_registration_rejected",`performSync  registration failed for user ${a.id} (${a.email})`,u.error),Ln.value=!0,qs.value=`Registration failed: ${u.error}`}}const l=await t.encryptPendingObservations();l>0&&console.log(`Encrypted ${l} observations`);let i=!1;if(a!=null&&a.dataConsent){const u=t.getPendingObservations();if(u.length>0){const c=await Ru(u);if(c.success&&c.synced>0){const f=u.filter(d=>d.encrypted).slice(0,c.synced).map(d=>{var v;return(v=d.metadata)==null?void 0:v.observation_id});s.observationsSynced=c.synced,console.log(`Synced ${c.synced} observations`);try{await _s().loadAccomplishments(!0)}catch{}try{wa().invalidateCache(a==null?void 0:a.id)}catch{}t.removeSyncedObservations(f)}c.success?((o=c.errors)==null?void 0:o.length)>0&&console.warn("Sync errors:",c.errors):(i=!0,qs.value=((n=c.errors)==null?void 0:n[0])||"Observation sync failed",console.warn("Observation sync failed:",c.errors))}}return Ln.value||i?kt.value="error":(kt.value="idle",Pu.value=new Date().toISOString(),en.value=0),s}catch(a){return console.error("Sync failed:",a),qs.value=a.message,kt.value="error",s.success=!1,s}}function yr(){cn&&clearTimeout(cn),cn=setTimeout(async()=>{await yo()},ug)}async function Lu(){return cn&&(clearTimeout(cn),cn=null),await yo()}async function Bu(){if(en.value>=$i){console.log("Max retries reached, giving up"),kt.value="error";return}const e=dg(en.value);en.value++,console.log(`Retrying sync in ${Math.round(e/1e3)}s (attempt ${en.value}/${$i})`),setTimeout(async()=>{const t=await yo();!t.success&&t.offline!==!0&&Bu()},e)}function fg(){var i;const e=Ke(),t=us(),s=(i=e.currentUser)==null?void 0:i.value;if(!(s!=null&&s.dataConsent))return;const o=t.getPendingObservations().filter(u=>u.encrypted);if(o.length===0)return;const a={observations:o.map(u=>({encrypted_data:u.encrypted_data,iv:u.iv,metadata:u.metadata}))},l=new Blob([JSON.stringify(a)],{type:"application/json"});navigator.sendBeacon(`${al}/observations?api_key=${Iu}`,l),console.log("Sent beacon with",o.length,"observations")}function pg(){window.addEventListener("online",()=>{tn.value=!0,console.log("Back online, triggering sync"),Lu()}),window.addEventListener("offline",()=>{tn.value=!1,kt.value="offline",console.log("Gone offline")}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&tn.value&&(console.log("Tab visible, triggering sync"),yr())}),window.addEventListener("beforeunload",fg),setInterval(()=>{document.visibilityState==="visible"&&tn.value&&yr()},5*60*1e3)}async function vg(){pg(),navigator.onLine?await yo():kt.value="offline"}function Mu(){const e=E(()=>kt.value==="syncing"),t=E(()=>kt.value==="offline"||!tn.value),s=E(()=>kt.value==="error"),n=E(()=>us().pendingCount.value>0);return{syncState:kt,lastSyncAt:Pu,lastError:qs,retryCount:en,isOnline:tn,registrationFailed:Ln,isSyncing:e,isOffline:t,hasError:s,needsSync:n,initialize:vg,performSync:yo,triggerSync:yr,forceSync:Lu,retrySync:Bu,registerUserWithServer:Du,syncObservationsToServer:Ru}}const rl="https://api.bridge-classroom.com/api",Uu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",os=O(null),br=O(!1),bo=O(null);async function mg(){br.value=!0;try{const e=await fetch(`${rl}/announcements/active`);if(!e.ok)return;const t=await e.json(),s=os.value;os.value=t.announcement||null,os.value&&(!s||s.id!==os.value.id)&&(bo.value=null)}catch{}finally{br.value=!1}}async function hg(e,t="info",s=null){const n={message:e,type:t};s&&(n.expires_at=s);const o=await fetch(`${rl}/admin/announcement`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Uu},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Failed to set announcement: ${o.status}`);const a=await o.json();return os.value=a.announcement||null,bo.value=null,a}async function gg(){const e=await fetch(`${rl}/admin/announcement`,{method:"DELETE",headers:{"x-api-key":Uu}});if(!e.ok)throw new Error(`Failed to clear announcement: ${e.status}`);os.value=null,bo.value=null}function yg(){os.value&&(bo.value=os.value.id)}function ll(){return{announcement:os,loading:br,dismissed:bo,loadAnnouncement:mg,setAnnouncement:hg,clearAnnouncement:gg,dismiss:yg}}const xs="https://api.bridge-classroom.com/api",As="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",On=O([]),Ts=O([]),Ba=O(null),Tt=O(!1),je=O(null);function Cn(){async function e(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${xs}/assignments?student_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":As}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();if(f.success){const d=new Map;for(const v of f.assignments){const h=d.get(v.exercise_id);(!h||v.attempted_boards>h.attempted_boards)&&d.set(v.exercise_id,v)}On.value=Array.from(d.values())}else je.value=f.error||"Failed to fetch assignments";return f}catch(c){return console.error("Failed to fetch student assignments:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function t(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${xs}/assignments?assigned_by=${encodeURIComponent(u)}`,{headers:{"x-api-key":As}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Ts.value=f.assignments:je.value=f.error||"Failed to fetch assignments",f}catch(c){return console.error("Failed to fetch teacher assignments:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function s(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${xs}/assignments?classroom_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":As}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?f.assignments:(je.value=f.error||"Failed to fetch assignments",[])}catch(c){return console.error("Failed to fetch classroom assignments:",c),je.value="Unable to connect to server",[]}finally{Tt.value=!1}}async function n(u){Tt.value=!0,je.value=null;try{const c=await fetch(`${xs}/assignments/${encodeURIComponent(u)}`,{headers:{"x-api-key":As}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,null}const f=await c.json();return f.success?Ba.value=f.assignment:je.value=f.error||"Failed to fetch assignment",f}catch(c){return console.error("Failed to fetch assignment detail:",c),je.value="Unable to connect to server",null}finally{Tt.value=!1}}async function o({exercise_id:u,classroom_id:c,student_id:f,assigned_by:d,due_at:v,sort_order:h}){Tt.value=!0,je.value=null;try{const g=await fetch(`${xs}/assignments`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":As},body:JSON.stringify({exercise_id:u,classroom_id:c||null,student_id:f||null,assigned_by:d,due_at:v||null,sort_order:h??null})});if(!g.ok){const k=await g.text();return je.value=k||`Server error (${g.status})`,{success:!1,error:je.value}}const y=await g.json();return y.success?Ts.value=[y.assignment,...Ts.value]:je.value=y.error||"Failed to create assignment",y}catch(g){return console.error("Failed to create assignment:",g),je.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Tt.value=!1}}async function a(u){try{const c=await fetch(`${xs}/assignments/${encodeURIComponent(u)}`,{method:"DELETE",headers:{"x-api-key":As}});if(!c.ok){const d=await c.text();return je.value=d||`Server error (${c.status})`,{success:!1,error:je.value}}const f=await c.json();return f.success&&(Ts.value=Ts.value.filter(d=>d.id!==u),On.value=On.value.filter(d=>d.id!==u)),f}catch(c){return console.error("Failed to delete assignment:",c),{success:!1,error:"Unable to connect to server"}}}async function l(u){try{const c=await fetch(`${xs}/exercises/${encodeURIComponent(u)}`,{headers:{"x-api-key":As}});if(!c.ok)return null;const f=await c.json();return f.success?f.exercise.boards:null}catch(c){return console.error("Failed to fetch exercise boards:",c),null}}function i(){On.value=[],Ts.value=[],Ba.value=null,Tt.value=!1,je.value=null}return{studentAssignments:On,teacherAssignments:Ts,currentAssignment:Ba,loading:Tt,error:je,fetchStudentAssignments:e,fetchTeacherAssignments:t,fetchClassroomAssignments:s,fetchAssignmentDetail:n,createAssignment:o,deleteAssignment:a,fetchExerciseBoards:l,reset:i}}const bg={key:0,class:"minimal-hand"},_g={class:"seat-label-inline"},wg={class:"seat-label"},Sg={key:0,class:"suits"},Cg={key:0,class:"suit-row"},$g={key:0,class:"cards clickable-cards"},kg=["onClick"],xg={key:1,class:"cards"},Ag={key:2,class:"cards"},Tg={key:1,class:"hidden-hand"},Ng={key:2,class:"hcp"},Eg={__name:"HandDisplay",props:{hand:{type:Object,default:null},seat:{type:String,required:!0,validator:e=>["N","E","S","W"].includes(e)},hidden:{type:Boolean,default:!1},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},minimal:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},playedCards:{type:Array,default:null}},emits:["card-click"],setup(e){const t=e,s=Xc,n=E(()=>lr(t.seat)),o=E(()=>Xv(t.hand)),a=E(()=>t.hand?s.reduce((k,$)=>{var _;return k+(((_=t.hand[$])==null?void 0:_.length)||0)},0):0),l=E(()=>a.value>0&&a.value<5);function i(k){return t.hand&&t.hand[k]&&t.hand[k].length>0}function u(k){return Jr[k]}function c(k){return Yv(k)}const f={spades:"S",hearts:"H",diamonds:"D",clubs:"C"};function d(k){return f[k]||k}function v(k){if(!t.hand||!t.hand[k])return"";const $=t.hand[k];return $.length===0?"":$.map(Ra).join(" ")}const h=E(()=>t.playedCards&&t.playedCards.length>0),g=E(()=>{if(!t.playedCards)return null;const k=new Set;for(const $ of t.playedCards){const _=$[0].toUpperCase(),S=$.slice(1).toUpperCase(),T={S:"spades",H:"hearts",D:"diamonds",C:"clubs"}[_];T&&k.add(`${T}:${S}`)}return k});function y(k,$){return g.value?g.value.has(`${k}:${$}`):!1}return(k,$)=>(p(),m("div",{class:ie(["hand",{hidden:e.hidden,compact:e.compact,minimal:e.minimal,clickable:e.clickable}])},[e.minimal&&e.hidden?(p(),m("div",bg,[r("span",_g,b(e.seat),1),(p(!0),m(Q,null,le(M(s),_=>(p(),m("span",{key:_,class:ie(["suit-symbol-inline",c(_)])},b(u(_)),3))),128))])):(p(),m(Q,{key:1},[r("div",wg,b(n.value),1),!e.hidden&&e.hand?(p(),m("div",Sg,[(p(!0),m(Q,null,le(M(s),_=>(p(),m(Q,{key:_},[!l.value||i(_)?(p(),m("div",Cg,[r("span",{class:ie(["suit-symbol",c(_)])},b(u(_)),3),e.clickable?(p(),m("span",$g,[(p(!0),m(Q,null,le(e.hand[_],S=>(p(),m("span",{key:S,class:ie(y(_,S)?"card-played":"card-clickable"),onClick:T=>!y(_,S)&&k.$emit("card-click",{suit:d(_),rank:S})},b(M(Ra)(S)),11,kg))),128))])):h.value?(p(),m("span",xg,[(p(!0),m(Q,null,le(e.hand[_],S=>(p(),m("span",{key:S,class:ie({"card-played":y(_,S)})},b(M(Ra)(S)),3))),128))])):(p(),m("span",Ag,b(v(_)),1))])):F("",!0)],64))),128))])):e.hidden?(p(),m("div",Tg,[...$[0]||($[0]=[r("div",{class:"card-back"},null,-1)])])):F("",!0),e.showHcp&&e.hand&&!e.hidden&&!l.value?(p(),m("div",Ng,b(o.value)+" HCP ",1)):F("",!0)],64))],2))}},To=we(Eg,[["__scopeId","data-v-128fc7ed"]]),Og={class:"ns-column north-row"},Ig={key:0,class:"position north"},Pg={key:0,class:"position west"},Dg={class:"center"},Rg={key:1,class:"position east"},Lg={class:"ns-column south-row"},Bg={key:0,class:"position south"},Mg={__name:"BridgeTable",props:{hands:{type:Object,required:!0,default:()=>({N:null,E:null,S:null,W:null})},hiddenSeats:{type:Array,default:()=>[]},showHcp:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},clickableSeat:{type:String,default:null},playedCards:{type:Object,default:null}},emits:["card-click"],setup(e){return(t,s)=>{var n,o,a,l;return p(),m("div",{class:ie(["bridge-table",{compact:e.compact}])},[r("div",Og,[!e.hiddenSeats.includes("N")&&e.hands.N?(p(),m("div",Ig,[ye(To,{hand:e.hands.N,seat:"N",showHcp:e.showHcp,clickable:e.clickableSeat==="N",playedCards:(n=e.playedCards)==null?void 0:n.N,onCardClick:s[0]||(s[0]=i=>t.$emit("card-click",{seat:"N",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)]),!e.hiddenSeats.includes("W")&&e.hands.W?(p(),m("div",Pg,[ye(To,{hand:e.hands.W,seat:"W",showHcp:e.showHcp,clickable:e.clickableSeat==="W",playedCards:(o=e.playedCards)==null?void 0:o.W,onCardClick:s[1]||(s[1]=i=>t.$emit("card-click",{seat:"W",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),r("div",Dg,[pf(t.$slots,"center",{},void 0)]),!e.hiddenSeats.includes("E")&&e.hands.E?(p(),m("div",Rg,[ye(To,{hand:e.hands.E,seat:"E",showHcp:e.showHcp,clickable:e.clickableSeat==="E",playedCards:(a=e.playedCards)==null?void 0:a.E,onCardClick:s[2]||(s[2]=i=>t.$emit("card-click",{seat:"E",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0),r("div",Lg,[!e.hiddenSeats.includes("S")&&e.hands.S?(p(),m("div",Bg,[ye(To,{hand:e.hands.S,seat:"S",showHcp:e.showHcp,clickable:e.clickableSeat==="S",playedCards:(l=e.playedCards)==null?void 0:l.S,onCardClick:s[3]||(s[3]=i=>t.$emit("card-click",{seat:"S",...i}))},null,8,["hand","showHcp","clickable","playedCards"])])):F("",!0)])],2)}}},Ug=we(Mg,[["__scopeId","data-v-ec6230a9"]]),Fg={class:"bidding-box"},jg={class:"bid-section"},Hg={class:"levels"},Wg=["onClick"],Kg={class:"strains"},Vg=["disabled","onClick"],Gg=["innerHTML"],zg={class:"special-bids"},Jg=["disabled"],Yg=["disabled"],qg={__name:"BiddingBox",props:{lastBid:{type:String,default:null},lastBidWasDouble:{type:Boolean,default:!1},lastBidWasRedouble:{type:Boolean,default:!1},canDouble:{type:Boolean,default:!1},canRedouble:{type:Boolean,default:!1}},emits:["bid"],setup(e,{emit:t}){const s=e,n=t,o=O(1),a=[{value:"C",display:"",colorClass:"suit-black"},{value:"D",display:"",colorClass:"suit-red"},{value:"H",display:"",colorClass:"suit-red"},{value:"S",display:"",colorClass:"suit-black"},{value:"NT",display:"NT",colorClass:"suit-nt"}],l=E(()=>{if(!s.lastBid)return 0;const d=s.lastBid.match(/^(\d)/);return d?parseInt(d[1],10):0}),i=E(()=>{if(!s.lastBid)return-1;const d=["C","D","H","S","NT","N"],v=s.lastBid.match(/\d([CDHSN]T?)$/i);if(!v)return-1;const h=v[1].toUpperCase();return d.indexOf(h==="N"?"NT":h)});function u(d){o.value=d}function c(d,v){if(!d)return!1;const g=["C","D","H","S","NT"].indexOf(v);return d>l.value||d===l.value&&g>i.value}function f(d,v){c(d,v)&&n("bid",`${d}${v}`)}return(d,v)=>(p(),m("div",Fg,[r("div",jg,[r("div",Hg,[(p(),m(Q,null,le(7,h=>r("button",{key:h,class:ie(["level-btn",{active:o.value===h}]),onClick:g=>u(h)},b(h),11,Wg)),64))]),r("div",Kg,[(p(),m(Q,null,le(a,h=>r("button",{key:h.value,class:ie(["strain-btn",[h.colorClass,{disabled:!c(o.value,h.value)}]]),disabled:!c(o.value,h.value),onClick:g=>f(o.value,h.value)},[r("span",{innerHTML:h.display},null,8,Gg)],10,Vg)),64))])]),r("div",zg,[r("button",{class:"special-btn pass",onClick:v[0]||(v[0]=h=>d.$emit("bid","Pass"))}," Pass "),r("button",{class:"special-btn double",disabled:!e.canDouble,onClick:v[1]||(v[1]=h=>d.$emit("bid","X"))}," Double ",8,Jg),r("button",{class:"special-btn redouble",disabled:!e.canRedouble,onClick:v[2]||(v[2]=h=>d.$emit("bid","XX"))}," Redouble ",8,Yg)])]))}},Xg=we(qg,[["__scopeId","data-v-38ccb98f"]]),Qg={class:"auction-table"},Zg={class:"rounds"},ey=["innerHTML"],ty={key:1,class:"turn-indicator"},sy={__name:"AuctionTable",props:{bids:{type:Array,default:()=>[]},dealer:{type:String,default:"N"},currentBidIndex:{type:Number,default:-1},wrongBidIndex:{type:Number,default:-1},correctBidIndex:{type:Number,default:-1},showTurnIndicator:{type:Boolean,default:!1}},setup(e){const t=e,s=E(()=>["W","N","E","S"].indexOf(t.dealer)),n=E(()=>{const c=[],f=t.bids;let d=0,v=0;for(;d<f.length||v===0&&f.length>0;){const h=[null,null,null,null],g=v===0?s.value:0;for(let y=g;y<4&&d<f.length;y++)h[y]=f[d],d++;if(h.some(y=>y!==null)&&c.push(h),v++,v>20)break}if(t.currentBidIndex>=f.length){const h=c[c.length-1],g=h?h.filter(y=>y!==null).length:0;if(c.length===1&&s.value,g===4||c.length>1&&g===4){const y=[null,null,null,null];c.push(y)}}return c});function o(c,f){return c===0?f-s.value:4-s.value+(c-1)*4+f}function a(c,f){const d=o(c,f);return d===t.currentBidIndex&&d>=t.bids.length}function l(c,f){return t.wrongBidIndex<0?!1:o(c,f)===t.wrongBidIndex}function i(c,f){return t.correctBidIndex<0?!1:o(c,f)===t.correctBidIndex}function u(c){return Yr(c).html}return(c,f)=>(p(),m("div",Qg,[f[0]||(f[0]=no('<div class="header" data-v-ac265db8><div class="header-cell" data-v-ac265db8>W</div><div class="header-cell" data-v-ac265db8>N</div><div class="header-cell" data-v-ac265db8>E</div><div class="header-cell" data-v-ac265db8>S</div></div>',1)),r("div",Zg,[(p(!0),m(Q,null,le(n.value,(d,v)=>(p(),m("div",{key:v,class:"round"},[(p(!0),m(Q,null,le(d,(h,g)=>(p(),m("div",{key:g,class:ie(["bid-cell",{"current-turn":a(v,g),"wrong-bid":l(v,g),"correct-bid":i(v,g)}])},[h?(p(),m("span",{key:0,innerHTML:u(h)},null,8,ey)):e.showTurnIndicator&&a(v,g)?(p(),m("span",ty,"?")):F("",!0)],2))),128))]))),128))])]))}},ny=we(sy,[["__scopeId","data-v-ac265db8"]]),oy={class:"deal-info"},ay={class:"board-number"},ry={key:0,class:"board-popup"},ly={class:"popup-list"},iy=["onClick"],cy={class:"info-row"},uy={class:"info-item"},dy={class:"value"},fy={class:"info-item"},py={key:0,class:"contract-row"},vy={class:"info-item"},my=["innerHTML"],hy={key:0,class:"label"},gy={key:0,class:"info-item"},yy=["innerHTML"],by={key:1,class:"title"},_y={__name:"DealInfo",props:{boardNumber:{type:Number,default:0},dealer:{type:String,default:"N"},vulnerable:{type:String,default:"None"},contract:{type:String,default:""},declarer:{type:String,default:""},showContract:{type:Boolean,default:!1},openingLead:{type:String,default:""},title:{type:String,default:""},totalDeals:{type:Number,default:0},currentIndex:{type:Number,default:0},dealBoardNumbers:{type:Array,default:()=>[]}},emits:["goto"],setup(e,{emit:t}){const s=e,n=t,o=O(!1);function a(v){n("goto",v),o.value=!1}const l=E(()=>lr(s.dealer)),i=E(()=>lr(s.declarer)),u=E(()=>qv(s.vulnerable)),c=E(()=>{var h;const v=(h=s.vulnerable)==null?void 0:h.toUpperCase();return v==="BOTH"||v==="ALL"?"vul-both":v==="NS"||v==="EW"?"vul-partial":"vul-none"}),f=E(()=>s.contract?Yr(s.contract).html:""),d=E(()=>{if(!s.openingLead)return"";const v=s.openingLead[0],h=s.openingLead.slice(1),g={S:"",H:"",D:"",C:""},y={S:"black",H:"red",D:"red",C:"black"},k=g[v]||v;return`<span class="${y[v]||"black"}">${k}</span>${h==="T"?"10":h}`});return(v,h)=>(p(),m("div",oy,[r("div",{class:"board-selector",onMouseenter:h[0]||(h[0]=g=>o.value=!0),onMouseleave:h[1]||(h[1]=g=>o.value=!1)},[r("div",ay,"Board "+b(e.boardNumber),1),o.value&&e.totalDeals>1?(p(),m("div",ry,[h[2]||(h[2]=r("div",{class:"popup-header"},"Select Board",-1)),r("div",ly,[(p(!0),m(Q,null,le(e.totalDeals,g=>(p(),m("button",{key:g,class:ie(["popup-item",{active:g-1===e.currentIndex}]),onClick:y=>a(g-1)}," Board "+b(e.dealBoardNumbers[g-1]||g),11,iy))),128))])])):F("",!0)],32),r("div",cy,[r("div",uy,[h[3]||(h[3]=r("span",{class:"label"},"Dealer:",-1)),r("span",dy,b(l.value),1)]),r("div",fy,[h[4]||(h[4]=r("span",{class:"label"},"Vul:",-1)),r("span",{class:ie(["value",c.value])},b(u.value),3)])]),e.showContract&&e.contract?(p(),m("div",py,[r("div",vy,[r("span",{class:"value contract",innerHTML:f.value},null,8,my),e.declarer?(p(),m("span",hy,"by "+b(i.value),1)):F("",!0)]),e.openingLead?(p(),m("div",gy,[h[5]||(h[5]=r("span",{class:"label"},"OL:",-1)),r("span",{class:"value lead-card",innerHTML:d.value},null,8,yy)])):F("",!0)])):F("",!0),e.title?(p(),m("div",by,b(e.title),1)):F("",!0)]))}},wy=we(_y,[["__scopeId","data-v-5a844c49"]]),Sy={class:"feedback-header"},Cy={key:0,class:"icon"},$y={key:1,class:"icon"},ky={class:"title"},xy={key:0,class:"feedback-content"},Ay={class:"bid-comparison"},Ty={class:"bid-item your-bid"},Ny=["innerHTML"],Ey={class:"bid-item correct-bid"},Oy=["innerHTML"],Iy={key:1,class:"feedback-content"},Py={class:"bid-comparison"},Dy={class:"bid-item your-bid"},Ry=["innerHTML"],Ly={class:"bid-item correct-bid"},By=["innerHTML"],My=["innerHTML"],Uy={class:"actions"},Fy={__name:"FeedbackPanel",props:{visible:{type:Boolean,default:!1},type:{type:String,default:"wrong",validator:e=>["wrong","correct","info"].includes(e)},wrongBid:{type:String,default:""},correctBid:{type:String,default:""},wrongCardCode:{type:String,default:""},correctCardCode:{type:String,default:""},commentary:{type:String,default:""},showContinue:{type:Boolean,default:!0}},emits:["continue"],setup(e){const t=e,s=E(()=>t.type==="wrong"?"Incorrect":t.type==="correct"?"Correct!":"Information");function n(a){return Yr(a).html}function o(a){return Qv(a).html}return(a,l)=>e.visible?(p(),m("div",{key:0,class:ie(["feedback-panel",e.type])},[r("div",Sy,[e.type==="wrong"?(p(),m("span",Cy,"")):e.type==="correct"?(p(),m("span",$y,"")):F("",!0),r("span",ky,b(s.value),1)]),e.wrongBid?(p(),m("div",xy,[r("div",Ay,[r("div",Ty,[l[1]||(l[1]=r("span",{class:"label"},"Your bid:",-1)),r("span",{class:"bid",innerHTML:n(e.wrongBid)},null,8,Ny)]),r("div",Ey,[l[2]||(l[2]=r("span",{class:"label"},"Correct bid:",-1)),r("span",{class:"bid",innerHTML:n(e.correctBid)},null,8,Oy)])])])):F("",!0),e.wrongCardCode?(p(),m("div",Iy,[r("div",Py,[r("div",Dy,[l[3]||(l[3]=r("span",{class:"label"},"Your card:",-1)),r("span",{class:"bid",innerHTML:o(e.wrongCardCode)},null,8,Ry)]),r("div",Ly,[l[4]||(l[4]=r("span",{class:"label"},"Correct card:",-1)),r("span",{class:"bid",innerHTML:o(e.correctCardCode)},null,8,By)])])])):F("",!0),e.commentary?(p(),m("div",{key:2,class:"commentary",innerHTML:M(Ys)(e.commentary)},null,8,My)):F("",!0),r("div",Uy,[e.showContinue?(p(),m("button",{key:0,class:"btn continue",onClick:l[0]||(l[0]=i=>a.$emit("continue"))}," Continue ")):F("",!0)])],2)):F("",!0)}},ki=we(Fy,[["__scopeId","data-v-04368462"]]),jy={class:"welcome-screen"},Hy={class:"welcome-card"},Wy={class:"welcome-header"},Ky={key:0,class:"welcome-body"},Vy={class:"form-group"},Gy={key:0,class:"error-message"},zy={class:"form-group"},Jy={key:0,class:"error-message"},Yy={class:"form-group"},qy={key:0,class:"error-message"},Xy={key:0,class:"form-group"},Qy={class:"checkbox-group"},Zy=["value","checked","onChange"],eb={key:1,class:"form-group"},tb={class:"single-classroom"},sb={class:"form-group consent-group"},nb={class:"checkbox-label consent-label"},ob={key:0,class:"consent-details"},ab=["disabled"],rb={key:0},lb={key:1},ib={key:1,class:"welcome-body returning"},cb={key:2,class:"welcome-body switcher"},ub={class:"user-list"},db=["onClick"],fb={class:"user-name"},pb={key:3,class:"welcome-body recovery-sent"},vb={class:"subtitle"},mb={class:"recovery-info"},hb={class:"code-entry"},gb=["disabled"],yb={key:0},bb={key:1},_b={key:0,class:"error-message"},wb={key:4,class:"welcome-body recovery-claiming"},Sb={class:"subtitle"},Cb={key:0,class:"recovery-error-panel"},$b={class:"error-message"},kb={key:1,class:"loading-spinner"},xb={__name:"WelcomeScreen",emits:["userReady"],setup(e,{emit:t}){const s=t,n=mo(),o=Ke(),a="https://api.bridge-classroom.com/api",l=O("form"),i=O(""),u=O(""),c=O(""),f=O([]),d=O(!0),v=O({firstName:"",lastName:"",email:"",classrooms:""}),h=O(!1),g=O(!1),y=O(""),k=O(""),$=O(""),_=O(""),S=O("");bt(async()=>{o.initialize(),n.initializeFromUrl();const q=new URLSearchParams(window.location.search),A=q.get("recover"),w=q.get("user_id");if(A&&w){await me(w,A),window.history.replaceState({},document.title,window.location.pathname);return}o.hasUsers.value&&o.currentUser.value?l.value="returning":o.hasUsers.value?l.value="switcher":l.value="form",n.hasSingleClassroom.value&&(f.value=[n.singleClassroom.value.id])});const T=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,P=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),B=E(()=>i.value.trim().length>0&&u.value.trim().length>0&&c.value.trim().length>0&&T.test(c.value.trim())),L=E(()=>o.currentUser.value?o.currentUser.value.firstName:""),z=E(()=>n.teacherName.value?`${n.teacherName.value}'s Bridge Classroom`:"Bridge Bidding Practice");function K(){v.value={firstName:"",lastName:"",email:"",classrooms:""};let q=!0;return i.value.trim()||(v.value.firstName="First name is required",q=!1),u.value.trim()||(v.value.lastName="Last name is required",q=!1),c.value.trim()?T.test(c.value.trim())||(v.value.email="Please enter a valid email address",q=!1):(v.value.email="Email is required",q=!1),o.findUserByEmail(c.value)&&(v.value.email="This email is already registered on this device.",q=!1),q}async function ue(){const q=c.value.trim().toLowerCase();if(!navigator.onLine)return zt("registration_offline","checkEmailOnServer  navigator.onLine is false, skipping server check"),!0;try{const A=await o.requestRecovery(q,a);return A.success?(k.value=q,_.value=A.message,l.value="recovery-sent",!1):A.message&&A.message.includes("No account found")?!0:(zt("registration_email_check_unexpected",`checkEmailOnServer  unexpected result for ${q}`,A.message),await Yn(),v.value.email=A.message||"Unable to verify email. Please try again.",!1)}catch(A){return zt("registration_email_check_failed",`checkEmailOnServer  fetch failed for ${q}`,A),await Yn(),P?v.value.email="Safari is blocking the connection. Please try Chrome or Firefox, or enable Safari Developer Tools (Settings  Advanced  Show features for web developers).":v.value.email="Unable to connect to server. Please check your connection and try again. If using a VPN, try disabling it.",!1}}async function me(q,A){l.value="recovery-claiming",g.value=!0,y.value="Recovering your account...",$.value="";try{const w=await o.claimRecovery(q,A,a);w.success&&w.user?s("userReady",w.user):($.value=w.error||"Recovery failed. Please try again.",l.value="form")}catch(w){zt("recovery_claim_failed",`handleRecoveryClaim  claimRecovery threw for userId=${q}`,w),$.value="Unable to complete recovery. Please try again.",l.value="form"}finally{g.value=!1,y.value=""}}async function fe(){if(S.value.trim().length===6){g.value=!0,y.value="Verifying code...",$.value="";try{const q=await o.claimRecoveryByCode(k.value.trim(),S.value.trim(),a);q.success&&q.user?s("userReady",q.user):$.value=q.error||"Invalid code. Please check and try again."}catch(q){zt("recovery_code_claim_failed",`handleClaimByCode  claimRecoveryByCode threw for ${k.value.trim()}`,q),$.value="Unable to connect to server. Please try again."}finally{g.value=!1,y.value=""}}}async function Se(){if(!K())return;if(g.value=!0,y.value="Checking account...",!await ue()){g.value=!1,y.value="";return}let A=[];n.hasSingleClassroom.value?A=[n.singleClassroom.value.id]:n.hasMultipleClassrooms.value&&(A=[...f.value]),y.value="Creating your secure encryption key...";try{const w=await o.createUser({firstName:i.value,lastName:u.value,email:c.value,classrooms:A,dataConsent:d.value,apiUrl:a});s("userReady",w)}catch(w){const X=w instanceof Error?w.message:String(w);zt("registration_create_user_failed",`handleSubmit  createUser threw for ${c.value.trim()}`,w),await Yn(),v.value.email=`Failed to create account: ${X}. Please try again.`}finally{g.value=!1,y.value=""}}function xe(){s("userReady",o.currentUser.value)}function de(){l.value="switcher"}function pe(q){o.switchUser(q),s("userReady",o.currentUser.value)}function Z(){i.value="",u.value="",c.value="",f.value=n.hasSingleClassroom.value?[n.singleClassroom.value.id]:[],d.value=!0,v.value={firstName:"",lastName:"",email:"",classrooms:""},l.value="form"}function ee(){o.currentUser.value?l.value="returning":o.hasUsers.value&&(l.value="switcher")}function ve(q){const A=f.value.indexOf(q);A===-1?f.value.push(q):f.value.splice(A,1)}return(q,A)=>(p(),m("div",jy,[r("div",Hy,[r("div",Wy,[r("h1",null,b(z.value),1)]),l.value==="form"?(p(),m("div",Ky,[A[16]||(A[16]=r("h2",null,"Welcome!",-1)),A[17]||(A[17]=r("p",{class:"subtitle"},"Please enter your name to get started.",-1)),r("form",{onSubmit:tt(Se,["prevent"]),class:"user-form"},[r("div",Vy,[A[8]||(A[8]=r("label",{for:"firstName"},"First Name",-1)),We(r("input",{id:"firstName","onUpdate:modelValue":A[0]||(A[0]=w=>i.value=w),type:"text",placeholder:"Enter your first name",class:ie({"has-error":v.value.firstName}),autocomplete:"given-name"},null,2),[[St,i.value]]),v.value.firstName?(p(),m("span",Gy,b(v.value.firstName),1)):F("",!0)]),r("div",zy,[A[9]||(A[9]=r("label",{for:"lastName"},"Last Name",-1)),We(r("input",{id:"lastName","onUpdate:modelValue":A[1]||(A[1]=w=>u.value=w),type:"text",placeholder:"Enter your last name",class:ie({"has-error":v.value.lastName}),autocomplete:"family-name"},null,2),[[St,u.value]]),v.value.lastName?(p(),m("span",Jy,b(v.value.lastName),1)):F("",!0)]),r("div",Yy,[A[10]||(A[10]=r("label",{for:"email"},"Email Address",-1)),We(r("input",{id:"email","onUpdate:modelValue":A[2]||(A[2]=w=>c.value=w),type:"email",placeholder:"Enter your email address",class:ie({"has-error":v.value.email}),autocomplete:"email"},null,2),[[St,c.value]]),v.value.email?(p(),m("span",qy,b(v.value.email),1)):F("",!0),A[11]||(A[11]=r("span",{class:"field-hint"},"Used for account recovery and sharing with your teacher",-1))]),M(n).hasMultipleClassrooms.value?(p(),m("div",Xy,[A[12]||(A[12]=r("label",null,"Select Your Class(es)",-1)),r("div",Qy,[(p(!0),m(Q,null,le(M(n).availableClassrooms.value,w=>(p(),m("label",{key:w.id,class:"checkbox-label"},[r("input",{type:"checkbox",value:w.id,checked:f.value.includes(w.id),onChange:X=>ve(w.id)},null,40,Zy),r("span",null,b(w.name),1)]))),128))])])):M(n).hasSingleClassroom.value?(p(),m("div",eb,[A[13]||(A[13]=r("label",null,"Class",-1)),r("div",tb,b(M(n).singleClassroom.value.name),1)])):F("",!0),r("div",sb,[r("label",nb,[We(r("input",{type:"checkbox","onUpdate:modelValue":A[3]||(A[3]=w=>d.value=w)},null,512),[[Kr,d.value]]),A[14]||(A[14]=r("span",null," Preserve my practice history ",-1))]),r("button",{type:"button",class:"details-toggle",onClick:A[4]||(A[4]=w=>h.value=!h.value)},b(h.value?"Hide details":"What data is preserved?"),1),h.value?(p(),m("div",ob,[...A[15]||(A[15]=[no('<p data-v-cded279f>Your practice history is saved online so you can track your progress over time.</p><p data-v-cded279f><strong data-v-cded279f>How it works:</strong></p><ul data-v-cded279f><li data-v-cded279f>Your data is encrypted with your personal key</li><li data-v-cded279f>Only you and people you authorize can view it</li><li data-v-cded279f>The site administrator can also access your data</li></ul><p data-v-cded279f><strong data-v-cded279f>What&#39;s preserved:</strong></p><ul data-v-cded279f><li data-v-cded279f>Which hands you practiced</li><li data-v-cded279f>Your bidding choices (correct and incorrect)</li><li data-v-cded279f>When you practiced</li></ul><p class="consent-note" data-v-cded279f>You can change this setting anytime in Settings.</p>',6)])])):F("",!0)]),r("button",{type:"submit",class:"submit-btn",disabled:!B.value||g.value},[g.value?(p(),m("span",rb,b(y.value),1)):(p(),m("span",lb,"Start Practicing"))],8,ab)],32),M(o).hasUsers.value?(p(),m("button",{key:0,class:"back-link",onClick:ee}," Back to user selection ")):F("",!0)])):l.value==="returning"?(p(),m("div",ib,[r("h2",null,"Welcome back, "+b(L.value)+"!",1),A[18]||(A[18]=r("p",{class:"subtitle"},"Ready to continue practicing?",-1)),r("button",{class:"submit-btn",onClick:xe}," Continue "),r("button",{class:"switch-link",onClick:de}," Not "+b(L.value)+"? Switch user ",1)])):l.value==="switcher"?(p(),m("div",cb,[A[19]||(A[19]=r("h2",null,"Select User",-1)),A[20]||(A[20]=r("p",{class:"subtitle"},"Choose who's practicing today:",-1)),r("div",ub,[(p(!0),m(Q,null,le(M(o).allUsers.value,w=>(p(),m("button",{key:w.id,class:ie(["user-item",{"is-current":w.id===M(o).currentUserId.value}]),onClick:X=>pe(w.id)},[r("span",fb,b(w.firstName)+" "+b(w.lastName),1)],10,db))),128))]),r("button",{class:"add-user-btn",onClick:Z}," + Add New User "),M(o).currentUser.value?(p(),m("button",{key:0,class:"back-link",onClick:ee}," Cancel ")):F("",!0)])):l.value==="recovery-sent"?(p(),m("div",pb,[A[25]||(A[25]=r("h2",null,"Check Your Email",-1)),r("p",vb,[A[21]||(A[21]=Ne(" We found an existing account for ",-1)),r("strong",null,b(k.value),1),A[22]||(A[22]=Ne(". ",-1))]),r("div",mb,[r("p",null,b(_.value),1),A[23]||(A[23]=r("p",{class:"recovery-note"}," Click the link in the email, or enter the 6-digit code below. ",-1))]),r("div",hb,[A[24]||(A[24]=r("label",{for:"recoveryCode"},"Recovery Code",-1)),We(r("input",{id:"recoveryCode","onUpdate:modelValue":A[5]||(A[5]=w=>S.value=w),type:"text",inputmode:"numeric",pattern:"[0-9]*",maxlength:"6",placeholder:"000000",class:"code-input",autocomplete:"one-time-code",onKeyup:Go(fe,["enter"])},null,544),[[St,S.value]]),r("button",{class:"submit-btn",disabled:S.value.trim().length!==6||g.value,onClick:fe},[g.value?(p(),m("span",yb,b(y.value),1)):(p(),m("span",bb,"Restore Account"))],8,gb),$.value?(p(),m("span",_b,b($.value),1)):F("",!0)]),r("button",{class:"back-link",onClick:A[6]||(A[6]=w=>l.value="form")}," Use a different email ")])):l.value==="recovery-claiming"?(p(),m("div",wb,[A[27]||(A[27]=r("h2",null,"Restoring Your Account",-1)),r("p",Sb,b(y.value),1),$.value?(p(),m("div",Cb,[r("p",$b,b($.value),1),r("button",{class:"back-link",onClick:A[7]||(A[7]=w=>l.value="form")}," Try again ")])):(p(),m("div",kb,[...A[26]||(A[26]=[r("div",{class:"spinner"},null,-1)])]))])):F("",!0)])]))}},Ab=we(xb,[["__scopeId","data-v-cded279f"]]),Ns="https://api.bridge-classroom.com/api",Vs="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Es=O([]),Gs=O(null),Nt=O(!1),Xe=O(null);function _o(){async function e(u){Nt.value=!0,Xe.value=null;try{const f=await(await fetch(`${Ns}/classrooms?teacher_id=${encodeURIComponent(u)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Es.value=f.classrooms:Xe.value=f.error||"Failed to fetch classrooms",f}catch(c){return console.error("Failed to fetch classrooms:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function t(u,c,f){Nt.value=!0,Xe.value=null;try{const d=await fetch(`${Ns}/classrooms`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({teacher_id:u,name:c,description:f||null})});if(!d.ok){const h=await d.text();return Xe.value=h||`Server error (${d.status})`,{success:!1,error:Xe.value}}const v=await d.json();return v.success?Es.value=[v.classroom,...Es.value]:Xe.value=v.error||"Failed to create classroom",v}catch(d){return console.error("Failed to create classroom:",d),Xe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function s(u){Nt.value=!0,Xe.value=null;try{const f=await(await fetch(`${Ns}/classrooms/${encodeURIComponent(u)}`,{headers:{"x-api-key":Vs}})).json();return f.success?Gs.value=f.classroom:Xe.value=f.error||"Failed to fetch classroom",f}catch(c){return console.error("Failed to fetch classroom detail:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function n(u,c){try{const d=await(await fetch(`${Ns}/classrooms/${encodeURIComponent(u)}/members/${encodeURIComponent(c)}`,{method:"DELETE",headers:{"x-api-key":Vs}})).json();if(d.success&&Gs.value){Gs.value.members=Gs.value.members.filter(h=>h.student_id!==c);const v=Es.value.findIndex(h=>h.id===u);v!==-1&&Es.value[v].member_count--}return d}catch(f){return console.error("Failed to remove member:",f),{success:!1,error:"Unable to connect to server"}}}async function o(u){Nt.value=!0,Xe.value=null;try{const c=await fetch(`${Ns}/join/${encodeURIComponent(u)}`);return c.status===404?(Xe.value="Classroom not found",null):await c.json()}catch(c){return console.error("Failed to fetch join info:",c),Xe.value="Unable to connect to server",null}finally{Nt.value=!1}}async function a(u,c,f){Nt.value=!0,Xe.value=null;try{const v=await(await fetch(`${Ns}/join/${encodeURIComponent(u)}`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:c,encrypted_grant_payload:f})})).json();return v.success||(Xe.value=v.error||"Failed to join classroom"),v}catch(d){return console.error("Failed to join classroom:",d),Xe.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Nt.value=!1}}async function l(u,c){try{return await(await fetch(`${Ns}/classrooms/${encodeURIComponent(u)}/members/leave`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Vs},body:JSON.stringify({student_id:c})})).json()}catch(f){return console.error("Failed to leave classroom:",f),{success:!1,error:"Unable to connect to server"}}}function i(){Es.value=[],Gs.value=null,Nt.value=!1,Xe.value=null}return{teacherClassrooms:Es,currentClassroom:Gs,loading:Nt,error:Xe,fetchTeacherClassrooms:e,createClassroom:t,fetchClassroomDetail:s,removeMember:n,fetchJoinInfo:o,joinClassroom:a,leaveClassroom:l,reset:i}}const Tb={class:"settings-panel"},Nb={class:"settings-body"},Eb={class:"settings-section"},Ob={class:"info-row"},Ib={class:"info-value"},Pb={class:"info-row"},Db={class:"info-value"},Rb={class:"info-row"},Lb={class:"info-row"},Bb={class:"info-value"},Mb={key:1,class:"edit-form"},Ub={class:"form-group"},Fb={class:"form-group"},jb={class:"form-group"},Hb={class:"checkbox-label"},Wb={key:0,class:"settings-section"},Kb={class:"assignment-list"},Vb={class:"assignment-header"},Gb={class:"assignment-name"},zb={class:"assignment-progress"},Jb={class:"progress-bar"},Yb={class:"assignment-meta"},qb={key:0},Xb={class:"assignment-list"},Qb={class:"assignment-header"},Zb={class:"assignment-name"},e_={class:"assignment-meta"},t_={key:1,class:"settings-section"},s_={class:"classroom-id"},n_=["disabled","onClick"],o_={class:"settings-section"},a_={class:"toggle-row"},r_={class:"toggle-label"},l_=["checked"],i_={__name:"SettingsPanel",props:{visible:{type:Boolean,default:!1}},emits:["close","switchUser","logout","become-teacher"],setup(e,{emit:t}){const s=t,n=Ke(),o=mo(),a=ya(),l=_o(),i=O(!1),u=O(""),c=O(""),f=O(!0),d=E(()=>n.currentUser.value),v=E(()=>{var z;return!d.value||!((z=d.value.classrooms)!=null&&z.length)?"No classroom assigned":d.value.classrooms.map(K=>{const ue=o.availableClassrooms.value.find(me=>me.id===K);return ue?ue.name:K}).join(", ")}),h=E(()=>a.getAllAssignments().filter(z=>z.completionPercent<100)),g=E(()=>a.getAllAssignments().filter(z=>z.completionPercent>=100));function y(){d.value&&(u.value=d.value.firstName,c.value=d.value.lastName,f.value=d.value.dataConsent,i.value=!0)}function k(){i.value=!1}function $(){d.value&&(n.updateUser(d.value.id,{firstName:u.value,lastName:c.value,dataConsent:f.value}),i.value=!1)}function _(){s("switchUser")}function S(){i.value=!1,s("close")}const T=O(null);async function P(z){if(!d.value||!confirm("Are you sure you want to leave this classroom? Your teacher will no longer see your progress for new assignments."))return;if(T.value=z,(await l.leaveClassroom(z,d.value.id)).success){const ue=d.value.classrooms||[];n.updateUser(d.value.id,{classrooms:ue.filter(me=>me!==z)})}T.value=null}function B(){d.value&&confirm("Remove your account from this device? Your data on the server is not affected. You can recover your account later using your email.")&&(n.deleteUser(d.value.id),o.clearConfig(),s("close"),s("logout"))}function L(z){return z?new Date(z).toLocaleDateString():"N/A"}return(z,K)=>{var ue,me,fe,Se,xe,de,pe;return e.visible?(p(),m("div",{key:0,class:"settings-overlay",onClick:tt(S,["self"])},[r("div",Tb,[r("div",{class:"settings-header"},[K[5]||(K[5]=r("h2",null,"Settings",-1)),r("button",{class:"close-btn",onClick:S,"aria-label":"Close"},"  ")]),r("div",Nb,[r("section",Eb,[K[12]||(K[12]=r("h3",null,"Your Profile",-1)),i.value?(p(),m("div",Mb,[r("div",Ub,[K[10]||(K[10]=r("label",{for:"editFirstName"},"First Name",-1)),We(r("input",{id:"editFirstName","onUpdate:modelValue":K[1]||(K[1]=Z=>u.value=Z),type:"text"},null,512),[[St,u.value]])]),r("div",Fb,[K[11]||(K[11]=r("label",{for:"editLastName"},"Last Name",-1)),We(r("input",{id:"editLastName","onUpdate:modelValue":K[2]||(K[2]=Z=>c.value=Z),type:"text"},null,512),[[St,c.value]])]),r("div",jb,[r("label",Hb,[We(r("input",{type:"checkbox","onUpdate:modelValue":K[3]||(K[3]=Z=>f.value=Z)},null,512),[[Kr,f.value]]),r("span",null,"Share practice results with "+b(M(o).teacherName.value||"teacher"),1)])]),r("div",{class:"button-row"},[r("button",{class:"primary-btn",onClick:$}," Save Changes "),r("button",{class:"secondary-btn",onClick:k}," Cancel ")])])):(p(),m(Q,{key:0},[r("div",Ob,[K[6]||(K[6]=r("span",{class:"info-label"},"Name",-1)),r("span",Ib,b((ue=d.value)==null?void 0:ue.firstName)+" "+b((me=d.value)==null?void 0:me.lastName),1)]),r("div",Pb,[K[7]||(K[7]=r("span",{class:"info-label"},"Class",-1)),r("span",Db,b(v.value),1)]),r("div",Rb,[K[8]||(K[8]=r("span",{class:"info-label"},"Data Sharing",-1)),r("span",{class:ie(["info-value",(fe=d.value)!=null&&fe.dataConsent?"enabled":"disabled"])},b((Se=d.value)!=null&&Se.dataConsent?"Enabled":"Disabled"),3)]),r("div",Lb,[K[9]||(K[9]=r("span",{class:"info-label"},"Member Since",-1)),r("span",Bb,b(L((xe=d.value)==null?void 0:xe.createdAt)),1)]),r("div",{class:"button-row"},[r("button",{class:"secondary-btn",onClick:y}," Edit Profile "),r("button",{class:"secondary-btn",onClick:_}," Switch User ")]),((de=d.value)==null?void 0:de.role)!=="teacher"&&((pe=d.value)==null?void 0:pe.role)!=="admin"?(p(),m("button",{key:0,class:"become-teacher-btn",onClick:K[0]||(K[0]=Z=>{s("close"),s("become-teacher")})}," Become a Teacher ")):F("",!0)],64))]),h.value.length||g.value.length?(p(),m("section",Wb,[K[16]||(K[16]=r("h3",null,"Assignments",-1)),h.value.length?(p(),m(Q,{key:0},[K[13]||(K[13]=r("h4",null,"Active",-1)),r("div",Kb,[(p(!0),m(Q,null,le(h.value,Z=>(p(),m("div",{key:Z.id,class:"assignment-item"},[r("div",Vb,[r("span",Gb,b(Z.name),1),r("span",zb,b(Z.completionPercent)+"%",1)]),r("div",Jb,[r("div",{class:"progress-fill",style:et({width:`${Z.completionPercent}%`})},null,4)]),r("div",Yb,[Z.dueDate?(p(),m("span",qb," Due: "+b(L(Z.dueDate)),1)):F("",!0),r("span",null,b(Z.completedDeals)+"/"+b(Z.totalDeals)+" deals ",1)])]))),128))])],64)):F("",!0),g.value.length?(p(),m(Q,{key:1},[K[15]||(K[15]=r("h4",null,"Completed",-1)),r("div",Xb,[(p(!0),m(Q,null,le(g.value,Z=>(p(),m("div",{key:Z.id,class:"assignment-item completed"},[r("div",Qb,[r("span",Zb,b(Z.name),1),K[14]||(K[14]=r("span",{class:"assignment-check"},"",-1))]),r("div",e_," Completed "+b(L(Z.lastPracticedAt)),1)]))),128))])],64)):F("",!0)])):F("",!0),d.value&&d.value.classrooms&&d.value.classrooms.length?(p(),m("section",t_,[K[17]||(K[17]=r("h3",null,"My Classrooms",-1)),(p(!0),m(Q,null,le(d.value.classrooms,Z=>(p(),m("div",{key:Z,class:"classroom-row"},[r("span",s_,b(Z),1),r("button",{class:"leave-btn",disabled:T.value===Z,onClick:ee=>P(Z)},b(T.value===Z?"Leaving...":"Leave"),9,n_)]))),128))])):F("",!0),r("section",o_,[K[19]||(K[19]=r("h3",null,"Display Options",-1)),r("div",a_,[r("label",r_,[r("input",{type:"checkbox",checked:M(o).showLoadPbnOption.value,onChange:K[4]||(K[4]=Z=>M(o).setUIPref("showLoadPbnOption",Z.target.checked))},null,40,l_),K[18]||(K[18]=r("span",null,'Show "Load your own PBN" option in lobby',-1))])])]),r("section",{class:"settings-section"},[K[20]||(K[20]=r("h3",null,"Data & Privacy",-1)),K[21]||(K[21]=r("p",{class:"section-note"}," Key backup and data export options will be available in a future update. ",-1)),r("button",{class:"remove-device-btn",onClick:B}," Remove account from this device "),K[22]||(K[22]=r("p",{class:"remove-note"}," Removes your local data only. Your server account is not affected and can be recovered via email. ",-1))])])])])):F("",!0)}}},c_=we(i_,[["__scopeId","data-v-57179473"]]),u_={class:"banner-content"},d_={class:"assignment-info"},f_={class:"assignment-title"},p_={class:"assignment-name"},v_={class:"assignment-meta"},m_={class:"progress-text"},h_={class:"progress-bar"},g_={key:0,class:"complete-badge"},y_={class:"return-text"},b_={__name:"AssignmentBanner",setup(e){const t=ya(),s=E(()=>t.currentAssignment.value),n=E(()=>t.hasActiveAssignment.value),o=E(()=>t.assignmentProgress.value),a=E(()=>t.isAssignmentComplete.value),l=E(()=>t.inAssignmentMode.value),i=E(()=>{var y;if(!((y=s.value)!=null&&y.dueDate))return null;const v=new Date(s.value.dueDate);return Math.ceil((v-new Date)/(1e3*60*60*24))}),u=E(()=>i.value===null?null:i.value<0?a.value?"Completed":"Overdue":i.value===0?"Due today":i.value===1?"Due tomorrow":`Due in ${i.value} days`),c=E(()=>i.value===null||a.value?"":i.value<0?"overdue":i.value<=1?"urgent":i.value<=3?"soon":"");function f(){t.exitAssignmentMode()}function d(){t.returnToAssignmentMode()}return(v,h)=>{var g,y;return n.value&&l.value?(p(),m("div",{key:0,class:ie(["assignment-banner",{complete:a.value}])},[r("div",u_,[r("div",d_,[r("div",f_,[h[0]||(h[0]=r("span",{class:"assignment-label"},"Assignment:",-1)),r("span",p_,b((g=s.value)==null?void 0:g.name),1)]),r("div",v_,[r("span",m_,b(o.value.completed)+" of "+b(o.value.total)+" deals ("+b(o.value.percent)+"%) ",1),u.value?(p(),m("span",{key:0,class:ie(["due-text",c.value])},b(u.value),3)):F("",!0)])]),r("div",h_,[r("div",{class:ie(["progress-fill",{complete:a.value}]),style:et({width:`${o.value.percent}%`})},null,6)]),r("button",{class:"exit-btn",onClick:f,title:"Practice freely without assignment tracking"}," Free Practice ")]),a.value?(p(),m("div",g_," Complete! ")):F("",!0)],2)):s.value&&!l.value?(p(),m("div",{key:1,class:"return-banner",onClick:d},[h[1]||(h[1]=r("span",{class:"return-icon"},"",-1)),r("span",y_," Return to assignment: "+b((y=s.value)==null?void 0:y.name)+" ("+b(o.value.percent)+"% complete) ",1)])):F("",!0)}}},__=we(b_,[["__scopeId","data-v-ee6492bc"]]),w_=["innerHTML"],S_={__name:"AnnouncementBanner",setup(e){const t=ll(),s={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function n(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(l,i)=>{const u=s[i.toLowerCase()];return u?`<span class="ann-circle" style="background:${u.bg};color:${u.fg}"></span>`:l})}return(o,a)=>M(t).announcement.value&&M(t).dismissed.value!==M(t).announcement.value.id?(p(),m("div",{key:0,class:ie(["announcement-banner",M(t).announcement.value.type])},[r("span",{class:"announcement-text",innerHTML:n(M(t).announcement.value.message)},null,8,w_),r("button",{class:"dismiss-btn",onClick:a[0]||(a[0]=l=>M(t).dismiss()),title:"Dismiss"},"")],2)):F("",!0)}},C_=we(S_,[["__scopeId","data-v-4b12409b"]]),$_={key:0,class:"status-content"},k_={key:1,class:"status-content offline"},x_={key:0,class:"badge"},A_={key:2,class:"status-content error"},T_={class:"status-text"},N_={key:0,class:"badge"},E_={key:3,class:"status-content pending"},O_={class:"status-text"},I_={key:4,class:"status-content synced"},P_={__name:"SyncStatus",setup(e){const t=Mu(),s=us(),n=E(()=>s.pendingCount.value),o=E(()=>t.registrationFailed.value?"Not registered":"Sync failed"),a=E(()=>t.isSyncing.value?"syncing":t.isOffline.value?"offline":t.hasError.value?"error":n.value>0?"pending":"synced");function l(){!t.isSyncing.value&&n.value>0&&t.forceSync()}function i(){t.retrySync()}return(u,c)=>(p(),m("div",{class:ie(["sync-status",a.value]),onClick:l},[M(t).isSyncing.value?(p(),m("div",$_,[...c[0]||(c[0]=[r("span",{class:"spinner"},null,-1),r("span",{class:"status-text"},"Syncing...",-1)])])):M(t).isOffline.value?(p(),m("div",k_,[c[1]||(c[1]=r("span",{class:"icon"},"",-1)),c[2]||(c[2]=r("span",{class:"status-text"},"Offline",-1)),n.value>0?(p(),m("span",x_,b(n.value),1)):F("",!0)])):M(t).hasError.value?(p(),m("div",A_,[c[3]||(c[3]=r("span",{class:"icon"},"",-1)),r("span",T_,b(o.value),1),n.value>0?(p(),m("span",N_,b(n.value),1)):F("",!0),r("button",{class:"retry-btn",onClick:tt(i,["stop"])},"Retry")])):n.value>0?(p(),m("div",E_,[c[4]||(c[4]=r("span",{class:"icon"},"",-1)),r("span",O_,b(n.value)+" pending",1)])):(p(),m("div",I_,[...c[5]||(c[5]=[r("span",{class:"icon"},"",-1),r("span",{class:"status-text"},"Synced",-1)])]))],2))}},D_=we(P_,[["__scopeId","data-v-8457149a"]]),Fu=[{path:"basic_bidding/major_suit_openings",name:"Major Suit Openings",category:"Basic Bidding",pbn:"Major.pbn",dealCount:20},{path:"basic_bidding/minor_suit_openings",name:"Minor Suit Openings",category:"Basic Bidding",pbn:"Minor.pbn",dealCount:20},{path:"basic_bidding/notrump_openings",name:"Notrump Openings",category:"Basic Bidding",pbn:"Notrump.pbn",dealCount:25},{path:"bidding_conventions/blackwood",name:"Blackwood",category:"Bidding Conventions",pbn:"Blackwood.pbn",dealCount:20},{path:"bidding_conventions/fourth_suit_forcing",name:"Fourth Suit Forcing",category:"Bidding Conventions",pbn:"FSF.pbn",dealCount:14},{path:"bidding_conventions/help_suit_game_try",name:"Help Suit Game Try",category:"Bidding Conventions",pbn:"Help.pbn",dealCount:10},{path:"bidding_conventions/jacoby_2nt_splinters",name:"Jacoby 2NT & Splinters",category:"Bidding Conventions",pbn:"Jacoby.pbn",dealCount:25},{path:"bidding_conventions/jacoby_transfers",name:"Jacoby Transfers",category:"Bidding Conventions",pbn:"Transfers.pbn",dealCount:25},{path:"bidding_conventions/new_minor_forcing",name:"New Minor Forcing",category:"Bidding Conventions",pbn:"NMF.pbn",dealCount:14},{path:"bidding_conventions/ogust",name:"Ogust",category:"Bidding Conventions",pbn:"Ogust.pbn",dealCount:10},{path:"bidding_conventions/preemptive_bids",name:"Preemptive Bids",category:"Bidding Conventions",pbn:"Preempt.pbn",dealCount:12},{path:"bidding_conventions/reverse_bids",name:"Reverse Bids",category:"Bidding Conventions",pbn:"Reverse.pbn",dealCount:14},{path:"bidding_conventions/reverse_drury",name:"Reverse Drury",category:"Bidding Conventions",pbn:"Drury.pbn",dealCount:8},{path:"bidding_conventions/roman_keycard",name:"Roman Keycard",category:"Bidding Conventions",pbn:"Roman.pbn",dealCount:20},{path:"bidding_conventions/stayman",name:"Stayman",category:"Bidding Conventions",pbn:"Stayman.pbn",dealCount:25},{path:"bidding_conventions/strong_2c",name:"Strong 2",category:"Bidding Conventions",pbn:"2Club.pbn",dealCount:20},{path:"bidding_conventions/two_over_one",name:"2/1 Game Force",category:"Bidding Conventions",pbn:"2over1.pbn",dealCount:28},{path:"bidding_conventions/weak_2s",name:"Weak Twos",category:"Bidding Conventions",pbn:"Weak2.pbn",dealCount:20},{path:"competitive_bidding/dont",name:"DONT",category:"Competitive Bidding",pbn:"DONT.pbn",dealCount:20},{path:"competitive_bidding/lebensohl",name:"Lebensohl",category:"Competitive Bidding",pbn:"Leben.pbn",dealCount:20},{path:"competitive_bidding/michaels_unusual",name:"Michaels & Unusual 2NT",category:"Competitive Bidding",pbn:"Michaels.pbn",dealCount:20},{path:"competitive_bidding/negative_doubles",name:"Negative Doubles",category:"Competitive Bidding",pbn:"Negative.pbn",dealCount:20},{path:"competitive_bidding/overcalls",name:"Overcalls",category:"Competitive Bidding",pbn:"Overcalls.pbn",dealCount:20},{path:"competitive_bidding/support_cuebids",name:"Support Cuebids",category:"Competitive Bidding",pbn:"Cue-bid.pbn",dealCount:10},{path:"competitive_bidding/takeout_doubles",name:"Takeout Doubles",category:"Competitive Bidding",pbn:"Takeout.pbn",dealCount:25},{path:"declarer_play/elimination_plays",name:"Elimination Plays",category:"Declarer Play",pbn:"Eliminations.pbn",dealCount:25},{path:"declarer_play/entry_management",name:"Entry Management",category:"Declarer Play",pbn:"Entries.pbn",dealCount:20},{path:"declarer_play/finessing",name:"Finessing",category:"Declarer Play",pbn:"Finesse.pbn",dealCount:20},{path:"declarer_play/holdup_plays",name:"Holdup Plays",category:"Declarer Play",pbn:"Holdup.pbn",dealCount:15},{path:"declarer_play/squeeze_plays",name:"Squeeze Plays",category:"Declarer Play",pbn:"Squeeze.pbn",dealCount:20},{path:"declarer_play/suit_establishment",name:"Suit Establishment",category:"Declarer Play",pbn:"Establishment.pbn",dealCount:20},{path:"declarer_play/trump_management",name:"Trump Management",category:"Declarer Play",pbn:"Trumpmgmt.pbn",dealCount:20},{path:"defense/defensive_signals",name:"Defensive Signals",category:"Defense",pbn:"Signals.pbn",dealCount:20},{path:"defense/opening_leads",name:"Opening Leads",category:"Defense",pbn:"OLead.pbn",dealCount:20},{path:"defense/second_hand_play",name:"Second Hand Play",category:"Defense",pbn:"SecondHand.pbn",dealCount:20},{path:"defense/third_hand_play",name:"Third Hand Play",category:"Defense",pbn:"ThirdHand.pbn",dealCount:20},{path:"partnership_bidding/advanced_forcing",name:"Advanced Forcing",category:"Partnership Bidding",pbn:"Partnership-AdvancedForcing.pbn",dealCount:24},{path:"partnership_bidding/basic_bidding",name:"Basic Bidding",category:"Partnership Bidding",pbn:"Partnership-BasicBidding.pbn",dealCount:24},{path:"partnership_bidding/basic_major",name:"Basic Major",category:"Partnership Bidding",pbn:"Partnership-BasicMajor.pbn",dealCount:24},{path:"partnership_bidding/basic_notrump",name:"Basic Notrump",category:"Partnership Bidding",pbn:"Partnership-BasicNotrump.pbn",dealCount:24},{path:"partnership_bidding/blackwood",name:"Blackwood",category:"Partnership Bidding",pbn:"Partnership-Blackwood.pbn",dealCount:24},{path:"partnership_bidding/jacoby_2nt",name:"Jacoby 2NT",category:"Partnership Bidding",pbn:"Partnership-Jacoby2NT.pbn",dealCount:24},{path:"partnership_bidding/negative_doubles",name:"Negative Doubles",category:"Partnership Bidding",pbn:"Partnership-NegativeDoubles.pbn",dealCount:24},{path:"partnership_bidding/overcalls",name:"Overcalls",category:"Partnership Bidding",pbn:"Partnership-Overcalls.pbn",dealCount:24},{path:"partnership_bidding/roman_key_card",name:"Roman Key Card",category:"Partnership Bidding",pbn:"Partnership-RomanKeyCard.pbn",dealCount:24},{path:"partnership_bidding/stayman_transfers",name:"Stayman & Transfers",category:"Partnership Bidding",pbn:"Partnership-StaymanTransfers.pbn",dealCount:24},{path:"partnership_bidding/two_club",name:"Two Club",category:"Partnership Bidding",pbn:"Partnership-TwoClub.pbn",dealCount:24},{path:"partnership_bidding/weak_twos",name:"Weak Twos",category:"Partnership Bidding",pbn:"Partnership-WeakTwos.pbn",dealCount:24},{path:"practice_deals/100_miscellaneous",name:"100 Miscellaneous Deals",category:"Practice Deals",pbn:"100Deals.pbn",dealCount:100},{path:"practice_deals/100_notrump",name:"100 Notrump Deals",category:"Practice Deals",pbn:"100NT.pbn",dealCount:100}];function R_(e){return Fu.find(t=>t.path===e)||null}Fu.reduce((e,t)=>e+t.dealCount,0);const qn=36e5;function xi(e){if(!e||e.length===0)return"untried";const t=[...e].sort((f,d)=>f.ts-d.ts);if(!t[t.length-1].correct)return"struggling";const n=t[t.length-1],a=!t.slice(0,-1).reverse().find(f=>!f.correct&&n.ts-f.ts<qn),l=t.slice(-5),i=l.filter(f=>f.correct).length,u=l.length-i;return a&&i/l.length>=.8&&u<=1?"mastered":l.filter(f=>f.correct?!t.filter(v=>v.ts<f.ts).reverse().find(v=>!v.correct&&f.ts-v.ts<qn):!1).length>=1?"progressing":"struggling"}function L_(e,t={},s={}){const n={};return e.forEach(a=>{n[a.skill_path]||(n[a.skill_path]={});const l=a.deal_number;n[a.skill_path][l]||(n[a.skill_path][l]=[]),n[a.skill_path][l].push({correct:a.correct,ts:new Date(a.timestamp),board_result:a.board_result})}),Object.entries(n).map(([a,l])=>{var T,P;const i=Object.keys(l).map(Number).sort((B,L)=>B-L);let u=0,c=0,f=0;i.forEach(B=>{const L=xi(l[B]);L==="mastered"?u++:L==="progressing"?c++:f++});const d=i.length,v=[];i.forEach(B=>{l[B].forEach(L=>v.push({...L,dealNum:B}))}),v.sort((B,L)=>B.ts-L.ts);const h=2*qn,g=i.map(B=>{var xe;const L=l[B].slice().sort((de,pe)=>de.ts-pe.ts),z=xi(L),K=((xe=L[L.length-1])==null?void 0:xe.correct)??!1,ue=L.map((de,pe)=>{if(de.board_result==="corrected")return{ts:de.ts,y:.5,correct:de.correct};if(de.board_result==="failed")return{ts:de.ts,y:0,correct:!1};if(de.correct){const Z=L.slice(0,pe).reverse().find(ee=>(ee.board_result?ee.board_result!=="correct":!ee.correct)&&de.ts-ee.ts<qn);return{ts:de.ts,y:Z?.75:1,correct:!0}}else{const Z=L.slice(pe+1).find(ee=>ee.correct&&ee.ts-de.ts<qn);return{ts:de.ts,y:Z?.5:0,correct:!1}}}),me=5*60*1e3,fe=ue.map(de=>({...de,vts:de.ts.getTime(),rawTs:de.ts.getTime()}));let Se=0;for(;Se<fe.length;){let de=Se;for(;de+1<fe.length&&fe[de+1].vts-fe[de].vts<me;)de++;if(de>Se){const pe=fe[de].vts-fe[Se].vts,Z=Math.max(pe,h),ee=pe>0?Z/pe:1,ve=fe[Se].vts;for(let q=Se;q<=de;q++)fe[q].vts=ve+(fe[q].vts-ve)*ee}Se=de+1}return{dealNum:B,status:z,lastCorrect:K,points:fe}}),y=g.flatMap(B=>B.points.map(L=>L.rawTs)),k=y.length?Math.min(...y):0,_=(y.length?Math.max(...y):1)-k||1;g.forEach(B=>{B.points=B.points.map(L=>({...L,x:(L.rawTs-k)/_}))});const S=(()=>{const B=Object.values(l);if(B.length===0)return 0;const L=B.reduce((K,ue)=>{const me=ue.slice(-5);return K+me.filter(fe=>fe.correct).length},0),z=B.reduce((K,ue)=>K+Math.min(ue.length,5),0);return z>0?Math.round(L/z*100):0})();return{path:a,name:s[a]||a.split("/").pop().replace(/_/g," "),tried:d,mastered:u,progressing:c,struggling:f,totalBoards:t[a]??d,totalAttempts:v.length,recentRate:S,boardLines:g,firstActivity:(T=v[0])==null?void 0:T.ts,lastActivity:(P=v[v.length-1])==null?void 0:P.ts}}).sort((a,l)=>(l.lastActivity||0)-(a.lastActivity||0))}function B_(e){const t=new Set(e.map(o=>o.skill_path).filter(Boolean)),s={},n={};for(const o of t){const a=R_(o);if(a)s[o]=a.dealCount,n[o]=a.name;else{const l=Zc(o);n[o]=l.name}}return{lessonTotals:s,lessonNames:n}}const sn={mastered:"#10b981",progressing:"#3b82f6",struggling:"#f59e0b",untried:"#d1d5db"};function ju(e){return e>=.9?"#10b981":e>=.6||e>=.4?"#f59e0b":"#f43f5e"}const M_={key:0,class:"sparkline-empty"},U_=["width","height"],F_=["x1","y1","x2","y2","stroke","stroke-width","stroke-dasharray"],j_=["d","stroke"],H_=["cx","cy","r","fill"],W_=5,K_=2.5,V_={__name:"StudentProgressSparkline",props:{boardLines:{type:Array,required:!0},width:{type:Number,default:280},height:{type:Number,default:70}},setup(e){const t=e,s=[1,.5,0],n={l:4,r:4,t:8,b:8},o=E(()=>t.width-n.l-n.r),a=E(()=>t.height-n.t-n.b),l=E(()=>{const d=t.boardLines.flatMap(g=>g.points.map(y=>y.x)),v=Math.min(...d),h=Math.max(...d);return{min:v,max:h,span:h-v||1}});function i(d){return n.t+(1-d)*a.value}function u(d,v){const h=v>=.9?1:v>0?.5:0;return{px:n.l+(d-l.value.min)/l.value.span*o.value,py:n.t+(1-h)*a.value,yMapped:h}}const c=E(()=>t.boardLines.map(d=>{const v=sn[d.status]||"#6b7280",h=d.points.filter(y=>y.y!==.75).map(y=>u(y.x,y.y)),g=h.length>=2?h.map((y,k)=>`${k===0?"M":"L"}${y.px.toFixed(1)},${y.py.toFixed(1)}`).join(" "):"";return{color:v,pts:h,pathD:g}})),f=E(()=>{const d=t.boardLines.flatMap(g=>g.points.filter(y=>y.y!==.75).map(y=>({...u(y.x,y.y),y:y.y}))),v=new Array(d.length).fill(!1),h=[];return d.forEach((g,y)=>{if(v[y])return;const k=[g];v[y]=!0,d.forEach((T,P)=>{if(v[P])return;const B=T.px-g.px,L=T.py-g.py;Math.sqrt(B*B+L*L)<W_&&(k.push(T),v[P]=!0)});const $=k.reduce((T,P)=>T+P.px,0)/k.length,_=k.reduce((T,P)=>T+P.py,0)/k.length,S=k.sort((T,P)=>P.yMapped-T.yMapped)[0].yMapped;h.push({px:$,py:_,y:S,n:k.length})}),h});return(d,v)=>!e.boardLines||e.boardLines.length===0?(p(),m("div",M_," No data ")):(p(),m("svg",{key:1,width:e.width,height:e.height,style:{overflow:"visible"}},[(p(),m(Q,null,le(s,h=>r("line",{key:h,x1:n.l,y1:i(h),x2:n.l+o.value,y2:i(h),stroke:h===.5?"#d1d5db":"#e5e7eb","stroke-width":h===.5?1:.5,"stroke-dasharray":h===.5?"3,3":"none"},null,8,F_)),64)),(p(!0),m(Q,null,le(c.value,(h,g)=>We((p(),m("path",{key:"line-"+g,d:h.pathD,fill:"none",stroke:h.color,"stroke-width":"1","stroke-linejoin":"round","stroke-linecap":"round",opacity:"0.35"},null,8,j_)),[[rp,h.pts.length>=2]])),128)),(p(!0),m(Q,null,le(f.value,(h,g)=>(p(),m("circle",{key:"bubble-"+g,cx:h.px,cy:h.py,r:K_*Math.sqrt(h.n),fill:M(ju)(h.y),stroke:"#fff","stroke-width":"0.8",opacity:"0.85"},null,8,H_))),128))],8,U_))}},G_=we(V_,[["__scopeId","data-v-a14e2bb7"]]),z_={class:"details-header"},J_={class:"details-title"},Y_={class:"details-subtitle"},q_=["viewBox","height"],X_=["x","y","fill"],Q_=["y","width","height","fill","fill-opacity"],Z_=["x","y","fill"],e1=["x1","y1","x2","y2","stroke-dasharray"],t1=["x","y"],s1=["cx","cy","fill","onClick"],n1={key:0,class:"details-activity"},o1={class:"stats-row"},a1={class:"stat-value"},r1={class:"stat-label"},l1=["viewBox"],i1=["x","y","width","height"],c1={class:"activity-dates"},u1={class:"details-legend"},Ma=7,Ai=.3,Ua=110,Os=560,Qt=28,Fa=40,Ti=36e5,Ct=864e5,d1={__name:"StudentProgressDetails",props:{lesson:{type:Object,required:!0},rawData:{type:Array,required:!0}},emits:["close","dot-click"],setup(e,{emit:t}){const s=e,n=t,o={t:16,r:20,b:40,l:Ua},a=E(()=>{const S=new Set(s.lesson.boardLines.map(P=>P.dealNum)),T=s.lesson.totalBoards??Math.max(...S);return Array.from({length:T},(P,B)=>B+1)}),l=E(()=>a.value.length*Qt),i=E(()=>Os+o.l+o.r),u=E(()=>l.value+o.t+o.b),c=E(()=>new Set(s.lesson.boardLines.map(S=>S.dealNum)));function f(S){return c.value.has(S)}function d(S){const T=s.lesson.boardLines.find(P=>P.dealNum===S);return T?sn[T.status]||"#6b7280":"#d1d5db"}const v=E(()=>{const S=s.rawData.filter(ee=>ee.skill_path===s.lesson.path),T=a.value,P=S.map(ee=>{const ve=new Date(ee.timestamp).getTime(),q=ee.deal_number,A=T.indexOf(q);return{rawTs:ve,dealNum:q,boardIdx:A,correct:ee.correct,board_result:ee.board_result,y:ee.correct?1:0}}),B={};P.forEach(ee=>{B[ee.dealNum]||(B[ee.dealNum]=[]),B[ee.dealNum].push(ee)});for(const ee of Object.values(B))ee.sort((ve,q)=>ve.rawTs-q.rawTs),ee.forEach((ve,q)=>{if(ve.board_result==="corrected"){ve.y=.5;return}if(ve.board_result==="failed"){ve.y=0;return}if(ve.correct){const A=ee.slice(0,q).reverse().find(w=>(w.board_result?w.board_result!=="correct":!w.correct)&&ve.rawTs-w.rawTs<Ti);ve.y=A?.75:1}else{const A=ee.slice(q+1).find(w=>w.correct&&w.rawTs-ve.rawTs<Ti);ve.y=A?.5:0}});if(P.length===0)return[];const L=P.map(ee=>ee.rawTs),z=Math.min(...L),K=Math.max(...L),ue=Math.floor(z/Ct)*Ct,fe=(Math.floor(K/Ct)+1)*Ct-1-ue||1,Se=ee=>o.l+(ee.rawTs-ue)/fe*Os,xe=ee=>o.t+ee*Qt+Qt/2,de=Ma*2*(1-Ai),pe=Ma*2*(1-Ai),Z=P.map(ee=>({...ee,px:Se(ee),py:xe(ee.boardIdx)}));return T.forEach(ee=>{const ve=Z.filter(A=>A.dealNum===ee),q={};ve.forEach(A=>{const w=A.rawTs;q[w]||(q[w]=[]),q[w].push(A)}),Object.values(q).forEach(A=>{if(A.length<2)return;const w=A[0].py;A.forEach((X,be)=>{X.py=w+(be-(A.length-1)/2)*pe})})}),T.forEach(ee=>{const ve=Z.filter(w=>w.dealNum===ee).sort((w,X)=>w.px-X.px),q=[];let A=0;for(;A<ve.length;){let w=A;for(;w+1<ve.length&&ve[w+1].px-ve[A].px<de;)w++;q.push({start:A,end:w}),A=w+1}q.forEach((w,X)=>{const be=w.end-w.start+1;if(be===1)return;const Ae=(be-1)*de;let $e;X===0?$e=ve[w.start].px:X===q.length-1?$e=ve[w.end].px-Ae:$e=(ve[w.start].px+ve[w.end].px)/2-Ae/2;for(let W=0;W<be;W++)ve[w.start+W].px=$e+W*de})}),Z}),h=E(()=>[...v.value].sort((S,T)=>S.y-T.y)),g=E(()=>{const S=v.value;if(S.length===0)return[];const T=S.map(me=>me.rawTs),P=Math.min(...T),B=Math.max(...T),L=Math.floor(P/Ct)*Ct,K=(Math.floor(B/Ct)+1)*Ct-1-L||1,ue=5;return Array.from({length:ue},(me,fe)=>{const Se=fe/(ue-1),xe=new Date(L+Se*K);return{x:o.l+Se*Os,label:xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+xe.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})}),y=E(()=>{const S=v.value;if(S.length===0)return null;const T={};S.forEach(fe=>{const Se=Math.floor(fe.rawTs/Ct);T[Se]=(T[Se]||0)+1});const P=Object.keys(T).map(Number).sort();if(P.length===0)return null;const B=P[0],L=P[P.length-1],z=L-B+1,K=Math.max(...Object.values(T)),ue=Math.max(2,Os/z-1);return{bars:P.map(fe=>({dayKey:fe,x:(fe-B)/z*Os,h:T[fe]/K*Fa,w:ue,count:T[fe],dateLabel:new Date(fe*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"})})),barW:Os,firstLabel:new Date(B*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(L*Ct).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),k=E(()=>{const S=v.value,T={};return S.forEach(P=>{const B=Math.floor(P.rawTs/Ct);T[B]=!0}),[{label:"Days active",value:Object.keys(T).length},{label:"Boards tried",value:s.lesson.tried},{label:"Observations",value:S.length}]}),$=[{color:"#10b981",label:"Clean correct"},{color:"#3b82f6",label:"Recent correct (after fail within 1 hr)"},{color:"#f59e0b",label:"Corrected (errors fixed within board)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function _(S){return new Date(S).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}return(S,T)=>(p(),m("div",{class:"details-overlay",onClick:T[2]||(T[2]=tt(P=>S.$emit("close"),["self"]))},[r("div",{class:"details-panel",onClick:T[1]||(T[1]=tt(()=>{},["stop"]))},[r("div",z_,[r("div",null,[r("h2",J_,b(e.lesson.name),1),r("p",Y_,b(e.lesson.tried)+" boards  "+b(e.lesson.totalAttempts)+" attempts ",1)]),r("button",{class:"details-close-btn",onClick:T[0]||(T[0]=P=>S.$emit("close"))}," close")]),(p(),m("svg",{viewBox:`0 0 ${i.value} ${u.value}`,width:"100%",height:u.value,class:"details-chart"},[(p(!0),m(Q,null,le(a.value,(P,B)=>(p(),m("rect",{key:"bg-"+P,x:o.l,y:o.t+B*Qt,width:Os,height:Qt,fill:B%2===0?"#ffffff":"#f9fafb"},null,8,X_))),128)),(p(!0),m(Q,null,le(a.value,(P,B)=>(p(),m("g",{key:"label-"+P},[r("rect",{x:2,y:o.t+B*Qt+3,width:Ua-14,height:Qt-6,rx:"3",fill:d(P),"fill-opacity":f(P)?.12:.05},null,8,Q_),r("text",{x:Ua-16,y:o.t+B*Qt+Qt/2+4,"text-anchor":"end","font-size":"13",fill:d(P),"font-family":"monospace"}," Board "+b(P)+b(f(P)?"":" "),9,Z_)]))),128)),(p(!0),m(Q,null,le(g.value,(P,B)=>(p(),m("line",{key:"grid-"+B,x1:P.x,y1:o.t,x2:P.x,y2:o.t+l.value,stroke:"#e5e7eb","stroke-width":"1","stroke-dasharray":B===0||B===g.value.length-1?"none":"3,4"},null,8,e1))),128)),(p(!0),m(Q,null,le(g.value,(P,B)=>(p(),m("text",{key:"tick-"+B,x:P.x,y:o.t+l.value+14,"text-anchor":"middle","font-size":"9",fill:"#6b7280","font-family":"monospace"},b(P.label),9,t1))),128)),(p(!0),m(Q,null,le(h.value,(P,B)=>(p(),m("circle",{key:"dot-"+B,cx:P.px,cy:P.py,r:Ma,fill:M(ju)(P.y),stroke:"#fff","stroke-width":"1.5",opacity:"0.92",class:"obs-dot",onClick:tt(L=>n("dot-click",{rawTs:P.rawTs,dealNum:P.dealNum,correct:P.correct,event:L}),["stop"])},[r("title",null,"Board "+b(P.dealNum)+"  "+b(P.correct?"Correct":"Incorrect")+"  "+b(_(P.rawTs)),1)],8,s1))),128))],8,q_)),y.value?(p(),m("div",n1,[r("div",o1,[(p(!0),m(Q,null,le(k.value,P=>(p(),m("div",{class:"stat-item",key:P.label},[r("div",a1,b(P.value),1),r("div",r1,b(P.label),1)]))),128))]),(p(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.barW} ${Fa}`,class:"activity-chart"},[(p(!0),m(Q,null,le(y.value.bars,P=>(p(),m("rect",{key:P.dayKey,x:P.x,y:Fa-P.h,width:P.w,height:P.h,fill:"#3b82f6",opacity:"0.7",rx:"1"},[r("title",null,b(P.dateLabel)+": "+b(P.count)+" observations",1)],8,i1))),128))],8,l1)),r("div",c1,[r("span",null,b(y.value.firstLabel),1),r("span",null,b(y.value.lastLabel),1)])])):F("",!0),r("div",u1,[(p(),m(Q,null,le($,P=>r("span",{key:P.label,class:"legend-item"},[r("span",{class:"legend-dot",style:et({backgroundColor:P.color})},null,4),Ne(" "+b(P.label),1)])),64))])])]))}},f1=we(d1,[["__scopeId","data-v-2176fcbb"]]),p1={class:"obs-header"},v1={class:"obs-header-left"},m1={class:"obs-id"},h1={class:"obs-header-right"},g1={class:"timestamp"},y1={class:"obs-body"},b1={class:"obs-col"},_1={class:"card"},w1={class:"hands-grid"},S1={class:"deal-meta-top"},C1={class:"meta-row"},$1={class:"meta-value"},k1={class:"meta-row"},x1={class:"meta-value"},A1={class:"meta-row"},T1={class:"meta-value"},N1={class:"meta-row"},E1={class:"meta-value"},O1={class:"compass-north"},I1={class:"seat-label"},P1={key:0,class:"you-tag"},D1={class:"cards"},R1={key:1,class:"hidden-hand"},L1={class:"seat-label"},B1={key:0,class:"you-tag"},M1={class:"cards"},U1={key:1,class:"hidden-hand"},F1={class:"seat-label"},j1={key:0,class:"you-tag"},H1={class:"cards"},W1={key:1,class:"hidden-hand"},K1={class:"deal-meta-bottom"},V1={class:"meta-row"},G1={class:"meta-contract"},z1={class:"compass-south"},J1={class:"seat-label"},Y1={key:0,class:"you-tag"},q1={class:"cards"},X1={key:1,class:"hidden-hand"},Q1={class:"obs-col"},Z1={class:"card"},e0={class:"auction-header"},t0={key:0,class:"split-cell"},s0={class:"pill-expected"},n0={key:1,class:"split-cell"},o0={class:"pill-expected"},a0={key:0,class:"pill-student"},r0={key:2,class:"auction-bid"},l0={key:0,class:"prompts-list"},i0={class:"prompt-num"},c0={key:0,class:"prompt-detail"},u0={class:"pill-expected-sm"},d0={class:"pill-student-sm"},f0={key:1,class:"prompt-ok"},p0={key:1,class:"prompt-detail"},v0={class:"pill-expected-sm"},m0={class:"pill-student-sm"},h0={key:1,class:"prompt-ok"},g0={key:2,class:"prompt-time"},y0={key:1,class:"prompt-meta"},b0={class:"prompt-meta-auction"},_0={key:2,class:"auction-legend"},w0={key:0,class:"legend-item"},S0={key:3,class:"auction-legend"},C0={key:0,class:"legend-item"},$0={class:"card"},k0={class:"info-grid"},x0={class:"info-item"},A0={class:"info-value"},T0={class:"info-item"},N0={class:"info-value"},E0={class:"info-item full-width"},O0={class:"info-item"},I0={class:"info-value"},P0={class:"info-item"},D0={class:"info-value"},R0={class:"info-item full-width"},L0={class:"info-value mono"},B0={__name:"ObservationViewer",props:{obs:{type:Object,required:!0},initialX:{type:Number,default:100},initialY:{type:Number,default:100},zIndex:{type:Number,default:3e3}},emits:["close","focus"],setup(e,{emit:t}){const s=e,n=t,o=O(s.initialX),a=O(s.initialY),l=O(window.innerWidth<=680);let i=!1,u=0,c=0;function f(A){return A.touches&&A.touches.length>0?{x:A.touches[0].clientX,y:A.touches[0].clientY}:{x:A.clientX,y:A.clientY}}function d(A){if(l.value){A.stopPropagation();return}i=!0;const{x:w,y:X}=f(A);u=w-o.value,c=X-a.value,document.addEventListener("mousemove",v),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("touchend",h),n("focus")}function v(A){if(!i)return;A.preventDefault();const{x:w,y:X}=f(A);o.value=w-u,a.value=X-c}function h(){i=!1,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)}Mr(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)});const g=E(()=>s.obs.deal||{}),y=E(()=>s.obs.bid_prompt||{}),k=E(()=>s.obs.result||{}),$=E(()=>k.value.correct),_=E(()=>g.value.hands||{}),S=E(()=>g.value.student_seat),T=E(()=>y.value.prompt_index===-1||y.value.expected_bid==="BOARD"),P=E(()=>s.obs.prompts||[]),B=E(()=>P.value.length>0),L=E(()=>B.value&&K.value.corrected>0||s.obs.board_result==="corrected"),z=E(()=>{if(!B.value)return{};const A=de.indexOf(g.value.dealer),w={};for(const be of P.value){if(be.type!=="bid"||!be.auction_so_far)continue;const Ae=A+be.auction_so_far.length;w[Ae]||(w[Ae]=[]),w[Ae].push(be)}const X={};for(const[be,Ae]of Object.entries(w)){const $e=Ae.find(ne=>!ne.correct);if(!$e)continue;const W=Ae.some(ne=>ne.correct);X[be]={expected:$e.expected_bid,student:$e.student_bid,correct:!1,corrected:W}}return X}),K=E(()=>{const A=P.value,w=new Map;for(const W of A){const ne=W.type==="bid"?`bid-${W.prompt_index}`:`card-${A.indexOf(W)}`;w.has(ne)||w.set(ne,[]),w.get(ne).push(W)}let X=w.size,be=0,Ae=0;for(const W of w.values()){const ne=W.some(ce=>!ce.correct),ae=W.some(ce=>ce.correct);ne&&(be++,ae&&Ae++)}const $e=A.reduce((W,ne)=>W+(ne.time_ms||0),0);return{total:X,wrong:be,corrected:Ae,totalTime:$e}}),ue=E(()=>y.value.expected_bid),me=E(()=>k.value.student_bid),fe=E(()=>y.value.auction_so_far||[]),Se=E(()=>((s.obs.observation_id||s.obs.id||"")+"").slice(0,8)+""),xe=E(()=>s.obs.timestamp?new Date(s.obs.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""),de=["W","N","E","S"],pe=E(()=>{const A=g.value.full_auction,w=(typeof A=="string"?A:Array.isArray(A)?A.join(" "):"").split(" ").filter(Boolean),X=[];for(const Ae of w){const $e=Ae.toUpperCase();$e==="AP"||$e==="ALL"?X.push("Pass","Pass","Pass"):X.push(Ae)}const be=de.indexOf(g.value.dealer);return[...Array(Math.max(0,be)).fill(null),...X]}),Z=E(()=>de.indexOf(g.value.dealer)+fe.value.length),ee=E(()=>{const A=[];for(let w=0;w<pe.value.length;w+=4)A.push(pe.value.slice(w,w+4));return A});function ve(A){return!A||A<=0?"":A<1e3?A+"ms":(A/1e3).toFixed(1)+"s"}function q(A){if(!A)return null;if(typeof A=="object"&&A.spades!==void 0)return[{suit:"",cards:(A.spades||[]).join(""),color:"black"},{suit:"",cards:(A.hearts||[]).join(""),color:"red"},{suit:"",cards:(A.diamonds||[]).join(""),color:"red"},{suit:"",cards:(A.clubs||[]).join(""),color:"black"}];if(typeof A!="string")return null;const w=A.split(".");if(w.length<4)return null;const[X,be,Ae,$e]=w;return[{suit:"",cards:X,color:"black"},{suit:"",cards:be,color:"red"},{suit:"",cards:Ae,color:"red"},{suit:"",cards:$e,color:"black"}]}return(A,w)=>(p(),m("div",{class:ie(["obs-viewer",{"obs-viewer--mobile":l.value}]),style:et(l.value?{zIndex:e.zIndex}:{left:o.value+"px",top:a.value+"px",zIndex:e.zIndex}),onMousedown:tt(d,["prevent"]),onTouchstart:tt(d,["prevent"])},[r("div",p1,[r("div",v1,[w[3]||(w[3]=r("span",{class:"suit-icon"},"",-1)),w[4]||(w[4]=r("span",{class:"obs-title"},"Observation Detail",-1)),r("span",m1,b(Se.value),1)]),r("div",h1,[r("span",g1,b(xe.value),1),r("span",{class:ie(["result-badge",L.value?"corrected":$.value?"correct":"incorrect"])},b(L.value?" Corrected":$.value?" Correct":" Incorrect"),3),r("button",{class:"close-btn",onClick:w[0]||(w[0]=tt(X=>A.$emit("close"),["stop"])),onTouchstart:w[1]||(w[1]=tt(()=>{},["stop"])),onTouchend:w[2]||(w[2]=tt(X=>A.$emit("close"),["stop","prevent"])),title:"Close"},"",32)])]),r("div",y1,[r("div",b1,[r("div",_1,[w[17]||(w[17]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ne(" Hands")],-1)),r("div",w1,[r("div",S1,[r("div",C1,[w[5]||(w[5]=r("span",{class:"meta-label"},"Lesson",-1)),r("span",$1,b(g.value.subfolder),1)]),r("div",k1,[w[6]||(w[6]=r("span",{class:"meta-label"},"Deal",-1)),r("span",x1,"#"+b(g.value.deal_number),1)]),r("div",A1,[w[7]||(w[7]=r("span",{class:"meta-label"},"Dealer",-1)),r("span",T1,b(g.value.dealer),1)]),r("div",N1,[w[8]||(w[8]=r("span",{class:"meta-label"},"Vul",-1)),r("span",E1,b(g.value.vulnerability),1)])]),r("div",O1,[r("div",{class:ie(["hand-cell",{student:S.value==="N"}])},[r("div",I1,[w[9]||(w[9]=Ne("N ",-1)),S.value==="N"?(p(),m("span",P1,"YOU")):F("",!0)]),q(_.value.north)?(p(!0),m(Q,{key:0},le(q(_.value.north),X=>(p(),m("div",{key:X.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",X.color])},b(X.suit),3),r("span",D1,b(X.cards||""),1)]))),128)):(p(),m("span",R1,"Hidden"))],2)]),w[14]||(w[14]=r("div",null,null,-1)),r("div",{class:ie(["hand-cell",{student:S.value==="W"}])},[r("div",L1,[w[10]||(w[10]=Ne("W ",-1)),S.value==="W"?(p(),m("span",B1,"YOU")):F("",!0)]),q(_.value.west)?(p(!0),m(Q,{key:0},le(q(_.value.west),X=>(p(),m("div",{key:X.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",X.color])},b(X.suit),3),r("span",M1,b(X.cards||""),1)]))),128)):(p(),m("span",U1,"Hidden"))],2),w[15]||(w[15]=no('<div class="compass-center" data-v-274941c4><div class="compass-rose" data-v-274941c4><span class="cr-n" data-v-274941c4>N</span><span class="cr-w" data-v-274941c4>W</span><span class="cr-e" data-v-274941c4>E</span><span class="cr-s" data-v-274941c4>S</span></div></div>',1)),r("div",{class:ie(["hand-cell",{student:S.value==="E"}])},[r("div",F1,[w[11]||(w[11]=Ne("E ",-1)),S.value==="E"?(p(),m("span",j1,"YOU")):F("",!0)]),q(_.value.east)?(p(!0),m(Q,{key:0},le(q(_.value.east),X=>(p(),m("div",{key:X.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",X.color])},b(X.suit),3),r("span",H1,b(X.cards||""),1)]))),128)):(p(),m("span",W1,"Hidden"))],2),r("div",K1,[r("div",V1,[w[12]||(w[12]=r("span",{class:"meta-label"},"Contract",-1)),r("span",G1,b(g.value.contract)+" by "+b(g.value.declarer),1)])]),r("div",z1,[r("div",{class:ie(["hand-cell",{student:S.value==="S"}])},[r("div",J1,[w[13]||(w[13]=Ne("S ",-1)),S.value==="S"?(p(),m("span",Y1,"YOU")):F("",!0)]),q(_.value.south)?(p(!0),m(Q,{key:0},le(q(_.value.south),X=>(p(),m("div",{key:X.suit,class:"holding-row"},[r("span",{class:ie(["suit-pip",X.color])},b(X.suit),3),r("span",q1,b(X.cards||""),1)]))),128)):(p(),m("span",X1,"Hidden"))],2)]),w[16]||(w[16]=r("div",null,null,-1))])])]),r("div",Q1,[r("div",Z1,[w[29]||(w[29]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ne(" Auction")],-1)),r("div",e0,[(p(),m(Q,null,le(["W","N","E","S"],X=>r("span",{key:X,class:"auction-dir"},b(X),1)),64))]),(p(!0),m(Q,null,le(ee.value,(X,be)=>(p(),m("div",{key:be,class:"auction-row"},[(p(!0),m(Q,null,le(X,(Ae,$e)=>(p(),m(Q,{key:$e},[B.value&&z.value[be*4+$e]?(p(),m("div",t0,[r("span",s0,b(z.value[be*4+$e].expected),1),r("span",{class:ie(z.value[be*4+$e].corrected?"pill-corrected":"pill-student")},b(z.value[be*4+$e].student),3)])):!T.value&&!B.value&&be*4+$e===Z.value?(p(),m("div",n0,[r("span",o0,b(ue.value),1),$.value?F("",!0):(p(),m("span",a0,b(me.value),1))])):(p(),m("span",r0,b(Ae||""),1))],64))),128))]))),128)),B.value?(p(),m("div",l0,[(p(!0),m(Q,null,le(P.value,(X,be)=>(p(),m("div",{key:be,class:ie(["prompt-row",X.correct?"prompt-correct":"prompt-wrong"])},[r("span",i0,"#"+b(be+1),1),X.type==="bid"?(p(),m("span",c0,[w[19]||(w[19]=Ne(" Expected ",-1)),r("span",u0,b(X.expected_bid),1),X.correct?(p(),m("span",f0,"")):(p(),m(Q,{key:0},[w[18]||(w[18]=Ne(" got ",-1)),r("span",d0,b(X.student_bid),1)],64))])):X.type==="card"?(p(),m("span",p0,[w[21]||(w[21]=Ne(" Expected ",-1)),r("span",v0,b(X.expected_card),1),X.correct?(p(),m("span",h0,"")):(p(),m(Q,{key:0},[w[20]||(w[20]=Ne(" got ",-1)),r("span",m0,b(X.student_card),1)],64))])):F("",!0),X.time_ms>0?(p(),m("span",g0,b(ve(X.time_ms)),1)):F("",!0)],2))),128))])):T.value?(p(),m("div",y0,[w[22]||(w[22]=r("span",{class:"prompt-meta-label"},"Board summary",-1)),w[23]||(w[23]=r("span",{class:"prompt-meta-sep"},"",-1)),r("span",b0,b($.value?"All prompts answered correctly":"Student made errors on this board"),1)])):F("",!0),!T.value&&!B.value?(p(),m("div",_0,[w[25]||(w[25]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Ne(" Expected")],-1)),$.value?F("",!0):(p(),m("span",w0,[...w[24]||(w[24]=[r("span",{class:"legend-dot red"},null,-1),Ne(" Student bid",-1)])])),w[26]||(w[26]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot gray"}),Ne(" After this point")],-1))])):B.value?(p(),m("div",S0,[w[28]||(w[28]=r("span",{class:"legend-item"},[r("span",{class:"legend-dot green"}),Ne(" Expected")],-1)),P.value.some(X=>!X.correct)?(p(),m("span",C0,[...w[27]||(w[27]=[r("span",{class:"legend-dot red"},null,-1),Ne(" Student response",-1)])])):F("",!0)])):F("",!0)]),r("div",$0,[w[36]||(w[36]=r("div",{class:"card-title"},[r("span",{class:"suit-icon-sm"},""),Ne(" Result & Meta")],-1)),r("div",k0,[B.value?(p(),m(Q,{key:0},[r("div",x0,[w[30]||(w[30]=r("span",{class:"info-label"},"Prompts",-1)),r("span",A0,b(K.value.total),1)]),r("div",T0,[w[31]||(w[31]=r("span",{class:"info-label"},"Total Time",-1)),r("span",N0,b(K.value.totalTime>0?ve(K.value.totalTime):"n/a"),1)]),r("div",E0,[w[32]||(w[32]=r("span",{class:"info-label"},"Result",-1)),r("span",{class:"info-value",style:et({color:K.value.wrong===0?"var(--green)":"var(--red)"})},b(K.value.wrong===0?"All correct":`${K.value.wrong} error${K.value.wrong>1?"s":""}`)+b(K.value.corrected>0?`, ${K.value.corrected} fixed`:""),5)])],64)):(p(),m(Q,{key:1},[r("div",O0,[w[33]||(w[33]=r("span",{class:"info-label"},"Attempt #",-1)),r("span",I0,b(k.value.attempt_number),1)]),r("div",P0,[w[34]||(w[34]=r("span",{class:"info-label"},"Time Taken",-1)),r("span",D0,b(k.value.time_taken_ms===0?"n/a":k.value.time_taken_ms+" ms"),1)])],64)),r("div",R0,[w[35]||(w[35]=r("span",{class:"info-label"},"Skill Path",-1)),r("span",L0,b(e.obs.skill_path),1)])])])])])],38))}},M0=we(B0,[["__scopeId","data-v-274941c4"]]),U0=30,F0={__name:"ObservationPopupManager",setup(e,{expose:t}){const s=O([]);let n=0,o=3e3;function a(c,f){const d=s.value.length*U0,v=f?Math.min(f.clientX+20+d,window.innerWidth-700):60+d,h=f?Math.min(f.clientY-40+d,window.innerHeight-400):60+d;o++,s.value.push({id:n++,obs:c,x:Math.max(10,v),y:Math.max(10,h),zIndex:o})}function l(c){s.value=s.value.filter(f=>f.id!==c)}function i(c){o++;const f=s.value.find(d=>d.id===c);f&&(f.zIndex=o)}function u(){s.value=[]}return t({openObservation:a,closeAll:u}),(c,f)=>(p(),He(qd,{to:"body"},[(p(!0),m(Q,null,le(s.value,d=>(p(),He(M0,{key:d.id,obs:d.obs,"initial-x":d.x,"initial-y":d.y,"z-index":d.zIndex,onClose:v=>l(d.id),onFocus:v=>i(d.id)},null,8,["obs","initial-x","initial-y","z-index","onClose","onFocus"]))),128))]))}},j0={class:"student-progress-panel"},H0={key:0,class:"sp-empty"},W0={class:"sp-header"},K0={class:"sp-header-row"},V0={key:0,class:"sp-name-badge"},G0={class:"sp-meta"},z0={key:0,class:"sp-activity-chart"},J0={class:"sp-activity-header"},Y0={class:"sp-activity-meta"},q0={class:"sp-activity-body"},X0={class:"sp-activity-svg-wrap"},Q0=["viewBox"],Z0=["x"],ew=["x","y"],tw=["x1","x2","y2"],sw=["x","y","width","height","fill"],nw=["x","y"],ow=["x","y"],aw={class:"sp-activity-legend"},rw={class:"sp-legend"},lw={class:"sp-grid"},iw=["onClick"],cw={class:"sp-card-header"},uw={class:"sp-card-info"},dw={class:"sp-card-name"},fw={class:"sp-card-meta"},pw={class:"sp-card-rate"},vw={class:"sp-card-sparkline"},mw={class:"sp-mastery"},hw={class:"sp-mastery-track"},gw=["title"],yw={class:"sp-mastery-legend"},bw={__name:"StudentProgressPanel",props:{observations:{type:Array,required:!0},studentName:{type:String,default:""},studentId:{type:String,default:""}},setup(e){const t=e,s=O(null),n=O(null),o=wn(),a=E(()=>{if(!t.observations||t.observations.length===0)return[];const{lessonTotals:k,lessonNames:$}=B_(t.observations);return L_(t.observations,k,$)}),l=E(()=>a.value.reduce((k,$)=>k+$.tried,0)),i=E(()=>a.value.reduce((k,$)=>k+$.totalAttempts,0)),u=[{color:"#10b981",label:"Clean correct"},{color:"#f59e0b",label:"Corrected (errors fixed)"},{color:"#f43f5e",label:"Fail (uncorrected)"}];function c(k){return`hsl(${Math.round(k*360/a.value.length)}, 65%, 55%)`}function f(k){return k>=75?"#10b981":k>=50?"#f59e0b":"#f43f5e"}function d(k){return k?k.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""}function v(k){if(!k.firstActivity||!k.lastActivity)return null;const $=k.lastActivity-k.firstActivity,_=$/6e4,S=$/36e5,T=$/864e5;return _<90?`${Math.round(_)} min`:S<48?`${Math.round(S)} hr`:T<14?`${Math.round(T)} days`:`${Math.round(T/7)} wks`}async function h({rawTs:k,dealNum:$,correct:_,event:S}){if(n.value)if(t.studentId){const T=await o.findAndDecryptObservation(t.studentId,k,$,_);T?n.value.openObservation(T,S):console.warn("Observation decryption failed  teacher private key may be missing")}else{const T=t.observations.find(P=>{const B=new Date(P.timestamp).getTime();return Math.abs(B-k)<1e3&&P.deal_number===$&&P.correct===_});T&&n.value.openObservation(T,S)}}function g(k){const $=Math.max(0,(k.totalBoards||0)-k.tried),_=[{count:k.mastered,color:sn.mastered,label:"Mastered"},{count:k.progressing,color:sn.progressing,label:"Progressing"},{count:k.struggling,color:sn.struggling,label:"Struggling"},{count:$,color:sn.untried,label:"Untried"}].filter(T=>T.count>0),S=_.reduce((T,P)=>T+P.count,0);return _.forEach(T=>{T.pct=`${(T.count/S*100).toFixed(1)}%`}),_}const y=E(()=>{if(a.value.length===0)return null;const k=864e5,$=28,_=700,S=120,T=new Set,P=a.value.map(xe=>{const de={};return xe.boardLines.forEach(pe=>{pe.points.forEach(Z=>{const ee=Math.floor((Z.rawTs??0)/k);ee>0&&(de[ee]=(de[ee]||0)+1,T.add(ee))})}),de});if(T.size===0)return null;const B=[...T].sort(),L=B[0],z=B[B.length-1],K=z-L+1,ue=B.map(xe=>P.reduce((de,pe)=>de+(pe[xe]||0),0)),me=Math.max(...ue),fe=Math.max(1,_/K*.75);return{days:B.map(xe=>{const de=$+(xe-L)/K*_;let pe=S;const Z=[];return a.value.forEach((ee,ve)=>{const q=P[ve][xe]||0;if(!q)return;const A=q/me*S;pe-=A,Z.push({y:pe,h:A,count:q,color:c(ve),name:ee.name})}),{dayKey:xe,x:de,segments:Z,dateLabel:new Date(xe*k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}),maxCount:me,barW:fe,barH:S,chartW:_,svgW:$+_,yAxisW:$,firstLabel:new Date(L*k).toLocaleDateString("en-US",{month:"short",day:"numeric"}),lastLabel:new Date(z*k).toLocaleDateString("en-US",{month:"short",day:"numeric"})}});return(k,$)=>(p(),m("div",j0,[a.value.length===0?(p(),m("div",H0,[...$[1]||($[1]=[r("p",null,"No practice data to display yet.",-1)])])):(p(),m(Q,{key:1},[r("div",W0,[r("div",K0,[e.studentName?(p(),m("span",V0,b(e.studentName),1)):F("",!0),r("span",G0,b(a.value.length)+" lesson"+b(a.value.length!==1?"s":"")+"  Click any panel to drill down",1)])]),y.value?(p(),m("div",z0,[r("div",J0,[$[2]||($[2]=Ne(" Daily practice activity ",-1)),r("span",Y0,b(l.value)+" boards  "+b(i.value)+" observations ",1)]),r("div",q0,[r("div",X0,[(p(),m("svg",{width:"100%",viewBox:`0 0 ${y.value.svgW} ${y.value.barH+26}`,style:et({display:"block",height:y.value.barH+26+"px"})},[r("text",{x:y.value.yAxisW-3,y:"12","text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.maxCount),9,Z0),r("text",{x:y.value.yAxisW-3,y:y.value.barH,"text-anchor":"end","font-size":"10",fill:"#9ca3af"},"0",8,ew),r("line",{x1:y.value.yAxisW,y1:"0",x2:y.value.yAxisW,y2:y.value.barH,stroke:"#e5e7eb","stroke-width":"1"},null,8,tw),(p(!0),m(Q,null,le(y.value.days,_=>(p(),m("g",{key:_.dayKey},[(p(!0),m(Q,null,le(_.segments,(S,T)=>(p(),m("rect",{key:T,x:_.x,y:S.y,width:y.value.barW,height:S.h,fill:S.color,opacity:"0.85",rx:"1"},[r("title",null,b(S.name)+": "+b(S.count)+" on "+b(_.dateLabel),1)],8,sw))),128))]))),128)),r("text",{x:y.value.yAxisW,y:y.value.barH+18,"font-size":"10",fill:"#6b7280"},b(y.value.firstLabel),9,nw),r("text",{x:y.value.yAxisW+y.value.chartW,y:y.value.barH+18,"text-anchor":"end","font-size":"10",fill:"#6b7280"},b(y.value.lastLabel),9,ow)],12,Q0))]),r("div",aw,[(p(!0),m(Q,null,le(a.value,(_,S)=>(p(),m("span",{key:_.path,class:"sp-activity-legend-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:c(S)})},null,4),Ne(" "+b(_.name),1)]))),128))])])])):F("",!0),r("div",rw,[(p(),m(Q,null,le(u,_=>r("span",{key:_.label,class:"sp-legend-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:_.color})},null,4),Ne(" "+b(_.label),1)])),64)),$[3]||($[3]=r("span",{class:"sp-legend-hint"},"line color = mastery status",-1))]),r("div",lw,[(p(!0),m(Q,null,le(a.value,_=>(p(),m("div",{key:_.path,class:"sp-lesson-card",onClick:S=>s.value=_},[r("div",cw,[r("div",uw,[r("div",dw,b(_.name),1),r("div",fw,b(_.tried)+" boards  "+b(_.totalAttempts)+" attempts  last "+b(d(_.lastActivity))+b(v(_)?`  span ${v(_)}`:""),1)]),r("div",pw,[r("div",{class:"sp-rate-value",style:et({color:f(_.recentRate)})},b(_.recentRate)+"% ",5),$[4]||($[4]=r("div",{class:"sp-rate-label"},"recent accuracy",-1))])]),r("div",vw,[ye(G_,{boardLines:_.boardLines,width:280,height:70},null,8,["boardLines"])]),r("div",mw,[r("div",hw,[(p(!0),m(Q,null,le(g(_),S=>(p(),m("div",{key:S.label,class:"sp-mastery-segment",style:et({width:S.pct,backgroundColor:S.color}),title:`${S.label}: ${S.count}`},null,12,gw))),128))]),r("div",yw,[(p(!0),m(Q,null,le(g(_),S=>(p(),m("span",{key:S.label,class:"sp-mastery-item"},[r("span",{class:"sp-legend-dot",style:et({backgroundColor:S.color})},null,4),Ne(" "+b(S.count)+" "+b(S.label),1)]))),128))])]),$[5]||($[5]=r("div",{class:"sp-card-hint"},"details ",-1))],8,iw))),128))])],64)),s.value?(p(),He(f1,{key:2,lesson:s.value,rawData:e.observations,onClose:$[0]||($[0]=_=>s.value=null),onDotClick:h},null,8,["lesson","rawData"])):F("",!0),ye(F0,{ref_key:"popupManager",ref:n},null,512)]))}},Hu=we(bw,[["__scopeId","data-v-81e679f8"]]),_w={class:"progress-dashboard"},ww={class:"dashboard-header"},Sw={key:0,class:"loading"},Cw={key:1,class:"error-state"},$w={key:2,class:"empty-state"},kw={key:3,class:"dashboard-content"},xw={class:"dashboard-actions"},Aw={__name:"ProgressDashboard",emits:["close"],setup(e){const t=tl(),s=Ke(),n=E(()=>t.decryptedObservations.value),o=E(()=>n.value.length>0),a=E(()=>{const i=s.currentUser.value;return i?`${i.firstName} ${i.lastName}`:""});bt(async()=>{await t.fetchProgress()});async function l(){await t.fetchProgress(!0)}return(i,u)=>(p(),m("div",_w,[r("header",ww,[u[3]||(u[3]=r("h2",null,"Student Progress",-1)),r("button",{class:"close-btn",onClick:u[0]||(u[0]=c=>i.$emit("close"))},"")]),M(t).isLoading.value?(p(),m("div",Sw,[...u[4]||(u[4]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading your progress...",-1)])])):M(t).hasError.value?(p(),m("div",Cw,[r("p",null,"Failed to load progress: "+b(M(t).error.value),1),r("button",{onClick:l},"Try Again")])):o.value?(p(),m("div",kw,[ye(Hu,{observations:n.value,studentName:a.value},null,8,["observations","studentName"]),r("div",xw,[r("button",{class:"secondary-btn",onClick:l},"Refresh Data"),r("button",{class:"primary-btn",onClick:u[2]||(u[2]=c=>i.$emit("close"))},"Continue Practicing")])])):(p(),m("div",$w,[u[5]||(u[5]=r("h3",null,"No Practice Data Yet",-1)),u[6]||(u[6]=r("p",null,"Complete some practice deals to see your progress here!",-1)),r("button",{class:"primary-btn",onClick:u[1]||(u[1]=c=>i.$emit("close"))},"Start Practicing")]))]))}},Tw=we(Aw,[["__scopeId","data-v-286a38c8"]]),Nw="test-user-mastery",Ew="test-classroom",Ow="Negative_Double",Iw="competitive_bidding/negative_double";let _r=0;function Ze({boardNumber:e,correct:t,timestamp:s}){return _r++,{id:`mastery-test-${_r}-${Math.random().toString(36).slice(2,8)}`,timestamp:s,user_id:Nw,skill_path:Iw,correct:t,deal_subfolder:Ow,deal_number:e,classroom:Ew}}function _t(e,t=10){const s=new Date;return s.setDate(s.getDate()-e),s.setHours(t,0,0,0),s.toISOString()}function No(e){return new Date(Date.now()-e*60*1e3).toISOString()}function Pw(){_r=0;const e=[];e.push(Ze({boardNumber:2,correct:!0,timestamp:_t(5)}),Ze({boardNumber:2,correct:!1,timestamp:_t(1)})),e.push(Ze({boardNumber:3,correct:!1,timestamp:No(30)}),Ze({boardNumber:3,correct:!0,timestamp:No(20)})),e.push(Ze({boardNumber:4,correct:!1,timestamp:No(90)}),Ze({boardNumber:4,correct:!0,timestamp:No(60)})),e.push(Ze({boardNumber:5,correct:!1,timestamp:_t(10)}),Ze({boardNumber:5,correct:!0,timestamp:_t(2)})),e.push(Ze({boardNumber:6,correct:!0,timestamp:_t(14)}),Ze({boardNumber:6,correct:!0,timestamp:_t(7)})),e.push(Ze({boardNumber:7,correct:!0,timestamp:_t(21)}),Ze({boardNumber:7,correct:!0,timestamp:_t(14)}),Ze({boardNumber:7,correct:!0,timestamp:_t(7)})),e.push(Ze({boardNumber:8,correct:!0,timestamp:_t(28)}),Ze({boardNumber:8,correct:!0,timestamp:_t(21)}),Ze({boardNumber:8,correct:!0,timestamp:_t(14)}),Ze({boardNumber:8,correct:!1,timestamp:_t(1)}));const t=[1,2,3,4,5].map(s=>({...Ze({boardNumber:s,correct:!0,timestamp:_t(3)}),deal_subfolder:"Stayman",skill_path:"bidding_conventions/stayman"}));return e.push(...t),e}const Dw=["onClick","title"],Rw={key:0,class:"medal gold-medal"},Lw={key:1,class:"medal silver-medal"},Bw={class:"board-num"},Mw={__name:"BoardMasteryStrip",props:{boardNumbers:{type:Array,required:!0},lessonSubfolder:{type:String,required:!0},currentIndex:{type:Number,default:0},forceBoardStatus:{type:Object,default:()=>({})},introUrl:{type:String,default:null},alignLeft:{type:Boolean,default:!1},userId:{type:String,default:null}},emits:["goto","open-intro"],setup(e,{emit:t}){const s=e,n=t,o=wa(),a=ys(),l=Ke(),i=O([]),u=O(!1);async function c(){var h;const v=s.userId||((h=l.currentUser.value)==null?void 0:h.id);if(!(!v||!s.lessonSubfolder))try{const g=await o.fetchBoardStatus(v,s.lessonSubfolder);g.length>0&&(i.value=g,u.value=!0)}catch{}}bt(c),ot(()=>s.lessonSubfolder,c),ot(()=>o.cacheVersion.value,c);const f=E(()=>{let v;if(u.value&&i.value.length>0?(v=o.buildBoardMastery(i.value,s.boardNumbers),o.mergeLocalPending(v,s.lessonSubfolder)):v=a.computeBoardMastery(a.getObservations(),s.lessonSubfolder,s.boardNumbers),s.forceBoardStatus)for(const[h,g]of Object.entries(s.forceBoardStatus)){const y=v.find(k=>k.boardNumber===Number(h));y&&(y.status=g)}return v});function d(v){const h={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"},g={none:"",silver:" | Silver star",gold:" | Gold star"};return`Board ${v.boardNumber}: ${h[v.status]||v.status}${g[v.achievement]||""}`}return(v,h)=>e.boardNumbers.length>0?(p(),m("div",{key:0,class:ie(["board-mastery-strip",{"justify-start":e.alignLeft}])},[e.introUrl?(p(),m("button",{key:0,class:"intro-btn",onClick:h[0]||(h[0]=g=>n("open-intro",e.introUrl)),title:"View lesson introduction"}," Intro ")):F("",!0),(p(!0),m(Q,null,le(f.value,(g,y)=>(p(),m("div",{key:g.boardNumber,class:ie(["board-indicator",[`status-${g.status}`,{active:y===e.currentIndex},{"has-medal":g.achievement!=="none"},{"medal-gold":g.achievement==="gold"},{"medal-silver":g.achievement==="silver"}]]),onClick:k=>n("goto",y),title:d(g)},[g.achievement==="gold"?(p(),m("span",Rw,"")):g.achievement==="silver"?(p(),m("span",Lw,"")):F("",!0),r("span",Bw,b(g.boardNumber),1)],10,Dw))),128))],2)):F("",!0)}},Wu=we(Mw,[["__scopeId","data-v-6dba945a"]]),Uw={class:"accomplishments-view"},Fw={class:"view-header"},jw={key:0,class:"user-selector"},Hw=["value"],Ww=["value"],Kw={key:1,class:"loading-state"},Vw={key:2,class:"error-state"},Gw={key:3,class:"empty-state"},zw={key:4,class:"view-content"},Jw={class:"controls-row"},Yw={class:"tabs"},qw={key:0,class:"tab-content"},Xw={key:0,class:"no-data"},Qw={key:1,class:"lesson-list"},Zw={class:"lesson-header"},eS={class:"lesson-name"},tS={key:1,class:"tab-content"},sS={key:0,class:"no-data"},nS={key:1,class:"taxon-list"},oS={class:"taxon-header"},aS={class:"taxon-category"},rS={class:"taxon-name"},lS={class:"taxon-counts"},iS={class:"taxon-stat correct"},cS={class:"taxon-stat incorrect"},uS={class:"taxon-stat total"},dS={class:"view-actions"},fS={key:5,class:"test-mode-banner"},pS={__name:"AccomplishmentsView",emits:["close","navigate-to-deal"],setup(e,{emit:t}){const s=t,n=_s(),o=ys(),l=new URLSearchParams(window.location.search).get("test");bt(async()=>{l==="mastery"||l==="accomplishments"?n.enableTestMode(Pw()):await n.initialize()});async function i(){await n.loadAccomplishments(!0)}async function u(v){await n.selectUser(v)}function c(v,h){s("navigate-to-deal",{subfolder:v,dealNumber:h})}const f=E(()=>{const v=o.getObservations();return o.extractLessonsFromObservations(v).map(g=>{const y=o.computeBoardMastery(v,g.subfolder,g.boardNumbers),k=o.computeLessonAchievement(y);return{...g,achievement:k.achievement}}).sort((g,y)=>d(g.subfolder).localeCompare(d(y.subfolder)))});ot(f,v=>{o.fetchMissingBoardCounts(v.map(h=>h.subfolder))},{immediate:!0});function d(v){return n.formatLessonName(v)}return(v,h)=>(p(),m("div",Uw,[r("header",Fw,[h[6]||(h[6]=r("h2",null,"Accomplishments",-1)),r("button",{class:"close-btn",onClick:h[0]||(h[0]=g=>v.$emit("close"))},"")]),M(n).canViewOtherUsers.value?(p(),m("div",jw,[h[7]||(h[7]=r("label",{for:"user-select"},"Viewing:",-1)),r("select",{id:"user-select",value:M(n).selectedUserId.value,onChange:h[1]||(h[1]=g=>u(g.target.value))},[(p(!0),m(Q,null,le(M(n).accessibleUsers.value,g=>(p(),m("option",{key:g.id,value:g.id},b(g.name)+b(g.isSelf?" (You)":""),9,Ww))),128))],40,Hw)])):F("",!0),M(n).loading.value?(p(),m("div",Kw,[...h[8]||(h[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading accomplishments...",-1)])])):M(n).error.value?(p(),m("div",Vw,[r("p",null,"Failed to load: "+b(M(n).error.value),1),r("button",{onClick:i},"Try Again")])):M(n).hasData.value?(p(),m("div",zw,[r("div",Jw,[r("div",Yw,[r("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="lessons"}]),onClick:h[3]||(h[3]=g=>M(n).activeTab.value="lessons")}," Lessons ",2),r("button",{class:ie(["tab-btn",{active:M(n).activeTab.value==="taxons"}]),onClick:h[4]||(h[4]=g=>M(n).activeTab.value="taxons")}," Taxons ",2)])]),M(n).activeTab.value==="lessons"?(p(),m("div",qw,[f.value.length===0?(p(),m("div",Xw," No lesson data available yet. ")):(p(),m("div",Qw,[(p(!0),m(Q,null,le(f.value,g=>(p(),m("div",{key:g.subfolder,class:"lesson-row"},[r("div",Zw,[r("span",eS,b(d(g.subfolder)),1),g.achievement!=="none"?(p(),m("span",{key:0,class:ie(["achievement-badge",g.achievement])},"  "+b(g.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),ye(Wu,{boardNumbers:g.boardNumbers,lessonSubfolder:g.subfolder,currentIndex:-1,alignLeft:!0,userId:M(n).selectedUserId.value,onGoto:y=>c(g.subfolder,g.boardNumbers[y])},null,8,["boardNumbers","lessonSubfolder","userId","onGoto"])]))),128))]))])):F("",!0),M(n).activeTab.value==="taxons"?(p(),m("div",tS,[M(n).filteredTaxonStats.value.length===0?(p(),m("div",sS," No skill data available yet. ")):(p(),m("div",nS,[(p(!0),m(Q,null,le(M(n).filteredTaxonStats.value,g=>(p(),m("div",{key:g.skillPath,class:"taxon-card"},[r("div",oS,[r("span",aS,b(g.categoryName),1),r("span",rS,b(g.skillName),1)]),r("div",lS,[r("span",iS,b(g.correct),1),r("span",cS,b(g.incorrect),1),r("span",uS,b(g.total)+" total",1)])]))),128))]))])):F("",!0),r("div",dS,[r("button",{class:"secondary-btn",onClick:i}," Refresh "),r("button",{class:"primary-btn",onClick:h[5]||(h[5]=g=>v.$emit("close"))}," Done ")])])):(p(),m("div",Gw,[h[9]||(h[9]=r("h3",null,"No Practice Data Yet",-1)),h[10]||(h[10]=r("p",null,"Complete some practice deals to see your accomplishments here!",-1)),r("button",{class:"primary-btn",onClick:h[2]||(h[2]=g=>v.$emit("close"))},"Start Practicing")])),M(n).useTestData.value?(p(),m("div",fS," Test Mode - Using Generated Data ")):F("",!0)]))}},vS=we(pS,[["__scopeId","data-v-b2e1ca98"]]),Ku="bridge-classroom-anon-mode",mS="BridgeClassroom-Anon",ja=["Aaron","Abigail","Adam","Adrian","Aiden","Alex","Alice","Allison","Amanda","Amber","Amy","Andrea","Andrew","Angela","Anna","Anthony","Ashley","Austin","Barbara","Benjamin","Beth","Brandon","Brenda","Brian","Brittany","Bruce","Bryan","Caleb","Cameron","Carl","Carlos","Carol","Caroline","Catherine","Charles","Charlotte","Chelsea","Chris","Christina","Christine","Christopher","Cindy","Claire","Clara","Cody","Colin","Connor","Craig","Crystal","Cynthia","Dale","Daniel","Danielle","David","Dawn","Deborah","Dennis","Derek","Diana","Diane","Donald","Donna","Dorothy","Douglas","Dylan","Edward","Eileen","Eleanor","Elizabeth","Ellen","Emily","Emma","Eric","Erica","Erin","Ethan","Eugene","Eva","Evan","Evelyn","Frances","Francis","Frank","Gabriel","Gary","George","Gerald","Gloria","Grace","Gregory","Hannah","Harold","Harry","Heather","Helen","Henry","Holly","Howard","Ian","Isaac","Isabella","Jack","Jacob","James","Jamie","Jane","Janet","Jason","Jean","Jeffrey","Jennifer","Jeremy","Jerry","Jesse","Jessica","Jill","Joan","Joe","Joel","John","Jonathan","Jordan","Joseph","Joshua","Joyce","Julia","Julie","Justin","Karen","Katherine","Kathleen","Katie","Keith","Kelly","Kenneth","Kevin","Kim","Kimberly","Kyle","Larry","Laura","Lauren","Lawrence","Leah","Leonard","Leslie","Linda","Lisa","Logan","Louis","Lucas","Lucy","Luke","Madison","Margaret","Maria","Marie","Mark","Martha","Martin","Mary","Mason","Matthew","Megan","Melanie","Melissa","Michael","Michelle","Mike","Monica","Nancy","Natalie","Nathan","Nicholas","Nicole","Noah","Oliver","Olivia","Oscar","Pamela","Patricia","Patrick","Paul","Paula","Peter","Philip","Rachel","Ralph","Randy","Raymond","Rebecca","Richard","Robert","Robin","Roger","Ronald","Rose","Roy","Russell","Ruth","Ryan","Samantha","Samuel","Sandra","Sara","Sarah","Scott","Sean","Sharon","Sophia","Stephanie","Stephen","Steve","Steven","Susan","Tammy","Teresa","Terry","Thomas","Tiffany","Timothy","Todd","Tom","Tony","Tracy","Travis","Tyler","Valerie","Vanessa","Victor","Victoria","Vincent","Virginia","Walter","Wayne","Wendy","William","Zachary"],Ni=["Adams","Allen","Anderson","Bailey","Baker","Barnes","Bell","Bennett","Brooks","Brown","Bryant","Butler","Campbell","Carter","Clark","Coleman","Collins","Cook","Cooper","Cox","Cruz","Davis","Diaz","Edwards","Evans","Fisher","Flores","Ford","Foster","Garcia","Gibson","Gomez","Gonzalez","Gordon","Graham","Gray","Green","Griffin","Hall","Hamilton","Harris","Harrison","Hayes","Henderson","Hernandez","Hill","Holmes","Howard","Hughes","Hunt","Jackson","James","Jenkins","Johnson","Jones","Jordan","Kelly","Kennedy","Kim","King","Lee","Lewis","Long","Lopez","Marshall","Martin","Martinez","Mason","Matthews","Miller","Mitchell","Moore","Morales","Morgan","Morris","Murphy","Murray","Nelson","Nguyen","Ortiz","Owens","Parker","Patterson","Perez","Perry","Peterson","Phillips","Powell","Price","Ramirez","Reed","Reyes","Reynolds","Richardson","Rivera","Roberts","Robinson","Rodriguez","Rogers","Ross","Russell","Sanchez","Sanders","Scott","Simmons","Smith","Stewart","Sullivan","Taylor","Thomas","Thompson","Torres","Turner","Walker","Wallace","Ward","Washington","Watson","West","White","Williams","Wilson","Wood","Wright","Young"];function hS(e){let t=0xcbf29ce484222325n;const s=0x100000001b3n;for(let n=0;n<e.length;n++)t^=BigInt(e.charCodeAt(n)),t=t*s&0xFFFFFFFFFFFFFFFFn;return t}function gS(e,t){const s=`${mS}:${e} ${t}`,n=hS(s),o=Number(n%BigInt(ja.length)),a=Number(n/BigInt(ja.length)%BigInt(Ni.length));return{firstName:ja[o],lastName:Ni[a]}}const In=O(localStorage.getItem(Ku)==="true");function yS(){function e(){In.value=!In.value,localStorage.setItem(Ku,In.value.toString())}function t(o){return In.value?gS(o.first_name,o.last_name):{firstName:o.first_name,lastName:o.last_name}}function s(o){const{firstName:a,lastName:l}=t(o);return`${a} ${l}`}function n(o){const{firstName:a,lastName:l}=t(o),i=(a==null?void 0:a.charAt(0))||"",u=(l==null?void 0:l.charAt(0))||"";return(i+u).toUpperCase()||"?"}return{isAnonymized:In,toggleAnonymize:e,displayName:t,displayFullName:s,displayInitials:n}}const bS={class:"teacher-student-list"},_S={class:"teacher-header"},wS={class:"header-actions"},SS=["value"],CS={key:0,class:"loading-state"},$S={key:1,class:"error-state"},kS={key:2,class:"empty-state"},xS={key:3,class:"empty-state"},AS={key:4,class:"student-table-wrap"},TS={class:"student-table"},NS=["onClick"],ES={class:"col-name"},OS={class:"student-name-cell"},IS={class:"avatar"},PS={class:"col-mastery"},DS={class:"mastery-pills"},RS={key:0,class:"pill pill-green"},LS={key:1,class:"pill pill-orange"},BS={key:2,class:"pill pill-yellow"},MS={key:3,class:"pill pill-red"},US={key:4,class:"no-data-label"},FS={class:"col-active"},jS={class:"col-lessons"},HS={class:"recent-lessons"},WS={key:0,class:"no-data-label"},KS={__name:"TeacherStudentList",emits:["close","select-student"],setup(e,{emit:t}){const s=wn(),n=_o(),o=Ke(),a=yS(),l=O("all"),i=O({});bt(async()=>{await s.loadAllStudentSummaries(),await u()});async function u(){const $=o.currentUser.value;if(!$)return;n.teacherClassrooms.value.length||await n.fetchTeacherClassrooms($.id);const _={};await Promise.all(n.teacherClassrooms.value.map(async S=>{const T=await n.fetchClassroomDetail(S.id);T!=null&&T.success&&(_[S.id]=new Set(T.classroom.members.map(P=>P.student_id)))})),i.value=_}async function c(){s.studentObservations.value={},await s.loadAllStudentSummaries(),await u()}const f=E(()=>{const $=new Set;for(const _ of Object.values(i.value))for(const S of _)$.add(S);return $}),d=E(()=>{const $=s.students.value;if(l.value==="all")return $;if(l.value==="none")return $.filter(S=>!f.value.has(S.id));const _=i.value[l.value];return _?$.filter(S=>_.has(S.id)):$}),v=E(()=>[...d.value].sort(($,_)=>{var P,B;const S=((P=h.value[$.id])==null?void 0:P.lastObservationTime)||"",T=((B=h.value[_.id])==null?void 0:B.lastObservationTime)||"";return T!==S?T.localeCompare(S):y($).localeCompare(y(_))})),h=E(()=>{const $={};for(const _ of s.students.value)$[_.id]=s.getStudentMasterySummary(_.id);return $}),g=E(()=>{const $={};for(const _ of s.students.value)$[_.id]=s.getStudentRecentLessons(_.id);return $});function y($){return a.displayFullName($)}function k($){return a.displayInitials($)}return($,_)=>(p(),m("div",bS,[r("header",_S,[_[5]||(_[5]=r("h2",null,"My Students",-1)),r("div",wS,[M(n).teacherClassrooms.value.length?We((p(),m("select",{key:0,"onUpdate:modelValue":_[0]||(_[0]=S=>l.value=S),class:"filter-select"},[_[3]||(_[3]=r("option",{value:"all"},"All Students",-1)),(p(!0),m(Q,null,le(M(n).teacherClassrooms.value,S=>(p(),m("option",{key:S.id,value:S.id},b(S.name),9,SS))),128)),_[4]||(_[4]=r("option",{value:"none"},"No Classroom",-1))],512)),[[Kn,l.value]]):F("",!0),r("button",{class:ie(["anon-btn",{active:M(a).isAnonymized.value}]),onClick:_[1]||(_[1]=S=>M(a).toggleAnonymize())},b(M(a).isAnonymized.value?"Clear":"Anon"),3),r("button",{class:"secondary-btn",onClick:c},"Refresh"),r("button",{class:"secondary-btn",onClick:_[2]||(_[2]=S=>$.$emit("close"))},"Back")])]),M(s).loading.value?(p(),m("div",CS,[..._[6]||(_[6]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):M(s).error.value?(p(),m("div",$S,[r("p",null,"Failed to load: "+b(M(s).error.value),1),r("button",{onClick:c},"Try Again")])):M(s).students.value.length===0?(p(),m("div",kS,[..._[7]||(_[7]=[r("h3",null,"No Students Yet",-1),r("p",null,"Students will appear here once they register and grant you access.",-1)])])):v.value.length===0?(p(),m("div",xS,[..._[8]||(_[8]=[r("h3",null,"No Matching Students",-1),r("p",null,"No students match the selected filter.",-1)])])):(p(),m("div",AS,[r("table",TS,[_[9]||(_[9]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-mastery"},"Mastery"),r("th",{class:"col-active"},"Last Active"),r("th",{class:"col-lessons"},"Recent Lessons")])],-1)),r("tbody",null,[(p(!0),m(Q,null,le(v.value,S=>{var T,P,B,L,z,K,ue;return p(),m("tr",{key:S.id,class:"student-row",onClick:me=>$.$emit("select-student",S.id,y(S))},[r("td",ES,[r("div",OS,[r("div",IS,b(k(S)),1),r("span",null,b(y(S)),1)])]),r("td",PS,[r("div",DS,[(T=h.value[S.id])!=null&&T.green?(p(),m("span",RS,b(h.value[S.id].green),1)):F("",!0),(P=h.value[S.id])!=null&&P.orange?(p(),m("span",LS,b(h.value[S.id].orange),1)):F("",!0),(B=h.value[S.id])!=null&&B.yellow?(p(),m("span",BS,b(h.value[S.id].yellow),1)):F("",!0),(L=h.value[S.id])!=null&&L.red?(p(),m("span",MS,b(h.value[S.id].red),1)):F("",!0),(z=h.value[S.id])!=null&&z.total?F("",!0):(p(),m("span",US,"No data"))])]),r("td",FS,b(M(s).formatTimeSince((K=h.value[S.id])==null?void 0:K.lastObservationTime)),1),r("td",jS,[r("div",HS,[(p(!0),m(Q,null,le(g.value[S.id],(me,fe)=>(p(),m("span",{key:fe,class:"lesson-tag"},b(me),1))),128)),(ue=g.value[S.id])!=null&&ue.length?F("",!0):(p(),m("span",WS,"-"))])])],8,NS)}),128))])])]))]))}},VS=we(KS,[["__scopeId","data-v-dd6d8e66"]]),GS={class:"teacher-student-detail"},zS={class:"detail-header"},JS={class:"student-info"},YS={class:"avatar"},qS={class:"last-active"},XS={key:0,class:"loading-state"},QS={key:1,class:"detail-content"},ZS={class:"tab-bar"},eC=["onClick"],tC={key:0,class:"tab-content"},sC={key:1,class:"tab-content"},nC={key:0,class:"stats-row"},oC={class:"stat stat-green"},aC={key:0,class:"stat stat-blue"},rC={key:1,class:"stat stat-orange"},lC={key:2,class:"stat stat-yellow"},iC={key:3,class:"stat stat-red"},cC={key:4,class:"stat stat-grey"},uC={key:1,class:"no-data"},dC={key:2,class:"lesson-list"},fC={class:"lesson-header"},pC=["onClick"],vC={class:"mastery-strip"},mC=["title","onClick"],hC={key:0,class:"medal gold-medal"},gC={key:1,class:"medal silver-medal"},yC={class:"board-num"},bC={class:"observation-total"},_C={__name:"TeacherStudentDetail",props:{studentId:{type:String,required:!0},studentName:{type:String,required:!0}},emits:["back","navigate-to-lesson"],setup(e,{emit:t}){const s=e,n=t,o=wn(),a=ys(),l=wa(),i=_s(),u=O(!1),c=O("progress"),f=O([]),d=[{id:"progress",label:"Progress"},{id:"mastery",label:"Lesson Mastery"}],v=E(()=>s.studentName.split(" ").map(T=>T[0]||"").join("").toUpperCase());bt(async()=>{o.studentObservations.value[s.studentId]||(u.value=!0,await o.fetchStudentObservations(s.studentId),u.value=!1);try{f.value=await l.fetchBoardStatus(s.studentId)}catch{}});const h=E(()=>o.studentObservations.value[s.studentId]||[]),g=E(()=>o.getStudentMasterySummary(s.studentId)),y=E(()=>o.formatTimeSince(g.value.lastObservationTime)),k=E(()=>{const S=h.value;if(S.length===0&&f.value.length===0)return[];const T=a.extractLessonsFromObservations(S),P={};for(const B of f.value)P[B.deal_subfolder]||(P[B.deal_subfolder]=[]),P[B.deal_subfolder].push(B);for(const B in P)if(!T.find(L=>L.subfolder===B)){const L=P[B].map(z=>z.deal_number).sort((z,K)=>z-K);T.push({subfolder:B,boardNumbers:L,lastActivity:null})}return T.map(B=>{let L;const z=P[B.subfolder];z&&z.length>0?L=l.buildBoardMastery(z,B.boardNumbers):L=a.computeBoardMastery(S,B.subfolder,B.boardNumbers);const K=a.computeLessonAchievement(L);return{...B,boardMastery:L,achievement:K.achievement}}).sort((B,L)=>$(B.subfolder).localeCompare($(L.subfolder)))});ot(k,S=>{a.fetchMissingBoardCounts(S.map(T=>T.subfolder))},{immediate:!0});function $(S){return i.formatLessonName(S)}function _(S){const T={grey:"Not attempted",red:"Failed",yellow:"Corrected (recent)",orange:"Corrected  ready to retry",blue:"Correct (try again after cooldown)",green:"Clean correct"};return`Board ${S.boardNumber}: ${T[S.status]||S.status}`}return(S,T)=>(p(),m("div",GS,[r("header",zS,[r("button",{class:"back-btn",onClick:T[0]||(T[0]=P=>S.$emit("back"))}," Students"),r("div",JS,[r("div",YS,b(v.value),1),r("div",null,[r("h2",null,b(e.studentName),1),r("span",qS,"Last active: "+b(y.value),1)])])]),u.value?(p(),m("div",XS,[...T[1]||(T[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading student data...",-1)])])):(p(),m("div",QS,[r("div",ZS,[(p(),m(Q,null,le(d,P=>r("button",{key:P.id,class:ie(["tab-btn",{active:c.value===P.id}]),onClick:B=>c.value=P.id},b(P.label),11,eC)),64))]),c.value==="progress"?(p(),m("div",tC,[ye(Hu,{observations:h.value,studentName:s.studentName,studentId:s.studentId},null,8,["observations","studentName","studentId"])])):c.value==="mastery"?(p(),m("div",sC,[g.value.total>0?(p(),m("div",nC,[r("div",oC,b(g.value.green)+" Green",1),g.value.blue?(p(),m("div",aC,b(g.value.blue)+" Blue",1)):F("",!0),g.value.orange?(p(),m("div",rC,b(g.value.orange)+" Orange",1)):F("",!0),g.value.yellow?(p(),m("div",lC,b(g.value.yellow)+" Yellow",1)):F("",!0),g.value.red?(p(),m("div",iC,b(g.value.red)+" Red",1)):F("",!0),g.value.grey?(p(),m("div",cC,b(g.value.grey)+" Grey",1)):F("",!0)])):F("",!0),k.value.length===0?(p(),m("div",uC," No lesson data available yet. ")):(p(),m("div",dC,[(p(!0),m(Q,null,le(k.value,P=>(p(),m("div",{key:P.subfolder,class:"lesson-row"},[r("div",fC,[r("button",{class:"lesson-name lesson-link",onClick:B=>n("navigate-to-lesson",P.subfolder)},b($(P.subfolder)),9,pC),P.achievement!=="none"?(p(),m("span",{key:0,class:ie(["achievement-badge",P.achievement])},"  "+b(P.achievement==="gold"?"Gold":"Silver"),3)):F("",!0)]),r("div",vC,[(p(!0),m(Q,null,le(P.boardMastery,B=>(p(),m("div",{key:B.boardNumber,class:ie(["board-circle board-clickable","status-"+B.status]),title:_(B),onClick:L=>n("navigate-to-lesson",P.subfolder,B.boardNumber)},[B.achievement==="gold"?(p(),m("span",hC,"")):B.achievement==="silver"?(p(),m("span",gC,"")):F("",!0),r("span",yC,b(B.boardNumber),1)],10,mC))),128))])]))),128))]))])):F("",!0),r("div",bC,b(h.value.length)+" observations",1)]))]))}},wC=we(_C,[["__scopeId","data-v-62d6827c"]]),SC={key:0,class:"lesson-browser-loading"},CC={key:1,class:"lesson-browser-error"},$C={class:"lesson-browser"},kC={class:"browser-header"},xC={class:"browser-content"},AC=["onClick"],TC={class:"expand-icon"},NC={class:"category-name"},EC={class:"category-count"},OC={key:0,class:"lesson-list"},IC=["onClick"],PC={class:"lesson-name"},DC={class:"lesson-description"},RC={key:0,class:"error-message"},LC={key:3,class:"lesson-browser-inline"},BC={class:"browser-content-inline"},MC=["onClick"],UC={class:"expand-icon"},FC={class:"category-name"},jC={class:"category-count"},HC={key:0,class:"lesson-list"},WC=["onClick"],KC={class:"lesson-name"},VC={class:"lesson-description"},GC={key:0,class:"error-message-inline"},zC={__name:"LessonBrowser",props:{visible:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},collection:{type:Object,default:null}},emits:["close","load"],setup(e,{emit:t}){const s=e,n=t,o=O(null),a=O(null),l=O(!1),i=O([]),u=O(null),c=O(null);ot(()=>[s.visible,s.collection],([g,y])=>{g&&y&&!o.value&&f()},{immediate:!0});async function f(){var g;if(!((g=s.collection)!=null&&g.tocUrl)){a.value="No collection specified";return}l.value=!0,a.value=null;try{const y=await fetch(s.collection.tocUrl);if(!y.ok)throw new Error(`Failed to load: ${y.statusText}`);o.value=await y.json()}catch(y){console.error("Error fetching TOC:",y),a.value=`Could not load lesson catalog. ${y.message}`}finally{l.value=!1}}function d(g){const y=i.value.indexOf(g);y>=0?i.value.splice(y,1):i.value.push(g)}function v(g){return g.includes("/")?g.split("/").pop():g}async function h(g,y){var k;c.value=null,u.value=g.id;try{const $=((k=s.collection)==null?void 0:k.baseUrl)||"",_=v(g.id),S=`${$}/${_}.pbn`,T=await fetch(S);if(!T.ok)throw new Error(`Failed to load lesson: ${T.statusText}`);const P=await T.text();n("load",{subfolder:g.id,name:g.name,category:y.name,content:P}),s.inline||n("close")}catch($){console.error("Error loading lesson:",$),c.value=`Could not load "${g.name}". The lesson may not be available yet.`}finally{u.value=null}}return(g,y)=>e.visible&&l.value?(p(),m("div",SC,[...y[2]||(y[2]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"Loading lessons...",-1)])])):e.visible&&a.value?(p(),m("div",CC,[r("p",null,b(a.value),1),r("button",{onClick:f,class:"retry-btn"},"Retry")])):e.visible&&!e.inline&&o.value?(p(),m("div",{key:2,class:"modal-overlay",onClick:y[1]||(y[1]=tt(k=>g.$emit("close"),["self"]))},[r("div",$C,[r("div",kC,[r("h2",null,b(o.value.name),1),r("button",{class:"close-btn",onClick:y[0]||(y[0]=k=>g.$emit("close"))},"")]),r("div",xC,[(p(!0),m(Q,null,le(o.value.categories,k=>(p(),m("div",{key:k.id,class:"category-section"},[r("button",{class:ie(["category-header",{expanded:i.value.includes(k.id)}]),onClick:$=>d(k.id)},[r("span",TC,b(i.value.includes(k.id)?"":""),1),r("span",NC,b(k.name),1),r("span",EC,b(k.lessons.length)+" lessons",1)],10,AC),i.value.includes(k.id)?(p(),m("div",OC,[(p(!0),m(Q,null,le(k.lessons,$=>(p(),m("button",{key:$.id,class:ie(["lesson-item",{loading:u.value===$.id}]),onClick:_=>h($,k)},[r("span",PC,b($.name),1),r("span",DC,b($.description),1)],10,IC))),128))])):F("",!0)]))),128))]),c.value?(p(),m("div",RC,b(c.value),1)):F("",!0)])])):e.visible&&e.inline&&o.value?(p(),m("div",LC,[r("div",BC,[(p(!0),m(Q,null,le(o.value.categories,k=>(p(),m("div",{key:k.id,class:"category-section"},[r("button",{class:ie(["category-header",{expanded:i.value.includes(k.id)}]),onClick:$=>d(k.id)},[r("span",UC,b(i.value.includes(k.id)?"":""),1),r("span",FC,b(k.name),1),r("span",jC,b(k.lessons.length)+" lessons",1)],10,MC),i.value.includes(k.id)?(p(),m("div",HC,[(p(!0),m(Q,null,le(k.lessons,$=>(p(),m("button",{key:$.id,class:ie(["lesson-item",{loading:u.value===$.id}]),onClick:_=>h($,k)},[r("span",KC,b($.name),1),r("span",VC,b($.description),1)],10,WC))),128))])):F("",!0)]))),128))]),c.value?(p(),m("div",GC,b(c.value),1)):F("",!0)])):F("",!0)}},JC=we(zC,[["__scopeId","data-v-384a9c63"]]),YC={class:"viewer-controls"},qC={class:"viewer-body"},XC={key:0,class:"interaction-overlay"},QC={key:1,class:"viewer-loading"},ZC={key:2,class:"viewer-error"},e$=["src"],t$={__name:"IntroPdfViewer",props:{url:{type:String,required:!0},visible:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=e,s=Lt({x:80,y:80}),n=Lt({w:550,h:700}),o=O(!1),a=Lt({x:0,y:0}),l=O(null),i=O(!1),u=O(null),c=E(()=>l.value?l.value+"#navpanes=0&toolbar=0":null);async function f(_){if(d(),!!_){i.value=!0,u.value=null;try{const S=await fetch(_);if(!S.ok)throw new Error("Failed to load PDF");const T=await S.blob(),P=new Blob([T],{type:"application/pdf"});l.value=URL.createObjectURL(P)}catch(S){u.value="Could not load PDF",console.error("Failed to fetch intro PDF:",S)}finally{i.value=!1}}}function d(){l.value&&(URL.revokeObjectURL(l.value),l.value=null)}function v(){l.value&&window.open(l.value,"_blank")}ot(()=>[t.visible,t.url],([_,S])=>{_&&S?f(S):_||d()},{immediate:!0}),Mr(d);function h(_){_.target.closest("button")||(o.value=!0,a.x=_.clientX-s.x,a.y=_.clientY-s.y,document.addEventListener("pointermove",g),document.addEventListener("pointerup",$))}function g(_){s.x=Math.max(0,_.clientX-a.x),s.y=Math.max(0,_.clientY-a.y)}function y(_){o.value=!0,a.x=_.clientX,a.y=_.clientY,a.startW=n.w,a.startH=n.h,document.addEventListener("pointermove",k),document.addEventListener("pointerup",$)}function k(_){n.w=Math.max(320,a.startW+(_.clientX-a.x)),n.h=Math.max(300,a.startH+(_.clientY-a.y))}function $(){o.value=!1,document.removeEventListener("pointermove",g),document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",$)}return(_,S)=>e.visible?(p(),m("div",{key:0,class:"intro-pdf-viewer",style:et({left:s.x+"px",top:s.y+"px",width:n.w+"px",height:n.h+"px"})},[r("div",{class:"viewer-titlebar",onPointerdown:h},[S[1]||(S[1]=r("span",{class:"viewer-title"},"Lesson Introduction",-1)),r("div",YC,[r("button",{class:"viewer-btn",onClick:v,title:"Open in new tab"},""),r("button",{class:"viewer-btn close",onClick:S[0]||(S[0]=T=>_.$emit("close")),title:"Close"},"")])],32),r("div",qC,[o.value?(p(),m("div",XC)):F("",!0),i.value?(p(),m("div",QC,"Loading PDF...")):u.value?(p(),m("div",ZC,b(u.value),1)):c.value?(p(),m("iframe",{key:3,src:c.value,class:"viewer-iframe"},null,8,e$)):F("",!0)]),r("div",{class:"resize-handle",onPointerdown:y},"",32)],4)):F("",!0)}},s$=we(t$,[["__scopeId","data-v-a97df645"]]),n$={class:"collection-icon"},o$={class:"collection-name"},a$={class:"collection-desc"},r$={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["click"],setup(e){return(t,s)=>(p(),m("button",{class:"collection-card",onClick:s[0]||(s[0]=n=>t.$emit("click"))},[r("span",n$,b(e.collection.icon),1),r("span",o$,b(e.collection.name),1),r("span",a$,b(e.collection.description),1)]))}},l$=we(r$,[["__scopeId","data-v-747be5b1"]]),i$={class:"collection-grid"},c$={class:"collection-cards"},u$={key:0,class:"load-file-section"},d$={__name:"CollectionGrid",emits:["select-collection","load-file"],setup(e){const t=mo(),s=t.COLLECTIONS;return(n,o)=>(p(),m("div",i$,[o[2]||(o[2]=r("h2",{class:"grid-title"},"Lesson Collections",-1)),o[3]||(o[3]=r("p",{class:"grid-subtitle"},"Select a collection to browse lessons:",-1)),r("div",c$,[(p(!0),m(Q,null,le(M(s),a=>(p(),He(l$,{key:a.id,collection:a,onClick:l=>n.$emit("select-collection",a.id)},null,8,["collection","onClick"]))),128))]),M(t).showLoadPbnOption.value?(p(),m("div",u$,[o[1]||(o[1]=r("p",null,"Or load your own PBN file:",-1)),r("input",{type:"file",accept:".pbn",onChange:o[0]||(o[0]=a=>n.$emit("load-file",a))},null,32)])):F("",!0)]))}},il=we(d$,[["__scopeId","data-v-35b62d22"]]),f$={class:"casual-lobby"},p$={__name:"CasualLobby",emits:["select-collection","show-become-teacher","load-file"],setup(e){return(t,s)=>(p(),m("div",f$,[ye(il,{onSelectCollection:s[0]||(s[0]=n=>t.$emit("select-collection",n)),onLoadFile:s[1]||(s[1]=n=>t.$emit("load-file",n))})]))}},v$=we(p$,[["__scopeId","data-v-1ce1f7d7"]]),m$={class:"assignment-panel"},h$={key:0,class:"loading-state"},g$={key:1,class:"empty-state"},y$={key:2,class:"assignment-cards"},b$=["onClick"],_$={class:"card-header"},w$={class:"exercise-name"},S$={class:"card-meta"},C$={key:0,class:"meta-item"},$$={class:"progress-section"},k$={class:"progress-bar"},x$={class:"progress-label"},A$={__name:"AssignmentPanel",props:{assignments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select-assignment"],setup(e){function t(i){return i.total_boards?Math.round(i.attempted_boards/i.total_boards*100):0}function s(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0?"complete":i.due_at&&new Date(i.due_at)<new Date&&i.attempted_boards<i.total_boards?"overdue":i.attempted_boards>0?"in-progress":"new"}function n(i){const u=s(i);return u==="complete"?"Complete":u==="overdue"?"Overdue":u==="in-progress"?"In Progress":"New"}function o(i){return i.attempted_boards>=i.total_boards&&i.total_boards>0}function a(i){if(!i.due_at)return null;const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?o(i)?"Completed":"Overdue":f===0?"Due today":f===1?"Due tomorrow":`Due in ${f} days`}function l(i){if(!i.due_at||o(i))return"";const u=new Date(i.due_at),f=Math.ceil((u-new Date)/(1e3*60*60*24));return f<0?"overdue":f<=1?"urgent":f<=3?"soon":""}return(i,u)=>(p(),m("div",m$,[u[2]||(u[2]=r("h3",{class:"section-title"},"My Assignments",-1)),e.loading?(p(),m("div",h$,[...u[0]||(u[0]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignments...",-1)])])):e.assignments.length===0?(p(),m("div",g$,[...u[1]||(u[1]=[r("p",{class:"empty-title"},"No assignments yet",-1),r("p",{class:"empty-desc"},"Your teacher will assign exercises here.",-1)])])):(p(),m("div",y$,[(p(!0),m(Q,null,le(e.assignments,c=>(p(),m("div",{key:c.id,class:ie(["assignment-card",s(c)]),onClick:f=>i.$emit("select-assignment",c)},[r("div",_$,[r("span",w$,b(c.exercise_name),1),r("span",{class:ie(["status-badge",s(c)])},b(n(c)),3)]),r("div",S$,[c.classroom_name?(p(),m("span",C$,b(c.classroom_name),1)):F("",!0),c.due_at?(p(),m("span",{key:1,class:ie(["meta-item",l(c)])},b(a(c)),3)):F("",!0)]),r("div",$$,[r("div",k$,[r("div",{class:ie(["progress-fill",s(c)]),style:et({width:t(c)+"%"})},null,6)]),r("span",x$,b(c.attempted_boards)+" / "+b(c.total_boards)+" boards ",1)])],10,b$))),128))]))]))}},T$=we(A$,[["__scopeId","data-v-af7a8941"]]),N$={class:"student-lobby"},E$={__name:"StudentLobby",emits:["select-collection","select-assignment","load-file"],setup(e,{emit:t}){const s=t,n=Ke(),o=Cn(),a=E(()=>o.studentAssignments.value.length>0),l=E(()=>o.loading.value);function i(u){s("select-assignment",u)}return bt(()=>{const u=n.currentUser.value;u&&o.fetchStudentAssignments(u.id)}),(u,c)=>(p(),m("div",N$,[a.value||l.value?(p(),He(T$,{key:0,assignments:M(o).studentAssignments.value,loading:l.value,onSelectAssignment:i},null,8,["assignments","loading"])):F("",!0),ye(il,{onSelectCollection:c[0]||(c[0]=f=>u.$emit("select-collection",f)),onLoadFile:c[1]||(c[1]=f=>u.$emit("load-file",f))})]))}},O$=we(E$,[["__scopeId","data-v-3310fc38"]]),Vu="https://api.bridge-classroom.com/api",Gu="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Bo=O([]),cl=O([]),ul=O([]),wr=O(!1),Ha=O(null),I$=2*60*1e3;async function P$(e,t=!1){if(!t&&Ha.value&&Date.now()-new Date(Ha.value).getTime()<I$)return{success:!0,cached:!0};wr.value=!0;try{const s=await fetch(`${Vu}/teacher/dashboard?teacher_id=${encodeURIComponent(e)}`,{headers:{"x-api-key":Gu}});if(!s.ok)throw new Error(`Failed to fetch teacher dashboard: ${s.status}`);const n=await s.json();return Bo.value=n.classrooms||[],cl.value=n.needs_attention||[],ul.value=n.recent_activity||[],Ha.value=new Date().toISOString(),{success:!0}}catch(s){return console.error("Failed to load teacher lobby data:",s),{success:!1,error:s.message}}finally{wr.value=!1}}async function D$(e,t){try{const s=await fetch(`${Vu}/teacher/dashboard/clear`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Gu},body:JSON.stringify({teacher_id:e,panel:t})});if(!s.ok)throw new Error(`Failed to clear: ${s.status}`);return t==="attention"?cl.value=[]:t==="activity"&&(ul.value=[]),{success:!0}}catch(s){return console.error("Failed to clear panel:",s),{success:!1,error:s.message}}}function R$(){const e=E(()=>({classroomCount:Bo.value.length,openAssignmentCount:Bo.value.reduce((t,s)=>t+(s.open_assignment_count||0),0)}));return{lobbyClassrooms:Bo,needsAttention:cl,recentActivity:ul,lobbyLoading:wr,summaryStats:e,loadTeacherLobbyData:P$,clearPanel:D$}}const L$={class:"roster"},B$={class:"roster-header"},M$={class:"member-count"},U$={key:0,class:"roster-empty"},F$={key:1,class:"roster-table"},j$={class:"member-name"},H$={class:"member-email"},W$={class:"member-date"},K$={class:"member-action"},V$=["onClick","disabled"],G$={__name:"ClassroomRoster",props:{members:{type:Array,required:!0}},emits:["remove-member"],setup(e,{emit:t}){const s=t,n=O(null);function o(l){try{return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return l}}function a(l){const i=`${l.first_name} ${l.last_name}`;confirm(`Remove ${i} from this classroom?`)&&(n.value=l.student_id,s("remove-member",l.student_id),setTimeout(()=>{n.value=null},2e3))}return(l,i)=>(p(),m("div",L$,[r("div",B$,[i[0]||(i[0]=r("h4",null,"Class Roster",-1)),r("span",M$,b(e.members.length)+" "+b(e.members.length===1?"student":"students"),1)]),e.members.length===0?(p(),m("div",U$,[...i[1]||(i[1]=[r("p",null,"No students have joined yet. Share the invite link above.",-1)])])):(p(),m("table",F$,[i[2]||(i[2]=r("thead",null,[r("tr",null,[r("th",null,"Name"),r("th",null,"Email"),r("th",null,"Joined"),r("th")])],-1)),r("tbody",null,[(p(!0),m(Q,null,le(e.members,u=>(p(),m("tr",{key:u.student_id},[r("td",j$,b(u.first_name)+" "+b(u.last_name),1),r("td",H$,b(u.email),1),r("td",W$,b(o(u.joined_at)),1),r("td",K$,[r("button",{class:"remove-btn",onClick:c=>a(u),disabled:n.value===u.student_id},b(n.value===u.student_id?"Removing...":"Remove"),9,V$)])]))),128))])]))]))}},z$=we(G$,[["__scopeId","data-v-ee901be3"]]),J$={class:"header-left"},Y$={class:"classroom-name"},q$={class:"header-meta"},X$={class:"join-badge"},Q$={class:"member-count"},Z$={key:0,class:"stat-badge"},ek={key:1,class:"stat-badge completion"},tk={key:0,class:"mini-bars"},sk={class:"bar-label"},nk={class:"bar-track"},ok={class:"bar-count"},ak=["aria-label"],rk={key:0,class:"card-body"},lk={key:0,class:"classroom-desc"},ik={class:"invite-section"},ck={class:"invite-field"},uk=["value"],dk={class:"email-section"},fk={class:"email-header"},pk={class:"email-template"},vk={class:"email-body"},mk={key:1,class:"assignments-section"},hk={class:"assignment-list"},gk=["onClick"],yk={class:"assignment-name"},bk={key:0,class:"assignment-due"},_k={class:"assignment-boards"},wk={key:3,class:"loading-roster"},Sk={__name:"ClassroomCard",props:{classroom:{type:Object,required:!0},expanded:{type:Boolean,default:!1}},emits:["toggle","member-removed","view-assignment"],setup(e,{emit:t}){const s=e,n=t,o=_o(),a=Cn(),l=O(null),i=O(!1),u=O(!1),c=O(!1),f=O([]),d=E(()=>`https://bridge-classroom.com/#/join/${s.classroom.join_code}`);ot(()=>s.expanded,async $=>{if($&&!l.value){i.value=!0;const[_,S]=await Promise.all([o.fetchClassroomDetail(s.classroom.id),a.fetchClassroomAssignments(s.classroom.id)]);_!=null&&_.success&&(l.value=_.classroom),f.value=S||[],i.value=!1}});function v($){return $?new Date($).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function h($){return $.students_total?Math.round($.students_completed/$.students_total*100)+"%":"0%"}async function g(){try{await navigator.clipboard.writeText(d.value),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch{}}async function y(){const $=`Subject: Join our Bridge Classroom for practice exercises

Hi everyone,

I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons.

To join, click this link:
${d.value}

You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby.

The tool works on any device  computer, tablet, or phone  and you can practice offline too.

See you in class!`;try{await navigator.clipboard.writeText($),c.value=!0,setTimeout(()=>{c.value=!1},2e3)}catch{}}async function k($){const _=await o.removeMember(s.classroom.id,$);_!=null&&_.success&&(l.value&&(l.value.members=l.value.members.filter(S=>S.student_id!==$)),n("member-removed"))}return($,_)=>(p(),m("div",{class:ie(["classroom-card",{expanded:e.expanded}])},[r("div",{class:"card-header",onClick:_[0]||(_[0]=S=>$.$emit("toggle"))},[r("div",J$,[r("h3",Y$,b(e.classroom.name),1),r("div",q$,[r("span",X$,"JOIN: "+b(e.classroom.join_code),1),r("span",Q$,b(e.classroom.member_count)+" "+b(e.classroom.member_count===1?"student":"students"),1),e.classroom.open_assignment_count?(p(),m("span",Z$,b(e.classroom.open_assignment_count)+" "+b(e.classroom.open_assignment_count===1?"assignment":"assignments"),1)):F("",!0),e.classroom.avg_completion_pct>0?(p(),m("span",ek,b(e.classroom.avg_completion_pct)+"% avg",1)):F("",!0)]),e.classroom.assignments&&e.classroom.assignments.length?(p(),m("div",tk,[(p(!0),m(Q,null,le(e.classroom.assignments,S=>(p(),m("div",{key:S.id,class:"mini-bar"},[r("span",sk,b(S.exercise_name),1),r("div",nk,[r("div",{class:"bar-fill",style:et({width:h(S)})},null,4)]),r("span",ok,b(S.students_completed)+"/"+b(S.students_total),1)]))),128))])):F("",!0)]),r("button",{class:"expand-btn","aria-label":e.expanded?"Collapse":"Expand"},[r("span",{class:ie(["chevron",{rotated:e.expanded}])},"",2)],8,ak)]),e.expanded?(p(),m("div",rk,[e.classroom.description?(p(),m("p",lk,b(e.classroom.description),1)):F("",!0),r("div",ik,[_[2]||(_[2]=r("h4",null,"Invite Link",-1)),_[3]||(_[3]=r("p",{class:"invite-desc"},"Share this link with your students to let them join.",-1)),r("div",ck,[r("input",{type:"text",value:d.value,readonly:"",class:"invite-input",onClick:_[1]||(_[1]=S=>S.target.select())},null,8,uk),r("button",{class:"copy-btn",onClick:g},b(u.value?"Copied!":"Copy"),1)])]),r("div",dk,[r("div",fk,[_[4]||(_[4]=r("h4",null,"Email Template",-1)),r("button",{class:"copy-btn copy-btn-small",onClick:y},b(c.value?"Copied!":"Copy"),1)]),r("div",pk,[_[5]||(_[5]=r("p",null,[r("strong",null,"Subject:"),Ne(" Join our Bridge Classroom for practice exercises")],-1)),r("div",vk," Hi everyone, I've set up an online practice tool for our bridge class. You can work through bidding exercises at your own pace, and I'll be able to see your progress to help guide our lessons. To join, click this link: "+b(d.value)+" You'll need to create a free account (just your name and email). Once you've joined, you'll see any exercises I assign in your lobby. The tool works on any device  computer, tablet, or phone  and you can practice offline too. See you in class!",1)])]),f.value.length?(p(),m("div",mk,[_[7]||(_[7]=r("h4",null,"Assignments",-1)),r("div",hk,[(p(!0),m(Q,null,le(f.value,S=>(p(),m("div",{key:S.id,class:"assignment-row clickable",onClick:T=>n("view-assignment",S.id)},[r("span",yk,b(S.exercise_name),1),S.due_at?(p(),m("span",bk,"Due "+b(v(S.due_at)),1)):F("",!0),r("span",_k,b(S.total_boards)+" boards",1),_[6]||(_[6]=r("span",{class:"view-arrow"},"",-1))],8,gk))),128))])])):F("",!0),l.value?(p(),He(z$,{key:2,members:l.value.members,onRemoveMember:k},null,8,["members"])):i.value?(p(),m("div",wk," Loading roster... ")):F("",!0)])):F("",!0)],2))}},Ck=we(Sk,[["__scopeId","data-v-3dc8e5a5"]]),$k={class:"modal-content"},kk={class:"step"},xk={class:"form-group"},Ak={class:"form-group"},Tk={class:"step-actions"},Nk=["disabled"],Ek={key:0,class:"error-text"},Ok={__name:"ClassroomCreateModal",emits:["close","classroom-created"],setup(e,{emit:t}){const s=t,n=Ke(),o=_o(),a=O(""),l=O(""),i=O(!1),u=O(null);async function c(){if(!a.value.trim()||i.value)return;const f=n.currentUser.value;if(!f)return;i.value=!0,u.value=null;const d=await o.createClassroom(f.id,a.value.trim(),l.value.trim()||null);d.success?s("classroom-created",d.classroom):u.value=d.error||"Failed to create classroom",i.value=!1}return(f,d)=>(p(),m("div",{class:"modal-overlay",onClick:d[3]||(d[3]=tt(v=>f.$emit("close"),["self"]))},[r("div",$k,[r("div",kk,[d[7]||(d[7]=r("h2",null,"Create a Classroom",-1)),d[8]||(d[8]=r("p",{class:"step-desc"},"Set up a new classroom for your students.",-1)),r("div",xk,[d[4]||(d[4]=r("label",{for:"classroom-name"},"Classroom Name",-1)),We(r("input",{id:"classroom-name","onUpdate:modelValue":d[0]||(d[0]=v=>a.value=v),type:"text",placeholder:"e.g. Beginning Bridge  Spring 2026",class:"form-input",onKeyup:Go(c,["enter"])},null,544),[[St,a.value]]),d[5]||(d[5]=r("p",{class:"form-hint"},"Choose a name your students will recognize.",-1))]),r("div",Ak,[d[6]||(d[6]=r("label",{for:"classroom-desc"},[Ne("Description "),r("span",{class:"optional"},"(optional)")],-1)),We(r("textarea",{id:"classroom-desc","onUpdate:modelValue":d[1]||(d[1]=v=>l.value=v),placeholder:"e.g. Tuesdays 10am  Focus on NT openings and responses",class:"form-textarea",rows:"3"},null,512),[[St,l.value]])]),r("div",Tk,[r("button",{class:"btn btn-secondary",onClick:d[2]||(d[2]=v=>f.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!a.value.trim()||i.value,onClick:c},b(i.value?"Creating...":"Create Classroom"),9,Nk)]),u.value?(p(),m("p",Ek,b(u.value),1)):F("",!0)])])]))}},Ik=we(Ok,[["__scopeId","data-v-c26a1ae6"]]),Pn="https://api.bridge-classroom.com/api",Dn="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Is=O([]),Wa=O(null),Wt=O(!1),Ve=O(null);function Pk(){async function e(l={}){Wt.value=!0,Ve.value=null;try{const i=new URLSearchParams;l.created_by&&i.set("created_by",l.created_by),l.curriculum_path&&i.set("curriculum_path",l.curriculum_path),l.visibility&&i.set("visibility",l.visibility);const u=i.toString(),c=`${Pn}/exercises${u?"?"+u:""}`,f=await fetch(c,{headers:{"x-api-key":Dn}});if(!f.ok){const v=await f.text();return Ve.value=v||`Server error (${f.status})`,null}const d=await f.json();return d.success?Is.value=d.exercises:Ve.value=d.error||"Failed to fetch exercises",d}catch(i){return console.error("Failed to fetch exercises:",i),Ve.value="Unable to connect to server",null}finally{Wt.value=!1}}async function t(l){Wt.value=!0,Ve.value=null;try{const i=await fetch(`${Pn}/exercises/${encodeURIComponent(l)}`,{headers:{"x-api-key":Dn}});if(!i.ok){const c=await i.text();return Ve.value=c||`Server error (${i.status})`,null}const u=await i.json();return u.success?Wa.value=u.exercise:Ve.value=u.error||"Failed to fetch exercise",u}catch(i){return console.error("Failed to fetch exercise detail:",i),Ve.value="Unable to connect to server",null}finally{Wt.value=!1}}async function s({name:l,description:i,created_by:u,curriculum_path:c,visibility:f,boards:d}){Wt.value=!0,Ve.value=null;try{const v=await fetch(`${Pn}/exercises`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":Dn},body:JSON.stringify({name:l,description:i||null,created_by:u||null,curriculum_path:c||null,visibility:f||"public",boards:d})});if(!v.ok){const g=await v.text();return Ve.value=g||`Server error (${v.status})`,{success:!1,error:Ve.value}}const h=await v.json();return h.success?Is.value=[h.exercise,...Is.value]:Ve.value=h.error||"Failed to create exercise",h}catch(v){return console.error("Failed to create exercise:",v),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Wt.value=!1}}async function n(l,i){Wt.value=!0,Ve.value=null;try{const u=await fetch(`${Pn}/exercises/${encodeURIComponent(l)}`,{method:"PUT",headers:{"Content-Type":"application/json","x-api-key":Dn},body:JSON.stringify(i)});if(!u.ok){const f=await u.text();return Ve.value=f||`Server error (${u.status})`,{success:!1,error:Ve.value}}const c=await u.json();return c.success||(Ve.value=c.error||"Failed to update exercise"),c}catch(u){return console.error("Failed to update exercise:",u),Ve.value="Unable to connect to server",{success:!1,error:"Unable to connect to server"}}finally{Wt.value=!1}}async function o(l){try{const i=await fetch(`${Pn}/exercises/${encodeURIComponent(l)}`,{method:"DELETE",headers:{"x-api-key":Dn}});if(!i.ok){const c=await i.text();return Ve.value=c||`Server error (${i.status})`,{success:!1,error:Ve.value}}const u=await i.json();return u.success&&(Is.value=Is.value.filter(c=>c.id!==l)),u}catch(i){return console.error("Failed to delete exercise:",i),{success:!1,error:"Unable to connect to server"}}}function a(){Is.value=[],Wa.value=null,Wt.value=!1,Ve.value=null}return{exercises:Is,currentExercise:Wa,loading:Wt,error:Ve,fetchExercises:e,fetchExerciseDetail:t,createExercise:s,updateExercise:n,deleteExercise:o,reset:a}}const Dk={class:"modal-content"},Rk={class:"step"},Lk={class:"form-group"},Bk=["value"],Mk={key:0,class:"form-hint"},Uk={class:"form-group"},Fk={class:"target-options"},jk={class:"radio-option"},Hk={class:"radio-option"},Wk={key:0,class:"form-group"},Kk=["value"],Vk={key:1,class:"form-group"},Gk=["value"],zk={class:"form-group"},Jk={class:"step-actions"},Yk=["disabled"],qk={key:2,class:"error-text"},Xk={__name:"AssignmentCreateModal",props:{preselectedClassroomId:{type:String,default:null}},emits:["close","assignment-created"],setup(e,{emit:t}){const s=e,n=t,o=Ke(),a=Pk(),l=Cn(),i=_o(),u=wn(),c=O(""),f=O("classroom"),d=O(s.preselectedClassroomId||""),v=O(""),h=O(""),g=O(!1),y=O(null),k=E(()=>a.exercises.value),$=E(()=>a.loading.value),_=E(()=>i.teacherClassrooms.value),S=E(()=>u.students.value),T=E(()=>!(!c.value||f.value==="classroom"&&!d.value||f.value==="student"&&!v.value));async function P(){if(!T.value||g.value)return;const B=o.currentUser.value;if(!B)return;g.value=!0,y.value=null;const L=await l.createAssignment({exercise_id:c.value,classroom_id:f.value==="classroom"?d.value:null,student_id:f.value==="student"?v.value:null,assigned_by:B.id,due_at:h.value||null});L.success?n("assignment-created",L.assignment):y.value=L.error||"Failed to create assignment",g.value=!1}return bt(async()=>{a.exercises.value.length||await a.fetchExercises();const B=o.currentUser.value;B&&!i.teacherClassrooms.value.length&&await i.fetchTeacherClassrooms(B.id)}),(B,L)=>(p(),m("div",{class:"modal-overlay",onClick:L[7]||(L[7]=tt(z=>B.$emit("close"),["self"]))},[r("div",Dk,[r("div",Rk,[L[18]||(L[18]=r("h2",null,"Create Assignment",-1)),L[19]||(L[19]=r("p",{class:"step-desc"},"Assign an exercise to a classroom or individual student.",-1)),r("div",Lk,[L[9]||(L[9]=r("label",{for:"exercise-select"},"Exercise",-1)),We(r("select",{id:"exercise-select","onUpdate:modelValue":L[0]||(L[0]=z=>c.value=z),class:"form-select"},[L[8]||(L[8]=r("option",{value:""},"Select an exercise...",-1)),(p(!0),m(Q,null,le(k.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.name)+" ("+b(z.board_count)+" boards)",9,Bk))),128))],512),[[Kn,c.value]]),$.value?(p(),m("p",Mk,"Loading exercises...")):F("",!0)]),r("div",Uk,[L[12]||(L[12]=r("label",null,"Assign to",-1)),r("div",Fk,[r("label",jk,[We(r("input",{type:"radio","onUpdate:modelValue":L[1]||(L[1]=z=>f.value=z),value:"classroom"},null,512),[[Gl,f.value]]),L[10]||(L[10]=r("span",null,"Classroom",-1))]),r("label",Hk,[We(r("input",{type:"radio","onUpdate:modelValue":L[2]||(L[2]=z=>f.value=z),value:"student"},null,512),[[Gl,f.value]]),L[11]||(L[11]=r("span",null,"Individual Student",-1))])])]),f.value==="classroom"?(p(),m("div",Wk,[L[14]||(L[14]=r("label",{for:"classroom-select"},"Classroom",-1)),We(r("select",{id:"classroom-select","onUpdate:modelValue":L[3]||(L[3]=z=>d.value=z),class:"form-select"},[L[13]||(L[13]=r("option",{value:""},"Select a classroom...",-1)),(p(!0),m(Q,null,le(_.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.name)+" ("+b(z.member_count)+" students)",9,Kk))),128))],512),[[Kn,d.value]])])):F("",!0),f.value==="student"?(p(),m("div",Vk,[L[16]||(L[16]=r("label",{for:"student-select"},"Student",-1)),We(r("select",{id:"student-select","onUpdate:modelValue":L[4]||(L[4]=z=>v.value=z),class:"form-select"},[L[15]||(L[15]=r("option",{value:""},"Select a student...",-1)),(p(!0),m(Q,null,le(S.value,z=>(p(),m("option",{key:z.id,value:z.id},b(z.first_name)+" "+b(z.last_name),9,Gk))),128))],512),[[Kn,v.value]])])):F("",!0),r("div",zk,[L[17]||(L[17]=r("label",{for:"due-date"},[Ne("Due Date "),r("span",{class:"optional"},"(optional)")],-1)),We(r("input",{id:"due-date","onUpdate:modelValue":L[5]||(L[5]=z=>h.value=z),type:"date",class:"form-input"},null,512),[[St,h.value]])]),r("div",Jk,[r("button",{class:"btn btn-secondary",onClick:L[6]||(L[6]=z=>B.$emit("close"))},"Cancel"),r("button",{class:"btn btn-primary",disabled:!T.value||g.value,onClick:P},b(g.value?"Creating...":"Create Assignment"),9,Yk)]),y.value?(p(),m("p",qk,b(y.value),1)):F("",!0)])])]))}},Qk=we(Xk,[["__scopeId","data-v-5e97b847"]]),Zk={class:"modal-content"},ex={class:"modal-body"},tx={key:0,class:"loading-state"},sx={key:1,class:"error-state"},nx={class:"error-text"},ox={class:"modal-header"},ax={class:"assignment-meta"},rx={class:"meta-item"},lx={key:0,class:"meta-item"},ix={key:1,class:"meta-item"},cx={key:0,class:"progress-table-wrapper"},ux={class:"progress-table"},dx={class:"col-name"},fx={class:"col-progress"},px={class:"progress-cell"},vx={class:"progress-bar-track"},mx={class:"progress-label"},hx={class:"col-correct"},gx={key:1,class:"empty-state"},yx={key:2,class:"summary-row"},bx={key:0},_x={__name:"AssignmentDetailModal",props:{assignmentId:{type:String,required:!0}},emits:["close"],setup(e){const t=e,s=Cn(),n=O(!0),o=O(null),a=E(()=>s.currentAssignment.value),l=E(()=>{var $;const v=($=a.value)==null?void 0:$.student_progress;if(!v||v.length===0)return null;const h=v.length,g=v.filter(_=>_.attempted_boards>=_.total_boards).length,y=v.filter(_=>_.attempted_boards>0);let k=null;if(y.length>0){const _=y.reduce((S,T)=>S+T.correct_boards/T.attempted_boards*100,0);k=Math.round(_/y.length)}return{total:h,completed:g,avgAccuracy:k}});function i(v){return v?new Date(v).toLocaleDateString(void 0,{month:"short",day:"numeric"}):""}function u(v){return v.total_boards?Math.round(v.attempted_boards/v.total_boards*100)+"%":"0%"}function c(v){return v.attempted_boards>=v.total_boards?"complete":v.attempted_boards>0?"partial":""}function f(v){return v.attempted_boards===0?"":Math.round(v.correct_boards/v.attempted_boards*100)+"%"}function d(v){if(v.attempted_boards===0)return"";const h=v.correct_boards/v.attempted_boards*100;return h>=80?"accuracy-high":h>=50?"accuracy-mid":"accuracy-low"}return bt(async()=>{const v=await s.fetchAssignmentDetail(t.assignmentId);v!=null&&v.success||(o.value=s.error.value||"Failed to load assignment details"),n.value=!1}),(v,h)=>(p(),m("div",{class:"modal-overlay",onClick:h[2]||(h[2]=tt(g=>v.$emit("close"),["self"]))},[r("div",Zk,[r("div",ex,[n.value?(p(),m("div",tx,[...h[3]||(h[3]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading assignment details...",-1)])])):o.value?(p(),m("div",sx,[r("p",nx,b(o.value),1),r("button",{class:"btn btn-secondary",onClick:h[0]||(h[0]=g=>v.$emit("close"))},"Close")])):a.value?(p(),m(Q,{key:2},[r("div",ox,[r("h2",null,b(a.value.exercise_name),1),r("button",{class:"close-btn",onClick:h[1]||(h[1]=g=>v.$emit("close")),"aria-label":"Close"},"")]),r("div",ax,[r("span",rx,b(a.value.total_boards)+" "+b(a.value.total_boards===1?"board":"boards"),1),a.value.due_at?(p(),m("span",lx,"Due "+b(i(a.value.due_at)),1)):F("",!0),a.value.classroom_name?(p(),m("span",ix,b(a.value.classroom_name),1)):F("",!0)]),a.value.student_progress&&a.value.student_progress.length?(p(),m("div",cx,[r("table",ux,[h[4]||(h[4]=r("thead",null,[r("tr",null,[r("th",{class:"col-name"},"Student"),r("th",{class:"col-progress"},"Progress"),r("th",{class:"col-correct"},"Correct"),r("th",{class:"col-accuracy"},"Accuracy")])],-1)),r("tbody",null,[(p(!0),m(Q,null,le(a.value.student_progress,g=>(p(),m("tr",{key:g.student_id},[r("td",dx,b(g.first_name)+" "+b(g.last_name),1),r("td",fx,[r("div",px,[r("div",vx,[r("div",{class:ie(["progress-bar-fill",c(g)]),style:et({width:u(g)})},null,6)]),r("span",mx,b(g.attempted_boards)+"/"+b(g.total_boards),1)])]),r("td",hx,b(g.correct_boards)+"/"+b(g.total_boards),1),r("td",{class:ie(["col-accuracy",d(g)])},b(f(g)),3)]))),128))])])])):(p(),m("div",gx,[...h[5]||(h[5]=[r("p",null,"No students assigned yet.",-1)])])),l.value?(p(),m("div",yx,[r("span",null,b(l.value.completed)+"/"+b(l.value.total)+" students completed",1),l.value.avgAccuracy!==null?(p(),m("span",bx,b(l.value.avgAccuracy)+"% avg accuracy",1)):F("",!0)])):F("",!0)],64)):F("",!0)])])]))}},wx=we(_x,[["__scopeId","data-v-d654f00a"]]),Sx={class:"needs-attention"},Cx={class:"panel-header"},$x={key:0,class:"empty-state"},kx={key:1,class:"attention-list"},xx={class:"item-icon"},Ax={class:"item-text"},Tx={__name:"NeedsAttention",props:{items:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"due_soon":return"";case"low_score":return"";default:return""}}function s(o){switch(o.type){case"due_soon":{const a=n(o.due_at),l=a<=1?"tomorrow":`in ${a} days`;return`${o.exercise_name} due ${l}  ${o.lagging_count} of ${o.total_students} students haven't finished`}case"low_score":return`${o.student_name} scored ${o.accuracy_pct}% on ${o.exercise_name} in ${o.classroom_name}`;default:return""}}function n(o){if(!o)return 0;const a=new Date(o)-Date.now();return Math.max(0,Math.ceil(a/(1e3*60*60*24)))}return(o,a)=>(p(),m("div",Sx,[r("div",Cx,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Needs Attention",-1)),e.items.length?(p(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):F("",!0)]),e.items.length?(p(),m("div",kx,[(p(!0),m(Q,null,le(e.items,(l,i)=>(p(),m("div",{key:i,class:ie(["attention-item",l.type])},[r("span",xx,b(t(l.type)),1),r("span",Ax,b(s(l)),1)],2))),128))])):(p(),m("div",$x," All caught up! No items need attention. "))]))}},Nx=we(Tx,[["__scopeId","data-v-65e8ba1f"]]),Ex={class:"recent-activity"},Ox={class:"panel-header"},Ix={key:0,class:"empty-state"},Px={key:1,class:"activity-list"},Dx={class:"event-content"},Rx={class:"event-text"},Lx={class:"event-time"},Bx={__name:"RecentActivity",props:{events:{type:Array,default:()=>[]}},emits:["clear"],setup(e){function t(o){switch(o){case"assignment_completed":return"";case"student_joined":return"";default:return""}}function s(o){switch(o.type){case"assignment_completed":return`${o.student_name} completed ${o.exercise_name}`;case"student_joined":return`${o.student_name} joined ${o.classroom_name}`;default:return""}}function n(o){if(!o)return"";const a=Date.now()-new Date(o).getTime(),l=Math.floor(a/6e4);if(l<1)return"just now";if(l<60)return`${l}m ago`;const i=Math.floor(l/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}return(o,a)=>(p(),m("div",Ex,[r("div",Ox,[a[1]||(a[1]=r("h3",{class:"panel-title"},"Recent Activity",-1)),e.events.length?(p(),m("button",{key:0,class:"clear-btn",onClick:a[0]||(a[0]=l=>o.$emit("clear"))},"Clear")):F("",!0)]),e.events.length?(p(),m("div",Px,[(p(!0),m(Q,null,le(e.events,(l,i)=>(p(),m("div",{key:i,class:"activity-item"},[r("span",{class:ie(["event-icon",l.type])},b(t(l.type)),3),r("div",Dx,[r("span",Rx,b(s(l)),1),r("span",Lx,b(n(l.timestamp)),1)])]))),128))])):(p(),m("div",Ix," No recent activity. "))]))}},Mx=we(Bx,[["__scopeId","data-v-39e672f5"]]),Ux={class:"teacher-lobby"},Fx={class:"welcome-section"},jx={class:"welcome-title"},Hx={class:"welcome-subtitle"},Wx={class:"quick-actions"},Kx={key:0,class:"loading-state"},Vx={key:1,class:"dashboard-grid"},Gx={class:"left-column"},zx={key:0,class:"classrooms-section"},Jx={class:"classroom-cards"},Yx={key:1,class:"empty-state"},qx={class:"right-column"},Xx={class:"collections-section"},Qx={__name:"TeacherLobby",props:{isAdmin:{type:Boolean,default:!1}},emits:["select-collection","show-admin","load-file"],setup(e){const t=Ke(),s=R$(),n=O(!1),o=O(!1),a=O(null),l=O(null),i=E(()=>{const g=t.currentUser.value;return g?g.firstName:""}),u=E(()=>{const g=s.summaryStats.value;if(!g||g.classroomCount===0)return"Get started by creating your first classroom.";const y=[];return y.push(`${g.classroomCount} active ${g.classroomCount===1?"classroom":"classrooms"}`),g.openAssignmentCount>0&&y.push(`${g.openAssignmentCount} open ${g.openAssignmentCount===1?"assignment":"assignments"}`),y.join(", ")+"."});function c(g){l.value=l.value===g?null:g}function f(g){n.value=!1,l.value=g.id,h()}function d(){o.value=!1,h()}function v(g){const y=t.currentUser.value;y&&s.clearPanel(y.id,g)}function h(){const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id,!0)}return bt(()=>{const g=t.currentUser.value;g&&s.loadTeacherLobbyData(g.id)}),(g,y)=>(p(),m("div",Ux,[r("div",Fx,[r("h2",jx,"Welcome back, "+b(i.value),1),r("p",Hx,b(u.value),1)]),r("div",Wx,[r("button",{class:"action-btn create",onClick:y[0]||(y[0]=k=>n.value=!0)}," + New Classroom "),r("button",{class:"action-btn assign",onClick:y[1]||(y[1]=k=>o.value=!0)}," + New Assignment "),e.isAdmin?(p(),m("button",{key:0,class:"action-btn admin",onClick:y[2]||(y[2]=k=>g.$emit("show-admin"))}," Admin Panel ")):F("",!0)]),M(s).lobbyLoading.value&&!M(s).lobbyClassrooms.value.length?(p(),m("div",Kx,[...y[11]||(y[11]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):(p(),m("div",Vx,[r("div",Gx,[M(s).lobbyClassrooms.value.length?(p(),m("div",zx,[y[12]||(y[12]=r("h3",{class:"section-title"},"My Classrooms",-1)),r("div",Jx,[(p(!0),m(Q,null,le(M(s).lobbyClassrooms.value,k=>(p(),He(Ck,{key:k.id,classroom:k,expanded:l.value===k.id,onToggle:$=>c(k.id),onMemberRemoved:h,onViewAssignment:y[3]||(y[3]=$=>a.value=$)},null,8,["classroom","expanded","onToggle"]))),128))])])):(p(),m("div",Yx,[...y[13]||(y[13]=[r("p",{class:"empty-title"},"No classrooms yet",-1),r("p",{class:"empty-desc"},"Create a classroom and share the invite link with your students.",-1)])]))]),r("div",qx,[ye(Nx,{items:M(s).needsAttention.value,onClear:y[4]||(y[4]=k=>v("attention"))},null,8,["items"]),ye(Mx,{events:M(s).recentActivity.value,onClear:y[5]||(y[5]=k=>v("activity"))},null,8,["events"])])])),r("div",Xx,[y[14]||(y[14]=r("h3",{class:"section-title"},"Lesson Collections",-1)),ye(il,{onSelectCollection:y[6]||(y[6]=k=>g.$emit("select-collection",k)),onLoadFile:y[7]||(y[7]=k=>g.$emit("load-file",k))})]),n.value?(p(),He(Ik,{key:2,onClose:y[8]||(y[8]=k=>n.value=!1),onClassroomCreated:f})):F("",!0),o.value?(p(),He(Qk,{key:3,onClose:y[9]||(y[9]=k=>o.value=!1),onAssignmentCreated:d})):F("",!0),a.value?(p(),He(wx,{key:4,"assignment-id":a.value,onClose:y[10]||(y[10]=k=>a.value=null)},null,8,["assignment-id"])):F("",!0)]))}},Zx=we(Qx,[["__scopeId","data-v-364209cc"]]),zu="https://api.bridge-classroom.com/api",Ju="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",Yu=O(null),qu=O([]),Xu=O(null),Qu=O(null),Sr=O(!1),Cr=O(null),Ka=O(null),eA=60*1e3;async function Zu(e=!1){if(!e&&Ka.value&&Date.now()-new Date(Ka.value).getTime()<eA)return{success:!0,cached:!0};Sr.value=!0,Cr.value=null;try{const t=await fetch(`${zu}/admin/stats`,{headers:{"x-api-key":Ju}});if(!t.ok)throw new Error(`Failed to fetch admin stats: ${t.status}`);const s=await t.json();return Yu.value=s.stats,qu.value=s.popular_lessons||[],Xu.value=s.database,Ka.value=new Date().toISOString(),{success:!0}}catch(t){return console.error("Failed to load admin stats:",t),Cr.value=t.message,{success:!1,error:t.message}}finally{Sr.value=!1}}async function ed(){try{const e=await fetch(`${zu}/admin/health`,{headers:{"x-api-key":Ju}});if(!e.ok)throw new Error(`Failed to fetch health: ${e.status}`);const t=await e.json();return Qu.value=t.health,{success:!0}}catch(e){return console.error("Failed to load health:",e),{success:!1,error:e.message}}}async function tA(){await Promise.all([Zu(!0),ed()])}function sA(e){if(e===0)return"0 B";const t=1024,s=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+s[n]}function nA(e){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),o=[];return t>0&&o.push(`${t}d`),s>0&&o.push(`${s}h`),o.push(`${n}m`),o.join(" ")}function dl(){return{stats:Yu,popularLessons:qu,database:Xu,health:Qu,loading:Sr,error:Cr,loadStats:Zu,loadHealth:ed,refreshAll:tA,formatBytes:sA,formatUptime:nA}}const oA={class:"stats-row"},aA={class:"stat-card",style:{"border-top-color":"#2d6a4f"}},rA={class:"stat-number"},lA={class:"stat-card",style:{"border-top-color":"#1565c0"}},iA={class:"stat-number"},cA={class:"stat-card",style:{"border-top-color":"#7b1fa2"}},uA={class:"stat-number"},dA={class:"stat-card",style:{"border-top-color":"#e65100"}},fA={class:"stat-number"},pA={__name:"AdminStatsRow",props:{stats:{type:Object,default:null}},setup(e){function t(s){return s==null?"":s.toLocaleString()}return(s,n)=>{var o,a,l,i;return p(),m("div",oA,[r("div",aA,[r("div",rA,b(((o=e.stats)==null?void 0:o.total_users)??""),1),n[0]||(n[0]=r("div",{class:"stat-label"},"Total Users",-1))]),r("div",lA,[r("div",iA,b(((a=e.stats)==null?void 0:a.active_7d)??""),1),n[1]||(n[1]=r("div",{class:"stat-label"},"Active (7d)",-1))]),r("div",cA,[r("div",uA,b(t((l=e.stats)==null?void 0:l.observation_count_7d)),1),n[2]||(n[2]=r("div",{class:"stat-label"},"Observations (7d)",-1))]),r("div",dA,[r("div",fA,b(((i=e.stats)==null?void 0:i.active_today)??""),1),n[3]||(n[3]=r("div",{class:"stat-label"},"Active Today",-1))])])}}},vA=we(pA,[["__scopeId","data-v-a14a2199"]]),mA={class:"popular-lessons"},hA={key:0,class:"empty-state"},gA={key:1,class:"table-wrap"},yA={class:"lessons-table"},bA={class:"lesson-name"},_A={class:"num-col"},wA={class:"num-col"},SA={class:"num-col"},CA={__name:"PopularLessons",props:{lessons:{type:Array,default:()=>[]}},setup(e){function t(n){if(!n)return"Unknown";const o=n.split("/");return o[o.length-1].replace(/-/g," ")}function s(n){return n>=70?"high":n>=50?"mid":"low"}return(n,o)=>(p(),m("div",mA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"Popular Lessons",-1)),e.lessons.length?(p(),m("div",gA,[r("table",yA,[o[0]||(o[0]=r("thead",null,[r("tr",null,[r("th",null,"Lesson"),r("th",{class:"num-col"},"Plays"),r("th",{class:"num-col"},"Users"),r("th",{class:"num-col"},"Accuracy")])],-1)),r("tbody",null,[(p(!0),m(Q,null,le(e.lessons.slice(0,15),a=>(p(),m("tr",{key:a.deal_subfolder},[r("td",bA,b(t(a.deal_subfolder)),1),r("td",_A,b(a.play_count.toLocaleString()),1),r("td",wA,b(a.unique_users),1),r("td",SA,[r("span",{class:ie(["accuracy-badge",s(a.accuracy_pct)])},b(a.accuracy_pct)+"% ",3)])]))),128))])])])):(p(),m("div",hA,"No lesson data yet."))]))}},$A=we(CA,[["__scopeId","data-v-079bd4f8"]]),kA={class:"database-panel"},xA={key:0,class:"empty-state"},AA={class:"db-size"},TA={class:"tables-table"},NA={class:"table-name"},EA={class:"num-col"},OA={__name:"DatabasePanel",props:{database:{type:Object,default:null}},setup(e){const{formatBytes:t}=dl();return(s,n)=>(p(),m("div",kA,[n[2]||(n[2]=r("h3",{class:"panel-title"},"Database",-1)),e.database?(p(),m(Q,{key:1},[r("div",AA,[n[0]||(n[0]=Ne(" SQLite file: ",-1)),r("strong",null,b(M(t)(e.database.file_size_bytes)),1)]),r("table",TA,[n[1]||(n[1]=r("thead",null,[r("tr",null,[r("th",null,"Table"),r("th",{class:"num-col"},"Rows")])],-1)),r("tbody",null,[(p(!0),m(Q,null,le(e.database.tables,o=>(p(),m("tr",{key:o.name},[r("td",NA,b(o.name),1),r("td",EA,b(o.row_count.toLocaleString()),1)]))),128))])])],64)):(p(),m("div",xA,"Loading..."))]))}},IA=we(OA,[["__scopeId","data-v-d5945aff"]]),PA={class:"system-health"},DA={class:"health-header"},RA=["disabled"],LA={key:0,class:"empty-state"},BA={key:1,class:"health-rows"},MA={class:"health-row"},UA={class:"health-value"},FA={class:"health-row"},jA={class:"health-value"},HA={class:"health-row"},WA={class:"health-value"},KA={class:"health-row"},VA={class:"health-value"},GA={class:"health-row"},zA={class:"health-value"},JA={__name:"SystemHealth",props:{health:{type:Object,default:null},refreshing:{type:Boolean,default:!1}},emits:["refresh"],setup(e){const{formatUptime:t}=dl();function s(n){if(!n)return"";const o=Date.now()-new Date(n).getTime(),a=Math.floor(o/6e4);if(a<1)return"just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}return(n,o)=>(p(),m("div",PA,[r("div",DA,[o[1]||(o[1]=r("h3",{class:"panel-title"},"System Health",-1)),r("button",{class:"refresh-btn",onClick:o[0]||(o[0]=a=>n.$emit("refresh")),disabled:e.refreshing},b(e.refreshing?"Refreshing...":"Refresh"),9,RA)]),e.health?(p(),m("div",BA,[r("div",MA,[o[2]||(o[2]=r("span",{class:"status-dot green"},null,-1)),o[3]||(o[3]=r("span",{class:"health-label"},"API Server",-1)),r("span",UA,"Up "+b(M(t)(e.health.uptime_seconds)),1)]),r("div",FA,[r("span",{class:ie(["status-dot",e.health.database_writable?"green":"red"])},null,2),o[4]||(o[4]=r("span",{class:"health-label"},"Database",-1)),r("span",jA,b(e.health.database_writable?"Writable":"Error"),1)]),r("div",HA,[r("span",{class:ie(["status-dot",e.health.last_observation_at?"green":"yellow"])},null,2),o[5]||(o[5]=r("span",{class:"health-label"},"Last Observation",-1)),r("span",WA,b(e.health.last_observation_at?s(e.health.last_observation_at):"None"),1)]),r("div",KA,[o[6]||(o[6]=r("span",{class:"status-dot green"},null,-1)),o[7]||(o[7]=r("span",{class:"health-label"},"Disk",-1)),r("span",VA,b(e.health.disk_available_gb)+" GB / "+b(e.health.disk_total_gb)+" GB available",1)]),r("div",GA,[o[8]||(o[8]=r("span",{class:"status-dot blue"},null,-1)),o[9]||(o[9]=r("span",{class:"health-label"},"API Version",-1)),r("span",zA,"v"+b(e.health.api_version),1)])])):(p(),m("div",LA,"Loading..."))]))}},YA=we(JA,[["__scopeId","data-v-0d4e96d5"]]),qA={class:"admin-lobby"},XA={class:"admin-header"},QA={key:0,class:"admin-subtitle"},ZA={key:0,class:"loading-state"},e2={key:1,class:"error-state"},t2={class:"announcement-section"},s2={class:"announcement-info"},n2=["innerHTML"],o2={key:0,class:"announcement-expires"},a2={key:1,class:"announcement-expires"},r2={class:"announcement-actions"},l2=["disabled"],i2={key:1,class:"announcement-form"},c2={class:"form-row"},u2=["disabled"],d2={class:"content-grid"},f2={class:"name-correction-section"},p2={class:"search-row"},v2=["disabled"],m2={key:0,class:"search-results"},h2=["onClick"],g2={class:"result-name"},y2={class:"result-email"},b2={key:0,class:"corrected-badge"},_2={key:1,class:"no-results"},w2={key:2,class:"edit-form"},S2={class:"edit-row"},C2={class:"edit-field"},$2={class:"edit-field"},k2=["disabled"],x2={key:0,class:"save-feedback success"},A2={key:1,class:"save-feedback error"},T2={class:"decrypt-section"},N2={class:"decrypt-actions"},E2=["disabled"],O2={key:0,class:"decrypt-progress"},I2={key:0},P2={key:0},D2={key:1},R2={key:1},L2={key:2,class:"decrypt-hint"},B2={__name:"AdminLobby",emits:["back"],setup(e){const t=dl(),s=ll(),n=O(!1),o=O(""),a=O("info"),l=O(""),i=O(!1),u=O(!1),c=O(!1);function f(){const A=s.announcement.value;if(A){if(o.value=A.message,a.value=A.type,A.expires_at){const w=new Date(A.expires_at);l.value=new Date(w.getTime()-w.getTimezoneOffset()*6e4).toISOString().slice(0,16)}else l.value="";c.value=!0}}function d(){c.value=!1,o.value="",a.value="info",l.value=""}async function v(){if(o.value.trim()){i.value=!0;try{const A=l.value?new Date(l.value).toISOString():null;await s.setAnnouncement(o.value.trim(),a.value,A),o.value="",a.value="info",l.value="",c.value=!1}catch(A){console.error("Failed to publish announcement:",A)}finally{i.value=!1}}}async function h(){u.value=!0;try{await s.clearAnnouncement()}catch(A){console.error("Failed to clear announcement:",A)}finally{u.value=!1}}function g(A){return A?new Date(A).toLocaleString():""}const y={red:{bg:"#ef5350",fg:"white"},yellow:{bg:"#ffeb3b",fg:"#333"},orange:{bg:"#ff9800",fg:"white"},green:{bg:"#4caf50",fg:"white"},grey:{bg:"#ccc",fg:"#666"}};function k(A){return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/:(\w+):/g,(X,be)=>{const Ae=y[be.toLowerCase()];return Ae?`<span class="ann-circle" style="background:${Ae.bg};color:${Ae.fg}"></span>`:X})}const $="https://api.bridge-classroom.com/api",_="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",S=O(""),T=O([]),P=O(!1),B=O(!1),L=O(null),z=O(""),K=O(""),ue=O(!1),me=O(!1),fe=O("");async function Se(){if(S.value.trim()){B.value=!0,P.value=!1,T.value=[],L.value=null,me.value=!1,fe.value="";try{const A=await fetch(`${$}/admin/users/search?q=${encodeURIComponent(S.value.trim())}`,{headers:{"x-api-key":_}});if(!A.ok)throw new Error(`Search failed: ${A.status}`);const w=await A.json();T.value=w.users||[]}catch(A){console.error("User search failed:",A)}finally{B.value=!1,P.value=!0}}}function xe(A){L.value=A,z.value=A.first_name,K.value=A.last_name,me.value=!1,fe.value=""}async function de(){if(!(!L.value||!z.value.trim()||!K.value.trim())){ue.value=!0,me.value=!1,fe.value="";try{const A=await fetch(`${$}/admin/users/${encodeURIComponent(L.value.id)}`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":_},body:JSON.stringify({first_name:z.value.trim(),last_name:K.value.trim()})});if(!A.ok)throw new Error(`Save failed: ${A.status}`);const w=await A.json();w.success&&(me.value=!0,L.value.first_name=w.user.first_name,L.value.last_name=w.user.last_name,L.value.name_corrected_at=w.user.name_corrected_at)}catch(A){fe.value=A.message}finally{ue.value=!1}}}const pe=O(!1),Z=O(null);async function ee(){pe.value=!0,Z.value=null;try{const A=await fetch(`${$}/admin/decrypt-observations`,{method:"POST",headers:{"x-api-key":_}});if(!A.ok){const w=await A.text();Z.value={success:!1,error:`HTTP ${A.status}: ${w}`};return}Z.value=await A.json()}catch(A){Z.value={success:!1,error:A.message}}finally{pe.value=!1}}async function ve(){await Promise.all([t.loadStats(),t.loadHealth()])}async function q(){n.value=!0,await t.refreshAll(),n.value=!1}return bt(ve),(A,w)=>(p(),m("div",qA,[r("div",XA,[r("button",{class:"back-btn",onClick:w[0]||(w[0]=X=>A.$emit("back"))}," Back to Dashboard"),w[7]||(w[7]=r("h2",{class:"admin-title"},"Admin Dashboard",-1)),M(t).stats.value?(p(),m("p",QA,b(M(t).stats.value.total_observations.toLocaleString())+" total observations across "+b(M(t).stats.value.total_users)+" users ",1)):F("",!0)]),M(t).loading.value&&!M(t).stats.value?(p(),m("div",ZA,[...w[8]||(w[8]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading dashboard...",-1)])])):M(t).error.value?(p(),m("div",e2,[r("p",null,b(M(t).error.value),1),r("button",{class:"retry-btn",onClick:ve},"Retry")])):M(t).stats.value?(p(),m(Q,{key:2},[r("div",t2,[w[10]||(w[10]=r("h3",{class:"section-title"},"Site Announcement",-1)),M(s).announcement.value&&!c.value?(p(),m("div",{key:0,class:ie(["current-announcement",M(s).announcement.value.type])},[r("div",s2,[r("span",{class:ie(["announcement-type-badge",M(s).announcement.value.type])},b(M(s).announcement.value.type),3),r("span",{class:"announcement-message",innerHTML:k(M(s).announcement.value.message)},null,8,n2),M(s).announcement.value.expires_at?(p(),m("span",o2," Expires: "+b(g(M(s).announcement.value.expires_at)),1)):(p(),m("span",a2,"No expiration"))]),r("div",r2,[r("button",{class:"edit-btn",onClick:f},"Edit"),r("button",{class:"clear-btn",onClick:h,disabled:u.value},b(u.value?"Clearing...":"Clear"),9,l2)])],2)):c.value||!M(s).announcement.value?(p(),m("div",i2,[We(r("input",{"onUpdate:modelValue":w[1]||(w[1]=X=>o.value=X),type:"text",class:"announcement-input",placeholder:"Enter announcement message...",onKeydown:Go(v,["enter"])},null,544),[[St,o.value]]),r("div",c2,[We(r("select",{"onUpdate:modelValue":w[2]||(w[2]=X=>a.value=X),class:"type-select"},[...w[9]||(w[9]=[r("option",{value:"info"},"Info",-1),r("option",{value:"warning"},"Warning",-1),r("option",{value:"urgent"},"Urgent",-1)])],512),[[Kn,a.value]]),We(r("input",{"onUpdate:modelValue":w[3]||(w[3]=X=>l.value=X),type:"datetime-local",class:"expiry-input",title:"Optional expiration date"},null,512),[[St,l.value]]),c.value?(p(),m("button",{key:0,class:"cancel-btn",onClick:d},"Cancel")):F("",!0),r("button",{class:"publish-btn",onClick:v,disabled:!o.value.trim()||i.value},b(i.value?"Publishing...":c.value?"Update":"Publish"),9,u2)])])):F("",!0)]),ye(vA,{stats:M(t).stats.value},null,8,["stats"]),r("div",d2,[ye($A,{lessons:M(t).popularLessons.value},null,8,["lessons"]),ye(IA,{database:M(t).database.value},null,8,["database"])]),ye(YA,{health:M(t).health.value,refreshing:n.value,onRefresh:q},null,8,["health","refreshing"]),r("div",f2,[w[13]||(w[13]=r("h3",{class:"section-title"},"Correct User Name",-1)),r("div",p2,[We(r("input",{"onUpdate:modelValue":w[4]||(w[4]=X=>S.value=X),type:"text",class:"search-input",placeholder:"Search by name or email...",onKeydown:Go(Se,["enter"])},null,544),[[St,S.value]]),r("button",{class:"search-btn",onClick:Se,disabled:B.value||!S.value.trim()},b(B.value?"Searching...":"Search"),9,v2)]),T.value.length?(p(),m("div",m2,[(p(!0),m(Q,null,le(T.value,X=>(p(),m("div",{key:X.id,class:ie(["search-result-item",{selected:L.value&&L.value.id===X.id}]),onClick:be=>xe(X)},[r("span",g2,b(X.first_name)+" "+b(X.last_name),1),r("span",y2,b(X.email),1),X.name_corrected_at?(p(),m("span",b2,"corrected")):F("",!0)],10,h2))),128))])):F("",!0),P.value&&!T.value.length?(p(),m("div",_2,' No users found for "'+b(S.value)+'" ',1)):F("",!0),L.value?(p(),m("div",w2,[r("div",S2,[r("div",C2,[w[11]||(w[11]=r("label",null,"First Name",-1)),We(r("input",{"onUpdate:modelValue":w[5]||(w[5]=X=>z.value=X),type:"text",class:"edit-input"},null,512),[[St,z.value]])]),r("div",$2,[w[12]||(w[12]=r("label",null,"Last Name",-1)),We(r("input",{"onUpdate:modelValue":w[6]||(w[6]=X=>K.value=X),type:"text",class:"edit-input"},null,512),[[St,K.value]])]),r("button",{class:"save-btn",onClick:de,disabled:ue.value||!z.value.trim()||!K.value.trim()},b(ue.value?"Saving...":"Save"),9,k2)]),me.value?(p(),m("p",x2,"Name corrected successfully.")):F("",!0),fe.value?(p(),m("p",A2,b(fe.value),1)):F("",!0)])):F("",!0)]),r("div",T2,[w[19]||(w[19]=r("h3",{class:"section-title"},"Observation Decryption",-1)),w[20]||(w[20]=r("p",{class:"decrypt-description"},[Ne(" Decrypt all observations using RECOVERY_SECRET and populate the "),r("code",null,"observations_decrypted"),Ne(" table for inspection and backfill. ")],-1)),r("div",N2,[r("button",{class:"decrypt-btn",onClick:ee,disabled:pe.value},b(pe.value?"Decrypting...":"Decrypt All Observations"),9,E2)]),pe.value?(p(),m("div",O2,[...w[14]||(w[14]=[r("div",{class:"spinner"},null,-1),r("p",null,"Processing observations (this may take a minute)...",-1)])])):F("",!0),Z.value?(p(),m("div",{key:1,class:ie(["decrypt-result",{error:!Z.value.success}])},[Z.value.success?(p(),m("p",I2,[w[15]||(w[15]=Ne(" Decrypted ",-1)),r("strong",null,b(Z.value.observations_decrypted.toLocaleString()),1),w[16]||(w[16]=Ne(" observations from ",-1)),r("strong",null,b(Z.value.users_processed),1),w[17]||(w[17]=Ne(" users. ",-1)),Z.value.users_skipped?(p(),m("span",P2," ("+b(Z.value.users_skipped)+" users skipped  no recovery key)",1)):F("",!0),Z.value.errors?(p(),m("span",D2," | "+b(Z.value.errors)+" errors",1)):F("",!0)])):(p(),m("p",R2,"Decryption failed: "+b(Z.value.error),1)),Z.value.success?(p(),m("p",L2,[...w[18]||(w[18]=[Ne(" Results in ",-1),r("code",null,"observations_decrypted",-1),Ne(" table. Query via SQLite to inspect. ",-1)])])):F("",!0)],2)):F("",!0)])],64)):F("",!0)]))}},M2=we(B2,[["__scopeId","data-v-a782c5e0"]]),U2={class:"lobby-view"},F2={__name:"LobbyView",emits:["select-collection","select-assignment","show-become-teacher","load-file"],setup(e){const t=Ke(),s=Cn(),n=O(!1),o=E(()=>{const i=t.currentUser.value;return(i==null?void 0:i.role)||"student"}),a=E(()=>s.studentAssignments.value.length>0),l=E(()=>{const i=t.currentUser.value;return Array.isArray(i==null?void 0:i.classrooms)&&i.classrooms.length>0});return bt(()=>{const i=t.currentUser.value;i&&o.value==="student"&&s.fetchStudentAssignments(i.id)}),(i,u)=>(p(),m("div",U2,[n.value?(p(),He(M2,{key:0,onBack:u[0]||(u[0]=c=>n.value=!1)})):o.value==="admin"||o.value==="teacher"?(p(),He(Zx,{key:1,"is-admin":o.value==="admin",onSelectCollection:u[1]||(u[1]=c=>i.$emit("select-collection",c)),onShowAdmin:u[2]||(u[2]=c=>n.value=!0),onLoadFile:u[3]||(u[3]=c=>i.$emit("load-file",c))},null,8,["is-admin"])):a.value||l.value?(p(),He(O$,{key:2,onSelectCollection:u[4]||(u[4]=c=>i.$emit("select-collection",c)),onSelectAssignment:u[5]||(u[5]=c=>i.$emit("select-assignment",c)),onLoadFile:u[6]||(u[6]=c=>i.$emit("load-file",c))})):(p(),He(v$,{key:3,onSelectCollection:u[7]||(u[7]=c=>i.$emit("select-collection",c)),onShowBecomeTeacher:u[8]||(u[8]=c=>i.$emit("show-become-teacher")),onLoadFile:u[9]||(u[9]=c=>i.$emit("load-file",c))}))]))}},j2=we(F2,[["__scopeId","data-v-d84f343d"]]),H2={class:"modal-content"},W2={key:0,class:"step step-overview"},K2={class:"step-actions"},V2={key:1,class:"step step-agreement"},G2={class:"agreement-checkbox"},z2={class:"step-actions"},J2=["disabled"],Y2={key:0,class:"error-text"},q2={key:2,class:"step step-confirmation"},X2={class:"step-actions"},Q2={__name:"BecomeTeacherModal",emits:["close","activated"],setup(e){const t="https://api.bridge-classroom.com/api",s="8a3ccc23767bdcbe6bb1709dfe3f20194dc0b8b4874939244e802dc71a21a568",n=Ke(),o=O(1),a=O(!1),l=O(!1),i=O(null);async function u(){const c=n.currentUser.value;if(c){l.value=!0,i.value=null;try{const d=await(await fetch(`${t}/users/me`,{method:"PATCH",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({user_id:c.id,action:"become_teacher"})})).json();if(!d.success){i.value=d.error||"Failed to upgrade account";return}n.updateUser(c.id,{role:"teacher"});try{const{publicKey:v,privateKey:h}=await cm();await fetch(`${t}/viewers`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({name:`${c.firstName} ${c.lastName}`,email:c.email,public_key:v,private_key:h,role:"teacher"})}),n.updateUser(c.id,{viewerPrivateKey:h}),sessionStorage.setItem("bridgeTeacherSession",JSON.stringify({privateKeyBase64:h,expiry:new Date(Date.now()+8*60*60*1e3).toISOString()}))}catch(v){console.warn("Failed to create viewer record:",v)}o.value=3}catch(f){console.error("Teacher activation failed:",f),i.value="Unable to connect to server. Please try again."}finally{l.value=!1}}}return(c,f)=>(p(),m("div",{class:"modal-overlay",onClick:f[5]||(f[5]=tt(d=>c.$emit("close"),["self"]))},[r("div",H2,[o.value===1?(p(),m("div",W2,[f[6]||(f[6]=no('<h2 data-v-8bdcc044>Become a Teacher</h2><p class="step-desc" data-v-8bdcc044>Unlock classroom management tools to track your students&#39; progress.</p><div class="capabilities" data-v-8bdcc044><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Create Classrooms</strong><p data-v-8bdcc044>Organize students into classes with invite links.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Assign Exercises</strong><p data-v-8bdcc044>Assign curated board sets to your class or individual students.</p></div></div><div class="capability" data-v-8bdcc044><span class="capability-icon" data-v-8bdcc044></span><div data-v-8bdcc044><strong data-v-8bdcc044>Track Progress</strong><p data-v-8bdcc044>See which boards students have completed and their accuracy.</p></div></div></div><div class="note-box" data-v-8bdcc044><strong data-v-8bdcc044>Still a Student Too</strong><p data-v-8bdcc044>Teachers keep full access to all lessons, exercises, and practice tools.</p></div>',4)),r("div",K2,[r("button",{class:"btn btn-secondary",onClick:f[0]||(f[0]=d=>c.$emit("close"))},"Not Now"),r("button",{class:"btn btn-primary",onClick:f[1]||(f[1]=d=>o.value=2)},"Continue ")])])):o.value===2?(p(),m("div",V2,[f[8]||(f[8]=no('<h2 data-v-8bdcc044>Teacher Agreement</h2><p class="step-desc" data-v-8bdcc044>Please review and accept the terms below.</p><div class="terms-scroll" data-v-8bdcc044><h4 data-v-8bdcc044>Service Availability</h4><p data-v-8bdcc044>Bridge Classroom is provided as a free educational tool on an &quot;as-is&quot; basis. There is no guarantee of uptime, availability, or continued operation. The service may be modified or discontinued at any time without notice.</p><h4 data-v-8bdcc044>Data &amp; Storage</h4><p data-v-8bdcc044>While we take reasonable care with data, there is no warranty on data preservation. Teachers are encouraged to export important data regularly. Student observations are encrypted end-to-end.</p><h4 data-v-8bdcc044>Student Data &amp; Privacy</h4><p data-v-8bdcc044>As a teacher, you will be able to see practice observations (which exercises students have completed and their accuracy) for students in your classrooms. You agree to:</p><ul data-v-8bdcc044><li data-v-8bdcc044>Use student data for educational purposes only</li><li data-v-8bdcc044>Not share student data publicly or with unauthorized parties</li><li data-v-8bdcc044>Respect that students can revoke your access at any time</li></ul><h4 data-v-8bdcc044>Your Responsibilities</h4><p data-v-8bdcc044>Teachers manage their own classrooms, communication, and student relationships. Bridge Classroom provides the tools but does not mediate teacher-student interactions.</p><h4 data-v-8bdcc044>No Warranty</h4><p data-v-8bdcc044>The service is provided &quot;as is&quot; without warranty of any kind, express or implied. In no event shall the developers be liable for any damages arising from the use of this service.</p><h4 data-v-8bdcc044>Open Source</h4><p data-v-8bdcc044>Bridge Classroom is open source software. The source code is available on GitHub.</p></div>',3)),r("label",G2,[We(r("input",{type:"checkbox","onUpdate:modelValue":f[2]||(f[2]=d=>a.value=d)},null,512),[[Kr,a.value]]),f[7]||(f[7]=r("span",null,"I have read and agree to the terms above. I understand that Bridge Classroom is a free, as-is service with no guarantees of uptime or data preservation.",-1))]),r("div",z2,[r("button",{class:"btn btn-secondary",onClick:f[3]||(f[3]=d=>o.value=1)}," Back"),r("button",{class:"btn btn-primary",disabled:!a.value||l.value,onClick:u},b(l.value?"Activating...":"Activate Teacher Account"),9,J2)]),i.value?(p(),m("p",Y2,b(i.value),1)):F("",!0)])):o.value===3?(p(),m("div",q2,[f[9]||(f[9]=r("div",{class:"success-icon"},"",-1)),f[10]||(f[10]=r("h2",null,"You're a Teacher!",-1)),f[11]||(f[11]=r("p",{class:"step-desc"},"Your account has been upgraded. Here's what to do next:",-1)),f[12]||(f[12]=r("ol",{class:"next-steps"},[r("li",null,"Create your first classroom from the teacher dashboard"),r("li",null,"Share the invite link with your students"),r("li",null,"Browse exercises and assign them to your class")],-1)),r("div",X2,[r("button",{class:"btn btn-primary",onClick:f[4]||(f[4]=d=>c.$emit("activated"))},"Go to Dashboard ")])])):F("",!0)])]))}},Z2=we(Q2,[["__scopeId","data-v-8bdcc044"]]),eT={},tT={class:"page-footer"};function sT(e,t){return p(),m("footer",tT,[...t[0]||(t[0]=[r("span",{class:"footer-brand"},"Bridge Classroom  Free educational tool  Provided as-is",-1),r("nav",{class:"footer-links"},[r("a",{href:"https://discord.gg/7PGejFZn",target:"_blank",rel:"noopener"},"Discord"),r("a",{href:"https://github.com/Rick-Wilson/Bridge-Classroom",target:"_blank",rel:"noopener"},"GitHub")],-1)])])}const nT=we(eT,[["render",sT],["__scopeId","data-v-1b649814"]]),oT={key:1,class:"app"},aT={class:"app-header"},rT={class:"header-right"},lT=["title"],iT={key:3,class:"stats"},cT={class:"correct"},uT={class:"wrong"},dT={class:"user-avatar-group"},fT=["title"],pT=["title"],vT={class:"app-main"},mT={key:3,class:"collection-view"},hT={key:4,class:"practice-layout"},gT={class:"practice-left"},yT={class:"practice-right"},bT={key:1,class:"commentary-panel"},_T=["innerHTML"],wT=["innerHTML"],ST=["innerHTML"],CT=["innerHTML"],$T={class:"commentary-controls"},kT={key:0,class:"bidding-box-wrapper"},xT={key:1,class:"card-choice-prompt"},AT=["innerHTML"],TT={key:3,class:"completion-controls"},NT={key:0,class:"registration-toast"},ET={__name:"MainLayout",setup(e){const t=Hv(),s=mo(),n=Ke(),o=ya(),a=Mu(),l=wn(),i=ll(),u=Cn(),c=Zm(),f=O(!1),d=O(!1),v=O(!1),h=O(!1),g=O(null),y=O(""),k=O(null),$=O(null),_=O(null),S=O(!1),T=O({}),P=wa(),B=O(null),L=O(!1),z=O(!1),K=O(null);function ue(D,j=".current"){if(!D)return;const se=D.querySelector(j);se&&(D.scrollTop=se.offsetTop-D.offsetTop)}ot(()=>c.currentStepIndex.value,()=>{Zn(()=>{ue(k.value,".narrative-text.current")})}),ot(()=>c.isComplete.value,D=>{D&&Zn(()=>{ue(k.value,".narrative-text.current")})});const me=E(()=>n.isAuthenticated.value),fe=E(()=>{const D=n.currentUser.value;return D?`${D.firstName} ${D.lastName}`:""}),Se=E(()=>{const D=n.currentUser.value;return D?`${D.firstName.charAt(0)}${D.lastName.charAt(0)}`.toUpperCase():"?"}),xe=E(()=>{const D=n.currentUser.value;return(D==null?void 0:D.role)||"student"}),de=E(()=>s.teacherName.value?`${s.teacherName.value}'s Bridge Classroom`:"Bridge Classroom");let pe=null;bt(()=>{i.loadAnnouncement(),pe=setInterval(()=>i.loadAnnouncement(),5*60*1e3)}),Ur(()=>{pe&&clearInterval(pe)}),bt(async()=>{s.initializeFromUrl(),n.initialize();const D=new URLSearchParams(window.location.search);D.get("recover")&&D.get("user_id")&&n.isAuthenticated.value&&(n.currentUserId.value=null),o.initializeFromUrl(),c.observationStore.initialize();const j=s.getCollectionFromUrl(),se=s.getLessonFromUrl();j&&($.value=j,se&&await Y(j,se)),n.isAuthenticated.value&&(await a.initialize(),await n.syncRole(),_s().initialize(),await l.checkTeacherStatus())});async function Z(D){console.log("User ready:",D.firstName,D.lastName),n.showKeyBackupModal.value&&(n.dismissKeyBackupModal(),z.value=!0,setTimeout(()=>{z.value=!1},4e3)),await a.initialize(),_s().initialize(),await l.checkTeacherStatus();const se=sessionStorage.getItem("pendingJoinCode");if(se){sessionStorage.removeItem("pendingJoinCode"),t.push({name:"join",params:{joinCode:se}});return}}function ee(){_s().reset(),tl().clearCache(),us().reset(),l.reset(),q.value=[],A.value=0,$.value=null,_.value=null,c.resetStats(),s.setCollectionInUrl(null),s.setLessonInUrl(null),n.currentUserId.value=null,f.value=!1,h.value=!1,g.value=null}async function ve(){S.value=!1,await l.checkTeacherStatus()}const q=O([]),A=O(0),w=E(()=>q.value[A.value]||null),X=E(()=>{var re;const D=U($.value),j=D!=null&&D.name?`${D.name} - `:"";if((re=_.value)!=null&&re.name)return j+_.value.name;if(!w.value)return"";const se=w.value.subfolder||w.value.category||"";return se?j+se:""});ot(A,()=>{w.value&&(c.loadDeal(w.value),s.setDealInUrl(w.value.boardNumber))},{flush:"sync"}),ot(()=>c.observationStore.pendingCount.value,(D,j)=>{D>j&&a.triggerSync()}),ot(()=>c.isComplete.value,D=>{if(D&&w.value){const j=w.value.boardNumber,se=c.boardState.boardHadWrong,re=se&&Object.keys(c.boardState.wrongStepIndices).length===0,he=se?re?"yellow":"red":"green";T.value={...T.value,[j]:he}}}),ot(()=>P.cacheVersion.value,()=>{T.value={}});async function be(D){const j=D.target.files[0];if(j)try{const se=await j.text(),re=ko(se);if(re.length>0){const he=j.name.replace(/\.pbn$/i,""),Ee=re.map(_e=>({..._e,subfolder:_e.subfolder||he,category:_e.category||he}));q.value=Ee,A.value=0,c.loadDeal(Ee[0]),c.resetStats(),ys().saveLessonBoardNumbers(he,Ee.map(_e=>_e.boardNumber)),_.value={id:he,name:he,category:he}}else alert("No deals found in the PBN file")}catch(se){console.error("Error loading PBN file:",se),alert("Error loading PBN file: "+se.message)}}function Ae({subfolder:D,name:j,category:se,content:re}){const he=ko(re);if(he.length>0){const Ee=he.map(_e=>({..._e,subfolder:_e.subfolder||D,category:_e.category||se}));q.value=Ee,A.value=0,c.loadDeal(Ee[0]),c.resetStats(),ys().saveLessonBoardNumbers(D,Ee.map(_e=>_e.boardNumber)),_.value={id:D,name:j,category:se},s.setLessonInUrl(D),L.value=!1,te()}else alert("No deals found in the lesson file")}const $e=E(()=>c.boardState.correctCount),W=E(()=>c.boardState.wrongCount);function ne(D){const j=c.makeBid(D);w.value&&ce(j)}function ae({seat:D,suit:j,rank:se}){const re=c.makeCardChoice(j,se);w.value&&ce(re)}function ce(D){const j=w.value.boardNumber;if(!D)T.value={...T.value,[j]:"red"};else if(c.boardState.boardHadWrong){const se=Object.keys(c.boardState.wrongStepIndices).length===0;T.value={...T.value,[j]:se?"yellow":"red"}}}function ke(){c.clearCardFeedback(),c.goBack()}function C(){A.value<q.value.length-1&&(A.value++,c.loadDeal(q.value[A.value]))}function x(D){D>=0&&D<q.value.length&&(A.value=D,c.loadDeal(q.value[D]))}async function R({subfolder:D,dealNumber:j}){var se;if(((se=_.value)==null?void 0:se.id)===D&&q.value.length>0){const re=q.value.findIndex(he=>he.boardNumber===j);if(re>=0){x(re);return}}for(const re of s.COLLECTIONS)try{const he=D.includes("/")?D.split("/").pop():D,Ee=`${re.baseUrl}/${he}.pbn`,Te=await fetch(Ee);if(!Te.ok)continue;const _e=await Te.text();$.value=re.id,s.setCollectionInUrl(re.id),Ae({subfolder:D,name:D,category:"",content:_e});const it=q.value.findIndex(At=>At.boardNumber===j);it>=0&&x(it);return}catch{}}function V(D){v.value=!1,h.value=!1,g.value=null,R(D)}function J(D,j){h.value=!1,g.value=null,R({subfolder:D,dealNumber:j||1})}function G(){_.value=null,s.setLessonInUrl(null),q.value=[],A.value=0,c.resetStats(),L.value=!1,B.value=null,h.value=!1,g.value=null}function oe(){$.value=null,_.value=null,s.setCollectionInUrl(null),s.setLessonInUrl(null),q.value=[],A.value=0,c.resetStats(),L.value=!1,B.value=null,h.value=!1,g.value=null}async function te(){if(B.value=null,!$.value||!_.value)return;const D=U($.value);if(!D)return;const j=_.value.id,se=j.includes("/")?j.split("/").pop():j,re=`${D.baseUrl}/${se}_Intro.pdf`;try{(await fetch(re,{method:"HEAD"})).ok&&(B.value=re)}catch{}}function N(D){window.innerWidth<600?window.open(D,"_blank"):(K.value=D,L.value=!0)}function I(D){$.value=D,s.setCollectionInUrl(D)}async function H(D){const j=await u.fetchExerciseBoards(D.exercise_id);if(!j||j.length===0){alert("Could not load exercise boards.");return}const se=Te=>`${Te.collection_id||""}|${Te.deal_subfolder}`,re=new Map;for(const Te of j){const _e=se(Te);re.has(_e)||re.set(_e,[]),re.get(_e).push(Te)}const he=[];for(const[,Te]of re){const _e=Te[0].deal_subfolder,it=Te[0].collection_id,At=_e.includes("/")?_e.split("/").pop():_e;let Le=null;if(it){const Fe=U(it);if(Fe)try{const ct=`${Fe.baseUrl}/${At}.pbn`,vt=await fetch(ct);vt.ok&&(Le=await vt.text())}catch{}}if(!Le)for(const Fe of s.COLLECTIONS)try{const ct=`${Fe.baseUrl}/${At}.pbn`,vt=await fetch(ct);if(vt.ok){Le=await vt.text();break}}catch{}if(!Le){console.warn(`Could not load PBN for subfolder: ${_e}`);continue}const nt=ko(Le),jt=new Set(Te.map(Fe=>Fe.deal_number));for(const Fe of nt)if(jt.has(Fe.boardNumber)){const ct=Te.find(vt=>vt.deal_number===Fe.boardNumber);he.push({...Fe,subfolder:Fe.subfolder||_e,category:Fe.category||_e,_sortOrder:(ct==null?void 0:ct.sort_order)??999})}}if(he.length===0){alert("Could not find any of the assigned boards.");return}he.sort((Te,_e)=>Te._sortOrder-_e._sortOrder),q.value=he,A.value=0,c.loadDeal(he[0]),c.resetStats(),ys().saveLessonBoardNumbers(D.exercise_name,he.map(Te=>Te.boardNumber)),_.value={id:D.exercise_name,name:D.exercise_name,category:"Assignment"}}function U(D){return s.COLLECTIONS.find(j=>j.id===D)}async function Y(D,j){var re;const se=U(D);if(!se)return console.error("Collection not found:",D),!1;try{const he=await fetch(se.tocUrl);if(!he.ok)throw new Error(`Failed to load TOC: ${he.statusText}`);const Ee=await he.json();let Te=null,_e=null;for(const Fe of Ee.categories||[]){const ct=(re=Fe.lessons)==null?void 0:re.find(vt=>vt.id===j);if(ct){Te=ct,_e=Fe;break}}if(!Te)return console.error("Lesson not found in TOC:",j),!1;const it=j.includes("/")?j.split("/").pop():j,At=`${se.baseUrl}/${it}.pbn`,Le=await fetch(At);if(!Le.ok)throw new Error(`Failed to load lesson: ${Le.statusText}`);const nt=await Le.text(),jt=ko(nt);if(jt.length>0){const Fe=jt.map(ds=>({...ds,subfolder:ds.subfolder||j,category:ds.category||_e.name}));q.value=Fe;const ct=s.getDealFromUrl(),vt=ct?Fe.findIndex(ds=>ds.boardNumber===ct):-1;return A.value=vt>=0?vt:0,c.loadDeal(Fe[A.value]),c.resetStats(),_.value={id:j,name:Te.name,category:_e.name},te(),!0}return!1}catch(he){return console.error("Error loading lesson from URL:",he),!1}}return(D,j)=>{var se,re,he,Ee,Te,_e,it,At,Le,nt,jt,Fe,ct,vt,ds,fl;return me.value?(p(),m("div",oT,[r("header",aT,[r("h1",null,b(q.value.length?X.value:de.value),1),r("div",rT,[ye(D_),r("button",{class:"progress-btn",onClick:j[0]||(j[0]=Be=>d.value=!0),title:"View Progress"}," Progress "),r("button",{class:"accomplishments-btn",onClick:j[1]||(j[1]=Be=>v.value=!0),title:"View Accomplishments"}," Accomplishments "),M(l).isTeacher.value?(p(),m("button",{key:0,class:"teacher-btn",onClick:j[2]||(j[2]=Be=>{h.value=!0,g.value=null,y.value=""}),title:"View Students"}," Students ")):F("",!0),q.value.length&&$.value?(p(),m("button",{key:1,class:"lessons-btn",onClick:G,title:"Back to "+((se=U($.value))==null?void 0:se.name)},b((re=U($.value))==null?void 0:re.name),9,lT)):F("",!0),$.value||q.value.length?(p(),m("button",{key:2,class:"lobby-btn",onClick:oe,title:"Return to lobby"}," Lobby ")):F("",!0),$e.value+W.value>0?(p(),m("div",iT,[r("span",cT,b($e.value),1),r("span",uT,b(W.value),1)])):F("",!0),r("div",dT,[xe.value!=="student"?(p(),m("button",{key:0,class:ie(["role-badge","role-"+xe.value]),onClick:oe,title:"Return to "+xe.value+" lobby"},b(xe.value),11,fT)):F("",!0),r("button",{class:"user-btn",onClick:j[3]||(j[3]=Be=>f.value=!0),title:fe.value},b(Se.value),9,pT)])])]),r("main",vT,[ye(C_),ye(__),h.value&&!g.value?(p(),He(VS,{key:0,onClose:j[4]||(j[4]=Be=>h.value=!1),onSelectStudent:j[5]||(j[5]=(Be,$n)=>{g.value=Be,y.value=$n})})):h.value&&g.value?(p(),He(wC,{key:1,studentId:g.value,studentName:y.value,onBack:j[6]||(j[6]=Be=>g.value=null),onNavigateToLesson:J},null,8,["studentId","studentName"])):!q.value.length&&!$.value?(p(),He(j2,{key:2,onSelectCollection:I,onSelectAssignment:H,onShowBecomeTeacher:j[7]||(j[7]=Be=>S.value=!0),onLoadFile:be})):!q.value.length&&$.value?(p(),m("div",mT,[r("h2",null,b(((he=U($.value))==null?void 0:he.name)||$.value),1),j[17]||(j[17]=r("p",{class:"collection-subtitle"},"Select a lesson to begin practicing:",-1)),ye(JC,{visible:!0,inline:!0,collection:U($.value),onLoad:Ae},null,8,["collection"])])):(p(),m("div",hT,[r("div",gT,[q.value.length>1?(p(),He(Wu,{key:0,boardNumbers:q.value.map(Be=>Be.boardNumber),lessonSubfolder:((Ee=w.value)==null?void 0:Ee.subfolder)||((Te=w.value)==null?void 0:Te.category)||"",currentIndex:A.value,forceBoardStatus:T.value,introUrl:B.value,onGoto:x,onOpenIntro:N},null,8,["boardNumbers","lessonSubfolder","currentIndex","forceBoardStatus","introUrl"])):F("",!0),ye(wy,{boardNumber:(_e=w.value)==null?void 0:_e.boardNumber,dealer:(it=w.value)==null?void 0:it.dealer,vulnerable:(At=w.value)==null?void 0:At.vulnerable,contract:(Le=w.value)==null?void 0:Le.contract,declarer:(nt=w.value)==null?void 0:nt.declarer,showContract:M(c).auctionState.auctionComplete||M(c).showOpeningLead.value||M(c).hasSteps.value&&!M(c).hasBidSteps.value,openingLead:M(c).showOpeningLead.value?(jt=w.value)==null?void 0:jt.openingLead:"",totalDeals:q.value.length,currentIndex:A.value,dealBoardNumbers:q.value.map(Be=>Be.boardNumber),onGoto:x},null,8,["boardNumber","dealer","vulnerable","contract","declarer","showContract","openingLead","totalDeals","currentIndex","dealBoardNumbers"]),ye(Ug,{hands:M(c).hands.value,hiddenSeats:M(c).hiddenSeats.value,showHcp:M(c).showHcp.value,compact:!0,clickableSeat:M(c).hasCardChoice.value?M(c).studentSeat.value:null,playedCards:M(c).showcardsPlayedCards.value,onCardClick:ae},null,8,["hands","hiddenSeats","showHcp","clickableSeat","playedCards"])]),r("div",yT,[M(c).showAuctionTable.value?(p(),He(ny,{key:0,bids:M(c).hasBidSteps.value?M(c).auctionState.displayedBids:((Fe=w.value)==null?void 0:Fe.auction)||[],dealer:((ct=w.value)==null?void 0:ct.dealer)||"N",currentBidIndex:M(c).hasBidSteps.value?M(c).auctionState.currentBidIndex:-1,wrongBidIndex:M(c).auctionState.wrongBidIndex,correctBidIndex:M(c).auctionState.correctBidIndex,showTurnIndicator:M(c).hasBidPrompt.value},null,8,["bids","dealer","currentBidIndex","wrongBidIndex","correctBidIndex","showTurnIndicator"])):F("",!0),ye(ki,{visible:!!M(c).auctionState.wrongBid,type:"wrong",wrongBid:M(c).auctionState.wrongBid,correctBid:M(c).auctionState.correctBid,showContinue:!1},null,8,["visible","wrongBid","correctBid"]),ye(ki,{visible:!!M(c).cardChoiceState.wrongCard,type:"wrong",wrongCardCode:M(c).cardChoiceState.wrongCard,correctCardCode:M(c).cardChoiceState.correctCard,showContinue:!1},null,8,["visible","wrongCardCode","correctCardCode"]),M(c).hasSteps.value?(p(),m("div",bT,[r("div",{class:"commentary-text-container",ref_key:"commentaryContainer",ref:k},[(p(!0),m(Q,null,le(M(c).steps.value.slice(0,M(c).currentStepIndex.value),(Be,$n)=>(p(),m(Q,{key:"prev-"+$n},[$n>=M(c).commentaryStartIndex.value?(p(),m(Q,{key:0},[r("span",{class:"narrative-text previous",innerHTML:M(Ys)(M(En)(Be.text))},null,8,_T),Be.type==="bid"&&Be.explanationText?(p(),m("span",{key:0,class:ie(["narrative-text",$n===M(c).currentStepIndex.value-1&&M(c).isBidStep.value&&!M(c).bidAnswered.value?"current":"previous"]),innerHTML:M(Ys)(M(En)(Be.explanationText))},null,10,wT)):F("",!0)],64)):F("",!0)],64))),128)),M(c).currentStep.value?(p(),m("span",{key:0,class:"narrative-text current",innerHTML:M(Ys)(M(En)(M(c).currentStep.value.text))},null,8,ST)):F("",!0),M(c).bidAnswered.value&&((vt=M(c).currentStep.value)!=null&&vt.explanationText)?(p(),m("span",{key:1,class:"narrative-text current",innerHTML:M(Ys)(M(En)(M(c).currentStep.value.explanationText))},null,8,CT)):F("",!0)],512),r("div",$T,[M(c).hasBidPrompt.value?(p(),m("div",kT,[ye(Xg,{lastBid:M(c).lastContractBid.value,canDouble:M(c).canDouble.value,canRedouble:M(c).canRedouble.value,onBid:ne},null,8,["lastBid","canDouble","canRedouble"])])):M(c).hasCardChoice.value?(p(),m("div",xT," Click on the card you would choose ")):F("",!0),M(c).canGoBack.value?(p(),m("button",{key:2,class:"instruction-btn secondary",onClick:ke},"  Back ")):F("",!0),!M(c).isComplete.value&&(M(c).bidAnswered.value||!M(c).hasBidPrompt.value&&!M(c).hasCardChoice.value&&M(c).currentStep.value&&M(c).currentStep.value.type!=="end")?(p(),m("button",{key:3,class:"instruction-btn primary",onClick:j[8]||(j[8]=Be=>M(c).advance())},b(((ds=M(c).currentStep.value)==null?void 0:ds.type)==="rotate"?"Rotate":"Next")+"  ",1)):F("",!0),M(c).isComplete.value&&A.value<q.value.length-1?(p(),m("button",{key:4,class:"next-deal-btn",onClick:C}," Next Deal  ")):F("",!0)])])):(fl=w.value)!=null&&fl.commentary?(p(),m("div",{key:2,class:"display-commentary",innerHTML:M(Ys)(M(En)(M(Zv)(w.value.commentary)))},null,8,AT)):F("",!0),!M(c).hasSteps.value&&M(c).isComplete.value&&A.value<q.value.length-1?(p(),m("div",TT,[r("button",{class:"next-deal-btn",onClick:C}," Next Deal  ")])):F("",!0)])]))]),ye(c_,{visible:f.value,onClose:j[9]||(j[9]=Be=>f.value=!1),onSwitchUser:ee,onLogout:ee,onBecomeTeacher:j[10]||(j[10]=Be=>S.value=!0)},null,8,["visible"]),z.value?(p(),m("div",NT," Account created  your data is encrypted and linked to your email for recovery. ")):F("",!0),d.value?(p(),m("div",{key:1,class:"modal-overlay",onClick:j[12]||(j[12]=tt(Be=>d.value=!1,["self"]))},[ye(Tw,{onClose:j[11]||(j[11]=Be=>d.value=!1)})])):F("",!0),v.value?(p(),m("div",{key:2,class:"modal-overlay",onClick:j[14]||(j[14]=tt(Be=>v.value=!1,["self"]))},[ye(vS,{onClose:j[13]||(j[13]=Be=>v.value=!1),onNavigateToDeal:V})])):F("",!0),ye(s$,{visible:L.value,url:K.value||"",onClose:j[15]||(j[15]=Be=>L.value=!1)},null,8,["visible","url"]),S.value?(p(),He(Z2,{key:3,onClose:j[16]||(j[16]=Be=>S.value=!1),onActivated:ve})):F("",!0),ye(nT)])):(p(),He(Ab,{key:0,onUserReady:Z}))}}},OT=()=>Dp(()=>import("./JoinClassroomView-BgYf0HNN.js"),__vite__mapDeps([0,1])),IT=[{path:"/join/:joinCode",name:"join",component:OT},{path:"/:pathMatch(.*)*",name:"app",component:ET}],PT=jv({history:bv(),routes:IT});typeof crypto<"u"&&!crypto.randomUUID&&(crypto.randomUUID=function(){const e=crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=[...e].map(s=>s.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`});const td=xp(Op);td.use(PT);td.mount("#app");export{we as _,r as a,ye as b,m as c,F as d,Ne as e,no as f,Ke as g,_o as h,uf as i,su as j,Hv as k,p as l,bt as o,O as r,b as t,DT as u,Kd as w};
