# Achievements System

## Overview

Inspired by World of Warcraft's comprehensive achievements system, Bridge Classroom will include achievements that recognize student milestones, proficiency gains, and engagement patterns. Achievements provide:

- **Motivation** - Tangible recognition of progress
- **Discovery** - Expose students to features/content they might not explore
- **Retention** - "Just one more" psychology keeps students practicing
- **Self-Assessment** - Students can see their journey at a glance

## Achievement Categories

### 1. Getting Started
*First steps in the application*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| First Steps | Complete your profile | Register with name and classroom | 5 |
| Eager Student | Complete your first deal | Finish one complete deal (all bid prompts) | 10 |
| Daily Practice | Practice on two different days | Sessions on 2 distinct calendar days | 15 |
| Week One | Practice for a full week | Sessions on 7 distinct days (not necessarily consecutive) | 25 |
| Homework Hero | Complete 10 deals | Total deals completed â‰¥ 10 | 20 |
| Century Club | Complete 100 deals | Total deals completed â‰¥ 100 | 50 |
| Dedicated Student | Complete 500 deals | Total deals completed â‰¥ 500 | 100 |
| Bridge Scholar | Complete all 1,173 deals | Total unique deals completed = 1,173 | 250 |

### 2. Accuracy Achievements
*Recognizing correct bidding*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| First Blood | Get your first bid correct | 1 correct bid | 5 |
| On a Roll | Get 5 bids correct in a row | Current streak â‰¥ 5 | 15 |
| Hot Streak | Get 10 bids correct in a row | Current streak â‰¥ 10 | 25 |
| Perfect Ten | Get 10 bids correct in a row | Current streak = 10 | 30 |
| On Fire | Get 25 bids correct in a row | Current streak â‰¥ 25 | 50 |
| Flawless | Get 50 bids correct in a row | Current streak â‰¥ 50 | 100 |
| Perfectionist | Complete a session with 100% accuracy (min 10 deals) | Session accuracy = 100%, deals â‰¥ 10 | 40 |
| Sharpshooter | Achieve 90% overall accuracy (min 50 deals) | Overall accuracy â‰¥ 90%, total deals â‰¥ 50 | 75 |

### 3. Category Mastery
*Proficiency in specific skill areas*

#### Basic Bidding
| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Major League | Achieve 80% in Major Suit Openings | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Minor Details | Achieve 80% in Minor Suit Openings | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| No Trump Card | Achieve 80% in Notrump Openings | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Basic Training Complete | Achieve 80% in all Basic Bidding categories | All 3 basic categories â‰¥ 80% | 50 |

#### Bidding Conventions
| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Stay, Man! | Achieve 80% in Stayman | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Transfer Student | Achieve 80% in Jacoby Transfers | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Blackwood Master | Achieve 80% in Blackwood | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Roman Emperor | Achieve 80% in Roman Key Card | Category accuracy â‰¥ 80%, min 10 deals | 40 |
| Weak but Proud | Achieve 80% in Weak 2-Bids | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Strong and Silent | Achieve 80% in Strong 2â™£ | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| 2/1 Believer | Achieve 80% in 2-Over-1 | Category accuracy â‰¥ 80%, min 10 deals | 40 |
| Convention Card | Achieve 80% in 5+ convention categories | 5+ convention categories â‰¥ 80% | 75 |
| Convention Expert | Achieve 80% in all 15 convention categories | All 15 categories â‰¥ 80% | 150 |

#### Competitive Bidding
| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Overcaller | Achieve 80% in Overcalls | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Double Agent | Achieve 80% in Takeout Doubles | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Negative Nancy | Achieve 80% in Negative Doubles | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Two-Suited Wonder | Achieve 80% in Michaels/Unusual NT | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Competitor | Achieve 80% in all Competitive categories | All 7 competitive categories â‰¥ 80% | 100 |

#### Declarer Play
| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Smooth Finesse | Achieve 80% in Finessing | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Entry Expert | Achieve 80% in Entry Management | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Hold Up! | Achieve 80% in Holdup Plays | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Squeeze Play | Achieve 80% in Squeeze Plays | Category accuracy â‰¥ 80%, min 10 deals | 50 |
| Trump Whisperer | Achieve 80% in Trump Management | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Declarer Extraordinaire | Achieve 80% in all Declarer Play categories | All 7 declarer categories â‰¥ 80% | 100 |

#### Defense
| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Lead On | Achieve 80% in Opening Leads | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Third Time's the Charm | Achieve 80% in Third Hand Play | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Second Fiddle | Achieve 80% in Second Hand Play | Category accuracy â‰¥ 80%, min 10 deals | 30 |
| Signal Caller | Achieve 80% in Defensive Signals | Category accuracy â‰¥ 80%, min 10 deals | 35 |
| Defensive Specialist | Achieve 80% in all Defense categories | All 4 defense categories â‰¥ 80% | 75 |

### 4. Progress Achievements
*Improvement over time*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Improvement | Improve accuracy by 10% in any category | Category accuracy increased by 10%+ (min 20 deals in each period) | 25 |
| Breakthrough | Improve overall accuracy by 10% | Overall accuracy increased by 10%+ (min 50 deals in each period) | 40 |
| Comeback Kid | Improve a category from <50% to >75% | Category went from <50% to >75% (min 20 deals each) | 50 |
| Steady Progress | Improve accuracy 3 weeks in a row | Week-over-week improvement for 3 consecutive weeks | 60 |
| Rising Star | Improve accuracy 5 weeks in a row | Week-over-week improvement for 5 consecutive weeks | 100 |

### 5. Engagement Achievements
*Participation patterns*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Early Bird | Practice before 9am | Session started before 9:00 AM local time | 10 |
| Night Owl | Practice after 9pm | Session started after 9:00 PM local time | 10 |
| Weekend Warrior | Practice on Saturday and Sunday | Sessions on both Sat and Sun in same weekend | 20 |
| Daily Devotion | Practice 7 days in a row | Sessions on 7 consecutive calendar days | 50 |
| Monthly Regular | Practice at least once every week for a month | At least 1 session each week for 4 consecutive weeks | 40 |
| Semester Star | Practice at least once every week for 3 months | At least 1 session each week for 12 consecutive weeks | 100 |
| Explorer | Try 10 different categories | Deals attempted in 10+ distinct categories | 25 |
| Completionist | Try all 49 categories | Deals attempted in all 49 categories | 75 |
| Deep Diver | Complete 20+ deals in a single category | Any category with 20+ deals completed | 30 |

### 6. Special Achievements
*Unique accomplishments*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| Quick Draw | Complete a deal in under 30 seconds | All bid prompts answered correctly in <30s total | 20 |
| Speed Demon | Complete 10 deals in under 10 minutes | 10 deals completed correctly in single session <10min | 40 |
| Persistence | Get a bid right on the 3rd+ attempt | Correct after 2+ wrong attempts on same prompt | 15 |
| Learned from Mistakes | Miss a bid, then get same deal type right later | Wrong on deal, then correct on same category deal later in session | 20 |
| Perfect Session | Complete a full category with 100% accuracy | All deals in a category completed with 100% (min 10 deals) | 100 |
| Baker's Dozen | Complete 13 deals in one session | Single session with 13+ deals | 25 |
| Marathon | Practice for over an hour | Single session duration > 60 minutes | 30 |

### 7. Meta Achievements
*Achievements about achievements*

| Achievement | Description | Criteria | Points |
|-------------|-------------|----------|--------|
| First Achievement | Earn your first achievement | Total achievements â‰¥ 1 (excluding this one) | 5 |
| Achievement Hunter | Earn 10 achievements | Total achievements â‰¥ 10 | 25 |
| Overachiever | Earn 25 achievements | Total achievements â‰¥ 25 | 50 |
| Achievement Unlocked | Earn 50 achievements | Total achievements â‰¥ 50 | 100 |
| Completionist | Earn all achievements | All achievements unlocked | 500 |

---

## Achievement Data Schema

### Achievement Definition
```javascript
{
  "id": "century_club",
  "name": "Century Club",
  "description": "Complete 100 deals",
  "category": "getting_started",
  "icon": "trophy-100",           // Icon identifier
  "points": 50,
  "criteria": {
    "type": "threshold",          // threshold, streak, compound, progress
    "metric": "total_deals_completed",
    "threshold": 100
  },
  "hidden": false,                // Hidden until unlocked?
  "repeatable": false             // Can be earned multiple times?
}
```

### Achievement Progress (per user)
```javascript
{
  "achievement_id": "century_club",
  "user_id": "uuid",
  "status": "in_progress",        // locked, in_progress, unlocked
  "progress": {
    "current": 47,
    "target": 100,
    "percentage": 47
  },
  "unlocked_at": null,            // ISO8601 when earned
  "notified": false               // Has user seen the unlock notification?
}
```

### Achievement Unlock Record
```javascript
{
  "id": "unlock-uuid",
  "user_id": "uuid",
  "achievement_id": "century_club",
  "unlocked_at": "2026-02-15T14:30:00Z",
  "context": {                    // What triggered it
    "deal_id": "100Deals/deal047",
    "session_id": "session-uuid"
  },
  "points_earned": 50
}
```

---

## Criteria Types

### 1. Threshold
Simple numeric comparison.

```javascript
{
  "type": "threshold",
  "metric": "total_deals_completed",
  "threshold": 100,
  "comparison": "gte"             // gte, gt, lte, lt, eq
}
```

**Metrics available:**
- `total_deals_completed`
- `total_correct_bids`
- `overall_accuracy_percent`
- `current_streak`
- `max_streak`
- `total_sessions`
- `distinct_days_practiced`
- `total_practice_time_minutes`
- `categories_attempted`
- `categories_mastered` (â‰¥80%)
- `total_achievements`
- `total_points`

### 2. Category Threshold
Threshold within a specific category.

```javascript
{
  "type": "category_threshold",
  "category": "bidding_conventions/stayman",  // or category group
  "metric": "accuracy_percent",
  "threshold": 80,
  "min_deals": 10                             // Minimum deals to qualify
}
```

### 3. Streak
Consecutive correct answers or consecutive days.

```javascript
{
  "type": "streak",
  "streak_type": "correct_bids",              // or "consecutive_days"
  "threshold": 10
}
```

### 4. Compound
Multiple conditions that must all be met.

```javascript
{
  "type": "compound",
  "operator": "and",                          // and, or
  "conditions": [
    {
      "type": "threshold",
      "metric": "session_accuracy_percent",
      "threshold": 100
    },
    {
      "type": "threshold", 
      "metric": "session_deals_completed",
      "threshold": 10
    }
  ]
}
```

### 5. Progress
Improvement over time.

```javascript
{
  "type": "progress",
  "metric": "category_accuracy",
  "category": "any",                          // "any" or specific category
  "improvement": 10,                          // Percentage points
  "period_deals_min": 20                      // Min deals in each comparison period
}
```

### 6. Time-Based
Time of day or duration conditions.

```javascript
{
  "type": "time_based",
  "condition": "session_start_before",
  "time": "09:00"                             // Local time
}
```

---

## UI Components

### Achievement Notification (Toast)
When an achievement is unlocked, show a celebratory notification:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Achievement Unlocked!               â”‚
â”‚                                         â”‚
â”‚  [ICON]  Century Club                   â”‚
â”‚          Complete 100 deals             â”‚
â”‚                                         â”‚
â”‚          +50 points                     â”‚
â”‚                                         â”‚
â”‚                        [View All]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Achievement Badge (Compact)
For display in lists:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ†]  Century Club       â”‚
â”‚        100/100 âœ“          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Achievement Detail Card
When clicking on an achievement:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚              [LARGE ICON]                               â”‚
â”‚                                                         â”‚
â”‚              Century Club                               â”‚
â”‚              â”â”â”â”â”â”â”â”â”â”â”â”â”                              â”‚
â”‚                                                         â”‚
â”‚  Complete 100 deals                                     â”‚
â”‚                                                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  67%                    â”‚
â”‚  67 / 100 deals                                         â”‚
â”‚                                                         â”‚
â”‚  Category: Getting Started                              â”‚
â”‚  Points: 50                                             â”‚
â”‚                                                         â”‚
â”‚  Status: In Progress                                    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Achievements Page
Full achievements browser:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Achievements                          Total Points: 245        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  [All] [Getting Started] [Accuracy] [Mastery] [Progress] [...]  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GETTING STARTED                           3/8 unlocked â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  âœ“ First Steps          âœ“ Eager Student   âœ“ Daily...   â”‚   â”‚
â”‚  â”‚  â—‹ Week One             â—‹ Homework Hero   â—‹ Century... â”‚   â”‚
â”‚  â”‚  â—‹ Dedicated Student    â—‹ Bridge Scholar               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ACCURACY                                  1/8 unlocked â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  âœ“ First Blood          â—‹ On a Roll       â—‹ Hot Streak â”‚   â”‚
â”‚  â”‚  â—‹ Perfect Ten          â—‹ On Fire         â—‹ Flawless   â”‚   â”‚
â”‚  â”‚  ...                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ... more categories ...                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Progress Summary (Dashboard Widget)
Compact view for main dashboard:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† Achievements                        â”‚
â”‚                                         â”‚
â”‚  12 / 75 unlocked                       â”‚
â”‚  245 points                             â”‚
â”‚                                         â”‚
â”‚  Recent:                                â”‚
â”‚  âœ“ On a Roll (5 streak)                 â”‚
â”‚  âœ“ Transfer Student (80% Transfers)     â”‚
â”‚                                         â”‚
â”‚  Almost there:                          â”‚
â”‚  â—‹ Century Club (67/100)                â”‚
â”‚  â—‹ Hot Streak (7/10)                    â”‚
â”‚                                         â”‚
â”‚              [View All â†’]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation Notes

### Achievement Evaluation

Achievements should be evaluated:
1. **After each bid** - For streak and accuracy achievements
2. **After each deal** - For completion and session achievements
3. **After each session** - For time-based and engagement achievements
4. **Daily** - For consecutive day achievements

### Performance Considerations

- Cache achievement progress locally
- Batch achievement checks (don't check all 75 after every bid)
- Group achievements by trigger type
- Only re-evaluate affected achievements

### Achievement Tiers (Future Enhancement)

Consider bronze/silver/gold tiers for scalable achievements:

```
Century Club Bronze   - Complete 100 deals   (50 pts)
Century Club Silver   - Complete 500 deals   (100 pts)
Century Club Gold     - Complete 1000 deals  (200 pts)
```

### Hidden Achievements

Some achievements could be hidden until unlocked for surprise/delight:
- Quick Draw (complete deal in <30 seconds)
- Marathon (practice for over an hour)
- Night Owl / Early Bird

### Teacher View

Teacher dashboard could show:
- Achievement leaderboard by classroom
- Which achievements students are close to
- Engagement patterns based on achievement progress

---

## Points System

### Point Totals by Category

| Category | Achievements | Total Points |
|----------|--------------|--------------|
| Getting Started | 8 | 475 |
| Accuracy | 8 | 340 |
| Category Mastery | ~35 | ~1,500 |
| Progress | 5 | 275 |
| Engagement | 10 | 380 |
| Special | 7 | 250 |
| Meta | 5 | 680 |
| **Total** | **~78** | **~3,900** |

### Point Milestones (Future)

Could unlock rewards at point thresholds:
- 100 points - Custom avatar color
- 500 points - Achievement showcase on profile
- 1000 points - "Expert" badge
- 2500 points - "Master" badge

---

## Database Schema

```sql
-- Achievement definitions (could also be static JSON)
CREATE TABLE achievement_definitions (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT NOT NULL,
  icon TEXT,
  points INTEGER NOT NULL DEFAULT 0,
  criteria_json TEXT NOT NULL,
  hidden BOOLEAN NOT NULL DEFAULT false,
  repeatable BOOLEAN NOT NULL DEFAULT false,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- User achievement progress
CREATE TABLE user_achievements (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL REFERENCES users(id),
  achievement_id TEXT NOT NULL REFERENCES achievement_definitions(id),
  status TEXT NOT NULL DEFAULT 'locked',  -- locked, in_progress, unlocked
  progress_json TEXT,                      -- Current progress data
  unlocked_at TIMESTAMP,
  context_json TEXT,                       -- What triggered unlock
  notified BOOLEAN NOT NULL DEFAULT false,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  UNIQUE(user_id, achievement_id)
);

-- Indexes
CREATE INDEX idx_user_achievements_user ON user_achievements(user_id);
CREATE INDEX idx_user_achievements_status ON user_achievements(status);
```

---

## Future Enhancements

1. **Achievement Sharing** - Share unlocked achievements to social media
2. **Classroom Competitions** - First in class to unlock specific achievements
3. **Seasonal Achievements** - Holiday or time-limited achievements
4. **Partner Achievements** - Achievements earned together with bridge partner
5. **Teacher-Created Achievements** - Custom achievements for specific classes
6. **Achievement Badges** - Visual badges for profile display
